import{b,a as w,r as c,u as y,d as C,j as e,N as S,L as k}from"./index-B4rr4Fr9.js";import{B as i}from"./button-C40VjUZp.js";import{I as l}from"./input-B1SYo6-5.js";import{C as I,a as q,b as E,d as L}from"./card-BYE7O1Vr.js";import{S as U}from"./smartphone-ClBTuGN9.js";function B(){const[u]=b(),p=w(),h=u.get("mode")||"signin",[t,x]=c.useState(h==="signup"),[m,d]=c.useState(!1),[a,n]=c.useState({email:"alkaptin7878@mail.ru",password:"01123456",fullName:"",phone:""}),{signIn:f,signUp:g,user:j}=y(),{toast:o}=C();if(j)return e.jsx(S,{to:"/dashboard-redirect",replace:!0});const v=async s=>{s.preventDefault(),d(!0);try{if(t){const{error:r}=await g(a.email,a.password,{full_name:a.fullName,phone:a.phone});if(r)throw r;o({title:"تم إنشاء الحساب بنجاح!",description:"تحقق من بريدك الإلكتروني لتفعيل الحساب"});const N=a.fullName||"التاجر الجديد";p(`/user/account-setup?user_name=${encodeURIComponent(N)}`)}else{const{error:r}=await f(a.email,a.password);if(r)throw r;o({title:"مرحباً بك!",description:"تم تسجيل الدخول بنجاح، جاري إعداد حسابك..."})}}catch(r){o({title:"خطأ",description:r.message||"حدث خطأ أثناء المعالجة",variant:"destructive"})}finally{d(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary/10 via-background to-secondary/10 flex items-center justify-center p-4",children:e.jsxs(I,{className:"w-full max-w-md",children:[e.jsxs(q,{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[e.jsx("div",{className:"h-8 w-8 gradient-primary rounded-lg flex items-center justify-center",children:e.jsx(U,{className:"h-5 w-5 text-white"})}),e.jsx("span",{className:"text-xl font-bold",children:"CashyLink"})]}),e.jsx(E,{children:t?"إنشاء حساب جديد":"تسجيل الدخول"})]}),e.jsxs(L,{children:[e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[t&&e.jsxs(e.Fragment,{children:[e.jsx(l,{placeholder:"الاسم الكامل",value:a.fullName,onChange:s=>n({...a,fullName:s.target.value}),required:!0}),e.jsx(l,{placeholder:"رقم الهاتف",value:a.phone,onChange:s=>n({...a,phone:s.target.value})})]}),e.jsx(l,{type:"email",placeholder:"البريد الإلكتروني",value:a.email,onChange:s=>n({...a,email:s.target.value}),required:!0}),e.jsx(l,{type:"password",placeholder:"كلمة المرور",value:a.password,onChange:s=>n({...a,password:s.target.value}),required:!0}),e.jsx(i,{type:"submit",className:"w-full btn-primary",disabled:m,children:m?"جاري المعالجة...":t?"إنشاء الحساب":"تسجيل الدخول"}),e.jsx(i,{type:"button",variant:"secondary",className:"w-full mt-2",onClick:()=>{n({email:"alkaptin7878@mail.ru",password:"01123456",fullName:"",phone:""}),setTimeout(()=>{const s=document.querySelector("form");s&&s.dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))},100)},children:"تسجيل دخول كمدير"})]}),e.jsxs("div",{className:"text-center mt-6",children:[e.jsx("span",{className:"text-muted-foreground",children:t?"لديك حساب؟":"ليس لديك حساب؟"}),e.jsx(i,{variant:"link",onClick:()=>x(!t),className:"text-primary",children:t?"تسجيل الدخول":"إنشاء حساب"})]}),e.jsx("div",{className:"text-center mt-4",children:e.jsx(k,{to:"/",children:e.jsx(i,{variant:"ghost",className:"text-muted-foreground",children:"العودة للصفحة الرئيسية"})})})]})]})})}export{B as default};
