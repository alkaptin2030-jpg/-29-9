import{b as A,r as n,u as U,d as I,a as D,j as e,L as $}from"./index-uPMs_SiV.js";import{C as M,a as B,b as T,d as W}from"./card-DLfFpd5q.js";import{B as H}from"./button-CT9D47wc.js";import{I as m}from"./input-9TEX77Cv.js";import{L as c}from"./label-BYpBA-ru.js";import{A as N,a as b}from"./alert-DdoTAeDx.js";import{W as O}from"./wallet-orzipGOZ.js";import{U as q}from"./user-plus-B7WUbe1e.js";import{S as z}from"./share-2-C9QRRP03.js";import{U as G}from"./user-Ds0_EC87.js";import{P as J}from"./phone-sZc6bnvC.js";import{S as K}from"./store-BPv1ARsw.js";import{M as Q}from"./mail-BUEorUYS.js";import{L as j}from"./lock-fExlWLc7.js";import{E as w,a as v}from"./eye-bjoK2-ED.js";import{A as V}from"./arrow-right-xuJElq1n.js";const he=()=>{const[y]=A(),i=y.get("ref"),[s,C]=n.useState({name:"",email:"",password:"",confirmPassword:"",phone:"",shopName:""}),[x,P]=n.useState(!1),[p,S]=n.useState(!1),[t,f]=n.useState(!1),[u,r]=n.useState(""),[g,F]=n.useState(null),{signUp:R}=U(),{toast:h}=I(),E=D();n.useEffect(()=>{i&&(F(`تم استخدام رمز الإحالة: ${i}`),h({title:"رمز الإحالة مُطبق",description:`تم تطبيق رمز الإحالة: ${i}`}))},[i,h]);const d=(a,o)=>{C(l=>({...l,[a]:o}))},L=()=>!s.name||!s.email||!s.password||!s.confirmPassword||!s.phone||!s.shopName?(r("يرجى ملء جميع الحقول"),!1):s.name.length<2?(r("يجب أن يكون الاسم أكثر من حرفين"),!1):s.shopName.length<2?(r("يجب أن يكون اسم المحل أكثر من حرفين"),!1):/^[0-9]{10,15}$/.test(s.phone)?s.password.length<6?(r("يجب أن تكون كلمة المرور 6 أحرف على الأقل"),!1):s.password!==s.confirmPassword?(r("كلمات المرور غير متطابقة"),!1):/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email)?!0:(r("البريد الإلكتروني غير صالح"),!1):(r("رقم الجوال يجب أن يكون من 10 إلى 15 رقم"),!1),k=async a=>{if(a.preventDefault(),r(""),!!L()){f(!0);try{await R(s.email,s.password,s.name,s.phone,s.shopName,i||void 0),h({title:"تم إنشاء الحساب بنجاح",description:i?"تم إنشاء الحساب بنجاح مع رمز الإحالة":"سيتم مراجعة حسابك من قبل الإدارة قبل تفعيله"}),E("/dashboard-redirect")}catch(o){console.error("Registration error:",o);let l="حدث خطأ أثناء إنشاء الحساب";o.code==="auth/email-already-in-use"?l="البريد الإلكتروني مستخدم بالفعل":o.code==="auth/invalid-email"?l="البريد الإلكتروني غير صالح":o.code==="auth/weak-password"?l="كلمة المرور ضعيفة جداً":o.code==="auth/operation-not-allowed"&&(l="إنشاء الحسابات غير مفعل حالياً"),r(l),h({title:"خطأ في إنشاء الحساب",description:l,variant:"destructive"})}finally{f(!1)}}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8 fade-in-up",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full mb-4 shadow-lg",children:e.jsx(O,{className:"h-8 w-8 text-white"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"كاشي لينك"}),e.jsx("p",{className:"text-gray-600",children:"نظام إدارة المحافظ الإلكترونية"})]}),e.jsxs(M,{className:"shadow-xl border-0 bg-white/80 backdrop-blur-sm card-glow fade-in-up",children:[e.jsxs(B,{className:"text-center pb-4",children:[e.jsxs(T,{className:"text-2xl font-bold text-gray-900 flex items-center justify-center gap-2",children:[e.jsx(q,{className:"h-6 w-6 text-green-600"}),"إنشاء حساب جديد"]}),e.jsx("p",{className:"text-gray-600 text-sm mt-2",children:"أدخل بياناتك لإنشاء حساب جديد"})]}),e.jsxs(W,{className:"space-y-6",children:[g&&e.jsxs(N,{className:"fade-in-up border-green-200 bg-green-50",children:[e.jsx(z,{className:"h-4 w-4 text-green-600"}),e.jsx(b,{className:"text-green-700",children:g})]}),u&&e.jsx(N,{variant:"destructive",className:"fade-in-up",children:e.jsx(b,{children:u})}),e.jsxs("form",{onSubmit:k,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2 fade-in-up",children:[e.jsx(c,{htmlFor:"name",className:"text-sm font-medium text-gray-700",children:"الاسم الكامل"}),e.jsxs("div",{className:"relative",children:[e.jsx(G,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(m,{id:"name",type:"text",value:s.name,onChange:a=>d("name",a.target.value),placeholder:"أدخل اسمك الكامل",className:"pl-10 h-12 text-sm transition-all duration-300 hover:border-green-400 focus:border-green-500 bg-white/50",disabled:t})]})]}),e.jsxs("div",{className:"space-y-2 fade-in-up",children:[e.jsx(c,{htmlFor:"phone",className:"text-sm font-medium text-gray-700",children:"رقم الجوال"}),e.jsxs("div",{className:"relative",children:[e.jsx(J,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(m,{id:"phone",type:"tel",value:s.phone,onChange:a=>d("phone",a.target.value),placeholder:"أدخل رقم الجوال (10-15 رقم)",className:"pl-10 h-12 text-sm transition-all duration-300 hover:border-green-400 focus:border-green-500 bg-white/50",disabled:t})]})]}),e.jsxs("div",{className:"space-y-2 fade-in-up",children:[e.jsx(c,{htmlFor:"shopName",className:"text-sm font-medium text-gray-700",children:"اسم المحل"}),e.jsxs("div",{className:"relative",children:[e.jsx(K,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(m,{id:"shopName",type:"text",value:s.shopName,onChange:a=>d("shopName",a.target.value),placeholder:"أدخل اسم المحل الخاص بك",className:"pl-10 h-12 text-sm transition-all duration-300 hover:border-green-400 focus:border-green-500 bg-white/50",disabled:t})]})]}),e.jsxs("div",{className:"space-y-2 fade-in-up",children:[e.jsx(c,{htmlFor:"email",className:"text-sm font-medium text-gray-700",children:"البريد الإلكتروني"}),e.jsxs("div",{className:"relative",children:[e.jsx(Q,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(m,{id:"email",type:"email",value:s.email,onChange:a=>d("email",a.target.value),placeholder:"أدخل بريدك الإلكتروني",className:"pl-10 h-12 text-sm transition-all duration-300 hover:border-green-400 focus:border-green-500 bg-white/50",disabled:t})]})]}),e.jsxs("div",{className:"space-y-2 fade-in-up",children:[e.jsx(c,{htmlFor:"password",className:"text-sm font-medium text-gray-700",children:"كلمة المرور"}),e.jsxs("div",{className:"relative",children:[e.jsx(j,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(m,{id:"password",type:x?"text":"password",value:s.password,onChange:a=>d("password",a.target.value),placeholder:"أدخل كلمة المرور (6 أحرف على الأقل)",className:"pl-10 pr-10 h-12 text-sm transition-all duration-300 hover:border-green-400 focus:border-green-500 bg-white/50",autoComplete:"new-password",disabled:t}),e.jsx("button",{type:"button",onClick:()=>P(!x),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",disabled:t,children:x?e.jsx(w,{className:"h-4 w-4"}):e.jsx(v,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-2 fade-in-up",children:[e.jsx(c,{htmlFor:"confirmPassword",className:"text-sm font-medium text-gray-700",children:"تأكيد كلمة المرور"}),e.jsxs("div",{className:"relative",children:[e.jsx(j,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(m,{id:"confirmPassword",type:p?"text":"password",value:s.confirmPassword,onChange:a=>d("confirmPassword",a.target.value),placeholder:"أعد إدخال كلمة المرور",className:"pl-10 pr-10 h-12 text-sm transition-all duration-300 hover:border-green-400 focus:border-green-500 bg-white/50",autoComplete:"new-password",disabled:t}),e.jsx("button",{type:"button",onClick:()=>S(!p),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",disabled:t,children:p?e.jsx(w,{className:"h-4 w-4"}):e.jsx(v,{className:"h-4 w-4"})})]})]}),e.jsx(H,{type:"submit",disabled:t||!s.name||!s.email||!s.password||!s.confirmPassword||!s.phone||!s.shopName,className:"w-full h-12 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-medium transition-all duration-300 btn-bounce hover-glow fade-in-up",children:t?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"جاري إنشاء الحساب..."]}):e.jsxs("div",{className:"flex items-center gap-2",children:["إنشاء حساب جديد",e.jsx(V,{className:"h-4 w-4"})]})})]}),e.jsx("div",{className:"text-center pt-4 border-t border-gray-200 fade-in-up",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["لديك حساب بالفعل؟"," ",e.jsx($,{to:"/user/login",className:"text-green-600 hover:text-green-700 font-medium transition-colors hover:underline",children:"تسجيل الدخول"})]})})]})]}),e.jsx("div",{className:"text-center mt-8 fade-in-up",children:e.jsx("p",{className:"text-xs text-gray-500",children:"© 2024 كاشي لينك. جميع الحقوق محفوظة."})})]})})};export{he as default};
