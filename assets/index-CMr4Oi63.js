const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./LandingPage-Kd8aISLM.js","./card-OPazuP08.js","./BrandLogo-DF-8oJVl.js","./brandingService-Cutxj4hb.js","./whatsappService-xAazA0rf.js","./arrow-left-Bz3Pvwao.js","./star-DWj6_sar.js","./crown-DVKczZLc.js","./download-BD1sYLif.js","./zap-xL-GYToo.js","./shield-DFDtw70V.js","./chart-column-BolFQOz2.js","./circle-check-big-CFmkrR2f.js","./SubscriptionsPage-Bh633QBC.js","./contentService-Bv0bPuoh.js","./calendar-BYCE6wLZ.js","./AuthPage-CacG4caj.js","./TopUpPage-CaXdhh4j.js","./select-BNThciT7.js","./Combination-TjOtKNsl.js","./index-DoNR_1Mu.js","./AdminTopupsPage-H7N1NJtb.js","./AdminNotificationsPage-D4_79QzO.js","./label-B7SL5F9X.js","./textarea-f8Kbujph.js","./link-B3-tdmD4.js","./UserRegisterPage-CLoQmUfC.js","./alert-DnWWJyQ1.js","./wallet-DvkjPJj2.js","./user-plus-7Gh61Glj.js","./share-2-ki1-0EBK.js","./phone-eS4UHcQk.js","./store-BobsStL1.js","./UserAccountSetupPage-BJa5B1QY.js","./DashboardLoginPage-BrZLpQ49.js","./ProtectedDashboard-DxINTsb3.js","./badge-BE93kY55.js","./MasterPinDialog-D1NM4cce.js","./dialog-BqmsXYmq.js","./circle-alert-3uX3buCB.js","./profitService-DZQLszRg.js","./dollar-sign-H3syPBeb.js","./circle-x-CWSqtEpz.js","./ProtectedUserDashboard-BoVGgUpp.js","./broadcastService-IEn20a7V.js","./MerchantDashboard-5KFzuVKX.js","./dropdown-menu-SeZtQJVy.js","./index-CeFZWSbA.js","./WalletsManagement-BLya_4kn.js","./progress-BgUXyrzN.js","./walletDailyLimitsService-0xjNslf8.js","./square-pen-btHO99iB.js","./PendingApprovalPage-B6IJG1m_.js","./gift-Bhk0Us-z.js","./refresh-cw-CBZOsUna.js","./AdminLogin-CPF5kgVb.js","./ProtectedAdminDashboard-CNv2e1E7.js","./ProfileIcon-pzfAvfqG.js","./avatars-DXQj4TBc.js","./switch-DAhGRWGn.js","./separator-DckENC5w.js","./copy-BWivcl1s.js","./users-jz7u0qMM.js","./AuthTestPage-DI34QKRw.js","./ProfileSettingsPage-DPE_UJTx.js","./walletSelectionPinService-UPCoqhIa.js","./TransactionsPage-CSzonH00.js","./MaintenanceDialog-BUgYt8vg.js","./WalletAdditionPage-BUFwLN3k.js","./ReferralsPage-BoJVH_ao.js","./CPanelPage-c6dGq_iM.js","./CPanelLoginPage-C92GOY7n.js"])))=>i.map(i=>d[i]);
var LN=Object.defineProperty;var h0=t=>{throw TypeError(t)};var MN=(t,e,n)=>e in t?LN(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var f0=(t,e,n)=>MN(t,typeof e!="symbol"?e+"":e,n),$m=(t,e,n)=>e.has(t)||h0("Cannot "+n);var z=(t,e,n)=>($m(t,e,"read from private field"),n?n.call(t):e.get(t)),Oe=(t,e,n)=>e.has(t)?h0("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),ye=(t,e,n,r)=>($m(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Yt=(t,e,n)=>($m(t,e,"access private method"),n);var Wd=(t,e,n,r)=>({set _(s){ye(t,e,s,n)},get _(){return z(t,e,r)}});function FN(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function gb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var yb={exports:{}},_p={},vb={exports:{}},Pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ad=Symbol.for("react.element"),UN=Symbol.for("react.portal"),jN=Symbol.for("react.fragment"),BN=Symbol.for("react.strict_mode"),$N=Symbol.for("react.profiler"),zN=Symbol.for("react.provider"),qN=Symbol.for("react.context"),HN=Symbol.for("react.forward_ref"),WN=Symbol.for("react.suspense"),KN=Symbol.for("react.memo"),GN=Symbol.for("react.lazy"),p0=Symbol.iterator;function QN(t){return t===null||typeof t!="object"?null:(t=p0&&t[p0]||t["@@iterator"],typeof t=="function"?t:null)}var _b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},wb=Object.assign,Eb={};function Fl(t,e,n){this.props=t,this.context=e,this.refs=Eb,this.updater=n||_b}Fl.prototype.isReactComponent={};Fl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Fl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Tb(){}Tb.prototype=Fl.prototype;function Wv(t,e,n){this.props=t,this.context=e,this.refs=Eb,this.updater=n||_b}var Kv=Wv.prototype=new Tb;Kv.constructor=Wv;wb(Kv,Fl.prototype);Kv.isPureReactComponent=!0;var m0=Array.isArray,Ib=Object.prototype.hasOwnProperty,Gv={current:null},Sb={key:!0,ref:!0,__self:!0,__source:!0};function Ab(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Ib.call(e,r)&&!Sb.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:ad,type:t,key:i,ref:o,props:s,_owner:Gv.current}}function YN(t,e){return{$$typeof:ad,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Qv(t){return typeof t=="object"&&t!==null&&t.$$typeof===ad}function XN(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var g0=/\/+/g;function zm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?XN(""+t.key):e.toString(36)}function kh(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ad:case UN:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+zm(o,0):r,m0(s)?(n="",t!=null&&(n=t.replace(g0,"$&/")+"/"),kh(s,e,n,"",function(c){return c})):s!=null&&(Qv(s)&&(s=YN(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(g0,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",m0(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+zm(i,a);o+=kh(i,e,n,l,s)}else if(l=QN(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+zm(i,a++),o+=kh(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Kd(t,e,n){if(t==null)return t;var r=[],s=0;return kh(t,r,"","",function(i){return e.call(n,i,s++)}),r}function JN(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var gn={current:null},Dh={transition:null},ZN={ReactCurrentDispatcher:gn,ReactCurrentBatchConfig:Dh,ReactCurrentOwner:Gv};function bb(){throw Error("act(...) is not supported in production builds of React.")}Pe.Children={map:Kd,forEach:function(t,e,n){Kd(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Kd(t,function(){e++}),e},toArray:function(t){return Kd(t,function(e){return e})||[]},only:function(t){if(!Qv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Pe.Component=Fl;Pe.Fragment=jN;Pe.Profiler=$N;Pe.PureComponent=Wv;Pe.StrictMode=BN;Pe.Suspense=WN;Pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZN;Pe.act=bb;Pe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=wb({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Gv.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Ib.call(e,l)&&!Sb.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:ad,type:t.type,key:s,ref:i,props:r,_owner:o}};Pe.createContext=function(t){return t={$$typeof:qN,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:zN,_context:t},t.Consumer=t};Pe.createElement=Ab;Pe.createFactory=function(t){var e=Ab.bind(null,t);return e.type=t,e};Pe.createRef=function(){return{current:null}};Pe.forwardRef=function(t){return{$$typeof:HN,render:t}};Pe.isValidElement=Qv;Pe.lazy=function(t){return{$$typeof:GN,_payload:{_status:-1,_result:t},_init:JN}};Pe.memo=function(t,e){return{$$typeof:KN,type:t,compare:e===void 0?null:e}};Pe.startTransition=function(t){var e=Dh.transition;Dh.transition={};try{t()}finally{Dh.transition=e}};Pe.unstable_act=bb;Pe.useCallback=function(t,e){return gn.current.useCallback(t,e)};Pe.useContext=function(t){return gn.current.useContext(t)};Pe.useDebugValue=function(){};Pe.useDeferredValue=function(t){return gn.current.useDeferredValue(t)};Pe.useEffect=function(t,e){return gn.current.useEffect(t,e)};Pe.useId=function(){return gn.current.useId()};Pe.useImperativeHandle=function(t,e,n){return gn.current.useImperativeHandle(t,e,n)};Pe.useInsertionEffect=function(t,e){return gn.current.useInsertionEffect(t,e)};Pe.useLayoutEffect=function(t,e){return gn.current.useLayoutEffect(t,e)};Pe.useMemo=function(t,e){return gn.current.useMemo(t,e)};Pe.useReducer=function(t,e,n){return gn.current.useReducer(t,e,n)};Pe.useRef=function(t){return gn.current.useRef(t)};Pe.useState=function(t){return gn.current.useState(t)};Pe.useSyncExternalStore=function(t,e,n){return gn.current.useSyncExternalStore(t,e,n)};Pe.useTransition=function(){return gn.current.useTransition()};Pe.version="18.3.1";vb.exports=Pe;var A=vb.exports;const $=gb(A),xb=FN({__proto__:null,default:$},[A]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e2=A,t2=Symbol.for("react.element"),n2=Symbol.for("react.fragment"),r2=Object.prototype.hasOwnProperty,s2=e2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i2={key:!0,ref:!0,__self:!0,__source:!0};function Rb(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)r2.call(e,r)&&!i2.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:t2,type:t,key:i,ref:o,props:s,_owner:s2.current}}_p.Fragment=n2;_p.jsx=Rb;_p.jsxs=Rb;yb.exports=_p;var x=yb.exports,Pb={exports:{}},Gn={},Cb={exports:{}},kb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,U){var K=F.length;F.push(U);e:for(;0<K;){var ce=K-1>>>1,ee=F[ce];if(0<s(ee,U))F[ce]=U,F[K]=ee,K=ce;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var U=F[0],K=F.pop();if(K!==U){F[0]=K;e:for(var ce=0,ee=F.length,oe=ee>>>1;ce<oe;){var ae=2*(ce+1)-1,Ie=F[ae],Ye=ae+1,ue=F[Ye];if(0>s(Ie,K))Ye<ee&&0>s(ue,Ie)?(F[ce]=ue,F[Ye]=K,ce=Ye):(F[ce]=Ie,F[ae]=K,ce=ae);else if(Ye<ee&&0>s(ue,K))F[ce]=ue,F[Ye]=K,ce=Ye;else break e}}return U}function s(F,U){var K=F.sortIndex-U.sortIndex;return K!==0?K:F.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,f=3,p=!1,E=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(F){for(var U=n(c);U!==null;){if(U.callback===null)r(c);else if(U.startTime<=F)r(c),U.sortIndex=U.expirationTime,e(l,U);else break;U=n(c)}}function R(F){if(g=!1,T(F),!E)if(n(l)!==null)E=!0,ie(O);else{var U=n(c);U!==null&&Y(R,U.startTime-F)}}function O(F,U){E=!1,g&&(g=!1,_(I),I=-1),p=!0;var K=f;try{for(T(U),h=n(l);h!==null&&(!(h.expirationTime>U)||F&&!P());){var ce=h.callback;if(typeof ce=="function"){h.callback=null,f=h.priorityLevel;var ee=ce(h.expirationTime<=U);U=t.unstable_now(),typeof ee=="function"?h.callback=ee:h===n(l)&&r(l),T(U)}else r(l);h=n(l)}if(h!==null)var oe=!0;else{var ae=n(c);ae!==null&&Y(R,ae.startTime-U),oe=!1}return oe}finally{h=null,f=K,p=!1}}var V=!1,S=null,I=-1,b=5,D=-1;function P(){return!(t.unstable_now()-D<b)}function N(){if(S!==null){var F=t.unstable_now();D=F;var U=!0;try{U=S(!0,F)}finally{U?k():(V=!1,S=null)}}else V=!1}var k;if(typeof w=="function")k=function(){w(N)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,Z=q.port2;q.port1.onmessage=N,k=function(){Z.postMessage(null)}}else k=function(){y(N,0)};function ie(F){S=F,V||(V=!0,k())}function Y(F,U){I=y(function(){F(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){E||p||(E=!0,ie(O))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(F){switch(f){case 1:case 2:case 3:var U=3;break;default:U=f}var K=f;f=U;try{return F()}finally{f=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,U){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var K=f;f=F;try{return U()}finally{f=K}},t.unstable_scheduleCallback=function(F,U,K){var ce=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?ce+K:ce):K=ce,F){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=K+ee,F={id:d++,callback:U,priorityLevel:F,startTime:K,expirationTime:ee,sortIndex:-1},K>ce?(F.sortIndex=K,e(c,F),n(l)===null&&F===n(c)&&(g?(_(I),I=-1):g=!0,Y(R,K-ce))):(F.sortIndex=ee,e(l,F),E||p||(E=!0,ie(O))),F},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(F){var U=f;return function(){var K=f;f=U;try{return F.apply(this,arguments)}finally{f=K}}}})(kb);Cb.exports=kb;var o2=Cb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a2=A,Wn=o2;function G(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Db=new Set,gu={};function ca(t,e){ll(t,e),ll(t+"Capture",e)}function ll(t,e){for(gu[t]=e,t=0;t<e.length;t++)Db.add(e[t])}var As=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qg=Object.prototype.hasOwnProperty,l2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y0={},v0={};function c2(t){return Qg.call(v0,t)?!0:Qg.call(y0,t)?!1:l2.test(t)?v0[t]=!0:(y0[t]=!0,!1)}function u2(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function d2(t,e,n,r){if(e===null||typeof e>"u"||u2(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function yn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Kt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Kt[t]=new yn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Kt[e]=new yn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Kt[t]=new yn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Kt[t]=new yn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Kt[t]=new yn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Kt[t]=new yn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Kt[t]=new yn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Kt[t]=new yn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Kt[t]=new yn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Yv=/[\-:]([a-z])/g;function Xv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Yv,Xv);Kt[e]=new yn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Yv,Xv);Kt[e]=new yn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Yv,Xv);Kt[e]=new yn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Kt[t]=new yn(t,1,!1,t.toLowerCase(),null,!1,!1)});Kt.xlinkHref=new yn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Kt[t]=new yn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Jv(t,e,n,r){var s=Kt.hasOwnProperty(e)?Kt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(d2(e,n,s,r)&&(n=null),r||s===null?c2(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Os=a2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Gd=Symbol.for("react.element"),ka=Symbol.for("react.portal"),Da=Symbol.for("react.fragment"),Zv=Symbol.for("react.strict_mode"),Yg=Symbol.for("react.profiler"),Nb=Symbol.for("react.provider"),Ob=Symbol.for("react.context"),e_=Symbol.for("react.forward_ref"),Xg=Symbol.for("react.suspense"),Jg=Symbol.for("react.suspense_list"),t_=Symbol.for("react.memo"),si=Symbol.for("react.lazy"),Vb=Symbol.for("react.offscreen"),_0=Symbol.iterator;function vc(t){return t===null||typeof t!="object"?null:(t=_0&&t[_0]||t["@@iterator"],typeof t=="function"?t:null)}var dt=Object.assign,qm;function Vc(t){if(qm===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);qm=e&&e[1]||""}return`
`+qm+t}var Hm=!1;function Wm(t,e){if(!t||Hm)return"";Hm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Hm=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Vc(t):""}function h2(t){switch(t.tag){case 5:return Vc(t.type);case 16:return Vc("Lazy");case 13:return Vc("Suspense");case 19:return Vc("SuspenseList");case 0:case 2:case 15:return t=Wm(t.type,!1),t;case 11:return t=Wm(t.type.render,!1),t;case 1:return t=Wm(t.type,!0),t;default:return""}}function Zg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Da:return"Fragment";case ka:return"Portal";case Yg:return"Profiler";case Zv:return"StrictMode";case Xg:return"Suspense";case Jg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Ob:return(t.displayName||"Context")+".Consumer";case Nb:return(t._context.displayName||"Context")+".Provider";case e_:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case t_:return e=t.displayName||null,e!==null?e:Zg(t.type)||"Memo";case si:e=t._payload,t=t._init;try{return Zg(t(e))}catch{}}return null}function f2(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Zg(e);case 8:return e===Zv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Vi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Lb(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function p2(t){var e=Lb(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Qd(t){t._valueTracker||(t._valueTracker=p2(t))}function Mb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Lb(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function af(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ey(t,e){var n=e.checked;return dt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function w0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Vi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Fb(t,e){e=e.checked,e!=null&&Jv(t,"checked",e,!1)}function ty(t,e){Fb(t,e);var n=Vi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ny(t,e.type,n):e.hasOwnProperty("defaultValue")&&ny(t,e.type,Vi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function E0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ny(t,e,n){(e!=="number"||af(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Lc=Array.isArray;function za(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Vi(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function ry(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(G(91));return dt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function T0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(G(92));if(Lc(n)){if(1<n.length)throw Error(G(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Vi(n)}}function Ub(t,e){var n=Vi(e.value),r=Vi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function I0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function jb(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function sy(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?jb(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Yd,Bb=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Yd=Yd||document.createElement("div"),Yd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Yd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function yu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Kc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},m2=["Webkit","ms","Moz","O"];Object.keys(Kc).forEach(function(t){m2.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Kc[e]=Kc[t]})});function $b(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Kc.hasOwnProperty(t)&&Kc[t]?(""+e).trim():e+"px"}function zb(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=$b(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var g2=dt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function iy(t,e){if(e){if(g2[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(G(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(G(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(G(61))}if(e.style!=null&&typeof e.style!="object")throw Error(G(62))}}function oy(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ay=null;function n_(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ly=null,qa=null,Ha=null;function S0(t){if(t=ud(t)){if(typeof ly!="function")throw Error(G(280));var e=t.stateNode;e&&(e=Sp(e),ly(t.stateNode,t.type,e))}}function qb(t){qa?Ha?Ha.push(t):Ha=[t]:qa=t}function Hb(){if(qa){var t=qa,e=Ha;if(Ha=qa=null,S0(t),e)for(t=0;t<e.length;t++)S0(e[t])}}function Wb(t,e){return t(e)}function Kb(){}var Km=!1;function Gb(t,e,n){if(Km)return t(e,n);Km=!0;try{return Wb(t,e,n)}finally{Km=!1,(qa!==null||Ha!==null)&&(Kb(),Hb())}}function vu(t,e){var n=t.stateNode;if(n===null)return null;var r=Sp(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(G(231,e,typeof n));return n}var cy=!1;if(As)try{var _c={};Object.defineProperty(_c,"passive",{get:function(){cy=!0}}),window.addEventListener("test",_c,_c),window.removeEventListener("test",_c,_c)}catch{cy=!1}function y2(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Gc=!1,lf=null,cf=!1,uy=null,v2={onError:function(t){Gc=!0,lf=t}};function _2(t,e,n,r,s,i,o,a,l){Gc=!1,lf=null,y2.apply(v2,arguments)}function w2(t,e,n,r,s,i,o,a,l){if(_2.apply(this,arguments),Gc){if(Gc){var c=lf;Gc=!1,lf=null}else throw Error(G(198));cf||(cf=!0,uy=c)}}function ua(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Qb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function A0(t){if(ua(t)!==t)throw Error(G(188))}function E2(t){var e=t.alternate;if(!e){if(e=ua(t),e===null)throw Error(G(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return A0(s),t;if(i===r)return A0(s),e;i=i.sibling}throw Error(G(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(G(189))}}if(n.alternate!==r)throw Error(G(190))}if(n.tag!==3)throw Error(G(188));return n.stateNode.current===n?t:e}function Yb(t){return t=E2(t),t!==null?Xb(t):null}function Xb(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Xb(t);if(e!==null)return e;t=t.sibling}return null}var Jb=Wn.unstable_scheduleCallback,b0=Wn.unstable_cancelCallback,T2=Wn.unstable_shouldYield,I2=Wn.unstable_requestPaint,_t=Wn.unstable_now,S2=Wn.unstable_getCurrentPriorityLevel,r_=Wn.unstable_ImmediatePriority,Zb=Wn.unstable_UserBlockingPriority,uf=Wn.unstable_NormalPriority,A2=Wn.unstable_LowPriority,e1=Wn.unstable_IdlePriority,wp=null,Jr=null;function b2(t){if(Jr&&typeof Jr.onCommitFiberRoot=="function")try{Jr.onCommitFiberRoot(wp,t,void 0,(t.current.flags&128)===128)}catch{}}var _r=Math.clz32?Math.clz32:P2,x2=Math.log,R2=Math.LN2;function P2(t){return t>>>=0,t===0?32:31-(x2(t)/R2|0)|0}var Xd=64,Jd=4194304;function Mc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function df(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Mc(a):(i&=o,i!==0&&(r=Mc(i)))}else o=n&~s,o!==0?r=Mc(o):i!==0&&(r=Mc(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-_r(e),s=1<<n,r|=t[n],e&=~s;return r}function C2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function k2(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-_r(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=C2(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function dy(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function t1(){var t=Xd;return Xd<<=1,!(Xd&4194240)&&(Xd=64),t}function Gm(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ld(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-_r(e),t[e]=n}function D2(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-_r(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function s_(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-_r(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var $e=0;function n1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var r1,i_,s1,i1,o1,hy=!1,Zd=[],wi=null,Ei=null,Ti=null,_u=new Map,wu=new Map,oi=[],N2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function x0(t,e){switch(t){case"focusin":case"focusout":wi=null;break;case"dragenter":case"dragleave":Ei=null;break;case"mouseover":case"mouseout":Ti=null;break;case"pointerover":case"pointerout":_u.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":wu.delete(e.pointerId)}}function wc(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ud(e),e!==null&&i_(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function O2(t,e,n,r,s){switch(e){case"focusin":return wi=wc(wi,t,e,n,r,s),!0;case"dragenter":return Ei=wc(Ei,t,e,n,r,s),!0;case"mouseover":return Ti=wc(Ti,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return _u.set(i,wc(_u.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,wu.set(i,wc(wu.get(i)||null,t,e,n,r,s)),!0}return!1}function a1(t){var e=Ao(t.target);if(e!==null){var n=ua(e);if(n!==null){if(e=n.tag,e===13){if(e=Qb(n),e!==null){t.blockedOn=e,o1(t.priority,function(){s1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Nh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=fy(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ay=r,n.target.dispatchEvent(r),ay=null}else return e=ud(n),e!==null&&i_(e),t.blockedOn=n,!1;e.shift()}return!0}function R0(t,e,n){Nh(t)&&n.delete(e)}function V2(){hy=!1,wi!==null&&Nh(wi)&&(wi=null),Ei!==null&&Nh(Ei)&&(Ei=null),Ti!==null&&Nh(Ti)&&(Ti=null),_u.forEach(R0),wu.forEach(R0)}function Ec(t,e){t.blockedOn===e&&(t.blockedOn=null,hy||(hy=!0,Wn.unstable_scheduleCallback(Wn.unstable_NormalPriority,V2)))}function Eu(t){function e(s){return Ec(s,t)}if(0<Zd.length){Ec(Zd[0],t);for(var n=1;n<Zd.length;n++){var r=Zd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(wi!==null&&Ec(wi,t),Ei!==null&&Ec(Ei,t),Ti!==null&&Ec(Ti,t),_u.forEach(e),wu.forEach(e),n=0;n<oi.length;n++)r=oi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<oi.length&&(n=oi[0],n.blockedOn===null);)a1(n),n.blockedOn===null&&oi.shift()}var Wa=Os.ReactCurrentBatchConfig,hf=!0;function L2(t,e,n,r){var s=$e,i=Wa.transition;Wa.transition=null;try{$e=1,o_(t,e,n,r)}finally{$e=s,Wa.transition=i}}function M2(t,e,n,r){var s=$e,i=Wa.transition;Wa.transition=null;try{$e=4,o_(t,e,n,r)}finally{$e=s,Wa.transition=i}}function o_(t,e,n,r){if(hf){var s=fy(t,e,n,r);if(s===null)sg(t,e,r,ff,n),x0(t,r);else if(O2(s,t,e,n,r))r.stopPropagation();else if(x0(t,r),e&4&&-1<N2.indexOf(t)){for(;s!==null;){var i=ud(s);if(i!==null&&r1(i),i=fy(t,e,n,r),i===null&&sg(t,e,r,ff,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else sg(t,e,r,null,n)}}var ff=null;function fy(t,e,n,r){if(ff=null,t=n_(r),t=Ao(t),t!==null)if(e=ua(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Qb(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ff=t,null}function l1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(S2()){case r_:return 1;case Zb:return 4;case uf:case A2:return 16;case e1:return 536870912;default:return 16}default:return 16}}var mi=null,a_=null,Oh=null;function c1(){if(Oh)return Oh;var t,e=a_,n=e.length,r,s="value"in mi?mi.value:mi.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Oh=s.slice(t,1<r?1-r:void 0)}function Vh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function eh(){return!0}function P0(){return!1}function Qn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?eh:P0,this.isPropagationStopped=P0,this}return dt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=eh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=eh)},persist:function(){},isPersistent:eh}),e}var Ul={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},l_=Qn(Ul),cd=dt({},Ul,{view:0,detail:0}),F2=Qn(cd),Qm,Ym,Tc,Ep=dt({},cd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:c_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Tc&&(Tc&&t.type==="mousemove"?(Qm=t.screenX-Tc.screenX,Ym=t.screenY-Tc.screenY):Ym=Qm=0,Tc=t),Qm)},movementY:function(t){return"movementY"in t?t.movementY:Ym}}),C0=Qn(Ep),U2=dt({},Ep,{dataTransfer:0}),j2=Qn(U2),B2=dt({},cd,{relatedTarget:0}),Xm=Qn(B2),$2=dt({},Ul,{animationName:0,elapsedTime:0,pseudoElement:0}),z2=Qn($2),q2=dt({},Ul,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),H2=Qn(q2),W2=dt({},Ul,{data:0}),k0=Qn(W2),K2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},G2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Q2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Y2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Q2[t])?!!e[t]:!1}function c_(){return Y2}var X2=dt({},cd,{key:function(t){if(t.key){var e=K2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Vh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?G2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:c_,charCode:function(t){return t.type==="keypress"?Vh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Vh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),J2=Qn(X2),Z2=dt({},Ep,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),D0=Qn(Z2),eO=dt({},cd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:c_}),tO=Qn(eO),nO=dt({},Ul,{propertyName:0,elapsedTime:0,pseudoElement:0}),rO=Qn(nO),sO=dt({},Ep,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),iO=Qn(sO),oO=[9,13,27,32],u_=As&&"CompositionEvent"in window,Qc=null;As&&"documentMode"in document&&(Qc=document.documentMode);var aO=As&&"TextEvent"in window&&!Qc,u1=As&&(!u_||Qc&&8<Qc&&11>=Qc),N0=" ",O0=!1;function d1(t,e){switch(t){case"keyup":return oO.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function h1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Na=!1;function lO(t,e){switch(t){case"compositionend":return h1(e);case"keypress":return e.which!==32?null:(O0=!0,N0);case"textInput":return t=e.data,t===N0&&O0?null:t;default:return null}}function cO(t,e){if(Na)return t==="compositionend"||!u_&&d1(t,e)?(t=c1(),Oh=a_=mi=null,Na=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return u1&&e.locale!=="ko"?null:e.data;default:return null}}var uO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function V0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!uO[t.type]:e==="textarea"}function f1(t,e,n,r){qb(r),e=pf(e,"onChange"),0<e.length&&(n=new l_("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Yc=null,Tu=null;function dO(t){S1(t,0)}function Tp(t){var e=La(t);if(Mb(e))return t}function hO(t,e){if(t==="change")return e}var p1=!1;if(As){var Jm;if(As){var Zm="oninput"in document;if(!Zm){var L0=document.createElement("div");L0.setAttribute("oninput","return;"),Zm=typeof L0.oninput=="function"}Jm=Zm}else Jm=!1;p1=Jm&&(!document.documentMode||9<document.documentMode)}function M0(){Yc&&(Yc.detachEvent("onpropertychange",m1),Tu=Yc=null)}function m1(t){if(t.propertyName==="value"&&Tp(Tu)){var e=[];f1(e,Tu,t,n_(t)),Gb(dO,e)}}function fO(t,e,n){t==="focusin"?(M0(),Yc=e,Tu=n,Yc.attachEvent("onpropertychange",m1)):t==="focusout"&&M0()}function pO(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Tp(Tu)}function mO(t,e){if(t==="click")return Tp(e)}function gO(t,e){if(t==="input"||t==="change")return Tp(e)}function yO(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Sr=typeof Object.is=="function"?Object.is:yO;function Iu(t,e){if(Sr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Qg.call(e,s)||!Sr(t[s],e[s]))return!1}return!0}function F0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function U0(t,e){var n=F0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=F0(n)}}function g1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?g1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function y1(){for(var t=window,e=af();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=af(t.document)}return e}function d_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function vO(t){var e=y1(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&g1(n.ownerDocument.documentElement,n)){if(r!==null&&d_(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=U0(n,i);var o=U0(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var _O=As&&"documentMode"in document&&11>=document.documentMode,Oa=null,py=null,Xc=null,my=!1;function j0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;my||Oa==null||Oa!==af(r)||(r=Oa,"selectionStart"in r&&d_(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Xc&&Iu(Xc,r)||(Xc=r,r=pf(py,"onSelect"),0<r.length&&(e=new l_("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Oa)))}function th(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Va={animationend:th("Animation","AnimationEnd"),animationiteration:th("Animation","AnimationIteration"),animationstart:th("Animation","AnimationStart"),transitionend:th("Transition","TransitionEnd")},eg={},v1={};As&&(v1=document.createElement("div").style,"AnimationEvent"in window||(delete Va.animationend.animation,delete Va.animationiteration.animation,delete Va.animationstart.animation),"TransitionEvent"in window||delete Va.transitionend.transition);function Ip(t){if(eg[t])return eg[t];if(!Va[t])return t;var e=Va[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in v1)return eg[t]=e[n];return t}var _1=Ip("animationend"),w1=Ip("animationiteration"),E1=Ip("animationstart"),T1=Ip("transitionend"),I1=new Map,B0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xi(t,e){I1.set(t,e),ca(e,[t])}for(var tg=0;tg<B0.length;tg++){var ng=B0[tg],wO=ng.toLowerCase(),EO=ng[0].toUpperCase()+ng.slice(1);Xi(wO,"on"+EO)}Xi(_1,"onAnimationEnd");Xi(w1,"onAnimationIteration");Xi(E1,"onAnimationStart");Xi("dblclick","onDoubleClick");Xi("focusin","onFocus");Xi("focusout","onBlur");Xi(T1,"onTransitionEnd");ll("onMouseEnter",["mouseout","mouseover"]);ll("onMouseLeave",["mouseout","mouseover"]);ll("onPointerEnter",["pointerout","pointerover"]);ll("onPointerLeave",["pointerout","pointerover"]);ca("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ca("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ca("onBeforeInput",["compositionend","keypress","textInput","paste"]);ca("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ca("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ca("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),TO=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fc));function $0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,w2(r,e,void 0,t),t.currentTarget=null}function S1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;$0(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;$0(s,a,c),i=l}}}if(cf)throw t=uy,cf=!1,uy=null,t}function Ze(t,e){var n=e[wy];n===void 0&&(n=e[wy]=new Set);var r=t+"__bubble";n.has(r)||(A1(e,t,2,!1),n.add(r))}function rg(t,e,n){var r=0;e&&(r|=4),A1(n,t,r,e)}var nh="_reactListening"+Math.random().toString(36).slice(2);function Su(t){if(!t[nh]){t[nh]=!0,Db.forEach(function(n){n!=="selectionchange"&&(TO.has(n)||rg(n,!1,t),rg(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[nh]||(e[nh]=!0,rg("selectionchange",!1,e))}}function A1(t,e,n,r){switch(l1(e)){case 1:var s=L2;break;case 4:s=M2;break;default:s=o_}n=s.bind(null,e,n,t),s=void 0,!cy||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function sg(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Ao(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}Gb(function(){var c=i,d=n_(n),h=[];e:{var f=I1.get(t);if(f!==void 0){var p=l_,E=t;switch(t){case"keypress":if(Vh(n)===0)break e;case"keydown":case"keyup":p=J2;break;case"focusin":E="focus",p=Xm;break;case"focusout":E="blur",p=Xm;break;case"beforeblur":case"afterblur":p=Xm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=C0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=j2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=tO;break;case _1:case w1:case E1:p=z2;break;case T1:p=rO;break;case"scroll":p=F2;break;case"wheel":p=iO;break;case"copy":case"cut":case"paste":p=H2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=D0}var g=(e&4)!==0,y=!g&&t==="scroll",_=g?f!==null?f+"Capture":null:f;g=[];for(var w=c,T;w!==null;){T=w;var R=T.stateNode;if(T.tag===5&&R!==null&&(T=R,_!==null&&(R=vu(w,_),R!=null&&g.push(Au(w,R,T)))),y)break;w=w.return}0<g.length&&(f=new p(f,E,null,n,d),h.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==ay&&(E=n.relatedTarget||n.fromElement)&&(Ao(E)||E[bs]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(E=n.relatedTarget||n.toElement,p=c,E=E?Ao(E):null,E!==null&&(y=ua(E),E!==y||E.tag!==5&&E.tag!==6)&&(E=null)):(p=null,E=c),p!==E)){if(g=C0,R="onMouseLeave",_="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(g=D0,R="onPointerLeave",_="onPointerEnter",w="pointer"),y=p==null?f:La(p),T=E==null?f:La(E),f=new g(R,w+"leave",p,n,d),f.target=y,f.relatedTarget=T,R=null,Ao(d)===c&&(g=new g(_,w+"enter",E,n,d),g.target=T,g.relatedTarget=y,R=g),y=R,p&&E)t:{for(g=p,_=E,w=0,T=g;T;T=va(T))w++;for(T=0,R=_;R;R=va(R))T++;for(;0<w-T;)g=va(g),w--;for(;0<T-w;)_=va(_),T--;for(;w--;){if(g===_||_!==null&&g===_.alternate)break t;g=va(g),_=va(_)}g=null}else g=null;p!==null&&z0(h,f,p,g,!1),E!==null&&y!==null&&z0(h,y,E,g,!0)}}e:{if(f=c?La(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var O=hO;else if(V0(f))if(p1)O=gO;else{O=pO;var V=fO}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(O=mO);if(O&&(O=O(t,c))){f1(h,O,n,d);break e}V&&V(t,f,c),t==="focusout"&&(V=f._wrapperState)&&V.controlled&&f.type==="number"&&ny(f,"number",f.value)}switch(V=c?La(c):window,t){case"focusin":(V0(V)||V.contentEditable==="true")&&(Oa=V,py=c,Xc=null);break;case"focusout":Xc=py=Oa=null;break;case"mousedown":my=!0;break;case"contextmenu":case"mouseup":case"dragend":my=!1,j0(h,n,d);break;case"selectionchange":if(_O)break;case"keydown":case"keyup":j0(h,n,d)}var S;if(u_)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Na?d1(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(u1&&n.locale!=="ko"&&(Na||I!=="onCompositionStart"?I==="onCompositionEnd"&&Na&&(S=c1()):(mi=d,a_="value"in mi?mi.value:mi.textContent,Na=!0)),V=pf(c,I),0<V.length&&(I=new k0(I,t,null,n,d),h.push({event:I,listeners:V}),S?I.data=S:(S=h1(n),S!==null&&(I.data=S)))),(S=aO?lO(t,n):cO(t,n))&&(c=pf(c,"onBeforeInput"),0<c.length&&(d=new k0("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=S))}S1(h,e)})}function Au(t,e,n){return{instance:t,listener:e,currentTarget:n}}function pf(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=vu(t,n),i!=null&&r.unshift(Au(t,i,s)),i=vu(t,e),i!=null&&r.push(Au(t,i,s))),t=t.return}return r}function va(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function z0(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=vu(n,i),l!=null&&o.unshift(Au(n,l,a))):s||(l=vu(n,i),l!=null&&o.push(Au(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var IO=/\r\n?/g,SO=/\u0000|\uFFFD/g;function q0(t){return(typeof t=="string"?t:""+t).replace(IO,`
`).replace(SO,"")}function rh(t,e,n){if(e=q0(e),q0(t)!==e&&n)throw Error(G(425))}function mf(){}var gy=null,yy=null;function vy(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var _y=typeof setTimeout=="function"?setTimeout:void 0,AO=typeof clearTimeout=="function"?clearTimeout:void 0,H0=typeof Promise=="function"?Promise:void 0,bO=typeof queueMicrotask=="function"?queueMicrotask:typeof H0<"u"?function(t){return H0.resolve(null).then(t).catch(xO)}:_y;function xO(t){setTimeout(function(){throw t})}function ig(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Eu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Eu(e)}function Ii(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function W0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var jl=Math.random().toString(36).slice(2),Kr="__reactFiber$"+jl,bu="__reactProps$"+jl,bs="__reactContainer$"+jl,wy="__reactEvents$"+jl,RO="__reactListeners$"+jl,PO="__reactHandles$"+jl;function Ao(t){var e=t[Kr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[bs]||n[Kr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=W0(t);t!==null;){if(n=t[Kr])return n;t=W0(t)}return e}t=n,n=t.parentNode}return null}function ud(t){return t=t[Kr]||t[bs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function La(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(G(33))}function Sp(t){return t[bu]||null}var Ey=[],Ma=-1;function Ji(t){return{current:t}}function et(t){0>Ma||(t.current=Ey[Ma],Ey[Ma]=null,Ma--)}function Ge(t,e){Ma++,Ey[Ma]=t.current,t.current=e}var Li={},an=Ji(Li),Rn=Ji(!1),Qo=Li;function cl(t,e){var n=t.type.contextTypes;if(!n)return Li;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Pn(t){return t=t.childContextTypes,t!=null}function gf(){et(Rn),et(an)}function K0(t,e,n){if(an.current!==Li)throw Error(G(168));Ge(an,e),Ge(Rn,n)}function b1(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(G(108,f2(t)||"Unknown",s));return dt({},n,r)}function yf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Li,Qo=an.current,Ge(an,t),Ge(Rn,Rn.current),!0}function G0(t,e,n){var r=t.stateNode;if(!r)throw Error(G(169));n?(t=b1(t,e,Qo),r.__reactInternalMemoizedMergedChildContext=t,et(Rn),et(an),Ge(an,t)):et(Rn),Ge(Rn,n)}var hs=null,Ap=!1,og=!1;function x1(t){hs===null?hs=[t]:hs.push(t)}function CO(t){Ap=!0,x1(t)}function Zi(){if(!og&&hs!==null){og=!0;var t=0,e=$e;try{var n=hs;for($e=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}hs=null,Ap=!1}catch(s){throw hs!==null&&(hs=hs.slice(t+1)),Jb(r_,Zi),s}finally{$e=e,og=!1}}return null}var Fa=[],Ua=0,vf=null,_f=0,er=[],tr=0,Yo=null,gs=1,ys="";function po(t,e){Fa[Ua++]=_f,Fa[Ua++]=vf,vf=t,_f=e}function R1(t,e,n){er[tr++]=gs,er[tr++]=ys,er[tr++]=Yo,Yo=t;var r=gs;t=ys;var s=32-_r(r)-1;r&=~(1<<s),n+=1;var i=32-_r(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,gs=1<<32-_r(e)+s|n<<s|r,ys=i+t}else gs=1<<i|n<<s|r,ys=t}function h_(t){t.return!==null&&(po(t,1),R1(t,1,0))}function f_(t){for(;t===vf;)vf=Fa[--Ua],Fa[Ua]=null,_f=Fa[--Ua],Fa[Ua]=null;for(;t===Yo;)Yo=er[--tr],er[tr]=null,ys=er[--tr],er[tr]=null,gs=er[--tr],er[tr]=null}var $n=null,Un=null,it=!1,yr=null;function P1(t,e){var n=nr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Q0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,$n=t,Un=Ii(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,$n=t,Un=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Yo!==null?{id:gs,overflow:ys}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=nr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,$n=t,Un=null,!0):!1;default:return!1}}function Ty(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Iy(t){if(it){var e=Un;if(e){var n=e;if(!Q0(t,e)){if(Ty(t))throw Error(G(418));e=Ii(n.nextSibling);var r=$n;e&&Q0(t,e)?P1(r,n):(t.flags=t.flags&-4097|2,it=!1,$n=t)}}else{if(Ty(t))throw Error(G(418));t.flags=t.flags&-4097|2,it=!1,$n=t}}}function Y0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;$n=t}function sh(t){if(t!==$n)return!1;if(!it)return Y0(t),it=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!vy(t.type,t.memoizedProps)),e&&(e=Un)){if(Ty(t))throw C1(),Error(G(418));for(;e;)P1(t,e),e=Ii(e.nextSibling)}if(Y0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(G(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Un=Ii(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Un=null}}else Un=$n?Ii(t.stateNode.nextSibling):null;return!0}function C1(){for(var t=Un;t;)t=Ii(t.nextSibling)}function ul(){Un=$n=null,it=!1}function p_(t){yr===null?yr=[t]:yr.push(t)}var kO=Os.ReactCurrentBatchConfig;function Ic(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(G(309));var r=n.stateNode}if(!r)throw Error(G(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(G(284));if(!n._owner)throw Error(G(290,t))}return t}function ih(t,e){throw t=Object.prototype.toString.call(e),Error(G(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function X0(t){var e=t._init;return e(t._payload)}function k1(t){function e(_,w){if(t){var T=_.deletions;T===null?(_.deletions=[w],_.flags|=16):T.push(w)}}function n(_,w){if(!t)return null;for(;w!==null;)e(_,w),w=w.sibling;return null}function r(_,w){for(_=new Map;w!==null;)w.key!==null?_.set(w.key,w):_.set(w.index,w),w=w.sibling;return _}function s(_,w){return _=xi(_,w),_.index=0,_.sibling=null,_}function i(_,w,T){return _.index=T,t?(T=_.alternate,T!==null?(T=T.index,T<w?(_.flags|=2,w):T):(_.flags|=2,w)):(_.flags|=1048576,w)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,w,T,R){return w===null||w.tag!==6?(w=fg(T,_.mode,R),w.return=_,w):(w=s(w,T),w.return=_,w)}function l(_,w,T,R){var O=T.type;return O===Da?d(_,w,T.props.children,R,T.key):w!==null&&(w.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===si&&X0(O)===w.type)?(R=s(w,T.props),R.ref=Ic(_,w,T),R.return=_,R):(R=$h(T.type,T.key,T.props,null,_.mode,R),R.ref=Ic(_,w,T),R.return=_,R)}function c(_,w,T,R){return w===null||w.tag!==4||w.stateNode.containerInfo!==T.containerInfo||w.stateNode.implementation!==T.implementation?(w=pg(T,_.mode,R),w.return=_,w):(w=s(w,T.children||[]),w.return=_,w)}function d(_,w,T,R,O){return w===null||w.tag!==7?(w=qo(T,_.mode,R,O),w.return=_,w):(w=s(w,T),w.return=_,w)}function h(_,w,T){if(typeof w=="string"&&w!==""||typeof w=="number")return w=fg(""+w,_.mode,T),w.return=_,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Gd:return T=$h(w.type,w.key,w.props,null,_.mode,T),T.ref=Ic(_,null,w),T.return=_,T;case ka:return w=pg(w,_.mode,T),w.return=_,w;case si:var R=w._init;return h(_,R(w._payload),T)}if(Lc(w)||vc(w))return w=qo(w,_.mode,T,null),w.return=_,w;ih(_,w)}return null}function f(_,w,T,R){var O=w!==null?w.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return O!==null?null:a(_,w,""+T,R);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Gd:return T.key===O?l(_,w,T,R):null;case ka:return T.key===O?c(_,w,T,R):null;case si:return O=T._init,f(_,w,O(T._payload),R)}if(Lc(T)||vc(T))return O!==null?null:d(_,w,T,R,null);ih(_,T)}return null}function p(_,w,T,R,O){if(typeof R=="string"&&R!==""||typeof R=="number")return _=_.get(T)||null,a(w,_,""+R,O);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Gd:return _=_.get(R.key===null?T:R.key)||null,l(w,_,R,O);case ka:return _=_.get(R.key===null?T:R.key)||null,c(w,_,R,O);case si:var V=R._init;return p(_,w,T,V(R._payload),O)}if(Lc(R)||vc(R))return _=_.get(T)||null,d(w,_,R,O,null);ih(w,R)}return null}function E(_,w,T,R){for(var O=null,V=null,S=w,I=w=0,b=null;S!==null&&I<T.length;I++){S.index>I?(b=S,S=null):b=S.sibling;var D=f(_,S,T[I],R);if(D===null){S===null&&(S=b);break}t&&S&&D.alternate===null&&e(_,S),w=i(D,w,I),V===null?O=D:V.sibling=D,V=D,S=b}if(I===T.length)return n(_,S),it&&po(_,I),O;if(S===null){for(;I<T.length;I++)S=h(_,T[I],R),S!==null&&(w=i(S,w,I),V===null?O=S:V.sibling=S,V=S);return it&&po(_,I),O}for(S=r(_,S);I<T.length;I++)b=p(S,_,I,T[I],R),b!==null&&(t&&b.alternate!==null&&S.delete(b.key===null?I:b.key),w=i(b,w,I),V===null?O=b:V.sibling=b,V=b);return t&&S.forEach(function(P){return e(_,P)}),it&&po(_,I),O}function g(_,w,T,R){var O=vc(T);if(typeof O!="function")throw Error(G(150));if(T=O.call(T),T==null)throw Error(G(151));for(var V=O=null,S=w,I=w=0,b=null,D=T.next();S!==null&&!D.done;I++,D=T.next()){S.index>I?(b=S,S=null):b=S.sibling;var P=f(_,S,D.value,R);if(P===null){S===null&&(S=b);break}t&&S&&P.alternate===null&&e(_,S),w=i(P,w,I),V===null?O=P:V.sibling=P,V=P,S=b}if(D.done)return n(_,S),it&&po(_,I),O;if(S===null){for(;!D.done;I++,D=T.next())D=h(_,D.value,R),D!==null&&(w=i(D,w,I),V===null?O=D:V.sibling=D,V=D);return it&&po(_,I),O}for(S=r(_,S);!D.done;I++,D=T.next())D=p(S,_,I,D.value,R),D!==null&&(t&&D.alternate!==null&&S.delete(D.key===null?I:D.key),w=i(D,w,I),V===null?O=D:V.sibling=D,V=D);return t&&S.forEach(function(N){return e(_,N)}),it&&po(_,I),O}function y(_,w,T,R){if(typeof T=="object"&&T!==null&&T.type===Da&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case Gd:e:{for(var O=T.key,V=w;V!==null;){if(V.key===O){if(O=T.type,O===Da){if(V.tag===7){n(_,V.sibling),w=s(V,T.props.children),w.return=_,_=w;break e}}else if(V.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===si&&X0(O)===V.type){n(_,V.sibling),w=s(V,T.props),w.ref=Ic(_,V,T),w.return=_,_=w;break e}n(_,V);break}else e(_,V);V=V.sibling}T.type===Da?(w=qo(T.props.children,_.mode,R,T.key),w.return=_,_=w):(R=$h(T.type,T.key,T.props,null,_.mode,R),R.ref=Ic(_,w,T),R.return=_,_=R)}return o(_);case ka:e:{for(V=T.key;w!==null;){if(w.key===V)if(w.tag===4&&w.stateNode.containerInfo===T.containerInfo&&w.stateNode.implementation===T.implementation){n(_,w.sibling),w=s(w,T.children||[]),w.return=_,_=w;break e}else{n(_,w);break}else e(_,w);w=w.sibling}w=pg(T,_.mode,R),w.return=_,_=w}return o(_);case si:return V=T._init,y(_,w,V(T._payload),R)}if(Lc(T))return E(_,w,T,R);if(vc(T))return g(_,w,T,R);ih(_,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,w!==null&&w.tag===6?(n(_,w.sibling),w=s(w,T),w.return=_,_=w):(n(_,w),w=fg(T,_.mode,R),w.return=_,_=w),o(_)):n(_,w)}return y}var dl=k1(!0),D1=k1(!1),wf=Ji(null),Ef=null,ja=null,m_=null;function g_(){m_=ja=Ef=null}function y_(t){var e=wf.current;et(wf),t._currentValue=e}function Sy(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ka(t,e){Ef=t,m_=ja=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Sn=!0),t.firstContext=null)}function ir(t){var e=t._currentValue;if(m_!==t)if(t={context:t,memoizedValue:e,next:null},ja===null){if(Ef===null)throw Error(G(308));ja=t,Ef.dependencies={lanes:0,firstContext:t}}else ja=ja.next=t;return e}var bo=null;function v_(t){bo===null?bo=[t]:bo.push(t)}function N1(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,v_(e)):(n.next=s.next,s.next=n),e.interleaved=n,xs(t,r)}function xs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ii=!1;function __(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function O1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ws(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Si(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Me&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,xs(t,n)}return s=r.interleaved,s===null?(e.next=e,v_(r)):(e.next=s.next,s.next=e),r.interleaved=e,xs(t,n)}function Lh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,s_(t,n)}}function J0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Tf(t,e,n,r){var s=t.updateQueue;ii=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,d=c=l=null,a=i;do{var f=a.lane,p=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var E=t,g=a;switch(f=e,p=n,g.tag){case 1:if(E=g.payload,typeof E=="function"){h=E.call(p,h,f);break e}h=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=g.payload,f=typeof E=="function"?E.call(p,h,f):E,f==null)break e;h=dt({},h,f);break e;case 2:ii=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=p,l=h):d=d.next=p,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Jo|=o,t.lanes=o,t.memoizedState=h}}function Z0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(G(191,s));s.call(r)}}}var dd={},Zr=Ji(dd),xu=Ji(dd),Ru=Ji(dd);function xo(t){if(t===dd)throw Error(G(174));return t}function w_(t,e){switch(Ge(Ru,e),Ge(xu,t),Ge(Zr,dd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:sy(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=sy(e,t)}et(Zr),Ge(Zr,e)}function hl(){et(Zr),et(xu),et(Ru)}function V1(t){xo(Ru.current);var e=xo(Zr.current),n=sy(e,t.type);e!==n&&(Ge(xu,t),Ge(Zr,n))}function E_(t){xu.current===t&&(et(Zr),et(xu))}var ct=Ji(0);function If(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ag=[];function T_(){for(var t=0;t<ag.length;t++)ag[t]._workInProgressVersionPrimary=null;ag.length=0}var Mh=Os.ReactCurrentDispatcher,lg=Os.ReactCurrentBatchConfig,Xo=0,ut=null,Ct=null,jt=null,Sf=!1,Jc=!1,Pu=0,DO=0;function Xt(){throw Error(G(321))}function I_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Sr(t[n],e[n]))return!1;return!0}function S_(t,e,n,r,s,i){if(Xo=i,ut=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Mh.current=t===null||t.memoizedState===null?LO:MO,t=n(r,s),Jc){i=0;do{if(Jc=!1,Pu=0,25<=i)throw Error(G(301));i+=1,jt=Ct=null,e.updateQueue=null,Mh.current=FO,t=n(r,s)}while(Jc)}if(Mh.current=Af,e=Ct!==null&&Ct.next!==null,Xo=0,jt=Ct=ut=null,Sf=!1,e)throw Error(G(300));return t}function A_(){var t=Pu!==0;return Pu=0,t}function Br(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?ut.memoizedState=jt=t:jt=jt.next=t,jt}function or(){if(Ct===null){var t=ut.alternate;t=t!==null?t.memoizedState:null}else t=Ct.next;var e=jt===null?ut.memoizedState:jt.next;if(e!==null)jt=e,Ct=t;else{if(t===null)throw Error(G(310));Ct=t,t={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},jt===null?ut.memoizedState=jt=t:jt=jt.next=t}return jt}function Cu(t,e){return typeof e=="function"?e(t):e}function cg(t){var e=or(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var r=Ct,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((Xo&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,ut.lanes|=d,Jo|=d}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,Sr(r,e.memoizedState)||(Sn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,ut.lanes|=i,Jo|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ug(t){var e=or(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Sr(i,e.memoizedState)||(Sn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function L1(){}function M1(t,e){var n=ut,r=or(),s=e(),i=!Sr(r.memoizedState,s);if(i&&(r.memoizedState=s,Sn=!0),r=r.queue,b_(j1.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||jt!==null&&jt.memoizedState.tag&1){if(n.flags|=2048,ku(9,U1.bind(null,n,r,s,e),void 0,null),$t===null)throw Error(G(349));Xo&30||F1(n,e,s)}return s}function F1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ut.updateQueue,e===null?(e={lastEffect:null,stores:null},ut.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function U1(t,e,n,r){e.value=n,e.getSnapshot=r,B1(e)&&$1(t)}function j1(t,e,n){return n(function(){B1(e)&&$1(t)})}function B1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Sr(t,n)}catch{return!0}}function $1(t){var e=xs(t,1);e!==null&&wr(e,t,1,-1)}function eT(t){var e=Br();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Cu,lastRenderedState:t},e.queue=t,t=t.dispatch=VO.bind(null,ut,t),[e.memoizedState,t]}function ku(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ut.updateQueue,e===null?(e={lastEffect:null,stores:null},ut.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function z1(){return or().memoizedState}function Fh(t,e,n,r){var s=Br();ut.flags|=t,s.memoizedState=ku(1|e,n,void 0,r===void 0?null:r)}function bp(t,e,n,r){var s=or();r=r===void 0?null:r;var i=void 0;if(Ct!==null){var o=Ct.memoizedState;if(i=o.destroy,r!==null&&I_(r,o.deps)){s.memoizedState=ku(e,n,i,r);return}}ut.flags|=t,s.memoizedState=ku(1|e,n,i,r)}function tT(t,e){return Fh(8390656,8,t,e)}function b_(t,e){return bp(2048,8,t,e)}function q1(t,e){return bp(4,2,t,e)}function H1(t,e){return bp(4,4,t,e)}function W1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function K1(t,e,n){return n=n!=null?n.concat([t]):null,bp(4,4,W1.bind(null,e,t),n)}function x_(){}function G1(t,e){var n=or();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&I_(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Q1(t,e){var n=or();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&I_(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Y1(t,e,n){return Xo&21?(Sr(n,e)||(n=t1(),ut.lanes|=n,Jo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Sn=!0),t.memoizedState=n)}function NO(t,e){var n=$e;$e=n!==0&&4>n?n:4,t(!0);var r=lg.transition;lg.transition={};try{t(!1),e()}finally{$e=n,lg.transition=r}}function X1(){return or().memoizedState}function OO(t,e,n){var r=bi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},J1(t))Z1(e,n);else if(n=N1(t,e,n,r),n!==null){var s=fn();wr(n,t,r,s),ex(n,e,r)}}function VO(t,e,n){var r=bi(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(J1(t))Z1(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Sr(a,o)){var l=e.interleaved;l===null?(s.next=s,v_(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=N1(t,e,s,r),n!==null&&(s=fn(),wr(n,t,r,s),ex(n,e,r))}}function J1(t){var e=t.alternate;return t===ut||e!==null&&e===ut}function Z1(t,e){Jc=Sf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function ex(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,s_(t,n)}}var Af={readContext:ir,useCallback:Xt,useContext:Xt,useEffect:Xt,useImperativeHandle:Xt,useInsertionEffect:Xt,useLayoutEffect:Xt,useMemo:Xt,useReducer:Xt,useRef:Xt,useState:Xt,useDebugValue:Xt,useDeferredValue:Xt,useTransition:Xt,useMutableSource:Xt,useSyncExternalStore:Xt,useId:Xt,unstable_isNewReconciler:!1},LO={readContext:ir,useCallback:function(t,e){return Br().memoizedState=[t,e===void 0?null:e],t},useContext:ir,useEffect:tT,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Fh(4194308,4,W1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Fh(4194308,4,t,e)},useInsertionEffect:function(t,e){return Fh(4,2,t,e)},useMemo:function(t,e){var n=Br();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Br();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=OO.bind(null,ut,t),[r.memoizedState,t]},useRef:function(t){var e=Br();return t={current:t},e.memoizedState=t},useState:eT,useDebugValue:x_,useDeferredValue:function(t){return Br().memoizedState=t},useTransition:function(){var t=eT(!1),e=t[0];return t=NO.bind(null,t[1]),Br().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ut,s=Br();if(it){if(n===void 0)throw Error(G(407));n=n()}else{if(n=e(),$t===null)throw Error(G(349));Xo&30||F1(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,tT(j1.bind(null,r,i,t),[t]),r.flags|=2048,ku(9,U1.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Br(),e=$t.identifierPrefix;if(it){var n=ys,r=gs;n=(r&~(1<<32-_r(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Pu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=DO++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},MO={readContext:ir,useCallback:G1,useContext:ir,useEffect:b_,useImperativeHandle:K1,useInsertionEffect:q1,useLayoutEffect:H1,useMemo:Q1,useReducer:cg,useRef:z1,useState:function(){return cg(Cu)},useDebugValue:x_,useDeferredValue:function(t){var e=or();return Y1(e,Ct.memoizedState,t)},useTransition:function(){var t=cg(Cu)[0],e=or().memoizedState;return[t,e]},useMutableSource:L1,useSyncExternalStore:M1,useId:X1,unstable_isNewReconciler:!1},FO={readContext:ir,useCallback:G1,useContext:ir,useEffect:b_,useImperativeHandle:K1,useInsertionEffect:q1,useLayoutEffect:H1,useMemo:Q1,useReducer:ug,useRef:z1,useState:function(){return ug(Cu)},useDebugValue:x_,useDeferredValue:function(t){var e=or();return Ct===null?e.memoizedState=t:Y1(e,Ct.memoizedState,t)},useTransition:function(){var t=ug(Cu)[0],e=or().memoizedState;return[t,e]},useMutableSource:L1,useSyncExternalStore:M1,useId:X1,unstable_isNewReconciler:!1};function dr(t,e){if(t&&t.defaultProps){e=dt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ay(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:dt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var xp={isMounted:function(t){return(t=t._reactInternals)?ua(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=fn(),s=bi(t),i=ws(r,s);i.payload=e,n!=null&&(i.callback=n),e=Si(t,i,s),e!==null&&(wr(e,t,s,r),Lh(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=fn(),s=bi(t),i=ws(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Si(t,i,s),e!==null&&(wr(e,t,s,r),Lh(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=fn(),r=bi(t),s=ws(n,r);s.tag=2,e!=null&&(s.callback=e),e=Si(t,s,r),e!==null&&(wr(e,t,r,n),Lh(e,t,r))}};function nT(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Iu(n,r)||!Iu(s,i):!0}function tx(t,e,n){var r=!1,s=Li,i=e.contextType;return typeof i=="object"&&i!==null?i=ir(i):(s=Pn(e)?Qo:an.current,r=e.contextTypes,i=(r=r!=null)?cl(t,s):Li),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=xp,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function rT(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&xp.enqueueReplaceState(e,e.state,null)}function by(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},__(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=ir(i):(i=Pn(e)?Qo:an.current,s.context=cl(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Ay(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&xp.enqueueReplaceState(s,s.state,null),Tf(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function fl(t,e){try{var n="",r=e;do n+=h2(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function dg(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function xy(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var UO=typeof WeakMap=="function"?WeakMap:Map;function nx(t,e,n){n=ws(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){xf||(xf=!0,My=r),xy(t,e)},n}function rx(t,e,n){n=ws(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){xy(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){xy(t,e),typeof r!="function"&&(Ai===null?Ai=new Set([this]):Ai.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function sT(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new UO;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=ZO.bind(null,t,e,n),e.then(t,t))}function iT(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function oT(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ws(-1,1),e.tag=2,Si(n,e,1))),n.lanes|=1),t)}var jO=Os.ReactCurrentOwner,Sn=!1;function dn(t,e,n,r){e.child=t===null?D1(e,null,n,r):dl(e,t.child,n,r)}function aT(t,e,n,r,s){n=n.render;var i=e.ref;return Ka(e,s),r=S_(t,e,n,r,i,s),n=A_(),t!==null&&!Sn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Rs(t,e,s)):(it&&n&&h_(e),e.flags|=1,dn(t,e,r,s),e.child)}function lT(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!V_(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,sx(t,e,i,r,s)):(t=$h(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Iu,n(o,r)&&t.ref===e.ref)return Rs(t,e,s)}return e.flags|=1,t=xi(i,r),t.ref=e.ref,t.return=e,e.child=t}function sx(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Iu(i,r)&&t.ref===e.ref)if(Sn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Sn=!0);else return e.lanes=t.lanes,Rs(t,e,s)}return Ry(t,e,n,r,s)}function ix(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ge($a,On),On|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ge($a,On),On|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ge($a,On),On|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ge($a,On),On|=r;return dn(t,e,s,n),e.child}function ox(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ry(t,e,n,r,s){var i=Pn(n)?Qo:an.current;return i=cl(e,i),Ka(e,s),n=S_(t,e,n,r,i,s),r=A_(),t!==null&&!Sn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Rs(t,e,s)):(it&&r&&h_(e),e.flags|=1,dn(t,e,n,s),e.child)}function cT(t,e,n,r,s){if(Pn(n)){var i=!0;yf(e)}else i=!1;if(Ka(e,s),e.stateNode===null)Uh(t,e),tx(e,n,r),by(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=ir(c):(c=Pn(n)?Qo:an.current,c=cl(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&rT(e,o,r,c),ii=!1;var f=e.memoizedState;o.state=f,Tf(e,r,o,s),l=e.memoizedState,a!==r||f!==l||Rn.current||ii?(typeof d=="function"&&(Ay(e,n,d,r),l=e.memoizedState),(a=ii||nT(e,n,a,r,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,O1(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:dr(e.type,a),o.props=c,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=ir(l):(l=Pn(n)?Qo:an.current,l=cl(e,l));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&rT(e,o,r,l),ii=!1,f=e.memoizedState,o.state=f,Tf(e,r,o,s);var E=e.memoizedState;a!==h||f!==E||Rn.current||ii?(typeof p=="function"&&(Ay(e,n,p,r),E=e.memoizedState),(c=ii||nT(e,n,c,r,f,E,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,E,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,E,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=E),o.props=r,o.state=E,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Py(t,e,n,r,i,s)}function Py(t,e,n,r,s,i){ox(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&G0(e,n,!1),Rs(t,e,i);r=e.stateNode,jO.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=dl(e,t.child,null,i),e.child=dl(e,null,a,i)):dn(t,e,a,i),e.memoizedState=r.state,s&&G0(e,n,!0),e.child}function ax(t){var e=t.stateNode;e.pendingContext?K0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&K0(t,e.context,!1),w_(t,e.containerInfo)}function uT(t,e,n,r,s){return ul(),p_(s),e.flags|=256,dn(t,e,n,r),e.child}var Cy={dehydrated:null,treeContext:null,retryLane:0};function ky(t){return{baseLanes:t,cachePool:null,transitions:null}}function lx(t,e,n){var r=e.pendingProps,s=ct.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ge(ct,s&1),t===null)return Iy(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Cp(o,r,0,null),t=qo(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=ky(n),e.memoizedState=Cy,t):R_(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return BO(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=xi(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=xi(a,i):(i=qo(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?ky(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Cy,r}return i=t.child,t=i.sibling,r=xi(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function R_(t,e){return e=Cp({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function oh(t,e,n,r){return r!==null&&p_(r),dl(e,t.child,null,n),t=R_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function BO(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=dg(Error(G(422))),oh(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Cp({mode:"visible",children:r.children},s,0,null),i=qo(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&dl(e,t.child,null,o),e.child.memoizedState=ky(o),e.memoizedState=Cy,i);if(!(e.mode&1))return oh(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(G(419)),r=dg(i,r,void 0),oh(t,e,o,r)}if(a=(o&t.childLanes)!==0,Sn||a){if(r=$t,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,xs(t,s),wr(r,t,s,-1))}return O_(),r=dg(Error(G(421))),oh(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=eV.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Un=Ii(s.nextSibling),$n=e,it=!0,yr=null,t!==null&&(er[tr++]=gs,er[tr++]=ys,er[tr++]=Yo,gs=t.id,ys=t.overflow,Yo=e),e=R_(e,r.children),e.flags|=4096,e)}function dT(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Sy(t.return,e,n)}function hg(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function cx(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(dn(t,e,r.children,n),r=ct.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&dT(t,n,e);else if(t.tag===19)dT(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ge(ct,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&If(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),hg(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&If(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}hg(e,!0,n,null,i);break;case"together":hg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Uh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Rs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Jo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(G(153));if(e.child!==null){for(t=e.child,n=xi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=xi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function $O(t,e,n){switch(e.tag){case 3:ax(e),ul();break;case 5:V1(e);break;case 1:Pn(e.type)&&yf(e);break;case 4:w_(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ge(wf,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ge(ct,ct.current&1),e.flags|=128,null):n&e.child.childLanes?lx(t,e,n):(Ge(ct,ct.current&1),t=Rs(t,e,n),t!==null?t.sibling:null);Ge(ct,ct.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return cx(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ge(ct,ct.current),r)break;return null;case 22:case 23:return e.lanes=0,ix(t,e,n)}return Rs(t,e,n)}var ux,Dy,dx,hx;ux=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Dy=function(){};dx=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,xo(Zr.current);var i=null;switch(n){case"input":s=ey(t,s),r=ey(t,r),i=[];break;case"select":s=dt({},s,{value:void 0}),r=dt({},r,{value:void 0}),i=[];break;case"textarea":s=ry(t,s),r=ry(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=mf)}iy(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(gu.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(gu.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ze("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};hx=function(t,e,n,r){n!==r&&(e.flags|=4)};function Sc(t,e){if(!it)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Jt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function zO(t,e,n){var r=e.pendingProps;switch(f_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jt(e),null;case 1:return Pn(e.type)&&gf(),Jt(e),null;case 3:return r=e.stateNode,hl(),et(Rn),et(an),T_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(sh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,yr!==null&&(jy(yr),yr=null))),Dy(t,e),Jt(e),null;case 5:E_(e);var s=xo(Ru.current);if(n=e.type,t!==null&&e.stateNode!=null)dx(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(G(166));return Jt(e),null}if(t=xo(Zr.current),sh(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Kr]=e,r[bu]=i,t=(e.mode&1)!==0,n){case"dialog":Ze("cancel",r),Ze("close",r);break;case"iframe":case"object":case"embed":Ze("load",r);break;case"video":case"audio":for(s=0;s<Fc.length;s++)Ze(Fc[s],r);break;case"source":Ze("error",r);break;case"img":case"image":case"link":Ze("error",r),Ze("load",r);break;case"details":Ze("toggle",r);break;case"input":w0(r,i),Ze("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ze("invalid",r);break;case"textarea":T0(r,i),Ze("invalid",r)}iy(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&rh(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&rh(r.textContent,a,t),s=["children",""+a]):gu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ze("scroll",r)}switch(n){case"input":Qd(r),E0(r,i,!0);break;case"textarea":Qd(r),I0(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=mf)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=jb(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Kr]=e,t[bu]=r,ux(t,e,!1,!1),e.stateNode=t;e:{switch(o=oy(n,r),n){case"dialog":Ze("cancel",t),Ze("close",t),s=r;break;case"iframe":case"object":case"embed":Ze("load",t),s=r;break;case"video":case"audio":for(s=0;s<Fc.length;s++)Ze(Fc[s],t);s=r;break;case"source":Ze("error",t),s=r;break;case"img":case"image":case"link":Ze("error",t),Ze("load",t),s=r;break;case"details":Ze("toggle",t),s=r;break;case"input":w0(t,r),s=ey(t,r),Ze("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=dt({},r,{value:void 0}),Ze("invalid",t);break;case"textarea":T0(t,r),s=ry(t,r),Ze("invalid",t);break;default:s=r}iy(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?zb(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Bb(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&yu(t,l):typeof l=="number"&&yu(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(gu.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Ze("scroll",t):l!=null&&Jv(t,i,l,o))}switch(n){case"input":Qd(t),E0(t,r,!1);break;case"textarea":Qd(t),I0(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Vi(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?za(t,!!r.multiple,i,!1):r.defaultValue!=null&&za(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=mf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Jt(e),null;case 6:if(t&&e.stateNode!=null)hx(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(G(166));if(n=xo(Ru.current),xo(Zr.current),sh(e)){if(r=e.stateNode,n=e.memoizedProps,r[Kr]=e,(i=r.nodeValue!==n)&&(t=$n,t!==null))switch(t.tag){case 3:rh(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&rh(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Kr]=e,e.stateNode=r}return Jt(e),null;case 13:if(et(ct),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(it&&Un!==null&&e.mode&1&&!(e.flags&128))C1(),ul(),e.flags|=98560,i=!1;else if(i=sh(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(G(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(G(317));i[Kr]=e}else ul(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Jt(e),i=!1}else yr!==null&&(jy(yr),yr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ct.current&1?Dt===0&&(Dt=3):O_())),e.updateQueue!==null&&(e.flags|=4),Jt(e),null);case 4:return hl(),Dy(t,e),t===null&&Su(e.stateNode.containerInfo),Jt(e),null;case 10:return y_(e.type._context),Jt(e),null;case 17:return Pn(e.type)&&gf(),Jt(e),null;case 19:if(et(ct),i=e.memoizedState,i===null)return Jt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Sc(i,!1);else{if(Dt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=If(t),o!==null){for(e.flags|=128,Sc(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ge(ct,ct.current&1|2),e.child}t=t.sibling}i.tail!==null&&_t()>pl&&(e.flags|=128,r=!0,Sc(i,!1),e.lanes=4194304)}else{if(!r)if(t=If(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Sc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!it)return Jt(e),null}else 2*_t()-i.renderingStartTime>pl&&n!==1073741824&&(e.flags|=128,r=!0,Sc(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=_t(),e.sibling=null,n=ct.current,Ge(ct,r?n&1|2:n&1),e):(Jt(e),null);case 22:case 23:return N_(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?On&1073741824&&(Jt(e),e.subtreeFlags&6&&(e.flags|=8192)):Jt(e),null;case 24:return null;case 25:return null}throw Error(G(156,e.tag))}function qO(t,e){switch(f_(e),e.tag){case 1:return Pn(e.type)&&gf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return hl(),et(Rn),et(an),T_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return E_(e),null;case 13:if(et(ct),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(G(340));ul()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return et(ct),null;case 4:return hl(),null;case 10:return y_(e.type._context),null;case 22:case 23:return N_(),null;case 24:return null;default:return null}}var ah=!1,nn=!1,HO=typeof WeakSet=="function"?WeakSet:Set,te=null;function Ba(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){mt(t,e,r)}else n.current=null}function Ny(t,e,n){try{n()}catch(r){mt(t,e,r)}}var hT=!1;function WO(t,e){if(gy=hf,t=y1(),d_(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var p;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===n&&++c===s&&(a=o),f===i&&++d===r&&(l=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(yy={focusedElem:t,selectionRange:n},hf=!1,te=e;te!==null;)if(e=te,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,te=t;else for(;te!==null;){e=te;try{var E=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var g=E.memoizedProps,y=E.memoizedState,_=e.stateNode,w=_.getSnapshotBeforeUpdate(e.elementType===e.type?g:dr(e.type,g),y);_.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(R){mt(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,te=t;break}te=e.return}return E=hT,hT=!1,E}function Zc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Ny(e,n,i)}s=s.next}while(s!==r)}}function Rp(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Oy(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function fx(t){var e=t.alternate;e!==null&&(t.alternate=null,fx(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Kr],delete e[bu],delete e[wy],delete e[RO],delete e[PO])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function px(t){return t.tag===5||t.tag===3||t.tag===4}function fT(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||px(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Vy(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=mf));else if(r!==4&&(t=t.child,t!==null))for(Vy(t,e,n),t=t.sibling;t!==null;)Vy(t,e,n),t=t.sibling}function Ly(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ly(t,e,n),t=t.sibling;t!==null;)Ly(t,e,n),t=t.sibling}var qt=null,mr=!1;function Ys(t,e,n){for(n=n.child;n!==null;)mx(t,e,n),n=n.sibling}function mx(t,e,n){if(Jr&&typeof Jr.onCommitFiberUnmount=="function")try{Jr.onCommitFiberUnmount(wp,n)}catch{}switch(n.tag){case 5:nn||Ba(n,e);case 6:var r=qt,s=mr;qt=null,Ys(t,e,n),qt=r,mr=s,qt!==null&&(mr?(t=qt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):qt.removeChild(n.stateNode));break;case 18:qt!==null&&(mr?(t=qt,n=n.stateNode,t.nodeType===8?ig(t.parentNode,n):t.nodeType===1&&ig(t,n),Eu(t)):ig(qt,n.stateNode));break;case 4:r=qt,s=mr,qt=n.stateNode.containerInfo,mr=!0,Ys(t,e,n),qt=r,mr=s;break;case 0:case 11:case 14:case 15:if(!nn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Ny(n,e,o),s=s.next}while(s!==r)}Ys(t,e,n);break;case 1:if(!nn&&(Ba(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){mt(n,e,a)}Ys(t,e,n);break;case 21:Ys(t,e,n);break;case 22:n.mode&1?(nn=(r=nn)||n.memoizedState!==null,Ys(t,e,n),nn=r):Ys(t,e,n);break;default:Ys(t,e,n)}}function pT(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new HO),e.forEach(function(r){var s=tV.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function cr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:qt=a.stateNode,mr=!1;break e;case 3:qt=a.stateNode.containerInfo,mr=!0;break e;case 4:qt=a.stateNode.containerInfo,mr=!0;break e}a=a.return}if(qt===null)throw Error(G(160));mx(i,o,s),qt=null,mr=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){mt(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)gx(e,t),e=e.sibling}function gx(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(cr(e,t),jr(t),r&4){try{Zc(3,t,t.return),Rp(3,t)}catch(g){mt(t,t.return,g)}try{Zc(5,t,t.return)}catch(g){mt(t,t.return,g)}}break;case 1:cr(e,t),jr(t),r&512&&n!==null&&Ba(n,n.return);break;case 5:if(cr(e,t),jr(t),r&512&&n!==null&&Ba(n,n.return),t.flags&32){var s=t.stateNode;try{yu(s,"")}catch(g){mt(t,t.return,g)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Fb(s,i),oy(a,o);var c=oy(a,i);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?zb(s,h):d==="dangerouslySetInnerHTML"?Bb(s,h):d==="children"?yu(s,h):Jv(s,d,h,c)}switch(a){case"input":ty(s,i);break;case"textarea":Ub(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?za(s,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?za(s,!!i.multiple,i.defaultValue,!0):za(s,!!i.multiple,i.multiple?[]:"",!1))}s[bu]=i}catch(g){mt(t,t.return,g)}}break;case 6:if(cr(e,t),jr(t),r&4){if(t.stateNode===null)throw Error(G(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){mt(t,t.return,g)}}break;case 3:if(cr(e,t),jr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Eu(e.containerInfo)}catch(g){mt(t,t.return,g)}break;case 4:cr(e,t),jr(t);break;case 13:cr(e,t),jr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(k_=_t())),r&4&&pT(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(nn=(c=nn)||d,cr(e,t),nn=c):cr(e,t),jr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(te=t,d=t.child;d!==null;){for(h=te=d;te!==null;){switch(f=te,p=f.child,f.tag){case 0:case 11:case 14:case 15:Zc(4,f,f.return);break;case 1:Ba(f,f.return);var E=f.stateNode;if(typeof E.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,E.props=e.memoizedProps,E.state=e.memoizedState,E.componentWillUnmount()}catch(g){mt(r,n,g)}}break;case 5:Ba(f,f.return);break;case 22:if(f.memoizedState!==null){gT(h);continue}}p!==null?(p.return=f,te=p):gT(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=$b("display",o))}catch(g){mt(t,t.return,g)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(g){mt(t,t.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:cr(e,t),jr(t),r&4&&pT(t);break;case 21:break;default:cr(e,t),jr(t)}}function jr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(px(n)){var r=n;break e}n=n.return}throw Error(G(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(yu(s,""),r.flags&=-33);var i=fT(t);Ly(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=fT(t);Vy(t,a,o);break;default:throw Error(G(161))}}catch(l){mt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function KO(t,e,n){te=t,yx(t)}function yx(t,e,n){for(var r=(t.mode&1)!==0;te!==null;){var s=te,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||ah;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||nn;a=ah;var c=nn;if(ah=o,(nn=l)&&!c)for(te=s;te!==null;)o=te,l=o.child,o.tag===22&&o.memoizedState!==null?yT(s):l!==null?(l.return=o,te=l):yT(s);for(;i!==null;)te=i,yx(i),i=i.sibling;te=s,ah=a,nn=c}mT(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,te=i):mT(t)}}function mT(t){for(;te!==null;){var e=te;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:nn||Rp(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!nn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:dr(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Z0(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Z0(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Eu(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}nn||e.flags&512&&Oy(e)}catch(f){mt(e,e.return,f)}}if(e===t){te=null;break}if(n=e.sibling,n!==null){n.return=e.return,te=n;break}te=e.return}}function gT(t){for(;te!==null;){var e=te;if(e===t){te=null;break}var n=e.sibling;if(n!==null){n.return=e.return,te=n;break}te=e.return}}function yT(t){for(;te!==null;){var e=te;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Rp(4,e)}catch(l){mt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){mt(e,s,l)}}var i=e.return;try{Oy(e)}catch(l){mt(e,i,l)}break;case 5:var o=e.return;try{Oy(e)}catch(l){mt(e,o,l)}}}catch(l){mt(e,e.return,l)}if(e===t){te=null;break}var a=e.sibling;if(a!==null){a.return=e.return,te=a;break}te=e.return}}var GO=Math.ceil,bf=Os.ReactCurrentDispatcher,P_=Os.ReactCurrentOwner,rr=Os.ReactCurrentBatchConfig,Me=0,$t=null,bt=null,Wt=0,On=0,$a=Ji(0),Dt=0,Du=null,Jo=0,Pp=0,C_=0,eu=null,In=null,k_=0,pl=1/0,ds=null,xf=!1,My=null,Ai=null,lh=!1,gi=null,Rf=0,tu=0,Fy=null,jh=-1,Bh=0;function fn(){return Me&6?_t():jh!==-1?jh:jh=_t()}function bi(t){return t.mode&1?Me&2&&Wt!==0?Wt&-Wt:kO.transition!==null?(Bh===0&&(Bh=t1()),Bh):(t=$e,t!==0||(t=window.event,t=t===void 0?16:l1(t.type)),t):1}function wr(t,e,n,r){if(50<tu)throw tu=0,Fy=null,Error(G(185));ld(t,n,r),(!(Me&2)||t!==$t)&&(t===$t&&(!(Me&2)&&(Pp|=n),Dt===4&&ai(t,Wt)),Cn(t,r),n===1&&Me===0&&!(e.mode&1)&&(pl=_t()+500,Ap&&Zi()))}function Cn(t,e){var n=t.callbackNode;k2(t,e);var r=df(t,t===$t?Wt:0);if(r===0)n!==null&&b0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&b0(n),e===1)t.tag===0?CO(vT.bind(null,t)):x1(vT.bind(null,t)),bO(function(){!(Me&6)&&Zi()}),n=null;else{switch(n1(r)){case 1:n=r_;break;case 4:n=Zb;break;case 16:n=uf;break;case 536870912:n=e1;break;default:n=uf}n=Ax(n,vx.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function vx(t,e){if(jh=-1,Bh=0,Me&6)throw Error(G(327));var n=t.callbackNode;if(Ga()&&t.callbackNode!==n)return null;var r=df(t,t===$t?Wt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Pf(t,r);else{e=r;var s=Me;Me|=2;var i=wx();($t!==t||Wt!==e)&&(ds=null,pl=_t()+500,zo(t,e));do try{XO();break}catch(a){_x(t,a)}while(!0);g_(),bf.current=i,Me=s,bt!==null?e=0:($t=null,Wt=0,e=Dt)}if(e!==0){if(e===2&&(s=dy(t),s!==0&&(r=s,e=Uy(t,s))),e===1)throw n=Du,zo(t,0),ai(t,r),Cn(t,_t()),n;if(e===6)ai(t,r);else{if(s=t.current.alternate,!(r&30)&&!QO(s)&&(e=Pf(t,r),e===2&&(i=dy(t),i!==0&&(r=i,e=Uy(t,i))),e===1))throw n=Du,zo(t,0),ai(t,r),Cn(t,_t()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(G(345));case 2:mo(t,In,ds);break;case 3:if(ai(t,r),(r&130023424)===r&&(e=k_+500-_t(),10<e)){if(df(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){fn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=_y(mo.bind(null,t,In,ds),e);break}mo(t,In,ds);break;case 4:if(ai(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-_r(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=_t()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*GO(r/1960))-r,10<r){t.timeoutHandle=_y(mo.bind(null,t,In,ds),r);break}mo(t,In,ds);break;case 5:mo(t,In,ds);break;default:throw Error(G(329))}}}return Cn(t,_t()),t.callbackNode===n?vx.bind(null,t):null}function Uy(t,e){var n=eu;return t.current.memoizedState.isDehydrated&&(zo(t,e).flags|=256),t=Pf(t,e),t!==2&&(e=In,In=n,e!==null&&jy(e)),t}function jy(t){In===null?In=t:In.push.apply(In,t)}function QO(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Sr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ai(t,e){for(e&=~C_,e&=~Pp,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-_r(e),r=1<<n;t[n]=-1,e&=~r}}function vT(t){if(Me&6)throw Error(G(327));Ga();var e=df(t,0);if(!(e&1))return Cn(t,_t()),null;var n=Pf(t,e);if(t.tag!==0&&n===2){var r=dy(t);r!==0&&(e=r,n=Uy(t,r))}if(n===1)throw n=Du,zo(t,0),ai(t,e),Cn(t,_t()),n;if(n===6)throw Error(G(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,mo(t,In,ds),Cn(t,_t()),null}function D_(t,e){var n=Me;Me|=1;try{return t(e)}finally{Me=n,Me===0&&(pl=_t()+500,Ap&&Zi())}}function Zo(t){gi!==null&&gi.tag===0&&!(Me&6)&&Ga();var e=Me;Me|=1;var n=rr.transition,r=$e;try{if(rr.transition=null,$e=1,t)return t()}finally{$e=r,rr.transition=n,Me=e,!(Me&6)&&Zi()}}function N_(){On=$a.current,et($a)}function zo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,AO(n)),bt!==null)for(n=bt.return;n!==null;){var r=n;switch(f_(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&gf();break;case 3:hl(),et(Rn),et(an),T_();break;case 5:E_(r);break;case 4:hl();break;case 13:et(ct);break;case 19:et(ct);break;case 10:y_(r.type._context);break;case 22:case 23:N_()}n=n.return}if($t=t,bt=t=xi(t.current,null),Wt=On=e,Dt=0,Du=null,C_=Pp=Jo=0,In=eu=null,bo!==null){for(e=0;e<bo.length;e++)if(n=bo[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}bo=null}return t}function _x(t,e){do{var n=bt;try{if(g_(),Mh.current=Af,Sf){for(var r=ut.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Sf=!1}if(Xo=0,jt=Ct=ut=null,Jc=!1,Pu=0,P_.current=null,n===null||n.return===null){Dt=1,Du=e,bt=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=Wt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=iT(o);if(p!==null){p.flags&=-257,oT(p,o,a,i,e),p.mode&1&&sT(i,c,e),e=p,l=c;var E=e.updateQueue;if(E===null){var g=new Set;g.add(l),e.updateQueue=g}else E.add(l);break e}else{if(!(e&1)){sT(i,c,e),O_();break e}l=Error(G(426))}}else if(it&&a.mode&1){var y=iT(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),oT(y,o,a,i,e),p_(fl(l,a));break e}}i=l=fl(l,a),Dt!==4&&(Dt=2),eu===null?eu=[i]:eu.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var _=nx(i,l,e);J0(i,_);break e;case 1:a=l;var w=i.type,T=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Ai===null||!Ai.has(T)))){i.flags|=65536,e&=-e,i.lanes|=e;var R=rx(i,a,e);J0(i,R);break e}}i=i.return}while(i!==null)}Tx(n)}catch(O){e=O,bt===n&&n!==null&&(bt=n=n.return);continue}break}while(!0)}function wx(){var t=bf.current;return bf.current=Af,t===null?Af:t}function O_(){(Dt===0||Dt===3||Dt===2)&&(Dt=4),$t===null||!(Jo&268435455)&&!(Pp&268435455)||ai($t,Wt)}function Pf(t,e){var n=Me;Me|=2;var r=wx();($t!==t||Wt!==e)&&(ds=null,zo(t,e));do try{YO();break}catch(s){_x(t,s)}while(!0);if(g_(),Me=n,bf.current=r,bt!==null)throw Error(G(261));return $t=null,Wt=0,Dt}function YO(){for(;bt!==null;)Ex(bt)}function XO(){for(;bt!==null&&!T2();)Ex(bt)}function Ex(t){var e=Sx(t.alternate,t,On);t.memoizedProps=t.pendingProps,e===null?Tx(t):bt=e,P_.current=null}function Tx(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=qO(n,e),n!==null){n.flags&=32767,bt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Dt=6,bt=null;return}}else if(n=zO(n,e,On),n!==null){bt=n;return}if(e=e.sibling,e!==null){bt=e;return}bt=e=t}while(e!==null);Dt===0&&(Dt=5)}function mo(t,e,n){var r=$e,s=rr.transition;try{rr.transition=null,$e=1,JO(t,e,n,r)}finally{rr.transition=s,$e=r}return null}function JO(t,e,n,r){do Ga();while(gi!==null);if(Me&6)throw Error(G(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(G(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(D2(t,i),t===$t&&(bt=$t=null,Wt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||lh||(lh=!0,Ax(uf,function(){return Ga(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=rr.transition,rr.transition=null;var o=$e;$e=1;var a=Me;Me|=4,P_.current=null,WO(t,n),gx(n,t),vO(yy),hf=!!gy,yy=gy=null,t.current=n,KO(n),I2(),Me=a,$e=o,rr.transition=i}else t.current=n;if(lh&&(lh=!1,gi=t,Rf=s),i=t.pendingLanes,i===0&&(Ai=null),b2(n.stateNode),Cn(t,_t()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(xf)throw xf=!1,t=My,My=null,t;return Rf&1&&t.tag!==0&&Ga(),i=t.pendingLanes,i&1?t===Fy?tu++:(tu=0,Fy=t):tu=0,Zi(),null}function Ga(){if(gi!==null){var t=n1(Rf),e=rr.transition,n=$e;try{if(rr.transition=null,$e=16>t?16:t,gi===null)var r=!1;else{if(t=gi,gi=null,Rf=0,Me&6)throw Error(G(331));var s=Me;for(Me|=4,te=t.current;te!==null;){var i=te,o=i.child;if(te.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(te=c;te!==null;){var d=te;switch(d.tag){case 0:case 11:case 15:Zc(8,d,i)}var h=d.child;if(h!==null)h.return=d,te=h;else for(;te!==null;){d=te;var f=d.sibling,p=d.return;if(fx(d),d===c){te=null;break}if(f!==null){f.return=p,te=f;break}te=p}}}var E=i.alternate;if(E!==null){var g=E.child;if(g!==null){E.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}te=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,te=o;else e:for(;te!==null;){if(i=te,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Zc(9,i,i.return)}var _=i.sibling;if(_!==null){_.return=i.return,te=_;break e}te=i.return}}var w=t.current;for(te=w;te!==null;){o=te;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,te=T;else e:for(o=w;te!==null;){if(a=te,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Rp(9,a)}}catch(O){mt(a,a.return,O)}if(a===o){te=null;break e}var R=a.sibling;if(R!==null){R.return=a.return,te=R;break e}te=a.return}}if(Me=s,Zi(),Jr&&typeof Jr.onPostCommitFiberRoot=="function")try{Jr.onPostCommitFiberRoot(wp,t)}catch{}r=!0}return r}finally{$e=n,rr.transition=e}}return!1}function _T(t,e,n){e=fl(n,e),e=nx(t,e,1),t=Si(t,e,1),e=fn(),t!==null&&(ld(t,1,e),Cn(t,e))}function mt(t,e,n){if(t.tag===3)_T(t,t,n);else for(;e!==null;){if(e.tag===3){_T(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ai===null||!Ai.has(r))){t=fl(n,t),t=rx(e,t,1),e=Si(e,t,1),t=fn(),e!==null&&(ld(e,1,t),Cn(e,t));break}}e=e.return}}function ZO(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=fn(),t.pingedLanes|=t.suspendedLanes&n,$t===t&&(Wt&n)===n&&(Dt===4||Dt===3&&(Wt&130023424)===Wt&&500>_t()-k_?zo(t,0):C_|=n),Cn(t,e)}function Ix(t,e){e===0&&(t.mode&1?(e=Jd,Jd<<=1,!(Jd&130023424)&&(Jd=4194304)):e=1);var n=fn();t=xs(t,e),t!==null&&(ld(t,e,n),Cn(t,n))}function eV(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Ix(t,n)}function tV(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(G(314))}r!==null&&r.delete(e),Ix(t,n)}var Sx;Sx=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Rn.current)Sn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Sn=!1,$O(t,e,n);Sn=!!(t.flags&131072)}else Sn=!1,it&&e.flags&1048576&&R1(e,_f,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Uh(t,e),t=e.pendingProps;var s=cl(e,an.current);Ka(e,n),s=S_(null,e,r,t,s,n);var i=A_();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Pn(r)?(i=!0,yf(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,__(e),s.updater=xp,e.stateNode=s,s._reactInternals=e,by(e,r,t,n),e=Py(null,e,r,!0,i,n)):(e.tag=0,it&&i&&h_(e),dn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Uh(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=rV(r),t=dr(r,t),s){case 0:e=Ry(null,e,r,t,n);break e;case 1:e=cT(null,e,r,t,n);break e;case 11:e=aT(null,e,r,t,n);break e;case 14:e=lT(null,e,r,dr(r.type,t),n);break e}throw Error(G(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:dr(r,s),Ry(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:dr(r,s),cT(t,e,r,s,n);case 3:e:{if(ax(e),t===null)throw Error(G(387));r=e.pendingProps,i=e.memoizedState,s=i.element,O1(t,e),Tf(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=fl(Error(G(423)),e),e=uT(t,e,r,n,s);break e}else if(r!==s){s=fl(Error(G(424)),e),e=uT(t,e,r,n,s);break e}else for(Un=Ii(e.stateNode.containerInfo.firstChild),$n=e,it=!0,yr=null,n=D1(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ul(),r===s){e=Rs(t,e,n);break e}dn(t,e,r,n)}e=e.child}return e;case 5:return V1(e),t===null&&Iy(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,vy(r,s)?o=null:i!==null&&vy(r,i)&&(e.flags|=32),ox(t,e),dn(t,e,o,n),e.child;case 6:return t===null&&Iy(e),null;case 13:return lx(t,e,n);case 4:return w_(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=dl(e,null,r,n):dn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:dr(r,s),aT(t,e,r,s,n);case 7:return dn(t,e,e.pendingProps,n),e.child;case 8:return dn(t,e,e.pendingProps.children,n),e.child;case 12:return dn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ge(wf,r._currentValue),r._currentValue=o,i!==null)if(Sr(i.value,o)){if(i.children===s.children&&!Rn.current){e=Rs(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=ws(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Sy(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(G(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Sy(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}dn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ka(e,n),s=ir(s),r=r(s),e.flags|=1,dn(t,e,r,n),e.child;case 14:return r=e.type,s=dr(r,e.pendingProps),s=dr(r.type,s),lT(t,e,r,s,n);case 15:return sx(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:dr(r,s),Uh(t,e),e.tag=1,Pn(r)?(t=!0,yf(e)):t=!1,Ka(e,n),tx(e,r,s),by(e,r,s,n),Py(null,e,r,!0,t,n);case 19:return cx(t,e,n);case 22:return ix(t,e,n)}throw Error(G(156,e.tag))};function Ax(t,e){return Jb(t,e)}function nV(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nr(t,e,n,r){return new nV(t,e,n,r)}function V_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function rV(t){if(typeof t=="function")return V_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===e_)return 11;if(t===t_)return 14}return 2}function xi(t,e){var n=t.alternate;return n===null?(n=nr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function $h(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")V_(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Da:return qo(n.children,s,i,e);case Zv:o=8,s|=8;break;case Yg:return t=nr(12,n,e,s|2),t.elementType=Yg,t.lanes=i,t;case Xg:return t=nr(13,n,e,s),t.elementType=Xg,t.lanes=i,t;case Jg:return t=nr(19,n,e,s),t.elementType=Jg,t.lanes=i,t;case Vb:return Cp(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Nb:o=10;break e;case Ob:o=9;break e;case e_:o=11;break e;case t_:o=14;break e;case si:o=16,r=null;break e}throw Error(G(130,t==null?t:typeof t,""))}return e=nr(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function qo(t,e,n,r){return t=nr(7,t,r,e),t.lanes=n,t}function Cp(t,e,n,r){return t=nr(22,t,r,e),t.elementType=Vb,t.lanes=n,t.stateNode={isHidden:!1},t}function fg(t,e,n){return t=nr(6,t,null,e),t.lanes=n,t}function pg(t,e,n){return e=nr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function sV(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Gm(0),this.expirationTimes=Gm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gm(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function L_(t,e,n,r,s,i,o,a,l){return t=new sV(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=nr(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},__(i),t}function iV(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ka,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function bx(t){if(!t)return Li;t=t._reactInternals;e:{if(ua(t)!==t||t.tag!==1)throw Error(G(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Pn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(G(171))}if(t.tag===1){var n=t.type;if(Pn(n))return b1(t,n,e)}return e}function xx(t,e,n,r,s,i,o,a,l){return t=L_(n,r,!0,t,s,i,o,a,l),t.context=bx(null),n=t.current,r=fn(),s=bi(n),i=ws(r,s),i.callback=e??null,Si(n,i,s),t.current.lanes=s,ld(t,s,r),Cn(t,r),t}function kp(t,e,n,r){var s=e.current,i=fn(),o=bi(s);return n=bx(n),e.context===null?e.context=n:e.pendingContext=n,e=ws(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Si(s,e,o),t!==null&&(wr(t,s,o,i),Lh(t,s,o)),o}function Cf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function wT(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function M_(t,e){wT(t,e),(t=t.alternate)&&wT(t,e)}function oV(){return null}var Rx=typeof reportError=="function"?reportError:function(t){console.error(t)};function F_(t){this._internalRoot=t}Dp.prototype.render=F_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(G(409));kp(t,e,null,null)};Dp.prototype.unmount=F_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Zo(function(){kp(null,t,null,null)}),e[bs]=null}};function Dp(t){this._internalRoot=t}Dp.prototype.unstable_scheduleHydration=function(t){if(t){var e=i1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<oi.length&&e!==0&&e<oi[n].priority;n++);oi.splice(n,0,t),n===0&&a1(t)}};function U_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Np(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ET(){}function aV(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Cf(o);i.call(c)}}var o=xx(e,r,t,0,null,!1,!1,"",ET);return t._reactRootContainer=o,t[bs]=o.current,Su(t.nodeType===8?t.parentNode:t),Zo(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Cf(l);a.call(c)}}var l=L_(t,0,!1,null,null,!1,!1,"",ET);return t._reactRootContainer=l,t[bs]=l.current,Su(t.nodeType===8?t.parentNode:t),Zo(function(){kp(e,l,n,r)}),l}function Op(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Cf(o);a.call(l)}}kp(e,o,t,s)}else o=aV(n,e,t,s,r);return Cf(o)}r1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Mc(e.pendingLanes);n!==0&&(s_(e,n|1),Cn(e,_t()),!(Me&6)&&(pl=_t()+500,Zi()))}break;case 13:Zo(function(){var r=xs(t,1);if(r!==null){var s=fn();wr(r,t,1,s)}}),M_(t,1)}};i_=function(t){if(t.tag===13){var e=xs(t,134217728);if(e!==null){var n=fn();wr(e,t,134217728,n)}M_(t,134217728)}};s1=function(t){if(t.tag===13){var e=bi(t),n=xs(t,e);if(n!==null){var r=fn();wr(n,t,e,r)}M_(t,e)}};i1=function(){return $e};o1=function(t,e){var n=$e;try{return $e=t,e()}finally{$e=n}};ly=function(t,e,n){switch(e){case"input":if(ty(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Sp(r);if(!s)throw Error(G(90));Mb(r),ty(r,s)}}}break;case"textarea":Ub(t,n);break;case"select":e=n.value,e!=null&&za(t,!!n.multiple,e,!1)}};Wb=D_;Kb=Zo;var lV={usingClientEntryPoint:!1,Events:[ud,La,Sp,qb,Hb,D_]},Ac={findFiberByHostInstance:Ao,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},cV={bundleType:Ac.bundleType,version:Ac.version,rendererPackageName:Ac.rendererPackageName,rendererConfig:Ac.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Os.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Yb(t),t===null?null:t.stateNode},findFiberByHostInstance:Ac.findFiberByHostInstance||oV,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ch=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ch.isDisabled&&ch.supportsFiber)try{wp=ch.inject(cV),Jr=ch}catch{}}Gn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lV;Gn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!U_(e))throw Error(G(200));return iV(t,e,null,n)};Gn.createRoot=function(t,e){if(!U_(t))throw Error(G(299));var n=!1,r="",s=Rx;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=L_(t,1,!1,null,null,n,!1,r,s),t[bs]=e.current,Su(t.nodeType===8?t.parentNode:t),new F_(e)};Gn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(G(188)):(t=Object.keys(t).join(","),Error(G(268,t)));return t=Yb(e),t=t===null?null:t.stateNode,t};Gn.flushSync=function(t){return Zo(t)};Gn.hydrate=function(t,e,n){if(!Np(e))throw Error(G(200));return Op(null,t,e,!0,n)};Gn.hydrateRoot=function(t,e,n){if(!U_(t))throw Error(G(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Rx;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=xx(e,null,t,1,n??null,s,!1,i,o),t[bs]=e.current,Su(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Dp(e)};Gn.render=function(t,e,n){if(!Np(e))throw Error(G(200));return Op(null,t,e,!1,n)};Gn.unmountComponentAtNode=function(t){if(!Np(t))throw Error(G(40));return t._reactRootContainer?(Zo(function(){Op(null,null,t,!1,function(){t._reactRootContainer=null,t[bs]=null})}),!0):!1};Gn.unstable_batchedUpdates=D_;Gn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Np(n))throw Error(G(200));if(t==null||t._reactInternals===void 0)throw Error(G(38));return Op(t,e,n,!1,r)};Gn.version="18.3.1-next-f1338f8080-20240426";function Px(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Px)}catch(t){console.error(t)}}Px(),Pb.exports=Gn;var hd=Pb.exports;const Cx=gb(hd);var kx,TT=hd;kx=TT.createRoot,TT.hydrateRoot;const uV="modulepreload",dV=function(t,e){return new URL(t,e).href},IT={},De=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=dV(c,r),c in IT)return;IT[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(!!r)for(let E=o.length-1;E>=0;E--){const g=o[E];if(g.href===c&&(!d||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${h}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":uV,d||(p.as="script"),p.crossOrigin="",p.href=c,l&&p.setAttribute("nonce",l),document.head.appendChild(p),d)return new Promise((E,g)=>{p.addEventListener("load",E),p.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},hV=1,fV=1e6;let mg=0;function pV(){return mg=(mg+1)%Number.MAX_SAFE_INTEGER,mg.toString()}const gg=new Map,ST=t=>{if(gg.has(t))return;const e=setTimeout(()=>{gg.delete(t),nu({type:"REMOVE_TOAST",toastId:t})},fV);gg.set(t,e)},mV=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,hV)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?ST(n):t.toasts.forEach(r=>{ST(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},zh=[];let qh={toasts:[]};function nu(t){qh=mV(qh,t),zh.forEach(e=>{e(qh)})}function gV({...t}){const e=pV(),n=s=>nu({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>nu({type:"DISMISS_TOAST",toastId:e});return nu({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function j_(){const[t,e]=A.useState(qh);return A.useEffect(()=>(zh.push(e),()=>{const n=zh.indexOf(e);n>-1&&zh.splice(n,1)}),[t]),{...t,toast:gV,dismiss:n=>nu({type:"DISMISS_TOAST",toastId:n})}}function kt(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function AT(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Dx(...t){return e=>{let n=!1;const r=t.map(s=>{const i=AT(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():AT(t[s],null)}}}}function Ar(...t){return A.useCallback(Dx(...t),t)}function K8(t,e){const n=A.createContext(e),r=i=>{const{children:o,...a}=i,l=A.useMemo(()=>a,Object.values(a));return x.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function s(i){const o=A.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function Vp(t,e=[]){let n=[];function r(i,o){const a=A.createContext(o),l=n.length;n=[...n,o];const c=h=>{var _;const{scope:f,children:p,...E}=h,g=((_=f==null?void 0:f[t])==null?void 0:_[l])||a,y=A.useMemo(()=>E,Object.values(E));return x.jsx(g.Provider,{value:y,children:p})};c.displayName=i+"Provider";function d(h,f){var g;const p=((g=f==null?void 0:f[t])==null?void 0:g[l])||a,E=A.useContext(p);if(E)return E;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[c,d]}const s=()=>{const i=n.map(o=>A.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return A.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,yV(s,...e)]}function yV(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(i)[`__scope${c}`];return{...a,...h}},{});return A.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function kf(t){const e=_V(t),n=A.forwardRef((r,s)=>{const{children:i,...o}=r,a=A.Children.toArray(i),l=a.find(EV);if(l){const c=l.props.children,d=a.map(h=>h===l?A.Children.count(c)>1?A.Children.only(null):A.isValidElement(c)?c.props.children:null:h);return x.jsx(e,{...o,ref:s,children:A.isValidElement(c)?A.cloneElement(c,void 0,d):null})}return x.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var vV=kf("Slot");function _V(t){const e=A.forwardRef((n,r)=>{const{children:s,...i}=n;if(A.isValidElement(s)){const o=IV(s),a=TV(i,s.props);return s.type!==A.Fragment&&(a.ref=r?Dx(r,o):o),A.cloneElement(s,a)}return A.Children.count(s)>1?A.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Nx=Symbol("radix.slottable");function wV(t){const e=({children:n})=>x.jsx(x.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=Nx,e}function EV(t){return A.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Nx}function TV(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{const l=i(...a);return s(...a),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function IV(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function SV(t){const e=t+"CollectionProvider",[n,r]=Vp(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:y,children:_}=g,w=$.useRef(null),T=$.useRef(new Map).current;return x.jsx(s,{scope:y,itemMap:T,collectionRef:w,children:_})};o.displayName=e;const a=t+"CollectionSlot",l=kf(a),c=$.forwardRef((g,y)=>{const{scope:_,children:w}=g,T=i(a,_),R=Ar(y,T.collectionRef);return x.jsx(l,{ref:R,children:w})});c.displayName=a;const d=t+"CollectionItemSlot",h="data-radix-collection-item",f=kf(d),p=$.forwardRef((g,y)=>{const{scope:_,children:w,...T}=g,R=$.useRef(null),O=Ar(y,R),V=i(d,_);return $.useEffect(()=>(V.itemMap.set(R,{ref:R,...T}),()=>void V.itemMap.delete(R))),x.jsx(f,{[h]:"",ref:O,children:w})});p.displayName=d;function E(g){const y=i(t+"CollectionConsumer",g);return $.useCallback(()=>{const w=y.collectionRef.current;if(!w)return[];const T=Array.from(w.querySelectorAll(`[${h}]`));return Array.from(y.itemMap.values()).sort((V,S)=>T.indexOf(V.ref.current)-T.indexOf(S.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:o,Slot:c,ItemSlot:p},E,r]}var AV=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],kn=AV.reduce((t,e)=>{const n=kf(`Primitive.${e}`),r=A.forwardRef((s,i)=>{const{asChild:o,...a}=s,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),x.jsx(l,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function Ox(t,e){t&&hd.flushSync(()=>t.dispatchEvent(e))}function Mi(t){const e=A.useRef(t);return A.useEffect(()=>{e.current=t}),A.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function bV(t,e=globalThis==null?void 0:globalThis.document){const n=Mi(t);A.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var xV="DismissableLayer",By="dismissableLayer.update",RV="dismissableLayer.pointerDownOutside",PV="dismissableLayer.focusOutside",bT,Vx=A.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),B_=A.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=t,c=A.useContext(Vx),[d,h]=A.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=A.useState({}),E=Ar(e,S=>h(S)),g=Array.from(c.layers),[y]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),_=g.indexOf(y),w=d?g.indexOf(d):-1,T=c.layersWithOutsidePointerEventsDisabled.size>0,R=w>=_,O=kV(S=>{const I=S.target,b=[...c.branches].some(D=>D.contains(I));!R||b||(s==null||s(S),o==null||o(S),S.defaultPrevented||a==null||a())},f),V=DV(S=>{const I=S.target;[...c.branches].some(D=>D.contains(I))||(i==null||i(S),o==null||o(S),S.defaultPrevented||a==null||a())},f);return bV(S=>{w===c.layers.size-1&&(r==null||r(S),!S.defaultPrevented&&a&&(S.preventDefault(),a()))},f),A.useEffect(()=>{if(d)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(bT=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),xT(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=bT)}},[d,f,n,c]),A.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),xT())},[d,c]),A.useEffect(()=>{const S=()=>p({});return document.addEventListener(By,S),()=>document.removeEventListener(By,S)},[]),x.jsx(kn.div,{...l,ref:E,style:{pointerEvents:T?R?"auto":"none":void 0,...t.style},onFocusCapture:kt(t.onFocusCapture,V.onFocusCapture),onBlurCapture:kt(t.onBlurCapture,V.onBlurCapture),onPointerDownCapture:kt(t.onPointerDownCapture,O.onPointerDownCapture)})});B_.displayName=xV;var CV="DismissableLayerBranch",Lx=A.forwardRef((t,e)=>{const n=A.useContext(Vx),r=A.useRef(null),s=Ar(e,r);return A.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),x.jsx(kn.div,{...t,ref:s})});Lx.displayName=CV;function kV(t,e=globalThis==null?void 0:globalThis.document){const n=Mi(t),r=A.useRef(!1),s=A.useRef(()=>{});return A.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){Mx(RV,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function DV(t,e=globalThis==null?void 0:globalThis.document){const n=Mi(t),r=A.useRef(!1);return A.useEffect(()=>{const s=i=>{i.target&&!r.current&&Mx(PV,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function xT(){const t=new CustomEvent(By);document.dispatchEvent(t)}function Mx(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Ox(s,i):s.dispatchEvent(i)}var NV=B_,OV=Lx,Fi=globalThis!=null&&globalThis.document?A.useLayoutEffect:()=>{},VV="Portal",Fx=A.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,i]=A.useState(!1);Fi(()=>i(!0),[]);const o=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?Cx.createPortal(x.jsx(kn.div,{...r,ref:e}),o):null});Fx.displayName=VV;function LV(t,e){return A.useReducer((n,r)=>e[n][r]??n,t)}var $_=t=>{const{present:e,children:n}=t,r=MV(e),s=typeof n=="function"?n({present:r.isPresent}):A.Children.only(n),i=Ar(r.ref,FV(s));return typeof n=="function"||r.isPresent?A.cloneElement(s,{ref:i}):null};$_.displayName="Presence";function MV(t){const[e,n]=A.useState(),r=A.useRef(null),s=A.useRef(t),i=A.useRef("none"),o=t?"mounted":"unmounted",[a,l]=LV(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return A.useEffect(()=>{const c=uh(r.current);i.current=a==="mounted"?c:"none"},[a]),Fi(()=>{const c=r.current,d=s.current;if(d!==t){const f=i.current,p=uh(c);t?l("MOUNT"):p==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(d&&f!==p?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),Fi(()=>{if(e){let c;const d=e.ownerDocument.defaultView??window,h=p=>{const g=uh(r.current).includes(CSS.escape(p.animationName));if(p.target===e&&g&&(l("ANIMATION_END"),!s.current)){const y=e.style.animationFillMode;e.style.animationFillMode="forwards",c=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=y)})}},f=p=>{p.target===e&&(i.current=uh(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:A.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function uh(t){return(t==null?void 0:t.animationName)||"none"}function FV(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var UV=xb[" useInsertionEffect ".trim().toString()]||Fi;function jV({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,o]=BV({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:s;{const d=A.useRef(t!==void 0);A.useEffect(()=>{const h=d.current;h!==a&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=a},[a,r])}const c=A.useCallback(d=>{var h;if(a){const f=$V(d)?d(t):d;f!==t&&((h=o.current)==null||h.call(o,f))}else i(d)},[a,t,i,o]);return[l,c]}function BV({defaultProp:t,onChange:e}){const[n,r]=A.useState(t),s=A.useRef(n),i=A.useRef(e);return UV(()=>{i.current=e},[e]),A.useEffect(()=>{var o;s.current!==n&&((o=i.current)==null||o.call(i,n),s.current=n)},[n,s]),[n,r,i]}function $V(t){return typeof t=="function"}var zV=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),qV="VisuallyHidden",Lp=A.forwardRef((t,e)=>x.jsx(kn.span,{...t,ref:e,style:{...zV,...t.style}}));Lp.displayName=qV;var HV=Lp,z_="ToastProvider",[q_,WV,KV]=SV("Toast"),[Ux]=Vp("Toast",[KV]),[GV,Mp]=Ux(z_),jx=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[a,l]=A.useState(null),[c,d]=A.useState(0),h=A.useRef(!1),f=A.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${z_}\`. Expected non-empty \`string\`.`),x.jsx(q_.Provider,{scope:e,children:x.jsx(GV,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:A.useCallback(()=>d(p=>p+1),[]),onToastRemove:A.useCallback(()=>d(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};jx.displayName=z_;var Bx="ToastViewport",QV=["F8"],$y="toast.viewportPause",zy="toast.viewportResume",$x=A.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=QV,label:s="Notifications ({hotkey})",...i}=t,o=Mp(Bx,n),a=WV(n),l=A.useRef(null),c=A.useRef(null),d=A.useRef(null),h=A.useRef(null),f=Ar(e,h,o.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),E=o.toastCount>0;A.useEffect(()=>{const y=_=>{var T;r.length!==0&&r.every(R=>_[R]||_.code===R)&&((T=h.current)==null||T.focus())};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[r]),A.useEffect(()=>{const y=l.current,_=h.current;if(E&&y&&_){const w=()=>{if(!o.isClosePausedRef.current){const V=new CustomEvent($y);_.dispatchEvent(V),o.isClosePausedRef.current=!0}},T=()=>{if(o.isClosePausedRef.current){const V=new CustomEvent(zy);_.dispatchEvent(V),o.isClosePausedRef.current=!1}},R=V=>{!y.contains(V.relatedTarget)&&T()},O=()=>{y.contains(document.activeElement)||T()};return y.addEventListener("focusin",w),y.addEventListener("focusout",R),y.addEventListener("pointermove",w),y.addEventListener("pointerleave",O),window.addEventListener("blur",w),window.addEventListener("focus",T),()=>{y.removeEventListener("focusin",w),y.removeEventListener("focusout",R),y.removeEventListener("pointermove",w),y.removeEventListener("pointerleave",O),window.removeEventListener("blur",w),window.removeEventListener("focus",T)}}},[E,o.isClosePausedRef]);const g=A.useCallback(({tabbingDirection:y})=>{const w=a().map(T=>{const R=T.ref.current,O=[R,...lL(R)];return y==="forwards"?O:O.reverse()});return(y==="forwards"?w.reverse():w).flat()},[a]);return A.useEffect(()=>{const y=h.current;if(y){const _=w=>{var O,V,S;const T=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!T){const I=document.activeElement,b=w.shiftKey;if(w.target===y&&b){(O=c.current)==null||O.focus();return}const N=g({tabbingDirection:b?"backwards":"forwards"}),k=N.findIndex(q=>q===I);yg(N.slice(k+1))?w.preventDefault():b?(V=c.current)==null||V.focus():(S=d.current)==null||S.focus()}};return y.addEventListener("keydown",_),()=>y.removeEventListener("keydown",_)}},[a,g]),x.jsxs(OV,{ref:l,role:"region","aria-label":s.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:E?void 0:"none"},children:[E&&x.jsx(qy,{ref:c,onFocusFromOutsideViewport:()=>{const y=g({tabbingDirection:"forwards"});yg(y)}}),x.jsx(q_.Slot,{scope:n,children:x.jsx(kn.ol,{tabIndex:-1,...i,ref:f})}),E&&x.jsx(qy,{ref:d,onFocusFromOutsideViewport:()=>{const y=g({tabbingDirection:"backwards"});yg(y)}})]})});$x.displayName=Bx;var zx="ToastFocusProxy",qy=A.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=Mp(zx,n);return x.jsx(Lp,{tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=i.viewport)!=null&&c.contains(a))&&r()}})});qy.displayName=zx;var fd="Toast",YV="toast.swipeStart",XV="toast.swipeMove",JV="toast.swipeCancel",ZV="toast.swipeEnd",qx=A.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[a,l]=jV({prop:r,defaultProp:s??!0,onChange:i,caller:fd});return x.jsx($_,{present:n||a,children:x.jsx(nL,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:Mi(t.onPause),onResume:Mi(t.onResume),onSwipeStart:kt(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:kt(t.onSwipeMove,c=>{const{x:d,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:kt(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:kt(t.onSwipeEnd,c=>{const{x:d,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),l(!1)})})})});qx.displayName=fd;var[eL,tL]=Ux(fd,{onClose(){}}),nL=A.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:p,...E}=t,g=Mp(fd,n),[y,_]=A.useState(null),w=Ar(e,q=>_(q)),T=A.useRef(null),R=A.useRef(null),O=s||g.duration,V=A.useRef(0),S=A.useRef(O),I=A.useRef(0),{onToastAdd:b,onToastRemove:D}=g,P=Mi(()=>{var Z;(y==null?void 0:y.contains(document.activeElement))&&((Z=g.viewport)==null||Z.focus()),o()}),N=A.useCallback(q=>{!q||q===1/0||(window.clearTimeout(I.current),V.current=new Date().getTime(),I.current=window.setTimeout(P,q))},[P]);A.useEffect(()=>{const q=g.viewport;if(q){const Z=()=>{N(S.current),c==null||c()},ie=()=>{const Y=new Date().getTime()-V.current;S.current=S.current-Y,window.clearTimeout(I.current),l==null||l()};return q.addEventListener($y,ie),q.addEventListener(zy,Z),()=>{q.removeEventListener($y,ie),q.removeEventListener(zy,Z)}}},[g.viewport,O,l,c,N]),A.useEffect(()=>{i&&!g.isClosePausedRef.current&&N(O)},[i,O,g.isClosePausedRef,N]),A.useEffect(()=>(b(),()=>D()),[b,D]);const k=A.useMemo(()=>y?Xx(y):null,[y]);return g.viewport?x.jsxs(x.Fragment,{children:[k&&x.jsx(rL,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:k}),x.jsx(eL,{scope:n,onClose:P,children:hd.createPortal(x.jsx(q_.ItemSlot,{scope:n,children:x.jsx(NV,{asChild:!0,onEscapeKeyDown:kt(a,()=>{g.isFocusedToastEscapeKeyDownRef.current||P(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:x.jsx(kn.li,{tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":g.swipeDirection,...E,ref:w,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:kt(t.onKeyDown,q=>{q.key==="Escape"&&(a==null||a(q.nativeEvent),q.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,P()))}),onPointerDown:kt(t.onPointerDown,q=>{q.button===0&&(T.current={x:q.clientX,y:q.clientY})}),onPointerMove:kt(t.onPointerMove,q=>{if(!T.current)return;const Z=q.clientX-T.current.x,ie=q.clientY-T.current.y,Y=!!R.current,F=["left","right"].includes(g.swipeDirection),U=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,K=F?U(0,Z):0,ce=F?0:U(0,ie),ee=q.pointerType==="touch"?10:2,oe={x:K,y:ce},ae={originalEvent:q,delta:oe};Y?(R.current=oe,dh(XV,h,ae,{discrete:!1})):RT(oe,g.swipeDirection,ee)?(R.current=oe,dh(YV,d,ae,{discrete:!1}),q.target.setPointerCapture(q.pointerId)):(Math.abs(Z)>ee||Math.abs(ie)>ee)&&(T.current=null)}),onPointerUp:kt(t.onPointerUp,q=>{const Z=R.current,ie=q.target;if(ie.hasPointerCapture(q.pointerId)&&ie.releasePointerCapture(q.pointerId),R.current=null,T.current=null,Z){const Y=q.currentTarget,F={originalEvent:q,delta:Z};RT(Z,g.swipeDirection,g.swipeThreshold)?dh(ZV,p,F,{discrete:!0}):dh(JV,f,F,{discrete:!0}),Y.addEventListener("click",U=>U.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),rL=t=>{const{__scopeToast:e,children:n,...r}=t,s=Mp(fd,e),[i,o]=A.useState(!1),[a,l]=A.useState(!1);return oL(()=>o(!0)),A.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:x.jsx(Fx,{asChild:!0,children:x.jsx(Lp,{...r,children:i&&x.jsxs(x.Fragment,{children:[s.label," ",n]})})})},sL="ToastTitle",Hx=A.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return x.jsx(kn.div,{...r,ref:e})});Hx.displayName=sL;var iL="ToastDescription",Wx=A.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return x.jsx(kn.div,{...r,ref:e})});Wx.displayName=iL;var Kx="ToastAction",Gx=A.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?x.jsx(Yx,{altText:n,asChild:!0,children:x.jsx(H_,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${Kx}\`. Expected non-empty \`string\`.`),null)});Gx.displayName=Kx;var Qx="ToastClose",H_=A.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=tL(Qx,n);return x.jsx(Yx,{asChild:!0,children:x.jsx(kn.button,{type:"button",...r,ref:e,onClick:kt(t.onClick,s.onClose)})})});H_.displayName=Qx;var Yx=A.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return x.jsx(kn.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function Xx(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),aL(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...Xx(r))}}),e}function dh(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Ox(s,i):s.dispatchEvent(i)}var RT=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function oL(t=()=>{}){const e=Mi(t);Fi(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function aL(t){return t.nodeType===t.ELEMENT_NODE}function lL(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function yg(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var cL=jx,Jx=$x,Zx=qx,eR=Hx,tR=Wx,nR=Gx,rR=H_;function sR(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=sR(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function iR(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=sR(t))&&(r&&(r+=" "),r+=e);return r}const PT=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,CT=iR,oR=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return CT(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const d=n==null?void 0:n[c],h=i==null?void 0:i[c];if(d===null)return null;const f=PT(d)||PT(h);return s[c][f]}),a=n&&Object.entries(n).reduce((c,d)=>{let[h,f]=d;return f===void 0||(c[h]=f),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,d)=>{let{class:h,className:f,...p}=d;return Object.entries(p).every(E=>{let[g,y]=E;return Array.isArray(y)?y.includes({...i,...a}[g]):{...i,...a}[g]===y})?[...c,h,f]:c},[]);return CT(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uL=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),aR=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var dL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hL=A.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},l)=>A.createElement("svg",{ref:l,...dL,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:aR("lucide",s),...a},[...o.map(([c,d])=>A.createElement(c,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=(t,e)=>{const n=A.forwardRef(({className:r,...s},i)=>A.createElement(hL,{ref:i,iconNode:e,className:aR(`lucide-${uL(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fL=nt("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pL=nt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mL=nt("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gL=nt("BadgePercent",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M9 9h.01",key:"1q5me6"}],["path",{d:"M15 15h.01",key:"lqbp3k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yL=nt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vL=nt("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _L=nt("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wL=nt("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EL=nt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TL=nt("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IL=nt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kT=nt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DT=nt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SL=nt("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AL=nt("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NT=nt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vg=nt("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lR=nt("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OT=nt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bL=nt("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xL=nt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RL=nt("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PL=nt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CL=nt("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cR=nt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),W_="-",kL=t=>{const e=NL(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(W_);return a[0]===""&&a.length!==1&&a.shift(),uR(a,e)||DL(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},uR=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?uR(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(W_);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},VT=/^\[(.+)\]$/,DL=t=>{if(VT.test(t)){const e=VT.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},NL=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return VL(Object.entries(t.classGroups),n).forEach(([i,o])=>{Hy(o,r,i,e)}),r},Hy=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:LT(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(OL(s)){Hy(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{Hy(o,LT(e,i),n,r)})})},LT=(t,e)=>{let n=t;return e.split(W_).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},OL=t=>t.isThemeGetter,VL=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[n,s]}):t,LL=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},dR="!",ML=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=a=>{const l=[];let c=0,d=0,h;for(let y=0;y<a.length;y++){let _=a[y];if(c===0){if(_===s&&(r||a.slice(y,y+i)===e)){l.push(a.slice(d,y)),d=y+i;continue}if(_==="/"){h=y;continue}}_==="["?c++:_==="]"&&c--}const f=l.length===0?a:a.substring(d),p=f.startsWith(dR),E=p?f.substring(1):f,g=h&&h>d?h-d:void 0;return{modifiers:l,hasImportantModifier:p,baseClassName:E,maybePostfixModifierPosition:g}};return n?a=>n({className:a,parseClassName:o}):o},FL=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},UL=t=>({cache:LL(t.cacheSize),parseClassName:ML(t),...kL(t)}),jL=/\s+/,BL=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(jL);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:d,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:p}=n(c);let E=!!p,g=r(E?f.substring(0,p):f);if(!g){if(!E){a=c+(a.length>0?" "+a:a);continue}if(g=r(f),!g){a=c+(a.length>0?" "+a:a);continue}E=!1}const y=FL(d).join(":"),_=h?y+dR:y,w=_+g;if(i.includes(w))continue;i.push(w);const T=s(g,E);for(let R=0;R<T.length;++R){const O=T[R];i.push(_+O)}a=c+(a.length>0?" "+a:a)}return a};function $L(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=hR(e))&&(r&&(r+=" "),r+=n);return r}const hR=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=hR(t[r]))&&(n&&(n+=" "),n+=e);return n};function zL(t,...e){let n,r,s,i=o;function o(l){const c=e.reduce((d,h)=>h(d),t());return n=UL(c),r=n.cache.get,s=n.cache.set,i=a,a(l)}function a(l){const c=r(l);if(c)return c;const d=BL(l,n);return s(l,d),d}return function(){return i($L.apply(null,arguments))}}const Je=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},fR=/^\[(?:([a-z-]+):)?(.+)\]$/i,qL=/^\d+\/\d+$/,HL=new Set(["px","full","screen"]),WL=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,KL=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,GL=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,QL=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,YL=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,cs=t=>Qa(t)||HL.has(t)||qL.test(t),Xs=t=>Bl(t,"length",sM),Qa=t=>!!t&&!Number.isNaN(Number(t)),_g=t=>Bl(t,"number",Qa),bc=t=>!!t&&Number.isInteger(Number(t)),XL=t=>t.endsWith("%")&&Qa(t.slice(0,-1)),Se=t=>fR.test(t),Js=t=>WL.test(t),JL=new Set(["length","size","percentage"]),ZL=t=>Bl(t,JL,pR),eM=t=>Bl(t,"position",pR),tM=new Set(["image","url"]),nM=t=>Bl(t,tM,oM),rM=t=>Bl(t,"",iM),xc=()=>!0,Bl=(t,e,n)=>{const r=fR.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},sM=t=>KL.test(t)&&!GL.test(t),pR=()=>!1,iM=t=>QL.test(t),oM=t=>YL.test(t),aM=()=>{const t=Je("colors"),e=Je("spacing"),n=Je("blur"),r=Je("brightness"),s=Je("borderColor"),i=Je("borderRadius"),o=Je("borderSpacing"),a=Je("borderWidth"),l=Je("contrast"),c=Je("grayscale"),d=Je("hueRotate"),h=Je("invert"),f=Je("gap"),p=Je("gradientColorStops"),E=Je("gradientColorStopPositions"),g=Je("inset"),y=Je("margin"),_=Je("opacity"),w=Je("padding"),T=Je("saturate"),R=Je("scale"),O=Je("sepia"),V=Je("skew"),S=Je("space"),I=Je("translate"),b=()=>["auto","contain","none"],D=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto",Se,e],N=()=>[Se,e],k=()=>["",cs,Xs],q=()=>["auto",Qa,Se],Z=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ie=()=>["solid","dashed","dotted","double","none"],Y=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],F=()=>["start","end","center","between","around","evenly","stretch"],U=()=>["","0",Se],K=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ce=()=>[Qa,Se];return{cacheSize:500,separator:":",theme:{colors:[xc],spacing:[cs,Xs],blur:["none","",Js,Se],brightness:ce(),borderColor:[t],borderRadius:["none","","full",Js,Se],borderSpacing:N(),borderWidth:k(),contrast:ce(),grayscale:U(),hueRotate:ce(),invert:U(),gap:N(),gradientColorStops:[t],gradientColorStopPositions:[XL,Xs],inset:P(),margin:P(),opacity:ce(),padding:N(),saturate:ce(),scale:ce(),sepia:U(),skew:ce(),space:N(),translate:N()},classGroups:{aspect:[{aspect:["auto","square","video",Se]}],container:["container"],columns:[{columns:[Js]}],"break-after":[{"break-after":K()}],"break-before":[{"break-before":K()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Z(),Se]}],overflow:[{overflow:D()}],"overflow-x":[{"overflow-x":D()}],"overflow-y":[{"overflow-y":D()}],overscroll:[{overscroll:b()}],"overscroll-x":[{"overscroll-x":b()}],"overscroll-y":[{"overscroll-y":b()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",bc,Se]}],basis:[{basis:P()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Se]}],grow:[{grow:U()}],shrink:[{shrink:U()}],order:[{order:["first","last","none",bc,Se]}],"grid-cols":[{"grid-cols":[xc]}],"col-start-end":[{col:["auto",{span:["full",bc,Se]},Se]}],"col-start":[{"col-start":q()}],"col-end":[{"col-end":q()}],"grid-rows":[{"grid-rows":[xc]}],"row-start-end":[{row:["auto",{span:[bc,Se]},Se]}],"row-start":[{"row-start":q()}],"row-end":[{"row-end":q()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Se]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Se]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...F()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...F(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...F(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Se,e]}],"min-w":[{"min-w":[Se,e,"min","max","fit"]}],"max-w":[{"max-w":[Se,e,"none","full","min","max","fit","prose",{screen:[Js]},Js]}],h:[{h:[Se,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Se,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Se,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Se,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Js,Xs]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",_g]}],"font-family":[{font:[xc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Se]}],"line-clamp":[{"line-clamp":["none",Qa,_g]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",cs,Se]}],"list-image":[{"list-image":["none",Se]}],"list-style-type":[{list:["none","disc","decimal",Se]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[_]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[_]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ie(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",cs,Xs]}],"underline-offset":[{"underline-offset":["auto",cs,Se]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Se]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Se]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[_]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Z(),eM]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",ZL]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},nM]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[E]}],"gradient-via-pos":[{via:[E]}],"gradient-to-pos":[{to:[E]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[_]}],"border-style":[{border:[...ie(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[_]}],"divide-style":[{divide:ie()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...ie()]}],"outline-offset":[{"outline-offset":[cs,Se]}],"outline-w":[{outline:[cs,Xs]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:k()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[_]}],"ring-offset-w":[{"ring-offset":[cs,Xs]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Js,rM]}],"shadow-color":[{shadow:[xc]}],opacity:[{opacity:[_]}],"mix-blend":[{"mix-blend":[...Y(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Y()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Js,Se]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[T]}],sepia:[{sepia:[O]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[_]}],"backdrop-saturate":[{"backdrop-saturate":[T]}],"backdrop-sepia":[{"backdrop-sepia":[O]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Se]}],duration:[{duration:ce()}],ease:[{ease:["linear","in","out","in-out",Se]}],delay:[{delay:ce()}],animate:[{animate:["none","spin","ping","pulse","bounce",Se]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[R]}],"scale-x":[{"scale-x":[R]}],"scale-y":[{"scale-y":[R]}],rotate:[{rotate:[bc,Se]}],"translate-x":[{"translate-x":[I]}],"translate-y":[{"translate-y":[I]}],"skew-x":[{"skew-x":[V]}],"skew-y":[{"skew-y":[V]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Se]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Se]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Se]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[cs,Xs,_g]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},lM=zL(aM);function Vs(...t){return lM(iR(t))}const cM=cL,mR=A.forwardRef(({className:t,...e},n)=>x.jsx(Jx,{ref:n,className:Vs("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));mR.displayName=Jx.displayName;const uM=oR("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),gR=A.forwardRef(({className:t,variant:e,...n},r)=>x.jsx(Zx,{ref:r,className:Vs(uM({variant:e}),t),...n}));gR.displayName=Zx.displayName;const dM=A.forwardRef(({className:t,...e},n)=>x.jsx(nR,{ref:n,className:Vs("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));dM.displayName=nR.displayName;const yR=A.forwardRef(({className:t,...e},n)=>x.jsx(rR,{ref:n,className:Vs("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:x.jsx(cR,{className:"h-4 w-4"})}));yR.displayName=rR.displayName;const vR=A.forwardRef(({className:t,...e},n)=>x.jsx(eR,{ref:n,className:Vs("text-sm font-semibold",t),...e}));vR.displayName=eR.displayName;const _R=A.forwardRef(({className:t,...e},n)=>x.jsx(tR,{ref:n,className:Vs("text-sm opacity-90",t),...e}));_R.displayName=tR.displayName;function hM(){const{toasts:t}=j_();return x.jsxs(cM,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return x.jsxs(gR,{...i,children:[x.jsxs("div",{className:"grid gap-1",children:[n&&x.jsx(vR,{children:n}),r&&x.jsx(_R,{children:r})]}),s,x.jsx(yR,{})]},e)}),x.jsx(mR,{})]})}var Df=["light","dark"],K_="(prefers-color-scheme: dark)",fM=typeof window>"u",G_=A.createContext(void 0),pM={setTheme:t=>{},themes:[]},wR=()=>{var t;return(t=A.useContext(G_))!=null?t:pM},mM=t=>A.useContext(G_)?t.children:A.createElement(yM,{...t}),gM=["light","dark"],yM=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:n=!0,enableColorScheme:r=!0,storageKey:s="theme",themes:i=gM,defaultTheme:o=n?"system":"light",attribute:a="data-theme",value:l,children:c,nonce:d})=>{let[h,f]=A.useState(()=>MT(s,o)),[p,E]=A.useState(()=>MT(s)),g=l?Object.values(l):i,y=A.useCallback(R=>{let O=R;if(!O)return;R==="system"&&n&&(O=FT());let V=l?l[O]:O,S=e?_M():null,I=document.documentElement;if(a==="class"?(I.classList.remove(...g),V&&I.classList.add(V)):V?I.setAttribute(a,V):I.removeAttribute(a),r){let b=Df.includes(o)?o:null,D=Df.includes(O)?O:b;I.style.colorScheme=D}S==null||S()},[]),_=A.useCallback(R=>{let O=typeof R=="function"?R(R):R;f(O);try{localStorage.setItem(s,O)}catch{}},[t]),w=A.useCallback(R=>{let O=FT(R);E(O),h==="system"&&n&&!t&&y("system")},[h,t]);A.useEffect(()=>{let R=window.matchMedia(K_);return R.addListener(w),w(R),()=>R.removeListener(w)},[w]),A.useEffect(()=>{let R=O=>{if(O.key!==s)return;let V=O.newValue||o;_(V)};return window.addEventListener("storage",R),()=>window.removeEventListener("storage",R)},[_]),A.useEffect(()=>{y(t??h)},[t,h]);let T=A.useMemo(()=>({theme:h,setTheme:_,forcedTheme:t,resolvedTheme:h==="system"?p:h,themes:n?[...i,"system"]:i,systemTheme:n?p:void 0}),[h,_,t,p,n,i]);return A.createElement(G_.Provider,{value:T},A.createElement(vM,{forcedTheme:t,disableTransitionOnChange:e,enableSystem:n,enableColorScheme:r,storageKey:s,themes:i,defaultTheme:o,attribute:a,value:l,children:c,attrs:g,nonce:d}),c)},vM=A.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:o,attrs:a,nonce:l})=>{let c=i==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(E=>`'${E}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=s?Df.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(E,g=!1,y=!0)=>{let _=o?o[E]:E,w=g?E+"|| ''":`'${_}'`,T="";return s&&y&&!g&&Df.includes(E)&&(T+=`d.style.colorScheme = '${E}';`),n==="class"?g||_?T+=`c.add(${w})`:T+="null":_&&(T+=`d[s](n,${w})`),T},p=t?`!function(){${d}${f(t)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${c})){var t='${K_}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}${c?"":"else{"+f(i,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}else{${f(i,!1,!1)};}${h}}catch(t){}}();`;return A.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:p}})}),MT=(t,e)=>{if(fM)return;let n;try{n=localStorage.getItem(t)||void 0}catch{}return n||e},_M=()=>{let t=document.createElement("style");return t.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},FT=t=>(t||(t=window.matchMedia(K_)),t.matches?"dark":"light"),wM=t=>{switch(t){case"success":return IM;case"info":return AM;case"warning":return SM;case"error":return bM;default:return null}},EM=Array(12).fill(0),TM=({visible:t,className:e})=>$.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},$.createElement("div",{className:"sonner-spinner"},EM.map((n,r)=>$.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),IM=$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},$.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),SM=$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},$.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),AM=$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},$.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),bM=$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},$.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),xM=$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},$.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),$.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),RM=()=>{let[t,e]=$.useState(document.hidden);return $.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},Wy=1,PM=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;let{message:r,...s}=e,i=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:Wy++,o=this.toasts.find(l=>l.id===i),a=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...e,id:i,title:r}),{...l,...e,id:i,dismissible:a,title:r}):l):this.addToast({title:r,...s,dismissible:a,id:i}),i},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),this.subscribers.forEach(n=>n({id:e,dismiss:!0})),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));let s=e instanceof Promise?e:e(),i=r!==void 0,o,a=s.then(async c=>{if(o=["resolve",c],$.isValidElement(c))i=!1,this.create({id:r,type:"default",message:c});else if(kM(c)&&!c.ok){i=!1;let d=typeof n.error=="function"?await n.error(`HTTP error! status: ${c.status}`):n.error,h=typeof n.description=="function"?await n.description(`HTTP error! status: ${c.status}`):n.description;this.create({id:r,type:"error",message:d,description:h})}else if(n.success!==void 0){i=!1;let d=typeof n.success=="function"?await n.success(c):n.success,h=typeof n.description=="function"?await n.description(c):n.description;this.create({id:r,type:"success",message:d,description:h})}}).catch(async c=>{if(o=["reject",c],n.error!==void 0){i=!1;let d=typeof n.error=="function"?await n.error(c):n.error,h=typeof n.description=="function"?await n.description(c):n.description;this.create({id:r,type:"error",message:d,description:h})}}).finally(()=>{var c;i&&(this.dismiss(r),r=void 0),(c=n.finally)==null||c.call(n)}),l=()=>new Promise((c,d)=>a.then(()=>o[0]==="reject"?d(o[1]):c(o[1])).catch(d));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,n)=>{let r=(n==null?void 0:n.id)||Wy++;return this.create({jsx:e(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},En=new PM,CM=(t,e)=>{let n=(e==null?void 0:e.id)||Wy++;return En.addToast({title:t,...e,id:n}),n},kM=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",DM=CM,NM=()=>En.toasts,OM=()=>En.getActiveToasts(),At=Object.assign(DM,{success:En.success,info:En.info,warning:En.warning,error:En.error,custom:En.custom,message:En.message,promise:En.promise,dismiss:En.dismiss,loading:En.loading},{getHistory:NM,getToasts:OM});function VM(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}VM(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function hh(t){return t.label!==void 0}var LM=3,MM="32px",FM="16px",UT=4e3,UM=356,jM=14,BM=20,$M=200;function ur(...t){return t.filter(Boolean).join(" ")}function zM(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var qM=t=>{var e,n,r,s,i,o,a,l,c,d,h;let{invert:f,toast:p,unstyled:E,interacting:g,setHeights:y,visibleToasts:_,heights:w,index:T,toasts:R,expanded:O,removeToast:V,defaultRichColors:S,closeButton:I,style:b,cancelButtonStyle:D,actionButtonStyle:P,className:N="",descriptionClassName:k="",duration:q,position:Z,gap:ie,loadingIcon:Y,expandByDefault:F,classNames:U,icons:K,closeButtonAriaLabel:ce="Close toast",pauseWhenPageIsHidden:ee}=t,[oe,ae]=$.useState(null),[Ie,Ye]=$.useState(null),[ue,we]=$.useState(!1),[Re,It]=$.useState(!1),[Ot,Qt]=$.useState(!1),[zt,vn]=$.useState(!1),[Nr,Ee]=$.useState(!1),[Yn,$s]=$.useState(0),[lt,Vt]=$.useState(0),Or=$.useRef(p.duration||q||UT),Nd=$.useRef(null),Vr=$.useRef(null),bm=T===0,oo=T+1<=_,ln=p.type,as=p.dismissible!==!1,sc=p.className||"",xm=p.descriptionClassName||"",fa=$.useMemo(()=>w.findIndex(me=>me.toastId===p.id)||0,[w,p.id]),Od=$.useMemo(()=>{var me;return(me=p.closeButton)!=null?me:I},[p.closeButton,I]),ic=$.useMemo(()=>p.duration||q||UT,[p.duration,q]),ls=$.useRef(0),Lr=$.useRef(0),pa=$.useRef(0),_n=$.useRef(null),[Vd,ma]=Z.split("-"),oc=$.useMemo(()=>w.reduce((me,Ue,Ke)=>Ke>=fa?me:me+Ue.height,0),[w,fa]),zs=RM(),Ld=p.invert||f,Rt=ln==="loading";Lr.current=$.useMemo(()=>fa*ie+oc,[fa,oc]),$.useEffect(()=>{Or.current=ic},[ic]),$.useEffect(()=>{we(!0)},[]),$.useEffect(()=>{let me=Vr.current;if(me){let Ue=me.getBoundingClientRect().height;return Vt(Ue),y(Ke=>[{toastId:p.id,height:Ue,position:p.position},...Ke]),()=>y(Ke=>Ke.filter(Lt=>Lt.toastId!==p.id))}},[y,p.id]),$.useLayoutEffect(()=>{if(!ue)return;let me=Vr.current,Ue=me.style.height;me.style.height="auto";let Ke=me.getBoundingClientRect().height;me.style.height=Ue,Vt(Ke),y(Lt=>Lt.find(Dn=>Dn.toastId===p.id)?Lt.map(Dn=>Dn.toastId===p.id?{...Dn,height:Ke}:Dn):[{toastId:p.id,height:Ke,position:p.position},...Lt])},[ue,p.title,p.description,y,p.id]);let ar=$.useCallback(()=>{It(!0),$s(Lr.current),y(me=>me.filter(Ue=>Ue.toastId!==p.id)),setTimeout(()=>{V(p)},$M)},[p,V,y,Lr]);$.useEffect(()=>{if(p.promise&&ln==="loading"||p.duration===1/0||p.type==="loading")return;let me;return O||g||ee&&zs?(()=>{if(pa.current<ls.current){let Ue=new Date().getTime()-ls.current;Or.current=Or.current-Ue}pa.current=new Date().getTime()})():Or.current!==1/0&&(ls.current=new Date().getTime(),me=setTimeout(()=>{var Ue;(Ue=p.onAutoClose)==null||Ue.call(p,p),ar()},Or.current)),()=>clearTimeout(me)},[O,g,p,ln,ee,zs,ar]),$.useEffect(()=>{p.delete&&ar()},[ar,p.delete]);function ao(){var me,Ue,Ke;return K!=null&&K.loading?$.createElement("div",{className:ur(U==null?void 0:U.loader,(me=p==null?void 0:p.classNames)==null?void 0:me.loader,"sonner-loader"),"data-visible":ln==="loading"},K.loading):Y?$.createElement("div",{className:ur(U==null?void 0:U.loader,(Ue=p==null?void 0:p.classNames)==null?void 0:Ue.loader,"sonner-loader"),"data-visible":ln==="loading"},Y):$.createElement(TM,{className:ur(U==null?void 0:U.loader,(Ke=p==null?void 0:p.classNames)==null?void 0:Ke.loader),visible:ln==="loading"})}return $.createElement("li",{tabIndex:0,ref:Vr,className:ur(N,sc,U==null?void 0:U.toast,(e=p==null?void 0:p.classNames)==null?void 0:e.toast,U==null?void 0:U.default,U==null?void 0:U[ln],(n=p==null?void 0:p.classNames)==null?void 0:n[ln]),"data-sonner-toast":"","data-rich-colors":(r=p.richColors)!=null?r:S,"data-styled":!(p.jsx||p.unstyled||E),"data-mounted":ue,"data-promise":!!p.promise,"data-swiped":Nr,"data-removed":Re,"data-visible":oo,"data-y-position":Vd,"data-x-position":ma,"data-index":T,"data-front":bm,"data-swiping":Ot,"data-dismissible":as,"data-type":ln,"data-invert":Ld,"data-swipe-out":zt,"data-swipe-direction":Ie,"data-expanded":!!(O||F&&ue),style:{"--index":T,"--toasts-before":T,"--z-index":R.length-T,"--offset":`${Re?Yn:Lr.current}px`,"--initial-height":F?"auto":`${lt}px`,...b,...p.style},onDragEnd:()=>{Qt(!1),ae(null),_n.current=null},onPointerDown:me=>{Rt||!as||(Nd.current=new Date,$s(Lr.current),me.target.setPointerCapture(me.pointerId),me.target.tagName!=="BUTTON"&&(Qt(!0),_n.current={x:me.clientX,y:me.clientY}))},onPointerUp:()=>{var me,Ue,Ke,Lt;if(zt||!as)return;_n.current=null;let Dn=Number(((me=Vr.current)==null?void 0:me.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Mr=Number(((Ue=Vr.current)==null?void 0:Ue.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Xn=new Date().getTime()-((Ke=Nd.current)==null?void 0:Ke.getTime()),wn=oe==="x"?Dn:Mr,lr=Math.abs(wn)/Xn;if(Math.abs(wn)>=BM||lr>.11){$s(Lr.current),(Lt=p.onDismiss)==null||Lt.call(p,p),Ye(oe==="x"?Dn>0?"right":"left":Mr>0?"down":"up"),ar(),vn(!0),Ee(!1);return}Qt(!1),ae(null)},onPointerMove:me=>{var Ue,Ke,Lt,Dn;if(!_n.current||!as||((Ue=window.getSelection())==null?void 0:Ue.toString().length)>0)return;let Mr=me.clientY-_n.current.y,Xn=me.clientX-_n.current.x,wn=(Ke=t.swipeDirections)!=null?Ke:zM(Z);!oe&&(Math.abs(Xn)>1||Math.abs(Mr)>1)&&ae(Math.abs(Xn)>Math.abs(Mr)?"x":"y");let lr={x:0,y:0};oe==="y"?(wn.includes("top")||wn.includes("bottom"))&&(wn.includes("top")&&Mr<0||wn.includes("bottom")&&Mr>0)&&(lr.y=Mr):oe==="x"&&(wn.includes("left")||wn.includes("right"))&&(wn.includes("left")&&Xn<0||wn.includes("right")&&Xn>0)&&(lr.x=Xn),(Math.abs(lr.x)>0||Math.abs(lr.y)>0)&&Ee(!0),(Lt=Vr.current)==null||Lt.style.setProperty("--swipe-amount-x",`${lr.x}px`),(Dn=Vr.current)==null||Dn.style.setProperty("--swipe-amount-y",`${lr.y}px`)}},Od&&!p.jsx?$.createElement("button",{"aria-label":ce,"data-disabled":Rt,"data-close-button":!0,onClick:Rt||!as?()=>{}:()=>{var me;ar(),(me=p.onDismiss)==null||me.call(p,p)},className:ur(U==null?void 0:U.closeButton,(s=p==null?void 0:p.classNames)==null?void 0:s.closeButton)},(i=K==null?void 0:K.close)!=null?i:xM):null,p.jsx||A.isValidElement(p.title)?p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title:$.createElement($.Fragment,null,ln||p.icon||p.promise?$.createElement("div",{"data-icon":"",className:ur(U==null?void 0:U.icon,(o=p==null?void 0:p.classNames)==null?void 0:o.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||ao():null,p.type!=="loading"?p.icon||(K==null?void 0:K[ln])||wM(ln):null):null,$.createElement("div",{"data-content":"",className:ur(U==null?void 0:U.content,(a=p==null?void 0:p.classNames)==null?void 0:a.content)},$.createElement("div",{"data-title":"",className:ur(U==null?void 0:U.title,(l=p==null?void 0:p.classNames)==null?void 0:l.title)},typeof p.title=="function"?p.title():p.title),p.description?$.createElement("div",{"data-description":"",className:ur(k,xm,U==null?void 0:U.description,(c=p==null?void 0:p.classNames)==null?void 0:c.description)},typeof p.description=="function"?p.description():p.description):null),A.isValidElement(p.cancel)?p.cancel:p.cancel&&hh(p.cancel)?$.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||D,onClick:me=>{var Ue,Ke;hh(p.cancel)&&as&&((Ke=(Ue=p.cancel).onClick)==null||Ke.call(Ue,me),ar())},className:ur(U==null?void 0:U.cancelButton,(d=p==null?void 0:p.classNames)==null?void 0:d.cancelButton)},p.cancel.label):null,A.isValidElement(p.action)?p.action:p.action&&hh(p.action)?$.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||P,onClick:me=>{var Ue,Ke;hh(p.action)&&((Ke=(Ue=p.action).onClick)==null||Ke.call(Ue,me),!me.defaultPrevented&&ar())},className:ur(U==null?void 0:U.actionButton,(h=p==null?void 0:p.classNames)==null?void 0:h.actionButton)},p.action.label):null))};function jT(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function HM(t,e){let n={};return[t,e].forEach((r,s)=>{let i=s===1,o=i?"--mobile-offset":"--offset",a=i?FM:MM;function l(c){["top","right","bottom","left"].forEach(d=>{n[`${o}-${d}`]=typeof c=="number"?`${c}px`:c})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(c=>{r[c]===void 0?n[`${o}-${c}`]=a:n[`${o}-${c}`]=typeof r[c]=="number"?`${r[c]}px`:r[c]}):l(a)}),n}var WM=A.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:o,className:a,offset:l,mobileOffset:c,theme:d="light",richColors:h,duration:f,style:p,visibleToasts:E=LM,toastOptions:g,dir:y=jT(),gap:_=jM,loadingIcon:w,icons:T,containerAriaLabel:R="Notifications",pauseWhenPageIsHidden:O}=t,[V,S]=$.useState([]),I=$.useMemo(()=>Array.from(new Set([r].concat(V.filter(ee=>ee.position).map(ee=>ee.position)))),[V,r]),[b,D]=$.useState([]),[P,N]=$.useState(!1),[k,q]=$.useState(!1),[Z,ie]=$.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Y=$.useRef(null),F=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),U=$.useRef(null),K=$.useRef(!1),ce=$.useCallback(ee=>{S(oe=>{var ae;return(ae=oe.find(Ie=>Ie.id===ee.id))!=null&&ae.delete||En.dismiss(ee.id),oe.filter(({id:Ie})=>Ie!==ee.id)})},[]);return $.useEffect(()=>En.subscribe(ee=>{if(ee.dismiss){S(oe=>oe.map(ae=>ae.id===ee.id?{...ae,delete:!0}:ae));return}setTimeout(()=>{Cx.flushSync(()=>{S(oe=>{let ae=oe.findIndex(Ie=>Ie.id===ee.id);return ae!==-1?[...oe.slice(0,ae),{...oe[ae],...ee},...oe.slice(ae+1)]:[ee,...oe]})})})}),[]),$.useEffect(()=>{if(d!=="system"){ie(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ie("dark"):ie("light")),typeof window>"u")return;let ee=window.matchMedia("(prefers-color-scheme: dark)");try{ee.addEventListener("change",({matches:oe})=>{ie(oe?"dark":"light")})}catch{ee.addListener(({matches:ae})=>{try{ie(ae?"dark":"light")}catch(Ie){console.error(Ie)}})}},[d]),$.useEffect(()=>{V.length<=1&&N(!1)},[V]),$.useEffect(()=>{let ee=oe=>{var ae,Ie;s.every(Ye=>oe[Ye]||oe.code===Ye)&&(N(!0),(ae=Y.current)==null||ae.focus()),oe.code==="Escape"&&(document.activeElement===Y.current||(Ie=Y.current)!=null&&Ie.contains(document.activeElement))&&N(!1)};return document.addEventListener("keydown",ee),()=>document.removeEventListener("keydown",ee)},[s]),$.useEffect(()=>{if(Y.current)return()=>{U.current&&(U.current.focus({preventScroll:!0}),U.current=null,K.current=!1)}},[Y.current]),$.createElement("section",{ref:e,"aria-label":`${R} ${F}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},I.map((ee,oe)=>{var ae;let[Ie,Ye]=ee.split("-");return V.length?$.createElement("ol",{key:ee,dir:y==="auto"?jT():y,tabIndex:-1,ref:Y,className:a,"data-sonner-toaster":!0,"data-theme":Z,"data-y-position":Ie,"data-lifted":P&&V.length>1&&!i,"data-x-position":Ye,style:{"--front-toast-height":`${((ae=b[0])==null?void 0:ae.height)||0}px`,"--width":`${UM}px`,"--gap":`${_}px`,...p,...HM(l,c)},onBlur:ue=>{K.current&&!ue.currentTarget.contains(ue.relatedTarget)&&(K.current=!1,U.current&&(U.current.focus({preventScroll:!0}),U.current=null))},onFocus:ue=>{ue.target instanceof HTMLElement&&ue.target.dataset.dismissible==="false"||K.current||(K.current=!0,U.current=ue.relatedTarget)},onMouseEnter:()=>N(!0),onMouseMove:()=>N(!0),onMouseLeave:()=>{k||N(!1)},onDragEnd:()=>N(!1),onPointerDown:ue=>{ue.target instanceof HTMLElement&&ue.target.dataset.dismissible==="false"||q(!0)},onPointerUp:()=>q(!1)},V.filter(ue=>!ue.position&&oe===0||ue.position===ee).map((ue,we)=>{var Re,It;return $.createElement(qM,{key:ue.id,icons:T,index:we,toast:ue,defaultRichColors:h,duration:(Re=g==null?void 0:g.duration)!=null?Re:f,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:n,visibleToasts:E,closeButton:(It=g==null?void 0:g.closeButton)!=null?It:o,interacting:k,position:ee,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:ce,toasts:V.filter(Ot=>Ot.position==ue.position),heights:b.filter(Ot=>Ot.position==ue.position),setHeights:D,expandByDefault:i,gap:_,loadingIcon:w,expanded:P,pauseWhenPageIsHidden:O,swipeDirections:t.swipeDirections})})):null}))});const KM=({...t})=>{const{theme:e="system"}=wR();return x.jsx(WM,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})},GM=["top","right","bottom","left"],Ui=Math.min,Ln=Math.max,Nf=Math.round,fh=Math.floor,es=t=>({x:t,y:t}),QM={left:"right",right:"left",bottom:"top",top:"bottom"},YM={start:"end",end:"start"};function Ky(t,e,n){return Ln(t,Ui(e,n))}function Ps(t,e){return typeof t=="function"?t(e):t}function Cs(t){return t.split("-")[0]}function $l(t){return t.split("-")[1]}function Q_(t){return t==="x"?"y":"x"}function Y_(t){return t==="y"?"height":"width"}const XM=new Set(["top","bottom"]);function Gr(t){return XM.has(Cs(t))?"y":"x"}function X_(t){return Q_(Gr(t))}function JM(t,e,n){n===void 0&&(n=!1);const r=$l(t),s=X_(t),i=Y_(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=Of(o)),[o,Of(o)]}function ZM(t){const e=Of(t);return[Gy(t),e,Gy(e)]}function Gy(t){return t.replace(/start|end/g,e=>YM[e])}const BT=["left","right"],$T=["right","left"],eF=["top","bottom"],tF=["bottom","top"];function nF(t,e,n){switch(t){case"top":case"bottom":return n?e?$T:BT:e?BT:$T;case"left":case"right":return e?eF:tF;default:return[]}}function rF(t,e,n,r){const s=$l(t);let i=nF(Cs(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(Gy)))),i}function Of(t){return t.replace(/left|right|bottom|top/g,e=>QM[e])}function sF(t){return{top:0,right:0,bottom:0,left:0,...t}}function ER(t){return typeof t!="number"?sF(t):{top:t,right:t,bottom:t,left:t}}function Vf(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function zT(t,e,n){let{reference:r,floating:s}=t;const i=Gr(e),o=X_(e),a=Y_(o),l=Cs(e),c=i==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,f=r[a]/2-s[a]/2;let p;switch(l){case"top":p={x:d,y:r.y-s.height};break;case"bottom":p={x:d,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:h};break;case"left":p={x:r.x-s.width,y:h};break;default:p={x:r.x,y:r.y}}switch($l(e)){case"start":p[o]-=f*(n&&c?-1:1);break;case"end":p[o]+=f*(n&&c?-1:1);break}return p}const iF=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:h}=zT(c,r,l),f=r,p={},E=0;for(let g=0;g<a.length;g++){const{name:y,fn:_}=a[g],{x:w,y:T,data:R,reset:O}=await _({x:d,y:h,initialPlacement:r,placement:f,strategy:s,middlewareData:p,rects:c,platform:o,elements:{reference:t,floating:e}});d=w??d,h=T??h,p={...p,[y]:{...p[y],...R}},O&&E<=50&&(E++,typeof O=="object"&&(O.placement&&(f=O.placement),O.rects&&(c=O.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):O.rects),{x:d,y:h}=zT(c,f,l)),g=-1)}return{x:d,y:h,placement:f,strategy:s,middlewareData:p}};async function Nu(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:f=!1,padding:p=0}=Ps(e,t),E=ER(p),y=a[f?h==="floating"?"reference":"floating":h],_=Vf(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(y)))==null||n?y:y.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:d,strategy:l})),w=h==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,T=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),R=await(i.isElement==null?void 0:i.isElement(T))?await(i.getScale==null?void 0:i.getScale(T))||{x:1,y:1}:{x:1,y:1},O=Vf(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:w,offsetParent:T,strategy:l}):w);return{top:(_.top-O.top+E.top)/R.y,bottom:(O.bottom-_.bottom+E.bottom)/R.y,left:(_.left-O.left+E.left)/R.x,right:(O.right-_.right+E.right)/R.x}}const oF=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:d=0}=Ps(t,e)||{};if(c==null)return{};const h=ER(d),f={x:n,y:r},p=X_(s),E=Y_(p),g=await o.getDimensions(c),y=p==="y",_=y?"top":"left",w=y?"bottom":"right",T=y?"clientHeight":"clientWidth",R=i.reference[E]+i.reference[p]-f[p]-i.floating[E],O=f[p]-i.reference[p],V=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let S=V?V[T]:0;(!S||!await(o.isElement==null?void 0:o.isElement(V)))&&(S=a.floating[T]||i.floating[E]);const I=R/2-O/2,b=S/2-g[E]/2-1,D=Ui(h[_],b),P=Ui(h[w],b),N=D,k=S-g[E]-P,q=S/2-g[E]/2+I,Z=Ky(N,q,k),ie=!l.arrow&&$l(s)!=null&&q!==Z&&i.reference[E]/2-(q<N?D:P)-g[E]/2<0,Y=ie?q<N?q-N:q-k:0;return{[p]:f[p]+Y,data:{[p]:Z,centerOffset:q-Z-Y,...ie&&{alignmentOffset:Y}},reset:ie}}}),aF=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:E="none",flipAlignment:g=!0,...y}=Ps(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const _=Cs(s),w=Gr(a),T=Cs(a)===a,R=await(l.isRTL==null?void 0:l.isRTL(c.floating)),O=f||(T||!g?[Of(a)]:ZM(a)),V=E!=="none";!f&&V&&O.push(...rF(a,g,E,R));const S=[a,...O],I=await Nu(e,y),b=[];let D=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&b.push(I[_]),h){const q=JM(s,o,R);b.push(I[q[0]],I[q[1]])}if(D=[...D,{placement:s,overflows:b}],!b.every(q=>q<=0)){var P,N;const q=(((P=i.flip)==null?void 0:P.index)||0)+1,Z=S[q];if(Z&&(!(h==="alignment"?w!==Gr(Z):!1)||D.every(F=>Gr(F.placement)===w?F.overflows[0]>0:!0)))return{data:{index:q,overflows:D},reset:{placement:Z}};let ie=(N=D.filter(Y=>Y.overflows[0]<=0).sort((Y,F)=>Y.overflows[1]-F.overflows[1])[0])==null?void 0:N.placement;if(!ie)switch(p){case"bestFit":{var k;const Y=(k=D.filter(F=>{if(V){const U=Gr(F.placement);return U===w||U==="y"}return!0}).map(F=>[F.placement,F.overflows.filter(U=>U>0).reduce((U,K)=>U+K,0)]).sort((F,U)=>F[1]-U[1])[0])==null?void 0:k[0];Y&&(ie=Y);break}case"initialPlacement":ie=a;break}if(s!==ie)return{reset:{placement:ie}}}return{}}}};function qT(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function HT(t){return GM.some(e=>t[e]>=0)}const lF=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Ps(t,e);switch(r){case"referenceHidden":{const i=await Nu(e,{...s,elementContext:"reference"}),o=qT(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:HT(o)}}}case"escaped":{const i=await Nu(e,{...s,altBoundary:!0}),o=qT(i,n.floating);return{data:{escapedOffsets:o,escaped:HT(o)}}}default:return{}}}}},TR=new Set(["left","top"]);async function cF(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Cs(n),a=$l(n),l=Gr(n)==="y",c=TR.has(o)?-1:1,d=i&&l?-1:1,h=Ps(e,t);let{mainAxis:f,crossAxis:p,alignmentAxis:E}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof E=="number"&&(p=a==="end"?E*-1:E),l?{x:p*d,y:f*c}:{x:f*c,y:p*d}}const uF=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await cF(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},dF=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:y=>{let{x:_,y:w}=y;return{x:_,y:w}}},...l}=Ps(t,e),c={x:n,y:r},d=await Nu(e,l),h=Gr(Cs(s)),f=Q_(h);let p=c[f],E=c[h];if(i){const y=f==="y"?"top":"left",_=f==="y"?"bottom":"right",w=p+d[y],T=p-d[_];p=Ky(w,p,T)}if(o){const y=h==="y"?"top":"left",_=h==="y"?"bottom":"right",w=E+d[y],T=E-d[_];E=Ky(w,E,T)}const g=a.fn({...e,[f]:p,[h]:E});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[f]:i,[h]:o}}}}}},hF=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Ps(t,e),d={x:n,y:r},h=Gr(s),f=Q_(h);let p=d[f],E=d[h];const g=Ps(a,e),y=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const T=f==="y"?"height":"width",R=i.reference[f]-i.floating[T]+y.mainAxis,O=i.reference[f]+i.reference[T]-y.mainAxis;p<R?p=R:p>O&&(p=O)}if(c){var _,w;const T=f==="y"?"width":"height",R=TR.has(Cs(s)),O=i.reference[h]-i.floating[T]+(R&&((_=o.offset)==null?void 0:_[h])||0)+(R?0:y.crossAxis),V=i.reference[h]+i.reference[T]+(R?0:((w=o.offset)==null?void 0:w[h])||0)-(R?y.crossAxis:0);E<O?E=O:E>V&&(E=V)}return{[f]:p,[h]:E}}}},fF=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...c}=Ps(t,e),d=await Nu(e,c),h=Cs(s),f=$l(s),p=Gr(s)==="y",{width:E,height:g}=i.floating;let y,_;h==="top"||h==="bottom"?(y=h,_=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(_=h,y=f==="end"?"top":"bottom");const w=g-d.top-d.bottom,T=E-d.left-d.right,R=Ui(g-d[y],w),O=Ui(E-d[_],T),V=!e.middlewareData.shift;let S=R,I=O;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(I=T),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(S=w),V&&!f){const D=Ln(d.left,0),P=Ln(d.right,0),N=Ln(d.top,0),k=Ln(d.bottom,0);p?I=E-2*(D!==0||P!==0?D+P:Ln(d.left,d.right)):S=g-2*(N!==0||k!==0?N+k:Ln(d.top,d.bottom))}await l({...e,availableWidth:I,availableHeight:S});const b=await o.getDimensions(a.floating);return E!==b.width||g!==b.height?{reset:{rects:!0}}:{}}}};function Fp(){return typeof window<"u"}function zl(t){return IR(t)?(t.nodeName||"").toLowerCase():"#document"}function zn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function is(t){var e;return(e=(IR(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function IR(t){return Fp()?t instanceof Node||t instanceof zn(t).Node:!1}function br(t){return Fp()?t instanceof Element||t instanceof zn(t).Element:!1}function ns(t){return Fp()?t instanceof HTMLElement||t instanceof zn(t).HTMLElement:!1}function WT(t){return!Fp()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof zn(t).ShadowRoot}const pF=new Set(["inline","contents"]);function pd(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=xr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!pF.has(s)}const mF=new Set(["table","td","th"]);function gF(t){return mF.has(zl(t))}const yF=[":popover-open",":modal"];function Up(t){return yF.some(e=>{try{return t.matches(e)}catch{return!1}})}const vF=["transform","translate","scale","rotate","perspective"],_F=["transform","translate","scale","rotate","perspective","filter"],wF=["paint","layout","strict","content"];function J_(t){const e=Z_(),n=br(t)?xr(t):t;return vF.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||_F.some(r=>(n.willChange||"").includes(r))||wF.some(r=>(n.contain||"").includes(r))}function EF(t){let e=ji(t);for(;ns(e)&&!ml(e);){if(J_(e))return e;if(Up(e))return null;e=ji(e)}return null}function Z_(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const TF=new Set(["html","body","#document"]);function ml(t){return TF.has(zl(t))}function xr(t){return zn(t).getComputedStyle(t)}function jp(t){return br(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ji(t){if(zl(t)==="html")return t;const e=t.assignedSlot||t.parentNode||WT(t)&&t.host||is(t);return WT(e)?e.host:e}function SR(t){const e=ji(t);return ml(e)?t.ownerDocument?t.ownerDocument.body:t.body:ns(e)&&pd(e)?e:SR(e)}function Ou(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=SR(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=zn(s);if(i){const a=Qy(o);return e.concat(o,o.visualViewport||[],pd(s)?s:[],a&&n?Ou(a):[])}return e.concat(s,Ou(s,[],n))}function Qy(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function AR(t){const e=xr(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=ns(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=Nf(n)!==i||Nf(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function ew(t){return br(t)?t:t.contextElement}function Ya(t){const e=ew(t);if(!ns(e))return es(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=AR(e);let o=(i?Nf(n.width):n.width)/r,a=(i?Nf(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const IF=es(0);function bR(t){const e=zn(t);return!Z_()||!e.visualViewport?IF:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function SF(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==zn(t)?!1:e}function ea(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=ew(t);let o=es(1);e&&(r?br(r)&&(o=Ya(r)):o=Ya(t));const a=SF(i,n,r)?bR(i):es(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,d=s.width/o.x,h=s.height/o.y;if(i){const f=zn(i),p=r&&br(r)?zn(r):r;let E=f,g=Qy(E);for(;g&&r&&p!==E;){const y=Ya(g),_=g.getBoundingClientRect(),w=xr(g),T=_.left+(g.clientLeft+parseFloat(w.paddingLeft))*y.x,R=_.top+(g.clientTop+parseFloat(w.paddingTop))*y.y;l*=y.x,c*=y.y,d*=y.x,h*=y.y,l+=T,c+=R,E=zn(g),g=Qy(E)}}return Vf({width:d,height:h,x:l,y:c})}function Bp(t,e){const n=jp(t).scrollLeft;return e?e.left+n:ea(is(t)).left+n}function xR(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-Bp(t,n),s=n.top+e.scrollTop;return{x:r,y:s}}function AF(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=is(r),a=e?Up(e.floating):!1;if(r===o||a&&i)return n;let l={scrollLeft:0,scrollTop:0},c=es(1);const d=es(0),h=ns(r);if((h||!h&&!i)&&((zl(r)!=="body"||pd(o))&&(l=jp(r)),ns(r))){const p=ea(r);c=Ya(r),d.x=p.x+r.clientLeft,d.y=p.y+r.clientTop}const f=o&&!h&&!i?xR(o,l):es(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+d.x+f.x,y:n.y*c.y-l.scrollTop*c.y+d.y+f.y}}function bF(t){return Array.from(t.getClientRects())}function xF(t){const e=is(t),n=jp(t),r=t.ownerDocument.body,s=Ln(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Ln(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Bp(t);const a=-n.scrollTop;return xr(r).direction==="rtl"&&(o+=Ln(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}const KT=25;function RF(t,e){const n=zn(t),r=is(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const d=Z_();(!d||d&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}const c=Bp(r);if(c<=0){const d=r.ownerDocument,h=d.body,f=getComputedStyle(h),p=d.compatMode==="CSS1Compat"&&parseFloat(f.marginLeft)+parseFloat(f.marginRight)||0,E=Math.abs(r.clientWidth-h.clientWidth-p);E<=KT&&(i-=E)}else c<=KT&&(i+=c);return{width:i,height:o,x:a,y:l}}const PF=new Set(["absolute","fixed"]);function CF(t,e){const n=ea(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=ns(t)?Ya(t):es(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function GT(t,e,n){let r;if(e==="viewport")r=RF(t,n);else if(e==="document")r=xF(is(t));else if(br(e))r=CF(e,n);else{const s=bR(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Vf(r)}function RR(t,e){const n=ji(t);return n===e||!br(n)||ml(n)?!1:xr(n).position==="fixed"||RR(n,e)}function kF(t,e){const n=e.get(t);if(n)return n;let r=Ou(t,[],!1).filter(a=>br(a)&&zl(a)!=="body"),s=null;const i=xr(t).position==="fixed";let o=i?ji(t):t;for(;br(o)&&!ml(o);){const a=xr(o),l=J_(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&PF.has(s.position)||pd(o)&&!l&&RR(t,o))?r=r.filter(d=>d!==o):s=a,o=ji(o)}return e.set(t,r),r}function DF(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?Up(e)?[]:kF(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,d)=>{const h=GT(e,d,s);return c.top=Ln(h.top,c.top),c.right=Ui(h.right,c.right),c.bottom=Ui(h.bottom,c.bottom),c.left=Ln(h.left,c.left),c},GT(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function NF(t){const{width:e,height:n}=AR(t);return{width:e,height:n}}function OF(t,e,n){const r=ns(e),s=is(e),i=n==="fixed",o=ea(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=es(0);function c(){l.x=Bp(s)}if(r||!r&&!i)if((zl(e)!=="body"||pd(s))&&(a=jp(e)),r){const p=ea(e,!0,i,e);l.x=p.x+e.clientLeft,l.y=p.y+e.clientTop}else s&&c();i&&!r&&s&&c();const d=s&&!r&&!i?xR(s,a):es(0),h=o.left+a.scrollLeft-l.x-d.x,f=o.top+a.scrollTop-l.y-d.y;return{x:h,y:f,width:o.width,height:o.height}}function wg(t){return xr(t).position==="static"}function QT(t,e){if(!ns(t)||xr(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return is(t)===n&&(n=n.ownerDocument.body),n}function PR(t,e){const n=zn(t);if(Up(t))return n;if(!ns(t)){let s=ji(t);for(;s&&!ml(s);){if(br(s)&&!wg(s))return s;s=ji(s)}return n}let r=QT(t,e);for(;r&&gF(r)&&wg(r);)r=QT(r,e);return r&&ml(r)&&wg(r)&&!J_(r)?n:r||EF(t)||n}const VF=async function(t){const e=this.getOffsetParent||PR,n=this.getDimensions,r=await n(t.floating);return{reference:OF(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function LF(t){return xr(t).direction==="rtl"}const MF={convertOffsetParentRelativeRectToViewportRelativeRect:AF,getDocumentElement:is,getClippingRect:DF,getOffsetParent:PR,getElementRects:VF,getClientRects:bF,getDimensions:NF,getScale:Ya,isElement:br,isRTL:LF};function CR(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function FF(t,e){let n=null,r;const s=is(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const c=t.getBoundingClientRect(),{left:d,top:h,width:f,height:p}=c;if(a||e(),!f||!p)return;const E=fh(h),g=fh(s.clientWidth-(d+f)),y=fh(s.clientHeight-(h+p)),_=fh(d),T={rootMargin:-E+"px "+-g+"px "+-y+"px "+-_+"px",threshold:Ln(0,Ui(1,l))||1};let R=!0;function O(V){const S=V[0].intersectionRatio;if(S!==l){if(!R)return o();S?o(!1,S):r=setTimeout(()=>{o(!1,1e-7)},1e3)}S===1&&!CR(c,t.getBoundingClientRect())&&o(),R=!1}try{n=new IntersectionObserver(O,{...T,root:s.ownerDocument})}catch{n=new IntersectionObserver(O,T)}n.observe(t)}return o(!0),i}function UF(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=ew(t),d=s||i?[...c?Ou(c):[],...Ou(e)]:[];d.forEach(_=>{s&&_.addEventListener("scroll",n,{passive:!0}),i&&_.addEventListener("resize",n)});const h=c&&a?FF(c,n):null;let f=-1,p=null;o&&(p=new ResizeObserver(_=>{let[w]=_;w&&w.target===c&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var T;(T=p)==null||T.observe(e)})),n()}),c&&!l&&p.observe(c),p.observe(e));let E,g=l?ea(t):null;l&&y();function y(){const _=ea(t);g&&!CR(g,_)&&n(),g=_,E=requestAnimationFrame(y)}return n(),()=>{var _;d.forEach(w=>{s&&w.removeEventListener("scroll",n),i&&w.removeEventListener("resize",n)}),h==null||h(),(_=p)==null||_.disconnect(),p=null,l&&cancelAnimationFrame(E)}}const jF=uF,BF=dF,$F=aF,zF=fF,qF=lF,YT=oF,HF=hF,WF=(t,e,n)=>{const r=new Map,s={platform:MF,...n},i={...s.platform,_c:r};return iF(t,e,{...s,platform:i})};var KF=typeof document<"u",GF=function(){},Hh=KF?A.useLayoutEffect:GF;function Lf(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Lf(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!Lf(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function kR(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function XT(t,e){const n=kR(t);return Math.round(e*n)/n}function Eg(t){const e=A.useRef(t);return Hh(()=>{e.current=t}),e}function QF(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[d,h]=A.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,p]=A.useState(r);Lf(f,r)||p(r);const[E,g]=A.useState(null),[y,_]=A.useState(null),w=A.useCallback(F=>{F!==V.current&&(V.current=F,g(F))},[]),T=A.useCallback(F=>{F!==S.current&&(S.current=F,_(F))},[]),R=i||E,O=o||y,V=A.useRef(null),S=A.useRef(null),I=A.useRef(d),b=l!=null,D=Eg(l),P=Eg(s),N=Eg(c),k=A.useCallback(()=>{if(!V.current||!S.current)return;const F={placement:e,strategy:n,middleware:f};P.current&&(F.platform=P.current),WF(V.current,S.current,F).then(U=>{const K={...U,isPositioned:N.current!==!1};q.current&&!Lf(I.current,K)&&(I.current=K,hd.flushSync(()=>{h(K)}))})},[f,e,n,P,N]);Hh(()=>{c===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,h(F=>({...F,isPositioned:!1})))},[c]);const q=A.useRef(!1);Hh(()=>(q.current=!0,()=>{q.current=!1}),[]),Hh(()=>{if(R&&(V.current=R),O&&(S.current=O),R&&O){if(D.current)return D.current(R,O,k);k()}},[R,O,k,D,b]);const Z=A.useMemo(()=>({reference:V,floating:S,setReference:w,setFloating:T}),[w,T]),ie=A.useMemo(()=>({reference:R,floating:O}),[R,O]),Y=A.useMemo(()=>{const F={position:n,left:0,top:0};if(!ie.floating)return F;const U=XT(ie.floating,d.x),K=XT(ie.floating,d.y);return a?{...F,transform:"translate("+U+"px, "+K+"px)",...kR(ie.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:U,top:K}},[n,a,ie.floating,d.x,d.y]);return A.useMemo(()=>({...d,update:k,refs:Z,elements:ie,floatingStyles:Y}),[d,k,Z,ie,Y])}const YF=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?YT({element:r.current,padding:s}).fn(n):{}:r?YT({element:r,padding:s}).fn(n):{}}}},XF=(t,e)=>({...jF(t),options:[t,e]}),JF=(t,e)=>({...BF(t),options:[t,e]}),ZF=(t,e)=>({...HF(t),options:[t,e]}),e4=(t,e)=>({...$F(t),options:[t,e]}),t4=(t,e)=>({...zF(t),options:[t,e]}),n4=(t,e)=>({...qF(t),options:[t,e]}),r4=(t,e)=>({...YF(t),options:[t,e]});var s4="Arrow",DR=A.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return x.jsx(kn.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:x.jsx("polygon",{points:"0,0 30,0 15,10"})})});DR.displayName=s4;var i4=DR;function o4(t){const[e,n]=A.useState(void 0);return Fi(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var tw="Popper",[NR,OR]=Vp(tw),[a4,VR]=NR(tw),LR=t=>{const{__scopePopper:e,children:n}=t,[r,s]=A.useState(null);return x.jsx(a4,{scope:e,anchor:r,onAnchorChange:s,children:n})};LR.displayName=tw;var MR="PopperAnchor",FR=A.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=VR(MR,n),o=A.useRef(null),a=Ar(e,o),l=A.useRef(null);return A.useEffect(()=>{const c=l.current;l.current=(r==null?void 0:r.current)||o.current,c!==l.current&&i.onAnchorChange(l.current)}),r?null:x.jsx(kn.div,{...s,ref:a})});FR.displayName=MR;var nw="PopperContent",[l4,c4]=NR(nw),UR=A.forwardRef((t,e)=>{var ue,we,Re,It,Ot,Qt;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:E,...g}=t,y=VR(nw,n),[_,w]=A.useState(null),T=Ar(e,zt=>w(zt)),[R,O]=A.useState(null),V=o4(R),S=(V==null?void 0:V.width)??0,I=(V==null?void 0:V.height)??0,b=r+(i!=="center"?"-"+i:""),D=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},P=Array.isArray(c)?c:[c],N=P.length>0,k={padding:D,boundary:P.filter(d4),altBoundary:N},{refs:q,floatingStyles:Z,placement:ie,isPositioned:Y,middlewareData:F}=QF({strategy:"fixed",placement:b,whileElementsMounted:(...zt)=>UF(...zt,{animationFrame:p==="always"}),elements:{reference:y.anchor},middleware:[XF({mainAxis:s+I,alignmentAxis:o}),l&&JF({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?ZF():void 0,...k}),l&&e4({...k}),t4({...k,apply:({elements:zt,rects:vn,availableWidth:Nr,availableHeight:Ee})=>{const{width:Yn,height:$s}=vn.reference,lt=zt.floating.style;lt.setProperty("--radix-popper-available-width",`${Nr}px`),lt.setProperty("--radix-popper-available-height",`${Ee}px`),lt.setProperty("--radix-popper-anchor-width",`${Yn}px`),lt.setProperty("--radix-popper-anchor-height",`${$s}px`)}}),R&&r4({element:R,padding:a}),h4({arrowWidth:S,arrowHeight:I}),f&&n4({strategy:"referenceHidden",...k})]}),[U,K]=$R(ie),ce=Mi(E);Fi(()=>{Y&&(ce==null||ce())},[Y,ce]);const ee=(ue=F.arrow)==null?void 0:ue.x,oe=(we=F.arrow)==null?void 0:we.y,ae=((Re=F.arrow)==null?void 0:Re.centerOffset)!==0,[Ie,Ye]=A.useState();return Fi(()=>{_&&Ye(window.getComputedStyle(_).zIndex)},[_]),x.jsx("div",{ref:q.setFloating,"data-radix-popper-content-wrapper":"",style:{...Z,transform:Y?Z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ie,"--radix-popper-transform-origin":[(It=F.transformOrigin)==null?void 0:It.x,(Ot=F.transformOrigin)==null?void 0:Ot.y].join(" "),...((Qt=F.hide)==null?void 0:Qt.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:x.jsx(l4,{scope:n,placedSide:U,onArrowChange:O,arrowX:ee,arrowY:oe,shouldHideArrow:ae,children:x.jsx(kn.div,{"data-side":U,"data-align":K,...g,ref:T,style:{...g.style,animation:Y?void 0:"none"}})})})});UR.displayName=nw;var jR="PopperArrow",u4={top:"bottom",right:"left",bottom:"top",left:"right"},BR=A.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=c4(jR,r),o=u4[i.placedSide];return x.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:x.jsx(i4,{...s,ref:n,style:{...s.style,display:"block"}})})});BR.displayName=jR;function d4(t){return t!==null}var h4=t=>({name:"transformOrigin",options:t,fn(e){var y,_,w;const{placement:n,rects:r,middlewareData:s}=e,o=((y=s.arrow)==null?void 0:y.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,d]=$R(n),h={start:"0%",center:"50%",end:"100%"}[d],f=(((_=s.arrow)==null?void 0:_.x)??0)+a/2,p=(((w=s.arrow)==null?void 0:w.y)??0)+l/2;let E="",g="";return c==="bottom"?(E=o?h:`${f}px`,g=`${-l}px`):c==="top"?(E=o?h:`${f}px`,g=`${r.floating.height+l}px`):c==="right"?(E=`${-l}px`,g=o?h:`${p}px`):c==="left"&&(E=`${r.floating.width+l}px`,g=o?h:`${p}px`),{data:{x:E,y:g}}}});function $R(t){const[e,n="center"]=t.split("-");return[e,n]}var Q8=LR,f4=FR,p4=UR,m4=BR,[$p]=Vp("Tooltip",[OR]),rw=OR(),zR="TooltipProvider",g4=700,JT="tooltip.open",[y4,qR]=$p(zR),HR=t=>{const{__scopeTooltip:e,delayDuration:n=g4,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,o=A.useRef(!0),a=A.useRef(!1),l=A.useRef(0);return A.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),x.jsx(y4,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:A.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:A.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:A.useCallback(c=>{a.current=c},[]),disableHoverableContent:s,children:i})};HR.displayName=zR;var WR="Tooltip",[Y8,zp]=$p(WR),Yy="TooltipTrigger",v4=A.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=zp(Yy,n),i=qR(Yy,n),o=rw(n),a=A.useRef(null),l=Ar(e,a,s.onTriggerChange),c=A.useRef(!1),d=A.useRef(!1),h=A.useCallback(()=>c.current=!1,[]);return A.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),x.jsx(f4,{asChild:!0,...o,children:x.jsx(kn.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:l,onPointerMove:kt(t.onPointerMove,f=>{f.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:kt(t.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:kt(t.onPointerDown,()=>{s.open&&s.onClose(),c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:kt(t.onFocus,()=>{c.current||s.onOpen()}),onBlur:kt(t.onBlur,s.onClose),onClick:kt(t.onClick,s.onClose)})})});v4.displayName=Yy;var _4="TooltipPortal",[X8,w4]=$p(_4,{forceMount:void 0}),gl="TooltipContent",KR=A.forwardRef((t,e)=>{const n=w4(gl,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=zp(gl,t.__scopeTooltip);return x.jsx($_,{present:r||o.open,children:o.disableHoverableContent?x.jsx(GR,{side:s,...i,ref:e}):x.jsx(E4,{side:s,...i,ref:e})})}),E4=A.forwardRef((t,e)=>{const n=zp(gl,t.__scopeTooltip),r=qR(gl,t.__scopeTooltip),s=A.useRef(null),i=Ar(e,s),[o,a]=A.useState(null),{trigger:l,onClose:c}=n,d=s.current,{onPointerInTransitChange:h}=r,f=A.useCallback(()=>{a(null),h(!1)},[h]),p=A.useCallback((E,g)=>{const y=E.currentTarget,_={x:E.clientX,y:E.clientY},w=b4(_,y.getBoundingClientRect()),T=x4(_,w),R=R4(g.getBoundingClientRect()),O=C4([...T,...R]);a(O),h(!0)},[h]);return A.useEffect(()=>()=>f(),[f]),A.useEffect(()=>{if(l&&d){const E=y=>p(y,d),g=y=>p(y,l);return l.addEventListener("pointerleave",E),d.addEventListener("pointerleave",g),()=>{l.removeEventListener("pointerleave",E),d.removeEventListener("pointerleave",g)}}},[l,d,p,f]),A.useEffect(()=>{if(o){const E=g=>{const y=g.target,_={x:g.clientX,y:g.clientY},w=(l==null?void 0:l.contains(y))||(d==null?void 0:d.contains(y)),T=!P4(_,o);w?f():T&&(f(),c())};return document.addEventListener("pointermove",E),()=>document.removeEventListener("pointermove",E)}},[l,d,o,c,f]),x.jsx(GR,{...t,ref:i})}),[T4,I4]=$p(WR,{isInside:!1}),S4=wV("TooltipContent"),GR=A.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=t,l=zp(gl,n),c=rw(n),{onClose:d}=l;return A.useEffect(()=>(document.addEventListener(JT,d),()=>document.removeEventListener(JT,d)),[d]),A.useEffect(()=>{if(l.trigger){const h=f=>{const p=f.target;p!=null&&p.contains(l.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,d]),x.jsx(B_,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:x.jsxs(p4,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[x.jsx(S4,{children:r}),x.jsx(T4,{scope:n,isInside:!0,children:x.jsx(HV,{id:l.contentId,role:"tooltip",children:s||r})})]})})});KR.displayName=gl;var QR="TooltipArrow",A4=A.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=rw(n);return I4(QR,n).isInside?null:x.jsx(m4,{...s,...r,ref:e})});A4.displayName=QR;function b4(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function x4(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function R4(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function P4(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i],l=e[o],c=a.x,d=a.y,h=l.x,f=l.y;d>r!=f>r&&n<(h-c)*(r-d)/(f-d)+c&&(s=!s)}return s}function C4(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),k4(e)}function k4(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var D4=HR,YR=KR;const N4=D4,O4=A.forwardRef(({className:t,sideOffset:e=4,...n},r)=>x.jsx(YR,{ref:r,sideOffset:e,className:Vs("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));O4.displayName=YR.displayName;var qp=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},V4={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},ci,Hv,QA,L4=(QA=class{constructor(){Oe(this,ci,V4);Oe(this,Hv,!1)}setTimeoutProvider(t){ye(this,ci,t)}setTimeout(t,e){return z(this,ci).setTimeout(t,e)}clearTimeout(t){z(this,ci).clearTimeout(t)}setInterval(t,e){return z(this,ci).setInterval(t,e)}clearInterval(t){z(this,ci).clearInterval(t)}},ci=new WeakMap,Hv=new WeakMap,QA),Xy=new L4;function M4(t){setTimeout(t,0)}var Hp=typeof window>"u"||"Deno"in globalThis;function hr(){}function F4(t,e){return typeof t=="function"?t(e):t}function U4(t){return typeof t=="number"&&t>=0&&t!==1/0}function j4(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Jy(t,e){return typeof t=="function"?t(e):t}function B4(t,e){return typeof t=="function"?t(e):t}function ZT(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==sw(o,e.options))return!1}else if(!Lu(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function eI(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Vu(e.options.mutationKey)!==Vu(i))return!1}else if(!Lu(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function sw(t,e){return((e==null?void 0:e.queryKeyHashFn)||Vu)(t)}function Vu(t){return JSON.stringify(t,(e,n)=>Zy(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Lu(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Lu(t[n],e[n])):!1}var $4=Object.prototype.hasOwnProperty;function XR(t,e){if(t===e)return t;const n=tI(t)&&tI(e);if(!n&&!(Zy(t)&&Zy(e)))return e;const s=(n?t:Object.keys(t)).length,i=n?e:Object.keys(e),o=i.length,a=n?new Array(o):{};let l=0;for(let c=0;c<o;c++){const d=n?c:i[c],h=t[d],f=e[d];if(h===f){a[d]=h,(n?c<s:$4.call(t,d))&&l++;continue}if(h===null||f===null||typeof h!="object"||typeof f!="object"){a[d]=f;continue}const p=XR(h,f);a[d]=p,p===h&&l++}return s===o&&l===s?t:a}function tI(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Zy(t){if(!nI(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!nI(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function nI(t){return Object.prototype.toString.call(t)==="[object Object]"}function z4(t){return new Promise(e=>{Xy.setTimeout(e,t)})}function q4(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?XR(t,e):e}function H4(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function W4(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var iw=Symbol();function JR(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===iw?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Mo,ui,el,YA,K4=(YA=class extends qp{constructor(){super();Oe(this,Mo);Oe(this,ui);Oe(this,el);ye(this,el,e=>{if(!Hp&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){z(this,ui)||this.setEventListener(z(this,el))}onUnsubscribe(){var e;this.hasListeners()||((e=z(this,ui))==null||e.call(this),ye(this,ui,void 0))}setEventListener(e){var n;ye(this,el,e),(n=z(this,ui))==null||n.call(this),ye(this,ui,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){z(this,Mo)!==e&&(ye(this,Mo,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof z(this,Mo)=="boolean"?z(this,Mo):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Mo=new WeakMap,ui=new WeakMap,el=new WeakMap,YA),ZR=new K4;function G4(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}var Q4=M4;function Y4(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=Q4;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var hn=Y4(),tl,di,nl,XA,X4=(XA=class extends qp{constructor(){super();Oe(this,tl,!0);Oe(this,di);Oe(this,nl);ye(this,nl,e=>{if(!Hp&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){z(this,di)||this.setEventListener(z(this,nl))}onUnsubscribe(){var e;this.hasListeners()||((e=z(this,di))==null||e.call(this),ye(this,di,void 0))}setEventListener(e){var n;ye(this,nl,e),(n=z(this,di))==null||n.call(this),ye(this,di,e(this.setOnline.bind(this)))}setOnline(e){z(this,tl)!==e&&(ye(this,tl,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return z(this,tl)}},tl=new WeakMap,di=new WeakMap,nl=new WeakMap,XA),Mf=new X4;function J4(t){return Math.min(1e3*2**t,3e4)}function eP(t){return(t??"online")==="online"?Mf.isOnline():!0}var ev=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function tP(t){let e=!1,n=0,r;const s=G4(),i=()=>s.status!=="pending",o=g=>{var y;if(!i()){const _=new ev(g);f(_),(y=t.onCancel)==null||y.call(t,_)}},a=()=>{e=!0},l=()=>{e=!1},c=()=>ZR.isFocused()&&(t.networkMode==="always"||Mf.isOnline())&&t.canRun(),d=()=>eP(t.networkMode)&&t.canRun(),h=g=>{i()||(r==null||r(),s.resolve(g))},f=g=>{i()||(r==null||r(),s.reject(g))},p=()=>new Promise(g=>{var y;r=_=>{(i()||c())&&g(_)},(y=t.onPause)==null||y.call(t)}).then(()=>{var g;r=void 0,i()||(g=t.onContinue)==null||g.call(t)}),E=()=>{if(i())return;let g;const y=n===0?t.initialPromise:void 0;try{g=y??t.fn()}catch(_){g=Promise.reject(_)}Promise.resolve(g).then(h).catch(_=>{var V;if(i())return;const w=t.retry??(Hp?0:3),T=t.retryDelay??J4,R=typeof T=="function"?T(n,_):T,O=w===!0||typeof w=="number"&&n<w||typeof w=="function"&&w(n,_);if(e||!O){f(_);return}n++,(V=t.onFail)==null||V.call(t,n,_),z4(R).then(()=>c()?void 0:p()).then(()=>{e?f(_):E()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:a,continueRetry:l,canStart:d,start:()=>(d()?E():p().then(E),s)}}var Fo,JA,nP=(JA=class{constructor(){Oe(this,Fo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),U4(this.gcTime)&&ye(this,Fo,Xy.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Hp?1/0:5*60*1e3))}clearGcTimeout(){z(this,Fo)&&(Xy.clearTimeout(z(this,Fo)),ye(this,Fo,void 0))}},Fo=new WeakMap,JA),Uo,rl,Zn,jo,Ft,sd,Bo,fr,us,ZA,Z4=(ZA=class extends nP{constructor(n){super();Oe(this,fr);Oe(this,Uo);Oe(this,rl);Oe(this,Zn);Oe(this,jo);Oe(this,Ft);Oe(this,sd);Oe(this,Bo);ye(this,Bo,!1),ye(this,sd,n.defaultOptions),this.setOptions(n.options),this.observers=[],ye(this,jo,n.client),ye(this,Zn,z(this,jo).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,ye(this,Uo,sI(this.options)),this.state=n.state??z(this,Uo),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=z(this,Ft))==null?void 0:n.promise}setOptions(n){if(this.options={...z(this,sd),...n},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=sI(this.options);r.data!==void 0&&(this.setState(rI(r.data,r.dataUpdatedAt)),ye(this,Uo,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&z(this,Zn).remove(this)}setData(n,r){const s=q4(this.state.data,n,this.options);return Yt(this,fr,us).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){Yt(this,fr,us).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=z(this,Ft))==null?void 0:s.promise;return(i=z(this,Ft))==null||i.cancel(n),r?r.then(hr).catch(hr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(z(this,Uo))}isActive(){return this.observers.some(n=>B4(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===iw||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>Jy(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!j4(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=z(this,Ft))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=z(this,Ft))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),z(this,Zn).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(z(this,Ft)&&(z(this,Bo)?z(this,Ft).cancel({revert:!0}):z(this,Ft).cancelRetry()),this.scheduleGc()),z(this,Zn).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Yt(this,fr,us).call(this,{type:"invalidate"})}async fetch(n,r){var c,d,h,f,p,E,g,y,_,w,T,R;if(this.state.fetchStatus!=="idle"&&((c=z(this,Ft))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(z(this,Ft))return z(this,Ft).continueRetry(),z(this,Ft).promise}if(n&&this.setOptions(n),!this.options.queryFn){const O=this.observers.find(V=>V.options.queryFn);O&&this.setOptions(O.options)}const s=new AbortController,i=O=>{Object.defineProperty(O,"signal",{enumerable:!0,get:()=>(ye(this,Bo,!0),s.signal)})},o=()=>{const O=JR(this.options,r),S=(()=>{const I={client:z(this,jo),queryKey:this.queryKey,meta:this.meta};return i(I),I})();return ye(this,Bo,!1),this.options.persister?this.options.persister(O,S,this):O(S)},l=(()=>{const O={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:z(this,jo),state:this.state,fetchFn:o};return i(O),O})();(d=this.options.behavior)==null||d.onFetch(l,this),ye(this,rl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&Yt(this,fr,us).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta}),ye(this,Ft,tP({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,onCancel:O=>{O instanceof ev&&O.revert&&this.setState({...z(this,rl),fetchStatus:"idle"}),s.abort()},onFail:(O,V)=>{Yt(this,fr,us).call(this,{type:"failed",failureCount:O,error:V})},onPause:()=>{Yt(this,fr,us).call(this,{type:"pause"})},onContinue:()=>{Yt(this,fr,us).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const O=await z(this,Ft).start();if(O===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(O),(E=(p=z(this,Zn).config).onSuccess)==null||E.call(p,O,this),(y=(g=z(this,Zn).config).onSettled)==null||y.call(g,O,this.state.error,this),O}catch(O){if(O instanceof ev){if(O.silent)return z(this,Ft).promise;if(O.revert){if(this.state.data===void 0)throw O;return this.state.data}}throw Yt(this,fr,us).call(this,{type:"error",error:O}),(w=(_=z(this,Zn).config).onError)==null||w.call(_,O,this),(R=(T=z(this,Zn).config).onSettled)==null||R.call(T,this.state.data,O,this),O}finally{this.scheduleGc()}}},Uo=new WeakMap,rl=new WeakMap,Zn=new WeakMap,jo=new WeakMap,Ft=new WeakMap,sd=new WeakMap,Bo=new WeakMap,fr=new WeakSet,us=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...eU(s.data,this.options),fetchMeta:n.meta??null};case"success":const i={...s,...rI(n.data,n.dataUpdatedAt),dataUpdateCount:s.dataUpdateCount+1,...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return ye(this,rl,n.manual?i:void 0),i;case"error":const o=n.error;return{...s,error:o,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),hn.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),z(this,Zn).notify({query:this,type:"updated",action:n})})},ZA);function eU(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:eP(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function rI(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function sI(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}function iI(t){return{onFetch:(e,n)=>{var d,h,f,p,E;const r=e.options,s=(f=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,i=((p=e.state.data)==null?void 0:p.pages)||[],o=((E=e.state.data)==null?void 0:E.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let g=!1;const y=T=>{Object.defineProperty(T,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},_=JR(e.options,e.fetchOptions),w=async(T,R,O)=>{if(g)return Promise.reject();if(R==null&&T.pages.length)return Promise.resolve(T);const S=(()=>{const P={client:e.client,queryKey:e.queryKey,pageParam:R,direction:O?"backward":"forward",meta:e.options.meta};return y(P),P})(),I=await _(S),{maxPages:b}=e.options,D=O?W4:H4;return{pages:D(T.pages,I,b),pageParams:D(T.pageParams,R,b)}};if(s&&i.length){const T=s==="backward",R=T?tU:oI,O={pages:i,pageParams:o},V=R(r,O);a=await w(O,V,T)}else{const T=t??i.length;do{const R=l===0?o[0]??r.initialPageParam:oI(r,a);if(l>0&&R==null)break;a=await w(a,R),l++}while(l<T)}return a};e.options.persister?e.fetchFn=()=>{var g,y;return(y=(g=e.options).persister)==null?void 0:y.call(g,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=c}}}function oI(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function tU(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var id,zr,un,$o,qr,ri,eb,nU=(eb=class extends nP{constructor(n){super();Oe(this,qr);Oe(this,id);Oe(this,zr);Oe(this,un);Oe(this,$o);ye(this,id,n.client),this.mutationId=n.mutationId,ye(this,un,n.mutationCache),ye(this,zr,[]),this.state=n.state||rU(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){z(this,zr).includes(n)||(z(this,zr).push(n),this.clearGcTimeout(),z(this,un).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){ye(this,zr,z(this,zr).filter(r=>r!==n)),this.scheduleGc(),z(this,un).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){z(this,zr).length||(this.state.status==="pending"?this.scheduleGc():z(this,un).remove(this))}continue(){var n;return((n=z(this,$o))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var a,l,c,d,h,f,p,E,g,y,_,w,T,R,O,V,S,I,b,D;const r=()=>{Yt(this,qr,ri).call(this,{type:"continue"})},s={client:z(this,id),meta:this.options.meta,mutationKey:this.options.mutationKey};ye(this,$o,tP({fn:()=>this.options.mutationFn?this.options.mutationFn(n,s):Promise.reject(new Error("No mutationFn found")),onFail:(P,N)=>{Yt(this,qr,ri).call(this,{type:"failed",failureCount:P,error:N})},onPause:()=>{Yt(this,qr,ri).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>z(this,un).canRun(this)}));const i=this.state.status==="pending",o=!z(this,$o).canStart();try{if(i)r();else{Yt(this,qr,ri).call(this,{type:"pending",variables:n,isPaused:o}),await((l=(a=z(this,un).config).onMutate)==null?void 0:l.call(a,n,this,s));const N=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,n,s));N!==this.state.context&&Yt(this,qr,ri).call(this,{type:"pending",context:N,variables:n,isPaused:o})}const P=await z(this,$o).start();return await((f=(h=z(this,un).config).onSuccess)==null?void 0:f.call(h,P,n,this.state.context,this,s)),await((E=(p=this.options).onSuccess)==null?void 0:E.call(p,P,n,this.state.context,s)),await((y=(g=z(this,un).config).onSettled)==null?void 0:y.call(g,P,null,this.state.variables,this.state.context,this,s)),await((w=(_=this.options).onSettled)==null?void 0:w.call(_,P,null,n,this.state.context,s)),Yt(this,qr,ri).call(this,{type:"success",data:P}),P}catch(P){try{throw await((R=(T=z(this,un).config).onError)==null?void 0:R.call(T,P,n,this.state.context,this,s)),await((V=(O=this.options).onError)==null?void 0:V.call(O,P,n,this.state.context,s)),await((I=(S=z(this,un).config).onSettled)==null?void 0:I.call(S,void 0,P,this.state.variables,this.state.context,this,s)),await((D=(b=this.options).onSettled)==null?void 0:D.call(b,void 0,P,n,this.state.context,s)),P}finally{Yt(this,qr,ri).call(this,{type:"error",error:P})}}finally{z(this,un).runNext(this)}}},id=new WeakMap,zr=new WeakMap,un=new WeakMap,$o=new WeakMap,qr=new WeakSet,ri=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),hn.batch(()=>{z(this,zr).forEach(s=>{s.onMutationUpdate(n)}),z(this,un).notify({mutation:this,type:"updated",action:n})})},eb);function rU(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var fs,pr,od,tb,sU=(tb=class extends qp{constructor(e={}){super();Oe(this,fs);Oe(this,pr);Oe(this,od);this.config=e,ye(this,fs,new Set),ye(this,pr,new Map),ye(this,od,0)}build(e,n,r){const s=new nU({client:e,mutationCache:this,mutationId:++Wd(this,od)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){z(this,fs).add(e);const n=ph(e);if(typeof n=="string"){const r=z(this,pr).get(n);r?r.push(e):z(this,pr).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(z(this,fs).delete(e)){const n=ph(e);if(typeof n=="string"){const r=z(this,pr).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&z(this,pr).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=ph(e);if(typeof n=="string"){const r=z(this,pr).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=ph(e);if(typeof n=="string"){const s=(r=z(this,pr).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){hn.batch(()=>{z(this,fs).forEach(e=>{this.notify({type:"removed",mutation:e})}),z(this,fs).clear(),z(this,pr).clear()})}getAll(){return Array.from(z(this,fs))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>eI(n,r))}findAll(e={}){return this.getAll().filter(n=>eI(e,n))}notify(e){hn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return hn.batch(()=>Promise.all(e.map(n=>n.continue().catch(hr))))}},fs=new WeakMap,pr=new WeakMap,od=new WeakMap,tb);function ph(t){var e;return(e=t.options.scope)==null?void 0:e.id}var Hr,nb,iU=(nb=class extends qp{constructor(e={}){super();Oe(this,Hr);this.config=e,ye(this,Hr,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??sw(s,n);let o=this.get(i);return o||(o=new Z4({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){z(this,Hr).has(e.queryHash)||(z(this,Hr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=z(this,Hr).get(e.queryHash);n&&(e.destroy(),n===e&&z(this,Hr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){hn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return z(this,Hr).get(e)}getAll(){return[...z(this,Hr).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>ZT(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>ZT(e,r)):n}notify(e){hn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){hn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){hn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Hr=new WeakMap,nb),pt,hi,fi,sl,il,pi,ol,al,rb,oU=(rb=class{constructor(t={}){Oe(this,pt);Oe(this,hi);Oe(this,fi);Oe(this,sl);Oe(this,il);Oe(this,pi);Oe(this,ol);Oe(this,al);ye(this,pt,t.queryCache||new iU),ye(this,hi,t.mutationCache||new sU),ye(this,fi,t.defaultOptions||{}),ye(this,sl,new Map),ye(this,il,new Map),ye(this,pi,0)}mount(){Wd(this,pi)._++,z(this,pi)===1&&(ye(this,ol,ZR.subscribe(async t=>{t&&(await this.resumePausedMutations(),z(this,pt).onFocus())})),ye(this,al,Mf.subscribe(async t=>{t&&(await this.resumePausedMutations(),z(this,pt).onOnline())})))}unmount(){var t,e;Wd(this,pi)._--,z(this,pi)===0&&((t=z(this,ol))==null||t.call(this),ye(this,ol,void 0),(e=z(this,al))==null||e.call(this),ye(this,al,void 0))}isFetching(t){return z(this,pt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return z(this,hi).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=z(this,pt).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=z(this,pt).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Jy(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return z(this,pt).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=z(this,pt).get(r.queryHash),i=s==null?void 0:s.state.data,o=F4(e,i);if(o!==void 0)return z(this,pt).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return hn.batch(()=>z(this,pt).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=z(this,pt).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=z(this,pt);hn.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=z(this,pt);return hn.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=hn.batch(()=>z(this,pt).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(hr).catch(hr)}invalidateQueries(t,e={}){return hn.batch(()=>(z(this,pt).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=hn.batch(()=>z(this,pt).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(hr)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(hr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=z(this,pt).build(this,e);return n.isStaleByTime(Jy(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(hr).catch(hr)}fetchInfiniteQuery(t){return t.behavior=iI(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(hr).catch(hr)}ensureInfiniteQueryData(t){return t.behavior=iI(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Mf.isOnline()?z(this,hi).resumePausedMutations():Promise.resolve()}getQueryCache(){return z(this,pt)}getMutationCache(){return z(this,hi)}getDefaultOptions(){return z(this,fi)}setDefaultOptions(t){ye(this,fi,t)}setQueryDefaults(t,e){z(this,sl).set(Vu(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...z(this,sl).values()],n={};return e.forEach(r=>{Lu(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){z(this,il).set(Vu(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...z(this,il).values()],n={};return e.forEach(r=>{Lu(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...z(this,fi).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=sw(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===iw&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...z(this,fi).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){z(this,pt).clear(),z(this,hi).clear()}},pt=new WeakMap,hi=new WeakMap,fi=new WeakMap,sl=new WeakMap,il=new WeakMap,pi=new WeakMap,ol=new WeakMap,al=new WeakMap,rb),aU=A.createContext(void 0),lU=({client:t,children:e})=>(A.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),x.jsx(aU.Provider,{value:t,children:e}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Mu(){return Mu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mu.apply(this,arguments)}var yi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(yi||(yi={}));const aI="popstate";function cU(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return Ff("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Fu(s)}return rP(e,n,null,t)}function uU(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:a="",hash:l=""}=da(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Ff("",{pathname:o,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=s.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof i=="string"?i:Fu(i))}function r(s,i){ow(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return rP(e,n,r,t)}function Et(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ow(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function dU(){return Math.random().toString(36).substr(2,8)}function lI(t,e){return{usr:t.state,key:t.key,idx:e}}function Ff(t,e,n,r){return n===void 0&&(n=null),Mu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?da(e):e,{state:n,key:e&&e.key||r||dU()})}function Fu(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function da(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function rP(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=yi.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(Mu({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=yi.Pop;let y=d(),_=y==null?null:y-c;c=y,l&&l({action:a,location:g.location,delta:_})}function f(y,_){a=yi.Push;let w=Ff(g.location,y,_);n&&n(w,y),c=d()+1;let T=lI(w,c),R=g.createHref(w);try{o.pushState(T,"",R)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;s.location.assign(R)}i&&l&&l({action:a,location:g.location,delta:1})}function p(y,_){a=yi.Replace;let w=Ff(g.location,y,_);n&&n(w,y),c=d();let T=lI(w,c),R=g.createHref(w);o.replaceState(T,"",R),i&&l&&l({action:a,location:g.location,delta:0})}function E(y){let _=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof y=="string"?y:Fu(y);return w=w.replace(/ $/,"%20"),Et(_,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,_)}let g={get action(){return a},get location(){return t(s,o)},listen(y){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(aI,h),l=y,()=>{s.removeEventListener(aI,h),l=null}},createHref(y){return e(s,y)},createURL:E,encodeLocation(y){let _=E(y);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:f,replace:p,go(y){return o.go(y)}};return g}var cI;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(cI||(cI={}));function hU(t,e,n){return n===void 0&&(n="/"),fU(t,e,n)}function fU(t,e,n,r){let s=typeof e=="string"?da(e):e,i=aw(s.pathname||"/",n);if(i==null)return null;let o=sP(t);pU(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=bU(i);a=IU(o[l],c)}return a}function sP(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Et(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Ri([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(Et(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),sP(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:EU(c,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of iP(i.path))s(i,o,l)}),e}function iP(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=iP(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function pU(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:TU(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const mU=/^:[\w-]+$/,gU=3,yU=2,vU=1,_U=10,wU=-2,uI=t=>t==="*";function EU(t,e){let n=t.split("/"),r=n.length;return n.some(uI)&&(r+=wU),e&&(r+=yU),n.filter(s=>!uI(s)).reduce((s,i)=>s+(mU.test(i)?gU:i===""?vU:_U),r)}function TU(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function IU(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=SU({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),f=l.route;if(!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:Ri([i,h.pathname]),pathnameBase:CU(Ri([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=Ri([i,h.pathnameBase]))}return o}function SU(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=AU(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,d,h)=>{let{paramName:f,isOptional:p}=d;if(f==="*"){let g=a[h]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const E=a[h];return p&&!E?c[f]=void 0:c[f]=(E||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function AU(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),ow(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function bU(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ow(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function aw(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function xU(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?da(t):t;return{pathname:n?n.startsWith("/")?n:RU(n,e):e,search:kU(r),hash:DU(s)}}function RU(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Tg(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function PU(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function lw(t,e){let n=PU(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function cw(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=da(t):(s=Mu({},t),Et(!s.pathname||!s.pathname.includes("?"),Tg("?","pathname","search",s)),Et(!s.pathname||!s.pathname.includes("#"),Tg("#","pathname","hash",s)),Et(!s.search||!s.search.includes("#"),Tg("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=xU(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const Ri=t=>t.join("/").replace(/\/\/+/g,"/"),CU=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),kU=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,DU=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function NU(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const oP=["post","put","patch","delete"];new Set(oP);const OU=["get",...oP];new Set(OU);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Uu(){return Uu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Uu.apply(this,arguments)}const uw=A.createContext(null),VU=A.createContext(null),eo=A.createContext(null),Wp=A.createContext(null),Ls=A.createContext({outlet:null,matches:[],isDataRoute:!1}),aP=A.createContext(null);function LU(t,e){let{relative:n}=e===void 0?{}:e;ql()||Et(!1);let{basename:r,navigator:s}=A.useContext(eo),{hash:i,pathname:o,search:a}=cP(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Ri([r,o])),s.createHref({pathname:l,search:a,hash:i})}function ql(){return A.useContext(Wp)!=null}function os(){return ql()||Et(!1),A.useContext(Wp).location}function lP(t){A.useContext(eo).static||A.useLayoutEffect(t)}function md(){let{isDataRoute:t}=A.useContext(Ls);return t?QU():MU()}function MU(){ql()||Et(!1);let t=A.useContext(uw),{basename:e,future:n,navigator:r}=A.useContext(eo),{matches:s}=A.useContext(Ls),{pathname:i}=os(),o=JSON.stringify(lw(s,n.v7_relativeSplatPath)),a=A.useRef(!1);return lP(()=>{a.current=!0}),A.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=cw(c,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Ri([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,i,t])}function eq(){let{matches:t}=A.useContext(Ls),e=t[t.length-1];return e?e.params:{}}function cP(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=A.useContext(eo),{matches:s}=A.useContext(Ls),{pathname:i}=os(),o=JSON.stringify(lw(s,r.v7_relativeSplatPath));return A.useMemo(()=>cw(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function FU(t,e){return UU(t,e)}function UU(t,e,n,r){ql()||Et(!1);let{navigator:s}=A.useContext(eo),{matches:i}=A.useContext(Ls),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=os(),d;if(e){var h;let y=typeof e=="string"?da(e):e;l==="/"||(h=y.pathname)!=null&&h.startsWith(l)||Et(!1),d=y}else d=c;let f=d.pathname||"/",p=f;if(l!=="/"){let y=l.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(y.length).join("/")}let E=hU(t,{pathname:p}),g=qU(E&&E.map(y=>Object.assign({},y,{params:Object.assign({},a,y.params),pathname:Ri([l,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?l:Ri([l,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,n,r);return e&&g?A.createElement(Wp.Provider,{value:{location:Uu({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:yi.Pop}},g):g}function jU(){let t=GU(),e=NU(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),n?A.createElement("pre",{style:s},n):null,null)}const BU=A.createElement(jU,null);class $U extends A.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?A.createElement(Ls.Provider,{value:this.props.routeContext},A.createElement(aP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function zU(t){let{routeContext:e,match:n,children:r}=t,s=A.useContext(uw);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),A.createElement(Ls.Provider,{value:e},r)}function qU(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||Et(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:f,errors:p}=n,E=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||E){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let p,E=!1,g=null,y=null;n&&(p=a&&h.route.id?a[h.route.id]:void 0,g=h.route.errorElement||BU,l&&(c<0&&f===0?(YU("route-fallback"),E=!0,y=null):c===f&&(E=!0,y=h.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,f+1)),w=()=>{let T;return p?T=g:E?T=y:h.route.Component?T=A.createElement(h.route.Component,null):h.route.element?T=h.route.element:T=d,A.createElement(zU,{match:h,routeContext:{outlet:d,matches:_,isDataRoute:n!=null},children:T})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?A.createElement($U,{location:n.location,revalidation:n.revalidation,component:g,error:p,children:w(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):w()},null)}var uP=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(uP||{}),dP=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(dP||{});function HU(t){let e=A.useContext(uw);return e||Et(!1),e}function WU(t){let e=A.useContext(VU);return e||Et(!1),e}function KU(t){let e=A.useContext(Ls);return e||Et(!1),e}function hP(t){let e=KU(),n=e.matches[e.matches.length-1];return n.route.id||Et(!1),n.route.id}function GU(){var t;let e=A.useContext(aP),n=WU(),r=hP();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function QU(){let{router:t}=HU(uP.UseNavigateStable),e=hP(dP.UseNavigateStable),n=A.useRef(!1);return lP(()=>{n.current=!0}),A.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Uu({fromRouteId:e},i)))},[t,e])}const dI={};function YU(t,e,n){dI[t]||(dI[t]=!0)}function fP(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function tq(t){let{to:e,replace:n,state:r,relative:s}=t;ql()||Et(!1);let{future:i,static:o}=A.useContext(eo),{matches:a}=A.useContext(Ls),{pathname:l}=os(),c=md(),d=cw(e,lw(a,i.v7_relativeSplatPath),l,s==="path"),h=JSON.stringify(d);return A.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:s}),[c,h,s,n,r]),null}function se(t){Et(!1)}function pP(t){let{basename:e="/",children:n=null,location:r,navigationType:s=yi.Pop,navigator:i,static:o=!1,future:a}=t;ql()&&Et(!1);let l=e.replace(/^\/*/,"/"),c=A.useMemo(()=>({basename:l,navigator:i,static:o,future:Uu({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=da(r));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:E="default"}=r,g=A.useMemo(()=>{let y=aw(d,l);return y==null?null:{location:{pathname:y,search:h,hash:f,state:p,key:E},navigationType:s}},[l,d,h,f,p,E,s]);return g==null?null:A.createElement(eo.Provider,{value:c},A.createElement(Wp.Provider,{children:n,value:g}))}function hI(t){let{children:e,location:n}=t;return FU(tv(e),n)}new Promise(()=>{});function tv(t,e){e===void 0&&(e=[]);let n=[];return A.Children.forEach(t,(r,s)=>{if(!A.isValidElement(r))return;let i=[...e,s];if(r.type===A.Fragment){n.push.apply(n,tv(r.props.children,i));return}r.type!==se&&Et(!1),!r.props.index||!r.props.children||Et(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=tv(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nv(){return nv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nv.apply(this,arguments)}function XU(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function JU(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function ZU(t,e){return t.button===0&&(!e||e==="_self")&&!JU(t)}function rv(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function e3(t,e){let n=rv(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const t3=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],n3="6";try{window.__reactRouterVersion=n3}catch{}const r3="startTransition",Uf=xb[r3];function s3(t){let{basename:e,children:n,future:r,window:s}=t,i=A.useRef();i.current==null&&(i.current=cU({window:s,v5Compat:!0}));let o=i.current,[a,l]=A.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=A.useCallback(h=>{c&&Uf?Uf(()=>l(h)):l(h)},[l,c]);return A.useLayoutEffect(()=>o.listen(d),[o,d]),A.useEffect(()=>fP(r),[r]),A.createElement(pP,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}function i3(t){let{basename:e,children:n,future:r,window:s}=t,i=A.useRef();i.current==null&&(i.current=uU({window:s,v5Compat:!0}));let o=i.current,[a,l]=A.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=A.useCallback(h=>{c&&Uf?Uf(()=>l(h)):l(h)},[l,c]);return A.useLayoutEffect(()=>o.listen(d),[o,d]),A.useEffect(()=>fP(r),[r]),A.createElement(pP,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const o3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",a3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,l3=A.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:h}=e,f=XU(e,t3),{basename:p}=A.useContext(eo),E,g=!1;if(typeof c=="string"&&a3.test(c)&&(E=c,o3))try{let T=new URL(window.location.href),R=c.startsWith("//")?new URL(T.protocol+c):new URL(c),O=aw(R.pathname,p);R.origin===T.origin&&O!=null?c=O+R.search+R.hash:g=!0}catch{}let y=LU(c,{relative:s}),_=c3(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:s,viewTransition:h});function w(T){r&&r(T),T.defaultPrevented||_(T)}return A.createElement("a",nv({},f,{href:E||y,onClick:g||i?r:w,ref:n,target:l}))});var fI;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(fI||(fI={}));var pI;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(pI||(pI={}));function c3(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=md(),c=os(),d=cP(t,{relative:o});return A.useCallback(h=>{if(ZU(h,n)){h.preventDefault();let f=r!==void 0?r:Fu(c)===Fu(d);l(t,{replace:f,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,d,r,s,n,t,i,o,a])}function nq(t){let e=A.useRef(rv(t)),n=A.useRef(!1),r=os(),s=A.useMemo(()=>e3(r.search,n.current?null:e.current),[r.search]),i=md(),o=A.useCallback((a,l)=>{const c=rv(typeof a=="function"?a(s):a);n.current=!0,i("?"+c,l)},[i,s]);return[s,o]}const mP=A.createContext(void 0),u3=({children:t})=>{const[e,n]=A.useState("medium"),[r,s]=A.useState(!1),[i,o]=A.useState(!1);A.useEffect(()=>{const l=()=>{const c=window.innerWidth<=768;s(c)};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]),A.useEffect(()=>{try{const l=!!window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron")||typeof window<"u"&&window.location&&window.location.protocol==="file:";o(l)}catch{o(!1)}},[]),A.useEffect(()=>{const l=["appFontSize","desktopFontSize","mobileFontSize"];for(const c of l){const d=localStorage.getItem(c);if(d&&["small","medium","large"].includes(d)){n(d);break}}},[]),A.useEffect(()=>{const l=document.documentElement;l.classList.remove("font-size-small","font-size-medium","font-size-large"),l.classList.add(`font-size-${e}`)},[e]);const a=l=>{n(l),localStorage.setItem("appFontSize",l),i&&localStorage.setItem("desktopFontSize",l)};return x.jsx(mP.Provider,{value:{fontSize:e,setFontSize:a,isMobile:r,isDesktopApp:i},children:t})},rq=()=>{const t=A.useContext(mP);if(t===void 0)throw new Error("useFontSize must be used within a FontSizeProvider");return t},d3=oR("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),gP=A.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?vV:"button";return x.jsx(o,{className:Vs(d3({variant:e,size:n,className:t})),ref:i,...s})});gP.displayName="Button";const sv=A.forwardRef(({className:t,type:e,...n},r)=>{const s={...n};return Object.prototype.hasOwnProperty.call(s,"value")&&s.value===void 0&&(s.value=""),x.jsx("input",{type:e,className:Vs("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...s})});sv.displayName="Input";const h3=()=>{};var mI={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yP=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},f3=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},dw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=i>>2,h=(i&3)<<4|a>>4;let f=(a&15)<<2|c>>6,p=c&63;l||(p=64,o||(f=64)),r.push(n[d],n[h],n[f],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(yP(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):f3(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new p3;const f=i<<2|a>>4;if(r.push(f),c!==64){const p=a<<4&240|c>>2;if(r.push(p),h!==64){const E=c<<6&192|h;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class p3 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const m3=function(t){const e=yP(t);return dw.encodeByteArray(e,!0)},jf=function(t){return m3(t).replace(/\./g,"")},vP=function(t){try{return dw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _P(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g3=()=>_P().__FIREBASE_DEFAULTS__,y3=()=>{if(typeof process>"u"||typeof mI>"u")return;const t=mI.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},v3=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&vP(t[1]);return e&&JSON.parse(e)},Kp=()=>{try{return h3()||g3()||y3()||v3()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},_3=t=>{var e,n;return(n=(e=Kp())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},wP=t=>{const e=_3(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},EP=()=>{var t;return(t=Kp())==null?void 0:t.config},w3=t=>{var e;return(e=Kp())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ms(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function hw(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E3(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[jf(JSON.stringify(n)),jf(JSON.stringify(o)),""].join(".")}const ru={};function T3(){const t={prod:[],emulator:[]};for(const e of Object.keys(ru))ru[e]?t.emulator.push(e):t.prod.push(e);return t}function I3(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let gI=!1;function TP(t,e){if(typeof window>"u"||typeof document>"u"||!Ms(window.location.host)||ru[t]===e||ru[t]||gI)return;ru[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",i=T3().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,p){f.setAttribute("width","24"),f.setAttribute("id",p),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function c(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{gI=!0,o()},f}function d(f,p){f.setAttribute("id",p),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){const f=I3(r),p=n("text"),E=document.getElementById(p)||document.createElement("span"),g=n("learnmore"),y=document.getElementById(g)||document.createElement("a"),_=n("preprendIcon"),w=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const T=f.element;a(T),d(y,g);const R=c();l(w,_),T.append(w,E,y,R),document.body.appendChild(T)}i?(E.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function S3(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Gt())}function IP(){var e;const t=(e=Kp())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function A3(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function b3(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function x3(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function R3(){const t=Gt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function SP(){return!IP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function AP(){return!IP()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function fw(){try{return typeof indexedDB=="object"}catch{return!1}}function P3(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C3="FirebaseError";class kr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=C3,Object.setPrototypeOf(this,kr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Hl.prototype.create)}}class Hl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?k3(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new kr(s,a,r)}}function k3(t,e){return t.replace(D3,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const D3=/\{\$([^}]+)}/g;function yl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(yI(i)&&yI(o)){if(!yl(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function yI(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bP(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Uc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function jc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function N3(t,e){const n=new O3(t,e);return n.subscribe.bind(n)}class O3{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");V3(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Ig),s.error===void 0&&(s.error=Ig),s.complete===void 0&&(s.complete=Ig);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function V3(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ig(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sq=4*60*60*1e3;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function We(t){return t&&t._delegate?t._delegate:t}class Rr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new iv;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(F3(e))try{this.getOrInitializeService({instanceIdentifier:go})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=go){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=go){return this.instances.has(e)}getOptions(e=go){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:M3(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=go){return this.component?this.component.multipleInstances?e:go:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function M3(t){return t===go?void 0:t}function F3(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new L3(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ce;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ce||(Ce={}));const j3={debug:Ce.DEBUG,verbose:Ce.VERBOSE,info:Ce.INFO,warn:Ce.WARN,error:Ce.ERROR,silent:Ce.SILENT},B3=Ce.INFO,$3={[Ce.DEBUG]:"log",[Ce.VERBOSE]:"log",[Ce.INFO]:"info",[Ce.WARN]:"warn",[Ce.ERROR]:"error"},z3=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=$3[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Gp{constructor(e){this.name=e,this._logLevel=B3,this._logHandler=z3,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?j3[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ce.DEBUG,...e),this._logHandler(this,Ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ce.VERBOSE,...e),this._logHandler(this,Ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ce.INFO,...e),this._logHandler(this,Ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ce.WARN,...e),this._logHandler(this,Ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ce.ERROR,...e),this._logHandler(this,Ce.ERROR,...e)}}const q3=(t,e)=>e.some(n=>t instanceof n);let vI,_I;function H3(){return vI||(vI=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function W3(){return _I||(_I=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const xP=new WeakMap,ov=new WeakMap,RP=new WeakMap,Sg=new WeakMap,pw=new WeakMap;function K3(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Pi(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&xP.set(n,t)}).catch(()=>{}),pw.set(e,t),e}function G3(t){if(ov.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});ov.set(t,e)}let av={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ov.get(t);if(e==="objectStoreNames")return t.objectStoreNames||RP.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Pi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Q3(t){av=t(av)}function Y3(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ag(this),e,...n);return RP.set(r,e.sort?e.sort():[e]),Pi(r)}:W3().includes(t)?function(...e){return t.apply(Ag(this),e),Pi(xP.get(this))}:function(...e){return Pi(t.apply(Ag(this),e))}}function X3(t){return typeof t=="function"?Y3(t):(t instanceof IDBTransaction&&G3(t),q3(t,H3())?new Proxy(t,av):t)}function Pi(t){if(t instanceof IDBRequest)return K3(t);if(Sg.has(t))return Sg.get(t);const e=X3(t);return e!==t&&(Sg.set(t,e),pw.set(e,t)),e}const Ag=t=>pw.get(t);function J3(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Pi(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Pi(o.result),l.oldVersion,l.newVersion,Pi(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const Z3=["get","getKey","getAll","getAllKeys","count"],e6=["put","add","delete","clear"],bg=new Map;function wI(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(bg.get(e))return bg.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=e6.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Z3.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return bg.set(e,i),i}Q3(t=>({...t,get:(e,n,r)=>wI(e,n)||t.get(e,n,r),has:(e,n)=>!!wI(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(n6(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function n6(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const lv="@firebase/app",EI="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks=new Gp("@firebase/app"),r6="@firebase/app-compat",s6="@firebase/analytics-compat",i6="@firebase/analytics",o6="@firebase/app-check-compat",a6="@firebase/app-check",l6="@firebase/auth",c6="@firebase/auth-compat",u6="@firebase/database",d6="@firebase/data-connect",h6="@firebase/database-compat",f6="@firebase/functions",p6="@firebase/functions-compat",m6="@firebase/installations",g6="@firebase/installations-compat",y6="@firebase/messaging",v6="@firebase/messaging-compat",_6="@firebase/performance",w6="@firebase/performance-compat",E6="@firebase/remote-config",T6="@firebase/remote-config-compat",I6="@firebase/storage",S6="@firebase/storage-compat",A6="@firebase/firestore",b6="@firebase/ai",x6="@firebase/firestore-compat",R6="firebase",P6="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv="[DEFAULT]",C6={[lv]:"fire-core",[r6]:"fire-core-compat",[i6]:"fire-analytics",[s6]:"fire-analytics-compat",[a6]:"fire-app-check",[o6]:"fire-app-check-compat",[l6]:"fire-auth",[c6]:"fire-auth-compat",[u6]:"fire-rtdb",[d6]:"fire-data-connect",[h6]:"fire-rtdb-compat",[f6]:"fire-fn",[p6]:"fire-fn-compat",[m6]:"fire-iid",[g6]:"fire-iid-compat",[y6]:"fire-fcm",[v6]:"fire-fcm-compat",[_6]:"fire-perf",[w6]:"fire-perf-compat",[E6]:"fire-rc",[T6]:"fire-rc-compat",[I6]:"fire-gcs",[S6]:"fire-gcs-compat",[A6]:"fire-fst",[x6]:"fire-fst-compat",[b6]:"fire-vertex","fire-js":"fire-js",[R6]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bf=new Map,k6=new Map,uv=new Map;function TI(t,e){try{t.container.addComponent(e)}catch(n){ks.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function rs(t){const e=t.name;if(uv.has(e))return ks.debug(`There were multiple attempts to register component ${e}.`),!1;uv.set(e,t);for(const n of Bf.values())TI(n,t);for(const n of k6.values())TI(n,t);return!0}function Qp(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Mn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ci=new Hl("app","Firebase",D6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N6{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Rr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ci.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gd=P6;function PP(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:cv,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Ci.create("bad-app-name",{appName:String(s)});if(n||(n=EP()),!n)throw Ci.create("no-options");const i=Bf.get(s);if(i){if(yl(n,i.options)&&yl(r,i.config))return i;throw Ci.create("duplicate-app",{appName:s})}const o=new U3(s);for(const l of uv.values())o.addComponent(l);const a=new N6(n,r,o);return Bf.set(s,a),a}function CP(t=cv){const e=Bf.get(t);if(!e&&t===cv&&EP())return PP();if(!e)throw Ci.create("no-app",{appName:t});return e}function qn(t,e,n){let r=C6[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ks.warn(o.join(" "));return}rs(new Rr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O6="firebase-heartbeat-database",V6=1,ju="firebase-heartbeat-store";let xg=null;function kP(){return xg||(xg=J3(O6,V6,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ju)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ci.create("idb-open",{originalErrorMessage:t.message})})),xg}async function L6(t){try{const n=(await kP()).transaction(ju),r=await n.objectStore(ju).get(DP(t));return await n.done,r}catch(e){if(e instanceof kr)ks.warn(e.message);else{const n=Ci.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ks.warn(n.message)}}}async function II(t,e){try{const r=(await kP()).transaction(ju,"readwrite");await r.objectStore(ju).put(e,DP(t)),await r.done}catch(n){if(n instanceof kr)ks.warn(n.message);else{const r=Ci.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ks.warn(r.message)}}}function DP(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M6=1024,F6=30;class U6{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new B6(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=SI();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>F6){const o=$6(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ks.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=SI(),{heartbeatsToSend:r,unsentEntries:s}=j6(this._heartbeatsCache.heartbeats),i=jf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return ks.warn(n),""}}}function SI(){return new Date().toISOString().substring(0,10)}function j6(t,e=M6){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),AI(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),AI(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class B6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return fw()?P3().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await L6(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return II(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return II(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function AI(t){return jf(JSON.stringify({version:2,heartbeats:t})).length}function $6(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z6(t){rs(new Rr("platform-logger",e=>new t6(e),"PRIVATE")),rs(new Rr("heartbeat",e=>new U6(e),"PRIVATE")),qn(lv,EI,t),qn(lv,EI,"esm2020"),qn("fire-js","")}z6("");function NP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const q6=NP,OP=new Hl("auth","Firebase",NP());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $f=new Gp("@firebase/auth");function H6(t,...e){$f.logLevel<=Ce.WARN&&$f.warn(`Auth (${gd}): ${t}`,...e)}function Wh(t,...e){$f.logLevel<=Ce.ERROR&&$f.error(`Auth (${gd}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ta(t,...e){throw gw(t,...e)}function mw(t,...e){return gw(t,...e)}function VP(t,e,n){const r={...q6(),[e]:n};return new Hl("auth","Firebase",r).create(e,{appName:t.name})}function ki(t){return VP(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function gw(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return OP.create(t,...e)}function ke(t,e,...n){if(!t)throw gw(e,...n)}function vs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Wh(e),new Error(e)}function zf(t,e){t||vs(e)}function W6(){return bI()==="http:"||bI()==="https:"}function bI(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(W6()||b3()||"connection"in navigator)?navigator.onLine:!0}function G6(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e,n){this.shortDelay=e,this.longDelay=n,zf(n>e,"Short delay should be less than long delay!"),this.isMobile=S3()||x3()}get(){return K6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q6(t,e){zf(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X6=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],J6=new yd(3e4,6e4);function to(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Fs(t,e,n,r,s={}){return MP(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=bP({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:l,...i};return A3()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&Ms(t.emulatorConfig.host)&&(c.credentials="include"),LP.fetch()(await FP(t,t.config.apiHost,n,a),c)})}async function MP(t,e,n){t._canInitEmulator=!1;const r={...Y6,...e};try{const s=new ej(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw mh(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw mh(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw mh(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw mh(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw VP(t,d,c);ta(t,d)}}catch(s){if(s instanceof kr)throw s;ta(t,"network-request-failed",{message:String(s)})}}async function Yp(t,e,n,r,s={}){const i=await Fs(t,e,n,r,s);return"mfaPendingCredential"in i&&ta(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function FP(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?Q6(t.config,s):`${t.config.apiScheme}://${s}`;return X6.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function Z6(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ej{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(mw(this.auth,"network-request-failed")),J6.get())})}}function mh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=mw(t,e,r);return s.customData._tokenResponse=n,s}function xI(t){return t!==void 0&&t.enterprise!==void 0}class tj{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Z6(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function nj(t,e){return Fs(t,"GET","/v2/recaptchaConfig",to(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rj(t,e){return Fs(t,"POST","/v1/accounts:delete",e)}async function qf(t,e){return Fs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function su(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function sj(t,e=!1){const n=We(t),r=await n.getIdToken(e),s=yw(r);ke(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:su(Rg(s.auth_time)),issuedAtTime:su(Rg(s.iat)),expirationTime:su(Rg(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Rg(t){return Number(t)*1e3}function yw(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Wh("JWT malformed, contained fewer than 3 sections"),null;try{const s=vP(n);return s?JSON.parse(s):(Wh("Failed to decode base64 JWT payload"),null)}catch(s){return Wh("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function RI(t){const e=yw(t);return ke(e,"internal-error"),ke(typeof e.exp<"u","internal-error"),ke(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bu(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof kr&&ij(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function ij({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=su(this.lastLoginAt),this.creationTime=su(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hf(t){var h;const e=t.auth,n=await t.getIdToken(),r=await Bu(t,qf(e,{idToken:n}));ke(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(h=s.providerUserInfo)!=null&&h.length?UP(s.providerUserInfo):[],o=lj(t.providerData,i),a=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),c=a?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new dv(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,d)}async function aj(t){const e=We(t);await Hf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function lj(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function UP(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cj(t,e){const n=await MP(t,{},async()=>{const r=bP({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await FP(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&Ms(t.emulatorConfig.host)&&(l.credentials="include"),LP.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function uj(t,e){return Fs(t,"POST","/v2/accounts:revokeToken",to(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ke(e.idToken,"internal-error"),ke(typeof e.idToken<"u","internal-error"),ke(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):RI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ke(e.length!==0,"internal-error");const n=RI(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ke(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await cj(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Xa;return r&&(ke(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ke(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ke(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Xa,this.toJSON())}_performRefresh(){return vs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zs(t,e){ke(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class vr{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new oj(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new dv(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Bu(this,this.stsTokenManager.getToken(this.auth,e));return ke(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return sj(this,e)}reload(){return aj(this)}_assign(e){this!==e&&(ke(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new vr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Hf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Mn(this.auth.app))return Promise.reject(ki(this.auth));const e=await this.getIdToken();return await Bu(this,rj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,c=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:h,emailVerified:f,isAnonymous:p,providerData:E,stsTokenManager:g}=n;ke(h&&g,e,"internal-error");const y=Xa.fromJSON(this.name,g);ke(typeof h=="string",e,"internal-error"),Zs(r,e.name),Zs(s,e.name),ke(typeof f=="boolean",e,"internal-error"),ke(typeof p=="boolean",e,"internal-error"),Zs(i,e.name),Zs(o,e.name),Zs(a,e.name),Zs(l,e.name),Zs(c,e.name),Zs(d,e.name);const _=new vr({uid:h,auth:e,email:s,emailVerified:f,displayName:r,isAnonymous:p,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:y,createdAt:c,lastLoginAt:d});return E&&Array.isArray(E)&&(_.providerData=E.map(w=>({...w}))),l&&(_._redirectEventId=l),_}static async _fromIdTokenResponse(e,n,r=!1){const s=new Xa;s.updateFromServerResponse(n);const i=new vr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Hf(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ke(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?UP(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new Xa;a.updateFromIdToken(r);const l=new vr({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new dv(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PI=new Map;function Ro(t){zf(t instanceof Function,"Expected a class definition");let e=PI.get(t);return e?(zf(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,PI.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}jP.type="NONE";const hv=jP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pg(t,e,n){return`firebase:${t}:${e}:${n}`}class Ja{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Pg(this.userKey,s.apiKey,i),this.fullPersistenceKey=Pg("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await qf(this.auth,{idToken:e}).catch(()=>{});return n?vr._fromGetAccountInfoResponse(this.auth,n,e):null}return vr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ja(Ro(hv),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Ro(hv);const o=Pg(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){let h;if(typeof d=="string"){const f=await qf(e,{idToken:d}).catch(()=>{});if(!f)break;h=await vr._fromGetAccountInfoResponse(e,f,d)}else h=vr._fromJSON(e,d);c!==i&&(a=h),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Ja(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new Ja(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CI(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(BP(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(dj(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(zP(e))return"Blackberry";if(qP(e))return"Webos";if(hj(e))return"Safari";if((e.includes("chrome/")||fj(e))&&!e.includes("edge/"))return"Chrome";if($P(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function dj(t=Gt()){return/firefox\//i.test(t)}function hj(t=Gt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function fj(t=Gt()){return/crios\//i.test(t)}function BP(t=Gt()){return/iemobile/i.test(t)}function $P(t=Gt()){return/android/i.test(t)}function zP(t=Gt()){return/blackberry/i.test(t)}function qP(t=Gt()){return/webos/i.test(t)}function pj(t=Gt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function mj(){return R3()&&document.documentMode===10}function gj(t=Gt()){return pj(t)||$P(t)||qP(t)||zP(t)||/windows phone/i.test(t)||BP(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HP(t,e=[]){let n;switch(t){case"Browser":n=CI(Gt());break;case"Worker":n=`${CI(Gt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${gd}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vj(t,e={}){return Fs(t,"GET","/v2/passwordPolicy",to(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _j=6;class wj{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??_j,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ej{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new kI(this),this.idTokenSubscription=new kI(this),this.beforeStateQueue=new yj(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=OP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ro(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Ja.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await qf(this,{idToken:e}),r=await vr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Mn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ke(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Hf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=G6()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Mn(this.app))return Promise.reject(ki(this));const n=e?We(e):null;return n&&ke(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ke(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Mn(this.app)?Promise.reject(ki(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Mn(this.app)?Promise.reject(ki(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ro(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await vj(this),n=new wj(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Hl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await uj(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ro(e)||this._popupRedirectResolver;ke(n,this,"argument-error"),this.redirectPersistenceManager=await Ja.create(this,[Ro(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ke(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=HP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Mn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&H6(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Wl(t){return We(t)}class kI{constructor(e){this.auth=e,this.observer=null,this.addObserver=N3(n=>this.observer=n)}get next(){return ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vw={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Tj(t){vw=t}function Ij(t){return vw.loadJS(t)}function Sj(){return vw.recaptchaEnterpriseScript}class Aj{constructor(){this.enterprise=new bj}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class bj{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const xj="recaptcha-enterprise",WP="NO_RECAPTCHA";class Rj{constructor(e){this.type=xj,this.auth=Wl(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{nj(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new tj(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;xI(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(WP)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Aj().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&xI(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=Sj();l.length!==0&&(l+=a),Ij(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function DI(t,e,n,r=!1,s=!1){const i=new Rj(t);let o;if(s)o=WP;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Wf(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await DI(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await DI(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pj(t,e){const n=Qp(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(yl(i,e??{}))return s;ta(s,"already-initialized")}return n.initialize({options:e})}function Cj(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ro);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return vs("not implemented")}_getIdTokenResponse(e){return vs("not implemented")}_linkToIdToken(e,n){return vs("not implemented")}_getReauthenticationResolver(e){return vs("not implemented")}}async function Dj(t,e){return Fs(t,"POST","/v1/accounts:update",e)}async function Nj(t,e){return Fs(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oj(t,e){return Yp(t,"POST","/v1/accounts:signInWithPassword",to(t,e))}async function Vj(t,e){return Fs(t,"POST","/v1/accounts:sendOobCode",to(t,e))}async function Lj(t,e){return Vj(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mj(t,e){return Yp(t,"POST","/v1/accounts:signInWithEmailLink",to(t,e))}async function Fj(t,e){return Yp(t,"POST","/v1/accounts:signInWithEmailLink",to(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u extends kj{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new $u(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new $u(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Wf(e,n,"signInWithPassword",Oj);case"emailLink":return Mj(e,{email:this._email,oobCode:this._password});default:ta(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Wf(e,r,"signUpPassword",Nj);case"emailLink":return Fj(e,{idToken:n,email:this._email,oobCode:this._password});default:ta(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uj(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function jj(t){const e=Uc(jc(t)).link,n=e?Uc(jc(e)).deep_link_id:null,r=Uc(jc(t)).deep_link_id;return(r?Uc(jc(r)).link:null)||r||n||e||t}class _w{constructor(e){const n=Uc(jc(e)),r=n.apiKey??null,s=n.oobCode??null,i=Uj(n.mode??null);ke(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=jj(e);try{return new _w(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(){this.providerId=Kl.PROVIDER_ID}static credential(e,n){return $u._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=_w.parseLink(n);return ke(r,"argument-error"),$u._fromEmailAndCode(e,r.code,r.tenantId)}}Kl.PROVIDER_ID="password";Kl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Kl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bj(t,e){return Yp(t,"POST","/v1/accounts:signUp",to(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await vr._fromIdTokenResponse(e,r,s),o=NI(r);return new vl({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=NI(r);return new vl({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function NI(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf extends kr{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Kf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Kf(e,n,r,s)}}function KP(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Kf._fromErrorAndOperation(t,i,e,r):i})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $j(t,e,n=!1){const{auth:r}=t;if(Mn(r.app))return Promise.reject(ki(r));const s="reauthenticate";try{const i=await Bu(t,KP(r,s,e,t),n);ke(i.idToken,r,"internal-error");const o=yw(i.idToken);ke(o,r,"internal-error");const{sub:a}=o;return ke(t.uid===a,r,"user-mismatch"),vl._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&ta(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zj(t,e,n=!1){if(Mn(t.app))return Promise.reject(ki(t));const r="signIn",s=await KP(t,r,e),i=await vl._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function qj(t,e){return zj(Wl(t),e)}async function iq(t,e){return $j(We(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GP(t){const e=Wl(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Hj(t,e,n){const r=Wl(t);await Wf(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",Lj)}async function OI(t,e,n){if(Mn(t.app))return Promise.reject(ki(t));const r=Wl(t),o=await Wf(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Bj).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&GP(t),l}),a=await vl._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function Wj(t,e,n){return Mn(t.app)?Promise.reject(ki(t)):qj(We(t),Kl.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&GP(t),r})}function oq(t,e){return Kj(We(t),null,e)}async function Kj(t,e,n){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(i.password=n);const o=await Bu(t,Dj(r,i));await t._updateTokensIfNecessary(o,!0)}function Gj(t,e,n,r){return We(t).onAuthStateChanged(e,n,r)}function VI(t){return We(t).signOut()}const LI="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(LI,"1"),this.storage.removeItem(LI),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qj=1e3,Yj=10;class YP extends QP{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=gj(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);mj()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Yj):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Qj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}YP.type="LOCAL";const Xj=YP;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jj extends QP{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Jj.type="SESSION";new yd(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new yd(2e3,1e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new yd(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new yd(5e3,15e3);var MI="@firebase/auth",FI="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e5(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function t5(t){rs(new Rr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ke(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:HP(t)},c=new Ej(r,s,i,l);return Cj(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),rs(new Rr("auth-internal",e=>{const n=Wl(e.getProvider("auth").getImmediate());return(r=>new Zj(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),qn(MI,FI,e5(t)),qn(MI,FI,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n5=5*60;w3("authIdTokenMaxAge");function r5(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}Tj({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=mw("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",r5().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});t5("Browser");var s5="firebase",i5="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qn(s5,i5,"app");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o5=new Map,a5={activated:!1,tokenObservers:[]},l5={initialized:!1,enabled:!1};function Pr(t){return o5.get(t)||{...a5}}function XP(){return l5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c5="https://content-firebaseappcheck.googleapis.com/v1";const u5="exchangeDebugToken",UI={RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},aq=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d5{constructor(e,n,r,s,i){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=s,s>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new iv,this.pending.promise.catch(n=>{}),await h5(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new iv,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function h5(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f5={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},vi=new Hl("appCheck","AppCheck",f5);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JP(t){if(!Pr(t).activated)throw vi.create("use-before-activation",{appName:t.name})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZP({url:t,body:e},n){const r={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){const h=await s.getHeartbeatsHeader();h&&(r["X-Firebase-Client"]=h)}const i={method:"POST",body:JSON.stringify(e),headers:r};let o;try{o=await fetch(t,i)}catch(h){throw vi.create("fetch-network-error",{originalErrorMessage:h==null?void 0:h.message})}if(o.status!==200)throw vi.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(h){throw vi.create("fetch-parse-error",{originalErrorMessage:h==null?void 0:h.message})}const l=a.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw vi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const c=Number(l[1])*1e3,d=Date.now();return{token:a.token,expireTimeMillis:d+c,issuedAtTimeMillis:d}}function eC(t,e){const{projectId:n,appId:r,apiKey:s}=t.options;return{url:`${c5}/projects/${n}/apps/${r}:${u5}?key=${s}`,body:{debug_token:e}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p5="firebase-app-check-database",m5=1,fv="firebase-app-check-store";let gh=null;function g5(){return gh||(gh=new Promise((t,e)=>{try{const n=indexedDB.open(p5,m5);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var s;e(vi.create("storage-open",{originalErrorMessage:(s=r.target.error)==null?void 0:s.message}))},n.onupgradeneeded=r=>{const s=r.target.result;switch(r.oldVersion){case 0:s.createObjectStore(fv,{keyPath:"compositeKey"})}}}catch(n){e(vi.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),gh)}function y5(t,e){return v5(_5(t),e)}async function v5(t,e){const r=(await g5()).transaction(fv,"readwrite"),i=r.objectStore(fv).put({compositeKey:t,value:e});return new Promise((o,a)=>{i.onsuccess=l=>{o()},r.onerror=l=>{var c;a(vi.create("storage-set",{originalErrorMessage:(c=l.target.error)==null?void 0:c.message}))}})}function _5(t){return`${t.options.appId}-${t.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bc=new Gp("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cg(t,e){return fw()?y5(t,e).catch(n=>{Bc.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tC(){return XP().enabled}async function nC(){const t=XP();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w5={error:"UNKNOWN_ERROR"};function E5(t){return dw.encodeString(JSON.stringify(t),!1)}async function pv(t,e=!1,n=!1){const r=t.app;JP(r);const s=Pr(r);let i=s.token,o;if(i&&!$c(i)&&(s.token=void 0,i=void 0),!i){const c=await s.cachedTokenPromise;c&&($c(c)?i=c:await Cg(r,void 0))}if(!e&&i&&$c(i))return{token:i.token};let a=!1;if(tC())try{s.exchangeTokenPromise||(s.exchangeTokenPromise=ZP(eC(r,await nC()),t.heartbeatServiceProvider).finally(()=>{s.exchangeTokenPromise=void 0}),a=!0);const c=await s.exchangeTokenPromise;return await Cg(r,c),s.token=c,{token:c.token}}catch(c){return c.code==="appCheck/throttled"||c.code==="appCheck/initial-throttle"?Bc.warn(c.message):n&&Bc.error(c),kg(c)}try{s.exchangeTokenPromise||(s.exchangeTokenPromise=s.provider.getToken().finally(()=>{s.exchangeTokenPromise=void 0}),a=!0),i=await Pr(r).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"||c.code==="appCheck/initial-throttle"?Bc.warn(c.message):n&&Bc.error(c),o=c}let l;return i?o?$c(i)?l={token:i.token,internalError:o}:l=kg(o):(l={token:i.token},s.token=i,await Cg(r,i)):l=kg(o),a&&A5(r,l),l}async function T5(t){const e=t.app;JP(e);const{provider:n}=Pr(e);if(tC()){const r=await nC(),{token:s}=await ZP(eC(e,r),t.heartbeatServiceProvider);return{token:s}}else{const{token:r}=await n.getToken();return{token:r}}}function I5(t,e,n,r){const{app:s}=t,i=Pr(s),o={next:n,error:r,type:e};if(i.tokenObservers=[...i.tokenObservers,o],i.token&&$c(i.token)){const a=i.token;Promise.resolve().then(()=>{n({token:a.token}),jI(t)}).catch(()=>{})}i.cachedTokenPromise.then(()=>jI(t))}function rC(t,e){const n=Pr(t),r=n.tokenObservers.filter(s=>s.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function jI(t){const{app:e}=t,n=Pr(e);let r=n.tokenRefresher;r||(r=S5(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function S5(t){const{app:e}=t;return new d5(async()=>{const n=Pr(e);let r;if(n.token?r=await pv(t,!0):r=await pv(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=Pr(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const s=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,s),Math.max(0,r-Date.now())}else return 0},UI.RETRIAL_MIN_WAIT,UI.RETRIAL_MAX_WAIT)}function A5(t,e){const n=Pr(t).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function $c(t){return t.expireTimeMillis-Date.now()>0}function kg(t){return{token:E5(w5),error:t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b5{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=Pr(this.app);for(const n of e)rC(this.app,n.next);return Promise.resolve()}}function x5(t,e){return new b5(t,e)}function R5(t){return{getToken:e=>pv(t,e),getLimitedUseToken:()=>T5(t),addTokenListener:e=>I5(t,"INTERNAL",e),removeTokenListener:e=>rC(t.app,e)}}const P5="@firebase/app-check",C5="0.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k5="app-check",BI="app-check-internal";function D5(){rs(new Rr(k5,t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return x5(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(BI).initialize()})),rs(new Rr(BI,t=>{const e=t.getProvider("app-check").getImmediate();return R5(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),qn(P5,C5)}D5();var $I=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Di,sC;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,I){function b(){}b.prototype=I.prototype,S.F=I.prototype,S.prototype=new b,S.prototype.constructor=S,S.D=function(D,P,N){for(var k=Array(arguments.length-2),q=2;q<arguments.length;q++)k[q-2]=arguments[q];return I.prototype[P].apply(D,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,I,b){b||(b=0);const D=Array(16);if(typeof I=="string")for(var P=0;P<16;++P)D[P]=I.charCodeAt(b++)|I.charCodeAt(b++)<<8|I.charCodeAt(b++)<<16|I.charCodeAt(b++)<<24;else for(P=0;P<16;++P)D[P]=I[b++]|I[b++]<<8|I[b++]<<16|I[b++]<<24;I=S.g[0],b=S.g[1],P=S.g[2];let N=S.g[3],k;k=I+(N^b&(P^N))+D[0]+3614090360&4294967295,I=b+(k<<7&4294967295|k>>>25),k=N+(P^I&(b^P))+D[1]+3905402710&4294967295,N=I+(k<<12&4294967295|k>>>20),k=P+(b^N&(I^b))+D[2]+606105819&4294967295,P=N+(k<<17&4294967295|k>>>15),k=b+(I^P&(N^I))+D[3]+3250441966&4294967295,b=P+(k<<22&4294967295|k>>>10),k=I+(N^b&(P^N))+D[4]+4118548399&4294967295,I=b+(k<<7&4294967295|k>>>25),k=N+(P^I&(b^P))+D[5]+1200080426&4294967295,N=I+(k<<12&4294967295|k>>>20),k=P+(b^N&(I^b))+D[6]+2821735955&4294967295,P=N+(k<<17&4294967295|k>>>15),k=b+(I^P&(N^I))+D[7]+4249261313&4294967295,b=P+(k<<22&4294967295|k>>>10),k=I+(N^b&(P^N))+D[8]+1770035416&4294967295,I=b+(k<<7&4294967295|k>>>25),k=N+(P^I&(b^P))+D[9]+2336552879&4294967295,N=I+(k<<12&4294967295|k>>>20),k=P+(b^N&(I^b))+D[10]+4294925233&4294967295,P=N+(k<<17&4294967295|k>>>15),k=b+(I^P&(N^I))+D[11]+2304563134&4294967295,b=P+(k<<22&4294967295|k>>>10),k=I+(N^b&(P^N))+D[12]+1804603682&4294967295,I=b+(k<<7&4294967295|k>>>25),k=N+(P^I&(b^P))+D[13]+4254626195&4294967295,N=I+(k<<12&4294967295|k>>>20),k=P+(b^N&(I^b))+D[14]+2792965006&4294967295,P=N+(k<<17&4294967295|k>>>15),k=b+(I^P&(N^I))+D[15]+1236535329&4294967295,b=P+(k<<22&4294967295|k>>>10),k=I+(P^N&(b^P))+D[1]+4129170786&4294967295,I=b+(k<<5&4294967295|k>>>27),k=N+(b^P&(I^b))+D[6]+3225465664&4294967295,N=I+(k<<9&4294967295|k>>>23),k=P+(I^b&(N^I))+D[11]+643717713&4294967295,P=N+(k<<14&4294967295|k>>>18),k=b+(N^I&(P^N))+D[0]+3921069994&4294967295,b=P+(k<<20&4294967295|k>>>12),k=I+(P^N&(b^P))+D[5]+3593408605&4294967295,I=b+(k<<5&4294967295|k>>>27),k=N+(b^P&(I^b))+D[10]+38016083&4294967295,N=I+(k<<9&4294967295|k>>>23),k=P+(I^b&(N^I))+D[15]+3634488961&4294967295,P=N+(k<<14&4294967295|k>>>18),k=b+(N^I&(P^N))+D[4]+3889429448&4294967295,b=P+(k<<20&4294967295|k>>>12),k=I+(P^N&(b^P))+D[9]+568446438&4294967295,I=b+(k<<5&4294967295|k>>>27),k=N+(b^P&(I^b))+D[14]+3275163606&4294967295,N=I+(k<<9&4294967295|k>>>23),k=P+(I^b&(N^I))+D[3]+4107603335&4294967295,P=N+(k<<14&4294967295|k>>>18),k=b+(N^I&(P^N))+D[8]+1163531501&4294967295,b=P+(k<<20&4294967295|k>>>12),k=I+(P^N&(b^P))+D[13]+2850285829&4294967295,I=b+(k<<5&4294967295|k>>>27),k=N+(b^P&(I^b))+D[2]+4243563512&4294967295,N=I+(k<<9&4294967295|k>>>23),k=P+(I^b&(N^I))+D[7]+1735328473&4294967295,P=N+(k<<14&4294967295|k>>>18),k=b+(N^I&(P^N))+D[12]+2368359562&4294967295,b=P+(k<<20&4294967295|k>>>12),k=I+(b^P^N)+D[5]+4294588738&4294967295,I=b+(k<<4&4294967295|k>>>28),k=N+(I^b^P)+D[8]+2272392833&4294967295,N=I+(k<<11&4294967295|k>>>21),k=P+(N^I^b)+D[11]+1839030562&4294967295,P=N+(k<<16&4294967295|k>>>16),k=b+(P^N^I)+D[14]+4259657740&4294967295,b=P+(k<<23&4294967295|k>>>9),k=I+(b^P^N)+D[1]+2763975236&4294967295,I=b+(k<<4&4294967295|k>>>28),k=N+(I^b^P)+D[4]+1272893353&4294967295,N=I+(k<<11&4294967295|k>>>21),k=P+(N^I^b)+D[7]+4139469664&4294967295,P=N+(k<<16&4294967295|k>>>16),k=b+(P^N^I)+D[10]+3200236656&4294967295,b=P+(k<<23&4294967295|k>>>9),k=I+(b^P^N)+D[13]+681279174&4294967295,I=b+(k<<4&4294967295|k>>>28),k=N+(I^b^P)+D[0]+3936430074&4294967295,N=I+(k<<11&4294967295|k>>>21),k=P+(N^I^b)+D[3]+3572445317&4294967295,P=N+(k<<16&4294967295|k>>>16),k=b+(P^N^I)+D[6]+76029189&4294967295,b=P+(k<<23&4294967295|k>>>9),k=I+(b^P^N)+D[9]+3654602809&4294967295,I=b+(k<<4&4294967295|k>>>28),k=N+(I^b^P)+D[12]+3873151461&4294967295,N=I+(k<<11&4294967295|k>>>21),k=P+(N^I^b)+D[15]+530742520&4294967295,P=N+(k<<16&4294967295|k>>>16),k=b+(P^N^I)+D[2]+3299628645&4294967295,b=P+(k<<23&4294967295|k>>>9),k=I+(P^(b|~N))+D[0]+4096336452&4294967295,I=b+(k<<6&4294967295|k>>>26),k=N+(b^(I|~P))+D[7]+1126891415&4294967295,N=I+(k<<10&4294967295|k>>>22),k=P+(I^(N|~b))+D[14]+2878612391&4294967295,P=N+(k<<15&4294967295|k>>>17),k=b+(N^(P|~I))+D[5]+4237533241&4294967295,b=P+(k<<21&4294967295|k>>>11),k=I+(P^(b|~N))+D[12]+1700485571&4294967295,I=b+(k<<6&4294967295|k>>>26),k=N+(b^(I|~P))+D[3]+2399980690&4294967295,N=I+(k<<10&4294967295|k>>>22),k=P+(I^(N|~b))+D[10]+4293915773&4294967295,P=N+(k<<15&4294967295|k>>>17),k=b+(N^(P|~I))+D[1]+2240044497&4294967295,b=P+(k<<21&4294967295|k>>>11),k=I+(P^(b|~N))+D[8]+1873313359&4294967295,I=b+(k<<6&4294967295|k>>>26),k=N+(b^(I|~P))+D[15]+4264355552&4294967295,N=I+(k<<10&4294967295|k>>>22),k=P+(I^(N|~b))+D[6]+2734768916&4294967295,P=N+(k<<15&4294967295|k>>>17),k=b+(N^(P|~I))+D[13]+1309151649&4294967295,b=P+(k<<21&4294967295|k>>>11),k=I+(P^(b|~N))+D[4]+4149444226&4294967295,I=b+(k<<6&4294967295|k>>>26),k=N+(b^(I|~P))+D[11]+3174756917&4294967295,N=I+(k<<10&4294967295|k>>>22),k=P+(I^(N|~b))+D[2]+718787259&4294967295,P=N+(k<<15&4294967295|k>>>17),k=b+(N^(P|~I))+D[9]+3951481745&4294967295,S.g[0]=S.g[0]+I&4294967295,S.g[1]=S.g[1]+(P+(k<<21&4294967295|k>>>11))&4294967295,S.g[2]=S.g[2]+P&4294967295,S.g[3]=S.g[3]+N&4294967295}r.prototype.v=function(S,I){I===void 0&&(I=S.length);const b=I-this.blockSize,D=this.C;let P=this.h,N=0;for(;N<I;){if(P==0)for(;N<=b;)s(this,S,N),N+=this.blockSize;if(typeof S=="string"){for(;N<I;)if(D[P++]=S.charCodeAt(N++),P==this.blockSize){s(this,D),P=0;break}}else for(;N<I;)if(D[P++]=S[N++],P==this.blockSize){s(this,D),P=0;break}}this.h=P,this.o+=I},r.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var I=1;I<S.length-8;++I)S[I]=0;I=this.o*8;for(var b=S.length-8;b<S.length;++b)S[b]=I&255,I/=256;for(this.v(S),S=Array(16),I=0,b=0;b<4;++b)for(let D=0;D<32;D+=8)S[I++]=this.g[b]>>>D&255;return S};function i(S,I){var b=a;return Object.prototype.hasOwnProperty.call(b,S)?b[S]:b[S]=I(S)}function o(S,I){this.h=I;const b=[];let D=!0;for(let P=S.length-1;P>=0;P--){const N=S[P]|0;D&&N==I||(b[P]=N,D=!1)}this.g=b}var a={};function l(S){return-128<=S&&S<128?i(S,function(I){return new o([I|0],I<0?-1:0)}):new o([S|0],S<0?-1:0)}function c(S){if(isNaN(S)||!isFinite(S))return h;if(S<0)return y(c(-S));const I=[];let b=1;for(let D=0;S>=b;D++)I[D]=S/b|0,b*=4294967296;return new o(I,0)}function d(S,I){if(S.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(S.charAt(0)=="-")return y(d(S.substring(1),I));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const b=c(Math.pow(I,8));let D=h;for(let N=0;N<S.length;N+=8){var P=Math.min(8,S.length-N);const k=parseInt(S.substring(N,N+P),I);P<8?(P=c(Math.pow(I,P)),D=D.j(P).add(c(k))):(D=D.j(b),D=D.add(c(k)))}return D}var h=l(0),f=l(1),p=l(16777216);t=o.prototype,t.m=function(){if(g(this))return-y(this).m();let S=0,I=1;for(let b=0;b<this.g.length;b++){const D=this.i(b);S+=(D>=0?D:4294967296+D)*I,I*=4294967296}return S},t.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(E(this))return"0";if(g(this))return"-"+y(this).toString(S);const I=c(Math.pow(S,6));var b=this;let D="";for(;;){const P=R(b,I).g;b=_(b,P.j(I));let N=((b.g.length>0?b.g[0]:b.h)>>>0).toString(S);if(b=P,E(b))return N+D;for(;N.length<6;)N="0"+N;D=N+D}},t.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function E(S){if(S.h!=0)return!1;for(let I=0;I<S.g.length;I++)if(S.g[I]!=0)return!1;return!0}function g(S){return S.h==-1}t.l=function(S){return S=_(this,S),g(S)?-1:E(S)?0:1};function y(S){const I=S.g.length,b=[];for(let D=0;D<I;D++)b[D]=~S.g[D];return new o(b,~S.h).add(f)}t.abs=function(){return g(this)?y(this):this},t.add=function(S){const I=Math.max(this.g.length,S.g.length),b=[];let D=0;for(let P=0;P<=I;P++){let N=D+(this.i(P)&65535)+(S.i(P)&65535),k=(N>>>16)+(this.i(P)>>>16)+(S.i(P)>>>16);D=k>>>16,N&=65535,k&=65535,b[P]=k<<16|N}return new o(b,b[b.length-1]&-2147483648?-1:0)};function _(S,I){return S.add(y(I))}t.j=function(S){if(E(this)||E(S))return h;if(g(this))return g(S)?y(this).j(y(S)):y(y(this).j(S));if(g(S))return y(this.j(y(S)));if(this.l(p)<0&&S.l(p)<0)return c(this.m()*S.m());const I=this.g.length+S.g.length,b=[];for(var D=0;D<2*I;D++)b[D]=0;for(D=0;D<this.g.length;D++)for(let P=0;P<S.g.length;P++){const N=this.i(D)>>>16,k=this.i(D)&65535,q=S.i(P)>>>16,Z=S.i(P)&65535;b[2*D+2*P]+=k*Z,w(b,2*D+2*P),b[2*D+2*P+1]+=N*Z,w(b,2*D+2*P+1),b[2*D+2*P+1]+=k*q,w(b,2*D+2*P+1),b[2*D+2*P+2]+=N*q,w(b,2*D+2*P+2)}for(S=0;S<I;S++)b[S]=b[2*S+1]<<16|b[2*S];for(S=I;S<2*I;S++)b[S]=0;return new o(b,0)};function w(S,I){for(;(S[I]&65535)!=S[I];)S[I+1]+=S[I]>>>16,S[I]&=65535,I++}function T(S,I){this.g=S,this.h=I}function R(S,I){if(E(I))throw Error("division by zero");if(E(S))return new T(h,h);if(g(S))return I=R(y(S),I),new T(y(I.g),y(I.h));if(g(I))return I=R(S,y(I)),new T(y(I.g),I.h);if(S.g.length>30){if(g(S)||g(I))throw Error("slowDivide_ only works with positive integers.");for(var b=f,D=I;D.l(S)<=0;)b=O(b),D=O(D);var P=V(b,1),N=V(D,1);for(D=V(D,2),b=V(b,2);!E(D);){var k=N.add(D);k.l(S)<=0&&(P=P.add(b),N=k),D=V(D,1),b=V(b,1)}return I=_(S,P.j(I)),new T(P,I)}for(P=h;S.l(I)>=0;){for(b=Math.max(1,Math.floor(S.m()/I.m())),D=Math.ceil(Math.log(b)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),N=c(b),k=N.j(I);g(k)||k.l(S)>0;)b-=D,N=c(b),k=N.j(I);E(N)&&(N=f),P=P.add(N),S=_(S,k)}return new T(P,S)}t.B=function(S){return R(this,S).h},t.and=function(S){const I=Math.max(this.g.length,S.g.length),b=[];for(let D=0;D<I;D++)b[D]=this.i(D)&S.i(D);return new o(b,this.h&S.h)},t.or=function(S){const I=Math.max(this.g.length,S.g.length),b=[];for(let D=0;D<I;D++)b[D]=this.i(D)|S.i(D);return new o(b,this.h|S.h)},t.xor=function(S){const I=Math.max(this.g.length,S.g.length),b=[];for(let D=0;D<I;D++)b[D]=this.i(D)^S.i(D);return new o(b,this.h^S.h)};function O(S){const I=S.g.length+1,b=[];for(let D=0;D<I;D++)b[D]=S.i(D)<<1|S.i(D-1)>>>31;return new o(b,S.h)}function V(S,I){const b=I>>5;I%=32;const D=S.g.length-b,P=[];for(let N=0;N<D;N++)P[N]=I>0?S.i(N+b)>>>I|S.i(N+b+1)<<32-I:S.i(N+b);return new o(P,S.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,sC=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,Di=o}).apply(typeof $I<"u"?$I:typeof self<"u"?self:typeof window<"u"?window:{});var yh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var iC,zc,oC,Kh,mv,aC,lC,cC;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof yh=="object"&&yh];for(var m=0;m<u.length;++m){var v=u[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=n(this);function s(u,m){if(m)e:{var v=r;u=u.split(".");for(var C=0;C<u.length-1;C++){var M=u[C];if(!(M in v))break e;v=v[M]}u=u[u.length-1],C=v[u],m=m(C),m!=C&&m!=null&&e(v,u,{configurable:!0,writable:!0,value:m})}}s("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(u){return u||function(m){var v=[],C;for(C in m)Object.prototype.hasOwnProperty.call(m,C)&&v.push([C,m[C]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function l(u,m,v){return u.call.apply(u.bind,arguments)}function c(u,m,v){return c=l,c.apply(null,arguments)}function d(u,m){var v=Array.prototype.slice.call(arguments,1);return function(){var C=v.slice();return C.push.apply(C,arguments),u.apply(this,C)}}function h(u,m){function v(){}v.prototype=m.prototype,u.Z=m.prototype,u.prototype=new v,u.prototype.constructor=u,u.Ob=function(C,M,j){for(var X=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)X[Ae-2]=arguments[Ae];return m.prototype[M].apply(C,X)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function p(u){const m=u.length;if(m>0){const v=Array(m);for(let C=0;C<m;C++)v[C]=u[C];return v}return[]}function E(u,m){for(let C=1;C<arguments.length;C++){const M=arguments[C];var v=typeof M;if(v=v!="object"?v:M?Array.isArray(M)?"array":v:"null",v=="array"||v=="object"&&typeof M.length=="number"){v=u.length||0;const j=M.length||0;u.length=v+j;for(let X=0;X<j;X++)u[v+X]=M[X]}else u.push(M)}}class g{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function y(u){o.setTimeout(()=>{throw u},0)}function _(){var u=S;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class w{constructor(){this.h=this.g=null}add(m,v){const C=T.get();C.set(m,v),this.h?this.h.next=C:this.g=C,this.h=C}}var T=new g(()=>new R,u=>u.reset());class R{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let O,V=!1,S=new w,I=()=>{const u=Promise.resolve(void 0);O=()=>{u.then(b)}};function b(){for(var u;u=_();){try{u.h.call(u.g)}catch(v){y(v)}var m=T;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}V=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var N=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};o.addEventListener("test",v,m),o.removeEventListener("test",v,m)}catch{}return u}();function k(u){return/^[\s\xa0]*$/.test(u)}function q(u,m){P.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}h(q,P),q.prototype.init=function(u,m){const v=this.type=u.type,C=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(v=="mouseover"?m=u.fromElement:v=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&q.Z.h.call(this)},q.prototype.h=function(){q.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Z="closure_listenable_"+(Math.random()*1e6|0),ie=0;function Y(u,m,v,C,M){this.listener=u,this.proxy=null,this.src=m,this.type=v,this.capture=!!C,this.ha=M,this.key=++ie,this.da=this.fa=!1}function F(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function U(u,m,v){for(const C in u)m.call(v,u[C],C,u)}function K(u,m){for(const v in u)m.call(void 0,u[v],v,u)}function ce(u){const m={};for(const v in u)m[v]=u[v];return m}const ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function oe(u,m){let v,C;for(let M=1;M<arguments.length;M++){C=arguments[M];for(v in C)u[v]=C[v];for(let j=0;j<ee.length;j++)v=ee[j],Object.prototype.hasOwnProperty.call(C,v)&&(u[v]=C[v])}}function ae(u){this.src=u,this.g={},this.h=0}ae.prototype.add=function(u,m,v,C,M){const j=u.toString();u=this.g[j],u||(u=this.g[j]=[],this.h++);const X=Ye(u,m,C,M);return X>-1?(m=u[X],v||(m.fa=!1)):(m=new Y(m,this.src,j,!!C,M),m.fa=v,u.push(m)),m};function Ie(u,m){const v=m.type;if(v in u.g){var C=u.g[v],M=Array.prototype.indexOf.call(C,m,void 0),j;(j=M>=0)&&Array.prototype.splice.call(C,M,1),j&&(F(m),u.g[v].length==0&&(delete u.g[v],u.h--))}}function Ye(u,m,v,C){for(let M=0;M<u.length;++M){const j=u[M];if(!j.da&&j.listener==m&&j.capture==!!v&&j.ha==C)return M}return-1}var ue="closure_lm_"+(Math.random()*1e6|0),we={};function Re(u,m,v,C,M){if(Array.isArray(m)){for(let j=0;j<m.length;j++)Re(u,m[j],v,C,M);return null}return v=$s(v),u&&u[Z]?u.J(m,v,a(C)?!!C.capture:!1,M):It(u,m,v,!1,C,M)}function It(u,m,v,C,M,j){if(!m)throw Error("Invalid event type");const X=a(M)?!!M.capture:!!M;let Ae=Ee(u);if(Ae||(u[ue]=Ae=new ae(u)),v=Ae.add(m,v,C,X,j),v.proxy)return v;if(C=Ot(),v.proxy=C,C.src=u,C.listener=v,u.addEventListener)N||(M=X),M===void 0&&(M=!1),u.addEventListener(m.toString(),C,M);else if(u.attachEvent)u.attachEvent(vn(m.toString()),C);else if(u.addListener&&u.removeListener)u.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Ot(){function u(v){return m.call(u.src,u.listener,v)}const m=Nr;return u}function Qt(u,m,v,C,M){if(Array.isArray(m))for(var j=0;j<m.length;j++)Qt(u,m[j],v,C,M);else C=a(C)?!!C.capture:!!C,v=$s(v),u&&u[Z]?(u=u.i,j=String(m).toString(),j in u.g&&(m=u.g[j],v=Ye(m,v,C,M),v>-1&&(F(m[v]),Array.prototype.splice.call(m,v,1),m.length==0&&(delete u.g[j],u.h--)))):u&&(u=Ee(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Ye(m,v,C,M)),(v=u>-1?m[u]:null)&&zt(v))}function zt(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Z])Ie(m.i,u);else{var v=u.type,C=u.proxy;m.removeEventListener?m.removeEventListener(v,C,u.capture):m.detachEvent?m.detachEvent(vn(v),C):m.addListener&&m.removeListener&&m.removeListener(C),(v=Ee(m))?(Ie(v,u),v.h==0&&(v.src=null,m[ue]=null)):F(u)}}}function vn(u){return u in we?we[u]:we[u]="on"+u}function Nr(u,m){if(u.da)u=!0;else{m=new q(m,this);const v=u.listener,C=u.ha||u.src;u.fa&&zt(u),u=v.call(C,m)}return u}function Ee(u){return u=u[ue],u instanceof ae?u:null}var Yn="__closure_events_fn_"+(Math.random()*1e9>>>0);function $s(u){return typeof u=="function"?u:(u[Yn]||(u[Yn]=function(m){return u.handleEvent(m)}),u[Yn])}function lt(){D.call(this),this.i=new ae(this),this.M=this,this.G=null}h(lt,D),lt.prototype[Z]=!0,lt.prototype.removeEventListener=function(u,m,v,C){Qt(this,u,m,v,C)};function Vt(u,m){var v,C=u.G;if(C)for(v=[];C;C=C.G)v.push(C);if(u=u.M,C=m.type||m,typeof m=="string")m=new P(m,u);else if(m instanceof P)m.target=m.target||u;else{var M=m;m=new P(C,u),oe(m,M)}M=!0;let j,X;if(v)for(X=v.length-1;X>=0;X--)j=m.g=v[X],M=Or(j,C,!0,m)&&M;if(j=m.g=u,M=Or(j,C,!0,m)&&M,M=Or(j,C,!1,m)&&M,v)for(X=0;X<v.length;X++)j=m.g=v[X],M=Or(j,C,!1,m)&&M}lt.prototype.N=function(){if(lt.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const v=u.g[m];for(let C=0;C<v.length;C++)F(v[C]);delete u.g[m],u.h--}}this.G=null},lt.prototype.J=function(u,m,v,C){return this.i.add(String(u),m,!1,v,C)},lt.prototype.K=function(u,m,v,C){return this.i.add(String(u),m,!0,v,C)};function Or(u,m,v,C){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let M=!0;for(let j=0;j<m.length;++j){const X=m[j];if(X&&!X.da&&X.capture==v){const Ae=X.listener,Pt=X.ha||X.src;X.fa&&Ie(u.i,X),M=Ae.call(Pt,C)!==!1&&M}}return M&&!C.defaultPrevented}function Nd(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=c(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:o.setTimeout(u,m||0)}function Vr(u){u.g=Nd(()=>{u.g=null,u.i&&(u.i=!1,Vr(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class bm extends D{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Vr(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function oo(u){D.call(this),this.h=u,this.g={}}h(oo,D);var ln=[];function as(u){U(u.g,function(m,v){this.g.hasOwnProperty(v)&&zt(m)},u),u.g={}}oo.prototype.N=function(){oo.Z.N.call(this),as(this)},oo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var sc=o.JSON.stringify,xm=o.JSON.parse,fa=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function Od(){}function ic(){}var ls={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Lr(){P.call(this,"d")}h(Lr,P);function pa(){P.call(this,"c")}h(pa,P);var _n={},Vd=null;function ma(){return Vd=Vd||new lt}_n.Ia="serverreachability";function oc(u){P.call(this,_n.Ia,u)}h(oc,P);function zs(u){const m=ma();Vt(m,new oc(m))}_n.STAT_EVENT="statevent";function Ld(u,m){P.call(this,_n.STAT_EVENT,u),this.stat=m}h(Ld,P);function Rt(u){const m=ma();Vt(m,new Ld(m,u))}_n.Ja="timingevent";function ar(u,m){P.call(this,_n.Ja,u),this.size=m}h(ar,P);function ao(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},m)}function me(){this.g=!0}me.prototype.ua=function(){this.g=!1};function Ue(u,m,v,C,M,j){u.info(function(){if(u.g)if(j){var X="",Ae=j.split("&");for(let qe=0;qe<Ae.length;qe++){var Pt=Ae[qe].split("=");if(Pt.length>1){const Mt=Pt[0];Pt=Pt[1];const Ur=Mt.split("_");X=Ur.length>=2&&Ur[1]=="type"?X+(Mt+"="+Pt+"&"):X+(Mt+"=redacted&")}}}else X=null;else X=j;return"XMLHTTP REQ ("+C+") [attempt "+M+"]: "+m+`
`+v+`
`+X})}function Ke(u,m,v,C,M,j,X){u.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+M+"]: "+m+`
`+v+`
`+j+" "+X})}function Lt(u,m,v,C){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Mr(u,v)+(C?" "+C:"")})}function Dn(u,m){u.info(function(){return"TIMEOUT: "+m})}me.prototype.info=function(){};function Mr(u,m){if(!u.g)return m;if(!m)return null;try{const j=JSON.parse(m);if(j){for(u=0;u<j.length;u++)if(Array.isArray(j[u])){var v=j[u];if(!(v.length<2)){var C=v[1];if(Array.isArray(C)&&!(C.length<1)){var M=C[0];if(M!="noop"&&M!="stop"&&M!="close")for(let X=1;X<C.length;X++)C[X]=""}}}}return sc(j)}catch{return m}}var Xn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},wn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},lr;function Rm(){}h(Rm,Od),Rm.prototype.g=function(){return new XMLHttpRequest},lr=new Rm;function ac(u){return encodeURIComponent(String(u))}function vN(u){var m=1;u=u.split(":");const v=[];for(;m>0&&u.length;)v.push(u.shift()),m--;return u.length&&v.push(u.join(":")),v}function qs(u,m,v,C){this.j=u,this.i=m,this.l=v,this.S=C||1,this.V=new oo(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new PE}function PE(){this.i=null,this.g="",this.h=!1}var CE={},Pm={};function Cm(u,m,v){u.M=1,u.A=Fd(Fr(m)),u.u=v,u.R=!0,kE(u,null)}function kE(u,m){u.F=Date.now(),Md(u),u.B=Fr(u.A);var v=u.B,C=u.S;Array.isArray(C)||(C=[String(C)]),qE(v.i,"t",C),u.C=0,v=u.j.L,u.h=new PE,u.g=l0(u.j,v?m:null,!u.u),u.P>0&&(u.O=new bm(c(u.Y,u,u.g),u.P)),m=u.V,v=u.g,C=u.ba;var M="readystatechange";Array.isArray(M)||(M&&(ln[0]=M.toString()),M=ln);for(let j=0;j<M.length;j++){const X=Re(v,M[j],C||m.handleEvent,!1,m.h||m);if(!X)break;m.g[X.key]=X}m=u.J?ce(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),zs(),Ue(u.i,u.v,u.B,u.l,u.S,u.u)}qs.prototype.ba=function(u){u=u.target;const m=this.O;m&&Ks(u)==3?m.j():this.Y(u)},qs.prototype.Y=function(u){try{if(u==this.g)e:{const Ae=Ks(this.g),Pt=this.g.ya(),qe=this.g.ca();if(!(Ae<3)&&(Ae!=3||this.g&&(this.h.h||this.g.la()||XE(this.g)))){this.K||Ae!=4||Pt==7||(Pt==8||qe<=0?zs(3):zs(2)),km(this);var m=this.g.ca();this.X=m;var v=_N(this);if(this.o=m==200,Ke(this.i,this.v,this.B,this.l,this.S,Ae,m),this.o){if(this.U&&!this.L){t:{if(this.g){var C,M=this.g;if((C=M.g?M.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(C)){var j=C;break t}}j=null}if(u=j)Lt(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Dm(this,u);else{this.o=!1,this.m=3,Rt(12),lo(this),lc(this);break e}}if(this.R){u=!0;let Mt;for(;!this.K&&this.C<v.length;)if(Mt=wN(this,v),Mt==Pm){Ae==4&&(this.m=4,Rt(14),u=!1),Lt(this.i,this.l,null,"[Incomplete Response]");break}else if(Mt==CE){this.m=4,Rt(15),Lt(this.i,this.l,v,"[Invalid Chunk]"),u=!1;break}else Lt(this.i,this.l,Mt,null),Dm(this,Mt);if(DE(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ae!=4||v.length!=0||this.h.h||(this.m=1,Rt(16),u=!1),this.o=this.o&&u,!u)Lt(this.i,this.l,v,"[Invalid Chunked Response]"),lo(this),lc(this);else if(v.length>0&&!this.W){this.W=!0;var X=this.j;X.g==this&&X.aa&&!X.P&&(X.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),jm(X),X.P=!0,Rt(11))}}else Lt(this.i,this.l,v,null),Dm(this,v);Ae==4&&lo(this),this.o&&!this.K&&(Ae==4?s0(this.j,this):(this.o=!1,Md(this)))}else ON(this.g),m==400&&v.indexOf("Unknown SID")>0?(this.m=3,Rt(12)):(this.m=0,Rt(13)),lo(this),lc(this)}}}catch{}finally{}};function _N(u){if(!DE(u))return u.g.la();const m=XE(u.g);if(m==="")return"";let v="";const C=m.length,M=Ks(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return lo(u),lc(u),"";u.h.i=new o.TextDecoder}for(let j=0;j<C;j++)u.h.h=!0,v+=u.h.i.decode(m[j],{stream:!(M&&j==C-1)});return m.length=0,u.h.g+=v,u.C=0,u.h.g}function DE(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function wN(u,m){var v=u.C,C=m.indexOf(`
`,v);return C==-1?Pm:(v=Number(m.substring(v,C)),isNaN(v)?CE:(C+=1,C+v>m.length?Pm:(m=m.slice(C,C+v),u.C=C+v,m)))}qs.prototype.cancel=function(){this.K=!0,lo(this)};function Md(u){u.T=Date.now()+u.H,NE(u,u.H)}function NE(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=ao(c(u.aa,u),m)}function km(u){u.D&&(o.clearTimeout(u.D),u.D=null)}qs.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Dn(this.i,this.B),this.M!=2&&(zs(),Rt(17)),lo(this),this.m=2,lc(this)):NE(this,this.T-u)};function lc(u){u.j.I==0||u.K||s0(u.j,u)}function lo(u){km(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,as(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function Dm(u,m){try{var v=u.j;if(v.I!=0&&(v.g==u||Nm(v.h,u))){if(!u.L&&Nm(v.h,u)&&v.I==3){try{var C=v.Ba.g.parse(m)}catch{C=null}if(Array.isArray(C)&&C.length==3){var M=C;if(M[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<u.F)zd(v),Bd(v);else break e;Um(v),Rt(18)}}else v.xa=M[1],0<v.xa-v.K&&M[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=ao(c(v.Va,v),6e3));LE(v.h)<=1&&v.ta&&(v.ta=void 0)}else uo(v,11)}else if((u.L||v.g==u)&&zd(v),!k(m))for(M=v.Ba.g.parse(m),m=0;m<M.length;m++){let qe=M[m];const Mt=qe[0];if(!(Mt<=v.K))if(v.K=Mt,qe=qe[1],v.I==2)if(qe[0]=="c"){v.M=qe[1],v.ba=qe[2];const Ur=qe[3];Ur!=null&&(v.ka=Ur,v.j.info("VER="+v.ka));const ho=qe[4];ho!=null&&(v.za=ho,v.j.info("SVER="+v.za));const Gs=qe[5];Gs!=null&&typeof Gs=="number"&&Gs>0&&(C=1.5*Gs,v.O=C,v.j.info("backChannelRequestTimeoutMs_="+C)),C=v;const Qs=u.g;if(Qs){const Hd=Qs.g?Qs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Hd){var j=C.h;j.g||Hd.indexOf("spdy")==-1&&Hd.indexOf("quic")==-1&&Hd.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(Om(j,j.h),j.h=null))}if(C.G){const Bm=Qs.g?Qs.g.getResponseHeader("X-HTTP-Session-Id"):null;Bm&&(C.wa=Bm,Xe(C.J,C.G,Bm))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-u.F,v.j.info("Handshake RTT: "+v.T+"ms")),C=v;var X=u;if(C.na=a0(C,C.L?C.ba:null,C.W),X.L){ME(C.h,X);var Ae=X,Pt=C.O;Pt&&(Ae.H=Pt),Ae.D&&(km(Ae),Md(Ae)),C.g=X}else n0(C);v.i.length>0&&$d(v)}else qe[0]!="stop"&&qe[0]!="close"||uo(v,7);else v.I==3&&(qe[0]=="stop"||qe[0]=="close"?qe[0]=="stop"?uo(v,7):Fm(v):qe[0]!="noop"&&v.l&&v.l.qa(qe),v.A=0)}}zs(4)}catch{}}var EN=class{constructor(u,m){this.g=u,this.map=m}};function OE(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function VE(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function LE(u){return u.h?1:u.g?u.g.size:0}function Nm(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Om(u,m){u.g?u.g.add(m):u.h=m}function ME(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}OE.prototype.cancel=function(){if(this.i=FE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function FE(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const v of u.g.values())m=m.concat(v.G);return m}return p(u.i)}var UE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function TN(u,m){if(u){u=u.split("&");for(let v=0;v<u.length;v++){const C=u[v].indexOf("=");let M,j=null;C>=0?(M=u[v].substring(0,C),j=u[v].substring(C+1)):M=u[v],m(M,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function Hs(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof Hs?(this.l=u.l,cc(this,u.j),this.o=u.o,this.g=u.g,uc(this,u.u),this.h=u.h,Vm(this,HE(u.i)),this.m=u.m):u&&(m=String(u).match(UE))?(this.l=!1,cc(this,m[1]||"",!0),this.o=dc(m[2]||""),this.g=dc(m[3]||"",!0),uc(this,m[4]),this.h=dc(m[5]||"",!0),Vm(this,m[6]||"",!0),this.m=dc(m[7]||"")):(this.l=!1,this.i=new fc(null,this.l))}Hs.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(hc(m,jE,!0),":");var v=this.g;return(v||m=="file")&&(u.push("//"),(m=this.o)&&u.push(hc(m,jE,!0),"@"),u.push(ac(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&u.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(hc(v,v.charAt(0)=="/"?AN:SN,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",hc(v,xN)),u.join("")},Hs.prototype.resolve=function(u){const m=Fr(this);let v=!!u.j;v?cc(m,u.j):v=!!u.o,v?m.o=u.o:v=!!u.g,v?m.g=u.g:v=u.u!=null;var C=u.h;if(v)uc(m,u.u);else if(v=!!u.h){if(C.charAt(0)!="/")if(this.g&&!this.h)C="/"+C;else{var M=m.h.lastIndexOf("/");M!=-1&&(C=m.h.slice(0,M+1)+C)}if(M=C,M==".."||M==".")C="";else if(M.indexOf("./")!=-1||M.indexOf("/.")!=-1){C=M.lastIndexOf("/",0)==0,M=M.split("/");const j=[];for(let X=0;X<M.length;){const Ae=M[X++];Ae=="."?C&&X==M.length&&j.push(""):Ae==".."?((j.length>1||j.length==1&&j[0]!="")&&j.pop(),C&&X==M.length&&j.push("")):(j.push(Ae),C=!0)}C=j.join("/")}else C=M}return v?m.h=C:v=u.i.toString()!=="",v?Vm(m,HE(u.i)):v=!!u.m,v&&(m.m=u.m),m};function Fr(u){return new Hs(u)}function cc(u,m,v){u.j=v?dc(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function uc(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function Vm(u,m,v){m instanceof fc?(u.i=m,RN(u.i,u.l)):(v||(m=hc(m,bN)),u.i=new fc(m,u.l))}function Xe(u,m,v){u.i.set(m,v)}function Fd(u){return Xe(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function dc(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function hc(u,m,v){return typeof u=="string"?(u=encodeURI(u).replace(m,IN),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function IN(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var jE=/[#\/\?@]/g,SN=/[#\?:]/g,AN=/[#\?]/g,bN=/[#\?@]/g,xN=/#/g;function fc(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function co(u){u.g||(u.g=new Map,u.h=0,u.i&&TN(u.i,function(m,v){u.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}t=fc.prototype,t.add=function(u,m){co(this),this.i=null,u=ga(this,u);let v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(m),this.h+=1,this};function BE(u,m){co(u),m=ga(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function $E(u,m){return co(u),m=ga(u,m),u.g.has(m)}t.forEach=function(u,m){co(this),this.g.forEach(function(v,C){v.forEach(function(M){u.call(m,M,C,this)},this)},this)};function zE(u,m){co(u);let v=[];if(typeof m=="string")$E(u,m)&&(v=v.concat(u.g.get(ga(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)v=v.concat(u[m]);return v}t.set=function(u,m){return co(this),this.i=null,u=ga(this,u),$E(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},t.get=function(u,m){return u?(u=zE(this,u),u.length>0?String(u[0]):m):m};function qE(u,m,v){BE(u,m),v.length>0&&(u.i=null,u.g.set(ga(u,m),p(v)),u.h+=v.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let C=0;C<m.length;C++){var v=m[C];const M=ac(v);v=zE(this,v);for(let j=0;j<v.length;j++){let X=M;v[j]!==""&&(X+="="+ac(v[j])),u.push(X)}}return this.i=u.join("&")};function HE(u){const m=new fc;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function ga(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function RN(u,m){m&&!u.j&&(co(u),u.i=null,u.g.forEach(function(v,C){const M=C.toLowerCase();C!=M&&(BE(this,C),qE(this,M,v))},u)),u.j=m}function PN(u,m){const v=new me;if(o.Image){const C=new Image;C.onload=d(Ws,v,"TestLoadImage: loaded",!0,m,C),C.onerror=d(Ws,v,"TestLoadImage: error",!1,m,C),C.onabort=d(Ws,v,"TestLoadImage: abort",!1,m,C),C.ontimeout=d(Ws,v,"TestLoadImage: timeout",!1,m,C),o.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=u}else m(!1)}function CN(u,m){const v=new me,C=new AbortController,M=setTimeout(()=>{C.abort(),Ws(v,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:C.signal}).then(j=>{clearTimeout(M),j.ok?Ws(v,"TestPingServer: ok",!0,m):Ws(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(M),Ws(v,"TestPingServer: error",!1,m)})}function Ws(u,m,v,C,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),C(v)}catch{}}function kN(){this.g=new fa}function Lm(u){this.i=u.Sb||null,this.h=u.ab||!1}h(Lm,Od),Lm.prototype.g=function(){return new Ud(this.i,this.h)};function Ud(u,m){lt.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h(Ud,lt),t=Ud.prototype,t.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,mc(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||o).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,pc(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,mc(this)),this.g&&(this.readyState=3,mc(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;WE(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function WE(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?pc(this):mc(this),this.readyState==3&&WE(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,pc(this))},t.Na=function(u){this.g&&(this.response=u,pc(this))},t.ga=function(){this.g&&pc(this)};function pc(u){u.readyState=4,u.l=null,u.j=null,u.B=null,mc(u)}t.setRequestHeader=function(u,m){this.A.append(u,m)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=m.next();return u.join(`\r
`)};function mc(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ud.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function KE(u){let m="";return U(u,function(v,C){m+=C,m+=":",m+=v,m+=`\r
`}),m}function Mm(u,m,v){e:{for(C in v){var C=!1;break e}C=!0}C||(v=KE(v),typeof u=="string"?v!=null&&ac(v):Xe(u,m,v))}function ft(u){lt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(ft,lt);var DN=/^https?$/i,NN=["POST","PUT"];t=ft.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,m,v,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():lr.g(),this.g.onreadystatechange=f(c(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(j){GE(this,j);return}if(u=v||"",v=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var M in C)v.set(M,C[M]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const j of C.keys())v.set(j,C.get(j));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(v.keys()).find(j=>j.toLowerCase()=="content-type"),M=o.FormData&&u instanceof o.FormData,!(Array.prototype.indexOf.call(NN,m,void 0)>=0)||C||M||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,X]of v)this.g.setRequestHeader(j,X);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(j){GE(this,j)}};function GE(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,QE(u),jd(u)}function QE(u){u.A||(u.A=!0,Vt(u,"complete"),Vt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Vt(this,"complete"),Vt(this,"abort"),jd(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),jd(this,!0)),ft.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?YE(this):this.Xa())},t.Xa=function(){YE(this)};function YE(u){if(u.h&&typeof i<"u"){if(u.v&&Ks(u)==4)setTimeout(u.Ca.bind(u),0);else if(Vt(u,"readystatechange"),Ks(u)==4){u.h=!1;try{const j=u.ca();e:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var v;if(!(v=m)){var C;if(C=j===0){let X=String(u.D).match(UE)[1]||null;!X&&o.self&&o.self.location&&(X=o.self.location.protocol.slice(0,-1)),C=!DN.test(X?X.toLowerCase():"")}v=C}if(v)Vt(u,"complete"),Vt(u,"success");else{u.o=6;try{var M=Ks(u)>2?u.g.statusText:""}catch{M=""}u.l=M+" ["+u.ca()+"]",QE(u)}}finally{jd(u)}}}}function jd(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const v=u.g;u.g=null,m||Vt(u,"ready");try{v.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Ks(u){return u.g?u.g.readyState:0}t.ca=function(){try{return Ks(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),xm(m)}};function XE(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function ON(u){const m={};u=(u.g&&Ks(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<u.length;C++){if(k(u[C]))continue;var v=vN(u[C]);const M=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const j=m[M]||[];m[M]=j,j.push(v)}K(m,function(C){return C.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function gc(u,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||m}function JE(u){this.za=0,this.i=[],this.j=new me,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=gc("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=gc("baseRetryDelayMs",5e3,u),this.Za=gc("retryDelaySeedMs",1e4,u),this.Ta=gc("forwardChannelMaxRetries",2,u),this.va=gc("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new OE(u&&u.concurrentRequestLimit),this.Ba=new kN,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=JE.prototype,t.ka=8,t.I=1,t.connect=function(u,m,v,C){Rt(0),this.W=u,this.H=m||{},v&&C!==void 0&&(this.H.OSID=v,this.H.OAID=C),this.F=this.X,this.J=a0(this,null,this.W),$d(this)};function Fm(u){if(ZE(u),u.I==3){var m=u.V++,v=Fr(u.J);if(Xe(v,"SID",u.M),Xe(v,"RID",m),Xe(v,"TYPE","terminate"),yc(u,v),m=new qs(u,u.j,m),m.M=2,m.A=Fd(Fr(v)),v=!1,o.navigator&&o.navigator.sendBeacon)try{v=o.navigator.sendBeacon(m.A.toString(),"")}catch{}!v&&o.Image&&(new Image().src=m.A,v=!0),v||(m.g=l0(m.j,null),m.g.ea(m.A)),m.F=Date.now(),Md(m)}o0(u)}function Bd(u){u.g&&(jm(u),u.g.cancel(),u.g=null)}function ZE(u){Bd(u),u.v&&(o.clearTimeout(u.v),u.v=null),zd(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&o.clearTimeout(u.m),u.m=null)}function $d(u){if(!VE(u.h)&&!u.m){u.m=!0;var m=u.Ea;O||I(),V||(O(),V=!0),S.add(m,u),u.D=0}}function VN(u,m){return LE(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=ao(c(u.Ea,u,m),i0(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const M=new qs(this,this.j,u);let j=this.o;if(this.U&&(j?(j=ce(j),oe(j,this.U)):j=this.U),this.u!==null||this.R||(M.J=j,j=null),this.S)e:{for(var m=0,v=0;v<this.i.length;v++){t:{var C=this.i[v];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(m+=C,m>4096){m=v;break e}if(m===4096||v===this.i.length-1){m=v+1;break e}}m=1e3}else m=1e3;m=t0(this,M,m),v=Fr(this.J),Xe(v,"RID",u),Xe(v,"CVER",22),this.G&&Xe(v,"X-HTTP-Session-Id",this.G),yc(this,v),j&&(this.R?m="headers="+ac(KE(j))+"&"+m:this.u&&Mm(v,this.u,j)),Om(this.h,M),this.Ra&&Xe(v,"TYPE","init"),this.S?(Xe(v,"$req",m),Xe(v,"SID","null"),M.U=!0,Cm(M,v,null)):Cm(M,v,m),this.I=2}}else this.I==3&&(u?e0(this,u):this.i.length==0||VE(this.h)||e0(this))};function e0(u,m){var v;m?v=m.l:v=u.V++;const C=Fr(u.J);Xe(C,"SID",u.M),Xe(C,"RID",v),Xe(C,"AID",u.K),yc(u,C),u.u&&u.o&&Mm(C,u.u,u.o),v=new qs(u,u.j,v,u.D+1),u.u===null&&(v.J=u.o),m&&(u.i=m.G.concat(u.i)),m=t0(u,v,1e3),v.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Om(u.h,v),Cm(v,C,m)}function yc(u,m){u.H&&U(u.H,function(v,C){Xe(m,C,v)}),u.l&&U({},function(v,C){Xe(m,C,v)})}function t0(u,m,v){v=Math.min(u.i.length,v);const C=u.l?c(u.l.Ka,u.l,u):null;e:{var M=u.i;let Ae=-1;for(;;){const Pt=["count="+v];Ae==-1?v>0?(Ae=M[0].g,Pt.push("ofs="+Ae)):Ae=0:Pt.push("ofs="+Ae);let qe=!0;for(let Mt=0;Mt<v;Mt++){var j=M[Mt].g;const Ur=M[Mt].map;if(j-=Ae,j<0)Ae=Math.max(0,M[Mt].g-100),qe=!1;else try{j="req"+j+"_"||"";try{var X=Ur instanceof Map?Ur:Object.entries(Ur);for(const[ho,Gs]of X){let Qs=Gs;a(Gs)&&(Qs=sc(Gs)),Pt.push(j+ho+"="+encodeURIComponent(Qs))}}catch(ho){throw Pt.push(j+"type="+encodeURIComponent("_badmap")),ho}}catch{C&&C(Ur)}}if(qe){X=Pt.join("&");break e}}X=void 0}return u=u.i.splice(0,v),m.G=u,X}function n0(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;O||I(),V||(O(),V=!0),S.add(m,u),u.A=0}}function Um(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=ao(c(u.Da,u),i0(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,r0(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=ao(c(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Rt(10),Bd(this),r0(this))};function jm(u){u.B!=null&&(o.clearTimeout(u.B),u.B=null)}function r0(u){u.g=new qs(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=Fr(u.na);Xe(m,"RID","rpc"),Xe(m,"SID",u.M),Xe(m,"AID",u.K),Xe(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&Xe(m,"TO",u.ia),Xe(m,"TYPE","xmlhttp"),yc(u,m),u.u&&u.o&&Mm(m,u.u,u.o),u.O&&(u.g.H=u.O);var v=u.g;u=u.ba,v.M=1,v.A=Fd(Fr(m)),v.u=null,v.R=!0,kE(v,u)}t.Va=function(){this.C!=null&&(this.C=null,Bd(this),Um(this),Rt(19))};function zd(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function s0(u,m){var v=null;if(u.g==m){zd(u),jm(u),u.g=null;var C=2}else if(Nm(u.h,m))v=m.G,ME(u.h,m),C=1;else return;if(u.I!=0){if(m.o)if(C==1){v=m.u?m.u.length:0,m=Date.now()-m.F;var M=u.D;C=ma(),Vt(C,new ar(C,v)),$d(u)}else n0(u);else if(M=m.m,M==3||M==0&&m.X>0||!(C==1&&VN(u,m)||C==2&&Um(u)))switch(v&&v.length>0&&(m=u.h,m.i=m.i.concat(v)),M){case 1:uo(u,5);break;case 4:uo(u,10);break;case 3:uo(u,6);break;default:uo(u,2)}}}function i0(u,m){let v=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(v*=2),v*m}function uo(u,m){if(u.j.info("Error code "+m),m==2){var v=c(u.bb,u),C=u.Ua;const M=!C;C=new Hs(C||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||cc(C,"https"),Fd(C),M?PN(C.toString(),v):CN(C.toString(),v)}else Rt(2);u.I=0,u.l&&u.l.pa(m),o0(u),ZE(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Rt(2)):(this.j.info("Failed to ping google.com"),Rt(1))};function o0(u){if(u.I=0,u.ja=[],u.l){const m=FE(u.h);(m.length!=0||u.i.length!=0)&&(E(u.ja,m),E(u.ja,u.i),u.h.i.length=0,p(u.i),u.i.length=0),u.l.oa()}}function a0(u,m,v){var C=v instanceof Hs?Fr(v):new Hs(v);if(C.g!="")m&&(C.g=m+"."+C.g),uc(C,C.u);else{var M=o.location;C=M.protocol,m=m?m+"."+M.hostname:M.hostname,M=+M.port;const j=new Hs(null);C&&cc(j,C),m&&(j.g=m),M&&uc(j,M),v&&(j.h=v),C=j}return v=u.G,m=u.wa,v&&m&&Xe(C,v,m),Xe(C,"VER",u.ka),yc(u,C),C}function l0(u,m,v){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new ft(new Lm({ab:v})):new ft(u.ma),m.Fa(u.L),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function c0(){}t=c0.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function qd(){}qd.prototype.g=function(u,m){return new Nn(u,m)};function Nn(u,m){lt.call(this),this.g=new JE(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!k(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!k(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new ya(this)}h(Nn,lt),Nn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Nn.prototype.close=function(){Fm(this.g)},Nn.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.v&&(v={},v.__data__=sc(u),u=v);m.i.push(new EN(m.Ya++,u)),m.I==3&&$d(m)},Nn.prototype.N=function(){this.g.l=null,delete this.j,Fm(this.g),delete this.g,Nn.Z.N.call(this)};function u0(u){Lr.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const v in m){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}h(u0,Lr);function d0(){pa.call(this),this.status=1}h(d0,pa);function ya(u){this.g=u}h(ya,c0),ya.prototype.ra=function(){Vt(this.g,"a")},ya.prototype.qa=function(u){Vt(this.g,new u0(u))},ya.prototype.pa=function(u){Vt(this.g,new d0)},ya.prototype.oa=function(){Vt(this.g,"b")},qd.prototype.createWebChannel=qd.prototype.g,Nn.prototype.send=Nn.prototype.o,Nn.prototype.open=Nn.prototype.m,Nn.prototype.close=Nn.prototype.close,cC=function(){return new qd},lC=function(){return ma()},aC=_n,mv={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Xn.NO_ERROR=0,Xn.TIMEOUT=8,Xn.HTTP_ERROR=6,Kh=Xn,wn.COMPLETE="complete",oC=wn,ic.EventType=ls,ls.OPEN="a",ls.CLOSE="b",ls.ERROR="c",ls.MESSAGE="d",lt.prototype.listen=lt.prototype.J,zc=ic,ft.prototype.listenOnce=ft.prototype.K,ft.prototype.getLastError=ft.prototype.Ha,ft.prototype.getLastErrorCode=ft.prototype.ya,ft.prototype.getStatus=ft.prototype.ca,ft.prototype.getResponseJson=ft.prototype.La,ft.prototype.getResponseText=ft.prototype.la,ft.prototype.send=ft.prototype.ea,ft.prototype.setWithCredentials=ft.prototype.Fa,iC=ft}).apply(typeof yh<"u"?yh:typeof self<"u"?self:typeof window<"u"?window:{});const zI="@firebase/firestore",qI="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}en.UNAUTHENTICATED=new en(null),en.GOOGLE_CREDENTIALS=new en("google-credentials-uid"),en.FIRST_PARTY=new en("first-party-uid"),en.MOCK_USER=new en("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bi=new Gp("@firebase/firestore");function ba(){return Bi.logLevel}function uC(t){Bi.setLogLevel(t)}function W(t,...e){if(Bi.logLevel<=Ce.DEBUG){const n=e.map(ww);Bi.debug(`Firestore (${Gl}): ${t}`,...n)}}function wt(t,...e){if(Bi.logLevel<=Ce.ERROR){const n=e.map(ww);Bi.error(`Firestore (${Gl}): ${t}`,...n)}}function $i(t,...e){if(Bi.logLevel<=Ce.WARN){const n=e.map(ww);Bi.warn(`Firestore (${Gl}): ${t}`,...n)}}function ww(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,dC(t,r,n)}function dC(t,e,n){let r=`FIRESTORE (${Gl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw wt(r),new Error(r)}function le(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||dC(e,s,r)}function re(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends kr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N5{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class hC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(en.UNAUTHENTICATED))}shutdown(){}}class O5{constructor(e){this.t=e,this.currentUser=en.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){le(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new sr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new sr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new sr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(le(typeof r.accessToken=="string",31837,{l:r}),new N5(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return le(e===null||typeof e=="string",2055,{h:e}),new en(e)}}class V5{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=en.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class L5{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new V5(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(en.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class HI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class M5{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Mn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){le(this.o===void 0,3512);const r=i=>{i.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new HI(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(le(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new HI(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F5(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=F5(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function _e(t,e){return t<e?-1:t>e?1:0}function gv(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Dg(s)===Dg(i)?_e(s,i):Dg(s)?1:-1}return _e(t.length,e.length)}const U5=55296,j5=57343;function Dg(t){const e=t.charCodeAt(0);return e>=U5&&e<=j5}function _l(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}function fC(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI="__name__";class $r{constructor(e,n,r){n===void 0?n=0:n>e.length&&ne(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ne(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return $r.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof $r?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=$r.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return _e(e.length,n.length)}static compareSegments(e,n){const r=$r.isNumericId(e),s=$r.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?$r.extractNumericId(e).compare($r.extractNumericId(n)):gv(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Di.fromString(e.substring(4,e.length-2))}}class Fe extends $r{construct(e,n,r){return new Fe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Q(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Fe(n)}static emptyPath(){return new Fe([])}}const B5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ot extends $r{construct(e,n,r){return new ot(e,n,r)}static isValidIdentifier(e){return B5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ot.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===WI}static keyField(){return new ot([WI])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Q(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new Q(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Q(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new Q(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ot(n)}static emptyPath(){return new ot([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.path=e}static fromPath(e){return new J(Fe.fromString(e))}static fromName(e){return new J(Fe.fromString(e).popFirst(5))}static empty(){return new J(Fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Fe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new J(new Fe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pC(t,e,n){if(!n)throw new Q(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function mC(t,e,n,r){if(e===!0&&r===!0)throw new Q(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function KI(t){if(!J.isDocumentKey(t))throw new Q(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function GI(t){if(J.isDocumentKey(t))throw new Q(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function gC(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Jp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ne(12329,{type:typeof t})}function Tt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Q(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Jp(t);throw new Q(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function $5(t,e){if(e<=0)throw new Q(B.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(t,e){const n={typeString:t};return e&&(n.value=e),n}function vd(t,e){if(!gC(t))throw new Q(B.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new Q(B.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI=-62135596800,YI=1e6;class je{static now(){return je.fromMillis(Date.now())}static fromDate(e){return je.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*YI);return new je(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Q(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Q(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<QI)throw new Q(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/YI}_compareTo(e){return this.seconds===e.seconds?_e(this.nanoseconds,e.nanoseconds):_e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:je._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(vd(e,je._jsonSchema))return new je(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-QI;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}je._jsonSchemaVersion="firestore/timestamp/1.0",je._jsonSchema={type:xt("string",je._jsonSchemaVersion),seconds:xt("number"),nanoseconds:xt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{static fromTimestamp(e){return new he(e)}static min(){return new he(new je(0,0))}static max(){return new he(new je(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wl=-1;class Gf{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function yv(t){return t.fields.find(e=>e.kind===2)}function yo(t){return t.fields.filter(e=>e.kind!==2)}Gf.UNKNOWN_ID=-1;class Gh{constructor(e,n){this.fieldPath=e,this.kind=n}}class zu{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new zu(0,Kn.min())}}function yC(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=he.fromTimestamp(r===1e9?new je(n+1,0):new je(n,r));return new Kn(s,J.empty(),e)}function vC(t){return new Kn(t.readTime,t.key,wl)}class Kn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Kn(he.min(),J.empty(),wl)}static max(){return new Kn(he.max(),J.empty(),wl)}}function Ew(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=J.comparator(t.documentKey,e.documentKey),n!==0?n:_e(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function no(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==_C)throw t;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):L.reject(n)}static resolve(e){return new L((n,r)=>{n(e)})}static reject(e){return new L((n,r)=>{r(e)})}static waitFor(e){return new L((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=L.resolve(!1);for(const r of e)n=n.next(s=>s?L.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new L((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new L((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vn="SimpleDb";class Zp{static open(e,n,r,s){try{return new Zp(n,e.transaction(s,r))}catch(i){throw new iu(n,i)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new sr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new iu(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const s=Tw(r.target.error);this.S.reject(new iu(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(W(Vn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new q5(n)}}class Ni{static delete(e){return W(Vn,"Removing database:",e),wo(_P().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!fw())return!1;if(Ni.F())return!0;const e=Gt(),n=Ni.M(e),r=0<n&&n<10,s=EC(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,Ni.M(Gt())===12.2&&wt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(W(Vn,"Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new iu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new Q(B.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new Q(B.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new iu(e,o))},s.onupgradeneeded=i=>{W(Vn,'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.N.k(o,s.transaction,i.oldVersion,this.version).next(()=>{W(Vn,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const a=Zp.open(this.db,e,i?"readonly":"readwrite",r),l=s(a).next(c=>(a.C(),c)).catch(c=>(a.abort(c),L.reject(c))).toPromise();return l.catch(()=>{}),await a.D,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(W(Vn,"Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function EC(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class z5{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return wo(this.U.delete())}}class iu extends Q{constructor(e,n){super(B.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function ro(t){return t.name==="IndexedDbTransactionError"}class q5{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(W(Vn,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(W(Vn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),wo(r)}add(e){return W(Vn,"ADD",this.store.name,e,e),wo(this.store.add(e))}get(e){return wo(this.store.get(e)).next(n=>(n===void 0&&(n=null),W(Vn,"GET",this.store.name,e,n),n))}delete(e){return W(Vn,"DELETE",this.store.name,e),wo(this.store.delete(e))}count(){return W(Vn,"COUNT",this.store.name),wo(this.store.count())}J(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new L((o,a)=>{i.onerror=l=>{a(l.target.error)},i.onsuccess=l=>{o(l.target.result)}})}{const i=this.cursor(r),o=[];return this.H(i,(a,l)=>{o.push(l)}).next(()=>o)}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new L((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}Z(e,n){W(Vn,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const s=this.cursor(r);return this.H(s,(i,o,a)=>a.delete())}ee(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.H(s,n)}te(e){const n=this.cursor({});return new L((r,s)=>{n.onerror=i=>{const o=Tw(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}H(e,n){const r=[];return new L((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const l=new z5(a),c=n(a.primaryKey,a.value,l);if(c instanceof L){const d=c.catch(h=>(l.done(),L.reject(h)));r.push(d)}l.isDone?s():l.G===null?a.continue():a.continue(l.G)}}).next(()=>L.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function wo(t){return new L((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=Tw(r.target.error);n(s)}})}let XI=!1;function Tw(t){const e=Ni.M(Gt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new Q("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return XI||(XI=!0,setTimeout(()=>{throw r},0)),r}}return t}const ou="IndexBackfiller";class H5{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){W(ou,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.ne.ie();W(ou,`Documents written: ${n}`)}catch(n){ro(n)?W(ou,"Ignoring IndexedDB error during index backfill: ",n):await no(n)}await this.re(6e4)})}}class W5{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.se(n,e))}se(e,n){const r=new Set;let s=n,i=!0;return L.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return W(ou,`Processing collection: ${o}`),this.oe(e,o,s).next(a=>{s-=a,r.add(o)});i=!1})).next(()=>n-s)}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next(i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this._e(s,i)).next(a=>(W(ou,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}_e(e,n){let r=e;return n.changes.forEach((s,i)=>{const o=vC(i);Ew(o,r)>0&&(r=o)}),new Kn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}An.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho=-1;function em(t){return t==null}function qu(t){return t===0&&1/t==-1/0}function TC(t){return typeof t=="number"&&Number.isInteger(t)&&!qu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qf="";function on(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=JI(e)),e=K5(t.get(n),e);return JI(e)}function K5(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case Qf:n+="";break;default:n+=i}}return n}function JI(t){return t+Qf+""}function Qr(t){const e=t.length;if(le(e>=2,64408,{path:t}),e===2)return le(t.charAt(0)===Qf&&t.charAt(1)==="",56145,{path:t}),Fe.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const o=t.indexOf(Qf,i);switch((o<0||o>n)&&ne(50515,{path:t}),t.charAt(o+1)){case"":const a=t.substring(i,o);let l;s.length===0?l=a:(s+=a,l=s,s=""),r.push(l);break;case"":s+=t.substring(i,o),s+="\0";break;case"":s+=t.substring(i,o+1);break;default:ne(61167,{path:t})}i=o+2}return new Fe(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vo="remoteDocuments",_d="owner",_a="owner",Hu="mutationQueues",G5="userId",gr="mutations",ZI="batchId",Po="userMutationsIndex",eS=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qh(t,e){return[t,on(e)]}function IC(t,e,n){return[t,on(e),n]}const Q5={},El="documentMutations",Yf="remoteDocumentsV14",Y5=["prefixPath","collectionGroup","readTime","documentId"],Yh="documentKeyIndex",X5=["prefixPath","collectionGroup","documentId"],SC="collectionGroupIndex",J5=["collectionGroup","readTime","prefixPath","documentId"],Wu="remoteDocumentGlobal",vv="remoteDocumentGlobalKey",Tl="targets",AC="queryTargetsIndex",Z5=["canonicalId","targetId"],Il="targetDocuments",eB=["targetId","path"],Iw="documentTargetsIndex",tB=["path","targetId"],Xf="targetGlobalKey",Wo="targetGlobal",Ku="collectionParents",nB=["collectionId","parent"],Sl="clientMetadata",rB="clientId",tm="bundles",sB="bundleId",nm="namedQueries",iB="name",Sw="indexConfiguration",oB="indexId",_v="collectionGroupIndex",aB="collectionGroup",au="indexState",lB=["indexId","uid"],bC="sequenceNumberIndex",cB=["uid","sequenceNumber"],lu="indexEntries",uB=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],xC="documentKeyIndex",dB=["indexId","uid","orderedDocumentKey"],rm="documentOverlays",hB=["userId","collectionPath","documentId"],wv="collectionPathOverlayIndex",fB=["userId","collectionPath","largestBatchId"],RC="collectionGroupOverlayIndex",pB=["userId","collectionGroup","largestBatchId"],Aw="globals",mB="name",PC=[Hu,gr,El,vo,Tl,_d,Wo,Il,Sl,Wu,Ku,tm,nm],gB=[...PC,rm],CC=[Hu,gr,El,Yf,Tl,_d,Wo,Il,Sl,Wu,Ku,tm,nm,rm],kC=CC,bw=[...kC,Sw,au,lu],yB=bw,DC=[...bw,Aw],vB=DC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev extends wC{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function Nt(t,e){const n=re(t);return Ni.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tS(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function so(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function NC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e,n){this.comparator=e,this.root=n||Ht.EMPTY}insert(e,n){return new Qe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ht.BLACK,null,null))}remove(e){return new Qe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ht.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vh(this.root,e,this.comparator,!1)}getReverseIterator(){return new vh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vh(this.root,e,this.comparator,!0)}}class vh{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ht{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Ht.RED,this.left=s??Ht.EMPTY,this.right=i??Ht.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Ht(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ht.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ht.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ht.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ht.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ne(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ne(27949);return e+(this.isRed()?0:1)}}Ht.EMPTY=null,Ht.RED=!0,Ht.BLACK=!1;Ht.EMPTY=new class{constructor(){this.size=0}get key(){throw ne(57766)}get value(){throw ne(16141)}get color(){throw ne(16727)}get left(){throw ne(29726)}get right(){throw ne(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Ht(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e){this.comparator=e,this.data=new Qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new nS(this.data.getIterator())}getIteratorFrom(e){return new nS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ze)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ze(this.comparator);return n.data=e,n}}class nS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function wa(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.fields=e,e.sort(ot.comparator)}static empty(){return new bn([])}unionWith(e){let n=new ze(ot.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new bn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return _l(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new OC("Invalid base64 string: "+i):i}}(e);return new yt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new yt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return _e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yt.EMPTY_BYTE_STRING=new yt("");const _B=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ds(t){if(le(!!t,39018),typeof t=="string"){let e=0;const n=_B.exec(t);if(le(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:rt(t.seconds),nanos:rt(t.nanos)}}function rt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ns(t){return typeof t=="string"?yt.fromBase64String(t):yt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VC="server_timestamp",LC="__type__",MC="__previous_value__",FC="__local_write_time__";function xw(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[LC])==null?void 0:r.stringValue)===VC}function sm(t){const e=t.mapValue.fields[MC];return xw(e)?sm(e):e}function Gu(t){const e=Ds(t.mapValue.fields[FC].timestampValue);return new je(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wB{constructor(e,n,r,s,i,o,a,l,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=d}}const Jf="(default)";class zi{constructor(e,n){this.projectId=e,this.database=n||Jf}static empty(){return new zi("","")}get isDefaultDatabase(){return this.database===Jf}isEqual(e){return e instanceof zi&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rw="__type__",UC="__max__",_i={mapValue:{fields:{__type__:{stringValue:UC}}}},Pw="__vector__",Al="value",Xh={nullValue:"NULL_VALUE"};function qi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?xw(t)?4:jC(t)?9007199254740991:im(t)?10:11:ne(28295,{value:t})}function ss(t,e){if(t===e)return!0;const n=qi(t);if(n!==qi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Gu(t).isEqual(Gu(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Ds(s.timestampValue),a=Ds(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Ns(s.bytesValue).isEqual(Ns(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return rt(s.geoPointValue.latitude)===rt(i.geoPointValue.latitude)&&rt(s.geoPointValue.longitude)===rt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return rt(s.integerValue)===rt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=rt(s.doubleValue),a=rt(i.doubleValue);return o===a?qu(o)===qu(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return _l(t.arrayValue.values||[],e.arrayValue.values||[],ss);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(tS(o)!==tS(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ss(o[l],a[l])))return!1;return!0}(t,e);default:return ne(52216,{left:t})}}function Qu(t,e){return(t.values||[]).find(n=>ss(n,e))!==void 0}function Hi(t,e){if(t===e)return 0;const n=qi(t),r=qi(e);if(n!==r)return _e(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return _e(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=rt(i.integerValue||i.doubleValue),l=rt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return rS(t.timestampValue,e.timestampValue);case 4:return rS(Gu(t),Gu(e));case 5:return gv(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Ns(i),l=Ns(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=_e(a[c],l[c]);if(d!==0)return d}return _e(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=_e(rt(i.latitude),rt(o.latitude));return a!==0?a:_e(rt(i.longitude),rt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return sS(t.arrayValue,e.arrayValue);case 10:return function(i,o){var f,p,E,g;const a=i.fields||{},l=o.fields||{},c=(f=a[Al])==null?void 0:f.arrayValue,d=(p=l[Al])==null?void 0:p.arrayValue,h=_e(((E=c==null?void 0:c.values)==null?void 0:E.length)||0,((g=d==null?void 0:d.values)==null?void 0:g.length)||0);return h!==0?h:sS(c,d)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===_i.mapValue&&o===_i.mapValue)return 0;if(i===_i.mapValue)return 1;if(o===_i.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const f=gv(l[h],d[h]);if(f!==0)return f;const p=Hi(a[l[h]],c[d[h]]);if(p!==0)return p}return _e(l.length,d.length)}(t.mapValue,e.mapValue);default:throw ne(23264,{he:n})}}function rS(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return _e(t,e);const n=Ds(t),r=Ds(e),s=_e(n.seconds,r.seconds);return s!==0?s:_e(n.nanos,r.nanos)}function sS(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Hi(n[s],r[s]);if(i)return i}return _e(n.length,r.length)}function bl(t){return Tv(t)}function Tv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ds(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ns(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return J.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Tv(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Tv(n.fields[o])}`;return s+"}"}(t.mapValue):ne(61005,{value:t})}function Jh(t){switch(qi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=sm(t);return e?16+Jh(e):16;case 5:return 2*t.stringValue.length;case 6:return Ns(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Jh(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return so(r.fields,(i,o)=>{s+=i.length+Jh(o)}),s}(t.mapValue);default:throw ne(13486,{value:t})}}function Yu(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Iv(t){return!!t&&"integerValue"in t}function Xu(t){return!!t&&"arrayValue"in t}function iS(t){return!!t&&"nullValue"in t}function oS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Zh(t){return!!t&&"mapValue"in t}function im(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Rw])==null?void 0:r.stringValue)===Pw}function cu(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return so(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=cu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=cu(t.arrayValue.values[n]);return e}return{...t}}function jC(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===UC}const BC={mapValue:{fields:{[Rw]:{stringValue:Pw},[Al]:{arrayValue:{}}}}};function EB(t){return"nullValue"in t?Xh:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Yu(zi.empty(),J.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?im(t)?BC:{mapValue:{}}:ne(35942,{value:t})}function TB(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Yu(zi.empty(),J.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?BC:"mapValue"in t?im(t)?{mapValue:{}}:_i:ne(61959,{value:t})}function aS(t,e){const n=Hi(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function lS(t,e){const n=Hi(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.value=e}static empty(){return new rn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Zh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=cu(n)}setAll(e){let n=ot.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=cu(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Zh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ss(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Zh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){so(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new rn(cu(this.value))}}function $C(t){const e=[];return so(t.fields,(n,r)=>{const s=new ot([n]);if(Zh(r)){const i=$C(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new bn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new gt(e,0,he.min(),he.min(),he.min(),rn.empty(),0)}static newFoundDocument(e,n,r,s){return new gt(e,1,n,he.min(),r,s,0)}static newNoDocument(e,n){return new gt(e,2,n,he.min(),he.min(),rn.empty(),0)}static newUnknownDocument(e,n){return new gt(e,3,n,he.min(),he.min(),rn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(he.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=he.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof gt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new gt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e,n){this.position=e,this.inclusive=n}}function cS(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=J.comparator(J.fromName(o.referenceValue),n.key):r=Hi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function uS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ss(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(e,n="asc"){this.field=e,this.dir=n}}function IB(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{}class Ne extends zC{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new SB(e,n,r):n==="array-contains"?new xB(e,r):n==="in"?new QC(e,r):n==="not-in"?new RB(e,r):n==="array-contains-any"?new PB(e,r):new Ne(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new AB(e,r):new bB(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Hi(n,this.value)):n!==null&&qi(this.value)===qi(n)&&this.matchesComparison(Hi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Be extends zC{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Be(e,n)}matches(e){return Rl(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Rl(t){return t.op==="and"}function Sv(t){return t.op==="or"}function Cw(t){return qC(t)&&Rl(t)}function qC(t){for(const e of t.filters)if(e instanceof Be)return!1;return!0}function Av(t){if(t instanceof Ne)return t.field.canonicalString()+t.op.toString()+bl(t.value);if(Cw(t))return t.filters.map(e=>Av(e)).join(",");{const e=t.filters.map(n=>Av(n)).join(",");return`${t.op}(${e})`}}function HC(t,e){return t instanceof Ne?function(r,s){return s instanceof Ne&&r.op===s.op&&r.field.isEqual(s.field)&&ss(r.value,s.value)}(t,e):t instanceof Be?function(r,s){return s instanceof Be&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&HC(o,s.filters[a]),!0):!1}(t,e):void ne(19439)}function WC(t,e){const n=t.filters.concat(e);return Be.create(n,t.op)}function KC(t){return t instanceof Ne?function(n){return`${n.field.canonicalString()} ${n.op} ${bl(n.value)}`}(t):t instanceof Be?function(n){return n.op.toString()+" {"+n.getFilters().map(KC).join(" ,")+"}"}(t):"Filter"}class SB extends Ne{constructor(e,n,r){super(e,n,r),this.key=J.fromName(r.referenceValue)}matches(e){const n=J.comparator(e.key,this.key);return this.matchesComparison(n)}}class AB extends Ne{constructor(e,n){super(e,"in",n),this.keys=GC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class bB extends Ne{constructor(e,n){super(e,"not-in",n),this.keys=GC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function GC(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>J.fromName(r.referenceValue))}class xB extends Ne{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Xu(n)&&Qu(n.arrayValue,this.value)}}class QC extends Ne{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Qu(this.value.arrayValue,n)}}class RB extends Ne{constructor(e,n){super(e,"not-in",n)}matches(e){if(Qu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Qu(this.value.arrayValue,n)}}class PB extends Ne{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Xu(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Qu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CB{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function bv(t,e=null,n=[],r=[],s=null,i=null,o=null){return new CB(t,e,n,r,s,i,o)}function na(t){const e=re(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Av(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),em(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>bl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>bl(r)).join(",")),e.Te=n}return e.Te}function wd(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!IB(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!HC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!uS(t.startAt,e.startAt)&&uS(t.endAt,e.endAt)}function Zf(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function ep(t,e){return t.filters.filter(n=>n instanceof Ne&&n.field.isEqual(e))}function dS(t,e,n){let r=Xh,s=!0;for(const i of ep(t,e)){let o=Xh,a=!0;switch(i.op){case"<":case"<=":o=EB(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=Xh}aS({value:r,inclusive:s},{value:o,inclusive:a})<0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];aS({value:r,inclusive:s},{value:o,inclusive:n.inclusive})<0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}function hS(t,e,n){let r=_i,s=!0;for(const i of ep(t,e)){let o=_i,a=!0;switch(i.op){case">=":case">":o=TB(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=_i}lS({value:r,inclusive:s},{value:o,inclusive:a})>0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];lS({value:r,inclusive:s},{value:o,inclusive:n.inclusive})>0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function YC(t,e,n,r,s,i,o,a){return new Ql(t,e,n,r,s,i,o,a)}function Ed(t){return new Ql(t)}function fS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function XC(t){return t.collectionGroup!==null}function uu(t){const e=re(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ze(ot.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Ju(i,r))}),n.has(ot.keyField().canonicalString())||e.Ie.push(new Ju(ot.keyField(),r))}return e.Ie}function Hn(t){const e=re(t);return e.Ee||(e.Ee=kB(e,uu(t))),e.Ee}function kB(t,e){if(t.limitType==="F")return bv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Ju(s.field,i)});const n=t.endAt?new xl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new xl(t.startAt.position,t.startAt.inclusive):null;return bv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function xv(t,e){const n=t.filters.concat([e]);return new Ql(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function tp(t,e,n){return new Ql(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function om(t,e){return wd(Hn(t),Hn(e))&&t.limitType===e.limitType}function JC(t){return`${na(Hn(t))}|lt:${t.limitType}`}function xa(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>KC(s)).join(", ")}]`),em(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>bl(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>bl(s)).join(",")),`Target(${r})`}(Hn(t))}; limitType=${t.limitType})`}function Td(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):J.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of uu(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=cS(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,uu(r),s)||r.endAt&&!function(o,a,l){const c=cS(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,uu(r),s))}(t,e)}function ZC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function ek(t){return(e,n)=>{let r=!1;for(const s of uu(t)){const i=DB(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function DB(t,e,n){const r=t.field.isKeyField()?J.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?Hi(l,c):ne(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ne(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){so(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return NC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NB=new Qe(J.comparator);function jn(){return NB}const tk=new Qe(J.comparator);function qc(...t){let e=tk;for(const n of t)e=e.insert(n.key,n);return e}function nk(t){let e=tk;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Yr(){return du()}function rk(){return du()}function du(){return new Us(t=>t.toString(),(t,e)=>t.isEqual(e))}const OB=new Qe(J.comparator),VB=new ze(J.comparator);function xe(...t){let e=VB;for(const n of t)e=e.add(n);return e}const LB=new ze(_e);function kw(){return LB}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qu(e)?"-0":e}}function sk(t){return{integerValue:""+t}}function MB(t,e){return TC(e)?sk(e):Dw(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(){this._=void 0}}function FB(t,e,n){return t instanceof Pl?function(s,i){const o={fields:{[LC]:{stringValue:VC},[FC]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&xw(i)&&(i=sm(i)),i&&(o.fields[MC]=i),{mapValue:o}}(n,e):t instanceof ra?ok(t,e):t instanceof Cl?ak(t,e):function(s,i){const o=ik(s,i),a=pS(o)+pS(s.Ae);return Iv(o)&&Iv(s.Ae)?sk(a):Dw(s.serializer,a)}(t,e)}function UB(t,e,n){return t instanceof ra?ok(t,e):t instanceof Cl?ak(t,e):n}function ik(t,e){return t instanceof Zu?function(r){return Iv(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Pl extends am{}class ra extends am{constructor(e){super(),this.elements=e}}function ok(t,e){const n=lk(e);for(const r of t.elements)n.some(s=>ss(s,r))||n.push(r);return{arrayValue:{values:n}}}class Cl extends am{constructor(e){super(),this.elements=e}}function ak(t,e){let n=lk(e);for(const r of t.elements)n=n.filter(s=>!ss(s,r));return{arrayValue:{values:n}}}class Zu extends am{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function pS(t){return rt(t.integerValue||t.doubleValue)}function lk(t){return Xu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(e,n){this.field=e,this.transform=n}}function jB(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof ra&&s instanceof ra||r instanceof Cl&&s instanceof Cl?_l(r.elements,s.elements,ss):r instanceof Zu&&s instanceof Zu?ss(r.Ae,s.Ae):r instanceof Pl&&s instanceof Pl}(t.transform,e.transform)}class BB{constructor(e,n){this.version=e,this.transformResults=n}}class sn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new sn}static exists(e){return new sn(void 0,e)}static updateTime(e){return new sn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ef(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class lm{}function ck(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new cm(t.key,sn.none()):new Yl(t.key,t.data,sn.none());{const n=t.data,r=rn.empty();let s=new ze(ot.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new js(t.key,r,new bn(s.toArray()),sn.none())}}function $B(t,e,n){t instanceof Yl?function(s,i,o){const a=s.value.clone(),l=gS(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof js?function(s,i,o){if(!ef(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=gS(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(uk(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function hu(t,e,n,r){return t instanceof Yl?function(i,o,a,l){if(!ef(i.precondition,o))return a;const c=i.value.clone(),d=yS(i.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof js?function(i,o,a,l){if(!ef(i.precondition,o))return a;const c=yS(i.fieldTransforms,l,o),d=o.data;return d.setAll(uk(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,o,a){return ef(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function zB(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=ik(r.transform,s||null);i!=null&&(n===null&&(n=rn.empty()),n.set(r.field,i))}return n||null}function mS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&_l(r,s,(i,o)=>jB(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Yl extends lm{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class js extends lm{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function uk(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function gS(t,e,n){const r=new Map;le(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,UB(o,a,n[s]))}return r}function yS(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,FB(i,o,e))}return r}class cm extends lm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class dk extends lm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&$B(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=hu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=hu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=rk();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=ck(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(he.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),xe())}isEqual(e){return this.batchId===e.batchId&&_l(this.mutations,e.mutations,(n,r)=>mS(n,r))&&_l(this.baseMutations,e.baseMutations,(n,r)=>mS(n,r))}}class Vw{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){le(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return OB}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Vw(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qB{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var St,Ve;function HB(t){switch(t){case B.OK:return ne(64938);case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0;default:return ne(15467,{code:t})}}function hk(t){if(t===void 0)return wt("GRPC error has no .code"),B.UNKNOWN;switch(t){case St.OK:return B.OK;case St.CANCELLED:return B.CANCELLED;case St.UNKNOWN:return B.UNKNOWN;case St.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case St.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case St.INTERNAL:return B.INTERNAL;case St.UNAVAILABLE:return B.UNAVAILABLE;case St.UNAUTHENTICATED:return B.UNAUTHENTICATED;case St.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case St.NOT_FOUND:return B.NOT_FOUND;case St.ALREADY_EXISTS:return B.ALREADY_EXISTS;case St.PERMISSION_DENIED:return B.PERMISSION_DENIED;case St.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case St.ABORTED:return B.ABORTED;case St.OUT_OF_RANGE:return B.OUT_OF_RANGE;case St.UNIMPLEMENTED:return B.UNIMPLEMENTED;case St.DATA_LOSS:return B.DATA_LOSS;default:return ne(39323,{code:t})}}(Ve=St||(St={}))[Ve.OK=0]="OK",Ve[Ve.CANCELLED=1]="CANCELLED",Ve[Ve.UNKNOWN=2]="UNKNOWN",Ve[Ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ve[Ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ve[Ve.NOT_FOUND=5]="NOT_FOUND",Ve[Ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ve[Ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ve[Ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ve[Ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ve[Ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ve[Ve.ABORTED=10]="ABORTED",Ve[Ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ve[Ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ve[Ve.INTERNAL=13]="INTERNAL",Ve[Ve.UNAVAILABLE=14]="UNAVAILABLE",Ve[Ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WB(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KB=new Di([4294967295,4294967295],0);function vS(t){const e=WB().encode(t),n=new sC;return n.update(e),new Uint8Array(n.digest())}function _S(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Di([n,r],0),new Di([s,i],0)]}class Mw{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Hc(`Invalid padding: ${n}`);if(r<0)throw new Hc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Hc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Hc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Di.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Di.fromNumber(r)));return s.compare(KB)===1&&(s=new Di([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=vS(e),[r,s]=_S(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Mw(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=vS(e),[r,s]=_S(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Hc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Sd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Id(he.min(),s,new Qe(_e),jn(),xe())}}class Sd{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Sd(r,n,xe(),xe(),xe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class fk{constructor(e,n){this.targetId=e,this.Ce=n}}class pk{constructor(e,n,r=yt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class wS{constructor(){this.ve=0,this.Fe=ES(),this.Me=yt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=xe(),n=xe(),r=xe();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ne(38017,{changeType:i})}}),new Sd(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=ES()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,le(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class GB{constructor(e){this.Ge=e,this.ze=new Map,this.je=jn(),this.Je=_h(),this.He=_h(),this.Ye=new Qe(_e)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ne(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Zf(i))if(r===0){const o=new J(i.path);this.et(n,o,gt.newNoDocument(o,he.min()))}else le(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Ns(r).toUint8Array()}catch(l){if(l instanceof OC)return $i("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Mw(o,s,i)}catch(l){return $i(l instanceof Hc?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const a=this.ot(o);if(a){if(i.current&&Zf(a.target)){const l=new J(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,gt.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=xe();this.He.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new Id(e,n,this.Ye,this.je,r);return this.je=jn(),this.Je=_h(),this.He=_h(),this.Ye=new Qe(_e),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new wS,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new ze(_e),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new ze(_e),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new wS),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function _h(){return new Qe(J.comparator)}function ES(){return new Qe(J.comparator)}const QB={asc:"ASCENDING",desc:"DESCENDING"},YB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},XB={and:"AND",or:"OR"};class JB{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Rv(t,e){return t.useProto3Json||em(e)?e:{value:e}}function kl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function mk(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function ZB(t,e){return kl(t,e.toTimestamp())}function pn(t){return le(!!t,49232),he.fromTimestamp(function(n){const r=Ds(n);return new je(r.seconds,r.nanos)}(t))}function Fw(t,e){return Pv(t,e).canonicalString()}function Pv(t,e){const n=function(s){return new Fe(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function gk(t){const e=Fe.fromString(t);return le(Ak(e),10190,{key:e.toString()}),e}function np(t,e){return Fw(t.databaseId,e.path)}function Ko(t,e){const n=gk(e);if(n.get(1)!==t.databaseId.projectId)throw new Q(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Q(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new J(_k(n))}function yk(t,e){return Fw(t.databaseId,e)}function vk(t){const e=gk(t);return e.length===4?Fe.emptyPath():_k(e)}function Cv(t){return new Fe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function _k(t){return le(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function TS(t,e,n){return{name:np(t,e),fields:n.value.mapValue.fields}}function e$(t,e,n){const r=Ko(t,e.name),s=pn(e.updateTime),i=e.createTime?pn(e.createTime):he.min(),o=new rn({mapValue:{fields:e.fields}}),a=gt.newFoundDocument(r,s,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function t$(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ne(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(le(d===void 0||typeof d=="string",58123),yt.fromBase64String(d||"")):(le(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),yt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?B.UNKNOWN:hk(c.code);return new Q(d,c.message||"")}(o);n=new pk(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ko(t,r.document.name),i=pn(r.document.updateTime),o=r.document.createTime?pn(r.document.createTime):he.min(),a=new rn({mapValue:{fields:r.document.fields}}),l=gt.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new tf(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Ko(t,r.document),i=r.readTime?pn(r.readTime):he.min(),o=gt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new tf([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Ko(t,r.document),i=r.removedTargetIds||[];n=new tf([],i,s,null)}else{if(!("filter"in e))return ne(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new qB(s,i),a=r.targetId;n=new fk(a,o)}}return n}function rp(t,e){let n;if(e instanceof Yl)n={update:TS(t,e.key,e.value)};else if(e instanceof cm)n={delete:np(t,e.key)};else if(e instanceof js)n={update:TS(t,e.key,e.data),updateMask:a$(e.fieldMask)};else{if(!(e instanceof dk))return ne(16599,{Vt:e.type});n={verify:np(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Pl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ra)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Cl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Zu)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw ne(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:ZB(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ne(27497)}(t,e.precondition)),n}function kv(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?sn.updateTime(pn(i.updateTime)):i.exists!==void 0?sn.exists(i.exists):sn.none()}(e.currentDocument):sn.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(o,a){let l=null;if("setToServerValue"in a)le(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),l=new Pl;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];l=new ra(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];l=new Cl(d)}else"increment"in a?l=new Zu(o,a.increment):ne(16584,{proto:a});const c=ot.fromServerFormat(a.fieldPath);return new Nw(c,l)}(t,s)):[];if(e.update){e.update.name;const s=Ko(t,e.update.name),i=new rn({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const c=l.fieldPaths||[];return new bn(c.map(d=>ot.fromServerFormat(d)))}(e.updateMask);return new js(s,i,o,n,r)}return new Yl(s,i,n,r)}if(e.delete){const s=Ko(t,e.delete);return new cm(s,n)}if(e.verify){const s=Ko(t,e.verify);return new dk(s,n)}return ne(1463,{proto:e})}function n$(t,e){return t&&t.length>0?(le(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?pn(s.updateTime):pn(i);return o.isEqual(he.min())&&(o=pn(i)),new BB(o,s.transformResults||[])}(n,e))):[]}function wk(t,e){return{documents:[yk(t,e.path)]}}function Ek(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=yk(t,s);const i=function(c){if(c.length!==0)return Sk(Be.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(d=>function(f){return{field:Ra(f.field),direction:s$(f.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Rv(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:s}}function Tk(t){let e=vk(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){le(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(h){const f=Ik(h);return f instanceof Be&&Cw(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(E){return new Ju(Pa(E.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,em(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(h){const f=!!h.before,p=h.values||[];return new xl(p,f)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const f=!h.before,p=h.values||[];return new xl(p,f)}(n.endAt)),YC(e,s,o,i,a,"F",l,c)}function r$(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Ik(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Pa(n.unaryFilter.field);return Ne.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Pa(n.unaryFilter.field);return Ne.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Pa(n.unaryFilter.field);return Ne.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Pa(n.unaryFilter.field);return Ne.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ne(61313);default:return ne(60726)}}(t):t.fieldFilter!==void 0?function(n){return Ne.create(Pa(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ne(58110);default:return ne(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Be.create(n.compositeFilter.filters.map(r=>Ik(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ne(1026)}}(n.compositeFilter.op))}(t):ne(30097,{filter:t})}function s$(t){return QB[t]}function i$(t){return YB[t]}function o$(t){return XB[t]}function Ra(t){return{fieldPath:t.canonicalString()}}function Pa(t){return ot.fromServerFormat(t.fieldPath)}function Sk(t){return t instanceof Ne?function(n){if(n.op==="=="){if(oS(n.value))return{unaryFilter:{field:Ra(n.field),op:"IS_NAN"}};if(iS(n.value))return{unaryFilter:{field:Ra(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(oS(n.value))return{unaryFilter:{field:Ra(n.field),op:"IS_NOT_NAN"}};if(iS(n.value))return{unaryFilter:{field:Ra(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ra(n.field),op:i$(n.op),value:n.value}}}(t):t instanceof Be?function(n){const r=n.getFilters().map(s=>Sk(s));return r.length===1?r[0]:{compositeFilter:{op:o$(n.op),filters:r}}}(t):ne(54877,{filter:t})}function a$(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Ak(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e,n,r,s,i=he.min(),o=he.min(),a=yt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new _s(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(e){this.yt=e}}function l$(t,e){let n;if(e.document)n=e$(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=J.fromSegments(e.noDocument.path),s=ia(e.noDocument.readTime);n=gt.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return ne(56709);{const r=J.fromSegments(e.unknownDocument.path),s=ia(e.unknownDocument.version);n=gt.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime(function(s){const i=new je(s[0],s[1]);return he.fromTimestamp(i)}(e.readTime)),n}function IS(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:sp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,o){return{name:np(i,o.key),fields:o.data.value.mapValue.fields,updateTime:kl(i,o.version.toTimestamp()),createTime:kl(i,o.createTime.toTimestamp())}}(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:sa(e.version)};else{if(!e.isUnknownDocument())return ne(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:sa(e.version)}}return r}function sp(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function sa(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ia(t){const e=new je(t.seconds,t.nanoseconds);return he.fromTimestamp(e)}function Eo(t,e){const n=(e.baseMutations||[]).map(i=>kv(t.yt,i));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map(i=>kv(t.yt,i)),s=je.fromMillis(e.localWriteTimeMs);return new Ow(e.batchId,s,n,r)}function Wc(t){const e=ia(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?ia(t.lastLimboFreeSnapshotVersion):he.min();let r;return r=function(i){return i.documents!==void 0}(t.query)?function(i){const o=i.documents.length;return le(o===1,1966,{count:o}),Hn(Ed(vk(i.documents[0])))}(t.query):function(i){return Hn(Tk(i))}(t.query),new _s(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,yt.fromBase64String(t.resumeToken))}function xk(t,e){const n=sa(e.snapshotVersion),r=sa(e.lastLimboFreeSnapshotVersion);let s;s=Zf(e.target)?wk(t.yt,e.target):Ek(t.yt,e.target).ft;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:na(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function Rk(t){const e=Tk({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?tp(e,e.limit,"L"):e}function Ng(t,e){return new Lw(e.largestBatchId,kv(t.yt,e.overlayMutation))}function SS(t,e){const n=e.path.lastSegment();return[t,on(e.path.popLast()),n]}function AS(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:sa(r.readTime),documentKey:on(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c${getBundleMetadata(e,n){return bS(e).get(n).next(r=>{if(r)return function(i){return{id:i.bundleId,createTime:ia(i.createTime),version:i.version}}(r)})}saveBundleMetadata(e,n){return bS(e).put(function(s){return{bundleId:s.id,createTime:sa(pn(s.createTime)),version:s.version}}(n))}getNamedQuery(e,n){return xS(e).get(n).next(r=>{if(r)return function(i){return{name:i.name,query:Rk(i.bundledQuery),readTime:ia(i.readTime)}}(r)})}saveNamedQuery(e,n){return xS(e).put(function(s){return{name:s.name,readTime:sa(pn(s.readTime)),bundledQuery:s.bundledQuery}}(n))}}function bS(t){return Nt(t,tm)}function xS(t){return Nt(t,nm)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new um(e,r)}getOverlay(e,n){return Rc(e).get(SS(this.userId,n)).next(r=>r?Ng(this.serializer,r):null)}getOverlays(e,n){const r=Yr();return L.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){const s=[];return r.forEach((i,o)=>{const a=new Lw(n,o);s.push(this.St(e,a))}),L.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach(o=>s.add(on(o.getCollectionPath())));const i=[];return s.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(Rc(e).Z(wv,a))}),L.waitFor(i)}getOverlaysForCollection(e,n,r){const s=Yr(),i=on(n),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Rc(e).J(wv,o).next(a=>{for(const l of a){const c=Ng(this.serializer,l);s.set(c.getKey(),c)}return s})}getOverlaysForCollectionGroup(e,n,r,s){const i=Yr();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Rc(e).ee({index:RC,range:a},(l,c,d)=>{const h=Ng(this.serializer,c);i.size()<s||h.largestBatchId===o?(i.set(h.getKey(),h),o=h.largestBatchId):d.done()}).next(()=>i)}St(e,n){return Rc(e).put(function(s,i,o){const[a,l,c]=SS(i,o.mutation.key);return{userId:i,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:rp(s.yt,o.mutation)}}(this.serializer,this.userId,n))}}function Rc(t){return Nt(t,rm)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u${bt(e){return Nt(e,Aw)}getSessionToken(e){return this.bt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?yt.fromUint8Array(r):yt.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(rt(e.integerValue));else if("doubleValue"in e){const r=rt(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),qu(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=Ds(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(Ns(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?jC(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):im(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):ne(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const s of Object.keys(r))this.Ot(s,n),this.Ct(r[s],n)}kt(e,n){var o,a;const r=e.fields||{};this.Ft(n,53);const s=Al,i=((a=(o=r[s].arrayValue)==null?void 0:o.values)==null?void 0:a.length)||0;this.Ft(n,15),n.Mt(rt(i)),this.Ot(s,n),this.Ct(r[s],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const s of r)this.Ct(s,n)}Lt(e,n){this.Ft(n,37),J.fromName(e).path.forEach(r=>{this.Ft(n,60),this.Ut(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}To.Kt=new To;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea=255;function d$(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function RS(t){const e=64-function(r){let s=0;for(let i=0;i<8;++i){const o=d$(255&r[i]);if(s+=o,o!==8)break}return s}(t);return Math.ceil(e/8)}class h${constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const s=n.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const s=n.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(e){const n=this.en(e),r=RS(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}nn(e){const n=this.en(e),r=RS(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}rn(){this.sn(Ea),this.sn(255)}_n(){this.an(Ea),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===Ea?(this.sn(Ea),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===Ea?(this.an(Ea),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class f${constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class p${constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Pc{constructor(){this.cn=new h$,this.ln=new f$(this.cn),this.hn=new p$(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e,n,r,s){this.Tn=e,this.In=n,this.En=r,this.dn=s}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new Io(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:nf(this.En),directionalValue:nf(this.dn),orderedDocumentKey:nf(n),documentKey:r.path.toArray()}}Vn(e,n,r){const s=this.Rn(e,n,r);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function ei(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=PS(t.En,e.En),n!==0?n:(n=PS(t.dn,e.dn),n!==0?n:J.comparator(t.In,e.In)))}function PS(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function nf(t){return AP()?function(n){let r="";for(let s=0;s<n.length;s++)r+=String.fromCharCode(n[s]);return r}(t):t}function CS(t){return typeof t!="string"?t:function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(t)}class kS{constructor(e){this.mn=new ze((n,r)=>ot.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(le(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=yv(e);if(n!==void 0&&!this.wn(n))return!1;const r=yo(e);let s=new Set,i=0,o=0;for(;i<r.length&&this.wn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.mn.size>0){const a=this.mn.getIterator().getNext();if(!s.has(a.field.canonicalString())){const l=r[i];if(!this.Sn(a,l)||!this.bn(this.fn[o++],l))return!1}++i}for(;i<r.length;++i){const a=r[i];if(o>=this.fn.length||!this.bn(this.fn[o++],a))return!1}return!0}Dn(){if(this.pn)return null;let e=new ze(ot.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Gh(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Gh(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Gh(r.field,r.dir==="asc"?0:1)));return new Gf(Gf.UNKNOWN_ID,this.collectionId,n,zu.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pk(t){var n,r;if(le(t instanceof Ne||t instanceof Be,20012),t instanceof Ne){if(t instanceof QC){const s=((r=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:r.map(i=>Ne.create(t.field,"==",i)))||[];return Be.create(s,"or")}return t}const e=t.filters.map(s=>Pk(s));return Be.create(e,t.op)}function m$(t){if(t.getFilters().length===0)return[];const e=Ov(Pk(t));return le(Ck(e),7391),Dv(e)||Nv(e)?[e]:e.getFilters()}function Dv(t){return t instanceof Ne}function Nv(t){return t instanceof Be&&Cw(t)}function Ck(t){return Dv(t)||Nv(t)||function(n){if(n instanceof Be&&Sv(n)){for(const r of n.getFilters())if(!Dv(r)&&!Nv(r))return!1;return!0}return!1}(t)}function Ov(t){if(le(t instanceof Ne||t instanceof Be,34018),t instanceof Ne)return t;if(t.filters.length===1)return Ov(t.filters[0]);const e=t.filters.map(r=>Ov(r));let n=Be.create(e,t.op);return n=ip(n),Ck(n)?n:(le(n instanceof Be,64498),le(Rl(n),40251),le(n.filters.length>1,57927),n.filters.reduce((r,s)=>Uw(r,s)))}function Uw(t,e){let n;return le(t instanceof Ne||t instanceof Be,38388),le(e instanceof Ne||e instanceof Be,25473),n=t instanceof Ne?e instanceof Ne?function(s,i){return Be.create([s,i],"and")}(t,e):DS(t,e):e instanceof Ne?DS(e,t):function(s,i){if(le(s.filters.length>0&&i.filters.length>0,48005),Rl(s)&&Rl(i))return WC(s,i.getFilters());const o=Sv(s)?s:i,a=Sv(s)?i:s,l=o.filters.map(c=>Uw(c,a));return Be.create(l,"or")}(t,e),ip(n)}function DS(t,e){if(Rl(e))return WC(e,t.getFilters());{const n=e.filters.map(r=>Uw(t,r));return Be.create(n,"or")}}function ip(t){if(le(t instanceof Ne||t instanceof Be,11850),t instanceof Ne)return t;const e=t.getFilters();if(e.length===1)return ip(e[0]);if(qC(t))return t;const n=e.map(s=>ip(s)),r=[];return n.forEach(s=>{s instanceof Ne?r.push(s):s instanceof Be&&(s.op===t.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:Be.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g${constructor(){this.Cn=new jw}addToCollectionParentIndex(e,n){return this.Cn.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(Kn.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(Kn.min())}updateCollectionGroup(e,n,r){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class jw{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new ze(Fe.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ze(Fe.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NS="IndexedDbIndexManager",wh=new Uint8Array(0);class y${constructor(e,n){this.databaseId=n,this.vn=new jw,this.Fn=new Us(r=>na(r),(r,s)=>wd(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(()=>{this.vn.add(n)});const i={collectionId:r,parent:on(s)};return OS(e).put(i)}return L.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[fC(n),""],!1,!0);return OS(e).J(s).next(i=>{for(const o of i){if(o.collectionId!==n)break;r.push(Qr(o.parent))}return r})}addFieldIndex(e,n){const r=Cc(e),s=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete s.indexId;const i=r.add(s);if(n.indexState){const o=Ia(e);return i.next(a=>{o.put(AS(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return i.next()}deleteFieldIndex(e,n){const r=Cc(e),s=Ia(e),i=Ta(e);return r.delete(n.indexId).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Cc(e),r=Ta(e),s=Ia(e);return n.Z().next(()=>r.Z()).next(()=>s.Z())}createTargetIndexes(e,n){return L.forEach(this.Mn(n),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const i=new kS(r).Dn();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,n){const r=Ta(e);let s=!0;const i=new Map;return L.forEach(this.Mn(n),o=>this.xn(e,o).next(a=>{s&&(s=!!a),i.set(o,a)})).next(()=>{if(s){let o=xe();const a=[];return L.forEach(i,(l,c)=>{W(NS,`Using index ${function(T){return`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(R=>`${R.fieldPath}:${R.kind}`).join(",")}`}(l)} to execute ${na(n)}`);const d=function(T,R){const O=yv(R);if(O===void 0)return null;for(const V of ep(T,O.fieldPath))switch(V.op){case"array-contains-any":return V.value.arrayValue.values||[];case"array-contains":return[V.value]}return null}(c,l),h=function(T,R){const O=new Map;for(const V of yo(R))for(const S of ep(T,V.fieldPath))switch(S.op){case"==":case"in":O.set(V.fieldPath.canonicalString(),S.value);break;case"not-in":case"!=":return O.set(V.fieldPath.canonicalString(),S.value),Array.from(O.values())}return null}(c,l),f=function(T,R){const O=[];let V=!0;for(const S of yo(R)){const I=S.kind===0?dS(T,S.fieldPath,T.startAt):hS(T,S.fieldPath,T.startAt);O.push(I.value),V&&(V=I.inclusive)}return new xl(O,V)}(c,l),p=function(T,R){const O=[];let V=!0;for(const S of yo(R)){const I=S.kind===0?hS(T,S.fieldPath,T.endAt):dS(T,S.fieldPath,T.endAt);O.push(I.value),V&&(V=I.inclusive)}return new xl(O,V)}(c,l),E=this.On(l,c,f),g=this.On(l,c,p),y=this.Nn(l,c,h),_=this.Bn(l.indexId,d,E,f.inclusive,g,p.inclusive,y);return L.forEach(_,w=>r.Y(w,n.limit).next(T=>{T.forEach(R=>{const O=J.fromSegments(R.documentKey);o.has(O)||(o=o.add(O),a.push(O))})}))}).next(()=>a)}return L.resolve(null)})}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=m$(Be.create(e.filters,"and")).map(r=>bv(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,n),n)}Bn(e,n,r,s,i,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,i.length),c=l/(n!=null?n.length:1),d=[];for(let h=0;h<l;++h){const f=n?this.Ln(n[h/c]):wh,p=this.kn(e,f,r[h%c],s),E=this.qn(e,f,i[h%c],o),g=a.map(y=>this.kn(e,f,y,!0));d.push(...this.createRange(p,E,g))}return d}kn(e,n,r,s){const i=new Io(e,J.empty(),n,r);return s?i:i.An()}qn(e,n,r,s){const i=new Io(e,J.empty(),n,r);return s?i.An():i}xn(e,n){const r=new kS(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let o=null;for(const a of i)r.yn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const s=this.Mn(n);return L.forEach(s,i=>this.xn(e,i).next(o=>{o?r!==0&&o.fields.length<function(l){let c=new ze(ot.comparator),d=!1;for(const h of l.filters)for(const f of h.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?d=!0:c=c.add(f.field));for(const h of l.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(d?1:0)}(i)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&s.length>1&&r===2?1:r)}Qn(e,n){const r=new Pc;for(const s of yo(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const o=r.Pn(s.kind);To.Kt.Dt(i,o)}return r.un()}Ln(e){const n=new Pc;return To.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new Pc;return To.Kt.Dt(Yu(this.databaseId,n),r.Pn(function(i){const o=yo(i);return o.length===0?0:o[o.length-1].kind}(e))),r.un()}Nn(e,n,r){if(r===null)return[];let s=[];s.push(new Pc);let i=0;for(const o of yo(e)){const a=r[i++];for(const l of s)if(this.Un(n,o.fieldPath)&&Xu(a))s=this.Kn(s,o,a);else{const c=l.Pn(o.kind);To.Kt.Dt(a,c)}}return this.Wn(s)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const a of s){const l=new Pc;l.seed(a.un()),To.Kt.Dt(o,l.Pn(n.kind)),i.push(l)}return i}Un(e,n){return!!e.filters.find(r=>r instanceof Ne&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Cc(e),s=Ia(e);return(n?r.J(_v,IDBKeyRange.bound(n,n)):r.J()).next(i=>{const o=[];return L.forEach(i,a=>s.get([a.indexId,this.uid]).next(l=>{o.push(function(d,h){const f=h?new zu(h.sequenceNumber,new Kn(ia(h.readTime),new J(Qr(h.documentKey)),h.largestBatchId)):zu.empty(),p=d.fields.map(([E,g])=>new Gh(ot.fromServerFormat(E),g));return new Gf(d.indexId,d.collectionGroup,p,f)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:_e(r.collectionGroup,s.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const s=Cc(e),i=Ia(e);return this.Gn(e).next(o=>s.J(_v,IDBKeyRange.bound(n,n)).next(a=>L.forEach(a,l=>i.put(AS(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return L.forEach(n,(s,i)=>{const o=r.get(s.collectionGroup);return(o?L.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next(a=>(r.set(s.collectionGroup,a),L.forEach(a,l=>this.zn(e,s,l).next(c=>{const d=this.jn(i,l);return c.isEqual(d)?L.resolve():this.Jn(e,i,l,c,d)}))))})}Hn(e,n,r,s){return Ta(e).put(s.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,s){return Ta(e).delete(s.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const s=Ta(e);let i=new ze(ei);return s.ee({index:xC,range:IDBKeyRange.only([r.indexId,this.uid,nf(this.$n(r,n))])},(o,a)=>{i=i.add(new Io(r.indexId,n,CS(a.arrayValue),CS(a.directionalValue)))}).next(()=>i)}jn(e,n){let r=new ze(ei);const s=this.Qn(n,e);if(s==null)return r;const i=yv(n);if(i!=null){const o=e.data.field(i.fieldPath);if(Xu(o))for(const a of o.arrayValue.values||[])r=r.add(new Io(n.indexId,e.key,this.Ln(a),s))}else r=r.add(new Io(n.indexId,e.key,wh,s));return r}Jn(e,n,r,s,i){W(NS,"Updating index entries for document '%s'",n.key);const o=[];return function(l,c,d,h,f){const p=l.getIterator(),E=c.getIterator();let g=wa(p),y=wa(E);for(;g||y;){let _=!1,w=!1;if(g&&y){const T=d(g,y);T<0?w=!0:T>0&&(_=!0)}else g!=null?w=!0:_=!0;_?(h(y),y=wa(E)):w?(f(g),g=wa(p)):(g=wa(p),y=wa(E))}}(s,i,ei,a=>{o.push(this.Hn(e,n,r,a))},a=>{o.push(this.Yn(e,n,r,a))}),L.waitFor(o)}Gn(e){let n=1;return Ia(e).ee({index:bC,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,i)=>{i.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>ei(o,a)).filter((o,a,l)=>!a||ei(o,l[a-1])!==0);const s=[];s.push(e);for(const o of r){const a=ei(o,e),l=ei(o,n);if(a===0)s[0]=e.An();else if(a>0&&l<0)s.push(o),s.push(o.An());else if(l>0)break}s.push(n);const i=[];for(let o=0;o<s.length;o+=2){if(this.Zn(s[o],s[o+1]))return[];const a=s[o].Vn(this.uid,wh,J.empty()),l=s[o+1].Vn(this.uid,wh,J.empty());i.push(IDBKeyRange.bound(a,l))}return i}Zn(e,n){return ei(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(VS)}getMinOffset(e,n){return L.mapArray(this.Mn(n),r=>this.xn(e,r).next(s=>s||ne(44426))).next(VS)}}function OS(t){return Nt(t,Ku)}function Ta(t){return Nt(t,lu)}function Cc(t){return Nt(t,Sw)}function Ia(t){return Nt(t,au)}function VS(t){le(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;Ew(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new Kn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},kk=41943040;class tn{static withCacheSize(e){return new tn(e,tn.DEFAULT_COLLECTION_PERCENTILE,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dk(t,e,n){const r=t.store(gr),s=t.store(El),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.ee({range:o},(d,h,f)=>(a++,f.delete()));i.push(l.next(()=>{le(a===1,47070,{batchId:n.batchId})}));const c=[];for(const d of n.mutations){const h=IC(e,d.key.path,n.batchId);i.push(s.delete(h)),c.push(d.key)}return L.waitFor(i).next(()=>c)}function op(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ne(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */tn.DEFAULT_COLLECTION_PERCENTILE=10,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,tn.DEFAULT=new tn(kk,tn.DEFAULT_COLLECTION_PERCENTILE,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),tn.DISABLED=new tn(-1,0,0);class dm{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.Xn={}}static wt(e,n,r,s){le(e.uid!=="",64387);const i=e.isAuthenticated()?e.uid:"";return new dm(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ti(e).ee({index:Po,range:r},(s,i,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,s){const i=Ca(e),o=ti(e);return o.add({}).next(a=>{le(typeof a=="number",49019);const l=new Ow(a,n,r,s),c=function(p,E,g){const y=g.baseMutations.map(w=>rp(p.yt,w)),_=g.mutations.map(w=>rp(p.yt,w));return{userId:E,batchId:g.batchId,localWriteTimeMs:g.localWriteTime.toMillis(),baseMutations:y,mutations:_}}(this.serializer,this.userId,l),d=[];let h=new ze((f,p)=>_e(f.canonicalString(),p.canonicalString()));for(const f of s){const p=IC(this.userId,f.key.path,a);h=h.add(f.key.path.popLast()),d.push(o.put(c)),d.push(i.put(p,Q5))}return h.forEach(f=>{d.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Xn[a]=l.keys()}),L.waitFor(d).next(()=>l)})}lookupMutationBatch(e,n){return ti(e).get(n).next(r=>r?(le(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),Eo(this.serializer,r)):null)}er(e,n){return this.Xn[n]?L.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const s=r.keys();return this.Xn[n]=s,s}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return ti(e).ee({index:Po,range:s},(o,a,l)=>{a.userId===this.userId&&(le(a.batchId>=r,47524,{tr:r}),i=Eo(this.serializer,a)),l.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Ho;return ti(e).ee({index:Po,range:n,reverse:!0},(s,i,o)=>{r=i.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,Ho],[this.userId,Number.POSITIVE_INFINITY]);return ti(e).J(Po,n).next(r=>r.map(s=>Eo(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Qh(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return Ca(e).ee({range:s},(o,a,l)=>{const[c,d,h]=o,f=Qr(d);if(c===this.userId&&n.path.isEqual(f))return ti(e).get(h).next(p=>{if(!p)throw ne(61480,{nr:o,batchId:h});le(p.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:p.userId,batchId:h}),i.push(Eo(this.serializer,p))});l.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ze(_e);const s=[];return n.forEach(i=>{const o=Qh(this.userId,i.path),a=IDBKeyRange.lowerBound(o),l=Ca(e).ee({range:a},(c,d,h)=>{const[f,p,E]=c,g=Qr(p);f===this.userId&&i.path.isEqual(g)?r=r.add(E):h.done()});s.push(l)}),L.waitFor(s).next(()=>this.rr(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=Qh(this.userId,r),o=IDBKeyRange.lowerBound(i);let a=new ze(_e);return Ca(e).ee({range:o},(l,c,d)=>{const[h,f,p]=l,E=Qr(f);h===this.userId&&r.isPrefixOf(E)?E.length===s&&(a=a.add(p)):d.done()}).next(()=>this.rr(e,a))}rr(e,n){const r=[],s=[];return n.forEach(i=>{s.push(ti(e).get(i).next(o=>{if(o===null)throw ne(35274,{batchId:i});le(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:i}),r.push(Eo(this.serializer,o))}))}),L.waitFor(s).next(()=>r)}removeMutationBatch(e,n){return Dk(e.le,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.ir(n.batchId)}),L.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return L.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),s=[];return Ca(e).ee({range:r},(i,o,a)=>{if(i[0]===this.userId){const l=Qr(i[1]);s.push(l)}else a.done()}).next(()=>{le(s.length===0,56720,{sr:s.map(i=>i.canonicalString())})})})}containsKey(e,n){return Nk(e,this.userId,n)}_r(e){return Ok(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:Ho,lastStreamToken:""})}}function Nk(t,e,n){const r=Qh(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return Ca(t).ee({range:i,X:!0},(a,l,c)=>{const[d,h,f]=a;d===e&&h===s&&(o=!0),c.done()}).next(()=>o)}function ti(t){return Nt(t,gr)}function Ca(t){return Nt(t,El)}function Ok(t){return Nt(t,Hu)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new oa(0)}static cr(){return new oa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v${constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next(n=>{const r=new oa(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(n=>he.fromTimestamp(new je(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.lr(e).next(s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.hr(e,s)))}addTargetData(e,n){return this.Pr(e,n).next(()=>this.lr(e).next(r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Sa(e).delete(n.targetId)).next(()=>this.lr(e)).next(r=>(le(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r)))}removeTargets(e,n,r){let s=0;const i=[];return Sa(e).ee((o,a)=>{const l=Wc(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(s++,i.push(this.removeTargetData(e,l)))}).next(()=>L.waitFor(i)).next(()=>s)}forEachTarget(e,n){return Sa(e).ee((r,s)=>{const i=Wc(s);n(i)})}lr(e){return MS(e).get(Xf).next(n=>(le(n!==null,2888),n))}hr(e,n){return MS(e).put(Xf,n)}Pr(e,n){return Sa(e).put(xk(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next(n=>n.targetCount)}getTargetData(e,n){const r=na(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return Sa(e).ee({range:s,index:AC},(o,a,l)=>{const c=Wc(a);wd(n,c.target)&&(i=c,l.done())}).next(()=>i)}addMatchingKeys(e,n,r){const s=[],i=li(e);return n.forEach(o=>{const a=on(o.path);s.push(i.put({targetId:r,path:a})),s.push(this.referenceDelegate.addReference(e,r,o))}),L.waitFor(s)}removeMatchingKeys(e,n,r){const s=li(e);return L.forEach(n,i=>{const o=on(i.path);return L.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])})}removeMatchingKeysForTargetId(e,n){const r=li(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=li(e);let i=xe();return s.ee({range:r,X:!0},(o,a,l)=>{const c=Qr(o[1]),d=new J(c);i=i.add(d)}).next(()=>i)}containsKey(e,n){const r=on(n.path),s=IDBKeyRange.bound([r],[fC(r)],!1,!0);let i=0;return li(e).ee({index:Iw,X:!0,range:s},([o,a],l,c)=>{o!==0&&(i++,c.done())}).next(()=>i>0)}At(e,n){return Sa(e).get(n).next(r=>r?Wc(r):null)}}function Sa(t){return Nt(t,Tl)}function MS(t){return Nt(t,Wo)}function li(t){return Nt(t,Il)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS="LruGarbageCollector",Vk=1048576;function US([t,e],[n,r]){const s=_e(t,n);return s===0?_e(e,r):s}class _${constructor(e){this.Ir=e,this.buffer=new ze(US),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();US(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Lk{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){W(FS,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ro(n)?W(FS,"Ignoring IndexedDB error during garbage collection: ",n):await no(n)}await this.Vr(3e5)})}}class w${constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return L.resolve(An.ce);const r=new _$(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(W("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(LS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(W("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),LS):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,a,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(W("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,o=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(i=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),ba()<=Ce.DEBUG&&W("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:h})))}}function Mk(t,e){return new w$(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E${constructor(e,n){this.db=e,this.garbageCollector=Mk(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,(r,s)=>n(s))}addReference(e,n,r){return Eh(e,r)}removeReference(e,n,r){return Eh(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Eh(e,n)}br(e,n){return function(s,i){let o=!1;return Ok(s).te(a=>Nk(s,a,i).next(l=>(l&&(o=!0),L.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.Sr(e,(o,a)=>{if(a<=n){const l=this.br(e,o).next(c=>{if(!c)return i++,r.getEntry(e,o).next(()=>(r.removeEntry(o,he.min()),li(e).delete(function(h){return[0,on(h.path)]}(o))))});s.push(l)}}).next(()=>L.waitFor(s)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Eh(e,n)}Sr(e,n){const r=li(e);let s,i=An.ce;return r.ee({index:Iw},([o,a],{path:l,sequenceNumber:c})=>{o===0?(i!==An.ce&&n(new J(Qr(s)),i),i=c,s=l):i=An.ce}).next(()=>{i!==An.ce&&n(new J(Qr(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Eh(t,e){return li(t).put(function(r,s){return{targetId:0,path:on(r.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(){this.changes=new Us(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,gt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T${constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return fo(e).put(r)}removeEntry(e,n,r){return fo(e).delete(function(i,o){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],sp(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Dr(e,r)))}getEntry(e,n){let r=gt.newInvalidDocument(n);return fo(e).ee({index:Yh,range:IDBKeyRange.only(kc(n))},(s,i)=>{r=this.Cr(n,i)}).next(()=>r)}vr(e,n){let r={size:0,document:gt.newInvalidDocument(n)};return fo(e).ee({index:Yh,range:IDBKeyRange.only(kc(n))},(s,i)=>{r={document:this.Cr(n,i),size:op(i)}}).next(()=>r)}getEntries(e,n){let r=jn();return this.Fr(e,n,(s,i)=>{const o=this.Cr(s,i);r=r.insert(s,o)}).next(()=>r)}Mr(e,n){let r=jn(),s=new Qe(J.comparator);return this.Fr(e,n,(i,o)=>{const a=this.Cr(i,o);r=r.insert(i,a),s=s.insert(i,op(o))}).next(()=>({documents:r,Or:s}))}Fr(e,n,r){if(n.isEmpty())return L.resolve();let s=new ze($S);n.forEach(l=>s=s.add(l));const i=IDBKeyRange.bound(kc(s.first()),kc(s.last())),o=s.getIterator();let a=o.getNext();return fo(e).ee({index:Yh,range:i},(l,c,d)=>{const h=J.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&$S(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?d.j(kc(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,s,i){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),sp(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return fo(e).J(IDBKeyRange.bound(a,l,!0)).next(c=>{i==null||i.incrementDocumentReadCount(c.length);let d=jn();for(const h of c){const f=this.Cr(J.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);f.isFoundDocument()&&(Td(n,f)||s.has(f.key))&&(d=d.insert(f.key,f))}return d})}getAllFromCollectionGroup(e,n,r,s){let i=jn();const o=BS(n,r),a=BS(n,Kn.max());return fo(e).ee({index:SC,range:IDBKeyRange.bound(o,a,!0)},(l,c,d)=>{const h=this.Cr(J.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);i=i.insert(h.key,h),i.size===s&&d.done()}).next(()=>i)}newChangeBuffer(e){return new I$(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return jS(e).get(vv).next(n=>(le(!!n,20021),n))}Dr(e,n){return jS(e).put(vv,n)}Cr(e,n){if(n){const r=l$(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(he.min())))return r}return gt.newInvalidDocument(e)}}function Uk(t){return new T$(t)}class I$ extends Fk{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new Us(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const n=[];let r=0,s=new ze((i,o)=>_e(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const a=this.Br.get(i);if(n.push(this.Nr.removeEntry(e,i,a.readTime)),o.isValidDocument()){const l=IS(this.Nr.serializer,o);s=s.add(i.path.popLast());const c=op(l);r+=c-a.size,n.push(this.Nr.addEntry(e,i,l))}else if(r-=a.size,this.trackRemovals){const l=IS(this.Nr.serializer,o.convertToNoDocument(he.min()));n.push(this.Nr.addEntry(e,i,l))}}),s.forEach(i=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,i))}),n.push(this.Nr.updateMetadata(e,r)),L.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next(r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next(({documents:r,Or:s})=>(s.forEach((i,o)=>{this.Br.set(i,{size:o,readTime:r.get(i).readTime})}),r))}}function jS(t){return Nt(t,Wu)}function fo(t){return Nt(t,Yf)}function kc(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function BS(t,e){const n=e.documentKey.path.toArray();return[t,sp(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function $S(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=_e(n[i],r[i]),s)return s;return s=_e(n.length,r.length),s||(s=_e(n[n.length-2],r[r.length-2]),s||_e(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S${constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&hu(r.mutation,s,bn.empty(),je.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,xe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=xe()){const s=Yr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=qc();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Yr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,xe()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=jn();const o=du(),a=function(){return du()}();return n.forEach((l,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof js)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),hu(d.mutation,c,d.mutation.getFieldMask(),je.now())):o.set(c.key,bn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>a.set(c,new S$(d,o.get(c)??null))),a))}recalculateAndSaveOverlays(e,n){const r=du();let s=new Qe((o,a)=>o-a),i=xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||bn.empty();d=a.applyToLocalView(c,d),r.set(l,d);const h=(s.get(a.batchId)||xe()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,h=rk();d.forEach(f=>{if(!i.has(f)){const p=ck(n.get(f),r.get(f));p!==null&&h.set(f,p),i=i.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return L.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return J.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):XC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):L.resolve(Yr());let a=wl,l=i;return o.next(c=>L.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(d)?L.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{l=l.insert(d,f)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,xe())).next(d=>({batchId:a,changes:nk(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new J(n)).next(r=>{let s=qc();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=qc();return this.indexManager.getCollectionParents(e,i).next(a=>L.forEach(a,l=>{const c=function(h,f){return new Ql(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(d=>{d.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,gt.newInvalidDocument(d)))});let a=qc();return o.forEach((l,c)=>{const d=i.get(l);d!==void 0&&hu(d.mutation,c,bn.empty(),je.now()),Td(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A${constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return L.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:pn(s.createTime)}}(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:Rk(s.bundledQuery),readTime:pn(s.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b${constructor(){this.overlays=new Qe(J.comparator),this.qr=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Yr();return L.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),L.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),L.resolve()}getOverlaysForCollection(e,n,r){const s=Yr(),i=n.length+1,o=new J(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return L.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Qe((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=Yr(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=Yr(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return L.resolve(a)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Lw(n,r));let i=this.qr.get(n);i===void 0&&(i=xe(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x${constructor(){this.sessionToken=yt.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(){this.Qr=new ze(Ut.$r),this.Ur=new ze(Ut.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Ut(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Ut(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new J(new Fe([])),r=new Ut(n,e),s=new Ut(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new J(new Fe([])),r=new Ut(n,e),s=new Ut(n,e+1);let i=xe();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ut(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ut{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return J.comparator(e.key,n.key)||_e(e.Yr,n.Yr)}static Kr(e,n){return _e(e.Yr,n.Yr)||J.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R${constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ze(Ut.$r)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Ow(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Zr=this.Zr.add(new Ut(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return L.resolve(o)}lookupMutationBatch(e,n){return L.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return L.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?Ho:this.tr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ut(n,0),s=new Ut(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const a=this.Xr(o.Yr);i.push(a)}),L.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ze(_e);return n.forEach(s=>{const i=new Ut(s,0),o=new Ut(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],a=>{r=r.add(a.Yr)})}),L.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;J.isDocumentKey(i)||(i=i.child(""));const o=new Ut(new J(i),0);let a=new ze(_e);return this.Zr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.Yr)),!0)},o),L.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){le(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return L.forEach(n.mutations,s=>{const i=new Ut(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Ut(n,0),s=this.Zr.firstAfterOrEqual(r);return L.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P${constructor(e){this.ri=e,this.docs=function(){return new Qe(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():gt.newInvalidDocument(n))}getEntries(e,n){let r=jn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():gt.newInvalidDocument(s))}),L.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=jn();const o=n.path,a=new J(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Ew(vC(d),r)<=0||(s.has(d.key)||Td(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return L.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ne(9500)}ii(e,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new C$(this)}getSize(e){return L.resolve(this.size)}}class C$ extends Fk{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),L.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k${constructor(e){this.persistence=e,this.si=new Us(n=>na(n),wd),this.lastRemoteSnapshotVersion=he.min(),this.highestTargetId=0,this.oi=0,this._i=new Bw,this.targetCount=0,this.ai=oa.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),L.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new oa(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.Pr(n),L.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),L.waitFor(i).next(()=>s)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return L.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),L.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),L.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),L.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return L.resolve(r)}containsKey(e,n){return L.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(e,n){this.ui={},this.overlays={},this.ci=new An(0),this.li=!1,this.li=!0,this.hi=new x$,this.referenceDelegate=e(this),this.Pi=new k$(this),this.indexManager=new g$,this.remoteDocumentCache=function(s){return new P$(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new bk(n),this.Ii=new A$(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new b$,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new R$(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){W("MemoryPersistence","Starting transaction:",e);const s=new D$(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return L.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class D$ extends wC{constructor(e){super(),this.currentSequenceNumber=e}}class hm{constructor(e){this.persistence=e,this.Ri=new Bw,this.Vi=null}static mi(e){return new hm(e)}get fi(){if(this.Vi)return this.Vi;throw ne(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),L.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),L.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.fi,r=>{const s=J.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,he.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return L.or([()=>L.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class ap{constructor(e,n){this.persistence=e,this.pi=new Us(r=>on(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=Mk(this,n)}static mi(e,n){return new ap(e,n)}Ei(){}di(e){return L.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return L.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?L.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,i.removeEntry(o,he.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),L.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),L.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Jh(e.data.value)),n}br(e,n,r){return L.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return L.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N${constructor(e){this.serializer=e}k(e,n,r,s){const i=new Zp("createOrUpgrade",n);r<1&&s>=1&&(function(l){l.createObjectStore(_d)}(e),function(l){l.createObjectStore(Hu,{keyPath:G5}),l.createObjectStore(gr,{keyPath:ZI,autoIncrement:!0}).createIndex(Po,eS,{unique:!0}),l.createObjectStore(El)}(e),zS(e),function(l){l.createObjectStore(vo)}(e));let o=L.resolve();return r<3&&s>=3&&(r!==0&&(function(l){l.deleteObjectStore(Il),l.deleteObjectStore(Tl),l.deleteObjectStore(Wo)}(e),zS(e)),o=o.next(()=>function(l){const c=l.store(Wo),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:he.min().toTimestamp(),targetCount:0};return c.put(Xf,d)}(i))),r<4&&s>=4&&(r!==0&&(o=o.next(()=>function(l,c){return c.store(gr).J().next(h=>{l.deleteObjectStore(gr),l.createObjectStore(gr,{keyPath:ZI,autoIncrement:!0}).createIndex(Po,eS,{unique:!0});const f=c.store(gr),p=h.map(E=>f.put(E));return L.waitFor(p)})}(e,i))),o=o.next(()=>{(function(l){l.createObjectStore(Sl,{keyPath:rB})})(e)})),r<5&&s>=5&&(o=o.next(()=>this.yi(i))),r<6&&s>=6&&(o=o.next(()=>(function(l){l.createObjectStore(Wu)}(e),this.wi(i)))),r<7&&s>=7&&(o=o.next(()=>this.Si(i))),r<8&&s>=8&&(o=o.next(()=>this.bi(e,i))),r<9&&s>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(o=o.next(()=>this.Di(i))),r<11&&s>=11&&(o=o.next(()=>{(function(l){l.createObjectStore(tm,{keyPath:sB})})(e),function(l){l.createObjectStore(nm,{keyPath:iB})}(e)})),r<12&&s>=12&&(o=o.next(()=>{(function(l){const c=l.createObjectStore(rm,{keyPath:hB});c.createIndex(wv,fB,{unique:!1}),c.createIndex(RC,pB,{unique:!1})})(e)})),r<13&&s>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore(Yf,{keyPath:Y5});c.createIndex(Yh,X5),c.createIndex(SC,J5)}(e)).next(()=>this.Ci(e,i)).next(()=>e.deleteObjectStore(vo))),r<14&&s>=14&&(o=o.next(()=>this.Fi(e,i))),r<15&&s>=15&&(o=o.next(()=>function(l){l.createObjectStore(Sw,{keyPath:oB,autoIncrement:!0}).createIndex(_v,aB,{unique:!1}),l.createObjectStore(au,{keyPath:lB}).createIndex(bC,cB,{unique:!1}),l.createObjectStore(lu,{keyPath:uB}).createIndex(xC,dB,{unique:!1})}(e))),r<16&&s>=16&&(o=o.next(()=>{n.objectStore(au).clear()}).next(()=>{n.objectStore(lu).clear()})),r<17&&s>=17&&(o=o.next(()=>{(function(l){l.createObjectStore(Aw,{keyPath:mB})})(e)})),r<18&&s>=18&&AP()&&(o=o.next(()=>{n.objectStore(au).clear()}).next(()=>{n.objectStore(lu).clear()})),o}wi(e){let n=0;return e.store(vo).ee((r,s)=>{n+=op(s)}).next(()=>{const r={byteSize:n};return e.store(Wu).put(vv,r)})}yi(e){const n=e.store(Hu),r=e.store(gr);return n.J().next(s=>L.forEach(s,i=>{const o=IDBKeyRange.bound([i.userId,Ho],[i.userId,i.lastAcknowledgedBatchId]);return r.J(Po,o).next(a=>L.forEach(a,l=>{le(l.userId===i.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const c=Eo(this.serializer,l);return Dk(e,i.userId,c).next(()=>{})}))}))}Si(e){const n=e.store(Il),r=e.store(vo);return e.store(Wo).get(Xf).next(s=>{const i=[];return r.ee((o,a)=>{const l=new Fe(o),c=function(h){return[0,on(h)]}(l);i.push(n.get(c).next(d=>d?L.resolve():(h=>n.put({targetId:0,path:on(h),sequenceNumber:s.highestListenSequenceNumber}))(l)))}).next(()=>L.waitFor(i))})}bi(e,n){e.createObjectStore(Ku,{keyPath:nB});const r=n.store(Ku),s=new jw,i=o=>{if(s.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:on(l)})}};return n.store(vo).ee({X:!0},(o,a)=>{const l=new Fe(o);return i(l.popLast())}).next(()=>n.store(El).ee({X:!0},([o,a,l],c)=>{const d=Qr(a);return i(d.popLast())}))}Di(e){const n=e.store(Tl);return n.ee((r,s)=>{const i=Wc(s),o=xk(this.serializer,i);return n.put(o)})}Ci(e,n){const r=n.store(vo),s=[];return r.ee((i,o)=>{const a=n.store(Yf),l=function(h){return h.document?new J(Fe.fromString(h.document.name).popFirst(5)):h.noDocument?J.fromSegments(h.noDocument.path):h.unknownDocument?J.fromSegments(h.unknownDocument.path):ne(36783)}(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(c))}).next(()=>L.waitFor(s))}Fi(e,n){const r=n.store(gr),s=Uk(this.serializer),i=new $w(hm.mi,this.serializer.yt);return r.J().next(o=>{const a=new Map;return o.forEach(l=>{let c=a.get(l.userId)??xe();Eo(this.serializer,l).keys().forEach(d=>c=c.add(d)),a.set(l.userId,c)}),L.forEach(a,(l,c)=>{const d=new en(c),h=um.wt(this.serializer,d),f=i.getIndexManager(d),p=dm.wt(d,this.serializer,f,i.referenceDelegate);return new jk(s,p,h,f).recalculateAndSaveOverlaysForDocumentKeys(new Ev(n,An.ce),l).next()})})}}function zS(t){t.createObjectStore(Il,{keyPath:eB}).createIndex(Iw,tB,{unique:!0}),t.createObjectStore(Tl,{keyPath:"targetId"}).createIndex(AC,Z5,{unique:!0}),t.createObjectStore(Wo)}const ni="IndexedDbPersistence",Og=18e5,Vg=5e3,Lg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",O$="main";class zw{constructor(e,n,r,s,i,o,a,l,c,d,h=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=i,this.window=o,this.document=a,this.xi=c,this.Oi=d,this.Ni=h,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=f=>Promise.resolve(),!zw.v())throw new Q(B.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new E$(this,s),this.$i=n+O$,this.serializer=new bk(l),this.Ui=new Ni(this.$i,this.Ni,new N$(this.serializer)),this.hi=new u$,this.Pi=new v$(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Uk(this.serializer),this.Ii=new c$,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,d===!1&&wt(ni,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Q(B.FAILED_PRECONDITION,Lg);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new An(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Th(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(n=>this.isPrimary&&!n?this.Zi(e).next(()=>!1):!!n&&this.Xi(e).next(()=>!0))).catch(e=>{if(ro(e))return W(ni,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return W(ni,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return Dc(e).get(_a).next(n=>L.resolve(this.es(n)))}ts(e){return Th(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Og)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Nt(n,Sl);return r.J().next(s=>{const i=this.ss(s,Og),o=s.filter(a=>i.indexOf(a)===-1);return L.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?L.resolve(!0):Dc(e).get(_a).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Vg)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new Q(B.FAILED_PRECONDITION,Lg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Th(e).J().next(r=>this.ss(r,Vg).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(i||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&W(ni,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[_d,Sl],e=>{const n=new Ev(e,An.ce);return this.Zi(n).next(()=>this.ts(n))}),this.Ui.close(),this.Ps()}ss(e,n){return e.filter(r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>Th(e).J().next(n=>this.ss(n,Og).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return dm.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new y$(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return um.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){W(ni,"Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=function(l){return l===18?vB:l===17?DC:l===16?yB:l===15?bw:l===14?kC:l===13?CC:l===12?gB:l===11?PC:void ne(60245)}(this.Ni);let o;return this.Ui.runTransaction(e,s,i,a=>(o=new Ev(a,this.ci?this.ci.next():An.ce),n==="readwrite-primary"?this.Hi(o).next(l=>!!l||this.Yi(o)).next(l=>{if(!l)throw wt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new Q(B.FAILED_PRECONDITION,_C);return r(o)}).next(l=>this.Xi(o).next(()=>l)):this.Is(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Is(e){return Dc(e).get(_a).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Vg)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Q(B.FAILED_PRECONDITION,Lg)})}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Dc(e).put(_a,n)}static v(){return Ni.v()}Zi(e){const n=Dc(e);return n.get(_a).next(r=>this.es(r)?(W(ni,"Releasing primary lease."),n.delete(_a)):L.resolve())}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(wt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;SP()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const r=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return W(ni,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return wt(ni,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){wt("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Dc(t){return Nt(t,_d)}function Th(t){return Nt(t,Sl)}function Bk(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=xe(),s=xe();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new qw(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V${constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return SP()?8:EC(Gt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new V$;return this.Ss(e,n,o).next(a=>{if(i.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(ba()<=Ce.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",xa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),L.resolve()):(ba()<=Ce.DEBUG&&W("QueryEngine","Query:",xa(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(ba()<=Ce.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",xa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Hn(n))):L.resolve())}ys(e,n){if(fS(n))return L.resolve(null);let r=Hn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=tp(n,null,"F"),r=Hn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=xe(...i);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Ds(n,a);return this.Cs(n,c,o,l.readTime)?this.ys(e,tp(n,null,"F")):this.vs(e,c,n,l)}))})))}ws(e,n,r,s){return fS(n)||s.isEqual(he.min())?L.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?L.resolve(null):(ba()<=Ce.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),xa(n)),this.vs(e,o,n,yC(s,wl)).next(a=>a))})}Ds(e,n){let r=new ze(ek(e));return n.forEach((s,i)=>{Td(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return ba()<=Ce.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",xa(n)),this.ps.getDocumentsMatchingQuery(e,n,Kn.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hw="LocalStore",L$=3e8;class M${constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Qe(_e),this.xs=new Us(i=>na(i),wd),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jk(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function zk(t,e,n,r){return new M$(t,e,n,r)}async function qk(t,e){const n=re(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=xe();for(const c of s){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Ls:c,removedBatchIds:o,addedBatchIds:a}))})})}function F$(t,e){const n=re(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const h=c.batch,f=h.keys();let p=L.resolve();return f.forEach(E=>{p=p.next(()=>d.getEntry(l,E)).next(g=>{const y=c.docVersions.get(E);le(y!==null,48541),g.version.compareTo(y)<0&&(h.applyToRemoteDocument(g,c),g.isValidDocument()&&(g.setReadTime(c.commitVersion),d.addEntry(g)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=xe();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Hk(t){const e=re(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function U$(t,e){const n=re(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const a=[];e.targetChanges.forEach((d,h)=>{const f=s.get(h);if(!f)return;a.push(n.Pi.removeMatchingKeys(i,d.removedDocuments,h).next(()=>n.Pi.addMatchingKeys(i,d.addedDocuments,h)));let p=f.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?p=p.withResumeToken(yt.EMPTY_BYTE_STRING,he.min()).withLastLimboFreeSnapshotVersion(he.min()):d.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(d.resumeToken,r)),s=s.insert(h,p),function(g,y,_){return g.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=L$?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(f,p,d)&&a.push(n.Pi.updateTargetData(i,p))});let l=jn(),c=xe();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(j$(i,o,e.documentUpdates).next(d=>{l=d.ks,c=d.qs})),!r.isEqual(he.min())){const d=n.Pi.getLastRemoteSnapshotVersion(i).next(h=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return L.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.Ms=s,i))}function j$(t,e,n){let r=xe(),s=xe();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=jn();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(he.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):W(Hw,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{ks:o,qs:s}})}function B$(t,e){const n=re(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Ho),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function lp(t,e){const n=re(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,L.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new _s(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Dl(t,e,n){const r=re(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!ro(o))throw o;W(Hw,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function cp(t,e,n){const r=re(t);let s=he.min(),i=xe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const h=re(l),f=h.xs.get(d);return f!==void 0?L.resolve(h.Ms.get(f)):h.Pi.getTargetData(c,d)}(r,o,Hn(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:he.min(),n?i:xe())).next(a=>(Gk(r,ZC(e),a),{documents:a,Qs:i})))}function Wk(t,e){const n=re(t),r=re(n.Pi),s=n.Ms.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",i=>r.At(i,e).next(o=>o?o.target:null))}function Kk(t,e){const n=re(t),r=n.Os.get(e)||he.min();return n.persistence.runTransaction("Get new document changes","readonly",s=>n.Ns.getAllFromCollectionGroup(s,e,yC(r,wl),Number.MAX_SAFE_INTEGER)).then(s=>(Gk(n,e,s),s))}function Gk(t,e,n){let r=t.Os.get(e)||he.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk="firestore_clients";function qS(t,e){return`${Qk}_${t}_${e}`}const Yk="firestore_mutations";function HS(t,e,n){let r=`${Yk}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const Xk="firestore_targets";function Mg(t,e){return`${Xk}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr="SharedClientState";class up{constructor(e,n,r,s){this.user=e,this.batchId=n,this.state=r,this.error=s}static Ws(e,n,r){const s=JSON.parse(r);let i,o=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return o&&s.error&&(o=typeof s.error.message=="string"&&typeof s.error.code=="string",o&&(i=new Q(s.error.code,s.error.message))),o?new up(e,n,s.state,i):(wt(Wr,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class fu{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ws(e,n){const r=JSON.parse(n);let s,i=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return i&&r.error&&(i=typeof r.error.message=="string"&&typeof r.error.code=="string",i&&(s=new Q(r.error.code,r.error.message))),i?new fu(e,r.state,s):(wt(Wr,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class dp{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const r=JSON.parse(n);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,i=kw();for(let o=0;s&&o<r.activeTargetIds.length;++o)s=TC(r.activeTargetIds[o]),i=i.add(r.activeTargetIds[o]);return s?new dp(e,i):(wt(Wr,`Failed to parse client data for instance '${e}': ${n}`),null)}}class Ww{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new Ww(n.clientId,n.onlineState):(wt(Wr,`Failed to parse online state: ${e}`),null)}}class Vv{constructor(){this.activeTargetIds=kw()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Fg{constructor(e,n,r,s,i){this.window=e,this.Mi=n,this.persistenceKey=r,this.Js=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Qe(_e),this.started=!1,this.Xs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.eo=qS(this.persistenceKey,this.Js),this.no=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new Vv),this.ro=new RegExp(`^${Qk}_${o}_([^_]*)$`),this.io=new RegExp(`^${Yk}_${o}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${Xk}_${o}_(\\d+)$`),this.oo=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this._o=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const s=this.getItem(qS(this.persistenceKey,r));if(s){const i=dp.Ws(r,s);i&&(this.Zs=this.Zs.insert(i.clientId,i))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const r=this.uo(n);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach((r,s)=>{s.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,r){this.ho(e,n,r),this.Po(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Mg(this.persistenceKey,e));if(s){const i=fu.Ws(e,s);i&&(r=i.state)}}return n&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Mg(this.persistenceKey,e))}updateQueryState(e,n,r){this.Io(e,n,r)}handleUserChange(e,n,r){n.forEach(s=>{this.Po(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return W(Wr,"READ",e,n),n}setItem(e,n){W(Wr,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){W(Wr,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(W(Wr,"EVENT",n.key,n.newValue),n.key===this.eo)return void wt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const r=this.Ro(n.key);return this.Vo(r,null)}{const r=this.mo(n.key,n.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(this.so.test(n.key)){if(n.newValue!==null){const r=this.yo(n.key,n.newValue);if(r)return this.wo(r)}}else if(n.key===this.oo){if(n.newValue!==null){const r=this.uo(n.newValue);if(r)return this.co(r)}}else if(n.key===this.no){const r=function(i){let o=An.ce;if(i!=null)try{const a=JSON.parse(i);le(typeof a=="number",30636,{So:i}),o=a}catch(a){wt(Wr,"Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==An.ce&&this.sequenceNumberHandler(r)}else if(n.key===this._o){const r=this.bo(n.newValue);await Promise.all(r.map(s=>this.syncEngine.Do(s)))}}}else this.Xs.push(n)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,r){const s=new up(this.currentUser,e,n,r),i=HS(this.persistenceKey,this.currentUser,e);this.setItem(i,s.Gs())}Po(e){const n=HS(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,r){const s=Mg(this.persistenceKey,e),i=new fu(e,n,r);this.setItem(s,i.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const r=this.Ro(e);return dp.Ws(r,n)}fo(e,n){const r=this.io.exec(e),s=Number(r[1]),i=r[2]!==void 0?r[2]:null;return up.Ws(new en(i),s,n)}yo(e,n){const r=this.so.exec(e),s=Number(r[1]);return fu.Ws(s,n)}uo(e){return Ww.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);W(Wr,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const r=n?this.Zs.insert(e,n):this.Zs.remove(e),s=this.lo(this.Zs),i=this.lo(r),o=[],a=[];return i.forEach(l=>{s.has(l)||o.push(l)}),s.forEach(l=>{i.has(l)||a.push(l)}),this.syncEngine.Fo(o,a).then(()=>{this.Zs=r})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=kw();return e.forEach((r,s)=>{n=n.unionWith(s.activeTargetIds)}),n}}class Jk{constructor(){this.Mo=new Vv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Vv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $${Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS="ConnectivityMonitor";class KS{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){W(WS,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){W(WS,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ih=null;function Lv(){return Ih===null?Ih=function(){return 268435456+Math.round(2147483648*Math.random())}():Ih++,"0x"+Ih.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ug="RestConnection",z$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class q${get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Jf?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=Lv(),a=this.zo(e,n.toUriEncodedString());W(Ug,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,i);const{host:c}=new URL(a),d=Ms(c);return this.Jo(e,a,l,r,d).then(h=>(W(Ug,`Received RPC '${e}' ${o}: `,h),h),h=>{throw $i(Ug,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",r),h})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Gl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=z$[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H${constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zt="WebChannelConnection";class W$ extends q${constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=Lv();return new Promise((a,l)=>{const c=new iC;c.setWithCredentials(!0),c.listenOnce(oC.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Kh.NO_ERROR:const h=c.getResponseJson();W(Zt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),a(h);break;case Kh.TIMEOUT:W(Zt,`RPC '${e}' ${o} timed out`),l(new Q(B.DEADLINE_EXCEEDED,"Request time out"));break;case Kh.HTTP_ERROR:const f=c.getStatus();if(W(Zt,`RPC '${e}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let p=c.getResponseJson();Array.isArray(p)&&(p=p[0]);const E=p==null?void 0:p.error;if(E&&E.status&&E.message){const g=function(_){const w=_.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(w)>=0?w:B.UNKNOWN}(E.status);l(new Q(g,E.message))}else l(new Q(B.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new Q(B.UNAVAILABLE,"Connection failed."));break;default:ne(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{W(Zt,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(s);W(Zt,`RPC '${e}' ${o} sending request:`,s),c.send(n,"POST",d,r,15)})}T_(e,n,r){const s=Lv(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=cC(),a=lC(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");W(Zt,`Creating RPC '${e}' stream ${s}: ${d}`,l);const h=o.createWebChannel(d,l);this.I_(h);let f=!1,p=!1;const E=new H$({Yo:y=>{p?W(Zt,`Not sending because RPC '${e}' stream ${s} is closed:`,y):(f||(W(Zt,`Opening RPC '${e}' stream ${s} transport.`),h.open(),f=!0),W(Zt,`RPC '${e}' stream ${s} sending:`,y),h.send(y))},Zo:()=>h.close()}),g=(y,_,w)=>{y.listen(_,T=>{try{w(T)}catch(R){setTimeout(()=>{throw R},0)}})};return g(h,zc.EventType.OPEN,()=>{p||(W(Zt,`RPC '${e}' stream ${s} transport opened.`),E.o_())}),g(h,zc.EventType.CLOSE,()=>{p||(p=!0,W(Zt,`RPC '${e}' stream ${s} transport closed`),E.a_(),this.E_(h))}),g(h,zc.EventType.ERROR,y=>{p||(p=!0,$i(Zt,`RPC '${e}' stream ${s} transport errored. Name:`,y.name,"Message:",y.message),E.a_(new Q(B.UNAVAILABLE,"The operation could not be completed")))}),g(h,zc.EventType.MESSAGE,y=>{var _;if(!p){const w=y.data[0];le(!!w,16349);const T=w,R=(T==null?void 0:T.error)||((_=T[0])==null?void 0:_.error);if(R){W(Zt,`RPC '${e}' stream ${s} received error:`,R);const O=R.status;let V=function(b){const D=St[b];if(D!==void 0)return hk(D)}(O),S=R.message;V===void 0&&(V=B.INTERNAL,S="Unknown error status: "+O+" with message "+R.message),p=!0,E.a_(new Q(V,S)),h.close()}else W(Zt,`RPC '${e}' stream ${s} received:`,w),E.u_(w)}}),g(a,aC.STAT_EVENT,y=>{y.stat===mv.PROXY?W(Zt,`RPC '${e}' stream ${s} detected buffering proxy`):y.stat===mv.NOPROXY&&W(Zt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{E.__()},0),E}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zk(){return typeof window<"u"?window:null}function rf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fm(t){return new JB(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&W("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS="PersistentStream";class tD{constructor(e,n,r,s,i,o,a,l){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new eD(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(wt(n.toString()),wt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new Q(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return W(GS,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(W(GS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class K$ extends tD{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=t$(this.serializer,e),r=function(i){if(!("targetChange"in i))return he.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?he.min():o.readTime?pn(o.readTime):he.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Cv(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=Zf(l)?{documents:wk(i,l)}:{query:Ek(i,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=mk(i,o.resumeToken);const c=Rv(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(he.min())>0){a.readTime=kl(i,o.snapshotVersion.toTimestamp());const c=Rv(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=r$(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Cv(this.serializer),n.removeTarget=e,this.q_(n)}}class G$ extends tD{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return le(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,le(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){le(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=n$(e.writeResults,e.commitTime),r=pn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Cv(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>rp(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q${}class Y$ extends Q${constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Q(B.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,Pv(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Q(B.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,Pv(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Q(B.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class X${constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(wt(n),this.aa=!1):W("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa="RemoteStore";class J${constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{ha(this)&&(W(aa,"Restarting streams for network reachability change."),await async function(l){const c=re(l);c.Ea.add(4),await Xl(c),c.Ra.set("Unknown"),c.Ea.delete(4),await Ad(c)}(this))})}),this.Ra=new X$(r,s)}}async function Ad(t){if(ha(t))for(const e of t.da)await e(!0)}async function Xl(t){for(const e of t.da)await e(!1)}function pm(t,e){const n=re(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Qw(n)?Gw(n):Zl(n).O_()&&Kw(n,e))}function Nl(t,e){const n=re(t),r=Zl(n);n.Ia.delete(e),r.O_()&&nD(n,e),n.Ia.size===0&&(r.O_()?r.L_():ha(n)&&n.Ra.set("Unknown"))}function Kw(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(he.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Zl(t).Y_(e)}function nD(t,e){t.Va.Ue(e),Zl(t).Z_(e)}function Gw(t){t.Va=new GB({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Zl(t).start(),t.Ra.ua()}function Qw(t){return ha(t)&&!Zl(t).x_()&&t.Ia.size>0}function ha(t){return re(t).Ea.size===0}function rD(t){t.Va=void 0}async function Z$(t){t.Ra.set("Online")}async function e9(t){t.Ia.forEach((e,n)=>{Kw(t,e)})}async function t9(t,e){rD(t),Qw(t)?(t.Ra.ha(e),Gw(t)):t.Ra.set("Unknown")}async function n9(t,e,n){if(t.Ra.set("Online"),e instanceof pk&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ia.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ia.delete(a),s.Va.removeTarget(a))}(t,e)}catch(r){W(aa,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await hp(t,r)}else if(e instanceof tf?t.Va.Ze(e):e instanceof fk?t.Va.st(e):t.Va.tt(e),!n.isEqual(he.min()))try{const r=await Hk(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Va.Tt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.Ia.get(c);d&&i.Ia.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=i.Ia.get(l);if(!d)return;i.Ia.set(l,d.withResumeToken(yt.EMPTY_BYTE_STRING,d.snapshotVersion)),nD(i,l);const h=new _s(d.target,l,c,d.sequenceNumber);Kw(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){W(aa,"Failed to raise snapshot:",r),await hp(t,r)}}async function hp(t,e,n){if(!ro(e))throw e;t.Ea.add(1),await Xl(t),t.Ra.set("Offline"),n||(n=()=>Hk(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{W(aa,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Ad(t)})}function sD(t,e){return e().catch(n=>hp(t,n,e))}async function Jl(t){const e=re(t),n=Wi(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ho;for(;r9(e);)try{const s=await B$(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,s9(e,s)}catch(s){await hp(e,s)}iD(e)&&oD(e)}function r9(t){return ha(t)&&t.Ta.length<10}function s9(t,e){t.Ta.push(e);const n=Wi(t);n.O_()&&n.X_&&n.ea(e.mutations)}function iD(t){return ha(t)&&!Wi(t).x_()&&t.Ta.length>0}function oD(t){Wi(t).start()}async function i9(t){Wi(t).ra()}async function o9(t){const e=Wi(t);for(const n of t.Ta)e.ea(n.mutations)}async function a9(t,e,n){const r=t.Ta.shift(),s=Vw.from(r,e,n);await sD(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Jl(t)}async function l9(t,e){e&&Wi(t).X_&&await async function(r,s){if(function(o){return HB(o)&&o!==B.ABORTED}(s.code)){const i=r.Ta.shift();Wi(r).B_(),await sD(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Jl(r)}}(t,e),iD(t)&&oD(t)}async function QS(t,e){const n=re(t);n.asyncQueue.verifyOperationInProgress(),W(aa,"RemoteStore received new credentials");const r=ha(n);n.Ea.add(3),await Xl(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Ad(n)}async function Mv(t,e){const n=re(t);e?(n.Ea.delete(2),await Ad(n)):e||(n.Ea.add(2),await Xl(n),n.Ra.set("Unknown"))}function Zl(t){return t.ma||(t.ma=function(n,r,s){const i=re(n);return i.sa(),new K$(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:Z$.bind(null,t),t_:e9.bind(null,t),r_:t9.bind(null,t),H_:n9.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Qw(t)?Gw(t):t.Ra.set("Unknown")):(await t.ma.stop(),rD(t))})),t.ma}function Wi(t){return t.fa||(t.fa=function(n,r,s){const i=re(n);return i.sa(),new G$(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:i9.bind(null,t),r_:l9.bind(null,t),ta:o9.bind(null,t),na:a9.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Jl(t)):(await t.fa.stop(),t.Ta.length>0&&(W(aa,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new sr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new Yw(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function bd(t,e){if(wt("AsyncQueue",`${e}: ${t}`),ro(t))return new Q(B.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{static emptySet(e){return new Za(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||J.comparator(n.key,r.key):(n,r)=>J.comparator(n.key,r.key),this.keyedMap=qc(),this.sortedSet=new Qe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Za)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Za;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(){this.ga=new Qe(J.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ne(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ol{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Ol(e,n,Za.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&om(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c9{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class u9{constructor(){this.queries=XS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=re(n),i=s.queries;s.queries=XS(),i.forEach((o,a)=>{for(const l of a.Sa)l.onError(r)})})(this,new Q(B.ABORTED,"Firestore shutting down"))}}function XS(){return new Us(t=>JC(t),om)}async function Xw(t,e){const n=re(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new c9,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=bd(o,`Initialization of query '${xa(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Zw(n)}async function Jw(t,e){const n=re(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function d9(t,e){const n=re(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Fa(s)&&(r=!0);o.wa=s}}r&&Zw(n)}function h9(t,e,n){const r=re(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function Zw(t){t.Ca.forEach(e=>{e.next()})}var Fv,JS;(JS=Fv||(Fv={})).Ma="default",JS.Cache="cache";class eE{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ol(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ol.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Fv.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(e){this.key=e}}class lD{constructor(e){this.key=e}}class cD{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=xe(),this.mutatedKeys=xe(),this.eu=ek(e),this.tu=new Za(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new YS,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const f=s.get(d),p=Td(this.query,h)?h:null,E=!!f&&this.mutatedKeys.has(f.key),g=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let y=!1;f&&p?f.data.isEqual(p.data)?E!==g&&(r.track({type:3,doc:p}),y=!0):this.su(f,p)||(r.track({type:2,doc:p}),y=!0,(l&&this.eu(p,l)>0||c&&this.eu(p,c)<0)&&(a=!0)):!f&&p?(r.track({type:0,doc:p}),y=!0):f&&!p&&(r.track({type:1,doc:f}),y=!0,(l||c)&&(a=!0)),y&&(p?(o=o.add(p),i=g?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{tu:o,iu:r,Cs:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((d,h)=>function(p,E){const g=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne(20277,{Rt:y})}};return g(p)-g(E)}(d.type,h.type)||this.eu(d.doc,h.doc)),this.ou(r),s=s??!1;const a=n&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,c=l!==this.Za;return this.Za=l,o.length!==0||c?{snapshot:new Ol(this.query,e.tu,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new YS,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=xe(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new lD(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new aD(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=xe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ol.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ec="SyncEngine";class f9{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class p9{constructor(e){this.key=e,this.hu=!1}}class m9{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Us(a=>JC(a),om),this.Iu=new Map,this.Eu=new Set,this.du=new Qe(J.comparator),this.Au=new Map,this.Ru=new Bw,this.Vu={},this.mu=new Map,this.fu=oa.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function g9(t,e,n=!0){const r=mm(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await uD(r,e,n,!0),s}async function y9(t,e){const n=mm(t);await uD(n,e,!0,!1)}async function uD(t,e,n,r){const s=await lp(t.localStore,Hn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await tE(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&pm(t.remoteStore,s),a}async function tE(t,e,n,r,s){t.pu=(h,f,p)=>async function(g,y,_,w){let T=y.view.ru(_);T.Cs&&(T=await cp(g.localStore,y.query,!1).then(({documents:S})=>y.view.ru(S,T)));const R=w&&w.targetChanges.get(y.targetId),O=w&&w.targetMismatches.get(y.targetId)!=null,V=y.view.applyChanges(T,g.isPrimaryClient,R,O);return Uv(g,y.targetId,V.au),V.snapshot}(t,h,f,p);const i=await cp(t.localStore,e,!0),o=new cD(e,i.Qs),a=o.ru(i.documents),l=Sd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);Uv(t,n,c.au);const d=new f9(e,n,o);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function v9(t,e,n){const r=re(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!om(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Dl(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Nl(r.remoteStore,s.targetId),Vl(r,s.targetId)}).catch(no)):(Vl(r,s.targetId),await Dl(r.localStore,s.targetId,!0))}async function _9(t,e){const n=re(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Nl(n.remoteStore,r.targetId))}async function w9(t,e,n){const r=iE(t);try{const s=await function(o,a){const l=re(o),c=je.now(),d=a.reduce((p,E)=>p.add(E.key),xe());let h,f;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let E=jn(),g=xe();return l.Ns.getEntries(p,d).next(y=>{E=y,E.forEach((_,w)=>{w.isValidDocument()||(g=g.add(_))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,E)).next(y=>{h=y;const _=[];for(const w of a){const T=zB(w,h.get(w.key).overlayedDocument);T!=null&&_.push(new js(w.key,T,$C(T.value.mapValue),sn.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,_,a)}).next(y=>{f=y;const _=y.applyToLocalDocumentSet(h,g);return l.documentOverlayCache.saveOverlays(p,y.batchId,_)})}).then(()=>({batchId:f.batchId,changes:nk(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Vu[o.currentUser.toKey()];c||(c=new Qe(_e)),c=c.insert(a,l),o.Vu[o.currentUser.toKey()]=c}(r,s.batchId,n),await io(r,s.changes),await Jl(r.remoteStore)}catch(s){const i=bd(s,"Failed to persist write");n.reject(i)}}async function dD(t,e){const n=re(t);try{const r=await U$(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(le(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?le(o.hu,14607):s.removedDocuments.size>0&&(le(o.hu,42227),o.hu=!1))}),await io(n,r,e)}catch(r){await no(r)}}function ZS(t,e,n){const r=re(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=re(o);l.onlineState=a;let c=!1;l.queries.forEach((d,h)=>{for(const f of h.Sa)f.va(a)&&(c=!0)}),c&&Zw(l)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function E9(t,e,n){const r=re(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Qe(J.comparator);o=o.insert(i,gt.newNoDocument(i,he.min()));const a=xe().add(i),l=new Id(he.min(),new Map,new Qe(_e),o,a);await dD(r,l),r.du=r.du.remove(i),r.Au.delete(e),sE(r)}else await Dl(r.localStore,e,!1).then(()=>Vl(r,e,n)).catch(no)}async function T9(t,e){const n=re(t),r=e.batch.batchId;try{const s=await F$(n.localStore,e);rE(n,r,null),nE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await io(n,s)}catch(s){await no(s)}}async function I9(t,e,n){const r=re(t);try{const s=await function(o,a){const l=re(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(le(h!==null,37113),d=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);rE(r,e,n),nE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await io(r,s)}catch(s){await no(s)}}function nE(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function rE(t,e,n){const r=re(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Vl(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||hD(t,r)})}function hD(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Nl(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),sE(t))}function Uv(t,e,n){for(const r of n)r instanceof aD?(t.Ru.addReference(r.key,e),S9(t,r)):r instanceof lD?(W(ec,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||hD(t,r.key)):ne(19791,{wu:r})}function S9(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(W(ec,"New document in limbo: "+n),t.Eu.add(r),sE(t))}function sE(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new J(Fe.fromString(e)),r=t.fu.next();t.Au.set(r,new p9(n)),t.du=t.du.insert(n,r),pm(t.remoteStore,new _s(Hn(Ed(n.path)),r,"TargetPurposeLimboResolution",An.ce))}}async function io(t,e,n){const r=re(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{o.push(r.pu(l,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){s.push(c);const h=qw.As(l.targetId,c);i.push(h)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(l,c){const d=re(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>L.forEach(c,f=>L.forEach(f.Es,p=>d.persistence.referenceDelegate.addReference(h,f.targetId,p)).next(()=>L.forEach(f.ds,p=>d.persistence.referenceDelegate.removeReference(h,f.targetId,p)))))}catch(h){if(!ro(h))throw h;W(Hw,"Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const p=d.Ms.get(f),E=p.snapshotVersion,g=p.withLastLimboFreeSnapshotVersion(E);d.Ms=d.Ms.insert(f,g)}}}(r.localStore,i))}async function A9(t,e){const n=re(t);if(!n.currentUser.isEqual(e)){W(ec,"User change. New user:",e.toKey());const r=await qk(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(a=>{a.forEach(l=>{l.reject(new Q(B.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await io(n,r.Ls)}}function b9(t,e){const n=re(t),r=n.Au.get(e);if(r&&r.hu)return xe().add(r.key);{let s=xe();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const a=n.Tu.get(o);s=s.unionWith(a.view.nu)}return s}}async function x9(t,e){const n=re(t),r=await cp(n.localStore,e.query,!0),s=e.view.cu(r);return n.isPrimaryClient&&Uv(n,e.targetId,s.au),s}async function R9(t,e){const n=re(t);return Kk(n.localStore,e).then(r=>io(n,r))}async function P9(t,e,n,r){const s=re(t),i=await function(a,l){const c=re(a),d=re(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.er(h,l).next(f=>f?c.localDocuments.getDocuments(h,f):L.resolve(null)))}(s.localStore,e);i!==null?(n==="pending"?await Jl(s.remoteStore):n==="acknowledged"||n==="rejected"?(rE(s,e,r||null),nE(s,e),function(a,l){re(re(a).mutationQueue).ir(l)}(s.localStore,e)):ne(6720,"Unknown batchState",{Su:n}),await io(s,i)):W(ec,"Cannot apply mutation batch with id: "+e)}async function C9(t,e){const n=re(t);if(mm(n),iE(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),s=await eA(n,r.toArray());n.gu=!0,await Mv(n.remoteStore,!0);for(const i of s)pm(n.remoteStore,i)}else if(e===!1&&n.gu!==!1){const r=[];let s=Promise.resolve();n.Iu.forEach((i,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):s=s.then(()=>(Vl(n,o),Dl(n.localStore,o,!0))),Nl(n.remoteStore,o)}),await s,await eA(n,r),function(o){const a=re(o);a.Au.forEach((l,c)=>{Nl(a.remoteStore,c)}),a.Ru.Jr(),a.Au=new Map,a.du=new Qe(J.comparator)}(n),n.gu=!1,await Mv(n.remoteStore,!1)}}async function eA(t,e,n){const r=re(t),s=[],i=[];for(const o of e){let a;const l=r.Iu.get(o);if(l&&l.length!==0){a=await lp(r.localStore,Hn(l[0]));for(const c of l){const d=r.Tu.get(c),h=await x9(r,d);h.snapshot&&i.push(h.snapshot)}}else{const c=await Wk(r.localStore,o);a=await lp(r.localStore,c),await tE(r,fD(c),o,!1,a.resumeToken)}s.push(a)}return r.Pu.H_(i),s}function fD(t){return YC(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function k9(t){return function(n){return re(re(n).persistence).Ts()}(re(t).localStore)}async function D9(t,e,n,r){const s=re(t);if(s.gu)return void W(ec,"Ignoring unexpected query state notification.");const i=s.Iu.get(e);if(i&&i.length>0)switch(n){case"current":case"not-current":{const o=await Kk(s.localStore,ZC(i[0])),a=Id.createSynthesizedRemoteEventForCurrentChange(e,n==="current",yt.EMPTY_BYTE_STRING);await io(s,o,a);break}case"rejected":await Dl(s.localStore,e,!0),Vl(s,e,r);break;default:ne(64155,n)}}async function N9(t,e,n){const r=mm(t);if(r.gu){for(const s of e){if(r.Iu.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){W(ec,"Adding an already active target "+s);continue}const i=await Wk(r.localStore,s),o=await lp(r.localStore,i);await tE(r,fD(i),o.targetId,!1,o.resumeToken),pm(r.remoteStore,o)}for(const s of n)r.Iu.has(s)&&await Dl(r.localStore,s,!1).then(()=>{Nl(r.remoteStore,s),Vl(r,s)}).catch(no)}}function mm(t){const e=re(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=dD.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=b9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=E9.bind(null,e),e.Pu.H_=d9.bind(null,e.eventManager),e.Pu.yu=h9.bind(null,e.eventManager),e}function iE(t){const e=re(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=T9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=I9.bind(null,e),e}class ed{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=fm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return zk(this.persistence,new $k,e.initialUser,this.serializer)}Cu(e){return new $w(hm.mi,this.serializer)}Du(e){return new Jk}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ed.provider={build:()=>new ed};class O9 extends ed{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){le(this.persistence.referenceDelegate instanceof ap,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Lk(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?tn.withCacheSize(this.cacheSizeBytes):tn.DEFAULT;return new $w(r=>ap.mi(r,n),this.serializer)}}class pD extends ed{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await iE(this.xu.syncEngine),await Jl(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return zk(this.persistence,new $k,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new Lk(r,e.asyncQueue,n)}Mu(e,n){const r=new W5(n,this.persistence);return new H5(e.asyncQueue,r)}Cu(e){const n=Bk(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?tn.withCacheSize(this.cacheSizeBytes):tn.DEFAULT;return new zw(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,Zk(),rf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new Jk}}class V9 extends pD{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof Fg&&(this.sharedClientState.syncEngine={Co:P9.bind(null,n),vo:D9.bind(null,n),Fo:N9.bind(null,n),Ts:k9.bind(null,n),Do:R9.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji(async r=>{await C9(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Du(e){const n=Zk();if(!Fg.v(n))throw new Q(B.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Bk(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Fg(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class td{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ZS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=A9.bind(null,this.syncEngine),await Mv(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new u9}()}createDatastore(e){const n=fm(e.databaseInfo.databaseId),r=function(i){return new W$(i)}(e.databaseInfo);return function(i,o,a,l){return new Y$(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new J$(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>ZS(this.syncEngine,n,0),function(){return KS.v()?new KS:new $$}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,d){const h=new m9(s,i,o,a,l,c);return d&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=re(s);W(aa,"RemoteStore shutting down."),i.Ea.add(5),await Xl(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}td.provider={build:()=>new td};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):wt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ki="FirestoreClient";class L9{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=en.UNAUTHENTICATED,this.clientId=Xp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{W(Ki,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(W(Ki,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new sr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=bd(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function jg(t,e){t.asyncQueue.verifyOperationInProgress(),W(Ki,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await qk(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function tA(t,e){t.asyncQueue.verifyOperationInProgress();const n=await aE(t);W(Ki,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>QS(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>QS(e.remoteStore,s)),t._onlineComponents=e}async function aE(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W(Ki,"Using user provided OfflineComponentProvider");try{await jg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===B.FAILED_PRECONDITION||s.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;$i("Error using user provided cache. Falling back to memory cache: "+n),await jg(t,new ed)}}else W(Ki,"Using default OfflineComponentProvider"),await jg(t,new O9(void 0));return t._offlineComponents}async function lE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(W(Ki,"Using user provided OnlineComponentProvider"),await tA(t,t._uninitializedComponentsProvider._online)):(W(Ki,"Using default OnlineComponentProvider"),await tA(t,new td))),t._onlineComponents}function mD(t){return aE(t).then(e=>e.persistence)}function gD(t){return aE(t).then(e=>e.localStore)}function yD(t){return lE(t).then(e=>e.remoteStore)}function M9(t){return lE(t).then(e=>e.syncEngine)}async function fp(t){const e=await lE(t),n=e.eventManager;return n.onListen=g9.bind(null,e.syncEngine),n.onUnlisten=v9.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=y9.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=_9.bind(null,e.syncEngine),n}function F9(t){return t.asyncQueue.enqueue(async()=>{const e=await mD(t),n=await yD(t);return e.setNetworkEnabled(!0),function(s){const i=re(s);return i.Ea.delete(0),Ad(i)}(n)})}function U9(t){return t.asyncQueue.enqueue(async()=>{const e=await mD(t),n=await yD(t);return e.setNetworkEnabled(!1),async function(s){const i=re(s);i.Ea.add(0),await Xl(i),i.Ra.set("Offline")}(n)})}function j9(t,e){const n=new sr;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,o){try{const a=await function(c,d){const h=re(c);return h.persistence.runTransaction("read document","readonly",f=>h.localDocuments.getDocument(f,d))}(s,i);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new Q(B.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=bd(a,`Failed to get document '${i} from cache`);o.reject(l)}}(await gD(t),e,n)),n.promise}function B9(t,e,n={}){const r=new sr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new oE({next:f=>{d.Nu(),o.enqueueAndForget(()=>Jw(i,h));const p=f.docs.has(a);!p&&f.fromCache?c.reject(new Q(B.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&f.fromCache&&l&&l.source==="server"?c.reject(new Q(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new eE(Ed(a.path),d,{includeMetadataChanges:!0,qa:!0});return Xw(i,h)}(await fp(t),t.asyncQueue,e,n,r)),r.promise}function $9(t,e){const n=new sr;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,o){try{const a=await cp(s,i,!0),l=new cD(i,a.Qs),c=l.ru(a.documents),d=l.applyChanges(c,!1);o.resolve(d.snapshot)}catch(a){const l=bd(a,`Failed to execute query '${i} against cache`);o.reject(l)}}(await gD(t),e,n)),n.promise}function z9(t,e,n={}){const r=new sr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new oE({next:f=>{d.Nu(),o.enqueueAndForget(()=>Jw(i,h)),f.fromCache&&l.source==="server"?c.reject(new Q(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new eE(a,d,{includeMetadataChanges:!0,qa:!0});return Xw(i,h)}(await fp(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vD(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q9="firestore.googleapis.com",rA=!0;class sA{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Q(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=q9,this.ssl=rA}else this.host=e.host,this.ssl=e.ssl??rA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=kk;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Vk)throw new Q(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}mC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=vD(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Q(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Q(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Q(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class cE{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sA({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Q(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Q(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sA(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new hC;switch(r.type){case"firstParty":return new L5(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Q(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=nA.get(n);r&&(W("ComponentProvider","Removing Datastore"),nA.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Dr(this.firestore,e,this._query)}}class at{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Es(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new at(this.firestore,e,this._key)}toJSON(){return{type:at._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(vd(n,at._jsonSchema))return new at(e,r||null,new J(Fe.fromString(n.referencePath)))}}at._jsonSchemaVersion="firestore/documentReference/1.0",at._jsonSchema={type:xt("string",at._jsonSchemaVersion),referencePath:xt("string")};class Es extends Dr{constructor(e,n,r){super(e,n,Ed(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new at(this.firestore,null,new J(e))}withConverter(e){return new Es(this.firestore,e,this._path)}}function de(t,e,...n){if(t=We(t),pC("collection","path",e),t instanceof cE){const r=Fe.fromString(e,...n);return GI(r),new Es(t,null,r)}{if(!(t instanceof at||t instanceof Es))throw new Q(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Fe.fromString(e,...n));return GI(r),new Es(t.firestore,null,r)}}function fe(t,e,...n){if(t=We(t),arguments.length===1&&(e=Xp.newId()),pC("doc","path",e),t instanceof cE){const r=Fe.fromString(e,...n);return KI(r),new at(t,null,new J(r))}{if(!(t instanceof at||t instanceof Es))throw new Q(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Fe.fromString(e,...n));return KI(r),new at(t.firestore,t instanceof Es?t.converter:null,new J(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA="AsyncQueue";class oA{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new eD(this,"async_queue_retry"),this._c=()=>{const r=rf();r&&W(iA,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=rf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=rf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new sr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ro(e))throw e;W(iA,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,wt("INTERNAL UNHANDLED ERROR: ",aA(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Yw.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&ne(47125,{Pc:aA(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function aA(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lA(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class mn extends cE{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new oA,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new oA(e),this._firestoreClient=void 0,await e}}}function _D(t,e,n){n||(n=Jf);const r=Qp(t,"firestore");if(r.isInitialized(n)){const s=r.getImmediate({identifier:n}),i=r.getOptions(n);if(yl(i,e))return s;throw new Q(B.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Q(B.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Vk)throw new Q(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Ms(e.host)&&hw(e.host),r.initialize({options:e,instanceIdentifier:n})}function Bs(t){if(t._terminated)throw new Q(B.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||wD(t),t._firestoreClient}function wD(t){var r,s,i;const e=t._freezeSettings(),n=function(a,l,c,d){return new wB(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,vD(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new L9(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}function H9(t,e){$i("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return ED(t,td.provider,{build:r=>new pD(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function W9(t){$i("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();ED(t,td.provider,{build:n=>new V9(n,e.cacheSizeBytes)})}function ED(t,e,n){if((t=Tt(t,mn))._firestoreClient||t._terminated)throw new Q(B.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new Q(B.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},wD(t)}function uE(t){return F9(Bs(t=Tt(t,mn)))}function dE(t){return U9(Bs(t=Tt(t,mn)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fn(yt.fromBase64String(e))}catch(n){throw new Q(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Fn(yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Fn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(vd(e,Fn._jsonSchema))return Fn.fromBase64String(e.bytes)}}Fn._jsonSchemaVersion="firestore/bytes/1.0",Fn._jsonSchema={type:xt("string",Fn._jsonSchemaVersion),bytes:xt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Q(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Q(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Q(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return _e(this._lat,e._lat)||_e(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Er._jsonSchemaVersion}}static fromJSON(e){if(vd(e,Er._jsonSchema))return new Er(e.latitude,e.longitude)}}Er._jsonSchemaVersion="firestore/geoPoint/1.0",Er._jsonSchema={type:xt("string",Er._jsonSchemaVersion),latitude:xt("number"),longitude:xt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Tr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(vd(e,Tr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Tr(e.vectorValues);throw new Q(B.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Tr._jsonSchemaVersion="firestore/vectorValue/1.0",Tr._jsonSchema={type:xt("string",Tr._jsonSchemaVersion),vectorValues:xt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K9=/^__.*__$/;class G9{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new js(e,this.data,this.fieldMask,n,this.fieldTransforms):new Yl(e,this.data,n,this.fieldTransforms)}}class TD{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new js(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function ID(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne(40011,{Ac:t})}}class gm{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new gm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return pp(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(ID(this.Ac)&&K9.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Q9{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||fm(e)}Cc(e,n,r,s=!1){return new gm({Ac:e,methodName:n,Dc:r,path:ot.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ym(t){const e=t._freezeSettings(),n=fm(t._databaseId);return new Q9(t._databaseId,!!e.ignoreUndefinedProperties,n)}function SD(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);pE("Data must be an object, but it was:",o,r);const a=AD(r,o);let l,c;if(i.merge)l=new bn(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const h of i.mergeFields){const f=jv(e,h,n);if(!o.contains(f))throw new Q(B.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);xD(d,f)||d.push(f)}l=new bn(d),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new G9(new rn(a),l,c)}class vm extends tc{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof vm}}function Y9(t,e,n){return new gm({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class hE extends tc{_toFieldTransform(e){return new Nw(e.path,new Pl)}isEqual(e){return e instanceof hE}}class fE extends tc{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=Y9(this,e,!0),r=this.vc.map(i=>nc(i,n)),s=new ra(r);return new Nw(e.path,s)}isEqual(e){return e instanceof fE&&yl(this.vc,e.vc)}}function X9(t,e,n,r){const s=t.Cc(1,e,n);pE("Data must be an object, but it was:",s,r);const i=[],o=rn.empty();so(r,(l,c)=>{const d=mE(e,l,n);c=We(c);const h=s.yc(d);if(c instanceof vm)i.push(d);else{const f=nc(c,h);f!=null&&(i.push(d),o.set(d,f))}});const a=new bn(i);return new TD(o,a,s.fieldTransforms)}function J9(t,e,n,r,s,i){const o=t.Cc(1,e,n),a=[jv(e,r,n)],l=[s];if(i.length%2!=0)throw new Q(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<i.length;f+=2)a.push(jv(e,i[f])),l.push(i[f+1]);const c=[],d=rn.empty();for(let f=a.length-1;f>=0;--f)if(!xD(c,a[f])){const p=a[f];let E=l[f];E=We(E);const g=o.yc(p);if(E instanceof vm)c.push(p);else{const y=nc(E,g);y!=null&&(c.push(p),d.set(p,y))}}const h=new bn(c);return new TD(d,h,o.fieldTransforms)}function Z9(t,e,n,r=!1){return nc(n,t.Cc(r?4:3,e))}function nc(t,e){if(bD(t=We(t)))return pE("Unsupported field value:",e,t),AD(t,e);if(t instanceof tc)return function(r,s){if(!ID(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=nc(a,s.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=We(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return MB(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=je.fromDate(r);return{timestampValue:kl(s.serializer,i)}}if(r instanceof je){const i=new je(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:kl(s.serializer,i)}}if(r instanceof Er)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Fn)return{bytesValue:mk(s.serializer,r._byteString)};if(r instanceof at){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Fw(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Tr)return function(o,a){return{mapValue:{fields:{[Rw]:{stringValue:Pw},[Al]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Sc("VectorValues must only contain numeric values.");return Dw(a.serializer,c)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Jp(r)}`)}(t,e)}function AD(t,e){const n={};return NC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):so(t,(r,s)=>{const i=nc(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function bD(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof je||t instanceof Er||t instanceof Fn||t instanceof at||t instanceof tc||t instanceof Tr)}function pE(t,e,n){if(!bD(n)||!gC(n)){const r=Jp(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function jv(t,e,n){if((e=We(e))instanceof xd)return e._internalPath;if(typeof e=="string")return mE(t,e);throw pp("Field path arguments must be of type string or ",t,!1,void 0,n)}const ez=new RegExp("[~\\*/\\[\\]]");function mE(t,e,n){if(e.search(ez)>=0)throw pp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new xd(...e.split("."))._internalPath}catch{throw pp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function pp(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new Q(B.INVALID_ARGUMENT,a+t+l)}function xD(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new at(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new tz(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(_m("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class tz extends RD{data(){return super.data()}}function _m(t,e){return typeof e=="string"?mE(t,e):e instanceof xd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PD(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Q(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class gE{}class wm extends gE{}function ge(t,e,...n){let r=[];e instanceof gE&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof Em).length,a=i.filter(l=>l instanceof Rd).length;if(o>1||o>0&&a>0)throw new Q(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Rd extends wm{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Rd(e,n,r)}_apply(e){const n=this._parse(e);return CD(e._query,n),new Dr(e.firestore,e.converter,xv(e._query,n))}_parse(e){const n=ym(e.firestore);return function(i,o,a,l,c,d,h){let f;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Q(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){uA(h,d);const E=[];for(const g of h)E.push(cA(l,i,g));f={arrayValue:{values:E}}}else f=cA(l,i,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||uA(h,d),f=Z9(a,o,h,d==="in"||d==="not-in");return Ne.create(c,d,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function pe(t,e,n){const r=e,s=_m("where",t);return Rd._create(s,r,n)}class Em extends gE{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Em(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Be.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)CD(o,l),o=xv(o,l)}(e._query,n),new Dr(e.firestore,e.converter,xv(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Tm extends wm{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Tm(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new Q(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Q(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ju(i,o)}(e._query,this._field,this._direction);return new Dr(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Ql(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function ts(t,e="asc"){const n=e,r=_m("orderBy",t);return Tm._create(r,n)}class Im extends wm{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Im(e,n,r)}_apply(e){return new Dr(e.firestore,e.converter,tp(e._query,this._limit,this._limitType))}}function Oi(t){return $5("limit",t),Im._create("limit",t,"F")}function cA(t,e,n){if(typeof(n=We(n))=="string"){if(n==="")throw new Q(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!XC(e)&&n.indexOf("/")!==-1)throw new Q(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Fe.fromString(n));if(!J.isDocumentKey(r))throw new Q(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Yu(t,new J(r))}if(n instanceof at)return Yu(t,n._key);throw new Q(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Jp(n)}.`)}function uA(t,e){if(!Array.isArray(t)||t.length===0)throw new Q(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function CD(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Q(B.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Q(B.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class kD{convertValue(e,n="none"){switch(qi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return rt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ns(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ne(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return so(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Al].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>rt(o.doubleValue));return new Tr(n)}convertGeoPoint(e){return new Er(rt(e.latitude),rt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=sm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Gu(e));default:return null}}convertTimestamp(e){const n=Ds(e);return new je(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Fe.fromString(e);le(Ak(r),9688,{name:e});const s=new zi(r.get(1),r.get(3)),i=new J(r.popFirst(5));return s.isEqual(n)||wt(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DD(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Co{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ts extends RD{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new pu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(_m("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Q(B.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ts._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ts._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ts._jsonSchema={type:xt("string",Ts._jsonSchemaVersion),bundleSource:xt("string","DocumentSnapshot"),bundleName:xt("string"),bundle:xt("string")};class pu extends Ts{data(e={}){return super.data(e)}}class Is{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Co(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new pu(this._firestore,this._userDataWriter,r.key,r,new Co(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Q(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new pu(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Co(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new pu(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Co(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:nz(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Q(B.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Is._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Xp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function nz(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ne(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function st(t){t=Tt(t,at);const e=Tt(t.firestore,mn);return B9(Bs(e),t._key).then(n=>OD(e,t,n))}Is._jsonSchemaVersion="firestore/querySnapshot/1.0",Is._jsonSchema={type:xt("string",Is._jsonSchemaVersion),bundleSource:xt("string","QuerySnapshot"),bundleName:xt("string"),bundle:xt("string")};class Pd extends kD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new at(this.firestore,null,n)}}function ND(t){t=Tt(t,at);const e=Tt(t.firestore,mn),n=Bs(e),r=new Pd(e);return j9(n,t._key).then(s=>new Ts(e,r,t._key,s,new Co(s!==null&&s.hasLocalMutations,!0),t.converter))}function Te(t){t=Tt(t,Dr);const e=Tt(t.firestore,mn),n=Bs(e),r=new Pd(e);return PD(t._query),z9(n,t._query).then(s=>new Is(e,r,t,s))}function rz(t){t=Tt(t,Dr);const e=Tt(t.firestore,mn),n=Bs(e),r=new Pd(e);return $9(n,t._query).then(s=>new Is(e,r,t,s))}function Cr(t,e,n){t=Tt(t,at);const r=Tt(t.firestore,mn),s=DD(t.converter,e,n);return Cd(r,[SD(ym(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,sn.none())])}function He(t,e,n,...r){t=Tt(t,at);const s=Tt(t.firestore,mn),i=ym(s);let o;return o=typeof(e=We(e))=="string"||e instanceof xd?J9(i,"updateDoc",t._key,e,n,r):X9(i,"updateDoc",t._key,e),Cd(s,[o.toMutation(t._key,sn.exists(!0))])}function Bt(t){return Cd(Tt(t.firestore,mn),[new cm(t._key,sn.none())])}function Ir(t,e){const n=Tt(t.firestore,mn),r=fe(t),s=DD(t.converter,e);return Cd(n,[SD(ym(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,sn.exists(!1))]).then(()=>r)}function Gi(t,...e){var l,c,d;t=We(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||lA(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(lA(e[r])){const h=e[r];e[r]=(l=h.next)==null?void 0:l.bind(h),e[r+1]=(c=h.error)==null?void 0:c.bind(h),e[r+2]=(d=h.complete)==null?void 0:d.bind(h)}let i,o,a;if(t instanceof at)o=Tt(t.firestore,mn),a=Ed(t._key.path),i={next:h=>{e[r]&&e[r](OD(o,t,h))},error:e[r+1],complete:e[r+2]};else{const h=Tt(t,Dr);o=Tt(h.firestore,mn),a=h._query;const f=new Pd(o);i={next:p=>{e[r]&&e[r](new Is(o,f,h,p))},error:e[r+1],complete:e[r+2]},PD(t._query)}return function(f,p,E,g){const y=new oE(g),_=new eE(p,y,E);return f.asyncQueue.enqueueAndForget(async()=>Xw(await fp(f),_)),()=>{y.Nu(),f.asyncQueue.enqueueAndForget(async()=>Jw(await fp(f),_))}}(Bs(o),a,s,i)}function Cd(t,e){return function(r,s){const i=new sr;return r.asyncQueue.enqueueAndForget(async()=>w9(await M9(r),s,i)),i.promise}(Bs(t),e)}function OD(t,e,n){const r=n.docs.get(e._key),s=new Pd(t);return new Ts(t,s,e._key,r,new Co(n.hasPendingWrites,n.fromCache),e.converter)}function ve(){return new hE("serverTimestamp")}function sz(...t){return new fE("arrayUnion",t)}(function(e,n=!0){(function(s){Gl=s})(gd),rs(new Rr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new mn(new O5(r.getProvider("auth-internal")),new M5(o,r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Q(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zi(c.options.projectId,d)}(o,s),o);return i={useFetchStreams:n,...i},a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),qn(zI,qI,e),qn(zI,qI,"esm2020")})();const Bg=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:kD,Bytes:Fn,CollectionReference:Es,DocumentReference:at,DocumentSnapshot:Ts,FieldPath:xd,FieldValue:tc,Firestore:mn,FirestoreError:Q,GeoPoint:Er,Query:Dr,QueryCompositeFilterConstraint:Em,QueryConstraint:wm,QueryDocumentSnapshot:pu,QueryFieldFilterConstraint:Rd,QueryLimitConstraint:Im,QueryOrderByConstraint:Tm,QuerySnapshot:Is,SnapshotMetadata:Co,Timestamp:je,VectorValue:Tr,_AutoId:Xp,_ByteString:yt,_DatabaseId:zi,_DocumentKey:J,_EmptyAuthCredentialsProvider:hC,_FieldPath:ot,_cast:Tt,_logWarn:$i,_validateIsNotUsedTogether:mC,addDoc:Ir,arrayUnion:sz,collection:de,deleteDoc:Bt,disableNetwork:dE,doc:fe,enableIndexedDbPersistence:H9,enableMultiTabIndexedDbPersistence:W9,enableNetwork:uE,ensureFirestoreConfigured:Bs,executeWrite:Cd,getDoc:st,getDocFromCache:ND,getDocs:Te,getDocsFromCache:rz,initializeFirestore:_D,limit:Oi,onSnapshot:Gi,orderBy:ts,query:ge,serverTimestamp:ve,setDoc:Cr,setLogLevel:uC,updateDoc:He,where:pe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iz="type.googleapis.com/google.protobuf.Int64Value",oz="type.googleapis.com/google.protobuf.UInt64Value";function VD(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function mp(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>mp(e));if(typeof t=="function"||typeof t=="object")return VD(t,e=>mp(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Ll(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case iz:case oz:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Ll(e)):typeof t=="function"||typeof t=="object"?VD(t,e=>Ll(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xn extends kr{constructor(e,n,r){super(`${yE}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,xn.prototype)}}function az(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function gp(t,e){let n=az(t),r=n,s;try{const i=e&&e.error;if(i){const o=i.status;if(typeof o=="string"){if(!dA[o])return new xn("internal","internal");n=dA[o],r=o}const a=i.message;typeof a=="string"&&(r=a),s=i.details,s!==void 0&&(s=Ll(s))}}catch{}return n==="ok"?null:new xn(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lz{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Mn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(i=>this.auth=i,()=>{}),this.messaging||r.get().then(i=>this.messaging=i,()=>{}),this.appCheck||s==null||s.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv="us-central1",cz=/^data: (.*?)(?:\n|$)/;function uz(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new xn("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class dz{constructor(e,n,r,s,i=Bv,o=(...a)=>fetch(...a)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new lz(e,n,r,s),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(i);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=Bv}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function hz(t,e,n){const r=Ms(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(hw(t.emulatorOrigin+"/backends"),TP("Functions",!0))}function fz(t,e,n){const r=s=>mz(t,e,s,{});return r.stream=(s,i)=>yz(t,e,s,i),r}function LD(t){return t.emulatorOrigin&&Ms(t.emulatorOrigin)?"include":void 0}async function pz(t,e,n,r,s){n["Content-Type"]="application/json";let i;try{i=await r(t,{method:"POST",body:JSON.stringify(e),headers:n,credentials:LD(s)})}catch{return{status:0,json:null}}let o=null;try{o=await i.json()}catch{}return{status:i.status,json:o}}async function MD(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function mz(t,e,n,r){const s=t._url(e);return gz(t,s,n,r)}async function gz(t,e,n,r){n=mp(n);const s={data:n},i=await MD(t,r),o=r.timeout||7e4,a=uz(o),l=await Promise.race([pz(e,s,i,t.fetchImpl,t),a.promise,t.cancelAllRequests]);if(a.cancel(),!l)throw new xn("cancelled","Firebase Functions instance was deleted.");const c=gp(l.status,l.json);if(c)throw c;if(!l.json)throw new xn("internal","Response is not valid JSON object.");let d=l.json.data;if(typeof d>"u"&&(d=l.json.result),typeof d>"u")throw new xn("internal","Response is missing data field.");return{data:Ll(d)}}function yz(t,e,n,r){const s=t._url(e);return vz(t,s,n,r||{})}async function vz(t,e,n,r){var f;n=mp(n);const s={data:n},i=await MD(t,r);i["Content-Type"]="application/json",i.Accept="text/event-stream";let o;try{o=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(s),headers:i,signal:r==null?void 0:r.signal,credentials:LD(t)})}catch(p){if(p instanceof Error&&p.name==="AbortError"){const g=new xn("cancelled","Request was cancelled.");return{data:Promise.reject(g),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(g)}}}}}}const E=gp(0,null);return{data:Promise.reject(E),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(E)}}}}}}let a,l;const c=new Promise((p,E)=>{a=p,l=E});(f=r==null?void 0:r.signal)==null||f.addEventListener("abort",()=>{const p=new xn("cancelled","Request was cancelled.");l(p)});const d=o.body.getReader(),h=_z(d,a,l,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const p=h.getReader();return{async next(){const{value:E,done:g}=await p.read();return{value:E,done:g}},async return(){return await p.cancel(),{done:!0,value:void 0}}}}},data:c}}function _z(t,e,n,r){const s=(o,a)=>{const l=o.match(cz);if(!l)return;const c=l[1];try{const d=JSON.parse(c);if("result"in d){e(Ll(d.result));return}if("message"in d){a.enqueue(Ll(d.message));return}if("error"in d){const h=gp(0,d);a.error(h),n(h);return}}catch(d){if(d instanceof xn){a.error(d),n(d);return}}},i=new TextDecoder;return new ReadableStream({start(o){let a="";return l();async function l(){if(r!=null&&r.aborted){const c=new xn("cancelled","Request was cancelled");return o.error(c),n(c),Promise.resolve()}try{const{value:c,done:d}=await t.read();if(d){a.trim()&&s(a.trim(),o),o.close();return}if(r!=null&&r.aborted){const f=new xn("cancelled","Request was cancelled");o.error(f),n(f),await t.cancel();return}a+=i.decode(c,{stream:!0});const h=a.split(`
`);a=h.pop()||"";for(const f of h)f.trim()&&s(f.trim(),o);return l()}catch(c){const d=c instanceof xn?c:gp(0,null);o.error(d),n(d)}}},cancel(){return t.cancel()}})}const hA="@firebase/functions",fA="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wz="auth-internal",Ez="app-check-internal",Tz="messaging-internal";function Iz(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),i=n.getProvider(wz),o=n.getProvider(Tz),a=n.getProvider(Ez);return new dz(s,i,o,a,r)};rs(new Rr(yE,e,"PUBLIC").setMultipleInstances(!0)),qn(hA,fA,t),qn(hA,fA,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sz(t=CP(),e=Bv){const r=Qp(We(t),yE).getImmediate({identifier:e}),s=wP("functions");return s&&Az(r,...s),r}function Az(t,e,n){hz(We(t),e,n)}function FD(t,e,n){return fz(We(t),e)}Iz();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UD="firebasestorage.googleapis.com",jD="storageBucket",bz=2*60*1e3,xz=10*60*1e3,Rz=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht extends kr{constructor(e,n,r=0){super($g(e),`Firebase Storage: ${n} (${$g(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ht.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return $g(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var tt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(tt||(tt={}));function $g(t){return"storage/"+t}function vE(){const t="An unknown error occurred, please check the error payload for server response.";return new ht(tt.UNKNOWN,t)}function Pz(t){return new ht(tt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function Cz(t){return new ht(tt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function kz(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ht(tt.UNAUTHENTICATED,t)}function Dz(){return new ht(tt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Nz(t){return new ht(tt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function BD(){return new ht(tt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function $D(){return new ht(tt.CANCELED,"User canceled the upload/download.")}function Oz(t){return new ht(tt.INVALID_URL,"Invalid URL '"+t+"'.")}function Vz(t){return new ht(tt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Lz(){return new ht(tt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+jD+"' property when initializing the app?")}function zD(){return new ht(tt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Mz(){return new ht(tt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function Fz(){return new ht(tt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Uz(t){return new ht(tt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function $v(t){return new ht(tt.INVALID_ARGUMENT,t)}function qD(){return new ht(tt.APP_DELETED,"The Firebase app was deleted.")}function jz(t){return new ht(tt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function mu(t,e){return new ht(tt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Nc(t){throw new ht(tt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Bn.makeFromUrl(e,n)}catch{return new Bn(e,"")}if(r.path==="")return r;throw Vz(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(R){R.path.charAt(R.path.length-1)==="/"&&(R.path_=R.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(R){R.path_=decodeURIComponent(R.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",p=new RegExp(`^https?://${h}/${d}/b/${s}/o${f}`,"i"),E={bucket:1,path:3},g=n===UD?"(?:storage.googleapis.com|storage.cloud.google.com)":n,y="([^?#]*)",_=new RegExp(`^https?://${g}/${s}/${y}`,"i"),T=[{regex:a,indices:l,postModify:i},{regex:p,indices:E,postModify:c},{regex:_,indices:{bucket:1,path:2},postModify:c}];for(let R=0;R<T.length;R++){const O=T[R],V=O.regex.exec(e);if(V){const S=V[O.indices.bucket];let I=V[O.indices.path];I||(I=""),r=new Bn(S,I),O.postModify(r);break}}if(r==null)throw Oz(e);return r}}class Bz{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $z(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function d(...y){c||(c=!0,e.apply(null,y))}function h(y){s=setTimeout(()=>{s=null,t(p,l())},y)}function f(){i&&clearTimeout(i)}function p(y,..._){if(c){f();return}if(y){f(),d.call(null,y,..._);return}if(l()||o){f(),d.call(null,y,..._);return}r<64&&(r*=2);let T;a===1?(a=2,T=0):T=(r+Math.random())*1e3,h(T)}let E=!1;function g(y){E||(E=!0,f(),!c&&(s!==null?(y||(a=2),clearTimeout(s),h(0)):y||(a=1)))}return h(0),i=setTimeout(()=>{o=!0,g(!0)},n),g}function zz(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qz(t){return t!==void 0}function Hz(t){return typeof t=="function"}function Wz(t){return typeof t=="object"&&!Array.isArray(t)}function Sm(t){return typeof t=="string"||t instanceof String}function pA(t){return _E()&&t instanceof Blob}function _E(){return typeof Blob<"u"}function mA(t,e,n,r){if(r<e)throw $v(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw $v(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kd(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function HD(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Go;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Go||(Go={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WD(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kz{constructor(e,n,r,s,i,o,a,l,c,d,h,f=!0,p=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=h,this.retry=f,this.isUsingEmulator=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,g)=>{this.resolve_=E,this.reject_=g,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Sh(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===Go.NO_ERROR,l=i.getStatus();if(!a||WD(l,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===Go.ABORT;r(!1,new Sh(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new Sh(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());qz(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=vE();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?qD():$D();o(l)}else{const l=BD();o(l)}};this.canceled_?n(!1,new Sh(!1,null,!0)):this.backoffId_=$z(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&zz(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Sh{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function Gz(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Qz(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Yz(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Xz(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Jz(t,e,n,r,s,i,o=!0,a=!1){const l=HD(t.urlParams),c=t.url+l,d=Object.assign({},t.headers);return Yz(d,e),Gz(d,n),Qz(d,i),Xz(d,r),new Kz(c,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zz(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function e7(...t){const e=Zz();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(_E())return new Blob(t);throw new ht(tt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function t7(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n7(t){if(typeof atob>"u")throw Uz("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class zg{constructor(e,n){this.data=e,this.contentType=n||null}}function r7(t,e){switch(t){case Xr.RAW:return new zg(KD(e));case Xr.BASE64:case Xr.BASE64URL:return new zg(GD(t,e));case Xr.DATA_URL:return new zg(i7(e),o7(e))}throw vE()}function KD(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function s7(t){let e;try{e=decodeURIComponent(t)}catch{throw mu(Xr.DATA_URL,"Malformed data URL.")}return KD(e)}function GD(t,e){switch(t){case Xr.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw mu(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Xr.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw mu(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=n7(e)}catch(s){throw s.message.includes("polyfill")?s:mu(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class QD{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw mu(Xr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=a7(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function i7(t){const e=new QD(t);return e.base64?GD(Xr.BASE64,e.rest):s7(e.rest)}function o7(t){return new QD(t).contentType}function a7(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e,n){let r=0,s="";pA(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(pA(this.data_)){const r=this.data_,s=t7(r,e,n);return s===null?null:new ps(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new ps(r,!0)}}static getBlob(...e){if(_E()){const n=e.map(r=>r instanceof ps?r.data_:r);return new ps(e7.apply(null,n))}else{const n=e.map(o=>Sm(o)?r7(Xr.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new ps(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YD(t){let e;try{e=JSON.parse(t)}catch{return null}return Wz(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l7(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function c7(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function XD(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u7(t,e){return e}class cn{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||u7}}let Ah=null;function d7(t){return!Sm(t)||t.length<2?t:XD(t)}function wE(){if(Ah)return Ah;const t=[];t.push(new cn("bucket")),t.push(new cn("generation")),t.push(new cn("metageneration")),t.push(new cn("name","fullPath",!0));function e(i,o){return d7(o)}const n=new cn("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new cn("size");return s.xform=r,t.push(s),t.push(new cn("timeCreated")),t.push(new cn("updated")),t.push(new cn("md5Hash",null,!0)),t.push(new cn("cacheControl",null,!0)),t.push(new cn("contentDisposition",null,!0)),t.push(new cn("contentEncoding",null,!0)),t.push(new cn("contentLanguage",null,!0)),t.push(new cn("contentType",null,!0)),t.push(new cn("metadata","customMetadata",!0)),Ah=t,Ah}function h7(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new Bn(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function f7(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return h7(r,t),r}function JD(t,e,n){const r=YD(e);return r===null?null:f7(t,r,n)}function p7(t,e,n,r){const s=YD(e);if(s===null||!Sm(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const d=t.bucket,h=t.fullPath,f="/b/"+o(d)+"/o/"+o(h),p=kd(f,n,r),E=HD({alt:"media",token:c});return p+E})[0]}function ZD(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class rc{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ss(t){if(!t)throw vE()}function EE(t,e){function n(r,s){const i=JD(t,s,e);return Ss(i!==null),i}return n}function m7(t,e){function n(r,s){const i=JD(t,s,e);return Ss(i!==null),p7(i,s,t.host,t._protocol)}return n}function Dd(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=Dz():s=kz():n.getStatus()===402?s=Cz(t.bucket):n.getStatus()===403?s=Nz(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function eN(t){const e=Dd(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=Pz(t.path)),i.serverResponse=s.serverResponse,i}return n}function g7(t,e,n){const r=e.fullServerUrl(),s=kd(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new rc(s,i,EE(t,n),o);return a.errorHandler=eN(e),a}function y7(t,e,n){const r=e.fullServerUrl(),s=kd(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new rc(s,i,m7(t,n),o);return a.errorHandler=eN(e),a}function v7(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function tN(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=v7(null,e)),r}function nN(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let T="";for(let R=0;R<2;R++)T=T+Math.random().toString().slice(2);return T}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=tN(e,r,s),d=ZD(c,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",p=ps.getBlob(h,r,f);if(p===null)throw zD();const E={name:c.fullPath},g=kd(i,t.host,t._protocol),y="POST",_=t.maxUploadRetryTime,w=new rc(g,y,EE(t,n),_);return w.urlParams=E,w.headers=o,w.body=p.uploadData(),w.errorHandler=Dd(e),w}class yp{constructor(e,n,r,s){this.current=e,this.total=n,this.finalized=!!r,this.metadata=s||null}}function TE(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Ss(!1)}return Ss(!!n&&(e||["active"]).indexOf(n)!==-1),n}function _7(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o=tN(e,r,s),a={name:o.fullPath},l=kd(i,t.host,t._protocol),c="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},h=ZD(o,n),f=t.maxUploadRetryTime;function p(g){TE(g);let y;try{y=g.getResponseHeader("X-Goog-Upload-URL")}catch{Ss(!1)}return Ss(Sm(y)),y}const E=new rc(l,c,p,f);return E.urlParams=a,E.headers=d,E.body=h,E.errorHandler=Dd(e),E}function w7(t,e,n,r){const s={"X-Goog-Upload-Command":"query"};function i(c){const d=TE(c,["active","final"]);let h=null;try{h=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Ss(!1)}h||Ss(!1);const f=Number(h);return Ss(!isNaN(f)),new yp(f,r.size(),d==="final")}const o="POST",a=t.maxUploadRetryTime,l=new rc(n,o,i,a);return l.headers=s,l.errorHandler=Dd(e),l}const gA=256*1024;function E7(t,e,n,r,s,i,o,a){const l=new yp(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw Mz();const c=l.total-l.current;let d=c;s>0&&(d=Math.min(d,s));const h=l.current,f=h+d;let p="";d===0?p="finalize":c===d?p="upload, finalize":p="upload";const E={"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":`${l.current}`},g=r.slice(h,f);if(g===null)throw zD();function y(R,O){const V=TE(R,["active","final"]),S=l.current+d,I=r.size();let b;return V==="final"?b=EE(e,i)(R,O):b=null,new yp(S,I,V==="final",b)}const _="POST",w=e.maxUploadRetryTime,T=new rc(n,_,y,w);return T.headers=E,T.body=g.uploadData(),T.progressCallback=a||null,T.errorHandler=Dd(t),T}const Tn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function qg(t){switch(t){case"running":case"pausing":case"canceling":return Tn.RUNNING;case"paused":return Tn.PAUSED;case"success":return Tn.SUCCESS;case"canceled":return Tn.CANCELED;case"error":return Tn.ERROR;default:return Tn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T7{constructor(e,n,r){if(Hz(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aa(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class I7{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Go.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Go.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Go.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw Nc("cannot .send() more than once");if(Ms(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Nc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Nc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Nc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Nc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class S7 extends I7{initXhr(){this.xhr_.responseType="text"}}function So(){return new S7}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A7{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=wE(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(tt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const i=this.isExponentialBackoffExpired();if(WD(s.status,[]))if(i)s=BD();else{this.sleepTime=Math.max(this.sleepTime*2,Rz),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(tt.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,i)=>{this._resolve=s,this._reject=i,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=_7(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,So,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._uploadUrl=i,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const s=w7(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(s,So,n,r);this._request=i,i.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=gA*this._chunkMultiplier,n=new yp(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,i)=>{let o;try{o=E7(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,So,s,i,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){gA*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=g7(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,So,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=nN(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,So,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=$D(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=qg(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,s){const i=new T7(n||void 0,r||void 0,s||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(qg(this._state)){case Tn.SUCCESS:Aa(this._resolve.bind(null,this.snapshot))();break;case Tn.CANCELED:case Tn.ERROR:const n=this._reject;Aa(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(qg(this._state)){case Tn.RUNNING:case Tn.PAUSED:e.next&&Aa(e.next.bind(e,this.snapshot))();break;case Tn.SUCCESS:e.complete&&Aa(e.complete.bind(e))();break;case Tn.CANCELED:case Tn.ERROR:e.error&&Aa(e.error.bind(e,this._error))();break;default:e.error&&Aa(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e,n){this._service=e,n instanceof Bn?this._location=n:this._location=Bn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new la(e,n)}get root(){const e=new Bn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return XD(this._location.path)}get storage(){return this._service}get parent(){const e=l7(this._location.path);if(e===null)return null;const n=new Bn(this._location.bucket,e);return new la(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw jz(e)}}function b7(t,e,n){t._throwIfRoot("uploadBytes");const r=nN(t.storage,t._location,wE(),new ps(e,!0),n);return t.storage.makeRequestWithTokens(r,So).then(s=>({metadata:s,ref:t}))}function x7(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new A7(t,new ps(e),n)}function R7(t){t._throwIfRoot("getDownloadURL");const e=y7(t.storage,t._location,wE());return t.storage.makeRequestWithTokens(e,So).then(n=>{if(n===null)throw Fz();return n})}function P7(t,e){const n=c7(t._location.path,e),r=new Bn(t._location.bucket,n);return new la(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C7(t){return/^[A-Za-z]+:\/\//.test(t)}function k7(t,e){return new la(t,e)}function rN(t,e){if(t instanceof IE){const n=t;if(n._bucket==null)throw Lz();const r=new la(n,n._bucket);return e!=null?rN(r,e):r}else return e!==void 0?P7(t,e):t}function D7(t,e){if(e&&C7(e)){if(t instanceof IE)return k7(t,e);throw $v("To use ref(service, url), the first argument must be a Storage instance.")}else return rN(t,e)}function yA(t,e){const n=e==null?void 0:e[jD];return n==null?null:Bn.makeFromBucketSpec(n,t)}function N7(t,e,n,r={}){t.host=`${e}:${n}`;const s=Ms(e);s&&(hw(`https://${t.host}/b`),TP("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:E3(i,t.app.options.projectId))}class IE{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=UD,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=bz,this._maxUploadRetryTime=xz,this._requests=new Set,s!=null?this._bucket=Bn.makeFromBucketSpec(s,this._host):this._bucket=yA(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Bn.makeFromBucketSpec(this._url,e):this._bucket=yA(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){mA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){mA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Mn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new la(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new Bz(qD());{const o=Jz(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const vA="@firebase/storage",_A="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sN="storage";function cq(t,e,n){return t=We(t),b7(t,e,n)}function O7(t,e,n){return t=We(t),x7(t,e,n)}function V7(t){return t=We(t),R7(t)}function L7(t,e){return t=We(t),D7(t,e)}function iN(t=CP(),e){t=We(t);const r=Qp(t,sN).getImmediate({identifier:e}),s=wP("storage");return s&&M7(r,...s),r}function M7(t,e,n,r={}){N7(t,e,n,r)}function F7(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new IE(n,r,s,e,gd)}function U7(){rs(new Rr(sN,F7,"PUBLIC").setMultipleInstances(!0)),qn(vA,_A,""),qn(vA,_A,"esm2020")}U7();const j7={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_VERSION:"0.0.0",VITE_DEV_MODE:"true",VITE_ENABLE_OFFLINE_PERSISTENCE:"false",VITE_FIREBASE_API_KEY:"AIzaSyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s",VITE_FIREBASE_APP_ID:"1:483702062341:web:b1ff06ad175cb7ae428b6c",VITE_FIREBASE_AUTH_DOMAIN:"voda-c6abd.firebaseapp.com",VITE_FIREBASE_AUTH_EMULATOR_URL:"http://localhost:9099",VITE_FIREBASE_FIRESTORE_EMULATOR_HOST:"localhost:8080",VITE_FIREBASE_FUNCTIONS_EMULATOR_HOST:"localhost:5001",VITE_FIREBASE_MEASUREMENT_ID:"G-CV6QGH7G7P",VITE_FIREBASE_MESSAGING_SENDER_ID:"483702062341",VITE_FIREBASE_PROJECT_ID:"voda-c6abd",VITE_FIREBASE_STORAGE_BUCKET:"voda-c6abd.appspot.com",VITE_FORCE_HASH_ROUTER:"true",VITE_SHOP_ID:"demo-shop-001",VITE_SHOP_NAME:"   ",VITE_SHOW_ENV_BANNER:"true",VITE_USE_EMULATORS:"false",VITE_USE_FIREBASE_EMULATOR:"false"},zv={apiKey:"AIzaSyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s",authDomain:"voda-c6abd.firebaseapp.com",projectId:"voda-c6abd",storageBucket:"voda-c6abd.appspot.com",messagingSenderId:"483702062341",appId:"1:483702062341:web:b1ff06ad175cb7ae428b6c"};console.log(" Initializing Firebase with config:",{projectId:zv.projectId,authDomain:zv.authDomain,emulatorMode:!1});const Am=PP(zv);try{typeof window<"u",void 0||console.log(" App Check not initialized: missing VITE_FIREBASE_RECAPTCHA_KEY")}catch(t){console.log(" Failed to initialize App Check (will proceed without it):",t)}const Jn=Pj(Am,{persistence:[Xj,hv]});console.log(" Firebase Auth initialized with browserLocalPersistence (fallback to inMemory)");const H=_D(Am,{experimentalForceLongPolling:!0,useFetchStreams:!1});try{uC("error")}catch{}const SE=Sz(Am,"us-central1"),B7=iN(Am);console.log(" Firebase initialized successfully");const $7=async()=>{try{console.log(" Offline persistence disabled (env flag or emulator mode)"),console.log(" Firestore features configured successfully")}catch(t){console.error(" Error configuring Firestore features:",t)}};setTimeout($7,100);let _o=0;const Hg=3,z7=1e3,oN=async t=>{var e,n;if(console.error(" Firestore connection error:",t),(t.code==="unavailable"||t.code==="failed-precondition"||(e=t.message)!=null&&e.includes("ERR_ABORTED")||(n=t.message)!=null&&n.includes("UNAVAILABLE"))&&_o<Hg){_o++;const r=Math.min(z7*Math.pow(2,_o-1),1e4);console.log(` Attempting to reconnect (${_o}/${Hg}) in ${r}ms...`);try{await dE(H),await new Promise(s=>setTimeout(s,r)),await uE(H),console.log(" Firestore reconnected successfully"),_o=0}catch(s){console.error(" Failed to reconnect:",s),_o>=Hg&&(console.error(" Maximum reconnection attempts reached."),q7())}}},q7=()=>{const t=document.createElement("div");t.style.cssText=`
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #f8d7da;
    color: #721c24;
    padding: 20px;
    border-radius: 8px;
    border: 1px solid #f5c6cb;
    z-index: 10000;
    text-align: center;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    max-width: 400px;
  `,t.innerHTML=`
    <h3 style="margin: 0 0 10px 0;">  </h3>
    <p style="margin: 0 0 15px 0;">   .     .</p>
    <button onclick="window.location.reload()" style="
      background: #dc3545;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
    ">  </button>
  `,document.body.appendChild(t),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},1e4)};window.addEventListener("online",async()=>{console.log(" Network back online, enabling Firestore...");try{await uE(H),_o=0,console.log(" Firestore network enabled")}catch(t){console.error(" Failed to enable Firestore network:",t)}});window.addEventListener("offline",async()=>{console.log(" Network offline, disabling Firestore network...");try{await dE(H),console.log(" Firestore network disabled")}catch(t){console.error(" Failed to disable Firestore network:",t)}});window.addEventListener("unhandledrejection",t=>{var e,n,r,s,i,o;(((e=t.reason)==null?void 0:e.code)==="unavailable"||((n=t.reason)==null?void 0:n.code)==="failed-precondition"||(s=(r=t.reason)==null?void 0:r.message)!=null&&s.includes("ERR_ABORTED")||(o=(i=t.reason)==null?void 0:i.message)!=null&&o.includes("UNAVAILABLE"))&&(oN(t.reason),t.preventDefault())});console.log("Using Firebase Production Environment");const Wg=Object.freeze(Object.defineProperty({__proto__:null,auth:Jn,db:H,functions:SE,handleFirestoreError:oN,storage:B7},Symbol.toStringTag,{value:"Module"})),Le=t=>{if(t&&typeof t=="object"&&typeof t.toDate=="function")return t.toDate();if(t instanceof Date)return t;if(typeof t=="number")return new Date(t);if(typeof t=="string"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return new Date},H7=t=>{if(t===null)return!1;const e=Object.getPrototypeOf(t);return e===Object.prototype||e===null},nd=t=>{if(t===void 0)return;if(t===null)return null;if(Array.isArray(t))return t.map(n=>nd(n)).filter(n=>n!==void 0);if(t instanceof Date||!H7(t))return t;const e={};for(const[n,r]of Object.entries(t)){const s=nd(r);s!==void 0&&(e[n]=s)}return e},sf={async create(t){await Cr(fe(H,"profiles",t.userId),{userId:t.userId,shopId:t.shopId,role:t.role,fullName:t.fullName,phone:t.phone,createdAt:ve()})},async getById(t){const e=fe(H,"profiles",t),n=await st(e);if(n.exists()){const r=n.data();return{userId:n.id,...r,createdAt:Le(r.createdAt)}}return null},async update(t,e){const n=fe(H,"profiles",t);await He(n,{...e,updatedAt:ve()})},async getByShopId(t){const e=ge(de(H,"profiles"),pe("shopId","==",t));return(await Te(e)).docs.map(r=>{const s=r.data();return{userId:r.id,...s,createdAt:Le(s.createdAt)}})}},qv={async create(t){return(await Ir(de(H,"referrals"),{...t,createdAt:ve(),updatedAt:ve()})).id},async getByReferrerId(t){try{const e=ge(de(H,"referrals"),pe("referrerId","==",t),ts("createdAt","desc"));return(await Te(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:Le(r.data().createdAt),updatedAt:Le(r.data().updatedAt)}))}catch(e){if(String((e==null?void 0:e.message)||"").includes("requires an index")){const r=ge(de(H,"referrals"),pe("referrerId","==",t));return(await Te(r)).docs.map(i=>({id:i.id,...i.data(),createdAt:Le(i.data().createdAt),updatedAt:Le(i.data().updatedAt)})).sort((i,o)=>{var a,l,c,d;return(((l=(a=o.createdAt)==null?void 0:a.getTime)==null?void 0:l.call(a))||0)-(((d=(c=i.createdAt)==null?void 0:c.getTime)==null?void 0:d.call(c))||0)})}throw e}},async getByReferralCode(t){const e=ge(de(H,"referrals"),pe("referralCode","==",t),Oi(1)),n=await Te(e);if(n.empty)return null;const r=n.docs[0];return{id:r.id,...r.data(),createdAt:Le(r.data().createdAt),updatedAt:Le(r.data().updatedAt)}},async updateStatus(t,e){await He(fe(H,"referrals",t),{status:e,updatedAt:ve()})},generateReferralCode(t){const e=Date.now().toString(36);return`REF_${t.slice(-6)}_${e}`.toUpperCase()}},aN={async getByUserId(t){const e=ge(de(H,"profiles"),pe("userId","==",t)),n=await Te(e);if(!n.empty){const r=n.docs[0],s=r.data();return{userId:r.id,...s,createdAt:Le(s.createdAt),updatedAt:Le(s.updatedAt)}}return null},async update(t,e){const n=ge(de(H,"profiles"),pe("userId","==",t)),r=await Te(n);if(!r.empty){const s=fe(H,"profiles",r.docs[0].id);await He(s,{...e,updatedAt:ve()})}}},W7={async create(t){return(await Ir(de(H,"merchantWallets"),{...t,transferLimit:t.transferLimit||2e5,withdrawLimit:t.withdrawLimit||2e5,transferUsage:t.transferUsage||0,withdrawUsage:t.withdrawUsage||0,createdAt:ve(),updatedAt:ve()})).id},async getByMerchantId(t){const e=ge(de(H,"merchantWallets"),pe("merchantUserId","==",t)),r=(await Te(e)).docs.map(a=>{const l=a.data();return{id:a.id,...l,transferLimit:l.transferLimit||2e5,withdrawLimit:l.withdrawLimit||2e5,transferUsage:l.transferUsage||0,withdrawUsage:l.withdrawUsage||0,createdAt:Le(l.createdAt),updatedAt:Le(l.updatedAt)}});if(r.length>0)return r.sort((a,l)=>{const c=a.createdAt,d=l.createdAt;return c&&d?d.getTime()-c.getTime():c&&!d?-1:!c&&d?1:0});const s=ge(de(H,"wallets"),pe("userId","==",t));return(await Te(s)).docs.map(a=>{const l=a.data();return{id:a.id,merchantUserId:l.userId||t,provider:l.provider||"instapay",msisdn:l.msisdn||"",label:l.name||l.label||"",isActive:l.isActive!==!1,dailyLimit:l.dailyLimit||2e5,monthlyLimit:l.monthlyLimit||2e5,transferLimit:l.transferLimit||l.monthlyTransferLimit||2e5,withdrawLimit:l.withdrawLimit||l.monthlyWithdrawLimit||2e5,transferUsage:l.transferUsage||l.monthlyTransferUsage||0,withdrawUsage:l.withdrawUsage||l.monthlyWithdrawUsage||0,dailyTransferLimit:l.dailyTransferLimit,dailyWithdrawLimit:l.dailyWithdrawLimit,createdAt:Le(l.createdAt),updatedAt:Le(l.updatedAt)}}).sort((a,l)=>{const c=a.createdAt,d=l.createdAt;return c&&d?d.getTime()-c.getTime():c&&!d?-1:!c&&d?1:0})},async getById(t){const e=fe(H,"merchantWallets",t),n=await st(e);if(n.exists()){const r=n.data();return{id:n.id,...r,transferLimit:r.transferLimit||2e5,withdrawLimit:r.withdrawLimit||2e5,transferUsage:r.transferUsage||0,withdrawUsage:r.withdrawUsage||0,createdAt:Le(r.createdAt),updatedAt:Le(r.updatedAt)}}return null},async update(t,e){const n=fe(H,"merchantWallets",t);await He(n,{...e,updatedAt:ve()})},async updateUsage(t,e,n){const r=fe(H,"merchantWallets",t),s={updatedAt:ve()};e!==void 0&&(s.transferUsage=e),n!==void 0&&(s.withdrawUsage=n),await He(r,s)},async resetDailyUsage(t){const n=(await this.getByMerchantId(t)).map(r=>this.updateUsage(r.id,0,0));await Promise.all(n)},async reassignByMsisdns(t,e){try{if(!e)throw new Error("merchantUserId   ");if(!Array.isArray(t)||t.length===0)return{updated:0,failed:0};const r=((o,a)=>o.reduce((l,c,d)=>(d%a===0&&l.push(o.slice(d,d+a)),l),[]))(t.map(o=>o.trim()).filter(Boolean),10);let s=0,i=0;for(const o of r){const a=ge(de(H,"merchantWallets"),pe("msisdn","in",o)),c=(await Te(a)).docs.map(async d=>{try{const h=d.data();if(h.merchantUserId&&h.merchantUserId!==e)return;await He(d.ref,{merchantUserId:e,updatedAt:ve()}),s+=1}catch(h){console.error("Failed to reassign wallet",d.id,h),i+=1}});await Promise.allSettled(c)}return{updated:s,failed:i}}catch(n){return console.error("Error reassigning wallets by msisdns:",n),{updated:0,failed:t.length}}},async delete(t){const e=fe(H,"merchantWallets",t);await Bt(e)}},lN={async create(t){try{console.log("Creating transaction:",t);const{calculateCommission:e,calculateProfit:n}=await De(async()=>{const{calculateCommission:c,calculateProfit:d}=await Promise.resolve().then(()=>b8);return{calculateCommission:c,calculateProfit:d}},void 0,import.meta.url),r=t.commission!==void 0?t.commission:e(t.amount,t.txnType),s=n(t.amount,t.txnType),i=t.merchantUserId||t.createdBy;i||console.warn("   merchantUserId  createdBy         .");const o=Object.fromEntries(Object.entries(t).filter(([c,d])=>d!==void 0)),a={...o,merchantUserId:i,commission:r,profit:s,createdAt:o.createdAt?o.createdAt instanceof Date?o.createdAt:new Date(String(o.createdAt)):new Date,uploadedAt:ve(),confirmedAt:o.confirmedAt?o.confirmedAt instanceof Date?o.confirmedAt:new Date(String(o.confirmedAt)):null},l=await Ir(de(H,"transactions"),a);if(console.log("Transaction created with ID:",l.id,"Profit:",s),s>0){const{ProfitService:c}=await De(async()=>{const{ProfitService:d}=await import("./profitService-DZQLszRg.js").then(h=>h.p);return{ProfitService:d}},[],import.meta.url);c.addProfit(s),console.log("     :",s,"")}return await this.updateLineUsage(t.lineId,t.amount),l.id}catch(e){throw console.error("Error creating transaction:",e),e}},async updateLineUsage(t,e){try{console.log("Updating line usage:",{lineId:t,amount:e})}catch(n){console.error("Error updating line usage:",n)}},async getByShopId(t){const e=ge(de(H,"transactions"),pe("shopId","==",t),ts("createdAt","desc"));return(await Te(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:Le(r.data().createdAt),confirmedAt:r.data().confirmedAt?Le(r.data().confirmedAt):void 0}))},async getByMerchantId(t){const e=ge(de(H,"transactions"),pe("merchantUserId","==",t),ts("createdAt","desc"));return(await Te(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:Le(r.data().createdAt),confirmedAt:r.data().confirmedAt?Le(r.data().confirmedAt):void 0}))},async getByUserId(t){const e=ge(de(H,"transactions"),pe("merchantUserId","==",t)),n=ge(de(H,"transactions"),pe("userId","==",t)),[r,s]=await Promise.all([Te(e),Te(n)]),i=[...r.docs,...s.docs],o=new Set,a=[];for(const l of i){if(o.has(l.id))continue;o.add(l.id);const c=l.data();a.push({id:l.id,...c,createdAt:Le(c.createdAt),confirmedAt:c.confirmedAt?Le(c.confirmedAt):void 0})}return a.sort((l,c)=>{const d=l.createdAt,h=c.createdAt;return d&&h?h.getTime()-d.getTime():d&&!h?-1:!d&&h?1:0})},async updateStatus(t,e,n){const r=fe(H,"transactions",t);await He(r,{status:e,confirmedAt:n?n instanceof Date?n:new Date(String(n)):null})}},K7={async log(t,e,n,r,s){await Ir(de(H,"auditLogs"),{actor:s,action:t,entity:e,entityId:n,meta:r,createdAt:ve()})},async getLogs(t=100){const e=ge(de(H,"auditLogs"),ts("createdAt","desc"),Oi(t));return(await Te(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:Le(r.data().createdAt)}))},async getDeletedTransactions(){try{const t=ge(de(H,"deletedTransactions"),ts("deletedAt","desc"));return(await Te(t)).docs.map(n=>({id:n.id,...n.data(),deletedAt:Le(n.data().deletedAt)}))}catch(t){return console.error("Error getting deleted transactions:",t),[]}},async getDeletedTransactionsByUser(t){try{const e=ge(de(H,"deletedTransactions"),pe("userId","==",t),ts("deletedAt","desc"));return(await Te(e)).docs.map(r=>({id:r.id,...r.data(),deletedAt:Le(r.data().deletedAt)})).filter(r=>(r==null?void 0:r.permanent)!==!0)}catch(e){if(String((e==null?void 0:e.message)||"").includes("requires an index"))try{const r=ge(de(H,"deletedTransactions"),pe("userId","==",t));return(await Te(r)).docs.map(o=>({id:o.id,...o.data(),deletedAt:Le(o.data().deletedAt)})).filter(o=>(o==null?void 0:o.permanent)!==!0).sort((o,a)=>{const l=(o.deletedAt instanceof Date?o.deletedAt:new Date(o.deletedAt)).getTime();return(a.deletedAt instanceof Date?a.deletedAt:new Date(a.deletedAt)).getTime()-l})}catch(r){return console.error("Fallback error getting deleted transactions by user:",r),[]}return console.error("Error getting deleted transactions by user:",e),[]}},async saveDeletedTransaction(t){var e;try{if(console.log("      Firebase:",t.id),!t.userId)throw new Error("     ");if(!t.originalTransactionId)throw new Error("   ");const n=t.reference??t.transactionReference??((e=t.receipt)==null?void 0:e.reference),r={...t,deletedAt:ve(),userId:t.userId,originalTransactionId:t.originalTransactionId,type:t.type||"unknown",amount:t.amount||0,status:t.status||"deleted",...n?{reference:n}:{}};console.log("    :",r);let s=3,i;for(;s>0;)try{const o=await Ir(de(H,"deletedTransactions"),r);console.log("       :",o.id);return}catch(o){i=o,s--,console.warn(`       : ${s}`,o),s>0&&await new Promise(a=>setTimeout(a,1e3))}throw console.error("        "),i}catch(n){throw console.error("     :",n),n instanceof Error&&(n.message.includes("network")?console.error("    -    "):n.message.includes("permission")?console.error("    -    Firestore"):n.message.includes("quota")&&console.error("     -    Firebase")),n}},async permanentlyDeleteTransaction(t,e){try{const n=ge(de(H,"deletedTransactions"),pe("originalTransactionId","==",t),pe("userId","==",e)),r=await Te(n);r.empty?await Ir(de(H,"deletedTransactions"),{userId:e,originalTransactionId:t,permanent:!0,deletedAt:ve()}):await Promise.all(r.docs.map(s=>He(s.ref,{permanent:!0,deletedAt:ve()}))),console.log("    :",t);try{const s=ge(de(H,"userTransactions"),pe("userId","==",e)),o=(await Te(s)).docs.filter(a=>{var c,d;const l=a.data();return a.id===t||l.id===t||l.transactionId===t||l.originalTransactionId===t||((c=l.receipt)==null?void 0:c.id)===t||((d=l.receipt)==null?void 0:d.transactionId)===t});o.length>0&&(console.log(`  ${o.length}   userTransactions`),await Promise.all(o.map(a=>Bt(a.ref))))}catch(s){console.warn("   userTransactions   :",s)}try{const s=fe(H,"transactions",t);(await st(s)).exists()&&(console.log("     transactions  "),await Bt(s));const o=ge(de(H,"transactions"),pe("transactionId","==",t)),a=await Te(o);a.empty||(console.log(`  ${a.size}   transactions  transactionId`),await Promise.all(a.docs.map(d=>Bt(d.ref))));const l=ge(de(H,"transactions"),pe("originalTransactionId","==",t)),c=await Te(l);c.empty||(console.log(`  ${c.size}   transactions  originalTransactionId`),await Promise.all(c.docs.map(d=>Bt(d.ref))));try{const d=ge(de(H,"deletedTransactions"),pe("userId","==",e),pe("originalTransactionId","==",t)),h=await Te(d),f=h.docs.map(E=>{var g;return String(((g=E.data())==null?void 0:g.reference)||"")}).filter(Boolean),p=h.docs.map(E=>{var g;return String(((g=E.data())==null?void 0:g.transactionId)||"")}).filter(Boolean);for(const E of f){const g=ge(de(H,"transactions"),pe("reference","==",E)),y=await Te(g);y.empty||(console.log(`  ${y.size}   transactions  reference=${E}`),await Promise.all(y.docs.map(_=>Bt(_.ref))))}for(const E of p){try{const _=fe(H,"transactions",E);(await st(_)).exists()&&(console.log("     transactions  :",E),await Bt(_))}catch{}const g=ge(de(H,"transactions"),pe("transactionId","==",E)),y=await Te(g);y.empty||(console.log(`  ${y.size}   transactions  transactionId=${E}`),await Promise.all(y.docs.map(_=>Bt(_.ref))))}}catch{}}catch(s){console.warn("    transactions   :",s)}}catch(n){throw console.error("Error permanently deleting transaction:",n),n}}},G7={async add(t){return(await Ir(de(H,"daily_reports_archive"),{userId:t.userId,reportDate:t.reportDate,totalTransactions:t.totalTransactions,totalAmount:t.totalAmount,totalWithdrawn:t.totalWithdrawn,totalSent:t.totalSent,profit:t.profit??null,walletId:t.walletId??null,createdAt:ve()})).id},async getByUser(t,e=50){try{const n=ge(de(H,"daily_reports_archive"),pe("userId","==",t),Oi(e)),r=await Te(n);let s=[];try{s=(await Te(ge(de(H,"deletedDailyArchives"),pe("userId","==",t)))).docs.map(l=>{var c,d;return{id:l.id,reportDate:String(((c=l.data())==null?void 0:c.reportDate)||""),archiveId:String(((d=l.data())==null?void 0:d.archiveId)||"")}})}catch{}const i=(a,l)=>s.some(c=>c.archiveId&&c.archiveId===a||c.reportDate&&c.reportDate===l),o=r.docs.map(a=>({id:a.id,userId:String(a.data().userId),reportDate:String(a.data().reportDate),totalTransactions:Number(a.data().totalTransactions||0),totalAmount:Number(a.data().totalAmount||0),totalWithdrawn:Number(a.data().totalWithdrawn||0),totalSent:Number(a.data().totalSent||0),profit:a.data().profit!==void 0?Number(a.data().profit):void 0,walletId:a.data().walletId??null,createdAt:Le(a.data().createdAt)})).filter(a=>!i(a.id,a.reportDate));return o.sort((a,l)=>a.reportDate<l.reportDate?1:-1),o}catch(n){throw console.error("Error loading daily reports archive:",n),n}},async deleteOlderThan(t,e=10){try{const n=new Date;n.setDate(n.getDate()-e);const r=ge(de(H,"daily_reports_archive"),pe("userId","==",t)),s=await Te(r);let i=0;for(const o of s.docs){const a=Le(o.data().createdAt);a&&a.getTime()<n.getTime()&&(await Bt(o.ref),i++)}return i>0&&console.log(`   ${i}      ${e}   ${t}`),i}catch(n){throw console.error("Error deleting old daily reports archive:",n),n}},async trimToMaxCount(t,e=10){try{const n=ge(de(H,"daily_reports_archive"),pe("userId","==",t)),s=(await Te(n)).docs.map(o=>({ref:o.ref,reportDate:String(o.data().reportDate||""),createdAt:Le(o.data().createdAt)}));if(s.sort((o,a)=>{var d,h;if(o.reportDate&&a.reportDate)return o.reportDate<a.reportDate?1:-1;const l=((d=o.createdAt)==null?void 0:d.getTime())??0;return(((h=a.createdAt)==null?void 0:h.getTime())??0)-l}),s.length<=e)return 0;const i=s.slice(e);for(const o of i)await Bt(o.ref);return console.log(`     ${t}  ${e}   ${i.length}`),i.length}catch(n){throw console.error("Error trimming daily reports archive to max count:",n),n}},async deleteAllByUser(t){try{const e=ge(de(H,"daily_reports_archive"),pe("userId","==",t)),n=await Te(e);let r=0;for(const s of n.docs)try{await Bt(s.ref),r++}catch{const o=s.data();try{await Ir(de(H,"deletedDailyArchives"),{userId:t,archiveId:s.id,reportDate:String((o==null?void 0:o.reportDate)||""),createdAt:ve()})}catch{}}return r}catch(e){throw console.error("Error deleting all daily reports archive for user:",e),e}}},AE={async getUserData(t){try{console.log("     :",{userId:t});const e=fe(H,"users",t),n=await st(e);if(n.exists()){const r=n.data();return console.log("     :",r),{...r,createdAt:Le(r.createdAt),updatedAt:Le(r.updatedAt)}}else{console.log("       ");const r={walletBalances:{},createdAt:new Date,updatedAt:new Date};return await this.saveUserData(t,r),console.log("     "),r}}catch(e){return console.error("      :",e),{walletBalances:{},createdAt:new Date,updatedAt:new Date}}},getLocalReceipts(t){try{const e=localStorage.getItem(`localReceipts_${t}`);if(!e)return[];const n=JSON.parse(e);return Array.isArray(n)?n:[]}catch{return[]}},saveLocalReceipt(t,e){try{const n=this.getLocalReceipts(t),r=200,s=l=>{var c;return String((l==null?void 0:l.id)||(l==null?void 0:l.transactionId)||(l==null?void 0:l.originalTransactionId)||(l==null?void 0:l.reference)||(l==null?void 0:l.transactionReference)||((c=l==null?void 0:l.receipt)==null?void 0:c.reference)||`${(l==null?void 0:l.type)||"tx"}-${new Date((l==null?void 0:l.createdAt)||Date.now()).getTime()}`)},i=s(e),o=n.filter(l=>s(l)!==i),a=[e,...o].slice(0,r);localStorage.setItem(`localReceipts_${t}`,JSON.stringify(a))}catch{}},removeLocalReceiptById(t,e){try{const r=this.getLocalReceipts(t).filter(s=>{var o,a;return![s==null?void 0:s.id,s==null?void 0:s.transactionId,s==null?void 0:s.originalTransactionId,(o=s==null?void 0:s.receipt)==null?void 0:o.transactionId,(a=s==null?void 0:s.receipt)==null?void 0:a.id].map(l=>String(l||"")).includes(String(e))});localStorage.setItem(`localReceipts_${t}`,JSON.stringify(r))}catch{}},removeLocalReceiptByRef(t,e){try{if(!e)return;const r=this.getLocalReceipts(t).filter(s=>{var o;return![s==null?void 0:s.reference,s==null?void 0:s.transactionReference,(o=s==null?void 0:s.receipt)==null?void 0:o.reference].map(a=>String(a||"")).includes(String(e))});localStorage.setItem(`localReceipts_${t}`,JSON.stringify(r))}catch{}},subscribeDeletedTransactionsLocalSync(t){try{const e=ge(de(H,"deletedTransactions"),pe("userId","==",t));return Gi(e,r=>{try{r.docChanges().forEach(s=>{const i=s.doc.data(),o=String((i==null?void 0:i.originalTransactionId)||""),a=String((i==null?void 0:i.transactionId)||""),l=String((i==null?void 0:i.reference)||"");o&&this.removeLocalReceiptById(t,o),a&&this.removeLocalReceiptById(t,a),l&&this.removeLocalReceiptByRef(t,l)})}catch{}},r=>{console.warn("deletedTransactions local sync error:",r)})}catch(e){return console.warn("subscribeDeletedTransactionsLocalSync failed:",e),()=>{}}},async saveUserData(t,e){try{const n=fe(H,"users",t),r=nd(e);await Cr(n,{...r||{},updatedAt:ve()},{merge:!0})}catch(n){throw console.error("Error saving user data:",n),n}},async updateUserData(t,e){try{console.log("      Firebase:",{userId:t,data:e});const n=fe(H,"users",t),r=Object.fromEntries(Object.entries(e).filter(([l,c])=>c!==void 0)),s=nd(r);let i={};try{const l=await st(n);i=l.exists()?l.data():{},console.log("  :",i)}catch(l){console.warn("         :",l)}const o={...i,...s,updatedAt:ve()};console.log("   :",o);let a=3;for(;a>0;)try{await Cr(n,o,{merge:!0}),console.log("     ");return}catch(l){if(a--,console.warn(`     : ${a}`,l),a===0)throw l;await new Promise(c=>setTimeout(c,1e3))}}catch(n){throw console.error("     :",n),n instanceof Error&&(n.message.includes("network")?console.error("    -    "):n.message.includes("permission")?console.error("    -    Firestore"):n.message.includes("quota")&&console.error("     -    Firebase")),n}},async getUserWallets(t){try{const e=await this.getUserData(t);return(e==null?void 0:e.wallets)||[]}catch(e){return console.error("Error getting user wallets:",e),[]}},async getUserTransactions(t){try{let e;try{const l=ge(de(H,"userTransactions"),pe("userId","==",t),ts("createdAt","desc"),Oi(200));e=await Te(l)}catch(l){const c=String((l==null?void 0:l.message)||""),d=ge(de(H,"userTransactions"),pe("userId","==",t));e=await Te(d)}const n=e.docs.map(l=>({id:l.id,...l.data(),createdAt:Le(l.data().createdAt)})),s=[...this.getLocalReceipts(t),...n],i=l=>{var c;return String((l==null?void 0:l.id)||(l==null?void 0:l.transactionId)||(l==null?void 0:l.originalTransactionId)||(l==null?void 0:l.reference)||(l==null?void 0:l.transactionReference)||((c=l==null?void 0:l.receipt)==null?void 0:c.reference)||`${(l==null?void 0:l.type)||"tx"}-${new Date((l==null?void 0:l.createdAt)||0).getTime()}`)},o=new Set;return s.filter(l=>{const c=i(l);return o.has(c)?!1:(o.add(c),!0)}).filter(l=>(l==null?void 0:l.status)!=="cancelled"&&!(l!=null&&l.isDeleted)).sort((l,c)=>{const d=l.createdAt?new Date(l.createdAt).getTime():0;return(c.createdAt?new Date(c.createdAt).getTime():0)-d})}catch(e){console.error("Error getting user transactions:",e);const n=(e==null?void 0:e.code)||"";if(n==="permission-denied"||n==="unauthenticated")throw e;return[]}},async saveUserTransaction(t,e){var n,r;try{const s=Object.fromEntries(Object.entries(e??{}).filter(([o,a])=>a!==void 0));try{const o=s.reference;if(o){const c=ge(de(H,"deletedTransactions"),pe("userId","==",t),pe("reference","==",o));if(!(await Te(c)).empty)return console.log("          ."),"skip-deleted"}{const c=ge(de(H,"deletedTransactions"),pe("userId","==",t),pe("permanent","==",!0)),d=await Te(c);if(!d.empty){const h=[s.id,s.transactionId,s.originalTransactionId,(n=s.receipt)==null?void 0:n.id,(r=s.receipt)==null?void 0:r.transactionId,s.reference,s.transactionReference].filter(p=>!!p).map(p=>String(p));if(d.docs.find(p=>{const E=p.data(),g=String(E.originalTransactionId||E.transactionId||p.id||""),y=String(E.reference||"");return g&&h.includes(g)||y&&h.includes(y)}))return console.log("        /   ."),"skip-deleted"}}const a=ge(de(H,"deletedTransactions"),pe("userId","==",t),ts("deletedAt","desc"),Oi(20)),l=await Te(a);if(!l.empty){const c=s.senderMsisdn||s.senderPhone||s.sender_msisdn,d=s.receiverMsisdn||s.receiverPhone||s.receiver_msisdn,h=Number(s.amount||0),f=s.createdAt?new Date(String(s.createdAt)):new Date,p=10*60*1e3;if(l.docs.find(g=>{const y=g.data(),_=y.senderMsisdn||y.senderPhone||y.sender_msisdn,w=y.receiverMsisdn||y.receiverPhone||y.receiver_msisdn,T=Number(y.amount||0),R=y.createdAt?new Date(String(y.createdAt)):f;return Math.abs(R.getTime()-f.getTime())<=p&&T===h&&_===c&&w===d}))return console.log("        ."),"skip-deleted"}}catch(o){console.warn("           :",o)}try{const o=ge(de(H,"userTransactions"),pe("userId","==",t));if(s.transactionId){const g=ge(de(H,"userTransactions"),pe("userId","==",t),pe("transactionId","==",s.transactionId)),y=await Te(g);if(!y.empty){const _=y.docs[0];return await He(fe(H,"userTransactions",_.id),{...s,uploadedAt:ve()}),_.id}}if(s.reference){const g=ge(de(H,"userTransactions"),pe("userId","==",t),pe("reference","==",s.reference)),y=await Te(g);if(!y.empty){const _=y.docs[0];return await He(fe(H,"userTransactions",_.id),{...s,uploadedAt:ve()}),_.id}}const a=ge(de(H,"userTransactions"),pe("userId","==",t),ts("createdAt","desc"),Oi(20)),l=await Te(a),c=s.senderMsisdn||s.senderPhone||s.sender_msisdn,d=s.receiverMsisdn||s.receiverPhone||s.receiver_msisdn,h=Number(s.amount||0),f=s.createdAt?new Date(String(s.createdAt)):new Date,p=5*60*1e3,E=l.docs.find(g=>{const y=g.data(),_=y.senderMsisdn||y.senderPhone||y.sender_msisdn,w=y.receiverMsisdn||y.receiverPhone||y.receiver_msisdn,T=Number(y.amount||0),R=Le(y.createdAt);return Math.abs(R.getTime()-f.getTime())<=p&&T===h&&_===c&&w===d});if(E)return await He(fe(H,"userTransactions",E.id),{...s,uploadedAt:ve()}),E.id}catch(o){console.warn("      saveUserTransaction  :",o)}return(await Ir(de(H,"userTransactions"),{...s,userId:t,createdAt:s.createdAt?s.createdAt instanceof Date?s.createdAt:new Date(String(s.createdAt)):ve(),uploadedAt:ve()})).id}catch(s){throw console.error("Error saving user transaction:",s),s}},async removeUserTransaction(t,e){try{console.log("     userTransactions:",{userId:t,transactionId:e});try{const o=fe(H,"userTransactions",e),a=await st(o);if(a.exists()){const l=a.data();if([l==null?void 0:l.userId,l==null?void 0:l.merchantUserId,l==null?void 0:l.createdBy].map(d=>String(d||"")).includes(String(t))){console.log("    userTransactions  ( ):",e),await Bt(o),console.log("     userTransactions");try{this.removeLocalReceiptById(t,e)}catch{}return}else console.log("           ")}}catch(o){console.warn("     userTransactions   :",o)}const n=ge(de(H,"userTransactions"),pe("userId","==",t)),r=await Te(n);console.log(`    ${r.docs.length}  `);const s=r.docs.filter(o=>{var h,f;const a=o.data(),l=o.id,d=[a.id===e,a.transactionId===e,l===e,a.originalTransactionId===e,((h=a.receipt)==null?void 0:h.transactionId)===e,((f=a.receipt)==null?void 0:f.id)===e].some(p=>p===!0);return d&&console.log("     :",{docId:l,dataId:a.id,transactionId:a.transactionId,originalTransactionId:a.originalTransactionId,searchingFor:e}),d}),i=[ge(de(H,"userTransactions"),pe("merchantUserId","==",t)),ge(de(H,"userTransactions"),pe("createdBy","==",t))];for(const o of i)try{const l=(await Te(o)).docs.filter(c=>{var f,p;const d=c.data(),h=c.id;return d.id===e||d.transactionId===e||h===e||d.originalTransactionId===e||((f=d.receipt)==null?void 0:f.transactionId)===e||((p=d.receipt)==null?void 0:p.id)===e});l.length&&(console.log(`   ${l.length}       `),s.push(...l))}catch{}if(s.length>0){console.log(`   ${s.length}    `);const o=s.map(async a=>{try{console.log("   :",a.id),await Bt(a.ref)}catch(l){console.warn("     userTransactions ():",{id:a.id,error:l})}});await Promise.allSettled(o);try{this.removeLocalReceiptById(t,e)}catch{}console.log("        userTransactions:",e);try{const a=fe(H,"transactions",e);if((await st(a)).exists())console.log("     transactions   "),await Bt(a);else{const c=ge(de(H,"transactions"),pe("transactionId","==",e)),d=await Te(c);d.empty||(console.log(`   ${d.size}   transactions  transactionId `),await Promise.all(d.docs.map(p=>Bt(p.ref))));const h=ge(de(H,"transactions"),pe("originalTransactionId","==",e)),f=await Te(h);f.empty||(console.log(`   ${f.size}   transactions  originalTransactionId `),await Promise.all(f.docs.map(p=>Bt(p.ref))))}}catch(a){console.warn("      transactions   :",a)}return}console.log("       userTransactions (   ):",e)}catch(n){console.error("      userTransactions ():",n);return}}},Q7={async create(t,e){const n={...e,userId:t,status:"active",createdAt:ve()};return(await Ir(de(H,"installments"),n)).id},listenByUser(t,e){const n=ge(de(H,"installments"),pe("userId","==",t));return Gi(n,r=>{const s=r.docs.map(i=>({id:i.id,...i.data()}));e(s)},r=>{console.error("installments listen error",r),e([])})},async markMonthPaid(t,e){const n=e.every(r=>r.paid);return await He(fe(H,"installments",t),{paidMonths:e,status:n?"completed":"active"}),!0},async remove(t){return await Bt(fe(H,"installments",t)),!0}},uq=Object.freeze(Object.defineProperty({__proto__:null,InstallmentsService:Q7,auditLogService:K7,dailyReportsArchiveService:G7,merchantWalletService:W7,profileService:sf,profileServiceExtra:aN,referralService:qv,sanitizeFirestoreData:nd,transactionService:lN,userDataService:AE},Symbol.toStringTag,{value:"Module"}));var ms=(t=>(t.MONTHLY="monthly",t.QUARTERLY="quarterly",t.YEARLY="yearly",t.LIFETIME="lifetime",t.ZERO="zero",t.TAHWEELA="tahweela",t))(ms||{});const Y7=(t,e=new Date)=>{const n=new Date(e);switch(t){case"monthly":{const r=new Date(n);return r.setDate(r.getDate()+30),r}case"tahweela":{const r=new Date(n);return r.setDate(r.getDate()+30),r}case"quarterly":{const r=new Date(n);return r.setDate(r.getDate()+90),r}case"yearly":{const r=new Date(n);return r.setDate(r.getDate()+365),r}case"lifetime":return null;case"zero":return null;default:return null}},of=t=>{var s,i;if(!t||!t.isActive)return!1;if(t.planType==="lifetime")return!0;if(!t.endDate){const o=new Date,a=t.activatedAt,l=(s=a==null?void 0:a.toDate)!=null&&s.call(a)?a.toDate():t.activatedAt?new Date(t.activatedAt):null;return l&&o.getTime()-l.getTime()<4*60*60*1e3,!0}const e=new Date,n=t.endDate,r=n!=null&&n.toDate?n.toDate():new Date(n);if(!r||isNaN(r.getTime())){const o=t.activatedAt,a=(i=o==null?void 0:o.toDate)!=null&&i.call(o)?o.toDate():t.activatedAt?new Date(t.activatedAt):null;return a&&e.getTime()-a.getTime()<4*60*60*1e3,!0}return e<=r},X7=t=>{if(!t||!t.isActive)return null;if(t.planType==="lifetime")return-1;if(!t.endDate)return null;const e=new Date,n=t.endDate,r=n!=null&&n.toDate?n.toDate():new Date(n);if(!r||isNaN(r.getTime()))return null;const s=r.getTime()-e.getTime(),i=Math.ceil(s/(1e3*60*60*24));return i>0?i:0},dq=async(t,e,n,r)=>{try{const s=new Date,i=Y7(e,s),o={planType:e,startDate:s,endDate:i,isActive:!0,activatedBy:n,activatedAt:s};console.log(" Activating subscription for user:",{userId:t,planType:e,adminId:n,subscriptionData:o});const a=fe(H,"users",t);if(await He(a,{subscription:o,isActive:!0,approved:!0,isOnFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,updatedAt:new Date}),console.log(" Subscription data updated in Firestore"),typeof window<"u"){const l=new CustomEvent("subscriptionActivated",{detail:{userId:t,planType:e,timestamp:new Date().toISOString()}});window.dispatchEvent(l),console.log(" Subscription activation event dispatched:",{userId:t,planType:e});const c=new CustomEvent("userSubscriptionUpdated",{detail:{userId:t,planType:e,isActive:!0,timestamp:new Date().toISOString()}});window.dispatchEvent(c),console.log(" Global subscription update event dispatched")}console.log(`    ${e}  ${t}`)}catch(s){throw console.error("    :",s),new Error("   ")}},J7=async t=>{try{const e=fe(H,"users",t);await He(e,{"subscription.isActive":!1,isActive:!1,isOnFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,updatedAt:new Date}),console.log(`      ${t}`)}catch(e){throw console.error("     :",e),new Error("    ")}},hq=async t=>{try{const e=fe(H,"users",t),n=await st(e);return n.exists()&&n.data().subscription||null}catch(e){return console.error("      :",e),null}},fq=t=>{switch(t){case"monthly":return"";case"quarterly":return" ";case"yearly":return"";case"lifetime":return" ";case"zero":return"";case"tahweela":return"";default:return" "}},pq=t=>{if(!t)return"text-gray-500";if(!t.isActive)return"text-red-500";if(t.planType==="lifetime")return"text-green-600";const e=X7(t);return e===null||e<=0?"text-red-500":e<=7?"text-yellow-500":"text-green-500"},mq=t=>t?(t instanceof Date?t:new Date(t)).toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric"}):" ";class bE{static async startFreeTrialFromAdmin(e){try{const n=fe(H,"users",e),r=await st(n);if(!r.exists())return{success:!1,message:"  "};if(r.data().hasUsedFreeTrial)return{success:!1,message:"       "};const i=new Date,o=await this.getTrialDurationHours(),a=new Date(i.getTime()+o*60*60*1e3);return await He(n,{hasUsedFreeTrial:!0,freeTrialStartDate:i,freeTrialEndDate:a,isOnFreeTrial:!0,isActive:!0,approved:!0,updatedAt:ve()}),{success:!0,message:`     ${o} ${o>=3&&o<=10?"":o===2?"":""}`}}catch(n){return console.error("Error starting admin free trial:",n),{success:!1,message:"     "}}}static async startFreeTrial(e){try{const n=fe(H,"users",e),r=await st(n);if(!r.exists())return{success:!1,message:"  "};if(r.data().hasUsedFreeTrial)return{success:!1,message:"     "};const i=new Date,o=await this.getTrialDurationHours(),a=new Date(i.getTime()+o*60*60*1e3);return await He(n,{hasUsedFreeTrial:!0,freeTrialStartDate:i,freeTrialEndDate:a,isOnFreeTrial:!0,isActive:!0,approved:!0,updatedAt:ve()}),{success:!0,message:`     ${o} ${o>=3&&o<=10?"":o===2?"":""}`}}catch(n){return console.error("    :",n),{success:!1,message:"     "}}}static async checkTrialValidity(e){var n,r,s,i;try{const o=fe(H,"users",e),a=await st(o);if(!a.exists())return{isValid:!1,isExpired:!1,hoursRemaining:0,hasUsedTrial:!1};const l=a.data(),c=l.hasUsedFreeTrial||!1,d=l.isOnFreeTrial||!1;let h=(r=(n=l.freeTrialEndDate)==null?void 0:n.toDate)!=null&&r.call(n)?l.freeTrialEndDate.toDate():l.freeTrialEndDate?new Date(l.freeTrialEndDate):null;const f=(i=(s=l.freeTrialStartDate)==null?void 0:s.toDate)!=null&&i.call(s)?l.freeTrialStartDate.toDate():l.freeTrialStartDate?new Date(l.freeTrialStartDate):null;if(!c||!d||!h)return{isValid:!1,isExpired:!1,hoursRemaining:0,hasUsedTrial:c};const p=new Date;if(p>h){const _=of(l.subscription);return await He(o,{isOnFreeTrial:!1,isActive:_,approved:_,updatedAt:ve()}),!_&&typeof window<"u"&&setTimeout(()=>{window.location.href="/user/pending-approval"},1e3),{isValid:!1,isExpired:!0,hoursRemaining:0,hasUsedTrial:c}}try{const _=await this.getTrialDurationHours();if(f&&_&&Number.isFinite(_)&&Math.round((h.getTime()-f.getTime())/36e5)<_){const T=new Date(f.getTime()+_*60*60*1e3);T.getTime()>h.getTime()&&(await He(o,{freeTrialEndDate:T,updatedAt:ve()}),h=T)}}catch(_){console.warn("checkTrialValidity: failed to auto-extend to configured hours",_)}const g=h.getTime()-p.getTime();return{isValid:!0,isExpired:!1,hoursRemaining:Math.ceil(g/(1e3*3600)),hasUsedTrial:c}}catch(o){return console.error("      :",o),{isValid:!1,isExpired:!1,hoursRemaining:0,hasUsedTrial:!1}}}static async getTrialData(e){var n,r;try{const s=fe(H,"users",e),i=await st(s);if(!i.exists())return{hasUsedFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,isOnFreeTrial:!1};const o=i.data();return{hasUsedFreeTrial:o.hasUsedFreeTrial||!1,freeTrialStartDate:((n=o.freeTrialStartDate)==null?void 0:n.toDate())||null,freeTrialEndDate:((r=o.freeTrialEndDate)==null?void 0:r.toDate())||null,isOnFreeTrial:o.isOnFreeTrial||!1}}catch(s){return console.error("      :",s),{hasUsedFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,isOnFreeTrial:!1}}}static async getTrialDurationHours(){try{const e=fe(H,"config","freeTrial"),n=await st(e);if(n.exists()){const r=n.data(),s=typeof(r==null?void 0:r.durationHours)=="number"?r.durationHours:this.TRIAL_DURATION_HOURS;return!Number.isFinite(s)||s<1?this.TRIAL_DURATION_HOURS:s}return this.TRIAL_DURATION_HOURS}catch(e){return console.warn("getTrialDurationHours: fallback to default due to error",e),this.TRIAL_DURATION_HOURS}}static async updateTrialDurationHours(e){try{if(!Number.isFinite(e)||e<1)return{success:!1,message:"       "};const n=fe(H,"config","freeTrial");return await Cr(n,{durationHours:e,updatedAt:ve()},{merge:!0}),{success:!0,message:"     "}}catch(n){return console.error("Error updating trial duration hours:",n),{success:!1,message:"    "}}}static async resetActiveTrialToCurrentDuration(e){var n,r;try{const s=fe(H,"users",e),i=await st(s);if(!i.exists())return{success:!1,message:"  "};const o=i.data(),a=!!o.isOnFreeTrial,l=(r=(n=o.freeTrialStartDate)==null?void 0:n.toDate)!=null&&r.call(n)?o.freeTrialStartDate.toDate():o.freeTrialStartDate?new Date(o.freeTrialStartDate):null;if(!a||!l)return{success:!1,message:"     "};const c=await this.getTrialDurationHours(),d=new Date(l.getTime()+c*60*60*1e3);return await He(s,{freeTrialEndDate:d,updatedAt:ve()}),{success:!0,message:`     ${c} ${c>=3&&c<=10?"":c===2?"":""}`}}catch(s){return console.error("Error resetting active trial duration:",s),{success:!1,message:"    "}}}static async cancelActiveFreeTrial(e){try{const n=fe(H,"users",e),r=await st(n);return r.exists()?!r.data().isOnFreeTrial?{success:!1,message:"      "}:(await He(n,{isOnFreeTrial:!1,isActive:!1,approved:!1,freeTrialEndDate:new Date,updatedAt:ve()}),{success:!0,message:"        "}):{success:!1,message:"  "}}catch(n){return console.error("Error cancelling active free trial:",n),{success:!1,message:"    "}}}}f0(bE,"TRIAL_DURATION_HOURS",4);const gq=Object.freeze(Object.defineProperty({__proto__:null,FreeTrialService:bE},Symbol.toStringTag,{value:"Module"})),Z7={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_VERSION:"0.0.0",VITE_DEV_MODE:"true",VITE_ENABLE_OFFLINE_PERSISTENCE:"false",VITE_FIREBASE_API_KEY:"AIzaSyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s",VITE_FIREBASE_APP_ID:"1:483702062341:web:b1ff06ad175cb7ae428b6c",VITE_FIREBASE_AUTH_DOMAIN:"voda-c6abd.firebaseapp.com",VITE_FIREBASE_AUTH_EMULATOR_URL:"http://localhost:9099",VITE_FIREBASE_FIRESTORE_EMULATOR_HOST:"localhost:8080",VITE_FIREBASE_FUNCTIONS_EMULATOR_HOST:"localhost:5001",VITE_FIREBASE_MEASUREMENT_ID:"G-CV6QGH7G7P",VITE_FIREBASE_MESSAGING_SENDER_ID:"483702062341",VITE_FIREBASE_PROJECT_ID:"voda-c6abd",VITE_FIREBASE_STORAGE_BUCKET:"voda-c6abd.appspot.com",VITE_FORCE_HASH_ROUTER:"true",VITE_SHOP_ID:"demo-shop-001",VITE_SHOP_NAME:"   ",VITE_SHOW_ENV_BANNER:"true",VITE_USE_EMULATORS:"false",VITE_USE_FIREBASE_EMULATOR:"false"},cN=A.createContext(void 0);function Qi(){const t=A.useContext(cN);if(t===void 0)throw new Error("useFirebaseAuth must be used within a FirebaseAuthProvider");return t}const e8=({children:t})=>{const[e,n]=A.useState(null),[r,s]=A.useState(null),[i,o]=A.useState(null),[a,l]=A.useState(!1),[c,d]=A.useState(!0),h=async S=>{var I,b,D,P,N,k,q,Z,ie,Y,F,U,K,ce,ee,oe;try{const ae=fe(H,"profiles",S);let Ie=!1;try{const ue=await ND(ae);if(ue.exists()){const we=ue.data(),Re={userId:ue.id,shopId:we.shopId,role:we.role,fullName:we.fullName,phone:we.phone,shopName:we.shopName||null,approved:we.approved,avatarId:we.avatarId,bridgeLink:we.bridgeLink||null,bridgeDeviceId:we.bridgeDeviceId||null,showWithdrawNote:we.showWithdrawNote!==void 0?!!we.showWithdrawNote:!0,isReceiptNoteEnabled:we.isReceiptNoteEnabled!==void 0?!!we.isReceiptNoteEnabled:!0,createdAt:((b=(I=we.createdAt)==null?void 0:I.toDate)==null?void 0:b.call(I))||new Date,updatedAt:((P=(D=we.updatedAt)==null?void 0:D.toDate)==null?void 0:P.call(D))||new Date,trialStarted:we.trialStarted||!1,trialStartDate:(k=(N=we.trialStartDate)==null?void 0:N.toDate)==null?void 0:k.call(N),trialEndDate:(Z=(q=we.trialEndDate)==null?void 0:q.toDate)==null?void 0:Z.call(q),trialExpired:we.trialExpired||!1};s(Re),Ie=!0,d(!1)}}catch(ue){console.log("Cache profile not available:",(ue==null?void 0:ue.code)||ue)}try{if(!Ie){const ue=localStorage.getItem(`profile_cache_${S}`);if(ue){const we=JSON.parse(ue);s(we),Ie=!0,d(!1)}}}catch{}if(!Ie)for(let ue=0;ue<3;ue++)try{const we=await st(ae);if(we.exists()){const Re=we.data(),It={userId:we.id,shopId:Re.shopId,role:Re.role,fullName:Re.fullName,phone:Re.phone,shopName:Re.shopName||null,approved:Re.approved,avatarId:Re.avatarId,bridgeLink:Re.bridgeLink||null,bridgeDeviceId:Re.bridgeDeviceId||null,showWithdrawNote:Re.showWithdrawNote!==void 0?!!Re.showWithdrawNote:!0,isReceiptNoteEnabled:Re.isReceiptNoteEnabled!==void 0?!!Re.isReceiptNoteEnabled:!0,createdAt:((Y=(ie=Re.createdAt)==null?void 0:ie.toDate)==null?void 0:Y.call(ie))||new Date,updatedAt:((U=(F=Re.updatedAt)==null?void 0:F.toDate)==null?void 0:U.call(F))||new Date,trialStarted:Re.trialStarted||!1,trialStartDate:(ce=(K=Re.trialStartDate)==null?void 0:K.toDate)==null?void 0:ce.call(K),trialEndDate:(oe=(ee=Re.trialEndDate)==null?void 0:ee.toDate)==null?void 0:oe.call(ee),trialExpired:Re.trialExpired||!1};s(It);try{localStorage.setItem(`profile_cache_${we.id}`,JSON.stringify(It))}catch{}Ie=!0,d(!1);break}}catch{}return Gi(ae,async ue=>{var we,Re,It,Ot,Qt,zt,vn,Nr;if(ue.exists()){const Ee=ue.data(),Yn={userId:ue.id,shopId:Ee.shopId,role:Ee.role,fullName:Ee.fullName,phone:Ee.phone,shopName:Ee.shopName||null,approved:Ee.approved,avatarId:Ee.avatarId,bridgeLink:Ee.bridgeLink||null,bridgeDeviceId:Ee.bridgeDeviceId||null,showWithdrawNote:Ee.showWithdrawNote!==void 0?!!Ee.showWithdrawNote:!0,isReceiptNoteEnabled:Ee.isReceiptNoteEnabled!==void 0?!!Ee.isReceiptNoteEnabled:!0,createdAt:((Re=(we=Ee.createdAt)==null?void 0:we.toDate)==null?void 0:Re.call(we))||new Date,updatedAt:((Ot=(It=Ee.updatedAt)==null?void 0:It.toDate)==null?void 0:Ot.call(It))||new Date,trialStarted:Ee.trialStarted||!1,trialStartDate:(zt=(Qt=Ee.trialStartDate)==null?void 0:Qt.toDate)==null?void 0:zt.call(Qt),trialEndDate:(Nr=(vn=Ee.trialEndDate)==null?void 0:vn.toDate)==null?void 0:Nr.call(vn),trialExpired:Ee.trialExpired||!1};s(Yn);try{localStorage.setItem(`profile_cache_${ue.id}`,JSON.stringify(Yn))}catch{}Ie||(Ie=!0,d(!1))}else if(!Ie)try{const Ee=await aN.getByUserId(S);if(Ee){const Yn={userId:S,shopId:Ee.shopId,role:Ee.role||"user",fullName:Ee.fullName||null,phone:Ee.phone||null,shopName:Ee.shopName||null,approved:Ee.approved??!1,avatarId:Ee.avatarId||void 0,bridgeLink:Ee.bridgeLink||null,bridgeDeviceId:Ee.bridgeDeviceId||null,createdAt:ve(),updatedAt:ve()};await Cr(fe(H,"profiles",S),Yn,{merge:!0}),s({...Ee,userId:S,createdAt:Ee.createdAt||new Date,updatedAt:Ee.updatedAt||new Date})}else await p(S)}catch(Ee){console.error("Profile migration/create error:",Ee)}finally{Ie=!0,d(!1)}},ue=>{console.error("Profile listener error:",ue);try{d(!1)}catch{}})}catch(ae){return console.error("Error setting up profile listener:",ae),await p(S),d(!1),()=>{}}},f=async S=>{try{const I=fe(H,"users",S.uid);(await st(I)).exists()?(await He(I,{lastLogin:ve(),updatedAt:ve()}),console.log(" ensureAdminUserDoc: Updated lastLogin for",S.uid)):(await Cr(I,{email:S.email||"",displayName:S.displayName||" ",phone:null,shopName:null,isActive:!1,createdAt:ve(),updatedAt:ve(),lastLogin:ve()},{merge:!0}),console.log(" ensureAdminUserDoc: Created users doc for",S.uid))}catch(I){console.error(" ensureAdminUserDoc error:",I)}},p=async(S,I,b,D,P)=>{var N,k;try{console.log("Creating default profile for user:",S);const q=qv.generateReferralCode(S);let Z=null;const ie={userId:S,shopId:"default-shop",role:"user",fullName:I||" ",phone:b||null,shopName:D||null,approved:!1,referralCode:q,referredBy:P||null,bridgeLink:null,bridgeDeviceId:null,showWithdrawNote:!0,isReceiptNoteEnabled:!0,createdAt:new Date,updatedAt:new Date};s(ie),console.log("Created temporary profile:",ie);try{const{doc:Y,setDoc:F,serverTimestamp:U}=await De(async()=>{const{doc:oe,setDoc:ae,serverTimestamp:Ie}=await Promise.resolve().then(()=>Bg);return{doc:oe,setDoc:ae,serverTimestamp:Ie}},void 0,import.meta.url),{db:K}=await De(async()=>{const{db:oe}=await Promise.resolve().then(()=>Wg);return{db:oe}},void 0,import.meta.url),ce={email:((N=Jn.currentUser)==null?void 0:N.email)||"",displayName:I||" ",phone:b||null,shopName:D||null,isActive:!1,referralCode:q,referredBy:P||null,createdAt:U(),lastLogin:null,updatedAt:U()};if(console.log("Attempting to add user to admin collection with data:",ce),await F(Y(K,"users",S),ce,{merge:!0}),console.log(" User successfully added to admin collection:",ce),P)try{const{query:oe,collection:ae,where:Ie,limit:Ye,getDocs:ue}=await De(async()=>{const{query:Ot,collection:Qt,where:zt,limit:vn,getDocs:Nr}=await Promise.resolve().then(()=>Bg);return{query:Ot,collection:Qt,where:zt,limit:vn,getDocs:Nr}},void 0,import.meta.url),{db:we}=await De(async()=>{const{db:Ot}=await Promise.resolve().then(()=>Wg);return{db:Ot}},void 0,import.meta.url),Re=oe(ae(we,"users"),Ie("referralCode","==",P),Ye(1)),It=await ue(Re);It.empty?console.log(" Referral code not found in users collection:",P):(Z=It.docs[0].id,await qv.create({referrerId:Z,referredUserId:S,referredUserEmail:((k=Jn.currentUser)==null?void 0:k.email)||"",referralCode:P,status:"completed"}),console.log(" Referral record created successfully for referrer:",Z))}catch(oe){console.error(" Error creating referral record:",oe)}const ee=await st(Y(K,"users",S));ee.exists()?console.log(" User document verified in Firestore:",ee.data()):console.log(" User document not found after creation")}catch(Y){console.error(" Error adding user to admin collection:",Y)}try{const{addDoc:Y,collection:F,serverTimestamp:U}=await De(async()=>{const{addDoc:ae,collection:Ie,serverTimestamp:Ye}=await Promise.resolve().then(()=>Bg);return{addDoc:ae,collection:Ie,serverTimestamp:Ye}},void 0,import.meta.url),{db:K}=await De(async()=>{const{db:ae}=await Promise.resolve().then(()=>Wg);return{db:ae}},void 0,import.meta.url),ee=(await Y(F(K,"shops"),{name:D||" ",ownerId:S,createdAt:U(),updatedAt:U(),isActive:!0})).id;await sf.create({userId:S,shopId:ee,role:"user",fullName:" ",phone:null});try{await sf.update(S,{referralCode:q,referredBy:Z||null,showWithdrawNote:!0,isReceiptNoteEnabled:!0})}catch(ae){console.warn(" Failed to update profile with referral fields:",ae)}const oe=await sf.getById(S);oe&&(s(oe),console.log("Updated with Firebase profile:",oe))}catch(Y){console.error("Error creating profile:",Y),console.log("Using local profile - Firebase unavailable")}}catch(q){console.error("Error creating default profile:",q)}};A.useEffect(()=>{console.log(" Setting up auth state listener"),d(!0);const S=setTimeout(()=>{console.warn(" Global auth timeout reached, forcing loading to false"),d(!1)},2e4);localStorage.getItem("demoProfile")&&(console.log(" Cleaning up demo profile from localStorage"),localStorage.removeItem("demoProfile"));const I=localStorage.getItem("demoUser"),b=localStorage.getItem("demoProfile");if(I&&b){console.log(" Found demo user in localStorage");try{const P=JSON.parse(I),N=JSON.parse(b);n(P),s(N),clearTimeout(S),d(!1);return}catch(P){console.error("Error parsing demo user data:",P),localStorage.removeItem("demoUser"),localStorage.removeItem("demoProfile")}}const D=Gj(Jn,async P=>{console.log(" Auth state changed:",{uid:P==null?void 0:P.uid,email:P==null?void 0:P.email,emailVerified:P==null?void 0:P.emailVerified,timestamp:new Date().toISOString()}),n(P),P?(console.log(" User authenticated, starting profile hydration for:",P.uid),h(P.uid),w(),f(P)):(console.log(" User not authenticated, clearing profile"),s(null),o(null),l(!1),d(!1)),clearTimeout(S)});return()=>{clearTimeout(S),D()}},[]),A.useEffect(()=>{const S=async()=>{try{await T(),await w()}catch{}};try{window.addEventListener("app:softRefresh",S)}catch{}return()=>{try{window.removeEventListener("app:softRefresh",S)}catch{}}},[e==null?void 0:e.uid]),A.useEffect(()=>{if(!(e!=null&&e.uid))return;const S=AE.subscribeDeletedTransactionsLocalSync(e.uid);return()=>{try{S==null||S()}catch{}}},[e==null?void 0:e.uid]);const E=async(S,I,b,D,P,N)=>{try{const k=(S||"").trim().toLowerCase(),q=(I||"").trim();console.log(" Attempting to sign up user:",k);const Z=await OI(Jn,k,q);console.log(" Sign up successful:",Z.user.uid),await p(Z.user.uid,b,D,P,N),await f(Z.user);try{await h(Z.user.uid),await w()}catch{}return{error:null}}catch(k){console.error(" Sign up error:",k);let q="    ";return k.code==="auth/email-already-in-use"?q="    ":k.code==="auth/weak-password"?q="   ":k.code==="auth/invalid-email"&&(q="   "),{error:{...k,message:q}}}},g=async(S,I)=>{const b=(S||"").trim().toLowerCase(),D=(I||"").trim();try{const P=F=>F.replace(/[\u200B\u200C\u200D\u200E\u200F\u061C]/g,""),N=F=>F.replace(/[-]/g,U=>String("0123456789"["".indexOf(U)])).replace(/[-]/g,U=>String("0123456789"["".indexOf(U)])),k=F=>F.replace(/[0-9]/g,U=>""[Number(U)]),q=F=>N(P(F));if(console.log(" Attempting to sign in user:",b),b==="test@example.com"&&D==="123456"){console.log(" Demo user login detected");const F={uid:"demo-user-123",email:"test@example.com",displayName:" ",emailVerified:!0},U={userId:"demo-user-123",shopId:"demo-shop",role:"user",fullName:" ",phone:"01000000000",approved:!0,createdAt:new Date,updatedAt:new Date};return localStorage.setItem("demoUser",JSON.stringify(F)),localStorage.setItem("demoProfile",JSON.stringify(U)),n(F),s(U),d(!1),console.log(" Demo user signed in successfully"),{error:null}}let Z;const ie=[q(D),P(D),k(P(D))];let Y=null;for(const F of ie)try{F!==D&&console.log(" Trying password variant"),Z=await Wj(Jn,b,F);break}catch(U){if(Y=U,(U==null?void 0:U.code)!=="auth/wrong-password"&&(U==null?void 0:U.code)!=="auth/invalid-credential")throw U}if(!Z)throw Y||new Error("auth/invalid-credential");console.log(" Sign in successful:",Z.user.uid);try{if((await st(fe(H,"deletedUsers",Z.user.uid))).exists())return console.log(" User is deleted, signing out"),await VI(Jn),{error:{code:"auth/user-deleted",message:"      .    ."}}}catch(F){console.error("Error checking deleted users:",F)}await f(Z.user);try{await h(Z.user.uid),await w()}catch{}return{error:null}}catch(P){if(console.error(" Sign in error:",P),b==="test@example.com"&&P.code==="auth/user-not-found"){console.log(" Creating test user...");try{const k=await OI(Jn,b,D);return console.log(" Test user created:",k.user.uid),await p(k.user.uid," ","01000000000"," "),{error:null}}catch(k){return console.error(" Error creating test user:",k),{error:k}}}let N="    ";return P.code==="auth/invalid-credential"?N="      ":P.code==="auth/user-not-found"?N="     ":P.code==="auth/wrong-password"?N="   ":P.code==="auth/too-many-requests"&&(N="      "),{error:{...P,message:N}}}},y=async()=>{try{localStorage.getItem("demoUser")?(console.log(" Signing out demo user"),localStorage.removeItem("demoUser"),localStorage.removeItem("demoProfile"),n(null),s(null),d(!1)):await VI(Jn);const b=(()=>{try{const D=typeof window<"u"?window:null,P=!!(D&&D.electronAPI)||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"),N=typeof window<"u"&&window.location.protocol==="file:",k=typeof window<"u"&&typeof window.location.hash=="string"&&window.location.hash.startsWith("#/");return P||N||k||typeof import.meta<"u"&&Z7&&!0}catch{return!1}})()?"#/user/login":"/user/login";try{window.location.replace(b)}catch{window.location.href=b}}catch(S){console.error("Sign out error:",S)}},_=async S=>{try{return await Hj(Jn,S),{error:null}}catch(I){console.error("Reset password error:",I);let b="        ";return I.code==="auth/user-not-found"?b="     ":I.code==="auth/invalid-email"&&(b="   "),{error:{...I,message:b}}}},w=async()=>{if(!e){console.log("No user found for subscription check"),o(null),l(!1);return}console.log("Checking subscription status for user:",e.uid);try{return Gi(fe(H,"users",e.uid),async I=>{var b,D,P,N,k,q,Z,ie;if(I.exists()){const Y=I.data();o(Y),console.log(" Subscription Data Details (Real-time):",{userId:e.uid,userEmail:e.email,subscription:Y.subscription,subscriptionExists:!!Y.subscription,planType:(b=Y.subscription)==null?void 0:b.planType,isActive:(D=Y.subscription)==null?void 0:D.isActive,startDate:(P=Y.subscription)==null?void 0:P.startDate,endDate:(N=Y.subscription)==null?void 0:N.endDate,activatedBy:(k=Y.subscription)==null?void 0:k.activatedBy,activatedAt:(q=Y.subscription)==null?void 0:q.activatedAt,isOnFreeTrial:Y.isOnFreeTrial,freeTrialEndDate:Y.freeTrialEndDate,branchPackageStatus:(Z=Y==null?void 0:Y.branchPackage)==null?void 0:Z.status});const F=((ie=Y==null?void 0:Y.branchPackage)==null?void 0:ie.status)==="active";let U=!1;if(F)console.log(" Branch package is active, granting access"),U=!0;else if(Y.isOnFreeTrial){console.log(" User is on free trial, checking validity...");const K=await bE.checkTrialValidity(e.uid);K.isValid&&!K.isExpired?(console.log(" Free trial is valid, granting access"),U=!0):K.isExpired?(console.log(" Free trial has expired, checking regular subscription"),U=of(Y.subscription)):(console.log(" Free trial is not valid"),U=of(Y.subscription))}else U=of(Y.subscription);l(U),console.log(" Subscription Validation Result (Real-time):",{userId:e.uid,isValid:U,isOnFreeTrial:Y.isOnFreeTrial,hasActiveBranchPackage:F,reason:F?"Branch package active":Y.isOnFreeTrial?"Free trial active":Y.subscription?Y.subscription.isActive?Y.subscription.planType==="lifetime"?"Lifetime plan":Y.subscription.endDate?new Date>new Date(Y.subscription.endDate)?"Expired":"Valid":"No end date":"Subscription not active":"No subscription data"});try{const K=Y.subscription,ce=K==null?void 0:K.planType,ee=K==null?void 0:K.endDate,oe=ee!=null&&ee.toDate?ee.toDate():ee?new Date(ee):null,ae=new Date,Ie=ce===ms.MONTHLY||ce===ms.QUARTERLY||ce===ms.YEARLY;K&&K.isActive===!0&&Ie&&oe&&!isNaN(oe.getTime())&&ae>oe&&(await J7(e.uid),console.log(" Subscription paused due to end date reached:",{userId:e.uid,plan:ce,endDate:oe}))}catch(K){console.warn("Failed to auto-deactivate expired subscription:",K)}}},I=>{console.error(" Subscription listener error:",I)})}catch(S){console.error("Error setting up subscription listener:",S)}},T=async()=>{if(e)try{console.log("Refreshing profile for user:",e.uid),await h(e.uid),await w()}catch(S){console.error("Error refreshing profile:",S)}},V={user:e,profile:r,userSubscription:i,isSubscriptionActive:a,loading:c,signUp:E,signIn:g,signOut:y,resetPassword:_,updateUserProfile:async S=>{if(e)try{const I={updatedAt:ve()};if(S.fullName!==void 0&&(I.fullName=S.fullName),S.phone!==void 0&&(I.phone=S.phone),S.bridgeLink!==void 0){const b=(S.bridgeLink||"").trim();I.bridgeLink=b.length?b:null}if(S.bridgeDeviceId!==void 0){const b=(S.bridgeDeviceId||"").trim();I.bridgeDeviceId=b.length?b:null}S.showWithdrawNote!==void 0&&(I.showWithdrawNote=!!S.showWithdrawNote),S.isReceiptNoteEnabled!==void 0&&(I.isReceiptNoteEnabled=!!S.isReceiptNoteEnabled),await He(fe(H,"profiles",e.uid),I),await h(e.uid)}catch(I){console.error("Error updating user profile:",I)}},updateAvatarId:async S=>{if(e)try{await He(fe(H,"profiles",e.uid),{avatarId:S,updatedAt:ve()}),await h(e.uid)}catch(I){console.error("Error updating avatarId:",I)}},refreshProfile:T,checkSubscriptionStatus:w};return x.jsx(cN.Provider,{value:V,children:t})},bh=()=>{const[t,e]=A.useState(""),[n,r]=A.useState(""),[s,i]=A.useState(!1),[o,a]=A.useState(!1),{signIn:l}=Qi(),c=md();A.useEffect(()=>{try{const p=typeof window<"u"?window.localStorage.getItem("cashy:lastEmail"):null;p&&e(p)}catch{}},[]);const d=async p=>{if(p.preventDefault(),o){At.info("     ...");return}if(typeof navigator<"u"&&navigator.onLine===!1){At.error("   .      .");return}const E=(t||"").trim().toLowerCase(),g=(n||"").trim();if(console.log("    :",{email:E,password:"***"}),!t||!n){At.error("   ");return}if(!/^\S+@\S+\.\S+$/.test(E)){At.error("    ");return}a(!0);try{console.log("  signIn...");const{error:y}=await l(E,g);if(console.log(" SignIn result:",{error:y}),y){console.error("    :",y);const _=y==null?void 0:y.code;_==="auth/user-not-found"?At.error("     "):_==="auth/wrong-password"?At.error("   "):_==="auth/invalid-credential"?At.error("      "):_==="auth/too-many-requests"?At.error("      "):At.error((y==null?void 0:y.message)||"    ")}else console.log("    !"),At.success("   !"),c("/user/dashboard")}catch(y){console.error("   :",y),At.error("   ")}finally{a(!1)}},h=p=>{if(o){p.preventDefault(),p.stopPropagation(),At.info("     ...");return}if(typeof navigator<"u"&&navigator.onLine===!1){p.preventDefault(),p.stopPropagation(),At.error("   .      .");return}t||At.error("   "),n||At.error("   ");const E=(t||"").trim().toLowerCase();E&&!/^\S+@\S+\.\S+$/.test(E)&&At.error("    ")},f=()=>{c("/user/forgot-password")};return A.useEffect(()=>{if(!(typeof window<"u"&&window.matchMedia&&window.matchMedia("(pointer: coarse)").matches))return;const p=document.documentElement,E=document.body,g=p.style.overflow,y=E.style.overflow,_=p.style.overscrollBehaviorY,w=E.style.overscrollBehaviorY;return p.style.overflow="hidden",E.style.overflow="hidden",p.style.overscrollBehaviorY="none",E.style.overscrollBehaviorY="none",()=>{p.style.overflow=g||"",E.style.overflow=y||"",p.style.overscrollBehaviorY=_||"",E.style.overscrollBehaviorY=w||""}},[]),x.jsx("div",{className:"relative min-h-[100dvh] w-full overflow-hidden flex items-center justify-center p-4 bg-no-repeat bg-cover",style:{backgroundImage:"var(--bg-purple-gradient)",backgroundAttachment:"fixed"},children:x.jsxs("div",{className:"w-full max-w-md mt-16 md:mt-12 lg:mt-10",children:[x.jsxs("div",{className:"text-center mb-8",children:[x.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-r from-green-600 to-blue-600 rounded-full mb-4 shadow-2xl",children:x.jsx(PL,{className:"w-10 h-10 text-white"})}),x.jsx("div",{className:"flex items-center justify-center mb-2",children:x.jsx("span",{className:"text-2xl font-extrabold text-white tracking-wider uppercase",dir:"ltr",style:{fontFamily:"Inter, sans-serif"},children:"cashy link"})}),x.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"  "}),x.jsx("p",{className:"text-white/80",children:"    "})]}),x.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-8 shadow-2xl border border-white/20",children:[x.jsxs("form",{onSubmit:d,className:"space-y-6",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-white",children:" "}),x.jsxs("div",{className:"relative",children:[x.jsx(DT,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/70 w-5 h-5"}),x.jsx(sv,{id:"email",type:"email",placeholder:"  ",value:t,onChange:p=>{const E=p.target.value;e(E);try{window.localStorage.setItem("cashy:lastEmail",E)}catch{}},className:"pl-10 pr-4 py-3 rounded-lg bg-white/20 border-white/30 text-white placeholder:text-white/70 focus:ring-2 focus:ring-green-400",dir:"rtl",required:!0})]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-white",children:" "}),x.jsxs("div",{className:"relative",children:[x.jsx(IL,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/70 w-5 h-5"}),x.jsx(sv,{id:"password",type:s?"text":"password",placeholder:"  ",value:n,onChange:p=>r(p.target.value),className:"pl-10 pr-10 py-3 rounded-lg bg-white/20 border-white/30 text-white placeholder:text-white/70 focus:ring-2 focus:ring-green-400",autoComplete:"off",dir:"rtl",required:!0}),x.jsx("button",{type:"button",onClick:()=>i(!s),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-white/70 hover:text-white transition-colors",children:s?x.jsx(_L,{className:"w-5 h-5"}):x.jsx(wL,{className:"w-5 h-5"})})]})]}),x.jsx("div",{className:"flex justify-end",children:x.jsxs(gP,{type:"button",variant:"ghost",size:"sm",onClick:f,className:"text-green-200 hover:text-green-100 p-0 h-auto font-normal hover:bg-transparent",children:[x.jsx(DT,{className:"w-4 h-4 ml-1"}),"  "]})}),x.jsx("button",{type:"submit",onClick:h,className:"w-full bg-gradient-to-r from-green-600 to-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:from-green-700 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-green-400 transition-all duration-200",children:o?x.jsxs("div",{className:"flex items-center justify-center",children:[x.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white ml-2"}),"  ..."]}):x.jsxs("div",{className:"flex items-center justify-center",children:[x.jsx(pL,{className:"w-5 h-5 ml-2"})," "]})})]}),x.jsxs("div",{className:"mt-6 text-center space-y-3",children:[x.jsxs("p",{className:"text-sm text-white/80",children:["  "," ",x.jsx(l3,{to:"/user/register",className:"text-green-200 hover:text-green-100 font-medium transition-colors hover:underline",children:"  "})]}),x.jsxs("p",{className:"text-sm text-white/80",children:["        "," ",x.jsx("a",{href:"https://wa.me/201000392539",target:"_blank",rel:"noreferrer",className:"text-green-200 hover:text-green-100 font-medium hover:underline",children:"01000392539"})," ","   "," ",x.jsx("a",{href:"mailto:info@cashy-link.com",className:"text-blue-200 hover:text-blue-100 font-medium hover:underline",children:"info@cashy-link.com"})]})]})]}),x.jsx("div",{className:"mt-6 text-center",children:x.jsx("p",{className:"text-xs text-white/70",children:"   "})})]})})},t8=()=>{const t=md(),e=os(),{signOut:n,user:r,userSubscription:s}=Qi(),{toast:i}=j_(),[o,a]=A.useState(!1),[l,c]=A.useState(!1),d=[{id:"home",label:"",icon:TL,path:"/user/dashboard",action:()=>{t("/user/dashboard"),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},100)}},{id:"debts",label:"",icon:EL,path:"/debts",action:()=>{t("/user/dashboard",{state:{openDebtDialog:!0}})}},{id:"transfer",label:"",icon:mL,path:"/transfer",action:()=>{t("/user/dashboard",{state:{openTransactionSection:!0,transactionType:"transfer",startNewTransaction:!0}})}},{id:"add",label:"",icon:NT,path:"/add",isSpecial:!0},{id:"withdraw",label:"",icon:fL,path:"/withdraw",action:()=>{t("/user/dashboard",{state:{openTransactionSection:!0,transactionType:"withdraw",startNewTransaction:!0}})}},{id:"transactions",label:"",icon:vg,path:"/transactions"},{id:"settings",label:"",icon:OT,path:"/profile-settings"}],h=[{id:"installment",label:"",icon:gL,action:()=>{var y;a(!1);const g=(y=s==null?void 0:s.subscription)==null?void 0:y.planType;if(g===ms.TAHWEELA||g===ms.ZERO){i({title:"  ",description:"      .",variant:"destructive"});return}t("/user/dashboard",{state:{openInstallment:!0}})},color:"#7C3AED"},{id:"maintenance",label:"",icon:CL,action:()=>{a(!1),t("/user/dashboard",{state:{openMaintenanceDialog:!0}})},color:"#0EA5E9"},{id:"credit-cards",label:" ",icon:vL,action:()=>{a(!1),t("/user/dashboard",{state:{openCreditCardsDialog:!0}})},color:"#8B5CF6"},{id:"sales",label:"",icon:xL,action:()=>{a(!1),t("/user/dashboard",{state:{openSalesDialog:!0}})},color:"#F59E0B"},{id:"shop-expenses",label:" ",icon:vg,action:()=>{a(!1),t("/user/dashboard",{state:{openShopExpensesDialog:!0}})},color:"#F97316"},{id:"deficiencies",label:"",icon:RL,action:()=>{a(!1),t("/user/dashboard",{state:{openDeficienciesDialog:!0}})},color:"#DB2777"},{id:"add-wallet",label:" ",icon:NT,action:()=>{a(!1),t("/user/add-wallet")},color:"#EF4444"},{id:"cashier-shift",label:" ",icon:yL,action:()=>{a(!1),t("/user/dashboard",{state:{openCashierShiftModal:!0}})},color:"#3B82F6"},{id:"contact",label:" ",icon:SL,action:()=>{a(!1);const y=`   
  : ${(r==null?void 0:r.email)||" "}`,_=encodeURIComponent(y);window.open(`https://wa.me/201000392539?text=${_}`,"_blank")},color:"#10B981"},{id:"logout",label:" ",icon:kT,action:async()=>{a(!1);try{await n(),t("/user/login",{replace:!0})}catch(g){console.error("Logout error:",g);try{t("/user/login",{replace:!0})}catch{}}},color:"#EF4444"}],f=[{id:"shop-expenses-settings",label:" ",icon:vg,action:()=>{c(!1),t("/user/dashboard",{state:{openShopExpensesDialog:!0}})},color:"#F97316"},{id:"profile-settings",label:"  ",icon:OT,action:()=>{c(!1),t("/profile-settings")},color:"#6366F1"},{id:"logout",label:" ",icon:kT,action:async()=>{c(!1);try{await n(),t("/user/login",{replace:!0})}catch(g){console.error("Logout error:",g);try{t("/user/login",{replace:!0})}catch{}}},color:"#EF4444"}],p=(g,y,_,w)=>{var S;const R=((S=s==null?void 0:s.subscription)==null?void 0:S.planType)===ms.TAHWEELA,O=I=>["/user/dashboard","/profile-settings"].includes(I),V=I=>I==="debts";if(_){if(R&&!V(w)&&!O(g)){i({title:"  ",description:"      .",variant:"destructive"});return}_()}else if(y&&g==="/add"){if(R){i({title:"  ",description:"      .",variant:"destructive"});return}a(!o)}else if(!y){if(R&&!O(g)){i({title:"  ",description:"      .",variant:"destructive"});return}t(g)}},E=g=>e.pathname===g;return x.jsxs("div",{className:"mobile-bottom-nav",children:[o&&x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"quick-actions-overlay",onClick:()=>a(!1)}),x.jsx("div",{className:"floating-actions-container",children:h.map((g,y)=>x.jsxs("div",{className:"floating-action-button",onClick:()=>{var w;if(((w=s==null?void 0:s.subscription)==null?void 0:w.planType)===ms.TAHWEELA){i({title:"  ",description:"      .",variant:"destructive"});return}g.action()},style:{"--action-color":g.color,"--animation-delay":`${y*.1}s`},children:[x.jsx("div",{className:"floating-action-icon",style:{backgroundColor:g.color},children:x.jsx(g.icon,{className:"action-icon"})}),x.jsx("span",{className:"floating-action-label",children:g.label})]},g.id))})]}),l&&x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"quick-actions-overlay",onClick:()=>c(!1)}),x.jsx("div",{className:"floating-actions-container",children:f.map((g,y)=>x.jsxs("div",{className:"floating-action-button",onClick:()=>{var T;const _=(T=s==null?void 0:s.subscription)==null?void 0:T.planType,w=new Set(["logout","profile-settings"]);if(_===ms.TAHWEELA&&!w.has(g.id)){i({title:"  ",description:"      .",variant:"destructive"});return}g.action()},style:{"--action-color":g.color,"--animation-delay":`${y*.1}s`},children:[x.jsx("div",{className:"floating-action-icon",style:{backgroundColor:g.color},children:x.jsx(g.icon,{className:"action-icon"})}),x.jsx("span",{className:"floating-action-label",children:g.label})]},g.id))})]}),x.jsx("nav",{className:"mobile-bottom-nav-container",children:d.map(g=>{const y=g.icon,_=E(g.path);return x.jsxs("button",{onClick:()=>p(g.path,g.isSpecial,g.action,g.id),className:`mobile-nav-item ${_?"active":""} ${g.isSpecial?"special":""}`,type:"button","aria-label":g.label,children:[x.jsx("div",{className:`nav-icon-container ${g.isSpecial?"special-icon":""} ${g.isSpecial&&g.id==="add"&&o?"special-open":""}`,children:x.jsx(y,{className:`nav-icon ${_?"active-icon":""} ${g.isSpecial?"special-icon-svg":""} ${g.isSpecial&&g.id==="add"&&o?"rotated":""} ${g.isSpecial&&g.id==="settings"&&l?"rotated":""}`})}),!g.isSpecial&&x.jsx("span",{className:`nav-label ${_?"active-label":""}`,children:g.label})]},g.id)})})]})};var sb,ib;const ko=(ib=(sb=import.meta)==null?void 0:sb.env)==null?void 0:ib.VITE_ANDROID_DOWNLOAD_URL;var ob,ab;const Do=(ab=(ob=import.meta)==null?void 0:ob.env)==null?void 0:ab.VITE_PC_DOWNLOAD_URL;var lb,cb;const No=(cb=(lb=import.meta)==null?void 0:lb.env)==null?void 0:cb.VITE_PC32_DOWNLOAD_URL;var ub,db;const Oo=(db=(ub=import.meta)==null?void 0:ub.env)==null?void 0:db.VITE_ANDROID_VERSION;var hb,fb;const Vo=(fb=(hb=import.meta)==null?void 0:hb.env)==null?void 0:fb.VITE_PC_VERSION;var pb,mb;const Lo=(mb=(pb=import.meta)==null?void 0:pb.env)==null?void 0:mb.VITE_PC32_VERSION;function vt(t){if(t)try{const n=(t.split("?")[0].split("#")[0].split("/").pop()||"").match(/v?(\d+\.\d+(?:\.\d+)?)/i);return n==null?void 0:n[1]}catch{return}}function n8(t){if(t)try{const e=t.match(/drive\.google\.com\/file\/d\/([^/]+)\//),n=t.match(/drive\.google\.com\/open\?id=([^&]+)/),r=(e==null?void 0:e[1])||(n==null?void 0:n[1]);return r?`https://drive.google.com/uc?export=download&id=${r}`:(/drive\.google\.com\/uc\?/.test(t),t)}catch{return t}}const Yi=["siteContent","appDownloads"],vp=["siteContent","desktop_updates"],rd="appDownloadsCache";function r8(){try{const e=localStorage.getItem(rd);if(e){const n=JSON.parse(e),r={androidUrl:(n==null?void 0:n.androidUrl)||ko,pcUrl:(n==null?void 0:n.pcUrl)||Do,pc32Url:(n==null?void 0:n.pc32Url)||No,androidVersion:(n==null?void 0:n.androidVersion)||Oo,pcVersion:(n==null?void 0:n.pcVersion)||Vo,pc32Version:(n==null?void 0:n.pc32Version)||Lo,updatedAt:n==null?void 0:n.updatedAt,updatedBy:n==null?void 0:n.updatedBy};return r.pcVersion||(r.pcVersion=vt(r.pcUrl)),r.androidVersion||(r.androidVersion=vt(r.androidUrl)),r.pc32Version||(r.pc32Version=vt(r.pc32Url)),r}}catch{}const t={androidUrl:ko,pcUrl:Do,pc32Url:No,androidVersion:Oo,pcVersion:Vo,pc32Version:Lo};return t.pcVersion||(t.pcVersion=vt(t.pcUrl)),t.androidVersion||(t.androidVersion=vt(t.androidUrl)),t.pc32Version||(t.pc32Version=vt(t.pc32Url)),t}async function s8(){try{const t=await st(fe(H,Yi[0],Yi[1]));if(t.exists()){const n=t.data();try{localStorage.setItem(rd,JSON.stringify(n))}catch{}const r={androidUrl:(n==null?void 0:n.androidUrl)||ko,pcUrl:(n==null?void 0:n.pcUrl)||Do,pc32Url:(n==null?void 0:n.pc32Url)||No,androidVersion:(n==null?void 0:n.androidVersion)||Oo,pcVersion:(n==null?void 0:n.pcVersion)||Vo,pc32Version:(n==null?void 0:n.pc32Version)||Lo,updatedAt:n==null?void 0:n.updatedAt,updatedBy:n==null?void 0:n.updatedBy};return r.pcVersion||(r.pcVersion=vt(r.pcUrl)),r.androidVersion||(r.androidVersion=vt(r.androidUrl)),r.pc32Version||(r.pc32Version=vt(r.pc32Url)),r}const e={androidUrl:ko,pcUrl:Do,pc32Url:No,androidVersion:Oo,pcVersion:Vo,pc32Version:Lo};return e.pcVersion||(e.pcVersion=vt(e.pcUrl)),e.androidVersion||(e.androidVersion=vt(e.androidUrl)),e.pc32Version||(e.pc32Version=vt(e.pc32Url)),e}catch(t){const e=(t==null?void 0:t.message)||"";((t==null?void 0:t.code)||"")==="permission-denied"||e.includes("Missing or insufficient permissions")?console.warn(" Cannot read app downloads (unauth/public). Using cached or empty.",t):console.error(" Error loading app downloads:",t);try{const s=localStorage.getItem(rd);if(s){const i=JSON.parse(s),o={androidUrl:(i==null?void 0:i.androidUrl)||ko,pcUrl:(i==null?void 0:i.pcUrl)||Do,pc32Url:(i==null?void 0:i.pc32Url)||No,androidVersion:(i==null?void 0:i.androidVersion)||Oo,pcVersion:(i==null?void 0:i.pcVersion)||Vo,pc32Version:(i==null?void 0:i.pc32Version)||Lo,updatedAt:i==null?void 0:i.updatedAt,updatedBy:i==null?void 0:i.updatedBy};return o.pcVersion||(o.pcVersion=vt(o.pcUrl)),o.androidVersion||(o.androidVersion=vt(o.androidUrl)),o.pc32Version||(o.pc32Version=vt(o.pc32Url)),o}}catch{}const r={androidUrl:ko,pcUrl:Do,pc32Url:No,androidVersion:Oo,pcVersion:Vo,pc32Version:Lo};return r.pcVersion||(r.pcVersion=vt(r.pcUrl)),r.androidVersion||(r.androidVersion=vt(r.androidUrl)),r.pc32Version||(r.pc32Version=vt(r.pc32Url)),r}}function i8(t){try{const e=fe(H,Yi[0],Yi[1]);return Gi(e,r=>{const s=(r.exists()?r.data():{})||{},i={androidUrl:(s==null?void 0:s.androidUrl)||ko,pcUrl:(s==null?void 0:s.pcUrl)||Do,pc32Url:(s==null?void 0:s.pc32Url)||No,androidVersion:(s==null?void 0:s.androidVersion)||Oo,pcVersion:(s==null?void 0:s.pcVersion)||Vo,pc32Version:(s==null?void 0:s.pc32Version)||Lo,updatedAt:s==null?void 0:s.updatedAt,updatedBy:s==null?void 0:s.updatedBy};i.pcVersion||(i.pcVersion=vt(i.pcUrl)),i.androidVersion||(i.androidVersion=vt(i.androidUrl)),i.pc32Version||(i.pc32Version=vt(i.pc32Url));try{localStorage.setItem(rd,JSON.stringify(i))}catch{}t(i)},r=>{console.warn("listenAppDownloads error; falling back to cache",r);try{const s=localStorage.getItem(rd);s&&t(JSON.parse(s))}catch{}})}catch{return()=>{}}}async function o8(t,e,n,r,s,i=12e4){const o=iN(),a=t.name.replace(/[^a-zA-Z0-9_.-]/g,"_"),l=`public/apps/${e}/${Date.now()}_${a}`,c=L7(o,l);return new Promise((d,h)=>{const f=O7(c,t);let p=!1;const E=setTimeout(()=>{p=!0;try{f.cancel()}catch{}h(new Error("Upload timed out"))},i);f.on("state_changed",g=>{const y=Math.round(g.bytesTransferred/g.totalBytes*100);s&&s(y)},g=>{clearTimeout(E),h(g)},async()=>{try{if(clearTimeout(E),p)return;const g=await V7(c),y={updatedAt:ve(),updatedBy:n||"admin"};e==="android"?(y.androidUrl=g,r&&(y.androidVersion=r)):e==="pc"?(y.pcUrl=g,r&&(y.pcVersion=r)):(y.pc32Url=g,r&&(y.pc32Version=r));const _=Math.min(Math.max(2e4,Math.floor(i/10)),6e4),w=Cr(fe(H,Yi[0],Yi[1]),y,{merge:!0});let T=!1;const R=new Promise(O=>setTimeout(()=>{T=!0,O()},_));try{await Promise.race([w,R])}catch(O){console.warn(" Firestore write error, proceeding with URL only:",O)}T&&console.warn(" Firestore update timed out;             ."),d(g)}catch(g){h(g)}})})}async function a8(t,e){const n={};Object.entries(t||{}).forEach(([s,i])=>{i!==void 0&&(n[s]=i)});const r={...n,updatedAt:ve(),updatedBy:e||"admin"};await Cr(fe(H,Yi[0],Yi[1]),r,{merge:!0})}async function l8(t,e){const n={};Object.entries(t||{}).forEach(([s,i])=>{i!==void 0&&(n[s]=i)});const r={...n,updatedAt:ve(),updatedBy:e||"admin"};await Cr(fe(H,vp[0],vp[1]),r,{merge:!0})}function uN(t){try{const e=fe(H,vp[0],vp[1]);return Gi(e,r=>{const s=(r.exists()?r.data():{})||{},i={version:s!=null&&s.version?String(s.version):void 0,downloadURL_64:s!=null&&s.downloadURL_64?String(s.downloadURL_64):void 0,downloadURL_32:s!=null&&s.downloadURL_32?String(s.downloadURL_32):void 0,notes:s!=null&&s.notes?String(s.notes):void 0};try{localStorage.setItem("desktop_update_cache",JSON.stringify(i))}catch{}t(i)},()=>{try{const r=localStorage.getItem("desktop_update_cache");r&&t(JSON.parse(r))}catch{}})}catch{return()=>{}}}function dN(t){try{const e=(typeof navigator<"u"?navigator.userAgent.toLowerCase():"")||"",n=e.includes("win64")||e.includes("x64")||e.includes("wow64")||e.includes("amd64"),r=e.includes("arm64");return String(n||r?(t==null?void 0:t.downloadURL_64)||(t==null?void 0:t.downloadURL_32)||"":(t==null?void 0:t.downloadURL_32)||(t==null?void 0:t.downloadURL_64)||"")}catch{return(t==null?void 0:t.downloadURL_64)||(t==null?void 0:t.downloadURL_32)}}const yq=Object.freeze(Object.defineProperty({__proto__:null,getAppDownloads:s8,getCachedOrEnvAppDownloads:r8,listenAppDownloads:i8,listenDesktopUpdates:uN,resolveDownloadUrl:n8,selectDesktopUrl:dN,setAppDownloadLinks:a8,setDesktopUpdateInfo:l8,uploadAppBinaryResumable:o8},Symbol.toStringTag,{value:"Module"})),c8=()=>{const t=typeof window<"u"?window.electronAPI:void 0,e=!!t,[n,r]=$.useState(!1),[s,i]=$.useState(!1),[o,a]=$.useState(!1),[l,c]=$.useState(0),[d,h]=$.useState(""),f=async()=>{try{e&&t?await t.windowMinimize():console.info("windowMinimize (dev preview)")}catch(T){console.warn("failed to minimize",T)}},p=async()=>{try{e&&t?await t.windowClose():console.info("windowClose (dev preview)")}catch(T){console.warn("failed to close",T)}},E=async()=>{try{if(e&&t&&typeof t.windowReload=="function"){await t.windowReload();return}try{window.location.reload()}catch{window.dispatchEvent(new CustomEvent("app:softRefresh"))}}catch(T){console.warn("failed to soft refresh",T)}};if($.useEffect(()=>{if(!(!e||!t))try{t.onUpdateAvailable(()=>r(!0)),t.onUpdateDownloaded(()=>r(!0)),typeof t.onUpdateError=="function"&&t.onUpdateError(()=>{a(!1)}),typeof t.onUpdateProgress=="function"&&t.onUpdateProgress(T=>{const R=(T==null?void 0:T.percent)==null?0:Number(T.percent);a(!0),c(Math.max(0,Math.min(100,isNaN(R)?0:R)))}),t.checkUpdate()}catch(T){console.warn("update init failed",T)}},[e,t]),$.useEffect(()=>{const T=uN(R=>{if(String((R==null?void 0:R.version)||"")){r(!0);const V=dN({downloadURL_64:R==null?void 0:R.downloadURL_64,downloadURL_32:R==null?void 0:R.downloadURL_32})||"";h(V)}});return()=>{try{T()}catch{}}},[]),!e)return null;const[y,_]=$.useState(!1),w=async()=>{try{if(!t)return;y?(typeof t.windowFullscreen=="function"&&await t.windowFullscreen(),_(!1)):(typeof t.windowWindowed=="function"&&await t.windowWindowed(),_(!0))}catch(T){console.warn("window toggle failed",T)}};return x.jsxs("div",{className:"fixed top-2 right-2 z-[2000] flex flex-col items-center gap-2",style:{pointerEvents:"auto"},children:[x.jsx("button",{type:"button","aria-label":"",title:"",onClick:p,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-red-600 hover:bg-red-500/10 focus:outline-none dark:text-red-400 dark:hover:bg-red-400/10",children:x.jsx(cR,{className:"w-5 h-5"})}),x.jsx("button",{type:"button","aria-label":"",title:" ",onClick:E,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-blue-600 hover:bg-blue-500/10 focus:outline-none dark:text-blue-400 dark:hover:bg-blue-400/10",children:x.jsx(lR,{className:"w-5 h-5"})}),x.jsx("button",{type:"button","aria-label":"",title:"",onClick:f,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-gray-800 hover:bg-black/10 focus:outline-none dark:text-white/80 dark:hover:bg-white/10",children:x.jsx(AL,{className:"w-5 h-5"})}),x.jsx("button",{type:"button","aria-label":"/",title:y?"  ":"   ",onClick:w,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-gray-700 hover:bg-black/10 focus:outline-none dark:text-white/80 dark:hover:bg-white/10",children:x.jsx(bL,{className:"w-5 h-5"})})]})},xh=({className:t=""})=>{const[e,n]=A.useState("./logo.svg"),[r,s]=A.useState(0),i=A.useCallback(()=>{s(o=>{const a=o+1;return a===1?n("./logo.png"):a===2&&n("./placeholder.svg"),a})},[]);return x.jsx("div",{className:`min-h-screen bg-background flex items-center justify-center ${t}`,children:x.jsxs("div",{className:"flex flex-col items-center justify-center",children:[x.jsx("img",{src:e,alt:"logo",onError:i,className:"w-16 h-16 animate-spin",style:{animationDuration:"0.6s"}}),x.jsx("p",{className:"mt-3 text-base font-extrabold text-primary tracking-wide animate-pulse",style:{fontFamily:"'Tajawal','Cairo',sans-serif"},children:"  "})]})})};/*! Capacitor: https://capacitorjs.com/ - MIT License */var Ml;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(Ml||(Ml={}));class Kg extends Error{constructor(e,n,r){super(e),this.message=e,this.code=n,this.data=r}}const u8=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},d8=t=>{const e=t.CapacitorCustomPlatform||null,n=t.Capacitor||{},r=n.Plugins=n.Plugins||{},s=()=>e!==null?e.name:u8(t),i=()=>s()!=="web",o=h=>{const f=c.get(h);return!!(f!=null&&f.platforms.has(s())||a(h))},a=h=>{var f;return(f=n.PluginHeaders)===null||f===void 0?void 0:f.find(p=>p.name===h)},l=h=>t.console.error(h),c=new Map,d=(h,f={})=>{const p=c.get(h);if(p)return console.warn(`Capacitor plugin "${h}" already registered. Cannot register plugins twice.`),p.proxy;const E=s(),g=a(h);let y;const _=async()=>(!y&&E in f?y=typeof f[E]=="function"?y=await f[E]():y=f[E]:e!==null&&!y&&"web"in f&&(y=typeof f.web=="function"?y=await f.web():y=f.web),y),w=(I,b)=>{var D,P;if(g){const N=g==null?void 0:g.methods.find(k=>b===k.name);if(N)return N.rtype==="promise"?k=>n.nativePromise(h,b.toString(),k):(k,q)=>n.nativeCallback(h,b.toString(),k,q);if(I)return(D=I[b])===null||D===void 0?void 0:D.bind(I)}else{if(I)return(P=I[b])===null||P===void 0?void 0:P.bind(I);throw new Kg(`"${h}" plugin is not implemented on ${E}`,Ml.Unimplemented)}},T=I=>{let b;const D=(...P)=>{const N=_().then(k=>{const q=w(k,I);if(q){const Z=q(...P);return b=Z==null?void 0:Z.remove,Z}else throw new Kg(`"${h}.${I}()" is not implemented on ${E}`,Ml.Unimplemented)});return I==="addListener"&&(N.remove=async()=>b()),N};return D.toString=()=>`${I.toString()}() { [capacitor code] }`,Object.defineProperty(D,"name",{value:I,writable:!1,configurable:!1}),D},R=T("addListener"),O=T("removeListener"),V=(I,b)=>{const D=R({eventName:I},b),P=async()=>{const k=await D;O({eventName:I,callbackId:k},b)},N=new Promise(k=>D.then(()=>k({remove:P})));return N.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await P()},N},S=new Proxy({},{get(I,b){switch(b){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return g?V:R;case"removeListener":return O;default:return T(b)}}});return r[h]=S,c.set(h,{name:h,proxy:S,platforms:new Set([...Object.keys(f),...g?[E]:[]])}),S};return n.convertFileSrc||(n.convertFileSrc=h=>h),n.getPlatform=s,n.handleError=l,n.isNativePlatform=i,n.isPluginAvailable=o,n.registerPlugin=d,n.Exception=Kg,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},h8=t=>t.Capacitor=d8(t),be=h8(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),xE=be.registerPlugin;class hN{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,n){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(n);const i=this.windowListeners[e];i&&!i.registered&&this.addWindowListener(i),r&&this.sendRetainedArgumentsForEvent(e);const o=async()=>this.removeListener(e,n);return Promise.resolve({remove:o})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,r){const s=this.listeners[e];if(!s){if(r){let i=this.retainedEventArguments[e];i||(i=[]),i.push(n),this.retainedEventArguments[e]=i}return}s.forEach(i=>i(n))}hasListeners(e){var n;return!!(!((n=this.listeners[e])===null||n===void 0)&&n.length)}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(e="not implemented"){return new be.Exception(e,Ml.Unimplemented)}unavailable(e="not available"){return new be.Exception(e,Ml.Unavailable)}async removeListener(e,n){const r=this.listeners[e];if(!r)return;const s=r.indexOf(n);this.listeners[e].splice(s,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(r=>{this.notifyListeners(e,r)}))}}const wA=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),EA=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class f8 extends hN{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[s,i]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=EA(s).trim(),i=EA(i).trim(),n[s]=i}),n}async setCookie(e){try{const n=wA(e.key),r=wA(e.value),s=`; expires=${(e.expires||"").replace("expires=","")}`,i=(e.path||"/").replace("path=",""),o=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${r||""}${s}; path=${i}; ${o};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}xE("CapacitorCookies",{web:()=>new f8});const p8=async t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const s=r.result;e(s.indexOf(",")>=0?s.split(",")[1]:s)},r.onerror=s=>n(s),r.readAsDataURL(t)}),m8=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(s=>s.toLocaleLowerCase()).reduce((s,i,o)=>(s[i]=t[e[o]],s),{})},g8=(t,e=!0)=>t?Object.entries(t).reduce((r,s)=>{const[i,o]=s;let a,l;return Array.isArray(o)?(l="",o.forEach(c=>{a=e?encodeURIComponent(c):c,l+=`${i}=${a}&`}),l.slice(0,-1)):(a=e?encodeURIComponent(o):o,l=`${i}=${a}`),`${r}&${l}`},"").substr(1):null,y8=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),s=m8(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(s.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[o,a]of Object.entries(t.data||{}))i.set(o,a);n.body=i.toString()}else if(s.includes("multipart/form-data")||t.data instanceof FormData){const i=new FormData;if(t.data instanceof FormData)t.data.forEach((a,l)=>{i.append(l,a)});else for(const a of Object.keys(t.data))i.append(a,t.data[a]);n.body=i;const o=new Headers(n.headers);o.delete("content-type"),n.headers=o}else(s.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class v8 extends hN{async request(e){const n=y8(e,e.webFetchExtra),r=g8(e.params,e.shouldEncodeUrlParams),s=r?`${e.url}?${r}`:e.url,i=await fetch(s,n),o=i.headers.get("content-type")||"";let{responseType:a="text"}=i.ok?e:{};o.includes("application/json")&&(a="json");let l,c;switch(a){case"arraybuffer":case"blob":c=await i.blob(),l=await p8(c);break;case"json":l=await i.json();break;case"document":case"text":default:l=await i.text()}const d={};return i.headers.forEach((h,f)=>{d[f]=h}),{data:l,headers:d,status:i.status,url:i.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}xE("CapacitorHttp",{web:()=>new v8});const Gg=768;function fN(){const[t,e]=A.useState(void 0);return A.useEffect(()=>{const n=window.matchMedia(`(max-width: ${Gg-1}px)`),r=()=>{e(window.innerWidth<Gg)};return n.addEventListener("change",r),e(window.innerWidth<Gg),()=>n.removeEventListener("change",r)},[]),!!t}function _8(){const t=fN(),[e,n]=A.useState("default"),[r,s]=A.useState(!1);return A.useEffect(()=>{const o=localStorage.getItem("notificationConsentRequested")==="true";if(s(o),o){const a=localStorage.getItem("notificationPermission");(a==="granted"||a==="denied"||a==="default")&&n(a);return}t&&typeof window<"u"&&("Notification"in window?Notification.requestPermission().then(a=>{n(a),localStorage.setItem("notificationPermission",a),localStorage.setItem("notificationConsentRequested","true"),s(!0)}).catch(()=>{n("default"),localStorage.setItem("notificationConsentRequested","true"),s(!0)}):(n("unsupported"),localStorage.setItem("notificationConsentRequested","true"),s(!0)))},[t]),{permission:e,hasRequested:r,requestConsent:async()=>{if(typeof window<"u"&&"Notification"in window){const o=await Notification.requestPermission();return n(o),localStorage.setItem("notificationPermission",o),localStorage.setItem("notificationConsentRequested","true"),s(!0),o}return"unsupported"}}}const TA=xE("AppLauncher",{web:()=>De(()=>import("./web-4UEUolTA.js"),[],import.meta.url).then(t=>new t.AppLauncherWeb)});function w8(t,e){if(!t||!t.trim())throw new Error("USSD code is required");const n=`tel:${t.replace(/#/g,"%23")}`,s=`cashy://ussd?code=${t.replace(/#/g,"%23")}${e?`&sim=${e}`:""}`;let i=!1;try{be&&be.getPlatform()!=="web"&&(TA.openUrl({url:s}),i=!0)}catch{}if(!i)try{window.location.href=s,i=!0}catch{}if(!i){try{window.location.href=n}catch{}try{be&&be.getPlatform()!=="web"&&TA.openUrl({url:n})}catch{}}}function pN(t,e){const n=String(t||"").replace(/\D/g,""),r=Math.round(Number(e||0));return!n||n.length!==11||!n.startsWith("01")||!r||r<=0?null:n.startsWith("010")?`*9*7*${n}*${r}#`:n.startsWith("011")?`*323*${n}*${r}#`:n.startsWith("012")?`*115*1*${n}*${r}#`:n.startsWith("015")?`*322*${n}*${r}#`:null}function E8(t,e,n){const r=String(t||"").replace(/\D/g,""),s=String(e||"").replace(/\D/g,""),i=Math.round(Number(n||0));return!s||s.length!==11||!s.startsWith("01")||!i||i<=0?null:!r||!r.startsWith("01")?pN(s,i):r.startsWith("010")?`*9*7*${s}*${i}#`:r.startsWith("011")?`*323*${s}*${i}#`:r.startsWith("012")?`*115*1*${s}*${i}#`:r.startsWith("015")?`*322*${s}*${i}#`:null}function vq(t,e,n){const r=pN(t,e),s=String(n||"").replace(/\D/g,"");return!r||!s?r:`${r.endsWith("#")?r.slice(0,-1):r}*${s}#`}function T8(t){const e=String(t||"").replace(/\D/g,"");return e.startsWith("010")?"vodafone":e.startsWith("011")?"etisalat":e.startsWith("012")?"orange":e.startsWith("015")?"we":null}function I8(t){const e=T8(t),n=e?`simSlot_${e}`:"simSlot_default";try{if(localStorage.getItem(n)==="sim2")return"sim2"}catch{}return"sim1"}function _q(t,e,n){const r=E8(t,e,n);if(!r)throw new Error("Unsupported network or invalid sender/receiver/amount");const s=I8(t||e);w8(r,s)}async function S8(t,e="Cashy"){if(!t||!t.trim())throw new Error("Notification message is required");try{if(typeof Notification<"u"&&(Notification.permission==="granted"?"granted":await Notification.requestPermission())==="granted"){new Notification(e||"Cashy",{body:t});return}typeof window<"u"&&typeof alert=="function"?alert(`${e||"Cashy"}
${t}`):console.log(`[${e||"Cashy"}] ${t}`)}catch(n){console.warn("Notification not available:",n)}}function RE(t,e){return e==="send"?0:Math.round(t*.01*100)/100}function A8(t,e,n=0){const r=RE(t,e),s=Math.max(0,r-n);return Math.round(s*100)/100}const b8=Object.freeze(Object.defineProperty({__proto__:null,calculateCommission:RE,calculateProfit:A8},Symbol.toStringTag,{value:"Module"})),x8=t=>t==="withdraw"||t==="receive"?"receive":"send",R8=async t=>{if(!t)return null;const e=ge(de(H,"transactions"),pe("reference","==",t),Oi(1)),n=await Te(e);return n.empty?null:n.docs[0].id},P8=async t=>{if(!t||!t.shopId||!t.lineId||!t.provider)throw new Error("   :   shopId  lineId  provider");if(!t.amount||t.amount<=0)throw new Error("     ");const e=await R8(t.reference);if(e)return{id:e,duplicate:!0};const n=x8(t.type),r={shopId:t.shopId,lineId:t.lineId,merchantUserId:t.merchantUserId||t.createdBy,walletId:t.walletId,provider:t.provider,txnType:n,amount:t.amount,fee:void 0,commission:void 0,profit:0,reference:t.reference,senderMsisdn:t.senderMsisdn,receiverMsisdn:t.receiverMsisdn,note:t.note,status:"confirmed",createdBy:t.createdBy,createdAt:new Date,confirmedAt:new Date},s=await lN.create(r);try{const i="  ",o=`: ${t.type} | : ${t.amount} | : ${t.provider}`;await S8(o,i)}catch(i){console.warn("   :",i)}try{const i=t.merchantUserId||t.createdBy;if(i){const o=n==="receive"?"withdraw":"send",a=RE(t.amount,n);await AE.saveUserTransaction(i,{type:o,amount:t.amount,commission:a,status:"confirmed",createdAt:new Date,senderMsisdn:t.senderMsisdn,receiverMsisdn:t.receiverMsisdn,walletId:t.walletId,lineId:t.lineId,provider:t.provider,note:t.note,transactionId:s})}else console.warn("    :   userId (merchantUserId  createdBy)  .")}catch(i){console.warn("      userTransactions   :",i)}return{id:s,duplicate:!1}};function C8(t){let e=0;for(let n=0;n<t.length;n++)e=Math.imul(31,e)+t.charCodeAt(n)|0;return"SMS_"+Math.abs(e).toString(36)}function k8(t){const e=t.toLowerCase();return e.includes("")||e.includes("withdraw")?"withdraw":(e.includes("")||e.includes("transfer")||e.includes(" "),"transfer")}function D8(t){const n=t.replace(/,/g,"").match(/(\d{1,9}(?:\.\d{1,2})?)/);return n?parseFloat(n[1]):null}function N8(t){const e=t.match(/01\d{9}/);return e?e[0]:void 0}function O8(t){const e=t.toLowerCase();if(e.includes("")||e.includes("vodafone"))return"vodafone_cash";if(e.includes("")||e.includes("orange"))return"orange_cash";if(e.includes("")||e.includes("etisalat"))return"etisalat_cash";if(e.includes("instapay")||e.includes(" ")||e.includes(""))return"instapay"}function V8(t={}){if(typeof window>"u")return()=>{};const e=t.createdBy||"mobile_sms_bridge",n=async r=>{const i=r.detail||{};try{let o=null;if(i&&i.payload)o=i.payload,o.shopId=o.shopId||t.shopId,o.lineId=o.lineId||t.lineId,o.provider=o.provider||t.provider,o.createdBy=o.createdBy||e;else if(i&&i.text){const l=i.text,c=k8(l),d=D8(l),h=c==="transfer"?N8(l):void 0,f=O8(l)||t.provider;if(!t.shopId||!t.lineId||!f){console.warn("SMS integration missing identifiers. Provide shopId, lineId, provider in initSmsIntegration."),At.warning("   SMS   (  )");return}o={type:c,amount:d||0,provider:f,shopId:t.shopId,lineId:t.lineId,receiverMsisdn:h,reference:i.reference||C8(l),createdBy:e,note:"Parsed from SMS"}}if(!o)return;if((await P8(o)).duplicate)At.info("      SMS");else{const l=o.type==="withdraw"?"":"";At.success(`  ${l}    SMS`)}}catch(o){console.error("Failed to process mobile SMS notification:",o),At.error("     SMS")}};return window.addEventListener("mobileSmsReceived",n),()=>window.removeEventListener("mobileSmsReceived",n)}async function L8(t,e="android",n){var l,c,d,h,f;const r=n||((l=Jn.currentUser)==null?void 0:l.uid)||"";if(!r)throw new Error("  userId   ");const s=(d=(c=import.meta)==null?void 0:c.env)==null?void 0:d.VITE_PUSH_REGISTER_ENDPOINT,i=(f=(h=import.meta)==null?void 0:h.env)==null?void 0:f.VITE_PUSH_NOTIFICATIONS_API_KEY,o={userId:r,platform:e,token:t};if(s){const p=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json",...i?{Authorization:`Bearer ${i}`}:{}},body:JSON.stringify(o)});if(p.ok)return p.json()}const a=await fetch("/api/devices/save-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!a.ok)throw new Error(`  : ${a.status}`);return a.json()}async function M8(t,e="android",n){return await FD(SE,"saveDeviceToken")({token:t,platform:e,userId:n})}async function wq(t,e=" ",n="    50 ",r={type:"transfer",amount:"50",txId:"12345"}){const i=await FD(SE,"sendFcmToUser")({userId:t,title:e,body:n,data:r});return(i==null?void 0:i.data)??i}function mN(){if(typeof window>"u")return()=>{};const t=async e=>{var n;try{const r=e.detail||window.__fcmToken||"";if(!r)return;const s=((n=Jn.currentUser)==null?void 0:n.uid)||"";if(!s){console.warn("FCM bridge:           ");return}try{await M8(r,"android",s)}catch{await L8(r,"android",s)}console.log("    FCM  :",s)}catch(r){console.error("    FCM  :",r)}};window.addEventListener("fcm-token",t);try{const e=window.__fcmToken;e&&t(new CustomEvent("fcm-token",{detail:e}))}catch{}return()=>{window.removeEventListener("fcm-token",t)}}async function F8(){var t,e,n;try{if(!(be!=null&&be.isNativePlatform))return!1;const r=be.getPlatform();if(localStorage.getItem("nativePushRequested")==="true")return!1;const i=((t=be.Plugins)==null?void 0:t.PushNotifications)||window.PushNotifications;if(!i){if(typeof window<"u"&&"Notification"in window&&typeof Notification.requestPermission=="function")try{await Notification.requestPermission()}catch{}return localStorage.setItem("nativePushRequested","true"),!1}try{await((e=i.requestPermissions)==null?void 0:e.call(i))}catch{}try{await((n=i.register)==null?void 0:n.call(i))}catch{}return localStorage.setItem("nativePushRequested","true"),!0}catch{return!1}}const U8={},IA=$.lazy(()=>De(()=>import("./Index-DRqrhu9e.js"),[],import.meta.url)),Rh=$.lazy(()=>De(()=>import("./LandingPage-Kd8aISLM.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]),import.meta.url)),SA=$.lazy(()=>De(()=>import("./SubscriptionsPage-Bh633QBC.js"),__vite__mapDeps([13,1,4,14,15,6,7,5,12]),import.meta.url)),AA=$.lazy(()=>De(()=>import("./AuthPage-CacG4caj.js"),__vite__mapDeps([16,1,2,3,8]),import.meta.url)),Ph=$.lazy(()=>De(()=>import("./TopUpPage-CaXdhh4j.js"),__vite__mapDeps([17,1,18,19,20]),import.meta.url)),bA=$.lazy(()=>De(()=>import("./AdminTopupsPage-H7N1NJtb.js"),__vite__mapDeps([21,18,19,20]),import.meta.url)),xA=$.lazy(()=>De(()=>import("./AdminNotificationsPage-D4_79QzO.js"),__vite__mapDeps([22,1,23,24,25]),import.meta.url)),Ch=$.lazy(()=>De(()=>import("./UserRegisterPage-CLoQmUfC.js"),__vite__mapDeps([26,1,23,27,28,29,30,31,32]),import.meta.url)),RA=$.lazy(()=>De(()=>import("./UserAccountSetupPage-BJa5B1QY.js"),__vite__mapDeps([33,1,23,27,32,31,12]),import.meta.url)),PA=$.lazy(()=>De(()=>import("./ForgotPasswordCodePage-CJZIMhoV.js"),[],import.meta.url)),CA=$.lazy(()=>De(()=>import("./DashboardLoginPage-BrZLpQ49.js"),__vite__mapDeps([34,1,10]),import.meta.url)),kA=$.lazy(()=>De(()=>import("./ProtectedDashboard-DxINTsb3.js"),__vite__mapDeps([35,1,36,18,19,20,37,23,38,10,39,40,41,28,12,42]),import.meta.url)),Oc=$.lazy(()=>De(()=>import("./ProtectedUserDashboard-BoVGgUpp.js"),__vite__mapDeps([43,44,25,37,23,38,19,10,39]),import.meta.url)),DA=$.lazy(()=>De(()=>import("./MerchantDashboard-5KFzuVKX.js"),__vite__mapDeps([45,46,18,19,20,47,36,48,38,1,49,23,50,51]),import.meta.url)),NA=$.lazy(()=>De(()=>import("./PendingApprovalPage-B6IJG1m_.js"),__vite__mapDeps([52,1,4,39,10,53,12,54]),import.meta.url)),OA=$.lazy(()=>De(()=>import("./AdminLogin-CPF5kgVb.js"),__vite__mapDeps([55,10]),import.meta.url)),VA=$.lazy(()=>De(()=>import("./ProtectedAdminDashboard-CNv2e1E7.js"),__vite__mapDeps([56,14,3,57,46,18,19,20,47,38,23,37,10,39,58,1,24,59,27,36,60,4,54,31,61,44,15,9,53,7,62,8,12,42]),import.meta.url)),LA=$.lazy(()=>De(()=>import("./AuthTestPage-DI34QKRw.js"),__vite__mapDeps([63,1,23]),import.meta.url)),MA=$.lazy(()=>De(()=>import("./ProfileSettingsPage-DPE_UJTx.js"),__vite__mapDeps([64,1,23,58,65,37,38,19,10,39,51,59,20,5,30,61,7,54]),import.meta.url)),FA=$.lazy(()=>De(()=>import("./TransactionsPage-CSzonH00.js"),__vite__mapDeps([66,1,38,19,18,20,36,47,67,60,37,23,10,39,4,49,12,8,15,40,41,5,42]),import.meta.url)),UA=$.lazy(()=>De(()=>import("./WalletAdditionPage-BUFwLN3k.js"),__vite__mapDeps([68,1,23,18,19,20,50,5,28,31,39]),import.meta.url)),jA=$.lazy(()=>De(()=>import("./ReferralsPage-BoJVH_ao.js"),__vite__mapDeps([69,1,36,27,30,25,12,61,53,62,29,42]),import.meta.url)),BA=$.lazy(()=>De(()=>import("./CPanelPage-c6dGq_iM.js"),__vite__mapDeps([70,1,23,38,19]),import.meta.url)),$A=$.lazy(()=>De(()=>import("./CPanelLoginPage-C92GOY7n.js"),__vite__mapDeps([71,23,1,10]),import.meta.url)),zA=$.lazy(()=>De(()=>import("./NotFound-DuzTiI8T.js"),[],import.meta.url)),qA=$.lazy(()=>De(()=>import("./PrivacyPolicyPage-CXUCWbQV.js"),[],import.meta.url)),HA=$.lazy(()=>De(()=>import("./SmsHookBridge-B--Xw_Gx.js"),[],import.meta.url)),j8=new oU,B8=()=>{if(!((be==null?void 0:be.isNativePlatform)&&be.getPlatform()==="android"))return null;const e=()=>{try{window.location.reload()}catch{}};return x.jsx("div",{className:"fixed top-2 right-2 z-[2000] flex items-center gap-2",style:{pointerEvents:"auto"},children:x.jsx("button",{type:"button","aria-label":"",title:" ",onClick:e,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-blue-600 hover:bg-blue-500/10 focus:outline-none dark:text-blue-400 dark:hover:bg-blue-400/10",children:x.jsx(lR,{className:"w-5 h-5"})})})},WA=()=>{const t=os(),{user:e,loading:n}=Qi(),r=(be==null?void 0:be.isNativePlatform)&&be.getPlatform()==="android",s=t.pathname.startsWith("/user/dashboard"),i=r&&t.pathname==="/",o=!!e&&(s||i);return n?null:o?x.jsx(t8,{}):null},KA=()=>{const t=fN(),{profile:e}=Qi(),n=os(),{toast:r}=j_();return _8(),A.useEffect(()=>{F8()},[]),A.useEffect(()=>{const s=mN(),i=n.pathname.startsWith("/user/dashboard");if(t&&(e!=null&&e.shopId)&&i){const o=V8({shopId:e.shopId,createdBy:e.userId});return()=>{try{o()}catch{}try{s()}catch{}}}return()=>{try{s()}catch{}}},[t,e==null?void 0:e.shopId,n.pathname]),A.useEffect(()=>{if(!t)return;const s=document.createElement("style");s.setAttribute("data-disable-pull-to-refresh","true"),s.textContent="html, body { overscroll-behavior-y: contain; touch-action: pan-y; }",document.head.appendChild(s);let i=0,o=null;const a=c=>{var d,h;i=((h=(d=c.touches)==null?void 0:d[0])==null?void 0:h.clientY)||0,o=c.target},l=c=>{var y,_;const d=((_=(y=c.touches)==null?void 0:y[0])==null?void 0:_.clientY)||0,h=document.scrollingElement||document.documentElement,f=h.scrollTop||window.scrollY||0,p=h.scrollHeight-h.clientHeight||0,E=o||null,g=(()=>{let w=E;for(;w&&w!==document.body;){const R=window.getComputedStyle(w).overflowY;if((R==="auto"||R==="scroll")&&w.scrollHeight>w.clientHeight)return!0;w=w.parentElement}return!1})();!g&&f<=0&&d>i&&c.cancelable&&c.preventDefault(),!g&&f>=p&&d<i&&c.cancelable&&c.preventDefault()};return document.addEventListener("touchstart",a,{passive:!0}),document.addEventListener("touchmove",l,{passive:!1}),()=>{document.removeEventListener("touchstart",a),document.removeEventListener("touchmove",l);try{document.head.removeChild(s)}catch{}}},[t]),A.useEffect(()=>{if(!((be==null?void 0:be.isNativePlatform)&&be.getPlatform()==="android"))return;let i=!1;return(async()=>{try{const o="0.0.0",a=await fetch("https://cashy-link.com/mobile_version.json",{cache:"no-store"});if(!a.ok)throw new Error("   ");const l=await a.json(),c=String((l==null?void 0:l.version)||"0.0.0"),d=l!=null&&l.url?String(l.url).trim():void 0;if(!i&&d&&((f,p)=>{const E=f.split(".").map(y=>parseInt(y,10)||0),g=p.split(".").map(y=>parseInt(y,10)||0);for(let y=0;y<Math.max(E.length,g.length);y++){const _=E[y]||0,w=g[y]||0;if(_>w)return 1;if(_<w)return-1}return 0})(c,o)>0){try{r({title:"  ",description:` ${c}       `})}catch{}try{window.open(d,"_blank")}catch{}}}catch(o){console.warn("   :",o)}})(),()=>{i=!0}},[]),A.useEffect(()=>{const s=(be==null?void 0:be.isNativePlatform)&&be.getPlatform()==="android",i=typeof window<"u"&&(window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"));if(s||i)return;let o=!1;return(async()=>{try{const a="0.0.0",l=await fetch("https://cashy-link.com/desktop_version.json",{cache:"no-store"});if(!l.ok)return;const c=await l.json(),d=String((c==null?void 0:c.version)||"0.0.0"),h=!!(c!=null&&c.force);if(!o&&((p,E)=>{const g=String(p).split(".").map(_=>parseInt(_,10)||0),y=String(E).split(".").map(_=>parseInt(_,10)||0);for(let _=0;_<Math.max(g.length,y.length);_++){const w=g[_]||0,T=y[_]||0;if(w>T)return 1;if(w<T)return-1}return 0})(d,a)>0){if(h){try{window.location.reload()}catch{}return}try{r({title:"  ",description:` ${d}      `})}catch{}}}catch{}})(),()=>{o=!0}},[]),null},GA=()=>os().pathname.startsWith("/user/dashboard")?x.jsxs(x.Fragment,{children:[x.jsx(hM,{}),x.jsx(KM,{})]}):null,$8=()=>x.jsx(lU,{client:j8,children:x.jsx(u3,{children:x.jsxs(N4,{children:[typeof window<"u"&&(window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"))&&!(be!=null&&be.isNativePlatform&&be.getPlatform()==="android")&&x.jsx(c8,{}),x.jsx(B8,{}),typeof window<"u"&&(window.electronAPI||window.location.protocol==="file:"||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron")||typeof window.location.hash=="string"&&window.location.hash.startsWith("#/")||typeof import.meta<"u"&&U8)?x.jsxs(i3,{children:[x.jsx(KA,{}),x.jsx(GA,{}),x.jsxs(A.Suspense,{fallback:x.jsx(xh,{}),children:[null,x.jsxs(hI,{children:[x.jsx(se,{path:"/",element:be!=null&&be.isNativePlatform&&be.getPlatform()==="android"?$.createElement(()=>{const{user:e,loading:n}=Qi();return n?$.createElement(xh):e?$.createElement(Oc):$.createElement(bh)}):x.jsx(Rh,{})}),x.jsx(se,{path:"/dashboard-redirect",element:x.jsx(IA,{})}),x.jsx(se,{path:"/landing",element:x.jsx(Rh,{})}),x.jsx(se,{path:"/subscriptions",element:x.jsx(SA,{})}),x.jsx(se,{path:"/auth",element:x.jsx(AA,{})}),x.jsx(se,{path:"/sms-hook",element:x.jsx(HA,{})}),x.jsx(se,{path:"/user/login",element:x.jsx(bh,{})}),x.jsx(se,{path:"/user/forgot-password",element:x.jsx(PA,{})}),x.jsx(se,{path:"/user/register",element:x.jsx(Ch,{})}),x.jsx(se,{path:"/register",element:x.jsx(Ch,{})}),x.jsx(se,{path:"/user/account-setup",element:x.jsx(RA,{})}),x.jsx(se,{path:"/user/pending-approval",element:x.jsx(NA,{})}),x.jsx(se,{path:"/user/dashboard",element:x.jsx(Oc,{})}),x.jsx(se,{path:"/branch/:shopId/dashboard",element:x.jsx(Oc,{})}),x.jsx(se,{path:"/user/add-wallet",element:x.jsx(UA,{})}),x.jsx(se,{path:"/admin/login",element:x.jsx(OA,{})}),x.jsx(se,{path:"/admin/dashboard",element:x.jsx(VA,{})}),x.jsx(se,{path:"/admin/topups",element:x.jsx(bA,{})}),x.jsx(se,{path:"/admin/notifications",element:x.jsx(xA,{})}),x.jsx(se,{path:"/profile-settings",element:x.jsx(MA,{})}),x.jsx(se,{path:"/transactions",element:x.jsx(FA,{})}),x.jsx(se,{path:"/referrals",element:x.jsx(jA,{})}),x.jsx(se,{path:"/privacy-policy",element:x.jsx(qA,{})}),x.jsx(se,{path:"/cpanel",element:x.jsx(BA,{})}),x.jsx(se,{path:"/cpanel/login",element:x.jsx($A,{})}),x.jsx(se,{path:"/auth-test",element:x.jsx(LA,{})}),x.jsx(se,{path:"/topup",element:x.jsx(Ph,{})}),x.jsx(se,{path:"/recharge",element:x.jsx(Ph,{})}),x.jsx(se,{path:"/merchant/*",element:x.jsx(DA,{})}),x.jsx(se,{path:"/dashboard/login",element:x.jsx(CA,{})}),x.jsx(se,{path:"/dashboard",element:x.jsx(kA,{})}),x.jsx(se,{path:"*",element:x.jsx(zA,{})})]})]}),x.jsx(WA,{})]}):x.jsxs(s3,{children:[x.jsx(KA,{}),x.jsx(GA,{}),x.jsxs(A.Suspense,{fallback:x.jsx(xh,{}),children:[null,x.jsxs(hI,{children:[x.jsx(se,{path:"/",element:be!=null&&be.isNativePlatform&&be.getPlatform()==="android"?$.createElement(()=>{const{user:e,loading:n}=Qi();return n?$.createElement(xh):e?$.createElement(Oc):$.createElement(bh)}):x.jsx(Rh,{})}),x.jsx(se,{path:"/dashboard-redirect",element:x.jsx(IA,{})}),x.jsx(se,{path:"/landing",element:x.jsx(Rh,{})}),x.jsx(se,{path:"/subscriptions",element:x.jsx(SA,{})}),x.jsx(se,{path:"/auth",element:x.jsx(AA,{})}),x.jsx(se,{path:"/sms-hook",element:x.jsx(HA,{})}),x.jsx(se,{path:"/user/login",element:x.jsx(bh,{})}),x.jsx(se,{path:"/user/forgot-password",element:x.jsx(PA,{})}),x.jsx(se,{path:"/user/register",element:x.jsx(Ch,{})}),x.jsx(se,{path:"/register",element:x.jsx(Ch,{})}),x.jsx(se,{path:"/user/account-setup",element:x.jsx(RA,{})}),x.jsx(se,{path:"/user/pending-approval",element:x.jsx(NA,{})}),x.jsx(se,{path:"/user/dashboard",element:x.jsx(Oc,{})}),x.jsx(se,{path:"/user/add-wallet",element:x.jsx(UA,{})}),x.jsx(se,{path:"/admin/login",element:x.jsx(OA,{})}),x.jsx(se,{path:"/admin/dashboard",element:x.jsx(VA,{})}),x.jsx(se,{path:"/admin/topups",element:x.jsx(bA,{})}),x.jsx(se,{path:"/admin/notifications",element:x.jsx(xA,{})}),x.jsx(se,{path:"/profile-settings",element:x.jsx(MA,{})}),x.jsx(se,{path:"/transactions",element:x.jsx(FA,{})}),x.jsx(se,{path:"/referrals",element:x.jsx(jA,{})}),x.jsx(se,{path:"/privacy-policy",element:x.jsx(qA,{})}),x.jsx(se,{path:"/cpanel",element:x.jsx(BA,{})}),x.jsx(se,{path:"/cpanel/login",element:x.jsx($A,{})}),x.jsx(se,{path:"/auth-test",element:x.jsx(LA,{})}),x.jsx(se,{path:"/topup",element:x.jsx(Ph,{})}),x.jsx(se,{path:"/recharge",element:x.jsx(Ph,{})}),x.jsx(se,{path:"/merchant/*",element:x.jsx(DA,{})}),x.jsx(se,{path:"/dashboard/login",element:x.jsx(CA,{})}),x.jsx(se,{path:"/dashboard",element:x.jsx(kA,{})}),x.jsx(se,{path:"*",element:x.jsx(zA,{})})]})]}),x.jsx(WA,{})]})]})})}),gN=A.createContext(void 0),z8=({children:t})=>{const[e,n]=A.useState(null),[r,s]=A.useState(!1),[i,o]=A.useState(null),{profile:a,user:l}=Qi();A.useEffect(()=>{try{const f=localStorage.getItem("cashier_shift_user"),p=localStorage.getItem("cashier_shift_active"),E=localStorage.getItem("cashier_shift_start_at");f&&n(JSON.parse(f)),p&&s(p==="true"),E&&o(Number(E))}catch{}},[]),A.useEffect(()=>{if(!(a!=null&&a.shopId))return;const f=fe(H,"cashierShift",a.shopId);let p=null;return(async()=>{try{(await st(f)).exists()||await Cr(f,{isShiftActive:!1,shiftStartAt:null,shiftUser:null}),p=Gi(f,g=>{if(g.exists()){const y=g.data(),_=(y==null?void 0:y.shiftUser)||null,w=!!(y!=null&&y.isShiftActive),T=(y==null?void 0:y.shiftStartAt)??null;let R=_;if(!R)try{const O=localStorage.getItem("cashier_shift_user"),V=O?JSON.parse(O):null;V&&(R=V)}catch{}n(R),s(w),o(typeof T=="number"?T:T?Number(T):null);try{R?localStorage.setItem("cashier_shift_user",JSON.stringify(R)):localStorage.removeItem("cashier_shift_user"),localStorage.setItem("cashier_shift_active",w?"true":"false"),T!=null&&localStorage.setItem("cashier_shift_start_at",String(T))}catch{}}},g=>{console.warn("cashierShift snapshot error:",g)})}catch(E){console.warn("Failed to init cashierShift doc:",E)}})(),()=>{p&&p()}},[a==null?void 0:a.shopId]);const c=f=>{n(f);try{f?localStorage.setItem("cashier_shift_user",JSON.stringify(f)):localStorage.removeItem("cashier_shift_user")}catch{}try{if(a!=null&&a.shopId){const p=fe(H,"cashierShift",a.shopId);He(p,{shiftUser:f||null})}}catch{}},d=()=>{s(!0);try{localStorage.setItem("cashier_shift_active","true")}catch{}const f=Date.now();o(f);try{localStorage.setItem("cashier_shift_start_at",String(f))}catch{}try{if(a!=null&&a.shopId){const p=fe(H,"cashierShift",a.shopId);He(p,{isShiftActive:!0,shiftStartAt:f})}}catch{}try{const E=`cashBalance_${(l==null?void 0:l.uid)||"default"}`,g=`userCashBalance_${(l==null?void 0:l.uid)||"default"}`,y=`walletBalances_${(l==null?void 0:l.uid)||"default"}`;let _=localStorage.getItem(E);if(_==null){const T=localStorage.getItem(g);if(T!=null){_=T;try{localStorage.setItem(E,T),localStorage.removeItem(g)}catch{}}}if(_==null&&(l!=null&&l.uid)){const T=localStorage.getItem("cashBalance"),R=localStorage.getItem("userCashBalance");if(T!=null){try{localStorage.setItem(E,T),localStorage.removeItem("cashBalance")}catch{}_=T}else if(R!=null){try{localStorage.setItem(E,R),localStorage.removeItem("userCashBalance")}catch{}_=R}}const w=localStorage.getItem(y);_?localStorage.setItem("shiftStartDrawerFunds",_):localStorage.setItem("shiftStartDrawerFunds","0"),w?localStorage.setItem("shiftStartWalletBalances",w):localStorage.setItem("shiftStartWalletBalances","{}")}catch{}try{a!=null&&a.shopId&&(async()=>{try{const p=fe(H,"dashboardData",a.shopId),E=await st(p);if(E.exists()){const g=E.data(),y=Number((g==null?void 0:g.cashBalance)??0),_=(g==null?void 0:g.walletBalances)??{};try{const w=localStorage.getItem("shiftStartDrawerFunds"),T=localStorage.getItem("shiftStartWalletBalances"),R=w?parseFloat(w):0,O=T?JSON.parse(T):{},V=!w||!Number.isFinite(R)||R===0,S=!T||Object.keys(O||{}).length===0;V&&localStorage.setItem("shiftStartDrawerFunds",String(Number.isFinite(y)?y:0)),S&&localStorage.setItem("shiftStartWalletBalances",JSON.stringify(_||{}))}catch{}}}catch(p){console.warn("Shift start Firebase read failed:",p)}})()}catch{}},h=()=>{s(!1);try{localStorage.setItem("cashier_shift_active","false")}catch{}try{if(a!=null&&a.shopId){const f=fe(H,"cashierShift",a.shopId);He(f,{isShiftActive:!1})}}catch{}};return x.jsx(gN.Provider,{value:{shiftUser:e,isShiftActive:r,shiftStartAt:i,setShiftUser:c,startShift:d,endShift:h},children:t})},Eq=()=>{const t=A.useContext(gN);if(!t)throw new Error("useShift must be used within ShiftProvider");return t},yN=A.createContext(void 0);function q8({children:t}){const{profile:e,user:n,loading:r}=Qi(),[s,i]=A.useState(null),[o,a]=A.useState(null),[l,c]=A.useState(!0);A.useEffect(()=>{if(!r&&e){const h=e!=null&&e.userId?`selectedShopId_${e.userId}`:n!=null&&n.uid?`selectedShopId_${n==null?void 0:n.uid}`:"selectedShopId";let f=null;try{f=localStorage.getItem(h)||null}catch{}i(f||e.shopId),a((e==null?void 0:e.shopName)||(n==null?void 0:n.displayName)||""),c(!1)}else r||c(!1)},[e,r]),A.useEffect(()=>{const h=()=>{const p=e!=null&&e.userId?`selectedShopId_${e.userId}`:n!=null&&n.uid?`selectedShopId_${n==null?void 0:n.uid}`:"selectedShopId";try{const E=localStorage.getItem(p);i(E||((e==null?void 0:e.shopId)??null))}catch{}};window.addEventListener("selectedShopIdChanged",h);const f=p=>{const E=e!=null&&e.userId?`selectedShopId_${e.userId}`:n!=null&&n.uid?`selectedShopId_${n==null?void 0:n.uid}`:"selectedShopId";if(!(!p.key||p.key!==E))try{const g=localStorage.getItem(E);i(g||((e==null?void 0:e.shopId)??null))}catch{}};return window.addEventListener("storage",f),()=>{window.removeEventListener("selectedShopIdChanged",h),window.removeEventListener("storage",f)}},[e==null?void 0:e.userId,n==null?void 0:n.uid,e==null?void 0:e.shopId]);const d={shopId:s,shopName:o,loading:l};return x.jsx(yN.Provider,{value:d,children:t})}function Tq(){const t=A.useContext(yN);return t===void 0?{shopId:null,shopName:null,loading:!1}:t}try{const t=navigator.userAgent||navigator.vendor||"",e=/iPad|iPhone|iPod/.test(t),n=document.documentElement;n&&(n.classList.toggle("ios",e),n.classList.toggle("android",!e))}catch{}try{mN()}catch{}const H8=()=>{const{theme:t="system"}=wR();return A.useEffect(()=>{try{const e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,n=t==="system"?e?"dark":"light":t;document.documentElement.setAttribute("data-theme",n||"light"),document.documentElement.classList.toggle("dark",n==="dark")}catch{}},[t]),null};kx(document.getElementById("root")).render(x.jsx(mM,{attribute:"class",defaultTheme:"system",enableSystem:!0,storageKey:"theme",children:x.jsx(e8,{children:x.jsx(z8,{children:x.jsxs(q8,{children:[x.jsx($8,{}),x.jsx(H8,{})]})})})}));export{SV as $,pL as A,gP as B,yL as C,At as D,_L as E,bE as F,dq as G,of as H,sv as I,Wj as J,Cr as K,l3 as L,SL as M,tq as N,nt as O,st as P,He as Q,$ as R,ms as S,wq as T,PL as U,qv as V,Vs as W,oR as X,os as Y,je as Z,Vp as _,md as a,p4 as a$,kn as a0,kt as a1,Ar as a2,jV as a3,Mi as a4,hN as a5,i8 as a6,xL as a7,De as a8,sf as a9,V7 as aA,B7 as aB,o4 as aC,Kl as aD,iq as aE,rq as aF,wR as aG,pN as aH,AL as aI,fq as aJ,pq as aK,mq as aL,X7 as aM,vq as aN,w8 as aO,gV as aP,Tq as aQ,rz as aR,K7 as aS,gL as aT,EL as aU,CL as aV,Bt as aW,OR as aX,Q8 as aY,f4 as aZ,Ox as a_,Eq as aa,fN as ab,be as ac,kT as ad,mL as ae,ND as af,RE as ag,xh as ah,OT as ai,hI as aj,se as ak,pe as al,W7 as am,NT as an,vL as ao,hq as ap,$_ as aq,Fx as ar,kf as as,B_ as at,K8 as au,cR as av,AE as aw,sz as ax,L7 as ay,cq as az,nq as b,m4 as b0,Dx as b1,Fi as b2,zV as b3,hd as b4,oq as b5,uN as b6,dN as b7,RL as b8,J7 as b9,l8 as ba,xb as bb,lN as bc,A8 as bd,vg as be,wV as bf,d3 as bg,eq as bh,G7 as bi,E8 as bj,_q as bk,iN as bl,Q7 as bm,fL as bn,Bg as bo,Wg as bp,uq as bq,gq as br,yq as bs,j_ as c,s8 as d,n8 as e,Jn as f,r8 as g,de as h,H as i,x as j,Te as k,Oi as l,FD as m,SE as n,ts as o,Ir as p,ge as q,A as r,ve as s,DT as t,Qi as u,IL as v,wL as w,Hj as x,fe as y,Gi as z};
