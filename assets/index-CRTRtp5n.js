const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./LandingPage-SrvxXHmx.js","./card-BWbpEQyA.js","./BrandLogo-CElW4dhM.js","./brandingService-C_0Gbtm2.js","./whatsappService-B6jIbpdo.js","./appDownloadService-DyjNta3x.js","./arrow-left-DUJI8uke.js","./star-ahU6AlHz.js","./crown-CU_5bOax.js","./download-C_npWio7.js","./zap-CL70EcMP.js","./shield-DeV9RBuc.js","./chart-column-xoPOdvH8.js","./circle-check-big-Ojm6vB3H.js","./SubscriptionsPage-DdwdHL9b.js","./contentService-bkUGtpus.js","./calendar-CnsgDt6w.js","./AuthPage-BTToHDB6.js","./TopUpPage-C9IDsER7.js","./select-DM6OjFkg.js","./Combination-EUxQ4mum.js","./index-Bn4QWtVJ.js","./AdminTopupsPage-64oNSEru.js","./AdminNotificationsPage-B1BT5tVR.js","./label-CdFvUt-8.js","./textarea-DQyPJT_z.js","./link-BeK8tOOM.js","./UserRegisterPage-G3PRbRs9.js","./alert-_BbrLo27.js","./wallet-DUiIoHfc.js","./user-plus-eo4fdxwW.js","./share-2-CZnxDqjD.js","./phone-GOqtzBPR.js","./store-C6a-v4ZH.js","./UserAccountSetupPage-Cmbl9o8l.js","./DashboardLoginPage-CTajuWTB.js","./ProtectedDashboard-BMaCHIwX.js","./badge-BiCYvJZV.js","./MasterPinDialog-C0ewEeVK.js","./dialog-01iWrO8X.js","./circle-alert-C8bkuj4U.js","./dollar-sign-Cth-YisG.js","./circle-x-v6xgjvYt.js","./ProtectedUserDashboard-jHaYO-Mr.js","./broadcastService-Dd5lrgU_.js","./MerchantDashboard-BGYv-4JO.js","./dropdown-menu-BSiXoF6l.js","./index-vkwF3IfT.js","./WalletsManagement-Cdqa1aly.js","./progress-tYla-MVG.js","./walletDailyLimitsService-CsxCOeMI.js","./square-pen-uwIWj5QN.js","./PendingApprovalPage-CcJtrFcF.js","./gift-C132gbwh.js","./refresh-cw-BR59kZdN.js","./AdminLogin-TXZoVLPp.js","./ProtectedAdminDashboard-DgvCPux7.js","./ProfileIcon-nA3MSCtr.js","./avatars-BvGfB2nO.js","./switch-MQhFCmpk.js","./separator-D0LqprUB.js","./copy-ByaiM2OB.js","./users-BWhf-dug.js","./AuthTestPage-CIu33AFQ.js","./ProfileSettingsPage-1zpkZW9M.js","./walletSelectionPinService-CLKZzmAT.js","./TransactionsPage-bDzn8rMP.js","./MaintenanceDialog-ZUbPq70O.js","./profitService-DmPfUgc_.js","./WalletAdditionPage-CBmhN1hV.js","./ReferralsPage-BjpgbxQw.js","./CPanelPage-BEZybQOb.js","./CPanelLoginPage-DOx5kDN0.js"])))=>i.map(i=>d[i]);
var qD=Object.defineProperty;var $E=t=>{throw TypeError(t)};var HD=(t,e,n)=>e in t?qD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var zE=(t,e,n)=>HD(t,typeof e!="symbol"?e+"":e,n),Am=(t,e,n)=>e.has(t)||$E("Cannot "+n);var $=(t,e,n)=>(Am(t,e,"read from private field"),n?n.call(t):e.get(t)),De=(t,e,n)=>e.has(t)?$E("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),fe=(t,e,n,r)=>(Am(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Gt=(t,e,n)=>(Am(t,e,"access private method"),n);var kd=(t,e,n,r)=>({set _(s){fe(t,e,s,n)},get _(){return $(t,e,r)}});function WD(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Cb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var kb={exports:{}},sp={},Db={exports:{}},xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hu=Symbol.for("react.element"),KD=Symbol.for("react.portal"),GD=Symbol.for("react.fragment"),QD=Symbol.for("react.strict_mode"),YD=Symbol.for("react.profiler"),XD=Symbol.for("react.provider"),JD=Symbol.for("react.context"),ZD=Symbol.for("react.forward_ref"),eN=Symbol.for("react.suspense"),tN=Symbol.for("react.memo"),nN=Symbol.for("react.lazy"),qE=Symbol.iterator;function rN(t){return t===null||typeof t!="object"?null:(t=qE&&t[qE]||t["@@iterator"],typeof t=="function"?t:null)}var Nb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ob=Object.assign,Vb={};function xl(t,e,n){this.props=t,this.context=e,this.refs=Vb,this.updater=n||Nb}xl.prototype.isReactComponent={};xl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};xl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Lb(){}Lb.prototype=xl.prototype;function bv(t,e,n){this.props=t,this.context=e,this.refs=Vb,this.updater=n||Nb}var Av=bv.prototype=new Lb;Av.constructor=bv;Ob(Av,xl.prototype);Av.isPureReactComponent=!0;var HE=Array.isArray,Mb=Object.prototype.hasOwnProperty,xv={current:null},Fb={key:!0,ref:!0,__self:!0,__source:!0};function Ub(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Mb.call(e,r)&&!Fb.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Hu,type:t,key:i,ref:o,props:s,_owner:xv.current}}function sN(t,e){return{$$typeof:Hu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Pv(t){return typeof t=="object"&&t!==null&&t.$$typeof===Hu}function iN(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var WE=/\/+/g;function xm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?iN(""+t.key):e.toString(36)}function gh(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Hu:case KD:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+xm(o,0):r,HE(s)?(n="",t!=null&&(n=t.replace(WE,"$&/")+"/"),gh(s,e,n,"",function(c){return c})):s!=null&&(Pv(s)&&(s=sN(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(WE,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",HE(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+xm(i,a);o+=gh(i,e,n,l,s)}else if(l=rN(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+xm(i,a++),o+=gh(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Dd(t,e,n){if(t==null)return t;var r=[],s=0;return gh(t,r,"","",function(i){return e.call(n,i,s++)}),r}function oN(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var pn={current:null},yh={transition:null},aN={ReactCurrentDispatcher:pn,ReactCurrentBatchConfig:yh,ReactCurrentOwner:xv};function jb(){throw Error("act(...) is not supported in production builds of React.")}xe.Children={map:Dd,forEach:function(t,e,n){Dd(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Dd(t,function(){e++}),e},toArray:function(t){return Dd(t,function(e){return e})||[]},only:function(t){if(!Pv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};xe.Component=xl;xe.Fragment=GD;xe.Profiler=YD;xe.PureComponent=bv;xe.StrictMode=QD;xe.Suspense=eN;xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aN;xe.act=jb;xe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Ob({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=xv.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Mb.call(e,l)&&!Fb.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Hu,type:t.type,key:s,ref:i,props:r,_owner:o}};xe.createContext=function(t){return t={$$typeof:JD,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:XD,_context:t},t.Consumer=t};xe.createElement=Ub;xe.createFactory=function(t){var e=Ub.bind(null,t);return e.type=t,e};xe.createRef=function(){return{current:null}};xe.forwardRef=function(t){return{$$typeof:ZD,render:t}};xe.isValidElement=Pv;xe.lazy=function(t){return{$$typeof:nN,_payload:{_status:-1,_result:t},_init:oN}};xe.memo=function(t,e){return{$$typeof:tN,type:t,compare:e===void 0?null:e}};xe.startTransition=function(t){var e=yh.transition;yh.transition={};try{t()}finally{yh.transition=e}};xe.unstable_act=jb;xe.useCallback=function(t,e){return pn.current.useCallback(t,e)};xe.useContext=function(t){return pn.current.useContext(t)};xe.useDebugValue=function(){};xe.useDeferredValue=function(t){return pn.current.useDeferredValue(t)};xe.useEffect=function(t,e){return pn.current.useEffect(t,e)};xe.useId=function(){return pn.current.useId()};xe.useImperativeHandle=function(t,e,n){return pn.current.useImperativeHandle(t,e,n)};xe.useInsertionEffect=function(t,e){return pn.current.useInsertionEffect(t,e)};xe.useLayoutEffect=function(t,e){return pn.current.useLayoutEffect(t,e)};xe.useMemo=function(t,e){return pn.current.useMemo(t,e)};xe.useReducer=function(t,e,n){return pn.current.useReducer(t,e,n)};xe.useRef=function(t){return pn.current.useRef(t)};xe.useState=function(t){return pn.current.useState(t)};xe.useSyncExternalStore=function(t,e,n){return pn.current.useSyncExternalStore(t,e,n)};xe.useTransition=function(){return pn.current.useTransition()};xe.version="18.3.1";Db.exports=xe;var A=Db.exports;const z=Cb(A),Bb=WD({__proto__:null,default:z},[A]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lN=A,cN=Symbol.for("react.element"),uN=Symbol.for("react.fragment"),dN=Object.prototype.hasOwnProperty,hN=lN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,fN={key:!0,ref:!0,__self:!0,__source:!0};function $b(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)dN.call(e,r)&&!fN.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:cN,type:t,key:i,ref:o,props:s,_owner:hN.current}}sp.Fragment=uN;sp.jsx=$b;sp.jsxs=$b;kb.exports=sp;var x=kb.exports,zb={exports:{}},Wn={},qb={exports:{}},Hb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,U){var Y=F.length;F.push(U);e:for(;0<Y;){var de=Y-1>>>1,ne=F[de];if(0<s(ne,U))F[de]=U,F[Y]=ne,Y=de;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var U=F[0],Y=F.pop();if(Y!==U){F[0]=Y;e:for(var de=0,ne=F.length,ce=ne>>>1;de<ce;){var le=2*(de+1)-1,we=F[le],Qe=le+1,ae=F[Qe];if(0>s(we,Y))Qe<ne&&0>s(ae,we)?(F[de]=ae,F[Qe]=Y,de=Qe):(F[de]=we,F[le]=Y,de=le);else if(Qe<ne&&0>s(ae,Y))F[de]=ae,F[Qe]=Y,de=Qe;else break e}}return U}function s(F,U){var Y=F.sortIndex-U.sortIndex;return Y!==0?Y:F.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,p=3,f=!1,_=!1,y=!1,E=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(F){for(var U=n(c);U!==null;){if(U.callback===null)r(c);else if(U.startTime<=F)r(c),U.sortIndex=U.expirationTime,e(l,U);else break;U=n(c)}}function D(F){if(y=!1,I(F),!_)if(n(l)!==null)_=!0,ie(O);else{var U=n(c);U!==null&&G(D,U.startTime-F)}}function O(F,U){_=!1,y&&(y=!1,w(T),T=-1),f=!0;var Y=p;try{for(I(U),h=n(l);h!==null&&(!(h.expirationTime>U)||F&&!P());){var de=h.callback;if(typeof de=="function"){h.callback=null,p=h.priorityLevel;var ne=de(h.expirationTime<=U);U=t.unstable_now(),typeof ne=="function"?h.callback=ne:h===n(l)&&r(l),I(U)}else r(l);h=n(l)}if(h!==null)var ce=!0;else{var le=n(c);le!==null&&G(D,le.startTime-U),ce=!1}return ce}finally{h=null,p=Y,f=!1}}var V=!1,S=null,T=-1,b=5,k=-1;function P(){return!(t.unstable_now()-k<b)}function N(){if(S!==null){var F=t.unstable_now();k=F;var U=!0;try{U=S(!0,F)}finally{U?C():(V=!1,S=null)}}else V=!1}var C;if(typeof v=="function")C=function(){v(N)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,Z=q.port2;q.port1.onmessage=N,C=function(){Z.postMessage(null)}}else C=function(){E(N,0)};function ie(F){S=F,V||(V=!0,C())}function G(F,U){T=E(function(){F(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){_||f||(_=!0,ie(O))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(F){switch(p){case 1:case 2:case 3:var U=3;break;default:U=p}var Y=p;p=U;try{return F()}finally{p=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,U){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var Y=p;p=F;try{return U()}finally{p=Y}},t.unstable_scheduleCallback=function(F,U,Y){var de=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?de+Y:de):Y=de,F){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=Y+ne,F={id:d++,callback:U,priorityLevel:F,startTime:Y,expirationTime:ne,sortIndex:-1},Y>de?(F.sortIndex=Y,e(c,F),n(l)===null&&F===n(c)&&(y?(w(T),T=-1):y=!0,G(D,Y-de))):(F.sortIndex=ne,e(l,F),_||f||(_=!0,ie(O))),F},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(F){var U=p;return function(){var Y=p;p=U;try{return F.apply(this,arguments)}finally{p=Y}}}})(Hb);qb.exports=Hb;var pN=qb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mN=A,qn=pN;function W(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Wb=new Set,tu={};function Jo(t,e){Xa(t,e),Xa(t+"Capture",e)}function Xa(t,e){for(tu[t]=e,t=0;t<e.length;t++)Wb.add(e[t])}var vs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kg=Object.prototype.hasOwnProperty,gN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,KE={},GE={};function yN(t){return kg.call(GE,t)?!0:kg.call(KE,t)?!1:gN.test(t)?GE[t]=!0:(KE[t]=!0,!1)}function vN(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function _N(t,e,n,r){if(e===null||typeof e>"u"||vN(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function mn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Ht={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ht[t]=new mn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ht[e]=new mn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ht[t]=new mn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ht[t]=new mn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ht[t]=new mn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ht[t]=new mn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ht[t]=new mn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ht[t]=new mn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ht[t]=new mn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Rv=/[\-:]([a-z])/g;function Cv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Rv,Cv);Ht[e]=new mn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Rv,Cv);Ht[e]=new mn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Rv,Cv);Ht[e]=new mn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ht[t]=new mn(t,1,!1,t.toLowerCase(),null,!1,!1)});Ht.xlinkHref=new mn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ht[t]=new mn(t,1,!1,t.toLowerCase(),null,!0,!0)});function kv(t,e,n,r){var s=Ht.hasOwnProperty(e)?Ht[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(_N(e,n,s,r)&&(n=null),r||s===null?yN(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ps=mN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Nd=Symbol.for("react.element"),wa=Symbol.for("react.portal"),Ea=Symbol.for("react.fragment"),Dv=Symbol.for("react.strict_mode"),Dg=Symbol.for("react.profiler"),Kb=Symbol.for("react.provider"),Gb=Symbol.for("react.context"),Nv=Symbol.for("react.forward_ref"),Ng=Symbol.for("react.suspense"),Og=Symbol.for("react.suspense_list"),Ov=Symbol.for("react.memo"),Xs=Symbol.for("react.lazy"),Qb=Symbol.for("react.offscreen"),QE=Symbol.iterator;function oc(t){return t===null||typeof t!="object"?null:(t=QE&&t[QE]||t["@@iterator"],typeof t=="function"?t:null)}var ut=Object.assign,Pm;function Tc(t){if(Pm===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Pm=e&&e[1]||""}return`
`+Pm+t}var Rm=!1;function Cm(t,e){if(!t||Rm)return"";Rm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Rm=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Tc(t):""}function wN(t){switch(t.tag){case 5:return Tc(t.type);case 16:return Tc("Lazy");case 13:return Tc("Suspense");case 19:return Tc("SuspenseList");case 0:case 2:case 15:return t=Cm(t.type,!1),t;case 11:return t=Cm(t.type.render,!1),t;case 1:return t=Cm(t.type,!0),t;default:return""}}function Vg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ea:return"Fragment";case wa:return"Portal";case Dg:return"Profiler";case Dv:return"StrictMode";case Ng:return"Suspense";case Og:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Gb:return(t.displayName||"Context")+".Consumer";case Kb:return(t._context.displayName||"Context")+".Provider";case Nv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ov:return e=t.displayName||null,e!==null?e:Vg(t.type)||"Memo";case Xs:e=t._payload,t=t._init;try{return Vg(t(e))}catch{}}return null}function EN(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Vg(e);case 8:return e===Dv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function xi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Yb(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function TN(t){var e=Yb(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Od(t){t._valueTracker||(t._valueTracker=TN(t))}function Xb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Yb(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Hh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Lg(t,e){var n=e.checked;return ut({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function YE(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=xi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Jb(t,e){e=e.checked,e!=null&&kv(t,"checked",e,!1)}function Mg(t,e){Jb(t,e);var n=xi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Fg(t,e.type,n):e.hasOwnProperty("defaultValue")&&Fg(t,e.type,xi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function XE(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Fg(t,e,n){(e!=="number"||Hh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ic=Array.isArray;function Da(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+xi(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Ug(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return ut({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function JE(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(W(92));if(Ic(n)){if(1<n.length)throw Error(W(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:xi(n)}}function Zb(t,e){var n=xi(e.value),r=xi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function ZE(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function eA(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?eA(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Vd,tA=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Vd=Vd||document.createElement("div"),Vd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Vd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function nu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Dc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},IN=["Webkit","ms","Moz","O"];Object.keys(Dc).forEach(function(t){IN.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Dc[e]=Dc[t]})});function nA(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Dc.hasOwnProperty(t)&&Dc[t]?(""+e).trim():e+"px"}function rA(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=nA(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var SN=ut({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bg(t,e){if(e){if(SN[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function $g(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zg=null;function Vv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qg=null,Na=null,Oa=null;function e0(t){if(t=Gu(t)){if(typeof qg!="function")throw Error(W(280));var e=t.stateNode;e&&(e=cp(e),qg(t.stateNode,t.type,e))}}function sA(t){Na?Oa?Oa.push(t):Oa=[t]:Na=t}function iA(){if(Na){var t=Na,e=Oa;if(Oa=Na=null,e0(t),e)for(t=0;t<e.length;t++)e0(e[t])}}function oA(t,e){return t(e)}function aA(){}var km=!1;function lA(t,e,n){if(km)return t(e,n);km=!0;try{return oA(t,e,n)}finally{km=!1,(Na!==null||Oa!==null)&&(aA(),iA())}}function ru(t,e){var n=t.stateNode;if(n===null)return null;var r=cp(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(W(231,e,typeof n));return n}var Hg=!1;if(vs)try{var ac={};Object.defineProperty(ac,"passive",{get:function(){Hg=!0}}),window.addEventListener("test",ac,ac),window.removeEventListener("test",ac,ac)}catch{Hg=!1}function bN(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Nc=!1,Wh=null,Kh=!1,Wg=null,AN={onError:function(t){Nc=!0,Wh=t}};function xN(t,e,n,r,s,i,o,a,l){Nc=!1,Wh=null,bN.apply(AN,arguments)}function PN(t,e,n,r,s,i,o,a,l){if(xN.apply(this,arguments),Nc){if(Nc){var c=Wh;Nc=!1,Wh=null}else throw Error(W(198));Kh||(Kh=!0,Wg=c)}}function Zo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function cA(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function t0(t){if(Zo(t)!==t)throw Error(W(188))}function RN(t){var e=t.alternate;if(!e){if(e=Zo(t),e===null)throw Error(W(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return t0(s),t;if(i===r)return t0(s),e;i=i.sibling}throw Error(W(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(W(189))}}if(n.alternate!==r)throw Error(W(190))}if(n.tag!==3)throw Error(W(188));return n.stateNode.current===n?t:e}function uA(t){return t=RN(t),t!==null?dA(t):null}function dA(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=dA(t);if(e!==null)return e;t=t.sibling}return null}var hA=qn.unstable_scheduleCallback,n0=qn.unstable_cancelCallback,CN=qn.unstable_shouldYield,kN=qn.unstable_requestPaint,yt=qn.unstable_now,DN=qn.unstable_getCurrentPriorityLevel,Lv=qn.unstable_ImmediatePriority,fA=qn.unstable_UserBlockingPriority,Gh=qn.unstable_NormalPriority,NN=qn.unstable_LowPriority,pA=qn.unstable_IdlePriority,ip=null,Kr=null;function ON(t){if(Kr&&typeof Kr.onCommitFiberRoot=="function")try{Kr.onCommitFiberRoot(ip,t,void 0,(t.current.flags&128)===128)}catch{}}var vr=Math.clz32?Math.clz32:MN,VN=Math.log,LN=Math.LN2;function MN(t){return t>>>=0,t===0?32:31-(VN(t)/LN|0)|0}var Ld=64,Md=4194304;function Sc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Qh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Sc(a):(i&=o,i!==0&&(r=Sc(i)))}else o=n&~s,o!==0?r=Sc(o):i!==0&&(r=Sc(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-vr(e),s=1<<n,r|=t[n],e&=~s;return r}function FN(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function UN(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-vr(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=FN(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Kg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function mA(){var t=Ld;return Ld<<=1,!(Ld&4194240)&&(Ld=64),t}function Dm(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Wu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-vr(e),t[e]=n}function jN(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-vr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Mv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-vr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var $e=0;function gA(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var yA,Fv,vA,_A,wA,Gg=!1,Fd=[],fi=null,pi=null,mi=null,su=new Map,iu=new Map,ei=[],BN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function r0(t,e){switch(t){case"focusin":case"focusout":fi=null;break;case"dragenter":case"dragleave":pi=null;break;case"mouseover":case"mouseout":mi=null;break;case"pointerover":case"pointerout":su.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":iu.delete(e.pointerId)}}function lc(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Gu(e),e!==null&&Fv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function $N(t,e,n,r,s){switch(e){case"focusin":return fi=lc(fi,t,e,n,r,s),!0;case"dragenter":return pi=lc(pi,t,e,n,r,s),!0;case"mouseover":return mi=lc(mi,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return su.set(i,lc(su.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,iu.set(i,lc(iu.get(i)||null,t,e,n,r,s)),!0}return!1}function EA(t){var e=_o(t.target);if(e!==null){var n=Zo(e);if(n!==null){if(e=n.tag,e===13){if(e=cA(n),e!==null){t.blockedOn=e,wA(t.priority,function(){vA(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function vh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Qg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);zg=r,n.target.dispatchEvent(r),zg=null}else return e=Gu(n),e!==null&&Fv(e),t.blockedOn=n,!1;e.shift()}return!0}function s0(t,e,n){vh(t)&&n.delete(e)}function zN(){Gg=!1,fi!==null&&vh(fi)&&(fi=null),pi!==null&&vh(pi)&&(pi=null),mi!==null&&vh(mi)&&(mi=null),su.forEach(s0),iu.forEach(s0)}function cc(t,e){t.blockedOn===e&&(t.blockedOn=null,Gg||(Gg=!0,qn.unstable_scheduleCallback(qn.unstable_NormalPriority,zN)))}function ou(t){function e(s){return cc(s,t)}if(0<Fd.length){cc(Fd[0],t);for(var n=1;n<Fd.length;n++){var r=Fd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(fi!==null&&cc(fi,t),pi!==null&&cc(pi,t),mi!==null&&cc(mi,t),su.forEach(e),iu.forEach(e),n=0;n<ei.length;n++)r=ei[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ei.length&&(n=ei[0],n.blockedOn===null);)EA(n),n.blockedOn===null&&ei.shift()}var Va=Ps.ReactCurrentBatchConfig,Yh=!0;function qN(t,e,n,r){var s=$e,i=Va.transition;Va.transition=null;try{$e=1,Uv(t,e,n,r)}finally{$e=s,Va.transition=i}}function HN(t,e,n,r){var s=$e,i=Va.transition;Va.transition=null;try{$e=4,Uv(t,e,n,r)}finally{$e=s,Va.transition=i}}function Uv(t,e,n,r){if(Yh){var s=Qg(t,e,n,r);if(s===null)$m(t,e,r,Xh,n),r0(t,r);else if($N(s,t,e,n,r))r.stopPropagation();else if(r0(t,r),e&4&&-1<BN.indexOf(t)){for(;s!==null;){var i=Gu(s);if(i!==null&&yA(i),i=Qg(t,e,n,r),i===null&&$m(t,e,r,Xh,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else $m(t,e,r,null,n)}}var Xh=null;function Qg(t,e,n,r){if(Xh=null,t=Vv(r),t=_o(t),t!==null)if(e=Zo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=cA(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Xh=t,null}function TA(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(DN()){case Lv:return 1;case fA:return 4;case Gh:case NN:return 16;case pA:return 536870912;default:return 16}default:return 16}}var ci=null,jv=null,_h=null;function IA(){if(_h)return _h;var t,e=jv,n=e.length,r,s="value"in ci?ci.value:ci.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return _h=s.slice(t,1<r?1-r:void 0)}function wh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ud(){return!0}function i0(){return!1}function Kn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ud:i0,this.isPropagationStopped=i0,this}return ut(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ud)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ud)},persist:function(){},isPersistent:Ud}),e}var Pl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bv=Kn(Pl),Ku=ut({},Pl,{view:0,detail:0}),WN=Kn(Ku),Nm,Om,uc,op=ut({},Ku,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$v,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==uc&&(uc&&t.type==="mousemove"?(Nm=t.screenX-uc.screenX,Om=t.screenY-uc.screenY):Om=Nm=0,uc=t),Nm)},movementY:function(t){return"movementY"in t?t.movementY:Om}}),o0=Kn(op),KN=ut({},op,{dataTransfer:0}),GN=Kn(KN),QN=ut({},Ku,{relatedTarget:0}),Vm=Kn(QN),YN=ut({},Pl,{animationName:0,elapsedTime:0,pseudoElement:0}),XN=Kn(YN),JN=ut({},Pl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ZN=Kn(JN),e2=ut({},Pl,{data:0}),a0=Kn(e2),t2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},n2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},r2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function s2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=r2[t])?!!e[t]:!1}function $v(){return s2}var i2=ut({},Ku,{key:function(t){if(t.key){var e=t2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=wh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?n2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$v,charCode:function(t){return t.type==="keypress"?wh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?wh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),o2=Kn(i2),a2=ut({},op,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),l0=Kn(a2),l2=ut({},Ku,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$v}),c2=Kn(l2),u2=ut({},Pl,{propertyName:0,elapsedTime:0,pseudoElement:0}),d2=Kn(u2),h2=ut({},op,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),f2=Kn(h2),p2=[9,13,27,32],zv=vs&&"CompositionEvent"in window,Oc=null;vs&&"documentMode"in document&&(Oc=document.documentMode);var m2=vs&&"TextEvent"in window&&!Oc,SA=vs&&(!zv||Oc&&8<Oc&&11>=Oc),c0=" ",u0=!1;function bA(t,e){switch(t){case"keyup":return p2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function AA(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ta=!1;function g2(t,e){switch(t){case"compositionend":return AA(e);case"keypress":return e.which!==32?null:(u0=!0,c0);case"textInput":return t=e.data,t===c0&&u0?null:t;default:return null}}function y2(t,e){if(Ta)return t==="compositionend"||!zv&&bA(t,e)?(t=IA(),_h=jv=ci=null,Ta=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return SA&&e.locale!=="ko"?null:e.data;default:return null}}var v2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function d0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!v2[t.type]:e==="textarea"}function xA(t,e,n,r){sA(r),e=Jh(e,"onChange"),0<e.length&&(n=new Bv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Vc=null,au=null;function _2(t){FA(t,0)}function ap(t){var e=ba(t);if(Xb(e))return t}function w2(t,e){if(t==="change")return e}var PA=!1;if(vs){var Lm;if(vs){var Mm="oninput"in document;if(!Mm){var h0=document.createElement("div");h0.setAttribute("oninput","return;"),Mm=typeof h0.oninput=="function"}Lm=Mm}else Lm=!1;PA=Lm&&(!document.documentMode||9<document.documentMode)}function f0(){Vc&&(Vc.detachEvent("onpropertychange",RA),au=Vc=null)}function RA(t){if(t.propertyName==="value"&&ap(au)){var e=[];xA(e,au,t,Vv(t)),lA(_2,e)}}function E2(t,e,n){t==="focusin"?(f0(),Vc=e,au=n,Vc.attachEvent("onpropertychange",RA)):t==="focusout"&&f0()}function T2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ap(au)}function I2(t,e){if(t==="click")return ap(e)}function S2(t,e){if(t==="input"||t==="change")return ap(e)}function b2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Tr=typeof Object.is=="function"?Object.is:b2;function lu(t,e){if(Tr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!kg.call(e,s)||!Tr(t[s],e[s]))return!1}return!0}function p0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function m0(t,e){var n=p0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=p0(n)}}function CA(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?CA(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function kA(){for(var t=window,e=Hh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Hh(t.document)}return e}function qv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function A2(t){var e=kA(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&CA(n.ownerDocument.documentElement,n)){if(r!==null&&qv(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=m0(n,i);var o=m0(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var x2=vs&&"documentMode"in document&&11>=document.documentMode,Ia=null,Yg=null,Lc=null,Xg=!1;function g0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Xg||Ia==null||Ia!==Hh(r)||(r=Ia,"selectionStart"in r&&qv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Lc&&lu(Lc,r)||(Lc=r,r=Jh(Yg,"onSelect"),0<r.length&&(e=new Bv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ia)))}function jd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Sa={animationend:jd("Animation","AnimationEnd"),animationiteration:jd("Animation","AnimationIteration"),animationstart:jd("Animation","AnimationStart"),transitionend:jd("Transition","TransitionEnd")},Fm={},DA={};vs&&(DA=document.createElement("div").style,"AnimationEvent"in window||(delete Sa.animationend.animation,delete Sa.animationiteration.animation,delete Sa.animationstart.animation),"TransitionEvent"in window||delete Sa.transitionend.transition);function lp(t){if(Fm[t])return Fm[t];if(!Sa[t])return t;var e=Sa[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in DA)return Fm[t]=e[n];return t}var NA=lp("animationend"),OA=lp("animationiteration"),VA=lp("animationstart"),LA=lp("transitionend"),MA=new Map,y0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qi(t,e){MA.set(t,e),Jo(e,[t])}for(var Um=0;Um<y0.length;Um++){var jm=y0[Um],P2=jm.toLowerCase(),R2=jm[0].toUpperCase()+jm.slice(1);qi(P2,"on"+R2)}qi(NA,"onAnimationEnd");qi(OA,"onAnimationIteration");qi(VA,"onAnimationStart");qi("dblclick","onDoubleClick");qi("focusin","onFocus");qi("focusout","onBlur");qi(LA,"onTransitionEnd");Xa("onMouseEnter",["mouseout","mouseover"]);Xa("onMouseLeave",["mouseout","mouseover"]);Xa("onPointerEnter",["pointerout","pointerover"]);Xa("onPointerLeave",["pointerout","pointerover"]);Jo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Jo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Jo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Jo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Jo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Jo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),C2=new Set("cancel close invalid load scroll toggle".split(" ").concat(bc));function v0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,PN(r,e,void 0,t),t.currentTarget=null}function FA(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;v0(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;v0(s,a,c),i=l}}}if(Kh)throw t=Wg,Kh=!1,Wg=null,t}function Je(t,e){var n=e[ny];n===void 0&&(n=e[ny]=new Set);var r=t+"__bubble";n.has(r)||(UA(e,t,2,!1),n.add(r))}function Bm(t,e,n){var r=0;e&&(r|=4),UA(n,t,r,e)}var Bd="_reactListening"+Math.random().toString(36).slice(2);function cu(t){if(!t[Bd]){t[Bd]=!0,Wb.forEach(function(n){n!=="selectionchange"&&(C2.has(n)||Bm(n,!1,t),Bm(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Bd]||(e[Bd]=!0,Bm("selectionchange",!1,e))}}function UA(t,e,n,r){switch(TA(e)){case 1:var s=qN;break;case 4:s=HN;break;default:s=Uv}n=s.bind(null,e,n,t),s=void 0,!Hg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function $m(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=_o(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}lA(function(){var c=i,d=Vv(n),h=[];e:{var p=MA.get(t);if(p!==void 0){var f=Bv,_=t;switch(t){case"keypress":if(wh(n)===0)break e;case"keydown":case"keyup":f=o2;break;case"focusin":_="focus",f=Vm;break;case"focusout":_="blur",f=Vm;break;case"beforeblur":case"afterblur":f=Vm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=o0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=GN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=c2;break;case NA:case OA:case VA:f=XN;break;case LA:f=d2;break;case"scroll":f=WN;break;case"wheel":f=f2;break;case"copy":case"cut":case"paste":f=ZN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=l0}var y=(e&4)!==0,E=!y&&t==="scroll",w=y?p!==null?p+"Capture":null:p;y=[];for(var v=c,I;v!==null;){I=v;var D=I.stateNode;if(I.tag===5&&D!==null&&(I=D,w!==null&&(D=ru(v,w),D!=null&&y.push(uu(v,D,I)))),E)break;v=v.return}0<y.length&&(p=new f(p,_,null,n,d),h.push({event:p,listeners:y}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",p&&n!==zg&&(_=n.relatedTarget||n.fromElement)&&(_o(_)||_[_s]))break e;if((f||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,f?(_=n.relatedTarget||n.toElement,f=c,_=_?_o(_):null,_!==null&&(E=Zo(_),_!==E||_.tag!==5&&_.tag!==6)&&(_=null)):(f=null,_=c),f!==_)){if(y=o0,D="onMouseLeave",w="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(y=l0,D="onPointerLeave",w="onPointerEnter",v="pointer"),E=f==null?p:ba(f),I=_==null?p:ba(_),p=new y(D,v+"leave",f,n,d),p.target=E,p.relatedTarget=I,D=null,_o(d)===c&&(y=new y(w,v+"enter",_,n,d),y.target=I,y.relatedTarget=E,D=y),E=D,f&&_)t:{for(y=f,w=_,v=0,I=y;I;I=aa(I))v++;for(I=0,D=w;D;D=aa(D))I++;for(;0<v-I;)y=aa(y),v--;for(;0<I-v;)w=aa(w),I--;for(;v--;){if(y===w||w!==null&&y===w.alternate)break t;y=aa(y),w=aa(w)}y=null}else y=null;f!==null&&_0(h,p,f,y,!1),_!==null&&E!==null&&_0(h,E,_,y,!0)}}e:{if(p=c?ba(c):window,f=p.nodeName&&p.nodeName.toLowerCase(),f==="select"||f==="input"&&p.type==="file")var O=w2;else if(d0(p))if(PA)O=S2;else{O=T2;var V=E2}else(f=p.nodeName)&&f.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(O=I2);if(O&&(O=O(t,c))){xA(h,O,n,d);break e}V&&V(t,p,c),t==="focusout"&&(V=p._wrapperState)&&V.controlled&&p.type==="number"&&Fg(p,"number",p.value)}switch(V=c?ba(c):window,t){case"focusin":(d0(V)||V.contentEditable==="true")&&(Ia=V,Yg=c,Lc=null);break;case"focusout":Lc=Yg=Ia=null;break;case"mousedown":Xg=!0;break;case"contextmenu":case"mouseup":case"dragend":Xg=!1,g0(h,n,d);break;case"selectionchange":if(x2)break;case"keydown":case"keyup":g0(h,n,d)}var S;if(zv)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Ta?bA(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(SA&&n.locale!=="ko"&&(Ta||T!=="onCompositionStart"?T==="onCompositionEnd"&&Ta&&(S=IA()):(ci=d,jv="value"in ci?ci.value:ci.textContent,Ta=!0)),V=Jh(c,T),0<V.length&&(T=new a0(T,t,null,n,d),h.push({event:T,listeners:V}),S?T.data=S:(S=AA(n),S!==null&&(T.data=S)))),(S=m2?g2(t,n):y2(t,n))&&(c=Jh(c,"onBeforeInput"),0<c.length&&(d=new a0("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=S))}FA(h,e)})}function uu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Jh(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ru(t,n),i!=null&&r.unshift(uu(t,i,s)),i=ru(t,e),i!=null&&r.push(uu(t,i,s))),t=t.return}return r}function aa(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function _0(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=ru(n,i),l!=null&&o.unshift(uu(n,l,a))):s||(l=ru(n,i),l!=null&&o.push(uu(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var k2=/\r\n?/g,D2=/\u0000|\uFFFD/g;function w0(t){return(typeof t=="string"?t:""+t).replace(k2,`
`).replace(D2,"")}function $d(t,e,n){if(e=w0(e),w0(t)!==e&&n)throw Error(W(425))}function Zh(){}var Jg=null,Zg=null;function ey(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ty=typeof setTimeout=="function"?setTimeout:void 0,N2=typeof clearTimeout=="function"?clearTimeout:void 0,E0=typeof Promise=="function"?Promise:void 0,O2=typeof queueMicrotask=="function"?queueMicrotask:typeof E0<"u"?function(t){return E0.resolve(null).then(t).catch(V2)}:ty;function V2(t){setTimeout(function(){throw t})}function zm(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),ou(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ou(e)}function gi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function T0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Rl=Math.random().toString(36).slice(2),$r="__reactFiber$"+Rl,du="__reactProps$"+Rl,_s="__reactContainer$"+Rl,ny="__reactEvents$"+Rl,L2="__reactListeners$"+Rl,M2="__reactHandles$"+Rl;function _o(t){var e=t[$r];if(e)return e;for(var n=t.parentNode;n;){if(e=n[_s]||n[$r]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=T0(t);t!==null;){if(n=t[$r])return n;t=T0(t)}return e}t=n,n=t.parentNode}return null}function Gu(t){return t=t[$r]||t[_s],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ba(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(W(33))}function cp(t){return t[du]||null}var ry=[],Aa=-1;function Hi(t){return{current:t}}function Ze(t){0>Aa||(t.current=ry[Aa],ry[Aa]=null,Aa--)}function Ke(t,e){Aa++,ry[Aa]=t.current,t.current=e}var Pi={},sn=Hi(Pi),An=Hi(!1),Mo=Pi;function Ja(t,e){var n=t.type.contextTypes;if(!n)return Pi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function xn(t){return t=t.childContextTypes,t!=null}function ef(){Ze(An),Ze(sn)}function I0(t,e,n){if(sn.current!==Pi)throw Error(W(168));Ke(sn,e),Ke(An,n)}function jA(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(W(108,EN(t)||"Unknown",s));return ut({},n,r)}function tf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Pi,Mo=sn.current,Ke(sn,t),Ke(An,An.current),!0}function S0(t,e,n){var r=t.stateNode;if(!r)throw Error(W(169));n?(t=jA(t,e,Mo),r.__reactInternalMemoizedMergedChildContext=t,Ze(An),Ze(sn),Ke(sn,t)):Ze(An),Ke(An,n)}var is=null,up=!1,qm=!1;function BA(t){is===null?is=[t]:is.push(t)}function F2(t){up=!0,BA(t)}function Wi(){if(!qm&&is!==null){qm=!0;var t=0,e=$e;try{var n=is;for($e=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}is=null,up=!1}catch(s){throw is!==null&&(is=is.slice(t+1)),hA(Lv,Wi),s}finally{$e=e,qm=!1}}return null}var xa=[],Pa=0,nf=null,rf=0,Jn=[],Zn=0,Fo=null,ls=1,cs="";function ao(t,e){xa[Pa++]=rf,xa[Pa++]=nf,nf=t,rf=e}function $A(t,e,n){Jn[Zn++]=ls,Jn[Zn++]=cs,Jn[Zn++]=Fo,Fo=t;var r=ls;t=cs;var s=32-vr(r)-1;r&=~(1<<s),n+=1;var i=32-vr(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,ls=1<<32-vr(e)+s|n<<s|r,cs=i+t}else ls=1<<i|n<<s|r,cs=t}function Hv(t){t.return!==null&&(ao(t,1),$A(t,1,0))}function Wv(t){for(;t===nf;)nf=xa[--Pa],xa[Pa]=null,rf=xa[--Pa],xa[Pa]=null;for(;t===Fo;)Fo=Jn[--Zn],Jn[Zn]=null,cs=Jn[--Zn],Jn[Zn]=null,ls=Jn[--Zn],Jn[Zn]=null}var Bn=null,Fn=null,nt=!1,gr=null;function zA(t,e){var n=er(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function b0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Bn=t,Fn=gi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Bn=t,Fn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Fo!==null?{id:ls,overflow:cs}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=er(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Bn=t,Fn=null,!0):!1;default:return!1}}function sy(t){return(t.mode&1)!==0&&(t.flags&128)===0}function iy(t){if(nt){var e=Fn;if(e){var n=e;if(!b0(t,e)){if(sy(t))throw Error(W(418));e=gi(n.nextSibling);var r=Bn;e&&b0(t,e)?zA(r,n):(t.flags=t.flags&-4097|2,nt=!1,Bn=t)}}else{if(sy(t))throw Error(W(418));t.flags=t.flags&-4097|2,nt=!1,Bn=t}}}function A0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Bn=t}function zd(t){if(t!==Bn)return!1;if(!nt)return A0(t),nt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ey(t.type,t.memoizedProps)),e&&(e=Fn)){if(sy(t))throw qA(),Error(W(418));for(;e;)zA(t,e),e=gi(e.nextSibling)}if(A0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(W(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Fn=gi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Fn=null}}else Fn=Bn?gi(t.stateNode.nextSibling):null;return!0}function qA(){for(var t=Fn;t;)t=gi(t.nextSibling)}function Za(){Fn=Bn=null,nt=!1}function Kv(t){gr===null?gr=[t]:gr.push(t)}var U2=Ps.ReactCurrentBatchConfig;function dc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(W(309));var r=n.stateNode}if(!r)throw Error(W(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(W(284));if(!n._owner)throw Error(W(290,t))}return t}function qd(t,e){throw t=Object.prototype.toString.call(e),Error(W(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function x0(t){var e=t._init;return e(t._payload)}function HA(t){function e(w,v){if(t){var I=w.deletions;I===null?(w.deletions=[v],w.flags|=16):I.push(v)}}function n(w,v){if(!t)return null;for(;v!==null;)e(w,v),v=v.sibling;return null}function r(w,v){for(w=new Map;v!==null;)v.key!==null?w.set(v.key,v):w.set(v.index,v),v=v.sibling;return w}function s(w,v){return w=wi(w,v),w.index=0,w.sibling=null,w}function i(w,v,I){return w.index=I,t?(I=w.alternate,I!==null?(I=I.index,I<v?(w.flags|=2,v):I):(w.flags|=2,v)):(w.flags|=1048576,v)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,v,I,D){return v===null||v.tag!==6?(v=Xm(I,w.mode,D),v.return=w,v):(v=s(v,I),v.return=w,v)}function l(w,v,I,D){var O=I.type;return O===Ea?d(w,v,I.props.children,D,I.key):v!==null&&(v.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Xs&&x0(O)===v.type)?(D=s(v,I.props),D.ref=dc(w,v,I),D.return=w,D):(D=xh(I.type,I.key,I.props,null,w.mode,D),D.ref=dc(w,v,I),D.return=w,D)}function c(w,v,I,D){return v===null||v.tag!==4||v.stateNode.containerInfo!==I.containerInfo||v.stateNode.implementation!==I.implementation?(v=Jm(I,w.mode,D),v.return=w,v):(v=s(v,I.children||[]),v.return=w,v)}function d(w,v,I,D,O){return v===null||v.tag!==7?(v=Do(I,w.mode,D,O),v.return=w,v):(v=s(v,I),v.return=w,v)}function h(w,v,I){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Xm(""+v,w.mode,I),v.return=w,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Nd:return I=xh(v.type,v.key,v.props,null,w.mode,I),I.ref=dc(w,null,v),I.return=w,I;case wa:return v=Jm(v,w.mode,I),v.return=w,v;case Xs:var D=v._init;return h(w,D(v._payload),I)}if(Ic(v)||oc(v))return v=Do(v,w.mode,I,null),v.return=w,v;qd(w,v)}return null}function p(w,v,I,D){var O=v!==null?v.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return O!==null?null:a(w,v,""+I,D);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Nd:return I.key===O?l(w,v,I,D):null;case wa:return I.key===O?c(w,v,I,D):null;case Xs:return O=I._init,p(w,v,O(I._payload),D)}if(Ic(I)||oc(I))return O!==null?null:d(w,v,I,D,null);qd(w,I)}return null}function f(w,v,I,D,O){if(typeof D=="string"&&D!==""||typeof D=="number")return w=w.get(I)||null,a(v,w,""+D,O);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Nd:return w=w.get(D.key===null?I:D.key)||null,l(v,w,D,O);case wa:return w=w.get(D.key===null?I:D.key)||null,c(v,w,D,O);case Xs:var V=D._init;return f(w,v,I,V(D._payload),O)}if(Ic(D)||oc(D))return w=w.get(I)||null,d(v,w,D,O,null);qd(v,D)}return null}function _(w,v,I,D){for(var O=null,V=null,S=v,T=v=0,b=null;S!==null&&T<I.length;T++){S.index>T?(b=S,S=null):b=S.sibling;var k=p(w,S,I[T],D);if(k===null){S===null&&(S=b);break}t&&S&&k.alternate===null&&e(w,S),v=i(k,v,T),V===null?O=k:V.sibling=k,V=k,S=b}if(T===I.length)return n(w,S),nt&&ao(w,T),O;if(S===null){for(;T<I.length;T++)S=h(w,I[T],D),S!==null&&(v=i(S,v,T),V===null?O=S:V.sibling=S,V=S);return nt&&ao(w,T),O}for(S=r(w,S);T<I.length;T++)b=f(S,w,T,I[T],D),b!==null&&(t&&b.alternate!==null&&S.delete(b.key===null?T:b.key),v=i(b,v,T),V===null?O=b:V.sibling=b,V=b);return t&&S.forEach(function(P){return e(w,P)}),nt&&ao(w,T),O}function y(w,v,I,D){var O=oc(I);if(typeof O!="function")throw Error(W(150));if(I=O.call(I),I==null)throw Error(W(151));for(var V=O=null,S=v,T=v=0,b=null,k=I.next();S!==null&&!k.done;T++,k=I.next()){S.index>T?(b=S,S=null):b=S.sibling;var P=p(w,S,k.value,D);if(P===null){S===null&&(S=b);break}t&&S&&P.alternate===null&&e(w,S),v=i(P,v,T),V===null?O=P:V.sibling=P,V=P,S=b}if(k.done)return n(w,S),nt&&ao(w,T),O;if(S===null){for(;!k.done;T++,k=I.next())k=h(w,k.value,D),k!==null&&(v=i(k,v,T),V===null?O=k:V.sibling=k,V=k);return nt&&ao(w,T),O}for(S=r(w,S);!k.done;T++,k=I.next())k=f(S,w,T,k.value,D),k!==null&&(t&&k.alternate!==null&&S.delete(k.key===null?T:k.key),v=i(k,v,T),V===null?O=k:V.sibling=k,V=k);return t&&S.forEach(function(N){return e(w,N)}),nt&&ao(w,T),O}function E(w,v,I,D){if(typeof I=="object"&&I!==null&&I.type===Ea&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case Nd:e:{for(var O=I.key,V=v;V!==null;){if(V.key===O){if(O=I.type,O===Ea){if(V.tag===7){n(w,V.sibling),v=s(V,I.props.children),v.return=w,w=v;break e}}else if(V.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Xs&&x0(O)===V.type){n(w,V.sibling),v=s(V,I.props),v.ref=dc(w,V,I),v.return=w,w=v;break e}n(w,V);break}else e(w,V);V=V.sibling}I.type===Ea?(v=Do(I.props.children,w.mode,D,I.key),v.return=w,w=v):(D=xh(I.type,I.key,I.props,null,w.mode,D),D.ref=dc(w,v,I),D.return=w,w=D)}return o(w);case wa:e:{for(V=I.key;v!==null;){if(v.key===V)if(v.tag===4&&v.stateNode.containerInfo===I.containerInfo&&v.stateNode.implementation===I.implementation){n(w,v.sibling),v=s(v,I.children||[]),v.return=w,w=v;break e}else{n(w,v);break}else e(w,v);v=v.sibling}v=Jm(I,w.mode,D),v.return=w,w=v}return o(w);case Xs:return V=I._init,E(w,v,V(I._payload),D)}if(Ic(I))return _(w,v,I,D);if(oc(I))return y(w,v,I,D);qd(w,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,v!==null&&v.tag===6?(n(w,v.sibling),v=s(v,I),v.return=w,w=v):(n(w,v),v=Xm(I,w.mode,D),v.return=w,w=v),o(w)):n(w,v)}return E}var el=HA(!0),WA=HA(!1),sf=Hi(null),of=null,Ra=null,Gv=null;function Qv(){Gv=Ra=of=null}function Yv(t){var e=sf.current;Ze(sf),t._currentValue=e}function oy(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function La(t,e){of=t,Gv=Ra=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Tn=!0),t.firstContext=null)}function sr(t){var e=t._currentValue;if(Gv!==t)if(t={context:t,memoizedValue:e,next:null},Ra===null){if(of===null)throw Error(W(308));Ra=t,of.dependencies={lanes:0,firstContext:t}}else Ra=Ra.next=t;return e}var wo=null;function Xv(t){wo===null?wo=[t]:wo.push(t)}function KA(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Xv(e)):(n.next=s.next,s.next=n),e.interleaved=n,ws(t,r)}function ws(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Js=!1;function Jv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function GA(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function hs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function yi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Me&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,ws(t,n)}return s=r.interleaved,s===null?(e.next=e,Xv(r)):(e.next=s.next,s.next=e),r.interleaved=e,ws(t,n)}function Eh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Mv(t,n)}}function P0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function af(t,e,n,r){var s=t.updateQueue;Js=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,d=c=l=null,a=i;do{var p=a.lane,f=a.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=t,y=a;switch(p=e,f=n,y.tag){case 1:if(_=y.payload,typeof _=="function"){h=_.call(f,h,p);break e}h=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=y.payload,p=typeof _=="function"?_.call(f,h,p):_,p==null)break e;h=ut({},h,p);break e;case 2:Js=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[a]:p.push(a))}else f={eventTime:f,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=f,l=h):d=d.next=f,o|=p;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;p=a,a=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);jo|=o,t.lanes=o,t.memoizedState=h}}function R0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(W(191,s));s.call(r)}}}var Qu={},Gr=Hi(Qu),hu=Hi(Qu),fu=Hi(Qu);function Eo(t){if(t===Qu)throw Error(W(174));return t}function Zv(t,e){switch(Ke(fu,e),Ke(hu,t),Ke(Gr,Qu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:jg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=jg(e,t)}Ze(Gr),Ke(Gr,e)}function tl(){Ze(Gr),Ze(hu),Ze(fu)}function QA(t){Eo(fu.current);var e=Eo(Gr.current),n=jg(e,t.type);e!==n&&(Ke(hu,t),Ke(Gr,n))}function e_(t){hu.current===t&&(Ze(Gr),Ze(hu))}var lt=Hi(0);function lf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Hm=[];function t_(){for(var t=0;t<Hm.length;t++)Hm[t]._workInProgressVersionPrimary=null;Hm.length=0}var Th=Ps.ReactCurrentDispatcher,Wm=Ps.ReactCurrentBatchConfig,Uo=0,ct=null,Rt=null,Ut=null,cf=!1,Mc=!1,pu=0,j2=0;function Qt(){throw Error(W(321))}function n_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Tr(t[n],e[n]))return!1;return!0}function r_(t,e,n,r,s,i){if(Uo=i,ct=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Th.current=t===null||t.memoizedState===null?q2:H2,t=n(r,s),Mc){i=0;do{if(Mc=!1,pu=0,25<=i)throw Error(W(301));i+=1,Ut=Rt=null,e.updateQueue=null,Th.current=W2,t=n(r,s)}while(Mc)}if(Th.current=uf,e=Rt!==null&&Rt.next!==null,Uo=0,Ut=Rt=ct=null,cf=!1,e)throw Error(W(300));return t}function s_(){var t=pu!==0;return pu=0,t}function Lr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ut===null?ct.memoizedState=Ut=t:Ut=Ut.next=t,Ut}function ir(){if(Rt===null){var t=ct.alternate;t=t!==null?t.memoizedState:null}else t=Rt.next;var e=Ut===null?ct.memoizedState:Ut.next;if(e!==null)Ut=e,Rt=t;else{if(t===null)throw Error(W(310));Rt=t,t={memoizedState:Rt.memoizedState,baseState:Rt.baseState,baseQueue:Rt.baseQueue,queue:Rt.queue,next:null},Ut===null?ct.memoizedState=Ut=t:Ut=Ut.next=t}return Ut}function mu(t,e){return typeof e=="function"?e(t):e}function Km(t){var e=ir(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=Rt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((Uo&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,ct.lanes|=d,jo|=d}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,Tr(r,e.memoizedState)||(Tn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,ct.lanes|=i,jo|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Gm(t){var e=ir(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Tr(i,e.memoizedState)||(Tn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function YA(){}function XA(t,e){var n=ct,r=ir(),s=e(),i=!Tr(r.memoizedState,s);if(i&&(r.memoizedState=s,Tn=!0),r=r.queue,i_(e1.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ut!==null&&Ut.memoizedState.tag&1){if(n.flags|=2048,gu(9,ZA.bind(null,n,r,s,e),void 0,null),jt===null)throw Error(W(349));Uo&30||JA(n,e,s)}return s}function JA(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ct.updateQueue,e===null?(e={lastEffect:null,stores:null},ct.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function ZA(t,e,n,r){e.value=n,e.getSnapshot=r,t1(e)&&n1(t)}function e1(t,e,n){return n(function(){t1(e)&&n1(t)})}function t1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Tr(t,n)}catch{return!0}}function n1(t){var e=ws(t,1);e!==null&&_r(e,t,1,-1)}function C0(t){var e=Lr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:mu,lastRenderedState:t},e.queue=t,t=t.dispatch=z2.bind(null,ct,t),[e.memoizedState,t]}function gu(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ct.updateQueue,e===null?(e={lastEffect:null,stores:null},ct.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function r1(){return ir().memoizedState}function Ih(t,e,n,r){var s=Lr();ct.flags|=t,s.memoizedState=gu(1|e,n,void 0,r===void 0?null:r)}function dp(t,e,n,r){var s=ir();r=r===void 0?null:r;var i=void 0;if(Rt!==null){var o=Rt.memoizedState;if(i=o.destroy,r!==null&&n_(r,o.deps)){s.memoizedState=gu(e,n,i,r);return}}ct.flags|=t,s.memoizedState=gu(1|e,n,i,r)}function k0(t,e){return Ih(8390656,8,t,e)}function i_(t,e){return dp(2048,8,t,e)}function s1(t,e){return dp(4,2,t,e)}function i1(t,e){return dp(4,4,t,e)}function o1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function a1(t,e,n){return n=n!=null?n.concat([t]):null,dp(4,4,o1.bind(null,e,t),n)}function o_(){}function l1(t,e){var n=ir();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&n_(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function c1(t,e){var n=ir();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&n_(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function u1(t,e,n){return Uo&21?(Tr(n,e)||(n=mA(),ct.lanes|=n,jo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Tn=!0),t.memoizedState=n)}function B2(t,e){var n=$e;$e=n!==0&&4>n?n:4,t(!0);var r=Wm.transition;Wm.transition={};try{t(!1),e()}finally{$e=n,Wm.transition=r}}function d1(){return ir().memoizedState}function $2(t,e,n){var r=_i(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},h1(t))f1(e,n);else if(n=KA(t,e,n,r),n!==null){var s=dn();_r(n,t,r,s),p1(n,e,r)}}function z2(t,e,n){var r=_i(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(h1(t))f1(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Tr(a,o)){var l=e.interleaved;l===null?(s.next=s,Xv(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=KA(t,e,s,r),n!==null&&(s=dn(),_r(n,t,r,s),p1(n,e,r))}}function h1(t){var e=t.alternate;return t===ct||e!==null&&e===ct}function f1(t,e){Mc=cf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function p1(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Mv(t,n)}}var uf={readContext:sr,useCallback:Qt,useContext:Qt,useEffect:Qt,useImperativeHandle:Qt,useInsertionEffect:Qt,useLayoutEffect:Qt,useMemo:Qt,useReducer:Qt,useRef:Qt,useState:Qt,useDebugValue:Qt,useDeferredValue:Qt,useTransition:Qt,useMutableSource:Qt,useSyncExternalStore:Qt,useId:Qt,unstable_isNewReconciler:!1},q2={readContext:sr,useCallback:function(t,e){return Lr().memoizedState=[t,e===void 0?null:e],t},useContext:sr,useEffect:k0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ih(4194308,4,o1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ih(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ih(4,2,t,e)},useMemo:function(t,e){var n=Lr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Lr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=$2.bind(null,ct,t),[r.memoizedState,t]},useRef:function(t){var e=Lr();return t={current:t},e.memoizedState=t},useState:C0,useDebugValue:o_,useDeferredValue:function(t){return Lr().memoizedState=t},useTransition:function(){var t=C0(!1),e=t[0];return t=B2.bind(null,t[1]),Lr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ct,s=Lr();if(nt){if(n===void 0)throw Error(W(407));n=n()}else{if(n=e(),jt===null)throw Error(W(349));Uo&30||JA(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,k0(e1.bind(null,r,i,t),[t]),r.flags|=2048,gu(9,ZA.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Lr(),e=jt.identifierPrefix;if(nt){var n=cs,r=ls;n=(r&~(1<<32-vr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=pu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=j2++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},H2={readContext:sr,useCallback:l1,useContext:sr,useEffect:i_,useImperativeHandle:a1,useInsertionEffect:s1,useLayoutEffect:i1,useMemo:c1,useReducer:Km,useRef:r1,useState:function(){return Km(mu)},useDebugValue:o_,useDeferredValue:function(t){var e=ir();return u1(e,Rt.memoizedState,t)},useTransition:function(){var t=Km(mu)[0],e=ir().memoizedState;return[t,e]},useMutableSource:YA,useSyncExternalStore:XA,useId:d1,unstable_isNewReconciler:!1},W2={readContext:sr,useCallback:l1,useContext:sr,useEffect:i_,useImperativeHandle:a1,useInsertionEffect:s1,useLayoutEffect:i1,useMemo:c1,useReducer:Gm,useRef:r1,useState:function(){return Gm(mu)},useDebugValue:o_,useDeferredValue:function(t){var e=ir();return Rt===null?e.memoizedState=t:u1(e,Rt.memoizedState,t)},useTransition:function(){var t=Gm(mu)[0],e=ir().memoizedState;return[t,e]},useMutableSource:YA,useSyncExternalStore:XA,useId:d1,unstable_isNewReconciler:!1};function ur(t,e){if(t&&t.defaultProps){e=ut({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ay(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ut({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var hp={isMounted:function(t){return(t=t._reactInternals)?Zo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=dn(),s=_i(t),i=hs(r,s);i.payload=e,n!=null&&(i.callback=n),e=yi(t,i,s),e!==null&&(_r(e,t,s,r),Eh(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=dn(),s=_i(t),i=hs(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=yi(t,i,s),e!==null&&(_r(e,t,s,r),Eh(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=dn(),r=_i(t),s=hs(n,r);s.tag=2,e!=null&&(s.callback=e),e=yi(t,s,r),e!==null&&(_r(e,t,r,n),Eh(e,t,r))}};function D0(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!lu(n,r)||!lu(s,i):!0}function m1(t,e,n){var r=!1,s=Pi,i=e.contextType;return typeof i=="object"&&i!==null?i=sr(i):(s=xn(e)?Mo:sn.current,r=e.contextTypes,i=(r=r!=null)?Ja(t,s):Pi),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=hp,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function N0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&hp.enqueueReplaceState(e,e.state,null)}function ly(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Jv(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=sr(i):(i=xn(e)?Mo:sn.current,s.context=Ja(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(ay(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&hp.enqueueReplaceState(s,s.state,null),af(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function nl(t,e){try{var n="",r=e;do n+=wN(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Qm(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function cy(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var K2=typeof WeakMap=="function"?WeakMap:Map;function g1(t,e,n){n=hs(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){hf||(hf=!0,_y=r),cy(t,e)},n}function y1(t,e,n){n=hs(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){cy(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){cy(t,e),typeof r!="function"&&(vi===null?vi=new Set([this]):vi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function O0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new K2;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=aO.bind(null,t,e,n),e.then(t,t))}function V0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function L0(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=hs(-1,1),e.tag=2,yi(n,e,1))),n.lanes|=1),t)}var G2=Ps.ReactCurrentOwner,Tn=!1;function cn(t,e,n,r){e.child=t===null?WA(e,null,n,r):el(e,t.child,n,r)}function M0(t,e,n,r,s){n=n.render;var i=e.ref;return La(e,s),r=r_(t,e,n,r,i,s),n=s_(),t!==null&&!Tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Es(t,e,s)):(nt&&n&&Hv(e),e.flags|=1,cn(t,e,r,s),e.child)}function F0(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!p_(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,v1(t,e,i,r,s)):(t=xh(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:lu,n(o,r)&&t.ref===e.ref)return Es(t,e,s)}return e.flags|=1,t=wi(i,r),t.ref=e.ref,t.return=e,e.child=t}function v1(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(lu(i,r)&&t.ref===e.ref)if(Tn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Tn=!0);else return e.lanes=t.lanes,Es(t,e,s)}return uy(t,e,n,r,s)}function _1(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ke(ka,Dn),Dn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ke(ka,Dn),Dn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ke(ka,Dn),Dn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ke(ka,Dn),Dn|=r;return cn(t,e,s,n),e.child}function w1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function uy(t,e,n,r,s){var i=xn(n)?Mo:sn.current;return i=Ja(e,i),La(e,s),n=r_(t,e,n,r,i,s),r=s_(),t!==null&&!Tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Es(t,e,s)):(nt&&r&&Hv(e),e.flags|=1,cn(t,e,n,s),e.child)}function U0(t,e,n,r,s){if(xn(n)){var i=!0;tf(e)}else i=!1;if(La(e,s),e.stateNode===null)Sh(t,e),m1(e,n,r),ly(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=sr(c):(c=xn(n)?Mo:sn.current,c=Ja(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&N0(e,o,r,c),Js=!1;var p=e.memoizedState;o.state=p,af(e,r,o,s),l=e.memoizedState,a!==r||p!==l||An.current||Js?(typeof d=="function"&&(ay(e,n,d,r),l=e.memoizedState),(a=Js||D0(e,n,a,r,p,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,GA(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:ur(e.type,a),o.props=c,h=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=sr(l):(l=xn(n)?Mo:sn.current,l=Ja(e,l));var f=n.getDerivedStateFromProps;(d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||p!==l)&&N0(e,o,r,l),Js=!1,p=e.memoizedState,o.state=p,af(e,r,o,s);var _=e.memoizedState;a!==h||p!==_||An.current||Js?(typeof f=="function"&&(ay(e,n,f,r),_=e.memoizedState),(c=Js||D0(e,n,c,r,p,_,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),o.props=r,o.state=_,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return dy(t,e,n,r,i,s)}function dy(t,e,n,r,s,i){w1(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&S0(e,n,!1),Es(t,e,i);r=e.stateNode,G2.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=el(e,t.child,null,i),e.child=el(e,null,a,i)):cn(t,e,a,i),e.memoizedState=r.state,s&&S0(e,n,!0),e.child}function E1(t){var e=t.stateNode;e.pendingContext?I0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&I0(t,e.context,!1),Zv(t,e.containerInfo)}function j0(t,e,n,r,s){return Za(),Kv(s),e.flags|=256,cn(t,e,n,r),e.child}var hy={dehydrated:null,treeContext:null,retryLane:0};function fy(t){return{baseLanes:t,cachePool:null,transitions:null}}function T1(t,e,n){var r=e.pendingProps,s=lt.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ke(lt,s&1),t===null)return iy(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=mp(o,r,0,null),t=Do(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=fy(n),e.memoizedState=hy,t):a_(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return Q2(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=wi(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=wi(a,i):(i=Do(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?fy(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=hy,r}return i=t.child,t=i.sibling,r=wi(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function a_(t,e){return e=mp({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Hd(t,e,n,r){return r!==null&&Kv(r),el(e,t.child,null,n),t=a_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Q2(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Qm(Error(W(422))),Hd(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=mp({mode:"visible",children:r.children},s,0,null),i=Do(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&el(e,t.child,null,o),e.child.memoizedState=fy(o),e.memoizedState=hy,i);if(!(e.mode&1))return Hd(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(W(419)),r=Qm(i,r,void 0),Hd(t,e,o,r)}if(a=(o&t.childLanes)!==0,Tn||a){if(r=jt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,ws(t,s),_r(r,t,s,-1))}return f_(),r=Qm(Error(W(421))),Hd(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=lO.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Fn=gi(s.nextSibling),Bn=e,nt=!0,gr=null,t!==null&&(Jn[Zn++]=ls,Jn[Zn++]=cs,Jn[Zn++]=Fo,ls=t.id,cs=t.overflow,Fo=e),e=a_(e,r.children),e.flags|=4096,e)}function B0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),oy(t.return,e,n)}function Ym(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function I1(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(cn(t,e,r.children,n),r=lt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&B0(t,n,e);else if(t.tag===19)B0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ke(lt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&lf(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Ym(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&lf(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Ym(e,!0,n,null,i);break;case"together":Ym(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Sh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Es(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),jo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(W(153));if(e.child!==null){for(t=e.child,n=wi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=wi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Y2(t,e,n){switch(e.tag){case 3:E1(e),Za();break;case 5:QA(e);break;case 1:xn(e.type)&&tf(e);break;case 4:Zv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ke(sf,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ke(lt,lt.current&1),e.flags|=128,null):n&e.child.childLanes?T1(t,e,n):(Ke(lt,lt.current&1),t=Es(t,e,n),t!==null?t.sibling:null);Ke(lt,lt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return I1(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ke(lt,lt.current),r)break;return null;case 22:case 23:return e.lanes=0,_1(t,e,n)}return Es(t,e,n)}var S1,py,b1,A1;S1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};py=function(){};b1=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Eo(Gr.current);var i=null;switch(n){case"input":s=Lg(t,s),r=Lg(t,r),i=[];break;case"select":s=ut({},s,{value:void 0}),r=ut({},r,{value:void 0}),i=[];break;case"textarea":s=Ug(t,s),r=Ug(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Zh)}Bg(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(tu.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(tu.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Je("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};A1=function(t,e,n,r){n!==r&&(e.flags|=4)};function hc(t,e){if(!nt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Yt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function X2(t,e,n){var r=e.pendingProps;switch(Wv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yt(e),null;case 1:return xn(e.type)&&ef(),Yt(e),null;case 3:return r=e.stateNode,tl(),Ze(An),Ze(sn),t_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(zd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,gr!==null&&(Ty(gr),gr=null))),py(t,e),Yt(e),null;case 5:e_(e);var s=Eo(fu.current);if(n=e.type,t!==null&&e.stateNode!=null)b1(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(W(166));return Yt(e),null}if(t=Eo(Gr.current),zd(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[$r]=e,r[du]=i,t=(e.mode&1)!==0,n){case"dialog":Je("cancel",r),Je("close",r);break;case"iframe":case"object":case"embed":Je("load",r);break;case"video":case"audio":for(s=0;s<bc.length;s++)Je(bc[s],r);break;case"source":Je("error",r);break;case"img":case"image":case"link":Je("error",r),Je("load",r);break;case"details":Je("toggle",r);break;case"input":YE(r,i),Je("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Je("invalid",r);break;case"textarea":JE(r,i),Je("invalid",r)}Bg(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&$d(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&$d(r.textContent,a,t),s=["children",""+a]):tu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Je("scroll",r)}switch(n){case"input":Od(r),XE(r,i,!0);break;case"textarea":Od(r),ZE(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Zh)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=eA(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[$r]=e,t[du]=r,S1(t,e,!1,!1),e.stateNode=t;e:{switch(o=$g(n,r),n){case"dialog":Je("cancel",t),Je("close",t),s=r;break;case"iframe":case"object":case"embed":Je("load",t),s=r;break;case"video":case"audio":for(s=0;s<bc.length;s++)Je(bc[s],t);s=r;break;case"source":Je("error",t),s=r;break;case"img":case"image":case"link":Je("error",t),Je("load",t),s=r;break;case"details":Je("toggle",t),s=r;break;case"input":YE(t,r),s=Lg(t,r),Je("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=ut({},r,{value:void 0}),Je("invalid",t);break;case"textarea":JE(t,r),s=Ug(t,r),Je("invalid",t);break;default:s=r}Bg(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?rA(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&tA(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&nu(t,l):typeof l=="number"&&nu(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(tu.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Je("scroll",t):l!=null&&kv(t,i,l,o))}switch(n){case"input":Od(t),XE(t,r,!1);break;case"textarea":Od(t),ZE(t);break;case"option":r.value!=null&&t.setAttribute("value",""+xi(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Da(t,!!r.multiple,i,!1):r.defaultValue!=null&&Da(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Zh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Yt(e),null;case 6:if(t&&e.stateNode!=null)A1(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(W(166));if(n=Eo(fu.current),Eo(Gr.current),zd(e)){if(r=e.stateNode,n=e.memoizedProps,r[$r]=e,(i=r.nodeValue!==n)&&(t=Bn,t!==null))switch(t.tag){case 3:$d(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&$d(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[$r]=e,e.stateNode=r}return Yt(e),null;case 13:if(Ze(lt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(nt&&Fn!==null&&e.mode&1&&!(e.flags&128))qA(),Za(),e.flags|=98560,i=!1;else if(i=zd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(W(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(W(317));i[$r]=e}else Za(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Yt(e),i=!1}else gr!==null&&(Ty(gr),gr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||lt.current&1?kt===0&&(kt=3):f_())),e.updateQueue!==null&&(e.flags|=4),Yt(e),null);case 4:return tl(),py(t,e),t===null&&cu(e.stateNode.containerInfo),Yt(e),null;case 10:return Yv(e.type._context),Yt(e),null;case 17:return xn(e.type)&&ef(),Yt(e),null;case 19:if(Ze(lt),i=e.memoizedState,i===null)return Yt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)hc(i,!1);else{if(kt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=lf(t),o!==null){for(e.flags|=128,hc(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ke(lt,lt.current&1|2),e.child}t=t.sibling}i.tail!==null&&yt()>rl&&(e.flags|=128,r=!0,hc(i,!1),e.lanes=4194304)}else{if(!r)if(t=lf(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),hc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!nt)return Yt(e),null}else 2*yt()-i.renderingStartTime>rl&&n!==1073741824&&(e.flags|=128,r=!0,hc(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=yt(),e.sibling=null,n=lt.current,Ke(lt,r?n&1|2:n&1),e):(Yt(e),null);case 22:case 23:return h_(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Dn&1073741824&&(Yt(e),e.subtreeFlags&6&&(e.flags|=8192)):Yt(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function J2(t,e){switch(Wv(e),e.tag){case 1:return xn(e.type)&&ef(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return tl(),Ze(An),Ze(sn),t_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return e_(e),null;case 13:if(Ze(lt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(W(340));Za()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ze(lt),null;case 4:return tl(),null;case 10:return Yv(e.type._context),null;case 22:case 23:return h_(),null;case 24:return null;default:return null}}var Wd=!1,en=!1,Z2=typeof WeakSet=="function"?WeakSet:Set,ee=null;function Ca(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){pt(t,e,r)}else n.current=null}function my(t,e,n){try{n()}catch(r){pt(t,e,r)}}var $0=!1;function eO(t,e){if(Jg=Yh,t=kA(),qv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,p=null;t:for(;;){for(var f;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(f=h.firstChild)!==null;)p=h,h=f;for(;;){if(h===t)break t;if(p===n&&++c===s&&(a=o),p===i&&++d===r&&(l=o),(f=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Zg={focusedElem:t,selectionRange:n},Yh=!1,ee=e;ee!==null;)if(e=ee,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ee=t;else for(;ee!==null;){e=ee;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var y=_.memoizedProps,E=_.memoizedState,w=e.stateNode,v=w.getSnapshotBeforeUpdate(e.elementType===e.type?y:ur(e.type,y),E);w.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(D){pt(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,ee=t;break}ee=e.return}return _=$0,$0=!1,_}function Fc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&my(e,n,i)}s=s.next}while(s!==r)}}function fp(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function gy(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function x1(t){var e=t.alternate;e!==null&&(t.alternate=null,x1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[$r],delete e[du],delete e[ny],delete e[L2],delete e[M2])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function P1(t){return t.tag===5||t.tag===3||t.tag===4}function z0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||P1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function yy(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Zh));else if(r!==4&&(t=t.child,t!==null))for(yy(t,e,n),t=t.sibling;t!==null;)yy(t,e,n),t=t.sibling}function vy(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(vy(t,e,n),t=t.sibling;t!==null;)vy(t,e,n),t=t.sibling}var $t=null,pr=!1;function zs(t,e,n){for(n=n.child;n!==null;)R1(t,e,n),n=n.sibling}function R1(t,e,n){if(Kr&&typeof Kr.onCommitFiberUnmount=="function")try{Kr.onCommitFiberUnmount(ip,n)}catch{}switch(n.tag){case 5:en||Ca(n,e);case 6:var r=$t,s=pr;$t=null,zs(t,e,n),$t=r,pr=s,$t!==null&&(pr?(t=$t,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):$t.removeChild(n.stateNode));break;case 18:$t!==null&&(pr?(t=$t,n=n.stateNode,t.nodeType===8?zm(t.parentNode,n):t.nodeType===1&&zm(t,n),ou(t)):zm($t,n.stateNode));break;case 4:r=$t,s=pr,$t=n.stateNode.containerInfo,pr=!0,zs(t,e,n),$t=r,pr=s;break;case 0:case 11:case 14:case 15:if(!en&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&my(n,e,o),s=s.next}while(s!==r)}zs(t,e,n);break;case 1:if(!en&&(Ca(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){pt(n,e,a)}zs(t,e,n);break;case 21:zs(t,e,n);break;case 22:n.mode&1?(en=(r=en)||n.memoizedState!==null,zs(t,e,n),en=r):zs(t,e,n);break;default:zs(t,e,n)}}function q0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Z2),e.forEach(function(r){var s=cO.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function lr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:$t=a.stateNode,pr=!1;break e;case 3:$t=a.stateNode.containerInfo,pr=!0;break e;case 4:$t=a.stateNode.containerInfo,pr=!0;break e}a=a.return}if($t===null)throw Error(W(160));R1(i,o,s),$t=null,pr=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){pt(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)C1(e,t),e=e.sibling}function C1(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(lr(e,t),Vr(t),r&4){try{Fc(3,t,t.return),fp(3,t)}catch(y){pt(t,t.return,y)}try{Fc(5,t,t.return)}catch(y){pt(t,t.return,y)}}break;case 1:lr(e,t),Vr(t),r&512&&n!==null&&Ca(n,n.return);break;case 5:if(lr(e,t),Vr(t),r&512&&n!==null&&Ca(n,n.return),t.flags&32){var s=t.stateNode;try{nu(s,"")}catch(y){pt(t,t.return,y)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Jb(s,i),$g(a,o);var c=$g(a,i);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?rA(s,h):d==="dangerouslySetInnerHTML"?tA(s,h):d==="children"?nu(s,h):kv(s,d,h,c)}switch(a){case"input":Mg(s,i);break;case"textarea":Zb(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?Da(s,!!i.multiple,f,!1):p!==!!i.multiple&&(i.defaultValue!=null?Da(s,!!i.multiple,i.defaultValue,!0):Da(s,!!i.multiple,i.multiple?[]:"",!1))}s[du]=i}catch(y){pt(t,t.return,y)}}break;case 6:if(lr(e,t),Vr(t),r&4){if(t.stateNode===null)throw Error(W(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(y){pt(t,t.return,y)}}break;case 3:if(lr(e,t),Vr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ou(e.containerInfo)}catch(y){pt(t,t.return,y)}break;case 4:lr(e,t),Vr(t);break;case 13:lr(e,t),Vr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(u_=yt())),r&4&&q0(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(en=(c=en)||d,lr(e,t),en=c):lr(e,t),Vr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(ee=t,d=t.child;d!==null;){for(h=ee=d;ee!==null;){switch(p=ee,f=p.child,p.tag){case 0:case 11:case 14:case 15:Fc(4,p,p.return);break;case 1:Ca(p,p.return);var _=p.stateNode;if(typeof _.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(y){pt(r,n,y)}}break;case 5:Ca(p,p.return);break;case 22:if(p.memoizedState!==null){W0(h);continue}}f!==null?(f.return=p,ee=f):W0(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=nA("display",o))}catch(y){pt(t,t.return,y)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(y){pt(t,t.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:lr(e,t),Vr(t),r&4&&q0(t);break;case 21:break;default:lr(e,t),Vr(t)}}function Vr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(P1(n)){var r=n;break e}n=n.return}throw Error(W(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(nu(s,""),r.flags&=-33);var i=z0(t);vy(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=z0(t);yy(t,a,o);break;default:throw Error(W(161))}}catch(l){pt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function tO(t,e,n){ee=t,k1(t)}function k1(t,e,n){for(var r=(t.mode&1)!==0;ee!==null;){var s=ee,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Wd;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||en;a=Wd;var c=en;if(Wd=o,(en=l)&&!c)for(ee=s;ee!==null;)o=ee,l=o.child,o.tag===22&&o.memoizedState!==null?K0(s):l!==null?(l.return=o,ee=l):K0(s);for(;i!==null;)ee=i,k1(i),i=i.sibling;ee=s,Wd=a,en=c}H0(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ee=i):H0(t)}}function H0(t){for(;ee!==null;){var e=ee;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:en||fp(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!en)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:ur(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&R0(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}R0(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&ou(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}en||e.flags&512&&gy(e)}catch(p){pt(e,e.return,p)}}if(e===t){ee=null;break}if(n=e.sibling,n!==null){n.return=e.return,ee=n;break}ee=e.return}}function W0(t){for(;ee!==null;){var e=ee;if(e===t){ee=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ee=n;break}ee=e.return}}function K0(t){for(;ee!==null;){var e=ee;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{fp(4,e)}catch(l){pt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){pt(e,s,l)}}var i=e.return;try{gy(e)}catch(l){pt(e,i,l)}break;case 5:var o=e.return;try{gy(e)}catch(l){pt(e,o,l)}}}catch(l){pt(e,e.return,l)}if(e===t){ee=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ee=a;break}ee=e.return}}var nO=Math.ceil,df=Ps.ReactCurrentDispatcher,l_=Ps.ReactCurrentOwner,tr=Ps.ReactCurrentBatchConfig,Me=0,jt=null,bt=null,qt=0,Dn=0,ka=Hi(0),kt=0,yu=null,jo=0,pp=0,c_=0,Uc=null,En=null,u_=0,rl=1/0,ss=null,hf=!1,_y=null,vi=null,Kd=!1,ui=null,ff=0,jc=0,wy=null,bh=-1,Ah=0;function dn(){return Me&6?yt():bh!==-1?bh:bh=yt()}function _i(t){return t.mode&1?Me&2&&qt!==0?qt&-qt:U2.transition!==null?(Ah===0&&(Ah=mA()),Ah):(t=$e,t!==0||(t=window.event,t=t===void 0?16:TA(t.type)),t):1}function _r(t,e,n,r){if(50<jc)throw jc=0,wy=null,Error(W(185));Wu(t,n,r),(!(Me&2)||t!==jt)&&(t===jt&&(!(Me&2)&&(pp|=n),kt===4&&ti(t,qt)),Pn(t,r),n===1&&Me===0&&!(e.mode&1)&&(rl=yt()+500,up&&Wi()))}function Pn(t,e){var n=t.callbackNode;UN(t,e);var r=Qh(t,t===jt?qt:0);if(r===0)n!==null&&n0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&n0(n),e===1)t.tag===0?F2(G0.bind(null,t)):BA(G0.bind(null,t)),O2(function(){!(Me&6)&&Wi()}),n=null;else{switch(gA(r)){case 1:n=Lv;break;case 4:n=fA;break;case 16:n=Gh;break;case 536870912:n=pA;break;default:n=Gh}n=U1(n,D1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function D1(t,e){if(bh=-1,Ah=0,Me&6)throw Error(W(327));var n=t.callbackNode;if(Ma()&&t.callbackNode!==n)return null;var r=Qh(t,t===jt?qt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=pf(t,r);else{e=r;var s=Me;Me|=2;var i=O1();(jt!==t||qt!==e)&&(ss=null,rl=yt()+500,ko(t,e));do try{iO();break}catch(a){N1(t,a)}while(!0);Qv(),df.current=i,Me=s,bt!==null?e=0:(jt=null,qt=0,e=kt)}if(e!==0){if(e===2&&(s=Kg(t),s!==0&&(r=s,e=Ey(t,s))),e===1)throw n=yu,ko(t,0),ti(t,r),Pn(t,yt()),n;if(e===6)ti(t,r);else{if(s=t.current.alternate,!(r&30)&&!rO(s)&&(e=pf(t,r),e===2&&(i=Kg(t),i!==0&&(r=i,e=Ey(t,i))),e===1))throw n=yu,ko(t,0),ti(t,r),Pn(t,yt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(W(345));case 2:lo(t,En,ss);break;case 3:if(ti(t,r),(r&130023424)===r&&(e=u_+500-yt(),10<e)){if(Qh(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){dn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=ty(lo.bind(null,t,En,ss),e);break}lo(t,En,ss);break;case 4:if(ti(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-vr(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=yt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*nO(r/1960))-r,10<r){t.timeoutHandle=ty(lo.bind(null,t,En,ss),r);break}lo(t,En,ss);break;case 5:lo(t,En,ss);break;default:throw Error(W(329))}}}return Pn(t,yt()),t.callbackNode===n?D1.bind(null,t):null}function Ey(t,e){var n=Uc;return t.current.memoizedState.isDehydrated&&(ko(t,e).flags|=256),t=pf(t,e),t!==2&&(e=En,En=n,e!==null&&Ty(e)),t}function Ty(t){En===null?En=t:En.push.apply(En,t)}function rO(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Tr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ti(t,e){for(e&=~c_,e&=~pp,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-vr(e),r=1<<n;t[n]=-1,e&=~r}}function G0(t){if(Me&6)throw Error(W(327));Ma();var e=Qh(t,0);if(!(e&1))return Pn(t,yt()),null;var n=pf(t,e);if(t.tag!==0&&n===2){var r=Kg(t);r!==0&&(e=r,n=Ey(t,r))}if(n===1)throw n=yu,ko(t,0),ti(t,e),Pn(t,yt()),n;if(n===6)throw Error(W(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,lo(t,En,ss),Pn(t,yt()),null}function d_(t,e){var n=Me;Me|=1;try{return t(e)}finally{Me=n,Me===0&&(rl=yt()+500,up&&Wi())}}function Bo(t){ui!==null&&ui.tag===0&&!(Me&6)&&Ma();var e=Me;Me|=1;var n=tr.transition,r=$e;try{if(tr.transition=null,$e=1,t)return t()}finally{$e=r,tr.transition=n,Me=e,!(Me&6)&&Wi()}}function h_(){Dn=ka.current,Ze(ka)}function ko(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,N2(n)),bt!==null)for(n=bt.return;n!==null;){var r=n;switch(Wv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ef();break;case 3:tl(),Ze(An),Ze(sn),t_();break;case 5:e_(r);break;case 4:tl();break;case 13:Ze(lt);break;case 19:Ze(lt);break;case 10:Yv(r.type._context);break;case 22:case 23:h_()}n=n.return}if(jt=t,bt=t=wi(t.current,null),qt=Dn=e,kt=0,yu=null,c_=pp=jo=0,En=Uc=null,wo!==null){for(e=0;e<wo.length;e++)if(n=wo[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}wo=null}return t}function N1(t,e){do{var n=bt;try{if(Qv(),Th.current=uf,cf){for(var r=ct.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}cf=!1}if(Uo=0,Ut=Rt=ct=null,Mc=!1,pu=0,l_.current=null,n===null||n.return===null){kt=1,yu=e,bt=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=qt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=V0(o);if(f!==null){f.flags&=-257,L0(f,o,a,i,e),f.mode&1&&O0(i,c,e),e=f,l=c;var _=e.updateQueue;if(_===null){var y=new Set;y.add(l),e.updateQueue=y}else _.add(l);break e}else{if(!(e&1)){O0(i,c,e),f_();break e}l=Error(W(426))}}else if(nt&&a.mode&1){var E=V0(o);if(E!==null){!(E.flags&65536)&&(E.flags|=256),L0(E,o,a,i,e),Kv(nl(l,a));break e}}i=l=nl(l,a),kt!==4&&(kt=2),Uc===null?Uc=[i]:Uc.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=g1(i,l,e);P0(i,w);break e;case 1:a=l;var v=i.type,I=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(vi===null||!vi.has(I)))){i.flags|=65536,e&=-e,i.lanes|=e;var D=y1(i,a,e);P0(i,D);break e}}i=i.return}while(i!==null)}L1(n)}catch(O){e=O,bt===n&&n!==null&&(bt=n=n.return);continue}break}while(!0)}function O1(){var t=df.current;return df.current=uf,t===null?uf:t}function f_(){(kt===0||kt===3||kt===2)&&(kt=4),jt===null||!(jo&268435455)&&!(pp&268435455)||ti(jt,qt)}function pf(t,e){var n=Me;Me|=2;var r=O1();(jt!==t||qt!==e)&&(ss=null,ko(t,e));do try{sO();break}catch(s){N1(t,s)}while(!0);if(Qv(),Me=n,df.current=r,bt!==null)throw Error(W(261));return jt=null,qt=0,kt}function sO(){for(;bt!==null;)V1(bt)}function iO(){for(;bt!==null&&!CN();)V1(bt)}function V1(t){var e=F1(t.alternate,t,Dn);t.memoizedProps=t.pendingProps,e===null?L1(t):bt=e,l_.current=null}function L1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=J2(n,e),n!==null){n.flags&=32767,bt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{kt=6,bt=null;return}}else if(n=X2(n,e,Dn),n!==null){bt=n;return}if(e=e.sibling,e!==null){bt=e;return}bt=e=t}while(e!==null);kt===0&&(kt=5)}function lo(t,e,n){var r=$e,s=tr.transition;try{tr.transition=null,$e=1,oO(t,e,n,r)}finally{tr.transition=s,$e=r}return null}function oO(t,e,n,r){do Ma();while(ui!==null);if(Me&6)throw Error(W(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(W(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(jN(t,i),t===jt&&(bt=jt=null,qt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Kd||(Kd=!0,U1(Gh,function(){return Ma(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=tr.transition,tr.transition=null;var o=$e;$e=1;var a=Me;Me|=4,l_.current=null,eO(t,n),C1(n,t),A2(Zg),Yh=!!Jg,Zg=Jg=null,t.current=n,tO(n),kN(),Me=a,$e=o,tr.transition=i}else t.current=n;if(Kd&&(Kd=!1,ui=t,ff=s),i=t.pendingLanes,i===0&&(vi=null),ON(n.stateNode),Pn(t,yt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(hf)throw hf=!1,t=_y,_y=null,t;return ff&1&&t.tag!==0&&Ma(),i=t.pendingLanes,i&1?t===wy?jc++:(jc=0,wy=t):jc=0,Wi(),null}function Ma(){if(ui!==null){var t=gA(ff),e=tr.transition,n=$e;try{if(tr.transition=null,$e=16>t?16:t,ui===null)var r=!1;else{if(t=ui,ui=null,ff=0,Me&6)throw Error(W(331));var s=Me;for(Me|=4,ee=t.current;ee!==null;){var i=ee,o=i.child;if(ee.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ee=c;ee!==null;){var d=ee;switch(d.tag){case 0:case 11:case 15:Fc(8,d,i)}var h=d.child;if(h!==null)h.return=d,ee=h;else for(;ee!==null;){d=ee;var p=d.sibling,f=d.return;if(x1(d),d===c){ee=null;break}if(p!==null){p.return=f,ee=p;break}ee=f}}}var _=i.alternate;if(_!==null){var y=_.child;if(y!==null){_.child=null;do{var E=y.sibling;y.sibling=null,y=E}while(y!==null)}}ee=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ee=o;else e:for(;ee!==null;){if(i=ee,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Fc(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,ee=w;break e}ee=i.return}}var v=t.current;for(ee=v;ee!==null;){o=ee;var I=o.child;if(o.subtreeFlags&2064&&I!==null)I.return=o,ee=I;else e:for(o=v;ee!==null;){if(a=ee,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:fp(9,a)}}catch(O){pt(a,a.return,O)}if(a===o){ee=null;break e}var D=a.sibling;if(D!==null){D.return=a.return,ee=D;break e}ee=a.return}}if(Me=s,Wi(),Kr&&typeof Kr.onPostCommitFiberRoot=="function")try{Kr.onPostCommitFiberRoot(ip,t)}catch{}r=!0}return r}finally{$e=n,tr.transition=e}}return!1}function Q0(t,e,n){e=nl(n,e),e=g1(t,e,1),t=yi(t,e,1),e=dn(),t!==null&&(Wu(t,1,e),Pn(t,e))}function pt(t,e,n){if(t.tag===3)Q0(t,t,n);else for(;e!==null;){if(e.tag===3){Q0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(vi===null||!vi.has(r))){t=nl(n,t),t=y1(e,t,1),e=yi(e,t,1),t=dn(),e!==null&&(Wu(e,1,t),Pn(e,t));break}}e=e.return}}function aO(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=dn(),t.pingedLanes|=t.suspendedLanes&n,jt===t&&(qt&n)===n&&(kt===4||kt===3&&(qt&130023424)===qt&&500>yt()-u_?ko(t,0):c_|=n),Pn(t,e)}function M1(t,e){e===0&&(t.mode&1?(e=Md,Md<<=1,!(Md&130023424)&&(Md=4194304)):e=1);var n=dn();t=ws(t,e),t!==null&&(Wu(t,e,n),Pn(t,n))}function lO(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),M1(t,n)}function cO(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(W(314))}r!==null&&r.delete(e),M1(t,n)}var F1;F1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||An.current)Tn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Tn=!1,Y2(t,e,n);Tn=!!(t.flags&131072)}else Tn=!1,nt&&e.flags&1048576&&$A(e,rf,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Sh(t,e),t=e.pendingProps;var s=Ja(e,sn.current);La(e,n),s=r_(null,e,r,t,s,n);var i=s_();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,xn(r)?(i=!0,tf(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Jv(e),s.updater=hp,e.stateNode=s,s._reactInternals=e,ly(e,r,t,n),e=dy(null,e,r,!0,i,n)):(e.tag=0,nt&&i&&Hv(e),cn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Sh(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=dO(r),t=ur(r,t),s){case 0:e=uy(null,e,r,t,n);break e;case 1:e=U0(null,e,r,t,n);break e;case 11:e=M0(null,e,r,t,n);break e;case 14:e=F0(null,e,r,ur(r.type,t),n);break e}throw Error(W(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ur(r,s),uy(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ur(r,s),U0(t,e,r,s,n);case 3:e:{if(E1(e),t===null)throw Error(W(387));r=e.pendingProps,i=e.memoizedState,s=i.element,GA(t,e),af(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=nl(Error(W(423)),e),e=j0(t,e,r,n,s);break e}else if(r!==s){s=nl(Error(W(424)),e),e=j0(t,e,r,n,s);break e}else for(Fn=gi(e.stateNode.containerInfo.firstChild),Bn=e,nt=!0,gr=null,n=WA(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Za(),r===s){e=Es(t,e,n);break e}cn(t,e,r,n)}e=e.child}return e;case 5:return QA(e),t===null&&iy(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,ey(r,s)?o=null:i!==null&&ey(r,i)&&(e.flags|=32),w1(t,e),cn(t,e,o,n),e.child;case 6:return t===null&&iy(e),null;case 13:return T1(t,e,n);case 4:return Zv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=el(e,null,r,n):cn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ur(r,s),M0(t,e,r,s,n);case 7:return cn(t,e,e.pendingProps,n),e.child;case 8:return cn(t,e,e.pendingProps.children,n),e.child;case 12:return cn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ke(sf,r._currentValue),r._currentValue=o,i!==null)if(Tr(i.value,o)){if(i.children===s.children&&!An.current){e=Es(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=hs(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),oy(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(W(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),oy(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}cn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,La(e,n),s=sr(s),r=r(s),e.flags|=1,cn(t,e,r,n),e.child;case 14:return r=e.type,s=ur(r,e.pendingProps),s=ur(r.type,s),F0(t,e,r,s,n);case 15:return v1(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ur(r,s),Sh(t,e),e.tag=1,xn(r)?(t=!0,tf(e)):t=!1,La(e,n),m1(e,r,s),ly(e,r,s,n),dy(null,e,r,!0,t,n);case 19:return I1(t,e,n);case 22:return _1(t,e,n)}throw Error(W(156,e.tag))};function U1(t,e){return hA(t,e)}function uO(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function er(t,e,n,r){return new uO(t,e,n,r)}function p_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function dO(t){if(typeof t=="function")return p_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Nv)return 11;if(t===Ov)return 14}return 2}function wi(t,e){var n=t.alternate;return n===null?(n=er(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function xh(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")p_(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ea:return Do(n.children,s,i,e);case Dv:o=8,s|=8;break;case Dg:return t=er(12,n,e,s|2),t.elementType=Dg,t.lanes=i,t;case Ng:return t=er(13,n,e,s),t.elementType=Ng,t.lanes=i,t;case Og:return t=er(19,n,e,s),t.elementType=Og,t.lanes=i,t;case Qb:return mp(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Kb:o=10;break e;case Gb:o=9;break e;case Nv:o=11;break e;case Ov:o=14;break e;case Xs:o=16,r=null;break e}throw Error(W(130,t==null?t:typeof t,""))}return e=er(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Do(t,e,n,r){return t=er(7,t,r,e),t.lanes=n,t}function mp(t,e,n,r){return t=er(22,t,r,e),t.elementType=Qb,t.lanes=n,t.stateNode={isHidden:!1},t}function Xm(t,e,n){return t=er(6,t,null,e),t.lanes=n,t}function Jm(t,e,n){return e=er(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function hO(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Dm(0),this.expirationTimes=Dm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dm(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function m_(t,e,n,r,s,i,o,a,l){return t=new hO(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=er(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jv(i),t}function fO(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function j1(t){if(!t)return Pi;t=t._reactInternals;e:{if(Zo(t)!==t||t.tag!==1)throw Error(W(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(xn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(t.tag===1){var n=t.type;if(xn(n))return jA(t,n,e)}return e}function B1(t,e,n,r,s,i,o,a,l){return t=m_(n,r,!0,t,s,i,o,a,l),t.context=j1(null),n=t.current,r=dn(),s=_i(n),i=hs(r,s),i.callback=e??null,yi(n,i,s),t.current.lanes=s,Wu(t,s,r),Pn(t,r),t}function gp(t,e,n,r){var s=e.current,i=dn(),o=_i(s);return n=j1(n),e.context===null?e.context=n:e.pendingContext=n,e=hs(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=yi(s,e,o),t!==null&&(_r(t,s,o,i),Eh(t,s,o)),o}function mf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Y0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function g_(t,e){Y0(t,e),(t=t.alternate)&&Y0(t,e)}function pO(){return null}var $1=typeof reportError=="function"?reportError:function(t){console.error(t)};function y_(t){this._internalRoot=t}yp.prototype.render=y_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(W(409));gp(t,e,null,null)};yp.prototype.unmount=y_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Bo(function(){gp(null,t,null,null)}),e[_s]=null}};function yp(t){this._internalRoot=t}yp.prototype.unstable_scheduleHydration=function(t){if(t){var e=_A();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ei.length&&e!==0&&e<ei[n].priority;n++);ei.splice(n,0,t),n===0&&EA(t)}};function v_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function vp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function X0(){}function mO(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=mf(o);i.call(c)}}var o=B1(e,r,t,0,null,!1,!1,"",X0);return t._reactRootContainer=o,t[_s]=o.current,cu(t.nodeType===8?t.parentNode:t),Bo(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=mf(l);a.call(c)}}var l=m_(t,0,!1,null,null,!1,!1,"",X0);return t._reactRootContainer=l,t[_s]=l.current,cu(t.nodeType===8?t.parentNode:t),Bo(function(){gp(e,l,n,r)}),l}function _p(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=mf(o);a.call(l)}}gp(e,o,t,s)}else o=mO(n,e,t,s,r);return mf(o)}yA=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Sc(e.pendingLanes);n!==0&&(Mv(e,n|1),Pn(e,yt()),!(Me&6)&&(rl=yt()+500,Wi()))}break;case 13:Bo(function(){var r=ws(t,1);if(r!==null){var s=dn();_r(r,t,1,s)}}),g_(t,1)}};Fv=function(t){if(t.tag===13){var e=ws(t,134217728);if(e!==null){var n=dn();_r(e,t,134217728,n)}g_(t,134217728)}};vA=function(t){if(t.tag===13){var e=_i(t),n=ws(t,e);if(n!==null){var r=dn();_r(n,t,e,r)}g_(t,e)}};_A=function(){return $e};wA=function(t,e){var n=$e;try{return $e=t,e()}finally{$e=n}};qg=function(t,e,n){switch(e){case"input":if(Mg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=cp(r);if(!s)throw Error(W(90));Xb(r),Mg(r,s)}}}break;case"textarea":Zb(t,n);break;case"select":e=n.value,e!=null&&Da(t,!!n.multiple,e,!1)}};oA=d_;aA=Bo;var gO={usingClientEntryPoint:!1,Events:[Gu,ba,cp,sA,iA,d_]},fc={findFiberByHostInstance:_o,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},yO={bundleType:fc.bundleType,version:fc.version,rendererPackageName:fc.rendererPackageName,rendererConfig:fc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ps.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=uA(t),t===null?null:t.stateNode},findFiberByHostInstance:fc.findFiberByHostInstance||pO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gd.isDisabled&&Gd.supportsFiber)try{ip=Gd.inject(yO),Kr=Gd}catch{}}Wn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gO;Wn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v_(e))throw Error(W(200));return fO(t,e,null,n)};Wn.createRoot=function(t,e){if(!v_(t))throw Error(W(299));var n=!1,r="",s=$1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=m_(t,1,!1,null,null,n,!1,r,s),t[_s]=e.current,cu(t.nodeType===8?t.parentNode:t),new y_(e)};Wn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(W(188)):(t=Object.keys(t).join(","),Error(W(268,t)));return t=uA(e),t=t===null?null:t.stateNode,t};Wn.flushSync=function(t){return Bo(t)};Wn.hydrate=function(t,e,n){if(!vp(e))throw Error(W(200));return _p(null,t,e,!0,n)};Wn.hydrateRoot=function(t,e,n){if(!v_(t))throw Error(W(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=$1;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=B1(e,null,t,1,n??null,s,!1,i,o),t[_s]=e.current,cu(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new yp(e)};Wn.render=function(t,e,n){if(!vp(e))throw Error(W(200));return _p(null,t,e,!1,n)};Wn.unmountComponentAtNode=function(t){if(!vp(t))throw Error(W(40));return t._reactRootContainer?(Bo(function(){_p(null,null,t,!1,function(){t._reactRootContainer=null,t[_s]=null})}),!0):!1};Wn.unstable_batchedUpdates=d_;Wn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!vp(n))throw Error(W(200));if(t==null||t._reactInternals===void 0)throw Error(W(38));return _p(t,e,n,!1,r)};Wn.version="18.3.1-next-f1338f8080-20240426";function z1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(z1)}catch(t){console.error(t)}}z1(),zb.exports=Wn;var Yu=zb.exports;const q1=Cb(Yu);var H1,J0=Yu;H1=J0.createRoot,J0.hydrateRoot;const vO="modulepreload",_O=function(t,e){return new URL(t,e).href},Z0={},Oe=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=_O(c,r),c in Z0)return;Z0[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(!!r)for(let _=o.length-1;_>=0;_--){const y=o[_];if(y.href===c&&(!d||y.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${h}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":vO,d||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),d)return new Promise((_,y)=>{f.addEventListener("load",_),f.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},wO=1,EO=1e6;let Zm=0;function TO(){return Zm=(Zm+1)%Number.MAX_SAFE_INTEGER,Zm.toString()}const eg=new Map,eT=t=>{if(eg.has(t))return;const e=setTimeout(()=>{eg.delete(t),Bc({type:"REMOVE_TOAST",toastId:t})},EO);eg.set(t,e)},IO=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,wO)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?eT(n):t.toasts.forEach(r=>{eT(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Ph=[];let Rh={toasts:[]};function Bc(t){Rh=IO(Rh,t),Ph.forEach(e=>{e(Rh)})}function SO({...t}){const e=TO(),n=s=>Bc({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>Bc({type:"DISMISS_TOAST",toastId:e});return Bc({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function W1(){const[t,e]=A.useState(Rh);return A.useEffect(()=>(Ph.push(e),()=>{const n=Ph.indexOf(e);n>-1&&Ph.splice(n,1)}),[t]),{...t,toast:SO,dismiss:n=>Bc({type:"DISMISS_TOAST",toastId:n})}}function Ct(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function tT(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function K1(...t){return e=>{let n=!1;const r=t.map(s=>{const i=tT(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():tT(t[s],null)}}}}function Ir(...t){return A.useCallback(K1(...t),t)}function g8(t,e){const n=A.createContext(e),r=i=>{const{children:o,...a}=i,l=A.useMemo(()=>a,Object.values(a));return x.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function s(i){const o=A.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function wp(t,e=[]){let n=[];function r(i,o){const a=A.createContext(o),l=n.length;n=[...n,o];const c=h=>{var w;const{scope:p,children:f,..._}=h,y=((w=p==null?void 0:p[t])==null?void 0:w[l])||a,E=A.useMemo(()=>_,Object.values(_));return x.jsx(y.Provider,{value:E,children:f})};c.displayName=i+"Provider";function d(h,p){var y;const f=((y=p==null?void 0:p[t])==null?void 0:y[l])||a,_=A.useContext(f);if(_)return _;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[c,d]}const s=()=>{const i=n.map(o=>A.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return A.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,bO(s,...e)]}function bO(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(i)[`__scope${c}`];return{...a,...h}},{});return A.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function gf(t){const e=xO(t),n=A.forwardRef((r,s)=>{const{children:i,...o}=r,a=A.Children.toArray(i),l=a.find(RO);if(l){const c=l.props.children,d=a.map(h=>h===l?A.Children.count(c)>1?A.Children.only(null):A.isValidElement(c)?c.props.children:null:h);return x.jsx(e,{...o,ref:s,children:A.isValidElement(c)?A.cloneElement(c,void 0,d):null})}return x.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var AO=gf("Slot");function xO(t){const e=A.forwardRef((n,r)=>{const{children:s,...i}=n;if(A.isValidElement(s)){const o=kO(s),a=CO(i,s.props);return s.type!==A.Fragment&&(a.ref=r?K1(r,o):o),A.cloneElement(s,a)}return A.Children.count(s)>1?A.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var G1=Symbol("radix.slottable");function PO(t){const e=({children:n})=>x.jsx(x.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=G1,e}function RO(t){return A.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===G1}function CO(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{const l=i(...a);return s(...a),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function kO(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function DO(t){const e=t+"CollectionProvider",[n,r]=wp(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=y=>{const{scope:E,children:w}=y,v=z.useRef(null),I=z.useRef(new Map).current;return x.jsx(s,{scope:E,itemMap:I,collectionRef:v,children:w})};o.displayName=e;const a=t+"CollectionSlot",l=gf(a),c=z.forwardRef((y,E)=>{const{scope:w,children:v}=y,I=i(a,w),D=Ir(E,I.collectionRef);return x.jsx(l,{ref:D,children:v})});c.displayName=a;const d=t+"CollectionItemSlot",h="data-radix-collection-item",p=gf(d),f=z.forwardRef((y,E)=>{const{scope:w,children:v,...I}=y,D=z.useRef(null),O=Ir(E,D),V=i(d,w);return z.useEffect(()=>(V.itemMap.set(D,{ref:D,...I}),()=>void V.itemMap.delete(D))),x.jsx(p,{[h]:"",ref:O,children:v})});f.displayName=d;function _(y){const E=i(t+"CollectionConsumer",y);return z.useCallback(()=>{const v=E.collectionRef.current;if(!v)return[];const I=Array.from(v.querySelectorAll(`[${h}]`));return Array.from(E.itemMap.values()).sort((V,S)=>I.indexOf(V.ref.current)-I.indexOf(S.ref.current))},[E.collectionRef,E.itemMap])}return[{Provider:o,Slot:c,ItemSlot:f},_,r]}var NO=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Rn=NO.reduce((t,e)=>{const n=gf(`Primitive.${e}`),r=A.forwardRef((s,i)=>{const{asChild:o,...a}=s,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),x.jsx(l,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function Q1(t,e){t&&Yu.flushSync(()=>t.dispatchEvent(e))}function Ri(t){const e=A.useRef(t);return A.useEffect(()=>{e.current=t}),A.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function OO(t,e=globalThis==null?void 0:globalThis.document){const n=Ri(t);A.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var VO="DismissableLayer",Iy="dismissableLayer.update",LO="dismissableLayer.pointerDownOutside",MO="dismissableLayer.focusOutside",nT,Y1=A.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),__=A.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=t,c=A.useContext(Y1),[d,h]=A.useState(null),p=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,f]=A.useState({}),_=Ir(e,S=>h(S)),y=Array.from(c.layers),[E]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),w=y.indexOf(E),v=d?y.indexOf(d):-1,I=c.layersWithOutsidePointerEventsDisabled.size>0,D=v>=w,O=UO(S=>{const T=S.target,b=[...c.branches].some(k=>k.contains(T));!D||b||(s==null||s(S),o==null||o(S),S.defaultPrevented||a==null||a())},p),V=jO(S=>{const T=S.target;[...c.branches].some(k=>k.contains(T))||(i==null||i(S),o==null||o(S),S.defaultPrevented||a==null||a())},p);return OO(S=>{v===c.layers.size-1&&(r==null||r(S),!S.defaultPrevented&&a&&(S.preventDefault(),a()))},p),A.useEffect(()=>{if(d)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(nT=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),rT(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=nT)}},[d,p,n,c]),A.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),rT())},[d,c]),A.useEffect(()=>{const S=()=>f({});return document.addEventListener(Iy,S),()=>document.removeEventListener(Iy,S)},[]),x.jsx(Rn.div,{...l,ref:_,style:{pointerEvents:I?D?"auto":"none":void 0,...t.style},onFocusCapture:Ct(t.onFocusCapture,V.onFocusCapture),onBlurCapture:Ct(t.onBlurCapture,V.onBlurCapture),onPointerDownCapture:Ct(t.onPointerDownCapture,O.onPointerDownCapture)})});__.displayName=VO;var FO="DismissableLayerBranch",X1=A.forwardRef((t,e)=>{const n=A.useContext(Y1),r=A.useRef(null),s=Ir(e,r);return A.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),x.jsx(Rn.div,{...t,ref:s})});X1.displayName=FO;function UO(t,e=globalThis==null?void 0:globalThis.document){const n=Ri(t),r=A.useRef(!1),s=A.useRef(()=>{});return A.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){J1(LO,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function jO(t,e=globalThis==null?void 0:globalThis.document){const n=Ri(t),r=A.useRef(!1);return A.useEffect(()=>{const s=i=>{i.target&&!r.current&&J1(MO,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function rT(){const t=new CustomEvent(Iy);document.dispatchEvent(t)}function J1(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Q1(s,i):s.dispatchEvent(i)}var BO=__,$O=X1,Ci=globalThis!=null&&globalThis.document?A.useLayoutEffect:()=>{},zO="Portal",Z1=A.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,i]=A.useState(!1);Ci(()=>i(!0),[]);const o=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?q1.createPortal(x.jsx(Rn.div,{...r,ref:e}),o):null});Z1.displayName=zO;function qO(t,e){return A.useReducer((n,r)=>e[n][r]??n,t)}var w_=t=>{const{present:e,children:n}=t,r=HO(e),s=typeof n=="function"?n({present:r.isPresent}):A.Children.only(n),i=Ir(r.ref,WO(s));return typeof n=="function"||r.isPresent?A.cloneElement(s,{ref:i}):null};w_.displayName="Presence";function HO(t){const[e,n]=A.useState(),r=A.useRef(null),s=A.useRef(t),i=A.useRef("none"),o=t?"mounted":"unmounted",[a,l]=qO(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return A.useEffect(()=>{const c=Qd(r.current);i.current=a==="mounted"?c:"none"},[a]),Ci(()=>{const c=r.current,d=s.current;if(d!==t){const p=i.current,f=Qd(c);t?l("MOUNT"):f==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(d&&p!==f?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),Ci(()=>{if(e){let c;const d=e.ownerDocument.defaultView??window,h=f=>{const y=Qd(r.current).includes(CSS.escape(f.animationName));if(f.target===e&&y&&(l("ANIMATION_END"),!s.current)){const E=e.style.animationFillMode;e.style.animationFillMode="forwards",c=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=E)})}},p=f=>{f.target===e&&(i.current=Qd(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(c),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:A.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function Qd(t){return(t==null?void 0:t.animationName)||"none"}function WO(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var KO=Bb[" useInsertionEffect ".trim().toString()]||Ci;function GO({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,o]=QO({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:s;{const d=A.useRef(t!==void 0);A.useEffect(()=>{const h=d.current;h!==a&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=a},[a,r])}const c=A.useCallback(d=>{var h;if(a){const p=YO(d)?d(t):d;p!==t&&((h=o.current)==null||h.call(o,p))}else i(d)},[a,t,i,o]);return[l,c]}function QO({defaultProp:t,onChange:e}){const[n,r]=A.useState(t),s=A.useRef(n),i=A.useRef(e);return KO(()=>{i.current=e},[e]),A.useEffect(()=>{var o;s.current!==n&&((o=i.current)==null||o.call(i,n),s.current=n)},[n,s]),[n,r,i]}function YO(t){return typeof t=="function"}var XO=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),JO="VisuallyHidden",Ep=A.forwardRef((t,e)=>x.jsx(Rn.span,{...t,ref:e,style:{...XO,...t.style}}));Ep.displayName=JO;var ZO=Ep,E_="ToastProvider",[T_,eV,tV]=DO("Toast"),[ex]=wp("Toast",[tV]),[nV,Tp]=ex(E_),tx=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[a,l]=A.useState(null),[c,d]=A.useState(0),h=A.useRef(!1),p=A.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${E_}\`. Expected non-empty \`string\`.`),x.jsx(T_.Provider,{scope:e,children:x.jsx(nV,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:A.useCallback(()=>d(f=>f+1),[]),onToastRemove:A.useCallback(()=>d(f=>f-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:p,children:o})})};tx.displayName=E_;var nx="ToastViewport",rV=["F8"],Sy="toast.viewportPause",by="toast.viewportResume",rx=A.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=rV,label:s="Notifications ({hotkey})",...i}=t,o=Tp(nx,n),a=eV(n),l=A.useRef(null),c=A.useRef(null),d=A.useRef(null),h=A.useRef(null),p=Ir(e,h,o.onViewportChange),f=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),_=o.toastCount>0;A.useEffect(()=>{const E=w=>{var I;r.length!==0&&r.every(D=>w[D]||w.code===D)&&((I=h.current)==null||I.focus())};return document.addEventListener("keydown",E),()=>document.removeEventListener("keydown",E)},[r]),A.useEffect(()=>{const E=l.current,w=h.current;if(_&&E&&w){const v=()=>{if(!o.isClosePausedRef.current){const V=new CustomEvent(Sy);w.dispatchEvent(V),o.isClosePausedRef.current=!0}},I=()=>{if(o.isClosePausedRef.current){const V=new CustomEvent(by);w.dispatchEvent(V),o.isClosePausedRef.current=!1}},D=V=>{!E.contains(V.relatedTarget)&&I()},O=()=>{E.contains(document.activeElement)||I()};return E.addEventListener("focusin",v),E.addEventListener("focusout",D),E.addEventListener("pointermove",v),E.addEventListener("pointerleave",O),window.addEventListener("blur",v),window.addEventListener("focus",I),()=>{E.removeEventListener("focusin",v),E.removeEventListener("focusout",D),E.removeEventListener("pointermove",v),E.removeEventListener("pointerleave",O),window.removeEventListener("blur",v),window.removeEventListener("focus",I)}}},[_,o.isClosePausedRef]);const y=A.useCallback(({tabbingDirection:E})=>{const v=a().map(I=>{const D=I.ref.current,O=[D,...gV(D)];return E==="forwards"?O:O.reverse()});return(E==="forwards"?v.reverse():v).flat()},[a]);return A.useEffect(()=>{const E=h.current;if(E){const w=v=>{var O,V,S;const I=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!I){const T=document.activeElement,b=v.shiftKey;if(v.target===E&&b){(O=c.current)==null||O.focus();return}const N=y({tabbingDirection:b?"backwards":"forwards"}),C=N.findIndex(q=>q===T);tg(N.slice(C+1))?v.preventDefault():b?(V=c.current)==null||V.focus():(S=d.current)==null||S.focus()}};return E.addEventListener("keydown",w),()=>E.removeEventListener("keydown",w)}},[a,y]),x.jsxs($O,{ref:l,role:"region","aria-label":s.replace("{hotkey}",f),tabIndex:-1,style:{pointerEvents:_?void 0:"none"},children:[_&&x.jsx(Ay,{ref:c,onFocusFromOutsideViewport:()=>{const E=y({tabbingDirection:"forwards"});tg(E)}}),x.jsx(T_.Slot,{scope:n,children:x.jsx(Rn.ol,{tabIndex:-1,...i,ref:p})}),_&&x.jsx(Ay,{ref:d,onFocusFromOutsideViewport:()=>{const E=y({tabbingDirection:"backwards"});tg(E)}})]})});rx.displayName=nx;var sx="ToastFocusProxy",Ay=A.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=Tp(sx,n);return x.jsx(Ep,{tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=i.viewport)!=null&&c.contains(a))&&r()}})});Ay.displayName=sx;var Xu="Toast",sV="toast.swipeStart",iV="toast.swipeMove",oV="toast.swipeCancel",aV="toast.swipeEnd",ix=A.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[a,l]=GO({prop:r,defaultProp:s??!0,onChange:i,caller:Xu});return x.jsx(w_,{present:n||a,children:x.jsx(uV,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:Ri(t.onPause),onResume:Ri(t.onResume),onSwipeStart:Ct(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Ct(t.onSwipeMove,c=>{const{x:d,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Ct(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Ct(t.onSwipeEnd,c=>{const{x:d,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),l(!1)})})})});ix.displayName=Xu;var[lV,cV]=ex(Xu,{onClose(){}}),uV=A.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:p,onSwipeEnd:f,..._}=t,y=Tp(Xu,n),[E,w]=A.useState(null),v=Ir(e,q=>w(q)),I=A.useRef(null),D=A.useRef(null),O=s||y.duration,V=A.useRef(0),S=A.useRef(O),T=A.useRef(0),{onToastAdd:b,onToastRemove:k}=y,P=Ri(()=>{var Z;(E==null?void 0:E.contains(document.activeElement))&&((Z=y.viewport)==null||Z.focus()),o()}),N=A.useCallback(q=>{!q||q===1/0||(window.clearTimeout(T.current),V.current=new Date().getTime(),T.current=window.setTimeout(P,q))},[P]);A.useEffect(()=>{const q=y.viewport;if(q){const Z=()=>{N(S.current),c==null||c()},ie=()=>{const G=new Date().getTime()-V.current;S.current=S.current-G,window.clearTimeout(T.current),l==null||l()};return q.addEventListener(Sy,ie),q.addEventListener(by,Z),()=>{q.removeEventListener(Sy,ie),q.removeEventListener(by,Z)}}},[y.viewport,O,l,c,N]),A.useEffect(()=>{i&&!y.isClosePausedRef.current&&N(O)},[i,O,y.isClosePausedRef,N]),A.useEffect(()=>(b(),()=>k()),[b,k]);const C=A.useMemo(()=>E?hx(E):null,[E]);return y.viewport?x.jsxs(x.Fragment,{children:[C&&x.jsx(dV,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:C}),x.jsx(lV,{scope:n,onClose:P,children:Yu.createPortal(x.jsx(T_.ItemSlot,{scope:n,children:x.jsx(BO,{asChild:!0,onEscapeKeyDown:Ct(a,()=>{y.isFocusedToastEscapeKeyDownRef.current||P(),y.isFocusedToastEscapeKeyDownRef.current=!1}),children:x.jsx(Rn.li,{tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":y.swipeDirection,..._,ref:v,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Ct(t.onKeyDown,q=>{q.key==="Escape"&&(a==null||a(q.nativeEvent),q.nativeEvent.defaultPrevented||(y.isFocusedToastEscapeKeyDownRef.current=!0,P()))}),onPointerDown:Ct(t.onPointerDown,q=>{q.button===0&&(I.current={x:q.clientX,y:q.clientY})}),onPointerMove:Ct(t.onPointerMove,q=>{if(!I.current)return;const Z=q.clientX-I.current.x,ie=q.clientY-I.current.y,G=!!D.current,F=["left","right"].includes(y.swipeDirection),U=["left","up"].includes(y.swipeDirection)?Math.min:Math.max,Y=F?U(0,Z):0,de=F?0:U(0,ie),ne=q.pointerType==="touch"?10:2,ce={x:Y,y:de},le={originalEvent:q,delta:ce};G?(D.current=ce,Yd(iV,h,le,{discrete:!1})):sT(ce,y.swipeDirection,ne)?(D.current=ce,Yd(sV,d,le,{discrete:!1}),q.target.setPointerCapture(q.pointerId)):(Math.abs(Z)>ne||Math.abs(ie)>ne)&&(I.current=null)}),onPointerUp:Ct(t.onPointerUp,q=>{const Z=D.current,ie=q.target;if(ie.hasPointerCapture(q.pointerId)&&ie.releasePointerCapture(q.pointerId),D.current=null,I.current=null,Z){const G=q.currentTarget,F={originalEvent:q,delta:Z};sT(Z,y.swipeDirection,y.swipeThreshold)?Yd(aV,f,F,{discrete:!0}):Yd(oV,p,F,{discrete:!0}),G.addEventListener("click",U=>U.preventDefault(),{once:!0})}})})})}),y.viewport)})]}):null}),dV=t=>{const{__scopeToast:e,children:n,...r}=t,s=Tp(Xu,e),[i,o]=A.useState(!1),[a,l]=A.useState(!1);return pV(()=>o(!0)),A.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:x.jsx(Z1,{asChild:!0,children:x.jsx(Ep,{...r,children:i&&x.jsxs(x.Fragment,{children:[s.label," ",n]})})})},hV="ToastTitle",ox=A.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return x.jsx(Rn.div,{...r,ref:e})});ox.displayName=hV;var fV="ToastDescription",ax=A.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return x.jsx(Rn.div,{...r,ref:e})});ax.displayName=fV;var lx="ToastAction",cx=A.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?x.jsx(dx,{altText:n,asChild:!0,children:x.jsx(I_,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${lx}\`. Expected non-empty \`string\`.`),null)});cx.displayName=lx;var ux="ToastClose",I_=A.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=cV(ux,n);return x.jsx(dx,{asChild:!0,children:x.jsx(Rn.button,{type:"button",...r,ref:e,onClick:Ct(t.onClick,s.onClose)})})});I_.displayName=ux;var dx=A.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return x.jsx(Rn.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function hx(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),mV(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...hx(r))}}),e}function Yd(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Q1(s,i):s.dispatchEvent(i)}var sT=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function pV(t=()=>{}){const e=Ri(t);Ci(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function mV(t){return t.nodeType===t.ELEMENT_NODE}function gV(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function tg(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var yV=tx,fx=rx,px=ix,mx=ox,gx=ax,yx=cx,vx=I_;function _x(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=_x(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function wx(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=_x(t))&&(r&&(r+=" "),r+=e);return r}const iT=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,oT=wx,Ex=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return oT(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const d=n==null?void 0:n[c],h=i==null?void 0:i[c];if(d===null)return null;const p=iT(d)||iT(h);return s[c][p]}),a=n&&Object.entries(n).reduce((c,d)=>{let[h,p]=d;return p===void 0||(c[h]=p),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,d)=>{let{class:h,className:p,...f}=d;return Object.entries(f).every(_=>{let[y,E]=_;return Array.isArray(E)?E.includes({...i,...a}[y]):{...i,...a}[y]===E})?[...c,h,p]:c},[]);return oT(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vV=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Tx=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var _V={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wV=A.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},l)=>A.createElement("svg",{ref:l,..._V,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:Tx("lucide",s),...a},[...o.map(([c,d])=>A.createElement(c,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=(t,e)=>{const n=A.forwardRef(({className:r,...s},i)=>A.createElement(wV,{ref:i,iconNode:e,className:Tx(`lucide-${vV(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EV=ot("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TV=ot("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IV=ot("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SV=ot("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bV=ot("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AV=ot("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xV=ot("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PV=ot("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RV=ot("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CV=ot("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aT=ot("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lT=ot("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kV=ot("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DV=ot("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cT=ot("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ng=ot("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ix=ot("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uT=ot("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NV=ot("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OV=ot("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VV=ot("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LV=ot("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MV=ot("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sx=ot("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),S_="-",FV=t=>{const e=jV(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(S_);return a[0]===""&&a.length!==1&&a.shift(),bx(a,e)||UV(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},bx=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?bx(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(S_);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},dT=/^\[(.+)\]$/,UV=t=>{if(dT.test(t)){const e=dT.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},jV=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return $V(Object.entries(t.classGroups),n).forEach(([i,o])=>{xy(o,r,i,e)}),r},xy=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:hT(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(BV(s)){xy(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{xy(o,hT(e,i),n,r)})})},hT=(t,e)=>{let n=t;return e.split(S_).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},BV=t=>t.isThemeGetter,$V=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[n,s]}):t,zV=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},Ax="!",qV=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=a=>{const l=[];let c=0,d=0,h;for(let E=0;E<a.length;E++){let w=a[E];if(c===0){if(w===s&&(r||a.slice(E,E+i)===e)){l.push(a.slice(d,E)),d=E+i;continue}if(w==="/"){h=E;continue}}w==="["?c++:w==="]"&&c--}const p=l.length===0?a:a.substring(d),f=p.startsWith(Ax),_=f?p.substring(1):p,y=h&&h>d?h-d:void 0;return{modifiers:l,hasImportantModifier:f,baseClassName:_,maybePostfixModifierPosition:y}};return n?a=>n({className:a,parseClassName:o}):o},HV=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},WV=t=>({cache:zV(t.cacheSize),parseClassName:qV(t),...FV(t)}),KV=/\s+/,GV=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(KV);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:d,hasImportantModifier:h,baseClassName:p,maybePostfixModifierPosition:f}=n(c);let _=!!f,y=r(_?p.substring(0,f):p);if(!y){if(!_){a=c+(a.length>0?" "+a:a);continue}if(y=r(p),!y){a=c+(a.length>0?" "+a:a);continue}_=!1}const E=HV(d).join(":"),w=h?E+Ax:E,v=w+y;if(i.includes(v))continue;i.push(v);const I=s(y,_);for(let D=0;D<I.length;++D){const O=I[D];i.push(w+O)}a=c+(a.length>0?" "+a:a)}return a};function QV(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=xx(e))&&(r&&(r+=" "),r+=n);return r}const xx=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=xx(t[r]))&&(n&&(n+=" "),n+=e);return n};function YV(t,...e){let n,r,s,i=o;function o(l){const c=e.reduce((d,h)=>h(d),t());return n=WV(c),r=n.cache.get,s=n.cache.set,i=a,a(l)}function a(l){const c=r(l);if(c)return c;const d=GV(l,n);return s(l,d),d}return function(){return i(QV.apply(null,arguments))}}const Xe=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},Px=/^\[(?:([a-z-]+):)?(.+)\]$/i,XV=/^\d+\/\d+$/,JV=new Set(["px","full","screen"]),ZV=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,eL=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,tL=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,nL=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,rL=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ns=t=>Fa(t)||JV.has(t)||XV.test(t),qs=t=>Cl(t,"length",dL),Fa=t=>!!t&&!Number.isNaN(Number(t)),rg=t=>Cl(t,"number",Fa),pc=t=>!!t&&Number.isInteger(Number(t)),sL=t=>t.endsWith("%")&&Fa(t.slice(0,-1)),_e=t=>Px.test(t),Hs=t=>ZV.test(t),iL=new Set(["length","size","percentage"]),oL=t=>Cl(t,iL,Rx),aL=t=>Cl(t,"position",Rx),lL=new Set(["image","url"]),cL=t=>Cl(t,lL,fL),uL=t=>Cl(t,"",hL),mc=()=>!0,Cl=(t,e,n)=>{const r=Px.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},dL=t=>eL.test(t)&&!tL.test(t),Rx=()=>!1,hL=t=>nL.test(t),fL=t=>rL.test(t),pL=()=>{const t=Xe("colors"),e=Xe("spacing"),n=Xe("blur"),r=Xe("brightness"),s=Xe("borderColor"),i=Xe("borderRadius"),o=Xe("borderSpacing"),a=Xe("borderWidth"),l=Xe("contrast"),c=Xe("grayscale"),d=Xe("hueRotate"),h=Xe("invert"),p=Xe("gap"),f=Xe("gradientColorStops"),_=Xe("gradientColorStopPositions"),y=Xe("inset"),E=Xe("margin"),w=Xe("opacity"),v=Xe("padding"),I=Xe("saturate"),D=Xe("scale"),O=Xe("sepia"),V=Xe("skew"),S=Xe("space"),T=Xe("translate"),b=()=>["auto","contain","none"],k=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto",_e,e],N=()=>[_e,e],C=()=>["",ns,qs],q=()=>["auto",Fa,_e],Z=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ie=()=>["solid","dashed","dotted","double","none"],G=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],F=()=>["start","end","center","between","around","evenly","stretch"],U=()=>["","0",_e],Y=()=>["auto","avoid","all","avoid-page","page","left","right","column"],de=()=>[Fa,_e];return{cacheSize:500,separator:":",theme:{colors:[mc],spacing:[ns,qs],blur:["none","",Hs,_e],brightness:de(),borderColor:[t],borderRadius:["none","","full",Hs,_e],borderSpacing:N(),borderWidth:C(),contrast:de(),grayscale:U(),hueRotate:de(),invert:U(),gap:N(),gradientColorStops:[t],gradientColorStopPositions:[sL,qs],inset:P(),margin:P(),opacity:de(),padding:N(),saturate:de(),scale:de(),sepia:U(),skew:de(),space:N(),translate:N()},classGroups:{aspect:[{aspect:["auto","square","video",_e]}],container:["container"],columns:[{columns:[Hs]}],"break-after":[{"break-after":Y()}],"break-before":[{"break-before":Y()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Z(),_e]}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:b()}],"overscroll-x":[{"overscroll-x":b()}],"overscroll-y":[{"overscroll-y":b()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",pc,_e]}],basis:[{basis:P()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",_e]}],grow:[{grow:U()}],shrink:[{shrink:U()}],order:[{order:["first","last","none",pc,_e]}],"grid-cols":[{"grid-cols":[mc]}],"col-start-end":[{col:["auto",{span:["full",pc,_e]},_e]}],"col-start":[{"col-start":q()}],"col-end":[{"col-end":q()}],"grid-rows":[{"grid-rows":[mc]}],"row-start-end":[{row:["auto",{span:[pc,_e]},_e]}],"row-start":[{"row-start":q()}],"row-end":[{"row-end":q()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",_e]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",_e]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...F()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...F(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...F(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[E]}],mx:[{mx:[E]}],my:[{my:[E]}],ms:[{ms:[E]}],me:[{me:[E]}],mt:[{mt:[E]}],mr:[{mr:[E]}],mb:[{mb:[E]}],ml:[{ml:[E]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",_e,e]}],"min-w":[{"min-w":[_e,e,"min","max","fit"]}],"max-w":[{"max-w":[_e,e,"none","full","min","max","fit","prose",{screen:[Hs]},Hs]}],h:[{h:[_e,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[_e,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[_e,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[_e,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Hs,qs]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",rg]}],"font-family":[{font:[mc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",_e]}],"line-clamp":[{"line-clamp":["none",Fa,rg]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ns,_e]}],"list-image":[{"list-image":["none",_e]}],"list-style-type":[{list:["none","disc","decimal",_e]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ie(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ns,qs]}],"underline-offset":[{"underline-offset":["auto",ns,_e]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",_e]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",_e]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Z(),aL]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",oL]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},cL]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[_]}],"gradient-via-pos":[{via:[_]}],"gradient-to-pos":[{to:[_]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...ie(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:ie()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...ie()]}],"outline-offset":[{"outline-offset":[ns,_e]}],"outline-w":[{outline:[ns,qs]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:C()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[ns,qs]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Hs,uL]}],"shadow-color":[{shadow:[mc]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":[...G(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":G()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Hs,_e]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[I]}],sepia:[{sepia:[O]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[I]}],"backdrop-sepia":[{"backdrop-sepia":[O]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",_e]}],duration:[{duration:de()}],ease:[{ease:["linear","in","out","in-out",_e]}],delay:[{delay:de()}],animate:[{animate:["none","spin","ping","pulse","bounce",_e]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[D]}],"scale-x":[{"scale-x":[D]}],"scale-y":[{"scale-y":[D]}],rotate:[{rotate:[pc,_e]}],"translate-x":[{"translate-x":[T]}],"translate-y":[{"translate-y":[T]}],"skew-x":[{"skew-x":[V]}],"skew-y":[{"skew-y":[V]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",_e]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",_e]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",_e]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[ns,qs,rg]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},mL=YV(pL);function Rs(...t){return mL(wx(t))}const gL=yV,Cx=A.forwardRef(({className:t,...e},n)=>x.jsx(fx,{ref:n,className:Rs("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));Cx.displayName=fx.displayName;const yL=Ex("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),kx=A.forwardRef(({className:t,variant:e,...n},r)=>x.jsx(px,{ref:r,className:Rs(yL({variant:e}),t),...n}));kx.displayName=px.displayName;const vL=A.forwardRef(({className:t,...e},n)=>x.jsx(yx,{ref:n,className:Rs("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));vL.displayName=yx.displayName;const Dx=A.forwardRef(({className:t,...e},n)=>x.jsx(vx,{ref:n,className:Rs("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:x.jsx(Sx,{className:"h-4 w-4"})}));Dx.displayName=vx.displayName;const Nx=A.forwardRef(({className:t,...e},n)=>x.jsx(mx,{ref:n,className:Rs("text-sm font-semibold",t),...e}));Nx.displayName=mx.displayName;const Ox=A.forwardRef(({className:t,...e},n)=>x.jsx(gx,{ref:n,className:Rs("text-sm opacity-90",t),...e}));Ox.displayName=gx.displayName;function _L(){const{toasts:t}=W1();return x.jsxs(gL,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return x.jsxs(kx,{...i,children:[x.jsxs("div",{className:"grid gap-1",children:[n&&x.jsx(Nx,{children:n}),r&&x.jsx(Ox,{children:r})]}),s,x.jsx(Dx,{})]},e)}),x.jsx(Cx,{})]})}var yf=["light","dark"],b_="(prefers-color-scheme: dark)",wL=typeof window>"u",A_=A.createContext(void 0),EL={setTheme:t=>{},themes:[]},Vx=()=>{var t;return(t=A.useContext(A_))!=null?t:EL},TL=t=>A.useContext(A_)?t.children:A.createElement(SL,{...t}),IL=["light","dark"],SL=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:n=!0,enableColorScheme:r=!0,storageKey:s="theme",themes:i=IL,defaultTheme:o=n?"system":"light",attribute:a="data-theme",value:l,children:c,nonce:d})=>{let[h,p]=A.useState(()=>fT(s,o)),[f,_]=A.useState(()=>fT(s)),y=l?Object.values(l):i,E=A.useCallback(D=>{let O=D;if(!O)return;D==="system"&&n&&(O=pT());let V=l?l[O]:O,S=e?AL():null,T=document.documentElement;if(a==="class"?(T.classList.remove(...y),V&&T.classList.add(V)):V?T.setAttribute(a,V):T.removeAttribute(a),r){let b=yf.includes(o)?o:null,k=yf.includes(O)?O:b;T.style.colorScheme=k}S==null||S()},[]),w=A.useCallback(D=>{let O=typeof D=="function"?D(D):D;p(O);try{localStorage.setItem(s,O)}catch{}},[t]),v=A.useCallback(D=>{let O=pT(D);_(O),h==="system"&&n&&!t&&E("system")},[h,t]);A.useEffect(()=>{let D=window.matchMedia(b_);return D.addListener(v),v(D),()=>D.removeListener(v)},[v]),A.useEffect(()=>{let D=O=>{if(O.key!==s)return;let V=O.newValue||o;w(V)};return window.addEventListener("storage",D),()=>window.removeEventListener("storage",D)},[w]),A.useEffect(()=>{E(t??h)},[t,h]);let I=A.useMemo(()=>({theme:h,setTheme:w,forcedTheme:t,resolvedTheme:h==="system"?f:h,themes:n?[...i,"system"]:i,systemTheme:n?f:void 0}),[h,w,t,f,n,i]);return A.createElement(A_.Provider,{value:I},A.createElement(bL,{forcedTheme:t,disableTransitionOnChange:e,enableSystem:n,enableColorScheme:r,storageKey:s,themes:i,defaultTheme:o,attribute:a,value:l,children:c,attrs:y,nonce:d}),c)},bL=A.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:o,attrs:a,nonce:l})=>{let c=i==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(_=>`'${_}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=s?yf.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",p=(_,y=!1,E=!0)=>{let w=o?o[_]:_,v=y?_+"|| ''":`'${w}'`,I="";return s&&E&&!y&&yf.includes(_)&&(I+=`d.style.colorScheme = '${_}';`),n==="class"?y||w?I+=`c.add(${v})`:I+="null":w&&(I+=`d[s](n,${v})`),I},f=t?`!function(){${d}${p(t)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${c})){var t='${b_}',m=window.matchMedia(t);if(m.media!==t||m.matches){${p("dark")}}else{${p("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${p(o?"x[e]":"e",!0)}}${c?"":"else{"+p(i,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${p(o?"x[e]":"e",!0)}}else{${p(i,!1,!1)};}${h}}catch(t){}}();`;return A.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:f}})}),fT=(t,e)=>{if(wL)return;let n;try{n=localStorage.getItem(t)||void 0}catch{}return n||e},AL=()=>{let t=document.createElement("style");return t.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},pT=t=>(t||(t=window.matchMedia(b_)),t.matches?"dark":"light"),xL=t=>{switch(t){case"success":return CL;case"info":return DL;case"warning":return kL;case"error":return NL;default:return null}},PL=Array(12).fill(0),RL=({visible:t,className:e})=>z.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},z.createElement("div",{className:"sonner-spinner"},PL.map((n,r)=>z.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),CL=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),kL=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),DL=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),NL=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),OL=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},z.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),z.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),VL=()=>{let[t,e]=z.useState(document.hidden);return z.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},Py=1,LL=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;let{message:r,...s}=e,i=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:Py++,o=this.toasts.find(l=>l.id===i),a=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...e,id:i,title:r}),{...l,...e,id:i,dismissible:a,title:r}):l):this.addToast({title:r,...s,dismissible:a,id:i}),i},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),this.subscribers.forEach(n=>n({id:e,dismiss:!0})),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));let s=e instanceof Promise?e:e(),i=r!==void 0,o,a=s.then(async c=>{if(o=["resolve",c],z.isValidElement(c))i=!1,this.create({id:r,type:"default",message:c});else if(FL(c)&&!c.ok){i=!1;let d=typeof n.error=="function"?await n.error(`HTTP error! status: ${c.status}`):n.error,h=typeof n.description=="function"?await n.description(`HTTP error! status: ${c.status}`):n.description;this.create({id:r,type:"error",message:d,description:h})}else if(n.success!==void 0){i=!1;let d=typeof n.success=="function"?await n.success(c):n.success,h=typeof n.description=="function"?await n.description(c):n.description;this.create({id:r,type:"success",message:d,description:h})}}).catch(async c=>{if(o=["reject",c],n.error!==void 0){i=!1;let d=typeof n.error=="function"?await n.error(c):n.error,h=typeof n.description=="function"?await n.description(c):n.description;this.create({id:r,type:"error",message:d,description:h})}}).finally(()=>{var c;i&&(this.dismiss(r),r=void 0),(c=n.finally)==null||c.call(n)}),l=()=>new Promise((c,d)=>a.then(()=>o[0]==="reject"?d(o[1]):c(o[1])).catch(d));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,n)=>{let r=(n==null?void 0:n.id)||Py++;return this.create({jsx:e(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},_n=new LL,ML=(t,e)=>{let n=(e==null?void 0:e.id)||Py++;return _n.addToast({title:t,...e,id:n}),n},FL=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",UL=ML,jL=()=>_n.toasts,BL=()=>_n.getActiveToasts(),It=Object.assign(UL,{success:_n.success,info:_n.info,warning:_n.warning,error:_n.error,custom:_n.custom,message:_n.message,promise:_n.promise,dismiss:_n.dismiss,loading:_n.loading},{getHistory:jL,getToasts:BL});function $L(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}$L(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Xd(t){return t.label!==void 0}var zL=3,qL="32px",HL="16px",mT=4e3,WL=356,KL=14,GL=20,QL=200;function cr(...t){return t.filter(Boolean).join(" ")}function YL(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var XL=t=>{var e,n,r,s,i,o,a,l,c,d,h;let{invert:p,toast:f,unstyled:_,interacting:y,setHeights:E,visibleToasts:w,heights:v,index:I,toasts:D,expanded:O,removeToast:V,defaultRichColors:S,closeButton:T,style:b,cancelButtonStyle:k,actionButtonStyle:P,className:N="",descriptionClassName:C="",duration:q,position:Z,gap:ie,loadingIcon:G,expandByDefault:F,classNames:U,icons:Y,closeButtonAriaLabel:de="Close toast",pauseWhenPageIsHidden:ne}=t,[ce,le]=z.useState(null),[we,Qe]=z.useState(null),[ae,me]=z.useState(!1),[Se,Et]=z.useState(!1),[Nt,Kt]=z.useState(!1),[Bt,gn]=z.useState(!1),[Pr,ge]=z.useState(!1),[Gn,Vs]=z.useState(0),[at,Ot]=z.useState(0),Rr=z.useRef(f.duration||q||mT),vd=z.useRef(null),Cr=z.useRef(null),um=I===0,eo=I+1<=w,on=f.type,es=f.dismissible!==!1,Wl=f.className||"",dm=f.descriptionClassName||"",na=z.useMemo(()=>v.findIndex(he=>he.toastId===f.id)||0,[v,f.id]),_d=z.useMemo(()=>{var he;return(he=f.closeButton)!=null?he:T},[f.closeButton,T]),Kl=z.useMemo(()=>f.duration||q||mT,[f.duration,q]),ts=z.useRef(0),kr=z.useRef(0),ra=z.useRef(0),yn=z.useRef(null),[wd,sa]=Z.split("-"),Gl=z.useMemo(()=>v.reduce((he,Ue,We)=>We>=na?he:he+Ue.height,0),[v,na]),Ls=VL(),Ed=f.invert||p,xt=on==="loading";kr.current=z.useMemo(()=>na*ie+Gl,[na,Gl]),z.useEffect(()=>{Rr.current=Kl},[Kl]),z.useEffect(()=>{me(!0)},[]),z.useEffect(()=>{let he=Cr.current;if(he){let Ue=he.getBoundingClientRect().height;return Ot(Ue),E(We=>[{toastId:f.id,height:Ue,position:f.position},...We]),()=>E(We=>We.filter(Vt=>Vt.toastId!==f.id))}},[E,f.id]),z.useLayoutEffect(()=>{if(!ae)return;let he=Cr.current,Ue=he.style.height;he.style.height="auto";let We=he.getBoundingClientRect().height;he.style.height=Ue,Ot(We),E(Vt=>Vt.find(Cn=>Cn.toastId===f.id)?Vt.map(Cn=>Cn.toastId===f.id?{...Cn,height:We}:Cn):[{toastId:f.id,height:We,position:f.position},...Vt])},[ae,f.title,f.description,E,f.id]);let or=z.useCallback(()=>{Et(!0),Vs(kr.current),E(he=>he.filter(Ue=>Ue.toastId!==f.id)),setTimeout(()=>{V(f)},QL)},[f,V,E,kr]);z.useEffect(()=>{if(f.promise&&on==="loading"||f.duration===1/0||f.type==="loading")return;let he;return O||y||ne&&Ls?(()=>{if(ra.current<ts.current){let Ue=new Date().getTime()-ts.current;Rr.current=Rr.current-Ue}ra.current=new Date().getTime()})():Rr.current!==1/0&&(ts.current=new Date().getTime(),he=setTimeout(()=>{var Ue;(Ue=f.onAutoClose)==null||Ue.call(f,f),or()},Rr.current)),()=>clearTimeout(he)},[O,y,f,on,ne,Ls,or]),z.useEffect(()=>{f.delete&&or()},[or,f.delete]);function to(){var he,Ue,We;return Y!=null&&Y.loading?z.createElement("div",{className:cr(U==null?void 0:U.loader,(he=f==null?void 0:f.classNames)==null?void 0:he.loader,"sonner-loader"),"data-visible":on==="loading"},Y.loading):G?z.createElement("div",{className:cr(U==null?void 0:U.loader,(Ue=f==null?void 0:f.classNames)==null?void 0:Ue.loader,"sonner-loader"),"data-visible":on==="loading"},G):z.createElement(RL,{className:cr(U==null?void 0:U.loader,(We=f==null?void 0:f.classNames)==null?void 0:We.loader),visible:on==="loading"})}return z.createElement("li",{tabIndex:0,ref:Cr,className:cr(N,Wl,U==null?void 0:U.toast,(e=f==null?void 0:f.classNames)==null?void 0:e.toast,U==null?void 0:U.default,U==null?void 0:U[on],(n=f==null?void 0:f.classNames)==null?void 0:n[on]),"data-sonner-toast":"","data-rich-colors":(r=f.richColors)!=null?r:S,"data-styled":!(f.jsx||f.unstyled||_),"data-mounted":ae,"data-promise":!!f.promise,"data-swiped":Pr,"data-removed":Se,"data-visible":eo,"data-y-position":wd,"data-x-position":sa,"data-index":I,"data-front":um,"data-swiping":Nt,"data-dismissible":es,"data-type":on,"data-invert":Ed,"data-swipe-out":Bt,"data-swipe-direction":we,"data-expanded":!!(O||F&&ae),style:{"--index":I,"--toasts-before":I,"--z-index":D.length-I,"--offset":`${Se?Gn:kr.current}px`,"--initial-height":F?"auto":`${at}px`,...b,...f.style},onDragEnd:()=>{Kt(!1),le(null),yn.current=null},onPointerDown:he=>{xt||!es||(vd.current=new Date,Vs(kr.current),he.target.setPointerCapture(he.pointerId),he.target.tagName!=="BUTTON"&&(Kt(!0),yn.current={x:he.clientX,y:he.clientY}))},onPointerUp:()=>{var he,Ue,We,Vt;if(Bt||!es)return;yn.current=null;let Cn=Number(((he=Cr.current)==null?void 0:he.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Dr=Number(((Ue=Cr.current)==null?void 0:Ue.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Qn=new Date().getTime()-((We=vd.current)==null?void 0:We.getTime()),vn=ce==="x"?Cn:Dr,ar=Math.abs(vn)/Qn;if(Math.abs(vn)>=GL||ar>.11){Vs(kr.current),(Vt=f.onDismiss)==null||Vt.call(f,f),Qe(ce==="x"?Cn>0?"right":"left":Dr>0?"down":"up"),or(),gn(!0),ge(!1);return}Kt(!1),le(null)},onPointerMove:he=>{var Ue,We,Vt,Cn;if(!yn.current||!es||((Ue=window.getSelection())==null?void 0:Ue.toString().length)>0)return;let Dr=he.clientY-yn.current.y,Qn=he.clientX-yn.current.x,vn=(We=t.swipeDirections)!=null?We:YL(Z);!ce&&(Math.abs(Qn)>1||Math.abs(Dr)>1)&&le(Math.abs(Qn)>Math.abs(Dr)?"x":"y");let ar={x:0,y:0};ce==="y"?(vn.includes("top")||vn.includes("bottom"))&&(vn.includes("top")&&Dr<0||vn.includes("bottom")&&Dr>0)&&(ar.y=Dr):ce==="x"&&(vn.includes("left")||vn.includes("right"))&&(vn.includes("left")&&Qn<0||vn.includes("right")&&Qn>0)&&(ar.x=Qn),(Math.abs(ar.x)>0||Math.abs(ar.y)>0)&&ge(!0),(Vt=Cr.current)==null||Vt.style.setProperty("--swipe-amount-x",`${ar.x}px`),(Cn=Cr.current)==null||Cn.style.setProperty("--swipe-amount-y",`${ar.y}px`)}},_d&&!f.jsx?z.createElement("button",{"aria-label":de,"data-disabled":xt,"data-close-button":!0,onClick:xt||!es?()=>{}:()=>{var he;or(),(he=f.onDismiss)==null||he.call(f,f)},className:cr(U==null?void 0:U.closeButton,(s=f==null?void 0:f.classNames)==null?void 0:s.closeButton)},(i=Y==null?void 0:Y.close)!=null?i:OL):null,f.jsx||A.isValidElement(f.title)?f.jsx?f.jsx:typeof f.title=="function"?f.title():f.title:z.createElement(z.Fragment,null,on||f.icon||f.promise?z.createElement("div",{"data-icon":"",className:cr(U==null?void 0:U.icon,(o=f==null?void 0:f.classNames)==null?void 0:o.icon)},f.promise||f.type==="loading"&&!f.icon?f.icon||to():null,f.type!=="loading"?f.icon||(Y==null?void 0:Y[on])||xL(on):null):null,z.createElement("div",{"data-content":"",className:cr(U==null?void 0:U.content,(a=f==null?void 0:f.classNames)==null?void 0:a.content)},z.createElement("div",{"data-title":"",className:cr(U==null?void 0:U.title,(l=f==null?void 0:f.classNames)==null?void 0:l.title)},typeof f.title=="function"?f.title():f.title),f.description?z.createElement("div",{"data-description":"",className:cr(C,dm,U==null?void 0:U.description,(c=f==null?void 0:f.classNames)==null?void 0:c.description)},typeof f.description=="function"?f.description():f.description):null),A.isValidElement(f.cancel)?f.cancel:f.cancel&&Xd(f.cancel)?z.createElement("button",{"data-button":!0,"data-cancel":!0,style:f.cancelButtonStyle||k,onClick:he=>{var Ue,We;Xd(f.cancel)&&es&&((We=(Ue=f.cancel).onClick)==null||We.call(Ue,he),or())},className:cr(U==null?void 0:U.cancelButton,(d=f==null?void 0:f.classNames)==null?void 0:d.cancelButton)},f.cancel.label):null,A.isValidElement(f.action)?f.action:f.action&&Xd(f.action)?z.createElement("button",{"data-button":!0,"data-action":!0,style:f.actionButtonStyle||P,onClick:he=>{var Ue,We;Xd(f.action)&&((We=(Ue=f.action).onClick)==null||We.call(Ue,he),!he.defaultPrevented&&or())},className:cr(U==null?void 0:U.actionButton,(h=f==null?void 0:f.classNames)==null?void 0:h.actionButton)},f.action.label):null))};function gT(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function JL(t,e){let n={};return[t,e].forEach((r,s)=>{let i=s===1,o=i?"--mobile-offset":"--offset",a=i?HL:qL;function l(c){["top","right","bottom","left"].forEach(d=>{n[`${o}-${d}`]=typeof c=="number"?`${c}px`:c})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(c=>{r[c]===void 0?n[`${o}-${c}`]=a:n[`${o}-${c}`]=typeof r[c]=="number"?`${r[c]}px`:r[c]}):l(a)}),n}var ZL=A.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:o,className:a,offset:l,mobileOffset:c,theme:d="light",richColors:h,duration:p,style:f,visibleToasts:_=zL,toastOptions:y,dir:E=gT(),gap:w=KL,loadingIcon:v,icons:I,containerAriaLabel:D="Notifications",pauseWhenPageIsHidden:O}=t,[V,S]=z.useState([]),T=z.useMemo(()=>Array.from(new Set([r].concat(V.filter(ne=>ne.position).map(ne=>ne.position)))),[V,r]),[b,k]=z.useState([]),[P,N]=z.useState(!1),[C,q]=z.useState(!1),[Z,ie]=z.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),G=z.useRef(null),F=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),U=z.useRef(null),Y=z.useRef(!1),de=z.useCallback(ne=>{S(ce=>{var le;return(le=ce.find(we=>we.id===ne.id))!=null&&le.delete||_n.dismiss(ne.id),ce.filter(({id:we})=>we!==ne.id)})},[]);return z.useEffect(()=>_n.subscribe(ne=>{if(ne.dismiss){S(ce=>ce.map(le=>le.id===ne.id?{...le,delete:!0}:le));return}setTimeout(()=>{q1.flushSync(()=>{S(ce=>{let le=ce.findIndex(we=>we.id===ne.id);return le!==-1?[...ce.slice(0,le),{...ce[le],...ne},...ce.slice(le+1)]:[ne,...ce]})})})}),[]),z.useEffect(()=>{if(d!=="system"){ie(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ie("dark"):ie("light")),typeof window>"u")return;let ne=window.matchMedia("(prefers-color-scheme: dark)");try{ne.addEventListener("change",({matches:ce})=>{ie(ce?"dark":"light")})}catch{ne.addListener(({matches:le})=>{try{ie(le?"dark":"light")}catch(we){console.error(we)}})}},[d]),z.useEffect(()=>{V.length<=1&&N(!1)},[V]),z.useEffect(()=>{let ne=ce=>{var le,we;s.every(Qe=>ce[Qe]||ce.code===Qe)&&(N(!0),(le=G.current)==null||le.focus()),ce.code==="Escape"&&(document.activeElement===G.current||(we=G.current)!=null&&we.contains(document.activeElement))&&N(!1)};return document.addEventListener("keydown",ne),()=>document.removeEventListener("keydown",ne)},[s]),z.useEffect(()=>{if(G.current)return()=>{U.current&&(U.current.focus({preventScroll:!0}),U.current=null,Y.current=!1)}},[G.current]),z.createElement("section",{ref:e,"aria-label":`${D} ${F}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},T.map((ne,ce)=>{var le;let[we,Qe]=ne.split("-");return V.length?z.createElement("ol",{key:ne,dir:E==="auto"?gT():E,tabIndex:-1,ref:G,className:a,"data-sonner-toaster":!0,"data-theme":Z,"data-y-position":we,"data-lifted":P&&V.length>1&&!i,"data-x-position":Qe,style:{"--front-toast-height":`${((le=b[0])==null?void 0:le.height)||0}px`,"--width":`${WL}px`,"--gap":`${w}px`,...f,...JL(l,c)},onBlur:ae=>{Y.current&&!ae.currentTarget.contains(ae.relatedTarget)&&(Y.current=!1,U.current&&(U.current.focus({preventScroll:!0}),U.current=null))},onFocus:ae=>{ae.target instanceof HTMLElement&&ae.target.dataset.dismissible==="false"||Y.current||(Y.current=!0,U.current=ae.relatedTarget)},onMouseEnter:()=>N(!0),onMouseMove:()=>N(!0),onMouseLeave:()=>{C||N(!1)},onDragEnd:()=>N(!1),onPointerDown:ae=>{ae.target instanceof HTMLElement&&ae.target.dataset.dismissible==="false"||q(!0)},onPointerUp:()=>q(!1)},V.filter(ae=>!ae.position&&ce===0||ae.position===ne).map((ae,me)=>{var Se,Et;return z.createElement(XL,{key:ae.id,icons:I,index:me,toast:ae,defaultRichColors:h,duration:(Se=y==null?void 0:y.duration)!=null?Se:p,className:y==null?void 0:y.className,descriptionClassName:y==null?void 0:y.descriptionClassName,invert:n,visibleToasts:_,closeButton:(Et=y==null?void 0:y.closeButton)!=null?Et:o,interacting:C,position:ne,style:y==null?void 0:y.style,unstyled:y==null?void 0:y.unstyled,classNames:y==null?void 0:y.classNames,cancelButtonStyle:y==null?void 0:y.cancelButtonStyle,actionButtonStyle:y==null?void 0:y.actionButtonStyle,removeToast:de,toasts:V.filter(Nt=>Nt.position==ae.position),heights:b.filter(Nt=>Nt.position==ae.position),setHeights:k,expandByDefault:i,gap:w,loadingIcon:v,expanded:P,pauseWhenPageIsHidden:O,swipeDirections:t.swipeDirections})})):null}))});const eM=({...t})=>{const{theme:e="system"}=Vx();return x.jsx(ZL,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})},tM=["top","right","bottom","left"],ki=Math.min,On=Math.max,vf=Math.round,Jd=Math.floor,Qr=t=>({x:t,y:t}),nM={left:"right",right:"left",bottom:"top",top:"bottom"},rM={start:"end",end:"start"};function Ry(t,e,n){return On(t,ki(e,n))}function Ts(t,e){return typeof t=="function"?t(e):t}function Is(t){return t.split("-")[0]}function kl(t){return t.split("-")[1]}function x_(t){return t==="x"?"y":"x"}function P_(t){return t==="y"?"height":"width"}const sM=new Set(["top","bottom"]);function zr(t){return sM.has(Is(t))?"y":"x"}function R_(t){return x_(zr(t))}function iM(t,e,n){n===void 0&&(n=!1);const r=kl(t),s=R_(t),i=P_(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=_f(o)),[o,_f(o)]}function oM(t){const e=_f(t);return[Cy(t),e,Cy(e)]}function Cy(t){return t.replace(/start|end/g,e=>rM[e])}const yT=["left","right"],vT=["right","left"],aM=["top","bottom"],lM=["bottom","top"];function cM(t,e,n){switch(t){case"top":case"bottom":return n?e?vT:yT:e?yT:vT;case"left":case"right":return e?aM:lM;default:return[]}}function uM(t,e,n,r){const s=kl(t);let i=cM(Is(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(Cy)))),i}function _f(t){return t.replace(/left|right|bottom|top/g,e=>nM[e])}function dM(t){return{top:0,right:0,bottom:0,left:0,...t}}function Lx(t){return typeof t!="number"?dM(t):{top:t,right:t,bottom:t,left:t}}function wf(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function _T(t,e,n){let{reference:r,floating:s}=t;const i=zr(e),o=R_(e),a=P_(o),l=Is(e),c=i==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,p=r[a]/2-s[a]/2;let f;switch(l){case"top":f={x:d,y:r.y-s.height};break;case"bottom":f={x:d,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:h};break;case"left":f={x:r.x-s.width,y:h};break;default:f={x:r.x,y:r.y}}switch(kl(e)){case"start":f[o]-=p*(n&&c?-1:1);break;case"end":f[o]+=p*(n&&c?-1:1);break}return f}const hM=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:h}=_T(c,r,l),p=r,f={},_=0;for(let y=0;y<a.length;y++){const{name:E,fn:w}=a[y],{x:v,y:I,data:D,reset:O}=await w({x:d,y:h,initialPlacement:r,placement:p,strategy:s,middlewareData:f,rects:c,platform:o,elements:{reference:t,floating:e}});d=v??d,h=I??h,f={...f,[E]:{...f[E],...D}},O&&_<=50&&(_++,typeof O=="object"&&(O.placement&&(p=O.placement),O.rects&&(c=O.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):O.rects),{x:d,y:h}=_T(c,p,l)),y=-1)}return{x:d,y:h,placement:p,strategy:s,middlewareData:f}};async function vu(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:p=!1,padding:f=0}=Ts(e,t),_=Lx(f),E=a[p?h==="floating"?"reference":"floating":h],w=wf(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(E)))==null||n?E:E.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:d,strategy:l})),v=h==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,I=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),D=await(i.isElement==null?void 0:i.isElement(I))?await(i.getScale==null?void 0:i.getScale(I))||{x:1,y:1}:{x:1,y:1},O=wf(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:I,strategy:l}):v);return{top:(w.top-O.top+_.top)/D.y,bottom:(O.bottom-w.bottom+_.bottom)/D.y,left:(w.left-O.left+_.left)/D.x,right:(O.right-w.right+_.right)/D.x}}const fM=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:d=0}=Ts(t,e)||{};if(c==null)return{};const h=Lx(d),p={x:n,y:r},f=R_(s),_=P_(f),y=await o.getDimensions(c),E=f==="y",w=E?"top":"left",v=E?"bottom":"right",I=E?"clientHeight":"clientWidth",D=i.reference[_]+i.reference[f]-p[f]-i.floating[_],O=p[f]-i.reference[f],V=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let S=V?V[I]:0;(!S||!await(o.isElement==null?void 0:o.isElement(V)))&&(S=a.floating[I]||i.floating[_]);const T=D/2-O/2,b=S/2-y[_]/2-1,k=ki(h[w],b),P=ki(h[v],b),N=k,C=S-y[_]-P,q=S/2-y[_]/2+T,Z=Ry(N,q,C),ie=!l.arrow&&kl(s)!=null&&q!==Z&&i.reference[_]/2-(q<N?k:P)-y[_]/2<0,G=ie?q<N?q-N:q-C:0;return{[f]:p[f]+G,data:{[f]:Z,centerOffset:q-Z-G,...ie&&{alignmentOffset:G}},reset:ie}}}),pM=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:_="none",flipAlignment:y=!0,...E}=Ts(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const w=Is(s),v=zr(a),I=Is(a)===a,D=await(l.isRTL==null?void 0:l.isRTL(c.floating)),O=p||(I||!y?[_f(a)]:oM(a)),V=_!=="none";!p&&V&&O.push(...uM(a,y,_,D));const S=[a,...O],T=await vu(e,E),b=[];let k=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&b.push(T[w]),h){const q=iM(s,o,D);b.push(T[q[0]],T[q[1]])}if(k=[...k,{placement:s,overflows:b}],!b.every(q=>q<=0)){var P,N;const q=(((P=i.flip)==null?void 0:P.index)||0)+1,Z=S[q];if(Z&&(!(h==="alignment"?v!==zr(Z):!1)||k.every(F=>zr(F.placement)===v?F.overflows[0]>0:!0)))return{data:{index:q,overflows:k},reset:{placement:Z}};let ie=(N=k.filter(G=>G.overflows[0]<=0).sort((G,F)=>G.overflows[1]-F.overflows[1])[0])==null?void 0:N.placement;if(!ie)switch(f){case"bestFit":{var C;const G=(C=k.filter(F=>{if(V){const U=zr(F.placement);return U===v||U==="y"}return!0}).map(F=>[F.placement,F.overflows.filter(U=>U>0).reduce((U,Y)=>U+Y,0)]).sort((F,U)=>F[1]-U[1])[0])==null?void 0:C[0];G&&(ie=G);break}case"initialPlacement":ie=a;break}if(s!==ie)return{reset:{placement:ie}}}return{}}}};function wT(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function ET(t){return tM.some(e=>t[e]>=0)}const mM=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Ts(t,e);switch(r){case"referenceHidden":{const i=await vu(e,{...s,elementContext:"reference"}),o=wT(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:ET(o)}}}case"escaped":{const i=await vu(e,{...s,altBoundary:!0}),o=wT(i,n.floating);return{data:{escapedOffsets:o,escaped:ET(o)}}}default:return{}}}}},Mx=new Set(["left","top"]);async function gM(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Is(n),a=kl(n),l=zr(n)==="y",c=Mx.has(o)?-1:1,d=i&&l?-1:1,h=Ts(e,t);let{mainAxis:p,crossAxis:f,alignmentAxis:_}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof _=="number"&&(f=a==="end"?_*-1:_),l?{x:f*d,y:p*c}:{x:p*c,y:f*d}}const yM=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await gM(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},vM=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:E=>{let{x:w,y:v}=E;return{x:w,y:v}}},...l}=Ts(t,e),c={x:n,y:r},d=await vu(e,l),h=zr(Is(s)),p=x_(h);let f=c[p],_=c[h];if(i){const E=p==="y"?"top":"left",w=p==="y"?"bottom":"right",v=f+d[E],I=f-d[w];f=Ry(v,f,I)}if(o){const E=h==="y"?"top":"left",w=h==="y"?"bottom":"right",v=_+d[E],I=_-d[w];_=Ry(v,_,I)}const y=a.fn({...e,[p]:f,[h]:_});return{...y,data:{x:y.x-n,y:y.y-r,enabled:{[p]:i,[h]:o}}}}}},_M=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Ts(t,e),d={x:n,y:r},h=zr(s),p=x_(h);let f=d[p],_=d[h];const y=Ts(a,e),E=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(l){const I=p==="y"?"height":"width",D=i.reference[p]-i.floating[I]+E.mainAxis,O=i.reference[p]+i.reference[I]-E.mainAxis;f<D?f=D:f>O&&(f=O)}if(c){var w,v;const I=p==="y"?"width":"height",D=Mx.has(Is(s)),O=i.reference[h]-i.floating[I]+(D&&((w=o.offset)==null?void 0:w[h])||0)+(D?0:E.crossAxis),V=i.reference[h]+i.reference[I]+(D?0:((v=o.offset)==null?void 0:v[h])||0)-(D?E.crossAxis:0);_<O?_=O:_>V&&(_=V)}return{[p]:f,[h]:_}}}},wM=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...c}=Ts(t,e),d=await vu(e,c),h=Is(s),p=kl(s),f=zr(s)==="y",{width:_,height:y}=i.floating;let E,w;h==="top"||h==="bottom"?(E=h,w=p===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(w=h,E=p==="end"?"top":"bottom");const v=y-d.top-d.bottom,I=_-d.left-d.right,D=ki(y-d[E],v),O=ki(_-d[w],I),V=!e.middlewareData.shift;let S=D,T=O;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(T=I),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(S=v),V&&!p){const k=On(d.left,0),P=On(d.right,0),N=On(d.top,0),C=On(d.bottom,0);f?T=_-2*(k!==0||P!==0?k+P:On(d.left,d.right)):S=y-2*(N!==0||C!==0?N+C:On(d.top,d.bottom))}await l({...e,availableWidth:T,availableHeight:S});const b=await o.getDimensions(a.floating);return _!==b.width||y!==b.height?{reset:{rects:!0}}:{}}}};function Ip(){return typeof window<"u"}function Dl(t){return Fx(t)?(t.nodeName||"").toLowerCase():"#document"}function $n(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Jr(t){var e;return(e=(Fx(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Fx(t){return Ip()?t instanceof Node||t instanceof $n(t).Node:!1}function Sr(t){return Ip()?t instanceof Element||t instanceof $n(t).Element:!1}function Yr(t){return Ip()?t instanceof HTMLElement||t instanceof $n(t).HTMLElement:!1}function TT(t){return!Ip()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof $n(t).ShadowRoot}const EM=new Set(["inline","contents"]);function Ju(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=br(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!EM.has(s)}const TM=new Set(["table","td","th"]);function IM(t){return TM.has(Dl(t))}const SM=[":popover-open",":modal"];function Sp(t){return SM.some(e=>{try{return t.matches(e)}catch{return!1}})}const bM=["transform","translate","scale","rotate","perspective"],AM=["transform","translate","scale","rotate","perspective","filter"],xM=["paint","layout","strict","content"];function C_(t){const e=k_(),n=Sr(t)?br(t):t;return bM.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||AM.some(r=>(n.willChange||"").includes(r))||xM.some(r=>(n.contain||"").includes(r))}function PM(t){let e=Di(t);for(;Yr(e)&&!sl(e);){if(C_(e))return e;if(Sp(e))return null;e=Di(e)}return null}function k_(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const RM=new Set(["html","body","#document"]);function sl(t){return RM.has(Dl(t))}function br(t){return $n(t).getComputedStyle(t)}function bp(t){return Sr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Di(t){if(Dl(t)==="html")return t;const e=t.assignedSlot||t.parentNode||TT(t)&&t.host||Jr(t);return TT(e)?e.host:e}function Ux(t){const e=Di(t);return sl(e)?t.ownerDocument?t.ownerDocument.body:t.body:Yr(e)&&Ju(e)?e:Ux(e)}function _u(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=Ux(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=$n(s);if(i){const a=ky(o);return e.concat(o,o.visualViewport||[],Ju(s)?s:[],a&&n?_u(a):[])}return e.concat(s,_u(s,[],n))}function ky(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function jx(t){const e=br(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Yr(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=vf(n)!==i||vf(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function D_(t){return Sr(t)?t:t.contextElement}function Ua(t){const e=D_(t);if(!Yr(e))return Qr(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=jx(e);let o=(i?vf(n.width):n.width)/r,a=(i?vf(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const CM=Qr(0);function Bx(t){const e=$n(t);return!k_()||!e.visualViewport?CM:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function kM(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==$n(t)?!1:e}function $o(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=D_(t);let o=Qr(1);e&&(r?Sr(r)&&(o=Ua(r)):o=Ua(t));const a=kM(i,n,r)?Bx(i):Qr(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,d=s.width/o.x,h=s.height/o.y;if(i){const p=$n(i),f=r&&Sr(r)?$n(r):r;let _=p,y=ky(_);for(;y&&r&&f!==_;){const E=Ua(y),w=y.getBoundingClientRect(),v=br(y),I=w.left+(y.clientLeft+parseFloat(v.paddingLeft))*E.x,D=w.top+(y.clientTop+parseFloat(v.paddingTop))*E.y;l*=E.x,c*=E.y,d*=E.x,h*=E.y,l+=I,c+=D,_=$n(y),y=ky(_)}}return wf({width:d,height:h,x:l,y:c})}function Ap(t,e){const n=bp(t).scrollLeft;return e?e.left+n:$o(Jr(t)).left+n}function $x(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-Ap(t,n),s=n.top+e.scrollTop;return{x:r,y:s}}function DM(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=Jr(r),a=e?Sp(e.floating):!1;if(r===o||a&&i)return n;let l={scrollLeft:0,scrollTop:0},c=Qr(1);const d=Qr(0),h=Yr(r);if((h||!h&&!i)&&((Dl(r)!=="body"||Ju(o))&&(l=bp(r)),Yr(r))){const f=$o(r);c=Ua(r),d.x=f.x+r.clientLeft,d.y=f.y+r.clientTop}const p=o&&!h&&!i?$x(o,l):Qr(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+d.x+p.x,y:n.y*c.y-l.scrollTop*c.y+d.y+p.y}}function NM(t){return Array.from(t.getClientRects())}function OM(t){const e=Jr(t),n=bp(t),r=t.ownerDocument.body,s=On(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=On(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Ap(t);const a=-n.scrollTop;return br(r).direction==="rtl"&&(o+=On(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}const IT=25;function VM(t,e){const n=$n(t),r=Jr(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const d=k_();(!d||d&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}const c=Ap(r);if(c<=0){const d=r.ownerDocument,h=d.body,p=getComputedStyle(h),f=d.compatMode==="CSS1Compat"&&parseFloat(p.marginLeft)+parseFloat(p.marginRight)||0,_=Math.abs(r.clientWidth-h.clientWidth-f);_<=IT&&(i-=_)}else c<=IT&&(i+=c);return{width:i,height:o,x:a,y:l}}const LM=new Set(["absolute","fixed"]);function MM(t,e){const n=$o(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Yr(t)?Ua(t):Qr(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function ST(t,e,n){let r;if(e==="viewport")r=VM(t,n);else if(e==="document")r=OM(Jr(t));else if(Sr(e))r=MM(e,n);else{const s=Bx(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return wf(r)}function zx(t,e){const n=Di(t);return n===e||!Sr(n)||sl(n)?!1:br(n).position==="fixed"||zx(n,e)}function FM(t,e){const n=e.get(t);if(n)return n;let r=_u(t,[],!1).filter(a=>Sr(a)&&Dl(a)!=="body"),s=null;const i=br(t).position==="fixed";let o=i?Di(t):t;for(;Sr(o)&&!sl(o);){const a=br(o),l=C_(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&LM.has(s.position)||Ju(o)&&!l&&zx(t,o))?r=r.filter(d=>d!==o):s=a,o=Di(o)}return e.set(t,r),r}function UM(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?Sp(e)?[]:FM(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,d)=>{const h=ST(e,d,s);return c.top=On(h.top,c.top),c.right=ki(h.right,c.right),c.bottom=ki(h.bottom,c.bottom),c.left=On(h.left,c.left),c},ST(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function jM(t){const{width:e,height:n}=jx(t);return{width:e,height:n}}function BM(t,e,n){const r=Yr(e),s=Jr(e),i=n==="fixed",o=$o(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=Qr(0);function c(){l.x=Ap(s)}if(r||!r&&!i)if((Dl(e)!=="body"||Ju(s))&&(a=bp(e)),r){const f=$o(e,!0,i,e);l.x=f.x+e.clientLeft,l.y=f.y+e.clientTop}else s&&c();i&&!r&&s&&c();const d=s&&!r&&!i?$x(s,a):Qr(0),h=o.left+a.scrollLeft-l.x-d.x,p=o.top+a.scrollTop-l.y-d.y;return{x:h,y:p,width:o.width,height:o.height}}function sg(t){return br(t).position==="static"}function bT(t,e){if(!Yr(t)||br(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Jr(t)===n&&(n=n.ownerDocument.body),n}function qx(t,e){const n=$n(t);if(Sp(t))return n;if(!Yr(t)){let s=Di(t);for(;s&&!sl(s);){if(Sr(s)&&!sg(s))return s;s=Di(s)}return n}let r=bT(t,e);for(;r&&IM(r)&&sg(r);)r=bT(r,e);return r&&sl(r)&&sg(r)&&!C_(r)?n:r||PM(t)||n}const $M=async function(t){const e=this.getOffsetParent||qx,n=this.getDimensions,r=await n(t.floating);return{reference:BM(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function zM(t){return br(t).direction==="rtl"}const qM={convertOffsetParentRelativeRectToViewportRelativeRect:DM,getDocumentElement:Jr,getClippingRect:UM,getOffsetParent:qx,getElementRects:$M,getClientRects:NM,getDimensions:jM,getScale:Ua,isElement:Sr,isRTL:zM};function Hx(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function HM(t,e){let n=null,r;const s=Jr(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const c=t.getBoundingClientRect(),{left:d,top:h,width:p,height:f}=c;if(a||e(),!p||!f)return;const _=Jd(h),y=Jd(s.clientWidth-(d+p)),E=Jd(s.clientHeight-(h+f)),w=Jd(d),I={rootMargin:-_+"px "+-y+"px "+-E+"px "+-w+"px",threshold:On(0,ki(1,l))||1};let D=!0;function O(V){const S=V[0].intersectionRatio;if(S!==l){if(!D)return o();S?o(!1,S):r=setTimeout(()=>{o(!1,1e-7)},1e3)}S===1&&!Hx(c,t.getBoundingClientRect())&&o(),D=!1}try{n=new IntersectionObserver(O,{...I,root:s.ownerDocument})}catch{n=new IntersectionObserver(O,I)}n.observe(t)}return o(!0),i}function WM(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=D_(t),d=s||i?[...c?_u(c):[],..._u(e)]:[];d.forEach(w=>{s&&w.addEventListener("scroll",n,{passive:!0}),i&&w.addEventListener("resize",n)});const h=c&&a?HM(c,n):null;let p=-1,f=null;o&&(f=new ResizeObserver(w=>{let[v]=w;v&&v.target===c&&f&&(f.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var I;(I=f)==null||I.observe(e)})),n()}),c&&!l&&f.observe(c),f.observe(e));let _,y=l?$o(t):null;l&&E();function E(){const w=$o(t);y&&!Hx(y,w)&&n(),y=w,_=requestAnimationFrame(E)}return n(),()=>{var w;d.forEach(v=>{s&&v.removeEventListener("scroll",n),i&&v.removeEventListener("resize",n)}),h==null||h(),(w=f)==null||w.disconnect(),f=null,l&&cancelAnimationFrame(_)}}const KM=yM,GM=vM,QM=pM,YM=wM,XM=mM,AT=fM,JM=_M,ZM=(t,e,n)=>{const r=new Map,s={platform:qM,...n},i={...s.platform,_c:r};return hM(t,e,{...s,platform:i})};var eF=typeof document<"u",tF=function(){},Ch=eF?A.useLayoutEffect:tF;function Ef(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Ef(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!Ef(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function Wx(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function xT(t,e){const n=Wx(t);return Math.round(e*n)/n}function ig(t){const e=A.useRef(t);return Ch(()=>{e.current=t}),e}function nF(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[d,h]=A.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,f]=A.useState(r);Ef(p,r)||f(r);const[_,y]=A.useState(null),[E,w]=A.useState(null),v=A.useCallback(F=>{F!==V.current&&(V.current=F,y(F))},[]),I=A.useCallback(F=>{F!==S.current&&(S.current=F,w(F))},[]),D=i||_,O=o||E,V=A.useRef(null),S=A.useRef(null),T=A.useRef(d),b=l!=null,k=ig(l),P=ig(s),N=ig(c),C=A.useCallback(()=>{if(!V.current||!S.current)return;const F={placement:e,strategy:n,middleware:p};P.current&&(F.platform=P.current),ZM(V.current,S.current,F).then(U=>{const Y={...U,isPositioned:N.current!==!1};q.current&&!Ef(T.current,Y)&&(T.current=Y,Yu.flushSync(()=>{h(Y)}))})},[p,e,n,P,N]);Ch(()=>{c===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,h(F=>({...F,isPositioned:!1})))},[c]);const q=A.useRef(!1);Ch(()=>(q.current=!0,()=>{q.current=!1}),[]),Ch(()=>{if(D&&(V.current=D),O&&(S.current=O),D&&O){if(k.current)return k.current(D,O,C);C()}},[D,O,C,k,b]);const Z=A.useMemo(()=>({reference:V,floating:S,setReference:v,setFloating:I}),[v,I]),ie=A.useMemo(()=>({reference:D,floating:O}),[D,O]),G=A.useMemo(()=>{const F={position:n,left:0,top:0};if(!ie.floating)return F;const U=xT(ie.floating,d.x),Y=xT(ie.floating,d.y);return a?{...F,transform:"translate("+U+"px, "+Y+"px)",...Wx(ie.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:U,top:Y}},[n,a,ie.floating,d.x,d.y]);return A.useMemo(()=>({...d,update:C,refs:Z,elements:ie,floatingStyles:G}),[d,C,Z,ie,G])}const rF=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?AT({element:r.current,padding:s}).fn(n):{}:r?AT({element:r,padding:s}).fn(n):{}}}},sF=(t,e)=>({...KM(t),options:[t,e]}),iF=(t,e)=>({...GM(t),options:[t,e]}),oF=(t,e)=>({...JM(t),options:[t,e]}),aF=(t,e)=>({...QM(t),options:[t,e]}),lF=(t,e)=>({...YM(t),options:[t,e]}),cF=(t,e)=>({...XM(t),options:[t,e]}),uF=(t,e)=>({...rF(t),options:[t,e]});var dF="Arrow",Kx=A.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return x.jsx(Rn.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:x.jsx("polygon",{points:"0,0 30,0 15,10"})})});Kx.displayName=dF;var hF=Kx;function fF(t){const[e,n]=A.useState(void 0);return Ci(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var N_="Popper",[Gx,Qx]=wp(N_),[pF,Yx]=Gx(N_),Xx=t=>{const{__scopePopper:e,children:n}=t,[r,s]=A.useState(null);return x.jsx(pF,{scope:e,anchor:r,onAnchorChange:s,children:n})};Xx.displayName=N_;var Jx="PopperAnchor",Zx=A.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=Yx(Jx,n),o=A.useRef(null),a=Ir(e,o),l=A.useRef(null);return A.useEffect(()=>{const c=l.current;l.current=(r==null?void 0:r.current)||o.current,c!==l.current&&i.onAnchorChange(l.current)}),r?null:x.jsx(Rn.div,{...s,ref:a})});Zx.displayName=Jx;var O_="PopperContent",[mF,gF]=Gx(O_),eP=A.forwardRef((t,e)=>{var ae,me,Se,Et,Nt,Kt;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:p=!1,updatePositionStrategy:f="optimized",onPlaced:_,...y}=t,E=Yx(O_,n),[w,v]=A.useState(null),I=Ir(e,Bt=>v(Bt)),[D,O]=A.useState(null),V=fF(D),S=(V==null?void 0:V.width)??0,T=(V==null?void 0:V.height)??0,b=r+(i!=="center"?"-"+i:""),k=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},P=Array.isArray(c)?c:[c],N=P.length>0,C={padding:k,boundary:P.filter(vF),altBoundary:N},{refs:q,floatingStyles:Z,placement:ie,isPositioned:G,middlewareData:F}=nF({strategy:"fixed",placement:b,whileElementsMounted:(...Bt)=>WM(...Bt,{animationFrame:f==="always"}),elements:{reference:E.anchor},middleware:[sF({mainAxis:s+T,alignmentAxis:o}),l&&iF({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?oF():void 0,...C}),l&&aF({...C}),lF({...C,apply:({elements:Bt,rects:gn,availableWidth:Pr,availableHeight:ge})=>{const{width:Gn,height:Vs}=gn.reference,at=Bt.floating.style;at.setProperty("--radix-popper-available-width",`${Pr}px`),at.setProperty("--radix-popper-available-height",`${ge}px`),at.setProperty("--radix-popper-anchor-width",`${Gn}px`),at.setProperty("--radix-popper-anchor-height",`${Vs}px`)}}),D&&uF({element:D,padding:a}),_F({arrowWidth:S,arrowHeight:T}),p&&cF({strategy:"referenceHidden",...C})]}),[U,Y]=rP(ie),de=Ri(_);Ci(()=>{G&&(de==null||de())},[G,de]);const ne=(ae=F.arrow)==null?void 0:ae.x,ce=(me=F.arrow)==null?void 0:me.y,le=((Se=F.arrow)==null?void 0:Se.centerOffset)!==0,[we,Qe]=A.useState();return Ci(()=>{w&&Qe(window.getComputedStyle(w).zIndex)},[w]),x.jsx("div",{ref:q.setFloating,"data-radix-popper-content-wrapper":"",style:{...Z,transform:G?Z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:we,"--radix-popper-transform-origin":[(Et=F.transformOrigin)==null?void 0:Et.x,(Nt=F.transformOrigin)==null?void 0:Nt.y].join(" "),...((Kt=F.hide)==null?void 0:Kt.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:x.jsx(mF,{scope:n,placedSide:U,onArrowChange:O,arrowX:ne,arrowY:ce,shouldHideArrow:le,children:x.jsx(Rn.div,{"data-side":U,"data-align":Y,...y,ref:I,style:{...y.style,animation:G?void 0:"none"}})})})});eP.displayName=O_;var tP="PopperArrow",yF={top:"bottom",right:"left",bottom:"top",left:"right"},nP=A.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=gF(tP,r),o=yF[i.placedSide];return x.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:x.jsx(hF,{...s,ref:n,style:{...s.style,display:"block"}})})});nP.displayName=tP;function vF(t){return t!==null}var _F=t=>({name:"transformOrigin",options:t,fn(e){var E,w,v;const{placement:n,rects:r,middlewareData:s}=e,o=((E=s.arrow)==null?void 0:E.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,d]=rP(n),h={start:"0%",center:"50%",end:"100%"}[d],p=(((w=s.arrow)==null?void 0:w.x)??0)+a/2,f=(((v=s.arrow)==null?void 0:v.y)??0)+l/2;let _="",y="";return c==="bottom"?(_=o?h:`${p}px`,y=`${-l}px`):c==="top"?(_=o?h:`${p}px`,y=`${r.floating.height+l}px`):c==="right"?(_=`${-l}px`,y=o?h:`${f}px`):c==="left"&&(_=`${r.floating.width+l}px`,y=o?h:`${f}px`),{data:{x:_,y}}}});function rP(t){const[e,n="center"]=t.split("-");return[e,n]}var v8=Xx,wF=Zx,EF=eP,TF=nP,[xp]=wp("Tooltip",[Qx]),V_=Qx(),sP="TooltipProvider",IF=700,PT="tooltip.open",[SF,iP]=xp(sP),oP=t=>{const{__scopeTooltip:e,delayDuration:n=IF,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,o=A.useRef(!0),a=A.useRef(!1),l=A.useRef(0);return A.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),x.jsx(SF,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:A.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:A.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:A.useCallback(c=>{a.current=c},[]),disableHoverableContent:s,children:i})};oP.displayName=sP;var aP="Tooltip",[_8,Pp]=xp(aP),Dy="TooltipTrigger",bF=A.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Pp(Dy,n),i=iP(Dy,n),o=V_(n),a=A.useRef(null),l=Ir(e,a,s.onTriggerChange),c=A.useRef(!1),d=A.useRef(!1),h=A.useCallback(()=>c.current=!1,[]);return A.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),x.jsx(wF,{asChild:!0,...o,children:x.jsx(Rn.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:l,onPointerMove:Ct(t.onPointerMove,p=>{p.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:Ct(t.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:Ct(t.onPointerDown,()=>{s.open&&s.onClose(),c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Ct(t.onFocus,()=>{c.current||s.onOpen()}),onBlur:Ct(t.onBlur,s.onClose),onClick:Ct(t.onClick,s.onClose)})})});bF.displayName=Dy;var AF="TooltipPortal",[w8,xF]=xp(AF,{forceMount:void 0}),il="TooltipContent",lP=A.forwardRef((t,e)=>{const n=xF(il,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=Pp(il,t.__scopeTooltip);return x.jsx(w_,{present:r||o.open,children:o.disableHoverableContent?x.jsx(cP,{side:s,...i,ref:e}):x.jsx(PF,{side:s,...i,ref:e})})}),PF=A.forwardRef((t,e)=>{const n=Pp(il,t.__scopeTooltip),r=iP(il,t.__scopeTooltip),s=A.useRef(null),i=Ir(e,s),[o,a]=A.useState(null),{trigger:l,onClose:c}=n,d=s.current,{onPointerInTransitChange:h}=r,p=A.useCallback(()=>{a(null),h(!1)},[h]),f=A.useCallback((_,y)=>{const E=_.currentTarget,w={x:_.clientX,y:_.clientY},v=NF(w,E.getBoundingClientRect()),I=OF(w,v),D=VF(y.getBoundingClientRect()),O=MF([...I,...D]);a(O),h(!0)},[h]);return A.useEffect(()=>()=>p(),[p]),A.useEffect(()=>{if(l&&d){const _=E=>f(E,d),y=E=>f(E,l);return l.addEventListener("pointerleave",_),d.addEventListener("pointerleave",y),()=>{l.removeEventListener("pointerleave",_),d.removeEventListener("pointerleave",y)}}},[l,d,f,p]),A.useEffect(()=>{if(o){const _=y=>{const E=y.target,w={x:y.clientX,y:y.clientY},v=(l==null?void 0:l.contains(E))||(d==null?void 0:d.contains(E)),I=!LF(w,o);v?p():I&&(p(),c())};return document.addEventListener("pointermove",_),()=>document.removeEventListener("pointermove",_)}},[l,d,o,c,p]),x.jsx(cP,{...t,ref:i})}),[RF,CF]=xp(aP,{isInside:!1}),kF=PO("TooltipContent"),cP=A.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=t,l=Pp(il,n),c=V_(n),{onClose:d}=l;return A.useEffect(()=>(document.addEventListener(PT,d),()=>document.removeEventListener(PT,d)),[d]),A.useEffect(()=>{if(l.trigger){const h=p=>{const f=p.target;f!=null&&f.contains(l.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,d]),x.jsx(__,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:x.jsxs(EF,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[x.jsx(kF,{children:r}),x.jsx(RF,{scope:n,isInside:!0,children:x.jsx(ZO,{id:l.contentId,role:"tooltip",children:s||r})})]})})});lP.displayName=il;var uP="TooltipArrow",DF=A.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=V_(n);return CF(uP,n).isInside?null:x.jsx(TF,{...s,...r,ref:e})});DF.displayName=uP;function NF(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function OF(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function VF(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function LF(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i],l=e[o],c=a.x,d=a.y,h=l.x,p=l.y;d>r!=p>r&&n<(h-c)*(r-d)/(p-d)+c&&(s=!s)}return s}function MF(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),FF(e)}function FF(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var UF=oP,dP=lP;const jF=UF,BF=A.forwardRef(({className:t,sideOffset:e=4,...n},r)=>x.jsx(dP,{ref:r,sideOffset:e,className:Rs("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));BF.displayName=dP.displayName;var Rp=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},$F={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},ri,Sv,Eb,zF=(Eb=class{constructor(){De(this,ri,$F);De(this,Sv,!1)}setTimeoutProvider(t){fe(this,ri,t)}setTimeout(t,e){return $(this,ri).setTimeout(t,e)}clearTimeout(t){$(this,ri).clearTimeout(t)}setInterval(t,e){return $(this,ri).setInterval(t,e)}clearInterval(t){$(this,ri).clearInterval(t)}},ri=new WeakMap,Sv=new WeakMap,Eb),Ny=new zF;function qF(t){setTimeout(t,0)}var Cp=typeof window>"u"||"Deno"in globalThis;function dr(){}function HF(t,e){return typeof t=="function"?t(e):t}function WF(t){return typeof t=="number"&&t>=0&&t!==1/0}function KF(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Oy(t,e){return typeof t=="function"?t(e):t}function GF(t,e){return typeof t=="function"?t(e):t}function RT(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==L_(o,e.options))return!1}else if(!Eu(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function CT(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(wu(e.options.mutationKey)!==wu(i))return!1}else if(!Eu(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function L_(t,e){return((e==null?void 0:e.queryKeyHashFn)||wu)(t)}function wu(t){return JSON.stringify(t,(e,n)=>Vy(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Eu(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Eu(t[n],e[n])):!1}var QF=Object.prototype.hasOwnProperty;function hP(t,e){if(t===e)return t;const n=kT(t)&&kT(e);if(!n&&!(Vy(t)&&Vy(e)))return e;const s=(n?t:Object.keys(t)).length,i=n?e:Object.keys(e),o=i.length,a=n?new Array(o):{};let l=0;for(let c=0;c<o;c++){const d=n?c:i[c],h=t[d],p=e[d];if(h===p){a[d]=h,(n?c<s:QF.call(t,d))&&l++;continue}if(h===null||p===null||typeof h!="object"||typeof p!="object"){a[d]=p;continue}const f=hP(h,p);a[d]=f,f===h&&l++}return s===o&&l===s?t:a}function kT(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Vy(t){if(!DT(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!DT(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function DT(t){return Object.prototype.toString.call(t)==="[object Object]"}function YF(t){return new Promise(e=>{Ny.setTimeout(e,t)})}function XF(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?hP(t,e):e}function JF(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function ZF(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var M_=Symbol();function fP(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===M_?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var bo,si,za,Tb,e4=(Tb=class extends Rp{constructor(){super();De(this,bo);De(this,si);De(this,za);fe(this,za,e=>{if(!Cp&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){$(this,si)||this.setEventListener($(this,za))}onUnsubscribe(){var e;this.hasListeners()||((e=$(this,si))==null||e.call(this),fe(this,si,void 0))}setEventListener(e){var n;fe(this,za,e),(n=$(this,si))==null||n.call(this),fe(this,si,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){$(this,bo)!==e&&(fe(this,bo,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof $(this,bo)=="boolean"?$(this,bo):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},bo=new WeakMap,si=new WeakMap,za=new WeakMap,Tb),pP=new e4;function t4(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}var n4=qF;function r4(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=n4;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var un=r4(),qa,ii,Ha,Ib,s4=(Ib=class extends Rp{constructor(){super();De(this,qa,!0);De(this,ii);De(this,Ha);fe(this,Ha,e=>{if(!Cp&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){$(this,ii)||this.setEventListener($(this,Ha))}onUnsubscribe(){var e;this.hasListeners()||((e=$(this,ii))==null||e.call(this),fe(this,ii,void 0))}setEventListener(e){var n;fe(this,Ha,e),(n=$(this,ii))==null||n.call(this),fe(this,ii,e(this.setOnline.bind(this)))}setOnline(e){$(this,qa)!==e&&(fe(this,qa,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return $(this,qa)}},qa=new WeakMap,ii=new WeakMap,Ha=new WeakMap,Ib),Tf=new s4;function i4(t){return Math.min(1e3*2**t,3e4)}function mP(t){return(t??"online")==="online"?Tf.isOnline():!0}var Ly=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function gP(t){let e=!1,n=0,r;const s=t4(),i=()=>s.status!=="pending",o=y=>{var E;if(!i()){const w=new Ly(y);p(w),(E=t.onCancel)==null||E.call(t,w)}},a=()=>{e=!0},l=()=>{e=!1},c=()=>pP.isFocused()&&(t.networkMode==="always"||Tf.isOnline())&&t.canRun(),d=()=>mP(t.networkMode)&&t.canRun(),h=y=>{i()||(r==null||r(),s.resolve(y))},p=y=>{i()||(r==null||r(),s.reject(y))},f=()=>new Promise(y=>{var E;r=w=>{(i()||c())&&y(w)},(E=t.onPause)==null||E.call(t)}).then(()=>{var y;r=void 0,i()||(y=t.onContinue)==null||y.call(t)}),_=()=>{if(i())return;let y;const E=n===0?t.initialPromise:void 0;try{y=E??t.fn()}catch(w){y=Promise.reject(w)}Promise.resolve(y).then(h).catch(w=>{var V;if(i())return;const v=t.retry??(Cp?0:3),I=t.retryDelay??i4,D=typeof I=="function"?I(n,w):I,O=v===!0||typeof v=="number"&&n<v||typeof v=="function"&&v(n,w);if(e||!O){p(w);return}n++,(V=t.onFail)==null||V.call(t,n,w),YF(D).then(()=>c()?void 0:f()).then(()=>{e?p(w):_()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:a,continueRetry:l,canStart:d,start:()=>(d()?_():f().then(_),s)}}var Ao,Sb,yP=(Sb=class{constructor(){De(this,Ao)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),WF(this.gcTime)&&fe(this,Ao,Ny.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Cp?1/0:5*60*1e3))}clearGcTimeout(){$(this,Ao)&&(Ny.clearTimeout($(this,Ao)),fe(this,Ao,void 0))}},Ao=new WeakMap,Sb),xo,Wa,Xn,Po,Mt,$u,Ro,hr,rs,bb,o4=(bb=class extends yP{constructor(n){super();De(this,hr);De(this,xo);De(this,Wa);De(this,Xn);De(this,Po);De(this,Mt);De(this,$u);De(this,Ro);fe(this,Ro,!1),fe(this,$u,n.defaultOptions),this.setOptions(n.options),this.observers=[],fe(this,Po,n.client),fe(this,Xn,$(this,Po).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,fe(this,xo,OT(this.options)),this.state=n.state??$(this,xo),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=$(this,Mt))==null?void 0:n.promise}setOptions(n){if(this.options={...$(this,$u),...n},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=OT(this.options);r.data!==void 0&&(this.setState(NT(r.data,r.dataUpdatedAt)),fe(this,xo,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&$(this,Xn).remove(this)}setData(n,r){const s=XF(this.state.data,n,this.options);return Gt(this,hr,rs).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){Gt(this,hr,rs).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=$(this,Mt))==null?void 0:s.promise;return(i=$(this,Mt))==null||i.cancel(n),r?r.then(dr).catch(dr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState($(this,xo))}isActive(){return this.observers.some(n=>GF(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===M_||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>Oy(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!KF(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=$(this,Mt))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=$(this,Mt))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),$(this,Xn).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||($(this,Mt)&&($(this,Ro)?$(this,Mt).cancel({revert:!0}):$(this,Mt).cancelRetry()),this.scheduleGc()),$(this,Xn).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Gt(this,hr,rs).call(this,{type:"invalidate"})}async fetch(n,r){var c,d,h,p,f,_,y,E,w,v,I,D;if(this.state.fetchStatus!=="idle"&&((c=$(this,Mt))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if($(this,Mt))return $(this,Mt).continueRetry(),$(this,Mt).promise}if(n&&this.setOptions(n),!this.options.queryFn){const O=this.observers.find(V=>V.options.queryFn);O&&this.setOptions(O.options)}const s=new AbortController,i=O=>{Object.defineProperty(O,"signal",{enumerable:!0,get:()=>(fe(this,Ro,!0),s.signal)})},o=()=>{const O=fP(this.options,r),S=(()=>{const T={client:$(this,Po),queryKey:this.queryKey,meta:this.meta};return i(T),T})();return fe(this,Ro,!1),this.options.persister?this.options.persister(O,S,this):O(S)},l=(()=>{const O={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:$(this,Po),state:this.state,fetchFn:o};return i(O),O})();(d=this.options.behavior)==null||d.onFetch(l,this),fe(this,Wa,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&Gt(this,hr,rs).call(this,{type:"fetch",meta:(p=l.fetchOptions)==null?void 0:p.meta}),fe(this,Mt,gP({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,onCancel:O=>{O instanceof Ly&&O.revert&&this.setState({...$(this,Wa),fetchStatus:"idle"}),s.abort()},onFail:(O,V)=>{Gt(this,hr,rs).call(this,{type:"failed",failureCount:O,error:V})},onPause:()=>{Gt(this,hr,rs).call(this,{type:"pause"})},onContinue:()=>{Gt(this,hr,rs).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const O=await $(this,Mt).start();if(O===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(O),(_=(f=$(this,Xn).config).onSuccess)==null||_.call(f,O,this),(E=(y=$(this,Xn).config).onSettled)==null||E.call(y,O,this.state.error,this),O}catch(O){if(O instanceof Ly){if(O.silent)return $(this,Mt).promise;if(O.revert){if(this.state.data===void 0)throw O;return this.state.data}}throw Gt(this,hr,rs).call(this,{type:"error",error:O}),(v=(w=$(this,Xn).config).onError)==null||v.call(w,O,this),(D=(I=$(this,Xn).config).onSettled)==null||D.call(I,this.state.data,O,this),O}finally{this.scheduleGc()}}},xo=new WeakMap,Wa=new WeakMap,Xn=new WeakMap,Po=new WeakMap,Mt=new WeakMap,$u=new WeakMap,Ro=new WeakMap,hr=new WeakSet,rs=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...a4(s.data,this.options),fetchMeta:n.meta??null};case"success":const i={...s,...NT(n.data,n.dataUpdatedAt),dataUpdateCount:s.dataUpdateCount+1,...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return fe(this,Wa,n.manual?i:void 0),i;case"error":const o=n.error;return{...s,error:o,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),un.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),$(this,Xn).notify({query:this,type:"updated",action:n})})},bb);function a4(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:mP(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function NT(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function OT(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}function VT(t){return{onFetch:(e,n)=>{var d,h,p,f,_;const r=e.options,s=(p=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:p.direction,i=((f=e.state.data)==null?void 0:f.pages)||[],o=((_=e.state.data)==null?void 0:_.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let y=!1;const E=I=>{Object.defineProperty(I,"signal",{enumerable:!0,get:()=>(e.signal.aborted?y=!0:e.signal.addEventListener("abort",()=>{y=!0}),e.signal)})},w=fP(e.options,e.fetchOptions),v=async(I,D,O)=>{if(y)return Promise.reject();if(D==null&&I.pages.length)return Promise.resolve(I);const S=(()=>{const P={client:e.client,queryKey:e.queryKey,pageParam:D,direction:O?"backward":"forward",meta:e.options.meta};return E(P),P})(),T=await w(S),{maxPages:b}=e.options,k=O?ZF:JF;return{pages:k(I.pages,T,b),pageParams:k(I.pageParams,D,b)}};if(s&&i.length){const I=s==="backward",D=I?l4:LT,O={pages:i,pageParams:o},V=D(r,O);a=await v(O,V,I)}else{const I=t??i.length;do{const D=l===0?o[0]??r.initialPageParam:LT(r,a);if(l>0&&D==null)break;a=await v(a,D),l++}while(l<I)}return a};e.options.persister?e.fetchFn=()=>{var y,E;return(E=(y=e.options).persister)==null?void 0:E.call(y,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=c}}}function LT(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function l4(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var zu,Fr,ln,Co,Ur,Ys,Ab,c4=(Ab=class extends yP{constructor(n){super();De(this,Ur);De(this,zu);De(this,Fr);De(this,ln);De(this,Co);fe(this,zu,n.client),this.mutationId=n.mutationId,fe(this,ln,n.mutationCache),fe(this,Fr,[]),this.state=n.state||u4(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){$(this,Fr).includes(n)||($(this,Fr).push(n),this.clearGcTimeout(),$(this,ln).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){fe(this,Fr,$(this,Fr).filter(r=>r!==n)),this.scheduleGc(),$(this,ln).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){$(this,Fr).length||(this.state.status==="pending"?this.scheduleGc():$(this,ln).remove(this))}continue(){var n;return((n=$(this,Co))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var a,l,c,d,h,p,f,_,y,E,w,v,I,D,O,V,S,T,b,k;const r=()=>{Gt(this,Ur,Ys).call(this,{type:"continue"})},s={client:$(this,zu),meta:this.options.meta,mutationKey:this.options.mutationKey};fe(this,Co,gP({fn:()=>this.options.mutationFn?this.options.mutationFn(n,s):Promise.reject(new Error("No mutationFn found")),onFail:(P,N)=>{Gt(this,Ur,Ys).call(this,{type:"failed",failureCount:P,error:N})},onPause:()=>{Gt(this,Ur,Ys).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>$(this,ln).canRun(this)}));const i=this.state.status==="pending",o=!$(this,Co).canStart();try{if(i)r();else{Gt(this,Ur,Ys).call(this,{type:"pending",variables:n,isPaused:o}),await((l=(a=$(this,ln).config).onMutate)==null?void 0:l.call(a,n,this,s));const N=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,n,s));N!==this.state.context&&Gt(this,Ur,Ys).call(this,{type:"pending",context:N,variables:n,isPaused:o})}const P=await $(this,Co).start();return await((p=(h=$(this,ln).config).onSuccess)==null?void 0:p.call(h,P,n,this.state.context,this,s)),await((_=(f=this.options).onSuccess)==null?void 0:_.call(f,P,n,this.state.context,s)),await((E=(y=$(this,ln).config).onSettled)==null?void 0:E.call(y,P,null,this.state.variables,this.state.context,this,s)),await((v=(w=this.options).onSettled)==null?void 0:v.call(w,P,null,n,this.state.context,s)),Gt(this,Ur,Ys).call(this,{type:"success",data:P}),P}catch(P){try{throw await((D=(I=$(this,ln).config).onError)==null?void 0:D.call(I,P,n,this.state.context,this,s)),await((V=(O=this.options).onError)==null?void 0:V.call(O,P,n,this.state.context,s)),await((T=(S=$(this,ln).config).onSettled)==null?void 0:T.call(S,void 0,P,this.state.variables,this.state.context,this,s)),await((k=(b=this.options).onSettled)==null?void 0:k.call(b,void 0,P,n,this.state.context,s)),P}finally{Gt(this,Ur,Ys).call(this,{type:"error",error:P})}}finally{$(this,ln).runNext(this)}}},zu=new WeakMap,Fr=new WeakMap,ln=new WeakMap,Co=new WeakMap,Ur=new WeakSet,Ys=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),un.batch(()=>{$(this,Fr).forEach(s=>{s.onMutationUpdate(n)}),$(this,ln).notify({mutation:this,type:"updated",action:n})})},Ab);function u4(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var os,fr,qu,xb,d4=(xb=class extends Rp{constructor(e={}){super();De(this,os);De(this,fr);De(this,qu);this.config=e,fe(this,os,new Set),fe(this,fr,new Map),fe(this,qu,0)}build(e,n,r){const s=new c4({client:e,mutationCache:this,mutationId:++kd(this,qu)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){$(this,os).add(e);const n=Zd(e);if(typeof n=="string"){const r=$(this,fr).get(n);r?r.push(e):$(this,fr).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if($(this,os).delete(e)){const n=Zd(e);if(typeof n=="string"){const r=$(this,fr).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&$(this,fr).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Zd(e);if(typeof n=="string"){const r=$(this,fr).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=Zd(e);if(typeof n=="string"){const s=(r=$(this,fr).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){un.batch(()=>{$(this,os).forEach(e=>{this.notify({type:"removed",mutation:e})}),$(this,os).clear(),$(this,fr).clear()})}getAll(){return Array.from($(this,os))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>CT(n,r))}findAll(e={}){return this.getAll().filter(n=>CT(e,n))}notify(e){un.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return un.batch(()=>Promise.all(e.map(n=>n.continue().catch(dr))))}},os=new WeakMap,fr=new WeakMap,qu=new WeakMap,xb);function Zd(t){var e;return(e=t.options.scope)==null?void 0:e.id}var jr,Pb,h4=(Pb=class extends Rp{constructor(e={}){super();De(this,jr);this.config=e,fe(this,jr,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??L_(s,n);let o=this.get(i);return o||(o=new o4({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){$(this,jr).has(e.queryHash)||($(this,jr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=$(this,jr).get(e.queryHash);n&&(e.destroy(),n===e&&$(this,jr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){un.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return $(this,jr).get(e)}getAll(){return[...$(this,jr).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>RT(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>RT(e,r)):n}notify(e){un.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){un.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){un.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},jr=new WeakMap,Pb),ft,oi,ai,Ka,Ga,li,Qa,Ya,Rb,f4=(Rb=class{constructor(t={}){De(this,ft);De(this,oi);De(this,ai);De(this,Ka);De(this,Ga);De(this,li);De(this,Qa);De(this,Ya);fe(this,ft,t.queryCache||new h4),fe(this,oi,t.mutationCache||new d4),fe(this,ai,t.defaultOptions||{}),fe(this,Ka,new Map),fe(this,Ga,new Map),fe(this,li,0)}mount(){kd(this,li)._++,$(this,li)===1&&(fe(this,Qa,pP.subscribe(async t=>{t&&(await this.resumePausedMutations(),$(this,ft).onFocus())})),fe(this,Ya,Tf.subscribe(async t=>{t&&(await this.resumePausedMutations(),$(this,ft).onOnline())})))}unmount(){var t,e;kd(this,li)._--,$(this,li)===0&&((t=$(this,Qa))==null||t.call(this),fe(this,Qa,void 0),(e=$(this,Ya))==null||e.call(this),fe(this,Ya,void 0))}isFetching(t){return $(this,ft).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return $(this,oi).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=$(this,ft).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=$(this,ft).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Oy(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return $(this,ft).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=$(this,ft).get(r.queryHash),i=s==null?void 0:s.state.data,o=HF(e,i);if(o!==void 0)return $(this,ft).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return un.batch(()=>$(this,ft).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=$(this,ft).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=$(this,ft);un.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=$(this,ft);return un.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=un.batch(()=>$(this,ft).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(dr).catch(dr)}invalidateQueries(t,e={}){return un.batch(()=>($(this,ft).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=un.batch(()=>$(this,ft).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(dr)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(dr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=$(this,ft).build(this,e);return n.isStaleByTime(Oy(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(dr).catch(dr)}fetchInfiniteQuery(t){return t.behavior=VT(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(dr).catch(dr)}ensureInfiniteQueryData(t){return t.behavior=VT(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Tf.isOnline()?$(this,oi).resumePausedMutations():Promise.resolve()}getQueryCache(){return $(this,ft)}getMutationCache(){return $(this,oi)}getDefaultOptions(){return $(this,ai)}setDefaultOptions(t){fe(this,ai,t)}setQueryDefaults(t,e){$(this,Ka).set(wu(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...$(this,Ka).values()],n={};return e.forEach(r=>{Eu(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){$(this,Ga).set(wu(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...$(this,Ga).values()],n={};return e.forEach(r=>{Eu(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...$(this,ai).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=L_(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===M_&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...$(this,ai).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){$(this,ft).clear(),$(this,oi).clear()}},ft=new WeakMap,oi=new WeakMap,ai=new WeakMap,Ka=new WeakMap,Ga=new WeakMap,li=new WeakMap,Qa=new WeakMap,Ya=new WeakMap,Rb),p4=A.createContext(void 0),m4=({client:t,children:e})=>(A.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),x.jsx(p4.Provider,{value:t,children:e}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Tu(){return Tu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Tu.apply(this,arguments)}var di;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(di||(di={}));const MT="popstate";function g4(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return If("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Iu(s)}return vP(e,n,null,t)}function y4(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:a="",hash:l=""}=ea(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),If("",{pathname:o,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=s.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof i=="string"?i:Iu(i))}function r(s,i){F_(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return vP(e,n,r,t)}function _t(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function F_(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function v4(){return Math.random().toString(36).substr(2,8)}function FT(t,e){return{usr:t.state,key:t.key,idx:e}}function If(t,e,n,r){return n===void 0&&(n=null),Tu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ea(e):e,{state:n,key:e&&e.key||r||v4()})}function Iu(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ea(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function vP(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=di.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(Tu({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=di.Pop;let E=d(),w=E==null?null:E-c;c=E,l&&l({action:a,location:y.location,delta:w})}function p(E,w){a=di.Push;let v=If(y.location,E,w);n&&n(v,E),c=d()+1;let I=FT(v,c),D=y.createHref(v);try{o.pushState(I,"",D)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;s.location.assign(D)}i&&l&&l({action:a,location:y.location,delta:1})}function f(E,w){a=di.Replace;let v=If(y.location,E,w);n&&n(v,E),c=d();let I=FT(v,c),D=y.createHref(v);o.replaceState(I,"",D),i&&l&&l({action:a,location:y.location,delta:0})}function _(E){let w=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof E=="string"?E:Iu(E);return v=v.replace(/ $/,"%20"),_t(w,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,w)}let y={get action(){return a},get location(){return t(s,o)},listen(E){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(MT,h),l=E,()=>{s.removeEventListener(MT,h),l=null}},createHref(E){return e(s,E)},createURL:_,encodeLocation(E){let w=_(E);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:p,replace:f,go(E){return o.go(E)}};return y}var UT;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(UT||(UT={}));function _4(t,e,n){return n===void 0&&(n="/"),w4(t,e,n)}function w4(t,e,n,r){let s=typeof e=="string"?ea(e):e,i=U_(s.pathname||"/",n);if(i==null)return null;let o=_P(t);E4(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=N4(i);a=C4(o[l],c)}return a}function _P(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(_t(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Ei([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(_t(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),_P(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:P4(c,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of wP(i.path))s(i,o,l)}),e}function wP(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=wP(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function E4(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:R4(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const T4=/^:[\w-]+$/,I4=3,S4=2,b4=1,A4=10,x4=-2,jT=t=>t==="*";function P4(t,e){let n=t.split("/"),r=n.length;return n.some(jT)&&(r+=x4),e&&(r+=S4),n.filter(s=>!jT(s)).reduce((s,i)=>s+(T4.test(i)?I4:i===""?b4:A4),r)}function R4(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function C4(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=k4({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),p=l.route;if(!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:Ei([i,h.pathname]),pathnameBase:M4(Ei([i,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(i=Ei([i,h.pathnameBase]))}return o}function k4(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=D4(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,d,h)=>{let{paramName:p,isOptional:f}=d;if(p==="*"){let y=a[h]||"";o=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const _=a[h];return f&&!_?c[p]=void 0:c[p]=(_||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function D4(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),F_(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function N4(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return F_(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function U_(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function O4(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?ea(t):t;return{pathname:n?n.startsWith("/")?n:V4(n,e):e,search:F4(r),hash:U4(s)}}function V4(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function og(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function L4(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function j_(t,e){let n=L4(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function B_(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=ea(t):(s=Tu({},t),_t(!s.pathname||!s.pathname.includes("?"),og("?","pathname","search",s)),_t(!s.pathname||!s.pathname.includes("#"),og("#","pathname","hash",s)),_t(!s.search||!s.search.includes("#"),og("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),h-=1;s.pathname=p.join("/")}a=h>=0?e[h]:"/"}let l=O4(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const Ei=t=>t.join("/").replace(/\/\/+/g,"/"),M4=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),F4=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,U4=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function j4(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const EP=["post","put","patch","delete"];new Set(EP);const B4=["get",...EP];new Set(B4);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Su(){return Su=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Su.apply(this,arguments)}const $_=A.createContext(null),$4=A.createContext(null),Ki=A.createContext(null),kp=A.createContext(null),Gi=A.createContext({outlet:null,matches:[],isDataRoute:!1}),TP=A.createContext(null);function z4(t,e){let{relative:n}=e===void 0?{}:e;Nl()||_t(!1);let{basename:r,navigator:s}=A.useContext(Ki),{hash:i,pathname:o,search:a}=SP(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Ei([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Nl(){return A.useContext(kp)!=null}function Zr(){return Nl()||_t(!1),A.useContext(kp).location}function IP(t){A.useContext(Ki).static||A.useLayoutEffect(t)}function Zu(){let{isDataRoute:t}=A.useContext(Gi);return t?nU():q4()}function q4(){Nl()||_t(!1);let t=A.useContext($_),{basename:e,future:n,navigator:r}=A.useContext(Ki),{matches:s}=A.useContext(Gi),{pathname:i}=Zr(),o=JSON.stringify(j_(s,n.v7_relativeSplatPath)),a=A.useRef(!1);return IP(()=>{a.current=!0}),A.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=B_(c,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Ei([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,i,t])}function SP(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=A.useContext(Ki),{matches:s}=A.useContext(Gi),{pathname:i}=Zr(),o=JSON.stringify(j_(s,r.v7_relativeSplatPath));return A.useMemo(()=>B_(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function H4(t,e){return W4(t,e)}function W4(t,e,n,r){Nl()||_t(!1);let{navigator:s}=A.useContext(Ki),{matches:i}=A.useContext(Gi),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Zr(),d;if(e){var h;let E=typeof e=="string"?ea(e):e;l==="/"||(h=E.pathname)!=null&&h.startsWith(l)||_t(!1),d=E}else d=c;let p=d.pathname||"/",f=p;if(l!=="/"){let E=l.replace(/^\//,"").split("/");f="/"+p.replace(/^\//,"").split("/").slice(E.length).join("/")}let _=_4(t,{pathname:f}),y=X4(_&&_.map(E=>Object.assign({},E,{params:Object.assign({},a,E.params),pathname:Ei([l,s.encodeLocation?s.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?l:Ei([l,s.encodeLocation?s.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),i,n,r);return e&&y?A.createElement(kp.Provider,{value:{location:Su({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:di.Pop}},y):y}function K4(){let t=tU(),e=j4(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),n?A.createElement("pre",{style:s},n):null,null)}const G4=A.createElement(K4,null);class Q4 extends A.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?A.createElement(Gi.Provider,{value:this.props.routeContext},A.createElement(TP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Y4(t){let{routeContext:e,match:n,children:r}=t,s=A.useContext($_);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),A.createElement(Gi.Provider,{value:e},r)}function X4(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||_t(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:p,errors:f}=n,_=h.route.loader&&p[h.route.id]===void 0&&(!f||f[h.route.id]===void 0);if(h.route.lazy||_){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,h,p)=>{let f,_=!1,y=null,E=null;n&&(f=a&&h.route.id?a[h.route.id]:void 0,y=h.route.errorElement||G4,l&&(c<0&&p===0?(rU("route-fallback"),_=!0,E=null):c===p&&(_=!0,E=h.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,p+1)),v=()=>{let I;return f?I=y:_?I=E:h.route.Component?I=A.createElement(h.route.Component,null):h.route.element?I=h.route.element:I=d,A.createElement(Y4,{match:h,routeContext:{outlet:d,matches:w,isDataRoute:n!=null},children:I})};return n&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?A.createElement(Q4,{location:n.location,revalidation:n.revalidation,component:y,error:f,children:v(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):v()},null)}var bP=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(bP||{}),AP=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(AP||{});function J4(t){let e=A.useContext($_);return e||_t(!1),e}function Z4(t){let e=A.useContext($4);return e||_t(!1),e}function eU(t){let e=A.useContext(Gi);return e||_t(!1),e}function xP(t){let e=eU(),n=e.matches[e.matches.length-1];return n.route.id||_t(!1),n.route.id}function tU(){var t;let e=A.useContext(TP),n=Z4(),r=xP();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function nU(){let{router:t}=J4(bP.UseNavigateStable),e=xP(AP.UseNavigateStable),n=A.useRef(!1);return IP(()=>{n.current=!0}),A.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Su({fromRouteId:e},i)))},[t,e])}const BT={};function rU(t,e,n){BT[t]||(BT[t]=!0)}function PP(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function I8(t){let{to:e,replace:n,state:r,relative:s}=t;Nl()||_t(!1);let{future:i,static:o}=A.useContext(Ki),{matches:a}=A.useContext(Gi),{pathname:l}=Zr(),c=Zu(),d=B_(e,j_(a,i.v7_relativeSplatPath),l,s==="path"),h=JSON.stringify(d);return A.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:s}),[c,h,s,n,r]),null}function se(t){_t(!1)}function RP(t){let{basename:e="/",children:n=null,location:r,navigationType:s=di.Pop,navigator:i,static:o=!1,future:a}=t;Nl()&&_t(!1);let l=e.replace(/^\/*/,"/"),c=A.useMemo(()=>({basename:l,navigator:i,static:o,future:Su({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=ea(r));let{pathname:d="/",search:h="",hash:p="",state:f=null,key:_="default"}=r,y=A.useMemo(()=>{let E=U_(d,l);return E==null?null:{location:{pathname:E,search:h,hash:p,state:f,key:_},navigationType:s}},[l,d,h,p,f,_,s]);return y==null?null:A.createElement(Ki.Provider,{value:c},A.createElement(kp.Provider,{children:n,value:y}))}function $T(t){let{children:e,location:n}=t;return H4(My(e),n)}new Promise(()=>{});function My(t,e){e===void 0&&(e=[]);let n=[];return A.Children.forEach(t,(r,s)=>{if(!A.isValidElement(r))return;let i=[...e,s];if(r.type===A.Fragment){n.push.apply(n,My(r.props.children,i));return}r.type!==se&&_t(!1),!r.props.index||!r.props.children||_t(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=My(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fy(){return Fy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Fy.apply(this,arguments)}function sU(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function iU(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function oU(t,e){return t.button===0&&(!e||e==="_self")&&!iU(t)}function Uy(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function aU(t,e){let n=Uy(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const lU=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],cU="6";try{window.__reactRouterVersion=cU}catch{}const uU="startTransition",Sf=Bb[uU];function dU(t){let{basename:e,children:n,future:r,window:s}=t,i=A.useRef();i.current==null&&(i.current=g4({window:s,v5Compat:!0}));let o=i.current,[a,l]=A.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=A.useCallback(h=>{c&&Sf?Sf(()=>l(h)):l(h)},[l,c]);return A.useLayoutEffect(()=>o.listen(d),[o,d]),A.useEffect(()=>PP(r),[r]),A.createElement(RP,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}function hU(t){let{basename:e,children:n,future:r,window:s}=t,i=A.useRef();i.current==null&&(i.current=y4({window:s,v5Compat:!0}));let o=i.current,[a,l]=A.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=A.useCallback(h=>{c&&Sf?Sf(()=>l(h)):l(h)},[l,c]);return A.useLayoutEffect(()=>o.listen(d),[o,d]),A.useEffect(()=>PP(r),[r]),A.createElement(RP,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const fU=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",pU=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mU=A.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:h}=e,p=sU(e,lU),{basename:f}=A.useContext(Ki),_,y=!1;if(typeof c=="string"&&pU.test(c)&&(_=c,fU))try{let I=new URL(window.location.href),D=c.startsWith("//")?new URL(I.protocol+c):new URL(c),O=U_(D.pathname,f);D.origin===I.origin&&O!=null?c=O+D.search+D.hash:y=!0}catch{}let E=z4(c,{relative:s}),w=gU(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:s,viewTransition:h});function v(I){r&&r(I),I.defaultPrevented||w(I)}return A.createElement("a",Fy({},p,{href:_||E,onClick:y||i?r:v,ref:n,target:l}))});var zT;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(zT||(zT={}));var qT;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(qT||(qT={}));function gU(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=Zu(),c=Zr(),d=SP(t,{relative:o});return A.useCallback(h=>{if(oU(h,n)){h.preventDefault();let p=r!==void 0?r:Iu(c)===Iu(d);l(t,{replace:p,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,d,r,s,n,t,i,o,a])}function S8(t){let e=A.useRef(Uy(t)),n=A.useRef(!1),r=Zr(),s=A.useMemo(()=>aU(r.search,n.current?null:e.current),[r.search]),i=Zu(),o=A.useCallback((a,l)=>{const c=Uy(typeof a=="function"?a(s):a);n.current=!0,i("?"+c,l)},[i,s]);return[s,o]}const CP=A.createContext(void 0),yU=({children:t})=>{const[e,n]=A.useState("medium"),[r,s]=A.useState(!1),[i,o]=A.useState(!1);A.useEffect(()=>{const l=()=>{const c=window.innerWidth<=768;s(c)};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]),A.useEffect(()=>{try{const l=!!window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron")||typeof window<"u"&&window.location&&window.location.protocol==="file:";o(l)}catch{o(!1)}},[]),A.useEffect(()=>{const l=["appFontSize","desktopFontSize","mobileFontSize"];for(const c of l){const d=localStorage.getItem(c);if(d&&["small","medium","large"].includes(d)){n(d);break}}},[]),A.useEffect(()=>{const l=document.documentElement;l.classList.remove("font-size-small","font-size-medium","font-size-large"),l.classList.add(`font-size-${e}`)},[e]);const a=l=>{n(l),localStorage.setItem("appFontSize",l),i&&localStorage.setItem("desktopFontSize",l)};return x.jsx(CP.Provider,{value:{fontSize:e,setFontSize:a,isMobile:r,isDesktopApp:i},children:t})},b8=()=>{const t=A.useContext(CP);if(t===void 0)throw new Error("useFontSize must be used within a FontSizeProvider");return t},vU=Ex("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),kP=A.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?AO:"button";return x.jsx(o,{className:Rs(vU({variant:e,size:n,className:t})),ref:i,...s})});kP.displayName="Button";const jy=A.forwardRef(({className:t,type:e,...n},r)=>{const s={...n};return Object.prototype.hasOwnProperty.call(s,"value")&&s.value===void 0&&(s.value=""),x.jsx("input",{type:e,className:Rs("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...s})});jy.displayName="Input";const _U=()=>{};var HT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DP=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},wU=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},NP={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=i>>2,h=(i&3)<<4|a>>4;let p=(a&15)<<2|c>>6,f=c&63;l||(f=64,o||(p=64)),r.push(n[d],n[h],n[p],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(DP(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):wU(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new EU;const p=i<<2|a>>4;if(r.push(p),c!==64){const f=a<<4&240|c>>2;if(r.push(f),h!==64){const _=c<<6&192|h;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class EU extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const TU=function(t){const e=DP(t);return NP.encodeByteArray(e,!0)},bf=function(t){return TU(t).replace(/\./g,"")},OP=function(t){try{return NP.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IU=()=>VP().__FIREBASE_DEFAULTS__,SU=()=>{if(typeof process>"u"||typeof HT>"u")return;const t=HT.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},bU=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&OP(t[1]);return e&&JSON.parse(e)},Dp=()=>{try{return _U()||IU()||SU()||bU()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},AU=t=>{var e,n;return(n=(e=Dp())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},LP=t=>{const e=AU(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},MP=()=>{var t;return(t=Dp())==null?void 0:t.config},xU=t=>{var e;return(e=Dp())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PU{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cs(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function z_(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RU(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[bf(JSON.stringify(n)),bf(JSON.stringify(o)),""].join(".")}const $c={};function CU(){const t={prod:[],emulator:[]};for(const e of Object.keys($c))$c[e]?t.emulator.push(e):t.prod.push(e);return t}function kU(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let WT=!1;function FP(t,e){if(typeof window>"u"||typeof document>"u"||!Cs(window.location.host)||$c[t]===e||$c[t]||WT)return;$c[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",i=CU().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function l(p,f){p.setAttribute("width","24"),p.setAttribute("id",f),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function c(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{WT=!0,o()},p}function d(p,f){p.setAttribute("id",f),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function h(){const p=kU(r),f=n("text"),_=document.getElementById(f)||document.createElement("span"),y=n("learnmore"),E=document.getElementById(y)||document.createElement("a"),w=n("preprendIcon"),v=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const I=p.element;a(I),d(E,y);const D=c();l(v,w),I.append(v,_,E,D),document.body.appendChild(I)}i?(_.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",f)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function DU(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wt())}function UP(){var e;const t=(e=Dp())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function NU(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function OU(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function VU(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function LU(){const t=Wt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function jP(){return!UP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function BP(){return!UP()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function $P(){try{return typeof indexedDB=="object"}catch{return!1}}function MU(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FU="FirebaseError";class Ar extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=FU,Object.setPrototypeOf(this,Ar.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ed.prototype.create)}}class ed{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?UU(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Ar(s,a,r)}}function UU(t,e){return t.replace(jU,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const jU=/\{\$([^}]+)}/g;function ol(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(KT(i)&&KT(o)){if(!ol(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function KT(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zP(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ac(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function xc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function BU(t,e){const n=new $U(t,e);return n.subscribe.bind(n)}class $U{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");zU(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=ag),s.error===void 0&&(s.error=ag),s.complete===void 0&&(s.complete=ag);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zU(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ag(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(t){return t&&t._delegate?t._delegate:t}class Ss{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const co="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qU{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new PU;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(WU(e))try{this.getOrInitializeService({instanceIdentifier:co})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=co){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=co){return this.instances.has(e)}getOptions(e=co){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:HU(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=co){return this.component?this.component.multipleInstances?e:co:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function HU(t){return t===co?void 0:t}function WU(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KU{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new qU(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Pe||(Pe={}));const GU={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},QU=Pe.INFO,YU={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},XU=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=YU[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class q_{constructor(e){this.name=e,this._logLevel=QU,this._logHandler=XU,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?GU[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...e),this._logHandler(this,Pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...e),this._logHandler(this,Pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...e),this._logHandler(this,Pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...e),this._logHandler(this,Pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...e),this._logHandler(this,Pe.ERROR,...e)}}const JU=(t,e)=>e.some(n=>t instanceof n);let GT,QT;function ZU(){return GT||(GT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function e6(){return QT||(QT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const qP=new WeakMap,By=new WeakMap,HP=new WeakMap,lg=new WeakMap,H_=new WeakMap;function t6(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Ti(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&qP.set(n,t)}).catch(()=>{}),H_.set(e,t),e}function n6(t){if(By.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});By.set(t,e)}let $y={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return By.get(t);if(e==="objectStoreNames")return t.objectStoreNames||HP.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ti(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function r6(t){$y=t($y)}function s6(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(cg(this),e,...n);return HP.set(r,e.sort?e.sort():[e]),Ti(r)}:e6().includes(t)?function(...e){return t.apply(cg(this),e),Ti(qP.get(this))}:function(...e){return Ti(t.apply(cg(this),e))}}function i6(t){return typeof t=="function"?s6(t):(t instanceof IDBTransaction&&n6(t),JU(t,ZU())?new Proxy(t,$y):t)}function Ti(t){if(t instanceof IDBRequest)return t6(t);if(lg.has(t))return lg.get(t);const e=i6(t);return e!==t&&(lg.set(t,e),H_.set(e,t)),e}const cg=t=>H_.get(t);function o6(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Ti(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ti(o.result),l.oldVersion,l.newVersion,Ti(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const a6=["get","getKey","getAll","getAllKeys","count"],l6=["put","add","delete","clear"],ug=new Map;function YT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ug.get(e))return ug.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=l6.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||a6.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return ug.set(e,i),i}r6(t=>({...t,get:(e,n,r)=>YT(e,n)||t.get(e,n,r),has:(e,n)=>!!YT(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c6{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(u6(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function u6(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const zy="@firebase/app",XT="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs=new q_("@firebase/app"),d6="@firebase/app-compat",h6="@firebase/analytics-compat",f6="@firebase/analytics",p6="@firebase/app-check-compat",m6="@firebase/app-check",g6="@firebase/auth",y6="@firebase/auth-compat",v6="@firebase/database",_6="@firebase/data-connect",w6="@firebase/database-compat",E6="@firebase/functions",T6="@firebase/functions-compat",I6="@firebase/installations",S6="@firebase/installations-compat",b6="@firebase/messaging",A6="@firebase/messaging-compat",x6="@firebase/performance",P6="@firebase/performance-compat",R6="@firebase/remote-config",C6="@firebase/remote-config-compat",k6="@firebase/storage",D6="@firebase/storage-compat",N6="@firebase/firestore",O6="@firebase/ai",V6="@firebase/firestore-compat",L6="firebase",M6="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qy="[DEFAULT]",F6={[zy]:"fire-core",[d6]:"fire-core-compat",[f6]:"fire-analytics",[h6]:"fire-analytics-compat",[m6]:"fire-app-check",[p6]:"fire-app-check-compat",[g6]:"fire-auth",[y6]:"fire-auth-compat",[v6]:"fire-rtdb",[_6]:"fire-data-connect",[w6]:"fire-rtdb-compat",[E6]:"fire-fn",[T6]:"fire-fn-compat",[I6]:"fire-iid",[S6]:"fire-iid-compat",[b6]:"fire-fcm",[A6]:"fire-fcm-compat",[x6]:"fire-perf",[P6]:"fire-perf-compat",[R6]:"fire-rc",[C6]:"fire-rc-compat",[k6]:"fire-gcs",[D6]:"fire-gcs-compat",[N6]:"fire-fst",[V6]:"fire-fst-compat",[O6]:"fire-vertex","fire-js":"fire-js",[L6]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Af=new Map,U6=new Map,Hy=new Map;function JT(t,e){try{t.container.addComponent(e)}catch(n){bs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ni(t){const e=t.name;if(Hy.has(e))return bs.debug(`There were multiple attempts to register component ${e}.`),!1;Hy.set(e,t);for(const n of Af.values())JT(n,t);for(const n of U6.values())JT(n,t);return!0}function Np(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Vn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ii=new ed("app","Firebase",j6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B6{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ss("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ii.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const td=M6;function WP(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:qy,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Ii.create("bad-app-name",{appName:String(s)});if(n||(n=MP()),!n)throw Ii.create("no-options");const i=Af.get(s);if(i){if(ol(n,i.options)&&ol(r,i.config))return i;throw Ii.create("duplicate-app",{appName:s})}const o=new KU(s);for(const l of Hy.values())o.addComponent(l);const a=new B6(n,r,o);return Af.set(s,a),a}function KP(t=qy){const e=Af.get(t);if(!e&&t===qy&&MP())return WP();if(!e)throw Ii.create("no-app",{appName:t});return e}function nr(t,e,n){let r=F6[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),bs.warn(o.join(" "));return}Ni(new Ss(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $6="firebase-heartbeat-database",z6=1,bu="firebase-heartbeat-store";let dg=null;function GP(){return dg||(dg=o6($6,z6,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(bu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ii.create("idb-open",{originalErrorMessage:t.message})})),dg}async function q6(t){try{const n=(await GP()).transaction(bu),r=await n.objectStore(bu).get(QP(t));return await n.done,r}catch(e){if(e instanceof Ar)bs.warn(e.message);else{const n=Ii.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});bs.warn(n.message)}}}async function ZT(t,e){try{const r=(await GP()).transaction(bu,"readwrite");await r.objectStore(bu).put(e,QP(t)),await r.done}catch(n){if(n instanceof Ar)bs.warn(n.message);else{const r=Ii.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});bs.warn(r.message)}}}function QP(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H6=1024,W6=30;class K6{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Q6(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=eI();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>W6){const o=Y6(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){bs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=eI(),{heartbeatsToSend:r,unsentEntries:s}=G6(this._heartbeatsCache.heartbeats),i=bf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return bs.warn(n),""}}}function eI(){return new Date().toISOString().substring(0,10)}function G6(t,e=H6){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),tI(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),tI(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Q6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $P()?MU().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await q6(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return ZT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return ZT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function tI(t){return bf(JSON.stringify({version:2,heartbeats:t})).length}function Y6(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X6(t){Ni(new Ss("platform-logger",e=>new c6(e),"PRIVATE")),Ni(new Ss("heartbeat",e=>new K6(e),"PRIVATE")),nr(zy,XT,t),nr(zy,XT,"esm2020"),nr("fire-js","")}X6("");function YP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const J6=YP,XP=new ed("auth","Firebase",YP());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xf=new q_("@firebase/auth");function Z6(t,...e){xf.logLevel<=Pe.WARN&&xf.warn(`Auth (${td}): ${t}`,...e)}function kh(t,...e){xf.logLevel<=Pe.ERROR&&xf.error(`Auth (${td}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zo(t,...e){throw K_(t,...e)}function W_(t,...e){return K_(t,...e)}function JP(t,e,n){const r={...J6(),[e]:n};return new ed("auth","Firebase",r).create(e,{appName:t.name})}function Si(t){return JP(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function K_(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return XP.create(t,...e)}function Ce(t,e,...n){if(!t)throw K_(e,...n)}function us(t){const e="INTERNAL ASSERTION FAILED: "+t;throw kh(e),new Error(e)}function Pf(t,e){t||us(e)}function e3(){return nI()==="http:"||nI()==="https:"}function nI(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(e3()||OU()||"connection"in navigator)?navigator.onLine:!0}function n3(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e,n){this.shortDelay=e,this.longDelay=n,Pf(n>e,"Short delay should be less than long delay!"),this.isMobile=DU()||VU()}get(){return t3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r3(t,e){Pf(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;us("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;us("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;us("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i3=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],o3=new nd(3e4,6e4);function Qi(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function ks(t,e,n,r,s={}){return eR(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=zP({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:l,...i};return NU()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&Cs(t.emulatorConfig.host)&&(c.credentials="include"),ZP.fetch()(await tR(t,t.config.apiHost,n,a),c)})}async function eR(t,e,n){t._canInitEmulator=!1;const r={...s3,...e};try{const s=new l3(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw eh(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw eh(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw eh(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw eh(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw JP(t,d,c);zo(t,d)}}catch(s){if(s instanceof Ar)throw s;zo(t,"network-request-failed",{message:String(s)})}}async function Op(t,e,n,r,s={}){const i=await ks(t,e,n,r,s);return"mfaPendingCredential"in i&&zo(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function tR(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?r3(t.config,s):`${t.config.apiScheme}://${s}`;return i3.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function a3(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class l3{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(W_(this.auth,"network-request-failed")),o3.get())})}}function eh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=W_(t,e,r);return s.customData._tokenResponse=n,s}function rI(t){return t!==void 0&&t.enterprise!==void 0}class c3{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return a3(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function u3(t,e){return ks(t,"GET","/v2/recaptchaConfig",Qi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d3(t,e){return ks(t,"POST","/v1/accounts:delete",e)}async function Rf(t,e){return ks(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function h3(t,e=!1){const n=He(t),r=await n.getIdToken(e),s=G_(r);Ce(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:zc(hg(s.auth_time)),issuedAtTime:zc(hg(s.iat)),expirationTime:zc(hg(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function hg(t){return Number(t)*1e3}function G_(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return kh("JWT malformed, contained fewer than 3 sections"),null;try{const s=OP(n);return s?JSON.parse(s):(kh("Failed to decode base64 JWT payload"),null)}catch(s){return kh("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function sI(t){const e=G_(t);return Ce(e,"internal-error"),Ce(typeof e.exp<"u","internal-error"),Ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Au(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ar&&f3(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function f3({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=zc(this.lastLoginAt),this.creationTime=zc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cf(t){var h;const e=t.auth,n=await t.getIdToken(),r=await Au(t,Rf(e,{idToken:n}));Ce(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(h=s.providerUserInfo)!=null&&h.length?nR(s.providerUserInfo):[],o=g3(t.providerData,i),a=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),c=a?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Wy(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,d)}async function m3(t){const e=He(t);await Cf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function g3(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function nR(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y3(t,e){const n=await eR(t,{},async()=>{const r=zP({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await tR(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&Cs(t.emulatorConfig.host)&&(l.credentials="include"),ZP.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function v3(t,e){return ks(t,"POST","/v2/accounts:revokeToken",Qi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ce(e.idToken,"internal-error"),Ce(typeof e.idToken<"u","internal-error"),Ce(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):sI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ce(e.length!==0,"internal-error");const n=sI(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await y3(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new ja;return r&&(Ce(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Ce(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Ce(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ja,this.toJSON())}_performRefresh(){return us("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ws(t,e){Ce(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class yr{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new p3(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Wy(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Au(this,this.stsTokenManager.getToken(this.auth,e));return Ce(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return h3(this,e)}reload(){return m3(this)}_assign(e){this!==e&&(Ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new yr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Cf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Vn(this.auth.app))return Promise.reject(Si(this.auth));const e=await this.getIdToken();return await Au(this,d3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,c=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:h,emailVerified:p,isAnonymous:f,providerData:_,stsTokenManager:y}=n;Ce(h&&y,e,"internal-error");const E=ja.fromJSON(this.name,y);Ce(typeof h=="string",e,"internal-error"),Ws(r,e.name),Ws(s,e.name),Ce(typeof p=="boolean",e,"internal-error"),Ce(typeof f=="boolean",e,"internal-error"),Ws(i,e.name),Ws(o,e.name),Ws(a,e.name),Ws(l,e.name),Ws(c,e.name),Ws(d,e.name);const w=new yr({uid:h,auth:e,email:s,emailVerified:p,displayName:r,isAnonymous:f,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:E,createdAt:c,lastLoginAt:d});return _&&Array.isArray(_)&&(w.providerData=_.map(v=>({...v}))),l&&(w._redirectEventId=l),w}static async _fromIdTokenResponse(e,n,r=!1){const s=new ja;s.updateFromServerResponse(n);const i=new yr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Cf(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Ce(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?nR(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new ja;a.updateFromIdToken(r);const l=new yr({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Wy(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI=new Map;function To(t){Pf(t instanceof Function,"Expected a class definition");let e=iI.get(t);return e?(Pf(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,iI.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}rR.type="NONE";const Ky=rR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fg(t,e,n){return`firebase:${t}:${e}:${n}`}class Ba{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=fg(this.userKey,s.apiKey,i),this.fullPersistenceKey=fg("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Rf(this.auth,{idToken:e}).catch(()=>{});return n?yr._fromGetAccountInfoResponse(this.auth,n,e):null}return yr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ba(To(Ky),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||To(Ky);const o=fg(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){let h;if(typeof d=="string"){const p=await Rf(e,{idToken:d}).catch(()=>{});if(!p)break;h=await yr._fromGetAccountInfoResponse(e,p,d)}else h=yr._fromJSON(e,d);c!==i&&(a=h),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Ba(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new Ba(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oI(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(sR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(_3(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(oR(e))return"Blackberry";if(aR(e))return"Webos";if(w3(e))return"Safari";if((e.includes("chrome/")||E3(e))&&!e.includes("edge/"))return"Chrome";if(iR(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function _3(t=Wt()){return/firefox\//i.test(t)}function w3(t=Wt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function E3(t=Wt()){return/crios\//i.test(t)}function sR(t=Wt()){return/iemobile/i.test(t)}function iR(t=Wt()){return/android/i.test(t)}function oR(t=Wt()){return/blackberry/i.test(t)}function aR(t=Wt()){return/webos/i.test(t)}function T3(t=Wt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function I3(){return LU()&&document.documentMode===10}function S3(t=Wt()){return T3(t)||iR(t)||aR(t)||oR(t)||/windows phone/i.test(t)||sR(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lR(t,e=[]){let n;switch(t){case"Browser":n=oI(Wt());break;case"Worker":n=`${oI(Wt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${td}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A3(t,e={}){return ks(t,"GET","/v2/passwordPolicy",Qi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x3=6;class P3{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??x3,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new aI(this),this.idTokenSubscription=new aI(this),this.beforeStateQueue=new b3(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=XP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=To(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Ba.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Rf(this,{idToken:e}),r=await yr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Vn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Cf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=n3()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Vn(this.app))return Promise.reject(Si(this));const n=e?He(e):null;return n&&Ce(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Vn(this.app)?Promise.reject(Si(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Vn(this.app)?Promise.reject(Si(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(To(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await A3(this),n=new P3(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ed("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await v3(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&To(e)||this._popupRedirectResolver;Ce(n,this,"argument-error"),this.redirectPersistenceManager=await Ba.create(this,[To(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ce(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=lR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Vn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&Z6(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Ol(t){return He(t)}class aI{constructor(e){this.auth=e,this.observer=null,this.addObserver=BU(n=>this.observer=n)}get next(){return Ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Q_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function C3(t){Q_=t}function k3(t){return Q_.loadJS(t)}function D3(){return Q_.recaptchaEnterpriseScript}class N3{constructor(){this.enterprise=new O3}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class O3{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const V3="recaptcha-enterprise",cR="NO_RECAPTCHA";class L3{constructor(e){this.type=V3,this.auth=Ol(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{u3(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new c3(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;rI(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(cR)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new N3().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&rI(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=D3();l.length!==0&&(l+=a),k3(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function lI(t,e,n,r=!1,s=!1){const i=new L3(t);let o;if(s)o=cR;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function kf(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await lI(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await lI(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M3(t,e){const n=Np(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(ol(i,e??{}))return s;zo(s,"already-initialized")}return n.initialize({options:e})}function F3(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(To);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return us("not implemented")}_getIdTokenResponse(e){return us("not implemented")}_linkToIdToken(e,n){return us("not implemented")}_getReauthenticationResolver(e){return us("not implemented")}}async function j3(t,e){return ks(t,"POST","/v1/accounts:update",e)}async function B3(t,e){return ks(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $3(t,e){return Op(t,"POST","/v1/accounts:signInWithPassword",Qi(t,e))}async function z3(t,e){return ks(t,"POST","/v1/accounts:sendOobCode",Qi(t,e))}async function q3(t,e){return z3(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H3(t,e){return Op(t,"POST","/v1/accounts:signInWithEmailLink",Qi(t,e))}async function W3(t,e){return Op(t,"POST","/v1/accounts:signInWithEmailLink",Qi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu extends U3{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new xu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new xu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return kf(e,n,"signInWithPassword",$3);case"emailLink":return H3(e,{email:this._email,oobCode:this._password});default:zo(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return kf(e,r,"signUpPassword",B3);case"emailLink":return W3(e,{idToken:n,email:this._email,oobCode:this._password});default:zo(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K3(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function G3(t){const e=Ac(xc(t)).link,n=e?Ac(xc(e)).deep_link_id:null,r=Ac(xc(t)).deep_link_id;return(r?Ac(xc(r)).link:null)||r||n||e||t}class Y_{constructor(e){const n=Ac(xc(e)),r=n.apiKey??null,s=n.oobCode??null,i=K3(n.mode??null);Ce(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=G3(e);try{return new Y_(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(){this.providerId=Vl.PROVIDER_ID}static credential(e,n){return xu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Y_.parseLink(n);return Ce(r,"argument-error"),xu._fromEmailAndCode(e,r.code,r.tenantId)}}Vl.PROVIDER_ID="password";Vl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Vl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q3(t,e){return Op(t,"POST","/v1/accounts:signUp",Qi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await yr._fromIdTokenResponse(e,r,s),o=cI(r);return new al({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=cI(r);return new al({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function cI(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df extends Ar{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Df.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Df(e,n,r,s)}}function uR(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Df._fromErrorAndOperation(t,i,e,r):i})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y3(t,e,n=!1){const{auth:r}=t;if(Vn(r.app))return Promise.reject(Si(r));const s="reauthenticate";try{const i=await Au(t,uR(r,s,e,t),n);Ce(i.idToken,r,"internal-error");const o=G_(i.idToken);Ce(o,r,"internal-error");const{sub:a}=o;return Ce(t.uid===a,r,"user-mismatch"),al._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&zo(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X3(t,e,n=!1){if(Vn(t.app))return Promise.reject(Si(t));const r="signIn",s=await uR(t,r,e),i=await al._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function J3(t,e){return X3(Ol(t),e)}async function A8(t,e){return Y3(He(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dR(t){const e=Ol(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Z3(t,e,n){const r=Ol(t);await kf(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",q3)}async function uI(t,e,n){if(Vn(t.app))return Promise.reject(Si(t));const r=Ol(t),o=await kf(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Q3).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&dR(t),l}),a=await al._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function ej(t,e,n){return Vn(t.app)?Promise.reject(Si(t)):J3(He(t),Vl.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&dR(t),r})}function x8(t,e){return tj(He(t),null,e)}async function tj(t,e,n){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(i.password=n);const o=await Au(t,j3(r,i));await t._updateTokensIfNecessary(o,!0)}function nj(t,e,n,r){return He(t).onAuthStateChanged(e,n,r)}function dI(t){return He(t).signOut()}const hI="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(hI,"1"),this.storage.removeItem(hI),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rj=1e3,sj=10;class fR extends hR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=S3(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);I3()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,sj):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},rj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}fR.type="LOCAL";const ij=fR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj extends hR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}oj.type="SESSION";new nd(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new nd(2e3,1e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new nd(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new nd(5e3,15e3);var fI="@firebase/auth",pI="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lj(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function cj(t){Ni(new Ss("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Ce(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:lR(t)},c=new R3(r,s,i,l);return F3(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ni(new Ss("auth-internal",e=>{const n=Ol(e.getProvider("auth").getImmediate());return(r=>new aj(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),nr(fI,pI,lj(t)),nr(fI,pI,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uj=5*60;xU("authIdTokenMaxAge");function dj(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}C3({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=W_("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",dj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});cj("Browser");var hj="firebase",fj="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nr(hj,fj,"app");var mI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bi,pR;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,T){function b(){}b.prototype=T.prototype,S.F=T.prototype,S.prototype=new b,S.prototype.constructor=S,S.D=function(k,P,N){for(var C=Array(arguments.length-2),q=2;q<arguments.length;q++)C[q-2]=arguments[q];return T.prototype[P].apply(k,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,T,b){b||(b=0);const k=Array(16);if(typeof T=="string")for(var P=0;P<16;++P)k[P]=T.charCodeAt(b++)|T.charCodeAt(b++)<<8|T.charCodeAt(b++)<<16|T.charCodeAt(b++)<<24;else for(P=0;P<16;++P)k[P]=T[b++]|T[b++]<<8|T[b++]<<16|T[b++]<<24;T=S.g[0],b=S.g[1],P=S.g[2];let N=S.g[3],C;C=T+(N^b&(P^N))+k[0]+3614090360&4294967295,T=b+(C<<7&4294967295|C>>>25),C=N+(P^T&(b^P))+k[1]+3905402710&4294967295,N=T+(C<<12&4294967295|C>>>20),C=P+(b^N&(T^b))+k[2]+606105819&4294967295,P=N+(C<<17&4294967295|C>>>15),C=b+(T^P&(N^T))+k[3]+3250441966&4294967295,b=P+(C<<22&4294967295|C>>>10),C=T+(N^b&(P^N))+k[4]+4118548399&4294967295,T=b+(C<<7&4294967295|C>>>25),C=N+(P^T&(b^P))+k[5]+1200080426&4294967295,N=T+(C<<12&4294967295|C>>>20),C=P+(b^N&(T^b))+k[6]+2821735955&4294967295,P=N+(C<<17&4294967295|C>>>15),C=b+(T^P&(N^T))+k[7]+4249261313&4294967295,b=P+(C<<22&4294967295|C>>>10),C=T+(N^b&(P^N))+k[8]+1770035416&4294967295,T=b+(C<<7&4294967295|C>>>25),C=N+(P^T&(b^P))+k[9]+2336552879&4294967295,N=T+(C<<12&4294967295|C>>>20),C=P+(b^N&(T^b))+k[10]+4294925233&4294967295,P=N+(C<<17&4294967295|C>>>15),C=b+(T^P&(N^T))+k[11]+2304563134&4294967295,b=P+(C<<22&4294967295|C>>>10),C=T+(N^b&(P^N))+k[12]+1804603682&4294967295,T=b+(C<<7&4294967295|C>>>25),C=N+(P^T&(b^P))+k[13]+4254626195&4294967295,N=T+(C<<12&4294967295|C>>>20),C=P+(b^N&(T^b))+k[14]+2792965006&4294967295,P=N+(C<<17&4294967295|C>>>15),C=b+(T^P&(N^T))+k[15]+1236535329&4294967295,b=P+(C<<22&4294967295|C>>>10),C=T+(P^N&(b^P))+k[1]+4129170786&4294967295,T=b+(C<<5&4294967295|C>>>27),C=N+(b^P&(T^b))+k[6]+3225465664&4294967295,N=T+(C<<9&4294967295|C>>>23),C=P+(T^b&(N^T))+k[11]+643717713&4294967295,P=N+(C<<14&4294967295|C>>>18),C=b+(N^T&(P^N))+k[0]+3921069994&4294967295,b=P+(C<<20&4294967295|C>>>12),C=T+(P^N&(b^P))+k[5]+3593408605&4294967295,T=b+(C<<5&4294967295|C>>>27),C=N+(b^P&(T^b))+k[10]+38016083&4294967295,N=T+(C<<9&4294967295|C>>>23),C=P+(T^b&(N^T))+k[15]+3634488961&4294967295,P=N+(C<<14&4294967295|C>>>18),C=b+(N^T&(P^N))+k[4]+3889429448&4294967295,b=P+(C<<20&4294967295|C>>>12),C=T+(P^N&(b^P))+k[9]+568446438&4294967295,T=b+(C<<5&4294967295|C>>>27),C=N+(b^P&(T^b))+k[14]+3275163606&4294967295,N=T+(C<<9&4294967295|C>>>23),C=P+(T^b&(N^T))+k[3]+4107603335&4294967295,P=N+(C<<14&4294967295|C>>>18),C=b+(N^T&(P^N))+k[8]+1163531501&4294967295,b=P+(C<<20&4294967295|C>>>12),C=T+(P^N&(b^P))+k[13]+2850285829&4294967295,T=b+(C<<5&4294967295|C>>>27),C=N+(b^P&(T^b))+k[2]+4243563512&4294967295,N=T+(C<<9&4294967295|C>>>23),C=P+(T^b&(N^T))+k[7]+1735328473&4294967295,P=N+(C<<14&4294967295|C>>>18),C=b+(N^T&(P^N))+k[12]+2368359562&4294967295,b=P+(C<<20&4294967295|C>>>12),C=T+(b^P^N)+k[5]+4294588738&4294967295,T=b+(C<<4&4294967295|C>>>28),C=N+(T^b^P)+k[8]+2272392833&4294967295,N=T+(C<<11&4294967295|C>>>21),C=P+(N^T^b)+k[11]+1839030562&4294967295,P=N+(C<<16&4294967295|C>>>16),C=b+(P^N^T)+k[14]+4259657740&4294967295,b=P+(C<<23&4294967295|C>>>9),C=T+(b^P^N)+k[1]+2763975236&4294967295,T=b+(C<<4&4294967295|C>>>28),C=N+(T^b^P)+k[4]+1272893353&4294967295,N=T+(C<<11&4294967295|C>>>21),C=P+(N^T^b)+k[7]+4139469664&4294967295,P=N+(C<<16&4294967295|C>>>16),C=b+(P^N^T)+k[10]+3200236656&4294967295,b=P+(C<<23&4294967295|C>>>9),C=T+(b^P^N)+k[13]+681279174&4294967295,T=b+(C<<4&4294967295|C>>>28),C=N+(T^b^P)+k[0]+3936430074&4294967295,N=T+(C<<11&4294967295|C>>>21),C=P+(N^T^b)+k[3]+3572445317&4294967295,P=N+(C<<16&4294967295|C>>>16),C=b+(P^N^T)+k[6]+76029189&4294967295,b=P+(C<<23&4294967295|C>>>9),C=T+(b^P^N)+k[9]+3654602809&4294967295,T=b+(C<<4&4294967295|C>>>28),C=N+(T^b^P)+k[12]+3873151461&4294967295,N=T+(C<<11&4294967295|C>>>21),C=P+(N^T^b)+k[15]+530742520&4294967295,P=N+(C<<16&4294967295|C>>>16),C=b+(P^N^T)+k[2]+3299628645&4294967295,b=P+(C<<23&4294967295|C>>>9),C=T+(P^(b|~N))+k[0]+4096336452&4294967295,T=b+(C<<6&4294967295|C>>>26),C=N+(b^(T|~P))+k[7]+1126891415&4294967295,N=T+(C<<10&4294967295|C>>>22),C=P+(T^(N|~b))+k[14]+2878612391&4294967295,P=N+(C<<15&4294967295|C>>>17),C=b+(N^(P|~T))+k[5]+4237533241&4294967295,b=P+(C<<21&4294967295|C>>>11),C=T+(P^(b|~N))+k[12]+1700485571&4294967295,T=b+(C<<6&4294967295|C>>>26),C=N+(b^(T|~P))+k[3]+2399980690&4294967295,N=T+(C<<10&4294967295|C>>>22),C=P+(T^(N|~b))+k[10]+4293915773&4294967295,P=N+(C<<15&4294967295|C>>>17),C=b+(N^(P|~T))+k[1]+2240044497&4294967295,b=P+(C<<21&4294967295|C>>>11),C=T+(P^(b|~N))+k[8]+1873313359&4294967295,T=b+(C<<6&4294967295|C>>>26),C=N+(b^(T|~P))+k[15]+4264355552&4294967295,N=T+(C<<10&4294967295|C>>>22),C=P+(T^(N|~b))+k[6]+2734768916&4294967295,P=N+(C<<15&4294967295|C>>>17),C=b+(N^(P|~T))+k[13]+1309151649&4294967295,b=P+(C<<21&4294967295|C>>>11),C=T+(P^(b|~N))+k[4]+4149444226&4294967295,T=b+(C<<6&4294967295|C>>>26),C=N+(b^(T|~P))+k[11]+3174756917&4294967295,N=T+(C<<10&4294967295|C>>>22),C=P+(T^(N|~b))+k[2]+718787259&4294967295,P=N+(C<<15&4294967295|C>>>17),C=b+(N^(P|~T))+k[9]+3951481745&4294967295,S.g[0]=S.g[0]+T&4294967295,S.g[1]=S.g[1]+(P+(C<<21&4294967295|C>>>11))&4294967295,S.g[2]=S.g[2]+P&4294967295,S.g[3]=S.g[3]+N&4294967295}r.prototype.v=function(S,T){T===void 0&&(T=S.length);const b=T-this.blockSize,k=this.C;let P=this.h,N=0;for(;N<T;){if(P==0)for(;N<=b;)s(this,S,N),N+=this.blockSize;if(typeof S=="string"){for(;N<T;)if(k[P++]=S.charCodeAt(N++),P==this.blockSize){s(this,k),P=0;break}}else for(;N<T;)if(k[P++]=S[N++],P==this.blockSize){s(this,k),P=0;break}}this.h=P,this.o+=T},r.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var T=1;T<S.length-8;++T)S[T]=0;T=this.o*8;for(var b=S.length-8;b<S.length;++b)S[b]=T&255,T/=256;for(this.v(S),S=Array(16),T=0,b=0;b<4;++b)for(let k=0;k<32;k+=8)S[T++]=this.g[b]>>>k&255;return S};function i(S,T){var b=a;return Object.prototype.hasOwnProperty.call(b,S)?b[S]:b[S]=T(S)}function o(S,T){this.h=T;const b=[];let k=!0;for(let P=S.length-1;P>=0;P--){const N=S[P]|0;k&&N==T||(b[P]=N,k=!1)}this.g=b}var a={};function l(S){return-128<=S&&S<128?i(S,function(T){return new o([T|0],T<0?-1:0)}):new o([S|0],S<0?-1:0)}function c(S){if(isNaN(S)||!isFinite(S))return h;if(S<0)return E(c(-S));const T=[];let b=1;for(let k=0;S>=b;k++)T[k]=S/b|0,b*=4294967296;return new o(T,0)}function d(S,T){if(S.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(S.charAt(0)=="-")return E(d(S.substring(1),T));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const b=c(Math.pow(T,8));let k=h;for(let N=0;N<S.length;N+=8){var P=Math.min(8,S.length-N);const C=parseInt(S.substring(N,N+P),T);P<8?(P=c(Math.pow(T,P)),k=k.j(P).add(c(C))):(k=k.j(b),k=k.add(c(C)))}return k}var h=l(0),p=l(1),f=l(16777216);t=o.prototype,t.m=function(){if(y(this))return-E(this).m();let S=0,T=1;for(let b=0;b<this.g.length;b++){const k=this.i(b);S+=(k>=0?k:4294967296+k)*T,T*=4294967296}return S},t.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(_(this))return"0";if(y(this))return"-"+E(this).toString(S);const T=c(Math.pow(S,6));var b=this;let k="";for(;;){const P=D(b,T).g;b=w(b,P.j(T));let N=((b.g.length>0?b.g[0]:b.h)>>>0).toString(S);if(b=P,_(b))return N+k;for(;N.length<6;)N="0"+N;k=N+k}},t.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function _(S){if(S.h!=0)return!1;for(let T=0;T<S.g.length;T++)if(S.g[T]!=0)return!1;return!0}function y(S){return S.h==-1}t.l=function(S){return S=w(this,S),y(S)?-1:_(S)?0:1};function E(S){const T=S.g.length,b=[];for(let k=0;k<T;k++)b[k]=~S.g[k];return new o(b,~S.h).add(p)}t.abs=function(){return y(this)?E(this):this},t.add=function(S){const T=Math.max(this.g.length,S.g.length),b=[];let k=0;for(let P=0;P<=T;P++){let N=k+(this.i(P)&65535)+(S.i(P)&65535),C=(N>>>16)+(this.i(P)>>>16)+(S.i(P)>>>16);k=C>>>16,N&=65535,C&=65535,b[P]=C<<16|N}return new o(b,b[b.length-1]&-2147483648?-1:0)};function w(S,T){return S.add(E(T))}t.j=function(S){if(_(this)||_(S))return h;if(y(this))return y(S)?E(this).j(E(S)):E(E(this).j(S));if(y(S))return E(this.j(E(S)));if(this.l(f)<0&&S.l(f)<0)return c(this.m()*S.m());const T=this.g.length+S.g.length,b=[];for(var k=0;k<2*T;k++)b[k]=0;for(k=0;k<this.g.length;k++)for(let P=0;P<S.g.length;P++){const N=this.i(k)>>>16,C=this.i(k)&65535,q=S.i(P)>>>16,Z=S.i(P)&65535;b[2*k+2*P]+=C*Z,v(b,2*k+2*P),b[2*k+2*P+1]+=N*Z,v(b,2*k+2*P+1),b[2*k+2*P+1]+=C*q,v(b,2*k+2*P+1),b[2*k+2*P+2]+=N*q,v(b,2*k+2*P+2)}for(S=0;S<T;S++)b[S]=b[2*S+1]<<16|b[2*S];for(S=T;S<2*T;S++)b[S]=0;return new o(b,0)};function v(S,T){for(;(S[T]&65535)!=S[T];)S[T+1]+=S[T]>>>16,S[T]&=65535,T++}function I(S,T){this.g=S,this.h=T}function D(S,T){if(_(T))throw Error("division by zero");if(_(S))return new I(h,h);if(y(S))return T=D(E(S),T),new I(E(T.g),E(T.h));if(y(T))return T=D(S,E(T)),new I(E(T.g),T.h);if(S.g.length>30){if(y(S)||y(T))throw Error("slowDivide_ only works with positive integers.");for(var b=p,k=T;k.l(S)<=0;)b=O(b),k=O(k);var P=V(b,1),N=V(k,1);for(k=V(k,2),b=V(b,2);!_(k);){var C=N.add(k);C.l(S)<=0&&(P=P.add(b),N=C),k=V(k,1),b=V(b,1)}return T=w(S,P.j(T)),new I(P,T)}for(P=h;S.l(T)>=0;){for(b=Math.max(1,Math.floor(S.m()/T.m())),k=Math.ceil(Math.log(b)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),N=c(b),C=N.j(T);y(C)||C.l(S)>0;)b-=k,N=c(b),C=N.j(T);_(N)&&(N=p),P=P.add(N),S=w(S,C)}return new I(P,S)}t.B=function(S){return D(this,S).h},t.and=function(S){const T=Math.max(this.g.length,S.g.length),b=[];for(let k=0;k<T;k++)b[k]=this.i(k)&S.i(k);return new o(b,this.h&S.h)},t.or=function(S){const T=Math.max(this.g.length,S.g.length),b=[];for(let k=0;k<T;k++)b[k]=this.i(k)|S.i(k);return new o(b,this.h|S.h)},t.xor=function(S){const T=Math.max(this.g.length,S.g.length),b=[];for(let k=0;k<T;k++)b[k]=this.i(k)^S.i(k);return new o(b,this.h^S.h)};function O(S){const T=S.g.length+1,b=[];for(let k=0;k<T;k++)b[k]=S.i(k)<<1|S.i(k-1)>>>31;return new o(b,S.h)}function V(S,T){const b=T>>5;T%=32;const k=S.g.length-b,P=[];for(let N=0;N<k;N++)P[N]=T>0?S.i(N+b)>>>T|S.i(N+b+1)<<32-T:S.i(N+b);return new o(P,S.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,pR=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,bi=o}).apply(typeof mI<"u"?mI:typeof self<"u"?self:typeof window<"u"?window:{});var th=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mR,Pc,gR,Dh,Gy,yR,vR,_R;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof th=="object"&&th];for(var m=0;m<u.length;++m){var g=u[m];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function s(u,m){if(m)e:{var g=r;u=u.split(".");for(var R=0;R<u.length-1;R++){var M=u[R];if(!(M in g))break e;g=g[M]}u=u[u.length-1],R=g[u],m=m(R),m!=R&&m!=null&&e(g,u,{configurable:!0,writable:!0,value:m})}}s("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(u){return u||function(m){var g=[],R;for(R in m)Object.prototype.hasOwnProperty.call(m,R)&&g.push([R,m[R]]);return g}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function l(u,m,g){return u.call.apply(u.bind,arguments)}function c(u,m,g){return c=l,c.apply(null,arguments)}function d(u,m){var g=Array.prototype.slice.call(arguments,1);return function(){var R=g.slice();return R.push.apply(R,arguments),u.apply(this,R)}}function h(u,m){function g(){}g.prototype=m.prototype,u.Z=m.prototype,u.prototype=new g,u.prototype.constructor=u,u.Ob=function(R,M,j){for(var X=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)X[Ee-2]=arguments[Ee];return m.prototype[M].apply(R,X)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function f(u){const m=u.length;if(m>0){const g=Array(m);for(let R=0;R<m;R++)g[R]=u[R];return g}return[]}function _(u,m){for(let R=1;R<arguments.length;R++){const M=arguments[R];var g=typeof M;if(g=g!="object"?g:M?Array.isArray(M)?"array":g:"null",g=="array"||g=="object"&&typeof M.length=="number"){g=u.length||0;const j=M.length||0;u.length=g+j;for(let X=0;X<j;X++)u[g+X]=M[X]}else u.push(M)}}class y{constructor(m,g){this.i=m,this.j=g,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function E(u){o.setTimeout(()=>{throw u},0)}function w(){var u=S;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class v{constructor(){this.h=this.g=null}add(m,g){const R=I.get();R.set(m,g),this.h?this.h.next=R:this.g=R,this.h=R}}var I=new y(()=>new D,u=>u.reset());class D{constructor(){this.next=this.g=this.h=null}set(m,g){this.h=m,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let O,V=!1,S=new v,T=()=>{const u=Promise.resolve(void 0);O=()=>{u.then(b)}};function b(){for(var u;u=w();){try{u.h.call(u.g)}catch(g){E(g)}var m=I;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}V=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var N=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const g=()=>{};o.addEventListener("test",g,m),o.removeEventListener("test",g,m)}catch{}return u}();function C(u){return/^[\s\xa0]*$/.test(u)}function q(u,m){P.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}h(q,P),q.prototype.init=function(u,m){const g=this.type=u.type,R=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(g=="mouseover"?m=u.fromElement:g=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&q.Z.h.call(this)},q.prototype.h=function(){q.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Z="closure_listenable_"+(Math.random()*1e6|0),ie=0;function G(u,m,g,R,M){this.listener=u,this.proxy=null,this.src=m,this.type=g,this.capture=!!R,this.ha=M,this.key=++ie,this.da=this.fa=!1}function F(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function U(u,m,g){for(const R in u)m.call(g,u[R],R,u)}function Y(u,m){for(const g in u)m.call(void 0,u[g],g,u)}function de(u){const m={};for(const g in u)m[g]=u[g];return m}const ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ce(u,m){let g,R;for(let M=1;M<arguments.length;M++){R=arguments[M];for(g in R)u[g]=R[g];for(let j=0;j<ne.length;j++)g=ne[j],Object.prototype.hasOwnProperty.call(R,g)&&(u[g]=R[g])}}function le(u){this.src=u,this.g={},this.h=0}le.prototype.add=function(u,m,g,R,M){const j=u.toString();u=this.g[j],u||(u=this.g[j]=[],this.h++);const X=Qe(u,m,R,M);return X>-1?(m=u[X],g||(m.fa=!1)):(m=new G(m,this.src,j,!!R,M),m.fa=g,u.push(m)),m};function we(u,m){const g=m.type;if(g in u.g){var R=u.g[g],M=Array.prototype.indexOf.call(R,m,void 0),j;(j=M>=0)&&Array.prototype.splice.call(R,M,1),j&&(F(m),u.g[g].length==0&&(delete u.g[g],u.h--))}}function Qe(u,m,g,R){for(let M=0;M<u.length;++M){const j=u[M];if(!j.da&&j.listener==m&&j.capture==!!g&&j.ha==R)return M}return-1}var ae="closure_lm_"+(Math.random()*1e6|0),me={};function Se(u,m,g,R,M){if(Array.isArray(m)){for(let j=0;j<m.length;j++)Se(u,m[j],g,R,M);return null}return g=Vs(g),u&&u[Z]?u.J(m,g,a(R)?!!R.capture:!1,M):Et(u,m,g,!1,R,M)}function Et(u,m,g,R,M,j){if(!m)throw Error("Invalid event type");const X=a(M)?!!M.capture:!!M;let Ee=ge(u);if(Ee||(u[ae]=Ee=new le(u)),g=Ee.add(m,g,R,X,j),g.proxy)return g;if(R=Nt(),g.proxy=R,R.src=u,R.listener=g,u.addEventListener)N||(M=X),M===void 0&&(M=!1),u.addEventListener(m.toString(),R,M);else if(u.attachEvent)u.attachEvent(gn(m.toString()),R);else if(u.addListener&&u.removeListener)u.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return g}function Nt(){function u(g){return m.call(u.src,u.listener,g)}const m=Pr;return u}function Kt(u,m,g,R,M){if(Array.isArray(m))for(var j=0;j<m.length;j++)Kt(u,m[j],g,R,M);else R=a(R)?!!R.capture:!!R,g=Vs(g),u&&u[Z]?(u=u.i,j=String(m).toString(),j in u.g&&(m=u.g[j],g=Qe(m,g,R,M),g>-1&&(F(m[g]),Array.prototype.splice.call(m,g,1),m.length==0&&(delete u.g[j],u.h--)))):u&&(u=ge(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Qe(m,g,R,M)),(g=u>-1?m[u]:null)&&Bt(g))}function Bt(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Z])we(m.i,u);else{var g=u.type,R=u.proxy;m.removeEventListener?m.removeEventListener(g,R,u.capture):m.detachEvent?m.detachEvent(gn(g),R):m.addListener&&m.removeListener&&m.removeListener(R),(g=ge(m))?(we(g,u),g.h==0&&(g.src=null,m[ae]=null)):F(u)}}}function gn(u){return u in me?me[u]:me[u]="on"+u}function Pr(u,m){if(u.da)u=!0;else{m=new q(m,this);const g=u.listener,R=u.ha||u.src;u.fa&&Bt(u),u=g.call(R,m)}return u}function ge(u){return u=u[ae],u instanceof le?u:null}var Gn="__closure_events_fn_"+(Math.random()*1e9>>>0);function Vs(u){return typeof u=="function"?u:(u[Gn]||(u[Gn]=function(m){return u.handleEvent(m)}),u[Gn])}function at(){k.call(this),this.i=new le(this),this.M=this,this.G=null}h(at,k),at.prototype[Z]=!0,at.prototype.removeEventListener=function(u,m,g,R){Kt(this,u,m,g,R)};function Ot(u,m){var g,R=u.G;if(R)for(g=[];R;R=R.G)g.push(R);if(u=u.M,R=m.type||m,typeof m=="string")m=new P(m,u);else if(m instanceof P)m.target=m.target||u;else{var M=m;m=new P(R,u),ce(m,M)}M=!0;let j,X;if(g)for(X=g.length-1;X>=0;X--)j=m.g=g[X],M=Rr(j,R,!0,m)&&M;if(j=m.g=u,M=Rr(j,R,!0,m)&&M,M=Rr(j,R,!1,m)&&M,g)for(X=0;X<g.length;X++)j=m.g=g[X],M=Rr(j,R,!1,m)&&M}at.prototype.N=function(){if(at.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const g=u.g[m];for(let R=0;R<g.length;R++)F(g[R]);delete u.g[m],u.h--}}this.G=null},at.prototype.J=function(u,m,g,R){return this.i.add(String(u),m,!1,g,R)},at.prototype.K=function(u,m,g,R){return this.i.add(String(u),m,!0,g,R)};function Rr(u,m,g,R){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let M=!0;for(let j=0;j<m.length;++j){const X=m[j];if(X&&!X.da&&X.capture==g){const Ee=X.listener,Pt=X.ha||X.src;X.fa&&we(u.i,X),M=Ee.call(Pt,R)!==!1&&M}}return M&&!R.defaultPrevented}function vd(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=c(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:o.setTimeout(u,m||0)}function Cr(u){u.g=vd(()=>{u.g=null,u.i&&(u.i=!1,Cr(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class um extends k{constructor(m,g){super(),this.m=m,this.l=g,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Cr(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function eo(u){k.call(this),this.h=u,this.g={}}h(eo,k);var on=[];function es(u){U(u.g,function(m,g){this.g.hasOwnProperty(g)&&Bt(m)},u),u.g={}}eo.prototype.N=function(){eo.Z.N.call(this),es(this)},eo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Wl=o.JSON.stringify,dm=o.JSON.parse,na=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function _d(){}function Kl(){}var ts={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function kr(){P.call(this,"d")}h(kr,P);function ra(){P.call(this,"c")}h(ra,P);var yn={},wd=null;function sa(){return wd=wd||new at}yn.Ia="serverreachability";function Gl(u){P.call(this,yn.Ia,u)}h(Gl,P);function Ls(u){const m=sa();Ot(m,new Gl(m))}yn.STAT_EVENT="statevent";function Ed(u,m){P.call(this,yn.STAT_EVENT,u),this.stat=m}h(Ed,P);function xt(u){const m=sa();Ot(m,new Ed(m,u))}yn.Ja="timingevent";function or(u,m){P.call(this,yn.Ja,u),this.size=m}h(or,P);function to(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},m)}function he(){this.g=!0}he.prototype.ua=function(){this.g=!1};function Ue(u,m,g,R,M,j){u.info(function(){if(u.g)if(j){var X="",Ee=j.split("&");for(let qe=0;qe<Ee.length;qe++){var Pt=Ee[qe].split("=");if(Pt.length>1){const Lt=Pt[0];Pt=Pt[1];const Or=Lt.split("_");X=Or.length>=2&&Or[1]=="type"?X+(Lt+"="+Pt+"&"):X+(Lt+"=redacted&")}}}else X=null;else X=j;return"XMLHTTP REQ ("+R+") [attempt "+M+"]: "+m+`
`+g+`
`+X})}function We(u,m,g,R,M,j,X){u.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+M+"]: "+m+`
`+g+`
`+j+" "+X})}function Vt(u,m,g,R){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Dr(u,g)+(R?" "+R:"")})}function Cn(u,m){u.info(function(){return"TIMEOUT: "+m})}he.prototype.info=function(){};function Dr(u,m){if(!u.g)return m;if(!m)return null;try{const j=JSON.parse(m);if(j){for(u=0;u<j.length;u++)if(Array.isArray(j[u])){var g=j[u];if(!(g.length<2)){var R=g[1];if(Array.isArray(R)&&!(R.length<1)){var M=R[0];if(M!="noop"&&M!="stop"&&M!="close")for(let X=1;X<R.length;X++)R[X]=""}}}}return Wl(j)}catch{return m}}var Qn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},vn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ar;function hm(){}h(hm,_d),hm.prototype.g=function(){return new XMLHttpRequest},ar=new hm;function Ql(u){return encodeURIComponent(String(u))}function AD(u){var m=1;u=u.split(":");const g=[];for(;m>0&&u.length;)g.push(u.shift()),m--;return u.length&&g.push(u.join(":")),g}function Ms(u,m,g,R){this.j=u,this.i=m,this.l=g,this.S=R||1,this.V=new eo(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new iE}function iE(){this.i=null,this.g="",this.h=!1}var oE={},fm={};function pm(u,m,g){u.M=1,u.A=Id(Nr(m)),u.u=g,u.R=!0,aE(u,null)}function aE(u,m){u.F=Date.now(),Td(u),u.B=Nr(u.A);var g=u.B,R=u.S;Array.isArray(R)||(R=[String(R)]),wE(g.i,"t",R),u.C=0,g=u.j.L,u.h=new iE,u.g=FE(u.j,g?m:null,!u.u),u.P>0&&(u.O=new um(c(u.Y,u,u.g),u.P)),m=u.V,g=u.g,R=u.ba;var M="readystatechange";Array.isArray(M)||(M&&(on[0]=M.toString()),M=on);for(let j=0;j<M.length;j++){const X=Se(g,M[j],R||m.handleEvent,!1,m.h||m);if(!X)break;m.g[X.key]=X}m=u.J?de(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),Ls(),Ue(u.i,u.v,u.B,u.l,u.S,u.u)}Ms.prototype.ba=function(u){u=u.target;const m=this.O;m&&js(u)==3?m.j():this.Y(u)},Ms.prototype.Y=function(u){try{if(u==this.g)e:{const Ee=js(this.g),Pt=this.g.ya(),qe=this.g.ca();if(!(Ee<3)&&(Ee!=3||this.g&&(this.h.h||this.g.la()||xE(this.g)))){this.K||Ee!=4||Pt==7||(Pt==8||qe<=0?Ls(3):Ls(2)),mm(this);var m=this.g.ca();this.X=m;var g=xD(this);if(this.o=m==200,We(this.i,this.v,this.B,this.l,this.S,Ee,m),this.o){if(this.U&&!this.L){t:{if(this.g){var R,M=this.g;if((R=M.g?M.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(R)){var j=R;break t}}j=null}if(u=j)Vt(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,gm(this,u);else{this.o=!1,this.m=3,xt(12),no(this),Yl(this);break e}}if(this.R){u=!0;let Lt;for(;!this.K&&this.C<g.length;)if(Lt=PD(this,g),Lt==fm){Ee==4&&(this.m=4,xt(14),u=!1),Vt(this.i,this.l,null,"[Incomplete Response]");break}else if(Lt==oE){this.m=4,xt(15),Vt(this.i,this.l,g,"[Invalid Chunk]"),u=!1;break}else Vt(this.i,this.l,Lt,null),gm(this,Lt);if(lE(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ee!=4||g.length!=0||this.h.h||(this.m=1,xt(16),u=!1),this.o=this.o&&u,!u)Vt(this.i,this.l,g,"[Invalid Chunked Response]"),no(this),Yl(this);else if(g.length>0&&!this.W){this.W=!0;var X=this.j;X.g==this&&X.aa&&!X.P&&(X.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),Sm(X),X.P=!0,xt(11))}}else Vt(this.i,this.l,g,null),gm(this,g);Ee==4&&no(this),this.o&&!this.K&&(Ee==4?OE(this.j,this):(this.o=!1,Td(this)))}else $D(this.g),m==400&&g.indexOf("Unknown SID")>0?(this.m=3,xt(12)):(this.m=0,xt(13)),no(this),Yl(this)}}}catch{}finally{}};function xD(u){if(!lE(u))return u.g.la();const m=xE(u.g);if(m==="")return"";let g="";const R=m.length,M=js(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return no(u),Yl(u),"";u.h.i=new o.TextDecoder}for(let j=0;j<R;j++)u.h.h=!0,g+=u.h.i.decode(m[j],{stream:!(M&&j==R-1)});return m.length=0,u.h.g+=g,u.C=0,u.h.g}function lE(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function PD(u,m){var g=u.C,R=m.indexOf(`
`,g);return R==-1?fm:(g=Number(m.substring(g,R)),isNaN(g)?oE:(R+=1,R+g>m.length?fm:(m=m.slice(R,R+g),u.C=R+g,m)))}Ms.prototype.cancel=function(){this.K=!0,no(this)};function Td(u){u.T=Date.now()+u.H,cE(u,u.H)}function cE(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=to(c(u.aa,u),m)}function mm(u){u.D&&(o.clearTimeout(u.D),u.D=null)}Ms.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Cn(this.i,this.B),this.M!=2&&(Ls(),xt(17)),no(this),this.m=2,Yl(this)):cE(this,this.T-u)};function Yl(u){u.j.I==0||u.K||OE(u.j,u)}function no(u){mm(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,es(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function gm(u,m){try{var g=u.j;if(g.I!=0&&(g.g==u||ym(g.h,u))){if(!u.L&&ym(g.h,u)&&g.I==3){try{var R=g.Ba.g.parse(m)}catch{R=null}if(Array.isArray(R)&&R.length==3){var M=R;if(M[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<u.F)Pd(g),Ad(g);else break e;Im(g),xt(18)}}else g.xa=M[1],0<g.xa-g.K&&M[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=to(c(g.Va,g),6e3));hE(g.h)<=1&&g.ta&&(g.ta=void 0)}else so(g,11)}else if((u.L||g.g==u)&&Pd(g),!C(m))for(M=g.Ba.g.parse(m),m=0;m<M.length;m++){let qe=M[m];const Lt=qe[0];if(!(Lt<=g.K))if(g.K=Lt,qe=qe[1],g.I==2)if(qe[0]=="c"){g.M=qe[1],g.ba=qe[2];const Or=qe[3];Or!=null&&(g.ka=Or,g.j.info("VER="+g.ka));const io=qe[4];io!=null&&(g.za=io,g.j.info("SVER="+g.za));const Bs=qe[5];Bs!=null&&typeof Bs=="number"&&Bs>0&&(R=1.5*Bs,g.O=R,g.j.info("backChannelRequestTimeoutMs_="+R)),R=g;const $s=u.g;if($s){const Cd=$s.g?$s.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Cd){var j=R.h;j.g||Cd.indexOf("spdy")==-1&&Cd.indexOf("quic")==-1&&Cd.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(vm(j,j.h),j.h=null))}if(R.G){const bm=$s.g?$s.g.getResponseHeader("X-HTTP-Session-Id"):null;bm&&(R.wa=bm,Ye(R.J,R.G,bm))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-u.F,g.j.info("Handshake RTT: "+g.T+"ms")),R=g;var X=u;if(R.na=ME(R,R.L?R.ba:null,R.W),X.L){fE(R.h,X);var Ee=X,Pt=R.O;Pt&&(Ee.H=Pt),Ee.D&&(mm(Ee),Td(Ee)),R.g=X}else DE(R);g.i.length>0&&xd(g)}else qe[0]!="stop"&&qe[0]!="close"||so(g,7);else g.I==3&&(qe[0]=="stop"||qe[0]=="close"?qe[0]=="stop"?so(g,7):Tm(g):qe[0]!="noop"&&g.l&&g.l.qa(qe),g.A=0)}}Ls(4)}catch{}}var RD=class{constructor(u,m){this.g=u,this.map=m}};function uE(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function dE(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function hE(u){return u.h?1:u.g?u.g.size:0}function ym(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function vm(u,m){u.g?u.g.add(m):u.h=m}function fE(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}uE.prototype.cancel=function(){if(this.i=pE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function pE(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const g of u.g.values())m=m.concat(g.G);return m}return f(u.i)}var mE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function CD(u,m){if(u){u=u.split("&");for(let g=0;g<u.length;g++){const R=u[g].indexOf("=");let M,j=null;R>=0?(M=u[g].substring(0,R),j=u[g].substring(R+1)):M=u[g],m(M,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function Fs(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof Fs?(this.l=u.l,Xl(this,u.j),this.o=u.o,this.g=u.g,Jl(this,u.u),this.h=u.h,_m(this,EE(u.i)),this.m=u.m):u&&(m=String(u).match(mE))?(this.l=!1,Xl(this,m[1]||"",!0),this.o=Zl(m[2]||""),this.g=Zl(m[3]||"",!0),Jl(this,m[4]),this.h=Zl(m[5]||"",!0),_m(this,m[6]||"",!0),this.m=Zl(m[7]||"")):(this.l=!1,this.i=new tc(null,this.l))}Fs.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(ec(m,gE,!0),":");var g=this.g;return(g||m=="file")&&(u.push("//"),(m=this.o)&&u.push(ec(m,gE,!0),"@"),u.push(Ql(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&u.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(ec(g,g.charAt(0)=="/"?ND:DD,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",ec(g,VD)),u.join("")},Fs.prototype.resolve=function(u){const m=Nr(this);let g=!!u.j;g?Xl(m,u.j):g=!!u.o,g?m.o=u.o:g=!!u.g,g?m.g=u.g:g=u.u!=null;var R=u.h;if(g)Jl(m,u.u);else if(g=!!u.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var M=m.h.lastIndexOf("/");M!=-1&&(R=m.h.slice(0,M+1)+R)}if(M=R,M==".."||M==".")R="";else if(M.indexOf("./")!=-1||M.indexOf("/.")!=-1){R=M.lastIndexOf("/",0)==0,M=M.split("/");const j=[];for(let X=0;X<M.length;){const Ee=M[X++];Ee=="."?R&&X==M.length&&j.push(""):Ee==".."?((j.length>1||j.length==1&&j[0]!="")&&j.pop(),R&&X==M.length&&j.push("")):(j.push(Ee),R=!0)}R=j.join("/")}else R=M}return g?m.h=R:g=u.i.toString()!=="",g?_m(m,EE(u.i)):g=!!u.m,g&&(m.m=u.m),m};function Nr(u){return new Fs(u)}function Xl(u,m,g){u.j=g?Zl(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Jl(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function _m(u,m,g){m instanceof tc?(u.i=m,LD(u.i,u.l)):(g||(m=ec(m,OD)),u.i=new tc(m,u.l))}function Ye(u,m,g){u.i.set(m,g)}function Id(u){return Ye(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Zl(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ec(u,m,g){return typeof u=="string"?(u=encodeURI(u).replace(m,kD),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function kD(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var gE=/[#\/\?@]/g,DD=/[#\?:]/g,ND=/[#\?]/g,OD=/[#\?@]/g,VD=/#/g;function tc(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function ro(u){u.g||(u.g=new Map,u.h=0,u.i&&CD(u.i,function(m,g){u.add(decodeURIComponent(m.replace(/\+/g," ")),g)}))}t=tc.prototype,t.add=function(u,m){ro(this),this.i=null,u=ia(this,u);let g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(m),this.h+=1,this};function yE(u,m){ro(u),m=ia(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function vE(u,m){return ro(u),m=ia(u,m),u.g.has(m)}t.forEach=function(u,m){ro(this),this.g.forEach(function(g,R){g.forEach(function(M){u.call(m,M,R,this)},this)},this)};function _E(u,m){ro(u);let g=[];if(typeof m=="string")vE(u,m)&&(g=g.concat(u.g.get(ia(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)g=g.concat(u[m]);return g}t.set=function(u,m){return ro(this),this.i=null,u=ia(this,u),vE(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},t.get=function(u,m){return u?(u=_E(this,u),u.length>0?String(u[0]):m):m};function wE(u,m,g){yE(u,m),g.length>0&&(u.i=null,u.g.set(ia(u,m),f(g)),u.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let R=0;R<m.length;R++){var g=m[R];const M=Ql(g);g=_E(this,g);for(let j=0;j<g.length;j++){let X=M;g[j]!==""&&(X+="="+Ql(g[j])),u.push(X)}}return this.i=u.join("&")};function EE(u){const m=new tc;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function ia(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function LD(u,m){m&&!u.j&&(ro(u),u.i=null,u.g.forEach(function(g,R){const M=R.toLowerCase();R!=M&&(yE(this,R),wE(this,M,g))},u)),u.j=m}function MD(u,m){const g=new he;if(o.Image){const R=new Image;R.onload=d(Us,g,"TestLoadImage: loaded",!0,m,R),R.onerror=d(Us,g,"TestLoadImage: error",!1,m,R),R.onabort=d(Us,g,"TestLoadImage: abort",!1,m,R),R.ontimeout=d(Us,g,"TestLoadImage: timeout",!1,m,R),o.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=u}else m(!1)}function FD(u,m){const g=new he,R=new AbortController,M=setTimeout(()=>{R.abort(),Us(g,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:R.signal}).then(j=>{clearTimeout(M),j.ok?Us(g,"TestPingServer: ok",!0,m):Us(g,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(M),Us(g,"TestPingServer: error",!1,m)})}function Us(u,m,g,R,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),R(g)}catch{}}function UD(){this.g=new na}function wm(u){this.i=u.Sb||null,this.h=u.ab||!1}h(wm,_d),wm.prototype.g=function(){return new Sd(this.i,this.h)};function Sd(u,m){at.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h(Sd,at),t=Sd.prototype,t.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,rc(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||o).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,nc(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,rc(this)),this.g&&(this.readyState=3,rc(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;TE(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function TE(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?nc(this):rc(this),this.readyState==3&&TE(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,nc(this))},t.Na=function(u){this.g&&(this.response=u,nc(this))},t.ga=function(){this.g&&nc(this)};function nc(u){u.readyState=4,u.l=null,u.j=null,u.B=null,rc(u)}t.setRequestHeader=function(u,m){this.A.append(u,m)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var g=m.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=m.next();return u.join(`\r
`)};function rc(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Sd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function IE(u){let m="";return U(u,function(g,R){m+=R,m+=":",m+=g,m+=`\r
`}),m}function Em(u,m,g){e:{for(R in g){var R=!1;break e}R=!0}R||(g=IE(g),typeof u=="string"?g!=null&&Ql(g):Ye(u,m,g))}function ht(u){at.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(ht,at);var jD=/^https?$/i,BD=["POST","PUT"];t=ht.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,m,g,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ar.g(),this.g.onreadystatechange=p(c(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(j){SE(this,j);return}if(u=g||"",g=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var M in R)g.set(M,R[M]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const j of R.keys())g.set(j,R.get(j));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(g.keys()).find(j=>j.toLowerCase()=="content-type"),M=o.FormData&&u instanceof o.FormData,!(Array.prototype.indexOf.call(BD,m,void 0)>=0)||R||M||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,X]of g)this.g.setRequestHeader(j,X);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(j){SE(this,j)}};function SE(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,bE(u),bd(u)}function bE(u){u.A||(u.A=!0,Ot(u,"complete"),Ot(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Ot(this,"complete"),Ot(this,"abort"),bd(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),bd(this,!0)),ht.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?AE(this):this.Xa())},t.Xa=function(){AE(this)};function AE(u){if(u.h&&typeof i<"u"){if(u.v&&js(u)==4)setTimeout(u.Ca.bind(u),0);else if(Ot(u,"readystatechange"),js(u)==4){u.h=!1;try{const j=u.ca();e:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var g;if(!(g=m)){var R;if(R=j===0){let X=String(u.D).match(mE)[1]||null;!X&&o.self&&o.self.location&&(X=o.self.location.protocol.slice(0,-1)),R=!jD.test(X?X.toLowerCase():"")}g=R}if(g)Ot(u,"complete"),Ot(u,"success");else{u.o=6;try{var M=js(u)>2?u.g.statusText:""}catch{M=""}u.l=M+" ["+u.ca()+"]",bE(u)}}finally{bd(u)}}}}function bd(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const g=u.g;u.g=null,m||Ot(u,"ready");try{g.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function js(u){return u.g?u.g.readyState:0}t.ca=function(){try{return js(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),dm(m)}};function xE(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function $D(u){const m={};u=(u.g&&js(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<u.length;R++){if(C(u[R]))continue;var g=AD(u[R]);const M=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const j=m[M]||[];m[M]=j,j.push(g)}Y(m,function(R){return R.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function sc(u,m,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||m}function PE(u){this.za=0,this.i=[],this.j=new he,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=sc("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=sc("baseRetryDelayMs",5e3,u),this.Za=sc("retryDelaySeedMs",1e4,u),this.Ta=sc("forwardChannelMaxRetries",2,u),this.va=sc("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new uE(u&&u.concurrentRequestLimit),this.Ba=new UD,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=PE.prototype,t.ka=8,t.I=1,t.connect=function(u,m,g,R){xt(0),this.W=u,this.H=m||{},g&&R!==void 0&&(this.H.OSID=g,this.H.OAID=R),this.F=this.X,this.J=ME(this,null,this.W),xd(this)};function Tm(u){if(RE(u),u.I==3){var m=u.V++,g=Nr(u.J);if(Ye(g,"SID",u.M),Ye(g,"RID",m),Ye(g,"TYPE","terminate"),ic(u,g),m=new Ms(u,u.j,m),m.M=2,m.A=Id(Nr(g)),g=!1,o.navigator&&o.navigator.sendBeacon)try{g=o.navigator.sendBeacon(m.A.toString(),"")}catch{}!g&&o.Image&&(new Image().src=m.A,g=!0),g||(m.g=FE(m.j,null),m.g.ea(m.A)),m.F=Date.now(),Td(m)}LE(u)}function Ad(u){u.g&&(Sm(u),u.g.cancel(),u.g=null)}function RE(u){Ad(u),u.v&&(o.clearTimeout(u.v),u.v=null),Pd(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&o.clearTimeout(u.m),u.m=null)}function xd(u){if(!dE(u.h)&&!u.m){u.m=!0;var m=u.Ea;O||T(),V||(O(),V=!0),S.add(m,u),u.D=0}}function zD(u,m){return hE(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=to(c(u.Ea,u,m),VE(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const M=new Ms(this,this.j,u);let j=this.o;if(this.U&&(j?(j=de(j),ce(j,this.U)):j=this.U),this.u!==null||this.R||(M.J=j,j=null),this.S)e:{for(var m=0,g=0;g<this.i.length;g++){t:{var R=this.i[g];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(m+=R,m>4096){m=g;break e}if(m===4096||g===this.i.length-1){m=g+1;break e}}m=1e3}else m=1e3;m=kE(this,M,m),g=Nr(this.J),Ye(g,"RID",u),Ye(g,"CVER",22),this.G&&Ye(g,"X-HTTP-Session-Id",this.G),ic(this,g),j&&(this.R?m="headers="+Ql(IE(j))+"&"+m:this.u&&Em(g,this.u,j)),vm(this.h,M),this.Ra&&Ye(g,"TYPE","init"),this.S?(Ye(g,"$req",m),Ye(g,"SID","null"),M.U=!0,pm(M,g,null)):pm(M,g,m),this.I=2}}else this.I==3&&(u?CE(this,u):this.i.length==0||dE(this.h)||CE(this))};function CE(u,m){var g;m?g=m.l:g=u.V++;const R=Nr(u.J);Ye(R,"SID",u.M),Ye(R,"RID",g),Ye(R,"AID",u.K),ic(u,R),u.u&&u.o&&Em(R,u.u,u.o),g=new Ms(u,u.j,g,u.D+1),u.u===null&&(g.J=u.o),m&&(u.i=m.G.concat(u.i)),m=kE(u,g,1e3),g.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),vm(u.h,g),pm(g,R,m)}function ic(u,m){u.H&&U(u.H,function(g,R){Ye(m,R,g)}),u.l&&U({},function(g,R){Ye(m,R,g)})}function kE(u,m,g){g=Math.min(u.i.length,g);const R=u.l?c(u.l.Ka,u.l,u):null;e:{var M=u.i;let Ee=-1;for(;;){const Pt=["count="+g];Ee==-1?g>0?(Ee=M[0].g,Pt.push("ofs="+Ee)):Ee=0:Pt.push("ofs="+Ee);let qe=!0;for(let Lt=0;Lt<g;Lt++){var j=M[Lt].g;const Or=M[Lt].map;if(j-=Ee,j<0)Ee=Math.max(0,M[Lt].g-100),qe=!1;else try{j="req"+j+"_"||"";try{var X=Or instanceof Map?Or:Object.entries(Or);for(const[io,Bs]of X){let $s=Bs;a(Bs)&&($s=Wl(Bs)),Pt.push(j+io+"="+encodeURIComponent($s))}}catch(io){throw Pt.push(j+"type="+encodeURIComponent("_badmap")),io}}catch{R&&R(Or)}}if(qe){X=Pt.join("&");break e}}X=void 0}return u=u.i.splice(0,g),m.G=u,X}function DE(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;O||T(),V||(O(),V=!0),S.add(m,u),u.A=0}}function Im(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=to(c(u.Da,u),VE(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,NE(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=to(c(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,xt(10),Ad(this),NE(this))};function Sm(u){u.B!=null&&(o.clearTimeout(u.B),u.B=null)}function NE(u){u.g=new Ms(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=Nr(u.na);Ye(m,"RID","rpc"),Ye(m,"SID",u.M),Ye(m,"AID",u.K),Ye(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&Ye(m,"TO",u.ia),Ye(m,"TYPE","xmlhttp"),ic(u,m),u.u&&u.o&&Em(m,u.u,u.o),u.O&&(u.g.H=u.O);var g=u.g;u=u.ba,g.M=1,g.A=Id(Nr(m)),g.u=null,g.R=!0,aE(g,u)}t.Va=function(){this.C!=null&&(this.C=null,Ad(this),Im(this),xt(19))};function Pd(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function OE(u,m){var g=null;if(u.g==m){Pd(u),Sm(u),u.g=null;var R=2}else if(ym(u.h,m))g=m.G,fE(u.h,m),R=1;else return;if(u.I!=0){if(m.o)if(R==1){g=m.u?m.u.length:0,m=Date.now()-m.F;var M=u.D;R=sa(),Ot(R,new or(R,g)),xd(u)}else DE(u);else if(M=m.m,M==3||M==0&&m.X>0||!(R==1&&zD(u,m)||R==2&&Im(u)))switch(g&&g.length>0&&(m=u.h,m.i=m.i.concat(g)),M){case 1:so(u,5);break;case 4:so(u,10);break;case 3:so(u,6);break;default:so(u,2)}}}function VE(u,m){let g=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(g*=2),g*m}function so(u,m){if(u.j.info("Error code "+m),m==2){var g=c(u.bb,u),R=u.Ua;const M=!R;R=new Fs(R||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Xl(R,"https"),Id(R),M?MD(R.toString(),g):FD(R.toString(),g)}else xt(2);u.I=0,u.l&&u.l.pa(m),LE(u),RE(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function LE(u){if(u.I=0,u.ja=[],u.l){const m=pE(u.h);(m.length!=0||u.i.length!=0)&&(_(u.ja,m),_(u.ja,u.i),u.h.i.length=0,f(u.i),u.i.length=0),u.l.oa()}}function ME(u,m,g){var R=g instanceof Fs?Nr(g):new Fs(g);if(R.g!="")m&&(R.g=m+"."+R.g),Jl(R,R.u);else{var M=o.location;R=M.protocol,m=m?m+"."+M.hostname:M.hostname,M=+M.port;const j=new Fs(null);R&&Xl(j,R),m&&(j.g=m),M&&Jl(j,M),g&&(j.h=g),R=j}return g=u.G,m=u.wa,g&&m&&Ye(R,g,m),Ye(R,"VER",u.ka),ic(u,R),R}function FE(u,m,g){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new ht(new wm({ab:g})):new ht(u.ma),m.Fa(u.L),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function UE(){}t=UE.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Rd(){}Rd.prototype.g=function(u,m){return new kn(u,m)};function kn(u,m){at.call(this),this.g=new PE(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!C(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!C(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new oa(this)}h(kn,at),kn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},kn.prototype.close=function(){Tm(this.g)},kn.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.v&&(g={},g.__data__=Wl(u),u=g);m.i.push(new RD(m.Ya++,u)),m.I==3&&xd(m)},kn.prototype.N=function(){this.g.l=null,delete this.j,Tm(this.g),delete this.g,kn.Z.N.call(this)};function jE(u){kr.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const g in m){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}h(jE,kr);function BE(){ra.call(this),this.status=1}h(BE,ra);function oa(u){this.g=u}h(oa,UE),oa.prototype.ra=function(){Ot(this.g,"a")},oa.prototype.qa=function(u){Ot(this.g,new jE(u))},oa.prototype.pa=function(u){Ot(this.g,new BE)},oa.prototype.oa=function(){Ot(this.g,"b")},Rd.prototype.createWebChannel=Rd.prototype.g,kn.prototype.send=kn.prototype.o,kn.prototype.open=kn.prototype.m,kn.prototype.close=kn.prototype.close,_R=function(){return new Rd},vR=function(){return sa()},yR=yn,Gy={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Qn.NO_ERROR=0,Qn.TIMEOUT=8,Qn.HTTP_ERROR=6,Dh=Qn,vn.COMPLETE="complete",gR=vn,Kl.EventType=ts,ts.OPEN="a",ts.CLOSE="b",ts.ERROR="c",ts.MESSAGE="d",at.prototype.listen=at.prototype.J,Pc=Kl,ht.prototype.listenOnce=ht.prototype.K,ht.prototype.getLastError=ht.prototype.Ha,ht.prototype.getLastErrorCode=ht.prototype.ya,ht.prototype.getStatus=ht.prototype.ca,ht.prototype.getResponseJson=ht.prototype.La,ht.prototype.getResponseText=ht.prototype.la,ht.prototype.send=ht.prototype.ea,ht.prototype.setWithCredentials=ht.prototype.Fa,mR=ht}).apply(typeof th<"u"?th:typeof self<"u"?self:typeof window<"u"?window:{});const gI="@firebase/firestore",yI="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Jt.UNAUTHENTICATED=new Jt(null),Jt.GOOGLE_CREDENTIALS=new Jt("google-credentials-uid"),Jt.FIRST_PARTY=new Jt("first-party-uid"),Jt.MOCK_USER=new Jt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ll="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi=new q_("@firebase/firestore");function ma(){return Oi.logLevel}function wR(t){Oi.setLogLevel(t)}function H(t,...e){if(Oi.logLevel<=Pe.DEBUG){const n=e.map(X_);Oi.debug(`Firestore (${Ll}): ${t}`,...n)}}function vt(t,...e){if(Oi.logLevel<=Pe.ERROR){const n=e.map(X_);Oi.error(`Firestore (${Ll}): ${t}`,...n)}}function Vi(t,...e){if(Oi.logLevel<=Pe.WARN){const n=e.map(X_);Oi.warn(`Firestore (${Ll}): ${t}`,...n)}}function X_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,ER(t,r,n)}function ER(t,e,n){let r=`FIRESTORE (${Ll}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw vt(r),new Error(r)}function oe(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||ER(e,s,r)}function re(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends Ar{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class TR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Jt.UNAUTHENTICATED))}shutdown(){}}class mj{constructor(e){this.t=e,this.currentUser=Jt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){oe(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new rr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new rr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new rr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(oe(typeof r.accessToken=="string",31837,{l:r}),new pj(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return oe(e===null||typeof e=="string",2055,{h:e}),new Jt(e)}}class gj{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Jt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class yj{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new gj(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Jt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class vI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vj{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Vn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){oe(this.o===void 0,3512);const r=i=>{i.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new vI(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(oe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new vI(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _j(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=_j(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function pe(t,e){return t<e?-1:t>e?1:0}function Qy(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return pg(s)===pg(i)?pe(s,i):pg(s)?1:-1}return pe(t.length,e.length)}const wj=55296,Ej=57343;function pg(t){const e=t.charCodeAt(0);return e>=wj&&e<=Ej}function ll(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}function IR(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I="__name__";class Mr{constructor(e,n,r){n===void 0?n=0:n>e.length&&te(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&te(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Mr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Mr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Mr.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return pe(e.length,n.length)}static compareSegments(e,n){const r=Mr.isNumericId(e),s=Mr.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Mr.extractNumericId(e).compare(Mr.extractNumericId(n)):Qy(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return bi.fromString(e.substring(4,e.length-2))}}class Fe extends Mr{construct(e,n,r){return new Fe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new K(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Fe(n)}static emptyPath(){return new Fe([])}}const Tj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rt extends Mr{construct(e,n,r){return new rt(e,n,r)}static isValidIdentifier(e){return Tj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===_I}static keyField(){return new rt([_I])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new K(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new K(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new K(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new K(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rt(n)}static emptyPath(){return new rt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.path=e}static fromPath(e){return new J(Fe.fromString(e))}static fromName(e){return new J(Fe.fromString(e).popFirst(5))}static empty(){return new J(Fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Fe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new J(new Fe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SR(t,e,n){if(!n)throw new K(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function bR(t,e,n,r){if(e===!0&&r===!0)throw new K(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function wI(t){if(!J.isDocumentKey(t))throw new K(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function EI(t){if(J.isDocumentKey(t))throw new K(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function AR(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Lp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":te(12329,{type:typeof t})}function wt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Lp(t);throw new K(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Ij(t,e){if(e<=0)throw new K(B.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(t,e){const n={typeString:t};return e&&(n.value=e),n}function rd(t,e){if(!AR(t))throw new K(B.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new K(B.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI=-62135596800,II=1e6;class je{static now(){return je.fromMillis(Date.now())}static fromDate(e){return je.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*II);return new je(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<TI)throw new K(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/II}_compareTo(e){return this.seconds===e.seconds?pe(this.nanoseconds,e.nanoseconds):pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:je._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(rd(e,je._jsonSchema))return new je(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-TI;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}je._jsonSchemaVersion="firestore/timestamp/1.0",je._jsonSchema={type:At("string",je._jsonSchemaVersion),seconds:At("number"),nanoseconds:At("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{static fromTimestamp(e){return new ue(e)}static min(){return new ue(new je(0,0))}static max(){return new ue(new je(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cl=-1;class Nf{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function Yy(t){return t.fields.find(e=>e.kind===2)}function uo(t){return t.fields.filter(e=>e.kind!==2)}Nf.UNKNOWN_ID=-1;class Nh{constructor(e,n){this.fieldPath=e,this.kind=n}}class Pu{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Pu(0,Hn.min())}}function xR(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ue.fromTimestamp(r===1e9?new je(n+1,0):new je(n,r));return new Hn(s,J.empty(),e)}function PR(t){return new Hn(t.readTime,t.key,cl)}class Hn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Hn(ue.min(),J.empty(),cl)}static max(){return new Hn(ue.max(),J.empty(),cl)}}function J_(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=J.comparator(t.documentKey,e.documentKey),n!==0?n:pe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class CR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yi(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==RR)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):L.reject(n)}static resolve(e){return new L((n,r)=>{n(e)})}static reject(e){return new L((n,r)=>{r(e)})}static waitFor(e){return new L((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=L.resolve(!1);for(const r of e)n=n.next(s=>s?L.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new L((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new L((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nn="SimpleDb";class Mp{static open(e,n,r,s){try{return new Mp(n,e.transaction(s,r))}catch(i){throw new qc(n,i)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new rr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new qc(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const s=Z_(r.target.error);this.S.reject(new qc(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(H(Nn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new bj(n)}}class Ai{static delete(e){return H(Nn,"Removing database:",e),po(VP().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!$P())return!1;if(Ai.F())return!0;const e=Wt(),n=Ai.M(e),r=0<n&&n<10,s=kR(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,Ai.M(Wt())===12.2&&vt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(H(Nn,"Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new qc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new K(B.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new K(B.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new qc(e,o))},s.onupgradeneeded=i=>{H(Nn,'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.N.k(o,s.transaction,i.oldVersion,this.version).next(()=>{H(Nn,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const a=Mp.open(this.db,e,i?"readonly":"readwrite",r),l=s(a).next(c=>(a.C(),c)).catch(c=>(a.abort(c),L.reject(c))).toPromise();return l.catch(()=>{}),await a.D,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(H(Nn,"Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function kR(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class Sj{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return po(this.U.delete())}}class qc extends K{constructor(e,n){super(B.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Xi(t){return t.name==="IndexedDbTransactionError"}class bj{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(H(Nn,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(H(Nn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),po(r)}add(e){return H(Nn,"ADD",this.store.name,e,e),po(this.store.add(e))}get(e){return po(this.store.get(e)).next(n=>(n===void 0&&(n=null),H(Nn,"GET",this.store.name,e,n),n))}delete(e){return H(Nn,"DELETE",this.store.name,e),po(this.store.delete(e))}count(){return H(Nn,"COUNT",this.store.name),po(this.store.count())}J(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new L((o,a)=>{i.onerror=l=>{a(l.target.error)},i.onsuccess=l=>{o(l.target.result)}})}{const i=this.cursor(r),o=[];return this.H(i,(a,l)=>{o.push(l)}).next(()=>o)}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new L((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}Z(e,n){H(Nn,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const s=this.cursor(r);return this.H(s,(i,o,a)=>a.delete())}ee(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.H(s,n)}te(e){const n=this.cursor({});return new L((r,s)=>{n.onerror=i=>{const o=Z_(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}H(e,n){const r=[];return new L((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const l=new Sj(a),c=n(a.primaryKey,a.value,l);if(c instanceof L){const d=c.catch(h=>(l.done(),L.reject(h)));r.push(d)}l.isDone?s():l.G===null?a.continue():a.continue(l.G)}}).next(()=>L.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function po(t){return new L((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=Z_(r.target.error);n(s)}})}let SI=!1;function Z_(t){const e=Ai.M(Wt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new K("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return SI||(SI=!0,setTimeout(()=>{throw r},0)),r}}return t}const Hc="IndexBackfiller";class Aj{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){H(Hc,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.ne.ie();H(Hc,`Documents written: ${n}`)}catch(n){Xi(n)?H(Hc,"Ignoring IndexedDB error during index backfill: ",n):await Yi(n)}await this.re(6e4)})}}class xj{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.se(n,e))}se(e,n){const r=new Set;let s=n,i=!0;return L.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return H(Hc,`Processing collection: ${o}`),this.oe(e,o,s).next(a=>{s-=a,r.add(o)});i=!1})).next(()=>n-s)}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next(i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this._e(s,i)).next(a=>(H(Hc,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}_e(e,n){let r=e;return n.changes.forEach((s,i)=>{const o=PR(i);J_(o,r)>0&&(r=o)}),new Hn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}In.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const No=-1;function Fp(t){return t==null}function Ru(t){return t===0&&1/t==-1/0}function DR(t){return typeof t=="number"&&Number.isInteger(t)&&!Ru(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Of="";function rn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=bI(e)),e=Pj(t.get(n),e);return bI(e)}function Pj(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case Of:n+="";break;default:n+=i}}return n}function bI(t){return t+Of+""}function qr(t){const e=t.length;if(oe(e>=2,64408,{path:t}),e===2)return oe(t.charAt(0)===Of&&t.charAt(1)==="",56145,{path:t}),Fe.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const o=t.indexOf(Of,i);switch((o<0||o>n)&&te(50515,{path:t}),t.charAt(o+1)){case"":const a=t.substring(i,o);let l;s.length===0?l=a:(s+=a,l=s,s=""),r.push(l);break;case"":s+=t.substring(i,o),s+="\0";break;case"":s+=t.substring(i,o+1);break;default:te(61167,{path:t})}i=o+2}return new Fe(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ho="remoteDocuments",sd="owner",la="owner",Cu="mutationQueues",Rj="userId",mr="mutations",AI="batchId",Io="userMutationsIndex",xI=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oh(t,e){return[t,rn(e)]}function NR(t,e,n){return[t,rn(e),n]}const Cj={},ul="documentMutations",Vf="remoteDocumentsV14",kj=["prefixPath","collectionGroup","readTime","documentId"],Vh="documentKeyIndex",Dj=["prefixPath","collectionGroup","documentId"],OR="collectionGroupIndex",Nj=["collectionGroup","readTime","prefixPath","documentId"],ku="remoteDocumentGlobal",Xy="remoteDocumentGlobalKey",dl="targets",VR="queryTargetsIndex",Oj=["canonicalId","targetId"],hl="targetDocuments",Vj=["targetId","path"],ew="documentTargetsIndex",Lj=["path","targetId"],Lf="targetGlobalKey",Oo="targetGlobal",Du="collectionParents",Mj=["collectionId","parent"],fl="clientMetadata",Fj="clientId",Up="bundles",Uj="bundleId",jp="namedQueries",jj="name",tw="indexConfiguration",Bj="indexId",Jy="collectionGroupIndex",$j="collectionGroup",Wc="indexState",zj=["indexId","uid"],LR="sequenceNumberIndex",qj=["uid","sequenceNumber"],Kc="indexEntries",Hj=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],MR="documentKeyIndex",Wj=["indexId","uid","orderedDocumentKey"],Bp="documentOverlays",Kj=["userId","collectionPath","documentId"],Zy="collectionPathOverlayIndex",Gj=["userId","collectionPath","largestBatchId"],FR="collectionGroupOverlayIndex",Qj=["userId","collectionGroup","largestBatchId"],nw="globals",Yj="name",UR=[Cu,mr,ul,ho,dl,sd,Oo,hl,fl,ku,Du,Up,jp],Xj=[...UR,Bp],jR=[Cu,mr,ul,Vf,dl,sd,Oo,hl,fl,ku,Du,Up,jp,Bp],BR=jR,rw=[...BR,tw,Wc,Kc],Jj=rw,$R=[...rw,nw],Zj=$R;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev extends CR{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function Dt(t,e){const n=re(t);return Ai.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PI(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ji(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function zR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e,n){this.comparator=e,this.root=n||zt.EMPTY}insert(e,n){return new Ge(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,zt.BLACK,null,null))}remove(e){return new Ge(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new nh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new nh(this.root,e,this.comparator,!1)}getReverseIterator(){return new nh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new nh(this.root,e,this.comparator,!0)}}class nh{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??zt.RED,this.left=s??zt.EMPTY,this.right=i??zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new zt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return zt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw te(27949);return e+(this.isRed()?0:1)}}zt.EMPTY=null,zt.RED=!0,zt.BLACK=!1;zt.EMPTY=new class{constructor(){this.size=0}get key(){throw te(57766)}get value(){throw te(16141)}get color(){throw te(16727)}get left(){throw te(29726)}get right(){throw te(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new zt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e){this.comparator=e,this.data=new Ge(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new RI(this.data.getIterator())}getIteratorFrom(e){return new RI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ze)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ze(this.comparator);return n.data=e,n}}class RI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ca(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.fields=e,e.sort(rt.comparator)}static empty(){return new Sn([])}unionWith(e){let n=new ze(rt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Sn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ll(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new qR("Invalid base64 string: "+i):i}}(e);return new gt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new gt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gt.EMPTY_BYTE_STRING=new gt("");const e5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function As(t){if(oe(!!t,39018),typeof t=="string"){let e=0;const n=e5.exec(t);if(oe(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:tt(t.seconds),nanos:tt(t.nanos)}}function tt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function xs(t){return typeof t=="string"?gt.fromBase64String(t):gt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR="server_timestamp",WR="__type__",KR="__previous_value__",GR="__local_write_time__";function sw(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[WR])==null?void 0:r.stringValue)===HR}function $p(t){const e=t.mapValue.fields[KR];return sw(e)?$p(e):e}function Nu(t){const e=As(t.mapValue.fields[GR].timestampValue);return new je(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t5{constructor(e,n,r,s,i,o,a,l,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=d}}const Mf="(default)";class Li{constructor(e,n){this.projectId=e,this.database=n||Mf}static empty(){return new Li("","")}get isDefaultDatabase(){return this.database===Mf}isEqual(e){return e instanceof Li&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iw="__type__",QR="__max__",hi={mapValue:{fields:{__type__:{stringValue:QR}}}},ow="__vector__",pl="value",Lh={nullValue:"NULL_VALUE"};function Mi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?sw(t)?4:YR(t)?9007199254740991:zp(t)?10:11:te(28295,{value:t})}function Xr(t,e){if(t===e)return!0;const n=Mi(t);if(n!==Mi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Nu(t).isEqual(Nu(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=As(s.timestampValue),a=As(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return xs(s.bytesValue).isEqual(xs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return tt(s.geoPointValue.latitude)===tt(i.geoPointValue.latitude)&&tt(s.geoPointValue.longitude)===tt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return tt(s.integerValue)===tt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=tt(s.doubleValue),a=tt(i.doubleValue);return o===a?Ru(o)===Ru(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return ll(t.arrayValue.values||[],e.arrayValue.values||[],Xr);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(PI(o)!==PI(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Xr(o[l],a[l])))return!1;return!0}(t,e);default:return te(52216,{left:t})}}function Ou(t,e){return(t.values||[]).find(n=>Xr(n,e))!==void 0}function Fi(t,e){if(t===e)return 0;const n=Mi(t),r=Mi(e);if(n!==r)return pe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return pe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=tt(i.integerValue||i.doubleValue),l=tt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return CI(t.timestampValue,e.timestampValue);case 4:return CI(Nu(t),Nu(e));case 5:return Qy(t.stringValue,e.stringValue);case 6:return function(i,o){const a=xs(i),l=xs(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=pe(a[c],l[c]);if(d!==0)return d}return pe(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=pe(tt(i.latitude),tt(o.latitude));return a!==0?a:pe(tt(i.longitude),tt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return kI(t.arrayValue,e.arrayValue);case 10:return function(i,o){var p,f,_,y;const a=i.fields||{},l=o.fields||{},c=(p=a[pl])==null?void 0:p.arrayValue,d=(f=l[pl])==null?void 0:f.arrayValue,h=pe(((_=c==null?void 0:c.values)==null?void 0:_.length)||0,((y=d==null?void 0:d.values)==null?void 0:y.length)||0);return h!==0?h:kI(c,d)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===hi.mapValue&&o===hi.mapValue)return 0;if(i===hi.mapValue)return 1;if(o===hi.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const p=Qy(l[h],d[h]);if(p!==0)return p;const f=Fi(a[l[h]],c[d[h]]);if(f!==0)return f}return pe(l.length,d.length)}(t.mapValue,e.mapValue);default:throw te(23264,{he:n})}}function CI(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return pe(t,e);const n=As(t),r=As(e),s=pe(n.seconds,r.seconds);return s!==0?s:pe(n.nanos,r.nanos)}function kI(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Fi(n[s],r[s]);if(i)return i}return pe(n.length,r.length)}function ml(t){return tv(t)}function tv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=As(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return xs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return J.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=tv(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${tv(n.fields[o])}`;return s+"}"}(t.mapValue):te(61005,{value:t})}function Mh(t){switch(Mi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=$p(t);return e?16+Mh(e):16;case 5:return 2*t.stringValue.length;case 6:return xs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Mh(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Ji(r.fields,(i,o)=>{s+=i.length+Mh(o)}),s}(t.mapValue);default:throw te(13486,{value:t})}}function Vu(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function nv(t){return!!t&&"integerValue"in t}function Lu(t){return!!t&&"arrayValue"in t}function DI(t){return!!t&&"nullValue"in t}function NI(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Fh(t){return!!t&&"mapValue"in t}function zp(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[iw])==null?void 0:r.stringValue)===ow}function Gc(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ji(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Gc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Gc(t.arrayValue.values[n]);return e}return{...t}}function YR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===QR}const XR={mapValue:{fields:{[iw]:{stringValue:ow},[pl]:{arrayValue:{}}}}};function n5(t){return"nullValue"in t?Lh:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Vu(Li.empty(),J.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?zp(t)?XR:{mapValue:{}}:te(35942,{value:t})}function r5(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Vu(Li.empty(),J.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?XR:"mapValue"in t?zp(t)?{mapValue:{}}:hi:te(61959,{value:t})}function OI(t,e){const n=Fi(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function VI(t,e){const n=Fi(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.value=e}static empty(){return new tn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Fh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gc(n)}setAll(e){let n=rt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Gc(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Fh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Xr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Fh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ji(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new tn(Gc(this.value))}}function JR(t){const e=[];return Ji(t.fields,(n,r)=>{const s=new rt([n]);if(Fh(r)){const i=JR(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Sn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new mt(e,0,ue.min(),ue.min(),ue.min(),tn.empty(),0)}static newFoundDocument(e,n,r,s){return new mt(e,1,n,ue.min(),r,s,0)}static newNoDocument(e,n){return new mt(e,2,n,ue.min(),ue.min(),tn.empty(),0)}static newUnknownDocument(e,n){return new mt(e,3,n,ue.min(),ue.min(),tn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=tn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e,n){this.position=e,this.inclusive=n}}function LI(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=J.comparator(J.fromName(o.referenceValue),n.key):r=Fi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function MI(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Xr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e,n="asc"){this.field=e,this.dir=n}}function s5(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{}class ke extends ZR{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new i5(e,n,r):n==="array-contains"?new l5(e,r):n==="in"?new iC(e,r):n==="not-in"?new c5(e,r):n==="array-contains-any"?new u5(e,r):new ke(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new o5(e,r):new a5(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Fi(n,this.value)):n!==null&&Mi(this.value)===Mi(n)&&this.matchesComparison(Fi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Be extends ZR{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Be(e,n)}matches(e){return yl(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function yl(t){return t.op==="and"}function rv(t){return t.op==="or"}function aw(t){return eC(t)&&yl(t)}function eC(t){for(const e of t.filters)if(e instanceof Be)return!1;return!0}function sv(t){if(t instanceof ke)return t.field.canonicalString()+t.op.toString()+ml(t.value);if(aw(t))return t.filters.map(e=>sv(e)).join(",");{const e=t.filters.map(n=>sv(n)).join(",");return`${t.op}(${e})`}}function tC(t,e){return t instanceof ke?function(r,s){return s instanceof ke&&r.op===s.op&&r.field.isEqual(s.field)&&Xr(r.value,s.value)}(t,e):t instanceof Be?function(r,s){return s instanceof Be&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&tC(o,s.filters[a]),!0):!1}(t,e):void te(19439)}function nC(t,e){const n=t.filters.concat(e);return Be.create(n,t.op)}function rC(t){return t instanceof ke?function(n){return`${n.field.canonicalString()} ${n.op} ${ml(n.value)}`}(t):t instanceof Be?function(n){return n.op.toString()+" {"+n.getFilters().map(rC).join(" ,")+"}"}(t):"Filter"}class i5 extends ke{constructor(e,n,r){super(e,n,r),this.key=J.fromName(r.referenceValue)}matches(e){const n=J.comparator(e.key,this.key);return this.matchesComparison(n)}}class o5 extends ke{constructor(e,n){super(e,"in",n),this.keys=sC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class a5 extends ke{constructor(e,n){super(e,"not-in",n),this.keys=sC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function sC(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>J.fromName(r.referenceValue))}class l5 extends ke{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Lu(n)&&Ou(n.arrayValue,this.value)}}class iC extends ke{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ou(this.value.arrayValue,n)}}class c5 extends ke{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ou(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ou(this.value.arrayValue,n)}}class u5 extends ke{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Lu(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ou(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d5{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function iv(t,e=null,n=[],r=[],s=null,i=null,o=null){return new d5(t,e,n,r,s,i,o)}function qo(t){const e=re(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>sv(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Fp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ml(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ml(r)).join(",")),e.Te=n}return e.Te}function id(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!s5(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!tC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!MI(t.startAt,e.startAt)&&MI(t.endAt,e.endAt)}function Ff(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Uf(t,e){return t.filters.filter(n=>n instanceof ke&&n.field.isEqual(e))}function FI(t,e,n){let r=Lh,s=!0;for(const i of Uf(t,e)){let o=Lh,a=!0;switch(i.op){case"<":case"<=":o=n5(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=Lh}OI({value:r,inclusive:s},{value:o,inclusive:a})<0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];OI({value:r,inclusive:s},{value:o,inclusive:n.inclusive})<0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}function UI(t,e,n){let r=hi,s=!0;for(const i of Uf(t,e)){let o=hi,a=!0;switch(i.op){case">=":case">":o=r5(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=hi}VI({value:r,inclusive:s},{value:o,inclusive:a})>0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];VI({value:r,inclusive:s},{value:o,inclusive:n.inclusive})>0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function oC(t,e,n,r,s,i,o,a){return new Ml(t,e,n,r,s,i,o,a)}function od(t){return new Ml(t)}function jI(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function aC(t){return t.collectionGroup!==null}function Qc(t){const e=re(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ze(rt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Mu(i,r))}),n.has(rt.keyField().canonicalString())||e.Ie.push(new Mu(rt.keyField(),r))}return e.Ie}function zn(t){const e=re(t);return e.Ee||(e.Ee=h5(e,Qc(t))),e.Ee}function h5(t,e){if(t.limitType==="F")return iv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Mu(s.field,i)});const n=t.endAt?new gl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new gl(t.startAt.position,t.startAt.inclusive):null;return iv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ov(t,e){const n=t.filters.concat([e]);return new Ml(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function jf(t,e,n){return new Ml(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function qp(t,e){return id(zn(t),zn(e))&&t.limitType===e.limitType}function lC(t){return`${qo(zn(t))}|lt:${t.limitType}`}function ga(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>rC(s)).join(", ")}]`),Fp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ml(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ml(s)).join(",")),`Target(${r})`}(zn(t))}; limitType=${t.limitType})`}function ad(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):J.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Qc(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=LI(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Qc(r),s)||r.endAt&&!function(o,a,l){const c=LI(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Qc(r),s))}(t,e)}function cC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function uC(t){return(e,n)=>{let r=!1;for(const s of Qc(t)){const i=f5(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function f5(t,e,n){const r=t.field.isKeyField()?J.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?Fi(l,c):te(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return te(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ji(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return zR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p5=new Ge(J.comparator);function Un(){return p5}const dC=new Ge(J.comparator);function Rc(...t){let e=dC;for(const n of t)e=e.insert(n.key,n);return e}function hC(t){let e=dC;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Hr(){return Yc()}function fC(){return Yc()}function Yc(){return new Ds(t=>t.toString(),(t,e)=>t.isEqual(e))}const m5=new Ge(J.comparator),g5=new ze(J.comparator);function Ie(...t){let e=g5;for(const n of t)e=e.add(n);return e}const y5=new ze(pe);function lw(){return y5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ru(e)?"-0":e}}function pC(t){return{integerValue:""+t}}function v5(t,e){return DR(e)?pC(e):cw(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(){this._=void 0}}function _5(t,e,n){return t instanceof vl?function(s,i){const o={fields:{[WR]:{stringValue:HR},[GR]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&sw(i)&&(i=$p(i)),i&&(o.fields[KR]=i),{mapValue:o}}(n,e):t instanceof Ho?gC(t,e):t instanceof _l?yC(t,e):function(s,i){const o=mC(s,i),a=BI(o)+BI(s.Ae);return nv(o)&&nv(s.Ae)?pC(a):cw(s.serializer,a)}(t,e)}function w5(t,e,n){return t instanceof Ho?gC(t,e):t instanceof _l?yC(t,e):n}function mC(t,e){return t instanceof Fu?function(r){return nv(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class vl extends Hp{}class Ho extends Hp{constructor(e){super(),this.elements=e}}function gC(t,e){const n=vC(e);for(const r of t.elements)n.some(s=>Xr(s,r))||n.push(r);return{arrayValue:{values:n}}}class _l extends Hp{constructor(e){super(),this.elements=e}}function yC(t,e){let n=vC(e);for(const r of t.elements)n=n.filter(s=>!Xr(s,r));return{arrayValue:{values:n}}}class Fu extends Hp{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function BI(t){return tt(t.integerValue||t.doubleValue)}function vC(t){return Lu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(e,n){this.field=e,this.transform=n}}function E5(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Ho&&s instanceof Ho||r instanceof _l&&s instanceof _l?ll(r.elements,s.elements,Xr):r instanceof Fu&&s instanceof Fu?Xr(r.Ae,s.Ae):r instanceof vl&&s instanceof vl}(t.transform,e.transform)}class T5{constructor(e,n){this.version=e,this.transformResults=n}}class nn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new nn}static exists(e){return new nn(void 0,e)}static updateTime(e){return new nn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Uh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Wp{}function _C(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Kp(t.key,nn.none()):new Fl(t.key,t.data,nn.none());{const n=t.data,r=tn.empty();let s=new ze(rt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Ns(t.key,r,new Sn(s.toArray()),nn.none())}}function I5(t,e,n){t instanceof Fl?function(s,i,o){const a=s.value.clone(),l=zI(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ns?function(s,i,o){if(!Uh(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=zI(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(wC(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Xc(t,e,n,r){return t instanceof Fl?function(i,o,a,l){if(!Uh(i.precondition,o))return a;const c=i.value.clone(),d=qI(i.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ns?function(i,o,a,l){if(!Uh(i.precondition,o))return a;const c=qI(i.fieldTransforms,l,o),d=o.data;return d.setAll(wC(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,o,a){return Uh(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function S5(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=mC(r.transform,s||null);i!=null&&(n===null&&(n=tn.empty()),n.set(r.field,i))}return n||null}function $I(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ll(r,s,(i,o)=>E5(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Fl extends Wp{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ns extends Wp{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function wC(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function zI(t,e,n){const r=new Map;oe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,w5(o,a,n[s]))}return r}function qI(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,_5(i,o,e))}return r}class Kp extends Wp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class EC extends Wp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&I5(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Xc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Xc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=fC();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=_C(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(ue.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ie())}isEqual(e){return this.batchId===e.batchId&&ll(this.mutations,e.mutations,(n,r)=>$I(n,r))&&ll(this.baseMutations,e.baseMutations,(n,r)=>$I(n,r))}}class hw{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){oe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return m5}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new hw(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b5{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tt,Ve;function A5(t){switch(t){case B.OK:return te(64938);case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0;default:return te(15467,{code:t})}}function TC(t){if(t===void 0)return vt("GRPC error has no .code"),B.UNKNOWN;switch(t){case Tt.OK:return B.OK;case Tt.CANCELLED:return B.CANCELLED;case Tt.UNKNOWN:return B.UNKNOWN;case Tt.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case Tt.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case Tt.INTERNAL:return B.INTERNAL;case Tt.UNAVAILABLE:return B.UNAVAILABLE;case Tt.UNAUTHENTICATED:return B.UNAUTHENTICATED;case Tt.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case Tt.NOT_FOUND:return B.NOT_FOUND;case Tt.ALREADY_EXISTS:return B.ALREADY_EXISTS;case Tt.PERMISSION_DENIED:return B.PERMISSION_DENIED;case Tt.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case Tt.ABORTED:return B.ABORTED;case Tt.OUT_OF_RANGE:return B.OUT_OF_RANGE;case Tt.UNIMPLEMENTED:return B.UNIMPLEMENTED;case Tt.DATA_LOSS:return B.DATA_LOSS;default:return te(39323,{code:t})}}(Ve=Tt||(Tt={}))[Ve.OK=0]="OK",Ve[Ve.CANCELLED=1]="CANCELLED",Ve[Ve.UNKNOWN=2]="UNKNOWN",Ve[Ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ve[Ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ve[Ve.NOT_FOUND=5]="NOT_FOUND",Ve[Ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ve[Ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ve[Ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ve[Ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ve[Ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ve[Ve.ABORTED=10]="ABORTED",Ve[Ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ve[Ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ve[Ve.INTERNAL=13]="INTERNAL",Ve[Ve.UNAVAILABLE=14]="UNAVAILABLE",Ve[Ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x5(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P5=new bi([4294967295,4294967295],0);function HI(t){const e=x5().encode(t),n=new pR;return n.update(e),new Uint8Array(n.digest())}function WI(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new bi([n,r],0),new bi([s,i],0)]}class pw{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Cc(`Invalid padding: ${n}`);if(r<0)throw new Cc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Cc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Cc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=bi.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(bi.fromNumber(r)));return s.compare(P5)===1&&(s=new bi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=HI(e),[r,s]=WI(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new pw(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=HI(e),[r,s]=WI(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Cc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,cd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new ld(ue.min(),s,new Ge(pe),Un(),Ie())}}class cd{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new cd(r,n,Ie(),Ie(),Ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class IC{constructor(e,n){this.targetId=e,this.Ce=n}}class SC{constructor(e,n,r=gt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class KI{constructor(){this.ve=0,this.Fe=GI(),this.Me=gt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ie(),n=Ie(),r=Ie();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:te(38017,{changeType:i})}}),new cd(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=GI()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,oe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class R5{constructor(e){this.Ge=e,this.ze=new Map,this.je=Un(),this.Je=rh(),this.He=rh(),this.Ye=new Ge(pe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:te(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Ff(i))if(r===0){const o=new J(i.path);this.et(n,o,mt.newNoDocument(o,ue.min()))}else oe(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=xs(r).toUint8Array()}catch(l){if(l instanceof qR)return Vi("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new pw(o,s,i)}catch(l){return Vi(l instanceof Cc?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const a=this.ot(o);if(a){if(i.current&&Ff(a.target)){const l=new J(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,mt.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=Ie();this.He.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new ld(e,n,this.Ye,this.je,r);return this.je=Un(),this.Je=rh(),this.He=rh(),this.Ye=new Ge(pe),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new KI,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new ze(pe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new ze(pe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new KI),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function rh(){return new Ge(J.comparator)}function GI(){return new Ge(J.comparator)}const C5={asc:"ASCENDING",desc:"DESCENDING"},k5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},D5={and:"AND",or:"OR"};class N5{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function av(t,e){return t.useProto3Json||Fp(e)?e:{value:e}}function wl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function O5(t,e){return wl(t,e.toTimestamp())}function hn(t){return oe(!!t,49232),ue.fromTimestamp(function(n){const r=As(n);return new je(r.seconds,r.nanos)}(t))}function mw(t,e){return lv(t,e).canonicalString()}function lv(t,e){const n=function(s){return new Fe(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function AC(t){const e=Fe.fromString(t);return oe(VC(e),10190,{key:e.toString()}),e}function Bf(t,e){return mw(t.databaseId,e.path)}function Vo(t,e){const n=AC(e);if(n.get(1)!==t.databaseId.projectId)throw new K(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new J(RC(n))}function xC(t,e){return mw(t.databaseId,e)}function PC(t){const e=AC(t);return e.length===4?Fe.emptyPath():RC(e)}function cv(t){return new Fe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function RC(t){return oe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function QI(t,e,n){return{name:Bf(t,e),fields:n.value.mapValue.fields}}function V5(t,e,n){const r=Vo(t,e.name),s=hn(e.updateTime),i=e.createTime?hn(e.createTime):ue.min(),o=new tn({mapValue:{fields:e.fields}}),a=mt.newFoundDocument(r,s,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function L5(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:te(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(oe(d===void 0||typeof d=="string",58123),gt.fromBase64String(d||"")):(oe(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),gt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?B.UNKNOWN:TC(c.code);return new K(d,c.message||"")}(o);n=new SC(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Vo(t,r.document.name),i=hn(r.document.updateTime),o=r.document.createTime?hn(r.document.createTime):ue.min(),a=new tn({mapValue:{fields:r.document.fields}}),l=mt.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new jh(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Vo(t,r.document),i=r.readTime?hn(r.readTime):ue.min(),o=mt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new jh([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Vo(t,r.document),i=r.removedTargetIds||[];n=new jh([],i,s,null)}else{if(!("filter"in e))return te(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new b5(s,i),a=r.targetId;n=new IC(a,o)}}return n}function $f(t,e){let n;if(e instanceof Fl)n={update:QI(t,e.key,e.value)};else if(e instanceof Kp)n={delete:Bf(t,e.key)};else if(e instanceof Ns)n={update:QI(t,e.key,e.data),updateMask:$5(e.fieldMask)};else{if(!(e instanceof EC))return te(16599,{Vt:e.type});n={verify:Bf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof vl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ho)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof _l)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Fu)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw te(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:O5(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:te(27497)}(t,e.precondition)),n}function uv(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?nn.updateTime(hn(i.updateTime)):i.exists!==void 0?nn.exists(i.exists):nn.none()}(e.currentDocument):nn.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(o,a){let l=null;if("setToServerValue"in a)oe(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),l=new vl;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];l=new Ho(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];l=new _l(d)}else"increment"in a?l=new Fu(o,a.increment):te(16584,{proto:a});const c=rt.fromServerFormat(a.fieldPath);return new uw(c,l)}(t,s)):[];if(e.update){e.update.name;const s=Vo(t,e.update.name),i=new tn({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const c=l.fieldPaths||[];return new Sn(c.map(d=>rt.fromServerFormat(d)))}(e.updateMask);return new Ns(s,i,o,n,r)}return new Fl(s,i,n,r)}if(e.delete){const s=Vo(t,e.delete);return new Kp(s,n)}if(e.verify){const s=Vo(t,e.verify);return new EC(s,n)}return te(1463,{proto:e})}function M5(t,e){return t&&t.length>0?(oe(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?hn(s.updateTime):hn(i);return o.isEqual(ue.min())&&(o=hn(i)),new T5(o,s.transformResults||[])}(n,e))):[]}function CC(t,e){return{documents:[xC(t,e.path)]}}function kC(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=xC(t,s);const i=function(c){if(c.length!==0)return OC(Be.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(d=>function(p){return{field:ya(p.field),direction:U5(p.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=av(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:s}}function DC(t){let e=PC(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){oe(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(h){const p=NC(h);return p instanceof Be&&aw(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(p=>function(_){return new Mu(va(_.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(h){let p;return p=typeof h=="object"?h.value:h,Fp(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(h){const p=!!h.before,f=h.values||[];return new gl(f,p)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const p=!h.before,f=h.values||[];return new gl(f,p)}(n.endAt)),oC(e,s,o,i,a,"F",l,c)}function F5(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function NC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=va(n.unaryFilter.field);return ke.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=va(n.unaryFilter.field);return ke.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=va(n.unaryFilter.field);return ke.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=va(n.unaryFilter.field);return ke.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return te(61313);default:return te(60726)}}(t):t.fieldFilter!==void 0?function(n){return ke.create(va(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return te(58110);default:return te(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Be.create(n.compositeFilter.filters.map(r=>NC(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return te(1026)}}(n.compositeFilter.op))}(t):te(30097,{filter:t})}function U5(t){return C5[t]}function j5(t){return k5[t]}function B5(t){return D5[t]}function ya(t){return{fieldPath:t.canonicalString()}}function va(t){return rt.fromServerFormat(t.fieldPath)}function OC(t){return t instanceof ke?function(n){if(n.op==="=="){if(NI(n.value))return{unaryFilter:{field:ya(n.field),op:"IS_NAN"}};if(DI(n.value))return{unaryFilter:{field:ya(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(NI(n.value))return{unaryFilter:{field:ya(n.field),op:"IS_NOT_NAN"}};if(DI(n.value))return{unaryFilter:{field:ya(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ya(n.field),op:j5(n.op),value:n.value}}}(t):t instanceof Be?function(n){const r=n.getFilters().map(s=>OC(s));return r.length===1?r[0]:{compositeFilter:{op:B5(n.op),filters:r}}}(t):te(54877,{filter:t})}function $5(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function VC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e,n,r,s,i=ue.min(),o=ue.min(),a=gt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ds(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ds(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ds(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ds(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e){this.yt=e}}function z5(t,e){let n;if(e.document)n=V5(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=J.fromSegments(e.noDocument.path),s=Ko(e.noDocument.readTime);n=mt.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return te(56709);{const r=J.fromSegments(e.unknownDocument.path),s=Ko(e.unknownDocument.version);n=mt.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime(function(s){const i=new je(s[0],s[1]);return ue.fromTimestamp(i)}(e.readTime)),n}function YI(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:zf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,o){return{name:Bf(i,o.key),fields:o.data.value.mapValue.fields,updateTime:wl(i,o.version.toTimestamp()),createTime:wl(i,o.createTime.toTimestamp())}}(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Wo(e.version)};else{if(!e.isUnknownDocument())return te(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:Wo(e.version)}}return r}function zf(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Wo(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ko(t){const e=new je(t.seconds,t.nanoseconds);return ue.fromTimestamp(e)}function mo(t,e){const n=(e.baseMutations||[]).map(i=>uv(t.yt,i));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map(i=>uv(t.yt,i)),s=je.fromMillis(e.localWriteTimeMs);return new dw(e.batchId,s,n,r)}function kc(t){const e=Ko(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Ko(t.lastLimboFreeSnapshotVersion):ue.min();let r;return r=function(i){return i.documents!==void 0}(t.query)?function(i){const o=i.documents.length;return oe(o===1,1966,{count:o}),zn(od(PC(i.documents[0])))}(t.query):function(i){return zn(DC(i))}(t.query),new ds(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,gt.fromBase64String(t.resumeToken))}function MC(t,e){const n=Wo(e.snapshotVersion),r=Wo(e.lastLimboFreeSnapshotVersion);let s;s=Ff(e.target)?CC(t.yt,e.target):kC(t.yt,e.target).ft;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:qo(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function FC(t){const e=DC({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?jf(e,e.limit,"L"):e}function mg(t,e){return new fw(e.largestBatchId,uv(t.yt,e.overlayMutation))}function XI(t,e){const n=e.path.lastSegment();return[t,rn(e.path.popLast()),n]}function JI(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Wo(r.readTime),documentKey:rn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q5{getBundleMetadata(e,n){return ZI(e).get(n).next(r=>{if(r)return function(i){return{id:i.bundleId,createTime:Ko(i.createTime),version:i.version}}(r)})}saveBundleMetadata(e,n){return ZI(e).put(function(s){return{bundleId:s.id,createTime:Wo(hn(s.createTime)),version:s.version}}(n))}getNamedQuery(e,n){return eS(e).get(n).next(r=>{if(r)return function(i){return{name:i.name,query:FC(i.bundledQuery),readTime:Ko(i.readTime)}}(r)})}saveNamedQuery(e,n){return eS(e).put(function(s){return{name:s.name,readTime:Wo(hn(s.readTime)),bundledQuery:s.bundledQuery}}(n))}}function ZI(t){return Dt(t,Up)}function eS(t){return Dt(t,jp)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new Gp(e,r)}getOverlay(e,n){return gc(e).get(XI(this.userId,n)).next(r=>r?mg(this.serializer,r):null)}getOverlays(e,n){const r=Hr();return L.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){const s=[];return r.forEach((i,o)=>{const a=new fw(n,o);s.push(this.St(e,a))}),L.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach(o=>s.add(rn(o.getCollectionPath())));const i=[];return s.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(gc(e).Z(Zy,a))}),L.waitFor(i)}getOverlaysForCollection(e,n,r){const s=Hr(),i=rn(n),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return gc(e).J(Zy,o).next(a=>{for(const l of a){const c=mg(this.serializer,l);s.set(c.getKey(),c)}return s})}getOverlaysForCollectionGroup(e,n,r,s){const i=Hr();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return gc(e).ee({index:FR,range:a},(l,c,d)=>{const h=mg(this.serializer,c);i.size()<s||h.largestBatchId===o?(i.set(h.getKey(),h),o=h.largestBatchId):d.done()}).next(()=>i)}St(e,n){return gc(e).put(function(s,i,o){const[a,l,c]=XI(i,o.mutation.key);return{userId:i,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:$f(s.yt,o.mutation)}}(this.serializer,this.userId,n))}}function gc(t){return Dt(t,Bp)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H5{bt(e){return Dt(e,nw)}getSessionToken(e){return this.bt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?gt.fromUint8Array(r):gt.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(tt(e.integerValue));else if("doubleValue"in e){const r=tt(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),Ru(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=As(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(xs(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?YR(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):zp(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):te(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const s of Object.keys(r))this.Ot(s,n),this.Ct(r[s],n)}kt(e,n){var o,a;const r=e.fields||{};this.Ft(n,53);const s=pl,i=((a=(o=r[s].arrayValue)==null?void 0:o.values)==null?void 0:a.length)||0;this.Ft(n,15),n.Mt(tt(i)),this.Ot(s,n),this.Ct(r[s],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const s of r)this.Ct(s,n)}Lt(e,n){this.Ft(n,37),J.fromName(e).path.forEach(r=>{this.Ft(n,60),this.Ut(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}go.Kt=new go;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua=255;function W5(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function tS(t){const e=64-function(r){let s=0;for(let i=0;i<8;++i){const o=W5(255&r[i]);if(s+=o,o!==8)break}return s}(t);return Math.ceil(e/8)}class K5{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const s=n.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const s=n.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(e){const n=this.en(e),r=tS(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}nn(e){const n=this.en(e),r=tS(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}rn(){this.sn(ua),this.sn(255)}_n(){this.an(ua),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===ua?(this.sn(ua),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===ua?(this.an(ua),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class G5{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class Q5{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class yc{constructor(){this.cn=new K5,this.ln=new G5(this.cn),this.hn=new Q5(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e,n,r,s){this.Tn=e,this.In=n,this.En=r,this.dn=s}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new yo(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:Bh(this.En),directionalValue:Bh(this.dn),orderedDocumentKey:Bh(n),documentKey:r.path.toArray()}}Vn(e,n,r){const s=this.Rn(e,n,r);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function Ks(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=nS(t.En,e.En),n!==0?n:(n=nS(t.dn,e.dn),n!==0?n:J.comparator(t.In,e.In)))}function nS(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function Bh(t){return BP()?function(n){let r="";for(let s=0;s<n.length;s++)r+=String.fromCharCode(n[s]);return r}(t):t}function rS(t){return typeof t!="string"?t:function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(t)}class sS{constructor(e){this.mn=new ze((n,r)=>rt.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(oe(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=Yy(e);if(n!==void 0&&!this.wn(n))return!1;const r=uo(e);let s=new Set,i=0,o=0;for(;i<r.length&&this.wn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.mn.size>0){const a=this.mn.getIterator().getNext();if(!s.has(a.field.canonicalString())){const l=r[i];if(!this.Sn(a,l)||!this.bn(this.fn[o++],l))return!1}++i}for(;i<r.length;++i){const a=r[i];if(o>=this.fn.length||!this.bn(this.fn[o++],a))return!1}return!0}Dn(){if(this.pn)return null;let e=new ze(rt.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Nh(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Nh(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Nh(r.field,r.dir==="asc"?0:1)));return new Nf(Nf.UNKNOWN_ID,this.collectionId,n,Pu.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UC(t){var n,r;if(oe(t instanceof ke||t instanceof Be,20012),t instanceof ke){if(t instanceof iC){const s=((r=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:r.map(i=>ke.create(t.field,"==",i)))||[];return Be.create(s,"or")}return t}const e=t.filters.map(s=>UC(s));return Be.create(e,t.op)}function Y5(t){if(t.getFilters().length===0)return[];const e=fv(UC(t));return oe(jC(e),7391),dv(e)||hv(e)?[e]:e.getFilters()}function dv(t){return t instanceof ke}function hv(t){return t instanceof Be&&aw(t)}function jC(t){return dv(t)||hv(t)||function(n){if(n instanceof Be&&rv(n)){for(const r of n.getFilters())if(!dv(r)&&!hv(r))return!1;return!0}return!1}(t)}function fv(t){if(oe(t instanceof ke||t instanceof Be,34018),t instanceof ke)return t;if(t.filters.length===1)return fv(t.filters[0]);const e=t.filters.map(r=>fv(r));let n=Be.create(e,t.op);return n=qf(n),jC(n)?n:(oe(n instanceof Be,64498),oe(yl(n),40251),oe(n.filters.length>1,57927),n.filters.reduce((r,s)=>gw(r,s)))}function gw(t,e){let n;return oe(t instanceof ke||t instanceof Be,38388),oe(e instanceof ke||e instanceof Be,25473),n=t instanceof ke?e instanceof ke?function(s,i){return Be.create([s,i],"and")}(t,e):iS(t,e):e instanceof ke?iS(e,t):function(s,i){if(oe(s.filters.length>0&&i.filters.length>0,48005),yl(s)&&yl(i))return nC(s,i.getFilters());const o=rv(s)?s:i,a=rv(s)?i:s,l=o.filters.map(c=>gw(c,a));return Be.create(l,"or")}(t,e),qf(n)}function iS(t,e){if(yl(e))return nC(e,t.getFilters());{const n=e.filters.map(r=>gw(t,r));return Be.create(n,"or")}}function qf(t){if(oe(t instanceof ke||t instanceof Be,11850),t instanceof ke)return t;const e=t.getFilters();if(e.length===1)return qf(e[0]);if(eC(t))return t;const n=e.map(s=>qf(s)),r=[];return n.forEach(s=>{s instanceof ke?r.push(s):s instanceof Be&&(s.op===t.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:Be.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X5{constructor(){this.Cn=new yw}addToCollectionParentIndex(e,n){return this.Cn.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(Hn.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(Hn.min())}updateCollectionGroup(e,n,r){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class yw{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new ze(Fe.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ze(Fe.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS="IndexedDbIndexManager",sh=new Uint8Array(0);class J5{constructor(e,n){this.databaseId=n,this.vn=new yw,this.Fn=new Ds(r=>qo(r),(r,s)=>id(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(()=>{this.vn.add(n)});const i={collectionId:r,parent:rn(s)};return aS(e).put(i)}return L.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[IR(n),""],!1,!0);return aS(e).J(s).next(i=>{for(const o of i){if(o.collectionId!==n)break;r.push(qr(o.parent))}return r})}addFieldIndex(e,n){const r=vc(e),s=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete s.indexId;const i=r.add(s);if(n.indexState){const o=ha(e);return i.next(a=>{o.put(JI(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return i.next()}deleteFieldIndex(e,n){const r=vc(e),s=ha(e),i=da(e);return r.delete(n.indexId).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=vc(e),r=da(e),s=ha(e);return n.Z().next(()=>r.Z()).next(()=>s.Z())}createTargetIndexes(e,n){return L.forEach(this.Mn(n),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const i=new sS(r).Dn();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,n){const r=da(e);let s=!0;const i=new Map;return L.forEach(this.Mn(n),o=>this.xn(e,o).next(a=>{s&&(s=!!a),i.set(o,a)})).next(()=>{if(s){let o=Ie();const a=[];return L.forEach(i,(l,c)=>{H(oS,`Using index ${function(I){return`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map(D=>`${D.fieldPath}:${D.kind}`).join(",")}`}(l)} to execute ${qo(n)}`);const d=function(I,D){const O=Yy(D);if(O===void 0)return null;for(const V of Uf(I,O.fieldPath))switch(V.op){case"array-contains-any":return V.value.arrayValue.values||[];case"array-contains":return[V.value]}return null}(c,l),h=function(I,D){const O=new Map;for(const V of uo(D))for(const S of Uf(I,V.fieldPath))switch(S.op){case"==":case"in":O.set(V.fieldPath.canonicalString(),S.value);break;case"not-in":case"!=":return O.set(V.fieldPath.canonicalString(),S.value),Array.from(O.values())}return null}(c,l),p=function(I,D){const O=[];let V=!0;for(const S of uo(D)){const T=S.kind===0?FI(I,S.fieldPath,I.startAt):UI(I,S.fieldPath,I.startAt);O.push(T.value),V&&(V=T.inclusive)}return new gl(O,V)}(c,l),f=function(I,D){const O=[];let V=!0;for(const S of uo(D)){const T=S.kind===0?UI(I,S.fieldPath,I.endAt):FI(I,S.fieldPath,I.endAt);O.push(T.value),V&&(V=T.inclusive)}return new gl(O,V)}(c,l),_=this.On(l,c,p),y=this.On(l,c,f),E=this.Nn(l,c,h),w=this.Bn(l.indexId,d,_,p.inclusive,y,f.inclusive,E);return L.forEach(w,v=>r.Y(v,n.limit).next(I=>{I.forEach(D=>{const O=J.fromSegments(D.documentKey);o.has(O)||(o=o.add(O),a.push(O))})}))}).next(()=>a)}return L.resolve(null)})}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=Y5(Be.create(e.filters,"and")).map(r=>iv(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,n),n)}Bn(e,n,r,s,i,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,i.length),c=l/(n!=null?n.length:1),d=[];for(let h=0;h<l;++h){const p=n?this.Ln(n[h/c]):sh,f=this.kn(e,p,r[h%c],s),_=this.qn(e,p,i[h%c],o),y=a.map(E=>this.kn(e,p,E,!0));d.push(...this.createRange(f,_,y))}return d}kn(e,n,r,s){const i=new yo(e,J.empty(),n,r);return s?i:i.An()}qn(e,n,r,s){const i=new yo(e,J.empty(),n,r);return s?i.An():i}xn(e,n){const r=new sS(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let o=null;for(const a of i)r.yn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const s=this.Mn(n);return L.forEach(s,i=>this.xn(e,i).next(o=>{o?r!==0&&o.fields.length<function(l){let c=new ze(rt.comparator),d=!1;for(const h of l.filters)for(const p of h.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?d=!0:c=c.add(p.field));for(const h of l.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(d?1:0)}(i)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&s.length>1&&r===2?1:r)}Qn(e,n){const r=new yc;for(const s of uo(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const o=r.Pn(s.kind);go.Kt.Dt(i,o)}return r.un()}Ln(e){const n=new yc;return go.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new yc;return go.Kt.Dt(Vu(this.databaseId,n),r.Pn(function(i){const o=uo(i);return o.length===0?0:o[o.length-1].kind}(e))),r.un()}Nn(e,n,r){if(r===null)return[];let s=[];s.push(new yc);let i=0;for(const o of uo(e)){const a=r[i++];for(const l of s)if(this.Un(n,o.fieldPath)&&Lu(a))s=this.Kn(s,o,a);else{const c=l.Pn(o.kind);go.Kt.Dt(a,c)}}return this.Wn(s)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const a of s){const l=new yc;l.seed(a.un()),go.Kt.Dt(o,l.Pn(n.kind)),i.push(l)}return i}Un(e,n){return!!e.filters.find(r=>r instanceof ke&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=vc(e),s=ha(e);return(n?r.J(Jy,IDBKeyRange.bound(n,n)):r.J()).next(i=>{const o=[];return L.forEach(i,a=>s.get([a.indexId,this.uid]).next(l=>{o.push(function(d,h){const p=h?new Pu(h.sequenceNumber,new Hn(Ko(h.readTime),new J(qr(h.documentKey)),h.largestBatchId)):Pu.empty(),f=d.fields.map(([_,y])=>new Nh(rt.fromServerFormat(_),y));return new Nf(d.indexId,d.collectionGroup,f,p)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:pe(r.collectionGroup,s.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const s=vc(e),i=ha(e);return this.Gn(e).next(o=>s.J(Jy,IDBKeyRange.bound(n,n)).next(a=>L.forEach(a,l=>i.put(JI(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return L.forEach(n,(s,i)=>{const o=r.get(s.collectionGroup);return(o?L.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next(a=>(r.set(s.collectionGroup,a),L.forEach(a,l=>this.zn(e,s,l).next(c=>{const d=this.jn(i,l);return c.isEqual(d)?L.resolve():this.Jn(e,i,l,c,d)}))))})}Hn(e,n,r,s){return da(e).put(s.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,s){return da(e).delete(s.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const s=da(e);let i=new ze(Ks);return s.ee({index:MR,range:IDBKeyRange.only([r.indexId,this.uid,Bh(this.$n(r,n))])},(o,a)=>{i=i.add(new yo(r.indexId,n,rS(a.arrayValue),rS(a.directionalValue)))}).next(()=>i)}jn(e,n){let r=new ze(Ks);const s=this.Qn(n,e);if(s==null)return r;const i=Yy(n);if(i!=null){const o=e.data.field(i.fieldPath);if(Lu(o))for(const a of o.arrayValue.values||[])r=r.add(new yo(n.indexId,e.key,this.Ln(a),s))}else r=r.add(new yo(n.indexId,e.key,sh,s));return r}Jn(e,n,r,s,i){H(oS,"Updating index entries for document '%s'",n.key);const o=[];return function(l,c,d,h,p){const f=l.getIterator(),_=c.getIterator();let y=ca(f),E=ca(_);for(;y||E;){let w=!1,v=!1;if(y&&E){const I=d(y,E);I<0?v=!0:I>0&&(w=!0)}else y!=null?v=!0:w=!0;w?(h(E),E=ca(_)):v?(p(y),y=ca(f)):(y=ca(f),E=ca(_))}}(s,i,Ks,a=>{o.push(this.Hn(e,n,r,a))},a=>{o.push(this.Yn(e,n,r,a))}),L.waitFor(o)}Gn(e){let n=1;return ha(e).ee({index:LR,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,i)=>{i.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Ks(o,a)).filter((o,a,l)=>!a||Ks(o,l[a-1])!==0);const s=[];s.push(e);for(const o of r){const a=Ks(o,e),l=Ks(o,n);if(a===0)s[0]=e.An();else if(a>0&&l<0)s.push(o),s.push(o.An());else if(l>0)break}s.push(n);const i=[];for(let o=0;o<s.length;o+=2){if(this.Zn(s[o],s[o+1]))return[];const a=s[o].Vn(this.uid,sh,J.empty()),l=s[o+1].Vn(this.uid,sh,J.empty());i.push(IDBKeyRange.bound(a,l))}return i}Zn(e,n){return Ks(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(lS)}getMinOffset(e,n){return L.mapArray(this.Mn(n),r=>this.xn(e,r).next(s=>s||te(44426))).next(lS)}}function aS(t){return Dt(t,Du)}function da(t){return Dt(t,Kc)}function vc(t){return Dt(t,tw)}function ha(t){return Dt(t,Wc)}function lS(t){oe(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;J_(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new Hn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},BC=41943040;class Zt{static withCacheSize(e){return new Zt(e,Zt.DEFAULT_COLLECTION_PERCENTILE,Zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $C(t,e,n){const r=t.store(mr),s=t.store(ul),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.ee({range:o},(d,h,p)=>(a++,p.delete()));i.push(l.next(()=>{oe(a===1,47070,{batchId:n.batchId})}));const c=[];for(const d of n.mutations){const h=NR(e,d.key.path,n.batchId);i.push(s.delete(h)),c.push(d.key)}return L.waitFor(i).next(()=>c)}function Hf(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw te(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zt.DEFAULT_COLLECTION_PERCENTILE=10,Zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zt.DEFAULT=new Zt(BC,Zt.DEFAULT_COLLECTION_PERCENTILE,Zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zt.DISABLED=new Zt(-1,0,0);class Qp{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.Xn={}}static wt(e,n,r,s){oe(e.uid!=="",64387);const i=e.isAuthenticated()?e.uid:"";return new Qp(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Gs(e).ee({index:Io,range:r},(s,i,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,s){const i=_a(e),o=Gs(e);return o.add({}).next(a=>{oe(typeof a=="number",49019);const l=new dw(a,n,r,s),c=function(f,_,y){const E=y.baseMutations.map(v=>$f(f.yt,v)),w=y.mutations.map(v=>$f(f.yt,v));return{userId:_,batchId:y.batchId,localWriteTimeMs:y.localWriteTime.toMillis(),baseMutations:E,mutations:w}}(this.serializer,this.userId,l),d=[];let h=new ze((p,f)=>pe(p.canonicalString(),f.canonicalString()));for(const p of s){const f=NR(this.userId,p.key.path,a);h=h.add(p.key.path.popLast()),d.push(o.put(c)),d.push(i.put(f,Cj))}return h.forEach(p=>{d.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.Xn[a]=l.keys()}),L.waitFor(d).next(()=>l)})}lookupMutationBatch(e,n){return Gs(e).get(n).next(r=>r?(oe(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),mo(this.serializer,r)):null)}er(e,n){return this.Xn[n]?L.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const s=r.keys();return this.Xn[n]=s,s}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return Gs(e).ee({index:Io,range:s},(o,a,l)=>{a.userId===this.userId&&(oe(a.batchId>=r,47524,{tr:r}),i=mo(this.serializer,a)),l.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=No;return Gs(e).ee({index:Io,range:n,reverse:!0},(s,i,o)=>{r=i.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,No],[this.userId,Number.POSITIVE_INFINITY]);return Gs(e).J(Io,n).next(r=>r.map(s=>mo(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Oh(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return _a(e).ee({range:s},(o,a,l)=>{const[c,d,h]=o,p=qr(d);if(c===this.userId&&n.path.isEqual(p))return Gs(e).get(h).next(f=>{if(!f)throw te(61480,{nr:o,batchId:h});oe(f.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:f.userId,batchId:h}),i.push(mo(this.serializer,f))});l.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ze(pe);const s=[];return n.forEach(i=>{const o=Oh(this.userId,i.path),a=IDBKeyRange.lowerBound(o),l=_a(e).ee({range:a},(c,d,h)=>{const[p,f,_]=c,y=qr(f);p===this.userId&&i.path.isEqual(y)?r=r.add(_):h.done()});s.push(l)}),L.waitFor(s).next(()=>this.rr(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=Oh(this.userId,r),o=IDBKeyRange.lowerBound(i);let a=new ze(pe);return _a(e).ee({range:o},(l,c,d)=>{const[h,p,f]=l,_=qr(p);h===this.userId&&r.isPrefixOf(_)?_.length===s&&(a=a.add(f)):d.done()}).next(()=>this.rr(e,a))}rr(e,n){const r=[],s=[];return n.forEach(i=>{s.push(Gs(e).get(i).next(o=>{if(o===null)throw te(35274,{batchId:i});oe(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:i}),r.push(mo(this.serializer,o))}))}),L.waitFor(s).next(()=>r)}removeMutationBatch(e,n){return $C(e.le,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.ir(n.batchId)}),L.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return L.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),s=[];return _a(e).ee({range:r},(i,o,a)=>{if(i[0]===this.userId){const l=qr(i[1]);s.push(l)}else a.done()}).next(()=>{oe(s.length===0,56720,{sr:s.map(i=>i.canonicalString())})})})}containsKey(e,n){return zC(e,this.userId,n)}_r(e){return qC(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:No,lastStreamToken:""})}}function zC(t,e,n){const r=Oh(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return _a(t).ee({range:i,X:!0},(a,l,c)=>{const[d,h,p]=a;d===e&&h===s&&(o=!0),c.done()}).next(()=>o)}function Gs(t){return Dt(t,mr)}function _a(t){return Dt(t,ul)}function qC(t){return Dt(t,Cu)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Go(0)}static cr(){return new Go(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z5{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next(n=>{const r=new Go(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(n=>ue.fromTimestamp(new je(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.lr(e).next(s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.hr(e,s)))}addTargetData(e,n){return this.Pr(e,n).next(()=>this.lr(e).next(r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>fa(e).delete(n.targetId)).next(()=>this.lr(e)).next(r=>(oe(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r)))}removeTargets(e,n,r){let s=0;const i=[];return fa(e).ee((o,a)=>{const l=kc(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(s++,i.push(this.removeTargetData(e,l)))}).next(()=>L.waitFor(i)).next(()=>s)}forEachTarget(e,n){return fa(e).ee((r,s)=>{const i=kc(s);n(i)})}lr(e){return uS(e).get(Lf).next(n=>(oe(n!==null,2888),n))}hr(e,n){return uS(e).put(Lf,n)}Pr(e,n){return fa(e).put(MC(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next(n=>n.targetCount)}getTargetData(e,n){const r=qo(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return fa(e).ee({range:s,index:VR},(o,a,l)=>{const c=kc(a);id(n,c.target)&&(i=c,l.done())}).next(()=>i)}addMatchingKeys(e,n,r){const s=[],i=ni(e);return n.forEach(o=>{const a=rn(o.path);s.push(i.put({targetId:r,path:a})),s.push(this.referenceDelegate.addReference(e,r,o))}),L.waitFor(s)}removeMatchingKeys(e,n,r){const s=ni(e);return L.forEach(n,i=>{const o=rn(i.path);return L.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])})}removeMatchingKeysForTargetId(e,n){const r=ni(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=ni(e);let i=Ie();return s.ee({range:r,X:!0},(o,a,l)=>{const c=qr(o[1]),d=new J(c);i=i.add(d)}).next(()=>i)}containsKey(e,n){const r=rn(n.path),s=IDBKeyRange.bound([r],[IR(r)],!1,!0);let i=0;return ni(e).ee({index:ew,X:!0,range:s},([o,a],l,c)=>{o!==0&&(i++,c.done())}).next(()=>i>0)}At(e,n){return fa(e).get(n).next(r=>r?kc(r):null)}}function fa(t){return Dt(t,dl)}function uS(t){return Dt(t,Oo)}function ni(t){return Dt(t,hl)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS="LruGarbageCollector",HC=1048576;function hS([t,e],[n,r]){const s=pe(t,n);return s===0?pe(e,r):s}class eB{constructor(e){this.Ir=e,this.buffer=new ze(hS),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();hS(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class WC{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){H(dS,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Xi(n)?H(dS,"Ignoring IndexedDB error during garbage collection: ",n):await Yi(n)}await this.Vr(3e5)})}}class tB{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return L.resolve(In.ce);const r=new eB(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(cS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),cS):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,a,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,o=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(i=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),ma()<=Pe.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:h})))}}function KC(t,e){return new tB(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nB{constructor(e,n){this.db=e,this.garbageCollector=KC(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,(r,s)=>n(s))}addReference(e,n,r){return ih(e,r)}removeReference(e,n,r){return ih(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return ih(e,n)}br(e,n){return function(s,i){let o=!1;return qC(s).te(a=>zC(s,a,i).next(l=>(l&&(o=!0),L.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.Sr(e,(o,a)=>{if(a<=n){const l=this.br(e,o).next(c=>{if(!c)return i++,r.getEntry(e,o).next(()=>(r.removeEntry(o,ue.min()),ni(e).delete(function(h){return[0,rn(h.path)]}(o))))});s.push(l)}}).next(()=>L.waitFor(s)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return ih(e,n)}Sr(e,n){const r=ni(e);let s,i=In.ce;return r.ee({index:ew},([o,a],{path:l,sequenceNumber:c})=>{o===0?(i!==In.ce&&n(new J(qr(s)),i),i=c,s=l):i=In.ce}).next(()=>{i!==In.ce&&n(new J(qr(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ih(t,e){return ni(t).put(function(r,s){return{targetId:0,path:rn(r.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(){this.changes=new Ds(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,mt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rB{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return oo(e).put(r)}removeEntry(e,n,r){return oo(e).delete(function(i,o){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],zf(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Dr(e,r)))}getEntry(e,n){let r=mt.newInvalidDocument(n);return oo(e).ee({index:Vh,range:IDBKeyRange.only(_c(n))},(s,i)=>{r=this.Cr(n,i)}).next(()=>r)}vr(e,n){let r={size:0,document:mt.newInvalidDocument(n)};return oo(e).ee({index:Vh,range:IDBKeyRange.only(_c(n))},(s,i)=>{r={document:this.Cr(n,i),size:Hf(i)}}).next(()=>r)}getEntries(e,n){let r=Un();return this.Fr(e,n,(s,i)=>{const o=this.Cr(s,i);r=r.insert(s,o)}).next(()=>r)}Mr(e,n){let r=Un(),s=new Ge(J.comparator);return this.Fr(e,n,(i,o)=>{const a=this.Cr(i,o);r=r.insert(i,a),s=s.insert(i,Hf(o))}).next(()=>({documents:r,Or:s}))}Fr(e,n,r){if(n.isEmpty())return L.resolve();let s=new ze(mS);n.forEach(l=>s=s.add(l));const i=IDBKeyRange.bound(_c(s.first()),_c(s.last())),o=s.getIterator();let a=o.getNext();return oo(e).ee({index:Vh,range:i},(l,c,d)=>{const h=J.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&mS(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?d.j(_c(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,s,i){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),zf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return oo(e).J(IDBKeyRange.bound(a,l,!0)).next(c=>{i==null||i.incrementDocumentReadCount(c.length);let d=Un();for(const h of c){const p=this.Cr(J.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);p.isFoundDocument()&&(ad(n,p)||s.has(p.key))&&(d=d.insert(p.key,p))}return d})}getAllFromCollectionGroup(e,n,r,s){let i=Un();const o=pS(n,r),a=pS(n,Hn.max());return oo(e).ee({index:OR,range:IDBKeyRange.bound(o,a,!0)},(l,c,d)=>{const h=this.Cr(J.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);i=i.insert(h.key,h),i.size===s&&d.done()}).next(()=>i)}newChangeBuffer(e){return new sB(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return fS(e).get(Xy).next(n=>(oe(!!n,20021),n))}Dr(e,n){return fS(e).put(Xy,n)}Cr(e,n){if(n){const r=z5(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(ue.min())))return r}return mt.newInvalidDocument(e)}}function QC(t){return new rB(t)}class sB extends GC{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new Ds(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const n=[];let r=0,s=new ze((i,o)=>pe(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const a=this.Br.get(i);if(n.push(this.Nr.removeEntry(e,i,a.readTime)),o.isValidDocument()){const l=YI(this.Nr.serializer,o);s=s.add(i.path.popLast());const c=Hf(l);r+=c-a.size,n.push(this.Nr.addEntry(e,i,l))}else if(r-=a.size,this.trackRemovals){const l=YI(this.Nr.serializer,o.convertToNoDocument(ue.min()));n.push(this.Nr.addEntry(e,i,l))}}),s.forEach(i=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,i))}),n.push(this.Nr.updateMetadata(e,r)),L.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next(r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next(({documents:r,Or:s})=>(s.forEach((i,o)=>{this.Br.set(i,{size:o,readTime:r.get(i).readTime})}),r))}}function fS(t){return Dt(t,ku)}function oo(t){return Dt(t,Vf)}function _c(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function pS(t,e){const n=e.documentKey.path.toArray();return[t,zf(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function mS(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=pe(n[i],r[i]),s)return s;return s=pe(n.length,r.length),s||(s=pe(n[n.length-2],r[r.length-2]),s||pe(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iB{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Xc(r.mutation,s,Sn.empty(),je.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ie()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ie()){const s=Hr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Rc();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Hr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ie()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Un();const o=Yc(),a=function(){return Yc()}();return n.forEach((l,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof Ns)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),Xc(d.mutation,c,d.mutation.getFieldMask(),je.now())):o.set(c.key,Sn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>a.set(c,new iB(d,o.get(c)??null))),a))}recalculateAndSaveOverlays(e,n){const r=Yc();let s=new Ge((o,a)=>o-a),i=Ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||Sn.empty();d=a.applyToLocalView(c,d),r.set(l,d);const h=(s.get(a.batchId)||Ie()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,h=fC();d.forEach(p=>{if(!i.has(p)){const f=_C(n.get(p),r.get(p));f!==null&&h.set(p,f),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return L.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return J.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):aC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):L.resolve(Hr());let a=cl,l=i;return o.next(c=>L.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(d)?L.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{l=l.insert(d,p)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,Ie())).next(d=>({batchId:a,changes:hC(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new J(n)).next(r=>{let s=Rc();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Rc();return this.indexManager.getCollectionParents(e,i).next(a=>L.forEach(a,l=>{const c=function(h,p){return new Ml(p,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(d=>{d.forEach((h,p)=>{o=o.insert(h,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,mt.newInvalidDocument(d)))});let a=Rc();return o.forEach((l,c)=>{const d=i.get(l);d!==void 0&&Xc(d.mutation,c,Sn.empty(),je.now()),ad(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oB{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return L.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:hn(s.createTime)}}(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:FC(s.bundledQuery),readTime:hn(s.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aB{constructor(){this.overlays=new Ge(J.comparator),this.qr=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Hr();return L.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),L.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),L.resolve()}getOverlaysForCollection(e,n,r){const s=Hr(),i=n.length+1,o=new J(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return L.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ge((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=Hr(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=Hr(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return L.resolve(a)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new fw(n,r));let i=this.qr.get(n);i===void 0&&(i=Ie(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lB{constructor(){this.sessionToken=gt.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(){this.Qr=new ze(Ft.$r),this.Ur=new ze(Ft.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Ft(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Ft(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new J(new Fe([])),r=new Ft(n,e),s=new Ft(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new J(new Fe([])),r=new Ft(n,e),s=new Ft(n,e+1);let i=Ie();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ft(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ft{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return J.comparator(e.key,n.key)||pe(e.Yr,n.Yr)}static Kr(e,n){return pe(e.Yr,n.Yr)||J.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cB{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ze(Ft.$r)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new dw(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Zr=this.Zr.add(new Ft(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return L.resolve(o)}lookupMutationBatch(e,n){return L.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return L.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?No:this.tr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ft(n,0),s=new Ft(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const a=this.Xr(o.Yr);i.push(a)}),L.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ze(pe);return n.forEach(s=>{const i=new Ft(s,0),o=new Ft(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],a=>{r=r.add(a.Yr)})}),L.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;J.isDocumentKey(i)||(i=i.child(""));const o=new Ft(new J(i),0);let a=new ze(pe);return this.Zr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.Yr)),!0)},o),L.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){oe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return L.forEach(n.mutations,s=>{const i=new Ft(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Ft(n,0),s=this.Zr.firstAfterOrEqual(r);return L.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uB{constructor(e){this.ri=e,this.docs=function(){return new Ge(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():mt.newInvalidDocument(n))}getEntries(e,n){let r=Un();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():mt.newInvalidDocument(s))}),L.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Un();const o=n.path,a=new J(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||J_(PR(d),r)<=0||(s.has(d.key)||ad(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return L.resolve(i)}getAllFromCollectionGroup(e,n,r,s){te(9500)}ii(e,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new dB(this)}getSize(e){return L.resolve(this.size)}}class dB extends GC{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),L.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hB{constructor(e){this.persistence=e,this.si=new Ds(n=>qo(n),id),this.lastRemoteSnapshotVersion=ue.min(),this.highestTargetId=0,this.oi=0,this._i=new vw,this.targetCount=0,this.ai=Go.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),L.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Go(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.Pr(n),L.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),L.waitFor(i).next(()=>s)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return L.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),L.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),L.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),L.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return L.resolve(r)}containsKey(e,n){return L.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(e,n){this.ui={},this.overlays={},this.ci=new In(0),this.li=!1,this.li=!0,this.hi=new lB,this.referenceDelegate=e(this),this.Pi=new hB(this),this.indexManager=new X5,this.remoteDocumentCache=function(s){return new uB(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new LC(n),this.Ii=new oB(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new aB,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new cB(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){H("MemoryPersistence","Starting transaction:",e);const s=new fB(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return L.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class fB extends CR{constructor(e){super(),this.currentSequenceNumber=e}}class Yp{constructor(e){this.persistence=e,this.Ri=new vw,this.Vi=null}static mi(e){return new Yp(e)}get fi(){if(this.Vi)return this.Vi;throw te(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),L.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),L.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.fi,r=>{const s=J.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,ue.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return L.or([()=>L.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Wf{constructor(e,n){this.persistence=e,this.pi=new Ds(r=>rn(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=KC(this,n)}static mi(e,n){return new Wf(e,n)}Ei(){}di(e){return L.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return L.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?L.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,i.removeEntry(o,ue.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),L.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),L.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Mh(e.data.value)),n}br(e,n,r){return L.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return L.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pB{constructor(e){this.serializer=e}k(e,n,r,s){const i=new Mp("createOrUpgrade",n);r<1&&s>=1&&(function(l){l.createObjectStore(sd)}(e),function(l){l.createObjectStore(Cu,{keyPath:Rj}),l.createObjectStore(mr,{keyPath:AI,autoIncrement:!0}).createIndex(Io,xI,{unique:!0}),l.createObjectStore(ul)}(e),gS(e),function(l){l.createObjectStore(ho)}(e));let o=L.resolve();return r<3&&s>=3&&(r!==0&&(function(l){l.deleteObjectStore(hl),l.deleteObjectStore(dl),l.deleteObjectStore(Oo)}(e),gS(e)),o=o.next(()=>function(l){const c=l.store(Oo),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ue.min().toTimestamp(),targetCount:0};return c.put(Lf,d)}(i))),r<4&&s>=4&&(r!==0&&(o=o.next(()=>function(l,c){return c.store(mr).J().next(h=>{l.deleteObjectStore(mr),l.createObjectStore(mr,{keyPath:AI,autoIncrement:!0}).createIndex(Io,xI,{unique:!0});const p=c.store(mr),f=h.map(_=>p.put(_));return L.waitFor(f)})}(e,i))),o=o.next(()=>{(function(l){l.createObjectStore(fl,{keyPath:Fj})})(e)})),r<5&&s>=5&&(o=o.next(()=>this.yi(i))),r<6&&s>=6&&(o=o.next(()=>(function(l){l.createObjectStore(ku)}(e),this.wi(i)))),r<7&&s>=7&&(o=o.next(()=>this.Si(i))),r<8&&s>=8&&(o=o.next(()=>this.bi(e,i))),r<9&&s>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(o=o.next(()=>this.Di(i))),r<11&&s>=11&&(o=o.next(()=>{(function(l){l.createObjectStore(Up,{keyPath:Uj})})(e),function(l){l.createObjectStore(jp,{keyPath:jj})}(e)})),r<12&&s>=12&&(o=o.next(()=>{(function(l){const c=l.createObjectStore(Bp,{keyPath:Kj});c.createIndex(Zy,Gj,{unique:!1}),c.createIndex(FR,Qj,{unique:!1})})(e)})),r<13&&s>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore(Vf,{keyPath:kj});c.createIndex(Vh,Dj),c.createIndex(OR,Nj)}(e)).next(()=>this.Ci(e,i)).next(()=>e.deleteObjectStore(ho))),r<14&&s>=14&&(o=o.next(()=>this.Fi(e,i))),r<15&&s>=15&&(o=o.next(()=>function(l){l.createObjectStore(tw,{keyPath:Bj,autoIncrement:!0}).createIndex(Jy,$j,{unique:!1}),l.createObjectStore(Wc,{keyPath:zj}).createIndex(LR,qj,{unique:!1}),l.createObjectStore(Kc,{keyPath:Hj}).createIndex(MR,Wj,{unique:!1})}(e))),r<16&&s>=16&&(o=o.next(()=>{n.objectStore(Wc).clear()}).next(()=>{n.objectStore(Kc).clear()})),r<17&&s>=17&&(o=o.next(()=>{(function(l){l.createObjectStore(nw,{keyPath:Yj})})(e)})),r<18&&s>=18&&BP()&&(o=o.next(()=>{n.objectStore(Wc).clear()}).next(()=>{n.objectStore(Kc).clear()})),o}wi(e){let n=0;return e.store(ho).ee((r,s)=>{n+=Hf(s)}).next(()=>{const r={byteSize:n};return e.store(ku).put(Xy,r)})}yi(e){const n=e.store(Cu),r=e.store(mr);return n.J().next(s=>L.forEach(s,i=>{const o=IDBKeyRange.bound([i.userId,No],[i.userId,i.lastAcknowledgedBatchId]);return r.J(Io,o).next(a=>L.forEach(a,l=>{oe(l.userId===i.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const c=mo(this.serializer,l);return $C(e,i.userId,c).next(()=>{})}))}))}Si(e){const n=e.store(hl),r=e.store(ho);return e.store(Oo).get(Lf).next(s=>{const i=[];return r.ee((o,a)=>{const l=new Fe(o),c=function(h){return[0,rn(h)]}(l);i.push(n.get(c).next(d=>d?L.resolve():(h=>n.put({targetId:0,path:rn(h),sequenceNumber:s.highestListenSequenceNumber}))(l)))}).next(()=>L.waitFor(i))})}bi(e,n){e.createObjectStore(Du,{keyPath:Mj});const r=n.store(Du),s=new yw,i=o=>{if(s.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:rn(l)})}};return n.store(ho).ee({X:!0},(o,a)=>{const l=new Fe(o);return i(l.popLast())}).next(()=>n.store(ul).ee({X:!0},([o,a,l],c)=>{const d=qr(a);return i(d.popLast())}))}Di(e){const n=e.store(dl);return n.ee((r,s)=>{const i=kc(s),o=MC(this.serializer,i);return n.put(o)})}Ci(e,n){const r=n.store(ho),s=[];return r.ee((i,o)=>{const a=n.store(Vf),l=function(h){return h.document?new J(Fe.fromString(h.document.name).popFirst(5)):h.noDocument?J.fromSegments(h.noDocument.path):h.unknownDocument?J.fromSegments(h.unknownDocument.path):te(36783)}(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(c))}).next(()=>L.waitFor(s))}Fi(e,n){const r=n.store(mr),s=QC(this.serializer),i=new _w(Yp.mi,this.serializer.yt);return r.J().next(o=>{const a=new Map;return o.forEach(l=>{let c=a.get(l.userId)??Ie();mo(this.serializer,l).keys().forEach(d=>c=c.add(d)),a.set(l.userId,c)}),L.forEach(a,(l,c)=>{const d=new Jt(c),h=Gp.wt(this.serializer,d),p=i.getIndexManager(d),f=Qp.wt(d,this.serializer,p,i.referenceDelegate);return new YC(s,f,h,p).recalculateAndSaveOverlaysForDocumentKeys(new ev(n,In.ce),l).next()})})}}function gS(t){t.createObjectStore(hl,{keyPath:Vj}).createIndex(ew,Lj,{unique:!0}),t.createObjectStore(dl,{keyPath:"targetId"}).createIndex(VR,Oj,{unique:!0}),t.createObjectStore(Oo)}const Qs="IndexedDbPersistence",gg=18e5,yg=5e3,vg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",mB="main";class ww{constructor(e,n,r,s,i,o,a,l,c,d,h=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=i,this.window=o,this.document=a,this.xi=c,this.Oi=d,this.Ni=h,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=p=>Promise.resolve(),!ww.v())throw new K(B.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new nB(this,s),this.$i=n+mB,this.serializer=new LC(l),this.Ui=new Ai(this.$i,this.Ni,new pB(this.serializer)),this.hi=new H5,this.Pi=new Z5(this.referenceDelegate,this.serializer),this.remoteDocumentCache=QC(this.serializer),this.Ii=new q5,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,d===!1&&vt(Qs,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new K(B.FAILED_PRECONDITION,vg);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new In(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>oh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(n=>this.isPrimary&&!n?this.Zi(e).next(()=>!1):!!n&&this.Xi(e).next(()=>!0))).catch(e=>{if(Xi(e))return H(Qs,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return H(Qs,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return wc(e).get(la).next(n=>L.resolve(this.es(n)))}ts(e){return oh(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,gg)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Dt(n,fl);return r.J().next(s=>{const i=this.ss(s,gg),o=s.filter(a=>i.indexOf(a)===-1);return L.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?L.resolve(!0):wc(e).get(la).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,yg)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new K(B.FAILED_PRECONDITION,vg);return!1}}return!(!this.networkEnabled||!this.inForeground)||oh(e).J().next(r=>this.ss(r,yg).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(i||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&H(Qs,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[sd,fl],e=>{const n=new ev(e,In.ce);return this.Zi(n).next(()=>this.ts(n))}),this.Ui.close(),this.Ps()}ss(e,n){return e.filter(r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>oh(e).J().next(n=>this.ss(n,gg).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return Qp.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new J5(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Gp.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){H(Qs,"Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=function(l){return l===18?Zj:l===17?$R:l===16?Jj:l===15?rw:l===14?BR:l===13?jR:l===12?Xj:l===11?UR:void te(60245)}(this.Ni);let o;return this.Ui.runTransaction(e,s,i,a=>(o=new ev(a,this.ci?this.ci.next():In.ce),n==="readwrite-primary"?this.Hi(o).next(l=>!!l||this.Yi(o)).next(l=>{if(!l)throw vt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new K(B.FAILED_PRECONDITION,RR);return r(o)}).next(l=>this.Xi(o).next(()=>l)):this.Is(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Is(e){return wc(e).get(la).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,yg)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new K(B.FAILED_PRECONDITION,vg)})}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return wc(e).put(la,n)}static v(){return Ai.v()}Zi(e){const n=wc(e);return n.get(la).next(r=>this.es(r)?(H(Qs,"Releasing primary lease."),n.delete(la)):L.resolve())}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(vt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;jP()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const r=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return H(Qs,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return vt(Qs,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){vt("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function wc(t){return Dt(t,sd)}function oh(t){return Dt(t,fl)}function XC(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Ie(),s=Ie();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Ew(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gB{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return jP()?8:kR(Wt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new gB;return this.Ss(e,n,o).next(a=>{if(i.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(ma()<=Pe.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",ga(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),L.resolve()):(ma()<=Pe.DEBUG&&H("QueryEngine","Query:",ga(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(ma()<=Pe.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",ga(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zn(n))):L.resolve())}ys(e,n){if(jI(n))return L.resolve(null);let r=zn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=jf(n,null,"F"),r=zn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Ie(...i);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Ds(n,a);return this.Cs(n,c,o,l.readTime)?this.ys(e,jf(n,null,"F")):this.vs(e,c,n,l)}))})))}ws(e,n,r,s){return jI(n)||s.isEqual(ue.min())?L.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?L.resolve(null):(ma()<=Pe.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ga(n)),this.vs(e,o,n,xR(s,cl)).next(a=>a))})}Ds(e,n){let r=new ze(uC(e));return n.forEach((s,i)=>{ad(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return ma()<=Pe.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",ga(n)),this.ps.getDocumentsMatchingQuery(e,n,Hn.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tw="LocalStore",yB=3e8;class vB{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Ge(pe),this.xs=new Ds(i=>qo(i),id),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new YC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function ZC(t,e,n,r){return new vB(t,e,n,r)}async function ek(t,e){const n=re(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=Ie();for(const c of s){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Ls:c,removedBatchIds:o,addedBatchIds:a}))})})}function _B(t,e){const n=re(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const h=c.batch,p=h.keys();let f=L.resolve();return p.forEach(_=>{f=f.next(()=>d.getEntry(l,_)).next(y=>{const E=c.docVersions.get(_);oe(E!==null,48541),y.version.compareTo(E)<0&&(h.applyToRemoteDocument(y,c),y.isValidDocument()&&(y.setReadTime(c.commitVersion),d.addEntry(y)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Ie();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function tk(t){const e=re(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function wB(t,e){const n=re(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const a=[];e.targetChanges.forEach((d,h)=>{const p=s.get(h);if(!p)return;a.push(n.Pi.removeMatchingKeys(i,d.removedDocuments,h).next(()=>n.Pi.addMatchingKeys(i,d.addedDocuments,h)));let f=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?f=f.withResumeToken(gt.EMPTY_BYTE_STRING,ue.min()).withLastLimboFreeSnapshotVersion(ue.min()):d.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(d.resumeToken,r)),s=s.insert(h,f),function(y,E,w){return y.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=yB?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(p,f,d)&&a.push(n.Pi.updateTargetData(i,f))});let l=Un(),c=Ie();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(EB(i,o,e.documentUpdates).next(d=>{l=d.ks,c=d.qs})),!r.isEqual(ue.min())){const d=n.Pi.getLastRemoteSnapshotVersion(i).next(h=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return L.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.Ms=s,i))}function EB(t,e,n){let r=Ie(),s=Ie();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Un();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(ue.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):H(Tw,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{ks:o,qs:s}})}function TB(t,e){const n=re(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=No),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Kf(t,e){const n=re(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,L.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new ds(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function El(t,e,n){const r=re(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Xi(o))throw o;H(Tw,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function Gf(t,e,n){const r=re(t);let s=ue.min(),i=Ie();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const h=re(l),p=h.xs.get(d);return p!==void 0?L.resolve(h.Ms.get(p)):h.Pi.getTargetData(c,d)}(r,o,zn(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:ue.min(),n?i:Ie())).next(a=>(sk(r,cC(e),a),{documents:a,Qs:i})))}function nk(t,e){const n=re(t),r=re(n.Pi),s=n.Ms.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",i=>r.At(i,e).next(o=>o?o.target:null))}function rk(t,e){const n=re(t),r=n.Os.get(e)||ue.min();return n.persistence.runTransaction("Get new document changes","readonly",s=>n.Ns.getAllFromCollectionGroup(s,e,xR(r,cl),Number.MAX_SAFE_INTEGER)).then(s=>(sk(n,e,s),s))}function sk(t,e,n){let r=t.Os.get(e)||ue.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ik="firestore_clients";function yS(t,e){return`${ik}_${t}_${e}`}const ok="firestore_mutations";function vS(t,e,n){let r=`${ok}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const ak="firestore_targets";function _g(t,e){return`${ak}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br="SharedClientState";class Qf{constructor(e,n,r,s){this.user=e,this.batchId=n,this.state=r,this.error=s}static Ws(e,n,r){const s=JSON.parse(r);let i,o=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return o&&s.error&&(o=typeof s.error.message=="string"&&typeof s.error.code=="string",o&&(i=new K(s.error.code,s.error.message))),o?new Qf(e,n,s.state,i):(vt(Br,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Jc{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ws(e,n){const r=JSON.parse(n);let s,i=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return i&&r.error&&(i=typeof r.error.message=="string"&&typeof r.error.code=="string",i&&(s=new K(r.error.code,r.error.message))),i?new Jc(e,r.state,s):(vt(Br,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Yf{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const r=JSON.parse(n);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,i=lw();for(let o=0;s&&o<r.activeTargetIds.length;++o)s=DR(r.activeTargetIds[o]),i=i.add(r.activeTargetIds[o]);return s?new Yf(e,i):(vt(Br,`Failed to parse client data for instance '${e}': ${n}`),null)}}class Iw{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new Iw(n.clientId,n.onlineState):(vt(Br,`Failed to parse online state: ${e}`),null)}}class pv{constructor(){this.activeTargetIds=lw()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wg{constructor(e,n,r,s,i){this.window=e,this.Mi=n,this.persistenceKey=r,this.Js=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Ge(pe),this.started=!1,this.Xs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.eo=yS(this.persistenceKey,this.Js),this.no=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new pv),this.ro=new RegExp(`^${ik}_${o}_([^_]*)$`),this.io=new RegExp(`^${ok}_${o}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${ak}_${o}_(\\d+)$`),this.oo=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this._o=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const s=this.getItem(yS(this.persistenceKey,r));if(s){const i=Yf.Ws(r,s);i&&(this.Zs=this.Zs.insert(i.clientId,i))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const r=this.uo(n);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach((r,s)=>{s.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,r){this.ho(e,n,r),this.Po(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(_g(this.persistenceKey,e));if(s){const i=Jc.Ws(e,s);i&&(r=i.state)}}return n&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(_g(this.persistenceKey,e))}updateQueryState(e,n,r){this.Io(e,n,r)}handleUserChange(e,n,r){n.forEach(s=>{this.Po(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return H(Br,"READ",e,n),n}setItem(e,n){H(Br,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){H(Br,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(H(Br,"EVENT",n.key,n.newValue),n.key===this.eo)return void vt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const r=this.Ro(n.key);return this.Vo(r,null)}{const r=this.mo(n.key,n.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(this.so.test(n.key)){if(n.newValue!==null){const r=this.yo(n.key,n.newValue);if(r)return this.wo(r)}}else if(n.key===this.oo){if(n.newValue!==null){const r=this.uo(n.newValue);if(r)return this.co(r)}}else if(n.key===this.no){const r=function(i){let o=In.ce;if(i!=null)try{const a=JSON.parse(i);oe(typeof a=="number",30636,{So:i}),o=a}catch(a){vt(Br,"Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==In.ce&&this.sequenceNumberHandler(r)}else if(n.key===this._o){const r=this.bo(n.newValue);await Promise.all(r.map(s=>this.syncEngine.Do(s)))}}}else this.Xs.push(n)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,r){const s=new Qf(this.currentUser,e,n,r),i=vS(this.persistenceKey,this.currentUser,e);this.setItem(i,s.Gs())}Po(e){const n=vS(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,r){const s=_g(this.persistenceKey,e),i=new Jc(e,n,r);this.setItem(s,i.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const r=this.Ro(e);return Yf.Ws(r,n)}fo(e,n){const r=this.io.exec(e),s=Number(r[1]),i=r[2]!==void 0?r[2]:null;return Qf.Ws(new Jt(i),s,n)}yo(e,n){const r=this.so.exec(e),s=Number(r[1]);return Jc.Ws(s,n)}uo(e){return Iw.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);H(Br,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const r=n?this.Zs.insert(e,n):this.Zs.remove(e),s=this.lo(this.Zs),i=this.lo(r),o=[],a=[];return i.forEach(l=>{s.has(l)||o.push(l)}),s.forEach(l=>{i.has(l)||a.push(l)}),this.syncEngine.Fo(o,a).then(()=>{this.Zs=r})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=lw();return e.forEach((r,s)=>{n=n.unionWith(s.activeTargetIds)}),n}}class lk{constructor(){this.Mo=new pv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new pv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IB{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S="ConnectivityMonitor";class wS{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){H(_S,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){H(_S,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ah=null;function mv(){return ah===null?ah=function(){return 268435456+Math.round(2147483648*Math.random())}():ah++,"0x"+ah.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eg="RestConnection",SB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class bB{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Mf?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=mv(),a=this.zo(e,n.toUriEncodedString());H(Eg,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,i);const{host:c}=new URL(a),d=Cs(c);return this.Jo(e,a,l,r,d).then(h=>(H(Eg,`Received RPC '${e}' ${o}: `,h),h),h=>{throw Vi(Eg,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",r),h})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ll}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=SB[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AB{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xt="WebChannelConnection";class xB extends bB{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=mv();return new Promise((a,l)=>{const c=new mR;c.setWithCredentials(!0),c.listenOnce(gR.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Dh.NO_ERROR:const h=c.getResponseJson();H(Xt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),a(h);break;case Dh.TIMEOUT:H(Xt,`RPC '${e}' ${o} timed out`),l(new K(B.DEADLINE_EXCEEDED,"Request time out"));break;case Dh.HTTP_ERROR:const p=c.getStatus();if(H(Xt,`RPC '${e}' ${o} failed with status:`,p,"response text:",c.getResponseText()),p>0){let f=c.getResponseJson();Array.isArray(f)&&(f=f[0]);const _=f==null?void 0:f.error;if(_&&_.status&&_.message){const y=function(w){const v=w.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(v)>=0?v:B.UNKNOWN}(_.status);l(new K(y,_.message))}else l(new K(B.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new K(B.UNAVAILABLE,"Connection failed."));break;default:te(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{H(Xt,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(s);H(Xt,`RPC '${e}' ${o} sending request:`,s),c.send(n,"POST",d,r,15)})}T_(e,n,r){const s=mv(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=_R(),a=vR(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");H(Xt,`Creating RPC '${e}' stream ${s}: ${d}`,l);const h=o.createWebChannel(d,l);this.I_(h);let p=!1,f=!1;const _=new AB({Yo:E=>{f?H(Xt,`Not sending because RPC '${e}' stream ${s} is closed:`,E):(p||(H(Xt,`Opening RPC '${e}' stream ${s} transport.`),h.open(),p=!0),H(Xt,`RPC '${e}' stream ${s} sending:`,E),h.send(E))},Zo:()=>h.close()}),y=(E,w,v)=>{E.listen(w,I=>{try{v(I)}catch(D){setTimeout(()=>{throw D},0)}})};return y(h,Pc.EventType.OPEN,()=>{f||(H(Xt,`RPC '${e}' stream ${s} transport opened.`),_.o_())}),y(h,Pc.EventType.CLOSE,()=>{f||(f=!0,H(Xt,`RPC '${e}' stream ${s} transport closed`),_.a_(),this.E_(h))}),y(h,Pc.EventType.ERROR,E=>{f||(f=!0,Vi(Xt,`RPC '${e}' stream ${s} transport errored. Name:`,E.name,"Message:",E.message),_.a_(new K(B.UNAVAILABLE,"The operation could not be completed")))}),y(h,Pc.EventType.MESSAGE,E=>{var w;if(!f){const v=E.data[0];oe(!!v,16349);const I=v,D=(I==null?void 0:I.error)||((w=I[0])==null?void 0:w.error);if(D){H(Xt,`RPC '${e}' stream ${s} received error:`,D);const O=D.status;let V=function(b){const k=Tt[b];if(k!==void 0)return TC(k)}(O),S=D.message;V===void 0&&(V=B.INTERNAL,S="Unknown error status: "+O+" with message "+D.message),f=!0,_.a_(new K(V,S)),h.close()}else H(Xt,`RPC '${e}' stream ${s} received:`,v),_.u_(v)}}),y(a,yR.STAT_EVENT,E=>{E.stat===Gy.PROXY?H(Xt,`RPC '${e}' stream ${s} detected buffering proxy`):E.stat===Gy.NOPROXY&&H(Xt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{_.__()},0),_}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ck(){return typeof window<"u"?window:null}function $h(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xp(t){return new N5(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&H("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES="PersistentStream";class dk{constructor(e,n,r,s,i,o,a,l){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new uk(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(vt(n.toString()),vt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new K(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return H(ES,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(H(ES,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class PB extends dk{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=L5(this.serializer,e),r=function(i){if(!("targetChange"in i))return ue.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ue.min():o.readTime?hn(o.readTime):ue.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=cv(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=Ff(l)?{documents:CC(i,l)}:{query:kC(i,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=bC(i,o.resumeToken);const c=av(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ue.min())>0){a.readTime=wl(i,o.snapshotVersion.toTimestamp());const c=av(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=F5(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=cv(this.serializer),n.removeTarget=e,this.q_(n)}}class RB extends dk{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return oe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,oe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){oe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=M5(e.writeResults,e.commitTime),r=hn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=cv(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>$f(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CB{}class kB extends CB{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new K(B.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,lv(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new K(B.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,lv(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K(B.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class DB{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(vt(n),this.aa=!1):H("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qo="RemoteStore";class NB{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{ta(this)&&(H(Qo,"Restarting streams for network reachability change."),await async function(l){const c=re(l);c.Ea.add(4),await Ul(c),c.Ra.set("Unknown"),c.Ea.delete(4),await ud(c)}(this))})}),this.Ra=new DB(r,s)}}async function ud(t){if(ta(t))for(const e of t.da)await e(!0)}async function Ul(t){for(const e of t.da)await e(!1)}function Jp(t,e){const n=re(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Aw(n)?bw(n):Bl(n).O_()&&Sw(n,e))}function Tl(t,e){const n=re(t),r=Bl(n);n.Ia.delete(e),r.O_()&&hk(n,e),n.Ia.size===0&&(r.O_()?r.L_():ta(n)&&n.Ra.set("Unknown"))}function Sw(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ue.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Bl(t).Y_(e)}function hk(t,e){t.Va.Ue(e),Bl(t).Z_(e)}function bw(t){t.Va=new R5({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Bl(t).start(),t.Ra.ua()}function Aw(t){return ta(t)&&!Bl(t).x_()&&t.Ia.size>0}function ta(t){return re(t).Ea.size===0}function fk(t){t.Va=void 0}async function OB(t){t.Ra.set("Online")}async function VB(t){t.Ia.forEach((e,n)=>{Sw(t,e)})}async function LB(t,e){fk(t),Aw(t)?(t.Ra.ha(e),bw(t)):t.Ra.set("Unknown")}async function MB(t,e,n){if(t.Ra.set("Online"),e instanceof SC&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ia.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ia.delete(a),s.Va.removeTarget(a))}(t,e)}catch(r){H(Qo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Xf(t,r)}else if(e instanceof jh?t.Va.Ze(e):e instanceof IC?t.Va.st(e):t.Va.tt(e),!n.isEqual(ue.min()))try{const r=await tk(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Va.Tt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.Ia.get(c);d&&i.Ia.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=i.Ia.get(l);if(!d)return;i.Ia.set(l,d.withResumeToken(gt.EMPTY_BYTE_STRING,d.snapshotVersion)),hk(i,l);const h=new ds(d.target,l,c,d.sequenceNumber);Sw(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){H(Qo,"Failed to raise snapshot:",r),await Xf(t,r)}}async function Xf(t,e,n){if(!Xi(e))throw e;t.Ea.add(1),await Ul(t),t.Ra.set("Offline"),n||(n=()=>tk(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H(Qo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await ud(t)})}function pk(t,e){return e().catch(n=>Xf(t,n,e))}async function jl(t){const e=re(t),n=Ui(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:No;for(;FB(e);)try{const s=await TB(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,UB(e,s)}catch(s){await Xf(e,s)}mk(e)&&gk(e)}function FB(t){return ta(t)&&t.Ta.length<10}function UB(t,e){t.Ta.push(e);const n=Ui(t);n.O_()&&n.X_&&n.ea(e.mutations)}function mk(t){return ta(t)&&!Ui(t).x_()&&t.Ta.length>0}function gk(t){Ui(t).start()}async function jB(t){Ui(t).ra()}async function BB(t){const e=Ui(t);for(const n of t.Ta)e.ea(n.mutations)}async function $B(t,e,n){const r=t.Ta.shift(),s=hw.from(r,e,n);await pk(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await jl(t)}async function zB(t,e){e&&Ui(t).X_&&await async function(r,s){if(function(o){return A5(o)&&o!==B.ABORTED}(s.code)){const i=r.Ta.shift();Ui(r).B_(),await pk(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await jl(r)}}(t,e),mk(t)&&gk(t)}async function TS(t,e){const n=re(t);n.asyncQueue.verifyOperationInProgress(),H(Qo,"RemoteStore received new credentials");const r=ta(n);n.Ea.add(3),await Ul(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await ud(n)}async function gv(t,e){const n=re(t);e?(n.Ea.delete(2),await ud(n)):e||(n.Ea.add(2),await Ul(n),n.Ra.set("Unknown"))}function Bl(t){return t.ma||(t.ma=function(n,r,s){const i=re(n);return i.sa(),new PB(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:OB.bind(null,t),t_:VB.bind(null,t),r_:LB.bind(null,t),H_:MB.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Aw(t)?bw(t):t.Ra.set("Unknown")):(await t.ma.stop(),fk(t))})),t.ma}function Ui(t){return t.fa||(t.fa=function(n,r,s){const i=re(n);return i.sa(),new RB(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:jB.bind(null,t),r_:zB.bind(null,t),ta:BB.bind(null,t),na:$B.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await jl(t)):(await t.fa.stop(),t.Ta.length>0&&(H(Qo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new xw(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dd(t,e){if(vt("AsyncQueue",`${e}: ${t}`),Xi(t))return new K(B.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{static emptySet(e){return new $a(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||J.comparator(n.key,r.key):(n,r)=>J.comparator(n.key,r.key),this.keyedMap=Rc(),this.sortedSet=new Ge(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof $a)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new $a;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(){this.ga=new Ge(J.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):te(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Il{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Il(e,n,$a.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qB{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class HB{constructor(){this.queries=SS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=re(n),i=s.queries;s.queries=SS(),i.forEach((o,a)=>{for(const l of a.Sa)l.onError(r)})})(this,new K(B.ABORTED,"Firestore shutting down"))}}function SS(){return new Ds(t=>lC(t),qp)}async function Pw(t,e){const n=re(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new qB,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=dd(o,`Initialization of query '${ga(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Cw(n)}async function Rw(t,e){const n=re(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function WB(t,e){const n=re(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Fa(s)&&(r=!0);o.wa=s}}r&&Cw(n)}function KB(t,e,n){const r=re(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function Cw(t){t.Ca.forEach(e=>{e.next()})}var yv,bS;(bS=yv||(yv={})).Ma="default",bS.Cache="cache";class kw{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Il(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Il.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==yv.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(e){this.key=e}}class vk{constructor(e){this.key=e}}class _k{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ie(),this.mutatedKeys=Ie(),this.eu=uC(e),this.tu=new $a(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new IS,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const p=s.get(d),f=ad(this.query,h)?h:null,_=!!p&&this.mutatedKeys.has(p.key),y=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let E=!1;p&&f?p.data.isEqual(f.data)?_!==y&&(r.track({type:3,doc:f}),E=!0):this.su(p,f)||(r.track({type:2,doc:f}),E=!0,(l&&this.eu(f,l)>0||c&&this.eu(f,c)<0)&&(a=!0)):!p&&f?(r.track({type:0,doc:f}),E=!0):p&&!f&&(r.track({type:1,doc:p}),E=!0,(l||c)&&(a=!0)),E&&(f?(o=o.add(f),i=y?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{tu:o,iu:r,Cs:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((d,h)=>function(f,_){const y=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te(20277,{Rt:E})}};return y(f)-y(_)}(d.type,h.type)||this.eu(d.doc,h.doc)),this.ou(r),s=s??!1;const a=n&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,c=l!==this.Za;return this.Za=l,o.length!==0||c?{snapshot:new Il(this.query,e.tu,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new IS,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ie(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new vk(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new yk(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Ie();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Il.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const $l="SyncEngine";class GB{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class QB{constructor(e){this.key=e,this.hu=!1}}class YB{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Ds(a=>lC(a),qp),this.Iu=new Map,this.Eu=new Set,this.du=new Ge(J.comparator),this.Au=new Map,this.Ru=new vw,this.Vu={},this.mu=new Map,this.fu=Go.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function XB(t,e,n=!0){const r=Zp(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await wk(r,e,n,!0),s}async function JB(t,e){const n=Zp(t);await wk(n,e,!0,!1)}async function wk(t,e,n,r){const s=await Kf(t.localStore,zn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await Dw(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Jp(t.remoteStore,s),a}async function Dw(t,e,n,r,s){t.pu=(h,p,f)=>async function(y,E,w,v){let I=E.view.ru(w);I.Cs&&(I=await Gf(y.localStore,E.query,!1).then(({documents:S})=>E.view.ru(S,I)));const D=v&&v.targetChanges.get(E.targetId),O=v&&v.targetMismatches.get(E.targetId)!=null,V=E.view.applyChanges(I,y.isPrimaryClient,D,O);return vv(y,E.targetId,V.au),V.snapshot}(t,h,p,f);const i=await Gf(t.localStore,e,!0),o=new _k(e,i.Qs),a=o.ru(i.documents),l=cd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);vv(t,n,c.au);const d=new GB(e,n,o);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function ZB(t,e,n){const r=re(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!qp(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await El(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Tl(r.remoteStore,s.targetId),Sl(r,s.targetId)}).catch(Yi)):(Sl(r,s.targetId),await El(r.localStore,s.targetId,!0))}async function e9(t,e){const n=re(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Tl(n.remoteStore,r.targetId))}async function t9(t,e,n){const r=Lw(t);try{const s=await function(o,a){const l=re(o),c=je.now(),d=a.reduce((f,_)=>f.add(_.key),Ie());let h,p;return l.persistence.runTransaction("Locally write mutations","readwrite",f=>{let _=Un(),y=Ie();return l.Ns.getEntries(f,d).next(E=>{_=E,_.forEach((w,v)=>{v.isValidDocument()||(y=y.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(f,_)).next(E=>{h=E;const w=[];for(const v of a){const I=S5(v,h.get(v.key).overlayedDocument);I!=null&&w.push(new Ns(v.key,I,JR(I.value.mapValue),nn.exists(!0)))}return l.mutationQueue.addMutationBatch(f,c,w,a)}).next(E=>{p=E;const w=E.applyToLocalDocumentSet(h,y);return l.documentOverlayCache.saveOverlays(f,E.batchId,w)})}).then(()=>({batchId:p.batchId,changes:hC(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Vu[o.currentUser.toKey()];c||(c=new Ge(pe)),c=c.insert(a,l),o.Vu[o.currentUser.toKey()]=c}(r,s.batchId,n),await Zi(r,s.changes),await jl(r.remoteStore)}catch(s){const i=dd(s,"Failed to persist write");n.reject(i)}}async function Ek(t,e){const n=re(t);try{const r=await wB(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(oe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?oe(o.hu,14607):s.removedDocuments.size>0&&(oe(o.hu,42227),o.hu=!1))}),await Zi(n,r,e)}catch(r){await Yi(r)}}function AS(t,e,n){const r=re(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=re(o);l.onlineState=a;let c=!1;l.queries.forEach((d,h)=>{for(const p of h.Sa)p.va(a)&&(c=!0)}),c&&Cw(l)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function n9(t,e,n){const r=re(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Ge(J.comparator);o=o.insert(i,mt.newNoDocument(i,ue.min()));const a=Ie().add(i),l=new ld(ue.min(),new Map,new Ge(pe),o,a);await Ek(r,l),r.du=r.du.remove(i),r.Au.delete(e),Vw(r)}else await El(r.localStore,e,!1).then(()=>Sl(r,e,n)).catch(Yi)}async function r9(t,e){const n=re(t),r=e.batch.batchId;try{const s=await _B(n.localStore,e);Ow(n,r,null),Nw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Zi(n,s)}catch(s){await Yi(s)}}async function s9(t,e,n){const r=re(t);try{const s=await function(o,a){const l=re(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(oe(h!==null,37113),d=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);Ow(r,e,n),Nw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Zi(r,s)}catch(s){await Yi(s)}}function Nw(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function Ow(t,e,n){const r=re(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Sl(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||Tk(t,r)})}function Tk(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Tl(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Vw(t))}function vv(t,e,n){for(const r of n)r instanceof yk?(t.Ru.addReference(r.key,e),i9(t,r)):r instanceof vk?(H($l,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||Tk(t,r.key)):te(19791,{wu:r})}function i9(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(H($l,"New document in limbo: "+n),t.Eu.add(r),Vw(t))}function Vw(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new J(Fe.fromString(e)),r=t.fu.next();t.Au.set(r,new QB(n)),t.du=t.du.insert(n,r),Jp(t.remoteStore,new ds(zn(od(n.path)),r,"TargetPurposeLimboResolution",In.ce))}}async function Zi(t,e,n){const r=re(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{o.push(r.pu(l,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){s.push(c);const h=Ew.As(l.targetId,c);i.push(h)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(l,c){const d=re(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>L.forEach(c,p=>L.forEach(p.Es,f=>d.persistence.referenceDelegate.addReference(h,p.targetId,f)).next(()=>L.forEach(p.ds,f=>d.persistence.referenceDelegate.removeReference(h,p.targetId,f)))))}catch(h){if(!Xi(h))throw h;H(Tw,"Failed to update sequence numbers: "+h)}for(const h of c){const p=h.targetId;if(!h.fromCache){const f=d.Ms.get(p),_=f.snapshotVersion,y=f.withLastLimboFreeSnapshotVersion(_);d.Ms=d.Ms.insert(p,y)}}}(r.localStore,i))}async function o9(t,e){const n=re(t);if(!n.currentUser.isEqual(e)){H($l,"User change. New user:",e.toKey());const r=await ek(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(a=>{a.forEach(l=>{l.reject(new K(B.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Zi(n,r.Ls)}}function a9(t,e){const n=re(t),r=n.Au.get(e);if(r&&r.hu)return Ie().add(r.key);{let s=Ie();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const a=n.Tu.get(o);s=s.unionWith(a.view.nu)}return s}}async function l9(t,e){const n=re(t),r=await Gf(n.localStore,e.query,!0),s=e.view.cu(r);return n.isPrimaryClient&&vv(n,e.targetId,s.au),s}async function c9(t,e){const n=re(t);return rk(n.localStore,e).then(r=>Zi(n,r))}async function u9(t,e,n,r){const s=re(t),i=await function(a,l){const c=re(a),d=re(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.er(h,l).next(p=>p?c.localDocuments.getDocuments(h,p):L.resolve(null)))}(s.localStore,e);i!==null?(n==="pending"?await jl(s.remoteStore):n==="acknowledged"||n==="rejected"?(Ow(s,e,r||null),Nw(s,e),function(a,l){re(re(a).mutationQueue).ir(l)}(s.localStore,e)):te(6720,"Unknown batchState",{Su:n}),await Zi(s,i)):H($l,"Cannot apply mutation batch with id: "+e)}async function d9(t,e){const n=re(t);if(Zp(n),Lw(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),s=await xS(n,r.toArray());n.gu=!0,await gv(n.remoteStore,!0);for(const i of s)Jp(n.remoteStore,i)}else if(e===!1&&n.gu!==!1){const r=[];let s=Promise.resolve();n.Iu.forEach((i,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):s=s.then(()=>(Sl(n,o),El(n.localStore,o,!0))),Tl(n.remoteStore,o)}),await s,await xS(n,r),function(o){const a=re(o);a.Au.forEach((l,c)=>{Tl(a.remoteStore,c)}),a.Ru.Jr(),a.Au=new Map,a.du=new Ge(J.comparator)}(n),n.gu=!1,await gv(n.remoteStore,!1)}}async function xS(t,e,n){const r=re(t),s=[],i=[];for(const o of e){let a;const l=r.Iu.get(o);if(l&&l.length!==0){a=await Kf(r.localStore,zn(l[0]));for(const c of l){const d=r.Tu.get(c),h=await l9(r,d);h.snapshot&&i.push(h.snapshot)}}else{const c=await nk(r.localStore,o);a=await Kf(r.localStore,c),await Dw(r,Ik(c),o,!1,a.resumeToken)}s.push(a)}return r.Pu.H_(i),s}function Ik(t){return oC(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function h9(t){return function(n){return re(re(n).persistence).Ts()}(re(t).localStore)}async function f9(t,e,n,r){const s=re(t);if(s.gu)return void H($l,"Ignoring unexpected query state notification.");const i=s.Iu.get(e);if(i&&i.length>0)switch(n){case"current":case"not-current":{const o=await rk(s.localStore,cC(i[0])),a=ld.createSynthesizedRemoteEventForCurrentChange(e,n==="current",gt.EMPTY_BYTE_STRING);await Zi(s,o,a);break}case"rejected":await El(s.localStore,e,!0),Sl(s,e,r);break;default:te(64155,n)}}async function p9(t,e,n){const r=Zp(t);if(r.gu){for(const s of e){if(r.Iu.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){H($l,"Adding an already active target "+s);continue}const i=await nk(r.localStore,s),o=await Kf(r.localStore,i);await Dw(r,Ik(i),o.targetId,!1,o.resumeToken),Jp(r.remoteStore,o)}for(const s of n)r.Iu.has(s)&&await El(r.localStore,s,!1).then(()=>{Tl(r.remoteStore,s),Sl(r,s)}).catch(Yi)}}function Zp(t){const e=re(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ek.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=a9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=n9.bind(null,e),e.Pu.H_=WB.bind(null,e.eventManager),e.Pu.yu=KB.bind(null,e.eventManager),e}function Lw(t){const e=re(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=r9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=s9.bind(null,e),e}class Uu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Xp(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return ZC(this.persistence,new JC,e.initialUser,this.serializer)}Cu(e){return new _w(Yp.mi,this.serializer)}Du(e){return new lk}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Uu.provider={build:()=>new Uu};class m9 extends Uu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){oe(this.persistence.referenceDelegate instanceof Wf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new WC(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Zt.withCacheSize(this.cacheSizeBytes):Zt.DEFAULT;return new _w(r=>Wf.mi(r,n),this.serializer)}}class Sk extends Uu{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await Lw(this.xu.syncEngine),await jl(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return ZC(this.persistence,new JC,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new WC(r,e.asyncQueue,n)}Mu(e,n){const r=new xj(n,this.persistence);return new Aj(e.asyncQueue,r)}Cu(e){const n=XC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Zt.withCacheSize(this.cacheSizeBytes):Zt.DEFAULT;return new ww(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,ck(),$h(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new lk}}class g9 extends Sk{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof wg&&(this.sharedClientState.syncEngine={Co:u9.bind(null,n),vo:f9.bind(null,n),Fo:p9.bind(null,n),Ts:h9.bind(null,n),Do:c9.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji(async r=>{await d9(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Du(e){const n=ck();if(!wg.v(n))throw new K(B.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=XC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new wg(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class ju{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>AS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=o9.bind(null,this.syncEngine),await gv(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new HB}()}createDatastore(e){const n=Xp(e.databaseInfo.databaseId),r=function(i){return new xB(i)}(e.databaseInfo);return function(i,o,a,l){return new kB(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new NB(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>AS(this.syncEngine,n,0),function(){return wS.v()?new wS:new IB}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,d){const h=new YB(s,i,o,a,l,c);return d&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=re(s);H(Qo,"RemoteStore shutting down."),i.Ea.add(5),await Ul(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}ju.provider={build:()=>new ju};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):vt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ji="FirestoreClient";class y9{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Jt.UNAUTHENTICATED,this.clientId=Vp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{H(ji,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(H(ji,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=dd(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Tg(t,e){t.asyncQueue.verifyOperationInProgress(),H(ji,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await ek(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function PS(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Fw(t);H(ji,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>TS(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>TS(e.remoteStore,s)),t._onlineComponents=e}async function Fw(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H(ji,"Using user provided OfflineComponentProvider");try{await Tg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===B.FAILED_PRECONDITION||s.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Vi("Error using user provided cache. Falling back to memory cache: "+n),await Tg(t,new Uu)}}else H(ji,"Using default OfflineComponentProvider"),await Tg(t,new m9(void 0));return t._offlineComponents}async function Uw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H(ji,"Using user provided OnlineComponentProvider"),await PS(t,t._uninitializedComponentsProvider._online)):(H(ji,"Using default OnlineComponentProvider"),await PS(t,new ju))),t._onlineComponents}function bk(t){return Fw(t).then(e=>e.persistence)}function Ak(t){return Fw(t).then(e=>e.localStore)}function xk(t){return Uw(t).then(e=>e.remoteStore)}function v9(t){return Uw(t).then(e=>e.syncEngine)}async function Jf(t){const e=await Uw(t),n=e.eventManager;return n.onListen=XB.bind(null,e.syncEngine),n.onUnlisten=ZB.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=JB.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=e9.bind(null,e.syncEngine),n}function _9(t){return t.asyncQueue.enqueue(async()=>{const e=await bk(t),n=await xk(t);return e.setNetworkEnabled(!0),function(s){const i=re(s);return i.Ea.delete(0),ud(i)}(n)})}function w9(t){return t.asyncQueue.enqueue(async()=>{const e=await bk(t),n=await xk(t);return e.setNetworkEnabled(!1),async function(s){const i=re(s);i.Ea.add(0),await Ul(i),i.Ra.set("Offline")}(n)})}function E9(t,e){const n=new rr;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,o){try{const a=await function(c,d){const h=re(c);return h.persistence.runTransaction("read document","readonly",p=>h.localDocuments.getDocument(p,d))}(s,i);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new K(B.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=dd(a,`Failed to get document '${i} from cache`);o.reject(l)}}(await Ak(t),e,n)),n.promise}function T9(t,e,n={}){const r=new rr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new Mw({next:p=>{d.Nu(),o.enqueueAndForget(()=>Rw(i,h));const f=p.docs.has(a);!f&&p.fromCache?c.reject(new K(B.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&p.fromCache&&l&&l.source==="server"?c.reject(new K(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new kw(od(a.path),d,{includeMetadataChanges:!0,qa:!0});return Pw(i,h)}(await Jf(t),t.asyncQueue,e,n,r)),r.promise}function I9(t,e){const n=new rr;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,o){try{const a=await Gf(s,i,!0),l=new _k(i,a.Qs),c=l.ru(a.documents),d=l.applyChanges(c,!1);o.resolve(d.snapshot)}catch(a){const l=dd(a,`Failed to execute query '${i} against cache`);o.reject(l)}}(await Ak(t),e,n)),n.promise}function S9(t,e,n={}){const r=new rr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new Mw({next:p=>{d.Nu(),o.enqueueAndForget(()=>Rw(i,h)),p.fromCache&&l.source==="server"?c.reject(new K(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new kw(a,d,{includeMetadataChanges:!0,qa:!0});return Pw(i,h)}(await Jf(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pk(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b9="firestore.googleapis.com",CS=!0;class kS{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new K(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=b9,this.ssl=CS}else this.host=e.host,this.ssl=e.ssl??CS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=BC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<HC)throw new K(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}bR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Pk(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new K(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new K(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new K(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class jw{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new TR;switch(r.type){case"firstParty":return new yj(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=RS.get(n);r&&(H("ComponentProvider","Removing Datastore"),RS.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new xr(this.firestore,e,this._query)}}class it{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new it(this.firestore,e,this._key)}toJSON(){return{type:it._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(rd(n,it._jsonSchema))return new it(e,r||null,new J(Fe.fromString(n.referencePath)))}}it._jsonSchemaVersion="firestore/documentReference/1.0",it._jsonSchema={type:At("string",it._jsonSchemaVersion),referencePath:At("string")};class fs extends xr{constructor(e,n,r){super(e,n,od(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new it(this.firestore,null,new J(e))}withConverter(e){return new fs(this.firestore,e,this._path)}}function ye(t,e,...n){if(t=He(t),SR("collection","path",e),t instanceof jw){const r=Fe.fromString(e,...n);return EI(r),new fs(t,null,r)}{if(!(t instanceof it||t instanceof fs))throw new K(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Fe.fromString(e,...n));return EI(r),new fs(t.firestore,null,r)}}function ve(t,e,...n){if(t=He(t),arguments.length===1&&(e=Vp.newId()),SR("doc","path",e),t instanceof jw){const r=Fe.fromString(e,...n);return wI(r),new it(t,null,new J(r))}{if(!(t instanceof it||t instanceof fs))throw new K(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Fe.fromString(e,...n));return wI(r),new it(t.firestore,t instanceof fs?t.converter:null,new J(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS="AsyncQueue";class NS{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new uk(this,"async_queue_retry"),this._c=()=>{const r=$h();r&&H(DS,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=$h();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=$h();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new rr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Xi(e))throw e;H(DS,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,vt("INTERNAL UNHANDLED ERROR: ",OS(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=xw.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&te(47125,{Pc:OS(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function OS(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class fn extends jw{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new NS,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new NS(e),this._firestoreClient=void 0,await e}}}function Rk(t,e,n){n||(n=Mf);const r=Np(t,"firestore");if(r.isInitialized(n)){const s=r.getImmediate({identifier:n}),i=r.getOptions(n);if(ol(i,e))return s;throw new K(B.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new K(B.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<HC)throw new K(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Cs(e.host)&&z_(e.host),r.initialize({options:e,instanceIdentifier:n})}function Os(t){if(t._terminated)throw new K(B.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Ck(t),t._firestoreClient}function Ck(t){var r,s,i;const e=t._freezeSettings(),n=function(a,l,c,d){return new t5(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,Pk(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new y9(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}function A9(t,e){Vi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return kk(t,ju.provider,{build:r=>new Sk(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function x9(t){Vi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();kk(t,ju.provider,{build:n=>new g9(n,e.cacheSizeBytes)})}function kk(t,e,n){if((t=wt(t,fn))._firestoreClient||t._terminated)throw new K(B.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new K(B.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},Ck(t)}function Bw(t){return _9(Os(t=wt(t,fn)))}function $w(t){return w9(Os(t=wt(t,fn)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ln(gt.fromBase64String(e))}catch(n){throw new K(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ln(gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ln._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(rd(e,Ln._jsonSchema))return Ln.fromBase64String(e.bytes)}}Ln._jsonSchemaVersion="firestore/bytes/1.0",Ln._jsonSchema={type:At("string",Ln._jsonSchemaVersion),bytes:At("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return pe(this._lat,e._lat)||pe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:wr._jsonSchemaVersion}}static fromJSON(e){if(rd(e,wr._jsonSchema))return new wr(e.latitude,e.longitude)}}wr._jsonSchemaVersion="firestore/geoPoint/1.0",wr._jsonSchema={type:At("string",wr._jsonSchemaVersion),latitude:At("number"),longitude:At("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Er._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(rd(e,Er._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Er(e.vectorValues);throw new K(B.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Er._jsonSchemaVersion="firestore/vectorValue/1.0",Er._jsonSchema={type:At("string",Er._jsonSchemaVersion),vectorValues:At("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P9=/^__.*__$/;class R9{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ns(e,this.data,this.fieldMask,n,this.fieldTransforms):new Fl(e,this.data,n,this.fieldTransforms)}}class Dk{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ns(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Nk(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te(40011,{Ac:t})}}class em{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new em({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Zf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Nk(this.Ac)&&P9.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class C9{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Xp(e)}Cc(e,n,r,s=!1){return new em({Ac:e,methodName:n,Dc:r,path:rt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function tm(t){const e=t._freezeSettings(),n=Xp(t._databaseId);return new C9(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Ok(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);Hw("Data must be an object, but it was:",o,r);const a=Vk(r,o);let l,c;if(i.merge)l=new Sn(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const h of i.mergeFields){const p=_v(e,h,n);if(!o.contains(p))throw new K(B.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);Mk(d,p)||d.push(p)}l=new Sn(d),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new R9(new tn(a),l,c)}class nm extends zl{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof nm}}function k9(t,e,n){return new em({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class zw extends zl{_toFieldTransform(e){return new uw(e.path,new vl)}isEqual(e){return e instanceof zw}}class qw extends zl{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=k9(this,e,!0),r=this.vc.map(i=>ql(i,n)),s=new Ho(r);return new uw(e.path,s)}isEqual(e){return e instanceof qw&&ol(this.vc,e.vc)}}function D9(t,e,n,r){const s=t.Cc(1,e,n);Hw("Data must be an object, but it was:",s,r);const i=[],o=tn.empty();Ji(r,(l,c)=>{const d=Ww(e,l,n);c=He(c);const h=s.yc(d);if(c instanceof nm)i.push(d);else{const p=ql(c,h);p!=null&&(i.push(d),o.set(d,p))}});const a=new Sn(i);return new Dk(o,a,s.fieldTransforms)}function N9(t,e,n,r,s,i){const o=t.Cc(1,e,n),a=[_v(e,r,n)],l=[s];if(i.length%2!=0)throw new K(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)a.push(_v(e,i[p])),l.push(i[p+1]);const c=[],d=tn.empty();for(let p=a.length-1;p>=0;--p)if(!Mk(c,a[p])){const f=a[p];let _=l[p];_=He(_);const y=o.yc(f);if(_ instanceof nm)c.push(f);else{const E=ql(_,y);E!=null&&(c.push(f),d.set(f,E))}}const h=new Sn(c);return new Dk(d,h,o.fieldTransforms)}function O9(t,e,n,r=!1){return ql(n,t.Cc(r?4:3,e))}function ql(t,e){if(Lk(t=He(t)))return Hw("Unsupported field value:",e,t),Vk(t,e);if(t instanceof zl)return function(r,s){if(!Nk(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=ql(a,s.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=He(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return v5(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=je.fromDate(r);return{timestampValue:wl(s.serializer,i)}}if(r instanceof je){const i=new je(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:wl(s.serializer,i)}}if(r instanceof wr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ln)return{bytesValue:bC(s.serializer,r._byteString)};if(r instanceof it){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:mw(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Er)return function(o,a){return{mapValue:{fields:{[iw]:{stringValue:ow},[pl]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Sc("VectorValues must only contain numeric values.");return cw(a.serializer,c)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Lp(r)}`)}(t,e)}function Vk(t,e){const n={};return zR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ji(t,(r,s)=>{const i=ql(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Lk(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof je||t instanceof wr||t instanceof Ln||t instanceof it||t instanceof zl||t instanceof Er)}function Hw(t,e,n){if(!Lk(n)||!AR(n)){const r=Lp(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function _v(t,e,n){if((e=He(e))instanceof hd)return e._internalPath;if(typeof e=="string")return Ww(t,e);throw Zf("Field path arguments must be of type string or ",t,!1,void 0,n)}const V9=new RegExp("[~\\*/\\[\\]]");function Ww(t,e,n){if(e.search(V9)>=0)throw Zf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new hd(...e.split("."))._internalPath}catch{throw Zf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Zf(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new K(B.INVALID_ARGUMENT,a+t+l)}function Mk(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new it(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new L9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(rm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class L9 extends Fk{data(){return super.data()}}function rm(t,e){return typeof e=="string"?Ww(t,e):e instanceof hd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uk(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Kw{}class sm extends Kw{}function Re(t,e,...n){let r=[];e instanceof Kw&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof im).length,a=i.filter(l=>l instanceof fd).length;if(o>1||o>0&&a>0)throw new K(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class fd extends sm{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new fd(e,n,r)}_apply(e){const n=this._parse(e);return jk(e._query,n),new xr(e.firestore,e.converter,ov(e._query,n))}_parse(e){const n=tm(e.firestore);return function(i,o,a,l,c,d,h){let p;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new K(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){MS(h,d);const _=[];for(const y of h)_.push(LS(l,i,y));p={arrayValue:{values:_}}}else p=LS(l,i,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||MS(h,d),p=O9(a,o,h,d==="in"||d==="not-in");return ke.create(c,d,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function be(t,e,n){const r=e,s=rm("where",t);return fd._create(s,r,n)}class im extends Kw{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new im(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Be.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)jk(o,l),o=ov(o,l)}(e._query,n),new xr(e.firestore,e.converter,ov(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class om extends sm{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new om(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new K(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new K(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Mu(i,o)}(e._query,this._field,this._direction);return new xr(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Ml(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function ps(t,e="asc"){const n=e,r=rm("orderBy",t);return om._create(r,n)}class am extends sm{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new am(e,n,r)}_apply(e){return new xr(e.firestore,e.converter,jf(e._query,this._limit,this._limitType))}}function Yo(t){return Ij("limit",t),am._create("limit",t,"F")}function LS(t,e,n){if(typeof(n=He(n))=="string"){if(n==="")throw new K(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!aC(e)&&n.indexOf("/")!==-1)throw new K(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Fe.fromString(n));if(!J.isDocumentKey(r))throw new K(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Vu(t,new J(r))}if(n instanceof it)return Vu(t,n._key);throw new K(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Lp(n)}.`)}function MS(t,e){if(!Array.isArray(t)||t.length===0)throw new K(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function jk(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new K(B.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K(B.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Bk{convertValue(e,n="none"){switch(Mi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(xs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw te(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ji(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[pl].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>tt(o.doubleValue));return new Er(n)}convertGeoPoint(e){return new wr(tt(e.latitude),tt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=$p(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Nu(e));default:return null}}convertTimestamp(e){const n=As(e);return new je(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Fe.fromString(e);oe(VC(r),9688,{name:e});const s=new Li(r.get(1),r.get(3)),i=new J(r.popFirst(5));return s.isEqual(n)||vt(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $k(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class So{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ms extends Fk{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Zc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(rm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new K(B.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ms._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ms._jsonSchemaVersion="firestore/documentSnapshot/1.0",ms._jsonSchema={type:At("string",ms._jsonSchemaVersion),bundleSource:At("string","DocumentSnapshot"),bundleName:At("string"),bundle:At("string")};class Zc extends ms{data(e={}){return super.data(e)}}class gs{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new So(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Zc(this._firestore,this._userDataWriter,r.key,r,new So(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Zc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new So(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Zc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new So(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:M9(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new K(B.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=gs._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Vp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function M9(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(t){t=wt(t,it);const e=wt(t.firestore,fn);return T9(Os(e),t._key).then(n=>qk(e,t,n))}gs._jsonSchemaVersion="firestore/querySnapshot/1.0",gs._jsonSchema={type:At("string",gs._jsonSchemaVersion),bundleSource:At("string","QuerySnapshot"),bundleName:At("string"),bundle:At("string")};class pd extends Bk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ln(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new it(this.firestore,null,n)}}function zk(t){t=wt(t,it);const e=wt(t.firestore,fn),n=Os(e),r=new pd(e);return E9(n,t._key).then(s=>new ms(e,r,t._key,s,new So(s!==null&&s.hasLocalMutations,!0),t.converter))}function Ne(t){t=wt(t,xr);const e=wt(t.firestore,fn),n=Os(e),r=new pd(e);return Uk(t._query),S9(n,t._query).then(s=>new gs(e,r,t,s))}function F9(t){t=wt(t,xr);const e=wt(t.firestore,fn),n=Os(e),r=new pd(e);return I9(n,t._query).then(s=>new gs(e,r,t,s))}function Bi(t,e,n){t=wt(t,it);const r=wt(t.firestore,fn),s=$k(t.converter,e,n);return md(r,[Ok(tm(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,nn.none())])}function st(t,e,n,...r){t=wt(t,it);const s=wt(t.firestore,fn),i=tm(s);let o;return o=typeof(e=He(e))=="string"||e instanceof hd?N9(i,"updateDoc",t._key,e,n,r):D9(i,"updateDoc",t._key,e),md(s,[o.toMutation(t._key,nn.exists(!0))])}function Mn(t){return md(wt(t.firestore,fn),[new Kp(t._key,nn.none())])}function $i(t,e){const n=wt(t.firestore,fn),r=ve(t),s=$k(t.converter,e);return md(n,[Ok(tm(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,nn.exists(!1))]).then(()=>r)}function ep(t,...e){var l,c,d;t=He(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||VS(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(VS(e[r])){const h=e[r];e[r]=(l=h.next)==null?void 0:l.bind(h),e[r+1]=(c=h.error)==null?void 0:c.bind(h),e[r+2]=(d=h.complete)==null?void 0:d.bind(h)}let i,o,a;if(t instanceof it)o=wt(t.firestore,fn),a=od(t._key.path),i={next:h=>{e[r]&&e[r](qk(o,t,h))},error:e[r+1],complete:e[r+2]};else{const h=wt(t,xr);o=wt(h.firestore,fn),a=h._query;const p=new pd(o);i={next:f=>{e[r]&&e[r](new gs(o,p,h,f))},error:e[r+1],complete:e[r+2]},Uk(t._query)}return function(p,f,_,y){const E=new Mw(y),w=new kw(f,E,_);return p.asyncQueue.enqueueAndForget(async()=>Pw(await Jf(p),w)),()=>{E.Nu(),p.asyncQueue.enqueueAndForget(async()=>Rw(await Jf(p),w))}}(Os(o),a,s,i)}function md(t,e){return function(r,s){const i=new rr;return r.asyncQueue.enqueueAndForget(async()=>t9(await v9(r),s,i)),i.promise}(Os(t),e)}function qk(t,e,n){const r=n.docs.get(e._key),s=new pd(t);return new ms(t,s,e._key,r,new So(n.hasPendingWrites,n.fromCache),e.converter)}function Ae(){return new zw("serverTimestamp")}function U9(...t){return new qw("arrayUnion",t)}(function(e,n=!0){(function(s){Ll=s})(td),Ni(new Ss("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new fn(new mj(r.getProvider("auth-internal")),new vj(o,r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new K(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Li(c.options.projectId,d)}(o,s),o);return i={useFetchStreams:n,...i},a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),nr(gI,yI,e),nr(gI,yI,"esm2020")})();const Ig=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:Bk,Bytes:Ln,CollectionReference:fs,DocumentReference:it,DocumentSnapshot:ms,FieldPath:hd,FieldValue:zl,Firestore:fn,FirestoreError:K,GeoPoint:wr,Query:xr,QueryCompositeFilterConstraint:im,QueryConstraint:sm,QueryDocumentSnapshot:Zc,QueryFieldFilterConstraint:fd,QueryLimitConstraint:am,QueryOrderByConstraint:om,QuerySnapshot:gs,SnapshotMetadata:So,Timestamp:je,VectorValue:Er,_AutoId:Vp,_ByteString:gt,_DatabaseId:Li,_DocumentKey:J,_EmptyAuthCredentialsProvider:TR,_FieldPath:rt,_cast:wt,_logWarn:Vi,_validateIsNotUsedTogether:bR,addDoc:$i,arrayUnion:U9,collection:ye,deleteDoc:Mn,disableNetwork:$w,doc:ve,enableIndexedDbPersistence:A9,enableMultiTabIndexedDbPersistence:x9,enableNetwork:Bw,ensureFirestoreConfigured:Os,executeWrite:md,getDoc:St,getDocFromCache:zk,getDocs:Ne,getDocsFromCache:F9,initializeFirestore:Rk,limit:Yo,onSnapshot:ep,orderBy:ps,query:Re,serverTimestamp:Ae,setDoc:Bi,setLogLevel:wR,updateDoc:st,where:be},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j9="type.googleapis.com/google.protobuf.Int64Value",B9="type.googleapis.com/google.protobuf.UInt64Value";function Hk(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function tp(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>tp(e));if(typeof t=="function"||typeof t=="object")return Hk(t,e=>tp(e));throw new Error("Data cannot be encoded in JSON: "+t)}function bl(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case j9:case B9:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>bl(e)):typeof t=="function"||typeof t=="object"?Hk(t,e=>bl(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class bn extends Ar{constructor(e,n,r){super(`${Gw}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,bn.prototype)}}function $9(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function np(t,e){let n=$9(t),r=n,s;try{const i=e&&e.error;if(i){const o=i.status;if(typeof o=="string"){if(!FS[o])return new bn("internal","internal");n=FS[o],r=o}const a=i.message;typeof a=="string"&&(r=a),s=i.details,s!==void 0&&(s=bl(s))}}catch{}return n==="ok"?null:new bn(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z9{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Vn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(i=>this.auth=i,()=>{}),this.messaging||r.get().then(i=>this.messaging=i,()=>{}),this.appCheck||s==null||s.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv="us-central1",q9=/^data: (.*?)(?:\n|$)/;function H9(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new bn("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class W9{constructor(e,n,r,s,i=wv,o=(...a)=>fetch(...a)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new z9(e,n,r,s),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(i);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=wv}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function K9(t,e,n){const r=Cs(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(z_(t.emulatorOrigin+"/backends"),FP("Functions",!0))}function G9(t,e,n){const r=s=>Y9(t,e,s,{});return r.stream=(s,i)=>J9(t,e,s,i),r}function Wk(t){return t.emulatorOrigin&&Cs(t.emulatorOrigin)?"include":void 0}async function Q9(t,e,n,r,s){n["Content-Type"]="application/json";let i;try{i=await r(t,{method:"POST",body:JSON.stringify(e),headers:n,credentials:Wk(s)})}catch{return{status:0,json:null}}let o=null;try{o=await i.json()}catch{}return{status:i.status,json:o}}async function Kk(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function Y9(t,e,n,r){const s=t._url(e);return X9(t,s,n,r)}async function X9(t,e,n,r){n=tp(n);const s={data:n},i=await Kk(t,r),o=r.timeout||7e4,a=H9(o),l=await Promise.race([Q9(e,s,i,t.fetchImpl,t),a.promise,t.cancelAllRequests]);if(a.cancel(),!l)throw new bn("cancelled","Firebase Functions instance was deleted.");const c=np(l.status,l.json);if(c)throw c;if(!l.json)throw new bn("internal","Response is not valid JSON object.");let d=l.json.data;if(typeof d>"u"&&(d=l.json.result),typeof d>"u")throw new bn("internal","Response is missing data field.");return{data:bl(d)}}function J9(t,e,n,r){const s=t._url(e);return Z9(t,s,n,r||{})}async function Z9(t,e,n,r){var p;n=tp(n);const s={data:n},i=await Kk(t,r);i["Content-Type"]="application/json",i.Accept="text/event-stream";let o;try{o=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(s),headers:i,signal:r==null?void 0:r.signal,credentials:Wk(t)})}catch(f){if(f instanceof Error&&f.name==="AbortError"){const y=new bn("cancelled","Request was cancelled.");return{data:Promise.reject(y),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(y)}}}}}}const _=np(0,null);return{data:Promise.reject(_),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(_)}}}}}}let a,l;const c=new Promise((f,_)=>{a=f,l=_});(p=r==null?void 0:r.signal)==null||p.addEventListener("abort",()=>{const f=new bn("cancelled","Request was cancelled.");l(f)});const d=o.body.getReader(),h=e$(d,a,l,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const f=h.getReader();return{async next(){const{value:_,done:y}=await f.read();return{value:_,done:y}},async return(){return await f.cancel(),{done:!0,value:void 0}}}}},data:c}}function e$(t,e,n,r){const s=(o,a)=>{const l=o.match(q9);if(!l)return;const c=l[1];try{const d=JSON.parse(c);if("result"in d){e(bl(d.result));return}if("message"in d){a.enqueue(bl(d.message));return}if("error"in d){const h=np(0,d);a.error(h),n(h);return}}catch(d){if(d instanceof bn){a.error(d),n(d);return}}},i=new TextDecoder;return new ReadableStream({start(o){let a="";return l();async function l(){if(r!=null&&r.aborted){const c=new bn("cancelled","Request was cancelled");return o.error(c),n(c),Promise.resolve()}try{const{value:c,done:d}=await t.read();if(d){a.trim()&&s(a.trim(),o),o.close();return}if(r!=null&&r.aborted){const p=new bn("cancelled","Request was cancelled");o.error(p),n(p),await t.cancel();return}a+=i.decode(c,{stream:!0});const h=a.split(`
`);a=h.pop()||"";for(const p of h)p.trim()&&s(p.trim(),o);return l()}catch(c){const d=c instanceof bn?c:np(0,null);o.error(d),n(d)}}},cancel(){return t.cancel()}})}const US="@firebase/functions",jS="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t$="auth-internal",n$="app-check-internal",r$="messaging-internal";function s$(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),i=n.getProvider(t$),o=n.getProvider(r$),a=n.getProvider(n$);return new W9(s,i,o,a,r)};Ni(new Ss(Gw,e,"PUBLIC").setMultipleInstances(!0)),nr(US,jS,t),nr(US,jS,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i$(t=KP(),e=wv){const r=Np(He(t),Gw).getImmediate({identifier:e}),s=LP("functions");return s&&o$(r,...s),r}function o$(t,e,n){K9(He(t),e,n)}function Gk(t,e,n){return G9(He(t),e)}s$();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk="firebasestorage.googleapis.com",Yk="storageBucket",a$=2*60*1e3,l$=10*60*1e3,c$=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt extends Ar{constructor(e,n,r=0){super(Sg(e),`Firebase Storage: ${n} (${Sg(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,dt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Sg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var et;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(et||(et={}));function Sg(t){return"storage/"+t}function Qw(){const t="An unknown error occurred, please check the error payload for server response.";return new dt(et.UNKNOWN,t)}function u$(t){return new dt(et.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function d$(t){return new dt(et.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function h$(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new dt(et.UNAUTHENTICATED,t)}function f$(){return new dt(et.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function p$(t){return new dt(et.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function Xk(){return new dt(et.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Jk(){return new dt(et.CANCELED,"User canceled the upload/download.")}function m$(t){return new dt(et.INVALID_URL,"Invalid URL '"+t+"'.")}function g$(t){return new dt(et.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function y$(){return new dt(et.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Yk+"' property when initializing the app?")}function Zk(){return new dt(et.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function v$(){return new dt(et.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function _$(){return new dt(et.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function w$(t){return new dt(et.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Ev(t){return new dt(et.INVALID_ARGUMENT,t)}function eD(){return new dt(et.APP_DELETED,"The Firebase app was deleted.")}function E$(t){return new dt(et.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function eu(t,e){return new dt(et.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Ec(t){throw new dt(et.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=jn.makeFromUrl(e,n)}catch{return new jn(e,"")}if(r.path==="")return r;throw g$(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(D){D.path.charAt(D.path.length-1)==="/"&&(D.path_=D.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(D){D.path_=decodeURIComponent(D.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",f=new RegExp(`^https?://${h}/${d}/b/${s}/o${p}`,"i"),_={bucket:1,path:3},y=n===Qk?"(?:storage.googleapis.com|storage.cloud.google.com)":n,E="([^?#]*)",w=new RegExp(`^https?://${y}/${s}/${E}`,"i"),I=[{regex:a,indices:l,postModify:i},{regex:f,indices:_,postModify:c},{regex:w,indices:{bucket:1,path:2},postModify:c}];for(let D=0;D<I.length;D++){const O=I[D],V=O.regex.exec(e);if(V){const S=V[O.indices.bucket];let T=V[O.indices.path];T||(T=""),r=new jn(S,T),O.postModify(r);break}}if(r==null)throw m$(e);return r}}class T${constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I$(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function d(...E){c||(c=!0,e.apply(null,E))}function h(E){s=setTimeout(()=>{s=null,t(f,l())},E)}function p(){i&&clearTimeout(i)}function f(E,...w){if(c){p();return}if(E){p(),d.call(null,E,...w);return}if(l()||o){p(),d.call(null,E,...w);return}r<64&&(r*=2);let I;a===1?(a=2,I=0):I=(r+Math.random())*1e3,h(I)}let _=!1;function y(E){_||(_=!0,p(),!c&&(s!==null?(E||(a=2),clearTimeout(s),h(0)):E||(a=1)))}return h(0),i=setTimeout(()=>{o=!0,y(!0)},n),y}function S$(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b$(t){return t!==void 0}function A$(t){return typeof t=="function"}function x$(t){return typeof t=="object"&&!Array.isArray(t)}function lm(t){return typeof t=="string"||t instanceof String}function BS(t){return Yw()&&t instanceof Blob}function Yw(){return typeof Blob<"u"}function $S(t,e,n,r){if(r<e)throw Ev(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Ev(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gd(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function tD(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Lo;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Lo||(Lo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nD(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P${constructor(e,n,r,s,i,o,a,l,c,d,h,p=!0,f=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=h,this.retry=p,this.isUsingEmulator=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,y)=>{this.resolve_=_,this.reject_=y,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new lh(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===Lo.NO_ERROR,l=i.getStatus();if(!a||nD(l,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===Lo.ABORT;r(!1,new lh(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new lh(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());b$(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=Qw();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?eD():Jk();o(l)}else{const l=Xk();o(l)}};this.canceled_?n(!1,new lh(!1,null,!0)):this.backoffId_=I$(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&S$(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class lh{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function R$(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function C$(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function k$(t,e){e&&(t["X-Firebase-GMPID"]=e)}function D$(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function N$(t,e,n,r,s,i,o=!0,a=!1){const l=tD(t.urlParams),c=t.url+l,d=Object.assign({},t.headers);return k$(d,e),R$(d,n),C$(d,i),D$(d,r),new P$(c,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O$(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function V$(...t){const e=O$();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Yw())return new Blob(t);throw new dt(et.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function L$(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M$(t){if(typeof atob>"u")throw w$("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class bg{constructor(e,n){this.data=e,this.contentType=n||null}}function F$(t,e){switch(t){case Wr.RAW:return new bg(rD(e));case Wr.BASE64:case Wr.BASE64URL:return new bg(sD(t,e));case Wr.DATA_URL:return new bg(j$(e),B$(e))}throw Qw()}function rD(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function U$(t){let e;try{e=decodeURIComponent(t)}catch{throw eu(Wr.DATA_URL,"Malformed data URL.")}return rD(e)}function sD(t,e){switch(t){case Wr.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw eu(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Wr.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw eu(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=M$(e)}catch(s){throw s.message.includes("polyfill")?s:eu(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class iD{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw eu(Wr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=$$(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function j$(t){const e=new iD(t);return e.base64?sD(Wr.BASE64,e.rest):U$(e.rest)}function B$(t){return new iD(t).contentType}function $$(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e,n){let r=0,s="";BS(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(BS(this.data_)){const r=this.data_,s=L$(r,e,n);return s===null?null:new as(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new as(r,!0)}}static getBlob(...e){if(Yw()){const n=e.map(r=>r instanceof as?r.data_:r);return new as(V$.apply(null,n))}else{const n=e.map(o=>lm(o)?F$(Wr.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new as(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oD(t){let e;try{e=JSON.parse(t)}catch{return null}return x$(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z$(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function q$(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function aD(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H$(t,e){return e}class an{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||H$}}let ch=null;function W$(t){return!lm(t)||t.length<2?t:aD(t)}function Xw(){if(ch)return ch;const t=[];t.push(new an("bucket")),t.push(new an("generation")),t.push(new an("metageneration")),t.push(new an("name","fullPath",!0));function e(i,o){return W$(o)}const n=new an("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new an("size");return s.xform=r,t.push(s),t.push(new an("timeCreated")),t.push(new an("updated")),t.push(new an("md5Hash",null,!0)),t.push(new an("cacheControl",null,!0)),t.push(new an("contentDisposition",null,!0)),t.push(new an("contentEncoding",null,!0)),t.push(new an("contentLanguage",null,!0)),t.push(new an("contentType",null,!0)),t.push(new an("metadata","customMetadata",!0)),ch=t,ch}function K$(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new jn(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function G$(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return K$(r,t),r}function lD(t,e,n){const r=oD(e);return r===null?null:G$(t,r,n)}function Q$(t,e,n,r){const s=oD(e);if(s===null||!lm(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const d=t.bucket,h=t.fullPath,p="/b/"+o(d)+"/o/"+o(h),f=gd(p,n,r),_=tD({alt:"media",token:c});return f+_})[0]}function cD(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class Hl{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ys(t){if(!t)throw Qw()}function Jw(t,e){function n(r,s){const i=lD(t,s,e);return ys(i!==null),i}return n}function Y$(t,e){function n(r,s){const i=lD(t,s,e);return ys(i!==null),Q$(i,s,t.host,t._protocol)}return n}function yd(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=f$():s=h$():n.getStatus()===402?s=d$(t.bucket):n.getStatus()===403?s=p$(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function uD(t){const e=yd(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=u$(t.path)),i.serverResponse=s.serverResponse,i}return n}function X$(t,e,n){const r=e.fullServerUrl(),s=gd(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new Hl(s,i,Jw(t,n),o);return a.errorHandler=uD(e),a}function J$(t,e,n){const r=e.fullServerUrl(),s=gd(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new Hl(s,i,Y$(t,n),o);return a.errorHandler=uD(e),a}function Z$(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function dD(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=Z$(null,e)),r}function hD(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let I="";for(let D=0;D<2;D++)I=I+Math.random().toString().slice(2);return I}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=dD(e,r,s),d=cD(c,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,p=`\r
--`+l+"--",f=as.getBlob(h,r,p);if(f===null)throw Zk();const _={name:c.fullPath},y=gd(i,t.host,t._protocol),E="POST",w=t.maxUploadRetryTime,v=new Hl(y,E,Jw(t,n),w);return v.urlParams=_,v.headers=o,v.body=f.uploadData(),v.errorHandler=yd(e),v}class rp{constructor(e,n,r,s){this.current=e,this.total=n,this.finalized=!!r,this.metadata=s||null}}function Zw(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{ys(!1)}return ys(!!n&&(e||["active"]).indexOf(n)!==-1),n}function ez(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o=dD(e,r,s),a={name:o.fullPath},l=gd(i,t.host,t._protocol),c="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},h=cD(o,n),p=t.maxUploadRetryTime;function f(y){Zw(y);let E;try{E=y.getResponseHeader("X-Goog-Upload-URL")}catch{ys(!1)}return ys(lm(E)),E}const _=new Hl(l,c,f,p);return _.urlParams=a,_.headers=d,_.body=h,_.errorHandler=yd(e),_}function tz(t,e,n,r){const s={"X-Goog-Upload-Command":"query"};function i(c){const d=Zw(c,["active","final"]);let h=null;try{h=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{ys(!1)}h||ys(!1);const p=Number(h);return ys(!isNaN(p)),new rp(p,r.size(),d==="final")}const o="POST",a=t.maxUploadRetryTime,l=new Hl(n,o,i,a);return l.headers=s,l.errorHandler=yd(e),l}const zS=256*1024;function nz(t,e,n,r,s,i,o,a){const l=new rp(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw v$();const c=l.total-l.current;let d=c;s>0&&(d=Math.min(d,s));const h=l.current,p=h+d;let f="";d===0?f="finalize":c===d?f="upload, finalize":f="upload";const _={"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":`${l.current}`},y=r.slice(h,p);if(y===null)throw Zk();function E(D,O){const V=Zw(D,["active","final"]),S=l.current+d,T=r.size();let b;return V==="final"?b=Jw(e,i)(D,O):b=null,new rp(S,T,V==="final",b)}const w="POST",v=e.maxUploadRetryTime,I=new Hl(n,w,E,v);return I.headers=_,I.body=y.uploadData(),I.progressCallback=a||null,I.errorHandler=yd(t),I}const wn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Ag(t){switch(t){case"running":case"pausing":case"canceling":return wn.RUNNING;case"paused":return wn.PAUSED;case"success":return wn.SUCCESS;case"canceled":return wn.CANCELED;case"error":return wn.ERROR;default:return wn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rz{constructor(e,n,r){if(A$(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pa(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class sz{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Lo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Lo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Lo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw Ec("cannot .send() more than once");if(Cs(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ec("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ec("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ec("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ec("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class iz extends sz{initXhr(){this.xhr_.responseType="text"}}function vo(){return new iz}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oz{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=Xw(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(et.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const i=this.isExponentialBackoffExpired();if(nD(s.status,[]))if(i)s=Xk();else{this.sleepTime=Math.max(this.sleepTime*2,c$),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(et.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,i)=>{this._resolve=s,this._reject=i,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=ez(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,vo,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._uploadUrl=i,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const s=tz(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(s,vo,n,r);this._request=i,i.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=zS*this._chunkMultiplier,n=new rp(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,i)=>{let o;try{o=nz(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,vo,s,i,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){zS*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=X$(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,vo,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=hD(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,vo,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=Jk(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=Ag(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,s){const i=new rz(n||void 0,r||void 0,s||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Ag(this._state)){case wn.SUCCESS:pa(this._resolve.bind(null,this.snapshot))();break;case wn.CANCELED:case wn.ERROR:const n=this._reject;pa(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Ag(this._state)){case wn.RUNNING:case wn.PAUSED:e.next&&pa(e.next.bind(e,this.snapshot))();break;case wn.SUCCESS:e.complete&&pa(e.complete.bind(e))();break;case wn.CANCELED:case wn.ERROR:e.error&&pa(e.error.bind(e,this._error))();break;default:e.error&&pa(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e,n){this._service=e,n instanceof jn?this._location=n:this._location=jn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Xo(e,n)}get root(){const e=new jn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return aD(this._location.path)}get storage(){return this._service}get parent(){const e=z$(this._location.path);if(e===null)return null;const n=new jn(this._location.bucket,e);return new Xo(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw E$(e)}}function az(t,e,n){t._throwIfRoot("uploadBytes");const r=hD(t.storage,t._location,Xw(),new as(e,!0),n);return t.storage.makeRequestWithTokens(r,vo).then(s=>({metadata:s,ref:t}))}function lz(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new oz(t,new as(e),n)}function cz(t){t._throwIfRoot("getDownloadURL");const e=J$(t.storage,t._location,Xw());return t.storage.makeRequestWithTokens(e,vo).then(n=>{if(n===null)throw _$();return n})}function uz(t,e){const n=q$(t._location.path,e),r=new jn(t._location.bucket,n);return new Xo(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dz(t){return/^[A-Za-z]+:\/\//.test(t)}function hz(t,e){return new Xo(t,e)}function fD(t,e){if(t instanceof eE){const n=t;if(n._bucket==null)throw y$();const r=new Xo(n,n._bucket);return e!=null?fD(r,e):r}else return e!==void 0?uz(t,e):t}function fz(t,e){if(e&&dz(e)){if(t instanceof eE)return hz(t,e);throw Ev("To use ref(service, url), the first argument must be a Storage instance.")}else return fD(t,e)}function qS(t,e){const n=e==null?void 0:e[Yk];return n==null?null:jn.makeFromBucketSpec(n,t)}function pz(t,e,n,r={}){t.host=`${e}:${n}`;const s=Cs(e);s&&(z_(`https://${t.host}/b`),FP("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:RU(i,t.app.options.projectId))}class eE{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=Qk,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=a$,this._maxUploadRetryTime=l$,this._requests=new Set,s!=null?this._bucket=jn.makeFromBucketSpec(s,this._host):this._bucket=qS(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=jn.makeFromBucketSpec(this._url,e):this._bucket=qS(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){$S("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){$S("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Vn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Xo(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new T$(eD());{const o=N$(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const HS="@firebase/storage",WS="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pD="storage";function R8(t,e,n){return t=He(t),az(t,e,n)}function C8(t,e,n){return t=He(t),lz(t,e,n)}function k8(t){return t=He(t),cz(t)}function D8(t,e){return t=He(t),fz(t,e)}function mz(t=KP(),e){t=He(t);const r=Np(t,pD).getImmediate({identifier:e}),s=LP("storage");return s&&gz(r,...s),r}function gz(t,e,n,r={}){pz(t,e,n,r)}function yz(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new eE(n,r,s,e,td)}function vz(){Ni(new Ss(pD,yz,"PUBLIC").setMultipleInstances(!0)),nr(HS,WS,""),nr(HS,WS,"esm2020")}vz();const Tv={apiKey:"AIzaSyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s",authDomain:"voda-c6abd.firebaseapp.com",projectId:"voda-c6abd",storageBucket:"voda-c6abd.appspot.com",messagingSenderId:"483702062341",appId:"1:483702062341:web:b1ff06ad175cb7ae428b6c"};console.log(" Initializing Firebase with config:",{projectId:Tv.projectId,authDomain:Tv.authDomain,emulatorMode:!1});const cm=WP(Tv),Yn=M3(cm,{persistence:[ij,Ky]});console.log(" Firebase Auth initialized with browserLocalPersistence (fallback to inMemory)");const Q=Rk(cm,{experimentalAutoDetectLongPolling:!0});try{wR("error")}catch{}const tE=i$(cm,"us-central1"),_z=mz(cm);console.log(" Firebase initialized successfully");const wz=async()=>{try{console.log(" Offline persistence disabled (env flag or emulator mode)"),console.log(" Firestore features configured successfully")}catch(t){console.error(" Error configuring Firestore features:",t)}};setTimeout(wz,100);let fo=0;const xg=3,Ez=1e3,mD=async t=>{var e,n;if(console.error(" Firestore connection error:",t),(t.code==="unavailable"||t.code==="failed-precondition"||(e=t.message)!=null&&e.includes("ERR_ABORTED")||(n=t.message)!=null&&n.includes("UNAVAILABLE"))&&fo<xg){fo++;const r=Math.min(Ez*Math.pow(2,fo-1),1e4);console.log(` Attempting to reconnect (${fo}/${xg}) in ${r}ms...`);try{await $w(Q),await new Promise(s=>setTimeout(s,r)),await Bw(Q),console.log(" Firestore reconnected successfully"),fo=0}catch(s){console.error(" Failed to reconnect:",s),fo>=xg&&(console.error(" Maximum reconnection attempts reached."),Tz())}}},Tz=()=>{const t=document.createElement("div");t.style.cssText=`
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #f8d7da;
    color: #721c24;
    padding: 20px;
    border-radius: 8px;
    border: 1px solid #f5c6cb;
    z-index: 10000;
    text-align: center;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    max-width: 400px;
  `,t.innerHTML=`
    <h3 style="margin: 0 0 10px 0;">  </h3>
    <p style="margin: 0 0 15px 0;">   .     .</p>
    <button onclick="window.location.reload()" style="
      background: #dc3545;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
    ">  </button>
  `,document.body.appendChild(t),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},1e4)};window.addEventListener("online",async()=>{console.log(" Network back online, enabling Firestore...");try{await Bw(Q),fo=0,console.log(" Firestore network enabled")}catch(t){console.error(" Failed to enable Firestore network:",t)}});window.addEventListener("offline",async()=>{console.log(" Network offline, disabling Firestore network...");try{await $w(Q),console.log(" Firestore network disabled")}catch(t){console.error(" Failed to disable Firestore network:",t)}});window.addEventListener("unhandledrejection",t=>{var e,n,r,s,i,o;(((e=t.reason)==null?void 0:e.code)==="unavailable"||((n=t.reason)==null?void 0:n.code)==="failed-precondition"||(s=(r=t.reason)==null?void 0:r.message)!=null&&s.includes("ERR_ABORTED")||(o=(i=t.reason)==null?void 0:i.message)!=null&&o.includes("UNAVAILABLE"))&&(mD(t.reason),t.preventDefault())});console.log("Using Firebase Production Environment");const Pg=Object.freeze(Object.defineProperty({__proto__:null,auth:Yn,db:Q,functions:tE,handleFirestoreError:mD,storage:_z},Symbol.toStringTag,{value:"Module"})),Le=t=>{if(t&&typeof t=="object"&&typeof t.toDate=="function")return t.toDate();if(t instanceof Date)return t;if(typeof t=="number")return new Date(t);if(typeof t=="string"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return new Date},Iz=t=>{if(t===null)return!1;const e=Object.getPrototypeOf(t);return e===Object.prototype||e===null},Bu=t=>{if(t===void 0)return;if(t===null)return null;if(Array.isArray(t))return t.map(n=>Bu(n)).filter(n=>n!==void 0);if(t instanceof Date||!Iz(t))return t;const e={};for(const[n,r]of Object.entries(t)){const s=Bu(r);s!==void 0&&(e[n]=s)}return e},zh={async create(t){await Bi(ve(Q,"profiles",t.userId),{userId:t.userId,shopId:t.shopId,role:t.role,fullName:t.fullName,phone:t.phone,createdAt:Ae()})},async getById(t){const e=ve(Q,"profiles",t),n=await St(e);if(n.exists()){const r=n.data();return{userId:n.id,...r,createdAt:Le(r.createdAt)}}return null},async update(t,e){const n=ve(Q,"profiles",t);await st(n,{...e,updatedAt:Ae()})},async getByShopId(t){const e=Re(ye(Q,"profiles"),be("shopId","==",t));return(await Ne(e)).docs.map(r=>{const s=r.data();return{userId:r.id,...s,createdAt:Le(s.createdAt)}})}},Iv={async create(t){return(await $i(ye(Q,"referrals"),{...t,createdAt:Ae(),updatedAt:Ae()})).id},async getByReferrerId(t){try{const e=Re(ye(Q,"referrals"),be("referrerId","==",t),ps("createdAt","desc"));return(await Ne(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:Le(r.data().createdAt),updatedAt:Le(r.data().updatedAt)}))}catch(e){if(String((e==null?void 0:e.message)||"").includes("requires an index")){const r=Re(ye(Q,"referrals"),be("referrerId","==",t));return(await Ne(r)).docs.map(i=>({id:i.id,...i.data(),createdAt:Le(i.data().createdAt),updatedAt:Le(i.data().updatedAt)})).sort((i,o)=>{var a,l,c,d;return(((l=(a=o.createdAt)==null?void 0:a.getTime)==null?void 0:l.call(a))||0)-(((d=(c=i.createdAt)==null?void 0:c.getTime)==null?void 0:d.call(c))||0)})}throw e}},async getByReferralCode(t){const e=Re(ye(Q,"referrals"),be("referralCode","==",t),Yo(1)),n=await Ne(e);if(n.empty)return null;const r=n.docs[0];return{id:r.id,...r.data(),createdAt:Le(r.data().createdAt),updatedAt:Le(r.data().updatedAt)}},async updateStatus(t,e){await st(ve(Q,"referrals",t),{status:e,updatedAt:Ae()})},generateReferralCode(t){const e=Date.now().toString(36);return`REF_${t.slice(-6)}_${e}`.toUpperCase()}},gD={async getByUserId(t){const e=Re(ye(Q,"profiles"),be("userId","==",t)),n=await Ne(e);if(!n.empty){const r=n.docs[0],s=r.data();return{userId:r.id,...s,createdAt:Le(s.createdAt),updatedAt:Le(s.updatedAt)}}return null},async update(t,e){const n=Re(ye(Q,"profiles"),be("userId","==",t)),r=await Ne(n);if(!r.empty){const s=ve(Q,"profiles",r.docs[0].id);await st(s,{...e,updatedAt:Ae()})}}},Sz={async create(t){return(await $i(ye(Q,"merchantWallets"),{...t,transferLimit:t.transferLimit||2e5,withdrawLimit:t.withdrawLimit||2e5,transferUsage:t.transferUsage||0,withdrawUsage:t.withdrawUsage||0,createdAt:Ae(),updatedAt:Ae()})).id},async getByMerchantId(t){const e=Re(ye(Q,"merchantWallets"),be("merchantUserId","==",t)),r=(await Ne(e)).docs.map(a=>{const l=a.data();return{id:a.id,...l,transferLimit:l.transferLimit||2e5,withdrawLimit:l.withdrawLimit||2e5,transferUsage:l.transferUsage||0,withdrawUsage:l.withdrawUsage||0,createdAt:Le(l.createdAt),updatedAt:Le(l.updatedAt)}});if(r.length>0)return r.sort((a,l)=>{const c=a.createdAt,d=l.createdAt;return c&&d?d.getTime()-c.getTime():c&&!d?-1:!c&&d?1:0});const s=Re(ye(Q,"wallets"),be("userId","==",t));return(await Ne(s)).docs.map(a=>{const l=a.data();return{id:a.id,merchantUserId:l.userId||t,provider:l.provider||"instapay",msisdn:l.msisdn||"",label:l.name||l.label||"",isActive:l.isActive!==!1,dailyLimit:l.dailyLimit||2e5,monthlyLimit:l.monthlyLimit||2e5,transferLimit:l.transferLimit||l.monthlyTransferLimit||2e5,withdrawLimit:l.withdrawLimit||l.monthlyWithdrawLimit||2e5,transferUsage:l.transferUsage||l.monthlyTransferUsage||0,withdrawUsage:l.withdrawUsage||l.monthlyWithdrawUsage||0,dailyTransferLimit:l.dailyTransferLimit,dailyWithdrawLimit:l.dailyWithdrawLimit,createdAt:Le(l.createdAt),updatedAt:Le(l.updatedAt)}}).sort((a,l)=>{const c=a.createdAt,d=l.createdAt;return c&&d?d.getTime()-c.getTime():c&&!d?-1:!c&&d?1:0})},async getById(t){const e=ve(Q,"merchantWallets",t),n=await St(e);if(n.exists()){const r=n.data();return{id:n.id,...r,transferLimit:r.transferLimit||2e5,withdrawLimit:r.withdrawLimit||2e5,transferUsage:r.transferUsage||0,withdrawUsage:r.withdrawUsage||0,createdAt:Le(r.createdAt),updatedAt:Le(r.updatedAt)}}return null},async update(t,e){const n=ve(Q,"merchantWallets",t);await st(n,{...e,updatedAt:Ae()})},async updateUsage(t,e,n){const r=ve(Q,"merchantWallets",t),s={updatedAt:Ae()};e!==void 0&&(s.transferUsage=e),n!==void 0&&(s.withdrawUsage=n),await st(r,s)},async resetDailyUsage(t){const n=(await this.getByMerchantId(t)).map(r=>this.updateUsage(r.id,0,0));await Promise.all(n)},async reassignByMsisdns(t,e){try{if(!e)throw new Error("merchantUserId   ");if(!Array.isArray(t)||t.length===0)return{updated:0,failed:0};const r=((o,a)=>o.reduce((l,c,d)=>(d%a===0&&l.push(o.slice(d,d+a)),l),[]))(t.map(o=>o.trim()).filter(Boolean),10);let s=0,i=0;for(const o of r){const a=Re(ye(Q,"merchantWallets"),be("msisdn","in",o)),c=(await Ne(a)).docs.map(async d=>{try{const h=d.data();if(h.merchantUserId&&h.merchantUserId!==e)return;await st(d.ref,{merchantUserId:e,updatedAt:Ae()}),s+=1}catch(h){console.error("Failed to reassign wallet",d.id,h),i+=1}});await Promise.allSettled(c)}return{updated:s,failed:i}}catch(n){return console.error("Error reassigning wallets by msisdns:",n),{updated:0,failed:t.length}}},async delete(t){const e=ve(Q,"merchantWallets",t);await Mn(e)}},yD={async create(t){try{console.log("Creating transaction:",t);const{calculateCommission:e,calculateProfit:n}=await Oe(async()=>{const{calculateCommission:c,calculateProfit:d}=await Promise.resolve().then(()=>Yz);return{calculateCommission:c,calculateProfit:d}},void 0,import.meta.url),r=t.commission!==void 0?t.commission:e(t.amount,t.txnType),s=n(t.amount,t.txnType),i=t.merchantUserId||t.createdBy;i||console.warn("   merchantUserId  createdBy         .");const o=Object.fromEntries(Object.entries(t).filter(([c,d])=>d!==void 0)),a={...o,merchantUserId:i,commission:r,profit:s,createdAt:o.createdAt?o.createdAt instanceof Date?o.createdAt:new Date(String(o.createdAt)):new Date,uploadedAt:Ae(),confirmedAt:o.confirmedAt?o.confirmedAt instanceof Date?o.confirmedAt:new Date(String(o.confirmedAt)):null},l=await $i(ye(Q,"transactions"),a);if(console.log("Transaction created with ID:",l.id,"Profit:",s),s>0){const{ProfitService:c}=await Oe(async()=>{const{ProfitService:d}=await import("./profitService-DmPfUgc_.js").then(h=>h.p);return{ProfitService:d}},[],import.meta.url);c.addProfit(s),console.log("     :",s,"")}return await this.updateLineUsage(t.lineId,t.amount),l.id}catch(e){throw console.error("Error creating transaction:",e),e}},async updateLineUsage(t,e){try{console.log("Updating line usage:",{lineId:t,amount:e})}catch(n){console.error("Error updating line usage:",n)}},async getByShopId(t){const e=Re(ye(Q,"transactions"),be("shopId","==",t),ps("createdAt","desc"));return(await Ne(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:Le(r.data().createdAt),confirmedAt:r.data().confirmedAt?Le(r.data().confirmedAt):void 0}))},async getByMerchantId(t){const e=Re(ye(Q,"transactions"),be("merchantUserId","==",t),ps("createdAt","desc"));return(await Ne(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:Le(r.data().createdAt),confirmedAt:r.data().confirmedAt?Le(r.data().confirmedAt):void 0}))},async getByUserId(t){const e=Re(ye(Q,"transactions"),be("merchantUserId","==",t)),n=Re(ye(Q,"transactions"),be("userId","==",t)),[r,s]=await Promise.all([Ne(e),Ne(n)]),i=[...r.docs,...s.docs],o=new Set,a=[];for(const l of i){if(o.has(l.id))continue;o.add(l.id);const c=l.data();a.push({id:l.id,...c,createdAt:Le(c.createdAt),confirmedAt:c.confirmedAt?Le(c.confirmedAt):void 0})}return a.sort((l,c)=>{const d=l.createdAt,h=c.createdAt;return d&&h?h.getTime()-d.getTime():d&&!h?-1:!d&&h?1:0})},async updateStatus(t,e,n){const r=ve(Q,"transactions",t);await st(r,{status:e,confirmedAt:n?n instanceof Date?n:new Date(String(n)):null})}},bz={async log(t,e,n,r,s){await $i(ye(Q,"auditLogs"),{actor:s,action:t,entity:e,entityId:n,meta:r,createdAt:Ae()})},async getLogs(t=100){const e=Re(ye(Q,"auditLogs"),ps("createdAt","desc"),Yo(t));return(await Ne(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:Le(r.data().createdAt)}))},async getDeletedTransactions(){try{const t=Re(ye(Q,"deletedTransactions"),ps("deletedAt","desc"));return(await Ne(t)).docs.map(n=>({id:n.id,...n.data(),deletedAt:Le(n.data().deletedAt)}))}catch(t){return console.error("Error getting deleted transactions:",t),[]}},async getDeletedTransactionsByUser(t){try{const e=Re(ye(Q,"deletedTransactions"),be("userId","==",t),ps("deletedAt","desc"));return(await Ne(e)).docs.map(r=>({id:r.id,...r.data(),deletedAt:Le(r.data().deletedAt)}))}catch(e){if(String((e==null?void 0:e.message)||"").includes("requires an index"))try{const r=Re(ye(Q,"deletedTransactions"),be("userId","==",t));return(await Ne(r)).docs.map(o=>({id:o.id,...o.data(),deletedAt:Le(o.data().deletedAt)})).sort((o,a)=>{const l=(o.deletedAt instanceof Date?o.deletedAt:new Date(o.deletedAt)).getTime();return(a.deletedAt instanceof Date?a.deletedAt:new Date(a.deletedAt)).getTime()-l})}catch(r){return console.error("Fallback error getting deleted transactions by user:",r),[]}return console.error("Error getting deleted transactions by user:",e),[]}},async saveDeletedTransaction(t){var e;try{if(console.log("      Firebase:",t.id),!t.userId)throw new Error("     ");if(!t.originalTransactionId)throw new Error("   ");const n=t.reference??t.transactionReference??((e=t.receipt)==null?void 0:e.reference),r={...t,deletedAt:Ae(),userId:t.userId,originalTransactionId:t.originalTransactionId,type:t.type||"unknown",amount:t.amount||0,status:t.status||"deleted",...n?{reference:n}:{}};console.log("    :",r);let s=3,i;for(;s>0;)try{const o=await $i(ye(Q,"deletedTransactions"),r);console.log("       :",o.id);return}catch(o){i=o,s--,console.warn(`       : ${s}`,o),s>0&&await new Promise(a=>setTimeout(a,1e3))}throw console.error("        "),i}catch(n){throw console.error("     :",n),n instanceof Error&&(n.message.includes("network")?console.error("    -    "):n.message.includes("permission")?console.error("    -    Firestore"):n.message.includes("quota")&&console.error("     -    Firebase")),n}},async permanentlyDeleteTransaction(t,e){try{const n=Re(ye(Q,"deletedTransactions"),be("originalTransactionId","==",t),be("userId","==",e)),s=(await Ne(n)).docs.map(i=>Mn(i.ref));await Promise.all(s),console.log("     Firebase:",t);try{const i=Re(ye(Q,"userTransactions"),be("userId","==",e)),a=(await Ne(i)).docs.filter(l=>{var d,h;const c=l.data();return l.id===t||c.id===t||c.transactionId===t||c.originalTransactionId===t||((d=c.receipt)==null?void 0:d.id)===t||((h=c.receipt)==null?void 0:h.transactionId)===t});a.length>0&&(console.log(`  ${a.length}   userTransactions`),await Promise.all(a.map(l=>Mn(l.ref))))}catch(i){console.warn("   userTransactions   :",i)}try{const i=ve(Q,"transactions",t);(await St(i)).exists()&&(console.log("     transactions  "),await Mn(i));const a=Re(ye(Q,"transactions"),be("transactionId","==",t)),l=await Ne(a);l.empty||(console.log(`  ${l.size}   transactions  transactionId`),await Promise.all(l.docs.map(h=>Mn(h.ref))));const c=Re(ye(Q,"transactions"),be("originalTransactionId","==",t)),d=await Ne(c);d.empty||(console.log(`  ${d.size}   transactions  originalTransactionId`),await Promise.all(d.docs.map(h=>Mn(h.ref))))}catch(i){console.warn("    transactions   :",i)}}catch(n){throw console.error("Error permanently deleting transaction:",n),n}}},Az={async add(t){return(await $i(ye(Q,"daily_reports_archive"),{userId:t.userId,reportDate:t.reportDate,totalTransactions:t.totalTransactions,totalAmount:t.totalAmount,totalWithdrawn:t.totalWithdrawn,totalSent:t.totalSent,profit:t.profit??null,walletId:t.walletId??null,createdAt:Ae()})).id},async getByUser(t,e=50){try{const n=Re(ye(Q,"daily_reports_archive"),be("userId","==",t),Yo(e)),s=(await Ne(n)).docs.map(i=>({id:i.id,userId:String(i.data().userId),reportDate:String(i.data().reportDate),totalTransactions:Number(i.data().totalTransactions||0),totalAmount:Number(i.data().totalAmount||0),totalWithdrawn:Number(i.data().totalWithdrawn||0),totalSent:Number(i.data().totalSent||0),profit:i.data().profit!==void 0?Number(i.data().profit):void 0,walletId:i.data().walletId??null,createdAt:Le(i.data().createdAt)}));return s.sort((i,o)=>i.reportDate<o.reportDate?1:-1),s}catch(n){throw console.error("Error loading daily reports archive:",n),n}},async deleteOlderThan(t,e=10){try{const n=new Date;n.setDate(n.getDate()-e);const r=Re(ye(Q,"daily_reports_archive"),be("userId","==",t)),s=await Ne(r);let i=0;for(const o of s.docs){const a=Le(o.data().createdAt);a&&a.getTime()<n.getTime()&&(await Mn(o.ref),i++)}return i>0&&console.log(`   ${i}      ${e}   ${t}`),i}catch(n){throw console.error("Error deleting old daily reports archive:",n),n}},async trimToMaxCount(t,e=10){try{const n=Re(ye(Q,"daily_reports_archive"),be("userId","==",t)),s=(await Ne(n)).docs.map(o=>({ref:o.ref,reportDate:String(o.data().reportDate||""),createdAt:Le(o.data().createdAt)}));if(s.sort((o,a)=>{var d,h;if(o.reportDate&&a.reportDate)return o.reportDate<a.reportDate?1:-1;const l=((d=o.createdAt)==null?void 0:d.getTime())??0;return(((h=a.createdAt)==null?void 0:h.getTime())??0)-l}),s.length<=e)return 0;const i=s.slice(e);for(const o of i)await Mn(o.ref);return console.log(`     ${t}  ${e}   ${i.length}`),i.length}catch(n){throw console.error("Error trimming daily reports archive to max count:",n),n}}},vD={async getUserData(t){try{console.log("     :",{userId:t});const e=ve(Q,"users",t),n=await St(e);if(n.exists()){const r=n.data();return console.log("     :",r),{...r,createdAt:Le(r.createdAt),updatedAt:Le(r.updatedAt)}}else{console.log("       ");const r={walletBalances:{},createdAt:new Date,updatedAt:new Date};return await this.saveUserData(t,r),console.log("     "),r}}catch(e){return console.error("      :",e),{walletBalances:{},createdAt:new Date,updatedAt:new Date}}},async saveUserData(t,e){try{const n=ve(Q,"users",t),r=Bu(e);await Bi(n,{...r||{},updatedAt:Ae()},{merge:!0})}catch(n){throw console.error("Error saving user data:",n),n}},async updateUserData(t,e){try{console.log("      Firebase:",{userId:t,data:e});const n=ve(Q,"users",t),r=Object.fromEntries(Object.entries(e).filter(([l,c])=>c!==void 0)),s=Bu(r);let i={};try{const l=await St(n);i=l.exists()?l.data():{},console.log("  :",i)}catch(l){console.warn("         :",l)}const o={...i,...s,updatedAt:Ae()};console.log("   :",o);let a=3;for(;a>0;)try{await Bi(n,o,{merge:!0}),console.log("     ");return}catch(l){if(a--,console.warn(`     : ${a}`,l),a===0)throw l;await new Promise(c=>setTimeout(c,1e3))}}catch(n){throw console.error("     :",n),n instanceof Error&&(n.message.includes("network")?console.error("    -    "):n.message.includes("permission")?console.error("    -    Firestore"):n.message.includes("quota")&&console.error("     -    Firebase")),n}},async getUserWallets(t){try{const e=await this.getUserData(t);return(e==null?void 0:e.wallets)||[]}catch(e){return console.error("Error getting user wallets:",e),[]}},async getUserTransactions(t){try{const e=Re(ye(Q,"userTransactions"),be("userId","==",t));return(await Ne(e)).docs.map(s=>({id:s.id,...s.data(),createdAt:Le(s.data().createdAt)})).filter(s=>(s==null?void 0:s.status)!=="cancelled"&&!(s!=null&&s.isDeleted)).sort((s,i)=>{const o=s.createdAt?new Date(s.createdAt).getTime():0;return(i.createdAt?new Date(i.createdAt).getTime():0)-o})}catch(e){console.error("Error getting user transactions:",e);const n=(e==null?void 0:e.code)||"";if(n==="permission-denied"||n==="unauthenticated")throw e;return[]}},async saveUserTransaction(t,e){try{const n=Object.fromEntries(Object.entries(e??{}).filter(([s,i])=>i!==void 0));try{const s=n.reference;if(s){const a=Re(ye(Q,"deletedTransactions"),be("userId","==",t),be("reference","==",s));if(!(await Ne(a)).empty)return console.log("          ."),"skip-deleted"}const i=Re(ye(Q,"deletedTransactions"),be("userId","==",t),ps("deletedAt","desc"),Yo(20)),o=await Ne(i);if(!o.empty){const a=n.senderMsisdn||n.senderPhone||n.sender_msisdn,l=n.receiverMsisdn||n.receiverPhone||n.receiver_msisdn,c=Number(n.amount||0),d=n.createdAt?new Date(String(n.createdAt)):new Date,h=10*60*1e3;if(o.docs.find(f=>{const _=f.data(),y=_.senderMsisdn||_.senderPhone||_.sender_msisdn,E=_.receiverMsisdn||_.receiverPhone||_.receiver_msisdn,w=Number(_.amount||0),v=_.createdAt?new Date(String(_.createdAt)):d;return Math.abs(v.getTime()-d.getTime())<=h&&w===c&&y===a&&E===l}))return console.log("        ."),"skip-deleted"}}catch(s){console.warn("           :",s)}try{const s=Re(ye(Q,"userTransactions"),be("userId","==",t));if(n.transactionId){const f=Re(ye(Q,"userTransactions"),be("userId","==",t),be("transactionId","==",n.transactionId)),_=await Ne(f);if(!_.empty){const y=_.docs[0];return await st(ve(Q,"userTransactions",y.id),{...n,uploadedAt:Ae()}),y.id}}if(n.reference){const f=Re(ye(Q,"userTransactions"),be("userId","==",t),be("reference","==",n.reference)),_=await Ne(f);if(!_.empty){const y=_.docs[0];return await st(ve(Q,"userTransactions",y.id),{...n,uploadedAt:Ae()}),y.id}}const i=Re(ye(Q,"userTransactions"),be("userId","==",t),ps("createdAt","desc"),Yo(20)),o=await Ne(i),a=n.senderMsisdn||n.senderPhone||n.sender_msisdn,l=n.receiverMsisdn||n.receiverPhone||n.receiver_msisdn,c=Number(n.amount||0),d=n.createdAt?new Date(String(n.createdAt)):new Date,h=5*60*1e3,p=o.docs.find(f=>{const _=f.data(),y=_.senderMsisdn||_.senderPhone||_.sender_msisdn,E=_.receiverMsisdn||_.receiverPhone||_.receiver_msisdn,w=Number(_.amount||0),v=Le(_.createdAt);return Math.abs(v.getTime()-d.getTime())<=h&&w===c&&y===a&&E===l});if(p)return await st(ve(Q,"userTransactions",p.id),{...n,uploadedAt:Ae()}),p.id}catch(s){console.warn("      saveUserTransaction  :",s)}return(await $i(ye(Q,"userTransactions"),{...n,userId:t,createdAt:n.createdAt?n.createdAt instanceof Date?n.createdAt:new Date(String(n.createdAt)):Ae(),uploadedAt:Ae()})).id}catch(n){throw console.error("Error saving user transaction:",n),n}},async removeUserTransaction(t,e){try{console.log("     userTransactions:",{userId:t,transactionId:e});const n=Re(ye(Q,"userTransactions"),be("userId","==",t)),r=await Ne(n);console.log(`    ${r.docs.length}  `);const s=r.docs.filter(i=>{var d,h;const o=i.data(),a=i.id,c=[o.id===e,o.transactionId===e,a===e,o.originalTransactionId===e,((d=o.receipt)==null?void 0:d.transactionId)===e,((h=o.receipt)==null?void 0:h.id)===e].some(p=>p===!0);return c&&console.log("     :",{docId:a,dataId:o.id,transactionId:o.transactionId,originalTransactionId:o.originalTransactionId,searchingFor:e}),c});if(s.length>0){console.log(`   ${s.length}    `);const i=s.map(async o=>{console.log("   :",o.id),await Mn(o.ref)});await Promise.all(i),console.log("        userTransactions:",e);try{const o=ve(Q,"transactions",e);if((await St(o)).exists())console.log("     transactions   "),await Mn(o);else{const l=Re(ye(Q,"transactions"),be("transactionId","==",e)),c=await Ne(l);c.empty||(console.log(`   ${c.size}   transactions  transactionId `),await Promise.all(c.docs.map(p=>Mn(p.ref))));const d=Re(ye(Q,"transactions"),be("originalTransactionId","==",e)),h=await Ne(d);h.empty||(console.log(`   ${h.size}   transactions  originalTransactionId `),await Promise.all(h.docs.map(p=>Mn(p.ref))))}}catch(o){console.warn("      transactions   :",o)}return}console.log("       userTransactions (   ):",e)}catch(n){throw console.error("      userTransactions:",n),n}}},N8=Object.freeze(Object.defineProperty({__proto__:null,auditLogService:bz,dailyReportsArchiveService:Az,merchantWalletService:Sz,profileService:zh,profileServiceExtra:gD,referralService:Iv,sanitizeFirestoreData:Bu,transactionService:yD,userDataService:vD},Symbol.toStringTag,{value:"Module"}));var xz=(t=>(t.MONTHLY="monthly",t.QUARTERLY="quarterly",t.YEARLY="yearly",t.LIFETIME="lifetime",t.ZERO="zero",t))(xz||{});const Pz=(t,e=new Date)=>{const n=new Date(e);switch(t){case"monthly":{const r=new Date(n);return r.setDate(r.getDate()+30),r}case"quarterly":{const r=new Date(n);return r.setDate(r.getDate()+90),r}case"yearly":{const r=new Date(n);return r.setDate(r.getDate()+365),r}case"lifetime":return null;case"zero":return null;default:return null}},qh=t=>{var s,i;if(!t||!t.isActive)return!1;if(t.planType==="lifetime")return!0;if(!t.endDate){const o=new Date,a=t.activatedAt,l=(s=a==null?void 0:a.toDate)!=null&&s.call(a)?a.toDate():t.activatedAt?new Date(t.activatedAt):null;return l&&o.getTime()-l.getTime()<4*60*60*1e3,!0}const e=new Date,n=t.endDate,r=n!=null&&n.toDate?n.toDate():new Date(n);if(!r||isNaN(r.getTime())){const o=t.activatedAt,a=(i=o==null?void 0:o.toDate)!=null&&i.call(o)?o.toDate():t.activatedAt?new Date(t.activatedAt):null;return a&&e.getTime()-a.getTime()<4*60*60*1e3,!0}return e<=r},Rz=t=>{if(!t||!t.isActive)return null;if(t.planType==="lifetime")return-1;if(!t.endDate)return null;const e=new Date,n=t.endDate,r=n!=null&&n.toDate?n.toDate():new Date(n);if(!r||isNaN(r.getTime()))return null;const s=r.getTime()-e.getTime(),i=Math.ceil(s/(1e3*60*60*24));return i>0?i:0},O8=async(t,e,n,r)=>{try{const s=new Date,i=Pz(e,s),o={planType:e,startDate:s,endDate:i,isActive:!0,activatedBy:n,activatedAt:s};console.log(" Activating subscription for user:",{userId:t,planType:e,adminId:n,subscriptionData:o});const a=ve(Q,"users",t);if(await st(a,{subscription:o,isActive:!0,approved:!0,isOnFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,updatedAt:new Date}),console.log(" Subscription data updated in Firestore"),typeof window<"u"){const l=new CustomEvent("subscriptionActivated",{detail:{userId:t,planType:e,timestamp:new Date().toISOString()}});window.dispatchEvent(l),console.log(" Subscription activation event dispatched:",{userId:t,planType:e});const c=new CustomEvent("userSubscriptionUpdated",{detail:{userId:t,planType:e,isActive:!0,timestamp:new Date().toISOString()}});window.dispatchEvent(c),console.log(" Global subscription update event dispatched")}console.log(`    ${e}  ${t}`)}catch(s){throw console.error("    :",s),new Error("   ")}},V8=async t=>{try{const e=ve(Q,"users",t);await st(e,{"subscription.isActive":!1,isActive:!1,isOnFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,updatedAt:new Date}),console.log(`      ${t}`)}catch(e){throw console.error("     :",e),new Error("    ")}},L8=async t=>{try{const e=ve(Q,"users",t),n=await St(e);return n.exists()&&n.data().subscription||null}catch(e){return console.error("      :",e),null}},M8=t=>{switch(t){case"monthly":return"";case"quarterly":return" ";case"yearly":return"";case"lifetime":return" ";case"zero":return"";default:return" "}},F8=t=>{if(!t)return"text-gray-500";if(!t.isActive)return"text-red-500";if(t.planType==="lifetime")return"text-green-600";const e=Rz(t);return e===null||e<=0?"text-red-500":e<=7?"text-yellow-500":"text-green-500"},U8=t=>t?(t instanceof Date?t:new Date(t)).toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric"}):" ";class nE{static async startFreeTrialFromAdmin(e){try{const n=ve(Q,"users",e),r=await St(n);if(!r.exists())return{success:!1,message:"  "};if(r.data().hasUsedFreeTrial)return{success:!1,message:"       "};const i=new Date,o=await this.getTrialDurationHours(),a=new Date(i.getTime()+o*60*60*1e3);return await st(n,{hasUsedFreeTrial:!0,freeTrialStartDate:i,freeTrialEndDate:a,isOnFreeTrial:!0,isActive:!0,approved:!0,updatedAt:Ae()}),{success:!0,message:`     ${o} ${o>=3&&o<=10?"":o===2?"":""}`}}catch(n){return console.error("Error starting admin free trial:",n),{success:!1,message:"     "}}}static async startFreeTrial(e){try{const n=ve(Q,"users",e),r=await St(n);if(!r.exists())return{success:!1,message:"  "};if(r.data().hasUsedFreeTrial)return{success:!1,message:"     "};const i=new Date,o=await this.getTrialDurationHours(),a=new Date(i.getTime()+o*60*60*1e3);return await st(n,{hasUsedFreeTrial:!0,freeTrialStartDate:i,freeTrialEndDate:a,isOnFreeTrial:!0,isActive:!0,approved:!0,updatedAt:Ae()}),{success:!0,message:`     ${o} ${o>=3&&o<=10?"":o===2?"":""}`}}catch(n){return console.error("    :",n),{success:!1,message:"     "}}}static async checkTrialValidity(e){var n,r,s,i;try{const o=ve(Q,"users",e),a=await St(o);if(!a.exists())return{isValid:!1,isExpired:!1,hoursRemaining:0,hasUsedTrial:!1};const l=a.data(),c=l.hasUsedFreeTrial||!1,d=l.isOnFreeTrial||!1;let h=(r=(n=l.freeTrialEndDate)==null?void 0:n.toDate)!=null&&r.call(n)?l.freeTrialEndDate.toDate():l.freeTrialEndDate?new Date(l.freeTrialEndDate):null;const p=(i=(s=l.freeTrialStartDate)==null?void 0:s.toDate)!=null&&i.call(s)?l.freeTrialStartDate.toDate():l.freeTrialStartDate?new Date(l.freeTrialStartDate):null;if(!c||!d||!h)return{isValid:!1,isExpired:!1,hoursRemaining:0,hasUsedTrial:c};const f=new Date;if(f>h){const w=qh(l.subscription);return await st(o,{isOnFreeTrial:!1,isActive:w,approved:w,updatedAt:Ae()}),!w&&typeof window<"u"&&setTimeout(()=>{window.location.href="/user/pending-approval"},1e3),{isValid:!1,isExpired:!0,hoursRemaining:0,hasUsedTrial:c}}try{const w=await this.getTrialDurationHours();if(p&&w&&Number.isFinite(w)&&Math.round((h.getTime()-p.getTime())/36e5)<w){const I=new Date(p.getTime()+w*60*60*1e3);I.getTime()>h.getTime()&&(await st(o,{freeTrialEndDate:I,updatedAt:Ae()}),h=I)}}catch(w){console.warn("checkTrialValidity: failed to auto-extend to configured hours",w)}const y=h.getTime()-f.getTime();return{isValid:!0,isExpired:!1,hoursRemaining:Math.ceil(y/(1e3*3600)),hasUsedTrial:c}}catch(o){return console.error("      :",o),{isValid:!1,isExpired:!1,hoursRemaining:0,hasUsedTrial:!1}}}static async getTrialData(e){var n,r;try{const s=ve(Q,"users",e),i=await St(s);if(!i.exists())return{hasUsedFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,isOnFreeTrial:!1};const o=i.data();return{hasUsedFreeTrial:o.hasUsedFreeTrial||!1,freeTrialStartDate:((n=o.freeTrialStartDate)==null?void 0:n.toDate())||null,freeTrialEndDate:((r=o.freeTrialEndDate)==null?void 0:r.toDate())||null,isOnFreeTrial:o.isOnFreeTrial||!1}}catch(s){return console.error("      :",s),{hasUsedFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,isOnFreeTrial:!1}}}static async getTrialDurationHours(){try{const e=ve(Q,"config","freeTrial"),n=await St(e);if(n.exists()){const r=n.data(),s=typeof(r==null?void 0:r.durationHours)=="number"?r.durationHours:this.TRIAL_DURATION_HOURS;return!Number.isFinite(s)||s<1?this.TRIAL_DURATION_HOURS:s}return this.TRIAL_DURATION_HOURS}catch(e){return console.warn("getTrialDurationHours: fallback to default due to error",e),this.TRIAL_DURATION_HOURS}}static async updateTrialDurationHours(e){try{if(!Number.isFinite(e)||e<1)return{success:!1,message:"       "};const n=ve(Q,"config","freeTrial");return await Bi(n,{durationHours:e,updatedAt:Ae()},{merge:!0}),{success:!0,message:"     "}}catch(n){return console.error("Error updating trial duration hours:",n),{success:!1,message:"    "}}}static async resetActiveTrialToCurrentDuration(e){var n,r;try{const s=ve(Q,"users",e),i=await St(s);if(!i.exists())return{success:!1,message:"  "};const o=i.data(),a=!!o.isOnFreeTrial,l=(r=(n=o.freeTrialStartDate)==null?void 0:n.toDate)!=null&&r.call(n)?o.freeTrialStartDate.toDate():o.freeTrialStartDate?new Date(o.freeTrialStartDate):null;if(!a||!l)return{success:!1,message:"     "};const c=await this.getTrialDurationHours(),d=new Date(l.getTime()+c*60*60*1e3);return await st(s,{freeTrialEndDate:d,updatedAt:Ae()}),{success:!0,message:`     ${c} ${c>=3&&c<=10?"":c===2?"":""}`}}catch(s){return console.error("Error resetting active trial duration:",s),{success:!1,message:"    "}}}}zE(nE,"TRIAL_DURATION_HOURS",24);const j8=Object.freeze(Object.defineProperty({__proto__:null,FreeTrialService:nE},Symbol.toStringTag,{value:"Module"})),Cz={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_DEV_MODE:"true",VITE_ENABLE_OFFLINE_PERSISTENCE:"false",VITE_FIREBASE_API_KEY:"AIzaSyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s",VITE_FIREBASE_APP_ID:"1:483702062341:web:b1ff06ad175cb7ae428b6c",VITE_FIREBASE_AUTH_DOMAIN:"voda-c6abd.firebaseapp.com",VITE_FIREBASE_AUTH_EMULATOR_URL:"http://localhost:9099",VITE_FIREBASE_FIRESTORE_EMULATOR_HOST:"localhost:8080",VITE_FIREBASE_FUNCTIONS_EMULATOR_HOST:"localhost:5001",VITE_FIREBASE_MEASUREMENT_ID:"G-CV6QGH7G7P",VITE_FIREBASE_MESSAGING_SENDER_ID:"483702062341",VITE_FIREBASE_PROJECT_ID:"voda-c6abd",VITE_FIREBASE_STORAGE_BUCKET:"voda-c6abd.appspot.com",VITE_FORCE_HASH_ROUTER:"true",VITE_SHOP_ID:"demo-shop-001",VITE_SHOP_NAME:"   ",VITE_SHOW_ENV_BANNER:"true",VITE_USE_EMULATORS:"false",VITE_USE_FIREBASE_EMULATOR:"false"},_D=A.createContext(void 0);function zi(){const t=A.useContext(_D);if(t===void 0)throw new Error("useFirebaseAuth must be used within a FirebaseAuthProvider");return t}const kz=({children:t})=>{const[e,n]=A.useState(null),[r,s]=A.useState(null),[i,o]=A.useState(null),[a,l]=A.useState(!1),[c,d]=A.useState(!0),h=async S=>{var T,b,k,P,N,C,q,Z,ie,G,F,U,Y,de,ne,ce;try{const le=ve(Q,"profiles",S);let we=!1;try{const ae=await zk(le);if(ae.exists()){const me=ae.data(),Se={userId:ae.id,shopId:me.shopId,role:me.role,fullName:me.fullName,phone:me.phone,shopName:me.shopName||null,approved:me.approved,avatarId:me.avatarId,bridgeLink:me.bridgeLink||null,bridgeDeviceId:me.bridgeDeviceId||null,showWithdrawNote:me.showWithdrawNote!==void 0?!!me.showWithdrawNote:!0,isReceiptNoteEnabled:me.isReceiptNoteEnabled!==void 0?!!me.isReceiptNoteEnabled:!0,createdAt:((b=(T=me.createdAt)==null?void 0:T.toDate)==null?void 0:b.call(T))||new Date,updatedAt:((P=(k=me.updatedAt)==null?void 0:k.toDate)==null?void 0:P.call(k))||new Date,trialStarted:me.trialStarted||!1,trialStartDate:(C=(N=me.trialStartDate)==null?void 0:N.toDate)==null?void 0:C.call(N),trialEndDate:(Z=(q=me.trialEndDate)==null?void 0:q.toDate)==null?void 0:Z.call(q),trialExpired:me.trialExpired||!1};s(Se),we=!0,d(!1)}}catch(ae){console.log("Cache profile not available:",(ae==null?void 0:ae.code)||ae)}try{if(!we){const ae=localStorage.getItem(`profile_cache_${S}`);if(ae){const me=JSON.parse(ae);s(me),we=!0,d(!1)}}}catch{}if(!we)for(let ae=0;ae<3;ae++)try{const me=await St(le);if(me.exists()){const Se=me.data(),Et={userId:me.id,shopId:Se.shopId,role:Se.role,fullName:Se.fullName,phone:Se.phone,shopName:Se.shopName||null,approved:Se.approved,avatarId:Se.avatarId,bridgeLink:Se.bridgeLink||null,bridgeDeviceId:Se.bridgeDeviceId||null,showWithdrawNote:Se.showWithdrawNote!==void 0?!!Se.showWithdrawNote:!0,isReceiptNoteEnabled:Se.isReceiptNoteEnabled!==void 0?!!Se.isReceiptNoteEnabled:!0,createdAt:((G=(ie=Se.createdAt)==null?void 0:ie.toDate)==null?void 0:G.call(ie))||new Date,updatedAt:((U=(F=Se.updatedAt)==null?void 0:F.toDate)==null?void 0:U.call(F))||new Date,trialStarted:Se.trialStarted||!1,trialStartDate:(de=(Y=Se.trialStartDate)==null?void 0:Y.toDate)==null?void 0:de.call(Y),trialEndDate:(ce=(ne=Se.trialEndDate)==null?void 0:ne.toDate)==null?void 0:ce.call(ne),trialExpired:Se.trialExpired||!1};s(Et);try{localStorage.setItem(`profile_cache_${me.id}`,JSON.stringify(Et))}catch{}we=!0,d(!1);break}}catch{}return ep(le,async ae=>{var me,Se,Et,Nt,Kt,Bt,gn,Pr;if(ae.exists()){const ge=ae.data(),Gn={userId:ae.id,shopId:ge.shopId,role:ge.role,fullName:ge.fullName,phone:ge.phone,shopName:ge.shopName||null,approved:ge.approved,avatarId:ge.avatarId,bridgeLink:ge.bridgeLink||null,bridgeDeviceId:ge.bridgeDeviceId||null,showWithdrawNote:ge.showWithdrawNote!==void 0?!!ge.showWithdrawNote:!0,isReceiptNoteEnabled:ge.isReceiptNoteEnabled!==void 0?!!ge.isReceiptNoteEnabled:!0,createdAt:((Se=(me=ge.createdAt)==null?void 0:me.toDate)==null?void 0:Se.call(me))||new Date,updatedAt:((Nt=(Et=ge.updatedAt)==null?void 0:Et.toDate)==null?void 0:Nt.call(Et))||new Date,trialStarted:ge.trialStarted||!1,trialStartDate:(Bt=(Kt=ge.trialStartDate)==null?void 0:Kt.toDate)==null?void 0:Bt.call(Kt),trialEndDate:(Pr=(gn=ge.trialEndDate)==null?void 0:gn.toDate)==null?void 0:Pr.call(gn),trialExpired:ge.trialExpired||!1};s(Gn);try{localStorage.setItem(`profile_cache_${ae.id}`,JSON.stringify(Gn))}catch{}we||(we=!0,d(!1))}else if(!we)try{const ge=await gD.getByUserId(S);if(ge){const Gn={userId:S,shopId:ge.shopId,role:ge.role||"user",fullName:ge.fullName||null,phone:ge.phone||null,shopName:ge.shopName||null,approved:ge.approved??!1,avatarId:ge.avatarId||void 0,bridgeLink:ge.bridgeLink||null,bridgeDeviceId:ge.bridgeDeviceId||null,createdAt:Ae(),updatedAt:Ae()};await Bi(ve(Q,"profiles",S),Gn,{merge:!0}),s({...ge,userId:S,createdAt:ge.createdAt||new Date,updatedAt:ge.updatedAt||new Date})}else await f(S)}catch(ge){console.error("Profile migration/create error:",ge)}finally{we=!0,d(!1)}},ae=>{console.error("Profile listener error:",ae);try{d(!1)}catch{}})}catch(le){return console.error("Error setting up profile listener:",le),await f(S),d(!1),()=>{}}},p=async S=>{try{const T=ve(Q,"users",S.uid);(await St(T)).exists()?(await st(T,{lastLogin:Ae(),updatedAt:Ae()}),console.log(" ensureAdminUserDoc: Updated lastLogin for",S.uid)):(await Bi(T,{email:S.email||"",displayName:S.displayName||" ",phone:null,shopName:null,isActive:!1,createdAt:Ae(),updatedAt:Ae(),lastLogin:Ae()},{merge:!0}),console.log(" ensureAdminUserDoc: Created users doc for",S.uid))}catch(T){console.error(" ensureAdminUserDoc error:",T)}},f=async(S,T,b,k,P)=>{var N,C;try{console.log("Creating default profile for user:",S);const q=Iv.generateReferralCode(S);let Z=null;const ie={userId:S,shopId:"default-shop",role:"user",fullName:T||" ",phone:b||null,shopName:k||null,approved:!1,referralCode:q,referredBy:P||null,bridgeLink:null,bridgeDeviceId:null,showWithdrawNote:!0,isReceiptNoteEnabled:!0,createdAt:new Date,updatedAt:new Date};s(ie),console.log("Created temporary profile:",ie);try{const{doc:G,setDoc:F,serverTimestamp:U}=await Oe(async()=>{const{doc:ce,setDoc:le,serverTimestamp:we}=await Promise.resolve().then(()=>Ig);return{doc:ce,setDoc:le,serverTimestamp:we}},void 0,import.meta.url),{db:Y}=await Oe(async()=>{const{db:ce}=await Promise.resolve().then(()=>Pg);return{db:ce}},void 0,import.meta.url),de={email:((N=Yn.currentUser)==null?void 0:N.email)||"",displayName:T||" ",phone:b||null,shopName:k||null,isActive:!1,referralCode:q,referredBy:P||null,createdAt:U(),lastLogin:null,updatedAt:U()};if(console.log("Attempting to add user to admin collection with data:",de),await F(G(Y,"users",S),de,{merge:!0}),console.log(" User successfully added to admin collection:",de),P)try{const{query:ce,collection:le,where:we,limit:Qe,getDocs:ae}=await Oe(async()=>{const{query:Nt,collection:Kt,where:Bt,limit:gn,getDocs:Pr}=await Promise.resolve().then(()=>Ig);return{query:Nt,collection:Kt,where:Bt,limit:gn,getDocs:Pr}},void 0,import.meta.url),{db:me}=await Oe(async()=>{const{db:Nt}=await Promise.resolve().then(()=>Pg);return{db:Nt}},void 0,import.meta.url),Se=ce(le(me,"users"),we("referralCode","==",P),Qe(1)),Et=await ae(Se);Et.empty?console.log(" Referral code not found in users collection:",P):(Z=Et.docs[0].id,await Iv.create({referrerId:Z,referredUserId:S,referredUserEmail:((C=Yn.currentUser)==null?void 0:C.email)||"",referralCode:P,status:"completed"}),console.log(" Referral record created successfully for referrer:",Z))}catch(ce){console.error(" Error creating referral record:",ce)}const ne=await St(G(Y,"users",S));ne.exists()?console.log(" User document verified in Firestore:",ne.data()):console.log(" User document not found after creation")}catch(G){console.error(" Error adding user to admin collection:",G)}try{const{addDoc:G,collection:F,serverTimestamp:U}=await Oe(async()=>{const{addDoc:le,collection:we,serverTimestamp:Qe}=await Promise.resolve().then(()=>Ig);return{addDoc:le,collection:we,serverTimestamp:Qe}},void 0,import.meta.url),{db:Y}=await Oe(async()=>{const{db:le}=await Promise.resolve().then(()=>Pg);return{db:le}},void 0,import.meta.url),ne=(await G(F(Y,"shops"),{name:k||" ",ownerId:S,createdAt:U(),updatedAt:U(),isActive:!0})).id;await zh.create({userId:S,shopId:ne,role:"user",fullName:" ",phone:null});try{await zh.update(S,{referralCode:q,referredBy:Z||null,showWithdrawNote:!0,isReceiptNoteEnabled:!0})}catch(le){console.warn(" Failed to update profile with referral fields:",le)}const ce=await zh.getById(S);ce&&(s(ce),console.log("Updated with Firebase profile:",ce))}catch(G){console.error("Error creating profile:",G),console.log("Using local profile - Firebase unavailable")}}catch(q){console.error("Error creating default profile:",q)}};A.useEffect(()=>{console.log(" Setting up auth state listener"),d(!0);const S=setTimeout(()=>{console.warn(" Global auth timeout reached, forcing loading to false"),d(!1)},2e4);localStorage.getItem("demoProfile")&&(console.log(" Cleaning up demo profile from localStorage"),localStorage.removeItem("demoProfile"));const T=localStorage.getItem("demoUser"),b=localStorage.getItem("demoProfile");if(T&&b){console.log(" Found demo user in localStorage");try{const P=JSON.parse(T),N=JSON.parse(b);n(P),s(N),clearTimeout(S),d(!1);return}catch(P){console.error("Error parsing demo user data:",P),localStorage.removeItem("demoUser"),localStorage.removeItem("demoProfile")}}const k=nj(Yn,async P=>{console.log(" Auth state changed:",{uid:P==null?void 0:P.uid,email:P==null?void 0:P.email,emailVerified:P==null?void 0:P.emailVerified,timestamp:new Date().toISOString()}),n(P),P?(console.log(" User authenticated, starting profile hydration for:",P.uid),h(P.uid),v(),p(P)):(console.log(" User not authenticated, clearing profile"),s(null),o(null),l(!1),d(!1)),clearTimeout(S)});return()=>{clearTimeout(S),k()}},[]);const _=async(S,T,b,k,P,N)=>{try{const C=(S||"").trim().toLowerCase(),q=(T||"").trim();console.log(" Attempting to sign up user:",C);const Z=await uI(Yn,C,q);console.log(" Sign up successful:",Z.user.uid),await f(Z.user.uid,b,k,P,N),await p(Z.user);try{await h(Z.user.uid),await v()}catch{}return{error:null}}catch(C){console.error(" Sign up error:",C);let q="    ";return C.code==="auth/email-already-in-use"?q="    ":C.code==="auth/weak-password"?q="   ":C.code==="auth/invalid-email"&&(q="   "),{error:{...C,message:q}}}},y=async(S,T)=>{const b=(S||"").trim().toLowerCase(),k=(T||"").trim();try{const P=F=>F.replace(/[\u200B\u200C\u200D\u200E\u200F\u061C]/g,""),N=F=>F.replace(/[-]/g,U=>String("0123456789"["".indexOf(U)])).replace(/[-]/g,U=>String("0123456789"["".indexOf(U)])),C=F=>F.replace(/[0-9]/g,U=>""[Number(U)]),q=F=>N(P(F));if(console.log(" Attempting to sign in user:",b),b==="test@example.com"&&k==="123456"){console.log(" Demo user login detected");const F={uid:"demo-user-123",email:"test@example.com",displayName:" ",emailVerified:!0},U={userId:"demo-user-123",shopId:"demo-shop",role:"user",fullName:" ",phone:"01000000000",approved:!0,createdAt:new Date,updatedAt:new Date};return localStorage.setItem("demoUser",JSON.stringify(F)),localStorage.setItem("demoProfile",JSON.stringify(U)),n(F),s(U),d(!1),console.log(" Demo user signed in successfully"),{error:null}}let Z;const ie=[q(k),P(k),C(P(k))];let G=null;for(const F of ie)try{F!==k&&console.log(" Trying password variant"),Z=await ej(Yn,b,F);break}catch(U){if(G=U,(U==null?void 0:U.code)!=="auth/wrong-password"&&(U==null?void 0:U.code)!=="auth/invalid-credential")throw U}if(!Z)throw G||new Error("auth/invalid-credential");console.log(" Sign in successful:",Z.user.uid);try{if((await St(ve(Q,"deletedUsers",Z.user.uid))).exists())return console.log(" User is deleted, signing out"),await dI(Yn),{error:{code:"auth/user-deleted",message:"      .    ."}}}catch(F){console.error("Error checking deleted users:",F)}await p(Z.user);try{await h(Z.user.uid),await v()}catch{}return{error:null}}catch(P){if(console.error(" Sign in error:",P),b==="test@example.com"&&P.code==="auth/user-not-found"){console.log(" Creating test user...");try{const C=await uI(Yn,b,k);return console.log(" Test user created:",C.user.uid),await f(C.user.uid," ","01000000000"," "),{error:null}}catch(C){return console.error(" Error creating test user:",C),{error:C}}}let N="    ";return P.code==="auth/invalid-credential"?N="      ":P.code==="auth/user-not-found"?N="     ":P.code==="auth/wrong-password"?N="   ":P.code==="auth/too-many-requests"&&(N="      "),{error:{...P,message:N}}}},E=async()=>{try{localStorage.getItem("demoUser")?(console.log(" Signing out demo user"),localStorage.removeItem("demoUser"),localStorage.removeItem("demoProfile"),n(null),s(null),d(!1)):await dI(Yn);const b=(()=>{try{const k=typeof window<"u"?window:null,P=!!(k&&k.electronAPI)||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"),N=typeof window<"u"&&window.location.protocol==="file:",C=typeof window<"u"&&typeof window.location.hash=="string"&&window.location.hash.startsWith("#/");return P||N||C||typeof import.meta<"u"&&Cz&&!0}catch{return!1}})()?"#/user/login":"/user/login";try{window.location.replace(b)}catch{window.location.href=b}}catch(S){console.error("Sign out error:",S)}},w=async S=>{try{return await Z3(Yn,S),{error:null}}catch(T){console.error("Reset password error:",T);let b="        ";return T.code==="auth/user-not-found"?b="     ":T.code==="auth/invalid-email"&&(b="   "),{error:{...T,message:b}}}},v=async()=>{if(!e){console.log("No user found for subscription check"),o(null),l(!1);return}console.log("Checking subscription status for user:",e.uid);try{return ep(ve(Q,"users",e.uid),async T=>{var b,k,P,N,C,q,Z,ie;if(T.exists()){const G=T.data();o(G),console.log(" Subscription Data Details (Real-time):",{userId:e.uid,userEmail:e.email,subscription:G.subscription,subscriptionExists:!!G.subscription,planType:(b=G.subscription)==null?void 0:b.planType,isActive:(k=G.subscription)==null?void 0:k.isActive,startDate:(P=G.subscription)==null?void 0:P.startDate,endDate:(N=G.subscription)==null?void 0:N.endDate,activatedBy:(C=G.subscription)==null?void 0:C.activatedBy,activatedAt:(q=G.subscription)==null?void 0:q.activatedAt,isOnFreeTrial:G.isOnFreeTrial,freeTrialEndDate:G.freeTrialEndDate,branchPackageStatus:(Z=G==null?void 0:G.branchPackage)==null?void 0:Z.status});const F=((ie=G==null?void 0:G.branchPackage)==null?void 0:ie.status)==="active";let U=!1;if(F)console.log(" Branch package is active, granting access"),U=!0;else if(G.isOnFreeTrial){console.log(" User is on free trial, checking validity...");const Y=await nE.checkTrialValidity(e.uid);Y.isValid&&!Y.isExpired?(console.log(" Free trial is valid, granting access"),U=!0):Y.isExpired?(console.log(" Free trial has expired, checking regular subscription"),U=qh(G.subscription)):(console.log(" Free trial is not valid"),U=qh(G.subscription))}else U=qh(G.subscription);l(U),console.log(" Subscription Validation Result (Real-time):",{userId:e.uid,isValid:U,isOnFreeTrial:G.isOnFreeTrial,hasActiveBranchPackage:F,reason:F?"Branch package active":G.isOnFreeTrial?"Free trial active":G.subscription?G.subscription.isActive?G.subscription.planType==="lifetime"?"Lifetime plan":G.subscription.endDate?new Date>new Date(G.subscription.endDate)?"Expired":"Valid":"No end date":"Subscription not active":"No subscription data"})}},T=>{console.error(" Subscription listener error:",T)})}catch(S){console.error("Error setting up subscription listener:",S)}},V={user:e,profile:r,userSubscription:i,isSubscriptionActive:a,loading:c,signUp:_,signIn:y,signOut:E,resetPassword:w,updateUserProfile:async S=>{if(e)try{const T={updatedAt:Ae()};if(S.fullName!==void 0&&(T.fullName=S.fullName),S.phone!==void 0&&(T.phone=S.phone),S.bridgeLink!==void 0){const b=(S.bridgeLink||"").trim();T.bridgeLink=b.length?b:null}if(S.bridgeDeviceId!==void 0){const b=(S.bridgeDeviceId||"").trim();T.bridgeDeviceId=b.length?b:null}S.showWithdrawNote!==void 0&&(T.showWithdrawNote=!!S.showWithdrawNote),S.isReceiptNoteEnabled!==void 0&&(T.isReceiptNoteEnabled=!!S.isReceiptNoteEnabled),await st(ve(Q,"profiles",e.uid),T),await h(e.uid)}catch(T){console.error("Error updating user profile:",T)}},updateAvatarId:async S=>{if(e)try{await st(ve(Q,"profiles",e.uid),{avatarId:S,updatedAt:Ae()}),await h(e.uid)}catch(T){console.error("Error updating avatarId:",T)}},refreshProfile:async()=>{if(e)try{console.log("Refreshing profile for user:",e.uid),await h(e.uid),await v()}catch(S){console.error("Error refreshing profile:",S)}},checkSubscriptionStatus:v};return x.jsx(_D.Provider,{value:V,children:t})},uh=()=>{const[t,e]=A.useState(""),[n,r]=A.useState(""),[s,i]=A.useState(!1),[o,a]=A.useState(!1),{signIn:l}=zi(),c=Zu();A.useEffect(()=>{try{const f=typeof window<"u"?window.localStorage.getItem("cashy:lastEmail"):null;f&&e(f)}catch{}},[]);const d=async f=>{if(f.preventDefault(),o){It.info("     ...");return}if(typeof navigator<"u"&&navigator.onLine===!1){It.error("   .      .");return}const _=(t||"").trim().toLowerCase(),y=(n||"").trim();if(console.log("    :",{email:_,password:"***"}),!t||!n){It.error("   ");return}if(!/^\S+@\S+\.\S+$/.test(_)){It.error("    ");return}a(!0);try{console.log("  signIn...");const{error:E}=await l(_,y);if(console.log(" SignIn result:",{error:E}),E){console.error("    :",E);const w=E==null?void 0:E.code;w==="auth/user-not-found"?It.error("     "):w==="auth/wrong-password"?It.error("   "):w==="auth/invalid-credential"?It.error("      "):w==="auth/too-many-requests"?It.error("      "):It.error((E==null?void 0:E.message)||"    ")}else console.log("    !"),It.success("   !"),c("/user/dashboard")}catch(E){console.error("   :",E),It.error("   ")}finally{a(!1)}},h=f=>{if(o){f.preventDefault(),f.stopPropagation(),It.info("     ...");return}if(typeof navigator<"u"&&navigator.onLine===!1){f.preventDefault(),f.stopPropagation(),It.error("   .      .");return}t||It.error("   "),n||It.error("   ");const _=(t||"").trim().toLowerCase();_&&!/^\S+@\S+\.\S+$/.test(_)&&It.error("    ")},p=()=>{c("/user/forgot-password")};return A.useEffect(()=>{if(!(typeof window<"u"&&window.matchMedia&&window.matchMedia("(pointer: coarse)").matches))return;const f=document.documentElement,_=document.body,y=f.style.overflow,E=_.style.overflow,w=f.style.overscrollBehaviorY,v=_.style.overscrollBehaviorY;return f.style.overflow="hidden",_.style.overflow="hidden",f.style.overscrollBehaviorY="none",_.style.overscrollBehaviorY="none",()=>{f.style.overflow=y||"",_.style.overflow=E||"",f.style.overscrollBehaviorY=w||"",_.style.overscrollBehaviorY=v||""}},[]),x.jsxs("div",{className:"fixed inset-0 relative overscroll-y-none overflow-hidden flex items-center justify-center p-4 bg-fixed bg-no-repeat bg-cover",style:{backgroundImage:"var(--bg-purple-gradient)"},children:[x.jsx("div",{className:"pointer-events-none absolute inset-0 bg-[radial-gradient(ellipse_at_center,_rgba(168,85,247,0.18),_transparent_70%)]"}),x.jsxs("div",{className:"w-full max-w-md mt-16 md:mt-12 lg:mt-10",children:[x.jsxs("div",{className:"text-center mb-8",children:[x.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-r from-green-600 to-blue-600 rounded-full mb-4 shadow-2xl",children:x.jsx(LV,{className:"w-10 h-10 text-white"})}),x.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[x.jsx("div",{className:"h-8 w-8 bg-red-600 rounded-lg flex items-center justify-center shadow",children:x.jsx("span",{className:"text-white font-bold text-sm",children:""})}),x.jsxs("div",{className:"flex items-center gap-1",children:[x.jsx(NV,{className:"h-5 w-5 text-white"}),x.jsx("span",{className:"text-xl font-bold text-white",children:" "})]})]}),x.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"  "}),x.jsx("p",{className:"text-white/80",children:"    "})]}),x.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-8 shadow-2xl border border-white/20",children:[x.jsxs("form",{onSubmit:d,className:"space-y-6",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-white",children:" "}),x.jsxs("div",{className:"relative",children:[x.jsx(lT,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/70 w-5 h-5"}),x.jsx(jy,{id:"email",type:"email",placeholder:"  ",value:t,onChange:f=>{const _=f.target.value;e(_);try{window.localStorage.setItem("cashy:lastEmail",_)}catch{}},className:"pl-10 pr-4 py-3 rounded-lg bg-white/20 border-white/30 text-white placeholder:text-white/70 focus:ring-2 focus:ring-green-400",dir:"rtl",required:!0})]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-white",children:" "}),x.jsxs("div",{className:"relative",children:[x.jsx(CV,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/70 w-5 h-5"}),x.jsx(jy,{id:"password",type:s?"text":"password",placeholder:"  ",value:n,onChange:f=>r(f.target.value),className:"pl-10 pr-10 py-3 rounded-lg bg-white/20 border-white/30 text-white placeholder:text-white/70 focus:ring-2 focus:ring-green-400",autoComplete:"off",dir:"rtl",required:!0}),x.jsx("button",{type:"button",onClick:()=>i(!s),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-white/70 hover:text-white transition-colors",children:s?x.jsx(AV,{className:"w-5 h-5"}):x.jsx(xV,{className:"w-5 h-5"})})]})]}),x.jsx("div",{className:"flex justify-end",children:x.jsxs(kP,{type:"button",variant:"ghost",size:"sm",onClick:p,className:"text-green-200 hover:text-green-100 p-0 h-auto font-normal hover:bg-transparent",children:[x.jsx(lT,{className:"w-4 h-4 ml-1"}),"  "]})}),x.jsx("button",{type:"submit",onClick:h,className:"w-full bg-gradient-to-r from-green-600 to-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:from-green-700 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-green-400 transition-all duration-200",children:o?x.jsxs("div",{className:"flex items-center justify-center",children:[x.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white ml-2"}),"  ..."]}):x.jsxs("div",{className:"flex items-center justify-center",children:[x.jsx(TV,{className:"w-5 h-5 ml-2"})," "]})})]}),x.jsxs("div",{className:"mt-6 text-center space-y-3",children:[x.jsxs("p",{className:"text-sm text-white/80",children:["  "," ",x.jsx(mU,{to:"/user/register",className:"text-green-200 hover:text-green-100 font-medium transition-colors hover:underline",children:"  "})]}),x.jsxs("p",{className:"text-sm text-white/80",children:["        "," ",x.jsx("a",{href:"https://wa.me/201000392539",target:"_blank",rel:"noreferrer",className:"text-green-200 hover:text-green-100 font-medium hover:underline",children:"01000392539"})," ","   "," ",x.jsx("a",{href:"mailto:info@cashy-link.com",className:"text-blue-200 hover:text-blue-100 font-medium hover:underline",children:"info@cashy-link.com"})]})]})]}),x.jsx("div",{className:"mt-6 text-center",children:x.jsx("p",{className:"text-xs text-white/70",children:"   "})})]})]})},Dz=()=>{const t=Zu(),e=Zr(),{signOut:n,user:r}=zi(),[s,i]=A.useState(!1),[o,a]=A.useState(!1),l=[{id:"home",label:"",icon:RV,path:"/user/dashboard",action:()=>{t("/user/dashboard"),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},100)}},{id:"debts",label:"",icon:PV,path:"/debts",action:()=>{t("/user/dashboard",{state:{openDebtDialog:!0}})}},{id:"transfer",label:"",icon:IV,path:"/transfer",action:()=>{t("/user/dashboard",{state:{openTransactionSection:!0,transactionType:"transfer",startNewTransaction:!0}})}},{id:"add",label:"",icon:cT,path:"/add",isSpecial:!0},{id:"withdraw",label:"",icon:EV,path:"/withdraw",action:()=>{t("/user/dashboard",{state:{openTransactionSection:!0,transactionType:"withdraw",startNewTransaction:!0}})}},{id:"transactions",label:"",icon:ng,path:"/transactions"},{id:"settings",label:"",icon:uT,path:"/profile-settings"}],c=[{id:"maintenance",label:"",icon:MV,action:()=>{i(!1),t("/user/dashboard",{state:{openMaintenanceDialog:!0}})},color:"#0EA5E9"},{id:"credit-cards",label:" ",icon:bV,action:()=>{i(!1),t("/user/dashboard",{state:{openCreditCardsDialog:!0}})},color:"#8B5CF6"},{id:"sales",label:"",icon:OV,action:()=>{i(!1),t("/user/dashboard",{state:{openSalesDialog:!0}})},color:"#F59E0B"},{id:"shop-expenses",label:" ",icon:ng,action:()=>{i(!1),t("/user/dashboard",{state:{openShopExpensesDialog:!0}})},color:"#F97316"},{id:"deficiencies",label:"",icon:VV,action:()=>{i(!1),t("/user/dashboard",{state:{openDeficienciesDialog:!0}})},color:"#DB2777"},{id:"add-wallet",label:" ",icon:cT,action:()=>{i(!1),t("/user/add-wallet")},color:"#EF4444"},{id:"cashier-shift",label:" ",icon:SV,action:()=>{i(!1),t("/user/dashboard",{state:{openCashierShiftModal:!0}})},color:"#3B82F6"},{id:"contact",label:" ",icon:kV,action:()=>{i(!1);const _=`   
  : ${(r==null?void 0:r.email)||" "}`,y=encodeURIComponent(_);window.open(`https://wa.me/201000392539?text=${y}`,"_blank")},color:"#10B981"},{id:"logout",label:" ",icon:aT,action:async()=>{i(!1);try{await n(),t("/user/login",{replace:!0})}catch(f){console.error("Logout error:",f);try{t("/user/login",{replace:!0})}catch{}}},color:"#EF4444"}],d=[{id:"shop-expenses-settings",label:" ",icon:ng,action:()=>{a(!1),t("/user/dashboard",{state:{openShopExpensesDialog:!0}})},color:"#F97316"},{id:"profile-settings",label:"  ",icon:uT,action:()=>{a(!1),t("/profile-settings")},color:"#6366F1"},{id:"logout",label:" ",icon:aT,action:async()=>{a(!1);try{await n(),t("/user/login",{replace:!0})}catch(f){console.error("Logout error:",f);try{t("/user/login",{replace:!0})}catch{}}},color:"#EF4444"}],h=(f,_,y)=>{y?y():_&&f==="/add"?i(!s):_||t(f)},p=f=>e.pathname===f;return x.jsxs("div",{className:"mobile-bottom-nav",children:[s&&x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"quick-actions-overlay",onClick:()=>i(!1)}),x.jsx("div",{className:"floating-actions-container",children:c.map((f,_)=>x.jsxs("div",{className:"floating-action-button",onClick:f.action,style:{"--action-color":f.color,"--animation-delay":`${_*.1}s`},children:[x.jsx("div",{className:"floating-action-icon",style:{backgroundColor:f.color},children:x.jsx(f.icon,{className:"action-icon"})}),x.jsx("span",{className:"floating-action-label",children:f.label})]},f.id))})]}),o&&x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"quick-actions-overlay",onClick:()=>a(!1)}),x.jsx("div",{className:"floating-actions-container",children:d.map((f,_)=>x.jsxs("div",{className:"floating-action-button",onClick:f.action,style:{"--action-color":f.color,"--animation-delay":`${_*.1}s`},children:[x.jsx("div",{className:"floating-action-icon",style:{backgroundColor:f.color},children:x.jsx(f.icon,{className:"action-icon"})}),x.jsx("span",{className:"floating-action-label",children:f.label})]},f.id))})]}),x.jsx("nav",{className:"mobile-bottom-nav-container",children:l.map(f=>{const _=f.icon,y=p(f.path);return x.jsxs("button",{onClick:()=>h(f.path,f.isSpecial,f.action),className:`mobile-nav-item ${y?"active":""} ${f.isSpecial?"special":""}`,"aria-label":f.label,children:[x.jsx("div",{className:`nav-icon-container ${f.isSpecial?"special-icon":""} ${f.isSpecial&&f.id==="add"&&s?"special-open":""}`,children:x.jsx(_,{className:`nav-icon ${y?"active-icon":""} ${f.isSpecial?"special-icon-svg":""} ${f.isSpecial&&f.id==="add"&&s?"rotated":""} ${f.isSpecial&&f.id==="settings"&&o?"rotated":""}`})}),!f.isSpecial&&x.jsx("span",{className:`nav-label ${y?"active-label":""}`,children:f.label})]},f.id)})})]})},Nz=()=>{const t=typeof window<"u"?window.electronAPI:void 0,e=!!t,[n,r]=z.useState(!1),[s,i]=z.useState(!1),o=async()=>{try{e&&t?await t.windowMinimize():console.info("windowMinimize (dev preview)")}catch(d){console.warn("failed to minimize",d)}},a=async()=>{try{e&&t?await t.windowClose():console.info("windowClose (dev preview)")}catch(d){console.warn("failed to close",d)}},l=async()=>{try{e&&t&&typeof t.windowReload=="function"?await t.windowReload():window.location.reload()}catch(d){console.warn("failed to refresh",d)}};return z.useEffect(()=>{if(!(!e||!t))try{t.onUpdateAvailable(()=>r(!0)),t.onUpdateDownloaded(()=>r(!0)),t.checkUpdate()}catch(d){console.warn("update init failed",d)}},[e,t]),e||!1?x.jsxs("div",{className:"fixed top-2 right-2 z-[2000] flex items-center gap-2",style:{pointerEvents:"auto"},children:[x.jsx("button",{type:"button","aria-label":"",title:"",onClick:a,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-red-600 hover:bg-red-500/10 focus:outline-none dark:text-red-400 dark:hover:bg-red-400/10",children:x.jsx(Sx,{className:"w-5 h-5"})}),x.jsx("button",{type:"button","aria-label":"",title:" ",onClick:l,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-blue-600 hover:bg-blue-500/10 focus:outline-none dark:text-blue-400 dark:hover:bg-blue-400/10",children:x.jsx(Ix,{className:"w-5 h-5"})}),x.jsx("button",{type:"button","aria-label":"",title:"",onClick:o,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-gray-800 hover:bg-black/10 focus:outline-none dark:text-white/80 dark:hover:bg-white/10",children:x.jsx(DV,{className:"w-5 h-5"})})]}):null},dh=({className:t=""})=>{const[e,n]=A.useState("./logo.svg"),[r,s]=A.useState(0),i=A.useCallback(()=>{s(o=>{const a=o+1;return a===1?n("./logo.png"):a===2&&n("./placeholder.svg"),a})},[]);return x.jsx("div",{className:`min-h-screen bg-background flex items-center justify-center ${t}`,children:x.jsxs("div",{className:"flex flex-col items-center justify-center",children:[x.jsx("img",{src:e,alt:"logo",onError:i,className:"w-16 h-16 animate-spin",style:{animationDuration:"0.6s"}}),x.jsx("p",{className:"mt-3 text-base font-extrabold text-primary tracking-wide animate-pulse",style:{fontFamily:"'Tajawal','Cairo',sans-serif"},children:"  "})]})})};/*! Capacitor: https://capacitorjs.com/ - MIT License */var Al;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(Al||(Al={}));class Rg extends Error{constructor(e,n,r){super(e),this.message=e,this.code=n,this.data=r}}const Oz=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},Vz=t=>{const e=t.CapacitorCustomPlatform||null,n=t.Capacitor||{},r=n.Plugins=n.Plugins||{},s=()=>e!==null?e.name:Oz(t),i=()=>s()!=="web",o=h=>{const p=c.get(h);return!!(p!=null&&p.platforms.has(s())||a(h))},a=h=>{var p;return(p=n.PluginHeaders)===null||p===void 0?void 0:p.find(f=>f.name===h)},l=h=>t.console.error(h),c=new Map,d=(h,p={})=>{const f=c.get(h);if(f)return console.warn(`Capacitor plugin "${h}" already registered. Cannot register plugins twice.`),f.proxy;const _=s(),y=a(h);let E;const w=async()=>(!E&&_ in p?E=typeof p[_]=="function"?E=await p[_]():E=p[_]:e!==null&&!E&&"web"in p&&(E=typeof p.web=="function"?E=await p.web():E=p.web),E),v=(T,b)=>{var k,P;if(y){const N=y==null?void 0:y.methods.find(C=>b===C.name);if(N)return N.rtype==="promise"?C=>n.nativePromise(h,b.toString(),C):(C,q)=>n.nativeCallback(h,b.toString(),C,q);if(T)return(k=T[b])===null||k===void 0?void 0:k.bind(T)}else{if(T)return(P=T[b])===null||P===void 0?void 0:P.bind(T);throw new Rg(`"${h}" plugin is not implemented on ${_}`,Al.Unimplemented)}},I=T=>{let b;const k=(...P)=>{const N=w().then(C=>{const q=v(C,T);if(q){const Z=q(...P);return b=Z==null?void 0:Z.remove,Z}else throw new Rg(`"${h}.${T}()" is not implemented on ${_}`,Al.Unimplemented)});return T==="addListener"&&(N.remove=async()=>b()),N};return k.toString=()=>`${T.toString()}() { [capacitor code] }`,Object.defineProperty(k,"name",{value:T,writable:!1,configurable:!1}),k},D=I("addListener"),O=I("removeListener"),V=(T,b)=>{const k=D({eventName:T},b),P=async()=>{const C=await k;O({eventName:T,callbackId:C},b)},N=new Promise(C=>k.then(()=>C({remove:P})));return N.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await P()},N},S=new Proxy({},{get(T,b){switch(b){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return y?V:D;case"removeListener":return O;default:return I(b)}}});return r[h]=S,c.set(h,{name:h,proxy:S,platforms:new Set([...Object.keys(p),...y?[_]:[]])}),S};return n.convertFileSrc||(n.convertFileSrc=h=>h),n.getPlatform=s,n.handleError=l,n.isNativePlatform=i,n.isPluginAvailable=o,n.registerPlugin=d,n.Exception=Rg,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},Lz=t=>t.Capacitor=Vz(t),Te=Lz(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),rE=Te.registerPlugin;class wD{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,n){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(n);const i=this.windowListeners[e];i&&!i.registered&&this.addWindowListener(i),r&&this.sendRetainedArgumentsForEvent(e);const o=async()=>this.removeListener(e,n);return Promise.resolve({remove:o})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,r){const s=this.listeners[e];if(!s){if(r){let i=this.retainedEventArguments[e];i||(i=[]),i.push(n),this.retainedEventArguments[e]=i}return}s.forEach(i=>i(n))}hasListeners(e){var n;return!!(!((n=this.listeners[e])===null||n===void 0)&&n.length)}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(e="not implemented"){return new Te.Exception(e,Al.Unimplemented)}unavailable(e="not available"){return new Te.Exception(e,Al.Unavailable)}async removeListener(e,n){const r=this.listeners[e];if(!r)return;const s=r.indexOf(n);this.listeners[e].splice(s,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(r=>{this.notifyListeners(e,r)}))}}const KS=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),GS=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Mz extends wD{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[s,i]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=GS(s).trim(),i=GS(i).trim(),n[s]=i}),n}async setCookie(e){try{const n=KS(e.key),r=KS(e.value),s=`; expires=${(e.expires||"").replace("expires=","")}`,i=(e.path||"/").replace("path=",""),o=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${r||""}${s}; path=${i}; ${o};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}rE("CapacitorCookies",{web:()=>new Mz});const Fz=async t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const s=r.result;e(s.indexOf(",")>=0?s.split(",")[1]:s)},r.onerror=s=>n(s),r.readAsDataURL(t)}),Uz=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(s=>s.toLocaleLowerCase()).reduce((s,i,o)=>(s[i]=t[e[o]],s),{})},jz=(t,e=!0)=>t?Object.entries(t).reduce((r,s)=>{const[i,o]=s;let a,l;return Array.isArray(o)?(l="",o.forEach(c=>{a=e?encodeURIComponent(c):c,l+=`${i}=${a}&`}),l.slice(0,-1)):(a=e?encodeURIComponent(o):o,l=`${i}=${a}`),`${r}&${l}`},"").substr(1):null,Bz=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),s=Uz(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(s.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[o,a]of Object.entries(t.data||{}))i.set(o,a);n.body=i.toString()}else if(s.includes("multipart/form-data")||t.data instanceof FormData){const i=new FormData;if(t.data instanceof FormData)t.data.forEach((a,l)=>{i.append(l,a)});else for(const a of Object.keys(t.data))i.append(a,t.data[a]);n.body=i;const o=new Headers(n.headers);o.delete("content-type"),n.headers=o}else(s.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class $z extends wD{async request(e){const n=Bz(e,e.webFetchExtra),r=jz(e.params,e.shouldEncodeUrlParams),s=r?`${e.url}?${r}`:e.url,i=await fetch(s,n),o=i.headers.get("content-type")||"";let{responseType:a="text"}=i.ok?e:{};o.includes("application/json")&&(a="json");let l,c;switch(a){case"arraybuffer":case"blob":c=await i.blob(),l=await Fz(c);break;case"json":l=await i.json();break;case"document":case"text":default:l=await i.text()}const d={};return i.headers.forEach((h,p)=>{d[p]=h}),{data:l,headers:d,status:i.status,url:i.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}rE("CapacitorHttp",{web:()=>new $z});const Cg=768;function ED(){const[t,e]=A.useState(void 0);return A.useEffect(()=>{const n=window.matchMedia(`(max-width: ${Cg-1}px)`),r=()=>{e(window.innerWidth<Cg)};return n.addEventListener("change",r),e(window.innerWidth<Cg),()=>n.removeEventListener("change",r)},[]),!!t}function zz(){const t=ED(),[e,n]=A.useState("default"),[r,s]=A.useState(!1);return A.useEffect(()=>{const o=localStorage.getItem("notificationConsentRequested")==="true";if(s(o),o){const a=localStorage.getItem("notificationPermission");(a==="granted"||a==="denied"||a==="default")&&n(a);return}t&&typeof window<"u"&&("Notification"in window?Notification.requestPermission().then(a=>{n(a),localStorage.setItem("notificationPermission",a),localStorage.setItem("notificationConsentRequested","true"),s(!0)}).catch(()=>{n("default"),localStorage.setItem("notificationConsentRequested","true"),s(!0)}):(n("unsupported"),localStorage.setItem("notificationConsentRequested","true"),s(!0)))},[t]),{permission:e,hasRequested:r,requestConsent:async()=>{if(typeof window<"u"&&"Notification"in window){const o=await Notification.requestPermission();return n(o),localStorage.setItem("notificationPermission",o),localStorage.setItem("notificationConsentRequested","true"),s(!0),o}return"unsupported"}}}const QS=rE("AppLauncher",{web:()=>Oe(()=>import("./web-BuKSyIy9.js"),[],import.meta.url).then(t=>new t.AppLauncherWeb)});function qz(t,e){if(!t||!t.trim())throw new Error("USSD code is required");const n=`tel:${t.replace(/#/g,"%23")}`,s=`cashy://ussd?code=${t.replace(/#/g,"%23")}${e?`&sim=${e}`:""}`;let i=!1;try{Te&&Te.getPlatform()!=="web"&&(QS.openUrl({url:s}),i=!0)}catch{}if(!i)try{window.location.href=s,i=!0}catch{}if(!i){try{window.location.href=n}catch{}try{Te&&Te.getPlatform()!=="web"&&QS.openUrl({url:n})}catch{}}}function TD(t,e){const n=String(t||"").replace(/\D/g,""),r=Math.round(Number(e||0));return!n||n.length!==11||!n.startsWith("01")||!r||r<=0?null:n.startsWith("010")?`*9*7*${n}*${r}#`:n.startsWith("011")?`*323*${n}*${r}#`:n.startsWith("012")?`*115*1*${n}*${r}#`:n.startsWith("015")?`*322*${n}*${r}#`:null}function Hz(t,e,n){const r=String(t||"").replace(/\D/g,""),s=String(e||"").replace(/\D/g,""),i=Math.round(Number(n||0));return!s||s.length!==11||!s.startsWith("01")||!i||i<=0?null:!r||!r.startsWith("01")?TD(s,i):r.startsWith("010")?`*9*7*${s}*${i}#`:r.startsWith("011")?`*323*${s}*${i}#`:r.startsWith("012")?`*115*1*${s}*${i}#`:r.startsWith("015")?`*322*${s}*${i}#`:null}function B8(t,e,n){const r=TD(t,e),s=String(n||"").replace(/\D/g,"");return!r||!s?r:`${r.endsWith("#")?r.slice(0,-1):r}*${s}#`}function Wz(t){const e=String(t||"").replace(/\D/g,"");return e.startsWith("010")?"vodafone":e.startsWith("011")?"etisalat":e.startsWith("012")?"orange":e.startsWith("015")?"we":null}function Kz(t){const e=Wz(t),n=e?`simSlot_${e}`:"simSlot_default";try{if(localStorage.getItem(n)==="sim2")return"sim2"}catch{}return"sim1"}function $8(t,e,n){const r=Hz(t,e,n);if(!r)throw new Error("Unsupported network or invalid sender/receiver/amount");const s=Kz(t||e);qz(r,s)}async function Gz(t,e="Cashy"){if(!t||!t.trim())throw new Error("Notification message is required");try{if(typeof Notification<"u"&&(Notification.permission==="granted"?"granted":await Notification.requestPermission())==="granted"){new Notification(e||"Cashy",{body:t});return}typeof window<"u"&&typeof alert=="function"?alert(`${e||"Cashy"}
${t}`):console.log(`[${e||"Cashy"}] ${t}`)}catch(n){console.warn("Notification not available:",n)}}function sE(t,e){return e==="send"?0:Math.round(t*.01*100)/100}function Qz(t,e,n=0){const r=sE(t,e),s=Math.max(0,r-n);return Math.round(s*100)/100}const Yz=Object.freeze(Object.defineProperty({__proto__:null,calculateCommission:sE,calculateProfit:Qz},Symbol.toStringTag,{value:"Module"})),Xz=t=>t==="withdraw"||t==="receive"?"receive":"send",Jz=async t=>{if(!t)return null;const e=Re(ye(Q,"transactions"),be("reference","==",t),Yo(1)),n=await Ne(e);return n.empty?null:n.docs[0].id},Zz=async t=>{if(!t||!t.shopId||!t.lineId||!t.provider)throw new Error("   :   shopId  lineId  provider");if(!t.amount||t.amount<=0)throw new Error("     ");const e=await Jz(t.reference);if(e)return{id:e,duplicate:!0};const n=Xz(t.type),r={shopId:t.shopId,lineId:t.lineId,merchantUserId:t.merchantUserId||t.createdBy,walletId:t.walletId,provider:t.provider,txnType:n,amount:t.amount,fee:void 0,commission:void 0,profit:0,reference:t.reference,senderMsisdn:t.senderMsisdn,receiverMsisdn:t.receiverMsisdn,note:t.note,status:"confirmed",createdBy:t.createdBy,createdAt:new Date,confirmedAt:new Date},s=await yD.create(r);try{const i="  ",o=`: ${t.type} | : ${t.amount} | : ${t.provider}`;await Gz(o,i)}catch(i){console.warn("   :",i)}try{const i=t.merchantUserId||t.createdBy;if(i){const o=n==="receive"?"withdraw":"send",a=sE(t.amount,n);await vD.saveUserTransaction(i,{type:o,amount:t.amount,commission:a,status:"confirmed",createdAt:new Date,senderMsisdn:t.senderMsisdn,receiverMsisdn:t.receiverMsisdn,walletId:t.walletId,lineId:t.lineId,provider:t.provider,note:t.note,transactionId:s})}else console.warn("    :   userId (merchantUserId  createdBy)  .")}catch(i){console.warn("      userTransactions   :",i)}return{id:s,duplicate:!1}};function e8(t){let e=0;for(let n=0;n<t.length;n++)e=Math.imul(31,e)+t.charCodeAt(n)|0;return"SMS_"+Math.abs(e).toString(36)}function t8(t){const e=t.toLowerCase();return e.includes("")||e.includes("withdraw")?"withdraw":(e.includes("")||e.includes("transfer")||e.includes(" "),"transfer")}function n8(t){const n=t.replace(/,/g,"").match(/(\d{1,9}(?:\.\d{1,2})?)/);return n?parseFloat(n[1]):null}function r8(t){const e=t.match(/01\d{9}/);return e?e[0]:void 0}function s8(t){const e=t.toLowerCase();if(e.includes("")||e.includes("vodafone"))return"vodafone_cash";if(e.includes("")||e.includes("orange"))return"orange_cash";if(e.includes("")||e.includes("etisalat"))return"etisalat_cash";if(e.includes("instapay")||e.includes(" ")||e.includes(""))return"instapay"}function i8(t={}){if(typeof window>"u")return()=>{};const e=t.createdBy||"mobile_sms_bridge",n=async r=>{const i=r.detail||{};try{let o=null;if(i&&i.payload)o=i.payload,o.shopId=o.shopId||t.shopId,o.lineId=o.lineId||t.lineId,o.provider=o.provider||t.provider,o.createdBy=o.createdBy||e;else if(i&&i.text){const l=i.text,c=t8(l),d=n8(l),h=c==="transfer"?r8(l):void 0,p=s8(l)||t.provider;if(!t.shopId||!t.lineId||!p){console.warn("SMS integration missing identifiers. Provide shopId, lineId, provider in initSmsIntegration."),It.warning("   SMS   (  )");return}o={type:c,amount:d||0,provider:p,shopId:t.shopId,lineId:t.lineId,receiverMsisdn:h,reference:i.reference||e8(l),createdBy:e,note:"Parsed from SMS"}}if(!o)return;if((await Zz(o)).duplicate)It.info("      SMS");else{const l=o.type==="withdraw"?"":"";It.success(`  ${l}    SMS`)}}catch(o){console.error("Failed to process mobile SMS notification:",o),It.error("     SMS")}};return window.addEventListener("mobileSmsReceived",n),()=>window.removeEventListener("mobileSmsReceived",n)}async function o8(t,e="android",n){var l,c,d,h,p;const r=n||((l=Yn.currentUser)==null?void 0:l.uid)||"";if(!r)throw new Error("  userId   ");const s=(d=(c=import.meta)==null?void 0:c.env)==null?void 0:d.VITE_PUSH_REGISTER_ENDPOINT,i=(p=(h=import.meta)==null?void 0:h.env)==null?void 0:p.VITE_PUSH_NOTIFICATIONS_API_KEY,o={userId:r,platform:e,token:t};if(s){const f=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json",...i?{Authorization:`Bearer ${i}`}:{}},body:JSON.stringify(o)});if(f.ok)return f.json()}const a=await fetch("/api/devices/save-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!a.ok)throw new Error(`  : ${a.status}`);return a.json()}async function a8(t,e="android",n){return await Gk(tE,"saveDeviceToken")({token:t,platform:e,userId:n})}async function z8(t,e=" ",n="    50 ",r={type:"transfer",amount:"50",txId:"12345"}){const i=await Gk(tE,"sendFcmToUser")({userId:t,title:e,body:n,data:r});return(i==null?void 0:i.data)??i}function ID(){if(typeof window>"u")return()=>{};const t=async e=>{var n;try{const r=e.detail||window.__fcmToken||"";if(!r)return;const s=((n=Yn.currentUser)==null?void 0:n.uid)||"";if(!s){console.warn("FCM bridge:           ");return}try{await a8(r,"android",s)}catch{await o8(r,"android",s)}console.log("    FCM  :",s)}catch(r){console.error("    FCM  :",r)}};window.addEventListener("fcm-token",t);try{const e=window.__fcmToken;e&&t(new CustomEvent("fcm-token",{detail:e}))}catch{}return()=>{window.removeEventListener("fcm-token",t)}}async function l8(){var t,e,n;try{if(!(Te!=null&&Te.isNativePlatform))return!1;const r=Te.getPlatform();if(localStorage.getItem("nativePushRequested")==="true")return!1;const i=((t=Te.Plugins)==null?void 0:t.PushNotifications)||window.PushNotifications;if(!i){if(typeof window<"u"&&"Notification"in window&&typeof Notification.requestPermission=="function")try{await Notification.requestPermission()}catch{}return localStorage.setItem("nativePushRequested","true"),!1}try{await((e=i.requestPermissions)==null?void 0:e.call(i))}catch{}try{await((n=i.register)==null?void 0:n.call(i))}catch{}return localStorage.setItem("nativePushRequested","true"),!0}catch{return!1}}const Zs={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_DEV_MODE:"true",VITE_ENABLE_OFFLINE_PERSISTENCE:"false",VITE_FIREBASE_API_KEY:"AIzaSyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s",VITE_FIREBASE_APP_ID:"1:483702062341:web:b1ff06ad175cb7ae428b6c",VITE_FIREBASE_AUTH_DOMAIN:"voda-c6abd.firebaseapp.com",VITE_FIREBASE_AUTH_EMULATOR_URL:"http://localhost:9099",VITE_FIREBASE_FIRESTORE_EMULATOR_HOST:"localhost:8080",VITE_FIREBASE_FUNCTIONS_EMULATOR_HOST:"localhost:5001",VITE_FIREBASE_MEASUREMENT_ID:"G-CV6QGH7G7P",VITE_FIREBASE_MESSAGING_SENDER_ID:"483702062341",VITE_FIREBASE_PROJECT_ID:"voda-c6abd",VITE_FIREBASE_STORAGE_BUCKET:"voda-c6abd.appspot.com",VITE_FORCE_HASH_ROUTER:"true",VITE_SHOP_ID:"demo-shop-001",VITE_SHOP_NAME:"   ",VITE_SHOW_ENV_BANNER:"true",VITE_USE_EMULATORS:"false",VITE_USE_FIREBASE_EMULATOR:"false"},YS=z.lazy(()=>Oe(()=>import("./Index-BSufVpdd.js"),[],import.meta.url)),hh=z.lazy(()=>Oe(()=>import("./LandingPage-SrvxXHmx.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]),import.meta.url)),XS=z.lazy(()=>Oe(()=>import("./SubscriptionsPage-DdwdHL9b.js"),__vite__mapDeps([14,1,4,15,16,7,8,6,13]),import.meta.url)),JS=z.lazy(()=>Oe(()=>import("./AuthPage-BTToHDB6.js"),__vite__mapDeps([17,1,5,2,3,9]),import.meta.url)),fh=z.lazy(()=>Oe(()=>import("./TopUpPage-C9IDsER7.js"),__vite__mapDeps([18,1,19,20,21]),import.meta.url)),ZS=z.lazy(()=>Oe(()=>import("./AdminTopupsPage-64oNSEru.js"),__vite__mapDeps([22,19,20,21]),import.meta.url)),eb=z.lazy(()=>Oe(()=>import("./AdminNotificationsPage-B1BT5tVR.js"),__vite__mapDeps([23,1,24,25,26]),import.meta.url)),ph=z.lazy(()=>Oe(()=>import("./UserRegisterPage-G3PRbRs9.js"),__vite__mapDeps([27,1,24,28,29,30,31,32,33]),import.meta.url)),tb=z.lazy(()=>Oe(()=>import("./UserAccountSetupPage-Cmbl9o8l.js"),__vite__mapDeps([34,1,24,28,33,32,13]),import.meta.url)),nb=z.lazy(()=>Oe(()=>import("./ForgotPasswordCodePage-BgWKsIkC.js"),[],import.meta.url)),rb=z.lazy(()=>Oe(()=>import("./DashboardLoginPage-CTajuWTB.js"),__vite__mapDeps([35,1,11]),import.meta.url)),sb=z.lazy(()=>Oe(()=>import("./ProtectedDashboard-BMaCHIwX.js"),__vite__mapDeps([36,1,37,19,20,21,38,24,39,11,40,41,29,13,42]),import.meta.url)),mh=z.lazy(()=>Oe(()=>import("./ProtectedUserDashboard-jHaYO-Mr.js"),__vite__mapDeps([43,44,26,38,24,39,20,11,40]),import.meta.url)),ib=z.lazy(()=>Oe(()=>import("./MerchantDashboard-BGYv-4JO.js"),__vite__mapDeps([45,46,19,20,21,47,37,48,39,1,49,24,50,51]),import.meta.url)),ob=z.lazy(()=>Oe(()=>import("./PendingApprovalPage-CcJtrFcF.js"),__vite__mapDeps([52,1,4,40,11,53,13,54]),import.meta.url)),ab=z.lazy(()=>Oe(()=>import("./AdminLogin-TXZoVLPp.js"),__vite__mapDeps([55,11]),import.meta.url)),lb=z.lazy(()=>Oe(()=>import("./ProtectedAdminDashboard-DgvCPux7.js"),__vite__mapDeps([56,15,3,57,46,19,20,21,47,39,24,38,11,40,58,1,25,59,28,37,60,4,54,32,61,44,16,10,53,8,5,62,9,13,42]),import.meta.url)),cb=z.lazy(()=>Oe(()=>import("./AuthTestPage-CIu33AFQ.js"),__vite__mapDeps([63,1,24]),import.meta.url)),ub=z.lazy(()=>Oe(()=>import("./ProfileSettingsPage-1zpkZW9M.js"),__vite__mapDeps([64,1,24,58,5,65,38,39,20,11,40,51,59,21,6,31,61,8,54]),import.meta.url)),db=z.lazy(()=>Oe(()=>import("./TransactionsPage-bDzn8rMP.js"),__vite__mapDeps([66,1,39,20,19,21,37,47,67,60,38,24,11,40,4,49,13,9,16,68,41,6,42]),import.meta.url)),hb=z.lazy(()=>Oe(()=>import("./WalletAdditionPage-CBmhN1hV.js"),__vite__mapDeps([69,1,24,19,20,21,50,6,29,32,40]),import.meta.url)),fb=z.lazy(()=>Oe(()=>import("./ReferralsPage-BjpgbxQw.js"),__vite__mapDeps([70,1,37,28,31,26,13,61,53,62,30,42]),import.meta.url)),pb=z.lazy(()=>Oe(()=>import("./CPanelPage-BEZybQOb.js"),__vite__mapDeps([71,1,24,39,20]),import.meta.url)),mb=z.lazy(()=>Oe(()=>import("./CPanelLoginPage-DOx5kDN0.js"),__vite__mapDeps([72,24,1,11]),import.meta.url)),gb=z.lazy(()=>Oe(()=>import("./NotFound-LDVEQPWG.js"),[],import.meta.url)),yb=z.lazy(()=>Oe(()=>import("./SmsHookBridge-Lh8H-K7_.js"),[],import.meta.url)),c8=new f4,u8=()=>{if(!((Te==null?void 0:Te.isNativePlatform)&&Te.getPlatform()==="android"))return null;const e=()=>{try{window.location.reload()}catch{}};return x.jsx("div",{className:"fixed top-2 right-2 z-[2000] flex items-center gap-2",style:{pointerEvents:"auto"},children:x.jsx("button",{type:"button","aria-label":"",title:" ",onClick:e,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-blue-600 hover:bg-blue-500/10 focus:outline-none dark:text-blue-400 dark:hover:bg-blue-400/10",children:x.jsx(Ix,{className:"w-5 h-5"})})})},vb=()=>{const t=Zr(),{user:e,loading:n}=zi(),r=(Te==null?void 0:Te.isNativePlatform)&&Te.getPlatform()==="android",s=t.pathname.startsWith("/user/dashboard"),i=r&&t.pathname==="/",o=!!e&&(s||i);return n?null:o?x.jsx(Dz,{}):null},_b=()=>{const t=ED(),{profile:e}=zi(),n=Zr(),{toast:r}=W1();return zz(),A.useEffect(()=>{l8()},[]),A.useEffect(()=>{const s=ID(),i=n.pathname.startsWith("/user/dashboard");if(t&&(e!=null&&e.shopId)&&i){const o=i8({shopId:e.shopId,createdBy:e.userId});return()=>{try{o()}catch{}try{s()}catch{}}}return()=>{try{s()}catch{}}},[t,e==null?void 0:e.shopId,n.pathname]),A.useEffect(()=>{if(!t)return;const s=document.createElement("style");s.setAttribute("data-disable-pull-to-refresh","true"),s.textContent="html, body { overscroll-behavior-y: contain; touch-action: pan-y; }",document.head.appendChild(s);let i=0,o=null;const a=c=>{var d,h;i=((h=(d=c.touches)==null?void 0:d[0])==null?void 0:h.clientY)||0,o=c.target},l=c=>{var E,w;const d=((w=(E=c.touches)==null?void 0:E[0])==null?void 0:w.clientY)||0,h=document.scrollingElement||document.documentElement,p=h.scrollTop||window.scrollY||0,f=h.scrollHeight-h.clientHeight||0,_=o||null,y=(()=>{let v=_;for(;v&&v!==document.body;){const D=window.getComputedStyle(v).overflowY;if((D==="auto"||D==="scroll")&&v.scrollHeight>v.clientHeight)return!0;v=v.parentElement}return!1})();!y&&p<=0&&d>i&&c.cancelable&&c.preventDefault(),!y&&p>=f&&d<i&&c.cancelable&&c.preventDefault()};return document.addEventListener("touchstart",a,{passive:!0}),document.addEventListener("touchmove",l,{passive:!1}),()=>{document.removeEventListener("touchstart",a),document.removeEventListener("touchmove",l);try{document.head.removeChild(s)}catch{}}},[t]),A.useEffect(()=>{if(!((Te==null?void 0:Te.isNativePlatform)&&Te.getPlatform()==="android"))return;let i=!1;return(async()=>{try{const o=String((Zs==null?void 0:Zs.VITE_APP_VERSION)||"0.0.0"),a=await fetch("https://cashy-link.com/mobile_version.json",{cache:"no-store"});if(!a.ok)throw new Error("   ");const l=await a.json(),c=String((l==null?void 0:l.version)||"0.0.0"),d=l!=null&&l.url?String(l.url).trim():void 0;if(!i&&d&&((p,f)=>{const _=p.split(".").map(E=>parseInt(E,10)||0),y=f.split(".").map(E=>parseInt(E,10)||0);for(let E=0;E<Math.max(_.length,y.length);E++){const w=_[E]||0,v=y[E]||0;if(w>v)return 1;if(w<v)return-1}return 0})(c,o)>0){try{r({title:"  ",description:` ${c}       `})}catch{}try{window.open(d,"_blank")}catch{}}}catch(o){console.warn("   :",o)}})(),()=>{i=!0}},[]),A.useEffect(()=>{const s=(Te==null?void 0:Te.isNativePlatform)&&Te.getPlatform()==="android",i=typeof window<"u"&&(window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"));if(s||i)return;let o=!1;return(async()=>{try{const a=String((Zs==null?void 0:Zs.VITE_APP_VERSION)||"0.0.0"),l=await fetch("https://cashy-link.com/desktop_version.json",{cache:"no-store"});if(!l.ok)return;const c=await l.json(),d=String((c==null?void 0:c.version)||"0.0.0"),h=!!(c!=null&&c.force);if(!o&&((f,_)=>{const y=String(f).split(".").map(w=>parseInt(w,10)||0),E=String(_).split(".").map(w=>parseInt(w,10)||0);for(let w=0;w<Math.max(y.length,E.length);w++){const v=y[w]||0,I=E[w]||0;if(v>I)return 1;if(v<I)return-1}return 0})(d,a)>0){if(h){try{window.location.reload()}catch{}return}try{r({title:"  ",description:` ${d}      `})}catch{}}}catch{}})(),()=>{o=!0}},[]),null},wb=()=>Zr().pathname.startsWith("/user/dashboard")?x.jsxs(x.Fragment,{children:[x.jsx(_L,{}),x.jsx(eM,{})]}):null,d8=()=>x.jsx(m4,{client:c8,children:x.jsx(yU,{children:x.jsxs(jF,{children:[typeof window<"u"&&(window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron")||typeof import.meta<"u"&&Zs&&!1)&&!(Te!=null&&Te.isNativePlatform&&Te.getPlatform()==="android")&&x.jsx(Nz,{}),x.jsx(u8,{}),typeof window<"u"&&(window.electronAPI||window.location.protocol==="file:"||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron")||typeof window.location.hash=="string"&&window.location.hash.startsWith("#/")||typeof import.meta<"u"&&Zs)?x.jsxs(hU,{children:[x.jsx(_b,{}),x.jsx(wb,{}),x.jsxs(A.Suspense,{fallback:x.jsx(dh,{}),children:[null,x.jsxs($T,{children:[x.jsx(se,{path:"/",element:Te!=null&&Te.isNativePlatform&&Te.getPlatform()==="android"?z.createElement(()=>{const{user:e,loading:n}=zi();return n?z.createElement(dh):e?z.createElement(mh):z.createElement(uh)}):x.jsx(hh,{})}),x.jsx(se,{path:"/dashboard-redirect",element:x.jsx(YS,{})}),x.jsx(se,{path:"/landing",element:x.jsx(hh,{})}),x.jsx(se,{path:"/subscriptions",element:x.jsx(XS,{})}),x.jsx(se,{path:"/auth",element:x.jsx(JS,{})}),x.jsx(se,{path:"/sms-hook",element:x.jsx(yb,{})}),x.jsx(se,{path:"/user/login",element:x.jsx(uh,{})}),x.jsx(se,{path:"/user/forgot-password",element:x.jsx(nb,{})}),x.jsx(se,{path:"/user/register",element:x.jsx(ph,{})}),x.jsx(se,{path:"/register",element:x.jsx(ph,{})}),x.jsx(se,{path:"/user/account-setup",element:x.jsx(tb,{})}),x.jsx(se,{path:"/user/pending-approval",element:x.jsx(ob,{})}),x.jsx(se,{path:"/user/dashboard",element:x.jsx(mh,{})}),x.jsx(se,{path:"/user/add-wallet",element:x.jsx(hb,{})}),x.jsx(se,{path:"/admin/login",element:x.jsx(ab,{})}),x.jsx(se,{path:"/admin/dashboard",element:x.jsx(lb,{})}),x.jsx(se,{path:"/admin/topups",element:x.jsx(ZS,{})}),x.jsx(se,{path:"/admin/notifications",element:x.jsx(eb,{})}),x.jsx(se,{path:"/profile-settings",element:x.jsx(ub,{})}),x.jsx(se,{path:"/transactions",element:x.jsx(db,{})}),x.jsx(se,{path:"/referrals",element:x.jsx(fb,{})}),x.jsx(se,{path:"/cpanel",element:x.jsx(pb,{})}),x.jsx(se,{path:"/cpanel/login",element:x.jsx(mb,{})}),x.jsx(se,{path:"/auth-test",element:x.jsx(cb,{})}),x.jsx(se,{path:"/topup",element:x.jsx(fh,{})}),x.jsx(se,{path:"/recharge",element:x.jsx(fh,{})}),x.jsx(se,{path:"/merchant/*",element:x.jsx(ib,{})}),x.jsx(se,{path:"/dashboard/login",element:x.jsx(rb,{})}),x.jsx(se,{path:"/dashboard",element:x.jsx(sb,{})}),x.jsx(se,{path:"*",element:x.jsx(gb,{})})]})]}),x.jsx(vb,{})]}):x.jsxs(dU,{children:[x.jsx(_b,{}),x.jsx(wb,{}),x.jsxs(A.Suspense,{fallback:x.jsx(dh,{}),children:[null,x.jsxs($T,{children:[x.jsx(se,{path:"/",element:Te!=null&&Te.isNativePlatform&&Te.getPlatform()==="android"?z.createElement(()=>{const{user:e,loading:n}=zi();return n?z.createElement(dh):e?z.createElement(mh):z.createElement(uh)}):x.jsx(hh,{})}),x.jsx(se,{path:"/dashboard-redirect",element:x.jsx(YS,{})}),x.jsx(se,{path:"/landing",element:x.jsx(hh,{})}),x.jsx(se,{path:"/subscriptions",element:x.jsx(XS,{})}),x.jsx(se,{path:"/auth",element:x.jsx(JS,{})}),x.jsx(se,{path:"/sms-hook",element:x.jsx(yb,{})}),x.jsx(se,{path:"/user/login",element:x.jsx(uh,{})}),x.jsx(se,{path:"/user/forgot-password",element:x.jsx(nb,{})}),x.jsx(se,{path:"/user/register",element:x.jsx(ph,{})}),x.jsx(se,{path:"/register",element:x.jsx(ph,{})}),x.jsx(se,{path:"/user/account-setup",element:x.jsx(tb,{})}),x.jsx(se,{path:"/user/pending-approval",element:x.jsx(ob,{})}),x.jsx(se,{path:"/user/dashboard",element:x.jsx(mh,{})}),x.jsx(se,{path:"/user/add-wallet",element:x.jsx(hb,{})}),x.jsx(se,{path:"/admin/login",element:x.jsx(ab,{})}),x.jsx(se,{path:"/admin/dashboard",element:x.jsx(lb,{})}),x.jsx(se,{path:"/admin/topups",element:x.jsx(ZS,{})}),x.jsx(se,{path:"/admin/notifications",element:x.jsx(eb,{})}),x.jsx(se,{path:"/profile-settings",element:x.jsx(ub,{})}),x.jsx(se,{path:"/transactions",element:x.jsx(db,{})}),x.jsx(se,{path:"/referrals",element:x.jsx(fb,{})}),x.jsx(se,{path:"/cpanel",element:x.jsx(pb,{})}),x.jsx(se,{path:"/cpanel/login",element:x.jsx(mb,{})}),x.jsx(se,{path:"/auth-test",element:x.jsx(cb,{})}),x.jsx(se,{path:"/topup",element:x.jsx(fh,{})}),x.jsx(se,{path:"/recharge",element:x.jsx(fh,{})}),x.jsx(se,{path:"/merchant/*",element:x.jsx(ib,{})}),x.jsx(se,{path:"/dashboard/login",element:x.jsx(rb,{})}),x.jsx(se,{path:"/dashboard",element:x.jsx(sb,{})}),x.jsx(se,{path:"*",element:x.jsx(gb,{})})]})]}),x.jsx(vb,{})]})]})})}),SD=A.createContext(void 0),h8=({children:t})=>{const[e,n]=A.useState(null),[r,s]=A.useState(!1),[i,o]=A.useState(null),{profile:a,user:l}=zi();A.useEffect(()=>{try{const p=localStorage.getItem("cashier_shift_user"),f=localStorage.getItem("cashier_shift_active"),_=localStorage.getItem("cashier_shift_start_at");p&&n(JSON.parse(p)),f&&s(f==="true"),_&&o(Number(_))}catch{}},[]),A.useEffect(()=>{if(!(a!=null&&a.shopId))return;const p=ve(Q,"cashierShift",a.shopId);let f=null;return(async()=>{try{(await St(p)).exists()||await Bi(p,{isShiftActive:!1,shiftStartAt:null,shiftUser:null}),f=ep(p,y=>{if(y.exists()){const E=y.data(),w=(E==null?void 0:E.shiftUser)||null,v=!!(E!=null&&E.isShiftActive),I=(E==null?void 0:E.shiftStartAt)??null;let D=w;if(!D)try{const O=localStorage.getItem("cashier_shift_user"),V=O?JSON.parse(O):null;V&&(D=V)}catch{}n(D),s(v),o(typeof I=="number"?I:I?Number(I):null);try{D?localStorage.setItem("cashier_shift_user",JSON.stringify(D)):localStorage.removeItem("cashier_shift_user"),localStorage.setItem("cashier_shift_active",v?"true":"false"),I!=null&&localStorage.setItem("cashier_shift_start_at",String(I))}catch{}}},y=>{console.warn("cashierShift snapshot error:",y)})}catch(_){console.warn("Failed to init cashierShift doc:",_)}})(),()=>{f&&f()}},[a==null?void 0:a.shopId]);const c=p=>{n(p);try{p?localStorage.setItem("cashier_shift_user",JSON.stringify(p)):localStorage.removeItem("cashier_shift_user")}catch{}try{if(a!=null&&a.shopId){const f=ve(Q,"cashierShift",a.shopId);st(f,{shiftUser:p||null})}}catch{}},d=()=>{s(!0);try{localStorage.setItem("cashier_shift_active","true")}catch{}const p=Date.now();o(p);try{localStorage.setItem("cashier_shift_start_at",String(p))}catch{}try{if(a!=null&&a.shopId){const f=ve(Q,"cashierShift",a.shopId);st(f,{isShiftActive:!0,shiftStartAt:p})}}catch{}try{const _=`cashBalance_${(l==null?void 0:l.uid)||"default"}`,y=`userCashBalance_${(l==null?void 0:l.uid)||"default"}`,E=`walletBalances_${(l==null?void 0:l.uid)||"default"}`;let w=localStorage.getItem(_);if(w==null){const I=localStorage.getItem(y);if(I!=null){w=I;try{localStorage.setItem(_,I),localStorage.removeItem(y)}catch{}}}if(w==null&&(l!=null&&l.uid)){const I=localStorage.getItem("cashBalance"),D=localStorage.getItem("userCashBalance");if(I!=null){try{localStorage.setItem(_,I),localStorage.removeItem("cashBalance")}catch{}w=I}else if(D!=null){try{localStorage.setItem(_,D),localStorage.removeItem("userCashBalance")}catch{}w=D}}const v=localStorage.getItem(E);w?localStorage.setItem("shiftStartDrawerFunds",w):localStorage.setItem("shiftStartDrawerFunds","0"),v?localStorage.setItem("shiftStartWalletBalances",v):localStorage.setItem("shiftStartWalletBalances","{}")}catch{}try{a!=null&&a.shopId&&(async()=>{try{const f=ve(Q,"dashboardData",a.shopId),_=await St(f);if(_.exists()){const y=_.data(),E=Number((y==null?void 0:y.cashBalance)??0),w=(y==null?void 0:y.walletBalances)??{};try{const v=localStorage.getItem("shiftStartDrawerFunds"),I=localStorage.getItem("shiftStartWalletBalances"),D=v?parseFloat(v):0,O=I?JSON.parse(I):{},V=!v||!Number.isFinite(D)||D===0,S=!I||Object.keys(O||{}).length===0;V&&localStorage.setItem("shiftStartDrawerFunds",String(Number.isFinite(E)?E:0)),S&&localStorage.setItem("shiftStartWalletBalances",JSON.stringify(w||{}))}catch{}}}catch(f){console.warn("Shift start Firebase read failed:",f)}})()}catch{}},h=()=>{s(!1);try{localStorage.setItem("cashier_shift_active","false")}catch{}try{if(a!=null&&a.shopId){const p=ve(Q,"cashierShift",a.shopId);st(p,{isShiftActive:!1})}}catch{}};return x.jsx(SD.Provider,{value:{shiftUser:e,isShiftActive:r,shiftStartAt:i,setShiftUser:c,startShift:d,endShift:h},children:t})},q8=()=>{const t=A.useContext(SD);if(!t)throw new Error("useShift must be used within ShiftProvider");return t},bD=A.createContext(void 0);function f8({children:t}){const{profile:e,user:n,loading:r}=zi(),[s,i]=A.useState(null),[o,a]=A.useState(null),[l,c]=A.useState(!0);A.useEffect(()=>{!r&&e?(i(e.shopId),a((e==null?void 0:e.shopName)||(n==null?void 0:n.displayName)||""),c(!1)):r||c(!1)},[e,r]);const d={shopId:s,shopName:o,loading:l};return x.jsx(bD.Provider,{value:d,children:t})}function H8(){const t=A.useContext(bD);return t===void 0?{shopId:null,shopName:null,loading:!1}:t}try{const t=navigator.userAgent||navigator.vendor||"",e=/iPad|iPhone|iPod/.test(t),n=document.documentElement;n&&(n.classList.toggle("ios",e),n.classList.toggle("android",!e))}catch{}try{ID()}catch{}const p8=()=>{const{theme:t="system"}=Vx();return A.useEffect(()=>{try{const e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,n=t==="system"?e?"dark":"light":t;document.documentElement.setAttribute("data-theme",n||"light"),document.documentElement.classList.toggle("dark",n==="dark")}catch{}},[t]),null};H1(document.getElementById("root")).render(x.jsx(TL,{attribute:"class",defaultTheme:"system",enableSystem:!0,storageKey:"theme",children:x.jsx(kz,{children:x.jsx(h8,{children:x.jsxs(f8,{children:[x.jsx(d8,{}),x.jsx(p8,{})]})})})}));export{Zr as $,TV as A,kP as B,SV as C,qh as D,AV as E,nE as F,ej as G,Bi as H,jy as I,ot as J,St as K,mU as L,kV as M,I8 as N,st as O,z8 as P,mz as Q,z as R,NV as S,D8 as T,LV as U,C8 as V,k8 as W,R8 as X,Iv as Y,Rs as Z,Ex as _,Zu as a,Ci as a$,wD as a0,je as a1,wp as a2,DO as a3,Rn as a4,Ct as a5,Ir as a6,GO as a7,Ri as a8,OV as a9,fF as aA,Vl as aB,A8 as aC,SO as aD,H8 as aE,F9 as aF,bz as aG,PV as aH,MV as aI,Mn as aJ,b8 as aK,Vx as aL,TD as aM,DV as aN,M8 as aO,F8 as aP,U8 as aQ,Rz as aR,B8 as aS,qz as aT,Qx as aU,v8 as aV,wF as aW,Q1 as aX,EF as aY,TF as aZ,K1 as a_,Oe as aa,zh as ab,q8 as ac,ED as ad,Te as ae,aT as af,IV as ag,zk as ah,dh as ai,uT as aj,$T as ak,se as al,_z as am,be as an,Sz as ao,cT as ap,bV as aq,L8 as ar,w_ as as,Z1 as at,gf as au,__ as av,g8 as aw,Sx as ax,vD as ay,U9 as az,S8 as b,XO as b0,Yu as b1,ng as b2,EV as b3,x8 as b4,VV as b5,V8 as b6,Bb as b7,yD as b8,Qz as b9,PO as ba,vU as bb,Az as bc,Hz as bd,$8 as be,Ig as bf,Pg as bg,N8 as bh,j8 as bi,W1 as c,Yn as d,ye as e,Q as f,Ne as g,Gk as h,tE as i,x as j,$i as k,Yo as l,lT as m,CV as n,ps as o,xV as p,Re as q,A as r,Ae as s,Z3 as t,zi as u,ve as v,ep as w,It as x,O8 as y,xz as z};
