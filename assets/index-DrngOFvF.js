const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/profitService-xetwzlHl.js","assets/reportsService-DWGLkpDh.js","assets/LandingPage-B4QhjAVz.js","assets/button-YNAkBgVC.js","assets/card-nbmFm-Ng.js","assets/NotificationBell-D7pD50jw.js","assets/dropdown-menu-D0gDY9Y2.js","assets/index-1sDXlYlI.js","assets/Combination-V1CW0cHK.js","assets/index-PO1sd8n3.js","assets/dialog-6opNDO2A.js","assets/input-2iLObn1n.js","assets/label-CsupWXQj.js","assets/MasterPinDialog-DnQgETG5.js","assets/shield-DD6WB2DA.js","assets/eye-BrdmrTma.js","assets/circle-alert-fgES2gMt.js","assets/lock-CV5wKfS7.js","assets/avatars-Dvz5dNDJ.js","assets/broadcastService-BOXliGKJ.js","assets/circle-check-big-Bctjnzsb.js","assets/whatsappService-B4YetA1T.js","assets/appDownloadService-0dmfic48.js","assets/index.esm-BCAJqCIY.js","assets/smartphone-7UXemd9G.js","assets/arrow-left-DGAkSWWA.js","assets/sparkles-CogEVevs.js","assets/star-0Weso71r.js","assets/crown-Ba-MXjnE.js","assets/zap-CZDXVjlR.js","assets/chart-column-DRU8oyVi.js","assets/SubscriptionsPage-CXcF3s_t.js","assets/contentService-Bavye6Z9.js","assets/calendar-CHdHc97j.js","assets/AuthPage-CuXqdrNo.js","assets/TopUpPage-CEvLIUKf.js","assets/select-CJqhdlLE.js","assets/index-Dgw_I_JS.js","assets/AdminTopupsPage-Cim01p_H.js","assets/UserLoginPage-ColjSGV7.js","assets/user-DXWVOGrb.js","assets/mail-Dz8Pedpx.js","assets/arrow-right-DIAaQnFa.js","assets/UserRegisterPage-BWPRrE4x.js","assets/alert-B-7RizsR.js","assets/wallet-DeOqxz-7.js","assets/user-plus-CeNe9CZN.js","assets/share-2-noH613nt.js","assets/phone-BisrsVjY.js","assets/store-CvWYgK4g.js","assets/UserAccountSetupPage-Tzwprdzi.js","assets/ForgotPasswordCodePage-L2V2uv8f.js","assets/DashboardLoginPage-WFuWU-a1.js","assets/ProtectedDashboard-TFhaAYb-.js","assets/badge-Dn1Ld-PQ.js","assets/dollar-sign-BYH5B-_j.js","assets/circle-x-F_1Bdx7u.js","assets/ProtectedUserDashboard-C5JoG8an.js","assets/link-CL3ais47.js","assets/MerchantDashboard-B4A608oI.js","assets/WalletsManagement-zPWy0txt.js","assets/progress-B0MbFVWP.js","assets/walletDailyLimitsService-BrCaUkqg.js","assets/square-pen-BdPoWemv.js","assets/PendingApprovalPage-CxLnI5yo.js","assets/gift-CZxlRJob.js","assets/refresh-cw-DdxWHvFJ.js","assets/AdminLogin-jd5VUhvL.js","assets/ProtectedAdminDashboard-yFgaNskt.js","assets/switch-Clfwct4_.js","assets/separator-BeGY2jP3.js","assets/copy-Bion4crG.js","assets/users-BOnRHgxZ.js","assets/activity-BvdB01xe.js","assets/AuthTestPage-BguYV6PG.js","assets/ProfileSettingsPage-DxPmbpcE.js","assets/minus-MYnCm_XA.js","assets/TransactionsPage-DCdWedlB.js","assets/PasswordConfirmDialog-Brk_cjJT.js","assets/WalletAdditionPage-BzvjdHjE.js","assets/ReferralsPage-CCHQ_kXM.js","assets/CPanelPage-g_o-1qs7.js","assets/CPanelLoginPage-RV36aAWk.js"])))=>i.map(i=>d[i]);
var Pk=Object.defineProperty;var f0=t=>{throw TypeError(t)};var xk=(t,e,n)=>e in t?Pk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var p0=(t,e,n)=>xk(t,typeof e!="symbol"?e+"":e,n),om=(t,e,n)=>e.has(t)||f0("Cannot "+n);var $=(t,e,n)=>(om(t,e,"read from private field"),n?n.call(t):e.get(t)),xe=(t,e,n)=>e.has(t)?f0("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),fe=(t,e,n,r)=>(om(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Ft=(t,e,n)=>(om(t,e,"access private method"),n);var vd=(t,e,n,r)=>({set _(i){fe(t,e,i,n)},get _(){return $(t,e,r)}});function bk(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function x1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var b1={exports:{}},Ff={},R1={exports:{}},ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xu=Symbol.for("react.element"),Rk=Symbol.for("react.portal"),Ck=Symbol.for("react.fragment"),kk=Symbol.for("react.strict_mode"),Dk=Symbol.for("react.profiler"),Nk=Symbol.for("react.provider"),Ok=Symbol.for("react.context"),Vk=Symbol.for("react.forward_ref"),Mk=Symbol.for("react.suspense"),Lk=Symbol.for("react.memo"),Fk=Symbol.for("react.lazy"),m0=Symbol.iterator;function Uk(t){return t===null||typeof t!="object"?null:(t=m0&&t[m0]||t["@@iterator"],typeof t=="function"?t:null)}var C1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k1=Object.assign,D1={};function vl(t,e,n){this.props=t,this.context=e,this.refs=D1,this.updater=n||C1}vl.prototype.isReactComponent={};vl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};vl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function N1(){}N1.prototype=vl.prototype;function tv(t,e,n){this.props=t,this.context=e,this.refs=D1,this.updater=n||C1}var nv=tv.prototype=new N1;nv.constructor=tv;k1(nv,vl.prototype);nv.isPureReactComponent=!0;var g0=Array.isArray,O1=Object.prototype.hasOwnProperty,rv={current:null},V1={key:!0,ref:!0,__self:!0,__source:!0};function M1(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)O1.call(e,r)&&!V1.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:xu,type:t,key:s,ref:o,props:i,_owner:rv.current}}function jk(t,e){return{$$typeof:xu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function iv(t){return typeof t=="object"&&t!==null&&t.$$typeof===xu}function Bk(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var y0=/\/+/g;function am(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Bk(""+t.key):e.toString(36)}function Yd(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case xu:case Rk:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+am(o,0):r,g0(i)?(n="",t!=null&&(n=t.replace(y0,"$&/")+"/"),Yd(i,e,n,"",function(u){return u})):i!=null&&(iv(i)&&(i=jk(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(y0,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",g0(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+am(s,a);o+=Yd(s,e,n,l,i)}else if(l=Uk(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+am(s,a++),o+=Yd(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function _d(t,e,n){if(t==null)return t;var r=[],i=0;return Yd(t,r,"","",function(s){return e.call(n,s,i++)}),r}function $k(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var sn={current:null},Jd={transition:null},zk={ReactCurrentDispatcher:sn,ReactCurrentBatchConfig:Jd,ReactCurrentOwner:rv};function L1(){throw Error("act(...) is not supported in production builds of React.")}ye.Children={map:_d,forEach:function(t,e,n){_d(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return _d(t,function(){e++}),e},toArray:function(t){return _d(t,function(e){return e})||[]},only:function(t){if(!iv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ye.Component=vl;ye.Fragment=Ck;ye.Profiler=Dk;ye.PureComponent=tv;ye.StrictMode=kk;ye.Suspense=Mk;ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zk;ye.act=L1;ye.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=k1({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=rv.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)O1.call(e,l)&&!V1.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:xu,type:t.type,key:i,ref:s,props:r,_owner:o}};ye.createContext=function(t){return t={$$typeof:Ok,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Nk,_context:t},t.Consumer=t};ye.createElement=M1;ye.createFactory=function(t){var e=M1.bind(null,t);return e.type=t,e};ye.createRef=function(){return{current:null}};ye.forwardRef=function(t){return{$$typeof:Vk,render:t}};ye.isValidElement=iv;ye.lazy=function(t){return{$$typeof:Fk,_payload:{_status:-1,_result:t},_init:$k}};ye.memo=function(t,e){return{$$typeof:Lk,type:t,compare:e===void 0?null:e}};ye.startTransition=function(t){var e=Jd.transition;Jd.transition={};try{t()}finally{Jd.transition=e}};ye.unstable_act=L1;ye.useCallback=function(t,e){return sn.current.useCallback(t,e)};ye.useContext=function(t){return sn.current.useContext(t)};ye.useDebugValue=function(){};ye.useDeferredValue=function(t){return sn.current.useDeferredValue(t)};ye.useEffect=function(t,e){return sn.current.useEffect(t,e)};ye.useId=function(){return sn.current.useId()};ye.useImperativeHandle=function(t,e,n){return sn.current.useImperativeHandle(t,e,n)};ye.useInsertionEffect=function(t,e){return sn.current.useInsertionEffect(t,e)};ye.useLayoutEffect=function(t,e){return sn.current.useLayoutEffect(t,e)};ye.useMemo=function(t,e){return sn.current.useMemo(t,e)};ye.useReducer=function(t,e,n){return sn.current.useReducer(t,e,n)};ye.useRef=function(t){return sn.current.useRef(t)};ye.useState=function(t){return sn.current.useState(t)};ye.useSyncExternalStore=function(t,e,n){return sn.current.useSyncExternalStore(t,e,n)};ye.useTransition=function(){return sn.current.useTransition()};ye.version="18.3.1";R1.exports=ye;var b=R1.exports;const z=x1(b),F1=bk({__proto__:null,default:z},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qk=b,Wk=Symbol.for("react.element"),Hk=Symbol.for("react.fragment"),Kk=Object.prototype.hasOwnProperty,Gk=qk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Qk={key:!0,ref:!0,__self:!0,__source:!0};function U1(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Kk.call(e,r)&&!Qk.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Wk,type:t,key:s,ref:o,props:i,_owner:Gk.current}}Ff.Fragment=Hk;Ff.jsx=U1;Ff.jsxs=U1;b1.exports=Ff;var N=b1.exports,j1={exports:{}},Vn={},B1={exports:{}},$1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,F){var H=B.length;B.push(F);e:for(;0<H;){var ae=H-1>>>1,X=B[ae];if(0<i(X,F))B[ae]=F,B[H]=X,H=ae;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var F=B[0],H=B.pop();if(H!==F){B[0]=H;e:for(var ae=0,X=B.length,Z=X>>>1;ae<Z;){var ce=2*(ae+1)-1,we=B[ce],Le=ce+1,me=B[Le];if(0>i(we,H))Le<X&&0>i(me,we)?(B[ae]=me,B[Le]=H,ae=Le):(B[ae]=we,B[ce]=H,ae=ce);else if(Le<X&&0>i(me,H))B[ae]=me,B[Le]=H,ae=Le;else break e}}return F}function i(B,F){var H=B.sortIndex-F.sortIndex;return H!==0?H:B.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,h=null,p=3,m=!1,E=!1,y=!1,S=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(B){for(var F=n(u);F!==null;){if(F.callback===null)r(u);else if(F.startTime<=B)r(u),F.sortIndex=F.expirationTime,e(l,F);else break;F=n(u)}}function D(B){if(y=!1,I(B),!E)if(n(l)!==null)E=!0,se(O);else{var F=n(u);F!==null&&G(D,F.startTime-B)}}function O(B,F){E=!1,y&&(y=!1,_(w),w=-1),m=!0;var H=p;try{for(I(F),h=n(l);h!==null&&(!(h.expirationTime>F)||B&&!C());){var ae=h.callback;if(typeof ae=="function"){h.callback=null,p=h.priorityLevel;var X=ae(h.expirationTime<=F);F=t.unstable_now(),typeof X=="function"?h.callback=X:h===n(l)&&r(l),I(F)}else r(l);h=n(l)}if(h!==null)var Z=!0;else{var ce=n(u);ce!==null&&G(D,ce.startTime-F),Z=!1}return Z}finally{h=null,p=H,m=!1}}var V=!1,T=null,w=-1,P=5,x=-1;function C(){return!(t.unstable_now()-x<P)}function k(){if(T!==null){var B=t.unstable_now();x=B;var F=!0;try{F=T(!0,B)}finally{F?R():(V=!1,T=null)}}else V=!1}var R;if(typeof v=="function")R=function(){v(k)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,le=W.port2;W.port1.onmessage=k,R=function(){le.postMessage(null)}}else R=function(){S(k,0)};function se(B){T=B,V||(V=!0,R())}function G(B,F){w=S(function(){B(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){E||m||(E=!0,se(O))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(B){switch(p){case 1:case 2:case 3:var F=3;break;default:F=p}var H=p;p=F;try{return B()}finally{p=H}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,F){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var H=p;p=B;try{return F()}finally{p=H}},t.unstable_scheduleCallback=function(B,F,H){var ae=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?ae+H:ae):H=ae,B){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=H+X,B={id:d++,callback:F,priorityLevel:B,startTime:H,expirationTime:X,sortIndex:-1},H>ae?(B.sortIndex=H,e(u,B),n(l)===null&&B===n(u)&&(y?(_(w),w=-1):y=!0,G(D,H-ae))):(B.sortIndex=X,e(l,B),E||m||(E=!0,se(O))),B},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(B){var F=p;return function(){var H=p;p=F;try{return B.apply(this,arguments)}finally{p=H}}}})($1);B1.exports=$1;var Yk=B1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jk=b,Nn=Yk;function K(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var z1=new Set,Bc={};function Uo(t,e){$a(t,e),$a(t+"Capture",e)}function $a(t,e){for(Bc[t]=e,t=0;t<e.length;t++)z1.add(e[t])}var li=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cg=Object.prototype.hasOwnProperty,Xk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v0={},_0={};function Zk(t){return cg.call(_0,t)?!0:cg.call(v0,t)?!1:Xk.test(t)?_0[t]=!0:(v0[t]=!0,!1)}function eD(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function tD(t,e,n,r){if(e===null||typeof e>"u"||eD(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function on(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Vt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Vt[t]=new on(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Vt[e]=new on(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Vt[t]=new on(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Vt[t]=new on(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Vt[t]=new on(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Vt[t]=new on(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Vt[t]=new on(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Vt[t]=new on(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Vt[t]=new on(t,5,!1,t.toLowerCase(),null,!1,!1)});var sv=/[\-:]([a-z])/g;function ov(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(sv,ov);Vt[e]=new on(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(sv,ov);Vt[e]=new on(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(sv,ov);Vt[e]=new on(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Vt[t]=new on(t,1,!1,t.toLowerCase(),null,!1,!1)});Vt.xlinkHref=new on("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Vt[t]=new on(t,1,!1,t.toLowerCase(),null,!0,!0)});function av(t,e,n,r){var i=Vt.hasOwnProperty(e)?Vt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(tD(e,n,i,r)&&(n=null),r||i===null?Zk(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var vi=Jk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,wd=Symbol.for("react.element"),ca=Symbol.for("react.portal"),ua=Symbol.for("react.fragment"),lv=Symbol.for("react.strict_mode"),ug=Symbol.for("react.profiler"),q1=Symbol.for("react.provider"),W1=Symbol.for("react.context"),cv=Symbol.for("react.forward_ref"),dg=Symbol.for("react.suspense"),hg=Symbol.for("react.suspense_list"),uv=Symbol.for("react.memo"),Li=Symbol.for("react.lazy"),H1=Symbol.for("react.offscreen"),w0=Symbol.iterator;function Gl(t){return t===null||typeof t!="object"?null:(t=w0&&t[w0]||t["@@iterator"],typeof t=="function"?t:null)}var it=Object.assign,lm;function cc(t){if(lm===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);lm=e&&e[1]||""}return`
`+lm+t}var cm=!1;function um(t,e){if(!t||cm)return"";cm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{cm=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?cc(t):""}function nD(t){switch(t.tag){case 5:return cc(t.type);case 16:return cc("Lazy");case 13:return cc("Suspense");case 19:return cc("SuspenseList");case 0:case 2:case 15:return t=um(t.type,!1),t;case 11:return t=um(t.type.render,!1),t;case 1:return t=um(t.type,!0),t;default:return""}}function fg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ua:return"Fragment";case ca:return"Portal";case ug:return"Profiler";case lv:return"StrictMode";case dg:return"Suspense";case hg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case W1:return(t.displayName||"Context")+".Consumer";case q1:return(t._context.displayName||"Context")+".Provider";case cv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case uv:return e=t.displayName||null,e!==null?e:fg(t.type)||"Memo";case Li:e=t._payload,t=t._init;try{return fg(t(e))}catch{}}return null}function rD(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fg(e);case 8:return e===lv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ms(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function K1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function iD(t){var e=K1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ed(t){t._valueTracker||(t._valueTracker=iD(t))}function G1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=K1(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function xh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function pg(t,e){var n=e.checked;return it({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function E0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ms(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Q1(t,e){e=e.checked,e!=null&&av(t,"checked",e,!1)}function mg(t,e){Q1(t,e);var n=ms(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?gg(t,e.type,n):e.hasOwnProperty("defaultValue")&&gg(t,e.type,ms(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function T0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function gg(t,e,n){(e!=="number"||xh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var uc=Array.isArray;function Ta(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ms(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function yg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(K(91));return it({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function I0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(K(92));if(uc(n)){if(1<n.length)throw Error(K(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ms(n)}}function Y1(t,e){var n=ms(e.value),r=ms(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function S0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function J1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?J1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Td,X1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Td=Td||document.createElement("div"),Td.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Td.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function $c(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var _c={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sD=["Webkit","ms","Moz","O"];Object.keys(_c).forEach(function(t){sD.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),_c[e]=_c[t]})});function Z1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||_c.hasOwnProperty(t)&&_c[t]?(""+e).trim():e+"px"}function eS(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Z1(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var oD=it({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _g(t,e){if(e){if(oD[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(K(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(K(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(K(61))}if(e.style!=null&&typeof e.style!="object")throw Error(K(62))}}function wg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Eg=null;function dv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Tg=null,Ia=null,Sa=null;function A0(t){if(t=Cu(t)){if(typeof Tg!="function")throw Error(K(280));var e=t.stateNode;e&&(e=zf(e),Tg(t.stateNode,t.type,e))}}function tS(t){Ia?Sa?Sa.push(t):Sa=[t]:Ia=t}function nS(){if(Ia){var t=Ia,e=Sa;if(Sa=Ia=null,A0(t),e)for(t=0;t<e.length;t++)A0(e[t])}}function rS(t,e){return t(e)}function iS(){}var dm=!1;function sS(t,e,n){if(dm)return t(e,n);dm=!0;try{return rS(t,e,n)}finally{dm=!1,(Ia!==null||Sa!==null)&&(iS(),nS())}}function zc(t,e){var n=t.stateNode;if(n===null)return null;var r=zf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(K(231,e,typeof n));return n}var Ig=!1;if(li)try{var Ql={};Object.defineProperty(Ql,"passive",{get:function(){Ig=!0}}),window.addEventListener("test",Ql,Ql),window.removeEventListener("test",Ql,Ql)}catch{Ig=!1}function aD(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var wc=!1,bh=null,Rh=!1,Sg=null,lD={onError:function(t){wc=!0,bh=t}};function cD(t,e,n,r,i,s,o,a,l){wc=!1,bh=null,aD.apply(lD,arguments)}function uD(t,e,n,r,i,s,o,a,l){if(cD.apply(this,arguments),wc){if(wc){var u=bh;wc=!1,bh=null}else throw Error(K(198));Rh||(Rh=!0,Sg=u)}}function jo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function oS(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function P0(t){if(jo(t)!==t)throw Error(K(188))}function dD(t){var e=t.alternate;if(!e){if(e=jo(t),e===null)throw Error(K(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return P0(i),t;if(s===r)return P0(i),e;s=s.sibling}throw Error(K(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(K(189))}}if(n.alternate!==r)throw Error(K(190))}if(n.tag!==3)throw Error(K(188));return n.stateNode.current===n?t:e}function aS(t){return t=dD(t),t!==null?lS(t):null}function lS(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=lS(t);if(e!==null)return e;t=t.sibling}return null}var cS=Nn.unstable_scheduleCallback,x0=Nn.unstable_cancelCallback,hD=Nn.unstable_shouldYield,fD=Nn.unstable_requestPaint,ht=Nn.unstable_now,pD=Nn.unstable_getCurrentPriorityLevel,hv=Nn.unstable_ImmediatePriority,uS=Nn.unstable_UserBlockingPriority,Ch=Nn.unstable_NormalPriority,mD=Nn.unstable_LowPriority,dS=Nn.unstable_IdlePriority,Uf=null,Rr=null;function gD(t){if(Rr&&typeof Rr.onCommitFiberRoot=="function")try{Rr.onCommitFiberRoot(Uf,t,void 0,(t.current.flags&128)===128)}catch{}}var sr=Math.clz32?Math.clz32:_D,yD=Math.log,vD=Math.LN2;function _D(t){return t>>>=0,t===0?32:31-(yD(t)/vD|0)|0}var Id=64,Sd=4194304;function dc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function kh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=dc(a):(s&=o,s!==0&&(r=dc(s)))}else o=n&~i,o!==0?r=dc(o):s!==0&&(r=dc(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-sr(e),i=1<<n,r|=t[n],e&=~i;return r}function wD(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ED(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-sr(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=wD(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Ag(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function hS(){var t=Id;return Id<<=1,!(Id&4194240)&&(Id=64),t}function hm(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function bu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-sr(e),t[e]=n}function TD(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-sr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function fv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-sr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ve=0;function fS(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var pS,pv,mS,gS,yS,Pg=!1,Ad=[],ts=null,ns=null,rs=null,qc=new Map,Wc=new Map,Ui=[],ID="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function b0(t,e){switch(t){case"focusin":case"focusout":ts=null;break;case"dragenter":case"dragleave":ns=null;break;case"mouseover":case"mouseout":rs=null;break;case"pointerover":case"pointerout":qc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wc.delete(e.pointerId)}}function Yl(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Cu(e),e!==null&&pv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function SD(t,e,n,r,i){switch(e){case"focusin":return ts=Yl(ts,t,e,n,r,i),!0;case"dragenter":return ns=Yl(ns,t,e,n,r,i),!0;case"mouseover":return rs=Yl(rs,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return qc.set(s,Yl(qc.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Wc.set(s,Yl(Wc.get(s)||null,t,e,n,r,i)),!0}return!1}function vS(t){var e=oo(t.target);if(e!==null){var n=jo(e);if(n!==null){if(e=n.tag,e===13){if(e=oS(n),e!==null){t.blockedOn=e,yS(t.priority,function(){mS(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Xd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=xg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Eg=r,n.target.dispatchEvent(r),Eg=null}else return e=Cu(n),e!==null&&pv(e),t.blockedOn=n,!1;e.shift()}return!0}function R0(t,e,n){Xd(t)&&n.delete(e)}function AD(){Pg=!1,ts!==null&&Xd(ts)&&(ts=null),ns!==null&&Xd(ns)&&(ns=null),rs!==null&&Xd(rs)&&(rs=null),qc.forEach(R0),Wc.forEach(R0)}function Jl(t,e){t.blockedOn===e&&(t.blockedOn=null,Pg||(Pg=!0,Nn.unstable_scheduleCallback(Nn.unstable_NormalPriority,AD)))}function Hc(t){function e(i){return Jl(i,t)}if(0<Ad.length){Jl(Ad[0],t);for(var n=1;n<Ad.length;n++){var r=Ad[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ts!==null&&Jl(ts,t),ns!==null&&Jl(ns,t),rs!==null&&Jl(rs,t),qc.forEach(e),Wc.forEach(e),n=0;n<Ui.length;n++)r=Ui[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ui.length&&(n=Ui[0],n.blockedOn===null);)vS(n),n.blockedOn===null&&Ui.shift()}var Aa=vi.ReactCurrentBatchConfig,Dh=!0;function PD(t,e,n,r){var i=Ve,s=Aa.transition;Aa.transition=null;try{Ve=1,mv(t,e,n,r)}finally{Ve=i,Aa.transition=s}}function xD(t,e,n,r){var i=Ve,s=Aa.transition;Aa.transition=null;try{Ve=4,mv(t,e,n,r)}finally{Ve=i,Aa.transition=s}}function mv(t,e,n,r){if(Dh){var i=xg(t,e,n,r);if(i===null)Tm(t,e,r,Nh,n),b0(t,r);else if(SD(i,t,e,n,r))r.stopPropagation();else if(b0(t,r),e&4&&-1<ID.indexOf(t)){for(;i!==null;){var s=Cu(i);if(s!==null&&pS(s),s=xg(t,e,n,r),s===null&&Tm(t,e,r,Nh,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Tm(t,e,r,null,n)}}var Nh=null;function xg(t,e,n,r){if(Nh=null,t=dv(r),t=oo(t),t!==null)if(e=jo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=oS(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Nh=t,null}function _S(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(pD()){case hv:return 1;case uS:return 4;case Ch:case mD:return 16;case dS:return 536870912;default:return 16}default:return 16}}var Ji=null,gv=null,Zd=null;function wS(){if(Zd)return Zd;var t,e=gv,n=e.length,r,i="value"in Ji?Ji.value:Ji.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Zd=i.slice(t,1<r?1-r:void 0)}function eh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Pd(){return!0}function C0(){return!1}function Mn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Pd:C0,this.isPropagationStopped=C0,this}return it(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Pd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Pd)},persist:function(){},isPersistent:Pd}),e}var _l={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yv=Mn(_l),Ru=it({},_l,{view:0,detail:0}),bD=Mn(Ru),fm,pm,Xl,jf=it({},Ru,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Xl&&(Xl&&t.type==="mousemove"?(fm=t.screenX-Xl.screenX,pm=t.screenY-Xl.screenY):pm=fm=0,Xl=t),fm)},movementY:function(t){return"movementY"in t?t.movementY:pm}}),k0=Mn(jf),RD=it({},jf,{dataTransfer:0}),CD=Mn(RD),kD=it({},Ru,{relatedTarget:0}),mm=Mn(kD),DD=it({},_l,{animationName:0,elapsedTime:0,pseudoElement:0}),ND=Mn(DD),OD=it({},_l,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),VD=Mn(OD),MD=it({},_l,{data:0}),D0=Mn(MD),LD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},FD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},UD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jD(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=UD[t])?!!e[t]:!1}function vv(){return jD}var BD=it({},Ru,{key:function(t){if(t.key){var e=LD[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=eh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?FD[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vv,charCode:function(t){return t.type==="keypress"?eh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?eh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),$D=Mn(BD),zD=it({},jf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),N0=Mn(zD),qD=it({},Ru,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vv}),WD=Mn(qD),HD=it({},_l,{propertyName:0,elapsedTime:0,pseudoElement:0}),KD=Mn(HD),GD=it({},jf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),QD=Mn(GD),YD=[9,13,27,32],_v=li&&"CompositionEvent"in window,Ec=null;li&&"documentMode"in document&&(Ec=document.documentMode);var JD=li&&"TextEvent"in window&&!Ec,ES=li&&(!_v||Ec&&8<Ec&&11>=Ec),O0=" ",V0=!1;function TS(t,e){switch(t){case"keyup":return YD.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function IS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var da=!1;function XD(t,e){switch(t){case"compositionend":return IS(e);case"keypress":return e.which!==32?null:(V0=!0,O0);case"textInput":return t=e.data,t===O0&&V0?null:t;default:return null}}function ZD(t,e){if(da)return t==="compositionend"||!_v&&TS(t,e)?(t=wS(),Zd=gv=Ji=null,da=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ES&&e.locale!=="ko"?null:e.data;default:return null}}var eN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function M0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!eN[t.type]:e==="textarea"}function SS(t,e,n,r){tS(r),e=Oh(e,"onChange"),0<e.length&&(n=new yv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Tc=null,Kc=null;function tN(t){VS(t,0)}function Bf(t){var e=pa(t);if(G1(e))return t}function nN(t,e){if(t==="change")return e}var AS=!1;if(li){var gm;if(li){var ym="oninput"in document;if(!ym){var L0=document.createElement("div");L0.setAttribute("oninput","return;"),ym=typeof L0.oninput=="function"}gm=ym}else gm=!1;AS=gm&&(!document.documentMode||9<document.documentMode)}function F0(){Tc&&(Tc.detachEvent("onpropertychange",PS),Kc=Tc=null)}function PS(t){if(t.propertyName==="value"&&Bf(Kc)){var e=[];SS(e,Kc,t,dv(t)),sS(tN,e)}}function rN(t,e,n){t==="focusin"?(F0(),Tc=e,Kc=n,Tc.attachEvent("onpropertychange",PS)):t==="focusout"&&F0()}function iN(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Bf(Kc)}function sN(t,e){if(t==="click")return Bf(e)}function oN(t,e){if(t==="input"||t==="change")return Bf(e)}function aN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ur=typeof Object.is=="function"?Object.is:aN;function Gc(t,e){if(ur(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!cg.call(e,i)||!ur(t[i],e[i]))return!1}return!0}function U0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function j0(t,e){var n=U0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=U0(n)}}function xS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?xS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function bS(){for(var t=window,e=xh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=xh(t.document)}return e}function wv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function lN(t){var e=bS(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&xS(n.ownerDocument.documentElement,n)){if(r!==null&&wv(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=j0(n,s);var o=j0(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var cN=li&&"documentMode"in document&&11>=document.documentMode,ha=null,bg=null,Ic=null,Rg=!1;function B0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Rg||ha==null||ha!==xh(r)||(r=ha,"selectionStart"in r&&wv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ic&&Gc(Ic,r)||(Ic=r,r=Oh(bg,"onSelect"),0<r.length&&(e=new yv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ha)))}function xd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var fa={animationend:xd("Animation","AnimationEnd"),animationiteration:xd("Animation","AnimationIteration"),animationstart:xd("Animation","AnimationStart"),transitionend:xd("Transition","TransitionEnd")},vm={},RS={};li&&(RS=document.createElement("div").style,"AnimationEvent"in window||(delete fa.animationend.animation,delete fa.animationiteration.animation,delete fa.animationstart.animation),"TransitionEvent"in window||delete fa.transitionend.transition);function $f(t){if(vm[t])return vm[t];if(!fa[t])return t;var e=fa[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in RS)return vm[t]=e[n];return t}var CS=$f("animationend"),kS=$f("animationiteration"),DS=$f("animationstart"),NS=$f("transitionend"),OS=new Map,$0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rs(t,e){OS.set(t,e),Uo(e,[t])}for(var _m=0;_m<$0.length;_m++){var wm=$0[_m],uN=wm.toLowerCase(),dN=wm[0].toUpperCase()+wm.slice(1);Rs(uN,"on"+dN)}Rs(CS,"onAnimationEnd");Rs(kS,"onAnimationIteration");Rs(DS,"onAnimationStart");Rs("dblclick","onDoubleClick");Rs("focusin","onFocus");Rs("focusout","onBlur");Rs(NS,"onTransitionEnd");$a("onMouseEnter",["mouseout","mouseover"]);$a("onMouseLeave",["mouseout","mouseover"]);$a("onPointerEnter",["pointerout","pointerover"]);$a("onPointerLeave",["pointerout","pointerover"]);Uo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Uo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Uo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Uo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Uo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Uo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hN=new Set("cancel close invalid load scroll toggle".split(" ").concat(hc));function z0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,uD(r,e,void 0,t),t.currentTarget=null}function VS(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;z0(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;z0(i,a,u),s=l}}}if(Rh)throw t=Sg,Rh=!1,Sg=null,t}function We(t,e){var n=e[Og];n===void 0&&(n=e[Og]=new Set);var r=t+"__bubble";n.has(r)||(MS(e,t,2,!1),n.add(r))}function Em(t,e,n){var r=0;e&&(r|=4),MS(n,t,r,e)}var bd="_reactListening"+Math.random().toString(36).slice(2);function Qc(t){if(!t[bd]){t[bd]=!0,z1.forEach(function(n){n!=="selectionchange"&&(hN.has(n)||Em(n,!1,t),Em(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[bd]||(e[bd]=!0,Em("selectionchange",!1,e))}}function MS(t,e,n,r){switch(_S(e)){case 1:var i=PD;break;case 4:i=xD;break;default:i=mv}n=i.bind(null,e,n,t),i=void 0,!Ig||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Tm(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=oo(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}sS(function(){var u=s,d=dv(n),h=[];e:{var p=OS.get(t);if(p!==void 0){var m=yv,E=t;switch(t){case"keypress":if(eh(n)===0)break e;case"keydown":case"keyup":m=$D;break;case"focusin":E="focus",m=mm;break;case"focusout":E="blur",m=mm;break;case"beforeblur":case"afterblur":m=mm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=k0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=CD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=WD;break;case CS:case kS:case DS:m=ND;break;case NS:m=KD;break;case"scroll":m=bD;break;case"wheel":m=QD;break;case"copy":case"cut":case"paste":m=VD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=N0}var y=(e&4)!==0,S=!y&&t==="scroll",_=y?p!==null?p+"Capture":null:p;y=[];for(var v=u,I;v!==null;){I=v;var D=I.stateNode;if(I.tag===5&&D!==null&&(I=D,_!==null&&(D=zc(v,_),D!=null&&y.push(Yc(v,D,I)))),S)break;v=v.return}0<y.length&&(p=new m(p,E,null,n,d),h.push({event:p,listeners:y}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==Eg&&(E=n.relatedTarget||n.fromElement)&&(oo(E)||E[ci]))break e;if((m||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,m?(E=n.relatedTarget||n.toElement,m=u,E=E?oo(E):null,E!==null&&(S=jo(E),E!==S||E.tag!==5&&E.tag!==6)&&(E=null)):(m=null,E=u),m!==E)){if(y=k0,D="onMouseLeave",_="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(y=N0,D="onPointerLeave",_="onPointerEnter",v="pointer"),S=m==null?p:pa(m),I=E==null?p:pa(E),p=new y(D,v+"leave",m,n,d),p.target=S,p.relatedTarget=I,D=null,oo(d)===u&&(y=new y(_,v+"enter",E,n,d),y.target=I,y.relatedTarget=S,D=y),S=D,m&&E)t:{for(y=m,_=E,v=0,I=y;I;I=Jo(I))v++;for(I=0,D=_;D;D=Jo(D))I++;for(;0<v-I;)y=Jo(y),v--;for(;0<I-v;)_=Jo(_),I--;for(;v--;){if(y===_||_!==null&&y===_.alternate)break t;y=Jo(y),_=Jo(_)}y=null}else y=null;m!==null&&q0(h,p,m,y,!1),E!==null&&S!==null&&q0(h,S,E,y,!0)}}e:{if(p=u?pa(u):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var O=nN;else if(M0(p))if(AS)O=oN;else{O=iN;var V=rN}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(O=sN);if(O&&(O=O(t,u))){SS(h,O,n,d);break e}V&&V(t,p,u),t==="focusout"&&(V=p._wrapperState)&&V.controlled&&p.type==="number"&&gg(p,"number",p.value)}switch(V=u?pa(u):window,t){case"focusin":(M0(V)||V.contentEditable==="true")&&(ha=V,bg=u,Ic=null);break;case"focusout":Ic=bg=ha=null;break;case"mousedown":Rg=!0;break;case"contextmenu":case"mouseup":case"dragend":Rg=!1,B0(h,n,d);break;case"selectionchange":if(cN)break;case"keydown":case"keyup":B0(h,n,d)}var T;if(_v)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else da?TS(t,n)&&(w="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(ES&&n.locale!=="ko"&&(da||w!=="onCompositionStart"?w==="onCompositionEnd"&&da&&(T=wS()):(Ji=d,gv="value"in Ji?Ji.value:Ji.textContent,da=!0)),V=Oh(u,w),0<V.length&&(w=new D0(w,t,null,n,d),h.push({event:w,listeners:V}),T?w.data=T:(T=IS(n),T!==null&&(w.data=T)))),(T=JD?XD(t,n):ZD(t,n))&&(u=Oh(u,"onBeforeInput"),0<u.length&&(d=new D0("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=T))}VS(h,e)})}function Yc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Oh(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=zc(t,n),s!=null&&r.unshift(Yc(t,s,i)),s=zc(t,e),s!=null&&r.push(Yc(t,s,i))),t=t.return}return r}function Jo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function q0(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=zc(n,s),l!=null&&o.unshift(Yc(n,l,a))):i||(l=zc(n,s),l!=null&&o.push(Yc(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var fN=/\r\n?/g,pN=/\u0000|\uFFFD/g;function W0(t){return(typeof t=="string"?t:""+t).replace(fN,`
`).replace(pN,"")}function Rd(t,e,n){if(e=W0(e),W0(t)!==e&&n)throw Error(K(425))}function Vh(){}var Cg=null,kg=null;function Dg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ng=typeof setTimeout=="function"?setTimeout:void 0,mN=typeof clearTimeout=="function"?clearTimeout:void 0,H0=typeof Promise=="function"?Promise:void 0,gN=typeof queueMicrotask=="function"?queueMicrotask:typeof H0<"u"?function(t){return H0.resolve(null).then(t).catch(yN)}:Ng;function yN(t){setTimeout(function(){throw t})}function Im(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Hc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Hc(e)}function is(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function K0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var wl=Math.random().toString(36).slice(2),Ar="__reactFiber$"+wl,Jc="__reactProps$"+wl,ci="__reactContainer$"+wl,Og="__reactEvents$"+wl,vN="__reactListeners$"+wl,_N="__reactHandles$"+wl;function oo(t){var e=t[Ar];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ci]||n[Ar]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=K0(t);t!==null;){if(n=t[Ar])return n;t=K0(t)}return e}t=n,n=t.parentNode}return null}function Cu(t){return t=t[Ar]||t[ci],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function pa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(K(33))}function zf(t){return t[Jc]||null}var Vg=[],ma=-1;function Cs(t){return{current:t}}function He(t){0>ma||(t.current=Vg[ma],Vg[ma]=null,ma--)}function Be(t,e){ma++,Vg[ma]=t.current,t.current=e}var gs={},Yt=Cs(gs),yn=Cs(!1),Io=gs;function za(t,e){var n=t.type.contextTypes;if(!n)return gs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function vn(t){return t=t.childContextTypes,t!=null}function Mh(){He(yn),He(Yt)}function G0(t,e,n){if(Yt.current!==gs)throw Error(K(168));Be(Yt,e),Be(yn,n)}function LS(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(K(108,rD(t)||"Unknown",i));return it({},n,r)}function Lh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||gs,Io=Yt.current,Be(Yt,t),Be(yn,yn.current),!0}function Q0(t,e,n){var r=t.stateNode;if(!r)throw Error(K(169));n?(t=LS(t,e,Io),r.__reactInternalMemoizedMergedChildContext=t,He(yn),He(Yt),Be(Yt,t)):He(yn),Be(yn,n)}var Jr=null,qf=!1,Sm=!1;function FS(t){Jr===null?Jr=[t]:Jr.push(t)}function wN(t){qf=!0,FS(t)}function ks(){if(!Sm&&Jr!==null){Sm=!0;var t=0,e=Ve;try{var n=Jr;for(Ve=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Jr=null,qf=!1}catch(i){throw Jr!==null&&(Jr=Jr.slice(t+1)),cS(hv,ks),i}finally{Ve=e,Sm=!1}}return null}var ga=[],ya=0,Fh=null,Uh=0,jn=[],Bn=0,So=null,Zr=1,ei="";function Ys(t,e){ga[ya++]=Uh,ga[ya++]=Fh,Fh=t,Uh=e}function US(t,e,n){jn[Bn++]=Zr,jn[Bn++]=ei,jn[Bn++]=So,So=t;var r=Zr;t=ei;var i=32-sr(r)-1;r&=~(1<<i),n+=1;var s=32-sr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Zr=1<<32-sr(e)+i|n<<i|r,ei=s+t}else Zr=1<<s|n<<i|r,ei=t}function Ev(t){t.return!==null&&(Ys(t,1),US(t,1,0))}function Tv(t){for(;t===Fh;)Fh=ga[--ya],ga[ya]=null,Uh=ga[--ya],ga[ya]=null;for(;t===So;)So=jn[--Bn],jn[Bn]=null,ei=jn[--Bn],jn[Bn]=null,Zr=jn[--Bn],jn[Bn]=null}var Cn=null,bn=null,Ye=!1,nr=null;function jS(t,e){var n=$n(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Y0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Cn=t,bn=is(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Cn=t,bn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=So!==null?{id:Zr,overflow:ei}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=$n(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Cn=t,bn=null,!0):!1;default:return!1}}function Mg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Lg(t){if(Ye){var e=bn;if(e){var n=e;if(!Y0(t,e)){if(Mg(t))throw Error(K(418));e=is(n.nextSibling);var r=Cn;e&&Y0(t,e)?jS(r,n):(t.flags=t.flags&-4097|2,Ye=!1,Cn=t)}}else{if(Mg(t))throw Error(K(418));t.flags=t.flags&-4097|2,Ye=!1,Cn=t}}}function J0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Cn=t}function Cd(t){if(t!==Cn)return!1;if(!Ye)return J0(t),Ye=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Dg(t.type,t.memoizedProps)),e&&(e=bn)){if(Mg(t))throw BS(),Error(K(418));for(;e;)jS(t,e),e=is(e.nextSibling)}if(J0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(K(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){bn=is(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}bn=null}}else bn=Cn?is(t.stateNode.nextSibling):null;return!0}function BS(){for(var t=bn;t;)t=is(t.nextSibling)}function qa(){bn=Cn=null,Ye=!1}function Iv(t){nr===null?nr=[t]:nr.push(t)}var EN=vi.ReactCurrentBatchConfig;function Zl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(K(309));var r=n.stateNode}if(!r)throw Error(K(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(K(284));if(!n._owner)throw Error(K(290,t))}return t}function kd(t,e){throw t=Object.prototype.toString.call(e),Error(K(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function X0(t){var e=t._init;return e(t._payload)}function $S(t){function e(_,v){if(t){var I=_.deletions;I===null?(_.deletions=[v],_.flags|=16):I.push(v)}}function n(_,v){if(!t)return null;for(;v!==null;)e(_,v),v=v.sibling;return null}function r(_,v){for(_=new Map;v!==null;)v.key!==null?_.set(v.key,v):_.set(v.index,v),v=v.sibling;return _}function i(_,v){return _=ls(_,v),_.index=0,_.sibling=null,_}function s(_,v,I){return _.index=I,t?(I=_.alternate,I!==null?(I=I.index,I<v?(_.flags|=2,v):I):(_.flags|=2,v)):(_.flags|=1048576,v)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,v,I,D){return v===null||v.tag!==6?(v=km(I,_.mode,D),v.return=_,v):(v=i(v,I),v.return=_,v)}function l(_,v,I,D){var O=I.type;return O===ua?d(_,v,I.props.children,D,I.key):v!==null&&(v.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Li&&X0(O)===v.type)?(D=i(v,I.props),D.ref=Zl(_,v,I),D.return=_,D):(D=ah(I.type,I.key,I.props,null,_.mode,D),D.ref=Zl(_,v,I),D.return=_,D)}function u(_,v,I,D){return v===null||v.tag!==4||v.stateNode.containerInfo!==I.containerInfo||v.stateNode.implementation!==I.implementation?(v=Dm(I,_.mode,D),v.return=_,v):(v=i(v,I.children||[]),v.return=_,v)}function d(_,v,I,D,O){return v===null||v.tag!==7?(v=_o(I,_.mode,D,O),v.return=_,v):(v=i(v,I),v.return=_,v)}function h(_,v,I){if(typeof v=="string"&&v!==""||typeof v=="number")return v=km(""+v,_.mode,I),v.return=_,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case wd:return I=ah(v.type,v.key,v.props,null,_.mode,I),I.ref=Zl(_,null,v),I.return=_,I;case ca:return v=Dm(v,_.mode,I),v.return=_,v;case Li:var D=v._init;return h(_,D(v._payload),I)}if(uc(v)||Gl(v))return v=_o(v,_.mode,I,null),v.return=_,v;kd(_,v)}return null}function p(_,v,I,D){var O=v!==null?v.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return O!==null?null:a(_,v,""+I,D);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case wd:return I.key===O?l(_,v,I,D):null;case ca:return I.key===O?u(_,v,I,D):null;case Li:return O=I._init,p(_,v,O(I._payload),D)}if(uc(I)||Gl(I))return O!==null?null:d(_,v,I,D,null);kd(_,I)}return null}function m(_,v,I,D,O){if(typeof D=="string"&&D!==""||typeof D=="number")return _=_.get(I)||null,a(v,_,""+D,O);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case wd:return _=_.get(D.key===null?I:D.key)||null,l(v,_,D,O);case ca:return _=_.get(D.key===null?I:D.key)||null,u(v,_,D,O);case Li:var V=D._init;return m(_,v,I,V(D._payload),O)}if(uc(D)||Gl(D))return _=_.get(I)||null,d(v,_,D,O,null);kd(v,D)}return null}function E(_,v,I,D){for(var O=null,V=null,T=v,w=v=0,P=null;T!==null&&w<I.length;w++){T.index>w?(P=T,T=null):P=T.sibling;var x=p(_,T,I[w],D);if(x===null){T===null&&(T=P);break}t&&T&&x.alternate===null&&e(_,T),v=s(x,v,w),V===null?O=x:V.sibling=x,V=x,T=P}if(w===I.length)return n(_,T),Ye&&Ys(_,w),O;if(T===null){for(;w<I.length;w++)T=h(_,I[w],D),T!==null&&(v=s(T,v,w),V===null?O=T:V.sibling=T,V=T);return Ye&&Ys(_,w),O}for(T=r(_,T);w<I.length;w++)P=m(T,_,w,I[w],D),P!==null&&(t&&P.alternate!==null&&T.delete(P.key===null?w:P.key),v=s(P,v,w),V===null?O=P:V.sibling=P,V=P);return t&&T.forEach(function(C){return e(_,C)}),Ye&&Ys(_,w),O}function y(_,v,I,D){var O=Gl(I);if(typeof O!="function")throw Error(K(150));if(I=O.call(I),I==null)throw Error(K(151));for(var V=O=null,T=v,w=v=0,P=null,x=I.next();T!==null&&!x.done;w++,x=I.next()){T.index>w?(P=T,T=null):P=T.sibling;var C=p(_,T,x.value,D);if(C===null){T===null&&(T=P);break}t&&T&&C.alternate===null&&e(_,T),v=s(C,v,w),V===null?O=C:V.sibling=C,V=C,T=P}if(x.done)return n(_,T),Ye&&Ys(_,w),O;if(T===null){for(;!x.done;w++,x=I.next())x=h(_,x.value,D),x!==null&&(v=s(x,v,w),V===null?O=x:V.sibling=x,V=x);return Ye&&Ys(_,w),O}for(T=r(_,T);!x.done;w++,x=I.next())x=m(T,_,w,x.value,D),x!==null&&(t&&x.alternate!==null&&T.delete(x.key===null?w:x.key),v=s(x,v,w),V===null?O=x:V.sibling=x,V=x);return t&&T.forEach(function(k){return e(_,k)}),Ye&&Ys(_,w),O}function S(_,v,I,D){if(typeof I=="object"&&I!==null&&I.type===ua&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case wd:e:{for(var O=I.key,V=v;V!==null;){if(V.key===O){if(O=I.type,O===ua){if(V.tag===7){n(_,V.sibling),v=i(V,I.props.children),v.return=_,_=v;break e}}else if(V.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Li&&X0(O)===V.type){n(_,V.sibling),v=i(V,I.props),v.ref=Zl(_,V,I),v.return=_,_=v;break e}n(_,V);break}else e(_,V);V=V.sibling}I.type===ua?(v=_o(I.props.children,_.mode,D,I.key),v.return=_,_=v):(D=ah(I.type,I.key,I.props,null,_.mode,D),D.ref=Zl(_,v,I),D.return=_,_=D)}return o(_);case ca:e:{for(V=I.key;v!==null;){if(v.key===V)if(v.tag===4&&v.stateNode.containerInfo===I.containerInfo&&v.stateNode.implementation===I.implementation){n(_,v.sibling),v=i(v,I.children||[]),v.return=_,_=v;break e}else{n(_,v);break}else e(_,v);v=v.sibling}v=Dm(I,_.mode,D),v.return=_,_=v}return o(_);case Li:return V=I._init,S(_,v,V(I._payload),D)}if(uc(I))return E(_,v,I,D);if(Gl(I))return y(_,v,I,D);kd(_,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,v!==null&&v.tag===6?(n(_,v.sibling),v=i(v,I),v.return=_,_=v):(n(_,v),v=km(I,_.mode,D),v.return=_,_=v),o(_)):n(_,v)}return S}var Wa=$S(!0),zS=$S(!1),jh=Cs(null),Bh=null,va=null,Sv=null;function Av(){Sv=va=Bh=null}function Pv(t){var e=jh.current;He(jh),t._currentValue=e}function Fg(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Pa(t,e){Bh=t,Sv=va=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(fn=!0),t.firstContext=null)}function qn(t){var e=t._currentValue;if(Sv!==t)if(t={context:t,memoizedValue:e,next:null},va===null){if(Bh===null)throw Error(K(308));va=t,Bh.dependencies={lanes:0,firstContext:t}}else va=va.next=t;return e}var ao=null;function xv(t){ao===null?ao=[t]:ao.push(t)}function qS(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,xv(e)):(n.next=i.next,i.next=n),e.interleaved=n,ui(t,r)}function ui(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Fi=!1;function bv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function WS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ii(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ss(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ae&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ui(t,n)}return i=r.interleaved,i===null?(e.next=e,xv(r)):(e.next=i.next,i.next=e),r.interleaved=e,ui(t,n)}function th(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,fv(t,n)}}function Z0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function $h(t,e,n,r){var i=t.updateQueue;Fi=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,d=u=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var E=t,y=a;switch(p=e,m=n,y.tag){case 1:if(E=y.payload,typeof E=="function"){h=E.call(m,h,p);break e}h=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=y.payload,p=typeof E=="function"?E.call(m,h,p):E,p==null)break e;h=it({},h,p);break e;case 2:Fi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=m,l=h):d=d.next=m,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(d===null&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Po|=o,t.lanes=o,t.memoizedState=h}}function eE(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(K(191,i));i.call(r)}}}var ku={},Cr=Cs(ku),Xc=Cs(ku),Zc=Cs(ku);function lo(t){if(t===ku)throw Error(K(174));return t}function Rv(t,e){switch(Be(Zc,e),Be(Xc,t),Be(Cr,ku),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:vg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=vg(e,t)}He(Cr),Be(Cr,e)}function Ha(){He(Cr),He(Xc),He(Zc)}function HS(t){lo(Zc.current);var e=lo(Cr.current),n=vg(e,t.type);e!==n&&(Be(Xc,t),Be(Cr,n))}function Cv(t){Xc.current===t&&(He(Cr),He(Xc))}var et=Cs(0);function zh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Am=[];function kv(){for(var t=0;t<Am.length;t++)Am[t]._workInProgressVersionPrimary=null;Am.length=0}var nh=vi.ReactCurrentDispatcher,Pm=vi.ReactCurrentBatchConfig,Ao=0,rt=null,vt=null,Pt=null,qh=!1,Sc=!1,eu=0,TN=0;function Ut(){throw Error(K(321))}function Dv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ur(t[n],e[n]))return!1;return!0}function Nv(t,e,n,r,i,s){if(Ao=s,rt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,nh.current=t===null||t.memoizedState===null?PN:xN,t=n(r,i),Sc){s=0;do{if(Sc=!1,eu=0,25<=s)throw Error(K(301));s+=1,Pt=vt=null,e.updateQueue=null,nh.current=bN,t=n(r,i)}while(Sc)}if(nh.current=Wh,e=vt!==null&&vt.next!==null,Ao=0,Pt=vt=rt=null,qh=!1,e)throw Error(K(300));return t}function Ov(){var t=eu!==0;return eu=0,t}function _r(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?rt.memoizedState=Pt=t:Pt=Pt.next=t,Pt}function Wn(){if(vt===null){var t=rt.alternate;t=t!==null?t.memoizedState:null}else t=vt.next;var e=Pt===null?rt.memoizedState:Pt.next;if(e!==null)Pt=e,vt=t;else{if(t===null)throw Error(K(310));vt=t,t={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},Pt===null?rt.memoizedState=Pt=t:Pt=Pt.next=t}return Pt}function tu(t,e){return typeof e=="function"?e(t):e}function xm(t){var e=Wn(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var r=vt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var d=u.lane;if((Ao&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,rt.lanes|=d,Po|=d}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,ur(r,e.memoizedState)||(fn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,rt.lanes|=s,Po|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function bm(t){var e=Wn(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);ur(s,e.memoizedState)||(fn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function KS(){}function GS(t,e){var n=rt,r=Wn(),i=e(),s=!ur(r.memoizedState,i);if(s&&(r.memoizedState=i,fn=!0),r=r.queue,Vv(JS.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Pt!==null&&Pt.memoizedState.tag&1){if(n.flags|=2048,nu(9,YS.bind(null,n,r,i,e),void 0,null),bt===null)throw Error(K(349));Ao&30||QS(n,e,i)}return i}function QS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=rt.updateQueue,e===null?(e={lastEffect:null,stores:null},rt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function YS(t,e,n,r){e.value=n,e.getSnapshot=r,XS(e)&&ZS(t)}function JS(t,e,n){return n(function(){XS(e)&&ZS(t)})}function XS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ur(t,n)}catch{return!0}}function ZS(t){var e=ui(t,1);e!==null&&or(e,t,1,-1)}function tE(t){var e=_r();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:tu,lastRenderedState:t},e.queue=t,t=t.dispatch=AN.bind(null,rt,t),[e.memoizedState,t]}function nu(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=rt.updateQueue,e===null?(e={lastEffect:null,stores:null},rt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function eA(){return Wn().memoizedState}function rh(t,e,n,r){var i=_r();rt.flags|=t,i.memoizedState=nu(1|e,n,void 0,r===void 0?null:r)}function Wf(t,e,n,r){var i=Wn();r=r===void 0?null:r;var s=void 0;if(vt!==null){var o=vt.memoizedState;if(s=o.destroy,r!==null&&Dv(r,o.deps)){i.memoizedState=nu(e,n,s,r);return}}rt.flags|=t,i.memoizedState=nu(1|e,n,s,r)}function nE(t,e){return rh(8390656,8,t,e)}function Vv(t,e){return Wf(2048,8,t,e)}function tA(t,e){return Wf(4,2,t,e)}function nA(t,e){return Wf(4,4,t,e)}function rA(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function iA(t,e,n){return n=n!=null?n.concat([t]):null,Wf(4,4,rA.bind(null,e,t),n)}function Mv(){}function sA(t,e){var n=Wn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Dv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function oA(t,e){var n=Wn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Dv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function aA(t,e,n){return Ao&21?(ur(n,e)||(n=hS(),rt.lanes|=n,Po|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,fn=!0),t.memoizedState=n)}function IN(t,e){var n=Ve;Ve=n!==0&&4>n?n:4,t(!0);var r=Pm.transition;Pm.transition={};try{t(!1),e()}finally{Ve=n,Pm.transition=r}}function lA(){return Wn().memoizedState}function SN(t,e,n){var r=as(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},cA(t))uA(e,n);else if(n=qS(t,e,n,r),n!==null){var i=nn();or(n,t,r,i),dA(n,e,r)}}function AN(t,e,n){var r=as(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(cA(t))uA(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ur(a,o)){var l=e.interleaved;l===null?(i.next=i,xv(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=qS(t,e,i,r),n!==null&&(i=nn(),or(n,t,r,i),dA(n,e,r))}}function cA(t){var e=t.alternate;return t===rt||e!==null&&e===rt}function uA(t,e){Sc=qh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function dA(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,fv(t,n)}}var Wh={readContext:qn,useCallback:Ut,useContext:Ut,useEffect:Ut,useImperativeHandle:Ut,useInsertionEffect:Ut,useLayoutEffect:Ut,useMemo:Ut,useReducer:Ut,useRef:Ut,useState:Ut,useDebugValue:Ut,useDeferredValue:Ut,useTransition:Ut,useMutableSource:Ut,useSyncExternalStore:Ut,useId:Ut,unstable_isNewReconciler:!1},PN={readContext:qn,useCallback:function(t,e){return _r().memoizedState=[t,e===void 0?null:e],t},useContext:qn,useEffect:nE,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,rh(4194308,4,rA.bind(null,e,t),n)},useLayoutEffect:function(t,e){return rh(4194308,4,t,e)},useInsertionEffect:function(t,e){return rh(4,2,t,e)},useMemo:function(t,e){var n=_r();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=_r();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=SN.bind(null,rt,t),[r.memoizedState,t]},useRef:function(t){var e=_r();return t={current:t},e.memoizedState=t},useState:tE,useDebugValue:Mv,useDeferredValue:function(t){return _r().memoizedState=t},useTransition:function(){var t=tE(!1),e=t[0];return t=IN.bind(null,t[1]),_r().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=rt,i=_r();if(Ye){if(n===void 0)throw Error(K(407));n=n()}else{if(n=e(),bt===null)throw Error(K(349));Ao&30||QS(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,nE(JS.bind(null,r,s,t),[t]),r.flags|=2048,nu(9,YS.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=_r(),e=bt.identifierPrefix;if(Ye){var n=ei,r=Zr;n=(r&~(1<<32-sr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=eu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=TN++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},xN={readContext:qn,useCallback:sA,useContext:qn,useEffect:Vv,useImperativeHandle:iA,useInsertionEffect:tA,useLayoutEffect:nA,useMemo:oA,useReducer:xm,useRef:eA,useState:function(){return xm(tu)},useDebugValue:Mv,useDeferredValue:function(t){var e=Wn();return aA(e,vt.memoizedState,t)},useTransition:function(){var t=xm(tu)[0],e=Wn().memoizedState;return[t,e]},useMutableSource:KS,useSyncExternalStore:GS,useId:lA,unstable_isNewReconciler:!1},bN={readContext:qn,useCallback:sA,useContext:qn,useEffect:Vv,useImperativeHandle:iA,useInsertionEffect:tA,useLayoutEffect:nA,useMemo:oA,useReducer:bm,useRef:eA,useState:function(){return bm(tu)},useDebugValue:Mv,useDeferredValue:function(t){var e=Wn();return vt===null?e.memoizedState=t:aA(e,vt.memoizedState,t)},useTransition:function(){var t=bm(tu)[0],e=Wn().memoizedState;return[t,e]},useMutableSource:KS,useSyncExternalStore:GS,useId:lA,unstable_isNewReconciler:!1};function Yn(t,e){if(t&&t.defaultProps){e=it({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ug(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:it({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Hf={isMounted:function(t){return(t=t._reactInternals)?jo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=nn(),i=as(t),s=ii(r,i);s.payload=e,n!=null&&(s.callback=n),e=ss(t,s,i),e!==null&&(or(e,t,i,r),th(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=nn(),i=as(t),s=ii(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ss(t,s,i),e!==null&&(or(e,t,i,r),th(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=nn(),r=as(t),i=ii(n,r);i.tag=2,e!=null&&(i.callback=e),e=ss(t,i,r),e!==null&&(or(e,t,r,n),th(e,t,r))}};function rE(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Gc(n,r)||!Gc(i,s):!0}function hA(t,e,n){var r=!1,i=gs,s=e.contextType;return typeof s=="object"&&s!==null?s=qn(s):(i=vn(e)?Io:Yt.current,r=e.contextTypes,s=(r=r!=null)?za(t,i):gs),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Hf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function iE(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Hf.enqueueReplaceState(e,e.state,null)}function jg(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},bv(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=qn(s):(s=vn(e)?Io:Yt.current,i.context=za(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Ug(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Hf.enqueueReplaceState(i,i.state,null),$h(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ka(t,e){try{var n="",r=e;do n+=nD(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Rm(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Bg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var RN=typeof WeakMap=="function"?WeakMap:Map;function fA(t,e,n){n=ii(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Kh||(Kh=!0,Jg=r),Bg(t,e)},n}function pA(t,e,n){n=ii(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Bg(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Bg(t,e),typeof r!="function"&&(os===null?os=new Set([this]):os.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function sE(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new RN;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=zN.bind(null,t,e,n),e.then(t,t))}function oE(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function aE(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ii(-1,1),e.tag=2,ss(n,e,1))),n.lanes|=1),t)}var CN=vi.ReactCurrentOwner,fn=!1;function en(t,e,n,r){e.child=t===null?zS(e,null,n,r):Wa(e,t.child,n,r)}function lE(t,e,n,r,i){n=n.render;var s=e.ref;return Pa(e,i),r=Nv(t,e,n,r,s,i),n=Ov(),t!==null&&!fn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,di(t,e,i)):(Ye&&n&&Ev(e),e.flags|=1,en(t,e,r,i),e.child)}function cE(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!qv(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,mA(t,e,s,r,i)):(t=ah(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Gc,n(o,r)&&t.ref===e.ref)return di(t,e,i)}return e.flags|=1,t=ls(s,r),t.ref=e.ref,t.return=e,e.child=t}function mA(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Gc(s,r)&&t.ref===e.ref)if(fn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(fn=!0);else return e.lanes=t.lanes,di(t,e,i)}return $g(t,e,n,r,i)}function gA(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Be(wa,In),In|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Be(wa,In),In|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Be(wa,In),In|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Be(wa,In),In|=r;return en(t,e,i,n),e.child}function yA(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function $g(t,e,n,r,i){var s=vn(n)?Io:Yt.current;return s=za(e,s),Pa(e,i),n=Nv(t,e,n,r,s,i),r=Ov(),t!==null&&!fn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,di(t,e,i)):(Ye&&r&&Ev(e),e.flags|=1,en(t,e,n,i),e.child)}function uE(t,e,n,r,i){if(vn(n)){var s=!0;Lh(e)}else s=!1;if(Pa(e,i),e.stateNode===null)ih(t,e),hA(e,n,r),jg(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=qn(u):(u=vn(n)?Io:Yt.current,u=za(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&iE(e,o,r,u),Fi=!1;var p=e.memoizedState;o.state=p,$h(e,r,o,i),l=e.memoizedState,a!==r||p!==l||yn.current||Fi?(typeof d=="function"&&(Ug(e,n,d,r),l=e.memoizedState),(a=Fi||rE(e,n,a,r,p,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,WS(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Yn(e.type,a),o.props=u,h=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=qn(l):(l=vn(n)?Io:Yt.current,l=za(e,l));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||p!==l)&&iE(e,o,r,l),Fi=!1,p=e.memoizedState,o.state=p,$h(e,r,o,i);var E=e.memoizedState;a!==h||p!==E||yn.current||Fi?(typeof m=="function"&&(Ug(e,n,m,r),E=e.memoizedState),(u=Fi||rE(e,n,u,r,p,E,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,E,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,E,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=E),o.props=r,o.state=E,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return zg(t,e,n,r,s,i)}function zg(t,e,n,r,i,s){yA(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Q0(e,n,!1),di(t,e,s);r=e.stateNode,CN.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Wa(e,t.child,null,s),e.child=Wa(e,null,a,s)):en(t,e,a,s),e.memoizedState=r.state,i&&Q0(e,n,!0),e.child}function vA(t){var e=t.stateNode;e.pendingContext?G0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&G0(t,e.context,!1),Rv(t,e.containerInfo)}function dE(t,e,n,r,i){return qa(),Iv(i),e.flags|=256,en(t,e,n,r),e.child}var qg={dehydrated:null,treeContext:null,retryLane:0};function Wg(t){return{baseLanes:t,cachePool:null,transitions:null}}function _A(t,e,n){var r=e.pendingProps,i=et.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Be(et,i&1),t===null)return Lg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Qf(o,r,0,null),t=_o(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Wg(n),e.memoizedState=qg,t):Lv(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return kN(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ls(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=ls(a,s):(s=_o(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Wg(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=qg,r}return s=t.child,t=s.sibling,r=ls(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Lv(t,e){return e=Qf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Dd(t,e,n,r){return r!==null&&Iv(r),Wa(e,t.child,null,n),t=Lv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function kN(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Rm(Error(K(422))),Dd(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Qf({mode:"visible",children:r.children},i,0,null),s=_o(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Wa(e,t.child,null,o),e.child.memoizedState=Wg(o),e.memoizedState=qg,s);if(!(e.mode&1))return Dd(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(K(419)),r=Rm(s,r,void 0),Dd(t,e,o,r)}if(a=(o&t.childLanes)!==0,fn||a){if(r=bt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ui(t,i),or(r,t,i,-1))}return zv(),r=Rm(Error(K(421))),Dd(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=qN.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,bn=is(i.nextSibling),Cn=e,Ye=!0,nr=null,t!==null&&(jn[Bn++]=Zr,jn[Bn++]=ei,jn[Bn++]=So,Zr=t.id,ei=t.overflow,So=e),e=Lv(e,r.children),e.flags|=4096,e)}function hE(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Fg(t.return,e,n)}function Cm(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function wA(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(en(t,e,r.children,n),r=et.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&hE(t,n,e);else if(t.tag===19)hE(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Be(et,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&zh(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Cm(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&zh(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Cm(e,!0,n,null,s);break;case"together":Cm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ih(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function di(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Po|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(K(153));if(e.child!==null){for(t=e.child,n=ls(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ls(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function DN(t,e,n){switch(e.tag){case 3:vA(e),qa();break;case 5:HS(e);break;case 1:vn(e.type)&&Lh(e);break;case 4:Rv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Be(jh,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Be(et,et.current&1),e.flags|=128,null):n&e.child.childLanes?_A(t,e,n):(Be(et,et.current&1),t=di(t,e,n),t!==null?t.sibling:null);Be(et,et.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return wA(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Be(et,et.current),r)break;return null;case 22:case 23:return e.lanes=0,gA(t,e,n)}return di(t,e,n)}var EA,Hg,TA,IA;EA=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Hg=function(){};TA=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,lo(Cr.current);var s=null;switch(n){case"input":i=pg(t,i),r=pg(t,r),s=[];break;case"select":i=it({},i,{value:void 0}),r=it({},r,{value:void 0}),s=[];break;case"textarea":i=yg(t,i),r=yg(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Vh)}_g(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Bc.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Bc.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&We("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};IA=function(t,e,n,r){n!==r&&(e.flags|=4)};function ec(t,e){if(!Ye)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function jt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function NN(t,e,n){var r=e.pendingProps;switch(Tv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(e),null;case 1:return vn(e.type)&&Mh(),jt(e),null;case 3:return r=e.stateNode,Ha(),He(yn),He(Yt),kv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Cd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,nr!==null&&(ey(nr),nr=null))),Hg(t,e),jt(e),null;case 5:Cv(e);var i=lo(Zc.current);if(n=e.type,t!==null&&e.stateNode!=null)TA(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(K(166));return jt(e),null}if(t=lo(Cr.current),Cd(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Ar]=e,r[Jc]=s,t=(e.mode&1)!==0,n){case"dialog":We("cancel",r),We("close",r);break;case"iframe":case"object":case"embed":We("load",r);break;case"video":case"audio":for(i=0;i<hc.length;i++)We(hc[i],r);break;case"source":We("error",r);break;case"img":case"image":case"link":We("error",r),We("load",r);break;case"details":We("toggle",r);break;case"input":E0(r,s),We("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},We("invalid",r);break;case"textarea":I0(r,s),We("invalid",r)}_g(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Rd(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Rd(r.textContent,a,t),i=["children",""+a]):Bc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&We("scroll",r)}switch(n){case"input":Ed(r),T0(r,s,!0);break;case"textarea":Ed(r),S0(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Vh)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=J1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Ar]=e,t[Jc]=r,EA(t,e,!1,!1),e.stateNode=t;e:{switch(o=wg(n,r),n){case"dialog":We("cancel",t),We("close",t),i=r;break;case"iframe":case"object":case"embed":We("load",t),i=r;break;case"video":case"audio":for(i=0;i<hc.length;i++)We(hc[i],t);i=r;break;case"source":We("error",t),i=r;break;case"img":case"image":case"link":We("error",t),We("load",t),i=r;break;case"details":We("toggle",t),i=r;break;case"input":E0(t,r),i=pg(t,r),We("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=it({},r,{value:void 0}),We("invalid",t);break;case"textarea":I0(t,r),i=yg(t,r),We("invalid",t);break;default:i=r}_g(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?eS(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&X1(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&$c(t,l):typeof l=="number"&&$c(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Bc.hasOwnProperty(s)?l!=null&&s==="onScroll"&&We("scroll",t):l!=null&&av(t,s,l,o))}switch(n){case"input":Ed(t),T0(t,r,!1);break;case"textarea":Ed(t),S0(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ms(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Ta(t,!!r.multiple,s,!1):r.defaultValue!=null&&Ta(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Vh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return jt(e),null;case 6:if(t&&e.stateNode!=null)IA(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(K(166));if(n=lo(Zc.current),lo(Cr.current),Cd(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ar]=e,(s=r.nodeValue!==n)&&(t=Cn,t!==null))switch(t.tag){case 3:Rd(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Rd(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ar]=e,e.stateNode=r}return jt(e),null;case 13:if(He(et),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ye&&bn!==null&&e.mode&1&&!(e.flags&128))BS(),qa(),e.flags|=98560,s=!1;else if(s=Cd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(K(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(K(317));s[Ar]=e}else qa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;jt(e),s=!1}else nr!==null&&(ey(nr),nr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||et.current&1?wt===0&&(wt=3):zv())),e.updateQueue!==null&&(e.flags|=4),jt(e),null);case 4:return Ha(),Hg(t,e),t===null&&Qc(e.stateNode.containerInfo),jt(e),null;case 10:return Pv(e.type._context),jt(e),null;case 17:return vn(e.type)&&Mh(),jt(e),null;case 19:if(He(et),s=e.memoizedState,s===null)return jt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)ec(s,!1);else{if(wt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=zh(t),o!==null){for(e.flags|=128,ec(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Be(et,et.current&1|2),e.child}t=t.sibling}s.tail!==null&&ht()>Ga&&(e.flags|=128,r=!0,ec(s,!1),e.lanes=4194304)}else{if(!r)if(t=zh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ec(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ye)return jt(e),null}else 2*ht()-s.renderingStartTime>Ga&&n!==1073741824&&(e.flags|=128,r=!0,ec(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ht(),e.sibling=null,n=et.current,Be(et,r?n&1|2:n&1),e):(jt(e),null);case 22:case 23:return $v(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?In&1073741824&&(jt(e),e.subtreeFlags&6&&(e.flags|=8192)):jt(e),null;case 24:return null;case 25:return null}throw Error(K(156,e.tag))}function ON(t,e){switch(Tv(e),e.tag){case 1:return vn(e.type)&&Mh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ha(),He(yn),He(Yt),kv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Cv(e),null;case 13:if(He(et),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(K(340));qa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return He(et),null;case 4:return Ha(),null;case 10:return Pv(e.type._context),null;case 22:case 23:return $v(),null;case 24:return null;default:return null}}var Nd=!1,Wt=!1,VN=typeof WeakSet=="function"?WeakSet:Set,ee=null;function _a(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){lt(t,e,r)}else n.current=null}function Kg(t,e,n){try{n()}catch(r){lt(t,e,r)}}var fE=!1;function MN(t,e){if(Cg=Dh,t=bS(),wv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,d=0,h=t,p=null;t:for(;;){for(var m;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)p=h,h=m;for(;;){if(h===t)break t;if(p===n&&++u===i&&(a=o),p===s&&++d===r&&(l=o),(m=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(kg={focusedElem:t,selectionRange:n},Dh=!1,ee=e;ee!==null;)if(e=ee,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ee=t;else for(;ee!==null;){e=ee;try{var E=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var y=E.memoizedProps,S=E.memoizedState,_=e.stateNode,v=_.getSnapshotBeforeUpdate(e.elementType===e.type?y:Yn(e.type,y),S);_.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(D){lt(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,ee=t;break}ee=e.return}return E=fE,fE=!1,E}function Ac(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Kg(e,n,s)}i=i.next}while(i!==r)}}function Kf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Gg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function SA(t){var e=t.alternate;e!==null&&(t.alternate=null,SA(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ar],delete e[Jc],delete e[Og],delete e[vN],delete e[_N])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function AA(t){return t.tag===5||t.tag===3||t.tag===4}function pE(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||AA(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Qg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Vh));else if(r!==4&&(t=t.child,t!==null))for(Qg(t,e,n),t=t.sibling;t!==null;)Qg(t,e,n),t=t.sibling}function Yg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Yg(t,e,n),t=t.sibling;t!==null;)Yg(t,e,n),t=t.sibling}var Dt=null,er=!1;function Ri(t,e,n){for(n=n.child;n!==null;)PA(t,e,n),n=n.sibling}function PA(t,e,n){if(Rr&&typeof Rr.onCommitFiberUnmount=="function")try{Rr.onCommitFiberUnmount(Uf,n)}catch{}switch(n.tag){case 5:Wt||_a(n,e);case 6:var r=Dt,i=er;Dt=null,Ri(t,e,n),Dt=r,er=i,Dt!==null&&(er?(t=Dt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Dt.removeChild(n.stateNode));break;case 18:Dt!==null&&(er?(t=Dt,n=n.stateNode,t.nodeType===8?Im(t.parentNode,n):t.nodeType===1&&Im(t,n),Hc(t)):Im(Dt,n.stateNode));break;case 4:r=Dt,i=er,Dt=n.stateNode.containerInfo,er=!0,Ri(t,e,n),Dt=r,er=i;break;case 0:case 11:case 14:case 15:if(!Wt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Kg(n,e,o),i=i.next}while(i!==r)}Ri(t,e,n);break;case 1:if(!Wt&&(_a(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){lt(n,e,a)}Ri(t,e,n);break;case 21:Ri(t,e,n);break;case 22:n.mode&1?(Wt=(r=Wt)||n.memoizedState!==null,Ri(t,e,n),Wt=r):Ri(t,e,n);break;default:Ri(t,e,n)}}function mE(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new VN),e.forEach(function(r){var i=WN.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Gn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Dt=a.stateNode,er=!1;break e;case 3:Dt=a.stateNode.containerInfo,er=!0;break e;case 4:Dt=a.stateNode.containerInfo,er=!0;break e}a=a.return}if(Dt===null)throw Error(K(160));PA(s,o,i),Dt=null,er=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){lt(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)xA(e,t),e=e.sibling}function xA(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Gn(e,t),yr(t),r&4){try{Ac(3,t,t.return),Kf(3,t)}catch(y){lt(t,t.return,y)}try{Ac(5,t,t.return)}catch(y){lt(t,t.return,y)}}break;case 1:Gn(e,t),yr(t),r&512&&n!==null&&_a(n,n.return);break;case 5:if(Gn(e,t),yr(t),r&512&&n!==null&&_a(n,n.return),t.flags&32){var i=t.stateNode;try{$c(i,"")}catch(y){lt(t,t.return,y)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Q1(i,s),wg(a,o);var u=wg(a,s);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?eS(i,h):d==="dangerouslySetInnerHTML"?X1(i,h):d==="children"?$c(i,h):av(i,d,h,u)}switch(a){case"input":mg(i,s);break;case"textarea":Y1(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Ta(i,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?Ta(i,!!s.multiple,s.defaultValue,!0):Ta(i,!!s.multiple,s.multiple?[]:"",!1))}i[Jc]=s}catch(y){lt(t,t.return,y)}}break;case 6:if(Gn(e,t),yr(t),r&4){if(t.stateNode===null)throw Error(K(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(y){lt(t,t.return,y)}}break;case 3:if(Gn(e,t),yr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Hc(e.containerInfo)}catch(y){lt(t,t.return,y)}break;case 4:Gn(e,t),yr(t);break;case 13:Gn(e,t),yr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(jv=ht())),r&4&&mE(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Wt=(u=Wt)||d,Gn(e,t),Wt=u):Gn(e,t),yr(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(ee=t,d=t.child;d!==null;){for(h=ee=d;ee!==null;){switch(p=ee,m=p.child,p.tag){case 0:case 11:case 14:case 15:Ac(4,p,p.return);break;case 1:_a(p,p.return);var E=p.stateNode;if(typeof E.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,E.props=e.memoizedProps,E.state=e.memoizedState,E.componentWillUnmount()}catch(y){lt(r,n,y)}}break;case 5:_a(p,p.return);break;case 22:if(p.memoizedState!==null){yE(h);continue}}m!==null?(m.return=p,ee=m):yE(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Z1("display",o))}catch(y){lt(t,t.return,y)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(y){lt(t,t.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Gn(e,t),yr(t),r&4&&mE(t);break;case 21:break;default:Gn(e,t),yr(t)}}function yr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(AA(n)){var r=n;break e}n=n.return}throw Error(K(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&($c(i,""),r.flags&=-33);var s=pE(t);Yg(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=pE(t);Qg(t,a,o);break;default:throw Error(K(161))}}catch(l){lt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function LN(t,e,n){ee=t,bA(t)}function bA(t,e,n){for(var r=(t.mode&1)!==0;ee!==null;){var i=ee,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Nd;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Wt;a=Nd;var u=Wt;if(Nd=o,(Wt=l)&&!u)for(ee=i;ee!==null;)o=ee,l=o.child,o.tag===22&&o.memoizedState!==null?vE(i):l!==null?(l.return=o,ee=l):vE(i);for(;s!==null;)ee=s,bA(s),s=s.sibling;ee=i,Nd=a,Wt=u}gE(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ee=s):gE(t)}}function gE(t){for(;ee!==null;){var e=ee;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Wt||Kf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Wt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Yn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&eE(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}eE(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Hc(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}Wt||e.flags&512&&Gg(e)}catch(p){lt(e,e.return,p)}}if(e===t){ee=null;break}if(n=e.sibling,n!==null){n.return=e.return,ee=n;break}ee=e.return}}function yE(t){for(;ee!==null;){var e=ee;if(e===t){ee=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ee=n;break}ee=e.return}}function vE(t){for(;ee!==null;){var e=ee;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Kf(4,e)}catch(l){lt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){lt(e,i,l)}}var s=e.return;try{Gg(e)}catch(l){lt(e,s,l)}break;case 5:var o=e.return;try{Gg(e)}catch(l){lt(e,o,l)}}}catch(l){lt(e,e.return,l)}if(e===t){ee=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ee=a;break}ee=e.return}}var FN=Math.ceil,Hh=vi.ReactCurrentDispatcher,Fv=vi.ReactCurrentOwner,zn=vi.ReactCurrentBatchConfig,Ae=0,bt=null,gt=null,Ot=0,In=0,wa=Cs(0),wt=0,ru=null,Po=0,Gf=0,Uv=0,Pc=null,hn=null,jv=0,Ga=1/0,Yr=null,Kh=!1,Jg=null,os=null,Od=!1,Xi=null,Gh=0,xc=0,Xg=null,sh=-1,oh=0;function nn(){return Ae&6?ht():sh!==-1?sh:sh=ht()}function as(t){return t.mode&1?Ae&2&&Ot!==0?Ot&-Ot:EN.transition!==null?(oh===0&&(oh=hS()),oh):(t=Ve,t!==0||(t=window.event,t=t===void 0?16:_S(t.type)),t):1}function or(t,e,n,r){if(50<xc)throw xc=0,Xg=null,Error(K(185));bu(t,n,r),(!(Ae&2)||t!==bt)&&(t===bt&&(!(Ae&2)&&(Gf|=n),wt===4&&ji(t,Ot)),_n(t,r),n===1&&Ae===0&&!(e.mode&1)&&(Ga=ht()+500,qf&&ks()))}function _n(t,e){var n=t.callbackNode;ED(t,e);var r=kh(t,t===bt?Ot:0);if(r===0)n!==null&&x0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&x0(n),e===1)t.tag===0?wN(_E.bind(null,t)):FS(_E.bind(null,t)),gN(function(){!(Ae&6)&&ks()}),n=null;else{switch(fS(r)){case 1:n=hv;break;case 4:n=uS;break;case 16:n=Ch;break;case 536870912:n=dS;break;default:n=Ch}n=MA(n,RA.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function RA(t,e){if(sh=-1,oh=0,Ae&6)throw Error(K(327));var n=t.callbackNode;if(xa()&&t.callbackNode!==n)return null;var r=kh(t,t===bt?Ot:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Qh(t,r);else{e=r;var i=Ae;Ae|=2;var s=kA();(bt!==t||Ot!==e)&&(Yr=null,Ga=ht()+500,vo(t,e));do try{BN();break}catch(a){CA(t,a)}while(!0);Av(),Hh.current=s,Ae=i,gt!==null?e=0:(bt=null,Ot=0,e=wt)}if(e!==0){if(e===2&&(i=Ag(t),i!==0&&(r=i,e=Zg(t,i))),e===1)throw n=ru,vo(t,0),ji(t,r),_n(t,ht()),n;if(e===6)ji(t,r);else{if(i=t.current.alternate,!(r&30)&&!UN(i)&&(e=Qh(t,r),e===2&&(s=Ag(t),s!==0&&(r=s,e=Zg(t,s))),e===1))throw n=ru,vo(t,0),ji(t,r),_n(t,ht()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(K(345));case 2:Js(t,hn,Yr);break;case 3:if(ji(t,r),(r&130023424)===r&&(e=jv+500-ht(),10<e)){if(kh(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){nn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Ng(Js.bind(null,t,hn,Yr),e);break}Js(t,hn,Yr);break;case 4:if(ji(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-sr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=ht()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*FN(r/1960))-r,10<r){t.timeoutHandle=Ng(Js.bind(null,t,hn,Yr),r);break}Js(t,hn,Yr);break;case 5:Js(t,hn,Yr);break;default:throw Error(K(329))}}}return _n(t,ht()),t.callbackNode===n?RA.bind(null,t):null}function Zg(t,e){var n=Pc;return t.current.memoizedState.isDehydrated&&(vo(t,e).flags|=256),t=Qh(t,e),t!==2&&(e=hn,hn=n,e!==null&&ey(e)),t}function ey(t){hn===null?hn=t:hn.push.apply(hn,t)}function UN(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ur(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ji(t,e){for(e&=~Uv,e&=~Gf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-sr(e),r=1<<n;t[n]=-1,e&=~r}}function _E(t){if(Ae&6)throw Error(K(327));xa();var e=kh(t,0);if(!(e&1))return _n(t,ht()),null;var n=Qh(t,e);if(t.tag!==0&&n===2){var r=Ag(t);r!==0&&(e=r,n=Zg(t,r))}if(n===1)throw n=ru,vo(t,0),ji(t,e),_n(t,ht()),n;if(n===6)throw Error(K(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Js(t,hn,Yr),_n(t,ht()),null}function Bv(t,e){var n=Ae;Ae|=1;try{return t(e)}finally{Ae=n,Ae===0&&(Ga=ht()+500,qf&&ks())}}function xo(t){Xi!==null&&Xi.tag===0&&!(Ae&6)&&xa();var e=Ae;Ae|=1;var n=zn.transition,r=Ve;try{if(zn.transition=null,Ve=1,t)return t()}finally{Ve=r,zn.transition=n,Ae=e,!(Ae&6)&&ks()}}function $v(){In=wa.current,He(wa)}function vo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,mN(n)),gt!==null)for(n=gt.return;n!==null;){var r=n;switch(Tv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Mh();break;case 3:Ha(),He(yn),He(Yt),kv();break;case 5:Cv(r);break;case 4:Ha();break;case 13:He(et);break;case 19:He(et);break;case 10:Pv(r.type._context);break;case 22:case 23:$v()}n=n.return}if(bt=t,gt=t=ls(t.current,null),Ot=In=e,wt=0,ru=null,Uv=Gf=Po=0,hn=Pc=null,ao!==null){for(e=0;e<ao.length;e++)if(n=ao[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}ao=null}return t}function CA(t,e){do{var n=gt;try{if(Av(),nh.current=Wh,qh){for(var r=rt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}qh=!1}if(Ao=0,Pt=vt=rt=null,Sc=!1,eu=0,Fv.current=null,n===null||n.return===null){wt=1,ru=e,gt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Ot,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=oE(o);if(m!==null){m.flags&=-257,aE(m,o,a,s,e),m.mode&1&&sE(s,u,e),e=m,l=u;var E=e.updateQueue;if(E===null){var y=new Set;y.add(l),e.updateQueue=y}else E.add(l);break e}else{if(!(e&1)){sE(s,u,e),zv();break e}l=Error(K(426))}}else if(Ye&&a.mode&1){var S=oE(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),aE(S,o,a,s,e),Iv(Ka(l,a));break e}}s=l=Ka(l,a),wt!==4&&(wt=2),Pc===null?Pc=[s]:Pc.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var _=fA(s,l,e);Z0(s,_);break e;case 1:a=l;var v=s.type,I=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(os===null||!os.has(I)))){s.flags|=65536,e&=-e,s.lanes|=e;var D=pA(s,a,e);Z0(s,D);break e}}s=s.return}while(s!==null)}NA(n)}catch(O){e=O,gt===n&&n!==null&&(gt=n=n.return);continue}break}while(!0)}function kA(){var t=Hh.current;return Hh.current=Wh,t===null?Wh:t}function zv(){(wt===0||wt===3||wt===2)&&(wt=4),bt===null||!(Po&268435455)&&!(Gf&268435455)||ji(bt,Ot)}function Qh(t,e){var n=Ae;Ae|=2;var r=kA();(bt!==t||Ot!==e)&&(Yr=null,vo(t,e));do try{jN();break}catch(i){CA(t,i)}while(!0);if(Av(),Ae=n,Hh.current=r,gt!==null)throw Error(K(261));return bt=null,Ot=0,wt}function jN(){for(;gt!==null;)DA(gt)}function BN(){for(;gt!==null&&!hD();)DA(gt)}function DA(t){var e=VA(t.alternate,t,In);t.memoizedProps=t.pendingProps,e===null?NA(t):gt=e,Fv.current=null}function NA(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=ON(n,e),n!==null){n.flags&=32767,gt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{wt=6,gt=null;return}}else if(n=NN(n,e,In),n!==null){gt=n;return}if(e=e.sibling,e!==null){gt=e;return}gt=e=t}while(e!==null);wt===0&&(wt=5)}function Js(t,e,n){var r=Ve,i=zn.transition;try{zn.transition=null,Ve=1,$N(t,e,n,r)}finally{zn.transition=i,Ve=r}return null}function $N(t,e,n,r){do xa();while(Xi!==null);if(Ae&6)throw Error(K(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(K(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(TD(t,s),t===bt&&(gt=bt=null,Ot=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Od||(Od=!0,MA(Ch,function(){return xa(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=zn.transition,zn.transition=null;var o=Ve;Ve=1;var a=Ae;Ae|=4,Fv.current=null,MN(t,n),xA(n,t),lN(kg),Dh=!!Cg,kg=Cg=null,t.current=n,LN(n),fD(),Ae=a,Ve=o,zn.transition=s}else t.current=n;if(Od&&(Od=!1,Xi=t,Gh=i),s=t.pendingLanes,s===0&&(os=null),gD(n.stateNode),_n(t,ht()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Kh)throw Kh=!1,t=Jg,Jg=null,t;return Gh&1&&t.tag!==0&&xa(),s=t.pendingLanes,s&1?t===Xg?xc++:(xc=0,Xg=t):xc=0,ks(),null}function xa(){if(Xi!==null){var t=fS(Gh),e=zn.transition,n=Ve;try{if(zn.transition=null,Ve=16>t?16:t,Xi===null)var r=!1;else{if(t=Xi,Xi=null,Gh=0,Ae&6)throw Error(K(331));var i=Ae;for(Ae|=4,ee=t.current;ee!==null;){var s=ee,o=s.child;if(ee.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(ee=u;ee!==null;){var d=ee;switch(d.tag){case 0:case 11:case 15:Ac(8,d,s)}var h=d.child;if(h!==null)h.return=d,ee=h;else for(;ee!==null;){d=ee;var p=d.sibling,m=d.return;if(SA(d),d===u){ee=null;break}if(p!==null){p.return=m,ee=p;break}ee=m}}}var E=s.alternate;if(E!==null){var y=E.child;if(y!==null){E.child=null;do{var S=y.sibling;y.sibling=null,y=S}while(y!==null)}}ee=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ee=o;else e:for(;ee!==null;){if(s=ee,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ac(9,s,s.return)}var _=s.sibling;if(_!==null){_.return=s.return,ee=_;break e}ee=s.return}}var v=t.current;for(ee=v;ee!==null;){o=ee;var I=o.child;if(o.subtreeFlags&2064&&I!==null)I.return=o,ee=I;else e:for(o=v;ee!==null;){if(a=ee,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Kf(9,a)}}catch(O){lt(a,a.return,O)}if(a===o){ee=null;break e}var D=a.sibling;if(D!==null){D.return=a.return,ee=D;break e}ee=a.return}}if(Ae=i,ks(),Rr&&typeof Rr.onPostCommitFiberRoot=="function")try{Rr.onPostCommitFiberRoot(Uf,t)}catch{}r=!0}return r}finally{Ve=n,zn.transition=e}}return!1}function wE(t,e,n){e=Ka(n,e),e=fA(t,e,1),t=ss(t,e,1),e=nn(),t!==null&&(bu(t,1,e),_n(t,e))}function lt(t,e,n){if(t.tag===3)wE(t,t,n);else for(;e!==null;){if(e.tag===3){wE(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(os===null||!os.has(r))){t=Ka(n,t),t=pA(e,t,1),e=ss(e,t,1),t=nn(),e!==null&&(bu(e,1,t),_n(e,t));break}}e=e.return}}function zN(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=nn(),t.pingedLanes|=t.suspendedLanes&n,bt===t&&(Ot&n)===n&&(wt===4||wt===3&&(Ot&130023424)===Ot&&500>ht()-jv?vo(t,0):Uv|=n),_n(t,e)}function OA(t,e){e===0&&(t.mode&1?(e=Sd,Sd<<=1,!(Sd&130023424)&&(Sd=4194304)):e=1);var n=nn();t=ui(t,e),t!==null&&(bu(t,e,n),_n(t,n))}function qN(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),OA(t,n)}function WN(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(K(314))}r!==null&&r.delete(e),OA(t,n)}var VA;VA=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||yn.current)fn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return fn=!1,DN(t,e,n);fn=!!(t.flags&131072)}else fn=!1,Ye&&e.flags&1048576&&US(e,Uh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ih(t,e),t=e.pendingProps;var i=za(e,Yt.current);Pa(e,n),i=Nv(null,e,r,t,i,n);var s=Ov();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,vn(r)?(s=!0,Lh(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,bv(e),i.updater=Hf,e.stateNode=i,i._reactInternals=e,jg(e,r,t,n),e=zg(null,e,r,!0,s,n)):(e.tag=0,Ye&&s&&Ev(e),en(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ih(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=KN(r),t=Yn(r,t),i){case 0:e=$g(null,e,r,t,n);break e;case 1:e=uE(null,e,r,t,n);break e;case 11:e=lE(null,e,r,t,n);break e;case 14:e=cE(null,e,r,Yn(r.type,t),n);break e}throw Error(K(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yn(r,i),$g(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yn(r,i),uE(t,e,r,i,n);case 3:e:{if(vA(e),t===null)throw Error(K(387));r=e.pendingProps,s=e.memoizedState,i=s.element,WS(t,e),$h(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ka(Error(K(423)),e),e=dE(t,e,r,n,i);break e}else if(r!==i){i=Ka(Error(K(424)),e),e=dE(t,e,r,n,i);break e}else for(bn=is(e.stateNode.containerInfo.firstChild),Cn=e,Ye=!0,nr=null,n=zS(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(qa(),r===i){e=di(t,e,n);break e}en(t,e,r,n)}e=e.child}return e;case 5:return HS(e),t===null&&Lg(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Dg(r,i)?o=null:s!==null&&Dg(r,s)&&(e.flags|=32),yA(t,e),en(t,e,o,n),e.child;case 6:return t===null&&Lg(e),null;case 13:return _A(t,e,n);case 4:return Rv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Wa(e,null,r,n):en(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yn(r,i),lE(t,e,r,i,n);case 7:return en(t,e,e.pendingProps,n),e.child;case 8:return en(t,e,e.pendingProps.children,n),e.child;case 12:return en(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Be(jh,r._currentValue),r._currentValue=o,s!==null)if(ur(s.value,o)){if(s.children===i.children&&!yn.current){e=di(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=ii(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Fg(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(K(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Fg(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}en(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Pa(e,n),i=qn(i),r=r(i),e.flags|=1,en(t,e,r,n),e.child;case 14:return r=e.type,i=Yn(r,e.pendingProps),i=Yn(r.type,i),cE(t,e,r,i,n);case 15:return mA(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yn(r,i),ih(t,e),e.tag=1,vn(r)?(t=!0,Lh(e)):t=!1,Pa(e,n),hA(e,r,i),jg(e,r,i,n),zg(null,e,r,!0,t,n);case 19:return wA(t,e,n);case 22:return gA(t,e,n)}throw Error(K(156,e.tag))};function MA(t,e){return cS(t,e)}function HN(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $n(t,e,n,r){return new HN(t,e,n,r)}function qv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function KN(t){if(typeof t=="function")return qv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===cv)return 11;if(t===uv)return 14}return 2}function ls(t,e){var n=t.alternate;return n===null?(n=$n(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ah(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")qv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ua:return _o(n.children,i,s,e);case lv:o=8,i|=8;break;case ug:return t=$n(12,n,e,i|2),t.elementType=ug,t.lanes=s,t;case dg:return t=$n(13,n,e,i),t.elementType=dg,t.lanes=s,t;case hg:return t=$n(19,n,e,i),t.elementType=hg,t.lanes=s,t;case H1:return Qf(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case q1:o=10;break e;case W1:o=9;break e;case cv:o=11;break e;case uv:o=14;break e;case Li:o=16,r=null;break e}throw Error(K(130,t==null?t:typeof t,""))}return e=$n(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function _o(t,e,n,r){return t=$n(7,t,r,e),t.lanes=n,t}function Qf(t,e,n,r){return t=$n(22,t,r,e),t.elementType=H1,t.lanes=n,t.stateNode={isHidden:!1},t}function km(t,e,n){return t=$n(6,t,null,e),t.lanes=n,t}function Dm(t,e,n){return e=$n(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function GN(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hm(0),this.expirationTimes=hm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hm(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Wv(t,e,n,r,i,s,o,a,l){return t=new GN(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=$n(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},bv(s),t}function QN(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ca,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function LA(t){if(!t)return gs;t=t._reactInternals;e:{if(jo(t)!==t||t.tag!==1)throw Error(K(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(vn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(K(171))}if(t.tag===1){var n=t.type;if(vn(n))return LS(t,n,e)}return e}function FA(t,e,n,r,i,s,o,a,l){return t=Wv(n,r,!0,t,i,s,o,a,l),t.context=LA(null),n=t.current,r=nn(),i=as(n),s=ii(r,i),s.callback=e??null,ss(n,s,i),t.current.lanes=i,bu(t,i,r),_n(t,r),t}function Yf(t,e,n,r){var i=e.current,s=nn(),o=as(i);return n=LA(n),e.context===null?e.context=n:e.pendingContext=n,e=ii(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ss(i,e,o),t!==null&&(or(t,i,o,s),th(t,i,o)),o}function Yh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function EE(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Hv(t,e){EE(t,e),(t=t.alternate)&&EE(t,e)}function YN(){return null}var UA=typeof reportError=="function"?reportError:function(t){console.error(t)};function Kv(t){this._internalRoot=t}Jf.prototype.render=Kv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(K(409));Yf(t,e,null,null)};Jf.prototype.unmount=Kv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;xo(function(){Yf(null,t,null,null)}),e[ci]=null}};function Jf(t){this._internalRoot=t}Jf.prototype.unstable_scheduleHydration=function(t){if(t){var e=gS();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ui.length&&e!==0&&e<Ui[n].priority;n++);Ui.splice(n,0,t),n===0&&vS(t)}};function Gv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Xf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function TE(){}function JN(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Yh(o);s.call(u)}}var o=FA(e,r,t,0,null,!1,!1,"",TE);return t._reactRootContainer=o,t[ci]=o.current,Qc(t.nodeType===8?t.parentNode:t),xo(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Yh(l);a.call(u)}}var l=Wv(t,0,!1,null,null,!1,!1,"",TE);return t._reactRootContainer=l,t[ci]=l.current,Qc(t.nodeType===8?t.parentNode:t),xo(function(){Yf(e,l,n,r)}),l}function Zf(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Yh(o);a.call(l)}}Yf(e,o,t,i)}else o=JN(n,e,t,i,r);return Yh(o)}pS=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=dc(e.pendingLanes);n!==0&&(fv(e,n|1),_n(e,ht()),!(Ae&6)&&(Ga=ht()+500,ks()))}break;case 13:xo(function(){var r=ui(t,1);if(r!==null){var i=nn();or(r,t,1,i)}}),Hv(t,1)}};pv=function(t){if(t.tag===13){var e=ui(t,134217728);if(e!==null){var n=nn();or(e,t,134217728,n)}Hv(t,134217728)}};mS=function(t){if(t.tag===13){var e=as(t),n=ui(t,e);if(n!==null){var r=nn();or(n,t,e,r)}Hv(t,e)}};gS=function(){return Ve};yS=function(t,e){var n=Ve;try{return Ve=t,e()}finally{Ve=n}};Tg=function(t,e,n){switch(e){case"input":if(mg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=zf(r);if(!i)throw Error(K(90));G1(r),mg(r,i)}}}break;case"textarea":Y1(t,n);break;case"select":e=n.value,e!=null&&Ta(t,!!n.multiple,e,!1)}};rS=Bv;iS=xo;var XN={usingClientEntryPoint:!1,Events:[Cu,pa,zf,tS,nS,Bv]},tc={findFiberByHostInstance:oo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ZN={bundleType:tc.bundleType,version:tc.version,rendererPackageName:tc.rendererPackageName,rendererConfig:tc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:vi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=aS(t),t===null?null:t.stateNode},findFiberByHostInstance:tc.findFiberByHostInstance||YN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vd.isDisabled&&Vd.supportsFiber)try{Uf=Vd.inject(ZN),Rr=Vd}catch{}}Vn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XN;Vn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gv(e))throw Error(K(200));return QN(t,e,null,n)};Vn.createRoot=function(t,e){if(!Gv(t))throw Error(K(299));var n=!1,r="",i=UA;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Wv(t,1,!1,null,null,n,!1,r,i),t[ci]=e.current,Qc(t.nodeType===8?t.parentNode:t),new Kv(e)};Vn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(K(188)):(t=Object.keys(t).join(","),Error(K(268,t)));return t=aS(e),t=t===null?null:t.stateNode,t};Vn.flushSync=function(t){return xo(t)};Vn.hydrate=function(t,e,n){if(!Xf(e))throw Error(K(200));return Zf(null,t,e,!0,n)};Vn.hydrateRoot=function(t,e,n){if(!Gv(t))throw Error(K(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=UA;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=FA(e,null,t,1,n??null,i,!1,s,o),t[ci]=e.current,Qc(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Jf(e)};Vn.render=function(t,e,n){if(!Xf(e))throw Error(K(200));return Zf(null,t,e,!1,n)};Vn.unmountComponentAtNode=function(t){if(!Xf(t))throw Error(K(40));return t._reactRootContainer?(xo(function(){Zf(null,null,t,!1,function(){t._reactRootContainer=null,t[ci]=null})}),!0):!1};Vn.unstable_batchedUpdates=Bv;Vn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Xf(n))throw Error(K(200));if(t==null||t._reactInternals===void 0)throw Error(K(38));return Zf(t,e,n,!1,r)};Vn.version="18.3.1-next-f1338f8080-20240426";function jA(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(jA)}catch(t){console.error(t)}}jA(),j1.exports=Vn;var Du=j1.exports;const BA=x1(Du);var $A,IE=Du;$A=IE.createRoot,IE.hydrateRoot;const e2="modulepreload",t2=function(t){return"/"+t},SE={},Se=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=t2(l),l in SE)return;SE[l]=!0;const u=l.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":e2,u||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),u)return new Promise((p,m)=>{h.addEventListener("load",p),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},n2=1,r2=1e6;let Nm=0;function i2(){return Nm=(Nm+1)%Number.MAX_SAFE_INTEGER,Nm.toString()}const Om=new Map,AE=t=>{if(Om.has(t))return;const e=setTimeout(()=>{Om.delete(t),bc({type:"REMOVE_TOAST",toastId:t})},r2);Om.set(t,e)},s2=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,n2)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?AE(n):t.toasts.forEach(r=>{AE(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},lh=[];let ch={toasts:[]};function bc(t){ch=s2(ch,t),lh.forEach(e=>{e(ch)})}function o2({...t}){const e=i2(),n=i=>bc({type:"UPDATE_TOAST",toast:{...i,id:e}}),r=()=>bc({type:"DISMISS_TOAST",toastId:e});return bc({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:n}}function a2(){const[t,e]=b.useState(ch);return b.useEffect(()=>(lh.push(e),()=>{const n=lh.indexOf(e);n>-1&&lh.splice(n,1)}),[t]),{...t,toast:o2,dismiss:n=>bc({type:"DISMISS_TOAST",toastId:n})}}function _t(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function PE(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function zA(...t){return e=>{let n=!1;const r=t.map(i=>{const s=PE(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():PE(t[i],null)}}}}function dr(...t){return b.useCallback(zA(...t),t)}function C$(t,e){const n=b.createContext(e),r=s=>{const{children:o,...a}=s,l=b.useMemo(()=>a,Object.values(a));return N.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function i(s){const o=b.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${t}\``)}return[r,i]}function ep(t,e=[]){let n=[];function r(s,o){const a=b.createContext(o),l=n.length;n=[...n,o];const u=h=>{var _;const{scope:p,children:m,...E}=h,y=((_=p==null?void 0:p[t])==null?void 0:_[l])||a,S=b.useMemo(()=>E,Object.values(E));return N.jsx(y.Provider,{value:S,children:m})};u.displayName=s+"Provider";function d(h,p){var y;const m=((y=p==null?void 0:p[t])==null?void 0:y[l])||a,E=b.useContext(m);if(E)return E;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${s}\``)}return[u,d]}const i=()=>{const s=n.map(o=>b.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return b.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,l2(i,...e)]}function l2(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:u})=>{const h=l(s)[`__scope${u}`];return{...a,...h}},{});return b.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function Jh(t){const e=c2(t),n=b.forwardRef((r,i)=>{const{children:s,...o}=r,a=b.Children.toArray(s),l=a.find(d2);if(l){const u=l.props.children,d=a.map(h=>h===l?b.Children.count(u)>1?b.Children.only(null):b.isValidElement(u)?u.props.children:null:h);return N.jsx(e,{...o,ref:i,children:b.isValidElement(u)?b.cloneElement(u,void 0,d):null})}return N.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}var k$=Jh("Slot");function c2(t){const e=b.forwardRef((n,r)=>{const{children:i,...s}=n;if(b.isValidElement(i)){const o=f2(i),a=h2(s,i.props);return i.type!==b.Fragment&&(a.ref=r?zA(r,o):o),b.cloneElement(i,a)}return b.Children.count(i)>1?b.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var qA=Symbol("radix.slottable");function u2(t){const e=({children:n})=>N.jsx(N.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=qA,e}function d2(t){return b.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===qA}function h2(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const l=s(...a);return i(...a),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function f2(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function p2(t){const e=t+"CollectionProvider",[n,r]=ep(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=y=>{const{scope:S,children:_}=y,v=z.useRef(null),I=z.useRef(new Map).current;return N.jsx(i,{scope:S,itemMap:I,collectionRef:v,children:_})};o.displayName=e;const a=t+"CollectionSlot",l=Jh(a),u=z.forwardRef((y,S)=>{const{scope:_,children:v}=y,I=s(a,_),D=dr(S,I.collectionRef);return N.jsx(l,{ref:D,children:v})});u.displayName=a;const d=t+"CollectionItemSlot",h="data-radix-collection-item",p=Jh(d),m=z.forwardRef((y,S)=>{const{scope:_,children:v,...I}=y,D=z.useRef(null),O=dr(S,D),V=s(d,_);return z.useEffect(()=>(V.itemMap.set(D,{ref:D,...I}),()=>void V.itemMap.delete(D))),N.jsx(p,{[h]:"",ref:O,children:v})});m.displayName=d;function E(y){const S=s(t+"CollectionConsumer",y);return z.useCallback(()=>{const v=S.collectionRef.current;if(!v)return[];const I=Array.from(v.querySelectorAll(`[${h}]`));return Array.from(S.itemMap.values()).sort((V,T)=>I.indexOf(V.ref.current)-I.indexOf(T.ref.current))},[S.collectionRef,S.itemMap])}return[{Provider:o,Slot:u,ItemSlot:m},E,r]}var m2=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],En=m2.reduce((t,e)=>{const n=Jh(`Primitive.${e}`),r=b.forwardRef((i,s)=>{const{asChild:o,...a}=i,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),N.jsx(l,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function WA(t,e){t&&Du.flushSync(()=>t.dispatchEvent(e))}function ys(t){const e=b.useRef(t);return b.useEffect(()=>{e.current=t}),b.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function g2(t,e=globalThis==null?void 0:globalThis.document){const n=ys(t);b.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var y2="DismissableLayer",ty="dismissableLayer.update",v2="dismissableLayer.pointerDownOutside",_2="dismissableLayer.focusOutside",xE,HA=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Qv=b.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=t,u=b.useContext(HA),[d,h]=b.useState(null),p=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=b.useState({}),E=dr(e,T=>h(T)),y=Array.from(u.layers),[S]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),_=y.indexOf(S),v=d?y.indexOf(d):-1,I=u.layersWithOutsidePointerEventsDisabled.size>0,D=v>=_,O=E2(T=>{const w=T.target,P=[...u.branches].some(x=>x.contains(w));!D||P||(i==null||i(T),o==null||o(T),T.defaultPrevented||a==null||a())},p),V=T2(T=>{const w=T.target;[...u.branches].some(x=>x.contains(w))||(s==null||s(T),o==null||o(T),T.defaultPrevented||a==null||a())},p);return g2(T=>{v===u.layers.size-1&&(r==null||r(T),!T.defaultPrevented&&a&&(T.preventDefault(),a()))},p),b.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(xE=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),bE(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=xE)}},[d,p,n,u]),b.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),bE())},[d,u]),b.useEffect(()=>{const T=()=>m({});return document.addEventListener(ty,T),()=>document.removeEventListener(ty,T)},[]),N.jsx(En.div,{...l,ref:E,style:{pointerEvents:I?D?"auto":"none":void 0,...t.style},onFocusCapture:_t(t.onFocusCapture,V.onFocusCapture),onBlurCapture:_t(t.onBlurCapture,V.onBlurCapture),onPointerDownCapture:_t(t.onPointerDownCapture,O.onPointerDownCapture)})});Qv.displayName=y2;var w2="DismissableLayerBranch",KA=b.forwardRef((t,e)=>{const n=b.useContext(HA),r=b.useRef(null),i=dr(e,r);return b.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),N.jsx(En.div,{...t,ref:i})});KA.displayName=w2;function E2(t,e=globalThis==null?void 0:globalThis.document){const n=ys(t),r=b.useRef(!1),i=b.useRef(()=>{});return b.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){GA(v2,n,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function T2(t,e=globalThis==null?void 0:globalThis.document){const n=ys(t),r=b.useRef(!1);return b.useEffect(()=>{const i=s=>{s.target&&!r.current&&GA(_2,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function bE(){const t=new CustomEvent(ty);document.dispatchEvent(t)}function GA(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?WA(i,s):i.dispatchEvent(s)}var I2=Qv,S2=KA,vs=globalThis!=null&&globalThis.document?b.useLayoutEffect:()=>{},A2="Portal",QA=b.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[i,s]=b.useState(!1);vs(()=>s(!0),[]);const o=n||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?BA.createPortal(N.jsx(En.div,{...r,ref:e}),o):null});QA.displayName=A2;function P2(t,e){return b.useReducer((n,r)=>e[n][r]??n,t)}var Yv=t=>{const{present:e,children:n}=t,r=x2(e),i=typeof n=="function"?n({present:r.isPresent}):b.Children.only(n),s=dr(r.ref,b2(i));return typeof n=="function"||r.isPresent?b.cloneElement(i,{ref:s}):null};Yv.displayName="Presence";function x2(t){const[e,n]=b.useState(),r=b.useRef(null),i=b.useRef(t),s=b.useRef("none"),o=t?"mounted":"unmounted",[a,l]=P2(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return b.useEffect(()=>{const u=Md(r.current);s.current=a==="mounted"?u:"none"},[a]),vs(()=>{const u=r.current,d=i.current;if(d!==t){const p=s.current,m=Md(u);t?l("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(d&&p!==m?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,l]),vs(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,h=m=>{const y=Md(r.current).includes(m.animationName);if(m.target===e&&y&&(l("ANIMATION_END"),!i.current)){const S=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=S)})}},p=m=>{m.target===e&&(s.current=Md(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:b.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function Md(t){return(t==null?void 0:t.animationName)||"none"}function b2(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var R2=F1[" useInsertionEffect ".trim().toString()]||vs;function C2({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[i,s,o]=k2({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:i;{const d=b.useRef(t!==void 0);b.useEffect(()=>{const h=d.current;h!==a&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=a},[a,r])}const u=b.useCallback(d=>{var h;if(a){const p=D2(d)?d(t):d;p!==t&&((h=o.current)==null||h.call(o,p))}else s(d)},[a,t,s,o]);return[l,u]}function k2({defaultProp:t,onChange:e}){const[n,r]=b.useState(t),i=b.useRef(n),s=b.useRef(e);return R2(()=>{s.current=e},[e]),b.useEffect(()=>{var o;i.current!==n&&((o=s.current)==null||o.call(s,n),i.current=n)},[n,i]),[n,r,s]}function D2(t){return typeof t=="function"}var N2=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),O2="VisuallyHidden",tp=b.forwardRef((t,e)=>N.jsx(En.span,{...t,ref:e,style:{...N2,...t.style}}));tp.displayName=O2;var V2=tp,Jv="ToastProvider",[Xv,M2,L2]=p2("Toast"),[YA,D$]=ep("Toast",[L2]),[F2,np]=YA(Jv),JA=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:o}=t,[a,l]=b.useState(null),[u,d]=b.useState(0),h=b.useRef(!1),p=b.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Jv}\`. Expected non-empty \`string\`.`),N.jsx(Xv.Provider,{scope:e,children:N.jsx(F2,{scope:e,label:n,duration:r,swipeDirection:i,swipeThreshold:s,toastCount:u,viewport:a,onViewportChange:l,onToastAdd:b.useCallback(()=>d(m=>m+1),[]),onToastRemove:b.useCallback(()=>d(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:p,children:o})})};JA.displayName=Jv;var XA="ToastViewport",U2=["F8"],ny="toast.viewportPause",ry="toast.viewportResume",ZA=b.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=U2,label:i="Notifications ({hotkey})",...s}=t,o=np(XA,n),a=M2(n),l=b.useRef(null),u=b.useRef(null),d=b.useRef(null),h=b.useRef(null),p=dr(e,h,o.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),E=o.toastCount>0;b.useEffect(()=>{const S=_=>{var I;r.length!==0&&r.every(D=>_[D]||_.code===D)&&((I=h.current)==null||I.focus())};return document.addEventListener("keydown",S),()=>document.removeEventListener("keydown",S)},[r]),b.useEffect(()=>{const S=l.current,_=h.current;if(E&&S&&_){const v=()=>{if(!o.isClosePausedRef.current){const V=new CustomEvent(ny);_.dispatchEvent(V),o.isClosePausedRef.current=!0}},I=()=>{if(o.isClosePausedRef.current){const V=new CustomEvent(ry);_.dispatchEvent(V),o.isClosePausedRef.current=!1}},D=V=>{!S.contains(V.relatedTarget)&&I()},O=()=>{S.contains(document.activeElement)||I()};return S.addEventListener("focusin",v),S.addEventListener("focusout",D),S.addEventListener("pointermove",v),S.addEventListener("pointerleave",O),window.addEventListener("blur",v),window.addEventListener("focus",I),()=>{S.removeEventListener("focusin",v),S.removeEventListener("focusout",D),S.removeEventListener("pointermove",v),S.removeEventListener("pointerleave",O),window.removeEventListener("blur",v),window.removeEventListener("focus",I)}}},[E,o.isClosePausedRef]);const y=b.useCallback(({tabbingDirection:S})=>{const v=a().map(I=>{const D=I.ref.current,O=[D,...X2(D)];return S==="forwards"?O:O.reverse()});return(S==="forwards"?v.reverse():v).flat()},[a]);return b.useEffect(()=>{const S=h.current;if(S){const _=v=>{var O,V,T;const I=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!I){const w=document.activeElement,P=v.shiftKey;if(v.target===S&&P){(O=u.current)==null||O.focus();return}const k=y({tabbingDirection:P?"backwards":"forwards"}),R=k.findIndex(W=>W===w);Vm(k.slice(R+1))?v.preventDefault():P?(V=u.current)==null||V.focus():(T=d.current)==null||T.focus()}};return S.addEventListener("keydown",_),()=>S.removeEventListener("keydown",_)}},[a,y]),N.jsxs(S2,{ref:l,role:"region","aria-label":i.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:E?void 0:"none"},children:[E&&N.jsx(iy,{ref:u,onFocusFromOutsideViewport:()=>{const S=y({tabbingDirection:"forwards"});Vm(S)}}),N.jsx(Xv.Slot,{scope:n,children:N.jsx(En.ol,{tabIndex:-1,...s,ref:p})}),E&&N.jsx(iy,{ref:d,onFocusFromOutsideViewport:()=>{const S=y({tabbingDirection:"backwards"});Vm(S)}})]})});ZA.displayName=XA;var eP="ToastFocusProxy",iy=b.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...i}=t,s=np(eP,n);return N.jsx(tp,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:o=>{var u;const a=o.relatedTarget;!((u=s.viewport)!=null&&u.contains(a))&&r()}})});iy.displayName=eP;var Nu="Toast",j2="toast.swipeStart",B2="toast.swipeMove",$2="toast.swipeCancel",z2="toast.swipeEnd",tP=b.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:i,onOpenChange:s,...o}=t,[a,l]=C2({prop:r,defaultProp:i??!0,onChange:s,caller:Nu});return N.jsx(Yv,{present:n||a,children:N.jsx(H2,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:ys(t.onPause),onResume:ys(t.onResume),onSwipeStart:_t(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:_t(t.onSwipeMove,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:_t(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:_t(t.onSwipeEnd,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),l(!1)})})})});tP.displayName=Nu;var[q2,W2]=YA(Nu,{onClose(){}}),H2=b.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:i,open:s,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:u,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:p,onSwipeEnd:m,...E}=t,y=np(Nu,n),[S,_]=b.useState(null),v=dr(e,W=>_(W)),I=b.useRef(null),D=b.useRef(null),O=i||y.duration,V=b.useRef(0),T=b.useRef(O),w=b.useRef(0),{onToastAdd:P,onToastRemove:x}=y,C=ys(()=>{var le;(S==null?void 0:S.contains(document.activeElement))&&((le=y.viewport)==null||le.focus()),o()}),k=b.useCallback(W=>{!W||W===1/0||(window.clearTimeout(w.current),V.current=new Date().getTime(),w.current=window.setTimeout(C,W))},[C]);b.useEffect(()=>{const W=y.viewport;if(W){const le=()=>{k(T.current),u==null||u()},se=()=>{const G=new Date().getTime()-V.current;T.current=T.current-G,window.clearTimeout(w.current),l==null||l()};return W.addEventListener(ny,se),W.addEventListener(ry,le),()=>{W.removeEventListener(ny,se),W.removeEventListener(ry,le)}}},[y.viewport,O,l,u,k]),b.useEffect(()=>{s&&!y.isClosePausedRef.current&&k(O)},[s,O,y.isClosePausedRef,k]),b.useEffect(()=>(P(),()=>x()),[P,x]);const R=b.useMemo(()=>S?lP(S):null,[S]);return y.viewport?N.jsxs(N.Fragment,{children:[R&&N.jsx(K2,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:R}),N.jsx(q2,{scope:n,onClose:C,children:Du.createPortal(N.jsx(Xv.ItemSlot,{scope:n,children:N.jsx(I2,{asChild:!0,onEscapeKeyDown:_t(a,()=>{y.isFocusedToastEscapeKeyDownRef.current||C(),y.isFocusedToastEscapeKeyDownRef.current=!1}),children:N.jsx(En.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":y.swipeDirection,...E,ref:v,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:_t(t.onKeyDown,W=>{W.key==="Escape"&&(a==null||a(W.nativeEvent),W.nativeEvent.defaultPrevented||(y.isFocusedToastEscapeKeyDownRef.current=!0,C()))}),onPointerDown:_t(t.onPointerDown,W=>{W.button===0&&(I.current={x:W.clientX,y:W.clientY})}),onPointerMove:_t(t.onPointerMove,W=>{if(!I.current)return;const le=W.clientX-I.current.x,se=W.clientY-I.current.y,G=!!D.current,B=["left","right"].includes(y.swipeDirection),F=["left","up"].includes(y.swipeDirection)?Math.min:Math.max,H=B?F(0,le):0,ae=B?0:F(0,se),X=W.pointerType==="touch"?10:2,Z={x:H,y:ae},ce={originalEvent:W,delta:Z};G?(D.current=Z,Ld(B2,h,ce,{discrete:!1})):RE(Z,y.swipeDirection,X)?(D.current=Z,Ld(j2,d,ce,{discrete:!1}),W.target.setPointerCapture(W.pointerId)):(Math.abs(le)>X||Math.abs(se)>X)&&(I.current=null)}),onPointerUp:_t(t.onPointerUp,W=>{const le=D.current,se=W.target;if(se.hasPointerCapture(W.pointerId)&&se.releasePointerCapture(W.pointerId),D.current=null,I.current=null,le){const G=W.currentTarget,B={originalEvent:W,delta:le};RE(le,y.swipeDirection,y.swipeThreshold)?Ld(z2,m,B,{discrete:!0}):Ld($2,p,B,{discrete:!0}),G.addEventListener("click",F=>F.preventDefault(),{once:!0})}})})})}),y.viewport)})]}):null}),K2=t=>{const{__scopeToast:e,children:n,...r}=t,i=np(Nu,e),[s,o]=b.useState(!1),[a,l]=b.useState(!1);return Y2(()=>o(!0)),b.useEffect(()=>{const u=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(u)},[]),a?null:N.jsx(QA,{asChild:!0,children:N.jsx(tp,{...r,children:s&&N.jsxs(N.Fragment,{children:[i.label," ",n]})})})},G2="ToastTitle",nP=b.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return N.jsx(En.div,{...r,ref:e})});nP.displayName=G2;var Q2="ToastDescription",rP=b.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return N.jsx(En.div,{...r,ref:e})});rP.displayName=Q2;var iP="ToastAction",sP=b.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?N.jsx(aP,{altText:n,asChild:!0,children:N.jsx(Zv,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${iP}\`. Expected non-empty \`string\`.`),null)});sP.displayName=iP;var oP="ToastClose",Zv=b.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,i=W2(oP,n);return N.jsx(aP,{asChild:!0,children:N.jsx(En.button,{type:"button",...r,ref:e,onClick:_t(t.onClick,i.onClose)})})});Zv.displayName=oP;var aP=b.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...i}=t;return N.jsx(En.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function lP(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),J2(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!i)if(s){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...lP(r))}}),e}function Ld(t,e,n,{discrete:r}){const i=n.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?WA(i,s):i.dispatchEvent(s)}var RE=(t,e,n=0)=>{const r=Math.abs(t.x),i=Math.abs(t.y),s=r>i;return e==="left"||e==="right"?s&&r>n:!s&&i>n};function Y2(t=()=>{}){const e=ys(t);vs(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function J2(t){return t.nodeType===t.ELEMENT_NODE}function X2(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Vm(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var Z2=JA,cP=ZA,uP=tP,dP=nP,hP=rP,fP=sP,pP=Zv;function mP(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=mP(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function gP(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=mP(t))&&(r&&(r+=" "),r+=e);return r}const CE=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,kE=gP,eO=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return kE(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(u=>{const d=n==null?void 0:n[u],h=s==null?void 0:s[u];if(d===null)return null;const p=CE(d)||CE(h);return i[u][p]}),a=n&&Object.entries(n).reduce((u,d)=>{let[h,p]=d;return p===void 0||(u[h]=p),u},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:h,className:p,...m}=d;return Object.entries(m).every(E=>{let[y,S]=E;return Array.isArray(S)?S.includes({...s,...a}[y]):{...s,...a}[y]===S})?[...u,h,p]:u},[]);return kE(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tO=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),yP=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var nO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rO=b.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>b.createElement("svg",{ref:l,...nO,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:yP("lucide",i),...a},[...o.map(([u,d])=>b.createElement(u,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const an=(t,e)=>{const n=b.forwardRef(({className:r,...i},s)=>b.createElement(rO,{ref:s,iconNode:e,className:yP(`lucide-${tO(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iO=an("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sO=an("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oO=an("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aO=an("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lO=an("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cO=an("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DE=an("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uO=an("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NE=an("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mm=an("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OE=an("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dO=an("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hO=an("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fO=an("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pO=an("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),e_="-",mO=t=>{const e=yO(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(e_);return a[0]===""&&a.length!==1&&a.shift(),vP(a,e)||gO(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},vP=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?vP(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(e_);return(o=e.validators.find(({validator:a})=>a(s)))==null?void 0:o.classGroupId},VE=/^\[(.+)\]$/,gO=t=>{if(VE.test(t)){const e=VE.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},yO=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return _O(Object.entries(t.classGroups),n).forEach(([s,o])=>{sy(o,r,s,e)}),r},sy=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:ME(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(vO(i)){sy(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,o])=>{sy(o,ME(e,s),n,r)})})},ME=(t,e)=>{let n=t;return e.split(e_).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},vO=t=>t.isThemeGetter,_O=(t,e)=>e?t.map(([n,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,a])=>[e+o,a])):s);return[n,i]}):t,wO=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(s,o)=>{n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){n.has(s)?n.set(s,o):i(s,o)}}},_P="!",EO=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],s=e.length,o=a=>{const l=[];let u=0,d=0,h;for(let S=0;S<a.length;S++){let _=a[S];if(u===0){if(_===i&&(r||a.slice(S,S+s)===e)){l.push(a.slice(d,S)),d=S+s;continue}if(_==="/"){h=S;continue}}_==="["?u++:_==="]"&&u--}const p=l.length===0?a:a.substring(d),m=p.startsWith(_P),E=m?p.substring(1):p,y=h&&h>d?h-d:void 0;return{modifiers:l,hasImportantModifier:m,baseClassName:E,maybePostfixModifierPosition:y}};return n?a=>n({className:a,parseClassName:o}):o},TO=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},IO=t=>({cache:wO(t.cacheSize),parseClassName:EO(t),...mO(t)}),SO=/\s+/,AO=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=[],o=t.trim().split(SO);let a="";for(let l=o.length-1;l>=0;l-=1){const u=o[l],{modifiers:d,hasImportantModifier:h,baseClassName:p,maybePostfixModifierPosition:m}=n(u);let E=!!m,y=r(E?p.substring(0,m):p);if(!y){if(!E){a=u+(a.length>0?" "+a:a);continue}if(y=r(p),!y){a=u+(a.length>0?" "+a:a);continue}E=!1}const S=TO(d).join(":"),_=h?S+_P:S,v=_+y;if(s.includes(v))continue;s.push(v);const I=i(y,E);for(let D=0;D<I.length;++D){const O=I[D];s.push(_+O)}a=u+(a.length>0?" "+a:a)}return a};function PO(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=wP(e))&&(r&&(r+=" "),r+=n);return r}const wP=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=wP(t[r]))&&(n&&(n+=" "),n+=e);return n};function xO(t,...e){let n,r,i,s=o;function o(l){const u=e.reduce((d,h)=>h(d),t());return n=IO(u),r=n.cache.get,i=n.cache.set,s=a,a(l)}function a(l){const u=r(l);if(u)return u;const d=AO(l,n);return i(l,d),d}return function(){return s(PO.apply(null,arguments))}}const qe=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},EP=/^\[(?:([a-z-]+):)?(.+)\]$/i,bO=/^\d+\/\d+$/,RO=new Set(["px","full","screen"]),CO=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,kO=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,DO=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,NO=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,OO=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Gr=t=>ba(t)||RO.has(t)||bO.test(t),Ci=t=>El(t,"length",$O),ba=t=>!!t&&!Number.isNaN(Number(t)),Lm=t=>El(t,"number",ba),nc=t=>!!t&&Number.isInteger(Number(t)),VO=t=>t.endsWith("%")&&ba(t.slice(0,-1)),pe=t=>EP.test(t),ki=t=>CO.test(t),MO=new Set(["length","size","percentage"]),LO=t=>El(t,MO,TP),FO=t=>El(t,"position",TP),UO=new Set(["image","url"]),jO=t=>El(t,UO,qO),BO=t=>El(t,"",zO),rc=()=>!0,El=(t,e,n)=>{const r=EP.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},$O=t=>kO.test(t)&&!DO.test(t),TP=()=>!1,zO=t=>NO.test(t),qO=t=>OO.test(t),WO=()=>{const t=qe("colors"),e=qe("spacing"),n=qe("blur"),r=qe("brightness"),i=qe("borderColor"),s=qe("borderRadius"),o=qe("borderSpacing"),a=qe("borderWidth"),l=qe("contrast"),u=qe("grayscale"),d=qe("hueRotate"),h=qe("invert"),p=qe("gap"),m=qe("gradientColorStops"),E=qe("gradientColorStopPositions"),y=qe("inset"),S=qe("margin"),_=qe("opacity"),v=qe("padding"),I=qe("saturate"),D=qe("scale"),O=qe("sepia"),V=qe("skew"),T=qe("space"),w=qe("translate"),P=()=>["auto","contain","none"],x=()=>["auto","hidden","clip","visible","scroll"],C=()=>["auto",pe,e],k=()=>[pe,e],R=()=>["",Gr,Ci],W=()=>["auto",ba,pe],le=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],se=()=>["solid","dashed","dotted","double","none"],G=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],B=()=>["start","end","center","between","around","evenly","stretch"],F=()=>["","0",pe],H=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ae=()=>[ba,pe];return{cacheSize:500,separator:":",theme:{colors:[rc],spacing:[Gr,Ci],blur:["none","",ki,pe],brightness:ae(),borderColor:[t],borderRadius:["none","","full",ki,pe],borderSpacing:k(),borderWidth:R(),contrast:ae(),grayscale:F(),hueRotate:ae(),invert:F(),gap:k(),gradientColorStops:[t],gradientColorStopPositions:[VO,Ci],inset:C(),margin:C(),opacity:ae(),padding:k(),saturate:ae(),scale:ae(),sepia:F(),skew:ae(),space:k(),translate:k()},classGroups:{aspect:[{aspect:["auto","square","video",pe]}],container:["container"],columns:[{columns:[ki]}],"break-after":[{"break-after":H()}],"break-before":[{"break-before":H()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...le(),pe]}],overflow:[{overflow:x()}],"overflow-x":[{"overflow-x":x()}],"overflow-y":[{"overflow-y":x()}],overscroll:[{overscroll:P()}],"overscroll-x":[{"overscroll-x":P()}],"overscroll-y":[{"overscroll-y":P()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",nc,pe]}],basis:[{basis:C()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",pe]}],grow:[{grow:F()}],shrink:[{shrink:F()}],order:[{order:["first","last","none",nc,pe]}],"grid-cols":[{"grid-cols":[rc]}],"col-start-end":[{col:["auto",{span:["full",nc,pe]},pe]}],"col-start":[{"col-start":W()}],"col-end":[{"col-end":W()}],"grid-rows":[{"grid-rows":[rc]}],"row-start-end":[{row:["auto",{span:[nc,pe]},pe]}],"row-start":[{"row-start":W()}],"row-end":[{"row-end":W()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",pe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",pe]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...B()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...B(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...B(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[S]}],mx:[{mx:[S]}],my:[{my:[S]}],ms:[{ms:[S]}],me:[{me:[S]}],mt:[{mt:[S]}],mr:[{mr:[S]}],mb:[{mb:[S]}],ml:[{ml:[S]}],"space-x":[{"space-x":[T]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[T]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",pe,e]}],"min-w":[{"min-w":[pe,e,"min","max","fit"]}],"max-w":[{"max-w":[pe,e,"none","full","min","max","fit","prose",{screen:[ki]},ki]}],h:[{h:[pe,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[pe,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[pe,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[pe,e,"auto","min","max","fit"]}],"font-size":[{text:["base",ki,Ci]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Lm]}],"font-family":[{font:[rc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",pe]}],"line-clamp":[{"line-clamp":["none",ba,Lm]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Gr,pe]}],"list-image":[{"list-image":["none",pe]}],"list-style-type":[{list:["none","disc","decimal",pe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[_]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[_]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...se(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Gr,Ci]}],"underline-offset":[{"underline-offset":["auto",Gr,pe]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:k()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",pe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",pe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[_]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...le(),FO]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",LO]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},jO]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[E]}],"gradient-via-pos":[{via:[E]}],"gradient-to-pos":[{to:[E]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[_]}],"border-style":[{border:[...se(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[_]}],"divide-style":[{divide:se()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...se()]}],"outline-offset":[{"outline-offset":[Gr,pe]}],"outline-w":[{outline:[Gr,Ci]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:R()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[_]}],"ring-offset-w":[{"ring-offset":[Gr,Ci]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",ki,BO]}],"shadow-color":[{shadow:[rc]}],opacity:[{opacity:[_]}],"mix-blend":[{"mix-blend":[...G(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":G()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",ki,pe]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[I]}],sepia:[{sepia:[O]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[_]}],"backdrop-saturate":[{"backdrop-saturate":[I]}],"backdrop-sepia":[{"backdrop-sepia":[O]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",pe]}],duration:[{duration:ae()}],ease:[{ease:["linear","in","out","in-out",pe]}],delay:[{delay:ae()}],animate:[{animate:["none","spin","ping","pulse","bounce",pe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[D]}],"scale-x":[{"scale-x":[D]}],"scale-y":[{"scale-y":[D]}],rotate:[{rotate:[nc,pe]}],"translate-x":[{"translate-x":[w]}],"translate-y":[{"translate-y":[w]}],"skew-x":[{"skew-x":[V]}],"skew-y":[{"skew-y":[V]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",pe]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",pe]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":k()}],"scroll-mx":[{"scroll-mx":k()}],"scroll-my":[{"scroll-my":k()}],"scroll-ms":[{"scroll-ms":k()}],"scroll-me":[{"scroll-me":k()}],"scroll-mt":[{"scroll-mt":k()}],"scroll-mr":[{"scroll-mr":k()}],"scroll-mb":[{"scroll-mb":k()}],"scroll-ml":[{"scroll-ml":k()}],"scroll-p":[{"scroll-p":k()}],"scroll-px":[{"scroll-px":k()}],"scroll-py":[{"scroll-py":k()}],"scroll-ps":[{"scroll-ps":k()}],"scroll-pe":[{"scroll-pe":k()}],"scroll-pt":[{"scroll-pt":k()}],"scroll-pr":[{"scroll-pr":k()}],"scroll-pb":[{"scroll-pb":k()}],"scroll-pl":[{"scroll-pl":k()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",pe]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Gr,Ci,Lm]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},HO=xO(WO);function Bo(...t){return HO(gP(t))}const KO=Z2,IP=b.forwardRef(({className:t,...e},n)=>N.jsx(cP,{ref:n,className:Bo("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));IP.displayName=cP.displayName;const GO=eO("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),SP=b.forwardRef(({className:t,variant:e,...n},r)=>N.jsx(uP,{ref:r,className:Bo(GO({variant:e}),t),...n}));SP.displayName=uP.displayName;const QO=b.forwardRef(({className:t,...e},n)=>N.jsx(fP,{ref:n,className:Bo("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));QO.displayName=fP.displayName;const AP=b.forwardRef(({className:t,...e},n)=>N.jsx(pP,{ref:n,className:Bo("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:N.jsx(pO,{className:"h-4 w-4"})}));AP.displayName=pP.displayName;const PP=b.forwardRef(({className:t,...e},n)=>N.jsx(dP,{ref:n,className:Bo("text-sm font-semibold",t),...e}));PP.displayName=dP.displayName;const xP=b.forwardRef(({className:t,...e},n)=>N.jsx(hP,{ref:n,className:Bo("text-sm opacity-90",t),...e}));xP.displayName=hP.displayName;function YO(){const{toasts:t}=a2();return N.jsxs(KO,{children:[t.map(function({id:e,title:n,description:r,action:i,...s}){return N.jsxs(SP,{...s,children:[N.jsxs("div",{className:"grid gap-1",children:[n&&N.jsx(PP,{children:n}),r&&N.jsx(xP,{children:r})]}),i,N.jsx(AP,{})]},e)}),N.jsx(IP,{})]})}var LE=["light","dark"],JO="(prefers-color-scheme: dark)",XO=b.createContext(void 0),ZO={setTheme:t=>{},themes:[]},eV=()=>{var t;return(t=b.useContext(XO))!=null?t:ZO};b.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:i,defaultTheme:s,value:o,attrs:a,nonce:l})=>{let u=s==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(E=>`'${E}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=i?LE.includes(s)&&s?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${s}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",p=(E,y=!1,S=!0)=>{let _=o?o[E]:E,v=y?E+"|| ''":`'${_}'`,I="";return i&&S&&!y&&LE.includes(E)&&(I+=`d.style.colorScheme = '${E}';`),n==="class"?y||_?I+=`c.add(${v})`:I+="null":_&&(I+=`d[s](n,${v})`),I},m=t?`!function(){${d}${p(t)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${u})){var t='${JO}',m=window.matchMedia(t);if(m.media!==t||m.matches){${p("dark")}}else{${p("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${p(o?"x[e]":"e",!0)}}${u?"":"else{"+p(s,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${p(o?"x[e]":"e",!0)}}else{${p(s,!1,!1)};}${h}}catch(t){}}();`;return b.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:m}})});var tV=t=>{switch(t){case"success":return iV;case"info":return oV;case"warning":return sV;case"error":return aV;default:return null}},nV=Array(12).fill(0),rV=({visible:t,className:e})=>z.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},z.createElement("div",{className:"sonner-spinner"},nV.map((n,r)=>z.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),iV=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),sV=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),oV=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),aV=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),lV=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},z.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),z.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),cV=()=>{let[t,e]=z.useState(document.hidden);return z.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},oy=1,uV=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;let{message:r,...i}=e,s=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:oy++,o=this.toasts.find(l=>l.id===s),a=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),o?this.toasts=this.toasts.map(l=>l.id===s?(this.publish({...l,...e,id:s,title:r}),{...l,...e,id:s,dismissible:a,title:r}):l):this.addToast({title:r,...i,dismissible:a,id:s}),s},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),this.subscribers.forEach(n=>n({id:e,dismiss:!0})),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));let i=e instanceof Promise?e:e(),s=r!==void 0,o,a=i.then(async u=>{if(o=["resolve",u],z.isValidElement(u))s=!1,this.create({id:r,type:"default",message:u});else if(hV(u)&&!u.ok){s=!1;let d=typeof n.error=="function"?await n.error(`HTTP error! status: ${u.status}`):n.error,h=typeof n.description=="function"?await n.description(`HTTP error! status: ${u.status}`):n.description;this.create({id:r,type:"error",message:d,description:h})}else if(n.success!==void 0){s=!1;let d=typeof n.success=="function"?await n.success(u):n.success,h=typeof n.description=="function"?await n.description(u):n.description;this.create({id:r,type:"success",message:d,description:h})}}).catch(async u=>{if(o=["reject",u],n.error!==void 0){s=!1;let d=typeof n.error=="function"?await n.error(u):n.error,h=typeof n.description=="function"?await n.description(u):n.description;this.create({id:r,type:"error",message:d,description:h})}}).finally(()=>{var u;s&&(this.dismiss(r),r=void 0),(u=n.finally)==null||u.call(n)}),l=()=>new Promise((u,d)=>a.then(()=>o[0]==="reject"?d(o[1]):u(o[1])).catch(d));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,n)=>{let r=(n==null?void 0:n.id)||oy++;return this.create({jsx:e(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},dn=new uV,dV=(t,e)=>{let n=(e==null?void 0:e.id)||oy++;return dn.addToast({title:t,...e,id:n}),n},hV=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",fV=dV,pV=()=>dn.toasts,mV=()=>dn.getActiveToasts(),Fd=Object.assign(fV,{success:dn.success,info:dn.info,warning:dn.warning,error:dn.error,custom:dn.custom,message:dn.message,promise:dn.promise,dismiss:dn.dismiss,loading:dn.loading},{getHistory:pV,getToasts:mV});function gV(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}gV(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Ud(t){return t.label!==void 0}var yV=3,vV="32px",_V="16px",FE=4e3,wV=356,EV=14,TV=20,IV=200;function Qn(...t){return t.filter(Boolean).join(" ")}function SV(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var AV=t=>{var e,n,r,i,s,o,a,l,u,d,h;let{invert:p,toast:m,unstyled:E,interacting:y,setHeights:S,visibleToasts:_,heights:v,index:I,toasts:D,expanded:O,removeToast:V,defaultRichColors:T,closeButton:w,style:P,cancelButtonStyle:x,actionButtonStyle:C,className:k="",descriptionClassName:R="",duration:W,position:le,gap:se,loadingIcon:G,expandByDefault:B,classNames:F,icons:H,closeButtonAriaLabel:ae="Close toast",pauseWhenPageIsHidden:X}=t,[Z,ce]=z.useState(null),[we,Le]=z.useState(null),[me,Ke]=z.useState(!1),[Jt,Xt]=z.useState(!1),[St,Ln]=z.useState(!1),[ln,mr]=z.useState(!1),[$r,Bs]=z.useState(!1),[Vl,$s]=z.useState(0),[zr,zo]=z.useState(0),Ii=z.useRef(m.duration||W||FE),td=z.useRef(null),Hn=z.useRef(null),Ml=I===0,nd=I+1<=_,Ne=m.type,st=m.dismissible!==!1,qo=m.className||"",rd=m.descriptionClassName||"",zs=z.useMemo(()=>v.findIndex(de=>de.toastId===m.id)||0,[v,m.id]),Hp=z.useMemo(()=>{var de;return(de=m.closeButton)!=null?de:w},[m.closeButton,w]),Si=z.useMemo(()=>m.duration||W||FE,[m.duration,W]),Wo=z.useRef(0),qr=z.useRef(0),Ho=z.useRef(0),Ai=z.useRef(null),[Kp,Ll]=le.split("-"),Fl=z.useMemo(()=>v.reduce((de,Te,Fe)=>Fe>=zs?de:de+Te.height,0),[v,zs]),Ul=cV(),qs=m.invert||p,Ws=Ne==="loading";qr.current=z.useMemo(()=>zs*se+Fl,[zs,Fl]),z.useEffect(()=>{Ii.current=Si},[Si]),z.useEffect(()=>{Ke(!0)},[]),z.useEffect(()=>{let de=Hn.current;if(de){let Te=de.getBoundingClientRect().height;return zo(Te),S(Fe=>[{toastId:m.id,height:Te,position:m.position},...Fe]),()=>S(Fe=>Fe.filter(Rt=>Rt.toastId!==m.id))}},[S,m.id]),z.useLayoutEffect(()=>{if(!me)return;let de=Hn.current,Te=de.style.height;de.style.height="auto";let Fe=de.getBoundingClientRect().height;de.style.height=Te,zo(Fe),S(Rt=>Rt.find(cn=>cn.toastId===m.id)?Rt.map(cn=>cn.toastId===m.id?{...cn,height:Fe}:cn):[{toastId:m.id,height:Fe,position:m.position},...Rt])},[me,m.title,m.description,S,m.id]);let Fn=z.useCallback(()=>{Xt(!0),$s(qr.current),S(de=>de.filter(Te=>Te.toastId!==m.id)),setTimeout(()=>{V(m)},IV)},[m,V,S,qr]);z.useEffect(()=>{if(m.promise&&Ne==="loading"||m.duration===1/0||m.type==="loading")return;let de;return O||y||X&&Ul?(()=>{if(Ho.current<Wo.current){let Te=new Date().getTime()-Wo.current;Ii.current=Ii.current-Te}Ho.current=new Date().getTime()})():Ii.current!==1/0&&(Wo.current=new Date().getTime(),de=setTimeout(()=>{var Te;(Te=m.onAutoClose)==null||Te.call(m,m),Fn()},Ii.current)),()=>clearTimeout(de)},[O,y,m,Ne,X,Ul,Fn]),z.useEffect(()=>{m.delete&&Fn()},[Fn,m.delete]);function Wr(){var de,Te,Fe;return H!=null&&H.loading?z.createElement("div",{className:Qn(F==null?void 0:F.loader,(de=m==null?void 0:m.classNames)==null?void 0:de.loader,"sonner-loader"),"data-visible":Ne==="loading"},H.loading):G?z.createElement("div",{className:Qn(F==null?void 0:F.loader,(Te=m==null?void 0:m.classNames)==null?void 0:Te.loader,"sonner-loader"),"data-visible":Ne==="loading"},G):z.createElement(rV,{className:Qn(F==null?void 0:F.loader,(Fe=m==null?void 0:m.classNames)==null?void 0:Fe.loader),visible:Ne==="loading"})}return z.createElement("li",{tabIndex:0,ref:Hn,className:Qn(k,qo,F==null?void 0:F.toast,(e=m==null?void 0:m.classNames)==null?void 0:e.toast,F==null?void 0:F.default,F==null?void 0:F[Ne],(n=m==null?void 0:m.classNames)==null?void 0:n[Ne]),"data-sonner-toast":"","data-rich-colors":(r=m.richColors)!=null?r:T,"data-styled":!(m.jsx||m.unstyled||E),"data-mounted":me,"data-promise":!!m.promise,"data-swiped":$r,"data-removed":Jt,"data-visible":nd,"data-y-position":Kp,"data-x-position":Ll,"data-index":I,"data-front":Ml,"data-swiping":St,"data-dismissible":st,"data-type":Ne,"data-invert":qs,"data-swipe-out":ln,"data-swipe-direction":we,"data-expanded":!!(O||B&&me),style:{"--index":I,"--toasts-before":I,"--z-index":D.length-I,"--offset":`${Jt?Vl:qr.current}px`,"--initial-height":B?"auto":`${zr}px`,...P,...m.style},onDragEnd:()=>{Ln(!1),ce(null),Ai.current=null},onPointerDown:de=>{Ws||!st||(td.current=new Date,$s(qr.current),de.target.setPointerCapture(de.pointerId),de.target.tagName!=="BUTTON"&&(Ln(!0),Ai.current={x:de.clientX,y:de.clientY}))},onPointerUp:()=>{var de,Te,Fe,Rt;if(ln||!st)return;Ai.current=null;let cn=Number(((de=Hn.current)==null?void 0:de.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Ge=Number(((Te=Hn.current)==null?void 0:Te.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),gr=new Date().getTime()-((Fe=td.current)==null?void 0:Fe.getTime()),Ct=Z==="x"?cn:Ge,un=Math.abs(Ct)/gr;if(Math.abs(Ct)>=TV||un>.11){$s(qr.current),(Rt=m.onDismiss)==null||Rt.call(m,m),Le(Z==="x"?cn>0?"right":"left":Ge>0?"down":"up"),Fn(),mr(!0),Bs(!1);return}Ln(!1),ce(null)},onPointerMove:de=>{var Te,Fe,Rt,cn;if(!Ai.current||!st||((Te=window.getSelection())==null?void 0:Te.toString().length)>0)return;let Ge=de.clientY-Ai.current.y,gr=de.clientX-Ai.current.x,Ct=(Fe=t.swipeDirections)!=null?Fe:SV(le);!Z&&(Math.abs(gr)>1||Math.abs(Ge)>1)&&ce(Math.abs(gr)>Math.abs(Ge)?"x":"y");let un={x:0,y:0};Z==="y"?(Ct.includes("top")||Ct.includes("bottom"))&&(Ct.includes("top")&&Ge<0||Ct.includes("bottom")&&Ge>0)&&(un.y=Ge):Z==="x"&&(Ct.includes("left")||Ct.includes("right"))&&(Ct.includes("left")&&gr<0||Ct.includes("right")&&gr>0)&&(un.x=gr),(Math.abs(un.x)>0||Math.abs(un.y)>0)&&Bs(!0),(Rt=Hn.current)==null||Rt.style.setProperty("--swipe-amount-x",`${un.x}px`),(cn=Hn.current)==null||cn.style.setProperty("--swipe-amount-y",`${un.y}px`)}},Hp&&!m.jsx?z.createElement("button",{"aria-label":ae,"data-disabled":Ws,"data-close-button":!0,onClick:Ws||!st?()=>{}:()=>{var de;Fn(),(de=m.onDismiss)==null||de.call(m,m)},className:Qn(F==null?void 0:F.closeButton,(i=m==null?void 0:m.classNames)==null?void 0:i.closeButton)},(s=H==null?void 0:H.close)!=null?s:lV):null,m.jsx||b.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:z.createElement(z.Fragment,null,Ne||m.icon||m.promise?z.createElement("div",{"data-icon":"",className:Qn(F==null?void 0:F.icon,(o=m==null?void 0:m.classNames)==null?void 0:o.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||Wr():null,m.type!=="loading"?m.icon||(H==null?void 0:H[Ne])||tV(Ne):null):null,z.createElement("div",{"data-content":"",className:Qn(F==null?void 0:F.content,(a=m==null?void 0:m.classNames)==null?void 0:a.content)},z.createElement("div",{"data-title":"",className:Qn(F==null?void 0:F.title,(l=m==null?void 0:m.classNames)==null?void 0:l.title)},typeof m.title=="function"?m.title():m.title),m.description?z.createElement("div",{"data-description":"",className:Qn(R,rd,F==null?void 0:F.description,(u=m==null?void 0:m.classNames)==null?void 0:u.description)},typeof m.description=="function"?m.description():m.description):null),b.isValidElement(m.cancel)?m.cancel:m.cancel&&Ud(m.cancel)?z.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||x,onClick:de=>{var Te,Fe;Ud(m.cancel)&&st&&((Fe=(Te=m.cancel).onClick)==null||Fe.call(Te,de),Fn())},className:Qn(F==null?void 0:F.cancelButton,(d=m==null?void 0:m.classNames)==null?void 0:d.cancelButton)},m.cancel.label):null,b.isValidElement(m.action)?m.action:m.action&&Ud(m.action)?z.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||C,onClick:de=>{var Te,Fe;Ud(m.action)&&((Fe=(Te=m.action).onClick)==null||Fe.call(Te,de),!de.defaultPrevented&&Fn())},className:Qn(F==null?void 0:F.actionButton,(h=m==null?void 0:m.classNames)==null?void 0:h.actionButton)},m.action.label):null))};function UE(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function PV(t,e){let n={};return[t,e].forEach((r,i)=>{let s=i===1,o=s?"--mobile-offset":"--offset",a=s?_V:vV;function l(u){["top","right","bottom","left"].forEach(d=>{n[`${o}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?n[`${o}-${u}`]=a:n[`${o}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):l(a)}),n}var xV=b.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:i=["altKey","KeyT"],expand:s,closeButton:o,className:a,offset:l,mobileOffset:u,theme:d="light",richColors:h,duration:p,style:m,visibleToasts:E=yV,toastOptions:y,dir:S=UE(),gap:_=EV,loadingIcon:v,icons:I,containerAriaLabel:D="Notifications",pauseWhenPageIsHidden:O}=t,[V,T]=z.useState([]),w=z.useMemo(()=>Array.from(new Set([r].concat(V.filter(X=>X.position).map(X=>X.position)))),[V,r]),[P,x]=z.useState([]),[C,k]=z.useState(!1),[R,W]=z.useState(!1),[le,se]=z.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),G=z.useRef(null),B=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),F=z.useRef(null),H=z.useRef(!1),ae=z.useCallback(X=>{T(Z=>{var ce;return(ce=Z.find(we=>we.id===X.id))!=null&&ce.delete||dn.dismiss(X.id),Z.filter(({id:we})=>we!==X.id)})},[]);return z.useEffect(()=>dn.subscribe(X=>{if(X.dismiss){T(Z=>Z.map(ce=>ce.id===X.id?{...ce,delete:!0}:ce));return}setTimeout(()=>{BA.flushSync(()=>{T(Z=>{let ce=Z.findIndex(we=>we.id===X.id);return ce!==-1?[...Z.slice(0,ce),{...Z[ce],...X},...Z.slice(ce+1)]:[X,...Z]})})})}),[]),z.useEffect(()=>{if(d!=="system"){se(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?se("dark"):se("light")),typeof window>"u")return;let X=window.matchMedia("(prefers-color-scheme: dark)");try{X.addEventListener("change",({matches:Z})=>{se(Z?"dark":"light")})}catch{X.addListener(({matches:ce})=>{try{se(ce?"dark":"light")}catch(we){console.error(we)}})}},[d]),z.useEffect(()=>{V.length<=1&&k(!1)},[V]),z.useEffect(()=>{let X=Z=>{var ce,we;i.every(Le=>Z[Le]||Z.code===Le)&&(k(!0),(ce=G.current)==null||ce.focus()),Z.code==="Escape"&&(document.activeElement===G.current||(we=G.current)!=null&&we.contains(document.activeElement))&&k(!1)};return document.addEventListener("keydown",X),()=>document.removeEventListener("keydown",X)},[i]),z.useEffect(()=>{if(G.current)return()=>{F.current&&(F.current.focus({preventScroll:!0}),F.current=null,H.current=!1)}},[G.current]),z.createElement("section",{ref:e,"aria-label":`${D} ${B}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},w.map((X,Z)=>{var ce;let[we,Le]=X.split("-");return V.length?z.createElement("ol",{key:X,dir:S==="auto"?UE():S,tabIndex:-1,ref:G,className:a,"data-sonner-toaster":!0,"data-theme":le,"data-y-position":we,"data-lifted":C&&V.length>1&&!s,"data-x-position":Le,style:{"--front-toast-height":`${((ce=P[0])==null?void 0:ce.height)||0}px`,"--width":`${wV}px`,"--gap":`${_}px`,...m,...PV(l,u)},onBlur:me=>{H.current&&!me.currentTarget.contains(me.relatedTarget)&&(H.current=!1,F.current&&(F.current.focus({preventScroll:!0}),F.current=null))},onFocus:me=>{me.target instanceof HTMLElement&&me.target.dataset.dismissible==="false"||H.current||(H.current=!0,F.current=me.relatedTarget)},onMouseEnter:()=>k(!0),onMouseMove:()=>k(!0),onMouseLeave:()=>{R||k(!1)},onDragEnd:()=>k(!1),onPointerDown:me=>{me.target instanceof HTMLElement&&me.target.dataset.dismissible==="false"||W(!0)},onPointerUp:()=>W(!1)},V.filter(me=>!me.position&&Z===0||me.position===X).map((me,Ke)=>{var Jt,Xt;return z.createElement(AV,{key:me.id,icons:I,index:Ke,toast:me,defaultRichColors:h,duration:(Jt=y==null?void 0:y.duration)!=null?Jt:p,className:y==null?void 0:y.className,descriptionClassName:y==null?void 0:y.descriptionClassName,invert:n,visibleToasts:E,closeButton:(Xt=y==null?void 0:y.closeButton)!=null?Xt:o,interacting:R,position:X,style:y==null?void 0:y.style,unstyled:y==null?void 0:y.unstyled,classNames:y==null?void 0:y.classNames,cancelButtonStyle:y==null?void 0:y.cancelButtonStyle,actionButtonStyle:y==null?void 0:y.actionButtonStyle,removeToast:ae,toasts:V.filter(St=>St.position==me.position),heights:P.filter(St=>St.position==me.position),setHeights:x,expandByDefault:s,gap:_,loadingIcon:v,expanded:C,pauseWhenPageIsHidden:O,swipeDirections:t.swipeDirections})})):null}))});const bV=({...t})=>{const{theme:e="system"}=eV();return N.jsx(xV,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})},RV=["top","right","bottom","left"],_s=Math.min,An=Math.max,Xh=Math.round,jd=Math.floor,kr=t=>({x:t,y:t}),CV={left:"right",right:"left",bottom:"top",top:"bottom"},kV={start:"end",end:"start"};function ay(t,e,n){return An(t,_s(e,n))}function hi(t,e){return typeof t=="function"?t(e):t}function fi(t){return t.split("-")[0]}function Tl(t){return t.split("-")[1]}function t_(t){return t==="x"?"y":"x"}function n_(t){return t==="y"?"height":"width"}const DV=new Set(["top","bottom"]);function Pr(t){return DV.has(fi(t))?"y":"x"}function r_(t){return t_(Pr(t))}function NV(t,e,n){n===void 0&&(n=!1);const r=Tl(t),i=r_(t),s=n_(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=Zh(o)),[o,Zh(o)]}function OV(t){const e=Zh(t);return[ly(t),e,ly(e)]}function ly(t){return t.replace(/start|end/g,e=>kV[e])}const jE=["left","right"],BE=["right","left"],VV=["top","bottom"],MV=["bottom","top"];function LV(t,e,n){switch(t){case"top":case"bottom":return n?e?BE:jE:e?jE:BE;case"left":case"right":return e?VV:MV;default:return[]}}function FV(t,e,n,r){const i=Tl(t);let s=LV(fi(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(ly)))),s}function Zh(t){return t.replace(/left|right|bottom|top/g,e=>CV[e])}function UV(t){return{top:0,right:0,bottom:0,left:0,...t}}function bP(t){return typeof t!="number"?UV(t):{top:t,right:t,bottom:t,left:t}}function ef(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function $E(t,e,n){let{reference:r,floating:i}=t;const s=Pr(e),o=r_(e),a=n_(o),l=fi(e),u=s==="y",d=r.x+r.width/2-i.width/2,h=r.y+r.height/2-i.height/2,p=r[a]/2-i[a]/2;let m;switch(l){case"top":m={x:d,y:r.y-i.height};break;case"bottom":m={x:d,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:h};break;case"left":m={x:r.x-i.width,y:h};break;default:m={x:r.x,y:r.y}}switch(Tl(e)){case"start":m[o]-=p*(n&&u?-1:1);break;case"end":m[o]+=p*(n&&u?-1:1);break}return m}const jV=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:d,y:h}=$E(u,r,l),p=r,m={},E=0;for(let y=0;y<a.length;y++){const{name:S,fn:_}=a[y],{x:v,y:I,data:D,reset:O}=await _({x:d,y:h,initialPlacement:r,placement:p,strategy:i,middlewareData:m,rects:u,platform:o,elements:{reference:t,floating:e}});d=v??d,h=I??h,m={...m,[S]:{...m[S],...D}},O&&E<=50&&(E++,typeof O=="object"&&(O.placement&&(p=O.placement),O.rects&&(u=O.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):O.rects),{x:d,y:h}=$E(u,p,l)),y=-1)}return{x:d,y:h,placement:p,strategy:i,middlewareData:m}};async function iu(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:p=!1,padding:m=0}=hi(e,t),E=bP(m),S=a[p?h==="floating"?"reference":"floating":h],_=ef(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(S)))==null||n?S:S.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:u,rootBoundary:d,strategy:l})),v=h==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,I=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),D=await(s.isElement==null?void 0:s.isElement(I))?await(s.getScale==null?void 0:s.getScale(I))||{x:1,y:1}:{x:1,y:1},O=ef(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:I,strategy:l}):v);return{top:(_.top-O.top+E.top)/D.y,bottom:(O.bottom-_.bottom+E.bottom)/D.y,left:(_.left-O.left+E.left)/D.x,right:(O.right-_.right+E.right)/D.x}}const BV=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:u,padding:d=0}=hi(t,e)||{};if(u==null)return{};const h=bP(d),p={x:n,y:r},m=r_(i),E=n_(m),y=await o.getDimensions(u),S=m==="y",_=S?"top":"left",v=S?"bottom":"right",I=S?"clientHeight":"clientWidth",D=s.reference[E]+s.reference[m]-p[m]-s.floating[E],O=p[m]-s.reference[m],V=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let T=V?V[I]:0;(!T||!await(o.isElement==null?void 0:o.isElement(V)))&&(T=a.floating[I]||s.floating[E]);const w=D/2-O/2,P=T/2-y[E]/2-1,x=_s(h[_],P),C=_s(h[v],P),k=x,R=T-y[E]-C,W=T/2-y[E]/2+w,le=ay(k,W,R),se=!l.arrow&&Tl(i)!=null&&W!==le&&s.reference[E]/2-(W<k?x:C)-y[E]/2<0,G=se?W<k?W-k:W-R:0;return{[m]:p[m]+G,data:{[m]:le,centerOffset:W-le-G,...se&&{alignmentOffset:G}},reset:se}}}),$V=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:u}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:E="none",flipAlignment:y=!0,...S}=hi(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const _=fi(i),v=Pr(a),I=fi(a)===a,D=await(l.isRTL==null?void 0:l.isRTL(u.floating)),O=p||(I||!y?[Zh(a)]:OV(a)),V=E!=="none";!p&&V&&O.push(...FV(a,y,E,D));const T=[a,...O],w=await iu(e,S),P=[];let x=((r=s.flip)==null?void 0:r.overflows)||[];if(d&&P.push(w[_]),h){const W=NV(i,o,D);P.push(w[W[0]],w[W[1]])}if(x=[...x,{placement:i,overflows:P}],!P.every(W=>W<=0)){var C,k;const W=(((C=s.flip)==null?void 0:C.index)||0)+1,le=T[W];if(le&&(!(h==="alignment"?v!==Pr(le):!1)||x.every(B=>B.overflows[0]>0&&Pr(B.placement)===v)))return{data:{index:W,overflows:x},reset:{placement:le}};let se=(k=x.filter(G=>G.overflows[0]<=0).sort((G,B)=>G.overflows[1]-B.overflows[1])[0])==null?void 0:k.placement;if(!se)switch(m){case"bestFit":{var R;const G=(R=x.filter(B=>{if(V){const F=Pr(B.placement);return F===v||F==="y"}return!0}).map(B=>[B.placement,B.overflows.filter(F=>F>0).reduce((F,H)=>F+H,0)]).sort((B,F)=>B[1]-F[1])[0])==null?void 0:R[0];G&&(se=G);break}case"initialPlacement":se=a;break}if(i!==se)return{reset:{placement:se}}}return{}}}};function zE(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function qE(t){return RV.some(e=>t[e]>=0)}const zV=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=hi(t,e);switch(r){case"referenceHidden":{const s=await iu(e,{...i,elementContext:"reference"}),o=zE(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:qE(o)}}}case"escaped":{const s=await iu(e,{...i,altBoundary:!0}),o=zE(s,n.floating);return{data:{escapedOffsets:o,escaped:qE(o)}}}default:return{}}}}},RP=new Set(["left","top"]);async function qV(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=fi(n),a=Tl(n),l=Pr(n)==="y",u=RP.has(o)?-1:1,d=s&&l?-1:1,h=hi(e,t);let{mainAxis:p,crossAxis:m,alignmentAxis:E}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof E=="number"&&(m=a==="end"?E*-1:E),l?{x:m*d,y:p*u}:{x:p*u,y:m*d}}const WV=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await qV(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},HV=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:S=>{let{x:_,y:v}=S;return{x:_,y:v}}},...l}=hi(t,e),u={x:n,y:r},d=await iu(e,l),h=Pr(fi(i)),p=t_(h);let m=u[p],E=u[h];if(s){const S=p==="y"?"top":"left",_=p==="y"?"bottom":"right",v=m+d[S],I=m-d[_];m=ay(v,m,I)}if(o){const S=h==="y"?"top":"left",_=h==="y"?"bottom":"right",v=E+d[S],I=E-d[_];E=ay(v,E,I)}const y=a.fn({...e,[p]:m,[h]:E});return{...y,data:{x:y.x-n,y:y.y-r,enabled:{[p]:s,[h]:o}}}}}},KV=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:u=!0}=hi(t,e),d={x:n,y:r},h=Pr(i),p=t_(h);let m=d[p],E=d[h];const y=hi(a,e),S=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(l){const I=p==="y"?"height":"width",D=s.reference[p]-s.floating[I]+S.mainAxis,O=s.reference[p]+s.reference[I]-S.mainAxis;m<D?m=D:m>O&&(m=O)}if(u){var _,v;const I=p==="y"?"width":"height",D=RP.has(fi(i)),O=s.reference[h]-s.floating[I]+(D&&((_=o.offset)==null?void 0:_[h])||0)+(D?0:S.crossAxis),V=s.reference[h]+s.reference[I]+(D?0:((v=o.offset)==null?void 0:v[h])||0)-(D?S.crossAxis:0);E<O?E=O:E>V&&(E=V)}return{[p]:m,[h]:E}}}},GV=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...u}=hi(t,e),d=await iu(e,u),h=fi(i),p=Tl(i),m=Pr(i)==="y",{width:E,height:y}=s.floating;let S,_;h==="top"||h==="bottom"?(S=h,_=p===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(_=h,S=p==="end"?"top":"bottom");const v=y-d.top-d.bottom,I=E-d.left-d.right,D=_s(y-d[S],v),O=_s(E-d[_],I),V=!e.middlewareData.shift;let T=D,w=O;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(w=I),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(T=v),V&&!p){const x=An(d.left,0),C=An(d.right,0),k=An(d.top,0),R=An(d.bottom,0);m?w=E-2*(x!==0||C!==0?x+C:An(d.left,d.right)):T=y-2*(k!==0||R!==0?k+R:An(d.top,d.bottom))}await l({...e,availableWidth:w,availableHeight:T});const P=await o.getDimensions(a.floating);return E!==P.width||y!==P.height?{reset:{rects:!0}}:{}}}};function rp(){return typeof window<"u"}function Il(t){return CP(t)?(t.nodeName||"").toLowerCase():"#document"}function kn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Fr(t){var e;return(e=(CP(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function CP(t){return rp()?t instanceof Node||t instanceof kn(t).Node:!1}function hr(t){return rp()?t instanceof Element||t instanceof kn(t).Element:!1}function Mr(t){return rp()?t instanceof HTMLElement||t instanceof kn(t).HTMLElement:!1}function WE(t){return!rp()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof kn(t).ShadowRoot}const QV=new Set(["inline","contents"]);function Ou(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=fr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!QV.has(i)}const YV=new Set(["table","td","th"]);function JV(t){return YV.has(Il(t))}const XV=[":popover-open",":modal"];function ip(t){return XV.some(e=>{try{return t.matches(e)}catch{return!1}})}const ZV=["transform","translate","scale","rotate","perspective"],eM=["transform","translate","scale","rotate","perspective","filter"],tM=["paint","layout","strict","content"];function i_(t){const e=s_(),n=hr(t)?fr(t):t;return ZV.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||eM.some(r=>(n.willChange||"").includes(r))||tM.some(r=>(n.contain||"").includes(r))}function nM(t){let e=ws(t);for(;Mr(e)&&!Qa(e);){if(i_(e))return e;if(ip(e))return null;e=ws(e)}return null}function s_(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const rM=new Set(["html","body","#document"]);function Qa(t){return rM.has(Il(t))}function fr(t){return kn(t).getComputedStyle(t)}function sp(t){return hr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ws(t){if(Il(t)==="html")return t;const e=t.assignedSlot||t.parentNode||WE(t)&&t.host||Fr(t);return WE(e)?e.host:e}function kP(t){const e=ws(t);return Qa(e)?t.ownerDocument?t.ownerDocument.body:t.body:Mr(e)&&Ou(e)?e:kP(e)}function su(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=kP(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=kn(i);if(s){const a=cy(o);return e.concat(o,o.visualViewport||[],Ou(i)?i:[],a&&n?su(a):[])}return e.concat(i,su(i,[],n))}function cy(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function DP(t){const e=fr(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Mr(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=Xh(n)!==s||Xh(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function o_(t){return hr(t)?t:t.contextElement}function Ra(t){const e=o_(t);if(!Mr(e))return kr(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=DP(e);let o=(s?Xh(n.width):n.width)/r,a=(s?Xh(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const iM=kr(0);function NP(t){const e=kn(t);return!s_()||!e.visualViewport?iM:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function sM(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==kn(t)?!1:e}function bo(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=o_(t);let o=kr(1);e&&(r?hr(r)&&(o=Ra(r)):o=Ra(t));const a=sM(s,n,r)?NP(s):kr(0);let l=(i.left+a.x)/o.x,u=(i.top+a.y)/o.y,d=i.width/o.x,h=i.height/o.y;if(s){const p=kn(s),m=r&&hr(r)?kn(r):r;let E=p,y=cy(E);for(;y&&r&&m!==E;){const S=Ra(y),_=y.getBoundingClientRect(),v=fr(y),I=_.left+(y.clientLeft+parseFloat(v.paddingLeft))*S.x,D=_.top+(y.clientTop+parseFloat(v.paddingTop))*S.y;l*=S.x,u*=S.y,d*=S.x,h*=S.y,l+=I,u+=D,E=kn(y),y=cy(E)}}return ef({width:d,height:h,x:l,y:u})}function a_(t,e){const n=sp(t).scrollLeft;return e?e.left+n:bo(Fr(t)).left+n}function OP(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-(n?0:a_(t,r)),s=r.top+e.scrollTop;return{x:i,y:s}}function oM(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=Fr(r),a=e?ip(e.floating):!1;if(r===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},u=kr(1);const d=kr(0),h=Mr(r);if((h||!h&&!s)&&((Il(r)!=="body"||Ou(o))&&(l=sp(r)),Mr(r))){const m=bo(r);u=Ra(r),d.x=m.x+r.clientLeft,d.y=m.y+r.clientTop}const p=o&&!h&&!s?OP(o,l,!0):kr(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+d.x+p.x,y:n.y*u.y-l.scrollTop*u.y+d.y+p.y}}function aM(t){return Array.from(t.getClientRects())}function lM(t){const e=Fr(t),n=sp(t),r=t.ownerDocument.body,i=An(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=An(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+a_(t);const a=-n.scrollTop;return fr(r).direction==="rtl"&&(o+=An(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function cM(t,e){const n=kn(t),r=Fr(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const u=s_();(!u||u&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}const uM=new Set(["absolute","fixed"]);function dM(t,e){const n=bo(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=Mr(t)?Ra(t):kr(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=i*s.x,u=r*s.y;return{width:o,height:a,x:l,y:u}}function HE(t,e,n){let r;if(e==="viewport")r=cM(t,n);else if(e==="document")r=lM(Fr(t));else if(hr(e))r=dM(e,n);else{const i=NP(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return ef(r)}function VP(t,e){const n=ws(t);return n===e||!hr(n)||Qa(n)?!1:fr(n).position==="fixed"||VP(n,e)}function hM(t,e){const n=e.get(t);if(n)return n;let r=su(t,[],!1).filter(a=>hr(a)&&Il(a)!=="body"),i=null;const s=fr(t).position==="fixed";let o=s?ws(t):t;for(;hr(o)&&!Qa(o);){const a=fr(o),l=i_(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&uM.has(i.position)||Ou(o)&&!l&&VP(t,o))?r=r.filter(d=>d!==o):i=a,o=ws(o)}return e.set(t,r),r}function fM(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?ip(e)?[]:hM(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((u,d)=>{const h=HE(e,d,i);return u.top=An(h.top,u.top),u.right=_s(h.right,u.right),u.bottom=_s(h.bottom,u.bottom),u.left=An(h.left,u.left),u},HE(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function pM(t){const{width:e,height:n}=DP(t);return{width:e,height:n}}function mM(t,e,n){const r=Mr(e),i=Fr(e),s=n==="fixed",o=bo(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=kr(0);function u(){l.x=a_(i)}if(r||!r&&!s)if((Il(e)!=="body"||Ou(i))&&(a=sp(e)),r){const m=bo(e,!0,s,e);l.x=m.x+e.clientLeft,l.y=m.y+e.clientTop}else i&&u();s&&!r&&i&&u();const d=i&&!r&&!s?OP(i,a):kr(0),h=o.left+a.scrollLeft-l.x-d.x,p=o.top+a.scrollTop-l.y-d.y;return{x:h,y:p,width:o.width,height:o.height}}function Fm(t){return fr(t).position==="static"}function KE(t,e){if(!Mr(t)||fr(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Fr(t)===n&&(n=n.ownerDocument.body),n}function MP(t,e){const n=kn(t);if(ip(t))return n;if(!Mr(t)){let i=ws(t);for(;i&&!Qa(i);){if(hr(i)&&!Fm(i))return i;i=ws(i)}return n}let r=KE(t,e);for(;r&&JV(r)&&Fm(r);)r=KE(r,e);return r&&Qa(r)&&Fm(r)&&!i_(r)?n:r||nM(t)||n}const gM=async function(t){const e=this.getOffsetParent||MP,n=this.getDimensions,r=await n(t.floating);return{reference:mM(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function yM(t){return fr(t).direction==="rtl"}const vM={convertOffsetParentRelativeRectToViewportRelativeRect:oM,getDocumentElement:Fr,getClippingRect:fM,getOffsetParent:MP,getElementRects:gM,getClientRects:aM,getDimensions:pM,getScale:Ra,isElement:hr,isRTL:yM};function LP(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function _M(t,e){let n=null,r;const i=Fr(t);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const u=t.getBoundingClientRect(),{left:d,top:h,width:p,height:m}=u;if(a||e(),!p||!m)return;const E=jd(h),y=jd(i.clientWidth-(d+p)),S=jd(i.clientHeight-(h+m)),_=jd(d),I={rootMargin:-E+"px "+-y+"px "+-S+"px "+-_+"px",threshold:An(0,_s(1,l))||1};let D=!0;function O(V){const T=V[0].intersectionRatio;if(T!==l){if(!D)return o();T?o(!1,T):r=setTimeout(()=>{o(!1,1e-7)},1e3)}T===1&&!LP(u,t.getBoundingClientRect())&&o(),D=!1}try{n=new IntersectionObserver(O,{...I,root:i.ownerDocument})}catch{n=new IntersectionObserver(O,I)}n.observe(t)}return o(!0),s}function wM(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=o_(t),d=i||s?[...u?su(u):[],...su(e)]:[];d.forEach(_=>{i&&_.addEventListener("scroll",n,{passive:!0}),s&&_.addEventListener("resize",n)});const h=u&&a?_M(u,n):null;let p=-1,m=null;o&&(m=new ResizeObserver(_=>{let[v]=_;v&&v.target===u&&m&&(m.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var I;(I=m)==null||I.observe(e)})),n()}),u&&!l&&m.observe(u),m.observe(e));let E,y=l?bo(t):null;l&&S();function S(){const _=bo(t);y&&!LP(y,_)&&n(),y=_,E=requestAnimationFrame(S)}return n(),()=>{var _;d.forEach(v=>{i&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),h==null||h(),(_=m)==null||_.disconnect(),m=null,l&&cancelAnimationFrame(E)}}const EM=WV,TM=HV,IM=$V,SM=GV,AM=zV,GE=BV,PM=KV,xM=(t,e,n)=>{const r=new Map,i={platform:vM,...n},s={...i.platform,_c:r};return jV(t,e,{...i,platform:s})};var bM=typeof document<"u",RM=function(){},uh=bM?b.useLayoutEffect:RM;function tf(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!tf(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!tf(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function FP(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function QE(t,e){const n=FP(t);return Math.round(e*n)/n}function Um(t){const e=b.useRef(t);return uh(()=>{e.current=t}),e}function CM(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:u}=t,[d,h]=b.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,m]=b.useState(r);tf(p,r)||m(r);const[E,y]=b.useState(null),[S,_]=b.useState(null),v=b.useCallback(B=>{B!==V.current&&(V.current=B,y(B))},[]),I=b.useCallback(B=>{B!==T.current&&(T.current=B,_(B))},[]),D=s||E,O=o||S,V=b.useRef(null),T=b.useRef(null),w=b.useRef(d),P=l!=null,x=Um(l),C=Um(i),k=Um(u),R=b.useCallback(()=>{if(!V.current||!T.current)return;const B={placement:e,strategy:n,middleware:p};C.current&&(B.platform=C.current),xM(V.current,T.current,B).then(F=>{const H={...F,isPositioned:k.current!==!1};W.current&&!tf(w.current,H)&&(w.current=H,Du.flushSync(()=>{h(H)}))})},[p,e,n,C,k]);uh(()=>{u===!1&&w.current.isPositioned&&(w.current.isPositioned=!1,h(B=>({...B,isPositioned:!1})))},[u]);const W=b.useRef(!1);uh(()=>(W.current=!0,()=>{W.current=!1}),[]),uh(()=>{if(D&&(V.current=D),O&&(T.current=O),D&&O){if(x.current)return x.current(D,O,R);R()}},[D,O,R,x,P]);const le=b.useMemo(()=>({reference:V,floating:T,setReference:v,setFloating:I}),[v,I]),se=b.useMemo(()=>({reference:D,floating:O}),[D,O]),G=b.useMemo(()=>{const B={position:n,left:0,top:0};if(!se.floating)return B;const F=QE(se.floating,d.x),H=QE(se.floating,d.y);return a?{...B,transform:"translate("+F+"px, "+H+"px)",...FP(se.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:F,top:H}},[n,a,se.floating,d.x,d.y]);return b.useMemo(()=>({...d,update:R,refs:le,elements:se,floatingStyles:G}),[d,R,le,se,G])}const kM=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?GE({element:r.current,padding:i}).fn(n):{}:r?GE({element:r,padding:i}).fn(n):{}}}},DM=(t,e)=>({...EM(t),options:[t,e]}),NM=(t,e)=>({...TM(t),options:[t,e]}),OM=(t,e)=>({...PM(t),options:[t,e]}),VM=(t,e)=>({...IM(t),options:[t,e]}),MM=(t,e)=>({...SM(t),options:[t,e]}),LM=(t,e)=>({...AM(t),options:[t,e]}),FM=(t,e)=>({...kM(t),options:[t,e]});var UM="Arrow",UP=b.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...s}=t;return N.jsx(En.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:N.jsx("polygon",{points:"0,0 30,0 15,10"})})});UP.displayName=UM;var jM=UP;function BM(t){const[e,n]=b.useState(void 0);return vs(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,u=Array.isArray(l)?l[0]:l;o=u.inlineSize,a=u.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var l_="Popper",[jP,BP]=ep(l_),[$M,$P]=jP(l_),zP=t=>{const{__scopePopper:e,children:n}=t,[r,i]=b.useState(null);return N.jsx($M,{scope:e,anchor:r,onAnchorChange:i,children:n})};zP.displayName=l_;var qP="PopperAnchor",WP=b.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,s=$P(qP,n),o=b.useRef(null),a=dr(e,o);return b.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:N.jsx(En.div,{...i,ref:a})});WP.displayName=qP;var c_="PopperContent",[zM,qM]=jP(c_),HP=b.forwardRef((t,e)=>{var me,Ke,Jt,Xt,St,Ln;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:p=!1,updatePositionStrategy:m="optimized",onPlaced:E,...y}=t,S=$P(c_,n),[_,v]=b.useState(null),I=dr(e,ln=>v(ln)),[D,O]=b.useState(null),V=BM(D),T=(V==null?void 0:V.width)??0,w=(V==null?void 0:V.height)??0,P=r+(s!=="center"?"-"+s:""),x=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},C=Array.isArray(u)?u:[u],k=C.length>0,R={padding:x,boundary:C.filter(HM),altBoundary:k},{refs:W,floatingStyles:le,placement:se,isPositioned:G,middlewareData:B}=CM({strategy:"fixed",placement:P,whileElementsMounted:(...ln)=>wM(...ln,{animationFrame:m==="always"}),elements:{reference:S.anchor},middleware:[DM({mainAxis:i+w,alignmentAxis:o}),l&&NM({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?OM():void 0,...R}),l&&VM({...R}),MM({...R,apply:({elements:ln,rects:mr,availableWidth:$r,availableHeight:Bs})=>{const{width:Vl,height:$s}=mr.reference,zr=ln.floating.style;zr.setProperty("--radix-popper-available-width",`${$r}px`),zr.setProperty("--radix-popper-available-height",`${Bs}px`),zr.setProperty("--radix-popper-anchor-width",`${Vl}px`),zr.setProperty("--radix-popper-anchor-height",`${$s}px`)}}),D&&FM({element:D,padding:a}),KM({arrowWidth:T,arrowHeight:w}),p&&LM({strategy:"referenceHidden",...R})]}),[F,H]=QP(se),ae=ys(E);vs(()=>{G&&(ae==null||ae())},[G,ae]);const X=(me=B.arrow)==null?void 0:me.x,Z=(Ke=B.arrow)==null?void 0:Ke.y,ce=((Jt=B.arrow)==null?void 0:Jt.centerOffset)!==0,[we,Le]=b.useState();return vs(()=>{_&&Le(window.getComputedStyle(_).zIndex)},[_]),N.jsx("div",{ref:W.setFloating,"data-radix-popper-content-wrapper":"",style:{...le,transform:G?le.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:we,"--radix-popper-transform-origin":[(Xt=B.transformOrigin)==null?void 0:Xt.x,(St=B.transformOrigin)==null?void 0:St.y].join(" "),...((Ln=B.hide)==null?void 0:Ln.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:N.jsx(zM,{scope:n,placedSide:F,onArrowChange:O,arrowX:X,arrowY:Z,shouldHideArrow:ce,children:N.jsx(En.div,{"data-side":F,"data-align":H,...y,ref:I,style:{...y.style,animation:G?void 0:"none"}})})})});HP.displayName=c_;var KP="PopperArrow",WM={top:"bottom",right:"left",bottom:"top",left:"right"},GP=b.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,s=qM(KP,r),o=WM[s.placedSide];return N.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:N.jsx(jM,{...i,ref:n,style:{...i.style,display:"block"}})})});GP.displayName=KP;function HM(t){return t!==null}var KM=t=>({name:"transformOrigin",options:t,fn(e){var S,_,v;const{placement:n,rects:r,middlewareData:i}=e,o=((S=i.arrow)==null?void 0:S.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[u,d]=QP(n),h={start:"0%",center:"50%",end:"100%"}[d],p=(((_=i.arrow)==null?void 0:_.x)??0)+a/2,m=(((v=i.arrow)==null?void 0:v.y)??0)+l/2;let E="",y="";return u==="bottom"?(E=o?h:`${p}px`,y=`${-l}px`):u==="top"?(E=o?h:`${p}px`,y=`${r.floating.height+l}px`):u==="right"?(E=`${-l}px`,y=o?h:`${m}px`):u==="left"&&(E=`${r.floating.width+l}px`,y=o?h:`${m}px`),{data:{x:E,y}}}});function QP(t){const[e,n="center"]=t.split("-");return[e,n]}var O$=zP,GM=WP,QM=HP,YM=GP,[op,V$]=ep("Tooltip",[BP]),u_=BP(),YP="TooltipProvider",JM=700,YE="tooltip.open",[XM,JP]=op(YP),XP=t=>{const{__scopeTooltip:e,delayDuration:n=JM,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:s}=t,o=b.useRef(!0),a=b.useRef(!1),l=b.useRef(0);return b.useEffect(()=>{const u=l.current;return()=>window.clearTimeout(u)},[]),N.jsx(XM,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:b.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:b.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:b.useCallback(u=>{a.current=u},[]),disableHoverableContent:i,children:s})};XP.displayName=YP;var ZP="Tooltip",[M$,ap]=op(ZP),uy="TooltipTrigger",ZM=b.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=ap(uy,n),s=JP(uy,n),o=u_(n),a=b.useRef(null),l=dr(e,a,i.onTriggerChange),u=b.useRef(!1),d=b.useRef(!1),h=b.useCallback(()=>u.current=!1,[]);return b.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),N.jsx(GM,{asChild:!0,...o,children:N.jsx(En.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:l,onPointerMove:_t(t.onPointerMove,p=>{p.pointerType!=="touch"&&!d.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),d.current=!0)}),onPointerLeave:_t(t.onPointerLeave,()=>{i.onTriggerLeave(),d.current=!1}),onPointerDown:_t(t.onPointerDown,()=>{i.open&&i.onClose(),u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:_t(t.onFocus,()=>{u.current||i.onOpen()}),onBlur:_t(t.onBlur,i.onClose),onClick:_t(t.onClick,i.onClose)})})});ZM.displayName=uy;var eL="TooltipPortal",[L$,tL]=op(eL,{forceMount:void 0}),Ya="TooltipContent",ex=b.forwardRef((t,e)=>{const n=tL(Ya,t.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...s}=t,o=ap(Ya,t.__scopeTooltip);return N.jsx(Yv,{present:r||o.open,children:o.disableHoverableContent?N.jsx(tx,{side:i,...s,ref:e}):N.jsx(nL,{side:i,...s,ref:e})})}),nL=b.forwardRef((t,e)=>{const n=ap(Ya,t.__scopeTooltip),r=JP(Ya,t.__scopeTooltip),i=b.useRef(null),s=dr(e,i),[o,a]=b.useState(null),{trigger:l,onClose:u}=n,d=i.current,{onPointerInTransitChange:h}=r,p=b.useCallback(()=>{a(null),h(!1)},[h]),m=b.useCallback((E,y)=>{const S=E.currentTarget,_={x:E.clientX,y:E.clientY},v=aL(_,S.getBoundingClientRect()),I=lL(_,v),D=cL(y.getBoundingClientRect()),O=dL([...I,...D]);a(O),h(!0)},[h]);return b.useEffect(()=>()=>p(),[p]),b.useEffect(()=>{if(l&&d){const E=S=>m(S,d),y=S=>m(S,l);return l.addEventListener("pointerleave",E),d.addEventListener("pointerleave",y),()=>{l.removeEventListener("pointerleave",E),d.removeEventListener("pointerleave",y)}}},[l,d,m,p]),b.useEffect(()=>{if(o){const E=y=>{const S=y.target,_={x:y.clientX,y:y.clientY},v=(l==null?void 0:l.contains(S))||(d==null?void 0:d.contains(S)),I=!uL(_,o);v?p():I&&(p(),u())};return document.addEventListener("pointermove",E),()=>document.removeEventListener("pointermove",E)}},[l,d,o,u,p]),N.jsx(tx,{...t,ref:s})}),[rL,iL]=op(ZP,{isInside:!1}),sL=u2("TooltipContent"),tx=b.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=t,l=ap(Ya,n),u=u_(n),{onClose:d}=l;return b.useEffect(()=>(document.addEventListener(YE,d),()=>document.removeEventListener(YE,d)),[d]),b.useEffect(()=>{if(l.trigger){const h=p=>{const m=p.target;m!=null&&m.contains(l.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,d]),N.jsx(Qv,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:N.jsxs(QM,{"data-state":l.stateAttribute,...u,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[N.jsx(sL,{children:r}),N.jsx(rL,{scope:n,isInside:!0,children:N.jsx(V2,{id:l.contentId,role:"tooltip",children:i||r})})]})})});ex.displayName=Ya;var nx="TooltipArrow",oL=b.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=u_(n);return iL(nx,n).isInside?null:N.jsx(YM,{...i,...r,ref:e})});oL.displayName=nx;function aL(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),i=Math.abs(e.right-t.x),s=Math.abs(e.left-t.x);switch(Math.min(n,r,i,s)){case s:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function lL(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function cL(t){const{top:e,right:n,bottom:r,left:i}=t;return[{x:i,y:e},{x:n,y:e},{x:n,y:r},{x:i,y:r}]}function uL(t,e){const{x:n,y:r}=t;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s],l=e[o],u=a.x,d=a.y,h=l.x,p=l.y;d>r!=p>r&&n<(h-u)*(r-d)/(p-d)+u&&(i=!i)}return i}function dL(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),hL(e)}function hL(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const i=t[r];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const i=t[r];for(;n.length>=2;){const s=n[n.length-1],o=n[n.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))n.pop();else break}n.push(i)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var fL=XP,rx=ex;const pL=fL,mL=b.forwardRef(({className:t,sideOffset:e=4,...n},r)=>N.jsx(rx,{ref:r,sideOffset:e,className:Bo("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));mL.displayName=rx.displayName;var lp=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},cp=typeof window>"u"||"Deno"in globalThis;function Jn(){}function gL(t,e){return typeof t=="function"?t(e):t}function yL(t){return typeof t=="number"&&t>=0&&t!==1/0}function vL(t,e){return Math.max(t+(e||0)-Date.now(),0)}function dy(t,e){return typeof t=="function"?t(e):t}function _L(t,e){return typeof t=="function"?t(e):t}function JE(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==d_(o,e.options))return!1}else if(!au(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||s&&!s(e))}function XE(t,e){const{exact:n,status:r,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(n){if(ou(e.options.mutationKey)!==ou(s))return!1}else if(!au(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function d_(t,e){return((e==null?void 0:e.queryKeyHashFn)||ou)(t)}function ou(t){return JSON.stringify(t,(e,n)=>hy(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function au(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>au(t[n],e[n])):!1}function ix(t,e){if(t===e)return t;const n=ZE(t)&&ZE(e);if(n||hy(t)&&hy(e)){const r=n?t:Object.keys(t),i=r.length,s=n?e:Object.keys(e),o=s.length,a=n?[]:{},l=new Set(r);let u=0;for(let d=0;d<o;d++){const h=n?d:s[d];(!n&&l.has(h)||n)&&t[h]===void 0&&e[h]===void 0?(a[h]=void 0,u++):(a[h]=ix(t[h],e[h]),a[h]===t[h]&&t[h]!==void 0&&u++)}return i===o&&u===i?t:a}return e}function ZE(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function hy(t){if(!eT(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!eT(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function eT(t){return Object.prototype.toString.call(t)==="[object Object]"}function wL(t){return new Promise(e=>{setTimeout(e,t)})}function EL(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?ix(t,e):e}function TL(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function IL(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var h_=Symbol();function sx(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===h_?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var ho,Hi,Oa,_1,SL=(_1=class extends lp{constructor(){super();xe(this,ho);xe(this,Hi);xe(this,Oa);fe(this,Oa,e=>{if(!cp&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){$(this,Hi)||this.setEventListener($(this,Oa))}onUnsubscribe(){var e;this.hasListeners()||((e=$(this,Hi))==null||e.call(this),fe(this,Hi,void 0))}setEventListener(e){var n;fe(this,Oa,e),(n=$(this,Hi))==null||n.call(this),fe(this,Hi,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){$(this,ho)!==e&&(fe(this,ho,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof $(this,ho)=="boolean"?$(this,ho):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},ho=new WeakMap,Hi=new WeakMap,Oa=new WeakMap,_1),ox=new SL,Va,Ki,Ma,w1,AL=(w1=class extends lp{constructor(){super();xe(this,Va,!0);xe(this,Ki);xe(this,Ma);fe(this,Ma,e=>{if(!cp&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){$(this,Ki)||this.setEventListener($(this,Ma))}onUnsubscribe(){var e;this.hasListeners()||((e=$(this,Ki))==null||e.call(this),fe(this,Ki,void 0))}setEventListener(e){var n;fe(this,Ma,e),(n=$(this,Ki))==null||n.call(this),fe(this,Ki,e(this.setOnline.bind(this)))}setOnline(e){$(this,Va)!==e&&(fe(this,Va,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return $(this,Va)}},Va=new WeakMap,Ki=new WeakMap,Ma=new WeakMap,w1),nf=new AL;function PL(){let t,e;const n=new Promise((i,s)=>{t=i,e=s});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}function xL(t){return Math.min(1e3*2**t,3e4)}function ax(t){return(t??"online")==="online"?nf.isOnline():!0}var lx=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function jm(t){return t instanceof lx}function cx(t){let e=!1,n=0,r=!1,i;const s=PL(),o=y=>{var S;r||(p(new lx(y)),(S=t.abort)==null||S.call(t))},a=()=>{e=!0},l=()=>{e=!1},u=()=>ox.isFocused()&&(t.networkMode==="always"||nf.isOnline())&&t.canRun(),d=()=>ax(t.networkMode)&&t.canRun(),h=y=>{var S;r||(r=!0,(S=t.onSuccess)==null||S.call(t,y),i==null||i(),s.resolve(y))},p=y=>{var S;r||(r=!0,(S=t.onError)==null||S.call(t,y),i==null||i(),s.reject(y))},m=()=>new Promise(y=>{var S;i=_=>{(r||u())&&y(_)},(S=t.onPause)==null||S.call(t)}).then(()=>{var y;i=void 0,r||(y=t.onContinue)==null||y.call(t)}),E=()=>{if(r)return;let y;const S=n===0?t.initialPromise:void 0;try{y=S??t.fn()}catch(_){y=Promise.reject(_)}Promise.resolve(y).then(h).catch(_=>{var V;if(r)return;const v=t.retry??(cp?0:3),I=t.retryDelay??xL,D=typeof I=="function"?I(n,_):I,O=v===!0||typeof v=="number"&&n<v||typeof v=="function"&&v(n,_);if(e||!O){p(_);return}n++,(V=t.onFail)==null||V.call(t,n,_),wL(D).then(()=>u()?void 0:m()).then(()=>{e?p(_):E()})})};return{promise:s,cancel:o,continue:()=>(i==null||i(),s),cancelRetry:a,continueRetry:l,canStart:d,start:()=>(d()?E():m().then(E),s)}}var bL=t=>setTimeout(t,0);function RL(){let t=[],e=0,n=a=>{a()},r=a=>{a()},i=bL;const s=a=>{e?t.push(a):i(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&i(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{s(()=>{a(...l)})},schedule:s,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{i=a}}}var tn=RL(),fo,E1,ux=(E1=class{constructor(){xe(this,fo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),yL(this.gcTime)&&fe(this,fo,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(cp?1/0:5*60*1e3))}clearGcTimeout(){$(this,fo)&&(clearTimeout($(this,fo)),fe(this,fo,void 0))}},fo=new WeakMap,E1),La,po,Un,mo,$t,Au,go,Xn,Qr,T1,CL=(T1=class extends ux{constructor(n){super();xe(this,Xn);xe(this,La);xe(this,po);xe(this,Un);xe(this,mo);xe(this,$t);xe(this,Au);xe(this,go);fe(this,go,!1),fe(this,Au,n.defaultOptions),this.setOptions(n.options),this.observers=[],fe(this,mo,n.client),fe(this,Un,$(this,mo).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,fe(this,La,DL(this.options)),this.state=n.state??$(this,La),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=$(this,$t))==null?void 0:n.promise}setOptions(n){this.options={...$(this,Au),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&$(this,Un).remove(this)}setData(n,r){const i=EL(this.state.data,n,this.options);return Ft(this,Xn,Qr).call(this,{data:i,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),i}setState(n,r){Ft(this,Xn,Qr).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var i,s;const r=(i=$(this,$t))==null?void 0:i.promise;return(s=$(this,$t))==null||s.cancel(n),r?r.then(Jn).catch(Jn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState($(this,La))}isActive(){return this.observers.some(n=>_L(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===h_||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>dy(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!vL(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(i=>i.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=$(this,$t))==null||r.continue()}onOnline(){var r;const n=this.observers.find(i=>i.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=$(this,$t))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),$(this,Un).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||($(this,$t)&&($(this,go)?$(this,$t).cancel({revert:!0}):$(this,$t).cancelRetry()),this.scheduleGc()),$(this,Un).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ft(this,Xn,Qr).call(this,{type:"invalidate"})}fetch(n,r){var d,h,p;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if($(this,$t))return $(this,$t).continueRetry(),$(this,$t).promise}if(n&&this.setOptions(n),!this.options.queryFn){const m=this.observers.find(E=>E.options.queryFn);m&&this.setOptions(m.options)}const i=new AbortController,s=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(fe(this,go,!0),i.signal)})},o=()=>{const m=sx(this.options,r),y=(()=>{const S={client:$(this,mo),queryKey:this.queryKey,meta:this.meta};return s(S),S})();return fe(this,go,!1),this.options.persister?this.options.persister(m,y,this):m(y)},l=(()=>{const m={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:$(this,mo),state:this.state,fetchFn:o};return s(m),m})();(d=this.options.behavior)==null||d.onFetch(l,this),fe(this,po,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&Ft(this,Xn,Qr).call(this,{type:"fetch",meta:(p=l.fetchOptions)==null?void 0:p.meta});const u=m=>{var E,y,S,_;jm(m)&&m.silent||Ft(this,Xn,Qr).call(this,{type:"error",error:m}),jm(m)||((y=(E=$(this,Un).config).onError)==null||y.call(E,m,this),(_=(S=$(this,Un).config).onSettled)==null||_.call(S,this.state.data,m,this)),this.scheduleGc()};return fe(this,$t,cx({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:i.abort.bind(i),onSuccess:m=>{var E,y,S,_;if(m===void 0){u(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(v){u(v);return}(y=(E=$(this,Un).config).onSuccess)==null||y.call(E,m,this),(_=(S=$(this,Un).config).onSettled)==null||_.call(S,m,this.state.error,this),this.scheduleGc()},onError:u,onFail:(m,E)=>{Ft(this,Xn,Qr).call(this,{type:"failed",failureCount:m,error:E})},onPause:()=>{Ft(this,Xn,Qr).call(this,{type:"pause"})},onContinue:()=>{Ft(this,Xn,Qr).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),$(this,$t).start()}},La=new WeakMap,po=new WeakMap,Un=new WeakMap,mo=new WeakMap,$t=new WeakMap,Au=new WeakMap,go=new WeakMap,Xn=new WeakSet,Qr=function(n){const r=i=>{switch(n.type){case"failed":return{...i,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...kL(i.data,this.options),fetchMeta:n.meta??null};case"success":return fe(this,po,void 0),{...i,data:n.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=n.error;return jm(s)&&s.revert&&$(this,po)?{...$(this,po),fetchStatus:"idle"}:{...i,error:s,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...n.state}}};this.state=r(this.state),tn.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),$(this,Un).notify({query:this,type:"updated",action:n})})},T1);function kL(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:ax(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function DL(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Er,I1,NL=(I1=class extends lp{constructor(e={}){super();xe(this,Er);this.config=e,fe(this,Er,new Map)}build(e,n,r){const i=n.queryKey,s=n.queryHash??d_(i,n);let o=this.get(s);return o||(o=new CL({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){$(this,Er).has(e.queryHash)||($(this,Er).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=$(this,Er).get(e.queryHash);n&&(e.destroy(),n===e&&$(this,Er).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){tn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return $(this,Er).get(e)}getAll(){return[...$(this,Er).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>JE(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>JE(e,r)):n}notify(e){tn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){tn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){tn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Er=new WeakMap,I1),Tr,Zt,yo,Ir,Mi,S1,OL=(S1=class extends ux{constructor(n){super();xe(this,Ir);xe(this,Tr);xe(this,Zt);xe(this,yo);this.mutationId=n.mutationId,fe(this,Zt,n.mutationCache),fe(this,Tr,[]),this.state=n.state||VL(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){$(this,Tr).includes(n)||($(this,Tr).push(n),this.clearGcTimeout(),$(this,Zt).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){fe(this,Tr,$(this,Tr).filter(r=>r!==n)),this.scheduleGc(),$(this,Zt).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){$(this,Tr).length||(this.state.status==="pending"?this.scheduleGc():$(this,Zt).remove(this))}continue(){var n;return((n=$(this,yo))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var o,a,l,u,d,h,p,m,E,y,S,_,v,I,D,O,V,T,w,P;const r=()=>{Ft(this,Ir,Mi).call(this,{type:"continue"})};fe(this,yo,cx({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(x,C)=>{Ft(this,Ir,Mi).call(this,{type:"failed",failureCount:x,error:C})},onPause:()=>{Ft(this,Ir,Mi).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>$(this,Zt).canRun(this)}));const i=this.state.status==="pending",s=!$(this,yo).canStart();try{if(i)r();else{Ft(this,Ir,Mi).call(this,{type:"pending",variables:n,isPaused:s}),await((a=(o=$(this,Zt).config).onMutate)==null?void 0:a.call(o,n,this));const C=await((u=(l=this.options).onMutate)==null?void 0:u.call(l,n));C!==this.state.context&&Ft(this,Ir,Mi).call(this,{type:"pending",context:C,variables:n,isPaused:s})}const x=await $(this,yo).start();return await((h=(d=$(this,Zt).config).onSuccess)==null?void 0:h.call(d,x,n,this.state.context,this)),await((m=(p=this.options).onSuccess)==null?void 0:m.call(p,x,n,this.state.context)),await((y=(E=$(this,Zt).config).onSettled)==null?void 0:y.call(E,x,null,this.state.variables,this.state.context,this)),await((_=(S=this.options).onSettled)==null?void 0:_.call(S,x,null,n,this.state.context)),Ft(this,Ir,Mi).call(this,{type:"success",data:x}),x}catch(x){try{throw await((I=(v=$(this,Zt).config).onError)==null?void 0:I.call(v,x,n,this.state.context,this)),await((O=(D=this.options).onError)==null?void 0:O.call(D,x,n,this.state.context)),await((T=(V=$(this,Zt).config).onSettled)==null?void 0:T.call(V,void 0,x,this.state.variables,this.state.context,this)),await((P=(w=this.options).onSettled)==null?void 0:P.call(w,void 0,x,n,this.state.context)),x}finally{Ft(this,Ir,Mi).call(this,{type:"error",error:x})}}finally{$(this,Zt).runNext(this)}}},Tr=new WeakMap,Zt=new WeakMap,yo=new WeakMap,Ir=new WeakSet,Mi=function(n){const r=i=>{switch(n.type){case"failed":return{...i,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...i,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:n.error,failureCount:i.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),tn.batch(()=>{$(this,Tr).forEach(i=>{i.onMutationUpdate(n)}),$(this,Zt).notify({mutation:this,type:"updated",action:n})})},S1);function VL(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Xr,Zn,Pu,A1,ML=(A1=class extends lp{constructor(e={}){super();xe(this,Xr);xe(this,Zn);xe(this,Pu);this.config=e,fe(this,Xr,new Set),fe(this,Zn,new Map),fe(this,Pu,0)}build(e,n,r){const i=new OL({mutationCache:this,mutationId:++vd(this,Pu)._,options:e.defaultMutationOptions(n),state:r});return this.add(i),i}add(e){$(this,Xr).add(e);const n=Bd(e);if(typeof n=="string"){const r=$(this,Zn).get(n);r?r.push(e):$(this,Zn).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if($(this,Xr).delete(e)){const n=Bd(e);if(typeof n=="string"){const r=$(this,Zn).get(n);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&$(this,Zn).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Bd(e);if(typeof n=="string"){const r=$(this,Zn).get(n),i=r==null?void 0:r.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){var r;const n=Bd(e);if(typeof n=="string"){const i=(r=$(this,Zn).get(n))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){tn.batch(()=>{$(this,Xr).forEach(e=>{this.notify({type:"removed",mutation:e})}),$(this,Xr).clear(),$(this,Zn).clear()})}getAll(){return Array.from($(this,Xr))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>XE(n,r))}findAll(e={}){return this.getAll().filter(n=>XE(e,n))}notify(e){tn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return tn.batch(()=>Promise.all(e.map(n=>n.continue().catch(Jn))))}},Xr=new WeakMap,Zn=new WeakMap,Pu=new WeakMap,A1);function Bd(t){var e;return(e=t.options.scope)==null?void 0:e.id}function tT(t){return{onFetch:(e,n)=>{var d,h,p,m,E;const r=e.options,i=(p=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:p.direction,s=((m=e.state.data)==null?void 0:m.pages)||[],o=((E=e.state.data)==null?void 0:E.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const u=async()=>{let y=!1;const S=I=>{Object.defineProperty(I,"signal",{enumerable:!0,get:()=>(e.signal.aborted?y=!0:e.signal.addEventListener("abort",()=>{y=!0}),e.signal)})},_=sx(e.options,e.fetchOptions),v=async(I,D,O)=>{if(y)return Promise.reject();if(D==null&&I.pages.length)return Promise.resolve(I);const T=(()=>{const C={client:e.client,queryKey:e.queryKey,pageParam:D,direction:O?"backward":"forward",meta:e.options.meta};return S(C),C})(),w=await _(T),{maxPages:P}=e.options,x=O?IL:TL;return{pages:x(I.pages,w,P),pageParams:x(I.pageParams,D,P)}};if(i&&s.length){const I=i==="backward",D=I?LL:nT,O={pages:s,pageParams:o},V=D(r,O);a=await v(O,V,I)}else{const I=t??s.length;do{const D=l===0?o[0]??r.initialPageParam:nT(r,a);if(l>0&&D==null)break;a=await v(a,D),l++}while(l<I)}return a};e.options.persister?e.fetchFn=()=>{var y,S;return(S=(y=e.options).persister)==null?void 0:S.call(y,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=u}}}function nT(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function LL(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var at,Gi,Qi,Fa,Ua,Yi,ja,Ba,P1,FL=(P1=class{constructor(t={}){xe(this,at);xe(this,Gi);xe(this,Qi);xe(this,Fa);xe(this,Ua);xe(this,Yi);xe(this,ja);xe(this,Ba);fe(this,at,t.queryCache||new NL),fe(this,Gi,t.mutationCache||new ML),fe(this,Qi,t.defaultOptions||{}),fe(this,Fa,new Map),fe(this,Ua,new Map),fe(this,Yi,0)}mount(){vd(this,Yi)._++,$(this,Yi)===1&&(fe(this,ja,ox.subscribe(async t=>{t&&(await this.resumePausedMutations(),$(this,at).onFocus())})),fe(this,Ba,nf.subscribe(async t=>{t&&(await this.resumePausedMutations(),$(this,at).onOnline())})))}unmount(){var t,e;vd(this,Yi)._--,$(this,Yi)===0&&((t=$(this,ja))==null||t.call(this),fe(this,ja,void 0),(e=$(this,Ba))==null||e.call(this),fe(this,Ba,void 0))}isFetching(t){return $(this,at).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return $(this,Gi).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=$(this,at).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=$(this,at).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(dy(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return $(this,at).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),i=$(this,at).get(r.queryHash),s=i==null?void 0:i.state.data,o=gL(e,s);if(o!==void 0)return $(this,at).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return tn.batch(()=>$(this,at).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=$(this,at).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=$(this,at);tn.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=$(this,at);return tn.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=tn.batch(()=>$(this,at).findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(Jn).catch(Jn)}invalidateQueries(t,e={}){return tn.batch(()=>($(this,at).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=tn.batch(()=>$(this,at).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,n);return n.throwOnError||(s=s.catch(Jn)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(Jn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=$(this,at).build(this,e);return n.isStaleByTime(dy(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Jn).catch(Jn)}fetchInfiniteQuery(t){return t.behavior=tT(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Jn).catch(Jn)}ensureInfiniteQueryData(t){return t.behavior=tT(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return nf.isOnline()?$(this,Gi).resumePausedMutations():Promise.resolve()}getQueryCache(){return $(this,at)}getMutationCache(){return $(this,Gi)}getDefaultOptions(){return $(this,Qi)}setDefaultOptions(t){fe(this,Qi,t)}setQueryDefaults(t,e){$(this,Fa).set(ou(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...$(this,Fa).values()],n={};return e.forEach(r=>{au(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){$(this,Ua).set(ou(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...$(this,Ua).values()],n={};return e.forEach(r=>{au(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...$(this,Qi).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=d_(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===h_&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...$(this,Qi).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){$(this,at).clear(),$(this,Gi).clear()}},at=new WeakMap,Gi=new WeakMap,Qi=new WeakMap,Fa=new WeakMap,Ua=new WeakMap,Yi=new WeakMap,ja=new WeakMap,Ba=new WeakMap,P1),UL=b.createContext(void 0),jL=({client:t,children:e})=>(b.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),N.jsx(UL.Provider,{value:t,children:e}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lu(){return lu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lu.apply(this,arguments)}var Zi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Zi||(Zi={}));const rT="popstate";function BL(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return fy("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:rf(i)}return zL(e,n,null,t)}function pt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function dx(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function $L(){return Math.random().toString(36).substr(2,8)}function iT(t,e){return{usr:t.state,key:t.key,idx:e}}function fy(t,e,n,r){return n===void 0&&(n=null),lu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Sl(e):e,{state:n,key:e&&e.key||r||$L()})}function rf(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Sl(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function zL(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Zi.Pop,l=null,u=d();u==null&&(u=0,o.replaceState(lu({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=Zi.Pop;let S=d(),_=S==null?null:S-u;u=S,l&&l({action:a,location:y.location,delta:_})}function p(S,_){a=Zi.Push;let v=fy(y.location,S,_);u=d()+1;let I=iT(v,u),D=y.createHref(v);try{o.pushState(I,"",D)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;i.location.assign(D)}s&&l&&l({action:a,location:y.location,delta:1})}function m(S,_){a=Zi.Replace;let v=fy(y.location,S,_);u=d();let I=iT(v,u),D=y.createHref(v);o.replaceState(I,"",D),s&&l&&l({action:a,location:y.location,delta:0})}function E(S){let _=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof S=="string"?S:rf(S);return v=v.replace(/ $/,"%20"),pt(_,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,_)}let y={get action(){return a},get location(){return t(i,o)},listen(S){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(rT,h),l=S,()=>{i.removeEventListener(rT,h),l=null}},createHref(S){return e(i,S)},createURL:E,encodeLocation(S){let _=E(S);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:p,replace:m,go(S){return o.go(S)}};return y}var sT;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(sT||(sT={}));function qL(t,e,n){return n===void 0&&(n="/"),WL(t,e,n,!1)}function WL(t,e,n,r){let i=typeof e=="string"?Sl(e):e,s=f_(i.pathname||"/",n);if(s==null)return null;let o=hx(t);HL(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=rF(s);a=tF(o[l],u,r)}return a}function hx(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(pt(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=cs([r,l.relativePath]),d=n.concat(l);s.children&&s.children.length>0&&(pt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),hx(s.children,e,d,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:ZL(u,s.index),routesMeta:d})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of fx(s.path))i(s,o,l)}),e}function fx(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=fx(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function HL(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:eF(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const KL=/^:[\w-]+$/,GL=3,QL=2,YL=1,JL=10,XL=-2,oT=t=>t==="*";function ZL(t,e){let n=t.split("/"),r=n.length;return n.some(oT)&&(r+=XL),e&&(r+=QL),n.filter(i=>!oT(i)).reduce((i,s)=>i+(KL.test(s)?GL:s===""?YL:JL),r)}function eF(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function tF(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",h=aT({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d),p=l.route;if(!h&&u&&n&&!r[r.length-1].route.index&&(h=aT({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:cs([s,h.pathname]),pathnameBase:aF(cs([s,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(s=cs([s,h.pathnameBase]))}return o}function aT(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=nF(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,d,h)=>{let{paramName:p,isOptional:m}=d;if(p==="*"){let y=a[h]||"";o=s.slice(0,s.length-y.length).replace(/(.)\/+$/,"$1")}const E=a[h];return m&&!E?u[p]=void 0:u[p]=(E||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function nF(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),dx(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function rF(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return dx(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function f_(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function iF(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Sl(t):t;return{pathname:n?n.startsWith("/")?n:sF(n,e):e,search:lF(r),hash:cF(i)}}function sF(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Bm(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function oF(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function p_(t,e){let n=oF(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function m_(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Sl(t):(i=lu({},t),pt(!i.pathname||!i.pathname.includes("?"),Bm("?","pathname","search",i)),pt(!i.pathname||!i.pathname.includes("#"),Bm("#","pathname","hash",i)),pt(!i.search||!i.search.includes("#"),Bm("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),h-=1;i.pathname=p.join("/")}a=h>=0?e[h]:"/"}let l=iF(i,a),u=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}const cs=t=>t.join("/").replace(/\/\/+/g,"/"),aF=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),lF=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,cF=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function uF(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const px=["post","put","patch","delete"];new Set(px);const dF=["get",...px];new Set(dF);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cu(){return cu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cu.apply(this,arguments)}const g_=b.createContext(null),hF=b.createContext(null),Ds=b.createContext(null),up=b.createContext(null),Ns=b.createContext({outlet:null,matches:[],isDataRoute:!1}),mx=b.createContext(null);function fF(t,e){let{relative:n}=e===void 0?{}:e;Al()||pt(!1);let{basename:r,navigator:i}=b.useContext(Ds),{hash:s,pathname:o,search:a}=yx(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:cs([r,o])),i.createHref({pathname:l,search:a,hash:s})}function Al(){return b.useContext(up)!=null}function _i(){return Al()||pt(!1),b.useContext(up).location}function gx(t){b.useContext(Ds).static||b.useLayoutEffect(t)}function dp(){let{isDataRoute:t}=b.useContext(Ns);return t?PF():pF()}function pF(){Al()||pt(!1);let t=b.useContext(g_),{basename:e,future:n,navigator:r}=b.useContext(Ds),{matches:i}=b.useContext(Ns),{pathname:s}=_i(),o=JSON.stringify(p_(i,n.v7_relativeSplatPath)),a=b.useRef(!1);return gx(()=>{a.current=!0}),b.useCallback(function(u,d){if(d===void 0&&(d={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let h=m_(u,JSON.parse(o),s,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:cs([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,s,t])}function yx(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=b.useContext(Ds),{matches:i}=b.useContext(Ns),{pathname:s}=_i(),o=JSON.stringify(p_(i,r.v7_relativeSplatPath));return b.useMemo(()=>m_(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function mF(t,e){return gF(t,e)}function gF(t,e,n,r){Al()||pt(!1);let{navigator:i}=b.useContext(Ds),{matches:s}=b.useContext(Ns),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=_i(),d;if(e){var h;let S=typeof e=="string"?Sl(e):e;l==="/"||(h=S.pathname)!=null&&h.startsWith(l)||pt(!1),d=S}else d=u;let p=d.pathname||"/",m=p;if(l!=="/"){let S=l.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(S.length).join("/")}let E=qL(t,{pathname:m}),y=EF(E&&E.map(S=>Object.assign({},S,{params:Object.assign({},a,S.params),pathname:cs([l,i.encodeLocation?i.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?l:cs([l,i.encodeLocation?i.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),s,n,r);return e&&y?b.createElement(up.Provider,{value:{location:cu({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Zi.Pop}},y):y}function yF(){let t=AF(),e=uF(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),n?b.createElement("pre",{style:i},n):null,null)}const vF=b.createElement(yF,null);class _F extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?b.createElement(Ns.Provider,{value:this.props.routeContext},b.createElement(mx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function wF(t){let{routeContext:e,match:n,children:r}=t,i=b.useContext(g_);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),b.createElement(Ns.Provider,{value:e},r)}function EF(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||pt(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:p,errors:m}=n,E=h.route.loader&&p[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||E){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,p)=>{let m,E=!1,y=null,S=null;n&&(m=a&&h.route.id?a[h.route.id]:void 0,y=h.route.errorElement||vF,l&&(u<0&&p===0?(E=!0,S=null):u===p&&(E=!0,S=h.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,p+1)),v=()=>{let I;return m?I=y:E?I=S:h.route.Component?I=b.createElement(h.route.Component,null):h.route.element?I=h.route.element:I=d,b.createElement(wF,{match:h,routeContext:{outlet:d,matches:_,isDataRoute:n!=null},children:I})};return n&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?b.createElement(_F,{location:n.location,revalidation:n.revalidation,component:y,error:m,children:v(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):v()},null)}var vx=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(vx||{}),sf=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(sf||{});function TF(t){let e=b.useContext(g_);return e||pt(!1),e}function IF(t){let e=b.useContext(hF);return e||pt(!1),e}function SF(t){let e=b.useContext(Ns);return e||pt(!1),e}function _x(t){let e=SF(),n=e.matches[e.matches.length-1];return n.route.id||pt(!1),n.route.id}function AF(){var t;let e=b.useContext(mx),n=IF(sf.UseRouteError),r=_x(sf.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function PF(){let{router:t}=TF(vx.UseNavigateStable),e=_x(sf.UseNavigateStable),n=b.useRef(!1);return gx(()=>{n.current=!0}),b.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,cu({fromRouteId:e},s)))},[t,e])}function xF(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function j$(t){let{to:e,replace:n,state:r,relative:i}=t;Al()||pt(!1);let{future:s,static:o}=b.useContext(Ds),{matches:a}=b.useContext(Ns),{pathname:l}=_i(),u=dp(),d=m_(e,p_(a,s.v7_relativeSplatPath),l,i==="path"),h=JSON.stringify(d);return b.useEffect(()=>u(JSON.parse(h),{replace:n,state:r,relative:i}),[u,h,i,n,r]),null}function Ce(t){pt(!1)}function bF(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Zi.Pop,navigator:s,static:o=!1,future:a}=t;Al()&&pt(!1);let l=e.replace(/^\/*/,"/"),u=b.useMemo(()=>({basename:l,navigator:s,static:o,future:cu({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=Sl(r));let{pathname:d="/",search:h="",hash:p="",state:m=null,key:E="default"}=r,y=b.useMemo(()=>{let S=f_(d,l);return S==null?null:{location:{pathname:S,search:h,hash:p,state:m,key:E},navigationType:i}},[l,d,h,p,m,E,i]);return y==null?null:b.createElement(Ds.Provider,{value:u},b.createElement(up.Provider,{children:n,value:y}))}function RF(t){let{children:e,location:n}=t;return mF(py(e),n)}new Promise(()=>{});function py(t,e){e===void 0&&(e=[]);let n=[];return b.Children.forEach(t,(r,i)=>{if(!b.isValidElement(r))return;let s=[...e,i];if(r.type===b.Fragment){n.push.apply(n,py(r.props.children,s));return}r.type!==Ce&&pt(!1),!r.props.index||!r.props.children||pt(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=py(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function my(){return my=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},my.apply(this,arguments)}function CF(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function kF(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function DF(t,e){return t.button===0&&(!e||e==="_self")&&!kF(t)}function gy(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function NF(t,e){let n=gy(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(s=>{n.append(i,s)})}),n}const OF=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],VF="6";try{window.__reactRouterVersion=VF}catch{}const MF="startTransition",lT=F1[MF];function LF(t){let{basename:e,children:n,future:r,window:i}=t,s=b.useRef();s.current==null&&(s.current=BL({window:i,v5Compat:!0}));let o=s.current,[a,l]=b.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},d=b.useCallback(h=>{u&&lT?lT(()=>l(h)):l(h)},[l,u]);return b.useLayoutEffect(()=>o.listen(d),[o,d]),b.useEffect(()=>xF(r),[r]),b.createElement(bF,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const FF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",UF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,B$=b.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:d,viewTransition:h}=e,p=CF(e,OF),{basename:m}=b.useContext(Ds),E,y=!1;if(typeof u=="string"&&UF.test(u)&&(E=u,FF))try{let I=new URL(window.location.href),D=u.startsWith("//")?new URL(I.protocol+u):new URL(u),O=f_(D.pathname,m);D.origin===I.origin&&O!=null?u=O+D.search+D.hash:y=!0}catch{}let S=fF(u,{relative:i}),_=jF(u,{replace:o,state:a,target:l,preventScrollReset:d,relative:i,viewTransition:h});function v(I){r&&r(I),I.defaultPrevented||_(I)}return b.createElement("a",my({},p,{href:E||S,onClick:y||s?r:v,ref:n,target:l}))});var cT;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(cT||(cT={}));var uT;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(uT||(uT={}));function jF(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=dp(),u=_i(),d=yx(t,{relative:o});return b.useCallback(h=>{if(DF(h,n)){h.preventDefault();let p=r!==void 0?r:rf(u)===rf(d);l(t,{replace:p,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[u,l,d,r,i,n,t,s,o,a])}function $$(t){let e=b.useRef(gy(t)),n=b.useRef(!1),r=_i(),i=b.useMemo(()=>NF(r.search,n.current?null:e.current),[r.search]),s=dp(),o=b.useCallback((a,l)=>{const u=gy(typeof a=="function"?a(i):a);n.current=!0,s("?"+u,l)},[s,i]);return[i,o]}const wx=b.createContext(void 0),BF=({children:t})=>{const[e,n]=b.useState("medium"),[r,i]=b.useState(!1);b.useEffect(()=>{const o=()=>{const a=window.innerWidth<=768;i(a)};return o(),window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[]),b.useEffect(()=>{const o=localStorage.getItem("mobileFontSize");o&&["small","medium","large"].includes(o)&&n(o)},[]),b.useEffect(()=>{if(r){const o=document.documentElement;o.classList.remove("font-size-small","font-size-medium","font-size-large"),o.classList.add(`font-size-${e}`)}},[e,r]);const s=o=>{r&&(n(o),localStorage.setItem("mobileFontSize",o))};return N.jsx(wx.Provider,{value:{fontSize:e,setFontSize:s,isMobile:r},children:t})},z$=()=>{const t=b.useContext(wx);if(t===void 0)throw new Error("useFontSize must be used within a FontSizeProvider");return t},$F=()=>{};var dT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ex=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},zF=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Tx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,d=s>>2,h=(s&3)<<4|a>>4;let p=(a&15)<<2|u>>6,m=u&63;l||(m=64,o||(p=64)),r.push(n[d],n[h],n[p],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Ex(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):zF(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||h==null)throw new qF;const p=s<<2|a>>4;if(r.push(p),u!==64){const m=a<<4&240|u>>2;if(r.push(m),h!==64){const E=u<<6&192|h;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class qF extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const WF=function(t){const e=Ex(t);return Tx.encodeByteArray(e,!0)},of=function(t){return WF(t).replace(/\./g,"")},Ix=function(t){try{return Tx.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HF=()=>Sx().__FIREBASE_DEFAULTS__,KF=()=>{if(typeof process>"u"||typeof dT>"u")return;const t=dT.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},GF=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Ix(t[1]);return e&&JSON.parse(e)},hp=()=>{try{return $F()||HF()||KF()||GF()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Ax=t=>{var e,n;return(n=(e=hp())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},QF=t=>{const e=Ax(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Px=()=>{var t;return(t=hp())==null?void 0:t.config},xx=t=>{var e;return(e=hp())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YF{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Os(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function y_(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q$(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[of(JSON.stringify(n)),of(JSON.stringify(o)),""].join(".")}const Rc={};function JF(){const t={prod:[],emulator:[]};for(const e of Object.keys(Rc))Rc[e]?t.emulator.push(e):t.prod.push(e);return t}function XF(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let hT=!1;function bx(t,e){if(typeof window>"u"||typeof document>"u"||!Os(window.location.host)||Rc[t]===e||Rc[t]||hT)return;Rc[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",s=JF().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function l(p,m){p.setAttribute("width","24"),p.setAttribute("id",m),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function u(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{hT=!0,o()},p}function d(p,m){p.setAttribute("id",m),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function h(){const p=XF(r),m=n("text"),E=document.getElementById(m)||document.createElement("span"),y=n("learnmore"),S=document.getElementById(y)||document.createElement("a"),_=n("preprendIcon"),v=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const I=p.element;a(I),d(S,y);const D=u();l(v,_),I.append(v,E,S,D),document.body.appendChild(I)}s?(E.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ZF(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tt())}function Rx(){var e;const t=(e=hp())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function e4(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function t4(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function n4(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function r4(){const t=Tt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Cx(){return!Rx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function kx(){return!Rx()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Dx(){try{return typeof indexedDB=="object"}catch{return!1}}function i4(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s4="FirebaseError";class Ur extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=s4,Object.setPrototypeOf(this,Ur.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vu.prototype.create)}}class Vu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?o4(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Ur(i,a,r)}}function o4(t,e){return t.replace(a4,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const a4=/\{\$([^}]+)}/g;function l4(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ro(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(fT(s)&&fT(o)){if(!Ro(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function fT(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function fc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function pc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function c4(t,e){const n=new u4(t,e);return n.subscribe.bind(n)}class u4{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");d4(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=$m),i.error===void 0&&(i.error=$m),i.complete===void 0&&(i.complete=$m);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function d4(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function $m(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ze(t){return t&&t._delegate?t._delegate:t}class Es{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h4{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new YF;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(p4(e))try{this.getOrInitializeService({instanceIdentifier:Xs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Xs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xs){return this.instances.has(e)}getOptions(e=Xs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:f4(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Xs){return this.component?this.component.multipleInstances?e:Xs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function f4(t){return t===Xs?void 0:t}function p4(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new h4(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ve;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ve||(ve={}));const g4={debug:ve.DEBUG,verbose:ve.VERBOSE,info:ve.INFO,warn:ve.WARN,error:ve.ERROR,silent:ve.SILENT},y4=ve.INFO,v4={[ve.DEBUG]:"log",[ve.VERBOSE]:"log",[ve.INFO]:"info",[ve.WARN]:"warn",[ve.ERROR]:"error"},_4=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=v4[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class v_{constructor(e){this.name=e,this._logLevel=y4,this._logHandler=_4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?g4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ve.DEBUG,...e),this._logHandler(this,ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ve.VERBOSE,...e),this._logHandler(this,ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ve.INFO,...e),this._logHandler(this,ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ve.WARN,...e),this._logHandler(this,ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ve.ERROR,...e),this._logHandler(this,ve.ERROR,...e)}}const w4=(t,e)=>e.some(n=>t instanceof n);let pT,mT;function E4(){return pT||(pT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function T4(){return mT||(mT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Nx=new WeakMap,yy=new WeakMap,Ox=new WeakMap,zm=new WeakMap,__=new WeakMap;function I4(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(us(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Nx.set(n,t)}).catch(()=>{}),__.set(e,t),e}function S4(t){if(yy.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});yy.set(t,e)}let vy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return yy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Ox.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return us(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function A4(t){vy=t(vy)}function P4(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(qm(this),e,...n);return Ox.set(r,e.sort?e.sort():[e]),us(r)}:T4().includes(t)?function(...e){return t.apply(qm(this),e),us(Nx.get(this))}:function(...e){return us(t.apply(qm(this),e))}}function x4(t){return typeof t=="function"?P4(t):(t instanceof IDBTransaction&&S4(t),w4(t,E4())?new Proxy(t,vy):t)}function us(t){if(t instanceof IDBRequest)return I4(t);if(zm.has(t))return zm.get(t);const e=x4(t);return e!==t&&(zm.set(t,e),__.set(e,t)),e}const qm=t=>__.get(t);function b4(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=us(o);return r&&o.addEventListener("upgradeneeded",l=>{r(us(o.result),l.oldVersion,l.newVersion,us(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const R4=["get","getKey","getAll","getAllKeys","count"],C4=["put","add","delete","clear"],Wm=new Map;function gT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Wm.get(e))return Wm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=C4.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||R4.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return Wm.set(e,s),s}A4(t=>({...t,get:(e,n,r)=>gT(e,n)||t.get(e,n,r),has:(e,n)=>!!gT(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(D4(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function D4(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const _y="@firebase/app",yT="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pi=new v_("@firebase/app"),N4="@firebase/app-compat",O4="@firebase/analytics-compat",V4="@firebase/analytics",M4="@firebase/app-check-compat",L4="@firebase/app-check",F4="@firebase/auth",U4="@firebase/auth-compat",j4="@firebase/database",B4="@firebase/data-connect",$4="@firebase/database-compat",z4="@firebase/functions",q4="@firebase/functions-compat",W4="@firebase/installations",H4="@firebase/installations-compat",K4="@firebase/messaging",G4="@firebase/messaging-compat",Q4="@firebase/performance",Y4="@firebase/performance-compat",J4="@firebase/remote-config",X4="@firebase/remote-config-compat",Z4="@firebase/storage",eU="@firebase/storage-compat",tU="@firebase/firestore",nU="@firebase/ai",rU="@firebase/firestore-compat",iU="firebase",sU="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wy="[DEFAULT]",oU={[_y]:"fire-core",[N4]:"fire-core-compat",[V4]:"fire-analytics",[O4]:"fire-analytics-compat",[L4]:"fire-app-check",[M4]:"fire-app-check-compat",[F4]:"fire-auth",[U4]:"fire-auth-compat",[j4]:"fire-rtdb",[B4]:"fire-data-connect",[$4]:"fire-rtdb-compat",[z4]:"fire-fn",[q4]:"fire-fn-compat",[W4]:"fire-iid",[H4]:"fire-iid-compat",[K4]:"fire-fcm",[G4]:"fire-fcm-compat",[Q4]:"fire-perf",[Y4]:"fire-perf-compat",[J4]:"fire-rc",[X4]:"fire-rc-compat",[Z4]:"fire-gcs",[eU]:"fire-gcs-compat",[tU]:"fire-fst",[rU]:"fire-fst-compat",[nU]:"fire-vertex","fire-js":"fire-js",[iU]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const af=new Map,aU=new Map,Ey=new Map;function vT(t,e){try{t.container.addComponent(e)}catch(n){pi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Co(t){const e=t.name;if(Ey.has(e))return pi.debug(`There were multiple attempts to register component ${e}.`),!1;Ey.set(e,t);for(const n of af.values())vT(n,t);for(const n of aU.values())vT(n,t);return!0}function fp(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Pn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lU={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ds=new Vu("app","Firebase",lU);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cU{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Es("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ds.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pl=sU;function Vx(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:wy,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw ds.create("bad-app-name",{appName:String(i)});if(n||(n=Px()),!n)throw ds.create("no-options");const s=af.get(i);if(s){if(Ro(n,s.options)&&Ro(r,s.config))return s;throw ds.create("duplicate-app",{appName:i})}const o=new m4(i);for(const l of Ey.values())o.addComponent(l);const a=new cU(n,r,o);return af.set(i,a),a}function Mx(t=wy){const e=af.get(t);if(!e&&t===wy&&Px())return Vx();if(!e)throw ds.create("no-app",{appName:t});return e}function Dr(t,e,n){let r=oU[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),pi.warn(o.join(" "));return}Co(new Es(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uU="firebase-heartbeat-database",dU=1,uu="firebase-heartbeat-store";let Hm=null;function Lx(){return Hm||(Hm=b4(uU,dU,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(uu)}catch(n){console.warn(n)}}}}).catch(t=>{throw ds.create("idb-open",{originalErrorMessage:t.message})})),Hm}async function hU(t){try{const n=(await Lx()).transaction(uu),r=await n.objectStore(uu).get(Fx(t));return await n.done,r}catch(e){if(e instanceof Ur)pi.warn(e.message);else{const n=ds.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});pi.warn(n.message)}}}async function _T(t,e){try{const r=(await Lx()).transaction(uu,"readwrite");await r.objectStore(uu).put(e,Fx(t)),await r.done}catch(n){if(n instanceof Ur)pi.warn(n.message);else{const r=ds.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});pi.warn(r.message)}}}function Fx(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fU=1024,pU=30;class mU{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new yU(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=wT();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>pU){const o=vU(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){pi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=wT(),{heartbeatsToSend:r,unsentEntries:i}=gU(this._heartbeatsCache.heartbeats),s=of(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return pi.warn(n),""}}}function wT(){return new Date().toISOString().substring(0,10)}function gU(t,e=fU){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),ET(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ET(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class yU{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Dx()?i4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await hU(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return _T(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return _T(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function ET(t){return of(JSON.stringify({version:2,heartbeats:t})).length}function vU(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _U(t){Co(new Es("platform-logger",e=>new k4(e),"PRIVATE")),Co(new Es("heartbeat",e=>new mU(e),"PRIVATE")),Dr(_y,yT,t),Dr(_y,yT,"esm2020"),Dr("fire-js","")}_U("");function Ux(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const wU=Ux,jx=new Vu("auth","Firebase",Ux());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lf=new v_("@firebase/auth");function EU(t,...e){lf.logLevel<=ve.WARN&&lf.warn(`Auth (${Pl}): ${t}`,...e)}function dh(t,...e){lf.logLevel<=ve.ERROR&&lf.error(`Auth (${Pl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pr(t,...e){throw w_(t,...e)}function Nr(t,...e){return w_(t,...e)}function Bx(t,e,n){const r={...wU(),[e]:n};return new Vu("auth","Firebase",r).create(e,{appName:t.name})}function si(t){return Bx(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function w_(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return jx.create(t,...e)}function ue(t,e,...n){if(!t)throw w_(e,...n)}function ti(t){const e="INTERNAL ASSERTION FAILED: "+t;throw dh(e),new Error(e)}function mi(t,e){t||ti(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ty(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function TU(){return TT()==="http:"||TT()==="https:"}function TT(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(TU()||t4()||"connection"in navigator)?navigator.onLine:!0}function SU(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e,n){this.shortDelay=e,this.longDelay=n,mi(n>e,"Short delay should be less than long delay!"),this.isMobile=ZF()||n4()}get(){return IU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(t,e){mi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ti("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ti("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ti("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PU=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],xU=new Lu(3e4,6e4);function wi(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function jr(t,e,n,r,i={}){return zx(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Mu({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...s};return e4()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Os(t.emulatorConfig.host)&&(u.credentials="include"),$x.fetch()(await qx(t,t.config.apiHost,n,a),u)})}async function zx(t,e,n){t._canInitEmulator=!1;const r={...AU,...e};try{const i=new RU(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw $d(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw $d(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw $d(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw $d(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Bx(t,d,u);pr(t,d)}}catch(i){if(i instanceof Ur)throw i;pr(t,"network-request-failed",{message:String(i)})}}async function Fu(t,e,n,r,i={}){const s=await jr(t,e,n,r,i);return"mfaPendingCredential"in s&&pr(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function qx(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?E_(t.config,i):`${t.config.apiScheme}://${i}`;return PU.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function bU(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class RU{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Nr(this.auth,"network-request-failed")),xU.get())})}}function $d(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Nr(t,e,r);return i.customData._tokenResponse=n,i}function IT(t){return t!==void 0&&t.enterprise!==void 0}class CU{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return bU(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function kU(t,e){return jr(t,"GET","/v2/recaptchaConfig",wi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DU(t,e){return jr(t,"POST","/v1/accounts:delete",e)}async function cf(t,e){return jr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function NU(t,e=!1){const n=Ze(t),r=await n.getIdToken(e),i=T_(r);ue(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Cc(Km(i.auth_time)),issuedAtTime:Cc(Km(i.iat)),expirationTime:Cc(Km(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Km(t){return Number(t)*1e3}function T_(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return dh("JWT malformed, contained fewer than 3 sections"),null;try{const i=Ix(n);return i?JSON.parse(i):(dh("Failed to decode base64 JWT payload"),null)}catch(i){return dh("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function ST(t){const e=T_(t);return ue(e,"internal-error"),ue(typeof e.exp<"u","internal-error"),ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ja(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ur&&OU(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function OU({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cc(this.lastLoginAt),this.creationTime=Cc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uf(t){var h;const e=t.auth,n=await t.getIdToken(),r=await Ja(t,cf(e,{idToken:n}));ue(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=(h=i.providerUserInfo)!=null&&h.length?Wx(i.providerUserInfo):[],o=LU(t.providerData,s),a=t.isAnonymous,l=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),u=a?l:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Iy(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function MU(t){const e=Ze(t);await uf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function LU(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Wx(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FU(t,e){const n=await zx(t,{},async()=>{const r=Mu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await qx(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&Os(t.emulatorConfig.host)&&(l.credentials="include"),$x.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function UU(t,e){return jr(t,"POST","/v2/accounts:revokeToken",wi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ue(e.idToken,"internal-error"),ue(typeof e.idToken<"u","internal-error"),ue(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ST(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ue(e.length!==0,"internal-error");const n=ST(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await FU(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Ca;return r&&(ue(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ue(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ue(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ca,this.toJSON())}_performRefresh(){return ti("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Di(t,e){ue(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ir{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new VU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Iy(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Ja(this,this.stsTokenManager.getToken(this.auth,e));return ue(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return NU(this,e)}reload(){return MU(this)}_assign(e){this!==e&&(ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ir({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await uf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Pn(this.auth.app))return Promise.reject(si(this.auth));const e=await this.getIdToken();return await Ja(this,DU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:h,emailVerified:p,isAnonymous:m,providerData:E,stsTokenManager:y}=n;ue(h&&y,e,"internal-error");const S=Ca.fromJSON(this.name,y);ue(typeof h=="string",e,"internal-error"),Di(r,e.name),Di(i,e.name),ue(typeof p=="boolean",e,"internal-error"),ue(typeof m=="boolean",e,"internal-error"),Di(s,e.name),Di(o,e.name),Di(a,e.name),Di(l,e.name),Di(u,e.name),Di(d,e.name);const _=new ir({uid:h,auth:e,email:i,emailVerified:p,displayName:r,isAnonymous:m,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:S,createdAt:u,lastLoginAt:d});return E&&Array.isArray(E)&&(_.providerData=E.map(v=>({...v}))),l&&(_._redirectEventId=l),_}static async _fromIdTokenResponse(e,n,r=!1){const i=new Ca;i.updateFromServerResponse(n);const s=new ir({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await uf(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ue(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?Wx(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Ca;a.updateFromIdToken(r);const l=new ir({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Iy(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT=new Map;function ni(t){mi(t instanceof Function,"Expected a class definition");let e=AT.get(t);return e?(mi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,AT.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Hx.type="NONE";const PT=Hx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hh(t,e,n){return`firebase:${t}:${e}:${n}`}class ka{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=hh(this.userKey,i.apiKey,s),this.fullPersistenceKey=hh("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await cf(this.auth,{idToken:e}).catch(()=>{});return n?ir._fromGetAccountInfoResponse(this.auth,n,e):null}return ir._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ka(ni(PT),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||ni(PT);const o=hh(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const d=await u._get(o);if(d){let h;if(typeof d=="string"){const p=await cf(e,{idToken:d}).catch(()=>{});if(!p)break;h=await ir._fromGetAccountInfoResponse(e,p,d)}else h=ir._fromJSON(e,d);u!==s&&(a=h),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new ka(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new ka(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xT(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Yx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Kx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Xx(e))return"Blackberry";if(Zx(e))return"Webos";if(Gx(e))return"Safari";if((e.includes("chrome/")||Qx(e))&&!e.includes("edge/"))return"Chrome";if(Jx(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Kx(t=Tt()){return/firefox\//i.test(t)}function Gx(t=Tt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Qx(t=Tt()){return/crios\//i.test(t)}function Yx(t=Tt()){return/iemobile/i.test(t)}function Jx(t=Tt()){return/android/i.test(t)}function Xx(t=Tt()){return/blackberry/i.test(t)}function Zx(t=Tt()){return/webos/i.test(t)}function I_(t=Tt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function jU(t=Tt()){var e;return I_(t)&&!!((e=window.navigator)!=null&&e.standalone)}function BU(){return r4()&&document.documentMode===10}function eb(t=Tt()){return I_(t)||Jx(t)||Zx(t)||Xx(t)||/windows phone/i.test(t)||Yx(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tb(t,e=[]){let n;switch(t){case"Browser":n=xT(Tt());break;case"Worker":n=`${xT(Tt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Pl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $U{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zU(t,e={}){return jr(t,"GET","/v2/passwordPolicy",wi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qU=6;class WU{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??qU,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HU{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bT(this),this.idTokenSubscription=new bT(this),this.beforeStateQueue=new $U(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=jx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ni(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await ka.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await cf(this,{idToken:e}),r=await ir._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(Pn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await uf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=SU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Pn(this.app))return Promise.reject(si(this));const n=e?Ze(e):null;return n&&ue(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Pn(this.app)?Promise.reject(si(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Pn(this.app)?Promise.reject(si(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ni(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await zU(this),n=new WU(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Vu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await UU(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ni(e)||this._popupRedirectResolver;ue(n,this,"argument-error"),this.redirectPersistenceManager=await ka.create(this,[ni(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ue(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=tb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Pn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&EU(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Vs(t){return Ze(t)}class bT{constructor(e){this.auth=e,this.observer=null,this.addObserver=c4(n=>this.observer=n)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function KU(t){pp=t}function nb(t){return pp.loadJS(t)}function GU(){return pp.recaptchaEnterpriseScript}function QU(){return pp.gapiScript}function YU(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class JU{constructor(){this.enterprise=new XU}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class XU{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const ZU="recaptcha-enterprise",rb="NO_RECAPTCHA";class e3{constructor(e){this.type=ZU,this.auth=Vs(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{kU(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new CU(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;IT(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(rb)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new JU().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&IT(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=GU();l.length!==0&&(l+=a),nb(l).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function RT(t,e,n,r=!1,i=!1){const s=new e3(t);let o;if(i)o=rb;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function df(t,e,n,r,i){var s;if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await RT(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await RT(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t3(t,e){const n=fp(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Ro(s,e??{}))return i;pr(i,"already-initialized")}return n.initialize({options:e})}function n3(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ni);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function r3(t,e,n){const r=Vs(t);ue(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=ib(e),{host:o,port:a}=i3(e),l=a===null?"":`:${a}`,u={url:`${s}//${o}${l}/`},d=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ue(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ue(Ro(u,r.config.emulator)&&Ro(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,Os(o)?(y_(`${s}//${o}${l}`),bx("Auth",!0)):s3()}function ib(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function i3(t){const e=ib(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:CT(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:CT(o)}}}function CT(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function s3(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ti("not implemented")}_getIdTokenResponse(e){return ti("not implemented")}_linkToIdToken(e,n){return ti("not implemented")}_getReauthenticationResolver(e){return ti("not implemented")}}async function o3(t,e){return jr(t,"POST","/v1/accounts:update",e)}async function a3(t,e){return jr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l3(t,e){return Fu(t,"POST","/v1/accounts:signInWithPassword",wi(t,e))}async function c3(t,e){return jr(t,"POST","/v1/accounts:sendOobCode",wi(t,e))}async function u3(t,e){return c3(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d3(t,e){return Fu(t,"POST","/v1/accounts:signInWithEmailLink",wi(t,e))}async function h3(t,e){return Fu(t,"POST","/v1/accounts:signInWithEmailLink",wi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du extends S_{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new du(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new du(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return df(e,n,"signInWithPassword",l3);case"emailLink":return d3(e,{email:this._email,oobCode:this._password});default:pr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return df(e,r,"signUpPassword",a3);case"emailLink":return h3(e,{idToken:n,email:this._email,oobCode:this._password});default:pr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Da(t,e){return Fu(t,"POST","/v1/accounts:signInWithIdp",wi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f3="http://localhost";class ko extends S_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ko(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):pr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const o=new ko(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Da(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Da(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Da(e,n)}buildRequest(){const e={requestUri:f3,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Mu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p3(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function m3(t){const e=fc(pc(t)).link,n=e?fc(pc(e)).deep_link_id:null,r=fc(pc(t)).deep_link_id;return(r?fc(pc(r)).link:null)||r||n||e||t}class A_{constructor(e){const n=fc(pc(e)),r=n.apiKey??null,i=n.oobCode??null,s=p3(n.mode??null);ue(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=m3(e);try{return new A_(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(){this.providerId=xl.PROVIDER_ID}static credential(e,n){return du._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=A_.parseLink(n);return ue(r,"argument-error"),du._fromEmailAndCode(e,r.code,r.tenantId)}}xl.PROVIDER_ID="password";xl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";xl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu extends sb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi extends Uu{constructor(){super("facebook.com")}static credential(e){return ko._fromParams({providerId:Bi.PROVIDER_ID,signInMethod:Bi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Bi.credentialFromTaggedObject(e)}static credentialFromError(e){return Bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Bi.credential(e.oauthAccessToken)}catch{return null}}}Bi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Bi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i extends Uu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ko._fromParams({providerId:$i.PROVIDER_ID,signInMethod:$i.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return $i.credentialFromTaggedObject(e)}static credentialFromError(e){return $i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return $i.credential(n,r)}catch{return null}}}$i.GOOGLE_SIGN_IN_METHOD="google.com";$i.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi extends Uu{constructor(){super("github.com")}static credential(e){return ko._fromParams({providerId:zi.PROVIDER_ID,signInMethod:zi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zi.credentialFromTaggedObject(e)}static credentialFromError(e){return zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zi.credential(e.oauthAccessToken)}catch{return null}}}zi.GITHUB_SIGN_IN_METHOD="github.com";zi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi extends Uu{constructor(){super("twitter.com")}static credential(e,n){return ko._fromParams({providerId:qi.PROVIDER_ID,signInMethod:qi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return qi.credentialFromTaggedObject(e)}static credentialFromError(e){return qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return qi.credential(n,r)}catch{return null}}}qi.TWITTER_SIGN_IN_METHOD="twitter.com";qi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g3(t,e){return Fu(t,"POST","/v1/accounts:signUp",wi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await ir._fromIdTokenResponse(e,r,i),o=kT(r);return new Do({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=kT(r);return new Do({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function kT(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf extends Ur{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,hf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new hf(e,n,r,i)}}function ob(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?hf._fromErrorAndOperation(t,s,e,r):s})}async function y3(t,e,n=!1){const r=await Ja(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Do._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ab(t,e,n=!1){const{auth:r}=t;if(Pn(r.app))return Promise.reject(si(r));const i="reauthenticate";try{const s=await Ja(t,ob(r,i,e,t),n);ue(s.idToken,r,"internal-error");const o=T_(s.idToken);ue(o,r,"internal-error");const{sub:a}=o;return ue(t.uid===a,r,"user-mismatch"),Do._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&pr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lb(t,e,n=!1){if(Pn(t.app))return Promise.reject(si(t));const r="signIn",i=await ob(t,r,e),s=await Do._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function v3(t,e){return lb(Vs(t),e)}async function W$(t,e){return ab(Ze(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cb(t){const e=Vs(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function _3(t,e,n){const r=Vs(t);await df(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",u3)}async function DT(t,e,n){if(Pn(t.app))return Promise.reject(si(t));const r=Vs(t),o=await df(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",g3).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&cb(t),l}),a=await Do._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function w3(t,e,n){return Pn(t.app)?Promise.reject(si(t)):v3(Ze(t),xl.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&cb(t),r})}function H$(t,e){return E3(Ze(t),null,e)}async function E3(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(s.password=n);const o=await Ja(t,o3(r,s));await t._updateTokensIfNecessary(o,!0)}function T3(t,e,n,r){return Ze(t).onIdTokenChanged(e,n,r)}function I3(t,e,n){return Ze(t).beforeAuthStateChanged(e,n)}function S3(t,e,n,r){return Ze(t).onAuthStateChanged(e,n,r)}function NT(t){return Ze(t).signOut()}const ff="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ff,"1"),this.storage.removeItem(ff),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A3=1e3,P3=10;class db extends ub{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=eb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);BU()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,P3):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},A3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}db.type="LOCAL";const x3=db;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb extends ub{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}hb.type="SESSION";const fb=hb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b3(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new mp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await b3(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}mp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P_(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=P_("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const p=h;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Or(){return window}function C3(t){Or().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pb(){return typeof Or().WorkerGlobalScope<"u"&&typeof Or().importScripts=="function"}async function k3(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function D3(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function N3(){return pb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb="firebaseLocalStorageDb",O3=1,pf="firebaseLocalStorage",gb="fbase_key";class ju{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function gp(t,e){return t.transaction([pf],e?"readwrite":"readonly").objectStore(pf)}function V3(){const t=indexedDB.deleteDatabase(mb);return new ju(t).toPromise()}function Sy(){const t=indexedDB.open(mb,O3);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(pf,{keyPath:gb})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(pf)?e(r):(r.close(),await V3(),e(await Sy()))})})}async function OT(t,e,n){const r=gp(t,!0).put({[gb]:e,value:n});return new ju(r).toPromise()}async function M3(t,e){const n=gp(t,!1).get(e),r=await new ju(n).toPromise();return r===void 0?null:r.value}function VT(t,e){const n=gp(t,!0).delete(e);return new ju(n).toPromise()}const L3=800,F3=3;class yb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Sy(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>F3)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return pb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=mp._getInstance(N3()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await k3(),!this.activeServiceWorker)return;this.sender=new R3(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||D3()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Sy();return await OT(e,ff,"1"),await VT(e,ff),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>OT(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>M3(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>VT(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=gp(i,!1).getAll();return new ju(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),L3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}yb.type="LOCAL";const U3=yb;new Lu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j3(t,e){return e?ni(e):(ue(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_ extends S_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Da(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Da(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Da(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function B3(t){return lb(t.auth,new x_(t),t.bypassAuthState)}function $3(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),ab(n,new x_(t),t.bypassAuthState)}async function z3(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),y3(n,new x_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return B3;case"linkViaPopup":case"linkViaRedirect":return z3;case"reauthViaPopup":case"reauthViaRedirect":return $3;default:pr(this.auth,"internal-error")}}resolve(e){mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q3=new Lu(2e3,1e4);class Ea extends vb{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Ea.currentPopupAction&&Ea.currentPopupAction.cancel(),Ea.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ue(e,this.auth,"internal-error"),e}async onExecution(){mi(this.filter.length===1,"Popup operations only handle one event");const e=P_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Nr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Nr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ea.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Nr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,q3.get())};e()}}Ea.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W3="pendingRedirect",fh=new Map;class H3 extends vb{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=fh.get(this.auth._key());if(!e){try{const r=await K3(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}fh.set(this.auth._key(),e)}return this.bypassAuthState||fh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function K3(t,e){const n=Y3(e),r=Q3(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function G3(t,e){fh.set(t._key(),e)}function Q3(t){return ni(t._redirectPersistence)}function Y3(t){return hh(W3,t.config.apiKey,t.name)}async function J3(t,e,n=!1){if(Pn(t.app))return Promise.reject(si(t));const r=Vs(t),i=j3(r,e),o=await new H3(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X3=10*60*1e3;class Z3{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!e6(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!_b(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Nr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=X3&&this.cachedEventUids.clear(),this.cachedEventUids.has(MT(e))}saveEventToCache(e){this.cachedEventUids.add(MT(e)),this.lastProcessedEventTime=Date.now()}}function MT(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function _b({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function e6(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _b(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t6(t,e={}){return jr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,r6=/^https?/;async function i6(t){if(t.config.emulator)return;const{authorizedDomains:e}=await t6(t);for(const n of e)try{if(s6(n))return}catch{}pr(t,"unauthorized-domain")}function s6(t){const e=Ty(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!r6.test(n))return!1;if(n6.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o6=new Lu(3e4,6e4);function LT(){const t=Or().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function a6(t){return new Promise((e,n)=>{var i,s,o;function r(){LT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{LT(),n(Nr(t,"network-request-failed"))},timeout:o6.get()})}if((s=(i=Or().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((o=Or().gapi)!=null&&o.load)r();else{const a=YU("iframefcb");return Or()[a]=()=>{gapi.load?r():n(Nr(t,"network-request-failed"))},nb(`${QU()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw ph=null,e})}let ph=null;function l6(t){return ph=ph||a6(t),ph}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c6=new Lu(5e3,15e3),u6="__/auth/iframe",d6="emulator/auth/iframe",h6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},f6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function p6(t){const e=t.config;ue(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?E_(e,d6):`https://${t.config.authDomain}/${u6}`,r={apiKey:e.apiKey,appName:t.name,v:Pl},i=f6.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Mu(r).slice(1)}`}async function m6(t){const e=await l6(t),n=Or().gapi;return ue(n,t,"internal-error"),e.open({where:document.body,url:p6(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:h6,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Nr(t,"network-request-failed"),a=Or().setTimeout(()=>{s(o)},c6.get());function l(){Or().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},y6=500,v6=600,_6="_blank",w6="http://localhost";class FT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function E6(t,e,n,r=y6,i=v6){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={...g6,width:r.toString(),height:i.toString(),top:s,left:o},u=Tt().toLowerCase();n&&(a=Qx(u)?_6:n),Kx(u)&&(e=e||w6,l.scrollbars="yes");const d=Object.entries(l).reduce((p,[m,E])=>`${p}${m}=${E},`,"");if(jU(u)&&a!=="_self")return T6(e||"",a),new FT(null);const h=window.open(e||"",a,d);ue(h,t,"popup-blocked");try{h.focus()}catch{}return new FT(h)}function T6(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I6="__/auth/handler",S6="emulator/auth/handler",A6=encodeURIComponent("fac");async function UT(t,e,n,r,i,s){ue(t.config.authDomain,t,"auth-domain-config-required"),ue(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Pl,eventId:i};if(e instanceof sb){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",l4(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))o[d]=h}if(e instanceof Uu){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),u=l?`#${A6}=${encodeURIComponent(l)}`:"";return`${P6(t)}?${Mu(a).slice(1)}${u}`}function P6({config:t}){return t.emulator?E_(t,S6):`https://${t.authDomain}/${I6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm="webStorageSupport";class x6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=fb,this._completeRedirectFn=J3,this._overrideRedirectResult=G3}async _openPopup(e,n,r,i){var o;mi((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await UT(e,n,r,Ty(),i);return E6(e,s,P_())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await UT(e,n,r,Ty(),i);return C3(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(mi(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await m6(e),r=new Z3(e);return n.register("authEvent",i=>(ue(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Gm,{type:Gm},i=>{var o;const s=(o=i==null?void 0:i[0])==null?void 0:o[Gm];s!==void 0&&n(!!s),pr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=i6(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return eb()||Gx()||I_()}}const b6=x6;var jT="@firebase/auth",BT="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C6(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function k6(t){Co(new Es("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ue(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tb(t)},u=new HU(r,i,s,l);return n3(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Co(new Es("auth-internal",e=>{const n=Vs(e.getProvider("auth").getImmediate());return(r=>new R6(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Dr(jT,BT,C6(t)),Dr(jT,BT,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D6=5*60,N6=xx("authIdTokenMaxAge")||D6;let $T=null;const O6=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>N6)return;const i=n==null?void 0:n.token;$T!==i&&($T=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function V6(t=Mx()){const e=fp(t,"auth");if(e.isInitialized())return e.getImmediate();const n=t3(t,{popupRedirectResolver:b6,persistence:[U3,x3,fb]}),r=xx("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=O6(s.toString());I3(n,o,()=>o(n.currentUser)),T3(n,a=>o(a))}}const i=Ax("auth");return i&&r3(n,`http://${i}`),n}function M6(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}KU({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Nr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",M6().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});k6("Browser");var L6="firebase",F6="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Dr(L6,F6,"app");var zT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hs,wb;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,w){function P(){}P.prototype=w.prototype,T.D=w.prototype,T.prototype=new P,T.prototype.constructor=T,T.C=function(x,C,k){for(var R=Array(arguments.length-2),W=2;W<arguments.length;W++)R[W-2]=arguments[W];return w.prototype[C].apply(x,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,w,P){P||(P=0);var x=Array(16);if(typeof w=="string")for(var C=0;16>C;++C)x[C]=w.charCodeAt(P++)|w.charCodeAt(P++)<<8|w.charCodeAt(P++)<<16|w.charCodeAt(P++)<<24;else for(C=0;16>C;++C)x[C]=w[P++]|w[P++]<<8|w[P++]<<16|w[P++]<<24;w=T.g[0],P=T.g[1],C=T.g[2];var k=T.g[3],R=w+(k^P&(C^k))+x[0]+3614090360&4294967295;w=P+(R<<7&4294967295|R>>>25),R=k+(C^w&(P^C))+x[1]+3905402710&4294967295,k=w+(R<<12&4294967295|R>>>20),R=C+(P^k&(w^P))+x[2]+606105819&4294967295,C=k+(R<<17&4294967295|R>>>15),R=P+(w^C&(k^w))+x[3]+3250441966&4294967295,P=C+(R<<22&4294967295|R>>>10),R=w+(k^P&(C^k))+x[4]+4118548399&4294967295,w=P+(R<<7&4294967295|R>>>25),R=k+(C^w&(P^C))+x[5]+1200080426&4294967295,k=w+(R<<12&4294967295|R>>>20),R=C+(P^k&(w^P))+x[6]+2821735955&4294967295,C=k+(R<<17&4294967295|R>>>15),R=P+(w^C&(k^w))+x[7]+4249261313&4294967295,P=C+(R<<22&4294967295|R>>>10),R=w+(k^P&(C^k))+x[8]+1770035416&4294967295,w=P+(R<<7&4294967295|R>>>25),R=k+(C^w&(P^C))+x[9]+2336552879&4294967295,k=w+(R<<12&4294967295|R>>>20),R=C+(P^k&(w^P))+x[10]+4294925233&4294967295,C=k+(R<<17&4294967295|R>>>15),R=P+(w^C&(k^w))+x[11]+2304563134&4294967295,P=C+(R<<22&4294967295|R>>>10),R=w+(k^P&(C^k))+x[12]+1804603682&4294967295,w=P+(R<<7&4294967295|R>>>25),R=k+(C^w&(P^C))+x[13]+4254626195&4294967295,k=w+(R<<12&4294967295|R>>>20),R=C+(P^k&(w^P))+x[14]+2792965006&4294967295,C=k+(R<<17&4294967295|R>>>15),R=P+(w^C&(k^w))+x[15]+1236535329&4294967295,P=C+(R<<22&4294967295|R>>>10),R=w+(C^k&(P^C))+x[1]+4129170786&4294967295,w=P+(R<<5&4294967295|R>>>27),R=k+(P^C&(w^P))+x[6]+3225465664&4294967295,k=w+(R<<9&4294967295|R>>>23),R=C+(w^P&(k^w))+x[11]+643717713&4294967295,C=k+(R<<14&4294967295|R>>>18),R=P+(k^w&(C^k))+x[0]+3921069994&4294967295,P=C+(R<<20&4294967295|R>>>12),R=w+(C^k&(P^C))+x[5]+3593408605&4294967295,w=P+(R<<5&4294967295|R>>>27),R=k+(P^C&(w^P))+x[10]+38016083&4294967295,k=w+(R<<9&4294967295|R>>>23),R=C+(w^P&(k^w))+x[15]+3634488961&4294967295,C=k+(R<<14&4294967295|R>>>18),R=P+(k^w&(C^k))+x[4]+3889429448&4294967295,P=C+(R<<20&4294967295|R>>>12),R=w+(C^k&(P^C))+x[9]+568446438&4294967295,w=P+(R<<5&4294967295|R>>>27),R=k+(P^C&(w^P))+x[14]+3275163606&4294967295,k=w+(R<<9&4294967295|R>>>23),R=C+(w^P&(k^w))+x[3]+4107603335&4294967295,C=k+(R<<14&4294967295|R>>>18),R=P+(k^w&(C^k))+x[8]+1163531501&4294967295,P=C+(R<<20&4294967295|R>>>12),R=w+(C^k&(P^C))+x[13]+2850285829&4294967295,w=P+(R<<5&4294967295|R>>>27),R=k+(P^C&(w^P))+x[2]+4243563512&4294967295,k=w+(R<<9&4294967295|R>>>23),R=C+(w^P&(k^w))+x[7]+1735328473&4294967295,C=k+(R<<14&4294967295|R>>>18),R=P+(k^w&(C^k))+x[12]+2368359562&4294967295,P=C+(R<<20&4294967295|R>>>12),R=w+(P^C^k)+x[5]+4294588738&4294967295,w=P+(R<<4&4294967295|R>>>28),R=k+(w^P^C)+x[8]+2272392833&4294967295,k=w+(R<<11&4294967295|R>>>21),R=C+(k^w^P)+x[11]+1839030562&4294967295,C=k+(R<<16&4294967295|R>>>16),R=P+(C^k^w)+x[14]+4259657740&4294967295,P=C+(R<<23&4294967295|R>>>9),R=w+(P^C^k)+x[1]+2763975236&4294967295,w=P+(R<<4&4294967295|R>>>28),R=k+(w^P^C)+x[4]+1272893353&4294967295,k=w+(R<<11&4294967295|R>>>21),R=C+(k^w^P)+x[7]+4139469664&4294967295,C=k+(R<<16&4294967295|R>>>16),R=P+(C^k^w)+x[10]+3200236656&4294967295,P=C+(R<<23&4294967295|R>>>9),R=w+(P^C^k)+x[13]+681279174&4294967295,w=P+(R<<4&4294967295|R>>>28),R=k+(w^P^C)+x[0]+3936430074&4294967295,k=w+(R<<11&4294967295|R>>>21),R=C+(k^w^P)+x[3]+3572445317&4294967295,C=k+(R<<16&4294967295|R>>>16),R=P+(C^k^w)+x[6]+76029189&4294967295,P=C+(R<<23&4294967295|R>>>9),R=w+(P^C^k)+x[9]+3654602809&4294967295,w=P+(R<<4&4294967295|R>>>28),R=k+(w^P^C)+x[12]+3873151461&4294967295,k=w+(R<<11&4294967295|R>>>21),R=C+(k^w^P)+x[15]+530742520&4294967295,C=k+(R<<16&4294967295|R>>>16),R=P+(C^k^w)+x[2]+3299628645&4294967295,P=C+(R<<23&4294967295|R>>>9),R=w+(C^(P|~k))+x[0]+4096336452&4294967295,w=P+(R<<6&4294967295|R>>>26),R=k+(P^(w|~C))+x[7]+1126891415&4294967295,k=w+(R<<10&4294967295|R>>>22),R=C+(w^(k|~P))+x[14]+2878612391&4294967295,C=k+(R<<15&4294967295|R>>>17),R=P+(k^(C|~w))+x[5]+4237533241&4294967295,P=C+(R<<21&4294967295|R>>>11),R=w+(C^(P|~k))+x[12]+1700485571&4294967295,w=P+(R<<6&4294967295|R>>>26),R=k+(P^(w|~C))+x[3]+2399980690&4294967295,k=w+(R<<10&4294967295|R>>>22),R=C+(w^(k|~P))+x[10]+4293915773&4294967295,C=k+(R<<15&4294967295|R>>>17),R=P+(k^(C|~w))+x[1]+2240044497&4294967295,P=C+(R<<21&4294967295|R>>>11),R=w+(C^(P|~k))+x[8]+1873313359&4294967295,w=P+(R<<6&4294967295|R>>>26),R=k+(P^(w|~C))+x[15]+4264355552&4294967295,k=w+(R<<10&4294967295|R>>>22),R=C+(w^(k|~P))+x[6]+2734768916&4294967295,C=k+(R<<15&4294967295|R>>>17),R=P+(k^(C|~w))+x[13]+1309151649&4294967295,P=C+(R<<21&4294967295|R>>>11),R=w+(C^(P|~k))+x[4]+4149444226&4294967295,w=P+(R<<6&4294967295|R>>>26),R=k+(P^(w|~C))+x[11]+3174756917&4294967295,k=w+(R<<10&4294967295|R>>>22),R=C+(w^(k|~P))+x[2]+718787259&4294967295,C=k+(R<<15&4294967295|R>>>17),R=P+(k^(C|~w))+x[9]+3951481745&4294967295,T.g[0]=T.g[0]+w&4294967295,T.g[1]=T.g[1]+(C+(R<<21&4294967295|R>>>11))&4294967295,T.g[2]=T.g[2]+C&4294967295,T.g[3]=T.g[3]+k&4294967295}r.prototype.u=function(T,w){w===void 0&&(w=T.length);for(var P=w-this.blockSize,x=this.B,C=this.h,k=0;k<w;){if(C==0)for(;k<=P;)i(this,T,k),k+=this.blockSize;if(typeof T=="string"){for(;k<w;)if(x[C++]=T.charCodeAt(k++),C==this.blockSize){i(this,x),C=0;break}}else for(;k<w;)if(x[C++]=T[k++],C==this.blockSize){i(this,x),C=0;break}}this.h=C,this.o+=w},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var w=1;w<T.length-8;++w)T[w]=0;var P=8*this.o;for(w=T.length-8;w<T.length;++w)T[w]=P&255,P/=256;for(this.u(T),T=Array(16),w=P=0;4>w;++w)for(var x=0;32>x;x+=8)T[P++]=this.g[w]>>>x&255;return T};function s(T,w){var P=a;return Object.prototype.hasOwnProperty.call(P,T)?P[T]:P[T]=w(T)}function o(T,w){this.h=w;for(var P=[],x=!0,C=T.length-1;0<=C;C--){var k=T[C]|0;x&&k==w||(P[C]=k,x=!1)}this.g=P}var a={};function l(T){return-128<=T&&128>T?s(T,function(w){return new o([w|0],0>w?-1:0)}):new o([T|0],0>T?-1:0)}function u(T){if(isNaN(T)||!isFinite(T))return h;if(0>T)return S(u(-T));for(var w=[],P=1,x=0;T>=P;x++)w[x]=T/P|0,P*=4294967296;return new o(w,0)}function d(T,w){if(T.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(T.charAt(0)=="-")return S(d(T.substring(1),w));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=u(Math.pow(w,8)),x=h,C=0;C<T.length;C+=8){var k=Math.min(8,T.length-C),R=parseInt(T.substring(C,C+k),w);8>k?(k=u(Math.pow(w,k)),x=x.j(k).add(u(R))):(x=x.j(P),x=x.add(u(R)))}return x}var h=l(0),p=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(y(this))return-S(this).m();for(var T=0,w=1,P=0;P<this.g.length;P++){var x=this.i(P);T+=(0<=x?x:4294967296+x)*w,w*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(E(this))return"0";if(y(this))return"-"+S(this).toString(T);for(var w=u(Math.pow(T,6)),P=this,x="";;){var C=D(P,w).g;P=_(P,C.j(w));var k=((0<P.g.length?P.g[0]:P.h)>>>0).toString(T);if(P=C,E(P))return k+x;for(;6>k.length;)k="0"+k;x=k+x}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function E(T){if(T.h!=0)return!1;for(var w=0;w<T.g.length;w++)if(T.g[w]!=0)return!1;return!0}function y(T){return T.h==-1}t.l=function(T){return T=_(this,T),y(T)?-1:E(T)?0:1};function S(T){for(var w=T.g.length,P=[],x=0;x<w;x++)P[x]=~T.g[x];return new o(P,~T.h).add(p)}t.abs=function(){return y(this)?S(this):this},t.add=function(T){for(var w=Math.max(this.g.length,T.g.length),P=[],x=0,C=0;C<=w;C++){var k=x+(this.i(C)&65535)+(T.i(C)&65535),R=(k>>>16)+(this.i(C)>>>16)+(T.i(C)>>>16);x=R>>>16,k&=65535,R&=65535,P[C]=R<<16|k}return new o(P,P[P.length-1]&-2147483648?-1:0)};function _(T,w){return T.add(S(w))}t.j=function(T){if(E(this)||E(T))return h;if(y(this))return y(T)?S(this).j(S(T)):S(S(this).j(T));if(y(T))return S(this.j(S(T)));if(0>this.l(m)&&0>T.l(m))return u(this.m()*T.m());for(var w=this.g.length+T.g.length,P=[],x=0;x<2*w;x++)P[x]=0;for(x=0;x<this.g.length;x++)for(var C=0;C<T.g.length;C++){var k=this.i(x)>>>16,R=this.i(x)&65535,W=T.i(C)>>>16,le=T.i(C)&65535;P[2*x+2*C]+=R*le,v(P,2*x+2*C),P[2*x+2*C+1]+=k*le,v(P,2*x+2*C+1),P[2*x+2*C+1]+=R*W,v(P,2*x+2*C+1),P[2*x+2*C+2]+=k*W,v(P,2*x+2*C+2)}for(x=0;x<w;x++)P[x]=P[2*x+1]<<16|P[2*x];for(x=w;x<2*w;x++)P[x]=0;return new o(P,0)};function v(T,w){for(;(T[w]&65535)!=T[w];)T[w+1]+=T[w]>>>16,T[w]&=65535,w++}function I(T,w){this.g=T,this.h=w}function D(T,w){if(E(w))throw Error("division by zero");if(E(T))return new I(h,h);if(y(T))return w=D(S(T),w),new I(S(w.g),S(w.h));if(y(w))return w=D(T,S(w)),new I(S(w.g),w.h);if(30<T.g.length){if(y(T)||y(w))throw Error("slowDivide_ only works with positive integers.");for(var P=p,x=w;0>=x.l(T);)P=O(P),x=O(x);var C=V(P,1),k=V(x,1);for(x=V(x,2),P=V(P,2);!E(x);){var R=k.add(x);0>=R.l(T)&&(C=C.add(P),k=R),x=V(x,1),P=V(P,1)}return w=_(T,C.j(w)),new I(C,w)}for(C=h;0<=T.l(w);){for(P=Math.max(1,Math.floor(T.m()/w.m())),x=Math.ceil(Math.log(P)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),k=u(P),R=k.j(w);y(R)||0<R.l(T);)P-=x,k=u(P),R=k.j(w);E(k)&&(k=p),C=C.add(k),T=_(T,R)}return new I(C,T)}t.A=function(T){return D(this,T).h},t.and=function(T){for(var w=Math.max(this.g.length,T.g.length),P=[],x=0;x<w;x++)P[x]=this.i(x)&T.i(x);return new o(P,this.h&T.h)},t.or=function(T){for(var w=Math.max(this.g.length,T.g.length),P=[],x=0;x<w;x++)P[x]=this.i(x)|T.i(x);return new o(P,this.h|T.h)},t.xor=function(T){for(var w=Math.max(this.g.length,T.g.length),P=[],x=0;x<w;x++)P[x]=this.i(x)^T.i(x);return new o(P,this.h^T.h)};function O(T){for(var w=T.g.length+1,P=[],x=0;x<w;x++)P[x]=T.i(x)<<1|T.i(x-1)>>>31;return new o(P,T.h)}function V(T,w){var P=w>>5;w%=32;for(var x=T.g.length-P,C=[],k=0;k<x;k++)C[k]=0<w?T.i(k+P)>>>w|T.i(k+P+1)<<32-w:T.i(k+P);return new o(C,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,wb=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,hs=o}).apply(typeof zT<"u"?zT:typeof self<"u"?self:typeof window<"u"?window:{});var zd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Eb,mc,Tb,mh,Ay,Ib,Sb,Ab;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,f,g){return c==Array.prototype||c==Object.prototype||(c[f]=g.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof zd=="object"&&zd];for(var f=0;f<c.length;++f){var g=c[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function i(c,f){if(f)e:{var g=r;c=c.split(".");for(var A=0;A<c.length-1;A++){var L=c[A];if(!(L in g))break e;g=g[L]}c=c[c.length-1],A=g[c],f=f(A),f!=A&&f!=null&&e(g,c,{configurable:!0,writable:!0,value:f})}}function s(c,f){c instanceof String&&(c+="");var g=0,A=!1,L={next:function(){if(!A&&g<c.length){var U=g++;return{value:f(U,c[U]),done:!1}}return A=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(c){return c||function(){return s(this,function(f,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(c){var f=typeof c;return f=f!="object"?f:c?Array.isArray(c)?"array":f:"null",f=="array"||f=="object"&&typeof c.length=="number"}function u(c){var f=typeof c;return f=="object"&&c!=null||f=="function"}function d(c,f,g){return c.call.apply(c.bind,arguments)}function h(c,f,g){if(!c)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,A),c.apply(f,L)}}return function(){return c.apply(f,arguments)}}function p(c,f,g){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,p.apply(null,arguments)}function m(c,f){var g=Array.prototype.slice.call(arguments,1);return function(){var A=g.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function E(c,f){function g(){}g.prototype=f.prototype,c.aa=f.prototype,c.prototype=new g,c.prototype.constructor=c,c.Qb=function(A,L,U){for(var Y=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)Y[Ue-2]=arguments[Ue];return f.prototype[L].apply(A,Y)}}function y(c){const f=c.length;if(0<f){const g=Array(f);for(let A=0;A<f;A++)g[A]=c[A];return g}return[]}function S(c,f){for(let g=1;g<arguments.length;g++){const A=arguments[g];if(l(A)){const L=c.length||0,U=A.length||0;c.length=L+U;for(let Y=0;Y<U;Y++)c[L+Y]=A[Y]}else c.push(A)}}class _{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function v(c){return/^[\s\xa0]*$/.test(c)}function I(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function D(c){return D[" "](c),c}D[" "]=function(){};var O=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function V(c,f,g){for(const A in c)f.call(g,c[A],A,c)}function T(c,f){for(const g in c)f.call(void 0,c[g],g,c)}function w(c){const f={};for(const g in c)f[g]=c[g];return f}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(c,f){let g,A;for(let L=1;L<arguments.length;L++){A=arguments[L];for(g in A)c[g]=A[g];for(let U=0;U<P.length;U++)g=P[U],Object.prototype.hasOwnProperty.call(A,g)&&(c[g]=A[g])}}function C(c){var f=1;c=c.split(":");const g=[];for(;0<f&&c.length;)g.push(c.shift()),f--;return c.length&&g.push(c.join(":")),g}function k(c){a.setTimeout(()=>{throw c},0)}function R(){var c=F;let f=null;return c.g&&(f=c.g,c.g=c.g.next,c.g||(c.h=null),f.next=null),f}class W{constructor(){this.h=this.g=null}add(f,g){const A=le.get();A.set(f,g),this.h?this.h.next=A:this.g=A,this.h=A}}var le=new _(()=>new se,c=>c.reset());class se{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let G,B=!1,F=new W,H=()=>{const c=a.Promise.resolve(void 0);G=()=>{c.then(ae)}};var ae=()=>{for(var c;c=R();){try{c.h.call(c.g)}catch(g){k(g)}var f=le;f.j(c),100>f.h&&(f.h++,c.next=f.g,f.g=c)}B=!1};function X(){this.s=this.s,this.C=this.C}X.prototype.s=!1,X.prototype.ma=function(){this.s||(this.s=!0,this.N())},X.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Z(c,f){this.type=c,this.g=this.target=f,this.defaultPrevented=!1}Z.prototype.h=function(){this.defaultPrevented=!0};var ce=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,f=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const g=()=>{};a.addEventListener("test",g,f),a.removeEventListener("test",g,f)}catch{}return c}();function we(c,f){if(Z.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var g=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=f,f=c.relatedTarget){if(O){e:{try{D(f.nodeName);var L=!0;break e}catch{}L=!1}L||(f=null)}}else g=="mouseover"?f=c.fromElement:g=="mouseout"&&(f=c.toElement);this.relatedTarget=f,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Le[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&we.aa.h.call(this)}}E(we,Z);var Le={2:"touch",3:"pen",4:"mouse"};we.prototype.h=function(){we.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var me="closure_listenable_"+(1e6*Math.random()|0),Ke=0;function Jt(c,f,g,A,L){this.listener=c,this.proxy=null,this.src=f,this.type=g,this.capture=!!A,this.ha=L,this.key=++Ke,this.da=this.fa=!1}function Xt(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function St(c){this.src=c,this.g={},this.h=0}St.prototype.add=function(c,f,g,A,L){var U=c.toString();c=this.g[U],c||(c=this.g[U]=[],this.h++);var Y=ln(c,f,A,L);return-1<Y?(f=c[Y],g||(f.fa=!1)):(f=new Jt(f,this.src,U,!!A,L),f.fa=g,c.push(f)),f};function Ln(c,f){var g=f.type;if(g in c.g){var A=c.g[g],L=Array.prototype.indexOf.call(A,f,void 0),U;(U=0<=L)&&Array.prototype.splice.call(A,L,1),U&&(Xt(f),c.g[g].length==0&&(delete c.g[g],c.h--))}}function ln(c,f,g,A){for(var L=0;L<c.length;++L){var U=c[L];if(!U.da&&U.listener==f&&U.capture==!!g&&U.ha==A)return L}return-1}var mr="closure_lm_"+(1e6*Math.random()|0),$r={};function Bs(c,f,g,A,L){if(Array.isArray(f)){for(var U=0;U<f.length;U++)Bs(c,f[U],g,A,L);return null}return g=nd(g),c&&c[me]?c.K(f,g,u(A)?!!A.capture:!!A,L):Vl(c,f,g,!1,A,L)}function Vl(c,f,g,A,L,U){if(!f)throw Error("Invalid event type");var Y=u(L)?!!L.capture:!!L,Ue=Hn(c);if(Ue||(c[mr]=Ue=new St(c)),g=Ue.add(f,g,A,Y,U),g.proxy)return g;if(A=$s(),g.proxy=A,A.src=c,A.listener=g,c.addEventListener)ce||(L=Y),L===void 0&&(L=!1),c.addEventListener(f.toString(),A,L);else if(c.attachEvent)c.attachEvent(Ii(f.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return g}function $s(){function c(g){return f.call(c.src,c.listener,g)}const f=td;return c}function zr(c,f,g,A,L){if(Array.isArray(f))for(var U=0;U<f.length;U++)zr(c,f[U],g,A,L);else A=u(A)?!!A.capture:!!A,g=nd(g),c&&c[me]?(c=c.i,f=String(f).toString(),f in c.g&&(U=c.g[f],g=ln(U,g,A,L),-1<g&&(Xt(U[g]),Array.prototype.splice.call(U,g,1),U.length==0&&(delete c.g[f],c.h--)))):c&&(c=Hn(c))&&(f=c.g[f.toString()],c=-1,f&&(c=ln(f,g,A,L)),(g=-1<c?f[c]:null)&&zo(g))}function zo(c){if(typeof c!="number"&&c&&!c.da){var f=c.src;if(f&&f[me])Ln(f.i,c);else{var g=c.type,A=c.proxy;f.removeEventListener?f.removeEventListener(g,A,c.capture):f.detachEvent?f.detachEvent(Ii(g),A):f.addListener&&f.removeListener&&f.removeListener(A),(g=Hn(f))?(Ln(g,c),g.h==0&&(g.src=null,f[mr]=null)):Xt(c)}}}function Ii(c){return c in $r?$r[c]:$r[c]="on"+c}function td(c,f){if(c.da)c=!0;else{f=new we(f,this);var g=c.listener,A=c.ha||c.src;c.fa&&zo(c),c=g.call(A,f)}return c}function Hn(c){return c=c[mr],c instanceof St?c:null}var Ml="__closure_events_fn_"+(1e9*Math.random()>>>0);function nd(c){return typeof c=="function"?c:(c[Ml]||(c[Ml]=function(f){return c.handleEvent(f)}),c[Ml])}function Ne(){X.call(this),this.i=new St(this),this.M=this,this.F=null}E(Ne,X),Ne.prototype[me]=!0,Ne.prototype.removeEventListener=function(c,f,g,A){zr(this,c,f,g,A)};function st(c,f){var g,A=c.F;if(A)for(g=[];A;A=A.F)g.push(A);if(c=c.M,A=f.type||f,typeof f=="string")f=new Z(f,c);else if(f instanceof Z)f.target=f.target||c;else{var L=f;f=new Z(A,c),x(f,L)}if(L=!0,g)for(var U=g.length-1;0<=U;U--){var Y=f.g=g[U];L=qo(Y,A,!0,f)&&L}if(Y=f.g=c,L=qo(Y,A,!0,f)&&L,L=qo(Y,A,!1,f)&&L,g)for(U=0;U<g.length;U++)Y=f.g=g[U],L=qo(Y,A,!1,f)&&L}Ne.prototype.N=function(){if(Ne.aa.N.call(this),this.i){var c=this.i,f;for(f in c.g){for(var g=c.g[f],A=0;A<g.length;A++)Xt(g[A]);delete c.g[f],c.h--}}this.F=null},Ne.prototype.K=function(c,f,g,A){return this.i.add(String(c),f,!1,g,A)},Ne.prototype.L=function(c,f,g,A){return this.i.add(String(c),f,!0,g,A)};function qo(c,f,g,A){if(f=c.i.g[String(f)],!f)return!0;f=f.concat();for(var L=!0,U=0;U<f.length;++U){var Y=f[U];if(Y&&!Y.da&&Y.capture==g){var Ue=Y.listener,kt=Y.ha||Y.src;Y.fa&&Ln(c.i,Y),L=Ue.call(kt,A)!==!1&&L}}return L&&!A.defaultPrevented}function rd(c,f,g){if(typeof c=="function")g&&(c=p(c,g));else if(c&&typeof c.handleEvent=="function")c=p(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(c,f||0)}function zs(c){c.g=rd(()=>{c.g=null,c.i&&(c.i=!1,zs(c))},c.l);const f=c.h;c.h=null,c.m.apply(null,f)}class Hp extends X{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:zs(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Si(c){X.call(this),this.h=c,this.g={}}E(Si,X);var Wo=[];function qr(c){V(c.g,function(f,g){this.g.hasOwnProperty(g)&&zo(f)},c),c.g={}}Si.prototype.N=function(){Si.aa.N.call(this),qr(this)},Si.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ho=a.JSON.stringify,Ai=a.JSON.parse,Kp=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Ll(){}Ll.prototype.h=null;function Fl(c){return c.h||(c.h=c.i())}function Ul(){}var qs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ws(){Z.call(this,"d")}E(Ws,Z);function Fn(){Z.call(this,"c")}E(Fn,Z);var Wr={},de=null;function Te(){return de=de||new Ne}Wr.La="serverreachability";function Fe(c){Z.call(this,Wr.La,c)}E(Fe,Z);function Rt(c){const f=Te();st(f,new Fe(f))}Wr.STAT_EVENT="statevent";function cn(c,f){Z.call(this,Wr.STAT_EVENT,c),this.stat=f}E(cn,Z);function Ge(c){const f=Te();st(f,new cn(f,c))}Wr.Ma="timingevent";function gr(c,f){Z.call(this,Wr.Ma,c),this.size=f}E(gr,Z);function Ct(c,f){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},f)}function un(){this.g=!0}un.prototype.xa=function(){this.g=!1};function rk(c,f,g,A,L,U){c.info(function(){if(c.g)if(U)for(var Y="",Ue=U.split("&"),kt=0;kt<Ue.length;kt++){var Pe=Ue[kt].split("=");if(1<Pe.length){var Mt=Pe[0];Pe=Pe[1];var Lt=Mt.split("_");Y=2<=Lt.length&&Lt[1]=="type"?Y+(Mt+"="+Pe+"&"):Y+(Mt+"=redacted&")}}else Y=null;else Y=U;return"XMLHTTP REQ ("+A+") [attempt "+L+"]: "+f+`
`+g+`
`+Y})}function ik(c,f,g,A,L,U,Y){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+L+"]: "+f+`
`+g+`
`+U+" "+Y})}function Ko(c,f,g,A){c.info(function(){return"XMLHTTP TEXT ("+f+"): "+ok(c,g)+(A?" "+A:"")})}function sk(c,f){c.info(function(){return"TIMEOUT: "+f})}un.prototype.info=function(){};function ok(c,f){if(!c.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(c=0;c<g.length;c++)if(Array.isArray(g[c])){var A=g[c];if(!(2>A.length)){var L=A[1];if(Array.isArray(L)&&!(1>L.length)){var U=L[0];if(U!="noop"&&U!="stop"&&U!="close")for(var Y=1;Y<L.length;Y++)L[Y]=""}}}}return Ho(g)}catch{return f}}var id={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},bw={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Gp;function sd(){}E(sd,Ll),sd.prototype.g=function(){return new XMLHttpRequest},sd.prototype.i=function(){return{}},Gp=new sd;function Pi(c,f,g,A){this.j=c,this.i=f,this.l=g,this.R=A||1,this.U=new Si(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Rw}function Rw(){this.i=null,this.g="",this.h=!1}var Cw={},Qp={};function Yp(c,f,g){c.L=1,c.v=cd(Hr(f)),c.m=g,c.P=!0,kw(c,null)}function kw(c,f){c.F=Date.now(),od(c),c.A=Hr(c.v);var g=c.A,A=c.R;Array.isArray(A)||(A=[String(A)]),Ww(g.i,"t",A),c.C=0,g=c.j.J,c.h=new Rw,c.g=c0(c.j,g?f:null,!c.m),0<c.O&&(c.M=new Hp(p(c.Y,c,c.g),c.O)),f=c.U,g=c.g,A=c.ca;var L="readystatechange";Array.isArray(L)||(L&&(Wo[0]=L.toString()),L=Wo);for(var U=0;U<L.length;U++){var Y=Bs(g,L[U],A||f.handleEvent,!1,f.h||f);if(!Y)break;f.g[Y.key]=Y}f=c.H?w(c.H):{},c.m?(c.u||(c.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,f)):(c.u="GET",c.g.ea(c.A,c.u,null,f)),Rt(),rk(c.i,c.u,c.A,c.l,c.R,c.m)}Pi.prototype.ca=function(c){c=c.target;const f=this.M;f&&Kr(c)==3?f.j():this.Y(c)},Pi.prototype.Y=function(c){try{if(c==this.g)e:{const Lt=Kr(this.g);var f=this.g.Ba();const Yo=this.g.Z();if(!(3>Lt)&&(Lt!=3||this.g&&(this.h.h||this.g.oa()||Xw(this.g)))){this.J||Lt!=4||f==7||(f==8||0>=Yo?Rt(3):Rt(2)),Jp(this);var g=this.g.Z();this.X=g;t:if(Dw(this)){var A=Xw(this.g);c="";var L=A.length,U=Kr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Hs(this),jl(this);var Y="";break t}this.h.i=new a.TextDecoder}for(f=0;f<L;f++)this.h.h=!0,c+=this.h.i.decode(A[f],{stream:!(U&&f==L-1)});A.length=0,this.h.g+=c,this.C=0,Y=this.h.g}else Y=this.g.oa();if(this.o=g==200,ik(this.i,this.u,this.A,this.l,this.R,Lt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var Ue,kt=this.g;if((Ue=kt.g?kt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Ue)){var Pe=Ue;break t}}Pe=null}if(g=Pe)Ko(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Xp(this,g);else{this.o=!1,this.s=3,Ge(12),Hs(this),jl(this);break e}}if(this.P){g=!0;let Kn;for(;!this.J&&this.C<Y.length;)if(Kn=ak(this,Y),Kn==Qp){Lt==4&&(this.s=4,Ge(14),g=!1),Ko(this.i,this.l,null,"[Incomplete Response]");break}else if(Kn==Cw){this.s=4,Ge(15),Ko(this.i,this.l,Y,"[Invalid Chunk]"),g=!1;break}else Ko(this.i,this.l,Kn,null),Xp(this,Kn);if(Dw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Lt!=4||Y.length!=0||this.h.h||(this.s=1,Ge(16),g=!1),this.o=this.o&&g,!g)Ko(this.i,this.l,Y,"[Invalid Chunked Response]"),Hs(this),jl(this);else if(0<Y.length&&!this.W){this.W=!0;var Mt=this.j;Mt.g==this&&Mt.ba&&!Mt.M&&(Mt.j.info("Great, no buffering proxy detected. Bytes received: "+Y.length),im(Mt),Mt.M=!0,Ge(11))}}else Ko(this.i,this.l,Y,null),Xp(this,Y);Lt==4&&Hs(this),this.o&&!this.J&&(Lt==4?s0(this.j,this):(this.o=!1,od(this)))}else Sk(this.g),g==400&&0<Y.indexOf("Unknown SID")?(this.s=3,Ge(12)):(this.s=0,Ge(13)),Hs(this),jl(this)}}}catch{}finally{}};function Dw(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function ak(c,f){var g=c.C,A=f.indexOf(`
`,g);return A==-1?Qp:(g=Number(f.substring(g,A)),isNaN(g)?Cw:(A+=1,A+g>f.length?Qp:(f=f.slice(A,A+g),c.C=A+g,f)))}Pi.prototype.cancel=function(){this.J=!0,Hs(this)};function od(c){c.S=Date.now()+c.I,Nw(c,c.I)}function Nw(c,f){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Ct(p(c.ba,c),f)}function Jp(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Pi.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(sk(this.i,this.A),this.L!=2&&(Rt(),Ge(17)),Hs(this),this.s=2,jl(this)):Nw(this,this.S-c)};function jl(c){c.j.G==0||c.J||s0(c.j,c)}function Hs(c){Jp(c);var f=c.M;f&&typeof f.ma=="function"&&f.ma(),c.M=null,qr(c.U),c.g&&(f=c.g,c.g=null,f.abort(),f.ma())}function Xp(c,f){try{var g=c.j;if(g.G!=0&&(g.g==c||Zp(g.h,c))){if(!c.K&&Zp(g.h,c)&&g.G==3){try{var A=g.Da.g.parse(f)}catch{A=null}if(Array.isArray(A)&&A.length==3){var L=A;if(L[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<c.F)md(g),fd(g);else break e;rm(g),Ge(18)}}else g.za=L[1],0<g.za-g.T&&37500>L[2]&&g.F&&g.v==0&&!g.C&&(g.C=Ct(p(g.Za,g),6e3));if(1>=Mw(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else Gs(g,11)}else if((c.K||g.g==c)&&md(g),!v(f))for(L=g.Da.g.parse(f),f=0;f<L.length;f++){let Pe=L[f];if(g.T=Pe[0],Pe=Pe[1],g.G==2)if(Pe[0]=="c"){g.K=Pe[1],g.ia=Pe[2];const Mt=Pe[3];Mt!=null&&(g.la=Mt,g.j.info("VER="+g.la));const Lt=Pe[4];Lt!=null&&(g.Aa=Lt,g.j.info("SVER="+g.Aa));const Yo=Pe[5];Yo!=null&&typeof Yo=="number"&&0<Yo&&(A=1.5*Yo,g.L=A,g.j.info("backChannelRequestTimeoutMs_="+A)),A=g;const Kn=c.g;if(Kn){const yd=Kn.g?Kn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(yd){var U=A.h;U.g||yd.indexOf("spdy")==-1&&yd.indexOf("quic")==-1&&yd.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(em(U,U.h),U.h=null))}if(A.D){const sm=Kn.g?Kn.g.getResponseHeader("X-HTTP-Session-Id"):null;sm&&(A.ya=sm,ze(A.I,A.D,sm))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-c.F,g.j.info("Handshake RTT: "+g.R+"ms")),A=g;var Y=c;if(A.qa=l0(A,A.J?A.ia:null,A.W),Y.K){Lw(A.h,Y);var Ue=Y,kt=A.L;kt&&(Ue.I=kt),Ue.B&&(Jp(Ue),od(Ue)),A.g=Y}else r0(A);0<g.i.length&&pd(g)}else Pe[0]!="stop"&&Pe[0]!="close"||Gs(g,7);else g.G==3&&(Pe[0]=="stop"||Pe[0]=="close"?Pe[0]=="stop"?Gs(g,7):nm(g):Pe[0]!="noop"&&g.l&&g.l.ta(Pe),g.v=0)}}Rt(4)}catch{}}var lk=class{constructor(c,f){this.g=c,this.map=f}};function Ow(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Vw(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Mw(c){return c.h?1:c.g?c.g.size:0}function Zp(c,f){return c.h?c.h==f:c.g?c.g.has(f):!1}function em(c,f){c.g?c.g.add(f):c.h=f}function Lw(c,f){c.h&&c.h==f?c.h=null:c.g&&c.g.has(f)&&c.g.delete(f)}Ow.prototype.cancel=function(){if(this.i=Fw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Fw(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let f=c.i;for(const g of c.g.values())f=f.concat(g.D);return f}return y(c.i)}function ck(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var f=[],g=c.length,A=0;A<g;A++)f.push(c[A]);return f}f=[],g=0;for(A in c)f[g++]=c[A];return f}function uk(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var f=[];c=c.length;for(var g=0;g<c;g++)f.push(g);return f}f=[],g=0;for(const A in c)f[g++]=A;return f}}}function Uw(c,f){if(c.forEach&&typeof c.forEach=="function")c.forEach(f,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,f,void 0);else for(var g=uk(c),A=ck(c),L=A.length,U=0;U<L;U++)f.call(void 0,A[U],g&&g[U],c)}var jw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dk(c,f){if(c){c=c.split("&");for(var g=0;g<c.length;g++){var A=c[g].indexOf("="),L=null;if(0<=A){var U=c[g].substring(0,A);L=c[g].substring(A+1)}else U=c[g];f(U,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Ks(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Ks){this.h=c.h,ad(this,c.j),this.o=c.o,this.g=c.g,ld(this,c.s),this.l=c.l;var f=c.i,g=new zl;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),Bw(this,g),this.m=c.m}else c&&(f=String(c).match(jw))?(this.h=!1,ad(this,f[1]||"",!0),this.o=Bl(f[2]||""),this.g=Bl(f[3]||"",!0),ld(this,f[4]),this.l=Bl(f[5]||"",!0),Bw(this,f[6]||"",!0),this.m=Bl(f[7]||"")):(this.h=!1,this.i=new zl(null,this.h))}Ks.prototype.toString=function(){var c=[],f=this.j;f&&c.push($l(f,$w,!0),":");var g=this.g;return(g||f=="file")&&(c.push("//"),(f=this.o)&&c.push($l(f,$w,!0),"@"),c.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&c.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&c.push("/"),c.push($l(g,g.charAt(0)=="/"?pk:fk,!0))),(g=this.i.toString())&&c.push("?",g),(g=this.m)&&c.push("#",$l(g,gk)),c.join("")};function Hr(c){return new Ks(c)}function ad(c,f,g){c.j=g?Bl(f,!0):f,c.j&&(c.j=c.j.replace(/:$/,""))}function ld(c,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);c.s=f}else c.s=null}function Bw(c,f,g){f instanceof zl?(c.i=f,yk(c.i,c.h)):(g||(f=$l(f,mk)),c.i=new zl(f,c.h))}function ze(c,f,g){c.i.set(f,g)}function cd(c){return ze(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Bl(c,f){return c?f?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function $l(c,f,g){return typeof c=="string"?(c=encodeURI(c).replace(f,hk),g&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function hk(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var $w=/[#\/\?@]/g,fk=/[#\?:]/g,pk=/[#\?]/g,mk=/[#\?@]/g,gk=/#/g;function zl(c,f){this.h=this.g=null,this.i=c||null,this.j=!!f}function xi(c){c.g||(c.g=new Map,c.h=0,c.i&&dk(c.i,function(f,g){c.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=zl.prototype,t.add=function(c,f){xi(this),this.i=null,c=Go(this,c);var g=this.g.get(c);return g||this.g.set(c,g=[]),g.push(f),this.h+=1,this};function zw(c,f){xi(c),f=Go(c,f),c.g.has(f)&&(c.i=null,c.h-=c.g.get(f).length,c.g.delete(f))}function qw(c,f){return xi(c),f=Go(c,f),c.g.has(f)}t.forEach=function(c,f){xi(this),this.g.forEach(function(g,A){g.forEach(function(L){c.call(f,L,A,this)},this)},this)},t.na=function(){xi(this);const c=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let A=0;A<f.length;A++){const L=c[A];for(let U=0;U<L.length;U++)g.push(f[A])}return g},t.V=function(c){xi(this);let f=[];if(typeof c=="string")qw(this,c)&&(f=f.concat(this.g.get(Go(this,c))));else{c=Array.from(this.g.values());for(let g=0;g<c.length;g++)f=f.concat(c[g])}return f},t.set=function(c,f){return xi(this),this.i=null,c=Go(this,c),qw(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[f]),this.h+=1,this},t.get=function(c,f){return c?(c=this.V(c),0<c.length?String(c[0]):f):f};function Ww(c,f,g){zw(c,f),0<g.length&&(c.i=null,c.g.set(Go(c,f),y(g)),c.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var A=f[g];const U=encodeURIComponent(String(A)),Y=this.V(A);for(A=0;A<Y.length;A++){var L=U;Y[A]!==""&&(L+="="+encodeURIComponent(String(Y[A]))),c.push(L)}}return this.i=c.join("&")};function Go(c,f){return f=String(f),c.j&&(f=f.toLowerCase()),f}function yk(c,f){f&&!c.j&&(xi(c),c.i=null,c.g.forEach(function(g,A){var L=A.toLowerCase();A!=L&&(zw(this,A),Ww(this,L,g))},c)),c.j=f}function vk(c,f){const g=new un;if(a.Image){const A=new Image;A.onload=m(bi,g,"TestLoadImage: loaded",!0,f,A),A.onerror=m(bi,g,"TestLoadImage: error",!1,f,A),A.onabort=m(bi,g,"TestLoadImage: abort",!1,f,A),A.ontimeout=m(bi,g,"TestLoadImage: timeout",!1,f,A),a.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else f(!1)}function _k(c,f){const g=new un,A=new AbortController,L=setTimeout(()=>{A.abort(),bi(g,"TestPingServer: timeout",!1,f)},1e4);fetch(c,{signal:A.signal}).then(U=>{clearTimeout(L),U.ok?bi(g,"TestPingServer: ok",!0,f):bi(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(L),bi(g,"TestPingServer: error",!1,f)})}function bi(c,f,g,A,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),A(g)}catch{}}function wk(){this.g=new Kp}function Ek(c,f,g){const A=g||"";try{Uw(c,function(L,U){let Y=L;u(L)&&(Y=Ho(L)),f.push(A+U+"="+encodeURIComponent(Y))})}catch(L){throw f.push(A+"type="+encodeURIComponent("_badmap")),L}}function ud(c){this.l=c.Ub||null,this.j=c.eb||!1}E(ud,Ll),ud.prototype.g=function(){return new dd(this.l,this.j)},ud.prototype.i=function(c){return function(){return c}}({});function dd(c,f){Ne.call(this),this.D=c,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(dd,Ne),t=dd.prototype,t.open=function(c,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=f,this.readyState=1,Wl(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(f.body=c),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ql(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Wl(this)),this.g&&(this.readyState=3,Wl(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Hw(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Hw(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var f=c.value?c.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!c.done}))&&(this.response=this.responseText+=f)}c.done?ql(this):Wl(this),this.readyState==3&&Hw(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,ql(this))},t.Qa=function(c){this.g&&(this.response=c,ql(this))},t.ga=function(){this.g&&ql(this)};function ql(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Wl(c)}t.setRequestHeader=function(c,f){this.u.append(c,f)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,c.push(g[0]+": "+g[1]),g=f.next();return c.join(`\r
`)};function Wl(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(dd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Kw(c){let f="";return V(c,function(g,A){f+=A,f+=":",f+=g,f+=`\r
`}),f}function tm(c,f,g){e:{for(A in g){var A=!1;break e}A=!0}A||(g=Kw(g),typeof c=="string"?g!=null&&encodeURIComponent(String(g)):ze(c,f,g))}function ot(c){Ne.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(ot,Ne);var Tk=/^https?$/i,Ik=["POST","PUT"];t=ot.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,f,g,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);f=f?f.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Gp.g(),this.v=this.o?Fl(this.o):Fl(Gp),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(c),!0),this.B=!1}catch(U){Gw(this,U);return}if(c=g||"",g=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var L in A)g.set(L,A[L]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const U of A.keys())g.set(U,A.get(U));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(g.keys()).find(U=>U.toLowerCase()=="content-type"),L=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Ik,f,void 0))||A||L||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,Y]of g)this.g.setRequestHeader(U,Y);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Jw(this),this.u=!0,this.g.send(c),this.u=!1}catch(U){Gw(this,U)}};function Gw(c,f){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=f,c.m=5,Qw(c),hd(c)}function Qw(c){c.A||(c.A=!0,st(c,"complete"),st(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,st(this,"complete"),st(this,"abort"),hd(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),hd(this,!0)),ot.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Yw(this):this.bb())},t.bb=function(){Yw(this)};function Yw(c){if(c.h&&typeof o<"u"&&(!c.v[1]||Kr(c)!=4||c.Z()!=2)){if(c.u&&Kr(c)==4)rd(c.Ea,0,c);else if(st(c,"readystatechange"),Kr(c)==4){c.h=!1;try{const Y=c.Z();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var A;if(A=Y===0){var L=String(c.D).match(jw)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),A=!Tk.test(L?L.toLowerCase():"")}g=A}if(g)st(c,"complete"),st(c,"success");else{c.m=6;try{var U=2<Kr(c)?c.g.statusText:""}catch{U=""}c.l=U+" ["+c.Z()+"]",Qw(c)}}finally{hd(c)}}}}function hd(c,f){if(c.g){Jw(c);const g=c.g,A=c.v[0]?()=>{}:null;c.g=null,c.v=null,f||st(c,"ready");try{g.onreadystatechange=A}catch{}}}function Jw(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Kr(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Kr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var f=this.g.responseText;return c&&f.indexOf(c)==0&&(f=f.substring(c.length)),Ai(f)}};function Xw(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Sk(c){const f={};c=(c.g&&2<=Kr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(v(c[A]))continue;var g=C(c[A]);const L=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const U=f[L]||[];f[L]=U,U.push(g)}T(f,function(A){return A.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Hl(c,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[c]||f}function Zw(c){this.Aa=0,this.i=[],this.j=new un,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Hl("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Hl("baseRetryDelayMs",5e3,c),this.cb=Hl("retryDelaySeedMs",1e4,c),this.Wa=Hl("forwardChannelMaxRetries",2,c),this.wa=Hl("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Ow(c&&c.concurrentRequestLimit),this.Da=new wk,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Zw.prototype,t.la=8,t.G=1,t.connect=function(c,f,g,A){Ge(0),this.W=c,this.H=f||{},g&&A!==void 0&&(this.H.OSID=g,this.H.OAID=A),this.F=this.X,this.I=l0(this,null,this.W),pd(this)};function nm(c){if(e0(c),c.G==3){var f=c.U++,g=Hr(c.I);if(ze(g,"SID",c.K),ze(g,"RID",f),ze(g,"TYPE","terminate"),Kl(c,g),f=new Pi(c,c.j,f),f.L=2,f.v=cd(Hr(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=f.v,g=!0),g||(f.g=c0(f.j,null),f.g.ea(f.v)),f.F=Date.now(),od(f)}a0(c)}function fd(c){c.g&&(im(c),c.g.cancel(),c.g=null)}function e0(c){fd(c),c.u&&(a.clearTimeout(c.u),c.u=null),md(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function pd(c){if(!Vw(c.h)&&!c.s){c.s=!0;var f=c.Ga;G||H(),B||(G(),B=!0),F.add(f,c),c.B=0}}function Ak(c,f){return Mw(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=f.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Ct(p(c.Ga,c,f),o0(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const L=new Pi(this,this.j,c);let U=this.o;if(this.S&&(U?(U=w(U),x(U,this.S)):U=this.S),this.m!==null||this.O||(L.H=U,U=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var A=this.i[g];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(f+=A,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=n0(this,L,f),g=Hr(this.I),ze(g,"RID",c),ze(g,"CVER",22),this.D&&ze(g,"X-HTTP-Session-Id",this.D),Kl(this,g),U&&(this.O?f="headers="+encodeURIComponent(String(Kw(U)))+"&"+f:this.m&&tm(g,this.m,U)),em(this.h,L),this.Ua&&ze(g,"TYPE","init"),this.P?(ze(g,"$req",f),ze(g,"SID","null"),L.T=!0,Yp(L,g,null)):Yp(L,g,f),this.G=2}}else this.G==3&&(c?t0(this,c):this.i.length==0||Vw(this.h)||t0(this))};function t0(c,f){var g;f?g=f.l:g=c.U++;const A=Hr(c.I);ze(A,"SID",c.K),ze(A,"RID",g),ze(A,"AID",c.T),Kl(c,A),c.m&&c.o&&tm(A,c.m,c.o),g=new Pi(c,c.j,g,c.B+1),c.m===null&&(g.H=c.o),f&&(c.i=f.D.concat(c.i)),f=n0(c,g,1e3),g.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),em(c.h,g),Yp(g,A,f)}function Kl(c,f){c.H&&V(c.H,function(g,A){ze(f,A,g)}),c.l&&Uw({},function(g,A){ze(f,A,g)})}function n0(c,f,g){g=Math.min(c.i.length,g);var A=c.l?p(c.l.Na,c.l,c):null;e:{var L=c.i;let U=-1;for(;;){const Y=["count="+g];U==-1?0<g?(U=L[0].g,Y.push("ofs="+U)):U=0:Y.push("ofs="+U);let Ue=!0;for(let kt=0;kt<g;kt++){let Pe=L[kt].g;const Mt=L[kt].map;if(Pe-=U,0>Pe)U=Math.max(0,L[kt].g-100),Ue=!1;else try{Ek(Mt,Y,"req"+Pe+"_")}catch{A&&A(Mt)}}if(Ue){A=Y.join("&");break e}}}return c=c.i.splice(0,g),f.D=c,A}function r0(c){if(!c.g&&!c.u){c.Y=1;var f=c.Fa;G||H(),B||(G(),B=!0),F.add(f,c),c.v=0}}function rm(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Ct(p(c.Fa,c),o0(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,i0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Ct(p(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ge(10),fd(this),i0(this))};function im(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function i0(c){c.g=new Pi(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var f=Hr(c.qa);ze(f,"RID","rpc"),ze(f,"SID",c.K),ze(f,"AID",c.T),ze(f,"CI",c.F?"0":"1"),!c.F&&c.ja&&ze(f,"TO",c.ja),ze(f,"TYPE","xmlhttp"),Kl(c,f),c.m&&c.o&&tm(f,c.m,c.o),c.L&&(c.g.I=c.L);var g=c.g;c=c.ia,g.L=1,g.v=cd(Hr(f)),g.m=null,g.P=!0,kw(g,c)}t.Za=function(){this.C!=null&&(this.C=null,fd(this),rm(this),Ge(19))};function md(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function s0(c,f){var g=null;if(c.g==f){md(c),im(c),c.g=null;var A=2}else if(Zp(c.h,f))g=f.D,Lw(c.h,f),A=1;else return;if(c.G!=0){if(f.o)if(A==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var L=c.B;A=Te(),st(A,new gr(A,g)),pd(c)}else r0(c);else if(L=f.s,L==3||L==0&&0<f.X||!(A==1&&Ak(c,f)||A==2&&rm(c)))switch(g&&0<g.length&&(f=c.h,f.i=f.i.concat(g)),L){case 1:Gs(c,5);break;case 4:Gs(c,10);break;case 3:Gs(c,6);break;default:Gs(c,2)}}}function o0(c,f){let g=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(g*=2),g*f}function Gs(c,f){if(c.j.info("Error code "+f),f==2){var g=p(c.fb,c),A=c.Xa;const L=!A;A=new Ks(A||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ad(A,"https"),cd(A),L?vk(A.toString(),g):_k(A.toString(),g)}else Ge(2);c.G=0,c.l&&c.l.sa(f),a0(c),e0(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Ge(2)):(this.j.info("Failed to ping google.com"),Ge(1))};function a0(c){if(c.G=0,c.ka=[],c.l){const f=Fw(c.h);(f.length!=0||c.i.length!=0)&&(S(c.ka,f),S(c.ka,c.i),c.h.i.length=0,y(c.i),c.i.length=0),c.l.ra()}}function l0(c,f,g){var A=g instanceof Ks?Hr(g):new Ks(g);if(A.g!="")f&&(A.g=f+"."+A.g),ld(A,A.s);else{var L=a.location;A=L.protocol,f=f?f+"."+L.hostname:L.hostname,L=+L.port;var U=new Ks(null);A&&ad(U,A),f&&(U.g=f),L&&ld(U,L),g&&(U.l=g),A=U}return g=c.D,f=c.ya,g&&f&&ze(A,g,f),ze(A,"VER",c.la),Kl(c,A),A}function c0(c,f,g){if(f&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=c.Ca&&!c.pa?new ot(new ud({eb:g})):new ot(c.pa),f.Ha(c.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function u0(){}t=u0.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function gd(){}gd.prototype.g=function(c,f){return new Tn(c,f)};function Tn(c,f){Ne.call(this),this.g=new Zw(f),this.l=c,this.h=f&&f.messageUrlParams||null,c=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(c?c["X-WebChannel-Content-Type"]=f.messageContentType:c={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(c?c["X-WebChannel-Client-Profile"]=f.va:c={"X-WebChannel-Client-Profile":f.va}),this.g.S=c,(c=f&&f.Sb)&&!v(c)&&(this.g.m=c),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!v(f)&&(this.g.D=f,c=this.h,c!==null&&f in c&&(c=this.h,f in c&&delete c[f])),this.j=new Qo(this)}E(Tn,Ne),Tn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Tn.prototype.close=function(){nm(this.g)},Tn.prototype.o=function(c){var f=this.g;if(typeof c=="string"){var g={};g.__data__=c,c=g}else this.u&&(g={},g.__data__=Ho(c),c=g);f.i.push(new lk(f.Ya++,c)),f.G==3&&pd(f)},Tn.prototype.N=function(){this.g.l=null,delete this.j,nm(this.g),delete this.g,Tn.aa.N.call(this)};function d0(c){Ws.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var f=c.__sm__;if(f){e:{for(const g in f){c=g;break e}c=void 0}(this.i=c)&&(c=this.i,f=f!==null&&c in f?f[c]:void 0),this.data=f}else this.data=c}E(d0,Ws);function h0(){Fn.call(this),this.status=1}E(h0,Fn);function Qo(c){this.g=c}E(Qo,u0),Qo.prototype.ua=function(){st(this.g,"a")},Qo.prototype.ta=function(c){st(this.g,new d0(c))},Qo.prototype.sa=function(c){st(this.g,new h0)},Qo.prototype.ra=function(){st(this.g,"b")},gd.prototype.createWebChannel=gd.prototype.g,Tn.prototype.send=Tn.prototype.o,Tn.prototype.open=Tn.prototype.m,Tn.prototype.close=Tn.prototype.close,Ab=function(){return new gd},Sb=function(){return Te()},Ib=Wr,Ay={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},id.NO_ERROR=0,id.TIMEOUT=8,id.HTTP_ERROR=6,mh=id,bw.COMPLETE="complete",Tb=bw,Ul.EventType=qs,qs.OPEN="a",qs.CLOSE="b",qs.ERROR="c",qs.MESSAGE="d",Ne.prototype.listen=Ne.prototype.K,mc=Ul,ot.prototype.listenOnce=ot.prototype.L,ot.prototype.getLastError=ot.prototype.Ka,ot.prototype.getLastErrorCode=ot.prototype.Ba,ot.prototype.getStatus=ot.prototype.Z,ot.prototype.getResponseJson=ot.prototype.Oa,ot.prototype.getResponseText=ot.prototype.oa,ot.prototype.send=ot.prototype.ea,ot.prototype.setWithCredentials=ot.prototype.Ha,Eb=ot}).apply(typeof zd<"u"?zd:typeof self<"u"?self:typeof window<"u"?window:{});const qT="@firebase/firestore",WT="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}zt.UNAUTHENTICATED=new zt(null),zt.GOOGLE_CREDENTIALS=new zt("google-credentials-uid"),zt.FIRST_PARTY=new zt("first-party-uid"),zt.MOCK_USER=new zt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bl="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const No=new v_("@firebase/firestore");function ia(){return No.logLevel}function q(t,...e){if(No.logLevel<=ve.DEBUG){const n=e.map(b_);No.debug(`Firestore (${bl}): ${t}`,...n)}}function ft(t,...e){if(No.logLevel<=ve.ERROR){const n=e.map(b_);No.error(`Firestore (${bl}): ${t}`,...n)}}function Ts(t,...e){if(No.logLevel<=ve.WARN){const n=e.map(b_);No.warn(`Firestore (${bl}): ${t}`,...n)}}function b_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Pb(t,r,n)}function Pb(t,e,n){let r=`FIRESTORE (${bl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ft(r),new Error(r)}function ie(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||Pb(e,i,r)}function re(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends Ur{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U6{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class xb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(zt.UNAUTHENTICATED))}shutdown(){}}class j6{constructor(e){this.t=e,this.currentUser=zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ie(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new ar;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ar,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ar)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ie(typeof r.accessToken=="string",31837,{l:r}),new U6(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ie(e===null||typeof e=="string",2055,{h:e}),new zt(e)}}class B6{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=zt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class $6{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new B6(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(zt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class HT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class z6{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Pn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ie(this.o===void 0,3512);const r=s=>{s.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new HT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ie(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new HT(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q6(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=q6(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function he(t,e){return t<e?-1:t>e?1:0}function Py(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return Qm(i)===Qm(s)?he(i,s):Qm(i)?1:-1}return he(t.length,e.length)}const W6=55296,H6=57343;function Qm(t){const e=t.charCodeAt(0);return e>=W6&&e<=H6}function Xa(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function bb(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KT="__name__";class wr{constructor(e,n,r){n===void 0?n=0:n>e.length&&te(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&te(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return wr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof wr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=wr.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return he(e.length,n.length)}static compareSegments(e,n){const r=wr.isNumericId(e),i=wr.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?wr.extractNumericId(e).compare(wr.extractNumericId(n)):Py(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return hs.fromString(e.substring(4,e.length-2))}}class Re extends wr{construct(e,n,r){return new Re(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Q(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Re(n)}static emptyPath(){return new Re([])}}const K6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Je extends wr{construct(e,n,r){return new Je(e,n,r)}static isValidIdentifier(e){return K6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Je.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===KT}static keyField(){return new Je([KT])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Q(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new Q(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Q(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Q(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Je(n)}static emptyPath(){return new Je([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.path=e}static fromPath(e){return new J(Re.fromString(e))}static fromName(e){return new J(Re.fromString(e).popFirst(5))}static empty(){return new J(Re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Re.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Re.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new J(new Re(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rb(t,e,n){if(!n)throw new Q(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Cb(t,e,n,r){if(e===!0&&r===!0)throw new Q(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function GT(t){if(!J.isDocumentKey(t))throw new Q(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function QT(t){if(J.isDocumentKey(t))throw new Q(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function kb(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function vp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":te(12329,{type:typeof t})}function Et(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Q(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=vp(t);throw new Q(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function G6(t,e){if(e<=0)throw new Q(j.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Bu(t,e){if(!kb(t))throw new Q(j.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new Q(j.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YT=-62135596800,JT=1e6;class De{static now(){return De.fromMillis(Date.now())}static fromDate(e){return De.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*JT);return new De(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Q(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Q(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<YT)throw new Q(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/JT}_compareTo(e){return this.seconds===e.seconds?he(this.nanoseconds,e.nanoseconds):he(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:De._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Bu(e,De._jsonSchema))return new De(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-YT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}De._jsonSchemaVersion="firestore/timestamp/1.0",De._jsonSchema={type:yt("string",De._jsonSchemaVersion),seconds:yt("number"),nanoseconds:yt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{static fromTimestamp(e){return new oe(e)}static min(){return new oe(new De(0,0))}static max(){return new oe(new De(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Za=-1;class mf{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function xy(t){return t.fields.find(e=>e.kind===2)}function Zs(t){return t.fields.filter(e=>e.kind!==2)}mf.UNKNOWN_ID=-1;class gh{constructor(e,n){this.fieldPath=e,this.kind=n}}class hu{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new hu(0,On.min())}}function Db(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=oe.fromTimestamp(r===1e9?new De(n+1,0):new De(n,r));return new On(i,J.empty(),e)}function Nb(t){return new On(t.readTime,t.key,Za)}class On{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new On(oe.min(),J.empty(),Za)}static max(){return new On(oe.max(),J.empty(),Za)}}function R_(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=J.comparator(t.documentKey,e.documentKey),n!==0?n:he(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Vb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ms(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==Ob)throw t;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):M.reject(n)}static resolve(e){return new M((n,r)=>{n(e)})}static reject(e){return new M((n,r)=>{r(e)})}static waitFor(e){return new M((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=M.resolve(!1);for(const r of e)n=n.next(i=>i?M.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new M((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(d=>{o[u]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new M((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sn="SimpleDb";class _p{static open(e,n,r,i){try{return new _p(n,e.transaction(i,r))}catch(s){throw new kc(n,s)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new ar,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new kc(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=C_(r.target.error);this.S.reject(new kc(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(q(Sn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new Y6(n)}}class fs{static delete(e){return q(Sn,"Removing database:",e),no(Sx().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!Dx())return!1;if(fs.F())return!0;const e=Tt(),n=fs.M(e),r=0<n&&n<10,i=Mb(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,fs.M(Tt())===12.2&&ft("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(q(Sn,"Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new kc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new Q(j.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new Q(j.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new kc(e,o))},i.onupgradeneeded=s=>{q(Sn,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.N.k(o,i.transaction,s.oldVersion,this.version).next(()=>{q(Sn,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const a=_p.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(u=>(a.C(),u)).catch(u=>(a.abort(u),M.reject(u))).toPromise();return l.catch(()=>{}),await a.D,l}catch(a){const l=a,u=l.name!=="FirebaseError"&&o<3;if(q(Sn,"Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Mb(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class Q6{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return no(this.U.delete())}}class kc extends Q{constructor(e,n){super(j.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Ls(t){return t.name==="IndexedDbTransactionError"}class Y6{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(q(Sn,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(q(Sn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),no(r)}add(e){return q(Sn,"ADD",this.store.name,e,e),no(this.store.add(e))}get(e){return no(this.store.get(e)).next(n=>(n===void 0&&(n=null),q(Sn,"GET",this.store.name,e,n),n))}delete(e){return q(Sn,"DELETE",this.store.name,e),no(this.store.delete(e))}count(){return q(Sn,"COUNT",this.store.name),no(this.store.count())}J(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new M((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.H(s,(a,l)=>{o.push(l)}).next(()=>o)}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new M((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}Z(e,n){q(Sn,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const i=this.cursor(r);return this.H(i,(s,o,a)=>a.delete())}ee(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.H(i,n)}te(e){const n=this.cursor({});return new M((r,i)=>{n.onerror=s=>{const o=C_(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}H(e,n){const r=[];return new M((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new Q6(a),u=n(a.primaryKey,a.value,l);if(u instanceof M){const d=u.catch(h=>(l.done(),M.reject(h)));r.push(d)}l.isDone?i():l.G===null?a.continue():a.continue(l.G)}}).next(()=>M.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function no(t){return new M((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=C_(r.target.error);n(i)}})}let XT=!1;function C_(t){const e=fs.M(Tt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new Q("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return XT||(XT=!0,setTimeout(()=>{throw r},0)),r}}return t}const Dc="IndexBackfiller";class J6{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){q(Dc,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.ne.ie();q(Dc,`Documents written: ${n}`)}catch(n){Ls(n)?q(Dc,"Ignoring IndexedDB error during index backfill: ",n):await Ms(n)}await this.re(6e4)})}}class X6{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.se(n,e))}se(e,n){const r=new Set;let i=n,s=!0;return M.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return q(Dc,`Processing collection: ${o}`),this.oe(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this._e(i,s)).next(a=>(q(Dc,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}_e(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=Nb(s);R_(o,r)>0&&(r=o)}),new On(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}pn.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wo=-1;function wp(t){return t==null}function fu(t){return t===0&&1/t==-1/0}function Lb(t){return typeof t=="number"&&Number.isInteger(t)&&!fu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gf="";function Qt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=ZT(e)),e=Z6(t.get(n),e);return ZT(e)}function Z6(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case gf:n+="";break;default:n+=s}}return n}function ZT(t){return t+gf+""}function xr(t){const e=t.length;if(ie(e>=2,64408,{path:t}),e===2)return ie(t.charAt(0)===gf&&t.charAt(1)==="",56145,{path:t}),Re.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf(gf,s);switch((o<0||o>n)&&te(50515,{path:t}),t.charAt(o+1)){case"":const a=t.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:te(61167,{path:t})}s=o+2}return new Re(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo="remoteDocuments",$u="owner",Xo="owner",pu="mutationQueues",e5="userId",tr="mutations",eI="batchId",co="userMutationsIndex",tI=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yh(t,e){return[t,Qt(e)]}function Fb(t,e,n){return[t,Qt(e),n]}const t5={},el="documentMutations",yf="remoteDocumentsV14",n5=["prefixPath","collectionGroup","readTime","documentId"],vh="documentKeyIndex",r5=["prefixPath","collectionGroup","documentId"],Ub="collectionGroupIndex",i5=["collectionGroup","readTime","prefixPath","documentId"],mu="remoteDocumentGlobal",by="remoteDocumentGlobalKey",tl="targets",jb="queryTargetsIndex",s5=["canonicalId","targetId"],nl="targetDocuments",o5=["targetId","path"],k_="documentTargetsIndex",a5=["path","targetId"],vf="targetGlobalKey",Eo="targetGlobal",gu="collectionParents",l5=["collectionId","parent"],rl="clientMetadata",c5="clientId",Ep="bundles",u5="bundleId",Tp="namedQueries",d5="name",D_="indexConfiguration",h5="indexId",Ry="collectionGroupIndex",f5="collectionGroup",Nc="indexState",p5=["indexId","uid"],Bb="sequenceNumberIndex",m5=["uid","sequenceNumber"],Oc="indexEntries",g5=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],$b="documentKeyIndex",y5=["indexId","uid","orderedDocumentKey"],Ip="documentOverlays",v5=["userId","collectionPath","documentId"],Cy="collectionPathOverlayIndex",_5=["userId","collectionPath","largestBatchId"],zb="collectionGroupOverlayIndex",w5=["userId","collectionGroup","largestBatchId"],N_="globals",E5="name",qb=[pu,tr,el,eo,tl,$u,Eo,nl,rl,mu,gu,Ep,Tp],T5=[...qb,Ip],Wb=[pu,tr,el,yf,tl,$u,Eo,nl,rl,mu,gu,Ep,Tp,Ip],Hb=Wb,O_=[...Hb,D_,Nc,Oc],I5=O_,Kb=[...O_,N_],S5=Kb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky extends Vb{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function It(t,e){const n=re(t);return fs.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nI(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Fs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Gb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e,n){this.comparator=e,this.root=n||Nt.EMPTY}insert(e,n){return new $e(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Nt.BLACK,null,null))}remove(e){return new $e(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qd(this.root,e,this.comparator,!1)}getReverseIterator(){return new qd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qd(this.root,e,this.comparator,!0)}}class qd{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Nt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Nt.RED,this.left=i??Nt.EMPTY,this.right=s??Nt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Nt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Nt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Nt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Nt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Nt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw te(27949);return e+(this.isRed()?0:1)}}Nt.EMPTY=null,Nt.RED=!0,Nt.BLACK=!1;Nt.EMPTY=new class{constructor(){this.size=0}get key(){throw te(57766)}get value(){throw te(16141)}get color(){throw te(16727)}get left(){throw te(29726)}get right(){throw te(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new Nt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e){this.comparator=e,this.data=new $e(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new rI(this.data.getIterator())}getIteratorFrom(e){return new rI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Me)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Me(this.comparator);return n.data=e,n}}class rI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Zo(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.fields=e,e.sort(Je.comparator)}static empty(){return new mn([])}unionWith(e){let n=new Me(Je.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new mn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Xa(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Qb("Invalid base64 string: "+s):s}}(e);return new dt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new dt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return he(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dt.EMPTY_BYTE_STRING=new dt("");const A5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gi(t){if(ie(!!t,39018),typeof t=="string"){let e=0;const n=A5.exec(t);if(ie(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Qe(t.seconds),nanos:Qe(t.nanos)}}function Qe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function yi(t){return typeof t=="string"?dt.fromBase64String(t):dt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yb="server_timestamp",Jb="__type__",Xb="__previous_value__",Zb="__local_write_time__";function V_(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Jb])==null?void 0:r.stringValue)===Yb}function Sp(t){const e=t.mapValue.fields[Xb];return V_(e)?Sp(e):e}function yu(t){const e=gi(t.mapValue.fields[Zb].timestampValue);return new De(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P5{constructor(e,n,r,i,s,o,a,l,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=d}}const _f="(default)";class Is{constructor(e,n){this.projectId=e,this.database=n||_f}static empty(){return new Is("","")}get isDefaultDatabase(){return this.database===_f}isEqual(e){return e instanceof Is&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M_="__type__",eR="__max__",es={mapValue:{fields:{__type__:{stringValue:eR}}}},L_="__vector__",il="value",_h={nullValue:"NULL_VALUE"};function Ss(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?V_(t)?4:tR(t)?9007199254740991:Ap(t)?10:11:te(28295,{value:t})}function Lr(t,e){if(t===e)return!0;const n=Ss(t);if(n!==Ss(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return yu(t).isEqual(yu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=gi(i.timestampValue),a=gi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return yi(i.bytesValue).isEqual(yi(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Qe(i.geoPointValue.latitude)===Qe(s.geoPointValue.latitude)&&Qe(i.geoPointValue.longitude)===Qe(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Qe(i.integerValue)===Qe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Qe(i.doubleValue),a=Qe(s.doubleValue);return o===a?fu(o)===fu(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Xa(t.arrayValue.values||[],e.arrayValue.values||[],Lr);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(nI(o)!==nI(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Lr(o[l],a[l])))return!1;return!0}(t,e);default:return te(52216,{left:t})}}function vu(t,e){return(t.values||[]).find(n=>Lr(n,e))!==void 0}function As(t,e){if(t===e)return 0;const n=Ss(t),r=Ss(e);if(n!==r)return he(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return he(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Qe(s.integerValue||s.doubleValue),l=Qe(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return iI(t.timestampValue,e.timestampValue);case 4:return iI(yu(t),yu(e));case 5:return Py(t.stringValue,e.stringValue);case 6:return function(s,o){const a=yi(s),l=yi(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const d=he(a[u],l[u]);if(d!==0)return d}return he(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=he(Qe(s.latitude),Qe(o.latitude));return a!==0?a:he(Qe(s.longitude),Qe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return sI(t.arrayValue,e.arrayValue);case 10:return function(s,o){var p,m,E,y;const a=s.fields||{},l=o.fields||{},u=(p=a[il])==null?void 0:p.arrayValue,d=(m=l[il])==null?void 0:m.arrayValue,h=he(((E=u==null?void 0:u.values)==null?void 0:E.length)||0,((y=d==null?void 0:d.values)==null?void 0:y.length)||0);return h!==0?h:sI(u,d)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===es.mapValue&&o===es.mapValue)return 0;if(s===es.mapValue)return 1;if(o===es.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},d=Object.keys(u);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const p=Py(l[h],d[h]);if(p!==0)return p;const m=As(a[l[h]],u[d[h]]);if(m!==0)return m}return he(l.length,d.length)}(t.mapValue,e.mapValue);default:throw te(23264,{he:n})}}function iI(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return he(t,e);const n=gi(t),r=gi(e),i=he(n.seconds,r.seconds);return i!==0?i:he(n.nanos,r.nanos)}function sI(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=As(n[i],r[i]);if(s)return s}return he(n.length,r.length)}function sl(t){return Dy(t)}function Dy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=gi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return yi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return J.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Dy(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Dy(n.fields[o])}`;return i+"}"}(t.mapValue):te(61005,{value:t})}function wh(t){switch(Ss(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Sp(t);return e?16+wh(e):16;case 5:return 2*t.stringValue.length;case 6:return yi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+wh(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Fs(r.fields,(s,o)=>{i+=s.length+wh(o)}),i}(t.mapValue);default:throw te(13486,{value:t})}}function _u(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ny(t){return!!t&&"integerValue"in t}function wu(t){return!!t&&"arrayValue"in t}function oI(t){return!!t&&"nullValue"in t}function aI(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Eh(t){return!!t&&"mapValue"in t}function Ap(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[M_])==null?void 0:r.stringValue)===L_}function Vc(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Fs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Vc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Vc(t.arrayValue.values[n]);return e}return{...t}}function tR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===eR}const nR={mapValue:{fields:{[M_]:{stringValue:L_},[il]:{arrayValue:{}}}}};function x5(t){return"nullValue"in t?_h:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?_u(Is.empty(),J.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Ap(t)?nR:{mapValue:{}}:te(35942,{value:t})}function b5(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?_u(Is.empty(),J.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?nR:"mapValue"in t?Ap(t)?{mapValue:{}}:es:te(61959,{value:t})}function lI(t,e){const n=As(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function cI(t,e){const n=As(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.value=e}static empty(){return new Ht({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Eh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vc(n)}setAll(e){let n=Je.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Vc(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Eh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Lr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Eh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Fs(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Ht(Vc(this.value))}}function rR(t){const e=[];return Fs(t.fields,(n,r)=>{const i=new Je([n]);if(Eh(r)){const s=rR(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new mn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new ut(e,0,oe.min(),oe.min(),oe.min(),Ht.empty(),0)}static newFoundDocument(e,n,r,i){return new ut(e,1,n,oe.min(),r,i,0)}static newNoDocument(e,n){return new ut(e,2,n,oe.min(),oe.min(),Ht.empty(),0)}static newUnknownDocument(e,n){return new ut(e,3,n,oe.min(),oe.min(),Ht.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ht.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ht.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e,n){this.position=e,this.inclusive=n}}function uI(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=J.comparator(J.fromName(o.referenceValue),n.key):r=As(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function dI(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Lr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e,n="asc"){this.field=e,this.dir=n}}function R5(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{}class _e extends iR{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new C5(e,n,r):n==="array-contains"?new N5(e,r):n==="in"?new uR(e,r):n==="not-in"?new O5(e,r):n==="array-contains-any"?new V5(e,r):new _e(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new k5(e,r):new D5(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(As(n,this.value)):n!==null&&Ss(this.value)===Ss(n)&&this.matchesComparison(As(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Oe extends iR{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Oe(e,n)}matches(e){return al(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function al(t){return t.op==="and"}function Oy(t){return t.op==="or"}function F_(t){return sR(t)&&al(t)}function sR(t){for(const e of t.filters)if(e instanceof Oe)return!1;return!0}function Vy(t){if(t instanceof _e)return t.field.canonicalString()+t.op.toString()+sl(t.value);if(F_(t))return t.filters.map(e=>Vy(e)).join(",");{const e=t.filters.map(n=>Vy(n)).join(",");return`${t.op}(${e})`}}function oR(t,e){return t instanceof _e?function(r,i){return i instanceof _e&&r.op===i.op&&r.field.isEqual(i.field)&&Lr(r.value,i.value)}(t,e):t instanceof Oe?function(r,i){return i instanceof Oe&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&oR(o,i.filters[a]),!0):!1}(t,e):void te(19439)}function aR(t,e){const n=t.filters.concat(e);return Oe.create(n,t.op)}function lR(t){return t instanceof _e?function(n){return`${n.field.canonicalString()} ${n.op} ${sl(n.value)}`}(t):t instanceof Oe?function(n){return n.op.toString()+" {"+n.getFilters().map(lR).join(" ,")+"}"}(t):"Filter"}class C5 extends _e{constructor(e,n,r){super(e,n,r),this.key=J.fromName(r.referenceValue)}matches(e){const n=J.comparator(e.key,this.key);return this.matchesComparison(n)}}class k5 extends _e{constructor(e,n){super(e,"in",n),this.keys=cR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class D5 extends _e{constructor(e,n){super(e,"not-in",n),this.keys=cR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function cR(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>J.fromName(r.referenceValue))}class N5 extends _e{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return wu(n)&&vu(n.arrayValue,this.value)}}class uR extends _e{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&vu(this.value.arrayValue,n)}}class O5 extends _e{constructor(e,n){super(e,"not-in",n)}matches(e){if(vu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!vu(this.value.arrayValue,n)}}class V5 extends _e{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!wu(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>vu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M5{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}}function My(t,e=null,n=[],r=[],i=null,s=null,o=null){return new M5(t,e,n,r,i,s,o)}function Oo(t){const e=re(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Vy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),wp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>sl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>sl(r)).join(",")),e.Te=n}return e.Te}function zu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!R5(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!oR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!dI(t.startAt,e.startAt)&&dI(t.endAt,e.endAt)}function wf(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Ef(t,e){return t.filters.filter(n=>n instanceof _e&&n.field.isEqual(e))}function hI(t,e,n){let r=_h,i=!0;for(const s of Ef(t,e)){let o=_h,a=!0;switch(s.op){case"<":case"<=":o=x5(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=_h}lI({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];lI({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function fI(t,e,n){let r=es,i=!0;for(const s of Ef(t,e)){let o=es,a=!0;switch(s.op){case">=":case">":o=b5(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=es}cI({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];cI({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function dR(t,e,n,r,i,s,o,a){return new Rl(t,e,n,r,i,s,o,a)}function qu(t){return new Rl(t)}function pI(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function hR(t){return t.collectionGroup!==null}function Mc(t){const e=re(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Me(Je.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Eu(s,r))}),n.has(Je.keyField().canonicalString())||e.Ie.push(new Eu(Je.keyField(),r))}return e.Ie}function Dn(t){const e=re(t);return e.Ee||(e.Ee=L5(e,Mc(t))),e.Ee}function L5(t,e){if(t.limitType==="F")return My(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Eu(i.field,s)});const n=t.endAt?new ol(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ol(t.startAt.position,t.startAt.inclusive):null;return My(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Ly(t,e){const n=t.filters.concat([e]);return new Rl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Tf(t,e,n){return new Rl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Pp(t,e){return zu(Dn(t),Dn(e))&&t.limitType===e.limitType}function fR(t){return`${Oo(Dn(t))}|lt:${t.limitType}`}function sa(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>lR(i)).join(", ")}]`),wp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>sl(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>sl(i)).join(",")),`Target(${r})`}(Dn(t))}; limitType=${t.limitType})`}function Wu(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):J.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Mc(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=uI(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,Mc(r),i)||r.endAt&&!function(o,a,l){const u=uI(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,Mc(r),i))}(t,e)}function pR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function mR(t){return(e,n)=>{let r=!1;for(const i of Mc(t)){const s=F5(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function F5(t,e,n){const r=t.field.isKeyField()?J.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?As(l,u):te(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return te(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Fs(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Gb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U5=new $e(J.comparator);function Rn(){return U5}const gR=new $e(J.comparator);function gc(...t){let e=gR;for(const n of t)e=e.insert(n.key,n);return e}function yR(t){let e=gR;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function br(){return Lc()}function vR(){return Lc()}function Lc(){return new Ei(t=>t.toString(),(t,e)=>t.isEqual(e))}const j5=new $e(J.comparator),B5=new Me(J.comparator);function ge(...t){let e=B5;for(const n of t)e=e.add(n);return e}const $5=new Me(he);function U_(){return $5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fu(e)?"-0":e}}function _R(t){return{integerValue:""+t}}function z5(t,e){return Lb(e)?_R(e):j_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(){this._=void 0}}function q5(t,e,n){return t instanceof ll?function(i,s){const o={fields:{[Jb]:{stringValue:Yb},[Zb]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&V_(s)&&(s=Sp(s)),s&&(o.fields[Xb]=s),{mapValue:o}}(n,e):t instanceof cl?ER(t,e):t instanceof ul?TR(t,e):function(i,s){const o=wR(i,s),a=mI(o)+mI(i.Ae);return Ny(o)&&Ny(i.Ae)?_R(a):j_(i.serializer,a)}(t,e)}function W5(t,e,n){return t instanceof cl?ER(t,e):t instanceof ul?TR(t,e):n}function wR(t,e){return t instanceof Tu?function(r){return Ny(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class ll extends xp{}class cl extends xp{constructor(e){super(),this.elements=e}}function ER(t,e){const n=IR(e);for(const r of t.elements)n.some(i=>Lr(i,r))||n.push(r);return{arrayValue:{values:n}}}class ul extends xp{constructor(e){super(),this.elements=e}}function TR(t,e){let n=IR(e);for(const r of t.elements)n=n.filter(i=>!Lr(i,r));return{arrayValue:{values:n}}}class Tu extends xp{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function mI(t){return Qe(t.integerValue||t.doubleValue)}function IR(t){return wu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(e,n){this.field=e,this.transform=n}}function H5(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof cl&&i instanceof cl||r instanceof ul&&i instanceof ul?Xa(r.elements,i.elements,Lr):r instanceof Tu&&i instanceof Tu?Lr(r.Ae,i.Ae):r instanceof ll&&i instanceof ll}(t.transform,e.transform)}class K5{constructor(e,n){this.version=e,this.transformResults=n}}class Gt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Gt}static exists(e){return new Gt(void 0,e)}static updateTime(e){return new Gt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Th(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class bp{}function AR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Rp(t.key,Gt.none()):new Cl(t.key,t.data,Gt.none());{const n=t.data,r=Ht.empty();let i=new Me(Je.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Ti(t.key,r,new mn(i.toArray()),Gt.none())}}function G5(t,e,n){t instanceof Cl?function(i,s,o){const a=i.value.clone(),l=yI(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ti?function(i,s,o){if(!Th(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=yI(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(PR(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Fc(t,e,n,r){return t instanceof Cl?function(s,o,a,l){if(!Th(s.precondition,o))return a;const u=s.value.clone(),d=vI(s.fieldTransforms,l,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ti?function(s,o,a,l){if(!Th(s.precondition,o))return a;const u=vI(s.fieldTransforms,l,o),d=o.data;return d.setAll(PR(s)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,o,a){return Th(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function Q5(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=wR(r.transform,i||null);s!=null&&(n===null&&(n=Ht.empty()),n.set(r.field,s))}return n||null}function gI(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Xa(r,i,(s,o)=>H5(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Cl extends bp{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ti extends bp{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function PR(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function yI(t,e,n){const r=new Map;ie(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,W5(o,a,n[i]))}return r}function vI(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,q5(s,o,e))}return r}class Rp extends bp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xR extends bp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&G5(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Fc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Fc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=vR();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=AR(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(oe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ge())}isEqual(e){return this.batchId===e.batchId&&Xa(this.mutations,e.mutations,(n,r)=>gI(n,r))&&Xa(this.baseMutations,e.baseMutations,(n,r)=>gI(n,r))}}class $_{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ie(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return j5}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new $_(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y5{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mt,Ee;function J5(t){switch(t){case j.OK:return te(64938);case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0;default:return te(15467,{code:t})}}function bR(t){if(t===void 0)return ft("GRPC error has no .code"),j.UNKNOWN;switch(t){case mt.OK:return j.OK;case mt.CANCELLED:return j.CANCELLED;case mt.UNKNOWN:return j.UNKNOWN;case mt.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case mt.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case mt.INTERNAL:return j.INTERNAL;case mt.UNAVAILABLE:return j.UNAVAILABLE;case mt.UNAUTHENTICATED:return j.UNAUTHENTICATED;case mt.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case mt.NOT_FOUND:return j.NOT_FOUND;case mt.ALREADY_EXISTS:return j.ALREADY_EXISTS;case mt.PERMISSION_DENIED:return j.PERMISSION_DENIED;case mt.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case mt.ABORTED:return j.ABORTED;case mt.OUT_OF_RANGE:return j.OUT_OF_RANGE;case mt.UNIMPLEMENTED:return j.UNIMPLEMENTED;case mt.DATA_LOSS:return j.DATA_LOSS;default:return te(39323,{code:t})}}(Ee=mt||(mt={}))[Ee.OK=0]="OK",Ee[Ee.CANCELLED=1]="CANCELLED",Ee[Ee.UNKNOWN=2]="UNKNOWN",Ee[Ee.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ee[Ee.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ee[Ee.NOT_FOUND=5]="NOT_FOUND",Ee[Ee.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ee[Ee.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ee[Ee.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ee[Ee.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ee[Ee.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ee[Ee.ABORTED=10]="ABORTED",Ee[Ee.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ee[Ee.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ee[Ee.INTERNAL=13]="INTERNAL",Ee[Ee.UNAVAILABLE=14]="UNAVAILABLE",Ee[Ee.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X5(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z5=new hs([4294967295,4294967295],0);function _I(t){const e=X5().encode(t),n=new wb;return n.update(e),new Uint8Array(n.digest())}function wI(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new hs([n,r],0),new hs([i,s],0)]}class q_{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new yc(`Invalid padding: ${n}`);if(r<0)throw new yc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new yc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new yc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=hs.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(hs.fromNumber(r)));return i.compare(Z5)===1&&(i=new hs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=_I(e),[r,i]=wI(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new q_(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=_I(e),[r,i]=wI(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class yc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Ku.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Hu(oe.min(),i,new $e(he),Rn(),ge())}}class Ku{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ku(r,n,ge(),ge(),ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class RR{constructor(e,n){this.targetId=e,this.Ce=n}}class CR{constructor(e,n,r=dt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class EI{constructor(){this.ve=0,this.Fe=TI(),this.Me=dt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ge(),n=ge(),r=ge();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:te(38017,{changeType:s})}}),new Ku(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=TI()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ie(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class ej{constructor(e){this.Ge=e,this.ze=new Map,this.je=Rn(),this.Je=Wd(),this.He=Wd(),this.Ye=new $e(he)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:te(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(wf(s))if(r===0){const o=new J(s.path);this.et(n,o,ut.newNoDocument(o,oe.min()))}else ie(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=yi(r).toUint8Array()}catch(l){if(l instanceof Qb)return Ts("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new q_(o,i,s)}catch(l){return Ts(l instanceof yc?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,o)=>{const a=this.ot(o);if(a){if(s.current&&wf(a.target)){const l=new J(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,ut.newNoDocument(l,e))}s.Be&&(n.set(o,s.ke()),s.qe())}});let r=ge();this.He.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const i=new Hu(e,n,this.Ye,this.je,r);return this.je=Rn(),this.Je=Wd(),this.He=Wd(),this.Ye=new $e(he),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new EI,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Me(he),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Me(he),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||q("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new EI),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Wd(){return new $e(J.comparator)}function TI(){return new $e(J.comparator)}const tj={asc:"ASCENDING",desc:"DESCENDING"},nj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rj={and:"AND",or:"OR"};class ij{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Fy(t,e){return t.useProto3Json||wp(e)?e:{value:e}}function dl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function sj(t,e){return dl(t,e.toTimestamp())}function rn(t){return ie(!!t,49232),oe.fromTimestamp(function(n){const r=gi(n);return new De(r.seconds,r.nanos)}(t))}function W_(t,e){return Uy(t,e).canonicalString()}function Uy(t,e){const n=function(i){return new Re(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function DR(t){const e=Re.fromString(t);return ie(BR(e),10190,{key:e.toString()}),e}function If(t,e){return W_(t.databaseId,e.path)}function To(t,e){const n=DR(e);if(n.get(1)!==t.databaseId.projectId)throw new Q(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Q(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new J(VR(n))}function NR(t,e){return W_(t.databaseId,e)}function OR(t){const e=DR(t);return e.length===4?Re.emptyPath():VR(e)}function jy(t){return new Re(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function VR(t){return ie(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function II(t,e,n){return{name:If(t,e),fields:n.value.mapValue.fields}}function oj(t,e,n){const r=To(t,e.name),i=rn(e.updateTime),s=e.createTime?rn(e.createTime):oe.min(),o=new Ht({mapValue:{fields:e.fields}}),a=ut.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function aj(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:te(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(ie(d===void 0||typeof d=="string",58123),dt.fromBase64String(d||"")):(ie(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),dt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const d=u.code===void 0?j.UNKNOWN:bR(u.code);return new Q(d,u.message||"")}(o);n=new CR(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=To(t,r.document.name),s=rn(r.document.updateTime),o=r.document.createTime?rn(r.document.createTime):oe.min(),a=new Ht({mapValue:{fields:r.document.fields}}),l=ut.newFoundDocument(i,s,o,a),u=r.targetIds||[],d=r.removedTargetIds||[];n=new Ih(u,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=To(t,r.document),s=r.readTime?rn(r.readTime):oe.min(),o=ut.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Ih([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=To(t,r.document),s=r.removedTargetIds||[];n=new Ih([],s,i,null)}else{if(!("filter"in e))return te(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new Y5(i,s),a=r.targetId;n=new RR(a,o)}}return n}function Sf(t,e){let n;if(e instanceof Cl)n={update:II(t,e.key,e.value)};else if(e instanceof Rp)n={delete:If(t,e.key)};else if(e instanceof Ti)n={update:II(t,e.key,e.data),updateMask:fj(e.fieldMask)};else{if(!(e instanceof xR))return te(16599,{Vt:e.type});n={verify:If(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof ll)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof cl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ul)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Tu)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw te(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:sj(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:te(27497)}(t,e.precondition)),n}function By(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?Gt.updateTime(rn(s.updateTime)):s.exists!==void 0?Gt.exists(s.exists):Gt.none()}(e.currentDocument):Gt.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;if("setToServerValue"in a)ie(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),l=new ll;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];l=new cl(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];l=new ul(d)}else"increment"in a?l=new Tu(o,a.increment):te(16584,{proto:a});const u=Je.fromServerFormat(a.fieldPath);return new SR(u,l)}(t,i)):[];if(e.update){e.update.name;const i=To(t,e.update.name),s=new Ht({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const u=l.fieldPaths||[];return new mn(u.map(d=>Je.fromServerFormat(d)))}(e.updateMask);return new Ti(i,s,o,n,r)}return new Cl(i,s,n,r)}if(e.delete){const i=To(t,e.delete);return new Rp(i,n)}if(e.verify){const i=To(t,e.verify);return new xR(i,n)}return te(1463,{proto:e})}function lj(t,e){return t&&t.length>0?(ie(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?rn(i.updateTime):rn(s);return o.isEqual(oe.min())&&(o=rn(s)),new K5(o,i.transformResults||[])}(n,e))):[]}function MR(t,e){return{documents:[NR(t,e.path)]}}function LR(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=NR(t,i);const s=function(u){if(u.length!==0)return jR(Oe.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(d=>function(p){return{field:oa(p.field),direction:uj(p.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Fy(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:i}}function FR(t){let e=OR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ie(r===1,65062);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(h){const p=UR(h);return p instanceof Oe&&F_(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(p=>function(E){return new Eu(aa(E.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(h){let p;return p=typeof h=="object"?h.value:h,wp(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(h){const p=!!h.before,m=h.values||[];return new ol(m,p)}(n.startAt));let u=null;return n.endAt&&(u=function(h){const p=!h.before,m=h.values||[];return new ol(m,p)}(n.endAt)),dR(e,i,o,s,a,"F",l,u)}function cj(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function UR(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=aa(n.unaryFilter.field);return _e.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=aa(n.unaryFilter.field);return _e.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=aa(n.unaryFilter.field);return _e.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=aa(n.unaryFilter.field);return _e.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return te(61313);default:return te(60726)}}(t):t.fieldFilter!==void 0?function(n){return _e.create(aa(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return te(58110);default:return te(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Oe.create(n.compositeFilter.filters.map(r=>UR(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return te(1026)}}(n.compositeFilter.op))}(t):te(30097,{filter:t})}function uj(t){return tj[t]}function dj(t){return nj[t]}function hj(t){return rj[t]}function oa(t){return{fieldPath:t.canonicalString()}}function aa(t){return Je.fromServerFormat(t.fieldPath)}function jR(t){return t instanceof _e?function(n){if(n.op==="=="){if(aI(n.value))return{unaryFilter:{field:oa(n.field),op:"IS_NAN"}};if(oI(n.value))return{unaryFilter:{field:oa(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(aI(n.value))return{unaryFilter:{field:oa(n.field),op:"IS_NOT_NAN"}};if(oI(n.value))return{unaryFilter:{field:oa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:oa(n.field),op:dj(n.op),value:n.value}}}(t):t instanceof Oe?function(n){const r=n.getFilters().map(i=>jR(i));return r.length===1?r[0]:{compositeFilter:{op:hj(n.op),filters:r}}}(t):te(54877,{filter:t})}function fj(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function BR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e,n,r,i,s=oe.min(),o=oe.min(),a=dt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ri(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ri(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ri(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ri(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(e){this.yt=e}}function pj(t,e){let n;if(e.document)n=oj(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=J.fromSegments(e.noDocument.path),i=Mo(e.noDocument.readTime);n=ut.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return te(56709);{const r=J.fromSegments(e.unknownDocument.path),i=Mo(e.unknownDocument.version);n=ut.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new De(i[0],i[1]);return oe.fromTimestamp(s)}(e.readTime)),n}function SI(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Af(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:If(s,o.key),fields:o.data.value.mapValue.fields,updateTime:dl(s,o.version.toTimestamp()),createTime:dl(s,o.createTime.toTimestamp())}}(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Vo(e.version)};else{if(!e.isUnknownDocument())return te(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:Vo(e.version)}}return r}function Af(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Vo(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Mo(t){const e=new De(t.seconds,t.nanoseconds);return oe.fromTimestamp(e)}function ro(t,e){const n=(e.baseMutations||[]).map(s=>By(t.yt,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>By(t.yt,s)),i=De.fromMillis(e.localWriteTimeMs);return new B_(e.batchId,i,n,r)}function vc(t){const e=Mo(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Mo(t.lastLimboFreeSnapshotVersion):oe.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){const o=s.documents.length;return ie(o===1,1966,{count:o}),Dn(qu(OR(s.documents[0])))}(t.query):function(s){return Dn(FR(s))}(t.query),new ri(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,dt.fromBase64String(t.resumeToken))}function zR(t,e){const n=Vo(e.snapshotVersion),r=Vo(e.lastLimboFreeSnapshotVersion);let i;i=wf(e.target)?MR(t.yt,e.target):LR(t.yt,e.target).ft;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Oo(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function qR(t){const e=FR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Tf(e,e.limit,"L"):e}function Ym(t,e){return new z_(e.largestBatchId,By(t.yt,e.overlayMutation))}function AI(t,e){const n=e.path.lastSegment();return[t,Qt(e.path.popLast()),n]}function PI(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Vo(r.readTime),documentKey:Qt(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{getBundleMetadata(e,n){return xI(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:Mo(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return xI(e).put(function(i){return{bundleId:i.id,createTime:Vo(rn(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return bI(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:qR(s.bundledQuery),readTime:Mo(s.readTime)}}(r)})}saveNamedQuery(e,n){return bI(e).put(function(i){return{name:i.name,readTime:Vo(rn(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function xI(t){return It(t,Ep)}function bI(t){return It(t,Tp)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new Cp(e,r)}getOverlay(e,n){return ic(e).get(AI(this.userId,n)).next(r=>r?Ym(this.serializer,r):null)}getOverlays(e,n){const r=br();return M.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new z_(n,o);i.push(this.St(e,a))}),M.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(Qt(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(ic(e).Z(Cy,a))}),M.waitFor(s)}getOverlaysForCollection(e,n,r){const i=br(),s=Qt(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return ic(e).J(Cy,o).next(a=>{for(const l of a){const u=Ym(this.serializer,l);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=br();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return ic(e).ee({index:zb,range:a},(l,u,d)=>{const h=Ym(this.serializer,u);s.size()<i||h.largestBatchId===o?(s.set(h.getKey(),h),o=h.largestBatchId):d.done()}).next(()=>s)}St(e,n){return ic(e).put(function(i,s,o){const[a,l,u]=AI(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Sf(i.yt,o.mutation)}}(this.serializer,this.userId,n))}}function ic(t){return It(t,Ip)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{bt(e){return It(e,N_)}getSessionToken(e){return this.bt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?dt.fromUint8Array(r):dt.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(Qe(e.integerValue));else if("doubleValue"in e){const r=Qe(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),fu(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=gi(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(yi(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?tR(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):Ap(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):te(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){var o,a;const r=e.fields||{};this.Ft(n,53);const i=il,s=((a=(o=r[i].arrayValue)==null?void 0:o.values)==null?void 0:a.length)||0;this.Ft(n,15),n.Mt(Qe(s)),this.Ot(i,n),this.Ct(r[i],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),J.fromName(e).path.forEach(r=>{this.Ft(n,60),this.Ut(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}io.Kt=new io;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea=255;function yj(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function RI(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=yj(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}class vj{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=n.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=n.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const n=this.en(e),r=RI(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}nn(e){const n=this.en(e),r=RI(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}rn(){this.sn(ea),this.sn(255)}_n(){this.an(ea),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===ea?(this.sn(ea),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===ea?(this.an(ea),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class _j{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class wj{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class sc{constructor(){this.cn=new vj,this.ln=new _j(this.cn),this.hn=new wj(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e,n,r,i){this.Tn=e,this.In=n,this.En=r,this.dn=i}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new so(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:Sh(this.En),directionalValue:Sh(this.dn),orderedDocumentKey:Sh(n),documentKey:r.path.toArray()}}Vn(e,n,r){const i=this.Rn(e,n,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function Ni(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=CI(t.En,e.En),n!==0?n:(n=CI(t.dn,e.dn),n!==0?n:J.comparator(t.In,e.In)))}function CI(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function Sh(t){return kx()?function(n){let r="";for(let i=0;i<n.length;i++)r+=String.fromCharCode(n[i]);return r}(t):t}function kI(t){return typeof t!="string"?t:function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(t)}class DI{constructor(e){this.mn=new Me((n,r)=>Je.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(ie(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=xy(e);if(n!==void 0&&!this.wn(n))return!1;const r=Zs(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.wn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.mn.size>0){const a=this.mn.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.Sn(a,l)||!this.bn(this.fn[o++],l))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.fn.length||!this.bn(this.fn[o++],a))return!1}return!0}Dn(){if(this.pn)return null;let e=new Me(Je.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new gh(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new gh(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new gh(r.field,r.dir==="asc"?0:1)));return new mf(mf.UNKNOWN_ID,this.collectionId,n,hu.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WR(t){var n,r;if(ie(t instanceof _e||t instanceof Oe,20012),t instanceof _e){if(t instanceof uR){const i=((r=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:r.map(s=>_e.create(t.field,"==",s)))||[];return Oe.create(i,"or")}return t}const e=t.filters.map(i=>WR(i));return Oe.create(e,t.op)}function Ej(t){if(t.getFilters().length===0)return[];const e=qy(WR(t));return ie(HR(e),7391),$y(e)||zy(e)?[e]:e.getFilters()}function $y(t){return t instanceof _e}function zy(t){return t instanceof Oe&&F_(t)}function HR(t){return $y(t)||zy(t)||function(n){if(n instanceof Oe&&Oy(n)){for(const r of n.getFilters())if(!$y(r)&&!zy(r))return!1;return!0}return!1}(t)}function qy(t){if(ie(t instanceof _e||t instanceof Oe,34018),t instanceof _e)return t;if(t.filters.length===1)return qy(t.filters[0]);const e=t.filters.map(r=>qy(r));let n=Oe.create(e,t.op);return n=Pf(n),HR(n)?n:(ie(n instanceof Oe,64498),ie(al(n),40251),ie(n.filters.length>1,57927),n.filters.reduce((r,i)=>H_(r,i)))}function H_(t,e){let n;return ie(t instanceof _e||t instanceof Oe,38388),ie(e instanceof _e||e instanceof Oe,25473),n=t instanceof _e?e instanceof _e?function(i,s){return Oe.create([i,s],"and")}(t,e):NI(t,e):e instanceof _e?NI(e,t):function(i,s){if(ie(i.filters.length>0&&s.filters.length>0,48005),al(i)&&al(s))return aR(i,s.getFilters());const o=Oy(i)?i:s,a=Oy(i)?s:i,l=o.filters.map(u=>H_(u,a));return Oe.create(l,"or")}(t,e),Pf(n)}function NI(t,e){if(al(e))return aR(e,t.getFilters());{const n=e.filters.map(r=>H_(t,r));return Oe.create(n,"or")}}function Pf(t){if(ie(t instanceof _e||t instanceof Oe,11850),t instanceof _e)return t;const e=t.getFilters();if(e.length===1)return Pf(e[0]);if(sR(t))return t;const n=e.map(i=>Pf(i)),r=[];return n.forEach(i=>{i instanceof _e?r.push(i):i instanceof Oe&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Oe.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj{constructor(){this.Cn=new K_}addToCollectionParentIndex(e,n){return this.Cn.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(On.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(On.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class K_{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Me(Re.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Me(Re.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI="IndexedDbIndexManager",Hd=new Uint8Array(0);class Ij{constructor(e,n){this.databaseId=n,this.vn=new K_,this.Fn=new Ei(r=>Oo(r),(r,i)=>zu(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.vn.add(n)});const s={collectionId:r,parent:Qt(i)};return VI(e).put(s)}return M.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[bb(n),""],!1,!0);return VI(e).J(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(xr(o.parent))}return r})}addFieldIndex(e,n){const r=oc(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=na(e);return s.next(a=>{o.put(PI(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=oc(e),i=na(e),s=ta(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=oc(e),r=ta(e),i=na(e);return n.Z().next(()=>r.Z()).next(()=>i.Z())}createTargetIndexes(e,n){return M.forEach(this.Mn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new DI(r).Dn();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=ta(e);let i=!0;const s=new Map;return M.forEach(this.Mn(n),o=>this.xn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=ge();const a=[];return M.forEach(s,(l,u)=>{q(OI,`Using index ${function(I){return`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map(D=>`${D.fieldPath}:${D.kind}`).join(",")}`}(l)} to execute ${Oo(n)}`);const d=function(I,D){const O=xy(D);if(O===void 0)return null;for(const V of Ef(I,O.fieldPath))switch(V.op){case"array-contains-any":return V.value.arrayValue.values||[];case"array-contains":return[V.value]}return null}(u,l),h=function(I,D){const O=new Map;for(const V of Zs(D))for(const T of Ef(I,V.fieldPath))switch(T.op){case"==":case"in":O.set(V.fieldPath.canonicalString(),T.value);break;case"not-in":case"!=":return O.set(V.fieldPath.canonicalString(),T.value),Array.from(O.values())}return null}(u,l),p=function(I,D){const O=[];let V=!0;for(const T of Zs(D)){const w=T.kind===0?hI(I,T.fieldPath,I.startAt):fI(I,T.fieldPath,I.startAt);O.push(w.value),V&&(V=w.inclusive)}return new ol(O,V)}(u,l),m=function(I,D){const O=[];let V=!0;for(const T of Zs(D)){const w=T.kind===0?fI(I,T.fieldPath,I.endAt):hI(I,T.fieldPath,I.endAt);O.push(w.value),V&&(V=w.inclusive)}return new ol(O,V)}(u,l),E=this.On(l,u,p),y=this.On(l,u,m),S=this.Nn(l,u,h),_=this.Bn(l.indexId,d,E,p.inclusive,y,m.inclusive,S);return M.forEach(_,v=>r.Y(v,n.limit).next(I=>{I.forEach(D=>{const O=J.fromSegments(D.documentKey);o.has(O)||(o=o.add(O),a.push(O))})}))}).next(()=>a)}return M.resolve(null)})}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=Ej(Oe.create(e.filters,"and")).map(r=>My(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,n),n)}Bn(e,n,r,i,s,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,s.length),u=l/(n!=null?n.length:1),d=[];for(let h=0;h<l;++h){const p=n?this.Ln(n[h/u]):Hd,m=this.kn(e,p,r[h%u],i),E=this.qn(e,p,s[h%u],o),y=a.map(S=>this.kn(e,p,S,!0));d.push(...this.createRange(m,E,y))}return d}kn(e,n,r,i){const s=new so(e,J.empty(),n,r);return i?s:s.An()}qn(e,n,r,i){const s=new so(e,J.empty(),n,r);return i?s.An():s}xn(e,n){const r=new DI(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.yn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.Mn(n);return M.forEach(i,s=>this.xn(e,s).next(o=>{o?r!==0&&o.fields.length<function(l){let u=new Me(Je.comparator),d=!1;for(const h of l.filters)for(const p of h.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?d=!0:u=u.add(p.field));for(const h of l.orderBy)h.field.isKeyField()||(u=u.add(h.field));return u.size+(d?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}Qn(e,n){const r=new sc;for(const i of Zs(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Pn(i.kind);io.Kt.Dt(s,o)}return r.un()}Ln(e){const n=new sc;return io.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new sc;return io.Kt.Dt(_u(this.databaseId,n),r.Pn(function(s){const o=Zs(s);return o.length===0?0:o[o.length-1].kind}(e))),r.un()}Nn(e,n,r){if(r===null)return[];let i=[];i.push(new sc);let s=0;for(const o of Zs(e)){const a=r[s++];for(const l of i)if(this.Un(n,o.fieldPath)&&wu(a))i=this.Kn(i,o,a);else{const u=l.Pn(o.kind);io.Kt.Dt(a,u)}}return this.Wn(i)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new sc;l.seed(a.un()),io.Kt.Dt(o,l.Pn(n.kind)),s.push(l)}return s}Un(e,n){return!!e.filters.find(r=>r instanceof _e&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=oc(e),i=na(e);return(n?r.J(Ry,IDBKeyRange.bound(n,n)):r.J()).next(s=>{const o=[];return M.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(d,h){const p=h?new hu(h.sequenceNumber,new On(Mo(h.readTime),new J(xr(h.documentKey)),h.largestBatchId)):hu.empty(),m=d.fields.map(([E,y])=>new gh(Je.fromServerFormat(E),y));return new mf(d.indexId,d.collectionGroup,m,p)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:he(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=oc(e),s=na(e);return this.Gn(e).next(o=>i.J(Ry,IDBKeyRange.bound(n,n)).next(a=>M.forEach(a,l=>s.put(PI(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return M.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?M.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),M.forEach(a,l=>this.zn(e,i,l).next(u=>{const d=this.jn(s,l);return u.isEqual(d)?M.resolve():this.Jn(e,s,l,u,d)}))))})}Hn(e,n,r,i){return ta(e).put(i.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,i){return ta(e).delete(i.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const i=ta(e);let s=new Me(Ni);return i.ee({index:$b,range:IDBKeyRange.only([r.indexId,this.uid,Sh(this.$n(r,n))])},(o,a)=>{s=s.add(new so(r.indexId,n,kI(a.arrayValue),kI(a.directionalValue)))}).next(()=>s)}jn(e,n){let r=new Me(Ni);const i=this.Qn(n,e);if(i==null)return r;const s=xy(n);if(s!=null){const o=e.data.field(s.fieldPath);if(wu(o))for(const a of o.arrayValue.values||[])r=r.add(new so(n.indexId,e.key,this.Ln(a),i))}else r=r.add(new so(n.indexId,e.key,Hd,i));return r}Jn(e,n,r,i,s){q(OI,"Updating index entries for document '%s'",n.key);const o=[];return function(l,u,d,h,p){const m=l.getIterator(),E=u.getIterator();let y=Zo(m),S=Zo(E);for(;y||S;){let _=!1,v=!1;if(y&&S){const I=d(y,S);I<0?v=!0:I>0&&(_=!0)}else y!=null?v=!0:_=!0;_?(h(S),S=Zo(E)):v?(p(y),y=Zo(m)):(y=Zo(m),S=Zo(E))}}(i,s,Ni,a=>{o.push(this.Hn(e,n,r,a))},a=>{o.push(this.Yn(e,n,r,a))}),M.waitFor(o)}Gn(e){let n=1;return na(e).ee({index:Bb,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Ni(o,a)).filter((o,a,l)=>!a||Ni(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=Ni(o,e),l=Ni(o,n);if(a===0)i[0]=e.An();else if(a>0&&l<0)i.push(o),i.push(o.An());else if(l>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Zn(i[o],i[o+1]))return[];const a=i[o].Vn(this.uid,Hd,J.empty()),l=i[o+1].Vn(this.uid,Hd,J.empty());s.push(IDBKeyRange.bound(a,l))}return s}Zn(e,n){return Ni(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(MI)}getMinOffset(e,n){return M.mapArray(this.Mn(n),r=>this.xn(e,r).next(i=>i||te(44426))).next(MI)}}function VI(t){return It(t,gu)}function ta(t){return It(t,Oc)}function oc(t){return It(t,D_)}function na(t){return It(t,Nc)}function MI(t){ie(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;R_(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new On(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},KR=41943040;class qt{static withCacheSize(e){return new qt(e,qt.DEFAULT_COLLECTION_PERCENTILE,qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GR(t,e,n){const r=t.store(tr),i=t.store(el),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.ee({range:o},(d,h,p)=>(a++,p.delete()));s.push(l.next(()=>{ie(a===1,47070,{batchId:n.batchId})}));const u=[];for(const d of n.mutations){const h=Fb(e,d.key.path,n.batchId);s.push(i.delete(h)),u.push(d.key)}return M.waitFor(s).next(()=>u)}function xf(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw te(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qt.DEFAULT_COLLECTION_PERCENTILE=10,qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qt.DEFAULT=new qt(KR,qt.DEFAULT_COLLECTION_PERCENTILE,qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qt.DISABLED=new qt(-1,0,0);class kp{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,n,r,i){ie(e.uid!=="",64387);const s=e.isAuthenticated()?e.uid:"";return new kp(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Oi(e).ee({index:co,range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=la(e),o=Oi(e);return o.add({}).next(a=>{ie(typeof a=="number",49019);const l=new B_(a,n,r,i),u=function(m,E,y){const S=y.baseMutations.map(v=>Sf(m.yt,v)),_=y.mutations.map(v=>Sf(m.yt,v));return{userId:E,batchId:y.batchId,localWriteTimeMs:y.localWriteTime.toMillis(),baseMutations:S,mutations:_}}(this.serializer,this.userId,l),d=[];let h=new Me((p,m)=>he(p.canonicalString(),m.canonicalString()));for(const p of i){const m=Fb(this.userId,p.key.path,a);h=h.add(p.key.path.popLast()),d.push(o.put(u)),d.push(s.put(m,t5))}return h.forEach(p=>{d.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.Xn[a]=l.keys()}),M.waitFor(d).next(()=>l)})}lookupMutationBatch(e,n){return Oi(e).get(n).next(r=>r?(ie(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),ro(this.serializer,r)):null)}er(e,n){return this.Xn[n]?M.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Xn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Oi(e).ee({index:co,range:i},(o,a,l)=>{a.userId===this.userId&&(ie(a.batchId>=r,47524,{tr:r}),s=ro(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=wo;return Oi(e).ee({index:co,range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,wo],[this.userId,Number.POSITIVE_INFINITY]);return Oi(e).J(co,n).next(r=>r.map(i=>ro(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=yh(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return la(e).ee({range:i},(o,a,l)=>{const[u,d,h]=o,p=xr(d);if(u===this.userId&&n.path.isEqual(p))return Oi(e).get(h).next(m=>{if(!m)throw te(61480,{nr:o,batchId:h});ie(m.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:m.userId,batchId:h}),s.push(ro(this.serializer,m))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Me(he);const i=[];return n.forEach(s=>{const o=yh(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=la(e).ee({range:a},(u,d,h)=>{const[p,m,E]=u,y=xr(m);p===this.userId&&s.path.isEqual(y)?r=r.add(E):h.done()});i.push(l)}),M.waitFor(i).next(()=>this.rr(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=yh(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Me(he);return la(e).ee({range:o},(l,u,d)=>{const[h,p,m]=l,E=xr(p);h===this.userId&&r.isPrefixOf(E)?E.length===i&&(a=a.add(m)):d.done()}).next(()=>this.rr(e,a))}rr(e,n){const r=[],i=[];return n.forEach(s=>{i.push(Oi(e).get(s).next(o=>{if(o===null)throw te(35274,{batchId:s});ie(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:s}),r.push(ro(this.serializer,o))}))}),M.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return GR(e.le,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.ir(n.batchId)}),M.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return M.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return la(e).ee({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=xr(s[1]);i.push(l)}else a.done()}).next(()=>{ie(i.length===0,56720,{sr:i.map(s=>s.canonicalString())})})})}containsKey(e,n){return QR(e,this.userId,n)}_r(e){return YR(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:wo,lastStreamToken:""})}}function QR(t,e,n){const r=yh(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return la(t).ee({range:s,X:!0},(a,l,u)=>{const[d,h,p]=a;d===e&&h===i&&(o=!0),u.done()}).next(()=>o)}function Oi(t){return It(t,tr)}function la(t){return It(t,el)}function YR(t){return It(t,pu)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Lo(0)}static cr(){return new Lo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next(n=>{const r=new Lo(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(n=>oe.fromTimestamp(new De(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.lr(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.hr(e,i)))}addTargetData(e,n){return this.Pr(e,n).next(()=>this.lr(e).next(r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>ra(e).delete(n.targetId)).next(()=>this.lr(e)).next(r=>(ie(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return ra(e).ee((o,a)=>{const l=vc(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>M.waitFor(s)).next(()=>i)}forEachTarget(e,n){return ra(e).ee((r,i)=>{const s=vc(i);n(s)})}lr(e){return FI(e).get(vf).next(n=>(ie(n!==null,2888),n))}hr(e,n){return FI(e).put(vf,n)}Pr(e,n){return ra(e).put(zR(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Oo(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return ra(e).ee({range:i,index:jb},(o,a,l)=>{const u=vc(a);zu(n,u.target)&&(s=u,l.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=Wi(e);return n.forEach(o=>{const a=Qt(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),M.waitFor(i)}removeMatchingKeys(e,n,r){const i=Wi(e);return M.forEach(n,s=>{const o=Qt(s.path);return M.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=Wi(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Wi(e);let s=ge();return i.ee({range:r,X:!0},(o,a,l)=>{const u=xr(o[1]),d=new J(u);s=s.add(d)}).next(()=>s)}containsKey(e,n){const r=Qt(n.path),i=IDBKeyRange.bound([r],[bb(r)],!1,!0);let s=0;return Wi(e).ee({index:k_,X:!0,range:i},([o,a],l,u)=>{o!==0&&(s++,u.done())}).next(()=>s>0)}At(e,n){return ra(e).get(n).next(r=>r?vc(r):null)}}function ra(t){return It(t,tl)}function FI(t){return It(t,Eo)}function Wi(t){return It(t,nl)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI="LruGarbageCollector",JR=1048576;function jI([t,e],[n,r]){const i=he(t,n);return i===0?he(e,r):i}class Aj{constructor(e){this.Ir=e,this.buffer=new Me(jI),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();jI(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class XR{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){q(UI,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ls(n)?q(UI,"Ignoring IndexedDB error during garbage collection: ",n):await Ms(n)}await this.Vr(3e5)})}}class Pj{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return M.resolve(pn.ce);const r=new Aj(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(q("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(LI)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),LI):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,o,a,l,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,o=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(s=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(u=Date.now(),ia()<=ve.DEBUG&&q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(u-l)+`ms
Total Duration: ${u-d}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h})))}}function ZR(t,e){return new Pj(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xj{constructor(e,n){this.db=e,this.garbageCollector=ZR(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,(r,i)=>n(i))}addReference(e,n,r){return Kd(e,r)}removeReference(e,n,r){return Kd(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Kd(e,n)}br(e,n){return function(i,s){let o=!1;return YR(i).te(a=>QR(i,a,s).next(l=>(l&&(o=!0),M.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Sr(e,(o,a)=>{if(a<=n){const l=this.br(e,o).next(u=>{if(!u)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,oe.min()),Wi(e).delete(function(h){return[0,Qt(h.path)]}(o))))});i.push(l)}}).next(()=>M.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Kd(e,n)}Sr(e,n){const r=Wi(e);let i,s=pn.ce;return r.ee({index:k_},([o,a],{path:l,sequenceNumber:u})=>{o===0?(s!==pn.ce&&n(new J(xr(i)),s),s=u,i=l):s=pn.ce}).next(()=>{s!==pn.ce&&n(new J(xr(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Kd(t,e){return Wi(t).put(function(r,i){return{targetId:0,path:Qt(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(){this.changes=new Ei(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ut.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Qs(e).put(r)}removeEntry(e,n,r){return Qs(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Af(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Dr(e,r)))}getEntry(e,n){let r=ut.newInvalidDocument(n);return Qs(e).ee({index:vh,range:IDBKeyRange.only(ac(n))},(i,s)=>{r=this.Cr(n,s)}).next(()=>r)}vr(e,n){let r={size:0,document:ut.newInvalidDocument(n)};return Qs(e).ee({index:vh,range:IDBKeyRange.only(ac(n))},(i,s)=>{r={document:this.Cr(n,s),size:xf(s)}}).next(()=>r)}getEntries(e,n){let r=Rn();return this.Fr(e,n,(i,s)=>{const o=this.Cr(i,s);r=r.insert(i,o)}).next(()=>r)}Mr(e,n){let r=Rn(),i=new $e(J.comparator);return this.Fr(e,n,(s,o)=>{const a=this.Cr(s,o);r=r.insert(s,a),i=i.insert(s,xf(o))}).next(()=>({documents:r,Or:i}))}Fr(e,n,r){if(n.isEmpty())return M.resolve();let i=new Me(zI);n.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(ac(i.first()),ac(i.last())),o=i.getIterator();let a=o.getNext();return Qs(e).ee({index:vh,range:s},(l,u,d)=>{const h=J.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&zI(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?d.j(ac(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),Af(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Qs(e).J(IDBKeyRange.bound(a,l,!0)).next(u=>{s==null||s.incrementDocumentReadCount(u.length);let d=Rn();for(const h of u){const p=this.Cr(J.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);p.isFoundDocument()&&(Wu(n,p)||i.has(p.key))&&(d=d.insert(p.key,p))}return d})}getAllFromCollectionGroup(e,n,r,i){let s=Rn();const o=$I(n,r),a=$I(n,On.max());return Qs(e).ee({index:Ub,range:IDBKeyRange.bound(o,a,!0)},(l,u,d)=>{const h=this.Cr(J.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(h.key,h),s.size===i&&d.done()}).next(()=>s)}newChangeBuffer(e){return new Rj(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return BI(e).get(by).next(n=>(ie(!!n,20021),n))}Dr(e,n){return BI(e).put(by,n)}Cr(e,n){if(n){const r=pj(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(oe.min())))return r}return ut.newInvalidDocument(e)}}function tC(t){return new bj(t)}class Rj extends eC{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new Ei(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Me((s,o)=>he(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.Br.get(s);if(n.push(this.Nr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=SI(this.Nr.serializer,o);i=i.add(s.path.popLast());const u=xf(l);r+=u-a.size,n.push(this.Nr.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=SI(this.Nr.serializer,o.convertToNoDocument(oe.min()));n.push(this.Nr.addEntry(e,s,l))}}),i.forEach(s=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.Nr.updateMetadata(e,r)),M.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next(r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next(({documents:r,Or:i})=>(i.forEach((s,o)=>{this.Br.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function BI(t){return It(t,mu)}function Qs(t){return It(t,yf)}function ac(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function $I(t,e){const n=e.documentKey.path.toArray();return[t,Af(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function zI(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=he(n[s],r[s]),i)return i;return i=he(n.length,r.length),i||(i=he(n[n.length-2],r[r.length-2]),i||he(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Fc(r.mutation,i,mn.empty(),De.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ge()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ge()){const i=br();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=gc();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=br();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ge()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Rn();const o=Lc(),a=function(){return Lc()}();return n.forEach((l,u)=>{const d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof Ti)?s=s.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),Fc(d.mutation,u,d.mutation.getFieldMask(),De.now())):o.set(u.key,mn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,d)=>o.set(u,d)),n.forEach((u,d)=>a.set(u,new Cj(d,o.get(u)??null))),a))}recalculateAndSaveOverlays(e,n){const r=Lc();let i=new $e((o,a)=>o-a),s=ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let d=r.get(l)||mn.empty();d=a.applyToLocalView(u,d),r.set(l,d);const h=(i.get(a.batchId)||ge()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,d=l.value,h=vR();d.forEach(p=>{if(!s.has(p)){const m=AR(n.get(p),r.get(p));m!==null&&h.set(p,m),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return M.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return J.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):hR(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):M.resolve(br());let a=Za,l=s;return o.next(u=>M.forEach(u,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(d)?M.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{l=l.insert(d,p)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,ge())).next(d=>({batchId:a,changes:yR(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new J(n)).next(r=>{let i=gc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=gc();return this.indexManager.getCollectionParents(e,s).next(a=>M.forEach(a,l=>{const u=function(h,p){return new Rl(p,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((h,p)=>{o=o.insert(h,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,ut.newInvalidDocument(d)))});let a=gc();return o.forEach((l,u)=>{const d=s.get(l);d!==void 0&&Fc(d.mutation,u,mn.empty(),De.now()),Wu(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return M.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:rn(i.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:qR(i.bundledQuery),readTime:rn(i.readTime)}}(n)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{constructor(){this.overlays=new $e(J.comparator),this.qr=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const r=br();return M.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.St(e,n,s)}),M.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){const i=br(),s=n.length+1,o=new J(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return M.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new $e((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=s.get(u.largestBatchId);d===null&&(d=br(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const a=br(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=i)););return M.resolve(a)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new z_(n,r));let s=this.qr.get(n);s===void 0&&(s=ge(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(){this.sessionToken=dt.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(){this.Qr=new Me(At.$r),this.Ur=new Me(At.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new At(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new At(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new J(new Re([])),r=new At(n,e),i=new At(n,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new J(new Re([])),r=new At(n,e),i=new At(n,e+1);let s=ge();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new At(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class At{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return J.comparator(e.key,n.key)||he(e.Yr,n.Yr)}static Kr(e,n){return he(e.Yr,n.Yr)||J.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oj{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Me(At.$r)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new B_(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Zr=this.Zr.add(new At(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,n){return M.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return M.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?wo:this.tr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new At(n,0),i=new At(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{const a=this.Xr(o.Yr);s.push(a)}),M.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Me(he);return n.forEach(i=>{const s=new At(i,0),o=new At(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],a=>{r=r.add(a.Yr)})}),M.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;J.isDocumentKey(s)||(s=s.child(""));const o=new At(new J(s),0);let a=new Me(he);return this.Zr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.Yr)),!0)},o),M.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ie(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return M.forEach(n.mutations,i=>{const s=new At(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new At(n,0),i=this.Zr.firstAfterOrEqual(r);return M.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{constructor(e){this.ri=e,this.docs=function(){return new $e(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():ut.newInvalidDocument(n))}getEntries(e,n){let r=Rn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ut.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Rn();const o=n.path,a=new J(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:d}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||R_(Nb(d),r)<=0||(i.has(d.key)||Wu(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return M.resolve(s)}getAllFromCollectionGroup(e,n,r,i){te(9500)}ii(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Mj(this)}getSize(e){return M.resolve(this.size)}}class Mj extends eC{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(e){this.persistence=e,this.si=new Ei(n=>Oo(n),zu),this.lastRemoteSnapshotVersion=oe.min(),this.highestTargetId=0,this.oi=0,this._i=new G_,this.targetCount=0,this.ai=Lo.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),M.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Lo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.Pr(n),M.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),M.waitFor(s).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),M.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{constructor(e,n){this.ui={},this.overlays={},this.ci=new pn(0),this.li=!1,this.li=!0,this.hi=new Nj,this.referenceDelegate=e(this),this.Pi=new Lj(this),this.indexManager=new Tj,this.remoteDocumentCache=function(i){return new Vj(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new $R(n),this.Ii=new kj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Dj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new Oj(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){q("MemoryPersistence","Starting transaction:",e);const i=new Fj(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,n){return M.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class Fj extends Vb{constructor(e){super(),this.currentSequenceNumber=e}}class Dp{constructor(e){this.persistence=e,this.Ri=new G_,this.Vi=null}static mi(e){return new Dp(e)}get fi(){if(this.Vi)return this.Vi;throw te(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),M.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.fi,r=>{const i=J.fromPath(r);return this.gi(e,i).next(s=>{s||n.removeEntry(i,oe.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return M.or([()=>M.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class bf{constructor(e,n){this.persistence=e,this.pi=new Ei(r=>Qt(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=ZR(this,n)}static mi(e,n){return new bf(e,n)}Ei(){}di(e){return M.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return M.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?M.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,s.removeEntry(o,oe.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),M.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),M.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),M.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=wh(e.data.value)),n}br(e,n,r){return M.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return M.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(e){this.serializer=e}k(e,n,r,i){const s=new _p("createOrUpgrade",n);r<1&&i>=1&&(function(l){l.createObjectStore($u)}(e),function(l){l.createObjectStore(pu,{keyPath:e5}),l.createObjectStore(tr,{keyPath:eI,autoIncrement:!0}).createIndex(co,tI,{unique:!0}),l.createObjectStore(el)}(e),qI(e),function(l){l.createObjectStore(eo)}(e));let o=M.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore(nl),l.deleteObjectStore(tl),l.deleteObjectStore(Eo)}(e),qI(e)),o=o.next(()=>function(l){const u=l.store(Eo),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:oe.min().toTimestamp(),targetCount:0};return u.put(vf,d)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(l,u){return u.store(tr).J().next(h=>{l.deleteObjectStore(tr),l.createObjectStore(tr,{keyPath:eI,autoIncrement:!0}).createIndex(co,tI,{unique:!0});const p=u.store(tr),m=h.map(E=>p.put(E));return M.waitFor(m)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore(rl,{keyPath:c5})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.yi(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore(mu)}(e),this.wi(s)))),r<7&&i>=7&&(o=o.next(()=>this.Si(s))),r<8&&i>=8&&(o=o.next(()=>this.bi(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.Di(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore(Ep,{keyPath:u5})})(e),function(l){l.createObjectStore(Tp,{keyPath:d5})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(l){const u=l.createObjectStore(Ip,{keyPath:v5});u.createIndex(Cy,_5,{unique:!1}),u.createIndex(zb,w5,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const u=l.createObjectStore(yf,{keyPath:n5});u.createIndex(vh,r5),u.createIndex(Ub,i5)}(e)).next(()=>this.Ci(e,s)).next(()=>e.deleteObjectStore(eo))),r<14&&i>=14&&(o=o.next(()=>this.Fi(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore(D_,{keyPath:h5,autoIncrement:!0}).createIndex(Ry,f5,{unique:!1}),l.createObjectStore(Nc,{keyPath:p5}).createIndex(Bb,m5,{unique:!1}),l.createObjectStore(Oc,{keyPath:g5}).createIndex($b,y5,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{n.objectStore(Nc).clear()}).next(()=>{n.objectStore(Oc).clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(l){l.createObjectStore(N_,{keyPath:E5})})(e)})),r<18&&i>=18&&kx()&&(o=o.next(()=>{n.objectStore(Nc).clear()}).next(()=>{n.objectStore(Oc).clear()})),o}wi(e){let n=0;return e.store(eo).ee((r,i)=>{n+=xf(i)}).next(()=>{const r={byteSize:n};return e.store(mu).put(by,r)})}yi(e){const n=e.store(pu),r=e.store(tr);return n.J().next(i=>M.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,wo],[s.userId,s.lastAcknowledgedBatchId]);return r.J(co,o).next(a=>M.forEach(a,l=>{ie(l.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const u=ro(this.serializer,l);return GR(e,s.userId,u).next(()=>{})}))}))}Si(e){const n=e.store(nl),r=e.store(eo);return e.store(Eo).get(vf).next(i=>{const s=[];return r.ee((o,a)=>{const l=new Re(o),u=function(h){return[0,Qt(h)]}(l);s.push(n.get(u).next(d=>d?M.resolve():(h=>n.put({targetId:0,path:Qt(h),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>M.waitFor(s))})}bi(e,n){e.createObjectStore(gu,{keyPath:l5});const r=n.store(gu),i=new K_,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:Qt(l)})}};return n.store(eo).ee({X:!0},(o,a)=>{const l=new Re(o);return s(l.popLast())}).next(()=>n.store(el).ee({X:!0},([o,a,l],u)=>{const d=xr(a);return s(d.popLast())}))}Di(e){const n=e.store(tl);return n.ee((r,i)=>{const s=vc(i),o=zR(this.serializer,s);return n.put(o)})}Ci(e,n){const r=n.store(eo),i=[];return r.ee((s,o)=>{const a=n.store(yf),l=function(h){return h.document?new J(Re.fromString(h.document.name).popFirst(5)):h.noDocument?J.fromSegments(h.noDocument.path):h.unknownDocument?J.fromSegments(h.unknownDocument.path):te(36783)}(o).path.toArray(),u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(u))}).next(()=>M.waitFor(i))}Fi(e,n){const r=n.store(tr),i=tC(this.serializer),s=new Q_(Dp.mi,this.serializer.yt);return r.J().next(o=>{const a=new Map;return o.forEach(l=>{let u=a.get(l.userId)??ge();ro(this.serializer,l).keys().forEach(d=>u=u.add(d)),a.set(l.userId,u)}),M.forEach(a,(l,u)=>{const d=new zt(u),h=Cp.wt(this.serializer,d),p=s.getIndexManager(d),m=kp.wt(d,this.serializer,p,s.referenceDelegate);return new nC(i,m,h,p).recalculateAndSaveOverlaysForDocumentKeys(new ky(n,pn.ce),l).next()})})}}function qI(t){t.createObjectStore(nl,{keyPath:o5}).createIndex(k_,a5,{unique:!0}),t.createObjectStore(tl,{keyPath:"targetId"}).createIndex(jb,s5,{unique:!0}),t.createObjectStore(Eo)}const Vi="IndexedDbPersistence",Jm=18e5,Xm=5e3,Zm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",jj="main";class Y_{constructor(e,n,r,i,s,o,a,l,u,d,h=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=s,this.window=o,this.document=a,this.xi=u,this.Oi=d,this.Ni=h,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=p=>Promise.resolve(),!Y_.v())throw new Q(j.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new xj(this,i),this.$i=n+jj,this.serializer=new $R(l),this.Ui=new fs(this.$i,this.Ni,new Uj(this.serializer)),this.hi=new gj,this.Pi=new Sj(this.referenceDelegate,this.serializer),this.remoteDocumentCache=tC(this.serializer),this.Ii=new mj,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,d===!1&&ft(Vi,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Q(j.FAILED_PRECONDITION,Zm);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new pn(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Gd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(n=>this.isPrimary&&!n?this.Zi(e).next(()=>!1):!!n&&this.Xi(e).next(()=>!0))).catch(e=>{if(Ls(e))return q(Vi,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return q(Vi,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return lc(e).get(Xo).next(n=>M.resolve(this.es(n)))}ts(e){return Gd(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Jm)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=It(n,rl);return r.J().next(i=>{const s=this.ss(i,Jm),o=i.filter(a=>s.indexOf(a)===-1);return M.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?M.resolve(!0):lc(e).get(Xo).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Xm)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new Q(j.FAILED_PRECONDITION,Zm);return!1}}return!(!this.networkEnabled||!this.inForeground)||Gd(e).J().next(r=>this.ss(r,Xm).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&q(Vi,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[$u,rl],e=>{const n=new ky(e,pn.ce);return this.Zi(n).next(()=>this.ts(n))}),this.Ui.close(),this.Ps()}ss(e,n){return e.filter(r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>Gd(e).J().next(n=>this.ss(n,Jm).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return kp.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Ij(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Cp.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){q(Vi,"Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=function(l){return l===18?S5:l===17?Kb:l===16?I5:l===15?O_:l===14?Hb:l===13?Wb:l===12?T5:l===11?qb:void te(60245)}(this.Ni);let o;return this.Ui.runTransaction(e,i,s,a=>(o=new ky(a,this.ci?this.ci.next():pn.ce),n==="readwrite-primary"?this.Hi(o).next(l=>!!l||this.Yi(o)).next(l=>{if(!l)throw ft(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new Q(j.FAILED_PRECONDITION,Ob);return r(o)}).next(l=>this.Xi(o).next(()=>l)):this.Is(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Is(e){return lc(e).get(Xo).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Xm)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Q(j.FAILED_PRECONDITION,Zm)})}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return lc(e).put(Xo,n)}static v(){return fs.v()}Zi(e){const n=lc(e);return n.get(Xo).next(r=>this.es(r)?(q(Vi,"Releasing primary lease."),n.delete(Xo)):M.resolve())}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(ft(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;Cx()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const r=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return q(Vi,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ft(Vi,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){ft("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function lc(t){return It(t,$u)}function Gd(t){return It(t,rl)}function rC(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=ge(),i=ge();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new J_(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Cx()?8:Mb(Tt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Bj;return this.Ss(e,n,o).next(a=>{if(s.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>s.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(ia()<=ve.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",sa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),M.resolve()):(ia()<=ve.DEBUG&&q("QueryEngine","Query:",sa(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(ia()<=ve.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",sa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Dn(n))):M.resolve())}ys(e,n){if(pI(n))return M.resolve(null);let r=Dn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Tf(n,null,"F"),r=Dn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ge(...s);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.Ds(n,a);return this.Cs(n,u,o,l.readTime)?this.ys(e,Tf(n,null,"F")):this.vs(e,u,n,l)}))})))}ws(e,n,r,i){return pI(n)||i.isEqual(oe.min())?M.resolve(null):this.ps.getDocuments(e,r).next(s=>{const o=this.Ds(n,s);return this.Cs(n,o,r,i)?M.resolve(null):(ia()<=ve.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),sa(n)),this.vs(e,o,n,Db(i,Za)).next(a=>a))})}Ds(e,n){let r=new Me(mR(e));return n.forEach((i,s)=>{Wu(e,s)&&(r=r.add(s))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return ia()<=ve.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",sa(n)),this.ps.getDocumentsMatchingQuery(e,n,On.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_="LocalStore",$j=3e8;class zj{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new $e(he),this.xs=new Ei(s=>Oo(s),zu),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function sC(t,e,n,r){return new zj(t,e,n,r)}async function oC(t,e){const n=re(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=ge();for(const u of i){o.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}for(const u of s){a.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:a}))})})}function qj(t,e){const n=re(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,u,d){const h=u.batch,p=h.keys();let m=M.resolve();return p.forEach(E=>{m=m.next(()=>d.getEntry(l,E)).next(y=>{const S=u.docVersions.get(E);ie(S!==null,48541),y.version.compareTo(S)<0&&(h.applyToRemoteDocument(y,u),y.isValidDocument()&&(y.setReadTime(u.commitVersion),d.addEntry(y)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=ge();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function aC(t){const e=re(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function Wj(t,e){const n=re(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];e.targetChanges.forEach((d,h)=>{const p=i.get(h);if(!p)return;a.push(n.Pi.removeMatchingKeys(s,d.removedDocuments,h).next(()=>n.Pi.addMatchingKeys(s,d.addedDocuments,h)));let m=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(dt.EMPTY_BYTE_STRING,oe.min()).withLastLimboFreeSnapshotVersion(oe.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),i=i.insert(h,m),function(y,S,_){return y.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=$j?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(p,m,d)&&a.push(n.Pi.updateTargetData(s,m))});let l=Rn(),u=ge();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(Hj(s,o,e.documentUpdates).next(d=>{l=d.ks,u=d.qs})),!r.isEqual(oe.min())){const d=n.Pi.getLastRemoteSnapshotVersion(s).next(h=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return M.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.Ms=i,s))}function Hj(t,e,n){let r=ge(),i=ge();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Rn();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(oe.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):q(X_,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{ks:o,qs:i}})}function Kj(t,e){const n=re(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=wo),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Rf(t,e){const n=re(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(s=>s?(i=s,M.resolve(i)):n.Pi.allocateTargetId(r).next(o=>(i=new ri(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function hl(t,e,n){const r=re(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Ls(o))throw o;q(X_,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function Wy(t,e,n){const r=re(t);let i=oe.min(),s=ge();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,d){const h=re(l),p=h.xs.get(d);return p!==void 0?M.resolve(h.Ms.get(p)):h.Pi.getTargetData(u,d)}(r,o,Dn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:oe.min(),n?s:ge())).next(a=>(uC(r,pR(e),a),{documents:a,Qs:s})))}function lC(t,e){const n=re(t),r=re(n.Pi),i=n.Ms.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.At(s,e).next(o=>o?o.target:null))}function cC(t,e){const n=re(t),r=n.Os.get(e)||oe.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.Ns.getAllFromCollectionGroup(i,e,Db(r,Za),Number.MAX_SAFE_INTEGER)).then(i=>(uC(n,e,i),i))}function uC(t,e,n){let r=t.Os.get(e)||oe.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Os.set(e,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dC="firestore_clients";function WI(t,e){return`${dC}_${t}_${e}`}const hC="firestore_mutations";function HI(t,e,n){let r=`${hC}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const fC="firestore_targets";function eg(t,e){return`${fC}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sr="SharedClientState";class Cf{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ws(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new Q(i.error.code,i.error.message))),o?new Cf(e,n,i.state,s):(ft(Sr,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Uc{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ws(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new Q(r.error.code,r.error.message))),s?new Uc(e,r.state,i):(ft(Sr,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class kf{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=U_();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=Lb(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new kf(e,s):(ft(Sr,`Failed to parse client data for instance '${e}': ${n}`),null)}}class Z_{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new Z_(n.clientId,n.onlineState):(ft(Sr,`Failed to parse online state: ${e}`),null)}}class Hy{constructor(){this.activeTargetIds=U_()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class tg{constructor(e,n,r,i,s){this.window=e,this.Mi=n,this.persistenceKey=r,this.Js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new $e(he),this.started=!1,this.Xs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.eo=WI(this.persistenceKey,this.Js),this.no=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new Hy),this.ro=new RegExp(`^${dC}_${o}_([^_]*)$`),this.io=new RegExp(`^${hC}_${o}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${fC}_${o}_(\\d+)$`),this.oo=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this._o=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const i=this.getItem(WI(this.persistenceKey,r));if(i){const s=kf.Ws(r,i);s&&(this.Zs=this.Zs.insert(s.clientId,s))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const r=this.uo(n);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,r){this.ho(e,n,r),this.Po(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(eg(this.persistenceKey,e));if(i){const s=Uc.Ws(e,i);s&&(r=s.state)}}return n&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(eg(this.persistenceKey,e))}updateQueryState(e,n,r){this.Io(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Po(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return q(Sr,"READ",e,n),n}setItem(e,n){q(Sr,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){q(Sr,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(q(Sr,"EVENT",n.key,n.newValue),n.key===this.eo)return void ft("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const r=this.Ro(n.key);return this.Vo(r,null)}{const r=this.mo(n.key,n.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(this.so.test(n.key)){if(n.newValue!==null){const r=this.yo(n.key,n.newValue);if(r)return this.wo(r)}}else if(n.key===this.oo){if(n.newValue!==null){const r=this.uo(n.newValue);if(r)return this.co(r)}}else if(n.key===this.no){const r=function(s){let o=pn.ce;if(s!=null)try{const a=JSON.parse(s);ie(typeof a=="number",30636,{So:s}),o=a}catch(a){ft(Sr,"Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==pn.ce&&this.sequenceNumberHandler(r)}else if(n.key===this._o){const r=this.bo(n.newValue);await Promise.all(r.map(i=>this.syncEngine.Do(i)))}}}else this.Xs.push(n)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,r){const i=new Cf(this.currentUser,e,n,r),s=HI(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Gs())}Po(e){const n=HI(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,r){const i=eg(this.persistenceKey,e),s=new Uc(e,n,r);this.setItem(i,s.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const r=this.Ro(e);return kf.Ws(r,n)}fo(e,n){const r=this.io.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return Cf.Ws(new zt(s),i,n)}yo(e,n){const r=this.so.exec(e),i=Number(r[1]);return Uc.Ws(i,n)}uo(e){return Z_.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);q(Sr,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const r=n?this.Zs.insert(e,n):this.Zs.remove(e),i=this.lo(this.Zs),s=this.lo(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.Fo(o,a).then(()=>{this.Zs=r})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=U_();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class pC{constructor(){this.Mo=new Hy,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Hy,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gj{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI="ConnectivityMonitor";class GI{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){q(KI,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){q(KI,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qd=null;function Ky(){return Qd===null?Qd=function(){return 268435456+Math.round(2147483648*Math.random())}():Qd++,"0x"+Qd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ng="RestConnection",Qj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Yj{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===_f?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const o=Ky(),a=this.zo(e,n.toUriEncodedString());q(ng,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,s);const{host:u}=new URL(a),d=Os(u);return this.Jo(e,a,l,r,d).then(h=>(q(ng,`Received RPC '${e}' ${o}: `,h),h),h=>{throw Ts(ng,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",r),h})}Ho(e,n,r,i,s,o){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+bl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,n){const r=Qj[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jj{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bt="WebChannelConnection";class Xj extends Yj{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const o=Ky();return new Promise((a,l)=>{const u=new Eb;u.setWithCredentials(!0),u.listenOnce(Tb.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case mh.NO_ERROR:const h=u.getResponseJson();q(Bt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),a(h);break;case mh.TIMEOUT:q(Bt,`RPC '${e}' ${o} timed out`),l(new Q(j.DEADLINE_EXCEEDED,"Request time out"));break;case mh.HTTP_ERROR:const p=u.getStatus();if(q(Bt,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const E=m==null?void 0:m.error;if(E&&E.status&&E.message){const y=function(_){const v=_.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(v)>=0?v:j.UNKNOWN}(E.status);l(new Q(y,E.message))}else l(new Q(j.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new Q(j.UNAVAILABLE,"Connection failed."));break;default:te(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{q(Bt,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(i);q(Bt,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",d,r,15)})}T_(e,n,r){const i=Ky(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Ab(),a=Sb(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=s.join("");q(Bt,`Creating RPC '${e}' stream ${i}: ${d}`,l);const h=o.createWebChannel(d,l);this.I_(h);let p=!1,m=!1;const E=new Jj({Yo:S=>{m?q(Bt,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(p||(q(Bt,`Opening RPC '${e}' stream ${i} transport.`),h.open(),p=!0),q(Bt,`RPC '${e}' stream ${i} sending:`,S),h.send(S))},Zo:()=>h.close()}),y=(S,_,v)=>{S.listen(_,I=>{try{v(I)}catch(D){setTimeout(()=>{throw D},0)}})};return y(h,mc.EventType.OPEN,()=>{m||(q(Bt,`RPC '${e}' stream ${i} transport opened.`),E.o_())}),y(h,mc.EventType.CLOSE,()=>{m||(m=!0,q(Bt,`RPC '${e}' stream ${i} transport closed`),E.a_(),this.E_(h))}),y(h,mc.EventType.ERROR,S=>{m||(m=!0,Ts(Bt,`RPC '${e}' stream ${i} transport errored. Name:`,S.name,"Message:",S.message),E.a_(new Q(j.UNAVAILABLE,"The operation could not be completed")))}),y(h,mc.EventType.MESSAGE,S=>{var _;if(!m){const v=S.data[0];ie(!!v,16349);const I=v,D=(I==null?void 0:I.error)||((_=I[0])==null?void 0:_.error);if(D){q(Bt,`RPC '${e}' stream ${i} received error:`,D);const O=D.status;let V=function(P){const x=mt[P];if(x!==void 0)return bR(x)}(O),T=D.message;V===void 0&&(V=j.INTERNAL,T="Unknown error status: "+O+" with message "+D.message),m=!0,E.a_(new Q(V,T)),h.close()}else q(Bt,`RPC '${e}' stream ${i} received:`,v),E.u_(v)}}),y(a,Ib.STAT_EVENT,S=>{S.stat===Ay.PROXY?q(Bt,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===Ay.NOPROXY&&q(Bt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.__()},0),E}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mC(){return typeof window<"u"?window:null}function Ah(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Np(t){return new ij(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI="PersistentStream";class yC{constructor(e,n,r,i,s,o,a,l){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new gC(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(ft(n.toString()),ft("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new Q(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return q(QI,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(q(QI,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Zj extends yC{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=aj(this.serializer,e),r=function(s){if(!("targetChange"in s))return oe.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?oe.min():o.readTime?rn(o.readTime):oe.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=jy(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=wf(l)?{documents:MR(s,l)}:{query:LR(s,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=kR(s,o.resumeToken);const u=Fy(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(oe.min())>0){a.readTime=dl(s,o.snapshotVersion.toTimestamp());const u=Fy(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=cj(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=jy(this.serializer),n.removeTarget=e,this.q_(n)}}class e9 extends yC{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ie(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ie(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ie(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=lj(e.writeResults,e.commitTime),r=rn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=jy(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Sf(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t9{}class n9 extends t9{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Q(j.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,Uy(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Q(j.UNKNOWN,s.toString())})}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,Uy(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Q(j.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class r9{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ft(n),this.aa=!1):q("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fo="RemoteStore";class i9{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{$o(this)&&(q(Fo,"Restarting streams for network reachability change."),await async function(l){const u=re(l);u.Ea.add(4),await kl(u),u.Ra.set("Unknown"),u.Ea.delete(4),await Gu(u)}(this))})}),this.Ra=new r9(r,i)}}async function Gu(t){if($o(t))for(const e of t.da)await e(!0)}async function kl(t){for(const e of t.da)await e(!1)}function Op(t,e){const n=re(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),nw(n)?tw(n):Nl(n).O_()&&ew(n,e))}function fl(t,e){const n=re(t),r=Nl(n);n.Ia.delete(e),r.O_()&&vC(n,e),n.Ia.size===0&&(r.O_()?r.L_():$o(n)&&n.Ra.set("Unknown"))}function ew(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(oe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Nl(t).Y_(e)}function vC(t,e){t.Va.Ue(e),Nl(t).Z_(e)}function tw(t){t.Va=new ej({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Nl(t).start(),t.Ra.ua()}function nw(t){return $o(t)&&!Nl(t).x_()&&t.Ia.size>0}function $o(t){return re(t).Ea.size===0}function _C(t){t.Va=void 0}async function s9(t){t.Ra.set("Online")}async function o9(t){t.Ia.forEach((e,n)=>{ew(t,e)})}async function a9(t,e){_C(t),nw(t)?(t.Ra.ha(e),tw(t)):t.Ra.set("Unknown")}async function l9(t,e,n){if(t.Ra.set("Online"),e instanceof CR&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))}(t,e)}catch(r){q(Fo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Df(t,r)}else if(e instanceof Ih?t.Va.Ze(e):e instanceof RR?t.Va.st(e):t.Va.tt(e),!n.isEqual(oe.min()))try{const r=await aC(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Va.Tt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.Ia.get(u);d&&s.Ia.set(u,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const d=s.Ia.get(l);if(!d)return;s.Ia.set(l,d.withResumeToken(dt.EMPTY_BYTE_STRING,d.snapshotVersion)),vC(s,l);const h=new ri(d.target,l,u,d.sequenceNumber);ew(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){q(Fo,"Failed to raise snapshot:",r),await Df(t,r)}}async function Df(t,e,n){if(!Ls(e))throw e;t.Ea.add(1),await kl(t),t.Ra.set("Offline"),n||(n=()=>aC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{q(Fo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Gu(t)})}function wC(t,e){return e().catch(n=>Df(t,n,e))}async function Dl(t){const e=re(t),n=Ps(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:wo;for(;c9(e);)try{const i=await Kj(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,u9(e,i)}catch(i){await Df(e,i)}EC(e)&&TC(e)}function c9(t){return $o(t)&&t.Ta.length<10}function u9(t,e){t.Ta.push(e);const n=Ps(t);n.O_()&&n.X_&&n.ea(e.mutations)}function EC(t){return $o(t)&&!Ps(t).x_()&&t.Ta.length>0}function TC(t){Ps(t).start()}async function d9(t){Ps(t).ra()}async function h9(t){const e=Ps(t);for(const n of t.Ta)e.ea(n.mutations)}async function f9(t,e,n){const r=t.Ta.shift(),i=$_.from(r,e,n);await wC(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Dl(t)}async function p9(t,e){e&&Ps(t).X_&&await async function(r,i){if(function(o){return J5(o)&&o!==j.ABORTED}(i.code)){const s=r.Ta.shift();Ps(r).B_(),await wC(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Dl(r)}}(t,e),EC(t)&&TC(t)}async function YI(t,e){const n=re(t);n.asyncQueue.verifyOperationInProgress(),q(Fo,"RemoteStore received new credentials");const r=$o(n);n.Ea.add(3),await kl(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Gu(n)}async function Gy(t,e){const n=re(t);e?(n.Ea.delete(2),await Gu(n)):e||(n.Ea.add(2),await kl(n),n.Ra.set("Unknown"))}function Nl(t){return t.ma||(t.ma=function(n,r,i){const s=re(n);return s.sa(),new Zj(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:s9.bind(null,t),t_:o9.bind(null,t),r_:a9.bind(null,t),H_:l9.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),nw(t)?tw(t):t.Ra.set("Unknown")):(await t.ma.stop(),_C(t))})),t.ma}function Ps(t){return t.fa||(t.fa=function(n,r,i){const s=re(n);return s.sa(),new e9(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:d9.bind(null,t),r_:p9.bind(null,t),ta:h9.bind(null,t),na:f9.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Dl(t)):(await t.fa.stop(),t.Ta.length>0&&(q(Fo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ar,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new rw(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vp(t,e){if(ft("AsyncQueue",`${e}: ${t}`),Ls(t))return new Q(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{static emptySet(e){return new Na(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||J.comparator(n.key,r.key):(n,r)=>J.comparator(n.key,r.key),this.keyedMap=gc(),this.sortedSet=new $e(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Na)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Na;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(){this.ga=new $e(J.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):te(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class pl{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new pl(e,n,Na.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Pp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m9{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class g9{constructor(){this.queries=XI(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=re(n),s=i.queries;i.queries=XI(),s.forEach((o,a)=>{for(const l of a.Sa)l.onError(r)})})(this,new Q(j.ABORTED,"Firestore shutting down"))}}function XI(){return new Ei(t=>fR(t),Pp)}async function iw(t,e){const n=re(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new m9,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Vp(o,`Initialization of query '${sa(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&ow(n)}async function sw(t,e){const n=re(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function y9(t,e){const n=re(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.Sa)a.Fa(i)&&(r=!0);o.wa=i}}r&&ow(n)}function v9(t,e,n){const r=re(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function ow(t){t.Ca.forEach(e=>{e.next()})}var Qy,ZI;(ZI=Qy||(Qy={})).Ma="default",ZI.Cache="cache";class aw{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new pl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=pl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Qy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e){this.key=e}}class SC{constructor(e){this.key=e}}class _9{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ge(),this.mutatedKeys=ge(),this.eu=mR(e),this.tu=new Na(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new JI,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{const p=i.get(d),m=Wu(this.query,h)?h:null,E=!!p&&this.mutatedKeys.has(p.key),y=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let S=!1;p&&m?p.data.isEqual(m.data)?E!==y&&(r.track({type:3,doc:m}),S=!0):this.su(p,m)||(r.track({type:2,doc:m}),S=!0,(l&&this.eu(m,l)>0||u&&this.eu(m,u)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),S=!0):p&&!m&&(r.track({type:1,doc:p}),S=!0,(l||u)&&(a=!0)),S&&(m?(o=o.add(m),s=y?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{tu:o,iu:r,Cs:a,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((d,h)=>function(m,E){const y=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te(20277,{Rt:S})}};return y(m)-y(E)}(d.type,h.type)||this.eu(d.doc,h.doc)),this.ou(r),i=i??!1;const a=n&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new pl(this.query,e.tu,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new JI,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ge(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new SC(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new IC(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=ge();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return pl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Ol="SyncEngine";class w9{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class E9{constructor(e){this.key=e,this.hu=!1}}class T9{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Ei(a=>fR(a),Pp),this.Iu=new Map,this.Eu=new Set,this.du=new $e(J.comparator),this.Au=new Map,this.Ru=new G_,this.Vu={},this.mu=new Map,this.fu=Lo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function I9(t,e,n=!0){const r=Mp(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await AC(r,e,n,!0),i}async function S9(t,e){const n=Mp(t);await AC(n,e,!0,!1)}async function AC(t,e,n,r){const i=await Rf(t.localStore,Dn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await lw(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Op(t.remoteStore,i),a}async function lw(t,e,n,r,i){t.pu=(h,p,m)=>async function(y,S,_,v){let I=S.view.ru(_);I.Cs&&(I=await Wy(y.localStore,S.query,!1).then(({documents:T})=>S.view.ru(T,I)));const D=v&&v.targetChanges.get(S.targetId),O=v&&v.targetMismatches.get(S.targetId)!=null,V=S.view.applyChanges(I,y.isPrimaryClient,D,O);return Yy(y,S.targetId,V.au),V.snapshot}(t,h,p,m);const s=await Wy(t.localStore,e,!0),o=new _9(e,s.Qs),a=o.ru(s.documents),l=Ku.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);Yy(t,n,u.au);const d=new w9(e,n,o);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function A9(t,e,n){const r=re(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!Pp(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await hl(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&fl(r.remoteStore,i.targetId),ml(r,i.targetId)}).catch(Ms)):(ml(r,i.targetId),await hl(r.localStore,i.targetId,!0))}async function P9(t,e){const n=re(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),fl(n.remoteStore,r.targetId))}async function x9(t,e,n){const r=hw(t);try{const i=await function(o,a){const l=re(o),u=De.now(),d=a.reduce((m,E)=>m.add(E.key),ge());let h,p;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let E=Rn(),y=ge();return l.Ns.getEntries(m,d).next(S=>{E=S,E.forEach((_,v)=>{v.isValidDocument()||(y=y.add(_))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,E)).next(S=>{h=S;const _=[];for(const v of a){const I=Q5(v,h.get(v.key).overlayedDocument);I!=null&&_.push(new Ti(v.key,I,rR(I.value.mapValue),Gt.exists(!0)))}return l.mutationQueue.addMutationBatch(m,u,_,a)}).next(S=>{p=S;const _=S.applyToLocalDocumentSet(h,y);return l.documentOverlayCache.saveOverlays(m,S.batchId,_)})}).then(()=>({batchId:p.batchId,changes:yR(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Vu[o.currentUser.toKey()];u||(u=new $e(he)),u=u.insert(a,l),o.Vu[o.currentUser.toKey()]=u}(r,i.batchId,n),await Us(r,i.changes),await Dl(r.remoteStore)}catch(i){const s=Vp(i,"Failed to persist write");n.reject(s)}}async function PC(t,e){const n=re(t);try{const r=await Wj(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Au.get(s);o&&(ie(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?ie(o.hu,14607):i.removedDocuments.size>0&&(ie(o.hu,42227),o.hu=!1))}),await Us(n,r,e)}catch(r){await Ms(r)}}function e1(t,e,n){const r=re(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,o)=>{const a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=re(o);l.onlineState=a;let u=!1;l.queries.forEach((d,h)=>{for(const p of h.Sa)p.va(a)&&(u=!0)}),u&&ow(l)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function b9(t,e,n){const r=re(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new $e(J.comparator);o=o.insert(s,ut.newNoDocument(s,oe.min()));const a=ge().add(s),l=new Hu(oe.min(),new Map,new $e(he),o,a);await PC(r,l),r.du=r.du.remove(s),r.Au.delete(e),dw(r)}else await hl(r.localStore,e,!1).then(()=>ml(r,e,n)).catch(Ms)}async function R9(t,e){const n=re(t),r=e.batch.batchId;try{const i=await qj(n.localStore,e);uw(n,r,null),cw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Us(n,i)}catch(i){await Ms(i)}}async function C9(t,e,n){const r=re(t);try{const i=await function(o,a){const l=re(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return l.mutationQueue.lookupMutationBatch(u,a).next(h=>(ie(h!==null,37113),d=h.keys(),l.mutationQueue.removeMutationBatch(u,h))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>l.localDocuments.getDocuments(u,d))})}(r.localStore,e);uw(r,e,n),cw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Us(r,i)}catch(i){await Ms(i)}}function cw(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function uw(t,e,n){const r=re(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function ml(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||xC(t,r)})}function xC(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(fl(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),dw(t))}function Yy(t,e,n){for(const r of n)r instanceof IC?(t.Ru.addReference(r.key,e),k9(t,r)):r instanceof SC?(q(Ol,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||xC(t,r.key)):te(19791,{wu:r})}function k9(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(q(Ol,"New document in limbo: "+n),t.Eu.add(r),dw(t))}function dw(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new J(Re.fromString(e)),r=t.fu.next();t.Au.set(r,new E9(n)),t.du=t.du.insert(n,r),Op(t.remoteStore,new ri(Dn(qu(n.path)),r,"TargetPurposeLimboResolution",pn.ce))}}async function Us(t,e,n){const r=re(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{o.push(r.pu(l,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const h=u?!u.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){i.push(u);const h=J_.As(l.targetId,u);s.push(h)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(l,u){const d=re(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>M.forEach(u,p=>M.forEach(p.Es,m=>d.persistence.referenceDelegate.addReference(h,p.targetId,m)).next(()=>M.forEach(p.ds,m=>d.persistence.referenceDelegate.removeReference(h,p.targetId,m)))))}catch(h){if(!Ls(h))throw h;q(X_,"Failed to update sequence numbers: "+h)}for(const h of u){const p=h.targetId;if(!h.fromCache){const m=d.Ms.get(p),E=m.snapshotVersion,y=m.withLastLimboFreeSnapshotVersion(E);d.Ms=d.Ms.insert(p,y)}}}(r.localStore,s))}async function D9(t,e){const n=re(t);if(!n.currentUser.isEqual(e)){q(Ol,"User change. New user:",e.toKey());const r=await oC(n.localStore,e);n.currentUser=e,function(s,o){s.mu.forEach(a=>{a.forEach(l=>{l.reject(new Q(j.CANCELLED,o))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Us(n,r.Ls)}}function N9(t,e){const n=re(t),r=n.Au.get(e);if(r&&r.hu)return ge().add(r.key);{let i=ge();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const a=n.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}async function O9(t,e){const n=re(t),r=await Wy(n.localStore,e.query,!0),i=e.view.cu(r);return n.isPrimaryClient&&Yy(n,e.targetId,i.au),i}async function V9(t,e){const n=re(t);return cC(n.localStore,e).then(r=>Us(n,r))}async function M9(t,e,n,r){const i=re(t),s=await function(a,l){const u=re(a),d=re(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.er(h,l).next(p=>p?u.localDocuments.getDocuments(h,p):M.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await Dl(i.remoteStore):n==="acknowledged"||n==="rejected"?(uw(i,e,r||null),cw(i,e),function(a,l){re(re(a).mutationQueue).ir(l)}(i.localStore,e)):te(6720,"Unknown batchState",{Su:n}),await Us(i,s)):q(Ol,"Cannot apply mutation batch with id: "+e)}async function L9(t,e){const n=re(t);if(Mp(n),hw(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await t1(n,r.toArray());n.gu=!0,await Gy(n.remoteStore,!0);for(const s of i)Op(n.remoteStore,s)}else if(e===!1&&n.gu!==!1){const r=[];let i=Promise.resolve();n.Iu.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(ml(n,o),hl(n.localStore,o,!0))),fl(n.remoteStore,o)}),await i,await t1(n,r),function(o){const a=re(o);a.Au.forEach((l,u)=>{fl(a.remoteStore,u)}),a.Ru.Jr(),a.Au=new Map,a.du=new $e(J.comparator)}(n),n.gu=!1,await Gy(n.remoteStore,!1)}}async function t1(t,e,n){const r=re(t),i=[],s=[];for(const o of e){let a;const l=r.Iu.get(o);if(l&&l.length!==0){a=await Rf(r.localStore,Dn(l[0]));for(const u of l){const d=r.Tu.get(u),h=await O9(r,d);h.snapshot&&s.push(h.snapshot)}}else{const u=await lC(r.localStore,o);a=await Rf(r.localStore,u),await lw(r,bC(u),o,!1,a.resumeToken)}i.push(a)}return r.Pu.H_(s),i}function bC(t){return dR(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function F9(t){return function(n){return re(re(n).persistence).Ts()}(re(t).localStore)}async function U9(t,e,n,r){const i=re(t);if(i.gu)return void q(Ol,"Ignoring unexpected query state notification.");const s=i.Iu.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await cC(i.localStore,pR(s[0])),a=Hu.createSynthesizedRemoteEventForCurrentChange(e,n==="current",dt.EMPTY_BYTE_STRING);await Us(i,o,a);break}case"rejected":await hl(i.localStore,e,!0),ml(i,e,r);break;default:te(64155,n)}}async function j9(t,e,n){const r=Mp(t);if(r.gu){for(const i of e){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){q(Ol,"Adding an already active target "+i);continue}const s=await lC(r.localStore,i),o=await Rf(r.localStore,s);await lw(r,bC(s),o.targetId,!1,o.resumeToken),Op(r.remoteStore,o)}for(const i of n)r.Iu.has(i)&&await hl(r.localStore,i,!1).then(()=>{fl(r.remoteStore,i),ml(r,i)}).catch(Ms)}}function Mp(t){const e=re(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=PC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=N9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=b9.bind(null,e),e.Pu.H_=y9.bind(null,e.eventManager),e.Pu.yu=v9.bind(null,e.eventManager),e}function hw(t){const e=re(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=R9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=C9.bind(null,e),e}class Iu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Np(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return sC(this.persistence,new iC,e.initialUser,this.serializer)}Cu(e){return new Q_(Dp.mi,this.serializer)}Du(e){return new pC}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Iu.provider={build:()=>new Iu};class B9 extends Iu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ie(this.persistence.referenceDelegate instanceof bf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new XR(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?qt.withCacheSize(this.cacheSizeBytes):qt.DEFAULT;return new Q_(r=>bf.mi(r,n),this.serializer)}}class RC extends Iu{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await hw(this.xu.syncEngine),await Dl(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return sC(this.persistence,new iC,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new XR(r,e.asyncQueue,n)}Mu(e,n){const r=new X6(n,this.persistence);return new J6(e.asyncQueue,r)}Cu(e){const n=rC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?qt.withCacheSize(this.cacheSizeBytes):qt.DEFAULT;return new Y_(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,mC(),Ah(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new pC}}class $9 extends RC{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof tg&&(this.sharedClientState.syncEngine={Co:M9.bind(null,n),vo:U9.bind(null,n),Fo:j9.bind(null,n),Ts:F9.bind(null,n),Do:V9.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji(async r=>{await L9(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Du(e){const n=mC();if(!tg.v(n))throw new Q(j.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=rC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new tg(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Su{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>e1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=D9.bind(null,this.syncEngine),await Gy(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new g9}()}createDatastore(e){const n=Np(e.databaseInfo.databaseId),r=function(s){return new Xj(s)}(e.databaseInfo);return function(s,o,a,l){return new n9(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new i9(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>e1(this.syncEngine,n,0),function(){return GI.v()?new GI:new Gj}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,d){const h=new T9(i,s,o,a,l,u);return d&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=re(i);q(Fo,"RemoteStore shutting down."),s.Ea.add(5),await kl(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Su.provider={build:()=>new Su};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ft("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs="FirestoreClient";class z9{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=zt.UNAUTHENTICATED,this.clientId=yp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{q(xs,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(q(xs,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ar;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Vp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function rg(t,e){t.asyncQueue.verifyOperationInProgress(),q(xs,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await oC(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function n1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await pw(t);q(xs,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>YI(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>YI(e.remoteStore,i)),t._onlineComponents=e}async function pw(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){q(xs,"Using user provided OfflineComponentProvider");try{await rg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===j.FAILED_PRECONDITION||i.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Ts("Error using user provided cache. Falling back to memory cache: "+n),await rg(t,new Iu)}}else q(xs,"Using default OfflineComponentProvider"),await rg(t,new B9(void 0));return t._offlineComponents}async function mw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(q(xs,"Using user provided OnlineComponentProvider"),await n1(t,t._uninitializedComponentsProvider._online)):(q(xs,"Using default OnlineComponentProvider"),await n1(t,new Su))),t._onlineComponents}function CC(t){return pw(t).then(e=>e.persistence)}function q9(t){return pw(t).then(e=>e.localStore)}function kC(t){return mw(t).then(e=>e.remoteStore)}function W9(t){return mw(t).then(e=>e.syncEngine)}async function Nf(t){const e=await mw(t),n=e.eventManager;return n.onListen=I9.bind(null,e.syncEngine),n.onUnlisten=A9.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=S9.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=P9.bind(null,e.syncEngine),n}function H9(t){return t.asyncQueue.enqueue(async()=>{const e=await CC(t),n=await kC(t);return e.setNetworkEnabled(!0),function(i){const s=re(i);return s.Ea.delete(0),Gu(s)}(n)})}function K9(t){return t.asyncQueue.enqueue(async()=>{const e=await CC(t),n=await kC(t);return e.setNetworkEnabled(!1),async function(i){const s=re(i);s.Ea.add(0),await kl(s),s.Ra.set("Offline")}(n)})}function G9(t,e){const n=new ar;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await function(u,d){const h=re(u);return h.persistence.runTransaction("read document","readonly",p=>h.localDocuments.getDocument(p,d))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new Q(j.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=Vp(a,`Failed to get document '${s} from cache`);o.reject(l)}}(await q9(t),e,n)),n.promise}function Q9(t,e,n={}){const r=new ar;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const d=new fw({next:p=>{d.Nu(),o.enqueueAndForget(()=>sw(s,h));const m=p.docs.has(a);!m&&p.fromCache?u.reject(new Q(j.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&l&&l.source==="server"?u.reject(new Q(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),h=new aw(qu(a.path),d,{includeMetadataChanges:!0,qa:!0});return iw(s,h)}(await Nf(t),t.asyncQueue,e,n,r)),r.promise}function Y9(t,e,n={}){const r=new ar;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const d=new fw({next:p=>{d.Nu(),o.enqueueAndForget(()=>sw(s,h)),p.fromCache&&l.source==="server"?u.reject(new Q(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),h=new aw(a,d,{includeMetadataChanges:!0,qa:!0});return iw(s,h)}(await Nf(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J9="firestore.googleapis.com",i1=!0;class s1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Q(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=J9,this.ssl=i1}else this.host=e.host,this.ssl=e.ssl??i1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=KR;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<JR)throw new Q(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Cb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=DC(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Q(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Q(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Q(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gw{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new s1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Q(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Q(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new s1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new xb;switch(r.type){case"firstParty":return new $6(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Q(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=r1.get(n);r&&(q("ComponentProvider","Removing Datastore"),r1.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Br(this.firestore,e,this._query)}}class Xe{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new oi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xe(this.firestore,e,this._key)}toJSON(){return{type:Xe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Bu(n,Xe._jsonSchema))return new Xe(e,r||null,new J(Re.fromString(n.referencePath)))}}Xe._jsonSchemaVersion="firestore/documentReference/1.0",Xe._jsonSchema={type:yt("string",Xe._jsonSchemaVersion),referencePath:yt("string")};class oi extends Br{constructor(e,n,r){super(e,n,qu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xe(this.firestore,null,new J(e))}withConverter(e){return new oi(this.firestore,e,this._path)}}function ke(t,e,...n){if(t=Ze(t),Rb("collection","path",e),t instanceof gw){const r=Re.fromString(e,...n);return QT(r),new oi(t,null,r)}{if(!(t instanceof Xe||t instanceof oi))throw new Q(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Re.fromString(e,...n));return QT(r),new oi(t.firestore,null,r)}}function Ie(t,e,...n){if(t=Ze(t),arguments.length===1&&(e=yp.newId()),Rb("doc","path",e),t instanceof gw){const r=Re.fromString(e,...n);return GT(r),new Xe(t,null,new J(r))}{if(!(t instanceof Xe||t instanceof oi))throw new Q(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Re.fromString(e,...n));return GT(r),new Xe(t.firestore,t instanceof oi?t.converter:null,new J(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1="AsyncQueue";class a1{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new gC(this,"async_queue_retry"),this._c=()=>{const r=Ah();r&&q(o1,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Ah();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Ah();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new ar;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ls(e))throw e;q(o1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,ft("INTERNAL UNHANDLED ERROR: ",l1(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=rw.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&te(47125,{Pc:l1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function l1(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c1(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class wn extends gw{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new a1,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new a1(e),this._firestoreClient=void 0,await e}}}function NC(t,e,n){n||(n=_f);const r=fp(t,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(Ro(s,e))return i;throw new Q(j.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Q(j.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<JR)throw new Q(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Os(e.host)&&y_(e.host),r.initialize({options:e,instanceIdentifier:n})}function js(t){if(t._terminated)throw new Q(j.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||OC(t),t._firestoreClient}function OC(t){var r,i,s;const e=t._freezeSettings(),n=function(a,l,u,d){return new P5(a,l,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,DC(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new z9(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}function X9(t,e){Ts("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return VC(t,Su.provider,{build:r=>new RC(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function Z9(t){Ts("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();VC(t,Su.provider,{build:n=>new $9(n,e.cacheSizeBytes)})}function VC(t,e,n){if((t=Et(t,wn))._firestoreClient||t._terminated)throw new Q(j.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new Q(j.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},OC(t)}function yw(t){return H9(js(t=Et(t,wn)))}function vw(t){return K9(js(t=Et(t,wn)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xn(dt.fromBase64String(e))}catch(n){throw new Q(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new xn(dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:xn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Bu(e,xn._jsonSchema))return xn.fromBase64String(e.bytes)}}xn._jsonSchemaVersion="firestore/bytes/1.0",xn._jsonSchema={type:yt("string",xn._jsonSchemaVersion),bytes:yt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Q(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Je(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Q(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Q(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return he(this._lat,e._lat)||he(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:lr._jsonSchemaVersion}}static fromJSON(e){if(Bu(e,lr._jsonSchema))return new lr(e.latitude,e.longitude)}}lr._jsonSchemaVersion="firestore/geoPoint/1.0",lr._jsonSchema={type:yt("string",lr._jsonSchemaVersion),latitude:yt("number"),longitude:yt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:cr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Bu(e,cr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new cr(e.vectorValues);throw new Q(j.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}cr._jsonSchemaVersion="firestore/vectorValue/1.0",cr._jsonSchema={type:yt("string",cr._jsonSchemaVersion),vectorValues:yt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eB=/^__.*__$/;class tB{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ti(e,this.data,this.fieldMask,n,this.fieldTransforms):new Cl(e,this.data,n,this.fieldTransforms)}}class MC{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ti(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function LC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te(40011,{Ac:t})}}class _w{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new _w({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Of(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(LC(this.Ac)&&eB.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class nB{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Np(e)}Cc(e,n,r,i=!1){return new _w({Ac:e,methodName:n,Dc:r,path:Je.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Lp(t){const e=t._freezeSettings(),n=Np(t._databaseId);return new nB(t._databaseId,!!e.ignoreUndefinedProperties,n)}function FC(t,e,n,r,i,s={}){const o=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);Ew("Data must be an object, but it was:",o,r);const a=UC(r,o);let l,u;if(s.merge)l=new mn(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const h of s.mergeFields){const p=Jy(e,h,n);if(!o.contains(p))throw new Q(j.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);BC(d,p)||d.push(p)}l=new mn(d),u=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=o.fieldTransforms;return new tB(new Ht(a),l,u)}class Fp extends Yu{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Fp}}class ww extends Yu{_toFieldTransform(e){return new SR(e.path,new ll)}isEqual(e){return e instanceof ww}}function rB(t,e,n,r){const i=t.Cc(1,e,n);Ew("Data must be an object, but it was:",i,r);const s=[],o=Ht.empty();Fs(r,(l,u)=>{const d=Tw(e,l,n);u=Ze(u);const h=i.yc(d);if(u instanceof Fp)s.push(d);else{const p=Ju(u,h);p!=null&&(s.push(d),o.set(d,p))}});const a=new mn(s);return new MC(o,a,i.fieldTransforms)}function iB(t,e,n,r,i,s){const o=t.Cc(1,e,n),a=[Jy(e,r,n)],l=[i];if(s.length%2!=0)throw new Q(j.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(Jy(e,s[p])),l.push(s[p+1]);const u=[],d=Ht.empty();for(let p=a.length-1;p>=0;--p)if(!BC(u,a[p])){const m=a[p];let E=l[p];E=Ze(E);const y=o.yc(m);if(E instanceof Fp)u.push(m);else{const S=Ju(E,y);S!=null&&(u.push(m),d.set(m,S))}}const h=new mn(u);return new MC(d,h,o.fieldTransforms)}function sB(t,e,n,r=!1){return Ju(n,t.Cc(r?4:3,e))}function Ju(t,e){if(jC(t=Ze(t)))return Ew("Unsupported field value:",e,t),UC(t,e);if(t instanceof Yu)return function(r,i){if(!LC(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Ju(a,i.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Ze(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return z5(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=De.fromDate(r);return{timestampValue:dl(i.serializer,s)}}if(r instanceof De){const s=new De(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:dl(i.serializer,s)}}if(r instanceof lr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof xn)return{bytesValue:kR(i.serializer,r._byteString)};if(r instanceof Xe){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:W_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof cr)return function(o,a){return{mapValue:{fields:{[M_]:{stringValue:L_},[il]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Sc("VectorValues must only contain numeric values.");return j_(a.serializer,u)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${vp(r)}`)}(t,e)}function UC(t,e){const n={};return Gb(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fs(t,(r,i)=>{const s=Ju(i,e.mc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function jC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof De||t instanceof lr||t instanceof xn||t instanceof Xe||t instanceof Yu||t instanceof cr)}function Ew(t,e,n){if(!jC(n)||!kb(n)){const r=vp(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Jy(t,e,n){if((e=Ze(e))instanceof Qu)return e._internalPath;if(typeof e=="string")return Tw(t,e);throw Of("Field path arguments must be of type string or ",t,!1,void 0,n)}const oB=new RegExp("[~\\*/\\[\\]]");function Tw(t,e,n){if(e.search(oB)>=0)throw Of(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Qu(...e.split("."))._internalPath}catch{throw Of(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Of(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Q(j.INVALID_ARGUMENT,a+t+l)}function BC(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Xe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new aB(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Up("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class aB extends $C{data(){return super.data()}}function Up(t,e){return typeof e=="string"?Tw(t,e):e instanceof Qu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zC(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Q(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Iw{}class jp extends Iw{}function tt(t,e,...n){let r=[];e instanceof Iw&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof Bp).length,a=s.filter(l=>l instanceof Xu).length;if(o>1||o>0&&a>0)throw new Q(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Xu extends jp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Xu(e,n,r)}_apply(e){const n=this._parse(e);return qC(e._query,n),new Br(e.firestore,e.converter,Ly(e._query,n))}_parse(e){const n=Lp(e.firestore);return function(s,o,a,l,u,d,h){let p;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Q(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){d1(h,d);const E=[];for(const y of h)E.push(u1(l,s,y));p={arrayValue:{values:E}}}else p=u1(l,s,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||d1(h,d),p=sB(a,o,h,d==="in"||d==="not-in");return _e.create(u,d,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ct(t,e,n){const r=e,i=Up("where",t);return Xu._create(i,r,n)}class Bp extends Iw{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Bp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Oe.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)qC(o,l),o=Ly(o,l)}(e._query,n),new Br(e.firestore,e.converter,Ly(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class $p extends jp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new $p(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new Q(j.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Q(j.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Eu(s,o)}(e._query,this._field,this._direction);return new Br(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Rl(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Vr(t,e="asc"){const n=e,r=Up("orderBy",t);return $p._create(r,n)}class zp extends jp{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new zp(e,n,r)}_apply(e){return new Br(e.firestore,e.converter,Tf(e._query,this._limit,this._limitType))}}function Zu(t){return G6("limit",t),zp._create("limit",t,"F")}function u1(t,e,n){if(typeof(n=Ze(n))=="string"){if(n==="")throw new Q(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!hR(e)&&n.indexOf("/")!==-1)throw new Q(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Re.fromString(n));if(!J.isDocumentKey(r))throw new Q(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return _u(t,new J(r))}if(n instanceof Xe)return _u(t,n._key);throw new Q(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vp(n)}.`)}function d1(t,e){if(!Array.isArray(t)||t.length===0)throw new Q(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function qC(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Q(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Q(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class WC{convertValue(e,n="none"){switch(Ss(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(yi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw te(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Fs(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[il].arrayValue)==null?void 0:i.values)==null?void 0:s.map(o=>Qe(o.doubleValue));return new cr(n)}convertGeoPoint(e){return new lr(Qe(e.latitude),Qe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Sp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(yu(e));default:return null}}convertTimestamp(e){const n=gi(e);return new De(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Re.fromString(e);ie(BR(r),9688,{name:e});const i=new Is(r.get(1),r.get(3)),s=new J(r.popFirst(5));return i.isEqual(n)||ft(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HC(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class uo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ai extends $C{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new jc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Up("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Q(j.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ai._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ai._jsonSchemaVersion="firestore/documentSnapshot/1.0",ai._jsonSchema={type:yt("string",ai._jsonSchemaVersion),bundleSource:yt("string","DocumentSnapshot"),bundleName:yt("string"),bundle:yt("string")};class jc extends ai{data(e={}){return super.data(e)}}class ps{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new uo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new jc(this._firestore,this._userDataWriter,r.key,r,new uo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Q(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new jc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new uo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new jc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new uo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,d=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:lB(a.type),doc:l,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Q(j.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ps._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=yp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function lB(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(t){t=Et(t,Xe);const e=Et(t.firestore,wn);return Q9(js(e),t._key).then(n=>GC(e,t,n))}ps._jsonSchemaVersion="firestore/querySnapshot/1.0",ps._jsonSchema={type:yt("string",ps._jsonSchemaVersion),bundleSource:yt("string","QuerySnapshot"),bundleName:yt("string"),bundle:yt("string")};class qp extends WC{constructor(e){super(),this.firestore=e}convertBytes(e){return new xn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Xe(this.firestore,null,n)}}function KC(t){t=Et(t,Xe);const e=Et(t.firestore,wn),n=js(e),r=new qp(e);return G9(n,t._key).then(i=>new ai(e,r,t._key,i,new uo(i!==null&&i.hasLocalMutations,!0),t.converter))}function nt(t){t=Et(t,Br);const e=Et(t.firestore,wn),n=js(e),r=new qp(e);return zC(t._query),Y9(n,t._query).then(i=>new ps(e,r,t,i))}function gl(t,e,n){t=Et(t,Xe);const r=Et(t.firestore,wn),i=HC(t.converter,e,n);return ed(r,[FC(Lp(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Gt.none())])}function Kt(t,e,n,...r){t=Et(t,Xe);const i=Et(t.firestore,wn),s=Lp(i);let o;return o=typeof(e=Ze(e))=="string"||e instanceof Qu?iB(s,"updateDoc",t._key,e,n,r):rB(s,"updateDoc",t._key,e),ed(i,[o.toMutation(t._key,Gt.exists(!0))])}function rr(t){return ed(Et(t.firestore,wn),[new Rp(t._key,Gt.none())])}function bs(t,e){const n=Et(t.firestore,wn),r=Ie(t),i=HC(t.converter,e);return ed(n,[FC(Lp(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Gt.exists(!1))]).then(()=>r)}function Xy(t,...e){var l,u,d;t=Ze(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||c1(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(c1(e[r])){const h=e[r];e[r]=(l=h.next)==null?void 0:l.bind(h),e[r+1]=(u=h.error)==null?void 0:u.bind(h),e[r+2]=(d=h.complete)==null?void 0:d.bind(h)}let s,o,a;if(t instanceof Xe)o=Et(t.firestore,wn),a=qu(t._key.path),s={next:h=>{e[r]&&e[r](GC(o,t,h))},error:e[r+1],complete:e[r+2]};else{const h=Et(t,Br);o=Et(h.firestore,wn),a=h._query;const p=new qp(o);s={next:m=>{e[r]&&e[r](new ps(o,p,h,m))},error:e[r+1],complete:e[r+2]},zC(t._query)}return function(p,m,E,y){const S=new fw(y),_=new aw(m,S,E);return p.asyncQueue.enqueueAndForget(async()=>iw(await Nf(p),_)),()=>{S.Nu(),p.asyncQueue.enqueueAndForget(async()=>sw(await Nf(p),_))}}(js(o),a,i,s)}function ed(t,e){return function(r,i){const s=new ar;return r.asyncQueue.enqueueAndForget(async()=>x9(await W9(r),i,s)),s.promise}(js(t),e)}function GC(t,e,n){const r=n.docs.get(e._key),i=new qp(t);return new ai(t,i,e._key,r,new uo(n.hasPendingWrites,n.fromCache),e.converter)}function be(){return new ww("serverTimestamp")}(function(e,n=!0){(function(i){bl=i})(Pl),Co(new Es("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new wn(new j6(r.getProvider("auth-internal")),new z6(o,r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Q(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Is(u.options.projectId,d)}(o,i),o);return s={useFetchStreams:n,...s},a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Dr(qT,WT,e),Dr(qT,WT,"esm2020")})();const ig=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:WC,Bytes:xn,CollectionReference:oi,DocumentReference:Xe,DocumentSnapshot:ai,FieldPath:Qu,FieldValue:Yu,Firestore:wn,FirestoreError:Q,GeoPoint:lr,Query:Br,QueryCompositeFilterConstraint:Bp,QueryConstraint:jp,QueryDocumentSnapshot:jc,QueryFieldFilterConstraint:Xu,QueryLimitConstraint:zp,QueryOrderByConstraint:$p,QuerySnapshot:ps,SnapshotMetadata:uo,Timestamp:De,VectorValue:cr,_AutoId:yp,_ByteString:dt,_DatabaseId:Is,_DocumentKey:J,_EmptyAuthCredentialsProvider:xb,_FieldPath:Je,_cast:Et,_logWarn:Ts,_validateIsNotUsedTogether:Cb,addDoc:bs,collection:ke,deleteDoc:rr,disableNetwork:vw,doc:Ie,enableIndexedDbPersistence:X9,enableMultiTabIndexedDbPersistence:Z9,enableNetwork:yw,ensureFirestoreConfigured:js,executeWrite:ed,getDoc:xt,getDocFromCache:KC,getDocs:nt,initializeFirestore:NC,limit:Zu,onSnapshot:Xy,orderBy:Vr,query:tt,serverTimestamp:be,setDoc:gl,updateDoc:Kt,where:ct},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cB="type.googleapis.com/google.protobuf.Int64Value",uB="type.googleapis.com/google.protobuf.UInt64Value";function QC(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function Vf(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>Vf(e));if(typeof t=="function"||typeof t=="object")return QC(t,e=>Vf(e));throw new Error("Data cannot be encoded in JSON: "+t)}function yl(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case cB:case uB:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>yl(e)):typeof t=="function"||typeof t=="object"?QC(t,e=>yl(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class gn extends Ur{constructor(e,n,r){super(`${Sw}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,gn.prototype)}}function dB(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Mf(t,e){let n=dB(t),r=n,i;try{const s=e&&e.error;if(s){const o=s.status;if(typeof o=="string"){if(!h1[o])return new gn("internal","internal");n=h1[o],r=o}const a=s.message;typeof a=="string"&&(r=a),i=s.details,i!==void 0&&(i=yl(i))}}catch{}return n==="ok"?null:new gn(n,r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hB{constructor(e,n,r,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Pn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(s=>this.auth=s,()=>{}),this.messaging||r.get().then(s=>this.messaging=s,()=>{}),this.appCheck||i==null||i.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zy="us-central1",fB=/^data: (.*?)(?:\n|$)/;function pB(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new gn("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class mB{constructor(e,n,r,i,s=Zy,o=(...a)=>fetch(...a)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new hB(e,n,r,i),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(s);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=Zy}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function gB(t,e,n){const r=Os(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(y_(t.emulatorOrigin+"/backends"),bx("Functions",!0))}function yB(t,e,n){const r=i=>_B(t,e,i,{});return r.stream=(i,s)=>EB(t,e,i,s),r}function YC(t){return t.emulatorOrigin&&Os(t.emulatorOrigin)?"include":void 0}async function vB(t,e,n,r,i){n["Content-Type"]="application/json";let s;try{s=await r(t,{method:"POST",body:JSON.stringify(e),headers:n,credentials:YC(i)})}catch{return{status:0,json:null}}let o=null;try{o=await s.json()}catch{}return{status:s.status,json:o}}async function JC(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function _B(t,e,n,r){const i=t._url(e);return wB(t,i,n,r)}async function wB(t,e,n,r){n=Vf(n);const i={data:n},s=await JC(t,r),o=r.timeout||7e4,a=pB(o),l=await Promise.race([vB(e,i,s,t.fetchImpl,t),a.promise,t.cancelAllRequests]);if(a.cancel(),!l)throw new gn("cancelled","Firebase Functions instance was deleted.");const u=Mf(l.status,l.json);if(u)throw u;if(!l.json)throw new gn("internal","Response is not valid JSON object.");let d=l.json.data;if(typeof d>"u"&&(d=l.json.result),typeof d>"u")throw new gn("internal","Response is missing data field.");return{data:yl(d)}}function EB(t,e,n,r){const i=t._url(e);return TB(t,i,n,r||{})}async function TB(t,e,n,r){var p;n=Vf(n);const i={data:n},s=await JC(t,r);s["Content-Type"]="application/json",s.Accept="text/event-stream";let o;try{o=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(i),headers:s,signal:r==null?void 0:r.signal,credentials:YC(t)})}catch(m){if(m instanceof Error&&m.name==="AbortError"){const y=new gn("cancelled","Request was cancelled.");return{data:Promise.reject(y),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(y)}}}}}}const E=Mf(0,null);return{data:Promise.reject(E),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(E)}}}}}}let a,l;const u=new Promise((m,E)=>{a=m,l=E});(p=r==null?void 0:r.signal)==null||p.addEventListener("abort",()=>{const m=new gn("cancelled","Request was cancelled.");l(m)});const d=o.body.getReader(),h=IB(d,a,l,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const m=h.getReader();return{async next(){const{value:E,done:y}=await m.read();return{value:E,done:y}},async return(){return await m.cancel(),{done:!0,value:void 0}}}}},data:u}}function IB(t,e,n,r){const i=(o,a)=>{const l=o.match(fB);if(!l)return;const u=l[1];try{const d=JSON.parse(u);if("result"in d){e(yl(d.result));return}if("message"in d){a.enqueue(yl(d.message));return}if("error"in d){const h=Mf(0,d);a.error(h),n(h);return}}catch(d){if(d instanceof gn){a.error(d),n(d);return}}},s=new TextDecoder;return new ReadableStream({start(o){let a="";return l();async function l(){if(r!=null&&r.aborted){const u=new gn("cancelled","Request was cancelled");return o.error(u),n(u),Promise.resolve()}try{const{value:u,done:d}=await t.read();if(d){a.trim()&&i(a.trim(),o),o.close();return}if(r!=null&&r.aborted){const p=new gn("cancelled","Request was cancelled");o.error(p),n(p),await t.cancel();return}a+=s.decode(u,{stream:!0});const h=a.split(`
`);a=h.pop()||"";for(const p of h)p.trim()&&i(p.trim(),o);return l()}catch(u){const d=u instanceof gn?u:Mf(0,null);o.error(d),n(d)}}},cancel(){return t.cancel()}})}const f1="@firebase/functions",p1="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SB="auth-internal",AB="app-check-internal",PB="messaging-internal";function xB(t){const e=(n,{instanceIdentifier:r})=>{const i=n.getProvider("app").getImmediate(),s=n.getProvider(SB),o=n.getProvider(PB),a=n.getProvider(AB);return new mB(i,s,o,a,r)};Co(new Es(Sw,e,"PUBLIC").setMultipleInstances(!0)),Dr(f1,p1,t),Dr(f1,p1,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bB(t=Mx(),e=Zy){const r=fp(Ze(t),Sw).getImmediate({identifier:e}),i=QF("functions");return i&&RB(r,...i),r}function RB(t,e,n){gB(Ze(t),e,n)}function G$(t,e,n){return yB(Ze(t),e)}xB();const ev={apiKey:"AIzaSyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s",authDomain:"voda-c6abd.firebaseapp.com",projectId:"voda-c6abd",storageBucket:"voda-c6abd.appspot.com",messagingSenderId:"483702062341",appId:"1:483702062341:web:b1ff06ad175cb7ae428b6c"};console.log("🔥 Initializing Firebase with config:",{projectId:ev.projectId,authDomain:ev.authDomain,emulatorMode:!1});const Aw=Vx(ev),vr=V6(Aw),ne=NC(Aw,{experimentalAutoDetectLongPolling:!0}),CB=bB(Aw,"us-central1");console.log("✅ Firebase initialized successfully");const kB=async()=>{try{console.log("ℹ️ Offline persistence disabled (env flag or emulator mode)"),console.log("✅ Firestore features configured successfully")}catch(t){console.error("❌ Error configuring Firestore features:",t)}};setTimeout(kB,100);let to=0;const sg=3,DB=1e3,XC=async t=>{var e,n;if(console.error("🔥 Firestore connection error:",t),(t.code==="unavailable"||t.code==="failed-precondition"||(e=t.message)!=null&&e.includes("ERR_ABORTED")||(n=t.message)!=null&&n.includes("UNAVAILABLE"))&&to<sg){to++;const r=Math.min(DB*Math.pow(2,to-1),1e4);console.log(`🔄 Attempting to reconnect (${to}/${sg}) in ${r}ms...`);try{await vw(ne),await new Promise(i=>setTimeout(i,r)),await yw(ne),console.log("✅ Firestore reconnected successfully"),to=0}catch(i){console.error("❌ Failed to reconnect:",i),to>=sg&&(console.error("❌ Maximum reconnection attempts reached."),NB())}}},NB=()=>{const t=document.createElement("div");t.style.cssText=`
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #f8d7da;
    color: #721c24;
    padding: 20px;
    border-radius: 8px;
    border: 1px solid #f5c6cb;
    z-index: 10000;
    text-align: center;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    max-width: 400px;
  `,t.innerHTML=`
    <h3 style="margin: 0 0 10px 0;">مشكلة في الاتصال</h3>
    <p style="margin: 0 0 15px 0;">لا يمكن الاتصال بالخادم. يرجى التحقق من اتصال الإنترنت.</p>
    <button onclick="window.location.reload()" style="
      background: #dc3545;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
    ">إعادة تحميل الصفحة</button>
  `,document.body.appendChild(t),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},1e4)};window.addEventListener("online",async()=>{console.log("🌐 Network back online, enabling Firestore...");try{await yw(ne),to=0,console.log("✅ Firestore network enabled")}catch(t){console.error("❌ Failed to enable Firestore network:",t)}});window.addEventListener("offline",async()=>{console.log("🌐 Network offline, disabling Firestore network...");try{await vw(ne),console.log("✅ Firestore network disabled")}catch(t){console.error("❌ Failed to disable Firestore network:",t)}});window.addEventListener("unhandledrejection",t=>{var e,n,r,i,s,o;(((e=t.reason)==null?void 0:e.code)==="unavailable"||((n=t.reason)==null?void 0:n.code)==="failed-precondition"||(i=(r=t.reason)==null?void 0:r.message)!=null&&i.includes("ERR_ABORTED")||(o=(s=t.reason)==null?void 0:s.message)!=null&&o.includes("UNAVAILABLE"))&&(XC(t.reason),t.preventDefault())});console.log("Using Firebase Production Environment");const og=Object.freeze(Object.defineProperty({__proto__:null,auth:vr,db:ne,functions:CB,handleFirestoreError:XC},Symbol.toStringTag,{value:"Module"})),je=t=>t&&t.toDate?t.toDate():new Date,OB=t=>{if(t===null)return!1;const e=Object.getPrototypeOf(t);return e===Object.prototype||e===null},Lf=t=>{if(t===void 0)return;if(t===null)return null;if(Array.isArray(t))return t.map(n=>Lf(n)).filter(n=>n!==void 0);if(t instanceof Date||!OB(t))return t;const e={};for(const[n,r]of Object.entries(t)){const i=Lf(r);i!==void 0&&(e[n]=i)}return e},ag={async create(t){await gl(Ie(ne,"profiles",t.userId),{userId:t.userId,shopId:t.shopId,role:t.role,fullName:t.fullName,phone:t.phone,createdAt:be()})},async getById(t){const e=Ie(ne,"profiles",t),n=await xt(e);if(n.exists()){const r=n.data();return{userId:n.id,...r,createdAt:je(r.createdAt)}}return null},async update(t,e){const n=Ie(ne,"profiles",t);await Kt(n,{...e,updatedAt:be()})},async getByShopId(t){const e=tt(ke(ne,"profiles"),ct("shopId","==",t));return(await nt(e)).docs.map(r=>{const i=r.data();return{userId:r.id,...i,createdAt:je(i.createdAt)}})}},m1={async create(t){return(await bs(ke(ne,"referrals"),{...t,createdAt:be(),updatedAt:be()})).id},async getByReferrerId(t){try{const e=tt(ke(ne,"referrals"),ct("referrerId","==",t),Vr("createdAt","desc"));return(await nt(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:je(r.data().createdAt),updatedAt:je(r.data().updatedAt)}))}catch(e){if(String((e==null?void 0:e.message)||"").includes("requires an index")){const r=tt(ke(ne,"referrals"),ct("referrerId","==",t));return(await nt(r)).docs.map(s=>({id:s.id,...s.data(),createdAt:je(s.data().createdAt),updatedAt:je(s.data().updatedAt)})).sort((s,o)=>{var a,l,u,d;return(((l=(a=o.createdAt)==null?void 0:a.getTime)==null?void 0:l.call(a))||0)-(((d=(u=s.createdAt)==null?void 0:u.getTime)==null?void 0:d.call(u))||0)})}throw e}},async getByReferralCode(t){const e=tt(ke(ne,"referrals"),ct("referralCode","==",t),Zu(1)),n=await nt(e);if(n.empty)return null;const r=n.docs[0];return{id:r.id,...r.data(),createdAt:je(r.data().createdAt),updatedAt:je(r.data().updatedAt)}},async updateStatus(t,e){await Kt(Ie(ne,"referrals",t),{status:e,updatedAt:be()})},generateReferralCode(t){const e=Date.now().toString(36);return`REF_${t.slice(-6)}_${e}`.toUpperCase()}},Q$={async create(t){return(await bs(ke(ne,"merchantWallets"),{...t,transferLimit:t.transferLimit||2e5,withdrawLimit:t.withdrawLimit||2e5,transferUsage:t.transferUsage||0,withdrawUsage:t.withdrawUsage||0,createdAt:be(),updatedAt:be()})).id},async getByMerchantId(t){const e=tt(ke(ne,"merchantWallets"),ct("merchantUserId","==",t),Vr("createdAt","desc"));return(await nt(e)).docs.map(r=>{const i=r.data();return{id:r.id,...i,transferLimit:i.transferLimit||2e5,withdrawLimit:i.withdrawLimit||2e5,transferUsage:i.transferUsage||0,withdrawUsage:i.withdrawUsage||0,createdAt:je(i.createdAt),updatedAt:je(i.updatedAt)}})},async getById(t){const e=Ie(ne,"merchantWallets",t),n=await xt(e);if(n.exists()){const r=n.data();return{id:n.id,...r,transferLimit:r.transferLimit||2e5,withdrawLimit:r.withdrawLimit||2e5,transferUsage:r.transferUsage||0,withdrawUsage:r.withdrawUsage||0,createdAt:je(r.createdAt),updatedAt:je(r.updatedAt)}}return null},async update(t,e){const n=Ie(ne,"merchantWallets",t);await Kt(n,{...e,updatedAt:be()})},async updateUsage(t,e,n){const r=Ie(ne,"merchantWallets",t),i={updatedAt:be()};e!==void 0&&(i.transferUsage=e),n!==void 0&&(i.withdrawUsage=n),await Kt(r,i)},async resetDailyUsage(t){const n=(await this.getByMerchantId(t)).map(r=>this.updateUsage(r.id,0,0));await Promise.all(n)},async delete(t){const e=Ie(ne,"merchantWallets",t);await rr(e)}},VB={async create(t){try{console.log("Creating transaction:",t);const{calculateCommission:e,calculateProfit:n}=await Se(async()=>{const{calculateCommission:u,calculateProfit:d}=await Promise.resolve().then(()=>WB);return{calculateCommission:u,calculateProfit:d}},void 0),r=t.commission!==void 0?t.commission:e(t.amount,t.txnType),i=n(t.amount,t.txnType),s=t.merchantUserId||t.createdBy;s||console.warn("⚠️ لا يوجد merchantUserId أو createdBy في بيانات المعاملة، سيتم إنشاء المعاملة بدون ربط مستخدم.");const o=Object.fromEntries(Object.entries(t).filter(([u,d])=>d!==void 0)),a={...o,merchantUserId:s,commission:r,profit:i,createdAt:o.createdAt?o.createdAt instanceof Date?o.createdAt:new Date(String(o.createdAt)):be(),uploadedAt:be(),confirmedAt:o.confirmedAt?o.confirmedAt instanceof Date?o.confirmedAt:new Date(String(o.confirmedAt)):null},l=await bs(ke(ne,"transactions"),a);if(console.log("Transaction created with ID:",l.id,"Profit:",i),i>0){const{ProfitService:u}=await Se(async()=>{const{ProfitService:d}=await import("./profitService-xetwzlHl.js");return{ProfitService:d}},__vite__mapDeps([0,1]));u.addProfit(i),console.log("✅ تم إضافة الربح إلى النظام:",i,"جنيه")}return await this.updateLineUsage(t.lineId,t.amount),l.id}catch(e){throw console.error("Error creating transaction:",e),e}},async updateLineUsage(t,e){try{console.log("Updating line usage:",{lineId:t,amount:e})}catch(n){console.error("Error updating line usage:",n)}},async getByShopId(t){const e=tt(ke(ne,"transactions"),ct("shopId","==",t),Vr("createdAt","desc"));return(await nt(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:je(r.data().createdAt),confirmedAt:r.data().confirmedAt?je(r.data().confirmedAt):void 0}))},async getByMerchantId(t){const e=tt(ke(ne,"transactions"),ct("merchantUserId","==",t),Vr("createdAt","desc"));return(await nt(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:je(r.data().createdAt),confirmedAt:r.data().confirmedAt?je(r.data().confirmedAt):void 0}))},async getByUserId(t){const e=tt(ke(ne,"transactions"),ct("merchantUserId","==",t),Vr("createdAt","desc"));return(await nt(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:je(r.data().createdAt),confirmedAt:r.data().confirmedAt?je(r.data().confirmedAt):void 0}))},async updateStatus(t,e,n){const r=Ie(ne,"transactions",t);await Kt(r,{status:e,confirmedAt:n?n instanceof Date?n:new Date(String(n)):null})}},Y$={async log(t,e,n,r,i){await bs(ke(ne,"auditLogs"),{actor:i,action:t,entity:e,entityId:n,meta:r,createdAt:be()})},async getLogs(t=100){const e=tt(ke(ne,"auditLogs"),Vr("createdAt","desc"),Zu(t));return(await nt(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:je(r.data().createdAt)}))},async getDeletedTransactions(){try{const t=tt(ke(ne,"deletedTransactions"),Vr("deletedAt","desc"));return(await nt(t)).docs.map(n=>({id:n.id,...n.data(),deletedAt:je(n.data().deletedAt)}))}catch(t){return console.error("Error getting deleted transactions:",t),[]}},async getDeletedTransactionsByUser(t){try{const e=tt(ke(ne,"deletedTransactions"),ct("userId","==",t),Vr("deletedAt","desc"));return(await nt(e)).docs.map(r=>({id:r.id,...r.data(),deletedAt:je(r.data().deletedAt)}))}catch(e){if(String((e==null?void 0:e.message)||"").includes("requires an index"))try{const r=tt(ke(ne,"deletedTransactions"),ct("userId","==",t));return(await nt(r)).docs.map(o=>({id:o.id,...o.data(),deletedAt:je(o.data().deletedAt)})).sort((o,a)=>{const l=(o.deletedAt instanceof Date?o.deletedAt:new Date(o.deletedAt)).getTime();return(a.deletedAt instanceof Date?a.deletedAt:new Date(a.deletedAt)).getTime()-l})}catch(r){return console.error("Fallback error getting deleted transactions by user:",r),[]}return console.error("Error getting deleted transactions by user:",e),[]}},async saveDeletedTransaction(t){try{if(console.log("🗑️ محاولة حفظ معاملة محذوفة في Firebase:",t.id),!t.userId)throw new Error("معرف المستخدم مطلوب لحفظ المعاملة المحذوفة");if(!t.originalTransactionId)throw new Error("معرف المعاملة الأصلي مطلوب");const e={...t,deletedAt:be(),userId:t.userId,originalTransactionId:t.originalTransactionId,type:t.type||"unknown",amount:t.amount||0,status:t.status||"deleted"};console.log("📝 بيانات المعاملة المحذوفة للحفظ:",e);let n=3,r;for(;n>0;)try{const i=await bs(ke(ne,"deletedTransactions"),e);console.log("✅ تم حفظ المعاملة المحذوفة بنجاح، معرف الوثيقة:",i.id);return}catch(i){r=i,n--,console.warn(`⚠️ فشل في حفظ المعاملة المحذوفة، المحاولات المتبقية: ${n}`,i),n>0&&await new Promise(s=>setTimeout(s,1e3))}throw console.error("❌ فشل في حفظ المعاملة المحذوفة بعد جميع المحاولات"),r}catch(e){throw console.error("❌ خطأ في حفظ المعاملة المحذوفة:",e),e instanceof Error&&(e.message.includes("network")?console.error("🌐 خطأ في الشبكة - تحقق من الاتصال بالإنترنت"):e.message.includes("permission")?console.error("🔒 خطأ في الصلاحيات - تحقق من قواعد Firestore"):e.message.includes("quota")&&console.error("📊 تم تجاوز حد الاستخدام - تحقق من حصة Firebase")),e}},async permanentlyDeleteTransaction(t,e){try{const n=tt(ke(ne,"deletedTransactions"),ct("originalTransactionId","==",t),ct("userId","==",e)),i=(await nt(n)).docs.map(s=>rr(s.ref));await Promise.all(i),console.log("تم حذف المعاملة نهائياً من Firebase:",t);try{const s=tt(ke(ne,"userTransactions"),ct("userId","==",e)),a=(await nt(s)).docs.filter(l=>{var d,h;const u=l.data();return l.id===t||u.id===t||u.transactionId===t||u.originalTransactionId===t||((d=u.receipt)==null?void 0:d.id)===t||((h=u.receipt)==null?void 0:h.transactionId)===t});a.length>0&&(console.log(`🧹 تنظيف ${a.length} أثر في userTransactions`),await Promise.all(a.map(l=>rr(l.ref))))}catch(s){console.warn("⚠️ تعذر تنظيف userTransactions أثناء الحذف النهائي:",s)}try{const s=Ie(ne,"transactions",t);(await xt(s)).exists()&&(console.log("🧹 حذف المستند المطابق من transactions بالمعرّف المباشر"),await rr(s));const a=tt(ke(ne,"transactions"),ct("transactionId","==",t)),l=await nt(a);l.empty||(console.log(`🧹 حذف ${l.size} مستند من transactions بـ transactionId`),await Promise.all(l.docs.map(h=>rr(h.ref))));const u=tt(ke(ne,"transactions"),ct("originalTransactionId","==",t)),d=await nt(u);d.empty||(console.log(`🧹 حذف ${d.size} مستند من transactions بـ originalTransactionId`),await Promise.all(d.docs.map(h=>rr(h.ref))))}catch(s){console.warn("⚠️ تعذر تنظيف مجموعة transactions أثناء الحذف النهائي:",s)}}catch(n){throw console.error("Error permanently deleting transaction:",n),n}}},J$={async add(t){return(await bs(ke(ne,"daily_reports_archive"),{userId:t.userId,reportDate:t.reportDate,totalTransactions:t.totalTransactions,totalAmount:t.totalAmount,totalWithdrawn:t.totalWithdrawn,totalSent:t.totalSent,profit:t.profit??null,walletId:t.walletId??null,createdAt:be()})).id},async getByUser(t,e=50){try{const n=tt(ke(ne,"daily_reports_archive"),ct("userId","==",t),Zu(e)),i=(await nt(n)).docs.map(s=>({id:s.id,userId:String(s.data().userId),reportDate:String(s.data().reportDate),totalTransactions:Number(s.data().totalTransactions||0),totalAmount:Number(s.data().totalAmount||0),totalWithdrawn:Number(s.data().totalWithdrawn||0),totalSent:Number(s.data().totalSent||0),profit:s.data().profit!==void 0?Number(s.data().profit):void 0,walletId:s.data().walletId??null,createdAt:je(s.data().createdAt)}));return i.sort((s,o)=>s.reportDate<o.reportDate?1:-1),i}catch(n){throw console.error("Error loading daily reports archive:",n),n}}},MB={async getUserData(t){try{console.log("🔍 محاولة الحصول على بيانات المستخدم:",{userId:t});const e=Ie(ne,"users",t),n=await xt(e);if(n.exists()){const r=n.data();return console.log("✅ تم العثور على بيانات المستخدم:",r),{...r,createdAt:je(r.createdAt),updatedAt:je(r.updatedAt)}}else{console.log("⚠️ لا توجد بيانات للمستخدم، إنشاء بيانات افتراضية");const r={cashBalance:0,walletBalances:{},createdAt:new Date,updatedAt:new Date};return await this.saveUserData(t,r),console.log("✅ تم إنشاء وحفظ البيانات الافتراضية"),r}}catch(e){return console.error("❌ خطأ في الحصول على بيانات المستخدم:",e),{cashBalance:0,walletBalances:{},createdAt:new Date,updatedAt:new Date}}},async saveUserData(t,e){try{const n=Ie(ne,"users",t),r=Lf(e);await gl(n,{...r||{},updatedAt:be()},{merge:!0})}catch(n){throw console.error("Error saving user data:",n),n}},async updateUserData(t,e){try{console.log("🔄 بدء تحديث بيانات المستخدم في Firebase:",{userId:t,data:e});const n=Ie(ne,"users",t),r=Object.fromEntries(Object.entries(e).filter(([l,u])=>u!==void 0)),i=Lf(r);let s={};try{const l=await xt(n);s=l.exists()?l.data():{},console.log("📥 البيانات الحالية:",s)}catch(l){console.warn("⚠️ تعذر الحصول على البيانات الحالية، استخدام البيانات الجديدة فقط:",l)}const o={...s,...i,updatedAt:be()};console.log("📝 البيانات المدمجة للحفظ:",o);let a=3;for(;a>0;)try{await gl(n,o,{merge:!0}),console.log("✅ تم تحديث بيانات المستخدم بنجاح");return}catch(l){if(a--,console.warn(`⚠️ فشل في الحفظ، المحاولات المتبقية: ${a}`,l),a===0)throw l;await new Promise(u=>setTimeout(u,1e3))}}catch(n){throw console.error("❌ خطأ في تحديث بيانات المستخدم:",n),n instanceof Error&&(n.message.includes("network")?console.error("🌐 خطأ في الشبكة - تحقق من الاتصال بالإنترنت"):n.message.includes("permission")?console.error("🔒 خطأ في الصلاحيات - تحقق من قواعد Firestore"):n.message.includes("quota")&&console.error("📊 تم تجاوز حد الاستخدام - تحقق من حصة Firebase")),n}},async getUserWallets(t){try{const e=await this.getUserData(t);return(e==null?void 0:e.wallets)||[]}catch(e){return console.error("Error getting user wallets:",e),[]}},async getUserTransactions(t){try{const e=tt(ke(ne,"userTransactions"),ct("userId","==",t),Vr("createdAt","desc"));return(await nt(e)).docs.map(i=>({id:i.id,...i.data(),createdAt:je(i.data().createdAt)})).filter(i=>(i==null?void 0:i.status)!=="cancelled"&&!(i!=null&&i.isDeleted))}catch(e){return console.error("Error getting user transactions:",e),[]}},async saveUserTransaction(t,e){try{const n=Object.fromEntries(Object.entries(e??{}).filter(([i,s])=>s!==void 0));return(await bs(ke(ne,"userTransactions"),{...n,userId:t,createdAt:n.createdAt?n.createdAt instanceof Date?n.createdAt:new Date(String(n.createdAt)):be(),uploadedAt:be()})).id}catch(n){throw console.error("Error saving user transaction:",n),n}},async removeUserTransaction(t,e){try{console.log("🗑️ محاولة حذف المعاملة من userTransactions:",{userId:t,transactionId:e});const n=tt(ke(ne,"userTransactions"),ct("userId","==",t)),r=await nt(n);console.log(`📊 تم العثور على ${r.docs.length} معاملة للمستخدم`);const i=r.docs.filter(s=>{var d,h;const o=s.data(),a=s.id,u=[o.id===e,o.transactionId===e,a===e,o.originalTransactionId===e,((d=o.receipt)==null?void 0:d.transactionId)===e,((h=o.receipt)==null?void 0:h.id)===e].some(p=>p===!0);return u&&console.log("🎯 تم العثور على معاملة مطابقة:",{docId:a,dataId:o.id,transactionId:o.transactionId,originalTransactionId:o.originalTransactionId,searchingFor:e}),u});if(i.length>0){console.log(`🗑️ سيتم حذف ${i.length} معاملة مطابقة حذفًا نهائيًا`);const s=i.map(async o=>{console.log("🗑️ حذف المستند نهائيًا:",o.id),await rr(o.ref)});await Promise.all(s),console.log("✅ تم حذف كل المعاملات المطابقة نهائيًا من userTransactions:",e);try{const o=Ie(ne,"transactions",e);if((await xt(o)).exists())console.log("🔗 العثور على المعاملة في transactions، سيتم حذفها نهائيًا"),await rr(o);else{const l=tt(ke(ne,"transactions"),ct("transactionId","==",e)),u=await nt(l);u.empty||(console.log(`🔍 العثور على ${u.size} مستند في transactions بـ transactionId سيُحذف`),await Promise.all(u.docs.map(p=>rr(p.ref))));const d=tt(ke(ne,"transactions"),ct("originalTransactionId","==",e)),h=await nt(d);h.empty||(console.log(`🔍 العثور على ${h.size} مستند في transactions بـ originalTransactionId سيُحذف`),await Promise.all(h.docs.map(p=>rr(p.ref))))}}catch(o){console.warn("⚠️ تعذر حذف المعاملة في مجموعة transactions أثناء الحذف النهائي:",o)}return}console.log("ℹ️ لم يتم العثور على المعاملة في userTransactions (قد تكون محذوفة مسبقاً):",e)}catch(n){throw console.error("❌ خطأ في حذف المعاملة من userTransactions:",n),n}}};var LB=(t=>(t.MONTHLY="monthly",t.QUARTERLY="quarterly",t.YEARLY="yearly",t.LIFETIME="lifetime",t.ZERO="zero",t))(LB||{});const FB=(t,e=new Date)=>{const n=new Date(e);switch(t){case"monthly":{const r=new Date(n);return r.setDate(r.getDate()+30),r}case"quarterly":{const r=new Date(n);return r.setDate(r.getDate()+90),r}case"yearly":{const r=new Date(n);return r.setDate(r.getDate()+365),r}case"lifetime":return null;case"zero":return null;default:return null}},Ph=t=>{var i,s;if(!t||!t.isActive)return!1;if(t.planType==="lifetime")return!0;if(!t.endDate){const o=new Date,a=t.activatedAt,l=(i=a==null?void 0:a.toDate)!=null&&i.call(a)?a.toDate():t.activatedAt?new Date(t.activatedAt):null;return l&&o.getTime()-l.getTime()<4*60*60*1e3,!0}const e=new Date,n=t.endDate,r=n!=null&&n.toDate?n.toDate():new Date(n);if(!r||isNaN(r.getTime())){const o=t.activatedAt,a=(s=o==null?void 0:o.toDate)!=null&&s.call(o)?o.toDate():t.activatedAt?new Date(t.activatedAt):null;return a&&e.getTime()-a.getTime()<4*60*60*1e3,!0}return e<=r},UB=t=>{if(!t||!t.isActive)return null;if(t.planType==="lifetime")return-1;if(!t.endDate)return null;const e=new Date,n=t.endDate,r=n!=null&&n.toDate?n.toDate():new Date(n);if(!r||isNaN(r.getTime()))return null;const i=r.getTime()-e.getTime(),s=Math.ceil(i/(1e3*60*60*24));return s>0?s:0},X$=async(t,e,n,r)=>{try{const i=new Date,s=FB(e,i),o={planType:e,startDate:i,endDate:s,isActive:!0,activatedBy:n,activatedAt:i};console.log("🔄 Activating subscription for user:",{userId:t,planType:e,adminId:n,subscriptionData:o});const a=Ie(ne,"users",t);if(await Kt(a,{subscription:o,isActive:!0,approved:!0,isOnFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,updatedAt:new Date}),console.log("✅ Subscription data updated in Firestore"),typeof window<"u"){const l=new CustomEvent("subscriptionActivated",{detail:{userId:t,planType:e,timestamp:new Date().toISOString()}});window.dispatchEvent(l),console.log("📢 Subscription activation event dispatched:",{userId:t,planType:e});const u=new CustomEvent("userSubscriptionUpdated",{detail:{userId:t,planType:e,isActive:!0,timestamp:new Date().toISOString()}});window.dispatchEvent(u),console.log("📢 Global subscription update event dispatched")}console.log(`✅ تم تفعيل اشتراك ${e} للمستخدم ${t}`)}catch(i){throw console.error("❌ خطأ في تفعيل الاشتراك:",i),new Error("فشل في تفعيل الاشتراك")}},Z$=async t=>{try{const e=Ie(ne,"users",t);await Kt(e,{"subscription.isActive":!1,isActive:!1,updatedAt:new Date}),console.log(`✅ تم إلغاء تفعيل اشتراك المستخدم ${t}`)}catch(e){throw console.error("❌ خطأ في إلغاء تفعيل الاشتراك:",e),new Error("فشل في إلغاء تفعيل الاشتراك")}},ez=async t=>{try{const e=Ie(ne,"users",t),n=await xt(e);return n.exists()&&n.data().subscription||null}catch(e){return console.error("❌ خطأ في الحصول على بيانات الاشتراك:",e),null}},tz=t=>{switch(t){case"monthly":return"شهرية";case"quarterly":return"ربع سنوية";case"yearly":return"سنوية";case"lifetime":return"مدى الحياة";case"zero":return"زيرو";default:return"غير محدد"}},nz=t=>{if(!t)return"text-gray-500";if(!t.isActive)return"text-red-500";if(t.planType==="lifetime")return"text-green-600";const e=UB(t);return e===null||e<=0?"text-red-500":e<=7?"text-yellow-500":"text-green-500"},rz=t=>t?(t instanceof Date?t:new Date(t)).toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric"}):"غير محدد";class Pw{static async startFreeTrialFromAdmin(e){try{const n=Ie(ne,"users",e),r=await xt(n);if(!r.exists())return{success:!1,message:"المستخدم غير موجود"};if(r.data().hasUsedFreeTrial)return{success:!1,message:"لقد استخدم هذا المستخدم التجربة المجانية من قبل"};const s=new Date,o=await this.getTrialDurationHours(),a=new Date(s.getTime()+o*60*60*1e3);return await Kt(n,{hasUsedFreeTrial:!0,freeTrialStartDate:s,freeTrialEndDate:a,isOnFreeTrial:!0,isActive:!0,approved:!0,updatedAt:be()}),{success:!0,message:`تم تفعيل التجربة المجانية لمدة ${o} ${o>=3&&o<=10?"ساعات":o===2?"ساعتين":"ساعة"}`}}catch(n){return console.error("Error starting admin free trial:",n),{success:!1,message:"حدث خطأ أثناء تفعيل التجربة المجانية"}}}static async startFreeTrial(e){try{const n=Ie(ne,"users",e),r=await xt(n);if(!r.exists())return{success:!1,message:"المستخدم غير موجود"};if(r.data().hasUsedFreeTrial)return{success:!1,message:"لقد استخدمت التجربة المجانية من قبل"};const s=new Date,o=await this.getTrialDurationHours(),a=new Date(s.getTime()+o*60*60*1e3);return await Kt(n,{hasUsedFreeTrial:!0,freeTrialStartDate:s,freeTrialEndDate:a,isOnFreeTrial:!0,isActive:!0,approved:!0,updatedAt:be()}),{success:!0,message:`تم تفعيل التجربة المجانية لمدة ${o} ${o>=3&&o<=10?"ساعات":o===2?"ساعتين":"ساعة"}`}}catch(n){return console.error("خطأ في بدء التجربة المجانية:",n),{success:!1,message:"حدث خطأ أثناء تفعيل التجربة المجانية"}}}static async checkTrialValidity(e){var n,r,i,s;try{const o=Ie(ne,"users",e),a=await xt(o);if(!a.exists())return{isValid:!1,isExpired:!1,hoursRemaining:0,hasUsedTrial:!1};const l=a.data(),u=l.hasUsedFreeTrial||!1,d=l.isOnFreeTrial||!1;let h=(r=(n=l.freeTrialEndDate)==null?void 0:n.toDate)!=null&&r.call(n)?l.freeTrialEndDate.toDate():l.freeTrialEndDate?new Date(l.freeTrialEndDate):null;const p=(s=(i=l.freeTrialStartDate)==null?void 0:i.toDate)!=null&&s.call(i)?l.freeTrialStartDate.toDate():l.freeTrialStartDate?new Date(l.freeTrialStartDate):null;if(!u||!d||!h)return{isValid:!1,isExpired:!1,hoursRemaining:0,hasUsedTrial:u};const m=new Date;if(m>h){const _=Ph(l.subscription);return await Kt(o,{isOnFreeTrial:!1,isActive:_,approved:_,updatedAt:be()}),!_&&typeof window<"u"&&setTimeout(()=>{window.location.href="/user/pending-approval"},1e3),{isValid:!1,isExpired:!0,hoursRemaining:0,hasUsedTrial:u}}try{const _=await this.getTrialDurationHours();if(p&&_&&Number.isFinite(_)&&Math.round((h.getTime()-p.getTime())/36e5)<_){const I=new Date(p.getTime()+_*60*60*1e3);I.getTime()>h.getTime()&&(await Kt(o,{freeTrialEndDate:I,updatedAt:be()}),h=I)}}catch(_){console.warn("checkTrialValidity: failed to auto-extend to configured hours",_)}const y=h.getTime()-m.getTime();return{isValid:!0,isExpired:!1,hoursRemaining:Math.ceil(y/(1e3*3600)),hasUsedTrial:u}}catch(o){return console.error("خطأ في التحقق من صلاحية التجربة المجانية:",o),{isValid:!1,isExpired:!1,hoursRemaining:0,hasUsedTrial:!1}}}static async getTrialData(e){var n,r;try{const i=Ie(ne,"users",e),s=await xt(i);if(!s.exists())return{hasUsedFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,isOnFreeTrial:!1};const o=s.data();return{hasUsedFreeTrial:o.hasUsedFreeTrial||!1,freeTrialStartDate:((n=o.freeTrialStartDate)==null?void 0:n.toDate())||null,freeTrialEndDate:((r=o.freeTrialEndDate)==null?void 0:r.toDate())||null,isOnFreeTrial:o.isOnFreeTrial||!1}}catch(i){return console.error("خطأ في الحصول على بيانات التجربة المجانية:",i),{hasUsedFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,isOnFreeTrial:!1}}}static async getTrialDurationHours(){try{const e=Ie(ne,"config","freeTrial"),n=await xt(e);if(n.exists()){const r=n.data(),i=typeof(r==null?void 0:r.durationHours)=="number"?r.durationHours:this.TRIAL_DURATION_HOURS;return!Number.isFinite(i)||i<1?this.TRIAL_DURATION_HOURS:i}return this.TRIAL_DURATION_HOURS}catch(e){return console.warn("getTrialDurationHours: fallback to default due to error",e),this.TRIAL_DURATION_HOURS}}static async updateTrialDurationHours(e){try{if(!Number.isFinite(e)||e<1)return{success:!1,message:"المدة يجب أن تكون ساعة واحدة على الأقل"};const n=Ie(ne,"config","freeTrial");return await gl(n,{durationHours:e,updatedAt:be()},{merge:!0}),{success:!0,message:"تم تحديث مدة التجربة المجانية بنجاح"}}catch(n){return console.error("Error updating trial duration hours:",n),{success:!1,message:"تعذر تحديث مدة التجربة المجانية"}}}static async resetActiveTrialToCurrentDuration(e){var n,r;try{const i=Ie(ne,"users",e),s=await xt(i);if(!s.exists())return{success:!1,message:"المستخدم غير موجود"};const o=s.data(),a=!!o.isOnFreeTrial,l=(r=(n=o.freeTrialStartDate)==null?void 0:n.toDate)!=null&&r.call(n)?o.freeTrialStartDate.toDate():o.freeTrialStartDate?new Date(o.freeTrialStartDate):null;if(!a||!l)return{success:!1,message:"لا توجد تجربة نشطة لإعادة ضبطها"};const u=await this.getTrialDurationHours(),d=new Date(l.getTime()+u*60*60*1e3);return await Kt(i,{freeTrialEndDate:d,updatedAt:be()}),{success:!0,message:`تم ضبط نهاية التجربة إلى ${u} ${u>=3&&u<=10?"ساعات":u===2?"ساعتين":"ساعة"}`}}catch(i){return console.error("Error resetting active trial duration:",i),{success:!1,message:"تعذر إعادة ضبط مدة التجربة"}}}}p0(Pw,"TRIAL_DURATION_HOURS",24);const iz=Object.freeze(Object.defineProperty({__proto__:null,FreeTrialService:Pw},Symbol.toStringTag,{value:"Module"})),ZC=b.createContext(void 0);function Wp(){const t=b.useContext(ZC);if(t===void 0)throw new Error("useFirebaseAuth must be used within a FirebaseAuthProvider");return t}const jB=({children:t})=>{const[e,n]=b.useState(null),[r,i]=b.useState(null),[s,o]=b.useState(null),[a,l]=b.useState(!1),[u,d]=b.useState(!0),h=async T=>{var w,P,x,C,k,R,W,le;try{const se=Ie(ne,"profiles",T);let G=!1;try{const F=await KC(se);if(F.exists()){const H=F.data(),ae={userId:F.id,shopId:H.shopId,role:H.role,fullName:H.fullName,phone:H.phone,shopName:H.shopName||null,approved:H.approved,avatarId:H.avatarId,createdAt:((P=(w=H.createdAt)==null?void 0:w.toDate)==null?void 0:P.call(w))||new Date,updatedAt:((C=(x=H.updatedAt)==null?void 0:x.toDate)==null?void 0:C.call(x))||new Date,trialStarted:H.trialStarted||!1,trialStartDate:(R=(k=H.trialStartDate)==null?void 0:k.toDate)==null?void 0:R.call(k),trialEndDate:(le=(W=H.trialEndDate)==null?void 0:W.toDate)==null?void 0:le.call(W),trialExpired:H.trialExpired||!1};i(ae),G=!0,d(!1)}}catch(F){console.log("Cache profile not available:",(F==null?void 0:F.code)||F)}try{if(!G){const F=localStorage.getItem(`profile_cache_${T}`);if(F){const H=JSON.parse(F);i(H),G=!0,d(!1)}}}catch{}return Xy(se,F=>{var H,ae,X,Z,ce,we,Le,me;if(F.exists()){const Ke=F.data(),Jt={userId:F.id,shopId:Ke.shopId,role:Ke.role,fullName:Ke.fullName,phone:Ke.phone,shopName:Ke.shopName||null,approved:Ke.approved,avatarId:Ke.avatarId,createdAt:((ae=(H=Ke.createdAt)==null?void 0:H.toDate)==null?void 0:ae.call(H))||new Date,updatedAt:((Z=(X=Ke.updatedAt)==null?void 0:X.toDate)==null?void 0:Z.call(X))||new Date,trialStarted:Ke.trialStarted||!1,trialStartDate:(we=(ce=Ke.trialStartDate)==null?void 0:ce.toDate)==null?void 0:we.call(ce),trialEndDate:(me=(Le=Ke.trialEndDate)==null?void 0:Le.toDate)==null?void 0:me.call(Le),trialExpired:Ke.trialExpired||!1};i(Jt);try{localStorage.setItem(`profile_cache_${F.id}`,JSON.stringify(Jt))}catch{}G||(G=!0,d(!1))}},F=>{console.error("Profile listener error:",F)})}catch(se){return console.error("Error setting up profile listener:",se),await m(T),d(!1),()=>{}}},p=async T=>{try{const w=Ie(ne,"users",T.uid);(await xt(w)).exists()?(await Kt(w,{lastLogin:be(),updatedAt:be()}),console.log("✅ ensureAdminUserDoc: Updated lastLogin for",T.uid)):(await gl(w,{email:T.email||"",displayName:T.displayName||"مستخدم جديد",phone:null,shopName:null,isActive:!1,createdAt:be(),updatedAt:be(),lastLogin:be()},{merge:!0}),console.log("✅ ensureAdminUserDoc: Created users doc for",T.uid))}catch(w){console.error("❌ ensureAdminUserDoc error:",w)}},m=async(T,w,P,x,C)=>{var k,R;try{console.log("Creating default profile for user:",T);const W=m1.generateReferralCode(T);let le=null;const se={userId:T,shopId:"default-shop",role:"user",fullName:w||"مستخدم جديد",phone:P||null,shopName:x||null,approved:!1,referralCode:W,referredBy:C||null,createdAt:new Date,updatedAt:new Date};i(se),console.log("Created temporary profile:",se);try{const{doc:G,setDoc:B,serverTimestamp:F}=await Se(async()=>{const{doc:Z,setDoc:ce,serverTimestamp:we}=await Promise.resolve().then(()=>ig);return{doc:Z,setDoc:ce,serverTimestamp:we}},void 0),{db:H}=await Se(async()=>{const{db:Z}=await Promise.resolve().then(()=>og);return{db:Z}},void 0),ae={email:((k=vr.currentUser)==null?void 0:k.email)||"",displayName:w||"مستخدم جديد",phone:P||null,shopName:x||null,isActive:!1,referralCode:W,referredBy:C||null,createdAt:F(),lastLogin:null,updatedAt:F()};if(console.log("Attempting to add user to admin collection with data:",ae),await B(G(H,"users",T),ae,{merge:!0}),console.log("✅ User successfully added to admin collection:",ae),C)try{const{query:Z,collection:ce,where:we,limit:Le,getDocs:me}=await Se(async()=>{const{query:St,collection:Ln,where:ln,limit:mr,getDocs:$r}=await Promise.resolve().then(()=>ig);return{query:St,collection:Ln,where:ln,limit:mr,getDocs:$r}},void 0),{db:Ke}=await Se(async()=>{const{db:St}=await Promise.resolve().then(()=>og);return{db:St}},void 0),Jt=Z(ce(Ke,"users"),we("referralCode","==",C),Le(1)),Xt=await me(Jt);Xt.empty?console.log("⚠️ Referral code not found in users collection:",C):(le=Xt.docs[0].id,await m1.create({referrerId:le,referredUserId:T,referredUserEmail:((R=vr.currentUser)==null?void 0:R.email)||"",referralCode:C,status:"completed"}),console.log("✅ Referral record created successfully for referrer:",le))}catch(Z){console.error("❌ Error creating referral record:",Z)}const X=await xt(G(H,"users",T));X.exists()?console.log("✅ User document verified in Firestore:",X.data()):console.log("❌ User document not found after creation")}catch(G){console.error("❌ Error adding user to admin collection:",G)}try{const{addDoc:G,collection:B,serverTimestamp:F}=await Se(async()=>{const{addDoc:ce,collection:we,serverTimestamp:Le}=await Promise.resolve().then(()=>ig);return{addDoc:ce,collection:we,serverTimestamp:Le}},void 0),{db:H}=await Se(async()=>{const{db:ce}=await Promise.resolve().then(()=>og);return{db:ce}},void 0),X=(await G(B(H,"shops"),{name:x||"متجر جديد",ownerId:T,createdAt:F(),updatedAt:F(),isActive:!0})).id;await ag.create({userId:T,shopId:X,role:"user",fullName:"مستخدم جديد",phone:null});try{await ag.update(T,{referralCode:W,referredBy:le||null})}catch(ce){console.warn("⚠️ Failed to update profile with referral fields:",ce)}const Z=await ag.getById(T);Z&&(i(Z),console.log("Updated with Firebase profile:",Z))}catch(G){console.error("Error creating profile:",G),console.log("Using local profile - Firebase unavailable")}}catch(W){console.error("Error creating default profile:",W)}};b.useEffect(()=>{console.log("🔥 Setting up auth state listener"),d(!0);const T=setTimeout(()=>{console.warn("⚠️ Global auth timeout reached, forcing loading to false"),d(!1)},2e4);localStorage.getItem("demoProfile")&&(console.log("🧹 Cleaning up demo profile from localStorage"),localStorage.removeItem("demoProfile"));const w=localStorage.getItem("demoUser"),P=localStorage.getItem("demoProfile");if(w&&P){console.log("🔐 Found demo user in localStorage");try{const C=JSON.parse(w),k=JSON.parse(P);n(C),i(k),clearTimeout(T),d(!1);return}catch(C){console.error("Error parsing demo user data:",C),localStorage.removeItem("demoUser"),localStorage.removeItem("demoProfile")}}const x=S3(vr,async C=>{console.log("🔐 Auth state changed:",{uid:C==null?void 0:C.uid,email:C==null?void 0:C.email,emailVerified:C==null?void 0:C.emailVerified,timestamp:new Date().toISOString()}),n(C),C?(console.log("📋 User authenticated, starting profile hydration for:",C.uid),h(C.uid),v(),p(C)):(console.log("📋 User not authenticated, clearing profile"),i(null),o(null),l(!1),d(!1)),clearTimeout(T)});return()=>{clearTimeout(T),x()}},[]);const E=async(T,w,P,x,C,k)=>{try{console.log("🔐 Attempting to sign up user:",T);const R=await DT(vr,T,w);return console.log("🔐 Sign up successful:",R.user.uid),await m(R.user.uid,P,x,C,k),await p(R.user),{error:null}}catch(R){console.error("🔐 Sign up error:",R);let W="حدث خطأ أثناء إنشاء الحساب";return R.code==="auth/email-already-in-use"?W="هذا البريد الإلكتروني مستخدم بالفعل":R.code==="auth/weak-password"?W="كلمة المرور ضعيفة جداً":R.code==="auth/invalid-email"&&(W="البريد الإلكتروني غير صحيح"),{error:{...R,message:W}}}},y=async(T,w)=>{try{if(console.log("🔐 Attempting to sign in user:",T),T==="test@example.com"&&w==="123456"){console.log("🔐 Demo user login detected");const x={uid:"demo-user-123",email:"test@example.com",displayName:"مستخدم تجريبي",emailVerified:!0},C={userId:"demo-user-123",shopId:"demo-shop",role:"user",fullName:"مستخدم تجريبي",phone:"01000000000",approved:!0,createdAt:new Date,updatedAt:new Date};return localStorage.setItem("demoUser",JSON.stringify(x)),localStorage.setItem("demoProfile",JSON.stringify(C)),n(x),i(C),d(!1),console.log("🔐 Demo user signed in successfully"),{error:null}}const P=await w3(vr,T,w);console.log("🔐 Sign in successful:",P.user.uid);try{if((await xt(Ie(ne,"deletedUsers",P.user.uid))).exists())return console.log("🚫 User is deleted, signing out"),await NT(vr),{error:{code:"auth/user-deleted",message:"تم حذف هذا الحساب من قبل الإدارة. لا يمكنك تسجيل الدخول."}}}catch(x){console.error("Error checking deleted users:",x)}return await p(P.user),{error:null}}catch(P){if(console.error("🔐 Sign in error:",P),T==="test@example.com"&&P.code==="auth/user-not-found"){console.log("🔐 Creating test user...");try{const C=await DT(vr,T,w);return console.log("🔐 Test user created:",C.user.uid),await m(C.user.uid,"مستخدم تجريبي","01000000000","متجر تجريبي"),{error:null}}catch(C){return console.error("🔐 Error creating test user:",C),{error:C}}}let x="حدث خطأ أثناء تسجيل الدخول";return P.code==="auth/invalid-credential"?x="البريد الإلكتروني أو كلمة المرور غير صحيحة":P.code==="auth/user-not-found"?x="لا يوجد حساب بهذا البريد الإلكتروني":P.code==="auth/wrong-password"?x="كلمة المرور غير صحيحة":P.code==="auth/too-many-requests"&&(x="تم تجاوز عدد المحاولات المسموح، حاول لاحقاً"),{error:{...P,message:x}}}},S=async()=>{try{localStorage.getItem("demoUser")?(console.log("🔐 Signing out demo user"),localStorage.removeItem("demoUser"),localStorage.removeItem("demoProfile"),n(null),i(null),d(!1)):await NT(vr),window.location.pathname.includes("/user/dashboard")?window.location.href="/user/login":window.location.href="/landing"}catch(T){console.error("Sign out error:",T)}},_=async T=>{try{return await _3(vr,T),{error:null}}catch(w){console.error("Reset password error:",w);let P="حدث خطأ أثناء إرسال رابط إعادة تعيين كلمة المرور";return w.code==="auth/user-not-found"?P="لا يوجد حساب بهذا البريد الإلكتروني":w.code==="auth/invalid-email"&&(P="البريد الإلكتروني غير صحيح"),{error:{...w,message:P}}}},v=async()=>{if(!e){console.log("No user found for subscription check"),o(null),l(!1);return}console.log("Checking subscription status for user:",e.uid);try{return Xy(Ie(ne,"users",e.uid),async w=>{var P,x,C,k,R,W,le,se;if(w.exists()){const G=w.data();o(G),console.log("📊 Subscription Data Details (Real-time):",{userId:e.uid,userEmail:e.email,subscription:G.subscription,subscriptionExists:!!G.subscription,planType:(P=G.subscription)==null?void 0:P.planType,isActive:(x=G.subscription)==null?void 0:x.isActive,startDate:(C=G.subscription)==null?void 0:C.startDate,endDate:(k=G.subscription)==null?void 0:k.endDate,activatedBy:(R=G.subscription)==null?void 0:R.activatedBy,activatedAt:(W=G.subscription)==null?void 0:W.activatedAt,isOnFreeTrial:G.isOnFreeTrial,freeTrialEndDate:G.freeTrialEndDate,branchPackageStatus:(le=G==null?void 0:G.branchPackage)==null?void 0:le.status});const B=((se=G==null?void 0:G.branchPackage)==null?void 0:se.status)==="active";let F=!1;if(B)console.log("✅ Branch package is active, granting access"),F=!0;else if(G.isOnFreeTrial){console.log("🎁 User is on free trial, checking validity...");const H=await Pw.checkTrialValidity(e.uid);H.isValid&&!H.isExpired?(console.log("✅ Free trial is valid, granting access"),F=!0):H.isExpired?(console.log("⏰ Free trial has expired, checking regular subscription"),F=Ph(G.subscription)):(console.log("❌ Free trial is not valid"),F=Ph(G.subscription))}else F=Ph(G.subscription);l(F),console.log("✅ Subscription Validation Result (Real-time):",{userId:e.uid,isValid:F,isOnFreeTrial:G.isOnFreeTrial,hasActiveBranchPackage:B,reason:B?"Branch package active":G.isOnFreeTrial?"Free trial active":G.subscription?G.subscription.isActive?G.subscription.planType==="lifetime"?"Lifetime plan":G.subscription.endDate?new Date>new Date(G.subscription.endDate)?"Expired":"Valid":"No end date":"Subscription not active":"No subscription data"})}},w=>{console.error("❌ Subscription listener error:",w)})}catch(T){console.error("Error setting up subscription listener:",T)}},V={user:e,profile:r,userSubscription:s,isSubscriptionActive:a,loading:u,signUp:E,signIn:y,signOut:S,resetPassword:_,updateUserProfile:async T=>{if(e)try{const w={updatedAt:be()};T.fullName!==void 0&&(w.fullName=T.fullName),T.phone!==void 0&&(w.phone=T.phone),await Kt(Ie(ne,"profiles",e.uid),w),await h(e.uid)}catch(w){console.error("Error updating user profile:",w)}},updateAvatarId:async T=>{if(e)try{await Kt(Ie(ne,"profiles",e.uid),{avatarId:T,updatedAt:be()}),await h(e.uid)}catch(w){console.error("Error updating avatarId:",w)}},refreshProfile:async()=>{if(e)try{console.log("Refreshing profile for user:",e.uid),await h(e.uid),await v()}catch(T){console.error("Error refreshing profile:",T)}},checkSubscriptionStatus:v};return N.jsx(ZC.Provider,{value:V,children:t})},BB=()=>{const t=dp(),e=_i(),{signOut:n,user:r}=Wp(),[i,s]=b.useState(!1),[o,a]=b.useState(!1),l=[{id:"home",label:"الرئيسية",icon:cO,path:"/user/dashboard",action:()=>{t("/user/dashboard"),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},100)}},{id:"debts",label:"الديون",icon:lO,path:"/debts",action:()=>{t("/user/dashboard",{state:{openDebtDialog:!0}})}},{id:"transfer",label:"تحويل",icon:sO,path:"/transfer",action:()=>{t("/user/dashboard",{state:{openTransactionSection:!0,transactionType:"transfer",startNewTransaction:!0}})}},{id:"add",label:"",icon:NE,path:"/add",isSpecial:!0},{id:"withdraw",label:"سحب",icon:iO,path:"/withdraw",action:()=>{t("/user/dashboard",{state:{openTransactionSection:!0,transactionType:"withdraw",startNewTransaction:!0}})}},{id:"transactions",label:"المعاملات",icon:Mm,path:"/transactions"},{id:"settings",label:"الإعدادات",icon:OE,path:"/profile-settings"}],u=[{id:"maintenance",label:"الصيانة",icon:fO,action:()=>{s(!1),t("/user/dashboard",{state:{openMaintenanceDialog:!0}})},color:"#0EA5E9"},{id:"credit-cards",label:"كروت الائتمان",icon:aO,action:()=>{s(!1),t("/user/dashboard",{state:{openCreditCardsDialog:!0}})},color:"#8B5CF6"},{id:"sales",label:"المبيعات",icon:dO,action:()=>{s(!1),t("/user/dashboard",{state:{openSalesDialog:!0}})},color:"#F59E0B"},{id:"shop-expenses",label:"مصروفات المحل",icon:Mm,action:()=>{s(!1),t("/user/dashboard",{state:{openShopExpensesDialog:!0}})},color:"#F97316"},{id:"deficiencies",label:"النواقص",icon:hO,action:()=>{s(!1),t("/user/dashboard",{state:{openDeficienciesDialog:!0}})},color:"#DB2777"},{id:"add-wallet",label:"إضافة محفظة",icon:NE,action:()=>{s(!1),t("/user/add-wallet")},color:"#EF4444"},{id:"cashier-shift",label:"وردية الكاشير",icon:oO,action:()=>{s(!1),t("/user/dashboard",{state:{openCashierShiftModal:!0}})},color:"#3B82F6"},{id:"contact",label:"للتواصل والاقتراحات",icon:uO,action:()=>{s(!1);const E=`مرحباً، أود التواصل معكم
البريد الإلكتروني المسجل: ${(r==null?void 0:r.email)||"غير محدد"}`,y=encodeURIComponent(E);window.open(`https://wa.me/201000392539?text=${y}`,"_blank")},color:"#10B981"},{id:"logout",label:"تسجيل خروج",icon:DE,action:async()=>{s(!1);try{await n()}catch(m){console.error("Logout error:",m)}},color:"#EF4444"}],d=[{id:"shop-expenses-settings",label:"مصروفات المحل",icon:Mm,action:()=>{a(!1),t("/user/dashboard",{state:{openShopExpensesDialog:!0}})},color:"#F97316"},{id:"profile-settings",label:"إعدادات الملف الشخصي",icon:OE,action:()=>{a(!1),t("/profile-settings")},color:"#6366F1"},{id:"logout",label:"تسجيل الخروج",icon:DE,action:async()=>{a(!1);try{await n()}catch(m){console.error("Logout error:",m)}},color:"#EF4444"}],h=(m,E,y)=>{y?y():E&&m==="/add"?s(!i):E||t(m)},p=m=>e.pathname===m;return N.jsxs("div",{className:"mobile-bottom-nav",children:[i&&N.jsxs(N.Fragment,{children:[N.jsx("div",{className:"quick-actions-overlay",onClick:()=>s(!1)}),N.jsx("div",{className:"floating-actions-container",children:u.map((m,E)=>N.jsxs("div",{className:"floating-action-button",onClick:m.action,style:{"--action-color":m.color,"--animation-delay":`${E*.1}s`},children:[N.jsx("div",{className:"floating-action-icon",style:{backgroundColor:m.color},children:N.jsx(m.icon,{className:"action-icon"})}),N.jsx("span",{className:"floating-action-label",children:m.label})]},m.id))})]}),o&&N.jsxs(N.Fragment,{children:[N.jsx("div",{className:"quick-actions-overlay",onClick:()=>a(!1)}),N.jsx("div",{className:"floating-actions-container",children:d.map((m,E)=>N.jsxs("div",{className:"floating-action-button",onClick:m.action,style:{"--action-color":m.color,"--animation-delay":`${E*.1}s`},children:[N.jsx("div",{className:"floating-action-icon",style:{backgroundColor:m.color},children:N.jsx(m.icon,{className:"action-icon"})}),N.jsx("span",{className:"floating-action-label",children:m.label})]},m.id))})]}),N.jsx("nav",{className:"mobile-bottom-nav-container",children:l.map(m=>{const E=m.icon,y=p(m.path);return N.jsxs("button",{onClick:()=>h(m.path,m.isSpecial,m.action),className:`mobile-nav-item ${y?"active":""} ${m.isSpecial?"special":""}`,"aria-label":m.label,children:[N.jsx("div",{className:`nav-icon-container ${m.isSpecial?"special-icon":""}`,children:N.jsx(E,{className:`nav-icon ${y?"active-icon":""} ${m.isSpecial?"special-icon-svg":""} ${m.isSpecial&&m.id==="add"&&i?"rotated":""} ${m.isSpecial&&m.id==="settings"&&o?"rotated":""}`})}),!m.isSpecial&&N.jsx("span",{className:`nav-label ${y?"active-label":""}`,children:m.label})]},m.id)})})]})},$B=()=>{const t=_i();return b.useEffect(()=>{const e=new URLSearchParams(t.search),n=e.get("text")||e.get("body")||e.get("message")||"",r=e.get("type")||void 0,i=e.get("amount")||void 0,s=e.get("receiver")||e.get("to")||void 0,o=e.get("sender")||e.get("from")||void 0,a=e.get("provider")||void 0,l={};n&&(l.text=n);const u={};r&&(u.type=r),i&&(u.amount=i),s&&(u.receiverMsisdn=s),o&&(u.senderMsisdn=o),a&&(u.provider=a),Object.keys(u).length>0&&(l.payload=u);const d=()=>{try{window.dispatchEvent(new CustomEvent("mobileSmsReceived",{detail:l}))}catch(m){console.error("Dispatch mobileSmsReceived failed:",m)}};d();const h=setTimeout(d,600),p=setTimeout(d,1500);return()=>{clearTimeout(h),clearTimeout(p)}},[t.search]),N.jsx("div",{style:{padding:16},children:N.jsx("p",{children:"تم استقبال رسالة SMS، جارٍ معالجتها وإضافتها للتقارير..."})})},lg=768;function ek(){const[t,e]=b.useState(void 0);return b.useEffect(()=>{const n=window.matchMedia(`(max-width: ${lg-1}px)`),r=()=>{e(window.innerWidth<lg)};return n.addEventListener("change",r),e(window.innerWidth<lg),()=>n.removeEventListener("change",r)},[]),!!t}function zB(){const t=ek(),[e,n]=b.useState("default"),[r,i]=b.useState(!1);return b.useEffect(()=>{const o=localStorage.getItem("notificationConsentRequested")==="true";if(i(o),o){const a=localStorage.getItem("notificationPermission");(a==="granted"||a==="denied"||a==="default")&&n(a);return}t&&typeof window<"u"&&("Notification"in window?Notification.requestPermission().then(a=>{n(a),localStorage.setItem("notificationPermission",a),localStorage.setItem("notificationConsentRequested","true"),i(!0)}).catch(()=>{n("default"),localStorage.setItem("notificationConsentRequested","true"),i(!0)}):(n("unsupported"),localStorage.setItem("notificationConsentRequested","true"),i(!0)))},[t]),{permission:e,hasRequested:r,requestConsent:async()=>{if(typeof window<"u"&&"Notification"in window){const o=await Notification.requestPermission();return n(o),localStorage.setItem("notificationPermission",o),localStorage.setItem("notificationConsentRequested","true"),i(!0),o}return"unsupported"}}}function xw(t,e){return e==="send"?0:Math.round(t*.01*100)/100}function qB(t,e,n=0){const r=xw(t,e),i=Math.max(0,r-n);return Math.round(i*100)/100}const WB=Object.freeze(Object.defineProperty({__proto__:null,calculateCommission:xw,calculateProfit:qB},Symbol.toStringTag,{value:"Module"})),HB=t=>t==="withdraw"||t==="receive"?"receive":"send",KB=async t=>{if(!t)return null;const e=tt(ke(ne,"transactions"),ct("reference","==",t),Zu(1)),n=await nt(e);return n.empty?null:n.docs[0].id},GB=async t=>{if(!t||!t.shopId||!t.lineId||!t.provider)throw new Error("بيانات الإشعار غير مكتملة: يجب توفير shopId و lineId و provider");if(!t.amount||t.amount<=0)throw new Error("قيمة المبلغ في الإشعار غير صالحة");const e=await KB(t.reference);if(e)return{id:e,duplicate:!0};const n=HB(t.type),r={shopId:t.shopId,lineId:t.lineId,merchantUserId:t.merchantUserId||t.createdBy,walletId:t.walletId,provider:t.provider,txnType:n,amount:t.amount,fee:void 0,commission:void 0,profit:0,reference:t.reference,senderMsisdn:t.senderMsisdn,receiverMsisdn:t.receiverMsisdn,note:t.note,status:"confirmed",createdBy:t.createdBy,createdAt:new Date,confirmedAt:new Date},i=await VB.create(r);try{const s=t.merchantUserId||t.createdBy;if(s){const o=n==="receive"?"withdraw":"send",a=xw(t.amount,n);await MB.saveUserTransaction(s,{type:o,amount:t.amount,commission:a,status:"confirmed",createdAt:new Date,senderMsisdn:t.senderMsisdn,receiverMsisdn:t.receiverMsisdn,walletId:t.walletId,lineId:t.lineId,provider:t.provider,note:t.note,transactionId:i})}else console.warn("⚠️ تعذر حفظ إيصال المستخدم: لا يوجد userId (merchantUserId أو createdBy) في الحمولة.")}catch(s){console.warn("⚠️ فشل حفظ إيصال المستخدم في userTransactions من إشعار الموبايل:",s)}return{id:i,duplicate:!1}};function QB(t){let e=0;for(let n=0;n<t.length;n++)e=Math.imul(31,e)+t.charCodeAt(n)|0;return"SMS_"+Math.abs(e).toString(36)}function YB(t){const e=t.toLowerCase();return e.includes("سحب")||e.includes("withdraw")?"withdraw":(e.includes("تحويل")||e.includes("transfer")||e.includes("تم تحويل"),"transfer")}function JB(t){const n=t.replace(/,/g,"").match(/(\d{1,9}(?:\.\d{1,2})?)/);return n?parseFloat(n[1]):null}function XB(t){const e=t.match(/01\d{9}/);return e?e[0]:void 0}function ZB(t){const e=t.toLowerCase();if(e.includes("فودافون")||e.includes("vodafone"))return"vodafone_cash";if(e.includes("اورانج")||e.includes("orange"))return"orange_cash";if(e.includes("اتصالات")||e.includes("etisalat"))return"etisalat_cash";if(e.includes("instapay")||e.includes("إنستا باي")||e.includes("انستابي"))return"instapay"}function e$(t={}){if(typeof window>"u")return()=>{};const e=t.createdBy||"mobile_sms_bridge",n=async r=>{const s=r.detail||{};try{let o=null;if(s&&s.payload)o=s.payload,o.shopId=o.shopId||t.shopId,o.lineId=o.lineId||t.lineId,o.provider=o.provider||t.provider,o.createdBy=o.createdBy||e;else if(s&&s.text){const l=s.text,u=YB(l),d=JB(l),h=u==="transfer"?XB(l):void 0,p=ZB(l)||t.provider;if(!t.shopId||!t.lineId||!p){console.warn("SMS integration missing identifiers. Provide shopId, lineId, provider in initSmsIntegration."),Fd.warning("تعذّر ربط رسالة SMS بالمعاملة تلقائياً (بيانات غير مكتملة)");return}o={type:u,amount:d||0,provider:p,shopId:t.shopId,lineId:t.lineId,receiverMsisdn:h,reference:s.reference||QB(l),createdBy:e,note:"Parsed from SMS"}}if(!o)return;if((await GB(o)).duplicate)Fd.info("تم تجاهل عملية مكررة من رسالة SMS");else{const l=o.type==="withdraw"?"سحب":"تحويل";Fd.success(`تم تسجيل ${l} تلقائياً من رسالة SMS`)}}catch(o){console.error("Failed to process mobile SMS notification:",o),Fd.error("فشل تسجيل المعاملة من رسالة SMS")}};return window.addEventListener("mobileSmsReceived",n),()=>window.removeEventListener("mobileSmsReceived",n)}const t$=z.lazy(()=>Se(()=>import("./Index-BYzysLVQ.js"),[])),g1=z.lazy(()=>Se(()=>import("./LandingPage-B4QhjAVz.js"),__vite__mapDeps([2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30]))),n$=z.lazy(()=>Se(()=>import("./SubscriptionsPage-CXcF3s_t.js"),__vite__mapDeps([31,3,4,21,32,33,27,28,25,26,20]))),r$=z.lazy(()=>Se(()=>import("./AuthPage-CuXqdrNo.js"),__vite__mapDeps([34,3,11,4,24]))),y1=z.lazy(()=>Se(()=>import("./TopUpPage-CEvLIUKf.js"),__vite__mapDeps([35,4,3,11,36,7,8,37]))),i$=z.lazy(()=>Se(()=>import("./AdminTopupsPage-Cim01p_H.js"),__vite__mapDeps([38,3,36,7,8,37]))),s$=z.lazy(()=>Se(()=>import("./UserLoginPage-ColjSGV7.js"),__vite__mapDeps([39,3,11,40,24,41,17,15,42]))),v1=z.lazy(()=>Se(()=>import("./UserRegisterPage-BWPRrE4x.js"),__vite__mapDeps([43,4,3,11,12,44,45,46,47,40,48,49,41,17,15,42]))),o$=z.lazy(()=>Se(()=>import("./UserAccountSetupPage-Tzwprdzi.js"),__vite__mapDeps([50,4,3,11,12,44,49,40,48,20,42]))),a$=z.lazy(()=>Se(()=>import("./ForgotPasswordCodePage-L2V2uv8f.js"),__vite__mapDeps([51,11,3,4,41,20]))),l$=z.lazy(()=>Se(()=>import("./DashboardLoginPage-WFuWU-a1.js"),__vite__mapDeps([52,4,11,3,24,40,17,15,14]))),c$=z.lazy(()=>Se(()=>import("./ProtectedDashboard-TFhaAYb-.js"),__vite__mapDeps([53,4,3,11,54,36,7,8,37,13,12,10,14,15,16,17,55,45,20,56]))),u$=z.lazy(()=>Se(()=>import("./ProtectedUserDashboard-C5JoG8an.js"),__vite__mapDeps([57,19,58]))),d$=z.lazy(()=>Se(()=>import("./MerchantDashboard-B4A608oI.js"),__vite__mapDeps([59,3,6,7,8,9,54,40,60,4,61,11,12,36,37,10,62,63]))),h$=z.lazy(()=>Se(()=>import("./PendingApprovalPage-CxLnI5yo.js"),__vite__mapDeps([64,4,3,21,16,14,17,65,20,66]))),f$=z.lazy(()=>Se(()=>import("./AdminLogin-jd5VUhvL.js"),__vite__mapDeps([67,14,41,17,15]))),p$=z.lazy(()=>Se(()=>import("./ProtectedAdminDashboard-yFgaNskt.js"),__vite__mapDeps([68,5,6,7,8,9,3,10,11,12,13,14,15,16,17,18,19,20,4,69,37,44,54,70,21,66,48,71,40,33,36,41,29,65,28,23,72,24,56,73,32]))),m$=z.lazy(()=>Se(()=>import("./AuthTestPage-BguYV6PG.js"),__vite__mapDeps([74,3,4,11,12]))),g$=z.lazy(()=>Se(()=>import("./ProfileSettingsPage-DxPmbpcE.js"),__vite__mapDeps([75,4,3,11,12,18,13,10,8,14,15,16,17,63,69,37,25,40,47,71,76,28,66]))),y$=z.lazy(()=>Se(()=>import("./TransactionsPage-DCdWedlB.js"),__vite__mapDeps([77,4,3,11,10,8,36,7,37,54,9,78,70,13,12,14,15,16,17,21,23,61,20,33,25,56]))),v$=z.lazy(()=>Se(()=>import("./WalletAdditionPage-BzvjdHjE.js"),__vite__mapDeps([79,4,3,11,12,36,7,8,37,62,25,45,48,16]))),_$=z.lazy(()=>Se(()=>import("./ReferralsPage-CCHQ_kXM.js"),__vite__mapDeps([80,4,3,11,54,44,47,58,20,71,65,72,46,56]))),w$=z.lazy(()=>Se(()=>import("./CPanelPage-g_o-1qs7.js"),__vite__mapDeps([81,4,3,11,12,10,8]))),E$=z.lazy(()=>Se(()=>import("./CPanelLoginPage-RV36aAWk.js"),__vite__mapDeps([82,11,12,4,14,41,17,15,42]))),T$=z.lazy(()=>Se(()=>import("./NotFound-CqUJmZzX.js"),[])),I$=new FL,S$=()=>_i().pathname.startsWith("/user/dashboard")?N.jsx(BB,{}):null,A$=()=>{const t=ek(),{profile:e}=Wp();return zB(),b.useEffect(()=>{if(t&&(e!=null&&e.shopId))return e$({shopId:e.shopId,createdBy:e.userId})},[t,e==null?void 0:e.shopId]),b.useEffect(()=>{if(!t)return;const n=document.createElement("style");n.setAttribute("data-disable-pull-to-refresh","true"),n.textContent="html, body { overscroll-behavior-y: auto; touch-action: pan-y; }",document.head.appendChild(n);let r=0,i=null;const s=a=>{var l,u;r=((u=(l=a.touches)==null?void 0:l[0])==null?void 0:u.clientY)||0,i=a.target},o=a=>{var m,E;const l=((E=(m=a.touches)==null?void 0:m[0])==null?void 0:E.clientY)||0,d=(document.scrollingElement||document.documentElement).scrollTop||window.scrollY||0,h=i||null;!(()=>{let y=h;for(;y&&y!==document.body;){const _=window.getComputedStyle(y).overflowY;if((_==="auto"||_==="scroll")&&y.scrollHeight>y.clientHeight)return!0;y=y.parentElement}return!1})()&&d<=0&&l>r&&a.cancelable&&a.preventDefault()};return document.addEventListener("touchstart",s,{passive:!0}),document.addEventListener("touchmove",o,{passive:!1}),()=>{document.removeEventListener("touchstart",s),document.removeEventListener("touchmove",o);try{document.head.removeChild(n)}catch{}}},[t]),null},P$=()=>N.jsx(jL,{client:I$,children:N.jsx(BF,{children:N.jsxs(pL,{children:[N.jsx(YO,{}),N.jsx(bV,{}),N.jsxs(LF,{children:[N.jsx(A$,{}),N.jsx(b.Suspense,{fallback:N.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:N.jsx("div",{className:"text-center",children:N.jsxs("div",{className:"flex items-center justify-center gap-2",children:[N.jsx("span",{className:"w-3 h-3 rounded-full bg-gradient-to-r from-indigo-500 to-purple-500 animate-bounce",style:{animationDelay:"0ms"}}),N.jsx("span",{className:"w-3 h-3 rounded-full bg-gradient-to-r from-indigo-500 to-purple-500 animate-bounce",style:{animationDelay:"150ms"}}),N.jsx("span",{className:"w-3 h-3 rounded-full bg-gradient-to-r from-indigo-500 to-purple-500 animate-bounce",style:{animationDelay:"300ms"}})]})})}),children:N.jsxs(RF,{children:[N.jsx(Ce,{path:"/",element:N.jsx(g1,{})}),N.jsx(Ce,{path:"/dashboard-redirect",element:N.jsx(t$,{})}),N.jsx(Ce,{path:"/landing",element:N.jsx(g1,{})}),N.jsx(Ce,{path:"/subscriptions",element:N.jsx(n$,{})}),N.jsx(Ce,{path:"/auth",element:N.jsx(r$,{})}),N.jsx(Ce,{path:"/sms-hook",element:N.jsx($B,{})}),N.jsx(Ce,{path:"/user/login",element:N.jsx(s$,{})}),N.jsx(Ce,{path:"/user/forgot-password",element:N.jsx(a$,{})}),N.jsx(Ce,{path:"/user/register",element:N.jsx(v1,{})}),N.jsx(Ce,{path:"/register",element:N.jsx(v1,{})}),N.jsx(Ce,{path:"/user/account-setup",element:N.jsx(o$,{})}),N.jsx(Ce,{path:"/user/pending-approval",element:N.jsx(h$,{})}),N.jsx(Ce,{path:"/user/dashboard",element:N.jsx(u$,{})}),N.jsx(Ce,{path:"/user/add-wallet",element:N.jsx(v$,{})}),N.jsx(Ce,{path:"/admin/login",element:N.jsx(f$,{})}),N.jsx(Ce,{path:"/admin/dashboard",element:N.jsx(p$,{})}),N.jsx(Ce,{path:"/admin/topups",element:N.jsx(i$,{})}),N.jsx(Ce,{path:"/profile-settings",element:N.jsx(g$,{})}),N.jsx(Ce,{path:"/transactions",element:N.jsx(y$,{})}),N.jsx(Ce,{path:"/referrals",element:N.jsx(_$,{})}),N.jsx(Ce,{path:"/cpanel",element:N.jsx(w$,{})}),N.jsx(Ce,{path:"/cpanel/login",element:N.jsx(E$,{})}),N.jsx(Ce,{path:"/auth-test",element:N.jsx(m$,{})}),N.jsx(Ce,{path:"/topup",element:N.jsx(y1,{})}),N.jsx(Ce,{path:"/recharge",element:N.jsx(y1,{})}),N.jsx(Ce,{path:"/merchant/*",element:N.jsx(d$,{})}),N.jsx(Ce,{path:"/dashboard/login",element:N.jsx(l$,{})}),N.jsx(Ce,{path:"/dashboard",element:N.jsx(c$,{})}),N.jsx(Ce,{path:"*",element:N.jsx(T$,{})})]})}),N.jsx(S$,{})]})]})})}),tk=b.createContext(void 0),x$=({children:t})=>{const[e,n]=b.useState(null),[r,i]=b.useState(!1),[s,o]=b.useState(null),{profile:a,user:l}=Wp();b.useEffect(()=>{try{const p=localStorage.getItem("cashier_shift_user"),m=localStorage.getItem("cashier_shift_active"),E=localStorage.getItem("cashier_shift_start_at");p&&n(JSON.parse(p)),m&&i(m==="true"),E&&o(Number(E))}catch{}},[]);const u=p=>{n(p);try{p?localStorage.setItem("cashier_shift_user",JSON.stringify(p)):localStorage.removeItem("cashier_shift_user")}catch{}},d=()=>{i(!0);try{localStorage.setItem("cashier_shift_active","true")}catch{}const p=Date.now();o(p);try{localStorage.setItem("cashier_shift_start_at",String(p))}catch{}try{const m=`cashBalance_${(l==null?void 0:l.uid)||"default"}`,E=`userCashBalance_${(l==null?void 0:l.uid)||"default"}`,y=`walletBalances_${(l==null?void 0:l.uid)||"default"}`;let S=localStorage.getItem(m);if(S==null){const v=localStorage.getItem(E);if(v!=null){S=v;try{localStorage.setItem(m,v),localStorage.removeItem(E)}catch{}}}const _=localStorage.getItem(y);S?localStorage.setItem("shiftStartDrawerFunds",S):localStorage.setItem("shiftStartDrawerFunds","0"),_?localStorage.setItem("shiftStartWalletBalances",_):localStorage.setItem("shiftStartWalletBalances","{}")}catch{}try{a!=null&&a.shopId&&(async()=>{try{const m=Ie(ne,"dashboardData",a.shopId),E=await xt(m);if(E.exists()){const y=E.data(),S=Number((y==null?void 0:y.cashBalance)??0),_=(y==null?void 0:y.walletBalances)??{};try{const v=localStorage.getItem("shiftStartDrawerFunds"),I=localStorage.getItem("shiftStartWalletBalances"),D=v?parseFloat(v):0,O=I?JSON.parse(I):{},V=!v||!Number.isFinite(D)||D===0,T=!I||Object.keys(O||{}).length===0;V&&localStorage.setItem("shiftStartDrawerFunds",String(Number.isFinite(S)?S:0)),T&&localStorage.setItem("shiftStartWalletBalances",JSON.stringify(_||{}))}catch{}}}catch(m){console.warn("Shift start Firebase read failed:",m)}})()}catch{}},h=()=>{i(!1);try{localStorage.setItem("cashier_shift_active","false")}catch{}};return N.jsx(tk.Provider,{value:{shiftUser:e,isShiftActive:r,shiftStartAt:s,setShiftUser:u,startShift:d,endShift:h},children:t})},sz=()=>{const t=b.useContext(tk);if(!t)throw new Error("useShift must be used within ShiftProvider");return t},nk=b.createContext(void 0);function b$({children:t}){const{profile:e,user:n,loading:r}=Wp(),[i,s]=b.useState(null),[o,a]=b.useState(null),[l,u]=b.useState(!0);b.useEffect(()=>{!r&&e?(s(e.shopId),a((e==null?void 0:e.shopName)||(n==null?void 0:n.displayName)||"المحل"),u(!1)):r||u(!1)},[e,r]);const d={shopId:i,shopName:o,loading:l};return N.jsx(nk.Provider,{value:d,children:t})}function oz(){const t=b.useContext(nk);return t===void 0?{shopId:null,shopName:null,loading:!1}:t}$A(document.getElementById("root")).render(N.jsx(jB,{children:N.jsx(x$,{children:N.jsx(b$,{children:N.jsx(P$,{})})})}));export{Kt as $,G$ as A,CB as B,oO as C,_i as D,p2 as E,Pw as F,ep as G,dr as H,C2 as I,ys as J,_t as K,B$ as L,uO as M,j$ as N,k$ as O,En as P,MB as Q,z as R,LB as S,De as T,dO as U,ag as V,_3 as W,sz as X,DE as Y,sO as Z,Se as _,dp as a,ig as a$,pO as a0,OE as a1,RF as a2,Ce as a3,ct as a4,bs as a5,Q$ as a6,NE as a7,aO as a8,ez as a9,Y$ as aA,o2 as aB,lO as aC,fO as aD,BP as aE,GM as aF,QM as aG,YM as aH,zA as aI,WA as aJ,O$ as aK,vs as aL,Du as aM,N2 as aN,Mm as aO,iO as aP,xl as aQ,W$ as aR,H$ as aS,hO as aT,ek as aU,rr as aV,Z$ as aW,F1 as aX,VB as aY,u2 as aZ,J$ as a_,Co as aa,Es as ab,Dr as ac,Pl as ad,Pn as ae,Ze as af,fp as ag,QF as ah,Mx as ai,Os as aj,y_ as ak,bx as al,q$ as am,Ur as an,Yv as ao,Qv as ap,C$ as aq,QA as ar,Jh as as,BM as at,z$ as au,nz as av,tz as aw,rz as ax,UB as ay,oz as az,$$ as b,og as b0,iz as b1,an as c,a2 as d,vr as e,ke as f,ne as g,nt as h,Fd as i,N as j,Ie as k,Zu as l,Xy as m,X$ as n,Vr as o,Ph as p,tt as q,b as r,w3 as s,gl as t,Wp as u,be as v,xt as w,m1 as x,Bo as y,eO as z};
