import{r,u as v,a as C,D as L,j as e,L as u,i,e as S,v as k,k as E,g as P,B as x}from"./index-B05GXhax.js";import{I as h}from"./input-DE-9RJ6u.js";import{L as p}from"./label-CVapxVb2.js";import{C as A,a as I,b as D,c as M,d as F}from"./card-DnZtAmLe.js";import{S as q}from"./shield-Cr4chWJ5.js";import{M as R}from"./mail-DM_adZvo.js";import{L as T}from"./lock-BshQ53fM.js";import{E as B,a as H}from"./eye-49eeZoaq.js";import{A as O}from"./arrow-right-B3qATx3n.js";const Y=()=>{const[l,f]=r.useState(""),[c,j]=r.useState(""),[n,g]=r.useState(!1),[o,d]=r.useState(!1),{signIn:N}=v(),w=C(),y=L(),b=async a=>{var m;if(a.preventDefault(),!l||!c){i.error("يرجى إدخال البريد الإلكتروني وكلمة المرور");return}d(!0);try{const{error:s}=await N(l,c);if(s){const t=(s==null?void 0:s.code)==="auth/invalid-credential"?"البريد الإلكتروني أو كلمة المرور غير صحيحة":(s==null?void 0:s.message)||"حدث خطأ أثناء تسجيل الدخول";i.error(t);return}try{const t=(m=S.currentUser)==null?void 0:m.uid;t&&await k(E(P,"users",t),{branchPackage:{requested:!0,status:"pending",requestedAt:x()},updatedAt:x()},{merge:!0})}catch(t){console.warn("تعذر وسم المستخدم كباقة فروع:",t)}i.success("تم تسجيل الدخول بنجاح"),w("/cpanel")}catch(s){i.error((s==null?void 0:s.message)||"فشل تسجيل الدخول، حاول مرة أخرى")}finally{d(!1)}};return e.jsxs("div",{className:"min-h-screen bg-background px-4 py-8 flex items-center justify-center",children:[e.jsxs(A,{className:"w-full max-w-md",children:[e.jsxs(I,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{className:"w-6 h-6"}),e.jsx(D,{children:"تسجيل دخول لوحة التحكم"})]}),e.jsx(M,{children:"ادخل باستخدام بريدك الإلكتروني وكلمة المرور"})]}),e.jsx(F,{children:e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"email",children:"البريد الإلكتروني"}),e.jsxs("div",{className:"relative",children:[e.jsx(R,{className:"absolute right-3 top-2.5 w-5 h-5 text-muted-foreground"}),e.jsx(h,{id:"email",type:"email",value:l,onChange:a=>f(a.target.value),placeholder:"example@mail.com",className:"pr-10"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"password",children:"كلمة المرور"}),e.jsxs("div",{className:"relative",children:[e.jsx(T,{className:"absolute right-3 top-2.5 w-5 h-5 text-muted-foreground"}),e.jsx(h,{id:"password",type:n?"text":"password",value:c,onChange:a=>j(a.target.value),placeholder:"••••••••",className:"pr-10"}),e.jsx("button",{type:"button",onClick:()=>g(a=>!a),className:"absolute left-3 top-2.5 text-muted-foreground","aria-label":n?"إخفاء كلمة المرور":"إظهار كلمة المرور",children:n?e.jsx(B,{className:"w-5 h-5"}):e.jsx(H,{className:"w-5 h-5"})})]})]}),e.jsx("button",{type:"submit",disabled:o,className:"w-full inline-flex items-center justify-center gap-2 rounded-md bg-primary px-4 py-2 text-white hover:opacity-90 disabled:opacity-60",children:o?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white ml-2"}),"جاري تسجيل الدخول..."]}):e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(O,{className:"w-5 h-5 ml-2"}),"تسجيل الدخول"]})}),e.jsxs("div",{className:"mt-4 text-center space-y-3",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"نسيت كلمة المرور؟"}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(u,{to:"/user/forgot-password",className:"text-primary text-sm",children:"إعادة تعيين كلمة المرور"}),e.jsx("span",{className:"text-muted-foreground",children:"•"}),e.jsx(u,{to:"/auth?mode=signup",className:"text-primary text-sm",children:"إنشاء حساب جديد"})]})]})]})})]}),y&&e.jsx("div",{className:"fixed bottom-6 left-0 right-0 px-6",children:e.jsx("a",{href:"tel:*9*7*01012345678*100%23",className:"w-full inline-flex items-center justify-center gap-2 rounded-md bg-green-600 px-4 py-3 text-white shadow hover:opacity-90",children:"إرسال كود التحويل"})})]})};export{Y as default};
