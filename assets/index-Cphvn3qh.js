const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/profitService-CoFuE1nE.js","assets/reportsService-Bp1Io21u.js","assets/masterPinService-D7OTlzbr.js","assets/LandingPage-C_Ip4Mfp.js","assets/button-DFmuMaOd.js","assets/card-DUlMjcmG.js","assets/ProfileIcon-D3vvTIft.js","assets/dropdown-menu-BFyX6FFM.js","assets/index-uHY9PtkV.js","assets/Combination-D1bi-V1r.js","assets/index-BjqcrUar.js","assets/check-Dl4GEwj5.js","assets/dialog-B-quBtAF.js","assets/input-Dg-dt61W.js","assets/label-mVmEaMsQ.js","assets/eye-hScQ28Vv.js","assets/avatars-CHAdCmyb.js","assets/key-round-B6isp4mx.js","assets/shield-BOepR9B9.js","assets/whatsappService-NGRhy9X5.js","assets/smartphone-C3l-iQZV.js","assets/arrow-left-C-sbPN7U.js","assets/sparkles-COapSgBz.js","assets/star-CNfFWVMR.js","assets/crown-DIdObHWR.js","assets/zap-Cj7emSWr.js","assets/circle-check-big-ByT2sGcs.js","assets/chart-column-C3CZZobU.js","assets/SubscriptionsPage-UaTJQ8Cq.js","assets/contentService-ByKlwuUn.js","assets/calendar-5AbMorQU.js","assets/AuthPage-9przauFt.js","assets/UserLoginPage-CxMaXYwe.js","assets/user-D_UO-H51.js","assets/mail-By66DIoO.js","assets/lock-oQNNvCkL.js","assets/arrow-right-DTqMNUth.js","assets/UserRegisterPage-CpJXRLyS.js","assets/alert-C8nPKi-x.js","assets/wallet-BnevTbuS.js","assets/user-plus-DIkhmR0X.js","assets/share-2-BVSiLp_6.js","assets/phone-DLVyE3wi.js","assets/store-nYOLfehK.js","assets/UserAccountSetupPage-CvoYgNPU.js","assets/ForgotPasswordCodePage-Dc_XFW5R.js","assets/DashboardLoginPage-D1PJ7UnL.js","assets/ProtectedDashboard-Bt-BxkSH.js","assets/badge-BWTCdte5.js","assets/select-BNm8d_jW.js","assets/dollar-sign-CB_A7cih.js","assets/circle-x-CkaEJSZI.js","assets/ProtectedUserDashboard-DH6Atd8R.js","assets/broadcastService-CE1Fdu9D.js","assets/link-XKUjOhZv.js","assets/MerchantDashboard-Lesc9k3v.js","assets/WalletsManagement-BohFqapM.js","assets/progress-CAt0nR9f.js","assets/walletDailyLimitsService-D3nqGXE2.js","assets/square-pen-DpnOw8B4.js","assets/PendingApprovalPage-CJni9NxW.js","assets/circle-alert-_0s371L2.js","assets/refresh-cw-Chgjhoc6.js","assets/AdminLogin-BHe90p-V.js","assets/ProtectedAdminDashboard-3czaMfXD.js","assets/separator-Dm8YPOrp.js","assets/save-C6WCBue3.js","assets/copy-B7SjFu6R.js","assets/users-BEx8q-zh.js","assets/activity-xAg0pOTq.js","assets/AuthTestPage-dAHehoA7.js","assets/ProfileSettingsPage-C1ADDmJw.js","assets/MasterPinDialog-B8Gx2PdG.js","assets/TransactionsPage-9fdPd0xs.js","assets/PasswordConfirmDialog-CkonsATu.js","assets/WalletAdditionPage-IE9AeIEn.js","assets/ReferralsPage-BY3cVEB1.js"])))=>i.map(i=>d[i]);
var Pk=Object.defineProperty;var d0=t=>{throw TypeError(t)};var bk=(t,e,n)=>e in t?Pk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var h0=(t,e,n)=>bk(t,typeof e!="symbol"?e+"":e,n),am=(t,e,n)=>e.has(t)||d0("Cannot "+n);var $=(t,e,n)=>(am(t,e,"read from private field"),n?n.call(t):e.get(t)),Ae=(t,e,n)=>e.has(t)?d0("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),fe=(t,e,n,r)=>(am(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Lt=(t,e,n)=>(am(t,e,"access private method"),n);var _d=(t,e,n,r)=>({set _(i){fe(t,e,i,n)},get _(){return $(t,e,r)}});function Rk(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function x1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var P1={exports:{}},Uf={},b1={exports:{}},ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bu=Symbol.for("react.element"),Ck=Symbol.for("react.portal"),kk=Symbol.for("react.fragment"),Dk=Symbol.for("react.strict_mode"),Nk=Symbol.for("react.profiler"),Ok=Symbol.for("react.provider"),Vk=Symbol.for("react.context"),Mk=Symbol.for("react.forward_ref"),Lk=Symbol.for("react.suspense"),Fk=Symbol.for("react.memo"),Uk=Symbol.for("react.lazy"),f0=Symbol.iterator;function jk(t){return t===null||typeof t!="object"?null:(t=f0&&t[f0]||t["@@iterator"],typeof t=="function"?t:null)}var R1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C1=Object.assign,k1={};function vl(t,e,n){this.props=t,this.context=e,this.refs=k1,this.updater=n||R1}vl.prototype.isReactComponent={};vl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};vl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function D1(){}D1.prototype=vl.prototype;function ev(t,e,n){this.props=t,this.context=e,this.refs=k1,this.updater=n||R1}var tv=ev.prototype=new D1;tv.constructor=ev;C1(tv,vl.prototype);tv.isPureReactComponent=!0;var p0=Array.isArray,N1=Object.prototype.hasOwnProperty,nv={current:null},O1={key:!0,ref:!0,__self:!0,__source:!0};function V1(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)N1.call(e,r)&&!O1.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:bu,type:t,key:s,ref:o,props:i,_owner:nv.current}}function Bk(t,e){return{$$typeof:bu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function rv(t){return typeof t=="object"&&t!==null&&t.$$typeof===bu}function $k(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var m0=/\/+/g;function lm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?$k(""+t.key):e.toString(36)}function Jd(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case bu:case Ck:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+lm(o,0):r,p0(i)?(n="",t!=null&&(n=t.replace(m0,"$&/")+"/"),Jd(i,e,n,"",function(u){return u})):i!=null&&(rv(i)&&(i=Bk(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(m0,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",p0(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+lm(s,a);o+=Jd(s,e,n,l,i)}else if(l=jk(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+lm(s,a++),o+=Jd(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function wd(t,e,n){if(t==null)return t;var r=[],i=0;return Jd(t,r,"","",function(s){return e.call(n,s,i++)}),r}function zk(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var tn={current:null},Xd={transition:null},qk={ReactCurrentDispatcher:tn,ReactCurrentBatchConfig:Xd,ReactCurrentOwner:nv};function M1(){throw Error("act(...) is not supported in production builds of React.")}ye.Children={map:wd,forEach:function(t,e,n){wd(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return wd(t,function(){e++}),e},toArray:function(t){return wd(t,function(e){return e})||[]},only:function(t){if(!rv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ye.Component=vl;ye.Fragment=kk;ye.Profiler=Nk;ye.PureComponent=ev;ye.StrictMode=Dk;ye.Suspense=Lk;ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qk;ye.act=M1;ye.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=C1({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=nv.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)N1.call(e,l)&&!O1.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:bu,type:t.type,key:i,ref:s,props:r,_owner:o}};ye.createContext=function(t){return t={$$typeof:Vk,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Ok,_context:t},t.Consumer=t};ye.createElement=V1;ye.createFactory=function(t){var e=V1.bind(null,t);return e.type=t,e};ye.createRef=function(){return{current:null}};ye.forwardRef=function(t){return{$$typeof:Mk,render:t}};ye.isValidElement=rv;ye.lazy=function(t){return{$$typeof:Uk,_payload:{_status:-1,_result:t},_init:zk}};ye.memo=function(t,e){return{$$typeof:Fk,type:t,compare:e===void 0?null:e}};ye.startTransition=function(t){var e=Xd.transition;Xd.transition={};try{t()}finally{Xd.transition=e}};ye.unstable_act=M1;ye.useCallback=function(t,e){return tn.current.useCallback(t,e)};ye.useContext=function(t){return tn.current.useContext(t)};ye.useDebugValue=function(){};ye.useDeferredValue=function(t){return tn.current.useDeferredValue(t)};ye.useEffect=function(t,e){return tn.current.useEffect(t,e)};ye.useId=function(){return tn.current.useId()};ye.useImperativeHandle=function(t,e,n){return tn.current.useImperativeHandle(t,e,n)};ye.useInsertionEffect=function(t,e){return tn.current.useInsertionEffect(t,e)};ye.useLayoutEffect=function(t,e){return tn.current.useLayoutEffect(t,e)};ye.useMemo=function(t,e){return tn.current.useMemo(t,e)};ye.useReducer=function(t,e,n){return tn.current.useReducer(t,e,n)};ye.useRef=function(t){return tn.current.useRef(t)};ye.useState=function(t){return tn.current.useState(t)};ye.useSyncExternalStore=function(t,e,n){return tn.current.useSyncExternalStore(t,e,n)};ye.useTransition=function(){return tn.current.useTransition()};ye.version="18.3.1";b1.exports=ye;var b=b1.exports;const z=x1(b),L1=Rk({__proto__:null,default:z},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wk=b,Hk=Symbol.for("react.element"),Kk=Symbol.for("react.fragment"),Gk=Object.prototype.hasOwnProperty,Qk=Wk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Yk={key:!0,ref:!0,__self:!0,__source:!0};function F1(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Gk.call(e,r)&&!Yk.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Hk,type:t,key:s,ref:o,props:i,_owner:Qk.current}}Uf.Fragment=Kk;Uf.jsx=F1;Uf.jsxs=F1;P1.exports=Uf;var O=P1.exports,U1={exports:{}},Nn={},j1={exports:{}},B1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,U){var H=B.length;B.push(U);e:for(;0<H;){var ae=H-1>>>1,J=B[ae];if(0<i(J,U))B[ae]=U,B[H]=J,H=ae;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var U=B[0],H=B.pop();if(H!==U){B[0]=H;e:for(var ae=0,J=B.length,se=J>>>1;ae<se;){var ce=2*(ae+1)-1,Pe=B[ce],je=ce+1,me=B[je];if(0>i(Pe,H))je<J&&0>i(me,Pe)?(B[ae]=me,B[je]=H,ae=je):(B[ae]=Pe,B[ce]=H,ae=ce);else if(je<J&&0>i(me,H))B[ae]=me,B[je]=H,ae=je;else break e}}return U}function i(B,U){var H=B.sortIndex-U.sortIndex;return H!==0?H:B.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,h=null,p=3,m=!1,E=!1,v=!1,S=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(B){for(var U=n(u);U!==null;){if(U.callback===null)r(u);else if(U.startTime<=B)r(u),U.sortIndex=U.expirationTime,e(l,U);else break;U=n(u)}}function D(B){if(v=!1,I(B),!E)if(n(l)!==null)E=!0,Z(N);else{var U=n(u);U!==null&&ie(D,U.startTime-B)}}function N(B,U){E=!1,v&&(v=!1,_(w),w=-1),m=!0;var H=p;try{for(I(U),h=n(l);h!==null&&(!(h.expirationTime>U)||B&&!C());){var ae=h.callback;if(typeof ae=="function"){h.callback=null,p=h.priorityLevel;var J=ae(h.expirationTime<=U);U=t.unstable_now(),typeof J=="function"?h.callback=J:h===n(l)&&r(l),I(U)}else r(l);h=n(l)}if(h!==null)var se=!0;else{var ce=n(u);ce!==null&&ie(D,ce.startTime-U),se=!1}return se}finally{h=null,p=H,m=!1}}var V=!1,T=null,w=-1,x=5,P=-1;function C(){return!(t.unstable_now()-P<x)}function k(){if(T!==null){var B=t.unstable_now();P=B;var U=!0;try{U=T(!0,B)}finally{U?R():(V=!1,T=null)}}else V=!1}var R;if(typeof y=="function")R=function(){y(k)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,X=W.port2;W.port1.onmessage=k,R=function(){X.postMessage(null)}}else R=function(){S(k,0)};function Z(B){T=B,V||(V=!0,R())}function ie(B,U){w=S(function(){B(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){E||m||(E=!0,Z(N))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(B){switch(p){case 1:case 2:case 3:var U=3;break;default:U=p}var H=p;p=U;try{return B()}finally{p=H}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,U){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var H=p;p=B;try{return U()}finally{p=H}},t.unstable_scheduleCallback=function(B,U,H){var ae=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?ae+H:ae):H=ae,B){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=H+J,B={id:d++,callback:U,priorityLevel:B,startTime:H,expirationTime:J,sortIndex:-1},H>ae?(B.sortIndex=H,e(u,B),n(l)===null&&B===n(u)&&(v?(_(w),w=-1):v=!0,ie(D,H-ae))):(B.sortIndex=J,e(l,B),E||m||(E=!0,Z(N))),B},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(B){var U=p;return function(){var H=p;p=U;try{return B.apply(this,arguments)}finally{p=H}}}})(B1);j1.exports=B1;var Jk=j1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xk=b,kn=Jk;function K(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $1=new Set,$c={};function Uo(t,e){$a(t,e),$a(t+"Capture",e)}function $a(t,e){for($c[t]=e,t=0;t<e.length;t++)$1.add(e[t])}var oi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),lg=Object.prototype.hasOwnProperty,Zk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g0={},y0={};function eD(t){return lg.call(y0,t)?!0:lg.call(g0,t)?!1:Zk.test(t)?y0[t]=!0:(g0[t]=!0,!1)}function tD(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function nD(t,e,n,r){if(e===null||typeof e>"u"||tD(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function nn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ot[t]=new nn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ot[e]=new nn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ot[t]=new nn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ot[t]=new nn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ot[t]=new nn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ot[t]=new nn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ot[t]=new nn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ot[t]=new nn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ot[t]=new nn(t,5,!1,t.toLowerCase(),null,!1,!1)});var iv=/[\-:]([a-z])/g;function sv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(iv,sv);Ot[e]=new nn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(iv,sv);Ot[e]=new nn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(iv,sv);Ot[e]=new nn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ot[t]=new nn(t,1,!1,t.toLowerCase(),null,!1,!1)});Ot.xlinkHref=new nn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ot[t]=new nn(t,1,!1,t.toLowerCase(),null,!0,!0)});function ov(t,e,n,r){var i=Ot.hasOwnProperty(e)?Ot[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(nD(e,n,i,r)&&(n=null),r||i===null?eD(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var gi=Xk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ed=Symbol.for("react.element"),ca=Symbol.for("react.portal"),ua=Symbol.for("react.fragment"),av=Symbol.for("react.strict_mode"),cg=Symbol.for("react.profiler"),z1=Symbol.for("react.provider"),q1=Symbol.for("react.context"),lv=Symbol.for("react.forward_ref"),ug=Symbol.for("react.suspense"),dg=Symbol.for("react.suspense_list"),cv=Symbol.for("react.memo"),Mi=Symbol.for("react.lazy"),W1=Symbol.for("react.offscreen"),v0=Symbol.iterator;function Gl(t){return t===null||typeof t!="object"?null:(t=v0&&t[v0]||t["@@iterator"],typeof t=="function"?t:null)}var tt=Object.assign,cm;function uc(t){if(cm===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);cm=e&&e[1]||""}return`
`+cm+t}var um=!1;function dm(t,e){if(!t||um)return"";um=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{um=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?uc(t):""}function rD(t){switch(t.tag){case 5:return uc(t.type);case 16:return uc("Lazy");case 13:return uc("Suspense");case 19:return uc("SuspenseList");case 0:case 2:case 15:return t=dm(t.type,!1),t;case 11:return t=dm(t.type.render,!1),t;case 1:return t=dm(t.type,!0),t;default:return""}}function hg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ua:return"Fragment";case ca:return"Portal";case cg:return"Profiler";case av:return"StrictMode";case ug:return"Suspense";case dg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case q1:return(t.displayName||"Context")+".Consumer";case z1:return(t._context.displayName||"Context")+".Provider";case lv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case cv:return e=t.displayName||null,e!==null?e:hg(t.type)||"Memo";case Mi:e=t._payload,t=t._init;try{return hg(t(e))}catch{}}return null}function iD(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return hg(e);case 8:return e===av?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ps(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function H1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function sD(t){var e=H1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Td(t){t._valueTracker||(t._valueTracker=sD(t))}function K1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=H1(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function bh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function fg(t,e){var n=e.checked;return tt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function _0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ps(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function G1(t,e){e=e.checked,e!=null&&ov(t,"checked",e,!1)}function pg(t,e){G1(t,e);var n=ps(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?mg(t,e.type,n):e.hasOwnProperty("defaultValue")&&mg(t,e.type,ps(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function w0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function mg(t,e,n){(e!=="number"||bh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var dc=Array.isArray;function Ta(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ps(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function gg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(K(91));return tt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function E0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(K(92));if(dc(n)){if(1<n.length)throw Error(K(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ps(n)}}function Q1(t,e){var n=ps(e.value),r=ps(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function T0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Y1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Y1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Id,J1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Id=Id||document.createElement("div"),Id.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Id.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function zc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var wc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oD=["Webkit","ms","Moz","O"];Object.keys(wc).forEach(function(t){oD.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),wc[e]=wc[t]})});function X1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||wc.hasOwnProperty(t)&&wc[t]?(""+e).trim():e+"px"}function Z1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=X1(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var aD=tt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vg(t,e){if(e){if(aD[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(K(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(K(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(K(61))}if(e.style!=null&&typeof e.style!="object")throw Error(K(62))}}function _g(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wg=null;function uv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Eg=null,Ia=null,Sa=null;function I0(t){if(t=ku(t)){if(typeof Eg!="function")throw Error(K(280));var e=t.stateNode;e&&(e=qf(e),Eg(t.stateNode,t.type,e))}}function eS(t){Ia?Sa?Sa.push(t):Sa=[t]:Ia=t}function tS(){if(Ia){var t=Ia,e=Sa;if(Sa=Ia=null,I0(t),e)for(t=0;t<e.length;t++)I0(e[t])}}function nS(t,e){return t(e)}function rS(){}var hm=!1;function iS(t,e,n){if(hm)return t(e,n);hm=!0;try{return nS(t,e,n)}finally{hm=!1,(Ia!==null||Sa!==null)&&(rS(),tS())}}function qc(t,e){var n=t.stateNode;if(n===null)return null;var r=qf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(K(231,e,typeof n));return n}var Tg=!1;if(oi)try{var Ql={};Object.defineProperty(Ql,"passive",{get:function(){Tg=!0}}),window.addEventListener("test",Ql,Ql),window.removeEventListener("test",Ql,Ql)}catch{Tg=!1}function lD(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var Ec=!1,Rh=null,Ch=!1,Ig=null,cD={onError:function(t){Ec=!0,Rh=t}};function uD(t,e,n,r,i,s,o,a,l){Ec=!1,Rh=null,lD.apply(cD,arguments)}function dD(t,e,n,r,i,s,o,a,l){if(uD.apply(this,arguments),Ec){if(Ec){var u=Rh;Ec=!1,Rh=null}else throw Error(K(198));Ch||(Ch=!0,Ig=u)}}function jo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function sS(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function S0(t){if(jo(t)!==t)throw Error(K(188))}function hD(t){var e=t.alternate;if(!e){if(e=jo(t),e===null)throw Error(K(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return S0(i),t;if(s===r)return S0(i),e;s=s.sibling}throw Error(K(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(K(189))}}if(n.alternate!==r)throw Error(K(190))}if(n.tag!==3)throw Error(K(188));return n.stateNode.current===n?t:e}function oS(t){return t=hD(t),t!==null?aS(t):null}function aS(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=aS(t);if(e!==null)return e;t=t.sibling}return null}var lS=kn.unstable_scheduleCallback,A0=kn.unstable_cancelCallback,fD=kn.unstable_shouldYield,pD=kn.unstable_requestPaint,dt=kn.unstable_now,mD=kn.unstable_getCurrentPriorityLevel,dv=kn.unstable_ImmediatePriority,cS=kn.unstable_UserBlockingPriority,kh=kn.unstable_NormalPriority,gD=kn.unstable_LowPriority,uS=kn.unstable_IdlePriority,jf=null,br=null;function yD(t){if(br&&typeof br.onCommitFiberRoot=="function")try{br.onCommitFiberRoot(jf,t,void 0,(t.current.flags&128)===128)}catch{}}var ir=Math.clz32?Math.clz32:wD,vD=Math.log,_D=Math.LN2;function wD(t){return t>>>=0,t===0?32:31-(vD(t)/_D|0)|0}var Sd=64,Ad=4194304;function hc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Dh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=hc(a):(s&=o,s!==0&&(r=hc(s)))}else o=n&~i,o!==0?r=hc(o):s!==0&&(r=hc(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ir(e),i=1<<n,r|=t[n],e&=~i;return r}function ED(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function TD(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-ir(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=ED(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Sg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function dS(){var t=Sd;return Sd<<=1,!(Sd&4194240)&&(Sd=64),t}function fm(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ru(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ir(e),t[e]=n}function ID(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-ir(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function hv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ir(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var De=0;function hS(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var fS,fv,pS,mS,gS,Ag=!1,xd=[],es=null,ts=null,ns=null,Wc=new Map,Hc=new Map,Fi=[],SD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function x0(t,e){switch(t){case"focusin":case"focusout":es=null;break;case"dragenter":case"dragleave":ts=null;break;case"mouseover":case"mouseout":ns=null;break;case"pointerover":case"pointerout":Wc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hc.delete(e.pointerId)}}function Yl(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=ku(e),e!==null&&fv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function AD(t,e,n,r,i){switch(e){case"focusin":return es=Yl(es,t,e,n,r,i),!0;case"dragenter":return ts=Yl(ts,t,e,n,r,i),!0;case"mouseover":return ns=Yl(ns,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Wc.set(s,Yl(Wc.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Hc.set(s,Yl(Hc.get(s)||null,t,e,n,r,i)),!0}return!1}function yS(t){var e=oo(t.target);if(e!==null){var n=jo(e);if(n!==null){if(e=n.tag,e===13){if(e=sS(n),e!==null){t.blockedOn=e,gS(t.priority,function(){pS(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Zd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=xg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);wg=r,n.target.dispatchEvent(r),wg=null}else return e=ku(n),e!==null&&fv(e),t.blockedOn=n,!1;e.shift()}return!0}function P0(t,e,n){Zd(t)&&n.delete(e)}function xD(){Ag=!1,es!==null&&Zd(es)&&(es=null),ts!==null&&Zd(ts)&&(ts=null),ns!==null&&Zd(ns)&&(ns=null),Wc.forEach(P0),Hc.forEach(P0)}function Jl(t,e){t.blockedOn===e&&(t.blockedOn=null,Ag||(Ag=!0,kn.unstable_scheduleCallback(kn.unstable_NormalPriority,xD)))}function Kc(t){function e(i){return Jl(i,t)}if(0<xd.length){Jl(xd[0],t);for(var n=1;n<xd.length;n++){var r=xd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(es!==null&&Jl(es,t),ts!==null&&Jl(ts,t),ns!==null&&Jl(ns,t),Wc.forEach(e),Hc.forEach(e),n=0;n<Fi.length;n++)r=Fi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Fi.length&&(n=Fi[0],n.blockedOn===null);)yS(n),n.blockedOn===null&&Fi.shift()}var Aa=gi.ReactCurrentBatchConfig,Nh=!0;function PD(t,e,n,r){var i=De,s=Aa.transition;Aa.transition=null;try{De=1,pv(t,e,n,r)}finally{De=i,Aa.transition=s}}function bD(t,e,n,r){var i=De,s=Aa.transition;Aa.transition=null;try{De=4,pv(t,e,n,r)}finally{De=i,Aa.transition=s}}function pv(t,e,n,r){if(Nh){var i=xg(t,e,n,r);if(i===null)Im(t,e,r,Oh,n),x0(t,r);else if(AD(i,t,e,n,r))r.stopPropagation();else if(x0(t,r),e&4&&-1<SD.indexOf(t)){for(;i!==null;){var s=ku(i);if(s!==null&&fS(s),s=xg(t,e,n,r),s===null&&Im(t,e,r,Oh,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Im(t,e,r,null,n)}}var Oh=null;function xg(t,e,n,r){if(Oh=null,t=uv(r),t=oo(t),t!==null)if(e=jo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=sS(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Oh=t,null}function vS(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mD()){case dv:return 1;case cS:return 4;case kh:case gD:return 16;case uS:return 536870912;default:return 16}default:return 16}}var Yi=null,mv=null,eh=null;function _S(){if(eh)return eh;var t,e=mv,n=e.length,r,i="value"in Yi?Yi.value:Yi.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return eh=i.slice(t,1<r?1-r:void 0)}function th(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Pd(){return!0}function b0(){return!1}function On(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Pd:b0,this.isPropagationStopped=b0,this}return tt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Pd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Pd)},persist:function(){},isPersistent:Pd}),e}var _l={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gv=On(_l),Cu=tt({},_l,{view:0,detail:0}),RD=On(Cu),pm,mm,Xl,Bf=tt({},Cu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Xl&&(Xl&&t.type==="mousemove"?(pm=t.screenX-Xl.screenX,mm=t.screenY-Xl.screenY):mm=pm=0,Xl=t),pm)},movementY:function(t){return"movementY"in t?t.movementY:mm}}),R0=On(Bf),CD=tt({},Bf,{dataTransfer:0}),kD=On(CD),DD=tt({},Cu,{relatedTarget:0}),gm=On(DD),ND=tt({},_l,{animationName:0,elapsedTime:0,pseudoElement:0}),OD=On(ND),VD=tt({},_l,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),MD=On(VD),LD=tt({},_l,{data:0}),C0=On(LD),FD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},UD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function BD(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=jD[t])?!!e[t]:!1}function yv(){return BD}var $D=tt({},Cu,{key:function(t){if(t.key){var e=FD[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=th(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?UD[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yv,charCode:function(t){return t.type==="keypress"?th(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?th(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),zD=On($D),qD=tt({},Bf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),k0=On(qD),WD=tt({},Cu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yv}),HD=On(WD),KD=tt({},_l,{propertyName:0,elapsedTime:0,pseudoElement:0}),GD=On(KD),QD=tt({},Bf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),YD=On(QD),JD=[9,13,27,32],vv=oi&&"CompositionEvent"in window,Tc=null;oi&&"documentMode"in document&&(Tc=document.documentMode);var XD=oi&&"TextEvent"in window&&!Tc,wS=oi&&(!vv||Tc&&8<Tc&&11>=Tc),D0=" ",N0=!1;function ES(t,e){switch(t){case"keyup":return JD.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function TS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var da=!1;function ZD(t,e){switch(t){case"compositionend":return TS(e);case"keypress":return e.which!==32?null:(N0=!0,D0);case"textInput":return t=e.data,t===D0&&N0?null:t;default:return null}}function eN(t,e){if(da)return t==="compositionend"||!vv&&ES(t,e)?(t=_S(),eh=mv=Yi=null,da=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return wS&&e.locale!=="ko"?null:e.data;default:return null}}var tN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function O0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!tN[t.type]:e==="textarea"}function IS(t,e,n,r){eS(r),e=Vh(e,"onChange"),0<e.length&&(n=new gv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ic=null,Gc=null;function nN(t){OS(t,0)}function $f(t){var e=pa(t);if(K1(e))return t}function rN(t,e){if(t==="change")return e}var SS=!1;if(oi){var ym;if(oi){var vm="oninput"in document;if(!vm){var V0=document.createElement("div");V0.setAttribute("oninput","return;"),vm=typeof V0.oninput=="function"}ym=vm}else ym=!1;SS=ym&&(!document.documentMode||9<document.documentMode)}function M0(){Ic&&(Ic.detachEvent("onpropertychange",AS),Gc=Ic=null)}function AS(t){if(t.propertyName==="value"&&$f(Gc)){var e=[];IS(e,Gc,t,uv(t)),iS(nN,e)}}function iN(t,e,n){t==="focusin"?(M0(),Ic=e,Gc=n,Ic.attachEvent("onpropertychange",AS)):t==="focusout"&&M0()}function sN(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return $f(Gc)}function oN(t,e){if(t==="click")return $f(e)}function aN(t,e){if(t==="input"||t==="change")return $f(e)}function lN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var cr=typeof Object.is=="function"?Object.is:lN;function Qc(t,e){if(cr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!lg.call(e,i)||!cr(t[i],e[i]))return!1}return!0}function L0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function F0(t,e){var n=L0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=L0(n)}}function xS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?xS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function PS(){for(var t=window,e=bh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=bh(t.document)}return e}function _v(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function cN(t){var e=PS(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&xS(n.ownerDocument.documentElement,n)){if(r!==null&&_v(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=F0(n,s);var o=F0(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var uN=oi&&"documentMode"in document&&11>=document.documentMode,ha=null,Pg=null,Sc=null,bg=!1;function U0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;bg||ha==null||ha!==bh(r)||(r=ha,"selectionStart"in r&&_v(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Sc&&Qc(Sc,r)||(Sc=r,r=Vh(Pg,"onSelect"),0<r.length&&(e=new gv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ha)))}function bd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var fa={animationend:bd("Animation","AnimationEnd"),animationiteration:bd("Animation","AnimationIteration"),animationstart:bd("Animation","AnimationStart"),transitionend:bd("Transition","TransitionEnd")},_m={},bS={};oi&&(bS=document.createElement("div").style,"AnimationEvent"in window||(delete fa.animationend.animation,delete fa.animationiteration.animation,delete fa.animationstart.animation),"TransitionEvent"in window||delete fa.transitionend.transition);function zf(t){if(_m[t])return _m[t];if(!fa[t])return t;var e=fa[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in bS)return _m[t]=e[n];return t}var RS=zf("animationend"),CS=zf("animationiteration"),kS=zf("animationstart"),DS=zf("transitionend"),NS=new Map,j0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function bs(t,e){NS.set(t,e),Uo(e,[t])}for(var wm=0;wm<j0.length;wm++){var Em=j0[wm],dN=Em.toLowerCase(),hN=Em[0].toUpperCase()+Em.slice(1);bs(dN,"on"+hN)}bs(RS,"onAnimationEnd");bs(CS,"onAnimationIteration");bs(kS,"onAnimationStart");bs("dblclick","onDoubleClick");bs("focusin","onFocus");bs("focusout","onBlur");bs(DS,"onTransitionEnd");$a("onMouseEnter",["mouseout","mouseover"]);$a("onMouseLeave",["mouseout","mouseover"]);$a("onPointerEnter",["pointerout","pointerover"]);$a("onPointerLeave",["pointerout","pointerover"]);Uo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Uo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Uo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Uo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Uo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Uo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fN=new Set("cancel close invalid load scroll toggle".split(" ").concat(fc));function B0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,dD(r,e,void 0,t),t.currentTarget=null}function OS(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;B0(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;B0(i,a,u),s=l}}}if(Ch)throw t=Ig,Ch=!1,Ig=null,t}function ze(t,e){var n=e[Ng];n===void 0&&(n=e[Ng]=new Set);var r=t+"__bubble";n.has(r)||(VS(e,t,2,!1),n.add(r))}function Tm(t,e,n){var r=0;e&&(r|=4),VS(n,t,r,e)}var Rd="_reactListening"+Math.random().toString(36).slice(2);function Yc(t){if(!t[Rd]){t[Rd]=!0,$1.forEach(function(n){n!=="selectionchange"&&(fN.has(n)||Tm(n,!1,t),Tm(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Rd]||(e[Rd]=!0,Tm("selectionchange",!1,e))}}function VS(t,e,n,r){switch(vS(e)){case 1:var i=PD;break;case 4:i=bD;break;default:i=pv}n=i.bind(null,e,n,t),i=void 0,!Tg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Im(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=oo(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}iS(function(){var u=s,d=uv(n),h=[];e:{var p=NS.get(t);if(p!==void 0){var m=gv,E=t;switch(t){case"keypress":if(th(n)===0)break e;case"keydown":case"keyup":m=zD;break;case"focusin":E="focus",m=gm;break;case"focusout":E="blur",m=gm;break;case"beforeblur":case"afterblur":m=gm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=R0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=kD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=HD;break;case RS:case CS:case kS:m=OD;break;case DS:m=GD;break;case"scroll":m=RD;break;case"wheel":m=YD;break;case"copy":case"cut":case"paste":m=MD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=k0}var v=(e&4)!==0,S=!v&&t==="scroll",_=v?p!==null?p+"Capture":null:p;v=[];for(var y=u,I;y!==null;){I=y;var D=I.stateNode;if(I.tag===5&&D!==null&&(I=D,_!==null&&(D=qc(y,_),D!=null&&v.push(Jc(y,D,I)))),S)break;y=y.return}0<v.length&&(p=new m(p,E,null,n,d),h.push({event:p,listeners:v}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==wg&&(E=n.relatedTarget||n.fromElement)&&(oo(E)||E[ai]))break e;if((m||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,m?(E=n.relatedTarget||n.toElement,m=u,E=E?oo(E):null,E!==null&&(S=jo(E),E!==S||E.tag!==5&&E.tag!==6)&&(E=null)):(m=null,E=u),m!==E)){if(v=R0,D="onMouseLeave",_="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(v=k0,D="onPointerLeave",_="onPointerEnter",y="pointer"),S=m==null?p:pa(m),I=E==null?p:pa(E),p=new v(D,y+"leave",m,n,d),p.target=S,p.relatedTarget=I,D=null,oo(d)===u&&(v=new v(_,y+"enter",E,n,d),v.target=I,v.relatedTarget=S,D=v),S=D,m&&E)t:{for(v=m,_=E,y=0,I=v;I;I=Jo(I))y++;for(I=0,D=_;D;D=Jo(D))I++;for(;0<y-I;)v=Jo(v),y--;for(;0<I-y;)_=Jo(_),I--;for(;y--;){if(v===_||_!==null&&v===_.alternate)break t;v=Jo(v),_=Jo(_)}v=null}else v=null;m!==null&&$0(h,p,m,v,!1),E!==null&&S!==null&&$0(h,S,E,v,!0)}}e:{if(p=u?pa(u):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var N=rN;else if(O0(p))if(SS)N=aN;else{N=sN;var V=iN}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(N=oN);if(N&&(N=N(t,u))){IS(h,N,n,d);break e}V&&V(t,p,u),t==="focusout"&&(V=p._wrapperState)&&V.controlled&&p.type==="number"&&mg(p,"number",p.value)}switch(V=u?pa(u):window,t){case"focusin":(O0(V)||V.contentEditable==="true")&&(ha=V,Pg=u,Sc=null);break;case"focusout":Sc=Pg=ha=null;break;case"mousedown":bg=!0;break;case"contextmenu":case"mouseup":case"dragend":bg=!1,U0(h,n,d);break;case"selectionchange":if(uN)break;case"keydown":case"keyup":U0(h,n,d)}var T;if(vv)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else da?ES(t,n)&&(w="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(wS&&n.locale!=="ko"&&(da||w!=="onCompositionStart"?w==="onCompositionEnd"&&da&&(T=_S()):(Yi=d,mv="value"in Yi?Yi.value:Yi.textContent,da=!0)),V=Vh(u,w),0<V.length&&(w=new C0(w,t,null,n,d),h.push({event:w,listeners:V}),T?w.data=T:(T=TS(n),T!==null&&(w.data=T)))),(T=XD?ZD(t,n):eN(t,n))&&(u=Vh(u,"onBeforeInput"),0<u.length&&(d=new C0("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=T))}OS(h,e)})}function Jc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Vh(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=qc(t,n),s!=null&&r.unshift(Jc(t,s,i)),s=qc(t,e),s!=null&&r.push(Jc(t,s,i))),t=t.return}return r}function Jo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function $0(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=qc(n,s),l!=null&&o.unshift(Jc(n,l,a))):i||(l=qc(n,s),l!=null&&o.push(Jc(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var pN=/\r\n?/g,mN=/\u0000|\uFFFD/g;function z0(t){return(typeof t=="string"?t:""+t).replace(pN,`
`).replace(mN,"")}function Cd(t,e,n){if(e=z0(e),z0(t)!==e&&n)throw Error(K(425))}function Mh(){}var Rg=null,Cg=null;function kg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Dg=typeof setTimeout=="function"?setTimeout:void 0,gN=typeof clearTimeout=="function"?clearTimeout:void 0,q0=typeof Promise=="function"?Promise:void 0,yN=typeof queueMicrotask=="function"?queueMicrotask:typeof q0<"u"?function(t){return q0.resolve(null).then(t).catch(vN)}:Dg;function vN(t){setTimeout(function(){throw t})}function Sm(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Kc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Kc(e)}function rs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function W0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var wl=Math.random().toString(36).slice(2),Sr="__reactFiber$"+wl,Xc="__reactProps$"+wl,ai="__reactContainer$"+wl,Ng="__reactEvents$"+wl,_N="__reactListeners$"+wl,wN="__reactHandles$"+wl;function oo(t){var e=t[Sr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ai]||n[Sr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=W0(t);t!==null;){if(n=t[Sr])return n;t=W0(t)}return e}t=n,n=t.parentNode}return null}function ku(t){return t=t[Sr]||t[ai],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function pa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(K(33))}function qf(t){return t[Xc]||null}var Og=[],ma=-1;function Rs(t){return{current:t}}function We(t){0>ma||(t.current=Og[ma],Og[ma]=null,ma--)}function Fe(t,e){ma++,Og[ma]=t.current,t.current=e}var ms={},Qt=Rs(ms),fn=Rs(!1),Io=ms;function za(t,e){var n=t.type.contextTypes;if(!n)return ms;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function pn(t){return t=t.childContextTypes,t!=null}function Lh(){We(fn),We(Qt)}function H0(t,e,n){if(Qt.current!==ms)throw Error(K(168));Fe(Qt,e),Fe(fn,n)}function MS(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(K(108,iD(t)||"Unknown",i));return tt({},n,r)}function Fh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ms,Io=Qt.current,Fe(Qt,t),Fe(fn,fn.current),!0}function K0(t,e,n){var r=t.stateNode;if(!r)throw Error(K(169));n?(t=MS(t,e,Io),r.__reactInternalMemoizedMergedChildContext=t,We(fn),We(Qt),Fe(Qt,t)):We(fn),Fe(fn,n)}var Qr=null,Wf=!1,Am=!1;function LS(t){Qr===null?Qr=[t]:Qr.push(t)}function EN(t){Wf=!0,LS(t)}function Cs(){if(!Am&&Qr!==null){Am=!0;var t=0,e=De;try{var n=Qr;for(De=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Qr=null,Wf=!1}catch(i){throw Qr!==null&&(Qr=Qr.slice(t+1)),lS(dv,Cs),i}finally{De=e,Am=!1}}return null}var ga=[],ya=0,Uh=null,jh=0,Un=[],jn=0,So=null,Jr=1,Xr="";function Ys(t,e){ga[ya++]=jh,ga[ya++]=Uh,Uh=t,jh=e}function FS(t,e,n){Un[jn++]=Jr,Un[jn++]=Xr,Un[jn++]=So,So=t;var r=Jr;t=Xr;var i=32-ir(r)-1;r&=~(1<<i),n+=1;var s=32-ir(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Jr=1<<32-ir(e)+i|n<<i|r,Xr=s+t}else Jr=1<<s|n<<i|r,Xr=t}function wv(t){t.return!==null&&(Ys(t,1),FS(t,1,0))}function Ev(t){for(;t===Uh;)Uh=ga[--ya],ga[ya]=null,jh=ga[--ya],ga[ya]=null;for(;t===So;)So=Un[--jn],Un[jn]=null,Xr=Un[--jn],Un[jn]=null,Jr=Un[--jn],Un[jn]=null}var bn=null,xn=null,Ge=!1,tr=null;function US(t,e){var n=Bn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function G0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,bn=t,xn=rs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,bn=t,xn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=So!==null?{id:Jr,overflow:Xr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Bn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,bn=t,xn=null,!0):!1;default:return!1}}function Vg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Mg(t){if(Ge){var e=xn;if(e){var n=e;if(!G0(t,e)){if(Vg(t))throw Error(K(418));e=rs(n.nextSibling);var r=bn;e&&G0(t,e)?US(r,n):(t.flags=t.flags&-4097|2,Ge=!1,bn=t)}}else{if(Vg(t))throw Error(K(418));t.flags=t.flags&-4097|2,Ge=!1,bn=t}}}function Q0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;bn=t}function kd(t){if(t!==bn)return!1;if(!Ge)return Q0(t),Ge=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!kg(t.type,t.memoizedProps)),e&&(e=xn)){if(Vg(t))throw jS(),Error(K(418));for(;e;)US(t,e),e=rs(e.nextSibling)}if(Q0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(K(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){xn=rs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}xn=null}}else xn=bn?rs(t.stateNode.nextSibling):null;return!0}function jS(){for(var t=xn;t;)t=rs(t.nextSibling)}function qa(){xn=bn=null,Ge=!1}function Tv(t){tr===null?tr=[t]:tr.push(t)}var TN=gi.ReactCurrentBatchConfig;function Zl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(K(309));var r=n.stateNode}if(!r)throw Error(K(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(K(284));if(!n._owner)throw Error(K(290,t))}return t}function Dd(t,e){throw t=Object.prototype.toString.call(e),Error(K(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Y0(t){var e=t._init;return e(t._payload)}function BS(t){function e(_,y){if(t){var I=_.deletions;I===null?(_.deletions=[y],_.flags|=16):I.push(y)}}function n(_,y){if(!t)return null;for(;y!==null;)e(_,y),y=y.sibling;return null}function r(_,y){for(_=new Map;y!==null;)y.key!==null?_.set(y.key,y):_.set(y.index,y),y=y.sibling;return _}function i(_,y){return _=as(_,y),_.index=0,_.sibling=null,_}function s(_,y,I){return _.index=I,t?(I=_.alternate,I!==null?(I=I.index,I<y?(_.flags|=2,y):I):(_.flags|=2,y)):(_.flags|=1048576,y)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,y,I,D){return y===null||y.tag!==6?(y=Dm(I,_.mode,D),y.return=_,y):(y=i(y,I),y.return=_,y)}function l(_,y,I,D){var N=I.type;return N===ua?d(_,y,I.props.children,D,I.key):y!==null&&(y.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Mi&&Y0(N)===y.type)?(D=i(y,I.props),D.ref=Zl(_,y,I),D.return=_,D):(D=lh(I.type,I.key,I.props,null,_.mode,D),D.ref=Zl(_,y,I),D.return=_,D)}function u(_,y,I,D){return y===null||y.tag!==4||y.stateNode.containerInfo!==I.containerInfo||y.stateNode.implementation!==I.implementation?(y=Nm(I,_.mode,D),y.return=_,y):(y=i(y,I.children||[]),y.return=_,y)}function d(_,y,I,D,N){return y===null||y.tag!==7?(y=_o(I,_.mode,D,N),y.return=_,y):(y=i(y,I),y.return=_,y)}function h(_,y,I){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Dm(""+y,_.mode,I),y.return=_,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ed:return I=lh(y.type,y.key,y.props,null,_.mode,I),I.ref=Zl(_,null,y),I.return=_,I;case ca:return y=Nm(y,_.mode,I),y.return=_,y;case Mi:var D=y._init;return h(_,D(y._payload),I)}if(dc(y)||Gl(y))return y=_o(y,_.mode,I,null),y.return=_,y;Dd(_,y)}return null}function p(_,y,I,D){var N=y!==null?y.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return N!==null?null:a(_,y,""+I,D);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Ed:return I.key===N?l(_,y,I,D):null;case ca:return I.key===N?u(_,y,I,D):null;case Mi:return N=I._init,p(_,y,N(I._payload),D)}if(dc(I)||Gl(I))return N!==null?null:d(_,y,I,D,null);Dd(_,I)}return null}function m(_,y,I,D,N){if(typeof D=="string"&&D!==""||typeof D=="number")return _=_.get(I)||null,a(y,_,""+D,N);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Ed:return _=_.get(D.key===null?I:D.key)||null,l(y,_,D,N);case ca:return _=_.get(D.key===null?I:D.key)||null,u(y,_,D,N);case Mi:var V=D._init;return m(_,y,I,V(D._payload),N)}if(dc(D)||Gl(D))return _=_.get(I)||null,d(y,_,D,N,null);Dd(y,D)}return null}function E(_,y,I,D){for(var N=null,V=null,T=y,w=y=0,x=null;T!==null&&w<I.length;w++){T.index>w?(x=T,T=null):x=T.sibling;var P=p(_,T,I[w],D);if(P===null){T===null&&(T=x);break}t&&T&&P.alternate===null&&e(_,T),y=s(P,y,w),V===null?N=P:V.sibling=P,V=P,T=x}if(w===I.length)return n(_,T),Ge&&Ys(_,w),N;if(T===null){for(;w<I.length;w++)T=h(_,I[w],D),T!==null&&(y=s(T,y,w),V===null?N=T:V.sibling=T,V=T);return Ge&&Ys(_,w),N}for(T=r(_,T);w<I.length;w++)x=m(T,_,w,I[w],D),x!==null&&(t&&x.alternate!==null&&T.delete(x.key===null?w:x.key),y=s(x,y,w),V===null?N=x:V.sibling=x,V=x);return t&&T.forEach(function(C){return e(_,C)}),Ge&&Ys(_,w),N}function v(_,y,I,D){var N=Gl(I);if(typeof N!="function")throw Error(K(150));if(I=N.call(I),I==null)throw Error(K(151));for(var V=N=null,T=y,w=y=0,x=null,P=I.next();T!==null&&!P.done;w++,P=I.next()){T.index>w?(x=T,T=null):x=T.sibling;var C=p(_,T,P.value,D);if(C===null){T===null&&(T=x);break}t&&T&&C.alternate===null&&e(_,T),y=s(C,y,w),V===null?N=C:V.sibling=C,V=C,T=x}if(P.done)return n(_,T),Ge&&Ys(_,w),N;if(T===null){for(;!P.done;w++,P=I.next())P=h(_,P.value,D),P!==null&&(y=s(P,y,w),V===null?N=P:V.sibling=P,V=P);return Ge&&Ys(_,w),N}for(T=r(_,T);!P.done;w++,P=I.next())P=m(T,_,w,P.value,D),P!==null&&(t&&P.alternate!==null&&T.delete(P.key===null?w:P.key),y=s(P,y,w),V===null?N=P:V.sibling=P,V=P);return t&&T.forEach(function(k){return e(_,k)}),Ge&&Ys(_,w),N}function S(_,y,I,D){if(typeof I=="object"&&I!==null&&I.type===ua&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case Ed:e:{for(var N=I.key,V=y;V!==null;){if(V.key===N){if(N=I.type,N===ua){if(V.tag===7){n(_,V.sibling),y=i(V,I.props.children),y.return=_,_=y;break e}}else if(V.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Mi&&Y0(N)===V.type){n(_,V.sibling),y=i(V,I.props),y.ref=Zl(_,V,I),y.return=_,_=y;break e}n(_,V);break}else e(_,V);V=V.sibling}I.type===ua?(y=_o(I.props.children,_.mode,D,I.key),y.return=_,_=y):(D=lh(I.type,I.key,I.props,null,_.mode,D),D.ref=Zl(_,y,I),D.return=_,_=D)}return o(_);case ca:e:{for(V=I.key;y!==null;){if(y.key===V)if(y.tag===4&&y.stateNode.containerInfo===I.containerInfo&&y.stateNode.implementation===I.implementation){n(_,y.sibling),y=i(y,I.children||[]),y.return=_,_=y;break e}else{n(_,y);break}else e(_,y);y=y.sibling}y=Nm(I,_.mode,D),y.return=_,_=y}return o(_);case Mi:return V=I._init,S(_,y,V(I._payload),D)}if(dc(I))return E(_,y,I,D);if(Gl(I))return v(_,y,I,D);Dd(_,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,y!==null&&y.tag===6?(n(_,y.sibling),y=i(y,I),y.return=_,_=y):(n(_,y),y=Dm(I,_.mode,D),y.return=_,_=y),o(_)):n(_,y)}return S}var Wa=BS(!0),$S=BS(!1),Bh=Rs(null),$h=null,va=null,Iv=null;function Sv(){Iv=va=$h=null}function Av(t){var e=Bh.current;We(Bh),t._currentValue=e}function Lg(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function xa(t,e){$h=t,Iv=va=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(cn=!0),t.firstContext=null)}function zn(t){var e=t._currentValue;if(Iv!==t)if(t={context:t,memoizedValue:e,next:null},va===null){if($h===null)throw Error(K(308));va=t,$h.dependencies={lanes:0,firstContext:t}}else va=va.next=t;return e}var ao=null;function xv(t){ao===null?ao=[t]:ao.push(t)}function zS(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,xv(e)):(n.next=i.next,i.next=n),e.interleaved=n,li(t,r)}function li(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Li=!1;function Pv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ni(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function is(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ie&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,li(t,n)}return i=r.interleaved,i===null?(e.next=e,xv(r)):(e.next=i.next,i.next=e),r.interleaved=e,li(t,n)}function nh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,hv(t,n)}}function J0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function zh(t,e,n,r){var i=t.updateQueue;Li=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,d=u=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var E=t,v=a;switch(p=e,m=n,v.tag){case 1:if(E=v.payload,typeof E=="function"){h=E.call(m,h,p);break e}h=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=v.payload,p=typeof E=="function"?E.call(m,h,p):E,p==null)break e;h=tt({},h,p);break e;case 2:Li=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=m,l=h):d=d.next=m,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(d===null&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);xo|=o,t.lanes=o,t.memoizedState=h}}function X0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(K(191,i));i.call(r)}}}var Du={},Rr=Rs(Du),Zc=Rs(Du),eu=Rs(Du);function lo(t){if(t===Du)throw Error(K(174));return t}function bv(t,e){switch(Fe(eu,e),Fe(Zc,t),Fe(Rr,Du),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:yg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=yg(e,t)}We(Rr),Fe(Rr,e)}function Ha(){We(Rr),We(Zc),We(eu)}function WS(t){lo(eu.current);var e=lo(Rr.current),n=yg(e,t.type);e!==n&&(Fe(Zc,t),Fe(Rr,n))}function Rv(t){Zc.current===t&&(We(Rr),We(Zc))}var Xe=Rs(0);function qh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var xm=[];function Cv(){for(var t=0;t<xm.length;t++)xm[t]._workInProgressVersionPrimary=null;xm.length=0}var rh=gi.ReactCurrentDispatcher,Pm=gi.ReactCurrentBatchConfig,Ao=0,et=null,vt=null,At=null,Wh=!1,Ac=!1,tu=0,IN=0;function Ft(){throw Error(K(321))}function kv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!cr(t[n],e[n]))return!1;return!0}function Dv(t,e,n,r,i,s){if(Ao=s,et=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,rh.current=t===null||t.memoizedState===null?PN:bN,t=n(r,i),Ac){s=0;do{if(Ac=!1,tu=0,25<=s)throw Error(K(301));s+=1,At=vt=null,e.updateQueue=null,rh.current=RN,t=n(r,i)}while(Ac)}if(rh.current=Hh,e=vt!==null&&vt.next!==null,Ao=0,At=vt=et=null,Wh=!1,e)throw Error(K(300));return t}function Nv(){var t=tu!==0;return tu=0,t}function vr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?et.memoizedState=At=t:At=At.next=t,At}function qn(){if(vt===null){var t=et.alternate;t=t!==null?t.memoizedState:null}else t=vt.next;var e=At===null?et.memoizedState:At.next;if(e!==null)At=e,vt=t;else{if(t===null)throw Error(K(310));vt=t,t={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},At===null?et.memoizedState=At=t:At=At.next=t}return At}function nu(t,e){return typeof e=="function"?e(t):e}function bm(t){var e=qn(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var r=vt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var d=u.lane;if((Ao&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,et.lanes|=d,xo|=d}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,cr(r,e.memoizedState)||(cn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,et.lanes|=s,xo|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Rm(t){var e=qn(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);cr(s,e.memoizedState)||(cn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function HS(){}function KS(t,e){var n=et,r=qn(),i=e(),s=!cr(r.memoizedState,i);if(s&&(r.memoizedState=i,cn=!0),r=r.queue,Ov(YS.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||At!==null&&At.memoizedState.tag&1){if(n.flags|=2048,ru(9,QS.bind(null,n,r,i,e),void 0,null),Pt===null)throw Error(K(349));Ao&30||GS(n,e,i)}return i}function GS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=et.updateQueue,e===null?(e={lastEffect:null,stores:null},et.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function QS(t,e,n,r){e.value=n,e.getSnapshot=r,JS(e)&&XS(t)}function YS(t,e,n){return n(function(){JS(e)&&XS(t)})}function JS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!cr(t,n)}catch{return!0}}function XS(t){var e=li(t,1);e!==null&&sr(e,t,1,-1)}function Z0(t){var e=vr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:nu,lastRenderedState:t},e.queue=t,t=t.dispatch=xN.bind(null,et,t),[e.memoizedState,t]}function ru(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=et.updateQueue,e===null?(e={lastEffect:null,stores:null},et.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function ZS(){return qn().memoizedState}function ih(t,e,n,r){var i=vr();et.flags|=t,i.memoizedState=ru(1|e,n,void 0,r===void 0?null:r)}function Hf(t,e,n,r){var i=qn();r=r===void 0?null:r;var s=void 0;if(vt!==null){var o=vt.memoizedState;if(s=o.destroy,r!==null&&kv(r,o.deps)){i.memoizedState=ru(e,n,s,r);return}}et.flags|=t,i.memoizedState=ru(1|e,n,s,r)}function eE(t,e){return ih(8390656,8,t,e)}function Ov(t,e){return Hf(2048,8,t,e)}function eA(t,e){return Hf(4,2,t,e)}function tA(t,e){return Hf(4,4,t,e)}function nA(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function rA(t,e,n){return n=n!=null?n.concat([t]):null,Hf(4,4,nA.bind(null,e,t),n)}function Vv(){}function iA(t,e){var n=qn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&kv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function sA(t,e){var n=qn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&kv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function oA(t,e,n){return Ao&21?(cr(n,e)||(n=dS(),et.lanes|=n,xo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,cn=!0),t.memoizedState=n)}function SN(t,e){var n=De;De=n!==0&&4>n?n:4,t(!0);var r=Pm.transition;Pm.transition={};try{t(!1),e()}finally{De=n,Pm.transition=r}}function aA(){return qn().memoizedState}function AN(t,e,n){var r=os(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},lA(t))cA(e,n);else if(n=zS(t,e,n,r),n!==null){var i=Zt();sr(n,t,r,i),uA(n,e,r)}}function xN(t,e,n){var r=os(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(lA(t))cA(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,cr(a,o)){var l=e.interleaved;l===null?(i.next=i,xv(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=zS(t,e,i,r),n!==null&&(i=Zt(),sr(n,t,r,i),uA(n,e,r))}}function lA(t){var e=t.alternate;return t===et||e!==null&&e===et}function cA(t,e){Ac=Wh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function uA(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,hv(t,n)}}var Hh={readContext:zn,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useInsertionEffect:Ft,useLayoutEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useMutableSource:Ft,useSyncExternalStore:Ft,useId:Ft,unstable_isNewReconciler:!1},PN={readContext:zn,useCallback:function(t,e){return vr().memoizedState=[t,e===void 0?null:e],t},useContext:zn,useEffect:eE,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ih(4194308,4,nA.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ih(4194308,4,t,e)},useInsertionEffect:function(t,e){return ih(4,2,t,e)},useMemo:function(t,e){var n=vr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=vr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=AN.bind(null,et,t),[r.memoizedState,t]},useRef:function(t){var e=vr();return t={current:t},e.memoizedState=t},useState:Z0,useDebugValue:Vv,useDeferredValue:function(t){return vr().memoizedState=t},useTransition:function(){var t=Z0(!1),e=t[0];return t=SN.bind(null,t[1]),vr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=et,i=vr();if(Ge){if(n===void 0)throw Error(K(407));n=n()}else{if(n=e(),Pt===null)throw Error(K(349));Ao&30||GS(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,eE(YS.bind(null,r,s,t),[t]),r.flags|=2048,ru(9,QS.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=vr(),e=Pt.identifierPrefix;if(Ge){var n=Xr,r=Jr;n=(r&~(1<<32-ir(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=tu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=IN++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},bN={readContext:zn,useCallback:iA,useContext:zn,useEffect:Ov,useImperativeHandle:rA,useInsertionEffect:eA,useLayoutEffect:tA,useMemo:sA,useReducer:bm,useRef:ZS,useState:function(){return bm(nu)},useDebugValue:Vv,useDeferredValue:function(t){var e=qn();return oA(e,vt.memoizedState,t)},useTransition:function(){var t=bm(nu)[0],e=qn().memoizedState;return[t,e]},useMutableSource:HS,useSyncExternalStore:KS,useId:aA,unstable_isNewReconciler:!1},RN={readContext:zn,useCallback:iA,useContext:zn,useEffect:Ov,useImperativeHandle:rA,useInsertionEffect:eA,useLayoutEffect:tA,useMemo:sA,useReducer:Rm,useRef:ZS,useState:function(){return Rm(nu)},useDebugValue:Vv,useDeferredValue:function(t){var e=qn();return vt===null?e.memoizedState=t:oA(e,vt.memoizedState,t)},useTransition:function(){var t=Rm(nu)[0],e=qn().memoizedState;return[t,e]},useMutableSource:HS,useSyncExternalStore:KS,useId:aA,unstable_isNewReconciler:!1};function Qn(t,e){if(t&&t.defaultProps){e=tt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Fg(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:tt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Kf={isMounted:function(t){return(t=t._reactInternals)?jo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Zt(),i=os(t),s=ni(r,i);s.payload=e,n!=null&&(s.callback=n),e=is(t,s,i),e!==null&&(sr(e,t,i,r),nh(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Zt(),i=os(t),s=ni(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=is(t,s,i),e!==null&&(sr(e,t,i,r),nh(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Zt(),r=os(t),i=ni(n,r);i.tag=2,e!=null&&(i.callback=e),e=is(t,i,r),e!==null&&(sr(e,t,r,n),nh(e,t,r))}};function tE(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Qc(n,r)||!Qc(i,s):!0}function dA(t,e,n){var r=!1,i=ms,s=e.contextType;return typeof s=="object"&&s!==null?s=zn(s):(i=pn(e)?Io:Qt.current,r=e.contextTypes,s=(r=r!=null)?za(t,i):ms),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Kf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function nE(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Kf.enqueueReplaceState(e,e.state,null)}function Ug(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Pv(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=zn(s):(s=pn(e)?Io:Qt.current,i.context=za(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Fg(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Kf.enqueueReplaceState(i,i.state,null),zh(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ka(t,e){try{var n="",r=e;do n+=rD(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Cm(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function jg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var CN=typeof WeakMap=="function"?WeakMap:Map;function hA(t,e,n){n=ni(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Gh||(Gh=!0,Yg=r),jg(t,e)},n}function fA(t,e,n){n=ni(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){jg(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){jg(t,e),typeof r!="function"&&(ss===null?ss=new Set([this]):ss.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function rE(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new CN;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=qN.bind(null,t,e,n),e.then(t,t))}function iE(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function sE(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ni(-1,1),e.tag=2,is(n,e,1))),n.lanes|=1),t)}var kN=gi.ReactCurrentOwner,cn=!1;function Jt(t,e,n,r){e.child=t===null?$S(e,null,n,r):Wa(e,t.child,n,r)}function oE(t,e,n,r,i){n=n.render;var s=e.ref;return xa(e,i),r=Dv(t,e,n,r,s,i),n=Nv(),t!==null&&!cn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ci(t,e,i)):(Ge&&n&&wv(e),e.flags|=1,Jt(t,e,r,i),e.child)}function aE(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!zv(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,pA(t,e,s,r,i)):(t=lh(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Qc,n(o,r)&&t.ref===e.ref)return ci(t,e,i)}return e.flags|=1,t=as(s,r),t.ref=e.ref,t.return=e,e.child=t}function pA(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Qc(s,r)&&t.ref===e.ref)if(cn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(cn=!0);else return e.lanes=t.lanes,ci(t,e,i)}return Bg(t,e,n,r,i)}function mA(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fe(wa,En),En|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Fe(wa,En),En|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Fe(wa,En),En|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Fe(wa,En),En|=r;return Jt(t,e,i,n),e.child}function gA(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Bg(t,e,n,r,i){var s=pn(n)?Io:Qt.current;return s=za(e,s),xa(e,i),n=Dv(t,e,n,r,s,i),r=Nv(),t!==null&&!cn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ci(t,e,i)):(Ge&&r&&wv(e),e.flags|=1,Jt(t,e,n,i),e.child)}function lE(t,e,n,r,i){if(pn(n)){var s=!0;Fh(e)}else s=!1;if(xa(e,i),e.stateNode===null)sh(t,e),dA(e,n,r),Ug(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=zn(u):(u=pn(n)?Io:Qt.current,u=za(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&nE(e,o,r,u),Li=!1;var p=e.memoizedState;o.state=p,zh(e,r,o,i),l=e.memoizedState,a!==r||p!==l||fn.current||Li?(typeof d=="function"&&(Fg(e,n,d,r),l=e.memoizedState),(a=Li||tE(e,n,a,r,p,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,qS(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Qn(e.type,a),o.props=u,h=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=zn(l):(l=pn(n)?Io:Qt.current,l=za(e,l));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||p!==l)&&nE(e,o,r,l),Li=!1,p=e.memoizedState,o.state=p,zh(e,r,o,i);var E=e.memoizedState;a!==h||p!==E||fn.current||Li?(typeof m=="function"&&(Fg(e,n,m,r),E=e.memoizedState),(u=Li||tE(e,n,u,r,p,E,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,E,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,E,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=E),o.props=r,o.state=E,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return $g(t,e,n,r,s,i)}function $g(t,e,n,r,i,s){gA(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&K0(e,n,!1),ci(t,e,s);r=e.stateNode,kN.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Wa(e,t.child,null,s),e.child=Wa(e,null,a,s)):Jt(t,e,a,s),e.memoizedState=r.state,i&&K0(e,n,!0),e.child}function yA(t){var e=t.stateNode;e.pendingContext?H0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&H0(t,e.context,!1),bv(t,e.containerInfo)}function cE(t,e,n,r,i){return qa(),Tv(i),e.flags|=256,Jt(t,e,n,r),e.child}var zg={dehydrated:null,treeContext:null,retryLane:0};function qg(t){return{baseLanes:t,cachePool:null,transitions:null}}function vA(t,e,n){var r=e.pendingProps,i=Xe.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Fe(Xe,i&1),t===null)return Mg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Yf(o,r,0,null),t=_o(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=qg(n),e.memoizedState=zg,t):Mv(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return DN(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=as(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=as(a,s):(s=_o(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?qg(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=zg,r}return s=t.child,t=s.sibling,r=as(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Mv(t,e){return e=Yf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Nd(t,e,n,r){return r!==null&&Tv(r),Wa(e,t.child,null,n),t=Mv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function DN(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Cm(Error(K(422))),Nd(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Yf({mode:"visible",children:r.children},i,0,null),s=_o(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Wa(e,t.child,null,o),e.child.memoizedState=qg(o),e.memoizedState=zg,s);if(!(e.mode&1))return Nd(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(K(419)),r=Cm(s,r,void 0),Nd(t,e,o,r)}if(a=(o&t.childLanes)!==0,cn||a){if(r=Pt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,li(t,i),sr(r,t,i,-1))}return $v(),r=Cm(Error(K(421))),Nd(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=WN.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,xn=rs(i.nextSibling),bn=e,Ge=!0,tr=null,t!==null&&(Un[jn++]=Jr,Un[jn++]=Xr,Un[jn++]=So,Jr=t.id,Xr=t.overflow,So=e),e=Mv(e,r.children),e.flags|=4096,e)}function uE(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Lg(t.return,e,n)}function km(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function _A(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Jt(t,e,r.children,n),r=Xe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&uE(t,n,e);else if(t.tag===19)uE(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Fe(Xe,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&qh(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),km(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&qh(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}km(e,!0,n,null,s);break;case"together":km(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function sh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ci(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),xo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(K(153));if(e.child!==null){for(t=e.child,n=as(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=as(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function NN(t,e,n){switch(e.tag){case 3:yA(e),qa();break;case 5:WS(e);break;case 1:pn(e.type)&&Fh(e);break;case 4:bv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Fe(Bh,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Fe(Xe,Xe.current&1),e.flags|=128,null):n&e.child.childLanes?vA(t,e,n):(Fe(Xe,Xe.current&1),t=ci(t,e,n),t!==null?t.sibling:null);Fe(Xe,Xe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return _A(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Fe(Xe,Xe.current),r)break;return null;case 22:case 23:return e.lanes=0,mA(t,e,n)}return ci(t,e,n)}var wA,Wg,EA,TA;wA=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Wg=function(){};EA=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,lo(Rr.current);var s=null;switch(n){case"input":i=fg(t,i),r=fg(t,r),s=[];break;case"select":i=tt({},i,{value:void 0}),r=tt({},r,{value:void 0}),s=[];break;case"textarea":i=gg(t,i),r=gg(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Mh)}vg(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&($c.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&($c.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&ze("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};TA=function(t,e,n,r){n!==r&&(e.flags|=4)};function ec(t,e){if(!Ge)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ut(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function ON(t,e,n){var r=e.pendingProps;switch(Ev(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(e),null;case 1:return pn(e.type)&&Lh(),Ut(e),null;case 3:return r=e.stateNode,Ha(),We(fn),We(Qt),Cv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(kd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,tr!==null&&(Zg(tr),tr=null))),Wg(t,e),Ut(e),null;case 5:Rv(e);var i=lo(eu.current);if(n=e.type,t!==null&&e.stateNode!=null)EA(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(K(166));return Ut(e),null}if(t=lo(Rr.current),kd(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Sr]=e,r[Xc]=s,t=(e.mode&1)!==0,n){case"dialog":ze("cancel",r),ze("close",r);break;case"iframe":case"object":case"embed":ze("load",r);break;case"video":case"audio":for(i=0;i<fc.length;i++)ze(fc[i],r);break;case"source":ze("error",r);break;case"img":case"image":case"link":ze("error",r),ze("load",r);break;case"details":ze("toggle",r);break;case"input":_0(r,s),ze("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ze("invalid",r);break;case"textarea":E0(r,s),ze("invalid",r)}vg(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Cd(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Cd(r.textContent,a,t),i=["children",""+a]):$c.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ze("scroll",r)}switch(n){case"input":Td(r),w0(r,s,!0);break;case"textarea":Td(r),T0(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Mh)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Y1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Sr]=e,t[Xc]=r,wA(t,e,!1,!1),e.stateNode=t;e:{switch(o=_g(n,r),n){case"dialog":ze("cancel",t),ze("close",t),i=r;break;case"iframe":case"object":case"embed":ze("load",t),i=r;break;case"video":case"audio":for(i=0;i<fc.length;i++)ze(fc[i],t);i=r;break;case"source":ze("error",t),i=r;break;case"img":case"image":case"link":ze("error",t),ze("load",t),i=r;break;case"details":ze("toggle",t),i=r;break;case"input":_0(t,r),i=fg(t,r),ze("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=tt({},r,{value:void 0}),ze("invalid",t);break;case"textarea":E0(t,r),i=gg(t,r),ze("invalid",t);break;default:i=r}vg(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Z1(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&J1(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&zc(t,l):typeof l=="number"&&zc(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&($c.hasOwnProperty(s)?l!=null&&s==="onScroll"&&ze("scroll",t):l!=null&&ov(t,s,l,o))}switch(n){case"input":Td(t),w0(t,r,!1);break;case"textarea":Td(t),T0(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ps(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Ta(t,!!r.multiple,s,!1):r.defaultValue!=null&&Ta(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Mh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ut(e),null;case 6:if(t&&e.stateNode!=null)TA(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(K(166));if(n=lo(eu.current),lo(Rr.current),kd(e)){if(r=e.stateNode,n=e.memoizedProps,r[Sr]=e,(s=r.nodeValue!==n)&&(t=bn,t!==null))switch(t.tag){case 3:Cd(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Cd(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Sr]=e,e.stateNode=r}return Ut(e),null;case 13:if(We(Xe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ge&&xn!==null&&e.mode&1&&!(e.flags&128))jS(),qa(),e.flags|=98560,s=!1;else if(s=kd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(K(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(K(317));s[Sr]=e}else qa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ut(e),s=!1}else tr!==null&&(Zg(tr),tr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Xe.current&1?wt===0&&(wt=3):$v())),e.updateQueue!==null&&(e.flags|=4),Ut(e),null);case 4:return Ha(),Wg(t,e),t===null&&Yc(e.stateNode.containerInfo),Ut(e),null;case 10:return Av(e.type._context),Ut(e),null;case 17:return pn(e.type)&&Lh(),Ut(e),null;case 19:if(We(Xe),s=e.memoizedState,s===null)return Ut(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)ec(s,!1);else{if(wt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=qh(t),o!==null){for(e.flags|=128,ec(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Fe(Xe,Xe.current&1|2),e.child}t=t.sibling}s.tail!==null&&dt()>Ga&&(e.flags|=128,r=!0,ec(s,!1),e.lanes=4194304)}else{if(!r)if(t=qh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ec(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ge)return Ut(e),null}else 2*dt()-s.renderingStartTime>Ga&&n!==1073741824&&(e.flags|=128,r=!0,ec(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=dt(),e.sibling=null,n=Xe.current,Fe(Xe,r?n&1|2:n&1),e):(Ut(e),null);case 22:case 23:return Bv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?En&1073741824&&(Ut(e),e.subtreeFlags&6&&(e.flags|=8192)):Ut(e),null;case 24:return null;case 25:return null}throw Error(K(156,e.tag))}function VN(t,e){switch(Ev(e),e.tag){case 1:return pn(e.type)&&Lh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ha(),We(fn),We(Qt),Cv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Rv(e),null;case 13:if(We(Xe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(K(340));qa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return We(Xe),null;case 4:return Ha(),null;case 10:return Av(e.type._context),null;case 22:case 23:return Bv(),null;case 24:return null;default:return null}}var Od=!1,qt=!1,MN=typeof WeakSet=="function"?WeakSet:Set,ee=null;function _a(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ot(t,e,r)}else n.current=null}function Hg(t,e,n){try{n()}catch(r){ot(t,e,r)}}var dE=!1;function LN(t,e){if(Rg=Nh,t=PS(),_v(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,d=0,h=t,p=null;t:for(;;){for(var m;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)p=h,h=m;for(;;){if(h===t)break t;if(p===n&&++u===i&&(a=o),p===s&&++d===r&&(l=o),(m=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Cg={focusedElem:t,selectionRange:n},Nh=!1,ee=e;ee!==null;)if(e=ee,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ee=t;else for(;ee!==null;){e=ee;try{var E=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var v=E.memoizedProps,S=E.memoizedState,_=e.stateNode,y=_.getSnapshotBeforeUpdate(e.elementType===e.type?v:Qn(e.type,v),S);_.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(D){ot(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,ee=t;break}ee=e.return}return E=dE,dE=!1,E}function xc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Hg(e,n,s)}i=i.next}while(i!==r)}}function Gf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Kg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function IA(t){var e=t.alternate;e!==null&&(t.alternate=null,IA(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Sr],delete e[Xc],delete e[Ng],delete e[_N],delete e[wN])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function SA(t){return t.tag===5||t.tag===3||t.tag===4}function hE(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||SA(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Gg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Mh));else if(r!==4&&(t=t.child,t!==null))for(Gg(t,e,n),t=t.sibling;t!==null;)Gg(t,e,n),t=t.sibling}function Qg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Qg(t,e,n),t=t.sibling;t!==null;)Qg(t,e,n),t=t.sibling}var kt=null,Zn=!1;function bi(t,e,n){for(n=n.child;n!==null;)AA(t,e,n),n=n.sibling}function AA(t,e,n){if(br&&typeof br.onCommitFiberUnmount=="function")try{br.onCommitFiberUnmount(jf,n)}catch{}switch(n.tag){case 5:qt||_a(n,e);case 6:var r=kt,i=Zn;kt=null,bi(t,e,n),kt=r,Zn=i,kt!==null&&(Zn?(t=kt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):kt.removeChild(n.stateNode));break;case 18:kt!==null&&(Zn?(t=kt,n=n.stateNode,t.nodeType===8?Sm(t.parentNode,n):t.nodeType===1&&Sm(t,n),Kc(t)):Sm(kt,n.stateNode));break;case 4:r=kt,i=Zn,kt=n.stateNode.containerInfo,Zn=!0,bi(t,e,n),kt=r,Zn=i;break;case 0:case 11:case 14:case 15:if(!qt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Hg(n,e,o),i=i.next}while(i!==r)}bi(t,e,n);break;case 1:if(!qt&&(_a(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ot(n,e,a)}bi(t,e,n);break;case 21:bi(t,e,n);break;case 22:n.mode&1?(qt=(r=qt)||n.memoizedState!==null,bi(t,e,n),qt=r):bi(t,e,n);break;default:bi(t,e,n)}}function fE(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new MN),e.forEach(function(r){var i=HN.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Kn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:kt=a.stateNode,Zn=!1;break e;case 3:kt=a.stateNode.containerInfo,Zn=!0;break e;case 4:kt=a.stateNode.containerInfo,Zn=!0;break e}a=a.return}if(kt===null)throw Error(K(160));AA(s,o,i),kt=null,Zn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){ot(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)xA(e,t),e=e.sibling}function xA(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Kn(e,t),gr(t),r&4){try{xc(3,t,t.return),Gf(3,t)}catch(v){ot(t,t.return,v)}try{xc(5,t,t.return)}catch(v){ot(t,t.return,v)}}break;case 1:Kn(e,t),gr(t),r&512&&n!==null&&_a(n,n.return);break;case 5:if(Kn(e,t),gr(t),r&512&&n!==null&&_a(n,n.return),t.flags&32){var i=t.stateNode;try{zc(i,"")}catch(v){ot(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&G1(i,s),_g(a,o);var u=_g(a,s);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?Z1(i,h):d==="dangerouslySetInnerHTML"?J1(i,h):d==="children"?zc(i,h):ov(i,d,h,u)}switch(a){case"input":pg(i,s);break;case"textarea":Q1(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Ta(i,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?Ta(i,!!s.multiple,s.defaultValue,!0):Ta(i,!!s.multiple,s.multiple?[]:"",!1))}i[Xc]=s}catch(v){ot(t,t.return,v)}}break;case 6:if(Kn(e,t),gr(t),r&4){if(t.stateNode===null)throw Error(K(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(v){ot(t,t.return,v)}}break;case 3:if(Kn(e,t),gr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Kc(e.containerInfo)}catch(v){ot(t,t.return,v)}break;case 4:Kn(e,t),gr(t);break;case 13:Kn(e,t),gr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Uv=dt())),r&4&&fE(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(qt=(u=qt)||d,Kn(e,t),qt=u):Kn(e,t),gr(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(ee=t,d=t.child;d!==null;){for(h=ee=d;ee!==null;){switch(p=ee,m=p.child,p.tag){case 0:case 11:case 14:case 15:xc(4,p,p.return);break;case 1:_a(p,p.return);var E=p.stateNode;if(typeof E.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,E.props=e.memoizedProps,E.state=e.memoizedState,E.componentWillUnmount()}catch(v){ot(r,n,v)}}break;case 5:_a(p,p.return);break;case 22:if(p.memoizedState!==null){mE(h);continue}}m!==null?(m.return=p,ee=m):mE(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=X1("display",o))}catch(v){ot(t,t.return,v)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(v){ot(t,t.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Kn(e,t),gr(t),r&4&&fE(t);break;case 21:break;default:Kn(e,t),gr(t)}}function gr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(SA(n)){var r=n;break e}n=n.return}throw Error(K(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(zc(i,""),r.flags&=-33);var s=hE(t);Qg(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=hE(t);Gg(t,a,o);break;default:throw Error(K(161))}}catch(l){ot(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function FN(t,e,n){ee=t,PA(t)}function PA(t,e,n){for(var r=(t.mode&1)!==0;ee!==null;){var i=ee,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Od;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||qt;a=Od;var u=qt;if(Od=o,(qt=l)&&!u)for(ee=i;ee!==null;)o=ee,l=o.child,o.tag===22&&o.memoizedState!==null?gE(i):l!==null?(l.return=o,ee=l):gE(i);for(;s!==null;)ee=s,PA(s),s=s.sibling;ee=i,Od=a,qt=u}pE(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ee=s):pE(t)}}function pE(t){for(;ee!==null;){var e=ee;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:qt||Gf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!qt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Qn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&X0(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}X0(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Kc(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}qt||e.flags&512&&Kg(e)}catch(p){ot(e,e.return,p)}}if(e===t){ee=null;break}if(n=e.sibling,n!==null){n.return=e.return,ee=n;break}ee=e.return}}function mE(t){for(;ee!==null;){var e=ee;if(e===t){ee=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ee=n;break}ee=e.return}}function gE(t){for(;ee!==null;){var e=ee;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Gf(4,e)}catch(l){ot(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){ot(e,i,l)}}var s=e.return;try{Kg(e)}catch(l){ot(e,s,l)}break;case 5:var o=e.return;try{Kg(e)}catch(l){ot(e,o,l)}}}catch(l){ot(e,e.return,l)}if(e===t){ee=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ee=a;break}ee=e.return}}var UN=Math.ceil,Kh=gi.ReactCurrentDispatcher,Lv=gi.ReactCurrentOwner,$n=gi.ReactCurrentBatchConfig,Ie=0,Pt=null,gt=null,Nt=0,En=0,wa=Rs(0),wt=0,iu=null,xo=0,Qf=0,Fv=0,Pc=null,ln=null,Uv=0,Ga=1/0,Gr=null,Gh=!1,Yg=null,ss=null,Vd=!1,Ji=null,Qh=0,bc=0,Jg=null,oh=-1,ah=0;function Zt(){return Ie&6?dt():oh!==-1?oh:oh=dt()}function os(t){return t.mode&1?Ie&2&&Nt!==0?Nt&-Nt:TN.transition!==null?(ah===0&&(ah=dS()),ah):(t=De,t!==0||(t=window.event,t=t===void 0?16:vS(t.type)),t):1}function sr(t,e,n,r){if(50<bc)throw bc=0,Jg=null,Error(K(185));Ru(t,n,r),(!(Ie&2)||t!==Pt)&&(t===Pt&&(!(Ie&2)&&(Qf|=n),wt===4&&Ui(t,Nt)),mn(t,r),n===1&&Ie===0&&!(e.mode&1)&&(Ga=dt()+500,Wf&&Cs()))}function mn(t,e){var n=t.callbackNode;TD(t,e);var r=Dh(t,t===Pt?Nt:0);if(r===0)n!==null&&A0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&A0(n),e===1)t.tag===0?EN(yE.bind(null,t)):LS(yE.bind(null,t)),yN(function(){!(Ie&6)&&Cs()}),n=null;else{switch(hS(r)){case 1:n=dv;break;case 4:n=cS;break;case 16:n=kh;break;case 536870912:n=uS;break;default:n=kh}n=VA(n,bA.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function bA(t,e){if(oh=-1,ah=0,Ie&6)throw Error(K(327));var n=t.callbackNode;if(Pa()&&t.callbackNode!==n)return null;var r=Dh(t,t===Pt?Nt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Yh(t,r);else{e=r;var i=Ie;Ie|=2;var s=CA();(Pt!==t||Nt!==e)&&(Gr=null,Ga=dt()+500,vo(t,e));do try{$N();break}catch(a){RA(t,a)}while(!0);Sv(),Kh.current=s,Ie=i,gt!==null?e=0:(Pt=null,Nt=0,e=wt)}if(e!==0){if(e===2&&(i=Sg(t),i!==0&&(r=i,e=Xg(t,i))),e===1)throw n=iu,vo(t,0),Ui(t,r),mn(t,dt()),n;if(e===6)Ui(t,r);else{if(i=t.current.alternate,!(r&30)&&!jN(i)&&(e=Yh(t,r),e===2&&(s=Sg(t),s!==0&&(r=s,e=Xg(t,s))),e===1))throw n=iu,vo(t,0),Ui(t,r),mn(t,dt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(K(345));case 2:Js(t,ln,Gr);break;case 3:if(Ui(t,r),(r&130023424)===r&&(e=Uv+500-dt(),10<e)){if(Dh(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Zt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Dg(Js.bind(null,t,ln,Gr),e);break}Js(t,ln,Gr);break;case 4:if(Ui(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-ir(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=dt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*UN(r/1960))-r,10<r){t.timeoutHandle=Dg(Js.bind(null,t,ln,Gr),r);break}Js(t,ln,Gr);break;case 5:Js(t,ln,Gr);break;default:throw Error(K(329))}}}return mn(t,dt()),t.callbackNode===n?bA.bind(null,t):null}function Xg(t,e){var n=Pc;return t.current.memoizedState.isDehydrated&&(vo(t,e).flags|=256),t=Yh(t,e),t!==2&&(e=ln,ln=n,e!==null&&Zg(e)),t}function Zg(t){ln===null?ln=t:ln.push.apply(ln,t)}function jN(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!cr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ui(t,e){for(e&=~Fv,e&=~Qf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ir(e),r=1<<n;t[n]=-1,e&=~r}}function yE(t){if(Ie&6)throw Error(K(327));Pa();var e=Dh(t,0);if(!(e&1))return mn(t,dt()),null;var n=Yh(t,e);if(t.tag!==0&&n===2){var r=Sg(t);r!==0&&(e=r,n=Xg(t,r))}if(n===1)throw n=iu,vo(t,0),Ui(t,e),mn(t,dt()),n;if(n===6)throw Error(K(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Js(t,ln,Gr),mn(t,dt()),null}function jv(t,e){var n=Ie;Ie|=1;try{return t(e)}finally{Ie=n,Ie===0&&(Ga=dt()+500,Wf&&Cs())}}function Po(t){Ji!==null&&Ji.tag===0&&!(Ie&6)&&Pa();var e=Ie;Ie|=1;var n=$n.transition,r=De;try{if($n.transition=null,De=1,t)return t()}finally{De=r,$n.transition=n,Ie=e,!(Ie&6)&&Cs()}}function Bv(){En=wa.current,We(wa)}function vo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,gN(n)),gt!==null)for(n=gt.return;n!==null;){var r=n;switch(Ev(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Lh();break;case 3:Ha(),We(fn),We(Qt),Cv();break;case 5:Rv(r);break;case 4:Ha();break;case 13:We(Xe);break;case 19:We(Xe);break;case 10:Av(r.type._context);break;case 22:case 23:Bv()}n=n.return}if(Pt=t,gt=t=as(t.current,null),Nt=En=e,wt=0,iu=null,Fv=Qf=xo=0,ln=Pc=null,ao!==null){for(e=0;e<ao.length;e++)if(n=ao[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}ao=null}return t}function RA(t,e){do{var n=gt;try{if(Sv(),rh.current=Hh,Wh){for(var r=et.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Wh=!1}if(Ao=0,At=vt=et=null,Ac=!1,tu=0,Lv.current=null,n===null||n.return===null){wt=1,iu=e,gt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Nt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=iE(o);if(m!==null){m.flags&=-257,sE(m,o,a,s,e),m.mode&1&&rE(s,u,e),e=m,l=u;var E=e.updateQueue;if(E===null){var v=new Set;v.add(l),e.updateQueue=v}else E.add(l);break e}else{if(!(e&1)){rE(s,u,e),$v();break e}l=Error(K(426))}}else if(Ge&&a.mode&1){var S=iE(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),sE(S,o,a,s,e),Tv(Ka(l,a));break e}}s=l=Ka(l,a),wt!==4&&(wt=2),Pc===null?Pc=[s]:Pc.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var _=hA(s,l,e);J0(s,_);break e;case 1:a=l;var y=s.type,I=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(ss===null||!ss.has(I)))){s.flags|=65536,e&=-e,s.lanes|=e;var D=fA(s,a,e);J0(s,D);break e}}s=s.return}while(s!==null)}DA(n)}catch(N){e=N,gt===n&&n!==null&&(gt=n=n.return);continue}break}while(!0)}function CA(){var t=Kh.current;return Kh.current=Hh,t===null?Hh:t}function $v(){(wt===0||wt===3||wt===2)&&(wt=4),Pt===null||!(xo&268435455)&&!(Qf&268435455)||Ui(Pt,Nt)}function Yh(t,e){var n=Ie;Ie|=2;var r=CA();(Pt!==t||Nt!==e)&&(Gr=null,vo(t,e));do try{BN();break}catch(i){RA(t,i)}while(!0);if(Sv(),Ie=n,Kh.current=r,gt!==null)throw Error(K(261));return Pt=null,Nt=0,wt}function BN(){for(;gt!==null;)kA(gt)}function $N(){for(;gt!==null&&!fD();)kA(gt)}function kA(t){var e=OA(t.alternate,t,En);t.memoizedProps=t.pendingProps,e===null?DA(t):gt=e,Lv.current=null}function DA(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=VN(n,e),n!==null){n.flags&=32767,gt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{wt=6,gt=null;return}}else if(n=ON(n,e,En),n!==null){gt=n;return}if(e=e.sibling,e!==null){gt=e;return}gt=e=t}while(e!==null);wt===0&&(wt=5)}function Js(t,e,n){var r=De,i=$n.transition;try{$n.transition=null,De=1,zN(t,e,n,r)}finally{$n.transition=i,De=r}return null}function zN(t,e,n,r){do Pa();while(Ji!==null);if(Ie&6)throw Error(K(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(K(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(ID(t,s),t===Pt&&(gt=Pt=null,Nt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Vd||(Vd=!0,VA(kh,function(){return Pa(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=$n.transition,$n.transition=null;var o=De;De=1;var a=Ie;Ie|=4,Lv.current=null,LN(t,n),xA(n,t),cN(Cg),Nh=!!Rg,Cg=Rg=null,t.current=n,FN(n),pD(),Ie=a,De=o,$n.transition=s}else t.current=n;if(Vd&&(Vd=!1,Ji=t,Qh=i),s=t.pendingLanes,s===0&&(ss=null),yD(n.stateNode),mn(t,dt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Gh)throw Gh=!1,t=Yg,Yg=null,t;return Qh&1&&t.tag!==0&&Pa(),s=t.pendingLanes,s&1?t===Jg?bc++:(bc=0,Jg=t):bc=0,Cs(),null}function Pa(){if(Ji!==null){var t=hS(Qh),e=$n.transition,n=De;try{if($n.transition=null,De=16>t?16:t,Ji===null)var r=!1;else{if(t=Ji,Ji=null,Qh=0,Ie&6)throw Error(K(331));var i=Ie;for(Ie|=4,ee=t.current;ee!==null;){var s=ee,o=s.child;if(ee.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(ee=u;ee!==null;){var d=ee;switch(d.tag){case 0:case 11:case 15:xc(8,d,s)}var h=d.child;if(h!==null)h.return=d,ee=h;else for(;ee!==null;){d=ee;var p=d.sibling,m=d.return;if(IA(d),d===u){ee=null;break}if(p!==null){p.return=m,ee=p;break}ee=m}}}var E=s.alternate;if(E!==null){var v=E.child;if(v!==null){E.child=null;do{var S=v.sibling;v.sibling=null,v=S}while(v!==null)}}ee=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ee=o;else e:for(;ee!==null;){if(s=ee,s.flags&2048)switch(s.tag){case 0:case 11:case 15:xc(9,s,s.return)}var _=s.sibling;if(_!==null){_.return=s.return,ee=_;break e}ee=s.return}}var y=t.current;for(ee=y;ee!==null;){o=ee;var I=o.child;if(o.subtreeFlags&2064&&I!==null)I.return=o,ee=I;else e:for(o=y;ee!==null;){if(a=ee,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Gf(9,a)}}catch(N){ot(a,a.return,N)}if(a===o){ee=null;break e}var D=a.sibling;if(D!==null){D.return=a.return,ee=D;break e}ee=a.return}}if(Ie=i,Cs(),br&&typeof br.onPostCommitFiberRoot=="function")try{br.onPostCommitFiberRoot(jf,t)}catch{}r=!0}return r}finally{De=n,$n.transition=e}}return!1}function vE(t,e,n){e=Ka(n,e),e=hA(t,e,1),t=is(t,e,1),e=Zt(),t!==null&&(Ru(t,1,e),mn(t,e))}function ot(t,e,n){if(t.tag===3)vE(t,t,n);else for(;e!==null;){if(e.tag===3){vE(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ss===null||!ss.has(r))){t=Ka(n,t),t=fA(e,t,1),e=is(e,t,1),t=Zt(),e!==null&&(Ru(e,1,t),mn(e,t));break}}e=e.return}}function qN(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Zt(),t.pingedLanes|=t.suspendedLanes&n,Pt===t&&(Nt&n)===n&&(wt===4||wt===3&&(Nt&130023424)===Nt&&500>dt()-Uv?vo(t,0):Fv|=n),mn(t,e)}function NA(t,e){e===0&&(t.mode&1?(e=Ad,Ad<<=1,!(Ad&130023424)&&(Ad=4194304)):e=1);var n=Zt();t=li(t,e),t!==null&&(Ru(t,e,n),mn(t,n))}function WN(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),NA(t,n)}function HN(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(K(314))}r!==null&&r.delete(e),NA(t,n)}var OA;OA=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||fn.current)cn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return cn=!1,NN(t,e,n);cn=!!(t.flags&131072)}else cn=!1,Ge&&e.flags&1048576&&FS(e,jh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;sh(t,e),t=e.pendingProps;var i=za(e,Qt.current);xa(e,n),i=Dv(null,e,r,t,i,n);var s=Nv();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,pn(r)?(s=!0,Fh(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Pv(e),i.updater=Kf,e.stateNode=i,i._reactInternals=e,Ug(e,r,t,n),e=$g(null,e,r,!0,s,n)):(e.tag=0,Ge&&s&&wv(e),Jt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(sh(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=GN(r),t=Qn(r,t),i){case 0:e=Bg(null,e,r,t,n);break e;case 1:e=lE(null,e,r,t,n);break e;case 11:e=oE(null,e,r,t,n);break e;case 14:e=aE(null,e,r,Qn(r.type,t),n);break e}throw Error(K(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Qn(r,i),Bg(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Qn(r,i),lE(t,e,r,i,n);case 3:e:{if(yA(e),t===null)throw Error(K(387));r=e.pendingProps,s=e.memoizedState,i=s.element,qS(t,e),zh(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ka(Error(K(423)),e),e=cE(t,e,r,n,i);break e}else if(r!==i){i=Ka(Error(K(424)),e),e=cE(t,e,r,n,i);break e}else for(xn=rs(e.stateNode.containerInfo.firstChild),bn=e,Ge=!0,tr=null,n=$S(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(qa(),r===i){e=ci(t,e,n);break e}Jt(t,e,r,n)}e=e.child}return e;case 5:return WS(e),t===null&&Mg(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,kg(r,i)?o=null:s!==null&&kg(r,s)&&(e.flags|=32),gA(t,e),Jt(t,e,o,n),e.child;case 6:return t===null&&Mg(e),null;case 13:return vA(t,e,n);case 4:return bv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Wa(e,null,r,n):Jt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Qn(r,i),oE(t,e,r,i,n);case 7:return Jt(t,e,e.pendingProps,n),e.child;case 8:return Jt(t,e,e.pendingProps.children,n),e.child;case 12:return Jt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Fe(Bh,r._currentValue),r._currentValue=o,s!==null)if(cr(s.value,o)){if(s.children===i.children&&!fn.current){e=ci(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=ni(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Lg(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(K(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Lg(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Jt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,xa(e,n),i=zn(i),r=r(i),e.flags|=1,Jt(t,e,r,n),e.child;case 14:return r=e.type,i=Qn(r,e.pendingProps),i=Qn(r.type,i),aE(t,e,r,i,n);case 15:return pA(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Qn(r,i),sh(t,e),e.tag=1,pn(r)?(t=!0,Fh(e)):t=!1,xa(e,n),dA(e,r,i),Ug(e,r,i,n),$g(null,e,r,!0,t,n);case 19:return _A(t,e,n);case 22:return mA(t,e,n)}throw Error(K(156,e.tag))};function VA(t,e){return lS(t,e)}function KN(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bn(t,e,n,r){return new KN(t,e,n,r)}function zv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function GN(t){if(typeof t=="function")return zv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===lv)return 11;if(t===cv)return 14}return 2}function as(t,e){var n=t.alternate;return n===null?(n=Bn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function lh(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")zv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ua:return _o(n.children,i,s,e);case av:o=8,i|=8;break;case cg:return t=Bn(12,n,e,i|2),t.elementType=cg,t.lanes=s,t;case ug:return t=Bn(13,n,e,i),t.elementType=ug,t.lanes=s,t;case dg:return t=Bn(19,n,e,i),t.elementType=dg,t.lanes=s,t;case W1:return Yf(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case z1:o=10;break e;case q1:o=9;break e;case lv:o=11;break e;case cv:o=14;break e;case Mi:o=16,r=null;break e}throw Error(K(130,t==null?t:typeof t,""))}return e=Bn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function _o(t,e,n,r){return t=Bn(7,t,r,e),t.lanes=n,t}function Yf(t,e,n,r){return t=Bn(22,t,r,e),t.elementType=W1,t.lanes=n,t.stateNode={isHidden:!1},t}function Dm(t,e,n){return t=Bn(6,t,null,e),t.lanes=n,t}function Nm(t,e,n){return e=Bn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function QN(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fm(0),this.expirationTimes=fm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fm(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function qv(t,e,n,r,i,s,o,a,l){return t=new QN(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Bn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pv(s),t}function YN(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ca,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function MA(t){if(!t)return ms;t=t._reactInternals;e:{if(jo(t)!==t||t.tag!==1)throw Error(K(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(pn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(K(171))}if(t.tag===1){var n=t.type;if(pn(n))return MS(t,n,e)}return e}function LA(t,e,n,r,i,s,o,a,l){return t=qv(n,r,!0,t,i,s,o,a,l),t.context=MA(null),n=t.current,r=Zt(),i=os(n),s=ni(r,i),s.callback=e??null,is(n,s,i),t.current.lanes=i,Ru(t,i,r),mn(t,r),t}function Jf(t,e,n,r){var i=e.current,s=Zt(),o=os(i);return n=MA(n),e.context===null?e.context=n:e.pendingContext=n,e=ni(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=is(i,e,o),t!==null&&(sr(t,i,o,s),nh(t,i,o)),o}function Jh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function _E(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Wv(t,e){_E(t,e),(t=t.alternate)&&_E(t,e)}function JN(){return null}var FA=typeof reportError=="function"?reportError:function(t){console.error(t)};function Hv(t){this._internalRoot=t}Xf.prototype.render=Hv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(K(409));Jf(t,e,null,null)};Xf.prototype.unmount=Hv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Po(function(){Jf(null,t,null,null)}),e[ai]=null}};function Xf(t){this._internalRoot=t}Xf.prototype.unstable_scheduleHydration=function(t){if(t){var e=mS();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Fi.length&&e!==0&&e<Fi[n].priority;n++);Fi.splice(n,0,t),n===0&&yS(t)}};function Kv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Zf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function wE(){}function XN(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Jh(o);s.call(u)}}var o=LA(e,r,t,0,null,!1,!1,"",wE);return t._reactRootContainer=o,t[ai]=o.current,Yc(t.nodeType===8?t.parentNode:t),Po(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Jh(l);a.call(u)}}var l=qv(t,0,!1,null,null,!1,!1,"",wE);return t._reactRootContainer=l,t[ai]=l.current,Yc(t.nodeType===8?t.parentNode:t),Po(function(){Jf(e,l,n,r)}),l}function ep(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Jh(o);a.call(l)}}Jf(e,o,t,i)}else o=XN(n,e,t,i,r);return Jh(o)}fS=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=hc(e.pendingLanes);n!==0&&(hv(e,n|1),mn(e,dt()),!(Ie&6)&&(Ga=dt()+500,Cs()))}break;case 13:Po(function(){var r=li(t,1);if(r!==null){var i=Zt();sr(r,t,1,i)}}),Wv(t,1)}};fv=function(t){if(t.tag===13){var e=li(t,134217728);if(e!==null){var n=Zt();sr(e,t,134217728,n)}Wv(t,134217728)}};pS=function(t){if(t.tag===13){var e=os(t),n=li(t,e);if(n!==null){var r=Zt();sr(n,t,e,r)}Wv(t,e)}};mS=function(){return De};gS=function(t,e){var n=De;try{return De=t,e()}finally{De=n}};Eg=function(t,e,n){switch(e){case"input":if(pg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=qf(r);if(!i)throw Error(K(90));K1(r),pg(r,i)}}}break;case"textarea":Q1(t,n);break;case"select":e=n.value,e!=null&&Ta(t,!!n.multiple,e,!1)}};nS=jv;rS=Po;var ZN={usingClientEntryPoint:!1,Events:[ku,pa,qf,eS,tS,jv]},tc={findFiberByHostInstance:oo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},e2={bundleType:tc.bundleType,version:tc.version,rendererPackageName:tc.rendererPackageName,rendererConfig:tc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=oS(t),t===null?null:t.stateNode},findFiberByHostInstance:tc.findFiberByHostInstance||JN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Md=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Md.isDisabled&&Md.supportsFiber)try{jf=Md.inject(e2),br=Md}catch{}}Nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZN;Nn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Kv(e))throw Error(K(200));return YN(t,e,null,n)};Nn.createRoot=function(t,e){if(!Kv(t))throw Error(K(299));var n=!1,r="",i=FA;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=qv(t,1,!1,null,null,n,!1,r,i),t[ai]=e.current,Yc(t.nodeType===8?t.parentNode:t),new Hv(e)};Nn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(K(188)):(t=Object.keys(t).join(","),Error(K(268,t)));return t=oS(e),t=t===null?null:t.stateNode,t};Nn.flushSync=function(t){return Po(t)};Nn.hydrate=function(t,e,n){if(!Zf(e))throw Error(K(200));return ep(null,t,e,!0,n)};Nn.hydrateRoot=function(t,e,n){if(!Kv(t))throw Error(K(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=FA;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=LA(e,null,t,1,n??null,i,!1,s,o),t[ai]=e.current,Yc(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Xf(e)};Nn.render=function(t,e,n){if(!Zf(e))throw Error(K(200));return ep(null,t,e,!1,n)};Nn.unmountComponentAtNode=function(t){if(!Zf(t))throw Error(K(40));return t._reactRootContainer?(Po(function(){ep(null,null,t,!1,function(){t._reactRootContainer=null,t[ai]=null})}),!0):!1};Nn.unstable_batchedUpdates=jv;Nn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Zf(n))throw Error(K(200));if(t==null||t._reactInternals===void 0)throw Error(K(38));return ep(t,e,n,!1,r)};Nn.version="18.3.1-next-f1338f8080-20240426";function UA(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(UA)}catch(t){console.error(t)}}UA(),U1.exports=Nn;var Nu=U1.exports;const jA=x1(Nu);var BA,EE=Nu;BA=EE.createRoot,EE.hydrateRoot;const t2="modulepreload",n2=function(t){return"/"+t},TE={},Le=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=n2(l),l in TE)return;TE[l]=!0;const u=l.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":t2,u||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),u)return new Promise((p,m)=>{h.addEventListener("load",p),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},r2=1,i2=1e6;let Om=0;function s2(){return Om=(Om+1)%Number.MAX_SAFE_INTEGER,Om.toString()}const Vm=new Map,IE=t=>{if(Vm.has(t))return;const e=setTimeout(()=>{Vm.delete(t),Rc({type:"REMOVE_TOAST",toastId:t})},i2);Vm.set(t,e)},o2=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,r2)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?IE(n):t.toasts.forEach(r=>{IE(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},ch=[];let uh={toasts:[]};function Rc(t){uh=o2(uh,t),ch.forEach(e=>{e(uh)})}function a2({...t}){const e=s2(),n=i=>Rc({type:"UPDATE_TOAST",toast:{...i,id:e}}),r=()=>Rc({type:"DISMISS_TOAST",toastId:e});return Rc({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:n}}function l2(){const[t,e]=b.useState(uh);return b.useEffect(()=>(ch.push(e),()=>{const n=ch.indexOf(e);n>-1&&ch.splice(n,1)}),[t]),{...t,toast:a2,dismiss:n=>Rc({type:"DISMISS_TOAST",toastId:n})}}function _t(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function SE(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function $A(...t){return e=>{let n=!1;const r=t.map(i=>{const s=SE(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():SE(t[i],null)}}}}function ur(...t){return b.useCallback($A(...t),t)}function S$(t,e){const n=b.createContext(e),r=s=>{const{children:o,...a}=s,l=b.useMemo(()=>a,Object.values(a));return O.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function i(s){const o=b.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${t}\``)}return[r,i]}function tp(t,e=[]){let n=[];function r(s,o){const a=b.createContext(o),l=n.length;n=[...n,o];const u=h=>{var _;const{scope:p,children:m,...E}=h,v=((_=p==null?void 0:p[t])==null?void 0:_[l])||a,S=b.useMemo(()=>E,Object.values(E));return O.jsx(v.Provider,{value:S,children:m})};u.displayName=s+"Provider";function d(h,p){var v;const m=((v=p==null?void 0:p[t])==null?void 0:v[l])||a,E=b.useContext(m);if(E)return E;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${s}\``)}return[u,d]}const i=()=>{const s=n.map(o=>b.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return b.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,c2(i,...e)]}function c2(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:u})=>{const h=l(s)[`__scope${u}`];return{...a,...h}},{});return b.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function Xh(t){const e=u2(t),n=b.forwardRef((r,i)=>{const{children:s,...o}=r,a=b.Children.toArray(s),l=a.find(h2);if(l){const u=l.props.children,d=a.map(h=>h===l?b.Children.count(u)>1?b.Children.only(null):b.isValidElement(u)?u.props.children:null:h);return O.jsx(e,{...o,ref:i,children:b.isValidElement(u)?b.cloneElement(u,void 0,d):null})}return O.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}var A$=Xh("Slot");function u2(t){const e=b.forwardRef((n,r)=>{const{children:i,...s}=n;if(b.isValidElement(i)){const o=p2(i),a=f2(s,i.props);return i.type!==b.Fragment&&(a.ref=r?$A(r,o):o),b.cloneElement(i,a)}return b.Children.count(i)>1?b.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var zA=Symbol("radix.slottable");function d2(t){const e=({children:n})=>O.jsx(O.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=zA,e}function h2(t){return b.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===zA}function f2(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const l=s(...a);return i(...a),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function p2(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function m2(t){const e=t+"CollectionProvider",[n,r]=tp(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=v=>{const{scope:S,children:_}=v,y=z.useRef(null),I=z.useRef(new Map).current;return O.jsx(i,{scope:S,itemMap:I,collectionRef:y,children:_})};o.displayName=e;const a=t+"CollectionSlot",l=Xh(a),u=z.forwardRef((v,S)=>{const{scope:_,children:y}=v,I=s(a,_),D=ur(S,I.collectionRef);return O.jsx(l,{ref:D,children:y})});u.displayName=a;const d=t+"CollectionItemSlot",h="data-radix-collection-item",p=Xh(d),m=z.forwardRef((v,S)=>{const{scope:_,children:y,...I}=v,D=z.useRef(null),N=ur(S,D),V=s(d,_);return z.useEffect(()=>(V.itemMap.set(D,{ref:D,...I}),()=>void V.itemMap.delete(D))),O.jsx(p,{[h]:"",ref:N,children:y})});m.displayName=d;function E(v){const S=s(t+"CollectionConsumer",v);return z.useCallback(()=>{const y=S.collectionRef.current;if(!y)return[];const I=Array.from(y.querySelectorAll(`[${h}]`));return Array.from(S.itemMap.values()).sort((V,T)=>I.indexOf(V.ref.current)-I.indexOf(T.ref.current))},[S.collectionRef,S.itemMap])}return[{Provider:o,Slot:u,ItemSlot:m},E,r]}var g2=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],yn=g2.reduce((t,e)=>{const n=Xh(`Primitive.${e}`),r=b.forwardRef((i,s)=>{const{asChild:o,...a}=i,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),O.jsx(l,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function qA(t,e){t&&Nu.flushSync(()=>t.dispatchEvent(e))}function gs(t){const e=b.useRef(t);return b.useEffect(()=>{e.current=t}),b.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function y2(t,e=globalThis==null?void 0:globalThis.document){const n=gs(t);b.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var v2="DismissableLayer",ey="dismissableLayer.update",_2="dismissableLayer.pointerDownOutside",w2="dismissableLayer.focusOutside",AE,WA=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Gv=b.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=t,u=b.useContext(WA),[d,h]=b.useState(null),p=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=b.useState({}),E=ur(e,T=>h(T)),v=Array.from(u.layers),[S]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),_=v.indexOf(S),y=d?v.indexOf(d):-1,I=u.layersWithOutsidePointerEventsDisabled.size>0,D=y>=_,N=T2(T=>{const w=T.target,x=[...u.branches].some(P=>P.contains(w));!D||x||(i==null||i(T),o==null||o(T),T.defaultPrevented||a==null||a())},p),V=I2(T=>{const w=T.target;[...u.branches].some(P=>P.contains(w))||(s==null||s(T),o==null||o(T),T.defaultPrevented||a==null||a())},p);return y2(T=>{y===u.layers.size-1&&(r==null||r(T),!T.defaultPrevented&&a&&(T.preventDefault(),a()))},p),b.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(AE=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),xE(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=AE)}},[d,p,n,u]),b.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),xE())},[d,u]),b.useEffect(()=>{const T=()=>m({});return document.addEventListener(ey,T),()=>document.removeEventListener(ey,T)},[]),O.jsx(yn.div,{...l,ref:E,style:{pointerEvents:I?D?"auto":"none":void 0,...t.style},onFocusCapture:_t(t.onFocusCapture,V.onFocusCapture),onBlurCapture:_t(t.onBlurCapture,V.onBlurCapture),onPointerDownCapture:_t(t.onPointerDownCapture,N.onPointerDownCapture)})});Gv.displayName=v2;var E2="DismissableLayerBranch",HA=b.forwardRef((t,e)=>{const n=b.useContext(WA),r=b.useRef(null),i=ur(e,r);return b.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),O.jsx(yn.div,{...t,ref:i})});HA.displayName=E2;function T2(t,e=globalThis==null?void 0:globalThis.document){const n=gs(t),r=b.useRef(!1),i=b.useRef(()=>{});return b.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){KA(_2,n,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function I2(t,e=globalThis==null?void 0:globalThis.document){const n=gs(t),r=b.useRef(!1);return b.useEffect(()=>{const i=s=>{s.target&&!r.current&&KA(w2,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function xE(){const t=new CustomEvent(ey);document.dispatchEvent(t)}function KA(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?qA(i,s):i.dispatchEvent(s)}var S2=Gv,A2=HA,ys=globalThis!=null&&globalThis.document?b.useLayoutEffect:()=>{},x2="Portal",GA=b.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[i,s]=b.useState(!1);ys(()=>s(!0),[]);const o=n||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?jA.createPortal(O.jsx(yn.div,{...r,ref:e}),o):null});GA.displayName=x2;function P2(t,e){return b.useReducer((n,r)=>e[n][r]??n,t)}var Qv=t=>{const{present:e,children:n}=t,r=b2(e),i=typeof n=="function"?n({present:r.isPresent}):b.Children.only(n),s=ur(r.ref,R2(i));return typeof n=="function"||r.isPresent?b.cloneElement(i,{ref:s}):null};Qv.displayName="Presence";function b2(t){const[e,n]=b.useState(),r=b.useRef(null),i=b.useRef(t),s=b.useRef("none"),o=t?"mounted":"unmounted",[a,l]=P2(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return b.useEffect(()=>{const u=Ld(r.current);s.current=a==="mounted"?u:"none"},[a]),ys(()=>{const u=r.current,d=i.current;if(d!==t){const p=s.current,m=Ld(u);t?l("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(d&&p!==m?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,l]),ys(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,h=m=>{const v=Ld(r.current).includes(m.animationName);if(m.target===e&&v&&(l("ANIMATION_END"),!i.current)){const S=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=S)})}},p=m=>{m.target===e&&(s.current=Ld(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:b.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function Ld(t){return(t==null?void 0:t.animationName)||"none"}function R2(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var C2=L1[" useInsertionEffect ".trim().toString()]||ys;function k2({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[i,s,o]=D2({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:i;{const d=b.useRef(t!==void 0);b.useEffect(()=>{const h=d.current;h!==a&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=a},[a,r])}const u=b.useCallback(d=>{var h;if(a){const p=N2(d)?d(t):d;p!==t&&((h=o.current)==null||h.call(o,p))}else s(d)},[a,t,s,o]);return[l,u]}function D2({defaultProp:t,onChange:e}){const[n,r]=b.useState(t),i=b.useRef(n),s=b.useRef(e);return C2(()=>{s.current=e},[e]),b.useEffect(()=>{var o;i.current!==n&&((o=s.current)==null||o.call(s,n),i.current=n)},[n,i]),[n,r,s]}function N2(t){return typeof t=="function"}var O2=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),V2="VisuallyHidden",np=b.forwardRef((t,e)=>O.jsx(yn.span,{...t,ref:e,style:{...O2,...t.style}}));np.displayName=V2;var M2=np,Yv="ToastProvider",[Jv,L2,F2]=m2("Toast"),[QA,x$]=tp("Toast",[F2]),[U2,rp]=QA(Yv),YA=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:o}=t,[a,l]=b.useState(null),[u,d]=b.useState(0),h=b.useRef(!1),p=b.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Yv}\`. Expected non-empty \`string\`.`),O.jsx(Jv.Provider,{scope:e,children:O.jsx(U2,{scope:e,label:n,duration:r,swipeDirection:i,swipeThreshold:s,toastCount:u,viewport:a,onViewportChange:l,onToastAdd:b.useCallback(()=>d(m=>m+1),[]),onToastRemove:b.useCallback(()=>d(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:p,children:o})})};YA.displayName=Yv;var JA="ToastViewport",j2=["F8"],ty="toast.viewportPause",ny="toast.viewportResume",XA=b.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=j2,label:i="Notifications ({hotkey})",...s}=t,o=rp(JA,n),a=L2(n),l=b.useRef(null),u=b.useRef(null),d=b.useRef(null),h=b.useRef(null),p=ur(e,h,o.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),E=o.toastCount>0;b.useEffect(()=>{const S=_=>{var I;r.length!==0&&r.every(D=>_[D]||_.code===D)&&((I=h.current)==null||I.focus())};return document.addEventListener("keydown",S),()=>document.removeEventListener("keydown",S)},[r]),b.useEffect(()=>{const S=l.current,_=h.current;if(E&&S&&_){const y=()=>{if(!o.isClosePausedRef.current){const V=new CustomEvent(ty);_.dispatchEvent(V),o.isClosePausedRef.current=!0}},I=()=>{if(o.isClosePausedRef.current){const V=new CustomEvent(ny);_.dispatchEvent(V),o.isClosePausedRef.current=!1}},D=V=>{!S.contains(V.relatedTarget)&&I()},N=()=>{S.contains(document.activeElement)||I()};return S.addEventListener("focusin",y),S.addEventListener("focusout",D),S.addEventListener("pointermove",y),S.addEventListener("pointerleave",N),window.addEventListener("blur",y),window.addEventListener("focus",I),()=>{S.removeEventListener("focusin",y),S.removeEventListener("focusout",D),S.removeEventListener("pointermove",y),S.removeEventListener("pointerleave",N),window.removeEventListener("blur",y),window.removeEventListener("focus",I)}}},[E,o.isClosePausedRef]);const v=b.useCallback(({tabbingDirection:S})=>{const y=a().map(I=>{const D=I.ref.current,N=[D,...Z2(D)];return S==="forwards"?N:N.reverse()});return(S==="forwards"?y.reverse():y).flat()},[a]);return b.useEffect(()=>{const S=h.current;if(S){const _=y=>{var N,V,T;const I=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!I){const w=document.activeElement,x=y.shiftKey;if(y.target===S&&x){(N=u.current)==null||N.focus();return}const k=v({tabbingDirection:x?"backwards":"forwards"}),R=k.findIndex(W=>W===w);Mm(k.slice(R+1))?y.preventDefault():x?(V=u.current)==null||V.focus():(T=d.current)==null||T.focus()}};return S.addEventListener("keydown",_),()=>S.removeEventListener("keydown",_)}},[a,v]),O.jsxs(A2,{ref:l,role:"region","aria-label":i.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:E?void 0:"none"},children:[E&&O.jsx(ry,{ref:u,onFocusFromOutsideViewport:()=>{const S=v({tabbingDirection:"forwards"});Mm(S)}}),O.jsx(Jv.Slot,{scope:n,children:O.jsx(yn.ol,{tabIndex:-1,...s,ref:p})}),E&&O.jsx(ry,{ref:d,onFocusFromOutsideViewport:()=>{const S=v({tabbingDirection:"backwards"});Mm(S)}})]})});XA.displayName=JA;var ZA="ToastFocusProxy",ry=b.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...i}=t,s=rp(ZA,n);return O.jsx(np,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:o=>{var u;const a=o.relatedTarget;!((u=s.viewport)!=null&&u.contains(a))&&r()}})});ry.displayName=ZA;var Ou="Toast",B2="toast.swipeStart",$2="toast.swipeMove",z2="toast.swipeCancel",q2="toast.swipeEnd",ex=b.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:i,onOpenChange:s,...o}=t,[a,l]=k2({prop:r,defaultProp:i??!0,onChange:s,caller:Ou});return O.jsx(Qv,{present:n||a,children:O.jsx(K2,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:gs(t.onPause),onResume:gs(t.onResume),onSwipeStart:_t(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:_t(t.onSwipeMove,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:_t(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:_t(t.onSwipeEnd,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),l(!1)})})})});ex.displayName=Ou;var[W2,H2]=QA(Ou,{onClose(){}}),K2=b.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:i,open:s,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:u,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:p,onSwipeEnd:m,...E}=t,v=rp(Ou,n),[S,_]=b.useState(null),y=ur(e,W=>_(W)),I=b.useRef(null),D=b.useRef(null),N=i||v.duration,V=b.useRef(0),T=b.useRef(N),w=b.useRef(0),{onToastAdd:x,onToastRemove:P}=v,C=gs(()=>{var X;(S==null?void 0:S.contains(document.activeElement))&&((X=v.viewport)==null||X.focus()),o()}),k=b.useCallback(W=>{!W||W===1/0||(window.clearTimeout(w.current),V.current=new Date().getTime(),w.current=window.setTimeout(C,W))},[C]);b.useEffect(()=>{const W=v.viewport;if(W){const X=()=>{k(T.current),u==null||u()},Z=()=>{const ie=new Date().getTime()-V.current;T.current=T.current-ie,window.clearTimeout(w.current),l==null||l()};return W.addEventListener(ty,Z),W.addEventListener(ny,X),()=>{W.removeEventListener(ty,Z),W.removeEventListener(ny,X)}}},[v.viewport,N,l,u,k]),b.useEffect(()=>{s&&!v.isClosePausedRef.current&&k(N)},[s,N,v.isClosePausedRef,k]),b.useEffect(()=>(x(),()=>P()),[x,P]);const R=b.useMemo(()=>S?ax(S):null,[S]);return v.viewport?O.jsxs(O.Fragment,{children:[R&&O.jsx(G2,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:R}),O.jsx(W2,{scope:n,onClose:C,children:Nu.createPortal(O.jsx(Jv.ItemSlot,{scope:n,children:O.jsx(S2,{asChild:!0,onEscapeKeyDown:_t(a,()=>{v.isFocusedToastEscapeKeyDownRef.current||C(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:O.jsx(yn.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":v.swipeDirection,...E,ref:y,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:_t(t.onKeyDown,W=>{W.key==="Escape"&&(a==null||a(W.nativeEvent),W.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,C()))}),onPointerDown:_t(t.onPointerDown,W=>{W.button===0&&(I.current={x:W.clientX,y:W.clientY})}),onPointerMove:_t(t.onPointerMove,W=>{if(!I.current)return;const X=W.clientX-I.current.x,Z=W.clientY-I.current.y,ie=!!D.current,B=["left","right"].includes(v.swipeDirection),U=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,H=B?U(0,X):0,ae=B?0:U(0,Z),J=W.pointerType==="touch"?10:2,se={x:H,y:ae},ce={originalEvent:W,delta:se};ie?(D.current=se,Fd($2,h,ce,{discrete:!1})):PE(se,v.swipeDirection,J)?(D.current=se,Fd(B2,d,ce,{discrete:!1}),W.target.setPointerCapture(W.pointerId)):(Math.abs(X)>J||Math.abs(Z)>J)&&(I.current=null)}),onPointerUp:_t(t.onPointerUp,W=>{const X=D.current,Z=W.target;if(Z.hasPointerCapture(W.pointerId)&&Z.releasePointerCapture(W.pointerId),D.current=null,I.current=null,X){const ie=W.currentTarget,B={originalEvent:W,delta:X};PE(X,v.swipeDirection,v.swipeThreshold)?Fd(q2,m,B,{discrete:!0}):Fd(z2,p,B,{discrete:!0}),ie.addEventListener("click",U=>U.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),G2=t=>{const{__scopeToast:e,children:n,...r}=t,i=rp(Ou,e),[s,o]=b.useState(!1),[a,l]=b.useState(!1);return J2(()=>o(!0)),b.useEffect(()=>{const u=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(u)},[]),a?null:O.jsx(GA,{asChild:!0,children:O.jsx(np,{...r,children:s&&O.jsxs(O.Fragment,{children:[i.label," ",n]})})})},Q2="ToastTitle",tx=b.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return O.jsx(yn.div,{...r,ref:e})});tx.displayName=Q2;var Y2="ToastDescription",nx=b.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return O.jsx(yn.div,{...r,ref:e})});nx.displayName=Y2;var rx="ToastAction",ix=b.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?O.jsx(ox,{altText:n,asChild:!0,children:O.jsx(Xv,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${rx}\`. Expected non-empty \`string\`.`),null)});ix.displayName=rx;var sx="ToastClose",Xv=b.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,i=H2(sx,n);return O.jsx(ox,{asChild:!0,children:O.jsx(yn.button,{type:"button",...r,ref:e,onClick:_t(t.onClick,i.onClose)})})});Xv.displayName=sx;var ox=b.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...i}=t;return O.jsx(yn.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function ax(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),X2(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!i)if(s){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...ax(r))}}),e}function Fd(t,e,n,{discrete:r}){const i=n.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?qA(i,s):i.dispatchEvent(s)}var PE=(t,e,n=0)=>{const r=Math.abs(t.x),i=Math.abs(t.y),s=r>i;return e==="left"||e==="right"?s&&r>n:!s&&i>n};function J2(t=()=>{}){const e=gs(t);ys(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function X2(t){return t.nodeType===t.ELEMENT_NODE}function Z2(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Mm(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var eO=YA,lx=XA,cx=ex,ux=tx,dx=nx,hx=ix,fx=Xv;function px(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=px(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function mx(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=px(t))&&(r&&(r+=" "),r+=e);return r}const bE=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,RE=mx,tO=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return RE(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(u=>{const d=n==null?void 0:n[u],h=s==null?void 0:s[u];if(d===null)return null;const p=bE(d)||bE(h);return i[u][p]}),a=n&&Object.entries(n).reduce((u,d)=>{let[h,p]=d;return p===void 0||(u[h]=p),u},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:h,className:p,...m}=d;return Object.entries(m).every(E=>{let[v,S]=E;return Array.isArray(S)?S.includes({...s,...a}[v]):{...s,...a}[v]===S})?[...u,h,p]:u},[]);return RE(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nO=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),gx=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var rO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iO=b.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>b.createElement("svg",{ref:l,...rO,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:gx("lucide",i),...a},[...o.map(([u,d])=>b.createElement(u,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rn=(t,e)=>{const n=b.forwardRef(({className:r,...i},s)=>b.createElement(iO,{ref:s,iconNode:e,className:gx(`lucide-${nO(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sO=rn("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oO=rn("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aO=rn("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lO=rn("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cO=rn("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uO=rn("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CE=rn("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dO=rn("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kE=rn("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lm=rn("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DE=rn("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hO=rn("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fO=rn("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pO=rn("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mO=rn("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Zv="-",gO=t=>{const e=vO(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(Zv);return a[0]===""&&a.length!==1&&a.shift(),yx(a,e)||yO(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},yx=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?yx(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(Zv);return(o=e.validators.find(({validator:a})=>a(s)))==null?void 0:o.classGroupId},NE=/^\[(.+)\]$/,yO=t=>{if(NE.test(t)){const e=NE.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},vO=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return wO(Object.entries(t.classGroups),n).forEach(([s,o])=>{iy(o,r,s,e)}),r},iy=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:OE(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(_O(i)){iy(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,o])=>{iy(o,OE(e,s),n,r)})})},OE=(t,e)=>{let n=t;return e.split(Zv).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},_O=t=>t.isThemeGetter,wO=(t,e)=>e?t.map(([n,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,a])=>[e+o,a])):s);return[n,i]}):t,EO=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(s,o)=>{n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){n.has(s)?n.set(s,o):i(s,o)}}},vx="!",TO=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],s=e.length,o=a=>{const l=[];let u=0,d=0,h;for(let S=0;S<a.length;S++){let _=a[S];if(u===0){if(_===i&&(r||a.slice(S,S+s)===e)){l.push(a.slice(d,S)),d=S+s;continue}if(_==="/"){h=S;continue}}_==="["?u++:_==="]"&&u--}const p=l.length===0?a:a.substring(d),m=p.startsWith(vx),E=m?p.substring(1):p,v=h&&h>d?h-d:void 0;return{modifiers:l,hasImportantModifier:m,baseClassName:E,maybePostfixModifierPosition:v}};return n?a=>n({className:a,parseClassName:o}):o},IO=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},SO=t=>({cache:EO(t.cacheSize),parseClassName:TO(t),...gO(t)}),AO=/\s+/,xO=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=[],o=t.trim().split(AO);let a="";for(let l=o.length-1;l>=0;l-=1){const u=o[l],{modifiers:d,hasImportantModifier:h,baseClassName:p,maybePostfixModifierPosition:m}=n(u);let E=!!m,v=r(E?p.substring(0,m):p);if(!v){if(!E){a=u+(a.length>0?" "+a:a);continue}if(v=r(p),!v){a=u+(a.length>0?" "+a:a);continue}E=!1}const S=IO(d).join(":"),_=h?S+vx:S,y=_+v;if(s.includes(y))continue;s.push(y);const I=i(v,E);for(let D=0;D<I.length;++D){const N=I[D];s.push(_+N)}a=u+(a.length>0?" "+a:a)}return a};function PO(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=_x(e))&&(r&&(r+=" "),r+=n);return r}const _x=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=_x(t[r]))&&(n&&(n+=" "),n+=e);return n};function bO(t,...e){let n,r,i,s=o;function o(l){const u=e.reduce((d,h)=>h(d),t());return n=SO(u),r=n.cache.get,i=n.cache.set,s=a,a(l)}function a(l){const u=r(l);if(u)return u;const d=xO(l,n);return i(l,d),d}return function(){return s(PO.apply(null,arguments))}}const $e=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},wx=/^\[(?:([a-z-]+):)?(.+)\]$/i,RO=/^\d+\/\d+$/,CO=new Set(["px","full","screen"]),kO=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,DO=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,NO=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,OO=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,VO=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Hr=t=>ba(t)||CO.has(t)||RO.test(t),Ri=t=>El(t,"length",zO),ba=t=>!!t&&!Number.isNaN(Number(t)),Fm=t=>El(t,"number",ba),nc=t=>!!t&&Number.isInteger(Number(t)),MO=t=>t.endsWith("%")&&ba(t.slice(0,-1)),pe=t=>wx.test(t),Ci=t=>kO.test(t),LO=new Set(["length","size","percentage"]),FO=t=>El(t,LO,Ex),UO=t=>El(t,"position",Ex),jO=new Set(["image","url"]),BO=t=>El(t,jO,WO),$O=t=>El(t,"",qO),rc=()=>!0,El=(t,e,n)=>{const r=wx.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},zO=t=>DO.test(t)&&!NO.test(t),Ex=()=>!1,qO=t=>OO.test(t),WO=t=>VO.test(t),HO=()=>{const t=$e("colors"),e=$e("spacing"),n=$e("blur"),r=$e("brightness"),i=$e("borderColor"),s=$e("borderRadius"),o=$e("borderSpacing"),a=$e("borderWidth"),l=$e("contrast"),u=$e("grayscale"),d=$e("hueRotate"),h=$e("invert"),p=$e("gap"),m=$e("gradientColorStops"),E=$e("gradientColorStopPositions"),v=$e("inset"),S=$e("margin"),_=$e("opacity"),y=$e("padding"),I=$e("saturate"),D=$e("scale"),N=$e("sepia"),V=$e("skew"),T=$e("space"),w=$e("translate"),x=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],C=()=>["auto",pe,e],k=()=>[pe,e],R=()=>["",Hr,Ri],W=()=>["auto",ba,pe],X=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Z=()=>["solid","dashed","dotted","double","none"],ie=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],B=()=>["start","end","center","between","around","evenly","stretch"],U=()=>["","0",pe],H=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ae=()=>[ba,pe];return{cacheSize:500,separator:":",theme:{colors:[rc],spacing:[Hr,Ri],blur:["none","",Ci,pe],brightness:ae(),borderColor:[t],borderRadius:["none","","full",Ci,pe],borderSpacing:k(),borderWidth:R(),contrast:ae(),grayscale:U(),hueRotate:ae(),invert:U(),gap:k(),gradientColorStops:[t],gradientColorStopPositions:[MO,Ri],inset:C(),margin:C(),opacity:ae(),padding:k(),saturate:ae(),scale:ae(),sepia:U(),skew:ae(),space:k(),translate:k()},classGroups:{aspect:[{aspect:["auto","square","video",pe]}],container:["container"],columns:[{columns:[Ci]}],"break-after":[{"break-after":H()}],"break-before":[{"break-before":H()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...X(),pe]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:x()}],"overscroll-x":[{"overscroll-x":x()}],"overscroll-y":[{"overscroll-y":x()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",nc,pe]}],basis:[{basis:C()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",pe]}],grow:[{grow:U()}],shrink:[{shrink:U()}],order:[{order:["first","last","none",nc,pe]}],"grid-cols":[{"grid-cols":[rc]}],"col-start-end":[{col:["auto",{span:["full",nc,pe]},pe]}],"col-start":[{"col-start":W()}],"col-end":[{"col-end":W()}],"grid-rows":[{"grid-rows":[rc]}],"row-start-end":[{row:["auto",{span:[nc,pe]},pe]}],"row-start":[{"row-start":W()}],"row-end":[{"row-end":W()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",pe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",pe]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...B()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...B(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...B(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[S]}],mx:[{mx:[S]}],my:[{my:[S]}],ms:[{ms:[S]}],me:[{me:[S]}],mt:[{mt:[S]}],mr:[{mr:[S]}],mb:[{mb:[S]}],ml:[{ml:[S]}],"space-x":[{"space-x":[T]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[T]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",pe,e]}],"min-w":[{"min-w":[pe,e,"min","max","fit"]}],"max-w":[{"max-w":[pe,e,"none","full","min","max","fit","prose",{screen:[Ci]},Ci]}],h:[{h:[pe,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[pe,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[pe,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[pe,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Ci,Ri]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Fm]}],"font-family":[{font:[rc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",pe]}],"line-clamp":[{"line-clamp":["none",ba,Fm]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Hr,pe]}],"list-image":[{"list-image":["none",pe]}],"list-style-type":[{list:["none","disc","decimal",pe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[_]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[_]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Z(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Hr,Ri]}],"underline-offset":[{"underline-offset":["auto",Hr,pe]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:k()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",pe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",pe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[_]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...X(),UO]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",FO]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},BO]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[E]}],"gradient-via-pos":[{via:[E]}],"gradient-to-pos":[{to:[E]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[_]}],"border-style":[{border:[...Z(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[_]}],"divide-style":[{divide:Z()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...Z()]}],"outline-offset":[{"outline-offset":[Hr,pe]}],"outline-w":[{outline:[Hr,Ri]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:R()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[_]}],"ring-offset-w":[{"ring-offset":[Hr,Ri]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Ci,$O]}],"shadow-color":[{shadow:[rc]}],opacity:[{opacity:[_]}],"mix-blend":[{"mix-blend":[...ie(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ie()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Ci,pe]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[I]}],sepia:[{sepia:[N]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[_]}],"backdrop-saturate":[{"backdrop-saturate":[I]}],"backdrop-sepia":[{"backdrop-sepia":[N]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",pe]}],duration:[{duration:ae()}],ease:[{ease:["linear","in","out","in-out",pe]}],delay:[{delay:ae()}],animate:[{animate:["none","spin","ping","pulse","bounce",pe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[D]}],"scale-x":[{"scale-x":[D]}],"scale-y":[{"scale-y":[D]}],rotate:[{rotate:[nc,pe]}],"translate-x":[{"translate-x":[w]}],"translate-y":[{"translate-y":[w]}],"skew-x":[{"skew-x":[V]}],"skew-y":[{"skew-y":[V]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",pe]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",pe]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":k()}],"scroll-mx":[{"scroll-mx":k()}],"scroll-my":[{"scroll-my":k()}],"scroll-ms":[{"scroll-ms":k()}],"scroll-me":[{"scroll-me":k()}],"scroll-mt":[{"scroll-mt":k()}],"scroll-mr":[{"scroll-mr":k()}],"scroll-mb":[{"scroll-mb":k()}],"scroll-ml":[{"scroll-ml":k()}],"scroll-p":[{"scroll-p":k()}],"scroll-px":[{"scroll-px":k()}],"scroll-py":[{"scroll-py":k()}],"scroll-ps":[{"scroll-ps":k()}],"scroll-pe":[{"scroll-pe":k()}],"scroll-pt":[{"scroll-pt":k()}],"scroll-pr":[{"scroll-pr":k()}],"scroll-pb":[{"scroll-pb":k()}],"scroll-pl":[{"scroll-pl":k()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",pe]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Hr,Ri,Fm]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},KO=bO(HO);function Bo(...t){return KO(mx(t))}const GO=eO,Tx=b.forwardRef(({className:t,...e},n)=>O.jsx(lx,{ref:n,className:Bo("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));Tx.displayName=lx.displayName;const QO=tO("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Ix=b.forwardRef(({className:t,variant:e,...n},r)=>O.jsx(cx,{ref:r,className:Bo(QO({variant:e}),t),...n}));Ix.displayName=cx.displayName;const YO=b.forwardRef(({className:t,...e},n)=>O.jsx(hx,{ref:n,className:Bo("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));YO.displayName=hx.displayName;const Sx=b.forwardRef(({className:t,...e},n)=>O.jsx(fx,{ref:n,className:Bo("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:O.jsx(mO,{className:"h-4 w-4"})}));Sx.displayName=fx.displayName;const Ax=b.forwardRef(({className:t,...e},n)=>O.jsx(ux,{ref:n,className:Bo("text-sm font-semibold",t),...e}));Ax.displayName=ux.displayName;const xx=b.forwardRef(({className:t,...e},n)=>O.jsx(dx,{ref:n,className:Bo("text-sm opacity-90",t),...e}));xx.displayName=dx.displayName;function JO(){const{toasts:t}=l2();return O.jsxs(GO,{children:[t.map(function({id:e,title:n,description:r,action:i,...s}){return O.jsxs(Ix,{...s,children:[O.jsxs("div",{className:"grid gap-1",children:[n&&O.jsx(Ax,{children:n}),r&&O.jsx(xx,{children:r})]}),i,O.jsx(Sx,{})]},e)}),O.jsx(Tx,{})]})}var VE=["light","dark"],XO="(prefers-color-scheme: dark)",ZO=b.createContext(void 0),eV={setTheme:t=>{},themes:[]},tV=()=>{var t;return(t=b.useContext(ZO))!=null?t:eV};b.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:i,defaultTheme:s,value:o,attrs:a,nonce:l})=>{let u=s==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(E=>`'${E}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=i?VE.includes(s)&&s?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${s}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",p=(E,v=!1,S=!0)=>{let _=o?o[E]:E,y=v?E+"|| ''":`'${_}'`,I="";return i&&S&&!v&&VE.includes(E)&&(I+=`d.style.colorScheme = '${E}';`),n==="class"?v||_?I+=`c.add(${y})`:I+="null":_&&(I+=`d[s](n,${y})`),I},m=t?`!function(){${d}${p(t)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${u})){var t='${XO}',m=window.matchMedia(t);if(m.media!==t||m.matches){${p("dark")}}else{${p("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${p(o?"x[e]":"e",!0)}}${u?"":"else{"+p(s,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${p(o?"x[e]":"e",!0)}}else{${p(s,!1,!1)};}${h}}catch(t){}}();`;return b.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:m}})});var nV=t=>{switch(t){case"success":return sV;case"info":return aV;case"warning":return oV;case"error":return lV;default:return null}},rV=Array(12).fill(0),iV=({visible:t,className:e})=>z.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},z.createElement("div",{className:"sonner-spinner"},rV.map((n,r)=>z.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),sV=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),oV=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),aV=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),lV=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),cV=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},z.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),z.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),uV=()=>{let[t,e]=z.useState(document.hidden);return z.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},sy=1,dV=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;let{message:r,...i}=e,s=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:sy++,o=this.toasts.find(l=>l.id===s),a=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),o?this.toasts=this.toasts.map(l=>l.id===s?(this.publish({...l,...e,id:s,title:r}),{...l,...e,id:s,dismissible:a,title:r}):l):this.addToast({title:r,...i,dismissible:a,id:s}),s},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),this.subscribers.forEach(n=>n({id:e,dismiss:!0})),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));let i=e instanceof Promise?e:e(),s=r!==void 0,o,a=i.then(async u=>{if(o=["resolve",u],z.isValidElement(u))s=!1,this.create({id:r,type:"default",message:u});else if(fV(u)&&!u.ok){s=!1;let d=typeof n.error=="function"?await n.error(`HTTP error! status: ${u.status}`):n.error,h=typeof n.description=="function"?await n.description(`HTTP error! status: ${u.status}`):n.description;this.create({id:r,type:"error",message:d,description:h})}else if(n.success!==void 0){s=!1;let d=typeof n.success=="function"?await n.success(u):n.success,h=typeof n.description=="function"?await n.description(u):n.description;this.create({id:r,type:"success",message:d,description:h})}}).catch(async u=>{if(o=["reject",u],n.error!==void 0){s=!1;let d=typeof n.error=="function"?await n.error(u):n.error,h=typeof n.description=="function"?await n.description(u):n.description;this.create({id:r,type:"error",message:d,description:h})}}).finally(()=>{var u;s&&(this.dismiss(r),r=void 0),(u=n.finally)==null||u.call(n)}),l=()=>new Promise((u,d)=>a.then(()=>o[0]==="reject"?d(o[1]):u(o[1])).catch(d));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,n)=>{let r=(n==null?void 0:n.id)||sy++;return this.create({jsx:e(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},an=new dV,hV=(t,e)=>{let n=(e==null?void 0:e.id)||sy++;return an.addToast({title:t,...e,id:n}),n},fV=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",pV=hV,mV=()=>an.toasts,gV=()=>an.getActiveToasts(),Ud=Object.assign(pV,{success:an.success,info:an.info,warning:an.warning,error:an.error,custom:an.custom,message:an.message,promise:an.promise,dismiss:an.dismiss,loading:an.loading},{getHistory:mV,getToasts:gV});function yV(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}yV(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function jd(t){return t.label!==void 0}var vV=3,_V="32px",wV="16px",ME=4e3,EV=356,TV=14,IV=20,SV=200;function Gn(...t){return t.filter(Boolean).join(" ")}function AV(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var xV=t=>{var e,n,r,i,s,o,a,l,u,d,h;let{invert:p,toast:m,unstyled:E,interacting:v,setHeights:S,visibleToasts:_,heights:y,index:I,toasts:D,expanded:N,removeToast:V,defaultRichColors:T,closeButton:w,style:x,cancelButtonStyle:P,actionButtonStyle:C,className:k="",descriptionClassName:R="",duration:W,position:X,gap:Z,loadingIcon:ie,expandByDefault:B,classNames:U,icons:H,closeButtonAriaLabel:ae="Close toast",pauseWhenPageIsHidden:J}=t,[se,ce]=z.useState(null),[Pe,je]=z.useState(null),[me,nt]=z.useState(!1),[vn,Vn]=z.useState(!1),[_n,pr]=z.useState(!1),[Mn,Ei]=z.useState(!1),[js,Bs]=z.useState(!1),[Vl,$s]=z.useState(0),[Br,zo]=z.useState(0),Ti=z.useRef(m.duration||W||ME),nd=z.useRef(null),Wn=z.useRef(null),Ml=I===0,rd=I+1<=_,Ce=m.type,rt=m.dismissible!==!1,qo=m.className||"",id=m.descriptionClassName||"",zs=z.useMemo(()=>y.findIndex(de=>de.toastId===m.id)||0,[y,m.id]),Kp=z.useMemo(()=>{var de;return(de=m.closeButton)!=null?de:w},[m.closeButton,w]),Ii=z.useMemo(()=>m.duration||W||ME,[m.duration,W]),Wo=z.useRef(0),$r=z.useRef(0),Ho=z.useRef(0),Si=z.useRef(null),[Gp,Ll]=X.split("-"),Fl=z.useMemo(()=>y.reduce((de,Ee,Ve)=>Ve>=zs?de:de+Ee.height,0),[y,zs]),Ul=uV(),qs=m.invert||p,Ws=Ce==="loading";$r.current=z.useMemo(()=>zs*Z+Fl,[zs,Fl]),z.useEffect(()=>{Ti.current=Ii},[Ii]),z.useEffect(()=>{nt(!0)},[]),z.useEffect(()=>{let de=Wn.current;if(de){let Ee=de.getBoundingClientRect().height;return zo(Ee),S(Ve=>[{toastId:m.id,height:Ee,position:m.position},...Ve]),()=>S(Ve=>Ve.filter(bt=>bt.toastId!==m.id))}},[S,m.id]),z.useLayoutEffect(()=>{if(!me)return;let de=Wn.current,Ee=de.style.height;de.style.height="auto";let Ve=de.getBoundingClientRect().height;de.style.height=Ee,zo(Ve),S(bt=>bt.find(sn=>sn.toastId===m.id)?bt.map(sn=>sn.toastId===m.id?{...sn,height:Ve}:sn):[{toastId:m.id,height:Ve,position:m.position},...bt])},[me,m.title,m.description,S,m.id]);let Ln=z.useCallback(()=>{Vn(!0),$s($r.current),S(de=>de.filter(Ee=>Ee.toastId!==m.id)),setTimeout(()=>{V(m)},SV)},[m,V,S,$r]);z.useEffect(()=>{if(m.promise&&Ce==="loading"||m.duration===1/0||m.type==="loading")return;let de;return N||v||J&&Ul?(()=>{if(Ho.current<Wo.current){let Ee=new Date().getTime()-Wo.current;Ti.current=Ti.current-Ee}Ho.current=new Date().getTime()})():Ti.current!==1/0&&(Wo.current=new Date().getTime(),de=setTimeout(()=>{var Ee;(Ee=m.onAutoClose)==null||Ee.call(m,m),Ln()},Ti.current)),()=>clearTimeout(de)},[N,v,m,Ce,J,Ul,Ln]),z.useEffect(()=>{m.delete&&Ln()},[Ln,m.delete]);function zr(){var de,Ee,Ve;return H!=null&&H.loading?z.createElement("div",{className:Gn(U==null?void 0:U.loader,(de=m==null?void 0:m.classNames)==null?void 0:de.loader,"sonner-loader"),"data-visible":Ce==="loading"},H.loading):ie?z.createElement("div",{className:Gn(U==null?void 0:U.loader,(Ee=m==null?void 0:m.classNames)==null?void 0:Ee.loader,"sonner-loader"),"data-visible":Ce==="loading"},ie):z.createElement(iV,{className:Gn(U==null?void 0:U.loader,(Ve=m==null?void 0:m.classNames)==null?void 0:Ve.loader),visible:Ce==="loading"})}return z.createElement("li",{tabIndex:0,ref:Wn,className:Gn(k,qo,U==null?void 0:U.toast,(e=m==null?void 0:m.classNames)==null?void 0:e.toast,U==null?void 0:U.default,U==null?void 0:U[Ce],(n=m==null?void 0:m.classNames)==null?void 0:n[Ce]),"data-sonner-toast":"","data-rich-colors":(r=m.richColors)!=null?r:T,"data-styled":!(m.jsx||m.unstyled||E),"data-mounted":me,"data-promise":!!m.promise,"data-swiped":js,"data-removed":vn,"data-visible":rd,"data-y-position":Gp,"data-x-position":Ll,"data-index":I,"data-front":Ml,"data-swiping":_n,"data-dismissible":rt,"data-type":Ce,"data-invert":qs,"data-swipe-out":Mn,"data-swipe-direction":Pe,"data-expanded":!!(N||B&&me),style:{"--index":I,"--toasts-before":I,"--z-index":D.length-I,"--offset":`${vn?Vl:$r.current}px`,"--initial-height":B?"auto":`${Br}px`,...x,...m.style},onDragEnd:()=>{pr(!1),ce(null),Si.current=null},onPointerDown:de=>{Ws||!rt||(nd.current=new Date,$s($r.current),de.target.setPointerCapture(de.pointerId),de.target.tagName!=="BUTTON"&&(pr(!0),Si.current={x:de.clientX,y:de.clientY}))},onPointerUp:()=>{var de,Ee,Ve,bt;if(Mn||!rt)return;Si.current=null;let sn=Number(((de=Wn.current)==null?void 0:de.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),He=Number(((Ee=Wn.current)==null?void 0:Ee.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),mr=new Date().getTime()-((Ve=nd.current)==null?void 0:Ve.getTime()),Rt=se==="x"?sn:He,on=Math.abs(Rt)/mr;if(Math.abs(Rt)>=IV||on>.11){$s($r.current),(bt=m.onDismiss)==null||bt.call(m,m),je(se==="x"?sn>0?"right":"left":He>0?"down":"up"),Ln(),Ei(!0),Bs(!1);return}pr(!1),ce(null)},onPointerMove:de=>{var Ee,Ve,bt,sn;if(!Si.current||!rt||((Ee=window.getSelection())==null?void 0:Ee.toString().length)>0)return;let He=de.clientY-Si.current.y,mr=de.clientX-Si.current.x,Rt=(Ve=t.swipeDirections)!=null?Ve:AV(X);!se&&(Math.abs(mr)>1||Math.abs(He)>1)&&ce(Math.abs(mr)>Math.abs(He)?"x":"y");let on={x:0,y:0};se==="y"?(Rt.includes("top")||Rt.includes("bottom"))&&(Rt.includes("top")&&He<0||Rt.includes("bottom")&&He>0)&&(on.y=He):se==="x"&&(Rt.includes("left")||Rt.includes("right"))&&(Rt.includes("left")&&mr<0||Rt.includes("right")&&mr>0)&&(on.x=mr),(Math.abs(on.x)>0||Math.abs(on.y)>0)&&Bs(!0),(bt=Wn.current)==null||bt.style.setProperty("--swipe-amount-x",`${on.x}px`),(sn=Wn.current)==null||sn.style.setProperty("--swipe-amount-y",`${on.y}px`)}},Kp&&!m.jsx?z.createElement("button",{"aria-label":ae,"data-disabled":Ws,"data-close-button":!0,onClick:Ws||!rt?()=>{}:()=>{var de;Ln(),(de=m.onDismiss)==null||de.call(m,m)},className:Gn(U==null?void 0:U.closeButton,(i=m==null?void 0:m.classNames)==null?void 0:i.closeButton)},(s=H==null?void 0:H.close)!=null?s:cV):null,m.jsx||b.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:z.createElement(z.Fragment,null,Ce||m.icon||m.promise?z.createElement("div",{"data-icon":"",className:Gn(U==null?void 0:U.icon,(o=m==null?void 0:m.classNames)==null?void 0:o.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||zr():null,m.type!=="loading"?m.icon||(H==null?void 0:H[Ce])||nV(Ce):null):null,z.createElement("div",{"data-content":"",className:Gn(U==null?void 0:U.content,(a=m==null?void 0:m.classNames)==null?void 0:a.content)},z.createElement("div",{"data-title":"",className:Gn(U==null?void 0:U.title,(l=m==null?void 0:m.classNames)==null?void 0:l.title)},typeof m.title=="function"?m.title():m.title),m.description?z.createElement("div",{"data-description":"",className:Gn(R,id,U==null?void 0:U.description,(u=m==null?void 0:m.classNames)==null?void 0:u.description)},typeof m.description=="function"?m.description():m.description):null),b.isValidElement(m.cancel)?m.cancel:m.cancel&&jd(m.cancel)?z.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||P,onClick:de=>{var Ee,Ve;jd(m.cancel)&&rt&&((Ve=(Ee=m.cancel).onClick)==null||Ve.call(Ee,de),Ln())},className:Gn(U==null?void 0:U.cancelButton,(d=m==null?void 0:m.classNames)==null?void 0:d.cancelButton)},m.cancel.label):null,b.isValidElement(m.action)?m.action:m.action&&jd(m.action)?z.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||C,onClick:de=>{var Ee,Ve;jd(m.action)&&((Ve=(Ee=m.action).onClick)==null||Ve.call(Ee,de),!de.defaultPrevented&&Ln())},className:Gn(U==null?void 0:U.actionButton,(h=m==null?void 0:m.classNames)==null?void 0:h.actionButton)},m.action.label):null))};function LE(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function PV(t,e){let n={};return[t,e].forEach((r,i)=>{let s=i===1,o=s?"--mobile-offset":"--offset",a=s?wV:_V;function l(u){["top","right","bottom","left"].forEach(d=>{n[`${o}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?n[`${o}-${u}`]=a:n[`${o}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):l(a)}),n}var bV=b.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:i=["altKey","KeyT"],expand:s,closeButton:o,className:a,offset:l,mobileOffset:u,theme:d="light",richColors:h,duration:p,style:m,visibleToasts:E=vV,toastOptions:v,dir:S=LE(),gap:_=TV,loadingIcon:y,icons:I,containerAriaLabel:D="Notifications",pauseWhenPageIsHidden:N}=t,[V,T]=z.useState([]),w=z.useMemo(()=>Array.from(new Set([r].concat(V.filter(J=>J.position).map(J=>J.position)))),[V,r]),[x,P]=z.useState([]),[C,k]=z.useState(!1),[R,W]=z.useState(!1),[X,Z]=z.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),ie=z.useRef(null),B=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),U=z.useRef(null),H=z.useRef(!1),ae=z.useCallback(J=>{T(se=>{var ce;return(ce=se.find(Pe=>Pe.id===J.id))!=null&&ce.delete||an.dismiss(J.id),se.filter(({id:Pe})=>Pe!==J.id)})},[]);return z.useEffect(()=>an.subscribe(J=>{if(J.dismiss){T(se=>se.map(ce=>ce.id===J.id?{...ce,delete:!0}:ce));return}setTimeout(()=>{jA.flushSync(()=>{T(se=>{let ce=se.findIndex(Pe=>Pe.id===J.id);return ce!==-1?[...se.slice(0,ce),{...se[ce],...J},...se.slice(ce+1)]:[J,...se]})})})}),[]),z.useEffect(()=>{if(d!=="system"){Z(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Z("dark"):Z("light")),typeof window>"u")return;let J=window.matchMedia("(prefers-color-scheme: dark)");try{J.addEventListener("change",({matches:se})=>{Z(se?"dark":"light")})}catch{J.addListener(({matches:ce})=>{try{Z(ce?"dark":"light")}catch(Pe){console.error(Pe)}})}},[d]),z.useEffect(()=>{V.length<=1&&k(!1)},[V]),z.useEffect(()=>{let J=se=>{var ce,Pe;i.every(je=>se[je]||se.code===je)&&(k(!0),(ce=ie.current)==null||ce.focus()),se.code==="Escape"&&(document.activeElement===ie.current||(Pe=ie.current)!=null&&Pe.contains(document.activeElement))&&k(!1)};return document.addEventListener("keydown",J),()=>document.removeEventListener("keydown",J)},[i]),z.useEffect(()=>{if(ie.current)return()=>{U.current&&(U.current.focus({preventScroll:!0}),U.current=null,H.current=!1)}},[ie.current]),z.createElement("section",{ref:e,"aria-label":`${D} ${B}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},w.map((J,se)=>{var ce;let[Pe,je]=J.split("-");return V.length?z.createElement("ol",{key:J,dir:S==="auto"?LE():S,tabIndex:-1,ref:ie,className:a,"data-sonner-toaster":!0,"data-theme":X,"data-y-position":Pe,"data-lifted":C&&V.length>1&&!s,"data-x-position":je,style:{"--front-toast-height":`${((ce=x[0])==null?void 0:ce.height)||0}px`,"--width":`${EV}px`,"--gap":`${_}px`,...m,...PV(l,u)},onBlur:me=>{H.current&&!me.currentTarget.contains(me.relatedTarget)&&(H.current=!1,U.current&&(U.current.focus({preventScroll:!0}),U.current=null))},onFocus:me=>{me.target instanceof HTMLElement&&me.target.dataset.dismissible==="false"||H.current||(H.current=!0,U.current=me.relatedTarget)},onMouseEnter:()=>k(!0),onMouseMove:()=>k(!0),onMouseLeave:()=>{R||k(!1)},onDragEnd:()=>k(!1),onPointerDown:me=>{me.target instanceof HTMLElement&&me.target.dataset.dismissible==="false"||W(!0)},onPointerUp:()=>W(!1)},V.filter(me=>!me.position&&se===0||me.position===J).map((me,nt)=>{var vn,Vn;return z.createElement(xV,{key:me.id,icons:I,index:nt,toast:me,defaultRichColors:h,duration:(vn=v==null?void 0:v.duration)!=null?vn:p,className:v==null?void 0:v.className,descriptionClassName:v==null?void 0:v.descriptionClassName,invert:n,visibleToasts:E,closeButton:(Vn=v==null?void 0:v.closeButton)!=null?Vn:o,interacting:R,position:J,style:v==null?void 0:v.style,unstyled:v==null?void 0:v.unstyled,classNames:v==null?void 0:v.classNames,cancelButtonStyle:v==null?void 0:v.cancelButtonStyle,actionButtonStyle:v==null?void 0:v.actionButtonStyle,removeToast:ae,toasts:V.filter(_n=>_n.position==me.position),heights:x.filter(_n=>_n.position==me.position),setHeights:P,expandByDefault:s,gap:_,loadingIcon:y,expanded:C,pauseWhenPageIsHidden:N,swipeDirections:t.swipeDirections})})):null}))});const RV=({...t})=>{const{theme:e="system"}=tV();return O.jsx(bV,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})},CV=["top","right","bottom","left"],vs=Math.min,In=Math.max,Zh=Math.round,Bd=Math.floor,Cr=t=>({x:t,y:t}),kV={left:"right",right:"left",bottom:"top",top:"bottom"},DV={start:"end",end:"start"};function oy(t,e,n){return In(t,vs(e,n))}function ui(t,e){return typeof t=="function"?t(e):t}function di(t){return t.split("-")[0]}function Tl(t){return t.split("-")[1]}function e_(t){return t==="x"?"y":"x"}function t_(t){return t==="y"?"height":"width"}const NV=new Set(["top","bottom"]);function Ar(t){return NV.has(di(t))?"y":"x"}function n_(t){return e_(Ar(t))}function OV(t,e,n){n===void 0&&(n=!1);const r=Tl(t),i=n_(t),s=t_(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=ef(o)),[o,ef(o)]}function VV(t){const e=ef(t);return[ay(t),e,ay(e)]}function ay(t){return t.replace(/start|end/g,e=>DV[e])}const FE=["left","right"],UE=["right","left"],MV=["top","bottom"],LV=["bottom","top"];function FV(t,e,n){switch(t){case"top":case"bottom":return n?e?UE:FE:e?FE:UE;case"left":case"right":return e?MV:LV;default:return[]}}function UV(t,e,n,r){const i=Tl(t);let s=FV(di(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(ay)))),s}function ef(t){return t.replace(/left|right|bottom|top/g,e=>kV[e])}function jV(t){return{top:0,right:0,bottom:0,left:0,...t}}function Px(t){return typeof t!="number"?jV(t):{top:t,right:t,bottom:t,left:t}}function tf(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function jE(t,e,n){let{reference:r,floating:i}=t;const s=Ar(e),o=n_(e),a=t_(o),l=di(e),u=s==="y",d=r.x+r.width/2-i.width/2,h=r.y+r.height/2-i.height/2,p=r[a]/2-i[a]/2;let m;switch(l){case"top":m={x:d,y:r.y-i.height};break;case"bottom":m={x:d,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:h};break;case"left":m={x:r.x-i.width,y:h};break;default:m={x:r.x,y:r.y}}switch(Tl(e)){case"start":m[o]-=p*(n&&u?-1:1);break;case"end":m[o]+=p*(n&&u?-1:1);break}return m}const BV=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:d,y:h}=jE(u,r,l),p=r,m={},E=0;for(let v=0;v<a.length;v++){const{name:S,fn:_}=a[v],{x:y,y:I,data:D,reset:N}=await _({x:d,y:h,initialPlacement:r,placement:p,strategy:i,middlewareData:m,rects:u,platform:o,elements:{reference:t,floating:e}});d=y??d,h=I??h,m={...m,[S]:{...m[S],...D}},N&&E<=50&&(E++,typeof N=="object"&&(N.placement&&(p=N.placement),N.rects&&(u=N.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):N.rects),{x:d,y:h}=jE(u,p,l)),v=-1)}return{x:d,y:h,placement:p,strategy:i,middlewareData:m}};async function su(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:p=!1,padding:m=0}=ui(e,t),E=Px(m),S=a[p?h==="floating"?"reference":"floating":h],_=tf(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(S)))==null||n?S:S.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:u,rootBoundary:d,strategy:l})),y=h==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,I=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),D=await(s.isElement==null?void 0:s.isElement(I))?await(s.getScale==null?void 0:s.getScale(I))||{x:1,y:1}:{x:1,y:1},N=tf(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:y,offsetParent:I,strategy:l}):y);return{top:(_.top-N.top+E.top)/D.y,bottom:(N.bottom-_.bottom+E.bottom)/D.y,left:(_.left-N.left+E.left)/D.x,right:(N.right-_.right+E.right)/D.x}}const $V=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:u,padding:d=0}=ui(t,e)||{};if(u==null)return{};const h=Px(d),p={x:n,y:r},m=n_(i),E=t_(m),v=await o.getDimensions(u),S=m==="y",_=S?"top":"left",y=S?"bottom":"right",I=S?"clientHeight":"clientWidth",D=s.reference[E]+s.reference[m]-p[m]-s.floating[E],N=p[m]-s.reference[m],V=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let T=V?V[I]:0;(!T||!await(o.isElement==null?void 0:o.isElement(V)))&&(T=a.floating[I]||s.floating[E]);const w=D/2-N/2,x=T/2-v[E]/2-1,P=vs(h[_],x),C=vs(h[y],x),k=P,R=T-v[E]-C,W=T/2-v[E]/2+w,X=oy(k,W,R),Z=!l.arrow&&Tl(i)!=null&&W!==X&&s.reference[E]/2-(W<k?P:C)-v[E]/2<0,ie=Z?W<k?W-k:W-R:0;return{[m]:p[m]+ie,data:{[m]:X,centerOffset:W-X-ie,...Z&&{alignmentOffset:ie}},reset:Z}}}),zV=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:u}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:E="none",flipAlignment:v=!0,...S}=ui(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const _=di(i),y=Ar(a),I=di(a)===a,D=await(l.isRTL==null?void 0:l.isRTL(u.floating)),N=p||(I||!v?[ef(a)]:VV(a)),V=E!=="none";!p&&V&&N.push(...UV(a,v,E,D));const T=[a,...N],w=await su(e,S),x=[];let P=((r=s.flip)==null?void 0:r.overflows)||[];if(d&&x.push(w[_]),h){const W=OV(i,o,D);x.push(w[W[0]],w[W[1]])}if(P=[...P,{placement:i,overflows:x}],!x.every(W=>W<=0)){var C,k;const W=(((C=s.flip)==null?void 0:C.index)||0)+1,X=T[W];if(X&&(!(h==="alignment"?y!==Ar(X):!1)||P.every(B=>B.overflows[0]>0&&Ar(B.placement)===y)))return{data:{index:W,overflows:P},reset:{placement:X}};let Z=(k=P.filter(ie=>ie.overflows[0]<=0).sort((ie,B)=>ie.overflows[1]-B.overflows[1])[0])==null?void 0:k.placement;if(!Z)switch(m){case"bestFit":{var R;const ie=(R=P.filter(B=>{if(V){const U=Ar(B.placement);return U===y||U==="y"}return!0}).map(B=>[B.placement,B.overflows.filter(U=>U>0).reduce((U,H)=>U+H,0)]).sort((B,U)=>B[1]-U[1])[0])==null?void 0:R[0];ie&&(Z=ie);break}case"initialPlacement":Z=a;break}if(i!==Z)return{reset:{placement:Z}}}return{}}}};function BE(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function $E(t){return CV.some(e=>t[e]>=0)}const qV=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=ui(t,e);switch(r){case"referenceHidden":{const s=await su(e,{...i,elementContext:"reference"}),o=BE(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:$E(o)}}}case"escaped":{const s=await su(e,{...i,altBoundary:!0}),o=BE(s,n.floating);return{data:{escapedOffsets:o,escaped:$E(o)}}}default:return{}}}}},bx=new Set(["left","top"]);async function WV(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=di(n),a=Tl(n),l=Ar(n)==="y",u=bx.has(o)?-1:1,d=s&&l?-1:1,h=ui(e,t);let{mainAxis:p,crossAxis:m,alignmentAxis:E}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof E=="number"&&(m=a==="end"?E*-1:E),l?{x:m*d,y:p*u}:{x:p*u,y:m*d}}const HV=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await WV(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},KV=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:S=>{let{x:_,y}=S;return{x:_,y}}},...l}=ui(t,e),u={x:n,y:r},d=await su(e,l),h=Ar(di(i)),p=e_(h);let m=u[p],E=u[h];if(s){const S=p==="y"?"top":"left",_=p==="y"?"bottom":"right",y=m+d[S],I=m-d[_];m=oy(y,m,I)}if(o){const S=h==="y"?"top":"left",_=h==="y"?"bottom":"right",y=E+d[S],I=E-d[_];E=oy(y,E,I)}const v=a.fn({...e,[p]:m,[h]:E});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[p]:s,[h]:o}}}}}},GV=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:u=!0}=ui(t,e),d={x:n,y:r},h=Ar(i),p=e_(h);let m=d[p],E=d[h];const v=ui(a,e),S=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(l){const I=p==="y"?"height":"width",D=s.reference[p]-s.floating[I]+S.mainAxis,N=s.reference[p]+s.reference[I]-S.mainAxis;m<D?m=D:m>N&&(m=N)}if(u){var _,y;const I=p==="y"?"width":"height",D=bx.has(di(i)),N=s.reference[h]-s.floating[I]+(D&&((_=o.offset)==null?void 0:_[h])||0)+(D?0:S.crossAxis),V=s.reference[h]+s.reference[I]+(D?0:((y=o.offset)==null?void 0:y[h])||0)-(D?S.crossAxis:0);E<N?E=N:E>V&&(E=V)}return{[p]:m,[h]:E}}}},QV=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...u}=ui(t,e),d=await su(e,u),h=di(i),p=Tl(i),m=Ar(i)==="y",{width:E,height:v}=s.floating;let S,_;h==="top"||h==="bottom"?(S=h,_=p===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(_=h,S=p==="end"?"top":"bottom");const y=v-d.top-d.bottom,I=E-d.left-d.right,D=vs(v-d[S],y),N=vs(E-d[_],I),V=!e.middlewareData.shift;let T=D,w=N;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(w=I),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(T=y),V&&!p){const P=In(d.left,0),C=In(d.right,0),k=In(d.top,0),R=In(d.bottom,0);m?w=E-2*(P!==0||C!==0?P+C:In(d.left,d.right)):T=v-2*(k!==0||R!==0?k+R:In(d.top,d.bottom))}await l({...e,availableWidth:w,availableHeight:T});const x=await o.getDimensions(a.floating);return E!==x.width||v!==x.height?{reset:{rects:!0}}:{}}}};function ip(){return typeof window<"u"}function Il(t){return Rx(t)?(t.nodeName||"").toLowerCase():"#document"}function Rn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Lr(t){var e;return(e=(Rx(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Rx(t){return ip()?t instanceof Node||t instanceof Rn(t).Node:!1}function dr(t){return ip()?t instanceof Element||t instanceof Rn(t).Element:!1}function Vr(t){return ip()?t instanceof HTMLElement||t instanceof Rn(t).HTMLElement:!1}function zE(t){return!ip()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Rn(t).ShadowRoot}const YV=new Set(["inline","contents"]);function Vu(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=hr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!YV.has(i)}const JV=new Set(["table","td","th"]);function XV(t){return JV.has(Il(t))}const ZV=[":popover-open",":modal"];function sp(t){return ZV.some(e=>{try{return t.matches(e)}catch{return!1}})}const eM=["transform","translate","scale","rotate","perspective"],tM=["transform","translate","scale","rotate","perspective","filter"],nM=["paint","layout","strict","content"];function r_(t){const e=i_(),n=dr(t)?hr(t):t;return eM.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||tM.some(r=>(n.willChange||"").includes(r))||nM.some(r=>(n.contain||"").includes(r))}function rM(t){let e=_s(t);for(;Vr(e)&&!Qa(e);){if(r_(e))return e;if(sp(e))return null;e=_s(e)}return null}function i_(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const iM=new Set(["html","body","#document"]);function Qa(t){return iM.has(Il(t))}function hr(t){return Rn(t).getComputedStyle(t)}function op(t){return dr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function _s(t){if(Il(t)==="html")return t;const e=t.assignedSlot||t.parentNode||zE(t)&&t.host||Lr(t);return zE(e)?e.host:e}function Cx(t){const e=_s(t);return Qa(e)?t.ownerDocument?t.ownerDocument.body:t.body:Vr(e)&&Vu(e)?e:Cx(e)}function ou(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=Cx(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=Rn(i);if(s){const a=ly(o);return e.concat(o,o.visualViewport||[],Vu(i)?i:[],a&&n?ou(a):[])}return e.concat(i,ou(i,[],n))}function ly(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function kx(t){const e=hr(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Vr(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=Zh(n)!==s||Zh(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function s_(t){return dr(t)?t:t.contextElement}function Ra(t){const e=s_(t);if(!Vr(e))return Cr(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=kx(e);let o=(s?Zh(n.width):n.width)/r,a=(s?Zh(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const sM=Cr(0);function Dx(t){const e=Rn(t);return!i_()||!e.visualViewport?sM:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function oM(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Rn(t)?!1:e}function bo(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=s_(t);let o=Cr(1);e&&(r?dr(r)&&(o=Ra(r)):o=Ra(t));const a=oM(s,n,r)?Dx(s):Cr(0);let l=(i.left+a.x)/o.x,u=(i.top+a.y)/o.y,d=i.width/o.x,h=i.height/o.y;if(s){const p=Rn(s),m=r&&dr(r)?Rn(r):r;let E=p,v=ly(E);for(;v&&r&&m!==E;){const S=Ra(v),_=v.getBoundingClientRect(),y=hr(v),I=_.left+(v.clientLeft+parseFloat(y.paddingLeft))*S.x,D=_.top+(v.clientTop+parseFloat(y.paddingTop))*S.y;l*=S.x,u*=S.y,d*=S.x,h*=S.y,l+=I,u+=D,E=Rn(v),v=ly(E)}}return tf({width:d,height:h,x:l,y:u})}function o_(t,e){const n=op(t).scrollLeft;return e?e.left+n:bo(Lr(t)).left+n}function Nx(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-(n?0:o_(t,r)),s=r.top+e.scrollTop;return{x:i,y:s}}function aM(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=Lr(r),a=e?sp(e.floating):!1;if(r===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},u=Cr(1);const d=Cr(0),h=Vr(r);if((h||!h&&!s)&&((Il(r)!=="body"||Vu(o))&&(l=op(r)),Vr(r))){const m=bo(r);u=Ra(r),d.x=m.x+r.clientLeft,d.y=m.y+r.clientTop}const p=o&&!h&&!s?Nx(o,l,!0):Cr(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+d.x+p.x,y:n.y*u.y-l.scrollTop*u.y+d.y+p.y}}function lM(t){return Array.from(t.getClientRects())}function cM(t){const e=Lr(t),n=op(t),r=t.ownerDocument.body,i=In(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=In(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+o_(t);const a=-n.scrollTop;return hr(r).direction==="rtl"&&(o+=In(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function uM(t,e){const n=Rn(t),r=Lr(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const u=i_();(!u||u&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}const dM=new Set(["absolute","fixed"]);function hM(t,e){const n=bo(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=Vr(t)?Ra(t):Cr(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=i*s.x,u=r*s.y;return{width:o,height:a,x:l,y:u}}function qE(t,e,n){let r;if(e==="viewport")r=uM(t,n);else if(e==="document")r=cM(Lr(t));else if(dr(e))r=hM(e,n);else{const i=Dx(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return tf(r)}function Ox(t,e){const n=_s(t);return n===e||!dr(n)||Qa(n)?!1:hr(n).position==="fixed"||Ox(n,e)}function fM(t,e){const n=e.get(t);if(n)return n;let r=ou(t,[],!1).filter(a=>dr(a)&&Il(a)!=="body"),i=null;const s=hr(t).position==="fixed";let o=s?_s(t):t;for(;dr(o)&&!Qa(o);){const a=hr(o),l=r_(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&dM.has(i.position)||Vu(o)&&!l&&Ox(t,o))?r=r.filter(d=>d!==o):i=a,o=_s(o)}return e.set(t,r),r}function pM(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?sp(e)?[]:fM(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((u,d)=>{const h=qE(e,d,i);return u.top=In(h.top,u.top),u.right=vs(h.right,u.right),u.bottom=vs(h.bottom,u.bottom),u.left=In(h.left,u.left),u},qE(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function mM(t){const{width:e,height:n}=kx(t);return{width:e,height:n}}function gM(t,e,n){const r=Vr(e),i=Lr(e),s=n==="fixed",o=bo(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=Cr(0);function u(){l.x=o_(i)}if(r||!r&&!s)if((Il(e)!=="body"||Vu(i))&&(a=op(e)),r){const m=bo(e,!0,s,e);l.x=m.x+e.clientLeft,l.y=m.y+e.clientTop}else i&&u();s&&!r&&i&&u();const d=i&&!r&&!s?Nx(i,a):Cr(0),h=o.left+a.scrollLeft-l.x-d.x,p=o.top+a.scrollTop-l.y-d.y;return{x:h,y:p,width:o.width,height:o.height}}function Um(t){return hr(t).position==="static"}function WE(t,e){if(!Vr(t)||hr(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Lr(t)===n&&(n=n.ownerDocument.body),n}function Vx(t,e){const n=Rn(t);if(sp(t))return n;if(!Vr(t)){let i=_s(t);for(;i&&!Qa(i);){if(dr(i)&&!Um(i))return i;i=_s(i)}return n}let r=WE(t,e);for(;r&&XV(r)&&Um(r);)r=WE(r,e);return r&&Qa(r)&&Um(r)&&!r_(r)?n:r||rM(t)||n}const yM=async function(t){const e=this.getOffsetParent||Vx,n=this.getDimensions,r=await n(t.floating);return{reference:gM(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function vM(t){return hr(t).direction==="rtl"}const _M={convertOffsetParentRelativeRectToViewportRelativeRect:aM,getDocumentElement:Lr,getClippingRect:pM,getOffsetParent:Vx,getElementRects:yM,getClientRects:lM,getDimensions:mM,getScale:Ra,isElement:dr,isRTL:vM};function Mx(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function wM(t,e){let n=null,r;const i=Lr(t);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const u=t.getBoundingClientRect(),{left:d,top:h,width:p,height:m}=u;if(a||e(),!p||!m)return;const E=Bd(h),v=Bd(i.clientWidth-(d+p)),S=Bd(i.clientHeight-(h+m)),_=Bd(d),I={rootMargin:-E+"px "+-v+"px "+-S+"px "+-_+"px",threshold:In(0,vs(1,l))||1};let D=!0;function N(V){const T=V[0].intersectionRatio;if(T!==l){if(!D)return o();T?o(!1,T):r=setTimeout(()=>{o(!1,1e-7)},1e3)}T===1&&!Mx(u,t.getBoundingClientRect())&&o(),D=!1}try{n=new IntersectionObserver(N,{...I,root:i.ownerDocument})}catch{n=new IntersectionObserver(N,I)}n.observe(t)}return o(!0),s}function EM(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=s_(t),d=i||s?[...u?ou(u):[],...ou(e)]:[];d.forEach(_=>{i&&_.addEventListener("scroll",n,{passive:!0}),s&&_.addEventListener("resize",n)});const h=u&&a?wM(u,n):null;let p=-1,m=null;o&&(m=new ResizeObserver(_=>{let[y]=_;y&&y.target===u&&m&&(m.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var I;(I=m)==null||I.observe(e)})),n()}),u&&!l&&m.observe(u),m.observe(e));let E,v=l?bo(t):null;l&&S();function S(){const _=bo(t);v&&!Mx(v,_)&&n(),v=_,E=requestAnimationFrame(S)}return n(),()=>{var _;d.forEach(y=>{i&&y.removeEventListener("scroll",n),s&&y.removeEventListener("resize",n)}),h==null||h(),(_=m)==null||_.disconnect(),m=null,l&&cancelAnimationFrame(E)}}const TM=HV,IM=KV,SM=zV,AM=QV,xM=qV,HE=$V,PM=GV,bM=(t,e,n)=>{const r=new Map,i={platform:_M,...n},s={...i.platform,_c:r};return BV(t,e,{...i,platform:s})};var RM=typeof document<"u",CM=function(){},dh=RM?b.useLayoutEffect:CM;function nf(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!nf(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!nf(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function Lx(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function KE(t,e){const n=Lx(t);return Math.round(e*n)/n}function jm(t){const e=b.useRef(t);return dh(()=>{e.current=t}),e}function kM(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:u}=t,[d,h]=b.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,m]=b.useState(r);nf(p,r)||m(r);const[E,v]=b.useState(null),[S,_]=b.useState(null),y=b.useCallback(B=>{B!==V.current&&(V.current=B,v(B))},[]),I=b.useCallback(B=>{B!==T.current&&(T.current=B,_(B))},[]),D=s||E,N=o||S,V=b.useRef(null),T=b.useRef(null),w=b.useRef(d),x=l!=null,P=jm(l),C=jm(i),k=jm(u),R=b.useCallback(()=>{if(!V.current||!T.current)return;const B={placement:e,strategy:n,middleware:p};C.current&&(B.platform=C.current),bM(V.current,T.current,B).then(U=>{const H={...U,isPositioned:k.current!==!1};W.current&&!nf(w.current,H)&&(w.current=H,Nu.flushSync(()=>{h(H)}))})},[p,e,n,C,k]);dh(()=>{u===!1&&w.current.isPositioned&&(w.current.isPositioned=!1,h(B=>({...B,isPositioned:!1})))},[u]);const W=b.useRef(!1);dh(()=>(W.current=!0,()=>{W.current=!1}),[]),dh(()=>{if(D&&(V.current=D),N&&(T.current=N),D&&N){if(P.current)return P.current(D,N,R);R()}},[D,N,R,P,x]);const X=b.useMemo(()=>({reference:V,floating:T,setReference:y,setFloating:I}),[y,I]),Z=b.useMemo(()=>({reference:D,floating:N}),[D,N]),ie=b.useMemo(()=>{const B={position:n,left:0,top:0};if(!Z.floating)return B;const U=KE(Z.floating,d.x),H=KE(Z.floating,d.y);return a?{...B,transform:"translate("+U+"px, "+H+"px)",...Lx(Z.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:U,top:H}},[n,a,Z.floating,d.x,d.y]);return b.useMemo(()=>({...d,update:R,refs:X,elements:Z,floatingStyles:ie}),[d,R,X,Z,ie])}const DM=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?HE({element:r.current,padding:i}).fn(n):{}:r?HE({element:r,padding:i}).fn(n):{}}}},NM=(t,e)=>({...TM(t),options:[t,e]}),OM=(t,e)=>({...IM(t),options:[t,e]}),VM=(t,e)=>({...PM(t),options:[t,e]}),MM=(t,e)=>({...SM(t),options:[t,e]}),LM=(t,e)=>({...AM(t),options:[t,e]}),FM=(t,e)=>({...xM(t),options:[t,e]}),UM=(t,e)=>({...DM(t),options:[t,e]});var jM="Arrow",Fx=b.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...s}=t;return O.jsx(yn.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:O.jsx("polygon",{points:"0,0 30,0 15,10"})})});Fx.displayName=jM;var BM=Fx;function $M(t){const[e,n]=b.useState(void 0);return ys(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,u=Array.isArray(l)?l[0]:l;o=u.inlineSize,a=u.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var a_="Popper",[Ux,jx]=tp(a_),[zM,Bx]=Ux(a_),$x=t=>{const{__scopePopper:e,children:n}=t,[r,i]=b.useState(null);return O.jsx(zM,{scope:e,anchor:r,onAnchorChange:i,children:n})};$x.displayName=a_;var zx="PopperAnchor",qx=b.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,s=Bx(zx,n),o=b.useRef(null),a=ur(e,o);return b.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:O.jsx(yn.div,{...i,ref:a})});qx.displayName=zx;var l_="PopperContent",[qM,WM]=Ux(l_),Wx=b.forwardRef((t,e)=>{var me,nt,vn,Vn,_n,pr;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:p=!1,updatePositionStrategy:m="optimized",onPlaced:E,...v}=t,S=Bx(l_,n),[_,y]=b.useState(null),I=ur(e,Mn=>y(Mn)),[D,N]=b.useState(null),V=$M(D),T=(V==null?void 0:V.width)??0,w=(V==null?void 0:V.height)??0,x=r+(s!=="center"?"-"+s:""),P=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},C=Array.isArray(u)?u:[u],k=C.length>0,R={padding:P,boundary:C.filter(KM),altBoundary:k},{refs:W,floatingStyles:X,placement:Z,isPositioned:ie,middlewareData:B}=kM({strategy:"fixed",placement:x,whileElementsMounted:(...Mn)=>EM(...Mn,{animationFrame:m==="always"}),elements:{reference:S.anchor},middleware:[NM({mainAxis:i+w,alignmentAxis:o}),l&&OM({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?VM():void 0,...R}),l&&MM({...R}),LM({...R,apply:({elements:Mn,rects:Ei,availableWidth:js,availableHeight:Bs})=>{const{width:Vl,height:$s}=Ei.reference,Br=Mn.floating.style;Br.setProperty("--radix-popper-available-width",`${js}px`),Br.setProperty("--radix-popper-available-height",`${Bs}px`),Br.setProperty("--radix-popper-anchor-width",`${Vl}px`),Br.setProperty("--radix-popper-anchor-height",`${$s}px`)}}),D&&UM({element:D,padding:a}),GM({arrowWidth:T,arrowHeight:w}),p&&FM({strategy:"referenceHidden",...R})]}),[U,H]=Gx(Z),ae=gs(E);ys(()=>{ie&&(ae==null||ae())},[ie,ae]);const J=(me=B.arrow)==null?void 0:me.x,se=(nt=B.arrow)==null?void 0:nt.y,ce=((vn=B.arrow)==null?void 0:vn.centerOffset)!==0,[Pe,je]=b.useState();return ys(()=>{_&&je(window.getComputedStyle(_).zIndex)},[_]),O.jsx("div",{ref:W.setFloating,"data-radix-popper-content-wrapper":"",style:{...X,transform:ie?X.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Pe,"--radix-popper-transform-origin":[(Vn=B.transformOrigin)==null?void 0:Vn.x,(_n=B.transformOrigin)==null?void 0:_n.y].join(" "),...((pr=B.hide)==null?void 0:pr.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:O.jsx(qM,{scope:n,placedSide:U,onArrowChange:N,arrowX:J,arrowY:se,shouldHideArrow:ce,children:O.jsx(yn.div,{"data-side":U,"data-align":H,...v,ref:I,style:{...v.style,animation:ie?void 0:"none"}})})})});Wx.displayName=l_;var Hx="PopperArrow",HM={top:"bottom",right:"left",bottom:"top",left:"right"},Kx=b.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,s=WM(Hx,r),o=HM[s.placedSide];return O.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:O.jsx(BM,{...i,ref:n,style:{...i.style,display:"block"}})})});Kx.displayName=Hx;function KM(t){return t!==null}var GM=t=>({name:"transformOrigin",options:t,fn(e){var S,_,y;const{placement:n,rects:r,middlewareData:i}=e,o=((S=i.arrow)==null?void 0:S.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[u,d]=Gx(n),h={start:"0%",center:"50%",end:"100%"}[d],p=(((_=i.arrow)==null?void 0:_.x)??0)+a/2,m=(((y=i.arrow)==null?void 0:y.y)??0)+l/2;let E="",v="";return u==="bottom"?(E=o?h:`${p}px`,v=`${-l}px`):u==="top"?(E=o?h:`${p}px`,v=`${r.floating.height+l}px`):u==="right"?(E=`${-l}px`,v=o?h:`${m}px`):u==="left"&&(E=`${r.floating.width+l}px`,v=o?h:`${m}px`),{data:{x:E,y:v}}}});function Gx(t){const[e,n="center"]=t.split("-");return[e,n]}var b$=$x,QM=qx,YM=Wx,JM=Kx,[ap,R$]=tp("Tooltip",[jx]),c_=jx(),Qx="TooltipProvider",XM=700,GE="tooltip.open",[ZM,Yx]=ap(Qx),Jx=t=>{const{__scopeTooltip:e,delayDuration:n=XM,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:s}=t,o=b.useRef(!0),a=b.useRef(!1),l=b.useRef(0);return b.useEffect(()=>{const u=l.current;return()=>window.clearTimeout(u)},[]),O.jsx(ZM,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:b.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:b.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:b.useCallback(u=>{a.current=u},[]),disableHoverableContent:i,children:s})};Jx.displayName=Qx;var Xx="Tooltip",[C$,lp]=ap(Xx),cy="TooltipTrigger",eL=b.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=lp(cy,n),s=Yx(cy,n),o=c_(n),a=b.useRef(null),l=ur(e,a,i.onTriggerChange),u=b.useRef(!1),d=b.useRef(!1),h=b.useCallback(()=>u.current=!1,[]);return b.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),O.jsx(QM,{asChild:!0,...o,children:O.jsx(yn.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:l,onPointerMove:_t(t.onPointerMove,p=>{p.pointerType!=="touch"&&!d.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),d.current=!0)}),onPointerLeave:_t(t.onPointerLeave,()=>{i.onTriggerLeave(),d.current=!1}),onPointerDown:_t(t.onPointerDown,()=>{i.open&&i.onClose(),u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:_t(t.onFocus,()=>{u.current||i.onOpen()}),onBlur:_t(t.onBlur,i.onClose),onClick:_t(t.onClick,i.onClose)})})});eL.displayName=cy;var tL="TooltipPortal",[k$,nL]=ap(tL,{forceMount:void 0}),Ya="TooltipContent",Zx=b.forwardRef((t,e)=>{const n=nL(Ya,t.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...s}=t,o=lp(Ya,t.__scopeTooltip);return O.jsx(Qv,{present:r||o.open,children:o.disableHoverableContent?O.jsx(eP,{side:i,...s,ref:e}):O.jsx(rL,{side:i,...s,ref:e})})}),rL=b.forwardRef((t,e)=>{const n=lp(Ya,t.__scopeTooltip),r=Yx(Ya,t.__scopeTooltip),i=b.useRef(null),s=ur(e,i),[o,a]=b.useState(null),{trigger:l,onClose:u}=n,d=i.current,{onPointerInTransitChange:h}=r,p=b.useCallback(()=>{a(null),h(!1)},[h]),m=b.useCallback((E,v)=>{const S=E.currentTarget,_={x:E.clientX,y:E.clientY},y=lL(_,S.getBoundingClientRect()),I=cL(_,y),D=uL(v.getBoundingClientRect()),N=hL([...I,...D]);a(N),h(!0)},[h]);return b.useEffect(()=>()=>p(),[p]),b.useEffect(()=>{if(l&&d){const E=S=>m(S,d),v=S=>m(S,l);return l.addEventListener("pointerleave",E),d.addEventListener("pointerleave",v),()=>{l.removeEventListener("pointerleave",E),d.removeEventListener("pointerleave",v)}}},[l,d,m,p]),b.useEffect(()=>{if(o){const E=v=>{const S=v.target,_={x:v.clientX,y:v.clientY},y=(l==null?void 0:l.contains(S))||(d==null?void 0:d.contains(S)),I=!dL(_,o);y?p():I&&(p(),u())};return document.addEventListener("pointermove",E),()=>document.removeEventListener("pointermove",E)}},[l,d,o,u,p]),O.jsx(eP,{...t,ref:s})}),[iL,sL]=ap(Xx,{isInside:!1}),oL=d2("TooltipContent"),eP=b.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=t,l=lp(Ya,n),u=c_(n),{onClose:d}=l;return b.useEffect(()=>(document.addEventListener(GE,d),()=>document.removeEventListener(GE,d)),[d]),b.useEffect(()=>{if(l.trigger){const h=p=>{const m=p.target;m!=null&&m.contains(l.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,d]),O.jsx(Gv,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:O.jsxs(YM,{"data-state":l.stateAttribute,...u,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[O.jsx(oL,{children:r}),O.jsx(iL,{scope:n,isInside:!0,children:O.jsx(M2,{id:l.contentId,role:"tooltip",children:i||r})})]})})});Zx.displayName=Ya;var tP="TooltipArrow",aL=b.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=c_(n);return sL(tP,n).isInside?null:O.jsx(JM,{...i,...r,ref:e})});aL.displayName=tP;function lL(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),i=Math.abs(e.right-t.x),s=Math.abs(e.left-t.x);switch(Math.min(n,r,i,s)){case s:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function cL(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function uL(t){const{top:e,right:n,bottom:r,left:i}=t;return[{x:i,y:e},{x:n,y:e},{x:n,y:r},{x:i,y:r}]}function dL(t,e){const{x:n,y:r}=t;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s],l=e[o],u=a.x,d=a.y,h=l.x,p=l.y;d>r!=p>r&&n<(h-u)*(r-d)/(p-d)+u&&(i=!i)}return i}function hL(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),fL(e)}function fL(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const i=t[r];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const i=t[r];for(;n.length>=2;){const s=n[n.length-1],o=n[n.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))n.pop();else break}n.push(i)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var pL=Jx,nP=Zx;const mL=pL,gL=b.forwardRef(({className:t,sideOffset:e=4,...n},r)=>O.jsx(nP,{ref:r,sideOffset:e,className:Bo("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));gL.displayName=nP.displayName;var cp=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},up=typeof window>"u"||"Deno"in globalThis;function Yn(){}function yL(t,e){return typeof t=="function"?t(e):t}function vL(t){return typeof t=="number"&&t>=0&&t!==1/0}function _L(t,e){return Math.max(t+(e||0)-Date.now(),0)}function uy(t,e){return typeof t=="function"?t(e):t}function wL(t,e){return typeof t=="function"?t(e):t}function QE(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==u_(o,e.options))return!1}else if(!lu(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||s&&!s(e))}function YE(t,e){const{exact:n,status:r,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(n){if(au(e.options.mutationKey)!==au(s))return!1}else if(!lu(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function u_(t,e){return((e==null?void 0:e.queryKeyHashFn)||au)(t)}function au(t){return JSON.stringify(t,(e,n)=>dy(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function lu(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>lu(t[n],e[n])):!1}function rP(t,e){if(t===e)return t;const n=JE(t)&&JE(e);if(n||dy(t)&&dy(e)){const r=n?t:Object.keys(t),i=r.length,s=n?e:Object.keys(e),o=s.length,a=n?[]:{},l=new Set(r);let u=0;for(let d=0;d<o;d++){const h=n?d:s[d];(!n&&l.has(h)||n)&&t[h]===void 0&&e[h]===void 0?(a[h]=void 0,u++):(a[h]=rP(t[h],e[h]),a[h]===t[h]&&t[h]!==void 0&&u++)}return i===o&&u===i?t:a}return e}function JE(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function dy(t){if(!XE(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!XE(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function XE(t){return Object.prototype.toString.call(t)==="[object Object]"}function EL(t){return new Promise(e=>{setTimeout(e,t)})}function TL(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?rP(t,e):e}function IL(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function SL(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var d_=Symbol();function iP(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===d_?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var ho,Wi,Oa,v1,AL=(v1=class extends cp{constructor(){super();Ae(this,ho);Ae(this,Wi);Ae(this,Oa);fe(this,Oa,e=>{if(!up&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){$(this,Wi)||this.setEventListener($(this,Oa))}onUnsubscribe(){var e;this.hasListeners()||((e=$(this,Wi))==null||e.call(this),fe(this,Wi,void 0))}setEventListener(e){var n;fe(this,Oa,e),(n=$(this,Wi))==null||n.call(this),fe(this,Wi,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){$(this,ho)!==e&&(fe(this,ho,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof $(this,ho)=="boolean"?$(this,ho):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},ho=new WeakMap,Wi=new WeakMap,Oa=new WeakMap,v1),sP=new AL,Va,Hi,Ma,_1,xL=(_1=class extends cp{constructor(){super();Ae(this,Va,!0);Ae(this,Hi);Ae(this,Ma);fe(this,Ma,e=>{if(!up&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){$(this,Hi)||this.setEventListener($(this,Ma))}onUnsubscribe(){var e;this.hasListeners()||((e=$(this,Hi))==null||e.call(this),fe(this,Hi,void 0))}setEventListener(e){var n;fe(this,Ma,e),(n=$(this,Hi))==null||n.call(this),fe(this,Hi,e(this.setOnline.bind(this)))}setOnline(e){$(this,Va)!==e&&(fe(this,Va,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return $(this,Va)}},Va=new WeakMap,Hi=new WeakMap,Ma=new WeakMap,_1),rf=new xL;function PL(){let t,e;const n=new Promise((i,s)=>{t=i,e=s});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}function bL(t){return Math.min(1e3*2**t,3e4)}function oP(t){return(t??"online")==="online"?rf.isOnline():!0}var aP=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Bm(t){return t instanceof aP}function lP(t){let e=!1,n=0,r=!1,i;const s=PL(),o=v=>{var S;r||(p(new aP(v)),(S=t.abort)==null||S.call(t))},a=()=>{e=!0},l=()=>{e=!1},u=()=>sP.isFocused()&&(t.networkMode==="always"||rf.isOnline())&&t.canRun(),d=()=>oP(t.networkMode)&&t.canRun(),h=v=>{var S;r||(r=!0,(S=t.onSuccess)==null||S.call(t,v),i==null||i(),s.resolve(v))},p=v=>{var S;r||(r=!0,(S=t.onError)==null||S.call(t,v),i==null||i(),s.reject(v))},m=()=>new Promise(v=>{var S;i=_=>{(r||u())&&v(_)},(S=t.onPause)==null||S.call(t)}).then(()=>{var v;i=void 0,r||(v=t.onContinue)==null||v.call(t)}),E=()=>{if(r)return;let v;const S=n===0?t.initialPromise:void 0;try{v=S??t.fn()}catch(_){v=Promise.reject(_)}Promise.resolve(v).then(h).catch(_=>{var V;if(r)return;const y=t.retry??(up?0:3),I=t.retryDelay??bL,D=typeof I=="function"?I(n,_):I,N=y===!0||typeof y=="number"&&n<y||typeof y=="function"&&y(n,_);if(e||!N){p(_);return}n++,(V=t.onFail)==null||V.call(t,n,_),EL(D).then(()=>u()?void 0:m()).then(()=>{e?p(_):E()})})};return{promise:s,cancel:o,continue:()=>(i==null||i(),s),cancelRetry:a,continueRetry:l,canStart:d,start:()=>(d()?E():m().then(E),s)}}var RL=t=>setTimeout(t,0);function CL(){let t=[],e=0,n=a=>{a()},r=a=>{a()},i=RL;const s=a=>{e?t.push(a):i(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&i(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{s(()=>{a(...l)})},schedule:s,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{i=a}}}var Xt=CL(),fo,w1,cP=(w1=class{constructor(){Ae(this,fo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),vL(this.gcTime)&&fe(this,fo,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(up?1/0:5*60*1e3))}clearGcTimeout(){$(this,fo)&&(clearTimeout($(this,fo)),fe(this,fo,void 0))}},fo=new WeakMap,w1),La,po,Fn,mo,Bt,xu,go,Jn,Kr,E1,kL=(E1=class extends cP{constructor(n){super();Ae(this,Jn);Ae(this,La);Ae(this,po);Ae(this,Fn);Ae(this,mo);Ae(this,Bt);Ae(this,xu);Ae(this,go);fe(this,go,!1),fe(this,xu,n.defaultOptions),this.setOptions(n.options),this.observers=[],fe(this,mo,n.client),fe(this,Fn,$(this,mo).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,fe(this,La,NL(this.options)),this.state=n.state??$(this,La),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=$(this,Bt))==null?void 0:n.promise}setOptions(n){this.options={...$(this,xu),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&$(this,Fn).remove(this)}setData(n,r){const i=TL(this.state.data,n,this.options);return Lt(this,Jn,Kr).call(this,{data:i,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),i}setState(n,r){Lt(this,Jn,Kr).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var i,s;const r=(i=$(this,Bt))==null?void 0:i.promise;return(s=$(this,Bt))==null||s.cancel(n),r?r.then(Yn).catch(Yn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState($(this,La))}isActive(){return this.observers.some(n=>wL(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===d_||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>uy(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!_L(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(i=>i.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=$(this,Bt))==null||r.continue()}onOnline(){var r;const n=this.observers.find(i=>i.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=$(this,Bt))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),$(this,Fn).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||($(this,Bt)&&($(this,go)?$(this,Bt).cancel({revert:!0}):$(this,Bt).cancelRetry()),this.scheduleGc()),$(this,Fn).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Lt(this,Jn,Kr).call(this,{type:"invalidate"})}fetch(n,r){var d,h,p;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if($(this,Bt))return $(this,Bt).continueRetry(),$(this,Bt).promise}if(n&&this.setOptions(n),!this.options.queryFn){const m=this.observers.find(E=>E.options.queryFn);m&&this.setOptions(m.options)}const i=new AbortController,s=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(fe(this,go,!0),i.signal)})},o=()=>{const m=iP(this.options,r),v=(()=>{const S={client:$(this,mo),queryKey:this.queryKey,meta:this.meta};return s(S),S})();return fe(this,go,!1),this.options.persister?this.options.persister(m,v,this):m(v)},l=(()=>{const m={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:$(this,mo),state:this.state,fetchFn:o};return s(m),m})();(d=this.options.behavior)==null||d.onFetch(l,this),fe(this,po,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&Lt(this,Jn,Kr).call(this,{type:"fetch",meta:(p=l.fetchOptions)==null?void 0:p.meta});const u=m=>{var E,v,S,_;Bm(m)&&m.silent||Lt(this,Jn,Kr).call(this,{type:"error",error:m}),Bm(m)||((v=(E=$(this,Fn).config).onError)==null||v.call(E,m,this),(_=(S=$(this,Fn).config).onSettled)==null||_.call(S,this.state.data,m,this)),this.scheduleGc()};return fe(this,Bt,lP({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:i.abort.bind(i),onSuccess:m=>{var E,v,S,_;if(m===void 0){u(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(y){u(y);return}(v=(E=$(this,Fn).config).onSuccess)==null||v.call(E,m,this),(_=(S=$(this,Fn).config).onSettled)==null||_.call(S,m,this.state.error,this),this.scheduleGc()},onError:u,onFail:(m,E)=>{Lt(this,Jn,Kr).call(this,{type:"failed",failureCount:m,error:E})},onPause:()=>{Lt(this,Jn,Kr).call(this,{type:"pause"})},onContinue:()=>{Lt(this,Jn,Kr).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),$(this,Bt).start()}},La=new WeakMap,po=new WeakMap,Fn=new WeakMap,mo=new WeakMap,Bt=new WeakMap,xu=new WeakMap,go=new WeakMap,Jn=new WeakSet,Kr=function(n){const r=i=>{switch(n.type){case"failed":return{...i,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...DL(i.data,this.options),fetchMeta:n.meta??null};case"success":return fe(this,po,void 0),{...i,data:n.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=n.error;return Bm(s)&&s.revert&&$(this,po)?{...$(this,po),fetchStatus:"idle"}:{...i,error:s,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...n.state}}};this.state=r(this.state),Xt.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),$(this,Fn).notify({query:this,type:"updated",action:n})})},E1);function DL(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:oP(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function NL(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var wr,T1,OL=(T1=class extends cp{constructor(e={}){super();Ae(this,wr);this.config=e,fe(this,wr,new Map)}build(e,n,r){const i=n.queryKey,s=n.queryHash??u_(i,n);let o=this.get(s);return o||(o=new kL({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){$(this,wr).has(e.queryHash)||($(this,wr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=$(this,wr).get(e.queryHash);n&&(e.destroy(),n===e&&$(this,wr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Xt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return $(this,wr).get(e)}getAll(){return[...$(this,wr).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>QE(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>QE(e,r)):n}notify(e){Xt.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Xt.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Xt.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},wr=new WeakMap,T1),Er,Yt,yo,Tr,Vi,I1,VL=(I1=class extends cP{constructor(n){super();Ae(this,Tr);Ae(this,Er);Ae(this,Yt);Ae(this,yo);this.mutationId=n.mutationId,fe(this,Yt,n.mutationCache),fe(this,Er,[]),this.state=n.state||ML(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){$(this,Er).includes(n)||($(this,Er).push(n),this.clearGcTimeout(),$(this,Yt).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){fe(this,Er,$(this,Er).filter(r=>r!==n)),this.scheduleGc(),$(this,Yt).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){$(this,Er).length||(this.state.status==="pending"?this.scheduleGc():$(this,Yt).remove(this))}continue(){var n;return((n=$(this,yo))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var o,a,l,u,d,h,p,m,E,v,S,_,y,I,D,N,V,T,w,x;const r=()=>{Lt(this,Tr,Vi).call(this,{type:"continue"})};fe(this,yo,lP({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(P,C)=>{Lt(this,Tr,Vi).call(this,{type:"failed",failureCount:P,error:C})},onPause:()=>{Lt(this,Tr,Vi).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>$(this,Yt).canRun(this)}));const i=this.state.status==="pending",s=!$(this,yo).canStart();try{if(i)r();else{Lt(this,Tr,Vi).call(this,{type:"pending",variables:n,isPaused:s}),await((a=(o=$(this,Yt).config).onMutate)==null?void 0:a.call(o,n,this));const C=await((u=(l=this.options).onMutate)==null?void 0:u.call(l,n));C!==this.state.context&&Lt(this,Tr,Vi).call(this,{type:"pending",context:C,variables:n,isPaused:s})}const P=await $(this,yo).start();return await((h=(d=$(this,Yt).config).onSuccess)==null?void 0:h.call(d,P,n,this.state.context,this)),await((m=(p=this.options).onSuccess)==null?void 0:m.call(p,P,n,this.state.context)),await((v=(E=$(this,Yt).config).onSettled)==null?void 0:v.call(E,P,null,this.state.variables,this.state.context,this)),await((_=(S=this.options).onSettled)==null?void 0:_.call(S,P,null,n,this.state.context)),Lt(this,Tr,Vi).call(this,{type:"success",data:P}),P}catch(P){try{throw await((I=(y=$(this,Yt).config).onError)==null?void 0:I.call(y,P,n,this.state.context,this)),await((N=(D=this.options).onError)==null?void 0:N.call(D,P,n,this.state.context)),await((T=(V=$(this,Yt).config).onSettled)==null?void 0:T.call(V,void 0,P,this.state.variables,this.state.context,this)),await((x=(w=this.options).onSettled)==null?void 0:x.call(w,void 0,P,n,this.state.context)),P}finally{Lt(this,Tr,Vi).call(this,{type:"error",error:P})}}finally{$(this,Yt).runNext(this)}}},Er=new WeakMap,Yt=new WeakMap,yo=new WeakMap,Tr=new WeakSet,Vi=function(n){const r=i=>{switch(n.type){case"failed":return{...i,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...i,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:n.error,failureCount:i.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Xt.batch(()=>{$(this,Er).forEach(i=>{i.onMutationUpdate(n)}),$(this,Yt).notify({mutation:this,type:"updated",action:n})})},I1);function ML(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Yr,Xn,Pu,S1,LL=(S1=class extends cp{constructor(e={}){super();Ae(this,Yr);Ae(this,Xn);Ae(this,Pu);this.config=e,fe(this,Yr,new Set),fe(this,Xn,new Map),fe(this,Pu,0)}build(e,n,r){const i=new VL({mutationCache:this,mutationId:++_d(this,Pu)._,options:e.defaultMutationOptions(n),state:r});return this.add(i),i}add(e){$(this,Yr).add(e);const n=$d(e);if(typeof n=="string"){const r=$(this,Xn).get(n);r?r.push(e):$(this,Xn).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if($(this,Yr).delete(e)){const n=$d(e);if(typeof n=="string"){const r=$(this,Xn).get(n);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&$(this,Xn).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=$d(e);if(typeof n=="string"){const r=$(this,Xn).get(n),i=r==null?void 0:r.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){var r;const n=$d(e);if(typeof n=="string"){const i=(r=$(this,Xn).get(n))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Xt.batch(()=>{$(this,Yr).forEach(e=>{this.notify({type:"removed",mutation:e})}),$(this,Yr).clear(),$(this,Xn).clear()})}getAll(){return Array.from($(this,Yr))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>YE(n,r))}findAll(e={}){return this.getAll().filter(n=>YE(e,n))}notify(e){Xt.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Xt.batch(()=>Promise.all(e.map(n=>n.continue().catch(Yn))))}},Yr=new WeakMap,Xn=new WeakMap,Pu=new WeakMap,S1);function $d(t){var e;return(e=t.options.scope)==null?void 0:e.id}function ZE(t){return{onFetch:(e,n)=>{var d,h,p,m,E;const r=e.options,i=(p=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:p.direction,s=((m=e.state.data)==null?void 0:m.pages)||[],o=((E=e.state.data)==null?void 0:E.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const u=async()=>{let v=!1;const S=I=>{Object.defineProperty(I,"signal",{enumerable:!0,get:()=>(e.signal.aborted?v=!0:e.signal.addEventListener("abort",()=>{v=!0}),e.signal)})},_=iP(e.options,e.fetchOptions),y=async(I,D,N)=>{if(v)return Promise.reject();if(D==null&&I.pages.length)return Promise.resolve(I);const T=(()=>{const C={client:e.client,queryKey:e.queryKey,pageParam:D,direction:N?"backward":"forward",meta:e.options.meta};return S(C),C})(),w=await _(T),{maxPages:x}=e.options,P=N?SL:IL;return{pages:P(I.pages,w,x),pageParams:P(I.pageParams,D,x)}};if(i&&s.length){const I=i==="backward",D=I?FL:eT,N={pages:s,pageParams:o},V=D(r,N);a=await y(N,V,I)}else{const I=t??s.length;do{const D=l===0?o[0]??r.initialPageParam:eT(r,a);if(l>0&&D==null)break;a=await y(a,D),l++}while(l<I)}return a};e.options.persister?e.fetchFn=()=>{var v,S;return(S=(v=e.options).persister)==null?void 0:S.call(v,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=u}}}function eT(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function FL(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var st,Ki,Gi,Fa,Ua,Qi,ja,Ba,A1,UL=(A1=class{constructor(t={}){Ae(this,st);Ae(this,Ki);Ae(this,Gi);Ae(this,Fa);Ae(this,Ua);Ae(this,Qi);Ae(this,ja);Ae(this,Ba);fe(this,st,t.queryCache||new OL),fe(this,Ki,t.mutationCache||new LL),fe(this,Gi,t.defaultOptions||{}),fe(this,Fa,new Map),fe(this,Ua,new Map),fe(this,Qi,0)}mount(){_d(this,Qi)._++,$(this,Qi)===1&&(fe(this,ja,sP.subscribe(async t=>{t&&(await this.resumePausedMutations(),$(this,st).onFocus())})),fe(this,Ba,rf.subscribe(async t=>{t&&(await this.resumePausedMutations(),$(this,st).onOnline())})))}unmount(){var t,e;_d(this,Qi)._--,$(this,Qi)===0&&((t=$(this,ja))==null||t.call(this),fe(this,ja,void 0),(e=$(this,Ba))==null||e.call(this),fe(this,Ba,void 0))}isFetching(t){return $(this,st).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return $(this,Ki).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=$(this,st).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=$(this,st).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(uy(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return $(this,st).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),i=$(this,st).get(r.queryHash),s=i==null?void 0:i.state.data,o=yL(e,s);if(o!==void 0)return $(this,st).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Xt.batch(()=>$(this,st).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=$(this,st).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=$(this,st);Xt.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=$(this,st);return Xt.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Xt.batch(()=>$(this,st).findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(Yn).catch(Yn)}invalidateQueries(t,e={}){return Xt.batch(()=>($(this,st).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Xt.batch(()=>$(this,st).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,n);return n.throwOnError||(s=s.catch(Yn)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(Yn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=$(this,st).build(this,e);return n.isStaleByTime(uy(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Yn).catch(Yn)}fetchInfiniteQuery(t){return t.behavior=ZE(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Yn).catch(Yn)}ensureInfiniteQueryData(t){return t.behavior=ZE(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return rf.isOnline()?$(this,Ki).resumePausedMutations():Promise.resolve()}getQueryCache(){return $(this,st)}getMutationCache(){return $(this,Ki)}getDefaultOptions(){return $(this,Gi)}setDefaultOptions(t){fe(this,Gi,t)}setQueryDefaults(t,e){$(this,Fa).set(au(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...$(this,Fa).values()],n={};return e.forEach(r=>{lu(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){$(this,Ua).set(au(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...$(this,Ua).values()],n={};return e.forEach(r=>{lu(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...$(this,Gi).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=u_(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===d_&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...$(this,Gi).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){$(this,st).clear(),$(this,Ki).clear()}},st=new WeakMap,Ki=new WeakMap,Gi=new WeakMap,Fa=new WeakMap,Ua=new WeakMap,Qi=new WeakMap,ja=new WeakMap,Ba=new WeakMap,A1),jL=b.createContext(void 0),BL=({client:t,children:e})=>(b.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),O.jsx(jL.Provider,{value:t,children:e}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cu(){return cu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cu.apply(this,arguments)}var Xi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Xi||(Xi={}));const tT="popstate";function $L(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return hy("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:sf(i)}return qL(e,n,null,t)}function ft(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function uP(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function zL(){return Math.random().toString(36).substr(2,8)}function nT(t,e){return{usr:t.state,key:t.key,idx:e}}function hy(t,e,n,r){return n===void 0&&(n=null),cu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Sl(e):e,{state:n,key:e&&e.key||r||zL()})}function sf(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Sl(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function qL(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Xi.Pop,l=null,u=d();u==null&&(u=0,o.replaceState(cu({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=Xi.Pop;let S=d(),_=S==null?null:S-u;u=S,l&&l({action:a,location:v.location,delta:_})}function p(S,_){a=Xi.Push;let y=hy(v.location,S,_);u=d()+1;let I=nT(y,u),D=v.createHref(y);try{o.pushState(I,"",D)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;i.location.assign(D)}s&&l&&l({action:a,location:v.location,delta:1})}function m(S,_){a=Xi.Replace;let y=hy(v.location,S,_);u=d();let I=nT(y,u),D=v.createHref(y);o.replaceState(I,"",D),s&&l&&l({action:a,location:v.location,delta:0})}function E(S){let _=i.location.origin!=="null"?i.location.origin:i.location.href,y=typeof S=="string"?S:sf(S);return y=y.replace(/ $/,"%20"),ft(_,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,_)}let v={get action(){return a},get location(){return t(i,o)},listen(S){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(tT,h),l=S,()=>{i.removeEventListener(tT,h),l=null}},createHref(S){return e(i,S)},createURL:E,encodeLocation(S){let _=E(S);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:p,replace:m,go(S){return o.go(S)}};return v}var rT;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(rT||(rT={}));function WL(t,e,n){return n===void 0&&(n="/"),HL(t,e,n,!1)}function HL(t,e,n,r){let i=typeof e=="string"?Sl(e):e,s=h_(i.pathname||"/",n);if(s==null)return null;let o=dP(t);KL(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=iF(s);a=nF(o[l],u,r)}return a}function dP(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(ft(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=ls([r,l.relativePath]),d=n.concat(l);s.children&&s.children.length>0&&(ft(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),dP(s.children,e,d,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:eF(u,s.index),routesMeta:d})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of hP(s.path))i(s,o,l)}),e}function hP(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=hP(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function KL(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:tF(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const GL=/^:[\w-]+$/,QL=3,YL=2,JL=1,XL=10,ZL=-2,iT=t=>t==="*";function eF(t,e){let n=t.split("/"),r=n.length;return n.some(iT)&&(r+=ZL),e&&(r+=YL),n.filter(i=>!iT(i)).reduce((i,s)=>i+(GL.test(s)?QL:s===""?JL:XL),r)}function tF(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function nF(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",h=sT({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d),p=l.route;if(!h&&u&&n&&!r[r.length-1].route.index&&(h=sT({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:ls([s,h.pathname]),pathnameBase:lF(ls([s,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(s=ls([s,h.pathnameBase]))}return o}function sT(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=rF(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,d,h)=>{let{paramName:p,isOptional:m}=d;if(p==="*"){let v=a[h]||"";o=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const E=a[h];return m&&!E?u[p]=void 0:u[p]=(E||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function rF(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),uP(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function iF(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return uP(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function h_(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function sF(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Sl(t):t;return{pathname:n?n.startsWith("/")?n:oF(n,e):e,search:cF(r),hash:uF(i)}}function oF(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function $m(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function aF(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function f_(t,e){let n=aF(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function p_(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Sl(t):(i=cu({},t),ft(!i.pathname||!i.pathname.includes("?"),$m("?","pathname","search",i)),ft(!i.pathname||!i.pathname.includes("#"),$m("#","pathname","hash",i)),ft(!i.search||!i.search.includes("#"),$m("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),h-=1;i.pathname=p.join("/")}a=h>=0?e[h]:"/"}let l=sF(i,a),u=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}const ls=t=>t.join("/").replace(/\/\/+/g,"/"),lF=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),cF=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,uF=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function dF(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const fP=["post","put","patch","delete"];new Set(fP);const hF=["get",...fP];new Set(hF);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function uu(){return uu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uu.apply(this,arguments)}const m_=b.createContext(null),fF=b.createContext(null),ks=b.createContext(null),dp=b.createContext(null),Ds=b.createContext({outlet:null,matches:[],isDataRoute:!1}),pP=b.createContext(null);function pF(t,e){let{relative:n}=e===void 0?{}:e;Al()||ft(!1);let{basename:r,navigator:i}=b.useContext(ks),{hash:s,pathname:o,search:a}=gP(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:ls([r,o])),i.createHref({pathname:l,search:a,hash:s})}function Al(){return b.useContext(dp)!=null}function yi(){return Al()||ft(!1),b.useContext(dp).location}function mP(t){b.useContext(ks).static||b.useLayoutEffect(t)}function hp(){let{isDataRoute:t}=b.useContext(Ds);return t?PF():mF()}function mF(){Al()||ft(!1);let t=b.useContext(m_),{basename:e,future:n,navigator:r}=b.useContext(ks),{matches:i}=b.useContext(Ds),{pathname:s}=yi(),o=JSON.stringify(f_(i,n.v7_relativeSplatPath)),a=b.useRef(!1);return mP(()=>{a.current=!0}),b.useCallback(function(u,d){if(d===void 0&&(d={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let h=p_(u,JSON.parse(o),s,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:ls([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,s,t])}function gP(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=b.useContext(ks),{matches:i}=b.useContext(Ds),{pathname:s}=yi(),o=JSON.stringify(f_(i,r.v7_relativeSplatPath));return b.useMemo(()=>p_(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function gF(t,e){return yF(t,e)}function yF(t,e,n,r){Al()||ft(!1);let{navigator:i}=b.useContext(ks),{matches:s}=b.useContext(Ds),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=yi(),d;if(e){var h;let S=typeof e=="string"?Sl(e):e;l==="/"||(h=S.pathname)!=null&&h.startsWith(l)||ft(!1),d=S}else d=u;let p=d.pathname||"/",m=p;if(l!=="/"){let S=l.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(S.length).join("/")}let E=WL(t,{pathname:m}),v=TF(E&&E.map(S=>Object.assign({},S,{params:Object.assign({},a,S.params),pathname:ls([l,i.encodeLocation?i.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?l:ls([l,i.encodeLocation?i.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),s,n,r);return e&&v?b.createElement(dp.Provider,{value:{location:uu({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Xi.Pop}},v):v}function vF(){let t=xF(),e=dF(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),n?b.createElement("pre",{style:i},n):null,null)}const _F=b.createElement(vF,null);class wF extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?b.createElement(Ds.Provider,{value:this.props.routeContext},b.createElement(pP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function EF(t){let{routeContext:e,match:n,children:r}=t,i=b.useContext(m_);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),b.createElement(Ds.Provider,{value:e},r)}function TF(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||ft(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:p,errors:m}=n,E=h.route.loader&&p[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||E){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,p)=>{let m,E=!1,v=null,S=null;n&&(m=a&&h.route.id?a[h.route.id]:void 0,v=h.route.errorElement||_F,l&&(u<0&&p===0?(E=!0,S=null):u===p&&(E=!0,S=h.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,p+1)),y=()=>{let I;return m?I=v:E?I=S:h.route.Component?I=b.createElement(h.route.Component,null):h.route.element?I=h.route.element:I=d,b.createElement(EF,{match:h,routeContext:{outlet:d,matches:_,isDataRoute:n!=null},children:I})};return n&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?b.createElement(wF,{location:n.location,revalidation:n.revalidation,component:v,error:m,children:y(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):y()},null)}var yP=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(yP||{}),of=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(of||{});function IF(t){let e=b.useContext(m_);return e||ft(!1),e}function SF(t){let e=b.useContext(fF);return e||ft(!1),e}function AF(t){let e=b.useContext(Ds);return e||ft(!1),e}function vP(t){let e=AF(),n=e.matches[e.matches.length-1];return n.route.id||ft(!1),n.route.id}function xF(){var t;let e=b.useContext(pP),n=SF(of.UseRouteError),r=vP(of.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function PF(){let{router:t}=IF(yP.UseNavigateStable),e=vP(of.UseNavigateStable),n=b.useRef(!1);return mP(()=>{n.current=!0}),b.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,uu({fromRouteId:e},s)))},[t,e])}function bF(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function O$(t){let{to:e,replace:n,state:r,relative:i}=t;Al()||ft(!1);let{future:s,static:o}=b.useContext(ks),{matches:a}=b.useContext(Ds),{pathname:l}=yi(),u=hp(),d=p_(e,f_(a,s.v7_relativeSplatPath),l,i==="path"),h=JSON.stringify(d);return b.useEffect(()=>u(JSON.parse(h),{replace:n,state:r,relative:i}),[u,h,i,n,r]),null}function qe(t){ft(!1)}function RF(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Xi.Pop,navigator:s,static:o=!1,future:a}=t;Al()&&ft(!1);let l=e.replace(/^\/*/,"/"),u=b.useMemo(()=>({basename:l,navigator:s,static:o,future:uu({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=Sl(r));let{pathname:d="/",search:h="",hash:p="",state:m=null,key:E="default"}=r,v=b.useMemo(()=>{let S=h_(d,l);return S==null?null:{location:{pathname:S,search:h,hash:p,state:m,key:E},navigationType:i}},[l,d,h,p,m,E,i]);return v==null?null:b.createElement(ks.Provider,{value:u},b.createElement(dp.Provider,{children:n,value:v}))}function CF(t){let{children:e,location:n}=t;return gF(fy(e),n)}new Promise(()=>{});function fy(t,e){e===void 0&&(e=[]);let n=[];return b.Children.forEach(t,(r,i)=>{if(!b.isValidElement(r))return;let s=[...e,i];if(r.type===b.Fragment){n.push.apply(n,fy(r.props.children,s));return}r.type!==qe&&ft(!1),!r.props.index||!r.props.children||ft(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=fy(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function py(){return py=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},py.apply(this,arguments)}function kF(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function DF(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function NF(t,e){return t.button===0&&(!e||e==="_self")&&!DF(t)}function my(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function OF(t,e){let n=my(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(s=>{n.append(i,s)})}),n}const VF=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],MF="6";try{window.__reactRouterVersion=MF}catch{}const LF="startTransition",oT=L1[LF];function FF(t){let{basename:e,children:n,future:r,window:i}=t,s=b.useRef();s.current==null&&(s.current=$L({window:i,v5Compat:!0}));let o=s.current,[a,l]=b.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},d=b.useCallback(h=>{u&&oT?oT(()=>l(h)):l(h)},[l,u]);return b.useLayoutEffect(()=>o.listen(d),[o,d]),b.useEffect(()=>bF(r),[r]),b.createElement(RF,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const UF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",jF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,V$=b.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:d,viewTransition:h}=e,p=kF(e,VF),{basename:m}=b.useContext(ks),E,v=!1;if(typeof u=="string"&&jF.test(u)&&(E=u,UF))try{let I=new URL(window.location.href),D=u.startsWith("//")?new URL(I.protocol+u):new URL(u),N=h_(D.pathname,m);D.origin===I.origin&&N!=null?u=N+D.search+D.hash:v=!0}catch{}let S=pF(u,{relative:i}),_=BF(u,{replace:o,state:a,target:l,preventScrollReset:d,relative:i,viewTransition:h});function y(I){r&&r(I),I.defaultPrevented||_(I)}return b.createElement("a",py({},p,{href:E||S,onClick:v||s?r:y,ref:n,target:l}))});var aT;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(aT||(aT={}));var lT;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(lT||(lT={}));function BF(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=hp(),u=yi(),d=gP(t,{relative:o});return b.useCallback(h=>{if(NF(h,n)){h.preventDefault();let p=r!==void 0?r:sf(u)===sf(d);l(t,{replace:p,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[u,l,d,r,i,n,t,s,o,a])}function M$(t){let e=b.useRef(my(t)),n=b.useRef(!1),r=yi(),i=b.useMemo(()=>OF(r.search,n.current?null:e.current),[r.search]),s=hp(),o=b.useCallback((a,l)=>{const u=my(typeof a=="function"?a(i):a);n.current=!0,s("?"+u,l)},[s,i]);return[i,o]}const _P=b.createContext(void 0),$F=({children:t})=>{const[e,n]=b.useState("medium"),[r,i]=b.useState(!1);b.useEffect(()=>{const o=()=>{const a=window.innerWidth<=768;i(a)};return o(),window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[]),b.useEffect(()=>{const o=localStorage.getItem("mobileFontSize");o&&["small","medium","large"].includes(o)&&n(o)},[]),b.useEffect(()=>{if(r){const o=document.documentElement;o.classList.remove("font-size-small","font-size-medium","font-size-large"),o.classList.add(`font-size-${e}`)}},[e,r]);const s=o=>{r&&(n(o),localStorage.setItem("mobileFontSize",o))};return O.jsx(_P.Provider,{value:{fontSize:e,setFontSize:s,isMobile:r},children:t})},L$=()=>{const t=b.useContext(_P);if(t===void 0)throw new Error("useFontSize must be used within a FontSizeProvider");return t},zF=()=>{};var cT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wP=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},qF=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},EP={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,d=s>>2,h=(s&3)<<4|a>>4;let p=(a&15)<<2|u>>6,m=u&63;l||(m=64,o||(p=64)),r.push(n[d],n[h],n[p],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(wP(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):qF(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||h==null)throw new WF;const p=s<<2|a>>4;if(r.push(p),u!==64){const m=a<<4&240|u>>2;if(r.push(m),h!==64){const E=u<<6&192|h;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class WF extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const HF=function(t){const e=wP(t);return EP.encodeByteArray(e,!0)},af=function(t){return HF(t).replace(/\./g,"")},TP=function(t){try{return EP.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KF=()=>IP().__FIREBASE_DEFAULTS__,GF=()=>{if(typeof process>"u"||typeof cT>"u")return;const t=cT.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},QF=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&TP(t[1]);return e&&JSON.parse(e)},fp=()=>{try{return zF()||KF()||GF()||QF()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},SP=t=>{var e,n;return(n=(e=fp())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},YF=t=>{const e=SP(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},AP=()=>{var t;return(t=fp())==null?void 0:t.config},xP=t=>{var e;return(e=fp())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JF{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ns(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function g_(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F$(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[af(JSON.stringify(n)),af(JSON.stringify(o)),""].join(".")}const Cc={};function XF(){const t={prod:[],emulator:[]};for(const e of Object.keys(Cc))Cc[e]?t.emulator.push(e):t.prod.push(e);return t}function ZF(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let uT=!1;function PP(t,e){if(typeof window>"u"||typeof document>"u"||!Ns(window.location.host)||Cc[t]===e||Cc[t]||uT)return;Cc[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",s=XF().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function l(p,m){p.setAttribute("width","24"),p.setAttribute("id",m),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function u(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{uT=!0,o()},p}function d(p,m){p.setAttribute("id",m),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function h(){const p=ZF(r),m=n("text"),E=document.getElementById(m)||document.createElement("span"),v=n("learnmore"),S=document.getElementById(v)||document.createElement("a"),_=n("preprendIcon"),y=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const I=p.element;a(I),d(S,v);const D=u();l(y,_),I.append(y,E,S,D),document.body.appendChild(I)}s?(E.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function e4(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tt())}function bP(){var e;const t=(e=fp())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function t4(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function n4(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function r4(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function i4(){const t=Tt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function RP(){return!bP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function CP(){return!bP()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function kP(){try{return typeof indexedDB=="object"}catch{return!1}}function s4(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o4="FirebaseError";class Fr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=o4,Object.setPrototypeOf(this,Fr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Mu.prototype.create)}}class Mu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?a4(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Fr(i,a,r)}}function a4(t,e){return t.replace(l4,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const l4=/\{\$([^}]+)}/g;function c4(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ro(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(dT(s)&&dT(o)){if(!Ro(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function dT(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function pc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function mc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function u4(t,e){const n=new d4(t,e);return n.subscribe.bind(n)}class d4{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");h4(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=zm),i.error===void 0&&(i.error=zm),i.complete===void 0&&(i.complete=zm);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function h4(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function zm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Je(t){return t&&t._delegate?t._delegate:t}class ws{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new JF;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(m4(e))try{this.getOrInitializeService({instanceIdentifier:Xs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Xs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xs){return this.instances.has(e)}getOptions(e=Xs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:p4(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Xs){return this.component?this.component.multipleInstances?e:Xs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function p4(t){return t===Xs?void 0:t}function m4(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new f4(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ve;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ve||(ve={}));const y4={debug:ve.DEBUG,verbose:ve.VERBOSE,info:ve.INFO,warn:ve.WARN,error:ve.ERROR,silent:ve.SILENT},v4=ve.INFO,_4={[ve.DEBUG]:"log",[ve.VERBOSE]:"log",[ve.INFO]:"info",[ve.WARN]:"warn",[ve.ERROR]:"error"},w4=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=_4[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class y_{constructor(e){this.name=e,this._logLevel=v4,this._logHandler=w4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?y4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ve.DEBUG,...e),this._logHandler(this,ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ve.VERBOSE,...e),this._logHandler(this,ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ve.INFO,...e),this._logHandler(this,ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ve.WARN,...e),this._logHandler(this,ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ve.ERROR,...e),this._logHandler(this,ve.ERROR,...e)}}const E4=(t,e)=>e.some(n=>t instanceof n);let hT,fT;function T4(){return hT||(hT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function I4(){return fT||(fT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const DP=new WeakMap,gy=new WeakMap,NP=new WeakMap,qm=new WeakMap,v_=new WeakMap;function S4(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(cs(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&DP.set(n,t)}).catch(()=>{}),v_.set(e,t),e}function A4(t){if(gy.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});gy.set(t,e)}let yy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return gy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||NP.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return cs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function x4(t){yy=t(yy)}function P4(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Wm(this),e,...n);return NP.set(r,e.sort?e.sort():[e]),cs(r)}:I4().includes(t)?function(...e){return t.apply(Wm(this),e),cs(DP.get(this))}:function(...e){return cs(t.apply(Wm(this),e))}}function b4(t){return typeof t=="function"?P4(t):(t instanceof IDBTransaction&&A4(t),E4(t,T4())?new Proxy(t,yy):t)}function cs(t){if(t instanceof IDBRequest)return S4(t);if(qm.has(t))return qm.get(t);const e=b4(t);return e!==t&&(qm.set(t,e),v_.set(e,t)),e}const Wm=t=>v_.get(t);function R4(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=cs(o);return r&&o.addEventListener("upgradeneeded",l=>{r(cs(o.result),l.oldVersion,l.newVersion,cs(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const C4=["get","getKey","getAll","getAllKeys","count"],k4=["put","add","delete","clear"],Hm=new Map;function pT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Hm.get(e))return Hm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=k4.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||C4.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return Hm.set(e,s),s}x4(t=>({...t,get:(e,n,r)=>pT(e,n)||t.get(e,n,r),has:(e,n)=>!!pT(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(N4(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function N4(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const vy="@firebase/app",mT="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hi=new y_("@firebase/app"),O4="@firebase/app-compat",V4="@firebase/analytics-compat",M4="@firebase/analytics",L4="@firebase/app-check-compat",F4="@firebase/app-check",U4="@firebase/auth",j4="@firebase/auth-compat",B4="@firebase/database",$4="@firebase/data-connect",z4="@firebase/database-compat",q4="@firebase/functions",W4="@firebase/functions-compat",H4="@firebase/installations",K4="@firebase/installations-compat",G4="@firebase/messaging",Q4="@firebase/messaging-compat",Y4="@firebase/performance",J4="@firebase/performance-compat",X4="@firebase/remote-config",Z4="@firebase/remote-config-compat",eU="@firebase/storage",tU="@firebase/storage-compat",nU="@firebase/firestore",rU="@firebase/ai",iU="@firebase/firestore-compat",sU="firebase",oU="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _y="[DEFAULT]",aU={[vy]:"fire-core",[O4]:"fire-core-compat",[M4]:"fire-analytics",[V4]:"fire-analytics-compat",[F4]:"fire-app-check",[L4]:"fire-app-check-compat",[U4]:"fire-auth",[j4]:"fire-auth-compat",[B4]:"fire-rtdb",[$4]:"fire-data-connect",[z4]:"fire-rtdb-compat",[q4]:"fire-fn",[W4]:"fire-fn-compat",[H4]:"fire-iid",[K4]:"fire-iid-compat",[G4]:"fire-fcm",[Q4]:"fire-fcm-compat",[Y4]:"fire-perf",[J4]:"fire-perf-compat",[X4]:"fire-rc",[Z4]:"fire-rc-compat",[eU]:"fire-gcs",[tU]:"fire-gcs-compat",[nU]:"fire-fst",[iU]:"fire-fst-compat",[rU]:"fire-vertex","fire-js":"fire-js",[sU]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lf=new Map,lU=new Map,wy=new Map;function gT(t,e){try{t.container.addComponent(e)}catch(n){hi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Co(t){const e=t.name;if(wy.has(e))return hi.debug(`There were multiple attempts to register component ${e}.`),!1;wy.set(e,t);for(const n of lf.values())gT(n,t);for(const n of lU.values())gT(n,t);return!0}function pp(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Sn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cU={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},us=new Mu("app","Firebase",cU);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uU{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ws("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw us.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xl=oU;function OP(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:_y,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw us.create("bad-app-name",{appName:String(i)});if(n||(n=AP()),!n)throw us.create("no-options");const s=lf.get(i);if(s){if(Ro(n,s.options)&&Ro(r,s.config))return s;throw us.create("duplicate-app",{appName:i})}const o=new g4(i);for(const l of wy.values())o.addComponent(l);const a=new uU(n,r,o);return lf.set(i,a),a}function VP(t=_y){const e=lf.get(t);if(!e&&t===_y&&AP())return OP();if(!e)throw us.create("no-app",{appName:t});return e}function kr(t,e,n){let r=aU[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),hi.warn(o.join(" "));return}Co(new ws(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dU="firebase-heartbeat-database",hU=1,du="firebase-heartbeat-store";let Km=null;function MP(){return Km||(Km=R4(dU,hU,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(du)}catch(n){console.warn(n)}}}}).catch(t=>{throw us.create("idb-open",{originalErrorMessage:t.message})})),Km}async function fU(t){try{const n=(await MP()).transaction(du),r=await n.objectStore(du).get(LP(t));return await n.done,r}catch(e){if(e instanceof Fr)hi.warn(e.message);else{const n=us.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});hi.warn(n.message)}}}async function yT(t,e){try{const r=(await MP()).transaction(du,"readwrite");await r.objectStore(du).put(e,LP(t)),await r.done}catch(n){if(n instanceof Fr)hi.warn(n.message);else{const r=us.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});hi.warn(r.message)}}}function LP(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pU=1024,mU=30;class gU{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new vU(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=vT();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>mU){const o=_U(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){hi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=vT(),{heartbeatsToSend:r,unsentEntries:i}=yU(this._heartbeatsCache.heartbeats),s=af(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return hi.warn(n),""}}}function vT(){return new Date().toISOString().substring(0,10)}function yU(t,e=pU){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),_T(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),_T(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class vU{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return kP()?s4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await fU(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return yT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return yT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function _T(t){return af(JSON.stringify({version:2,heartbeats:t})).length}function _U(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wU(t){Co(new ws("platform-logger",e=>new D4(e),"PRIVATE")),Co(new ws("heartbeat",e=>new gU(e),"PRIVATE")),kr(vy,mT,t),kr(vy,mT,"esm2020"),kr("fire-js","")}wU("");function FP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const EU=FP,UP=new Mu("auth","Firebase",FP());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cf=new y_("@firebase/auth");function TU(t,...e){cf.logLevel<=ve.WARN&&cf.warn(`Auth (${xl}): ${t}`,...e)}function hh(t,...e){cf.logLevel<=ve.ERROR&&cf.error(`Auth (${xl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fr(t,...e){throw __(t,...e)}function Dr(t,...e){return __(t,...e)}function jP(t,e,n){const r={...EU(),[e]:n};return new Mu("auth","Firebase",r).create(e,{appName:t.name})}function ri(t){return jP(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function __(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return UP.create(t,...e)}function ue(t,e,...n){if(!t)throw __(e,...n)}function Zr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw hh(e),new Error(e)}function fi(t,e){t||Zr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ey(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function IU(){return wT()==="http:"||wT()==="https:"}function wT(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(IU()||n4()||"connection"in navigator)?navigator.onLine:!0}function AU(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(e,n){this.shortDelay=e,this.longDelay=n,fi(n>e,"Short delay should be less than long delay!"),this.isMobile=e4()||r4()}get(){return SU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w_(t,e){fi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Zr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Zr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Zr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PU=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],bU=new Fu(3e4,6e4);function vi(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Ur(t,e,n,r,i={}){return $P(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Lu({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...s};return t4()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Ns(t.emulatorConfig.host)&&(u.credentials="include"),BP.fetch()(await zP(t,t.config.apiHost,n,a),u)})}async function $P(t,e,n){t._canInitEmulator=!1;const r={...xU,...e};try{const i=new CU(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw zd(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw zd(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw zd(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw zd(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw jP(t,d,u);fr(t,d)}}catch(i){if(i instanceof Fr)throw i;fr(t,"network-request-failed",{message:String(i)})}}async function Uu(t,e,n,r,i={}){const s=await Ur(t,e,n,r,i);return"mfaPendingCredential"in s&&fr(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function zP(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?w_(t.config,i):`${t.config.apiScheme}://${i}`;return PU.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function RU(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class CU{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Dr(this.auth,"network-request-failed")),bU.get())})}}function zd(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Dr(t,e,r);return i.customData._tokenResponse=n,i}function ET(t){return t!==void 0&&t.enterprise!==void 0}class kU{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return RU(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function DU(t,e){return Ur(t,"GET","/v2/recaptchaConfig",vi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NU(t,e){return Ur(t,"POST","/v1/accounts:delete",e)}async function uf(t,e){return Ur(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function OU(t,e=!1){const n=Je(t),r=await n.getIdToken(e),i=E_(r);ue(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:kc(Gm(i.auth_time)),issuedAtTime:kc(Gm(i.iat)),expirationTime:kc(Gm(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Gm(t){return Number(t)*1e3}function E_(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return hh("JWT malformed, contained fewer than 3 sections"),null;try{const i=TP(n);return i?JSON.parse(i):(hh("Failed to decode base64 JWT payload"),null)}catch(i){return hh("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function TT(t){const e=E_(t);return ue(e,"internal-error"),ue(typeof e.exp<"u","internal-error"),ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ja(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Fr&&VU(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function VU({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=kc(this.lastLoginAt),this.creationTime=kc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function df(t){var h;const e=t.auth,n=await t.getIdToken(),r=await Ja(t,uf(e,{idToken:n}));ue(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=(h=i.providerUserInfo)!=null&&h.length?qP(i.providerUserInfo):[],o=FU(t.providerData,s),a=t.isAnonymous,l=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),u=a?l:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Ty(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function LU(t){const e=Je(t);await df(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function FU(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function qP(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UU(t,e){const n=await $P(t,{},async()=>{const r=Lu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await zP(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&Ns(t.emulatorConfig.host)&&(l.credentials="include"),BP.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function jU(t,e){return Ur(t,"POST","/v2/accounts:revokeToken",vi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ue(e.idToken,"internal-error"),ue(typeof e.idToken<"u","internal-error"),ue(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):TT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ue(e.length!==0,"internal-error");const n=TT(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await UU(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Ca;return r&&(ue(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ue(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ue(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ca,this.toJSON())}_performRefresh(){return Zr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ki(t,e){ue(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class rr{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new MU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Ty(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Ja(this,this.stsTokenManager.getToken(this.auth,e));return ue(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return OU(this,e)}reload(){return LU(this)}_assign(e){this!==e&&(ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new rr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await df(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Sn(this.auth.app))return Promise.reject(ri(this.auth));const e=await this.getIdToken();return await Ja(this,NU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:h,emailVerified:p,isAnonymous:m,providerData:E,stsTokenManager:v}=n;ue(h&&v,e,"internal-error");const S=Ca.fromJSON(this.name,v);ue(typeof h=="string",e,"internal-error"),ki(r,e.name),ki(i,e.name),ue(typeof p=="boolean",e,"internal-error"),ue(typeof m=="boolean",e,"internal-error"),ki(s,e.name),ki(o,e.name),ki(a,e.name),ki(l,e.name),ki(u,e.name),ki(d,e.name);const _=new rr({uid:h,auth:e,email:i,emailVerified:p,displayName:r,isAnonymous:m,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:S,createdAt:u,lastLoginAt:d});return E&&Array.isArray(E)&&(_.providerData=E.map(y=>({...y}))),l&&(_._redirectEventId=l),_}static async _fromIdTokenResponse(e,n,r=!1){const i=new Ca;i.updateFromServerResponse(n);const s=new rr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await df(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ue(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?qP(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Ca;a.updateFromIdToken(r);const l=new rr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Ty(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT=new Map;function ei(t){fi(t instanceof Function,"Expected a class definition");let e=IT.get(t);return e?(fi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,IT.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}WP.type="NONE";const ST=WP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fh(t,e,n){return`firebase:${t}:${e}:${n}`}class ka{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=fh(this.userKey,i.apiKey,s),this.fullPersistenceKey=fh("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await uf(this.auth,{idToken:e}).catch(()=>{});return n?rr._fromGetAccountInfoResponse(this.auth,n,e):null}return rr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ka(ei(ST),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||ei(ST);const o=fh(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const d=await u._get(o);if(d){let h;if(typeof d=="string"){const p=await uf(e,{idToken:d}).catch(()=>{});if(!p)break;h=await rr._fromGetAccountInfoResponse(e,p,d)}else h=rr._fromJSON(e,d);u!==s&&(a=h),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new ka(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new ka(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AT(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(QP(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(HP(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(JP(e))return"Blackberry";if(XP(e))return"Webos";if(KP(e))return"Safari";if((e.includes("chrome/")||GP(e))&&!e.includes("edge/"))return"Chrome";if(YP(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function HP(t=Tt()){return/firefox\//i.test(t)}function KP(t=Tt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function GP(t=Tt()){return/crios\//i.test(t)}function QP(t=Tt()){return/iemobile/i.test(t)}function YP(t=Tt()){return/android/i.test(t)}function JP(t=Tt()){return/blackberry/i.test(t)}function XP(t=Tt()){return/webos/i.test(t)}function T_(t=Tt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function BU(t=Tt()){var e;return T_(t)&&!!((e=window.navigator)!=null&&e.standalone)}function $U(){return i4()&&document.documentMode===10}function ZP(t=Tt()){return T_(t)||YP(t)||XP(t)||JP(t)||/windows phone/i.test(t)||QP(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eb(t,e=[]){let n;switch(t){case"Browser":n=AT(Tt());break;case"Worker":n=`${AT(Tt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${xl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qU(t,e={}){return Ur(t,"GET","/v2/passwordPolicy",vi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WU=6;class HU{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??WU,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KU{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xT(this),this.idTokenSubscription=new xT(this),this.beforeStateQueue=new zU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=UP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ei(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await ka.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await uf(this,{idToken:e}),r=await rr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(Sn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await df(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=AU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Sn(this.app))return Promise.reject(ri(this));const n=e?Je(e):null;return n&&ue(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Sn(this.app)?Promise.reject(ri(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Sn(this.app)?Promise.reject(ri(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ei(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await qU(this),n=new HU(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Mu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await jU(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ei(e)||this._popupRedirectResolver;ue(n,this,"argument-error"),this.redirectPersistenceManager=await ka.create(this,[ei(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ue(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=eb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Sn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&TU(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Os(t){return Je(t)}class xT{constructor(e){this.auth=e,this.observer=null,this.addObserver=u4(n=>this.observer=n)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function GU(t){mp=t}function tb(t){return mp.loadJS(t)}function QU(){return mp.recaptchaEnterpriseScript}function YU(){return mp.gapiScript}function JU(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class XU{constructor(){this.enterprise=new ZU}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class ZU{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const e3="recaptcha-enterprise",nb="NO_RECAPTCHA";class t3{constructor(e){this.type=e3,this.auth=Os(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{DU(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new kU(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;ET(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(nb)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new XU().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&ET(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=QU();l.length!==0&&(l+=a),tb(l).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function PT(t,e,n,r=!1,i=!1){const s=new t3(t);let o;if(i)o=nb;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function hf(t,e,n,r,i){var s;if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await PT(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await PT(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n3(t,e){const n=pp(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Ro(s,e??{}))return i;fr(i,"already-initialized")}return n.initialize({options:e})}function r3(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ei);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function i3(t,e,n){const r=Os(t);ue(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=rb(e),{host:o,port:a}=s3(e),l=a===null?"":`:${a}`,u={url:`${s}//${o}${l}/`},d=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ue(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ue(Ro(u,r.config.emulator)&&Ro(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,Ns(o)?(g_(`${s}//${o}${l}`),PP("Auth",!0)):o3()}function rb(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function s3(t){const e=rb(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:bT(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:bT(o)}}}function bT(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function o3(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Zr("not implemented")}_getIdTokenResponse(e){return Zr("not implemented")}_linkToIdToken(e,n){return Zr("not implemented")}_getReauthenticationResolver(e){return Zr("not implemented")}}async function a3(t,e){return Ur(t,"POST","/v1/accounts:update",e)}async function l3(t,e){return Ur(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c3(t,e){return Uu(t,"POST","/v1/accounts:signInWithPassword",vi(t,e))}async function u3(t,e){return Ur(t,"POST","/v1/accounts:sendOobCode",vi(t,e))}async function d3(t,e){return u3(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h3(t,e){return Uu(t,"POST","/v1/accounts:signInWithEmailLink",vi(t,e))}async function f3(t,e){return Uu(t,"POST","/v1/accounts:signInWithEmailLink",vi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu extends I_{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new hu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new hu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return hf(e,n,"signInWithPassword",c3);case"emailLink":return h3(e,{email:this._email,oobCode:this._password});default:fr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return hf(e,r,"signUpPassword",l3);case"emailLink":return f3(e,{idToken:n,email:this._email,oobCode:this._password});default:fr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Da(t,e){return Uu(t,"POST","/v1/accounts:signInWithIdp",vi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p3="http://localhost";class ko extends I_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ko(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):fr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const o=new ko(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Da(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Da(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Da(e,n)}buildRequest(){const e={requestUri:p3,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Lu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m3(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function g3(t){const e=pc(mc(t)).link,n=e?pc(mc(e)).deep_link_id:null,r=pc(mc(t)).deep_link_id;return(r?pc(mc(r)).link:null)||r||n||e||t}class S_{constructor(e){const n=pc(mc(e)),r=n.apiKey??null,i=n.oobCode??null,s=m3(n.mode??null);ue(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=g3(e);try{return new S_(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(){this.providerId=Pl.PROVIDER_ID}static credential(e,n){return hu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=S_.parseLink(n);return ue(r,"argument-error"),hu._fromEmailAndCode(e,r.code,r.tenantId)}}Pl.PROVIDER_ID="password";Pl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Pl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju extends ib{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji extends ju{constructor(){super("facebook.com")}static credential(e){return ko._fromParams({providerId:ji.PROVIDER_ID,signInMethod:ji.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ji.credentialFromTaggedObject(e)}static credentialFromError(e){return ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ji.credential(e.oauthAccessToken)}catch{return null}}}ji.FACEBOOK_SIGN_IN_METHOD="facebook.com";ji.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi extends ju{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ko._fromParams({providerId:Bi.PROVIDER_ID,signInMethod:Bi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Bi.credentialFromTaggedObject(e)}static credentialFromError(e){return Bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Bi.credential(n,r)}catch{return null}}}Bi.GOOGLE_SIGN_IN_METHOD="google.com";Bi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i extends ju{constructor(){super("github.com")}static credential(e){return ko._fromParams({providerId:$i.PROVIDER_ID,signInMethod:$i.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $i.credentialFromTaggedObject(e)}static credentialFromError(e){return $i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $i.credential(e.oauthAccessToken)}catch{return null}}}$i.GITHUB_SIGN_IN_METHOD="github.com";$i.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi extends ju{constructor(){super("twitter.com")}static credential(e,n){return ko._fromParams({providerId:zi.PROVIDER_ID,signInMethod:zi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return zi.credentialFromTaggedObject(e)}static credentialFromError(e){return zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return zi.credential(n,r)}catch{return null}}}zi.TWITTER_SIGN_IN_METHOD="twitter.com";zi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y3(t,e){return Uu(t,"POST","/v1/accounts:signUp",vi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await rr._fromIdTokenResponse(e,r,i),o=RT(r);return new Do({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=RT(r);return new Do({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function RT(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff extends Fr{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,ff.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new ff(e,n,r,i)}}function sb(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?ff._fromErrorAndOperation(t,s,e,r):s})}async function v3(t,e,n=!1){const r=await Ja(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Do._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ob(t,e,n=!1){const{auth:r}=t;if(Sn(r.app))return Promise.reject(ri(r));const i="reauthenticate";try{const s=await Ja(t,sb(r,i,e,t),n);ue(s.idToken,r,"internal-error");const o=E_(s.idToken);ue(o,r,"internal-error");const{sub:a}=o;return ue(t.uid===a,r,"user-mismatch"),Do._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&fr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ab(t,e,n=!1){if(Sn(t.app))return Promise.reject(ri(t));const r="signIn",i=await sb(t,r,e),s=await Do._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function _3(t,e){return ab(Os(t),e)}async function U$(t,e){return ob(Je(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lb(t){const e=Os(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function w3(t,e,n){const r=Os(t);await hf(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",d3)}async function CT(t,e,n){if(Sn(t.app))return Promise.reject(ri(t));const r=Os(t),o=await hf(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",y3).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&lb(t),l}),a=await Do._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function E3(t,e,n){return Sn(t.app)?Promise.reject(ri(t)):_3(Je(t),Pl.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&lb(t),r})}function j$(t,e){return T3(Je(t),null,e)}async function T3(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(s.password=n);const o=await Ja(t,a3(r,s));await t._updateTokensIfNecessary(o,!0)}function I3(t,e,n,r){return Je(t).onIdTokenChanged(e,n,r)}function S3(t,e,n){return Je(t).beforeAuthStateChanged(e,n)}function A3(t,e,n,r){return Je(t).onAuthStateChanged(e,n,r)}function kT(t){return Je(t).signOut()}const pf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(pf,"1"),this.storage.removeItem(pf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x3=1e3,P3=10;class ub extends cb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ZP(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);$U()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,P3):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},x3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}ub.type="LOCAL";const b3=ub;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db extends cb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}db.type="SESSION";const hb=db;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R3(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new gp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await R3(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}gp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A_(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C3{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=A_("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const p=h;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nr(){return window}function k3(t){Nr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fb(){return typeof Nr().WorkerGlobalScope<"u"&&typeof Nr().importScripts=="function"}async function D3(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function N3(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function O3(){return fb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pb="firebaseLocalStorageDb",V3=1,mf="firebaseLocalStorage",mb="fbase_key";class Bu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function yp(t,e){return t.transaction([mf],e?"readwrite":"readonly").objectStore(mf)}function M3(){const t=indexedDB.deleteDatabase(pb);return new Bu(t).toPromise()}function Iy(){const t=indexedDB.open(pb,V3);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(mf,{keyPath:mb})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(mf)?e(r):(r.close(),await M3(),e(await Iy()))})})}async function DT(t,e,n){const r=yp(t,!0).put({[mb]:e,value:n});return new Bu(r).toPromise()}async function L3(t,e){const n=yp(t,!1).get(e),r=await new Bu(n).toPromise();return r===void 0?null:r.value}function NT(t,e){const n=yp(t,!0).delete(e);return new Bu(n).toPromise()}const F3=800,U3=3;class gb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Iy(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>U3)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return fb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=gp._getInstance(O3()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await D3(),!this.activeServiceWorker)return;this.sender=new C3(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||N3()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Iy();return await DT(e,pf,"1"),await NT(e,pf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>DT(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>L3(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>NT(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=yp(i,!1).getAll();return new Bu(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),F3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}gb.type="LOCAL";const j3=gb;new Fu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B3(t,e){return e?ei(e):(ue(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_ extends I_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Da(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Da(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Da(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function $3(t){return ab(t.auth,new x_(t),t.bypassAuthState)}function z3(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),ob(n,new x_(t),t.bypassAuthState)}async function q3(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),v3(n,new x_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $3;case"linkViaPopup":case"linkViaRedirect":return q3;case"reauthViaPopup":case"reauthViaRedirect":return z3;default:fr(this.auth,"internal-error")}}resolve(e){fi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){fi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W3=new Fu(2e3,1e4);class Ea extends yb{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Ea.currentPopupAction&&Ea.currentPopupAction.cancel(),Ea.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ue(e,this.auth,"internal-error"),e}async onExecution(){fi(this.filter.length===1,"Popup operations only handle one event");const e=A_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Dr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Dr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ea.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Dr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,W3.get())};e()}}Ea.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H3="pendingRedirect",ph=new Map;class K3 extends yb{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ph.get(this.auth._key());if(!e){try{const r=await G3(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ph.set(this.auth._key(),e)}return this.bypassAuthState||ph.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function G3(t,e){const n=J3(e),r=Y3(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function Q3(t,e){ph.set(t._key(),e)}function Y3(t){return ei(t._redirectPersistence)}function J3(t){return fh(H3,t.config.apiKey,t.name)}async function X3(t,e,n=!1){if(Sn(t.app))return Promise.reject(ri(t));const r=Os(t),i=B3(r,e),o=await new K3(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z3=10*60*1e3;class e6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!t6(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!vb(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Dr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Z3&&this.cachedEventUids.clear(),this.cachedEventUids.has(OT(e))}saveEventToCache(e){this.cachedEventUids.add(OT(e)),this.lastProcessedEventTime=Date.now()}}function OT(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function vb({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function t6(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vb(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n6(t,e={}){return Ur(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,i6=/^https?/;async function s6(t){if(t.config.emulator)return;const{authorizedDomains:e}=await n6(t);for(const n of e)try{if(o6(n))return}catch{}fr(t,"unauthorized-domain")}function o6(t){const e=Ey(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!i6.test(n))return!1;if(r6.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a6=new Fu(3e4,6e4);function VT(){const t=Nr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function l6(t){return new Promise((e,n)=>{var i,s,o;function r(){VT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{VT(),n(Dr(t,"network-request-failed"))},timeout:a6.get()})}if((s=(i=Nr().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((o=Nr().gapi)!=null&&o.load)r();else{const a=JU("iframefcb");return Nr()[a]=()=>{gapi.load?r():n(Dr(t,"network-request-failed"))},tb(`${YU()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw mh=null,e})}let mh=null;function c6(t){return mh=mh||l6(t),mh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u6=new Fu(5e3,15e3),d6="__/auth/iframe",h6="emulator/auth/iframe",f6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},p6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function m6(t){const e=t.config;ue(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?w_(e,h6):`https://${t.config.authDomain}/${d6}`,r={apiKey:e.apiKey,appName:t.name,v:xl},i=p6.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Lu(r).slice(1)}`}async function g6(t){const e=await c6(t),n=Nr().gapi;return ue(n,t,"internal-error"),e.open({where:document.body,url:m6(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:f6,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Dr(t,"network-request-failed"),a=Nr().setTimeout(()=>{s(o)},u6.get());function l(){Nr().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},v6=500,_6=600,w6="_blank",E6="http://localhost";class MT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function T6(t,e,n,r=v6,i=_6){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={...y6,width:r.toString(),height:i.toString(),top:s,left:o},u=Tt().toLowerCase();n&&(a=GP(u)?w6:n),HP(u)&&(e=e||E6,l.scrollbars="yes");const d=Object.entries(l).reduce((p,[m,E])=>`${p}${m}=${E},`,"");if(BU(u)&&a!=="_self")return I6(e||"",a),new MT(null);const h=window.open(e||"",a,d);ue(h,t,"popup-blocked");try{h.focus()}catch{}return new MT(h)}function I6(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S6="__/auth/handler",A6="emulator/auth/handler",x6=encodeURIComponent("fac");async function LT(t,e,n,r,i,s){ue(t.config.authDomain,t,"auth-domain-config-required"),ue(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:xl,eventId:i};if(e instanceof ib){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",c4(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))o[d]=h}if(e instanceof ju){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),u=l?`#${x6}=${encodeURIComponent(l)}`:"";return`${P6(t)}?${Lu(a).slice(1)}${u}`}function P6({config:t}){return t.emulator?w_(t,A6):`https://${t.authDomain}/${S6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qm="webStorageSupport";class b6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hb,this._completeRedirectFn=X3,this._overrideRedirectResult=Q3}async _openPopup(e,n,r,i){var o;fi((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await LT(e,n,r,Ey(),i);return T6(e,s,A_())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await LT(e,n,r,Ey(),i);return k3(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(fi(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await g6(e),r=new e6(e);return n.register("authEvent",i=>(ue(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Qm,{type:Qm},i=>{var o;const s=(o=i==null?void 0:i[0])==null?void 0:o[Qm];s!==void 0&&n(!!s),fr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=s6(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return ZP()||KP()||T_()}}const R6=b6;var FT="@firebase/auth",UT="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k6(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function D6(t){Co(new ws("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ue(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:eb(t)},u=new KU(r,i,s,l);return r3(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Co(new ws("auth-internal",e=>{const n=Os(e.getProvider("auth").getImmediate());return(r=>new C6(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),kr(FT,UT,k6(t)),kr(FT,UT,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N6=5*60,O6=xP("authIdTokenMaxAge")||N6;let jT=null;const V6=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>O6)return;const i=n==null?void 0:n.token;jT!==i&&(jT=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function M6(t=VP()){const e=pp(t,"auth");if(e.isInitialized())return e.getImmediate();const n=n3(t,{popupRedirectResolver:R6,persistence:[j3,b3,hb]}),r=xP("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=V6(s.toString());S3(n,o,()=>o(n.currentUser)),I3(n,a=>o(a))}}const i=SP("auth");return i&&i3(n,`http://${i}`),n}function L6(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}GU({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Dr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",L6().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});D6("Browser");var F6="firebase",U6="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kr(F6,U6,"app");var BT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ds,_b;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,w){function x(){}x.prototype=w.prototype,T.D=w.prototype,T.prototype=new x,T.prototype.constructor=T,T.C=function(P,C,k){for(var R=Array(arguments.length-2),W=2;W<arguments.length;W++)R[W-2]=arguments[W];return w.prototype[C].apply(P,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,w,x){x||(x=0);var P=Array(16);if(typeof w=="string")for(var C=0;16>C;++C)P[C]=w.charCodeAt(x++)|w.charCodeAt(x++)<<8|w.charCodeAt(x++)<<16|w.charCodeAt(x++)<<24;else for(C=0;16>C;++C)P[C]=w[x++]|w[x++]<<8|w[x++]<<16|w[x++]<<24;w=T.g[0],x=T.g[1],C=T.g[2];var k=T.g[3],R=w+(k^x&(C^k))+P[0]+3614090360&4294967295;w=x+(R<<7&4294967295|R>>>25),R=k+(C^w&(x^C))+P[1]+3905402710&4294967295,k=w+(R<<12&4294967295|R>>>20),R=C+(x^k&(w^x))+P[2]+606105819&4294967295,C=k+(R<<17&4294967295|R>>>15),R=x+(w^C&(k^w))+P[3]+3250441966&4294967295,x=C+(R<<22&4294967295|R>>>10),R=w+(k^x&(C^k))+P[4]+4118548399&4294967295,w=x+(R<<7&4294967295|R>>>25),R=k+(C^w&(x^C))+P[5]+1200080426&4294967295,k=w+(R<<12&4294967295|R>>>20),R=C+(x^k&(w^x))+P[6]+2821735955&4294967295,C=k+(R<<17&4294967295|R>>>15),R=x+(w^C&(k^w))+P[7]+4249261313&4294967295,x=C+(R<<22&4294967295|R>>>10),R=w+(k^x&(C^k))+P[8]+1770035416&4294967295,w=x+(R<<7&4294967295|R>>>25),R=k+(C^w&(x^C))+P[9]+2336552879&4294967295,k=w+(R<<12&4294967295|R>>>20),R=C+(x^k&(w^x))+P[10]+4294925233&4294967295,C=k+(R<<17&4294967295|R>>>15),R=x+(w^C&(k^w))+P[11]+2304563134&4294967295,x=C+(R<<22&4294967295|R>>>10),R=w+(k^x&(C^k))+P[12]+1804603682&4294967295,w=x+(R<<7&4294967295|R>>>25),R=k+(C^w&(x^C))+P[13]+4254626195&4294967295,k=w+(R<<12&4294967295|R>>>20),R=C+(x^k&(w^x))+P[14]+2792965006&4294967295,C=k+(R<<17&4294967295|R>>>15),R=x+(w^C&(k^w))+P[15]+1236535329&4294967295,x=C+(R<<22&4294967295|R>>>10),R=w+(C^k&(x^C))+P[1]+4129170786&4294967295,w=x+(R<<5&4294967295|R>>>27),R=k+(x^C&(w^x))+P[6]+3225465664&4294967295,k=w+(R<<9&4294967295|R>>>23),R=C+(w^x&(k^w))+P[11]+643717713&4294967295,C=k+(R<<14&4294967295|R>>>18),R=x+(k^w&(C^k))+P[0]+3921069994&4294967295,x=C+(R<<20&4294967295|R>>>12),R=w+(C^k&(x^C))+P[5]+3593408605&4294967295,w=x+(R<<5&4294967295|R>>>27),R=k+(x^C&(w^x))+P[10]+38016083&4294967295,k=w+(R<<9&4294967295|R>>>23),R=C+(w^x&(k^w))+P[15]+3634488961&4294967295,C=k+(R<<14&4294967295|R>>>18),R=x+(k^w&(C^k))+P[4]+3889429448&4294967295,x=C+(R<<20&4294967295|R>>>12),R=w+(C^k&(x^C))+P[9]+568446438&4294967295,w=x+(R<<5&4294967295|R>>>27),R=k+(x^C&(w^x))+P[14]+3275163606&4294967295,k=w+(R<<9&4294967295|R>>>23),R=C+(w^x&(k^w))+P[3]+4107603335&4294967295,C=k+(R<<14&4294967295|R>>>18),R=x+(k^w&(C^k))+P[8]+1163531501&4294967295,x=C+(R<<20&4294967295|R>>>12),R=w+(C^k&(x^C))+P[13]+2850285829&4294967295,w=x+(R<<5&4294967295|R>>>27),R=k+(x^C&(w^x))+P[2]+4243563512&4294967295,k=w+(R<<9&4294967295|R>>>23),R=C+(w^x&(k^w))+P[7]+1735328473&4294967295,C=k+(R<<14&4294967295|R>>>18),R=x+(k^w&(C^k))+P[12]+2368359562&4294967295,x=C+(R<<20&4294967295|R>>>12),R=w+(x^C^k)+P[5]+4294588738&4294967295,w=x+(R<<4&4294967295|R>>>28),R=k+(w^x^C)+P[8]+2272392833&4294967295,k=w+(R<<11&4294967295|R>>>21),R=C+(k^w^x)+P[11]+1839030562&4294967295,C=k+(R<<16&4294967295|R>>>16),R=x+(C^k^w)+P[14]+4259657740&4294967295,x=C+(R<<23&4294967295|R>>>9),R=w+(x^C^k)+P[1]+2763975236&4294967295,w=x+(R<<4&4294967295|R>>>28),R=k+(w^x^C)+P[4]+1272893353&4294967295,k=w+(R<<11&4294967295|R>>>21),R=C+(k^w^x)+P[7]+4139469664&4294967295,C=k+(R<<16&4294967295|R>>>16),R=x+(C^k^w)+P[10]+3200236656&4294967295,x=C+(R<<23&4294967295|R>>>9),R=w+(x^C^k)+P[13]+681279174&4294967295,w=x+(R<<4&4294967295|R>>>28),R=k+(w^x^C)+P[0]+3936430074&4294967295,k=w+(R<<11&4294967295|R>>>21),R=C+(k^w^x)+P[3]+3572445317&4294967295,C=k+(R<<16&4294967295|R>>>16),R=x+(C^k^w)+P[6]+76029189&4294967295,x=C+(R<<23&4294967295|R>>>9),R=w+(x^C^k)+P[9]+3654602809&4294967295,w=x+(R<<4&4294967295|R>>>28),R=k+(w^x^C)+P[12]+3873151461&4294967295,k=w+(R<<11&4294967295|R>>>21),R=C+(k^w^x)+P[15]+530742520&4294967295,C=k+(R<<16&4294967295|R>>>16),R=x+(C^k^w)+P[2]+3299628645&4294967295,x=C+(R<<23&4294967295|R>>>9),R=w+(C^(x|~k))+P[0]+4096336452&4294967295,w=x+(R<<6&4294967295|R>>>26),R=k+(x^(w|~C))+P[7]+1126891415&4294967295,k=w+(R<<10&4294967295|R>>>22),R=C+(w^(k|~x))+P[14]+2878612391&4294967295,C=k+(R<<15&4294967295|R>>>17),R=x+(k^(C|~w))+P[5]+4237533241&4294967295,x=C+(R<<21&4294967295|R>>>11),R=w+(C^(x|~k))+P[12]+1700485571&4294967295,w=x+(R<<6&4294967295|R>>>26),R=k+(x^(w|~C))+P[3]+2399980690&4294967295,k=w+(R<<10&4294967295|R>>>22),R=C+(w^(k|~x))+P[10]+4293915773&4294967295,C=k+(R<<15&4294967295|R>>>17),R=x+(k^(C|~w))+P[1]+2240044497&4294967295,x=C+(R<<21&4294967295|R>>>11),R=w+(C^(x|~k))+P[8]+1873313359&4294967295,w=x+(R<<6&4294967295|R>>>26),R=k+(x^(w|~C))+P[15]+4264355552&4294967295,k=w+(R<<10&4294967295|R>>>22),R=C+(w^(k|~x))+P[6]+2734768916&4294967295,C=k+(R<<15&4294967295|R>>>17),R=x+(k^(C|~w))+P[13]+1309151649&4294967295,x=C+(R<<21&4294967295|R>>>11),R=w+(C^(x|~k))+P[4]+4149444226&4294967295,w=x+(R<<6&4294967295|R>>>26),R=k+(x^(w|~C))+P[11]+3174756917&4294967295,k=w+(R<<10&4294967295|R>>>22),R=C+(w^(k|~x))+P[2]+718787259&4294967295,C=k+(R<<15&4294967295|R>>>17),R=x+(k^(C|~w))+P[9]+3951481745&4294967295,T.g[0]=T.g[0]+w&4294967295,T.g[1]=T.g[1]+(C+(R<<21&4294967295|R>>>11))&4294967295,T.g[2]=T.g[2]+C&4294967295,T.g[3]=T.g[3]+k&4294967295}r.prototype.u=function(T,w){w===void 0&&(w=T.length);for(var x=w-this.blockSize,P=this.B,C=this.h,k=0;k<w;){if(C==0)for(;k<=x;)i(this,T,k),k+=this.blockSize;if(typeof T=="string"){for(;k<w;)if(P[C++]=T.charCodeAt(k++),C==this.blockSize){i(this,P),C=0;break}}else for(;k<w;)if(P[C++]=T[k++],C==this.blockSize){i(this,P),C=0;break}}this.h=C,this.o+=w},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var w=1;w<T.length-8;++w)T[w]=0;var x=8*this.o;for(w=T.length-8;w<T.length;++w)T[w]=x&255,x/=256;for(this.u(T),T=Array(16),w=x=0;4>w;++w)for(var P=0;32>P;P+=8)T[x++]=this.g[w]>>>P&255;return T};function s(T,w){var x=a;return Object.prototype.hasOwnProperty.call(x,T)?x[T]:x[T]=w(T)}function o(T,w){this.h=w;for(var x=[],P=!0,C=T.length-1;0<=C;C--){var k=T[C]|0;P&&k==w||(x[C]=k,P=!1)}this.g=x}var a={};function l(T){return-128<=T&&128>T?s(T,function(w){return new o([w|0],0>w?-1:0)}):new o([T|0],0>T?-1:0)}function u(T){if(isNaN(T)||!isFinite(T))return h;if(0>T)return S(u(-T));for(var w=[],x=1,P=0;T>=x;P++)w[P]=T/x|0,x*=4294967296;return new o(w,0)}function d(T,w){if(T.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(T.charAt(0)=="-")return S(d(T.substring(1),w));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=u(Math.pow(w,8)),P=h,C=0;C<T.length;C+=8){var k=Math.min(8,T.length-C),R=parseInt(T.substring(C,C+k),w);8>k?(k=u(Math.pow(w,k)),P=P.j(k).add(u(R))):(P=P.j(x),P=P.add(u(R)))}return P}var h=l(0),p=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(v(this))return-S(this).m();for(var T=0,w=1,x=0;x<this.g.length;x++){var P=this.i(x);T+=(0<=P?P:4294967296+P)*w,w*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(E(this))return"0";if(v(this))return"-"+S(this).toString(T);for(var w=u(Math.pow(T,6)),x=this,P="";;){var C=D(x,w).g;x=_(x,C.j(w));var k=((0<x.g.length?x.g[0]:x.h)>>>0).toString(T);if(x=C,E(x))return k+P;for(;6>k.length;)k="0"+k;P=k+P}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function E(T){if(T.h!=0)return!1;for(var w=0;w<T.g.length;w++)if(T.g[w]!=0)return!1;return!0}function v(T){return T.h==-1}t.l=function(T){return T=_(this,T),v(T)?-1:E(T)?0:1};function S(T){for(var w=T.g.length,x=[],P=0;P<w;P++)x[P]=~T.g[P];return new o(x,~T.h).add(p)}t.abs=function(){return v(this)?S(this):this},t.add=function(T){for(var w=Math.max(this.g.length,T.g.length),x=[],P=0,C=0;C<=w;C++){var k=P+(this.i(C)&65535)+(T.i(C)&65535),R=(k>>>16)+(this.i(C)>>>16)+(T.i(C)>>>16);P=R>>>16,k&=65535,R&=65535,x[C]=R<<16|k}return new o(x,x[x.length-1]&-2147483648?-1:0)};function _(T,w){return T.add(S(w))}t.j=function(T){if(E(this)||E(T))return h;if(v(this))return v(T)?S(this).j(S(T)):S(S(this).j(T));if(v(T))return S(this.j(S(T)));if(0>this.l(m)&&0>T.l(m))return u(this.m()*T.m());for(var w=this.g.length+T.g.length,x=[],P=0;P<2*w;P++)x[P]=0;for(P=0;P<this.g.length;P++)for(var C=0;C<T.g.length;C++){var k=this.i(P)>>>16,R=this.i(P)&65535,W=T.i(C)>>>16,X=T.i(C)&65535;x[2*P+2*C]+=R*X,y(x,2*P+2*C),x[2*P+2*C+1]+=k*X,y(x,2*P+2*C+1),x[2*P+2*C+1]+=R*W,y(x,2*P+2*C+1),x[2*P+2*C+2]+=k*W,y(x,2*P+2*C+2)}for(P=0;P<w;P++)x[P]=x[2*P+1]<<16|x[2*P];for(P=w;P<2*w;P++)x[P]=0;return new o(x,0)};function y(T,w){for(;(T[w]&65535)!=T[w];)T[w+1]+=T[w]>>>16,T[w]&=65535,w++}function I(T,w){this.g=T,this.h=w}function D(T,w){if(E(w))throw Error("division by zero");if(E(T))return new I(h,h);if(v(T))return w=D(S(T),w),new I(S(w.g),S(w.h));if(v(w))return w=D(T,S(w)),new I(S(w.g),w.h);if(30<T.g.length){if(v(T)||v(w))throw Error("slowDivide_ only works with positive integers.");for(var x=p,P=w;0>=P.l(T);)x=N(x),P=N(P);var C=V(x,1),k=V(P,1);for(P=V(P,2),x=V(x,2);!E(P);){var R=k.add(P);0>=R.l(T)&&(C=C.add(x),k=R),P=V(P,1),x=V(x,1)}return w=_(T,C.j(w)),new I(C,w)}for(C=h;0<=T.l(w);){for(x=Math.max(1,Math.floor(T.m()/w.m())),P=Math.ceil(Math.log(x)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),k=u(x),R=k.j(w);v(R)||0<R.l(T);)x-=P,k=u(x),R=k.j(w);E(k)&&(k=p),C=C.add(k),T=_(T,R)}return new I(C,T)}t.A=function(T){return D(this,T).h},t.and=function(T){for(var w=Math.max(this.g.length,T.g.length),x=[],P=0;P<w;P++)x[P]=this.i(P)&T.i(P);return new o(x,this.h&T.h)},t.or=function(T){for(var w=Math.max(this.g.length,T.g.length),x=[],P=0;P<w;P++)x[P]=this.i(P)|T.i(P);return new o(x,this.h|T.h)},t.xor=function(T){for(var w=Math.max(this.g.length,T.g.length),x=[],P=0;P<w;P++)x[P]=this.i(P)^T.i(P);return new o(x,this.h^T.h)};function N(T){for(var w=T.g.length+1,x=[],P=0;P<w;P++)x[P]=T.i(P)<<1|T.i(P-1)>>>31;return new o(x,T.h)}function V(T,w){var x=w>>5;w%=32;for(var P=T.g.length-x,C=[],k=0;k<P;k++)C[k]=0<w?T.i(k+x)>>>w|T.i(k+x+1)<<32-w:T.i(k+x);return new o(C,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,_b=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,ds=o}).apply(typeof BT<"u"?BT:typeof self<"u"?self:typeof window<"u"?window:{});var qd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wb,gc,Eb,gh,Sy,Tb,Ib,Sb;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,f,g){return c==Array.prototype||c==Object.prototype||(c[f]=g.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof qd=="object"&&qd];for(var f=0;f<c.length;++f){var g=c[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function i(c,f){if(f)e:{var g=r;c=c.split(".");for(var A=0;A<c.length-1;A++){var L=c[A];if(!(L in g))break e;g=g[L]}c=c[c.length-1],A=g[c],f=f(A),f!=A&&f!=null&&e(g,c,{configurable:!0,writable:!0,value:f})}}function s(c,f){c instanceof String&&(c+="");var g=0,A=!1,L={next:function(){if(!A&&g<c.length){var F=g++;return{value:f(F,c[F]),done:!1}}return A=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(c){return c||function(){return s(this,function(f,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(c){var f=typeof c;return f=f!="object"?f:c?Array.isArray(c)?"array":f:"null",f=="array"||f=="object"&&typeof c.length=="number"}function u(c){var f=typeof c;return f=="object"&&c!=null||f=="function"}function d(c,f,g){return c.call.apply(c.bind,arguments)}function h(c,f,g){if(!c)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,A),c.apply(f,L)}}return function(){return c.apply(f,arguments)}}function p(c,f,g){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,p.apply(null,arguments)}function m(c,f){var g=Array.prototype.slice.call(arguments,1);return function(){var A=g.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function E(c,f){function g(){}g.prototype=f.prototype,c.aa=f.prototype,c.prototype=new g,c.prototype.constructor=c,c.Qb=function(A,L,F){for(var Q=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)Q[Me-2]=arguments[Me];return f.prototype[L].apply(A,Q)}}function v(c){const f=c.length;if(0<f){const g=Array(f);for(let A=0;A<f;A++)g[A]=c[A];return g}return[]}function S(c,f){for(let g=1;g<arguments.length;g++){const A=arguments[g];if(l(A)){const L=c.length||0,F=A.length||0;c.length=L+F;for(let Q=0;Q<F;Q++)c[L+Q]=A[Q]}else c.push(A)}}class _{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function y(c){return/^[\s\xa0]*$/.test(c)}function I(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function D(c){return D[" "](c),c}D[" "]=function(){};var N=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function V(c,f,g){for(const A in c)f.call(g,c[A],A,c)}function T(c,f){for(const g in c)f.call(void 0,c[g],g,c)}function w(c){const f={};for(const g in c)f[g]=c[g];return f}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(c,f){let g,A;for(let L=1;L<arguments.length;L++){A=arguments[L];for(g in A)c[g]=A[g];for(let F=0;F<x.length;F++)g=x[F],Object.prototype.hasOwnProperty.call(A,g)&&(c[g]=A[g])}}function C(c){var f=1;c=c.split(":");const g=[];for(;0<f&&c.length;)g.push(c.shift()),f--;return c.length&&g.push(c.join(":")),g}function k(c){a.setTimeout(()=>{throw c},0)}function R(){var c=U;let f=null;return c.g&&(f=c.g,c.g=c.g.next,c.g||(c.h=null),f.next=null),f}class W{constructor(){this.h=this.g=null}add(f,g){const A=X.get();A.set(f,g),this.h?this.h.next=A:this.g=A,this.h=A}}var X=new _(()=>new Z,c=>c.reset());class Z{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,B=!1,U=new W,H=()=>{const c=a.Promise.resolve(void 0);ie=()=>{c.then(ae)}};var ae=()=>{for(var c;c=R();){try{c.h.call(c.g)}catch(g){k(g)}var f=X;f.j(c),100>f.h&&(f.h++,c.next=f.g,f.g=c)}B=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function se(c,f){this.type=c,this.g=this.target=f,this.defaultPrevented=!1}se.prototype.h=function(){this.defaultPrevented=!0};var ce=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,f=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const g=()=>{};a.addEventListener("test",g,f),a.removeEventListener("test",g,f)}catch{}return c}();function Pe(c,f){if(se.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var g=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=f,f=c.relatedTarget){if(N){e:{try{D(f.nodeName);var L=!0;break e}catch{}L=!1}L||(f=null)}}else g=="mouseover"?f=c.fromElement:g=="mouseout"&&(f=c.toElement);this.relatedTarget=f,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:je[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Pe.aa.h.call(this)}}E(Pe,se);var je={2:"touch",3:"pen",4:"mouse"};Pe.prototype.h=function(){Pe.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var me="closure_listenable_"+(1e6*Math.random()|0),nt=0;function vn(c,f,g,A,L){this.listener=c,this.proxy=null,this.src=f,this.type=g,this.capture=!!A,this.ha=L,this.key=++nt,this.da=this.fa=!1}function Vn(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function _n(c){this.src=c,this.g={},this.h=0}_n.prototype.add=function(c,f,g,A,L){var F=c.toString();c=this.g[F],c||(c=this.g[F]=[],this.h++);var Q=Mn(c,f,A,L);return-1<Q?(f=c[Q],g||(f.fa=!1)):(f=new vn(f,this.src,F,!!A,L),f.fa=g,c.push(f)),f};function pr(c,f){var g=f.type;if(g in c.g){var A=c.g[g],L=Array.prototype.indexOf.call(A,f,void 0),F;(F=0<=L)&&Array.prototype.splice.call(A,L,1),F&&(Vn(f),c.g[g].length==0&&(delete c.g[g],c.h--))}}function Mn(c,f,g,A){for(var L=0;L<c.length;++L){var F=c[L];if(!F.da&&F.listener==f&&F.capture==!!g&&F.ha==A)return L}return-1}var Ei="closure_lm_"+(1e6*Math.random()|0),js={};function Bs(c,f,g,A,L){if(Array.isArray(f)){for(var F=0;F<f.length;F++)Bs(c,f[F],g,A,L);return null}return g=rd(g),c&&c[me]?c.K(f,g,u(A)?!!A.capture:!!A,L):Vl(c,f,g,!1,A,L)}function Vl(c,f,g,A,L,F){if(!f)throw Error("Invalid event type");var Q=u(L)?!!L.capture:!!L,Me=Wn(c);if(Me||(c[Ei]=Me=new _n(c)),g=Me.add(f,g,A,Q,F),g.proxy)return g;if(A=$s(),g.proxy=A,A.src=c,A.listener=g,c.addEventListener)ce||(L=Q),L===void 0&&(L=!1),c.addEventListener(f.toString(),A,L);else if(c.attachEvent)c.attachEvent(Ti(f.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return g}function $s(){function c(g){return f.call(c.src,c.listener,g)}const f=nd;return c}function Br(c,f,g,A,L){if(Array.isArray(f))for(var F=0;F<f.length;F++)Br(c,f[F],g,A,L);else A=u(A)?!!A.capture:!!A,g=rd(g),c&&c[me]?(c=c.i,f=String(f).toString(),f in c.g&&(F=c.g[f],g=Mn(F,g,A,L),-1<g&&(Vn(F[g]),Array.prototype.splice.call(F,g,1),F.length==0&&(delete c.g[f],c.h--)))):c&&(c=Wn(c))&&(f=c.g[f.toString()],c=-1,f&&(c=Mn(f,g,A,L)),(g=-1<c?f[c]:null)&&zo(g))}function zo(c){if(typeof c!="number"&&c&&!c.da){var f=c.src;if(f&&f[me])pr(f.i,c);else{var g=c.type,A=c.proxy;f.removeEventListener?f.removeEventListener(g,A,c.capture):f.detachEvent?f.detachEvent(Ti(g),A):f.addListener&&f.removeListener&&f.removeListener(A),(g=Wn(f))?(pr(g,c),g.h==0&&(g.src=null,f[Ei]=null)):Vn(c)}}}function Ti(c){return c in js?js[c]:js[c]="on"+c}function nd(c,f){if(c.da)c=!0;else{f=new Pe(f,this);var g=c.listener,A=c.ha||c.src;c.fa&&zo(c),c=g.call(A,f)}return c}function Wn(c){return c=c[Ei],c instanceof _n?c:null}var Ml="__closure_events_fn_"+(1e9*Math.random()>>>0);function rd(c){return typeof c=="function"?c:(c[Ml]||(c[Ml]=function(f){return c.handleEvent(f)}),c[Ml])}function Ce(){J.call(this),this.i=new _n(this),this.M=this,this.F=null}E(Ce,J),Ce.prototype[me]=!0,Ce.prototype.removeEventListener=function(c,f,g,A){Br(this,c,f,g,A)};function rt(c,f){var g,A=c.F;if(A)for(g=[];A;A=A.F)g.push(A);if(c=c.M,A=f.type||f,typeof f=="string")f=new se(f,c);else if(f instanceof se)f.target=f.target||c;else{var L=f;f=new se(A,c),P(f,L)}if(L=!0,g)for(var F=g.length-1;0<=F;F--){var Q=f.g=g[F];L=qo(Q,A,!0,f)&&L}if(Q=f.g=c,L=qo(Q,A,!0,f)&&L,L=qo(Q,A,!1,f)&&L,g)for(F=0;F<g.length;F++)Q=f.g=g[F],L=qo(Q,A,!1,f)&&L}Ce.prototype.N=function(){if(Ce.aa.N.call(this),this.i){var c=this.i,f;for(f in c.g){for(var g=c.g[f],A=0;A<g.length;A++)Vn(g[A]);delete c.g[f],c.h--}}this.F=null},Ce.prototype.K=function(c,f,g,A){return this.i.add(String(c),f,!1,g,A)},Ce.prototype.L=function(c,f,g,A){return this.i.add(String(c),f,!0,g,A)};function qo(c,f,g,A){if(f=c.i.g[String(f)],!f)return!0;f=f.concat();for(var L=!0,F=0;F<f.length;++F){var Q=f[F];if(Q&&!Q.da&&Q.capture==g){var Me=Q.listener,Ct=Q.ha||Q.src;Q.fa&&pr(c.i,Q),L=Me.call(Ct,A)!==!1&&L}}return L&&!A.defaultPrevented}function id(c,f,g){if(typeof c=="function")g&&(c=p(c,g));else if(c&&typeof c.handleEvent=="function")c=p(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(c,f||0)}function zs(c){c.g=id(()=>{c.g=null,c.i&&(c.i=!1,zs(c))},c.l);const f=c.h;c.h=null,c.m.apply(null,f)}class Kp extends J{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:zs(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ii(c){J.call(this),this.h=c,this.g={}}E(Ii,J);var Wo=[];function $r(c){V(c.g,function(f,g){this.g.hasOwnProperty(g)&&zo(f)},c),c.g={}}Ii.prototype.N=function(){Ii.aa.N.call(this),$r(this)},Ii.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ho=a.JSON.stringify,Si=a.JSON.parse,Gp=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Ll(){}Ll.prototype.h=null;function Fl(c){return c.h||(c.h=c.i())}function Ul(){}var qs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ws(){se.call(this,"d")}E(Ws,se);function Ln(){se.call(this,"c")}E(Ln,se);var zr={},de=null;function Ee(){return de=de||new Ce}zr.La="serverreachability";function Ve(c){se.call(this,zr.La,c)}E(Ve,se);function bt(c){const f=Ee();rt(f,new Ve(f))}zr.STAT_EVENT="statevent";function sn(c,f){se.call(this,zr.STAT_EVENT,c),this.stat=f}E(sn,se);function He(c){const f=Ee();rt(f,new sn(f,c))}zr.Ma="timingevent";function mr(c,f){se.call(this,zr.Ma,c),this.size=f}E(mr,se);function Rt(c,f){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},f)}function on(){this.g=!0}on.prototype.xa=function(){this.g=!1};function ik(c,f,g,A,L,F){c.info(function(){if(c.g)if(F)for(var Q="",Me=F.split("&"),Ct=0;Ct<Me.length;Ct++){var Se=Me[Ct].split("=");if(1<Se.length){var Vt=Se[0];Se=Se[1];var Mt=Vt.split("_");Q=2<=Mt.length&&Mt[1]=="type"?Q+(Vt+"="+Se+"&"):Q+(Vt+"=redacted&")}}else Q=null;else Q=F;return"XMLHTTP REQ ("+A+") [attempt "+L+"]: "+f+`
`+g+`
`+Q})}function sk(c,f,g,A,L,F,Q){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+L+"]: "+f+`
`+g+`
`+F+" "+Q})}function Ko(c,f,g,A){c.info(function(){return"XMLHTTP TEXT ("+f+"): "+ak(c,g)+(A?" "+A:"")})}function ok(c,f){c.info(function(){return"TIMEOUT: "+f})}on.prototype.info=function(){};function ak(c,f){if(!c.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(c=0;c<g.length;c++)if(Array.isArray(g[c])){var A=g[c];if(!(2>A.length)){var L=A[1];if(Array.isArray(L)&&!(1>L.length)){var F=L[0];if(F!="noop"&&F!="stop"&&F!="close")for(var Q=1;Q<L.length;Q++)L[Q]=""}}}}return Ho(g)}catch{return f}}var sd={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},xw={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Qp;function od(){}E(od,Ll),od.prototype.g=function(){return new XMLHttpRequest},od.prototype.i=function(){return{}},Qp=new od;function Ai(c,f,g,A){this.j=c,this.i=f,this.l=g,this.R=A||1,this.U=new Ii(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Pw}function Pw(){this.i=null,this.g="",this.h=!1}var bw={},Yp={};function Jp(c,f,g){c.L=1,c.v=ud(qr(f)),c.m=g,c.P=!0,Rw(c,null)}function Rw(c,f){c.F=Date.now(),ad(c),c.A=qr(c.v);var g=c.A,A=c.R;Array.isArray(A)||(A=[String(A)]),zw(g.i,"t",A),c.C=0,g=c.j.J,c.h=new Pw,c.g=a0(c.j,g?f:null,!c.m),0<c.O&&(c.M=new Kp(p(c.Y,c,c.g),c.O)),f=c.U,g=c.g,A=c.ca;var L="readystatechange";Array.isArray(L)||(L&&(Wo[0]=L.toString()),L=Wo);for(var F=0;F<L.length;F++){var Q=Bs(g,L[F],A||f.handleEvent,!1,f.h||f);if(!Q)break;f.g[Q.key]=Q}f=c.H?w(c.H):{},c.m?(c.u||(c.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,f)):(c.u="GET",c.g.ea(c.A,c.u,null,f)),bt(),ik(c.i,c.u,c.A,c.l,c.R,c.m)}Ai.prototype.ca=function(c){c=c.target;const f=this.M;f&&Wr(c)==3?f.j():this.Y(c)},Ai.prototype.Y=function(c){try{if(c==this.g)e:{const Mt=Wr(this.g);var f=this.g.Ba();const Yo=this.g.Z();if(!(3>Mt)&&(Mt!=3||this.g&&(this.h.h||this.g.oa()||Yw(this.g)))){this.J||Mt!=4||f==7||(f==8||0>=Yo?bt(3):bt(2)),Xp(this);var g=this.g.Z();this.X=g;t:if(Cw(this)){var A=Yw(this.g);c="";var L=A.length,F=Wr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Hs(this),jl(this);var Q="";break t}this.h.i=new a.TextDecoder}for(f=0;f<L;f++)this.h.h=!0,c+=this.h.i.decode(A[f],{stream:!(F&&f==L-1)});A.length=0,this.h.g+=c,this.C=0,Q=this.h.g}else Q=this.g.oa();if(this.o=g==200,sk(this.i,this.u,this.A,this.l,this.R,Mt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var Me,Ct=this.g;if((Me=Ct.g?Ct.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(Me)){var Se=Me;break t}}Se=null}if(g=Se)Ko(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Zp(this,g);else{this.o=!1,this.s=3,He(12),Hs(this),jl(this);break e}}if(this.P){g=!0;let Hn;for(;!this.J&&this.C<Q.length;)if(Hn=lk(this,Q),Hn==Yp){Mt==4&&(this.s=4,He(14),g=!1),Ko(this.i,this.l,null,"[Incomplete Response]");break}else if(Hn==bw){this.s=4,He(15),Ko(this.i,this.l,Q,"[Invalid Chunk]"),g=!1;break}else Ko(this.i,this.l,Hn,null),Zp(this,Hn);if(Cw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Mt!=4||Q.length!=0||this.h.h||(this.s=1,He(16),g=!1),this.o=this.o&&g,!g)Ko(this.i,this.l,Q,"[Invalid Chunked Response]"),Hs(this),jl(this);else if(0<Q.length&&!this.W){this.W=!0;var Vt=this.j;Vt.g==this&&Vt.ba&&!Vt.M&&(Vt.j.info("Great, no buffering proxy detected. Bytes received: "+Q.length),sm(Vt),Vt.M=!0,He(11))}}else Ko(this.i,this.l,Q,null),Zp(this,Q);Mt==4&&Hs(this),this.o&&!this.J&&(Mt==4?r0(this.j,this):(this.o=!1,ad(this)))}else Ak(this.g),g==400&&0<Q.indexOf("Unknown SID")?(this.s=3,He(12)):(this.s=0,He(13)),Hs(this),jl(this)}}}catch{}finally{}};function Cw(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function lk(c,f){var g=c.C,A=f.indexOf(`
`,g);return A==-1?Yp:(g=Number(f.substring(g,A)),isNaN(g)?bw:(A+=1,A+g>f.length?Yp:(f=f.slice(A,A+g),c.C=A+g,f)))}Ai.prototype.cancel=function(){this.J=!0,Hs(this)};function ad(c){c.S=Date.now()+c.I,kw(c,c.I)}function kw(c,f){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Rt(p(c.ba,c),f)}function Xp(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Ai.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(ok(this.i,this.A),this.L!=2&&(bt(),He(17)),Hs(this),this.s=2,jl(this)):kw(this,this.S-c)};function jl(c){c.j.G==0||c.J||r0(c.j,c)}function Hs(c){Xp(c);var f=c.M;f&&typeof f.ma=="function"&&f.ma(),c.M=null,$r(c.U),c.g&&(f=c.g,c.g=null,f.abort(),f.ma())}function Zp(c,f){try{var g=c.j;if(g.G!=0&&(g.g==c||em(g.h,c))){if(!c.K&&em(g.h,c)&&g.G==3){try{var A=g.Da.g.parse(f)}catch{A=null}if(Array.isArray(A)&&A.length==3){var L=A;if(L[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<c.F)gd(g),pd(g);else break e;im(g),He(18)}}else g.za=L[1],0<g.za-g.T&&37500>L[2]&&g.F&&g.v==0&&!g.C&&(g.C=Rt(p(g.Za,g),6e3));if(1>=Ow(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else Gs(g,11)}else if((c.K||g.g==c)&&gd(g),!y(f))for(L=g.Da.g.parse(f),f=0;f<L.length;f++){let Se=L[f];if(g.T=Se[0],Se=Se[1],g.G==2)if(Se[0]=="c"){g.K=Se[1],g.ia=Se[2];const Vt=Se[3];Vt!=null&&(g.la=Vt,g.j.info("VER="+g.la));const Mt=Se[4];Mt!=null&&(g.Aa=Mt,g.j.info("SVER="+g.Aa));const Yo=Se[5];Yo!=null&&typeof Yo=="number"&&0<Yo&&(A=1.5*Yo,g.L=A,g.j.info("backChannelRequestTimeoutMs_="+A)),A=g;const Hn=c.g;if(Hn){const vd=Hn.g?Hn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vd){var F=A.h;F.g||vd.indexOf("spdy")==-1&&vd.indexOf("quic")==-1&&vd.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(tm(F,F.h),F.h=null))}if(A.D){const om=Hn.g?Hn.g.getResponseHeader("X-HTTP-Session-Id"):null;om&&(A.ya=om,Be(A.I,A.D,om))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-c.F,g.j.info("Handshake RTT: "+g.R+"ms")),A=g;var Q=c;if(A.qa=o0(A,A.J?A.ia:null,A.W),Q.K){Vw(A.h,Q);var Me=Q,Ct=A.L;Ct&&(Me.I=Ct),Me.B&&(Xp(Me),ad(Me)),A.g=Q}else t0(A);0<g.i.length&&md(g)}else Se[0]!="stop"&&Se[0]!="close"||Gs(g,7);else g.G==3&&(Se[0]=="stop"||Se[0]=="close"?Se[0]=="stop"?Gs(g,7):rm(g):Se[0]!="noop"&&g.l&&g.l.ta(Se),g.v=0)}}bt(4)}catch{}}var ck=class{constructor(c,f){this.g=c,this.map=f}};function Dw(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Nw(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Ow(c){return c.h?1:c.g?c.g.size:0}function em(c,f){return c.h?c.h==f:c.g?c.g.has(f):!1}function tm(c,f){c.g?c.g.add(f):c.h=f}function Vw(c,f){c.h&&c.h==f?c.h=null:c.g&&c.g.has(f)&&c.g.delete(f)}Dw.prototype.cancel=function(){if(this.i=Mw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Mw(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let f=c.i;for(const g of c.g.values())f=f.concat(g.D);return f}return v(c.i)}function uk(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var f=[],g=c.length,A=0;A<g;A++)f.push(c[A]);return f}f=[],g=0;for(A in c)f[g++]=c[A];return f}function dk(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var f=[];c=c.length;for(var g=0;g<c;g++)f.push(g);return f}f=[],g=0;for(const A in c)f[g++]=A;return f}}}function Lw(c,f){if(c.forEach&&typeof c.forEach=="function")c.forEach(f,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,f,void 0);else for(var g=dk(c),A=uk(c),L=A.length,F=0;F<L;F++)f.call(void 0,A[F],g&&g[F],c)}var Fw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hk(c,f){if(c){c=c.split("&");for(var g=0;g<c.length;g++){var A=c[g].indexOf("="),L=null;if(0<=A){var F=c[g].substring(0,A);L=c[g].substring(A+1)}else F=c[g];f(F,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Ks(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Ks){this.h=c.h,ld(this,c.j),this.o=c.o,this.g=c.g,cd(this,c.s),this.l=c.l;var f=c.i,g=new zl;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),Uw(this,g),this.m=c.m}else c&&(f=String(c).match(Fw))?(this.h=!1,ld(this,f[1]||"",!0),this.o=Bl(f[2]||""),this.g=Bl(f[3]||"",!0),cd(this,f[4]),this.l=Bl(f[5]||"",!0),Uw(this,f[6]||"",!0),this.m=Bl(f[7]||"")):(this.h=!1,this.i=new zl(null,this.h))}Ks.prototype.toString=function(){var c=[],f=this.j;f&&c.push($l(f,jw,!0),":");var g=this.g;return(g||f=="file")&&(c.push("//"),(f=this.o)&&c.push($l(f,jw,!0),"@"),c.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&c.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&c.push("/"),c.push($l(g,g.charAt(0)=="/"?mk:pk,!0))),(g=this.i.toString())&&c.push("?",g),(g=this.m)&&c.push("#",$l(g,yk)),c.join("")};function qr(c){return new Ks(c)}function ld(c,f,g){c.j=g?Bl(f,!0):f,c.j&&(c.j=c.j.replace(/:$/,""))}function cd(c,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);c.s=f}else c.s=null}function Uw(c,f,g){f instanceof zl?(c.i=f,vk(c.i,c.h)):(g||(f=$l(f,gk)),c.i=new zl(f,c.h))}function Be(c,f,g){c.i.set(f,g)}function ud(c){return Be(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Bl(c,f){return c?f?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function $l(c,f,g){return typeof c=="string"?(c=encodeURI(c).replace(f,fk),g&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function fk(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var jw=/[#\/\?@]/g,pk=/[#\?:]/g,mk=/[#\?]/g,gk=/[#\?@]/g,yk=/#/g;function zl(c,f){this.h=this.g=null,this.i=c||null,this.j=!!f}function xi(c){c.g||(c.g=new Map,c.h=0,c.i&&hk(c.i,function(f,g){c.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=zl.prototype,t.add=function(c,f){xi(this),this.i=null,c=Go(this,c);var g=this.g.get(c);return g||this.g.set(c,g=[]),g.push(f),this.h+=1,this};function Bw(c,f){xi(c),f=Go(c,f),c.g.has(f)&&(c.i=null,c.h-=c.g.get(f).length,c.g.delete(f))}function $w(c,f){return xi(c),f=Go(c,f),c.g.has(f)}t.forEach=function(c,f){xi(this),this.g.forEach(function(g,A){g.forEach(function(L){c.call(f,L,A,this)},this)},this)},t.na=function(){xi(this);const c=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let A=0;A<f.length;A++){const L=c[A];for(let F=0;F<L.length;F++)g.push(f[A])}return g},t.V=function(c){xi(this);let f=[];if(typeof c=="string")$w(this,c)&&(f=f.concat(this.g.get(Go(this,c))));else{c=Array.from(this.g.values());for(let g=0;g<c.length;g++)f=f.concat(c[g])}return f},t.set=function(c,f){return xi(this),this.i=null,c=Go(this,c),$w(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[f]),this.h+=1,this},t.get=function(c,f){return c?(c=this.V(c),0<c.length?String(c[0]):f):f};function zw(c,f,g){Bw(c,f),0<g.length&&(c.i=null,c.g.set(Go(c,f),v(g)),c.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var A=f[g];const F=encodeURIComponent(String(A)),Q=this.V(A);for(A=0;A<Q.length;A++){var L=F;Q[A]!==""&&(L+="="+encodeURIComponent(String(Q[A]))),c.push(L)}}return this.i=c.join("&")};function Go(c,f){return f=String(f),c.j&&(f=f.toLowerCase()),f}function vk(c,f){f&&!c.j&&(xi(c),c.i=null,c.g.forEach(function(g,A){var L=A.toLowerCase();A!=L&&(Bw(this,A),zw(this,L,g))},c)),c.j=f}function _k(c,f){const g=new on;if(a.Image){const A=new Image;A.onload=m(Pi,g,"TestLoadImage: loaded",!0,f,A),A.onerror=m(Pi,g,"TestLoadImage: error",!1,f,A),A.onabort=m(Pi,g,"TestLoadImage: abort",!1,f,A),A.ontimeout=m(Pi,g,"TestLoadImage: timeout",!1,f,A),a.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else f(!1)}function wk(c,f){const g=new on,A=new AbortController,L=setTimeout(()=>{A.abort(),Pi(g,"TestPingServer: timeout",!1,f)},1e4);fetch(c,{signal:A.signal}).then(F=>{clearTimeout(L),F.ok?Pi(g,"TestPingServer: ok",!0,f):Pi(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(L),Pi(g,"TestPingServer: error",!1,f)})}function Pi(c,f,g,A,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),A(g)}catch{}}function Ek(){this.g=new Gp}function Tk(c,f,g){const A=g||"";try{Lw(c,function(L,F){let Q=L;u(L)&&(Q=Ho(L)),f.push(A+F+"="+encodeURIComponent(Q))})}catch(L){throw f.push(A+"type="+encodeURIComponent("_badmap")),L}}function dd(c){this.l=c.Ub||null,this.j=c.eb||!1}E(dd,Ll),dd.prototype.g=function(){return new hd(this.l,this.j)},dd.prototype.i=function(c){return function(){return c}}({});function hd(c,f){Ce.call(this),this.D=c,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(hd,Ce),t=hd.prototype,t.open=function(c,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=f,this.readyState=1,Wl(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(f.body=c),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ql(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Wl(this)),this.g&&(this.readyState=3,Wl(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;qw(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function qw(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var f=c.value?c.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!c.done}))&&(this.response=this.responseText+=f)}c.done?ql(this):Wl(this),this.readyState==3&&qw(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,ql(this))},t.Qa=function(c){this.g&&(this.response=c,ql(this))},t.ga=function(){this.g&&ql(this)};function ql(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Wl(c)}t.setRequestHeader=function(c,f){this.u.append(c,f)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,c.push(g[0]+": "+g[1]),g=f.next();return c.join(`\r
`)};function Wl(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(hd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Ww(c){let f="";return V(c,function(g,A){f+=A,f+=":",f+=g,f+=`\r
`}),f}function nm(c,f,g){e:{for(A in g){var A=!1;break e}A=!0}A||(g=Ww(g),typeof c=="string"?g!=null&&encodeURIComponent(String(g)):Be(c,f,g))}function it(c){Ce.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(it,Ce);var Ik=/^https?$/i,Sk=["POST","PUT"];t=it.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,f,g,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);f=f?f.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Qp.g(),this.v=this.o?Fl(this.o):Fl(Qp),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(c),!0),this.B=!1}catch(F){Hw(this,F);return}if(c=g||"",g=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var L in A)g.set(L,A[L]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const F of A.keys())g.set(F,A.get(F));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(g.keys()).find(F=>F.toLowerCase()=="content-type"),L=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Sk,f,void 0))||A||L||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,Q]of g)this.g.setRequestHeader(F,Q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Qw(this),this.u=!0,this.g.send(c),this.u=!1}catch(F){Hw(this,F)}};function Hw(c,f){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=f,c.m=5,Kw(c),fd(c)}function Kw(c){c.A||(c.A=!0,rt(c,"complete"),rt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,rt(this,"complete"),rt(this,"abort"),fd(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),fd(this,!0)),it.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Gw(this):this.bb())},t.bb=function(){Gw(this)};function Gw(c){if(c.h&&typeof o<"u"&&(!c.v[1]||Wr(c)!=4||c.Z()!=2)){if(c.u&&Wr(c)==4)id(c.Ea,0,c);else if(rt(c,"readystatechange"),Wr(c)==4){c.h=!1;try{const Q=c.Z();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var A;if(A=Q===0){var L=String(c.D).match(Fw)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),A=!Ik.test(L?L.toLowerCase():"")}g=A}if(g)rt(c,"complete"),rt(c,"success");else{c.m=6;try{var F=2<Wr(c)?c.g.statusText:""}catch{F=""}c.l=F+" ["+c.Z()+"]",Kw(c)}}finally{fd(c)}}}}function fd(c,f){if(c.g){Qw(c);const g=c.g,A=c.v[0]?()=>{}:null;c.g=null,c.v=null,f||rt(c,"ready");try{g.onreadystatechange=A}catch{}}}function Qw(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Wr(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Wr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var f=this.g.responseText;return c&&f.indexOf(c)==0&&(f=f.substring(c.length)),Si(f)}};function Yw(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Ak(c){const f={};c=(c.g&&2<=Wr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(y(c[A]))continue;var g=C(c[A]);const L=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const F=f[L]||[];f[L]=F,F.push(g)}T(f,function(A){return A.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Hl(c,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[c]||f}function Jw(c){this.Aa=0,this.i=[],this.j=new on,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Hl("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Hl("baseRetryDelayMs",5e3,c),this.cb=Hl("retryDelaySeedMs",1e4,c),this.Wa=Hl("forwardChannelMaxRetries",2,c),this.wa=Hl("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Dw(c&&c.concurrentRequestLimit),this.Da=new Ek,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Jw.prototype,t.la=8,t.G=1,t.connect=function(c,f,g,A){He(0),this.W=c,this.H=f||{},g&&A!==void 0&&(this.H.OSID=g,this.H.OAID=A),this.F=this.X,this.I=o0(this,null,this.W),md(this)};function rm(c){if(Xw(c),c.G==3){var f=c.U++,g=qr(c.I);if(Be(g,"SID",c.K),Be(g,"RID",f),Be(g,"TYPE","terminate"),Kl(c,g),f=new Ai(c,c.j,f),f.L=2,f.v=ud(qr(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=f.v,g=!0),g||(f.g=a0(f.j,null),f.g.ea(f.v)),f.F=Date.now(),ad(f)}s0(c)}function pd(c){c.g&&(sm(c),c.g.cancel(),c.g=null)}function Xw(c){pd(c),c.u&&(a.clearTimeout(c.u),c.u=null),gd(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function md(c){if(!Nw(c.h)&&!c.s){c.s=!0;var f=c.Ga;ie||H(),B||(ie(),B=!0),U.add(f,c),c.B=0}}function xk(c,f){return Ow(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=f.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Rt(p(c.Ga,c,f),i0(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const L=new Ai(this,this.j,c);let F=this.o;if(this.S&&(F?(F=w(F),P(F,this.S)):F=this.S),this.m!==null||this.O||(L.H=F,F=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var A=this.i[g];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(f+=A,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=e0(this,L,f),g=qr(this.I),Be(g,"RID",c),Be(g,"CVER",22),this.D&&Be(g,"X-HTTP-Session-Id",this.D),Kl(this,g),F&&(this.O?f="headers="+encodeURIComponent(String(Ww(F)))+"&"+f:this.m&&nm(g,this.m,F)),tm(this.h,L),this.Ua&&Be(g,"TYPE","init"),this.P?(Be(g,"$req",f),Be(g,"SID","null"),L.T=!0,Jp(L,g,null)):Jp(L,g,f),this.G=2}}else this.G==3&&(c?Zw(this,c):this.i.length==0||Nw(this.h)||Zw(this))};function Zw(c,f){var g;f?g=f.l:g=c.U++;const A=qr(c.I);Be(A,"SID",c.K),Be(A,"RID",g),Be(A,"AID",c.T),Kl(c,A),c.m&&c.o&&nm(A,c.m,c.o),g=new Ai(c,c.j,g,c.B+1),c.m===null&&(g.H=c.o),f&&(c.i=f.D.concat(c.i)),f=e0(c,g,1e3),g.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),tm(c.h,g),Jp(g,A,f)}function Kl(c,f){c.H&&V(c.H,function(g,A){Be(f,A,g)}),c.l&&Lw({},function(g,A){Be(f,A,g)})}function e0(c,f,g){g=Math.min(c.i.length,g);var A=c.l?p(c.l.Na,c.l,c):null;e:{var L=c.i;let F=-1;for(;;){const Q=["count="+g];F==-1?0<g?(F=L[0].g,Q.push("ofs="+F)):F=0:Q.push("ofs="+F);let Me=!0;for(let Ct=0;Ct<g;Ct++){let Se=L[Ct].g;const Vt=L[Ct].map;if(Se-=F,0>Se)F=Math.max(0,L[Ct].g-100),Me=!1;else try{Tk(Vt,Q,"req"+Se+"_")}catch{A&&A(Vt)}}if(Me){A=Q.join("&");break e}}}return c=c.i.splice(0,g),f.D=c,A}function t0(c){if(!c.g&&!c.u){c.Y=1;var f=c.Fa;ie||H(),B||(ie(),B=!0),U.add(f,c),c.v=0}}function im(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Rt(p(c.Fa,c),i0(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,n0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Rt(p(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,He(10),pd(this),n0(this))};function sm(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function n0(c){c.g=new Ai(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var f=qr(c.qa);Be(f,"RID","rpc"),Be(f,"SID",c.K),Be(f,"AID",c.T),Be(f,"CI",c.F?"0":"1"),!c.F&&c.ja&&Be(f,"TO",c.ja),Be(f,"TYPE","xmlhttp"),Kl(c,f),c.m&&c.o&&nm(f,c.m,c.o),c.L&&(c.g.I=c.L);var g=c.g;c=c.ia,g.L=1,g.v=ud(qr(f)),g.m=null,g.P=!0,Rw(g,c)}t.Za=function(){this.C!=null&&(this.C=null,pd(this),im(this),He(19))};function gd(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function r0(c,f){var g=null;if(c.g==f){gd(c),sm(c),c.g=null;var A=2}else if(em(c.h,f))g=f.D,Vw(c.h,f),A=1;else return;if(c.G!=0){if(f.o)if(A==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var L=c.B;A=Ee(),rt(A,new mr(A,g)),md(c)}else t0(c);else if(L=f.s,L==3||L==0&&0<f.X||!(A==1&&xk(c,f)||A==2&&im(c)))switch(g&&0<g.length&&(f=c.h,f.i=f.i.concat(g)),L){case 1:Gs(c,5);break;case 4:Gs(c,10);break;case 3:Gs(c,6);break;default:Gs(c,2)}}}function i0(c,f){let g=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(g*=2),g*f}function Gs(c,f){if(c.j.info("Error code "+f),f==2){var g=p(c.fb,c),A=c.Xa;const L=!A;A=new Ks(A||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ld(A,"https"),ud(A),L?_k(A.toString(),g):wk(A.toString(),g)}else He(2);c.G=0,c.l&&c.l.sa(f),s0(c),Xw(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),He(2)):(this.j.info("Failed to ping google.com"),He(1))};function s0(c){if(c.G=0,c.ka=[],c.l){const f=Mw(c.h);(f.length!=0||c.i.length!=0)&&(S(c.ka,f),S(c.ka,c.i),c.h.i.length=0,v(c.i),c.i.length=0),c.l.ra()}}function o0(c,f,g){var A=g instanceof Ks?qr(g):new Ks(g);if(A.g!="")f&&(A.g=f+"."+A.g),cd(A,A.s);else{var L=a.location;A=L.protocol,f=f?f+"."+L.hostname:L.hostname,L=+L.port;var F=new Ks(null);A&&ld(F,A),f&&(F.g=f),L&&cd(F,L),g&&(F.l=g),A=F}return g=c.D,f=c.ya,g&&f&&Be(A,g,f),Be(A,"VER",c.la),Kl(c,A),A}function a0(c,f,g){if(f&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=c.Ca&&!c.pa?new it(new dd({eb:g})):new it(c.pa),f.Ha(c.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function l0(){}t=l0.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function yd(){}yd.prototype.g=function(c,f){return new wn(c,f)};function wn(c,f){Ce.call(this),this.g=new Jw(f),this.l=c,this.h=f&&f.messageUrlParams||null,c=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(c?c["X-WebChannel-Content-Type"]=f.messageContentType:c={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(c?c["X-WebChannel-Client-Profile"]=f.va:c={"X-WebChannel-Client-Profile":f.va}),this.g.S=c,(c=f&&f.Sb)&&!y(c)&&(this.g.m=c),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!y(f)&&(this.g.D=f,c=this.h,c!==null&&f in c&&(c=this.h,f in c&&delete c[f])),this.j=new Qo(this)}E(wn,Ce),wn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},wn.prototype.close=function(){rm(this.g)},wn.prototype.o=function(c){var f=this.g;if(typeof c=="string"){var g={};g.__data__=c,c=g}else this.u&&(g={},g.__data__=Ho(c),c=g);f.i.push(new ck(f.Ya++,c)),f.G==3&&md(f)},wn.prototype.N=function(){this.g.l=null,delete this.j,rm(this.g),delete this.g,wn.aa.N.call(this)};function c0(c){Ws.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var f=c.__sm__;if(f){e:{for(const g in f){c=g;break e}c=void 0}(this.i=c)&&(c=this.i,f=f!==null&&c in f?f[c]:void 0),this.data=f}else this.data=c}E(c0,Ws);function u0(){Ln.call(this),this.status=1}E(u0,Ln);function Qo(c){this.g=c}E(Qo,l0),Qo.prototype.ua=function(){rt(this.g,"a")},Qo.prototype.ta=function(c){rt(this.g,new c0(c))},Qo.prototype.sa=function(c){rt(this.g,new u0)},Qo.prototype.ra=function(){rt(this.g,"b")},yd.prototype.createWebChannel=yd.prototype.g,wn.prototype.send=wn.prototype.o,wn.prototype.open=wn.prototype.m,wn.prototype.close=wn.prototype.close,Sb=function(){return new yd},Ib=function(){return Ee()},Tb=zr,Sy={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},sd.NO_ERROR=0,sd.TIMEOUT=8,sd.HTTP_ERROR=6,gh=sd,xw.COMPLETE="complete",Eb=xw,Ul.EventType=qs,qs.OPEN="a",qs.CLOSE="b",qs.ERROR="c",qs.MESSAGE="d",Ce.prototype.listen=Ce.prototype.K,gc=Ul,it.prototype.listenOnce=it.prototype.L,it.prototype.getLastError=it.prototype.Ka,it.prototype.getLastErrorCode=it.prototype.Ba,it.prototype.getStatus=it.prototype.Z,it.prototype.getResponseJson=it.prototype.Oa,it.prototype.getResponseText=it.prototype.oa,it.prototype.send=it.prototype.ea,it.prototype.setWithCredentials=it.prototype.Ha,wb=it}).apply(typeof qd<"u"?qd:typeof self<"u"?self:typeof window<"u"?window:{});const $T="@firebase/firestore",zT="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$t.UNAUTHENTICATED=new $t(null),$t.GOOGLE_CREDENTIALS=new $t("google-credentials-uid"),$t.FIRST_PARTY=new $t("first-party-uid"),$t.MOCK_USER=new $t("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bl="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const No=new y_("@firebase/firestore");function ia(){return No.logLevel}function q(t,...e){if(No.logLevel<=ve.DEBUG){const n=e.map(P_);No.debug(`Firestore (${bl}): ${t}`,...n)}}function ht(t,...e){if(No.logLevel<=ve.ERROR){const n=e.map(P_);No.error(`Firestore (${bl}): ${t}`,...n)}}function Es(t,...e){if(No.logLevel<=ve.WARN){const n=e.map(P_);No.warn(`Firestore (${bl}): ${t}`,...n)}}function P_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Ab(t,r,n)}function Ab(t,e,n){let r=`FIRESTORE (${bl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ht(r),new Error(r)}function oe(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||Ab(e,i,r)}function re(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class G extends Fr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j6{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class xb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n($t.UNAUTHENTICATED))}shutdown(){}}class B6{constructor(e){this.t=e,this.currentUser=$t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){oe(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new or;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new or,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new or)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(oe(typeof r.accessToken=="string",31837,{l:r}),new j6(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return oe(e===null||typeof e=="string",2055,{h:e}),new $t(e)}}class $6{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=$t.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class z6{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new $6(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n($t.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class qT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class q6{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Sn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){oe(this.o===void 0,3512);const r=s=>{s.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new qT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(oe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new qT(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W6(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=W6(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function he(t,e){return t<e?-1:t>e?1:0}function Ay(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return Ym(i)===Ym(s)?he(i,s):Ym(i)?1:-1}return he(t.length,e.length)}const H6=55296,K6=57343;function Ym(t){const e=t.charCodeAt(0);return e>=H6&&e<=K6}function Xa(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function Pb(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT="__name__";class _r{constructor(e,n,r){n===void 0?n=0:n>e.length&&te(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&te(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return _r.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof _r?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=_r.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return he(e.length,n.length)}static compareSegments(e,n){const r=_r.isNumericId(e),i=_r.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?_r.extractNumericId(e).compare(_r.extractNumericId(n)):Ay(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ds.fromString(e.substring(4,e.length-2))}}class be extends _r{construct(e,n,r){return new be(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new G(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new be(n)}static emptyPath(){return new be([])}}const G6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qe extends _r{construct(e,n,r){return new Qe(e,n,r)}static isValidIdentifier(e){return G6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===WT}static keyField(){return new Qe([WT])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new G(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new G(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new G(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new G(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qe(n)}static emptyPath(){return new Qe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.path=e}static fromPath(e){return new Y(be.fromString(e))}static fromName(e){return new Y(be.fromString(e).popFirst(5))}static empty(){return new Y(be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return be.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Y(new be(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bb(t,e,n){if(!n)throw new G(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Rb(t,e,n,r){if(e===!0&&r===!0)throw new G(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function HT(t){if(!Y.isDocumentKey(t))throw new G(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function KT(t){if(Y.isDocumentKey(t))throw new G(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Cb(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function _p(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":te(12329,{type:typeof t})}function Et(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new G(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=_p(t);throw new G(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Q6(t,e){if(e<=0)throw new G(j.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(t,e){const n={typeString:t};return e&&(n.value=e),n}function $u(t,e){if(!Cb(t))throw new G(j.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new G(j.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT=-62135596800,QT=1e6;class Re{static now(){return Re.fromMillis(Date.now())}static fromDate(e){return Re.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*QT);return new Re(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new G(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<GT)throw new G(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/QT}_compareTo(e){return this.seconds===e.seconds?he(this.nanoseconds,e.nanoseconds):he(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Re._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if($u(e,Re._jsonSchema))return new Re(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-GT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Re._jsonSchemaVersion="firestore/timestamp/1.0",Re._jsonSchema={type:yt("string",Re._jsonSchemaVersion),seconds:yt("number"),nanoseconds:yt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{static fromTimestamp(e){return new le(e)}static min(){return new le(new Re(0,0))}static max(){return new le(new Re(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Za=-1;class gf{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function xy(t){return t.fields.find(e=>e.kind===2)}function Zs(t){return t.fields.filter(e=>e.kind!==2)}gf.UNKNOWN_ID=-1;class yh{constructor(e,n){this.fieldPath=e,this.kind=n}}class fu{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new fu(0,Dn.min())}}function kb(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=le.fromTimestamp(r===1e9?new Re(n+1,0):new Re(n,r));return new Dn(i,Y.empty(),e)}function Db(t){return new Dn(t.readTime,t.key,Za)}class Dn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Dn(le.min(),Y.empty(),Za)}static max(){return new Dn(le.max(),Y.empty(),Za)}}function b_(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Y.comparator(t.documentKey,e.documentKey),n!==0?n:he(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ob{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vs(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==Nb)throw t;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):M.reject(n)}static resolve(e){return new M((n,r)=>{n(e)})}static reject(e){return new M((n,r)=>{r(e)})}static waitFor(e){return new M((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=M.resolve(!1);for(const r of e)n=n.next(i=>i?M.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new M((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(d=>{o[u]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new M((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tn="SimpleDb";class wp{static open(e,n,r,i){try{return new wp(n,e.transaction(i,r))}catch(s){throw new Dc(n,s)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new or,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new Dc(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=R_(r.target.error);this.S.reject(new Dc(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(q(Tn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new J6(n)}}class hs{static delete(e){return q(Tn,"Removing database:",e),no(IP().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!kP())return!1;if(hs.F())return!0;const e=Tt(),n=hs.M(e),r=0<n&&n<10,i=Vb(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,hs.M(Tt())===12.2&&ht("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(q(Tn,"Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new Dc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new G(j.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new G(j.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Dc(e,o))},i.onupgradeneeded=s=>{q(Tn,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.N.k(o,i.transaction,s.oldVersion,this.version).next(()=>{q(Tn,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const a=wp.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(u=>(a.C(),u)).catch(u=>(a.abort(u),M.reject(u))).toPromise();return l.catch(()=>{}),await a.D,l}catch(a){const l=a,u=l.name!=="FirebaseError"&&o<3;if(q(Tn,"Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Vb(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class Y6{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return no(this.U.delete())}}class Dc extends G{constructor(e,n){super(j.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Ms(t){return t.name==="IndexedDbTransactionError"}class J6{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(q(Tn,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(q(Tn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),no(r)}add(e){return q(Tn,"ADD",this.store.name,e,e),no(this.store.add(e))}get(e){return no(this.store.get(e)).next(n=>(n===void 0&&(n=null),q(Tn,"GET",this.store.name,e,n),n))}delete(e){return q(Tn,"DELETE",this.store.name,e),no(this.store.delete(e))}count(){return q(Tn,"COUNT",this.store.name),no(this.store.count())}J(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new M((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.H(s,(a,l)=>{o.push(l)}).next(()=>o)}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new M((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}Z(e,n){q(Tn,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const i=this.cursor(r);return this.H(i,(s,o,a)=>a.delete())}ee(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.H(i,n)}te(e){const n=this.cursor({});return new M((r,i)=>{n.onerror=s=>{const o=R_(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}H(e,n){const r=[];return new M((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new Y6(a),u=n(a.primaryKey,a.value,l);if(u instanceof M){const d=u.catch(h=>(l.done(),M.reject(h)));r.push(d)}l.isDone?i():l.G===null?a.continue():a.continue(l.G)}}).next(()=>M.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function no(t){return new M((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=R_(r.target.error);n(i)}})}let YT=!1;function R_(t){const e=hs.M(Tt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new G("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return YT||(YT=!0,setTimeout(()=>{throw r},0)),r}}return t}const Nc="IndexBackfiller";class X6{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){q(Nc,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.ne.ie();q(Nc,`Documents written: ${n}`)}catch(n){Ms(n)?q(Nc,"Ignoring IndexedDB error during index backfill: ",n):await Vs(n)}await this.re(6e4)})}}class Z6{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.se(n,e))}se(e,n){const r=new Set;let i=n,s=!0;return M.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return q(Nc,`Processing collection: ${o}`),this.oe(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this._e(i,s)).next(a=>(q(Nc,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}_e(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=Db(s);b_(o,r)>0&&(r=o)}),new Dn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}un.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wo=-1;function Ep(t){return t==null}function pu(t){return t===0&&1/t==-1/0}function Mb(t){return typeof t=="number"&&Number.isInteger(t)&&!pu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yf="";function Gt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=JT(e)),e=e5(t.get(n),e);return JT(e)}function e5(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case yf:n+="";break;default:n+=s}}return n}function JT(t){return t+yf+""}function xr(t){const e=t.length;if(oe(e>=2,64408,{path:t}),e===2)return oe(t.charAt(0)===yf&&t.charAt(1)==="",56145,{path:t}),be.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf(yf,s);switch((o<0||o>n)&&te(50515,{path:t}),t.charAt(o+1)){case"":const a=t.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:te(61167,{path:t})}s=o+2}return new be(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo="remoteDocuments",zu="owner",Xo="owner",mu="mutationQueues",t5="userId",er="mutations",XT="batchId",co="userMutationsIndex",ZT=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vh(t,e){return[t,Gt(e)]}function Lb(t,e,n){return[t,Gt(e),n]}const n5={},el="documentMutations",vf="remoteDocumentsV14",r5=["prefixPath","collectionGroup","readTime","documentId"],_h="documentKeyIndex",i5=["prefixPath","collectionGroup","documentId"],Fb="collectionGroupIndex",s5=["collectionGroup","readTime","prefixPath","documentId"],gu="remoteDocumentGlobal",Py="remoteDocumentGlobalKey",tl="targets",Ub="queryTargetsIndex",o5=["canonicalId","targetId"],nl="targetDocuments",a5=["targetId","path"],C_="documentTargetsIndex",l5=["path","targetId"],_f="targetGlobalKey",Eo="targetGlobal",yu="collectionParents",c5=["collectionId","parent"],rl="clientMetadata",u5="clientId",Tp="bundles",d5="bundleId",Ip="namedQueries",h5="name",k_="indexConfiguration",f5="indexId",by="collectionGroupIndex",p5="collectionGroup",Oc="indexState",m5=["indexId","uid"],jb="sequenceNumberIndex",g5=["uid","sequenceNumber"],Vc="indexEntries",y5=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Bb="documentKeyIndex",v5=["indexId","uid","orderedDocumentKey"],Sp="documentOverlays",_5=["userId","collectionPath","documentId"],Ry="collectionPathOverlayIndex",w5=["userId","collectionPath","largestBatchId"],$b="collectionGroupOverlayIndex",E5=["userId","collectionGroup","largestBatchId"],D_="globals",T5="name",zb=[mu,er,el,eo,tl,zu,Eo,nl,rl,gu,yu,Tp,Ip],I5=[...zb,Sp],qb=[mu,er,el,vf,tl,zu,Eo,nl,rl,gu,yu,Tp,Ip,Sp],Wb=qb,N_=[...Wb,k_,Oc,Vc],S5=N_,Hb=[...N_,D_],A5=Hb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy extends Ob{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function It(t,e){const n=re(t);return hs.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eI(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ls(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Kb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e,n){this.comparator=e,this.root=n||Dt.EMPTY}insert(e,n){return new Ue(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Dt.BLACK,null,null))}remove(e){return new Ue(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Dt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wd(this.root,e,this.comparator,!0)}}class Wd{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Dt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Dt.RED,this.left=i??Dt.EMPTY,this.right=s??Dt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Dt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Dt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Dt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Dt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Dt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw te(27949);return e+(this.isRed()?0:1)}}Dt.EMPTY=null,Dt.RED=!0,Dt.BLACK=!1;Dt.EMPTY=new class{constructor(){this.size=0}get key(){throw te(57766)}get value(){throw te(16141)}get color(){throw te(16727)}get left(){throw te(29726)}get right(){throw te(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new Dt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.comparator=e,this.data=new Ue(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new tI(this.data.getIterator())}getIteratorFrom(e){return new tI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ne)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ne(this.comparator);return n.data=e,n}}class tI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Zo(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.fields=e,e.sort(Qe.comparator)}static empty(){return new dn([])}unionWith(e){let n=new Ne(Qe.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new dn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Xa(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Gb("Invalid base64 string: "+s):s}}(e);return new lt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new lt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return he(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}lt.EMPTY_BYTE_STRING=new lt("");const x5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pi(t){if(oe(!!t,39018),typeof t=="string"){let e=0;const n=x5.exec(t);if(oe(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ke(t.seconds),nanos:Ke(t.nanos)}}function Ke(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function mi(t){return typeof t=="string"?lt.fromBase64String(t):lt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb="server_timestamp",Yb="__type__",Jb="__previous_value__",Xb="__local_write_time__";function O_(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Yb])==null?void 0:r.stringValue)===Qb}function Ap(t){const e=t.mapValue.fields[Jb];return O_(e)?Ap(e):e}function vu(t){const e=pi(t.mapValue.fields[Xb].timestampValue);return new Re(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P5{constructor(e,n,r,i,s,o,a,l,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=d}}const wf="(default)";class Ts{constructor(e,n){this.projectId=e,this.database=n||wf}static empty(){return new Ts("","")}get isDefaultDatabase(){return this.database===wf}isEqual(e){return e instanceof Ts&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_="__type__",Zb="__max__",Zi={mapValue:{fields:{__type__:{stringValue:Zb}}}},M_="__vector__",il="value",wh={nullValue:"NULL_VALUE"};function Is(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?O_(t)?4:eR(t)?9007199254740991:xp(t)?10:11:te(28295,{value:t})}function Mr(t,e){if(t===e)return!0;const n=Is(t);if(n!==Is(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return vu(t).isEqual(vu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=pi(i.timestampValue),a=pi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return mi(i.bytesValue).isEqual(mi(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ke(i.geoPointValue.latitude)===Ke(s.geoPointValue.latitude)&&Ke(i.geoPointValue.longitude)===Ke(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ke(i.integerValue)===Ke(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ke(i.doubleValue),a=Ke(s.doubleValue);return o===a?pu(o)===pu(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Xa(t.arrayValue.values||[],e.arrayValue.values||[],Mr);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(eI(o)!==eI(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Mr(o[l],a[l])))return!1;return!0}(t,e);default:return te(52216,{left:t})}}function _u(t,e){return(t.values||[]).find(n=>Mr(n,e))!==void 0}function Ss(t,e){if(t===e)return 0;const n=Is(t),r=Is(e);if(n!==r)return he(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return he(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Ke(s.integerValue||s.doubleValue),l=Ke(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return nI(t.timestampValue,e.timestampValue);case 4:return nI(vu(t),vu(e));case 5:return Ay(t.stringValue,e.stringValue);case 6:return function(s,o){const a=mi(s),l=mi(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const d=he(a[u],l[u]);if(d!==0)return d}return he(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=he(Ke(s.latitude),Ke(o.latitude));return a!==0?a:he(Ke(s.longitude),Ke(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return rI(t.arrayValue,e.arrayValue);case 10:return function(s,o){var p,m,E,v;const a=s.fields||{},l=o.fields||{},u=(p=a[il])==null?void 0:p.arrayValue,d=(m=l[il])==null?void 0:m.arrayValue,h=he(((E=u==null?void 0:u.values)==null?void 0:E.length)||0,((v=d==null?void 0:d.values)==null?void 0:v.length)||0);return h!==0?h:rI(u,d)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Zi.mapValue&&o===Zi.mapValue)return 0;if(s===Zi.mapValue)return 1;if(o===Zi.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},d=Object.keys(u);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const p=Ay(l[h],d[h]);if(p!==0)return p;const m=Ss(a[l[h]],u[d[h]]);if(m!==0)return m}return he(l.length,d.length)}(t.mapValue,e.mapValue);default:throw te(23264,{he:n})}}function nI(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return he(t,e);const n=pi(t),r=pi(e),i=he(n.seconds,r.seconds);return i!==0?i:he(n.nanos,r.nanos)}function rI(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Ss(n[i],r[i]);if(s)return s}return he(n.length,r.length)}function sl(t){return ky(t)}function ky(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=pi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return mi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Y.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=ky(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${ky(n.fields[o])}`;return i+"}"}(t.mapValue):te(61005,{value:t})}function Eh(t){switch(Is(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ap(t);return e?16+Eh(e):16;case 5:return 2*t.stringValue.length;case 6:return mi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Eh(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Ls(r.fields,(s,o)=>{i+=s.length+Eh(o)}),i}(t.mapValue);default:throw te(13486,{value:t})}}function wu(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Dy(t){return!!t&&"integerValue"in t}function Eu(t){return!!t&&"arrayValue"in t}function iI(t){return!!t&&"nullValue"in t}function sI(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Th(t){return!!t&&"mapValue"in t}function xp(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[V_])==null?void 0:r.stringValue)===M_}function Mc(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ls(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Mc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Mc(t.arrayValue.values[n]);return e}return{...t}}function eR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Zb}const tR={mapValue:{fields:{[V_]:{stringValue:M_},[il]:{arrayValue:{}}}}};function b5(t){return"nullValue"in t?wh:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?wu(Ts.empty(),Y.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?xp(t)?tR:{mapValue:{}}:te(35942,{value:t})}function R5(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?wu(Ts.empty(),Y.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?tR:"mapValue"in t?xp(t)?{mapValue:{}}:Zi:te(61959,{value:t})}function oI(t,e){const n=Ss(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function aI(t,e){const n=Ss(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.value=e}static empty(){return new Wt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Th(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Mc(n)}setAll(e){let n=Qe.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Mc(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Th(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Mr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Th(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ls(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Wt(Mc(this.value))}}function nR(t){const e=[];return Ls(t.fields,(n,r)=>{const i=new Qe([n]);if(Th(r)){const s=nR(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new dn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new at(e,0,le.min(),le.min(),le.min(),Wt.empty(),0)}static newFoundDocument(e,n,r,i){return new at(e,1,n,le.min(),r,i,0)}static newNoDocument(e,n){return new at(e,2,n,le.min(),le.min(),Wt.empty(),0)}static newUnknownDocument(e,n){return new at(e,3,n,le.min(),le.min(),Wt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Wt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Wt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof at&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new at(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e,n){this.position=e,this.inclusive=n}}function lI(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=Y.comparator(Y.fromName(o.referenceValue),n.key):r=Ss(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function cI(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Mr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(e,n="asc"){this.field=e,this.dir=n}}function C5(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{}class _e extends rR{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new k5(e,n,r):n==="array-contains"?new O5(e,r):n==="in"?new cR(e,r):n==="not-in"?new V5(e,r):n==="array-contains-any"?new M5(e,r):new _e(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new D5(e,r):new N5(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ss(n,this.value)):n!==null&&Is(this.value)===Is(n)&&this.matchesComparison(Ss(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ke extends rR{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new ke(e,n)}matches(e){return al(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function al(t){return t.op==="and"}function Ny(t){return t.op==="or"}function L_(t){return iR(t)&&al(t)}function iR(t){for(const e of t.filters)if(e instanceof ke)return!1;return!0}function Oy(t){if(t instanceof _e)return t.field.canonicalString()+t.op.toString()+sl(t.value);if(L_(t))return t.filters.map(e=>Oy(e)).join(",");{const e=t.filters.map(n=>Oy(n)).join(",");return`${t.op}(${e})`}}function sR(t,e){return t instanceof _e?function(r,i){return i instanceof _e&&r.op===i.op&&r.field.isEqual(i.field)&&Mr(r.value,i.value)}(t,e):t instanceof ke?function(r,i){return i instanceof ke&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&sR(o,i.filters[a]),!0):!1}(t,e):void te(19439)}function oR(t,e){const n=t.filters.concat(e);return ke.create(n,t.op)}function aR(t){return t instanceof _e?function(n){return`${n.field.canonicalString()} ${n.op} ${sl(n.value)}`}(t):t instanceof ke?function(n){return n.op.toString()+" {"+n.getFilters().map(aR).join(" ,")+"}"}(t):"Filter"}class k5 extends _e{constructor(e,n,r){super(e,n,r),this.key=Y.fromName(r.referenceValue)}matches(e){const n=Y.comparator(e.key,this.key);return this.matchesComparison(n)}}class D5 extends _e{constructor(e,n){super(e,"in",n),this.keys=lR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class N5 extends _e{constructor(e,n){super(e,"not-in",n),this.keys=lR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function lR(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>Y.fromName(r.referenceValue))}class O5 extends _e{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Eu(n)&&_u(n.arrayValue,this.value)}}class cR extends _e{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&_u(this.value.arrayValue,n)}}class V5 extends _e{constructor(e,n){super(e,"not-in",n)}matches(e){if(_u(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!_u(this.value.arrayValue,n)}}class M5 extends _e{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Eu(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>_u(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L5{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}}function Vy(t,e=null,n=[],r=[],i=null,s=null,o=null){return new L5(t,e,n,r,i,s,o)}function Oo(t){const e=re(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Oy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Ep(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>sl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>sl(r)).join(",")),e.Te=n}return e.Te}function qu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!C5(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!sR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!cI(t.startAt,e.startAt)&&cI(t.endAt,e.endAt)}function Ef(t){return Y.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Tf(t,e){return t.filters.filter(n=>n instanceof _e&&n.field.isEqual(e))}function uI(t,e,n){let r=wh,i=!0;for(const s of Tf(t,e)){let o=wh,a=!0;switch(s.op){case"<":case"<=":o=b5(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=wh}oI({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];oI({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function dI(t,e,n){let r=Zi,i=!0;for(const s of Tf(t,e)){let o=Zi,a=!0;switch(s.op){case">=":case">":o=R5(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Zi}aI({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];aI({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function uR(t,e,n,r,i,s,o,a){return new Rl(t,e,n,r,i,s,o,a)}function Wu(t){return new Rl(t)}function hI(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function dR(t){return t.collectionGroup!==null}function Lc(t){const e=re(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ne(Qe.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Tu(s,r))}),n.has(Qe.keyField().canonicalString())||e.Ie.push(new Tu(Qe.keyField(),r))}return e.Ie}function Cn(t){const e=re(t);return e.Ee||(e.Ee=F5(e,Lc(t))),e.Ee}function F5(t,e){if(t.limitType==="F")return Vy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Tu(i.field,s)});const n=t.endAt?new ol(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ol(t.startAt.position,t.startAt.inclusive):null;return Vy(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function My(t,e){const n=t.filters.concat([e]);return new Rl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function If(t,e,n){return new Rl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Pp(t,e){return qu(Cn(t),Cn(e))&&t.limitType===e.limitType}function hR(t){return`${Oo(Cn(t))}|lt:${t.limitType}`}function sa(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>aR(i)).join(", ")}]`),Ep(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>sl(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>sl(i)).join(",")),`Target(${r})`}(Cn(t))}; limitType=${t.limitType})`}function Hu(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Y.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Lc(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=lI(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,Lc(r),i)||r.endAt&&!function(o,a,l){const u=lI(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,Lc(r),i))}(t,e)}function fR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function pR(t){return(e,n)=>{let r=!1;for(const i of Lc(t)){const s=U5(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function U5(t,e,n){const r=t.field.isKeyField()?Y.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?Ss(l,u):te(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return te(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ls(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Kb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j5=new Ue(Y.comparator);function Pn(){return j5}const mR=new Ue(Y.comparator);function yc(...t){let e=mR;for(const n of t)e=e.insert(n.key,n);return e}function gR(t){let e=mR;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Pr(){return Fc()}function yR(){return Fc()}function Fc(){return new _i(t=>t.toString(),(t,e)=>t.isEqual(e))}const B5=new Ue(Y.comparator),$5=new Ne(Y.comparator);function ge(...t){let e=$5;for(const n of t)e=e.add(n);return e}const z5=new Ne(he);function F_(){return z5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pu(e)?"-0":e}}function vR(t){return{integerValue:""+t}}function q5(t,e){return Mb(e)?vR(e):U_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(){this._=void 0}}function W5(t,e,n){return t instanceof ll?function(i,s){const o={fields:{[Yb]:{stringValue:Qb},[Xb]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&O_(s)&&(s=Ap(s)),s&&(o.fields[Jb]=s),{mapValue:o}}(n,e):t instanceof cl?wR(t,e):t instanceof ul?ER(t,e):function(i,s){const o=_R(i,s),a=fI(o)+fI(i.Ae);return Dy(o)&&Dy(i.Ae)?vR(a):U_(i.serializer,a)}(t,e)}function H5(t,e,n){return t instanceof cl?wR(t,e):t instanceof ul?ER(t,e):n}function _R(t,e){return t instanceof Iu?function(r){return Dy(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class ll extends bp{}class cl extends bp{constructor(e){super(),this.elements=e}}function wR(t,e){const n=TR(e);for(const r of t.elements)n.some(i=>Mr(i,r))||n.push(r);return{arrayValue:{values:n}}}class ul extends bp{constructor(e){super(),this.elements=e}}function ER(t,e){let n=TR(e);for(const r of t.elements)n=n.filter(i=>!Mr(i,r));return{arrayValue:{values:n}}}class Iu extends bp{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function fI(t){return Ke(t.integerValue||t.doubleValue)}function TR(t){return Eu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e,n){this.field=e,this.transform=n}}function K5(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof cl&&i instanceof cl||r instanceof ul&&i instanceof ul?Xa(r.elements,i.elements,Mr):r instanceof Iu&&i instanceof Iu?Mr(r.Ae,i.Ae):r instanceof ll&&i instanceof ll}(t.transform,e.transform)}class G5{constructor(e,n){this.version=e,this.transformResults=n}}class Kt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Kt}static exists(e){return new Kt(void 0,e)}static updateTime(e){return new Kt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ih(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Rp{}function SR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Cp(t.key,Kt.none()):new Cl(t.key,t.data,Kt.none());{const n=t.data,r=Wt.empty();let i=new Ne(Qe.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new wi(t.key,r,new dn(i.toArray()),Kt.none())}}function Q5(t,e,n){t instanceof Cl?function(i,s,o){const a=i.value.clone(),l=mI(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof wi?function(i,s,o){if(!Ih(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=mI(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(AR(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Uc(t,e,n,r){return t instanceof Cl?function(s,o,a,l){if(!Ih(s.precondition,o))return a;const u=s.value.clone(),d=gI(s.fieldTransforms,l,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof wi?function(s,o,a,l){if(!Ih(s.precondition,o))return a;const u=gI(s.fieldTransforms,l,o),d=o.data;return d.setAll(AR(s)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,o,a){return Ih(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function Y5(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=_R(r.transform,i||null);s!=null&&(n===null&&(n=Wt.empty()),n.set(r.field,s))}return n||null}function pI(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Xa(r,i,(s,o)=>K5(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Cl extends Rp{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class wi extends Rp{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function AR(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function mI(t,e,n){const r=new Map;oe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,H5(o,a,n[i]))}return r}function gI(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,W5(s,o,e))}return r}class Cp extends Rp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xR extends Rp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Q5(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Uc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Uc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=yR();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=SR(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(le.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ge())}isEqual(e){return this.batchId===e.batchId&&Xa(this.mutations,e.mutations,(n,r)=>pI(n,r))&&Xa(this.baseMutations,e.baseMutations,(n,r)=>pI(n,r))}}class B_{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){oe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return B5}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new B_(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J5{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pt,we;function X5(t){switch(t){case j.OK:return te(64938);case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0;default:return te(15467,{code:t})}}function PR(t){if(t===void 0)return ht("GRPC error has no .code"),j.UNKNOWN;switch(t){case pt.OK:return j.OK;case pt.CANCELLED:return j.CANCELLED;case pt.UNKNOWN:return j.UNKNOWN;case pt.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case pt.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case pt.INTERNAL:return j.INTERNAL;case pt.UNAVAILABLE:return j.UNAVAILABLE;case pt.UNAUTHENTICATED:return j.UNAUTHENTICATED;case pt.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case pt.NOT_FOUND:return j.NOT_FOUND;case pt.ALREADY_EXISTS:return j.ALREADY_EXISTS;case pt.PERMISSION_DENIED:return j.PERMISSION_DENIED;case pt.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case pt.ABORTED:return j.ABORTED;case pt.OUT_OF_RANGE:return j.OUT_OF_RANGE;case pt.UNIMPLEMENTED:return j.UNIMPLEMENTED;case pt.DATA_LOSS:return j.DATA_LOSS;default:return te(39323,{code:t})}}(we=pt||(pt={}))[we.OK=0]="OK",we[we.CANCELLED=1]="CANCELLED",we[we.UNKNOWN=2]="UNKNOWN",we[we.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",we[we.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",we[we.NOT_FOUND=5]="NOT_FOUND",we[we.ALREADY_EXISTS=6]="ALREADY_EXISTS",we[we.PERMISSION_DENIED=7]="PERMISSION_DENIED",we[we.UNAUTHENTICATED=16]="UNAUTHENTICATED",we[we.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",we[we.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",we[we.ABORTED=10]="ABORTED",we[we.OUT_OF_RANGE=11]="OUT_OF_RANGE",we[we.UNIMPLEMENTED=12]="UNIMPLEMENTED",we[we.INTERNAL=13]="INTERNAL",we[we.UNAVAILABLE=14]="UNAVAILABLE",we[we.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z5(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ej=new ds([4294967295,4294967295],0);function yI(t){const e=Z5().encode(t),n=new _b;return n.update(e),new Uint8Array(n.digest())}function vI(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ds([n,r],0),new ds([i,s],0)]}class z_{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new vc(`Invalid padding: ${n}`);if(r<0)throw new vc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new vc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new vc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ds.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(ds.fromNumber(r)));return i.compare(ej)===1&&(i=new ds([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=yI(e),[r,i]=vI(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new z_(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=yI(e),[r,i]=vI(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class vc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Gu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ku(le.min(),i,new Ue(he),Pn(),ge())}}class Gu{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Gu(r,n,ge(),ge(),ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class bR{constructor(e,n){this.targetId=e,this.Ce=n}}class RR{constructor(e,n,r=lt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class _I{constructor(){this.ve=0,this.Fe=wI(),this.Me=lt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ge(),n=ge(),r=ge();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:te(38017,{changeType:s})}}),new Gu(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=wI()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,oe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class tj{constructor(e){this.Ge=e,this.ze=new Map,this.je=Pn(),this.Je=Hd(),this.He=Hd(),this.Ye=new Ue(he)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:te(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(Ef(s))if(r===0){const o=new Y(s.path);this.et(n,o,at.newNoDocument(o,le.min()))}else oe(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=mi(r).toUint8Array()}catch(l){if(l instanceof Gb)return Es("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new z_(o,i,s)}catch(l){return Es(l instanceof vc?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,o)=>{const a=this.ot(o);if(a){if(s.current&&Ef(a.target)){const l=new Y(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,at.newNoDocument(l,e))}s.Be&&(n.set(o,s.ke()),s.qe())}});let r=ge();this.He.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const i=new Ku(e,n,this.Ye,this.je,r);return this.je=Pn(),this.Je=Hd(),this.He=Hd(),this.Ye=new Ue(he),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new _I,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ne(he),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ne(he),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||q("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new _I),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Hd(){return new Ue(Y.comparator)}function wI(){return new Ue(Y.comparator)}const nj={asc:"ASCENDING",desc:"DESCENDING"},rj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ij={and:"AND",or:"OR"};class sj{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ly(t,e){return t.useProto3Json||Ep(e)?e:{value:e}}function dl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function CR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function oj(t,e){return dl(t,e.toTimestamp())}function en(t){return oe(!!t,49232),le.fromTimestamp(function(n){const r=pi(n);return new Re(r.seconds,r.nanos)}(t))}function q_(t,e){return Fy(t,e).canonicalString()}function Fy(t,e){const n=function(i){return new be(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function kR(t){const e=be.fromString(t);return oe(jR(e),10190,{key:e.toString()}),e}function Sf(t,e){return q_(t.databaseId,e.path)}function To(t,e){const n=kR(e);if(n.get(1)!==t.databaseId.projectId)throw new G(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new G(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Y(OR(n))}function DR(t,e){return q_(t.databaseId,e)}function NR(t){const e=kR(t);return e.length===4?be.emptyPath():OR(e)}function Uy(t){return new be(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function OR(t){return oe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function EI(t,e,n){return{name:Sf(t,e),fields:n.value.mapValue.fields}}function aj(t,e,n){const r=To(t,e.name),i=en(e.updateTime),s=e.createTime?en(e.createTime):le.min(),o=new Wt({mapValue:{fields:e.fields}}),a=at.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function lj(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:te(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(oe(d===void 0||typeof d=="string",58123),lt.fromBase64String(d||"")):(oe(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),lt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const d=u.code===void 0?j.UNKNOWN:PR(u.code);return new G(d,u.message||"")}(o);n=new RR(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=To(t,r.document.name),s=en(r.document.updateTime),o=r.document.createTime?en(r.document.createTime):le.min(),a=new Wt({mapValue:{fields:r.document.fields}}),l=at.newFoundDocument(i,s,o,a),u=r.targetIds||[],d=r.removedTargetIds||[];n=new Sh(u,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=To(t,r.document),s=r.readTime?en(r.readTime):le.min(),o=at.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Sh([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=To(t,r.document),s=r.removedTargetIds||[];n=new Sh([],s,i,null)}else{if(!("filter"in e))return te(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new J5(i,s),a=r.targetId;n=new bR(a,o)}}return n}function Af(t,e){let n;if(e instanceof Cl)n={update:EI(t,e.key,e.value)};else if(e instanceof Cp)n={delete:Sf(t,e.key)};else if(e instanceof wi)n={update:EI(t,e.key,e.data),updateMask:pj(e.fieldMask)};else{if(!(e instanceof xR))return te(16599,{Vt:e.type});n={verify:Sf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof ll)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof cl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ul)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Iu)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw te(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:oj(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:te(27497)}(t,e.precondition)),n}function jy(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?Kt.updateTime(en(s.updateTime)):s.exists!==void 0?Kt.exists(s.exists):Kt.none()}(e.currentDocument):Kt.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;if("setToServerValue"in a)oe(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),l=new ll;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];l=new cl(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];l=new ul(d)}else"increment"in a?l=new Iu(o,a.increment):te(16584,{proto:a});const u=Qe.fromServerFormat(a.fieldPath);return new IR(u,l)}(t,i)):[];if(e.update){e.update.name;const i=To(t,e.update.name),s=new Wt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const u=l.fieldPaths||[];return new dn(u.map(d=>Qe.fromServerFormat(d)))}(e.updateMask);return new wi(i,s,o,n,r)}return new Cl(i,s,n,r)}if(e.delete){const i=To(t,e.delete);return new Cp(i,n)}if(e.verify){const i=To(t,e.verify);return new xR(i,n)}return te(1463,{proto:e})}function cj(t,e){return t&&t.length>0?(oe(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?en(i.updateTime):en(s);return o.isEqual(le.min())&&(o=en(s)),new G5(o,i.transformResults||[])}(n,e))):[]}function VR(t,e){return{documents:[DR(t,e.path)]}}function MR(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=DR(t,i);const s=function(u){if(u.length!==0)return UR(ke.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(d=>function(p){return{field:oa(p.field),direction:dj(p.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Ly(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:i}}function LR(t){let e=NR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){oe(r===1,65062);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(h){const p=FR(h);return p instanceof ke&&L_(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(p=>function(E){return new Tu(aa(E.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(h){let p;return p=typeof h=="object"?h.value:h,Ep(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(h){const p=!!h.before,m=h.values||[];return new ol(m,p)}(n.startAt));let u=null;return n.endAt&&(u=function(h){const p=!h.before,m=h.values||[];return new ol(m,p)}(n.endAt)),uR(e,i,o,s,a,"F",l,u)}function uj(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function FR(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=aa(n.unaryFilter.field);return _e.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=aa(n.unaryFilter.field);return _e.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=aa(n.unaryFilter.field);return _e.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=aa(n.unaryFilter.field);return _e.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return te(61313);default:return te(60726)}}(t):t.fieldFilter!==void 0?function(n){return _e.create(aa(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return te(58110);default:return te(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ke.create(n.compositeFilter.filters.map(r=>FR(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return te(1026)}}(n.compositeFilter.op))}(t):te(30097,{filter:t})}function dj(t){return nj[t]}function hj(t){return rj[t]}function fj(t){return ij[t]}function oa(t){return{fieldPath:t.canonicalString()}}function aa(t){return Qe.fromServerFormat(t.fieldPath)}function UR(t){return t instanceof _e?function(n){if(n.op==="=="){if(sI(n.value))return{unaryFilter:{field:oa(n.field),op:"IS_NAN"}};if(iI(n.value))return{unaryFilter:{field:oa(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(sI(n.value))return{unaryFilter:{field:oa(n.field),op:"IS_NOT_NAN"}};if(iI(n.value))return{unaryFilter:{field:oa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:oa(n.field),op:hj(n.op),value:n.value}}}(t):t instanceof ke?function(n){const r=n.getFilters().map(i=>UR(i));return r.length===1?r[0]:{compositeFilter:{op:fj(n.op),filters:r}}}(t):te(54877,{filter:t})}function pj(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function jR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e,n,r,i,s=le.min(),o=le.min(),a=lt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ti(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ti(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ti(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ti(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e){this.yt=e}}function mj(t,e){let n;if(e.document)n=aj(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Y.fromSegments(e.noDocument.path),i=Mo(e.noDocument.readTime);n=at.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return te(56709);{const r=Y.fromSegments(e.unknownDocument.path),i=Mo(e.unknownDocument.version);n=at.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new Re(i[0],i[1]);return le.fromTimestamp(s)}(e.readTime)),n}function TI(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:xf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:Sf(s,o.key),fields:o.data.value.mapValue.fields,updateTime:dl(s,o.version.toTimestamp()),createTime:dl(s,o.createTime.toTimestamp())}}(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Vo(e.version)};else{if(!e.isUnknownDocument())return te(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:Vo(e.version)}}return r}function xf(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Vo(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Mo(t){const e=new Re(t.seconds,t.nanoseconds);return le.fromTimestamp(e)}function ro(t,e){const n=(e.baseMutations||[]).map(s=>jy(t.yt,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>jy(t.yt,s)),i=Re.fromMillis(e.localWriteTimeMs);return new j_(e.batchId,i,n,r)}function _c(t){const e=Mo(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Mo(t.lastLimboFreeSnapshotVersion):le.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){const o=s.documents.length;return oe(o===1,1966,{count:o}),Cn(Wu(NR(s.documents[0])))}(t.query):function(s){return Cn(LR(s))}(t.query),new ti(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,lt.fromBase64String(t.resumeToken))}function $R(t,e){const n=Vo(e.snapshotVersion),r=Vo(e.lastLimboFreeSnapshotVersion);let i;i=Ef(e.target)?VR(t.yt,e.target):MR(t.yt,e.target).ft;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Oo(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function zR(t){const e=LR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?If(e,e.limit,"L"):e}function Jm(t,e){return new $_(e.largestBatchId,jy(t.yt,e.overlayMutation))}function II(t,e){const n=e.path.lastSegment();return[t,Gt(e.path.popLast()),n]}function SI(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Vo(r.readTime),documentKey:Gt(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{getBundleMetadata(e,n){return AI(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:Mo(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return AI(e).put(function(i){return{bundleId:i.id,createTime:Vo(en(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return xI(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:zR(s.bundledQuery),readTime:Mo(s.readTime)}}(r)})}saveNamedQuery(e,n){return xI(e).put(function(i){return{name:i.name,readTime:Vo(en(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function AI(t){return It(t,Tp)}function xI(t){return It(t,Ip)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new kp(e,r)}getOverlay(e,n){return ic(e).get(II(this.userId,n)).next(r=>r?Jm(this.serializer,r):null)}getOverlays(e,n){const r=Pr();return M.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new $_(n,o);i.push(this.St(e,a))}),M.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(Gt(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(ic(e).Z(Ry,a))}),M.waitFor(s)}getOverlaysForCollection(e,n,r){const i=Pr(),s=Gt(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return ic(e).J(Ry,o).next(a=>{for(const l of a){const u=Jm(this.serializer,l);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=Pr();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return ic(e).ee({index:$b,range:a},(l,u,d)=>{const h=Jm(this.serializer,u);s.size()<i||h.largestBatchId===o?(s.set(h.getKey(),h),o=h.largestBatchId):d.done()}).next(()=>s)}St(e,n){return ic(e).put(function(i,s,o){const[a,l,u]=II(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Af(i.yt,o.mutation)}}(this.serializer,this.userId,n))}}function ic(t){return It(t,Sp)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{bt(e){return It(e,D_)}getSessionToken(e){return this.bt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?lt.fromUint8Array(r):lt.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(Ke(e.integerValue));else if("doubleValue"in e){const r=Ke(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),pu(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=pi(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(mi(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?eR(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):xp(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):te(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){var o,a;const r=e.fields||{};this.Ft(n,53);const i=il,s=((a=(o=r[i].arrayValue)==null?void 0:o.values)==null?void 0:a.length)||0;this.Ft(n,15),n.Mt(Ke(s)),this.Ot(i,n),this.Ct(r[i],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),Y.fromName(e).path.forEach(r=>{this.Ft(n,60),this.Ut(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}io.Kt=new io;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea=255;function vj(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function PI(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=vj(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}class _j{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=n.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=n.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const n=this.en(e),r=PI(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}nn(e){const n=this.en(e),r=PI(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}rn(){this.sn(ea),this.sn(255)}_n(){this.an(ea),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===ea?(this.sn(ea),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===ea?(this.an(ea),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class wj{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class Ej{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class sc{constructor(){this.cn=new _j,this.ln=new wj(this.cn),this.hn=new Ej(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e,n,r,i){this.Tn=e,this.In=n,this.En=r,this.dn=i}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new so(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:Ah(this.En),directionalValue:Ah(this.dn),orderedDocumentKey:Ah(n),documentKey:r.path.toArray()}}Vn(e,n,r){const i=this.Rn(e,n,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function Di(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=bI(t.En,e.En),n!==0?n:(n=bI(t.dn,e.dn),n!==0?n:Y.comparator(t.In,e.In)))}function bI(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function Ah(t){return CP()?function(n){let r="";for(let i=0;i<n.length;i++)r+=String.fromCharCode(n[i]);return r}(t):t}function RI(t){return typeof t!="string"?t:function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(t)}class CI{constructor(e){this.mn=new Ne((n,r)=>Qe.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(oe(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=xy(e);if(n!==void 0&&!this.wn(n))return!1;const r=Zs(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.wn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.mn.size>0){const a=this.mn.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.Sn(a,l)||!this.bn(this.fn[o++],l))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.fn.length||!this.bn(this.fn[o++],a))return!1}return!0}Dn(){if(this.pn)return null;let e=new Ne(Qe.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new yh(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new yh(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new yh(r.field,r.dir==="asc"?0:1)));return new gf(gf.UNKNOWN_ID,this.collectionId,n,fu.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qR(t){var n,r;if(oe(t instanceof _e||t instanceof ke,20012),t instanceof _e){if(t instanceof cR){const i=((r=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:r.map(s=>_e.create(t.field,"==",s)))||[];return ke.create(i,"or")}return t}const e=t.filters.map(i=>qR(i));return ke.create(e,t.op)}function Tj(t){if(t.getFilters().length===0)return[];const e=zy(qR(t));return oe(WR(e),7391),By(e)||$y(e)?[e]:e.getFilters()}function By(t){return t instanceof _e}function $y(t){return t instanceof ke&&L_(t)}function WR(t){return By(t)||$y(t)||function(n){if(n instanceof ke&&Ny(n)){for(const r of n.getFilters())if(!By(r)&&!$y(r))return!1;return!0}return!1}(t)}function zy(t){if(oe(t instanceof _e||t instanceof ke,34018),t instanceof _e)return t;if(t.filters.length===1)return zy(t.filters[0]);const e=t.filters.map(r=>zy(r));let n=ke.create(e,t.op);return n=Pf(n),WR(n)?n:(oe(n instanceof ke,64498),oe(al(n),40251),oe(n.filters.length>1,57927),n.filters.reduce((r,i)=>W_(r,i)))}function W_(t,e){let n;return oe(t instanceof _e||t instanceof ke,38388),oe(e instanceof _e||e instanceof ke,25473),n=t instanceof _e?e instanceof _e?function(i,s){return ke.create([i,s],"and")}(t,e):kI(t,e):e instanceof _e?kI(e,t):function(i,s){if(oe(i.filters.length>0&&s.filters.length>0,48005),al(i)&&al(s))return oR(i,s.getFilters());const o=Ny(i)?i:s,a=Ny(i)?s:i,l=o.filters.map(u=>W_(u,a));return ke.create(l,"or")}(t,e),Pf(n)}function kI(t,e){if(al(e))return oR(e,t.getFilters());{const n=e.filters.map(r=>W_(t,r));return ke.create(n,"or")}}function Pf(t){if(oe(t instanceof _e||t instanceof ke,11850),t instanceof _e)return t;const e=t.getFilters();if(e.length===1)return Pf(e[0]);if(iR(t))return t;const n=e.map(i=>Pf(i)),r=[];return n.forEach(i=>{i instanceof _e?r.push(i):i instanceof ke&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:ke.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{constructor(){this.Cn=new H_}addToCollectionParentIndex(e,n){return this.Cn.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(Dn.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(Dn.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class H_{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ne(be.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ne(be.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DI="IndexedDbIndexManager",Kd=new Uint8Array(0);class Sj{constructor(e,n){this.databaseId=n,this.vn=new H_,this.Fn=new _i(r=>Oo(r),(r,i)=>qu(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.vn.add(n)});const s={collectionId:r,parent:Gt(i)};return NI(e).put(s)}return M.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[Pb(n),""],!1,!0);return NI(e).J(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(xr(o.parent))}return r})}addFieldIndex(e,n){const r=oc(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=na(e);return s.next(a=>{o.put(SI(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=oc(e),i=na(e),s=ta(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=oc(e),r=ta(e),i=na(e);return n.Z().next(()=>r.Z()).next(()=>i.Z())}createTargetIndexes(e,n){return M.forEach(this.Mn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new CI(r).Dn();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=ta(e);let i=!0;const s=new Map;return M.forEach(this.Mn(n),o=>this.xn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=ge();const a=[];return M.forEach(s,(l,u)=>{q(DI,`Using index ${function(I){return`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map(D=>`${D.fieldPath}:${D.kind}`).join(",")}`}(l)} to execute ${Oo(n)}`);const d=function(I,D){const N=xy(D);if(N===void 0)return null;for(const V of Tf(I,N.fieldPath))switch(V.op){case"array-contains-any":return V.value.arrayValue.values||[];case"array-contains":return[V.value]}return null}(u,l),h=function(I,D){const N=new Map;for(const V of Zs(D))for(const T of Tf(I,V.fieldPath))switch(T.op){case"==":case"in":N.set(V.fieldPath.canonicalString(),T.value);break;case"not-in":case"!=":return N.set(V.fieldPath.canonicalString(),T.value),Array.from(N.values())}return null}(u,l),p=function(I,D){const N=[];let V=!0;for(const T of Zs(D)){const w=T.kind===0?uI(I,T.fieldPath,I.startAt):dI(I,T.fieldPath,I.startAt);N.push(w.value),V&&(V=w.inclusive)}return new ol(N,V)}(u,l),m=function(I,D){const N=[];let V=!0;for(const T of Zs(D)){const w=T.kind===0?dI(I,T.fieldPath,I.endAt):uI(I,T.fieldPath,I.endAt);N.push(w.value),V&&(V=w.inclusive)}return new ol(N,V)}(u,l),E=this.On(l,u,p),v=this.On(l,u,m),S=this.Nn(l,u,h),_=this.Bn(l.indexId,d,E,p.inclusive,v,m.inclusive,S);return M.forEach(_,y=>r.Y(y,n.limit).next(I=>{I.forEach(D=>{const N=Y.fromSegments(D.documentKey);o.has(N)||(o=o.add(N),a.push(N))})}))}).next(()=>a)}return M.resolve(null)})}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=Tj(ke.create(e.filters,"and")).map(r=>Vy(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,n),n)}Bn(e,n,r,i,s,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,s.length),u=l/(n!=null?n.length:1),d=[];for(let h=0;h<l;++h){const p=n?this.Ln(n[h/u]):Kd,m=this.kn(e,p,r[h%u],i),E=this.qn(e,p,s[h%u],o),v=a.map(S=>this.kn(e,p,S,!0));d.push(...this.createRange(m,E,v))}return d}kn(e,n,r,i){const s=new so(e,Y.empty(),n,r);return i?s:s.An()}qn(e,n,r,i){const s=new so(e,Y.empty(),n,r);return i?s.An():s}xn(e,n){const r=new CI(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.yn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.Mn(n);return M.forEach(i,s=>this.xn(e,s).next(o=>{o?r!==0&&o.fields.length<function(l){let u=new Ne(Qe.comparator),d=!1;for(const h of l.filters)for(const p of h.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?d=!0:u=u.add(p.field));for(const h of l.orderBy)h.field.isKeyField()||(u=u.add(h.field));return u.size+(d?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}Qn(e,n){const r=new sc;for(const i of Zs(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Pn(i.kind);io.Kt.Dt(s,o)}return r.un()}Ln(e){const n=new sc;return io.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new sc;return io.Kt.Dt(wu(this.databaseId,n),r.Pn(function(s){const o=Zs(s);return o.length===0?0:o[o.length-1].kind}(e))),r.un()}Nn(e,n,r){if(r===null)return[];let i=[];i.push(new sc);let s=0;for(const o of Zs(e)){const a=r[s++];for(const l of i)if(this.Un(n,o.fieldPath)&&Eu(a))i=this.Kn(i,o,a);else{const u=l.Pn(o.kind);io.Kt.Dt(a,u)}}return this.Wn(i)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new sc;l.seed(a.un()),io.Kt.Dt(o,l.Pn(n.kind)),s.push(l)}return s}Un(e,n){return!!e.filters.find(r=>r instanceof _e&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=oc(e),i=na(e);return(n?r.J(by,IDBKeyRange.bound(n,n)):r.J()).next(s=>{const o=[];return M.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(d,h){const p=h?new fu(h.sequenceNumber,new Dn(Mo(h.readTime),new Y(xr(h.documentKey)),h.largestBatchId)):fu.empty(),m=d.fields.map(([E,v])=>new yh(Qe.fromServerFormat(E),v));return new gf(d.indexId,d.collectionGroup,m,p)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:he(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=oc(e),s=na(e);return this.Gn(e).next(o=>i.J(by,IDBKeyRange.bound(n,n)).next(a=>M.forEach(a,l=>s.put(SI(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return M.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?M.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),M.forEach(a,l=>this.zn(e,i,l).next(u=>{const d=this.jn(s,l);return u.isEqual(d)?M.resolve():this.Jn(e,s,l,u,d)}))))})}Hn(e,n,r,i){return ta(e).put(i.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,i){return ta(e).delete(i.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const i=ta(e);let s=new Ne(Di);return i.ee({index:Bb,range:IDBKeyRange.only([r.indexId,this.uid,Ah(this.$n(r,n))])},(o,a)=>{s=s.add(new so(r.indexId,n,RI(a.arrayValue),RI(a.directionalValue)))}).next(()=>s)}jn(e,n){let r=new Ne(Di);const i=this.Qn(n,e);if(i==null)return r;const s=xy(n);if(s!=null){const o=e.data.field(s.fieldPath);if(Eu(o))for(const a of o.arrayValue.values||[])r=r.add(new so(n.indexId,e.key,this.Ln(a),i))}else r=r.add(new so(n.indexId,e.key,Kd,i));return r}Jn(e,n,r,i,s){q(DI,"Updating index entries for document '%s'",n.key);const o=[];return function(l,u,d,h,p){const m=l.getIterator(),E=u.getIterator();let v=Zo(m),S=Zo(E);for(;v||S;){let _=!1,y=!1;if(v&&S){const I=d(v,S);I<0?y=!0:I>0&&(_=!0)}else v!=null?y=!0:_=!0;_?(h(S),S=Zo(E)):y?(p(v),v=Zo(m)):(v=Zo(m),S=Zo(E))}}(i,s,Di,a=>{o.push(this.Hn(e,n,r,a))},a=>{o.push(this.Yn(e,n,r,a))}),M.waitFor(o)}Gn(e){let n=1;return na(e).ee({index:jb,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Di(o,a)).filter((o,a,l)=>!a||Di(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=Di(o,e),l=Di(o,n);if(a===0)i[0]=e.An();else if(a>0&&l<0)i.push(o),i.push(o.An());else if(l>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Zn(i[o],i[o+1]))return[];const a=i[o].Vn(this.uid,Kd,Y.empty()),l=i[o+1].Vn(this.uid,Kd,Y.empty());s.push(IDBKeyRange.bound(a,l))}return s}Zn(e,n){return Di(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(OI)}getMinOffset(e,n){return M.mapArray(this.Mn(n),r=>this.xn(e,r).next(i=>i||te(44426))).next(OI)}}function NI(t){return It(t,yu)}function ta(t){return It(t,Vc)}function oc(t){return It(t,k_)}function na(t){return It(t,Oc)}function OI(t){oe(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;b_(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Dn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},HR=41943040;class zt{static withCacheSize(e){return new zt(e,zt.DEFAULT_COLLECTION_PERCENTILE,zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KR(t,e,n){const r=t.store(er),i=t.store(el),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.ee({range:o},(d,h,p)=>(a++,p.delete()));s.push(l.next(()=>{oe(a===1,47070,{batchId:n.batchId})}));const u=[];for(const d of n.mutations){const h=Lb(e,d.key.path,n.batchId);s.push(i.delete(h)),u.push(d.key)}return M.waitFor(s).next(()=>u)}function bf(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw te(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zt.DEFAULT_COLLECTION_PERCENTILE=10,zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zt.DEFAULT=new zt(HR,zt.DEFAULT_COLLECTION_PERCENTILE,zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zt.DISABLED=new zt(-1,0,0);class Dp{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,n,r,i){oe(e.uid!=="",64387);const s=e.isAuthenticated()?e.uid:"";return new Dp(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ni(e).ee({index:co,range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=la(e),o=Ni(e);return o.add({}).next(a=>{oe(typeof a=="number",49019);const l=new j_(a,n,r,i),u=function(m,E,v){const S=v.baseMutations.map(y=>Af(m.yt,y)),_=v.mutations.map(y=>Af(m.yt,y));return{userId:E,batchId:v.batchId,localWriteTimeMs:v.localWriteTime.toMillis(),baseMutations:S,mutations:_}}(this.serializer,this.userId,l),d=[];let h=new Ne((p,m)=>he(p.canonicalString(),m.canonicalString()));for(const p of i){const m=Lb(this.userId,p.key.path,a);h=h.add(p.key.path.popLast()),d.push(o.put(u)),d.push(s.put(m,n5))}return h.forEach(p=>{d.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.Xn[a]=l.keys()}),M.waitFor(d).next(()=>l)})}lookupMutationBatch(e,n){return Ni(e).get(n).next(r=>r?(oe(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),ro(this.serializer,r)):null)}er(e,n){return this.Xn[n]?M.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Xn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Ni(e).ee({index:co,range:i},(o,a,l)=>{a.userId===this.userId&&(oe(a.batchId>=r,47524,{tr:r}),s=ro(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=wo;return Ni(e).ee({index:co,range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,wo],[this.userId,Number.POSITIVE_INFINITY]);return Ni(e).J(co,n).next(r=>r.map(i=>ro(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=vh(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return la(e).ee({range:i},(o,a,l)=>{const[u,d,h]=o,p=xr(d);if(u===this.userId&&n.path.isEqual(p))return Ni(e).get(h).next(m=>{if(!m)throw te(61480,{nr:o,batchId:h});oe(m.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:m.userId,batchId:h}),s.push(ro(this.serializer,m))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ne(he);const i=[];return n.forEach(s=>{const o=vh(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=la(e).ee({range:a},(u,d,h)=>{const[p,m,E]=u,v=xr(m);p===this.userId&&s.path.isEqual(v)?r=r.add(E):h.done()});i.push(l)}),M.waitFor(i).next(()=>this.rr(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=vh(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Ne(he);return la(e).ee({range:o},(l,u,d)=>{const[h,p,m]=l,E=xr(p);h===this.userId&&r.isPrefixOf(E)?E.length===i&&(a=a.add(m)):d.done()}).next(()=>this.rr(e,a))}rr(e,n){const r=[],i=[];return n.forEach(s=>{i.push(Ni(e).get(s).next(o=>{if(o===null)throw te(35274,{batchId:s});oe(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:s}),r.push(ro(this.serializer,o))}))}),M.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return KR(e.le,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.ir(n.batchId)}),M.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return M.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return la(e).ee({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=xr(s[1]);i.push(l)}else a.done()}).next(()=>{oe(i.length===0,56720,{sr:i.map(s=>s.canonicalString())})})})}containsKey(e,n){return GR(e,this.userId,n)}_r(e){return QR(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:wo,lastStreamToken:""})}}function GR(t,e,n){const r=vh(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return la(t).ee({range:s,X:!0},(a,l,u)=>{const[d,h,p]=a;d===e&&h===i&&(o=!0),u.done()}).next(()=>o)}function Ni(t){return It(t,er)}function la(t){return It(t,el)}function QR(t){return It(t,mu)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Lo(0)}static cr(){return new Lo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next(n=>{const r=new Lo(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(n=>le.fromTimestamp(new Re(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.lr(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.hr(e,i)))}addTargetData(e,n){return this.Pr(e,n).next(()=>this.lr(e).next(r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>ra(e).delete(n.targetId)).next(()=>this.lr(e)).next(r=>(oe(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return ra(e).ee((o,a)=>{const l=_c(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>M.waitFor(s)).next(()=>i)}forEachTarget(e,n){return ra(e).ee((r,i)=>{const s=_c(i);n(s)})}lr(e){return MI(e).get(_f).next(n=>(oe(n!==null,2888),n))}hr(e,n){return MI(e).put(_f,n)}Pr(e,n){return ra(e).put($R(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Oo(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return ra(e).ee({range:i,index:Ub},(o,a,l)=>{const u=_c(a);qu(n,u.target)&&(s=u,l.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=qi(e);return n.forEach(o=>{const a=Gt(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),M.waitFor(i)}removeMatchingKeys(e,n,r){const i=qi(e);return M.forEach(n,s=>{const o=Gt(s.path);return M.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=qi(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=qi(e);let s=ge();return i.ee({range:r,X:!0},(o,a,l)=>{const u=xr(o[1]),d=new Y(u);s=s.add(d)}).next(()=>s)}containsKey(e,n){const r=Gt(n.path),i=IDBKeyRange.bound([r],[Pb(r)],!1,!0);let s=0;return qi(e).ee({index:C_,X:!0,range:i},([o,a],l,u)=>{o!==0&&(s++,u.done())}).next(()=>s>0)}At(e,n){return ra(e).get(n).next(r=>r?_c(r):null)}}function ra(t){return It(t,tl)}function MI(t){return It(t,Eo)}function qi(t){return It(t,nl)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI="LruGarbageCollector",YR=1048576;function FI([t,e],[n,r]){const i=he(t,n);return i===0?he(e,r):i}class xj{constructor(e){this.Ir=e,this.buffer=new Ne(FI),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();FI(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class JR{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){q(LI,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ms(n)?q(LI,"Ignoring IndexedDB error during garbage collection: ",n):await Vs(n)}await this.Vr(3e5)})}}class Pj{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return M.resolve(un.ce);const r=new xj(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(q("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(VI)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),VI):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,o,a,l,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,o=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(s=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(u=Date.now(),ia()<=ve.DEBUG&&q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(u-l)+`ms
Total Duration: ${u-d}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h})))}}function XR(t,e){return new Pj(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(e,n){this.db=e,this.garbageCollector=XR(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,(r,i)=>n(i))}addReference(e,n,r){return Gd(e,r)}removeReference(e,n,r){return Gd(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Gd(e,n)}br(e,n){return function(i,s){let o=!1;return QR(i).te(a=>GR(i,a,s).next(l=>(l&&(o=!0),M.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Sr(e,(o,a)=>{if(a<=n){const l=this.br(e,o).next(u=>{if(!u)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,le.min()),qi(e).delete(function(h){return[0,Gt(h.path)]}(o))))});i.push(l)}}).next(()=>M.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Gd(e,n)}Sr(e,n){const r=qi(e);let i,s=un.ce;return r.ee({index:C_},([o,a],{path:l,sequenceNumber:u})=>{o===0?(s!==un.ce&&n(new Y(xr(i)),s),s=u,i=l):s=un.ce}).next(()=>{s!==un.ce&&n(new Y(xr(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Gd(t,e){return qi(t).put(function(r,i){return{targetId:0,path:Gt(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(){this.changes=new _i(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,at.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rj{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Qs(e).put(r)}removeEntry(e,n,r){return Qs(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],xf(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Dr(e,r)))}getEntry(e,n){let r=at.newInvalidDocument(n);return Qs(e).ee({index:_h,range:IDBKeyRange.only(ac(n))},(i,s)=>{r=this.Cr(n,s)}).next(()=>r)}vr(e,n){let r={size:0,document:at.newInvalidDocument(n)};return Qs(e).ee({index:_h,range:IDBKeyRange.only(ac(n))},(i,s)=>{r={document:this.Cr(n,s),size:bf(s)}}).next(()=>r)}getEntries(e,n){let r=Pn();return this.Fr(e,n,(i,s)=>{const o=this.Cr(i,s);r=r.insert(i,o)}).next(()=>r)}Mr(e,n){let r=Pn(),i=new Ue(Y.comparator);return this.Fr(e,n,(s,o)=>{const a=this.Cr(s,o);r=r.insert(s,a),i=i.insert(s,bf(o))}).next(()=>({documents:r,Or:i}))}Fr(e,n,r){if(n.isEmpty())return M.resolve();let i=new Ne(BI);n.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(ac(i.first()),ac(i.last())),o=i.getIterator();let a=o.getNext();return Qs(e).ee({index:_h,range:s},(l,u,d)=>{const h=Y.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&BI(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?d.j(ac(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),xf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Qs(e).J(IDBKeyRange.bound(a,l,!0)).next(u=>{s==null||s.incrementDocumentReadCount(u.length);let d=Pn();for(const h of u){const p=this.Cr(Y.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);p.isFoundDocument()&&(Hu(n,p)||i.has(p.key))&&(d=d.insert(p.key,p))}return d})}getAllFromCollectionGroup(e,n,r,i){let s=Pn();const o=jI(n,r),a=jI(n,Dn.max());return Qs(e).ee({index:Fb,range:IDBKeyRange.bound(o,a,!0)},(l,u,d)=>{const h=this.Cr(Y.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(h.key,h),s.size===i&&d.done()}).next(()=>s)}newChangeBuffer(e){return new Cj(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return UI(e).get(Py).next(n=>(oe(!!n,20021),n))}Dr(e,n){return UI(e).put(Py,n)}Cr(e,n){if(n){const r=mj(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(le.min())))return r}return at.newInvalidDocument(e)}}function eC(t){return new Rj(t)}class Cj extends ZR{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new _i(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Ne((s,o)=>he(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.Br.get(s);if(n.push(this.Nr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=TI(this.Nr.serializer,o);i=i.add(s.path.popLast());const u=bf(l);r+=u-a.size,n.push(this.Nr.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=TI(this.Nr.serializer,o.convertToNoDocument(le.min()));n.push(this.Nr.addEntry(e,s,l))}}),i.forEach(s=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.Nr.updateMetadata(e,r)),M.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next(r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next(({documents:r,Or:i})=>(i.forEach((s,o)=>{this.Br.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function UI(t){return It(t,gu)}function Qs(t){return It(t,vf)}function ac(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function jI(t,e){const n=e.documentKey.path.toArray();return[t,xf(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function BI(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=he(n[s],r[s]),i)return i;return i=he(n.length,r.length),i||(i=he(n[n.length-2],r[r.length-2]),i||he(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Uc(r.mutation,i,dn.empty(),Re.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ge()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ge()){const i=Pr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=yc();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Pr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ge()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Pn();const o=Fc(),a=function(){return Fc()}();return n.forEach((l,u)=>{const d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof wi)?s=s.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),Uc(d.mutation,u,d.mutation.getFieldMask(),Re.now())):o.set(u.key,dn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,d)=>o.set(u,d)),n.forEach((u,d)=>a.set(u,new kj(d,o.get(u)??null))),a))}recalculateAndSaveOverlays(e,n){const r=Fc();let i=new Ue((o,a)=>o-a),s=ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let d=r.get(l)||dn.empty();d=a.applyToLocalView(u,d),r.set(l,d);const h=(i.get(a.batchId)||ge()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,d=l.value,h=yR();d.forEach(p=>{if(!s.has(p)){const m=SR(n.get(p),r.get(p));m!==null&&h.set(p,m),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return M.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return Y.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):dR(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):M.resolve(Pr());let a=Za,l=s;return o.next(u=>M.forEach(u,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(d)?M.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{l=l.insert(d,p)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,ge())).next(d=>({batchId:a,changes:gR(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Y(n)).next(r=>{let i=yc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=yc();return this.indexManager.getCollectionParents(e,s).next(a=>M.forEach(a,l=>{const u=function(h,p){return new Rl(p,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((h,p)=>{o=o.insert(h,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,at.newInvalidDocument(d)))});let a=yc();return o.forEach((l,u)=>{const d=s.get(l);d!==void 0&&Uc(d.mutation,u,dn.empty(),Re.now()),Hu(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return M.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:en(i.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:zR(i.bundledQuery),readTime:en(i.readTime)}}(n)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(){this.overlays=new Ue(Y.comparator),this.qr=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Pr();return M.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.St(e,n,s)}),M.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){const i=Pr(),s=n.length+1,o=new Y(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return M.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ue((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=s.get(u.largestBatchId);d===null&&(d=Pr(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const a=Pr(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=i)););return M.resolve(a)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new $_(n,r));let s=this.qr.get(n);s===void 0&&(s=ge(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oj{constructor(){this.sessionToken=lt.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(){this.Qr=new Ne(St.$r),this.Ur=new Ne(St.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new St(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new St(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new Y(new be([])),r=new St(n,e),i=new St(n,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Y(new be([])),r=new St(n,e),i=new St(n,e+1);let s=ge();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new St(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class St{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Y.comparator(e.key,n.key)||he(e.Yr,n.Yr)}static Kr(e,n){return he(e.Yr,n.Yr)||Y.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ne(St.$r)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new j_(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Zr=this.Zr.add(new St(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,n){return M.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return M.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?wo:this.tr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new St(n,0),i=new St(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{const a=this.Xr(o.Yr);s.push(a)}),M.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ne(he);return n.forEach(i=>{const s=new St(i,0),o=new St(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],a=>{r=r.add(a.Yr)})}),M.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;Y.isDocumentKey(s)||(s=s.child(""));const o=new St(new Y(s),0);let a=new Ne(he);return this.Zr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.Yr)),!0)},o),M.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){oe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return M.forEach(n.mutations,i=>{const s=new St(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new St(n,0),i=this.Zr.firstAfterOrEqual(r);return M.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{constructor(e){this.ri=e,this.docs=function(){return new Ue(Y.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():at.newInvalidDocument(n))}getEntries(e,n){let r=Pn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():at.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Pn();const o=n.path,a=new Y(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:d}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||b_(Db(d),r)<=0||(i.has(d.key)||Hu(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return M.resolve(s)}getAllFromCollectionGroup(e,n,r,i){te(9500)}ii(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Lj(this)}getSize(e){return M.resolve(this.size)}}class Lj extends ZR{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj{constructor(e){this.persistence=e,this.si=new _i(n=>Oo(n),qu),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.oi=0,this._i=new K_,this.targetCount=0,this.ai=Lo.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),M.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Lo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.Pr(n),M.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),M.waitFor(s).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),M.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(e,n){this.ui={},this.overlays={},this.ci=new un(0),this.li=!1,this.li=!0,this.hi=new Oj,this.referenceDelegate=e(this),this.Pi=new Fj(this),this.indexManager=new Ij,this.remoteDocumentCache=function(i){return new Mj(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new BR(n),this.Ii=new Dj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Nj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new Vj(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){q("MemoryPersistence","Starting transaction:",e);const i=new Uj(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,n){return M.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class Uj extends Ob{constructor(e){super(),this.currentSequenceNumber=e}}class Np{constructor(e){this.persistence=e,this.Ri=new K_,this.Vi=null}static mi(e){return new Np(e)}get fi(){if(this.Vi)return this.Vi;throw te(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),M.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.fi,r=>{const i=Y.fromPath(r);return this.gi(e,i).next(s=>{s||n.removeEntry(i,le.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return M.or([()=>M.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Rf{constructor(e,n){this.persistence=e,this.pi=new _i(r=>Gt(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=XR(this,n)}static mi(e,n){return new Rf(e,n)}Ei(){}di(e){return M.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return M.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?M.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,s.removeEntry(o,le.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),M.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),M.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),M.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Eh(e.data.value)),n}br(e,n,r){return M.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return M.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(e){this.serializer=e}k(e,n,r,i){const s=new wp("createOrUpgrade",n);r<1&&i>=1&&(function(l){l.createObjectStore(zu)}(e),function(l){l.createObjectStore(mu,{keyPath:t5}),l.createObjectStore(er,{keyPath:XT,autoIncrement:!0}).createIndex(co,ZT,{unique:!0}),l.createObjectStore(el)}(e),$I(e),function(l){l.createObjectStore(eo)}(e));let o=M.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore(nl),l.deleteObjectStore(tl),l.deleteObjectStore(Eo)}(e),$I(e)),o=o.next(()=>function(l){const u=l.store(Eo),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:le.min().toTimestamp(),targetCount:0};return u.put(_f,d)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(l,u){return u.store(er).J().next(h=>{l.deleteObjectStore(er),l.createObjectStore(er,{keyPath:XT,autoIncrement:!0}).createIndex(co,ZT,{unique:!0});const p=u.store(er),m=h.map(E=>p.put(E));return M.waitFor(m)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore(rl,{keyPath:u5})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.yi(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore(gu)}(e),this.wi(s)))),r<7&&i>=7&&(o=o.next(()=>this.Si(s))),r<8&&i>=8&&(o=o.next(()=>this.bi(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.Di(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore(Tp,{keyPath:d5})})(e),function(l){l.createObjectStore(Ip,{keyPath:h5})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(l){const u=l.createObjectStore(Sp,{keyPath:_5});u.createIndex(Ry,w5,{unique:!1}),u.createIndex($b,E5,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const u=l.createObjectStore(vf,{keyPath:r5});u.createIndex(_h,i5),u.createIndex(Fb,s5)}(e)).next(()=>this.Ci(e,s)).next(()=>e.deleteObjectStore(eo))),r<14&&i>=14&&(o=o.next(()=>this.Fi(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore(k_,{keyPath:f5,autoIncrement:!0}).createIndex(by,p5,{unique:!1}),l.createObjectStore(Oc,{keyPath:m5}).createIndex(jb,g5,{unique:!1}),l.createObjectStore(Vc,{keyPath:y5}).createIndex(Bb,v5,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{n.objectStore(Oc).clear()}).next(()=>{n.objectStore(Vc).clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(l){l.createObjectStore(D_,{keyPath:T5})})(e)})),r<18&&i>=18&&CP()&&(o=o.next(()=>{n.objectStore(Oc).clear()}).next(()=>{n.objectStore(Vc).clear()})),o}wi(e){let n=0;return e.store(eo).ee((r,i)=>{n+=bf(i)}).next(()=>{const r={byteSize:n};return e.store(gu).put(Py,r)})}yi(e){const n=e.store(mu),r=e.store(er);return n.J().next(i=>M.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,wo],[s.userId,s.lastAcknowledgedBatchId]);return r.J(co,o).next(a=>M.forEach(a,l=>{oe(l.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const u=ro(this.serializer,l);return KR(e,s.userId,u).next(()=>{})}))}))}Si(e){const n=e.store(nl),r=e.store(eo);return e.store(Eo).get(_f).next(i=>{const s=[];return r.ee((o,a)=>{const l=new be(o),u=function(h){return[0,Gt(h)]}(l);s.push(n.get(u).next(d=>d?M.resolve():(h=>n.put({targetId:0,path:Gt(h),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>M.waitFor(s))})}bi(e,n){e.createObjectStore(yu,{keyPath:c5});const r=n.store(yu),i=new H_,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:Gt(l)})}};return n.store(eo).ee({X:!0},(o,a)=>{const l=new be(o);return s(l.popLast())}).next(()=>n.store(el).ee({X:!0},([o,a,l],u)=>{const d=xr(a);return s(d.popLast())}))}Di(e){const n=e.store(tl);return n.ee((r,i)=>{const s=_c(i),o=$R(this.serializer,s);return n.put(o)})}Ci(e,n){const r=n.store(eo),i=[];return r.ee((s,o)=>{const a=n.store(vf),l=function(h){return h.document?new Y(be.fromString(h.document.name).popFirst(5)):h.noDocument?Y.fromSegments(h.noDocument.path):h.unknownDocument?Y.fromSegments(h.unknownDocument.path):te(36783)}(o).path.toArray(),u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(u))}).next(()=>M.waitFor(i))}Fi(e,n){const r=n.store(er),i=eC(this.serializer),s=new G_(Np.mi,this.serializer.yt);return r.J().next(o=>{const a=new Map;return o.forEach(l=>{let u=a.get(l.userId)??ge();ro(this.serializer,l).keys().forEach(d=>u=u.add(d)),a.set(l.userId,u)}),M.forEach(a,(l,u)=>{const d=new $t(u),h=kp.wt(this.serializer,d),p=s.getIndexManager(d),m=Dp.wt(d,this.serializer,p,s.referenceDelegate);return new tC(i,m,h,p).recalculateAndSaveOverlaysForDocumentKeys(new Cy(n,un.ce),l).next()})})}}function $I(t){t.createObjectStore(nl,{keyPath:a5}).createIndex(C_,l5,{unique:!0}),t.createObjectStore(tl,{keyPath:"targetId"}).createIndex(Ub,o5,{unique:!0}),t.createObjectStore(Eo)}const Oi="IndexedDbPersistence",Xm=18e5,Zm=5e3,eg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Bj="main";class Q_{constructor(e,n,r,i,s,o,a,l,u,d,h=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=s,this.window=o,this.document=a,this.xi=u,this.Oi=d,this.Ni=h,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=p=>Promise.resolve(),!Q_.v())throw new G(j.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new bj(this,i),this.$i=n+Bj,this.serializer=new BR(l),this.Ui=new hs(this.$i,this.Ni,new jj(this.serializer)),this.hi=new yj,this.Pi=new Aj(this.referenceDelegate,this.serializer),this.remoteDocumentCache=eC(this.serializer),this.Ii=new gj,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,d===!1&&ht(Oi,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new G(j.FAILED_PRECONDITION,eg);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new un(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Qd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(n=>this.isPrimary&&!n?this.Zi(e).next(()=>!1):!!n&&this.Xi(e).next(()=>!0))).catch(e=>{if(Ms(e))return q(Oi,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return q(Oi,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return lc(e).get(Xo).next(n=>M.resolve(this.es(n)))}ts(e){return Qd(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Xm)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=It(n,rl);return r.J().next(i=>{const s=this.ss(i,Xm),o=i.filter(a=>s.indexOf(a)===-1);return M.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?M.resolve(!0):lc(e).get(Xo).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Zm)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new G(j.FAILED_PRECONDITION,eg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Qd(e).J().next(r=>this.ss(r,Zm).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&q(Oi,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[zu,rl],e=>{const n=new Cy(e,un.ce);return this.Zi(n).next(()=>this.ts(n))}),this.Ui.close(),this.Ps()}ss(e,n){return e.filter(r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>Qd(e).J().next(n=>this.ss(n,Xm).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return Dp.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Sj(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return kp.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){q(Oi,"Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=function(l){return l===18?A5:l===17?Hb:l===16?S5:l===15?N_:l===14?Wb:l===13?qb:l===12?I5:l===11?zb:void te(60245)}(this.Ni);let o;return this.Ui.runTransaction(e,i,s,a=>(o=new Cy(a,this.ci?this.ci.next():un.ce),n==="readwrite-primary"?this.Hi(o).next(l=>!!l||this.Yi(o)).next(l=>{if(!l)throw ht(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new G(j.FAILED_PRECONDITION,Nb);return r(o)}).next(l=>this.Xi(o).next(()=>l)):this.Is(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Is(e){return lc(e).get(Xo).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Zm)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new G(j.FAILED_PRECONDITION,eg)})}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return lc(e).put(Xo,n)}static v(){return hs.v()}Zi(e){const n=lc(e);return n.get(Xo).next(r=>this.es(r)?(q(Oi,"Releasing primary lease."),n.delete(Xo)):M.resolve())}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(ht(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;RP()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const r=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return q(Oi,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ht(Oi,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){ht("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function lc(t){return It(t,zu)}function Qd(t){return It(t,rl)}function nC(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=ge(),i=ge();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Y_(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $j{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return RP()?8:Vb(Tt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new $j;return this.Ss(e,n,o).next(a=>{if(s.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>s.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(ia()<=ve.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",sa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),M.resolve()):(ia()<=ve.DEBUG&&q("QueryEngine","Query:",sa(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(ia()<=ve.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",sa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Cn(n))):M.resolve())}ys(e,n){if(hI(n))return M.resolve(null);let r=Cn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=If(n,null,"F"),r=Cn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ge(...s);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.Ds(n,a);return this.Cs(n,u,o,l.readTime)?this.ys(e,If(n,null,"F")):this.vs(e,u,n,l)}))})))}ws(e,n,r,i){return hI(n)||i.isEqual(le.min())?M.resolve(null):this.ps.getDocuments(e,r).next(s=>{const o=this.Ds(n,s);return this.Cs(n,o,r,i)?M.resolve(null):(ia()<=ve.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),sa(n)),this.vs(e,o,n,kb(i,Za)).next(a=>a))})}Ds(e,n){let r=new Ne(pR(e));return n.forEach((i,s)=>{Hu(e,s)&&(r=r.add(s))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return ia()<=ve.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",sa(n)),this.ps.getDocumentsMatchingQuery(e,n,Dn.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_="LocalStore",zj=3e8;class qj{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Ue(he),this.xs=new _i(s=>Oo(s),qu),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new tC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function iC(t,e,n,r){return new qj(t,e,n,r)}async function sC(t,e){const n=re(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=ge();for(const u of i){o.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}for(const u of s){a.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:a}))})})}function Wj(t,e){const n=re(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,u,d){const h=u.batch,p=h.keys();let m=M.resolve();return p.forEach(E=>{m=m.next(()=>d.getEntry(l,E)).next(v=>{const S=u.docVersions.get(E);oe(S!==null,48541),v.version.compareTo(S)<0&&(h.applyToRemoteDocument(v,u),v.isValidDocument()&&(v.setReadTime(u.commitVersion),d.addEntry(v)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=ge();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function oC(t){const e=re(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function Hj(t,e){const n=re(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];e.targetChanges.forEach((d,h)=>{const p=i.get(h);if(!p)return;a.push(n.Pi.removeMatchingKeys(s,d.removedDocuments,h).next(()=>n.Pi.addMatchingKeys(s,d.addedDocuments,h)));let m=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(lt.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),i=i.insert(h,m),function(v,S,_){return v.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=zj?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(p,m,d)&&a.push(n.Pi.updateTargetData(s,m))});let l=Pn(),u=ge();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(Kj(s,o,e.documentUpdates).next(d=>{l=d.ks,u=d.qs})),!r.isEqual(le.min())){const d=n.Pi.getLastRemoteSnapshotVersion(s).next(h=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return M.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.Ms=i,s))}function Kj(t,e,n){let r=ge(),i=ge();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Pn();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(le.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):q(J_,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{ks:o,qs:i}})}function Gj(t,e){const n=re(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=wo),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Cf(t,e){const n=re(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(s=>s?(i=s,M.resolve(i)):n.Pi.allocateTargetId(r).next(o=>(i=new ti(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function hl(t,e,n){const r=re(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Ms(o))throw o;q(J_,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function qy(t,e,n){const r=re(t);let i=le.min(),s=ge();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,d){const h=re(l),p=h.xs.get(d);return p!==void 0?M.resolve(h.Ms.get(p)):h.Pi.getTargetData(u,d)}(r,o,Cn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:le.min(),n?s:ge())).next(a=>(cC(r,fR(e),a),{documents:a,Qs:s})))}function aC(t,e){const n=re(t),r=re(n.Pi),i=n.Ms.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.At(s,e).next(o=>o?o.target:null))}function lC(t,e){const n=re(t),r=n.Os.get(e)||le.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.Ns.getAllFromCollectionGroup(i,e,kb(r,Za),Number.MAX_SAFE_INTEGER)).then(i=>(cC(n,e,i),i))}function cC(t,e,n){let r=t.Os.get(e)||le.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Os.set(e,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC="firestore_clients";function zI(t,e){return`${uC}_${t}_${e}`}const dC="firestore_mutations";function qI(t,e,n){let r=`${dC}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const hC="firestore_targets";function tg(t,e){return`${hC}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ir="SharedClientState";class kf{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ws(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new G(i.error.code,i.error.message))),o?new kf(e,n,i.state,s):(ht(Ir,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class jc{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ws(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new G(r.error.code,r.error.message))),s?new jc(e,r.state,i):(ht(Ir,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Df{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=F_();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=Mb(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new Df(e,s):(ht(Ir,`Failed to parse client data for instance '${e}': ${n}`),null)}}class X_{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new X_(n.clientId,n.onlineState):(ht(Ir,`Failed to parse online state: ${e}`),null)}}class Wy{constructor(){this.activeTargetIds=F_()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ng{constructor(e,n,r,i,s){this.window=e,this.Mi=n,this.persistenceKey=r,this.Js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Ue(he),this.started=!1,this.Xs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.eo=zI(this.persistenceKey,this.Js),this.no=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new Wy),this.ro=new RegExp(`^${uC}_${o}_([^_]*)$`),this.io=new RegExp(`^${dC}_${o}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${hC}_${o}_(\\d+)$`),this.oo=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this._o=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const i=this.getItem(zI(this.persistenceKey,r));if(i){const s=Df.Ws(r,i);s&&(this.Zs=this.Zs.insert(s.clientId,s))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const r=this.uo(n);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,r){this.ho(e,n,r),this.Po(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(tg(this.persistenceKey,e));if(i){const s=jc.Ws(e,i);s&&(r=s.state)}}return n&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(tg(this.persistenceKey,e))}updateQueryState(e,n,r){this.Io(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Po(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return q(Ir,"READ",e,n),n}setItem(e,n){q(Ir,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){q(Ir,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(q(Ir,"EVENT",n.key,n.newValue),n.key===this.eo)return void ht("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const r=this.Ro(n.key);return this.Vo(r,null)}{const r=this.mo(n.key,n.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(this.so.test(n.key)){if(n.newValue!==null){const r=this.yo(n.key,n.newValue);if(r)return this.wo(r)}}else if(n.key===this.oo){if(n.newValue!==null){const r=this.uo(n.newValue);if(r)return this.co(r)}}else if(n.key===this.no){const r=function(s){let o=un.ce;if(s!=null)try{const a=JSON.parse(s);oe(typeof a=="number",30636,{So:s}),o=a}catch(a){ht(Ir,"Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==un.ce&&this.sequenceNumberHandler(r)}else if(n.key===this._o){const r=this.bo(n.newValue);await Promise.all(r.map(i=>this.syncEngine.Do(i)))}}}else this.Xs.push(n)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,r){const i=new kf(this.currentUser,e,n,r),s=qI(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Gs())}Po(e){const n=qI(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,r){const i=tg(this.persistenceKey,e),s=new jc(e,n,r);this.setItem(i,s.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const r=this.Ro(e);return Df.Ws(r,n)}fo(e,n){const r=this.io.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return kf.Ws(new $t(s),i,n)}yo(e,n){const r=this.so.exec(e),i=Number(r[1]);return jc.Ws(i,n)}uo(e){return X_.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);q(Ir,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const r=n?this.Zs.insert(e,n):this.Zs.remove(e),i=this.lo(this.Zs),s=this.lo(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.Fo(o,a).then(()=>{this.Zs=r})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=F_();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class fC{constructor(){this.Mo=new Wy,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Wy,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qj{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI="ConnectivityMonitor";class HI{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){q(WI,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){q(WI,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yd=null;function Hy(){return Yd===null?Yd=function(){return 268435456+Math.round(2147483648*Math.random())}():Yd++,"0x"+Yd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rg="RestConnection",Yj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Jj{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===wf?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const o=Hy(),a=this.zo(e,n.toUriEncodedString());q(rg,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,s);const{host:u}=new URL(a),d=Ns(u);return this.Jo(e,a,l,r,d).then(h=>(q(rg,`Received RPC '${e}' ${o}: `,h),h),h=>{throw Es(rg,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",r),h})}Ho(e,n,r,i,s,o){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+bl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,n){const r=Yj[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xj{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jt="WebChannelConnection";class Zj extends Jj{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const o=Hy();return new Promise((a,l)=>{const u=new wb;u.setWithCredentials(!0),u.listenOnce(Eb.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case gh.NO_ERROR:const h=u.getResponseJson();q(jt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),a(h);break;case gh.TIMEOUT:q(jt,`RPC '${e}' ${o} timed out`),l(new G(j.DEADLINE_EXCEEDED,"Request time out"));break;case gh.HTTP_ERROR:const p=u.getStatus();if(q(jt,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const E=m==null?void 0:m.error;if(E&&E.status&&E.message){const v=function(_){const y=_.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(y)>=0?y:j.UNKNOWN}(E.status);l(new G(v,E.message))}else l(new G(j.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new G(j.UNAVAILABLE,"Connection failed."));break;default:te(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{q(jt,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(i);q(jt,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",d,r,15)})}T_(e,n,r){const i=Hy(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Sb(),a=Ib(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=s.join("");q(jt,`Creating RPC '${e}' stream ${i}: ${d}`,l);const h=o.createWebChannel(d,l);this.I_(h);let p=!1,m=!1;const E=new Xj({Yo:S=>{m?q(jt,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(p||(q(jt,`Opening RPC '${e}' stream ${i} transport.`),h.open(),p=!0),q(jt,`RPC '${e}' stream ${i} sending:`,S),h.send(S))},Zo:()=>h.close()}),v=(S,_,y)=>{S.listen(_,I=>{try{y(I)}catch(D){setTimeout(()=>{throw D},0)}})};return v(h,gc.EventType.OPEN,()=>{m||(q(jt,`RPC '${e}' stream ${i} transport opened.`),E.o_())}),v(h,gc.EventType.CLOSE,()=>{m||(m=!0,q(jt,`RPC '${e}' stream ${i} transport closed`),E.a_(),this.E_(h))}),v(h,gc.EventType.ERROR,S=>{m||(m=!0,Es(jt,`RPC '${e}' stream ${i} transport errored. Name:`,S.name,"Message:",S.message),E.a_(new G(j.UNAVAILABLE,"The operation could not be completed")))}),v(h,gc.EventType.MESSAGE,S=>{var _;if(!m){const y=S.data[0];oe(!!y,16349);const I=y,D=(I==null?void 0:I.error)||((_=I[0])==null?void 0:_.error);if(D){q(jt,`RPC '${e}' stream ${i} received error:`,D);const N=D.status;let V=function(x){const P=pt[x];if(P!==void 0)return PR(P)}(N),T=D.message;V===void 0&&(V=j.INTERNAL,T="Unknown error status: "+N+" with message "+D.message),m=!0,E.a_(new G(V,T)),h.close()}else q(jt,`RPC '${e}' stream ${i} received:`,y),E.u_(y)}}),v(a,Tb.STAT_EVENT,S=>{S.stat===Sy.PROXY?q(jt,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===Sy.NOPROXY&&q(jt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.__()},0),E}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pC(){return typeof window<"u"?window:null}function xh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Op(t){return new sj(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI="PersistentStream";class gC{constructor(e,n,r,i,s,o,a,l){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new mC(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(ht(n.toString()),ht("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new G(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return q(KI,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(q(KI,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class e9 extends gC{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=lj(this.serializer,e),r=function(s){if(!("targetChange"in s))return le.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?le.min():o.readTime?en(o.readTime):le.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Uy(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Ef(l)?{documents:VR(s,l)}:{query:MR(s,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=CR(s,o.resumeToken);const u=Ly(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(le.min())>0){a.readTime=dl(s,o.snapshotVersion.toTimestamp());const u=Ly(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=uj(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Uy(this.serializer),n.removeTarget=e,this.q_(n)}}class t9 extends gC{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return oe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,oe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){oe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=cj(e.writeResults,e.commitTime),r=en(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Uy(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Af(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n9{}class r9 extends n9{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new G(j.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,Fy(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new G(j.UNKNOWN,s.toString())})}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,Fy(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(j.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class i9{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ht(n),this.aa=!1):q("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fo="RemoteStore";class s9{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{$o(this)&&(q(Fo,"Restarting streams for network reachability change."),await async function(l){const u=re(l);u.Ea.add(4),await kl(u),u.Ra.set("Unknown"),u.Ea.delete(4),await Qu(u)}(this))})}),this.Ra=new i9(r,i)}}async function Qu(t){if($o(t))for(const e of t.da)await e(!0)}async function kl(t){for(const e of t.da)await e(!1)}function Vp(t,e){const n=re(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),tw(n)?ew(n):Nl(n).O_()&&Z_(n,e))}function fl(t,e){const n=re(t),r=Nl(n);n.Ia.delete(e),r.O_()&&yC(n,e),n.Ia.size===0&&(r.O_()?r.L_():$o(n)&&n.Ra.set("Unknown"))}function Z_(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(le.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Nl(t).Y_(e)}function yC(t,e){t.Va.Ue(e),Nl(t).Z_(e)}function ew(t){t.Va=new tj({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Nl(t).start(),t.Ra.ua()}function tw(t){return $o(t)&&!Nl(t).x_()&&t.Ia.size>0}function $o(t){return re(t).Ea.size===0}function vC(t){t.Va=void 0}async function o9(t){t.Ra.set("Online")}async function a9(t){t.Ia.forEach((e,n)=>{Z_(t,e)})}async function l9(t,e){vC(t),tw(t)?(t.Ra.ha(e),ew(t)):t.Ra.set("Unknown")}async function c9(t,e,n){if(t.Ra.set("Online"),e instanceof RR&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))}(t,e)}catch(r){q(Fo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Nf(t,r)}else if(e instanceof Sh?t.Va.Ze(e):e instanceof bR?t.Va.st(e):t.Va.tt(e),!n.isEqual(le.min()))try{const r=await oC(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Va.Tt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.Ia.get(u);d&&s.Ia.set(u,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const d=s.Ia.get(l);if(!d)return;s.Ia.set(l,d.withResumeToken(lt.EMPTY_BYTE_STRING,d.snapshotVersion)),yC(s,l);const h=new ti(d.target,l,u,d.sequenceNumber);Z_(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){q(Fo,"Failed to raise snapshot:",r),await Nf(t,r)}}async function Nf(t,e,n){if(!Ms(e))throw e;t.Ea.add(1),await kl(t),t.Ra.set("Offline"),n||(n=()=>oC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{q(Fo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Qu(t)})}function _C(t,e){return e().catch(n=>Nf(t,n,e))}async function Dl(t){const e=re(t),n=As(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:wo;for(;u9(e);)try{const i=await Gj(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,d9(e,i)}catch(i){await Nf(e,i)}wC(e)&&EC(e)}function u9(t){return $o(t)&&t.Ta.length<10}function d9(t,e){t.Ta.push(e);const n=As(t);n.O_()&&n.X_&&n.ea(e.mutations)}function wC(t){return $o(t)&&!As(t).x_()&&t.Ta.length>0}function EC(t){As(t).start()}async function h9(t){As(t).ra()}async function f9(t){const e=As(t);for(const n of t.Ta)e.ea(n.mutations)}async function p9(t,e,n){const r=t.Ta.shift(),i=B_.from(r,e,n);await _C(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Dl(t)}async function m9(t,e){e&&As(t).X_&&await async function(r,i){if(function(o){return X5(o)&&o!==j.ABORTED}(i.code)){const s=r.Ta.shift();As(r).B_(),await _C(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Dl(r)}}(t,e),wC(t)&&EC(t)}async function GI(t,e){const n=re(t);n.asyncQueue.verifyOperationInProgress(),q(Fo,"RemoteStore received new credentials");const r=$o(n);n.Ea.add(3),await kl(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Qu(n)}async function Ky(t,e){const n=re(t);e?(n.Ea.delete(2),await Qu(n)):e||(n.Ea.add(2),await kl(n),n.Ra.set("Unknown"))}function Nl(t){return t.ma||(t.ma=function(n,r,i){const s=re(n);return s.sa(),new e9(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:o9.bind(null,t),t_:a9.bind(null,t),r_:l9.bind(null,t),H_:c9.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),tw(t)?ew(t):t.Ra.set("Unknown")):(await t.ma.stop(),vC(t))})),t.ma}function As(t){return t.fa||(t.fa=function(n,r,i){const s=re(n);return s.sa(),new t9(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:h9.bind(null,t),r_:m9.bind(null,t),ta:f9.bind(null,t),na:p9.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Dl(t)):(await t.fa.stop(),t.Ta.length>0&&(q(Fo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new nw(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Mp(t,e){if(ht("AsyncQueue",`${e}: ${t}`),Ms(t))return new G(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{static emptySet(e){return new Na(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Y.comparator(n.key,r.key):(n,r)=>Y.comparator(n.key,r.key),this.keyedMap=yc(),this.sortedSet=new Ue(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Na)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Na;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(){this.ga=new Ue(Y.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):te(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class pl{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new pl(e,n,Na.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Pp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g9{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class y9{constructor(){this.queries=YI(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=re(n),s=i.queries;i.queries=YI(),s.forEach((o,a)=>{for(const l of a.Sa)l.onError(r)})})(this,new G(j.ABORTED,"Firestore shutting down"))}}function YI(){return new _i(t=>hR(t),Pp)}async function rw(t,e){const n=re(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new g9,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Mp(o,`Initialization of query '${sa(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&sw(n)}async function iw(t,e){const n=re(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function v9(t,e){const n=re(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.Sa)a.Fa(i)&&(r=!0);o.wa=i}}r&&sw(n)}function _9(t,e,n){const r=re(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function sw(t){t.Ca.forEach(e=>{e.next()})}var Gy,JI;(JI=Gy||(Gy={})).Ma="default",JI.Cache="cache";class ow{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new pl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=pl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Gy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e){this.key=e}}class IC{constructor(e){this.key=e}}class w9{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ge(),this.mutatedKeys=ge(),this.eu=pR(e),this.tu=new Na(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new QI,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{const p=i.get(d),m=Hu(this.query,h)?h:null,E=!!p&&this.mutatedKeys.has(p.key),v=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let S=!1;p&&m?p.data.isEqual(m.data)?E!==v&&(r.track({type:3,doc:m}),S=!0):this.su(p,m)||(r.track({type:2,doc:m}),S=!0,(l&&this.eu(m,l)>0||u&&this.eu(m,u)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),S=!0):p&&!m&&(r.track({type:1,doc:p}),S=!0,(l||u)&&(a=!0)),S&&(m?(o=o.add(m),s=v?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{tu:o,iu:r,Cs:a,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((d,h)=>function(m,E){const v=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te(20277,{Rt:S})}};return v(m)-v(E)}(d.type,h.type)||this.eu(d.doc,h.doc)),this.ou(r),i=i??!1;const a=n&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new pl(this.query,e.tu,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new QI,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ge(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new IC(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new TC(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=ge();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return pl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Ol="SyncEngine";class E9{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class T9{constructor(e){this.key=e,this.hu=!1}}class I9{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new _i(a=>hR(a),Pp),this.Iu=new Map,this.Eu=new Set,this.du=new Ue(Y.comparator),this.Au=new Map,this.Ru=new K_,this.Vu={},this.mu=new Map,this.fu=Lo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function S9(t,e,n=!0){const r=Lp(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await SC(r,e,n,!0),i}async function A9(t,e){const n=Lp(t);await SC(n,e,!0,!1)}async function SC(t,e,n,r){const i=await Cf(t.localStore,Cn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await aw(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Vp(t.remoteStore,i),a}async function aw(t,e,n,r,i){t.pu=(h,p,m)=>async function(v,S,_,y){let I=S.view.ru(_);I.Cs&&(I=await qy(v.localStore,S.query,!1).then(({documents:T})=>S.view.ru(T,I)));const D=y&&y.targetChanges.get(S.targetId),N=y&&y.targetMismatches.get(S.targetId)!=null,V=S.view.applyChanges(I,v.isPrimaryClient,D,N);return Qy(v,S.targetId,V.au),V.snapshot}(t,h,p,m);const s=await qy(t.localStore,e,!0),o=new w9(e,s.Qs),a=o.ru(s.documents),l=Gu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);Qy(t,n,u.au);const d=new E9(e,n,o);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function x9(t,e,n){const r=re(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!Pp(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await hl(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&fl(r.remoteStore,i.targetId),ml(r,i.targetId)}).catch(Vs)):(ml(r,i.targetId),await hl(r.localStore,i.targetId,!0))}async function P9(t,e){const n=re(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),fl(n.remoteStore,r.targetId))}async function b9(t,e,n){const r=dw(t);try{const i=await function(o,a){const l=re(o),u=Re.now(),d=a.reduce((m,E)=>m.add(E.key),ge());let h,p;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let E=Pn(),v=ge();return l.Ns.getEntries(m,d).next(S=>{E=S,E.forEach((_,y)=>{y.isValidDocument()||(v=v.add(_))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,E)).next(S=>{h=S;const _=[];for(const y of a){const I=Y5(y,h.get(y.key).overlayedDocument);I!=null&&_.push(new wi(y.key,I,nR(I.value.mapValue),Kt.exists(!0)))}return l.mutationQueue.addMutationBatch(m,u,_,a)}).next(S=>{p=S;const _=S.applyToLocalDocumentSet(h,v);return l.documentOverlayCache.saveOverlays(m,S.batchId,_)})}).then(()=>({batchId:p.batchId,changes:gR(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Vu[o.currentUser.toKey()];u||(u=new Ue(he)),u=u.insert(a,l),o.Vu[o.currentUser.toKey()]=u}(r,i.batchId,n),await Fs(r,i.changes),await Dl(r.remoteStore)}catch(i){const s=Mp(i,"Failed to persist write");n.reject(s)}}async function AC(t,e){const n=re(t);try{const r=await Hj(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Au.get(s);o&&(oe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?oe(o.hu,14607):i.removedDocuments.size>0&&(oe(o.hu,42227),o.hu=!1))}),await Fs(n,r,e)}catch(r){await Vs(r)}}function XI(t,e,n){const r=re(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,o)=>{const a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=re(o);l.onlineState=a;let u=!1;l.queries.forEach((d,h)=>{for(const p of h.Sa)p.va(a)&&(u=!0)}),u&&sw(l)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function R9(t,e,n){const r=re(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new Ue(Y.comparator);o=o.insert(s,at.newNoDocument(s,le.min()));const a=ge().add(s),l=new Ku(le.min(),new Map,new Ue(he),o,a);await AC(r,l),r.du=r.du.remove(s),r.Au.delete(e),uw(r)}else await hl(r.localStore,e,!1).then(()=>ml(r,e,n)).catch(Vs)}async function C9(t,e){const n=re(t),r=e.batch.batchId;try{const i=await Wj(n.localStore,e);cw(n,r,null),lw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Fs(n,i)}catch(i){await Vs(i)}}async function k9(t,e,n){const r=re(t);try{const i=await function(o,a){const l=re(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return l.mutationQueue.lookupMutationBatch(u,a).next(h=>(oe(h!==null,37113),d=h.keys(),l.mutationQueue.removeMutationBatch(u,h))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>l.localDocuments.getDocuments(u,d))})}(r.localStore,e);cw(r,e,n),lw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Fs(r,i)}catch(i){await Vs(i)}}function lw(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function cw(t,e,n){const r=re(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function ml(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||xC(t,r)})}function xC(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(fl(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),uw(t))}function Qy(t,e,n){for(const r of n)r instanceof TC?(t.Ru.addReference(r.key,e),D9(t,r)):r instanceof IC?(q(Ol,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||xC(t,r.key)):te(19791,{wu:r})}function D9(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(q(Ol,"New document in limbo: "+n),t.Eu.add(r),uw(t))}function uw(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Y(be.fromString(e)),r=t.fu.next();t.Au.set(r,new T9(n)),t.du=t.du.insert(n,r),Vp(t.remoteStore,new ti(Cn(Wu(n.path)),r,"TargetPurposeLimboResolution",un.ce))}}async function Fs(t,e,n){const r=re(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{o.push(r.pu(l,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const h=u?!u.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){i.push(u);const h=Y_.As(l.targetId,u);s.push(h)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(l,u){const d=re(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>M.forEach(u,p=>M.forEach(p.Es,m=>d.persistence.referenceDelegate.addReference(h,p.targetId,m)).next(()=>M.forEach(p.ds,m=>d.persistence.referenceDelegate.removeReference(h,p.targetId,m)))))}catch(h){if(!Ms(h))throw h;q(J_,"Failed to update sequence numbers: "+h)}for(const h of u){const p=h.targetId;if(!h.fromCache){const m=d.Ms.get(p),E=m.snapshotVersion,v=m.withLastLimboFreeSnapshotVersion(E);d.Ms=d.Ms.insert(p,v)}}}(r.localStore,s))}async function N9(t,e){const n=re(t);if(!n.currentUser.isEqual(e)){q(Ol,"User change. New user:",e.toKey());const r=await sC(n.localStore,e);n.currentUser=e,function(s,o){s.mu.forEach(a=>{a.forEach(l=>{l.reject(new G(j.CANCELLED,o))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Fs(n,r.Ls)}}function O9(t,e){const n=re(t),r=n.Au.get(e);if(r&&r.hu)return ge().add(r.key);{let i=ge();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const a=n.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}async function V9(t,e){const n=re(t),r=await qy(n.localStore,e.query,!0),i=e.view.cu(r);return n.isPrimaryClient&&Qy(n,e.targetId,i.au),i}async function M9(t,e){const n=re(t);return lC(n.localStore,e).then(r=>Fs(n,r))}async function L9(t,e,n,r){const i=re(t),s=await function(a,l){const u=re(a),d=re(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.er(h,l).next(p=>p?u.localDocuments.getDocuments(h,p):M.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await Dl(i.remoteStore):n==="acknowledged"||n==="rejected"?(cw(i,e,r||null),lw(i,e),function(a,l){re(re(a).mutationQueue).ir(l)}(i.localStore,e)):te(6720,"Unknown batchState",{Su:n}),await Fs(i,s)):q(Ol,"Cannot apply mutation batch with id: "+e)}async function F9(t,e){const n=re(t);if(Lp(n),dw(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await ZI(n,r.toArray());n.gu=!0,await Ky(n.remoteStore,!0);for(const s of i)Vp(n.remoteStore,s)}else if(e===!1&&n.gu!==!1){const r=[];let i=Promise.resolve();n.Iu.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(ml(n,o),hl(n.localStore,o,!0))),fl(n.remoteStore,o)}),await i,await ZI(n,r),function(o){const a=re(o);a.Au.forEach((l,u)=>{fl(a.remoteStore,u)}),a.Ru.Jr(),a.Au=new Map,a.du=new Ue(Y.comparator)}(n),n.gu=!1,await Ky(n.remoteStore,!1)}}async function ZI(t,e,n){const r=re(t),i=[],s=[];for(const o of e){let a;const l=r.Iu.get(o);if(l&&l.length!==0){a=await Cf(r.localStore,Cn(l[0]));for(const u of l){const d=r.Tu.get(u),h=await V9(r,d);h.snapshot&&s.push(h.snapshot)}}else{const u=await aC(r.localStore,o);a=await Cf(r.localStore,u),await aw(r,PC(u),o,!1,a.resumeToken)}i.push(a)}return r.Pu.H_(s),i}function PC(t){return uR(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function U9(t){return function(n){return re(re(n).persistence).Ts()}(re(t).localStore)}async function j9(t,e,n,r){const i=re(t);if(i.gu)return void q(Ol,"Ignoring unexpected query state notification.");const s=i.Iu.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await lC(i.localStore,fR(s[0])),a=Ku.createSynthesizedRemoteEventForCurrentChange(e,n==="current",lt.EMPTY_BYTE_STRING);await Fs(i,o,a);break}case"rejected":await hl(i.localStore,e,!0),ml(i,e,r);break;default:te(64155,n)}}async function B9(t,e,n){const r=Lp(t);if(r.gu){for(const i of e){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){q(Ol,"Adding an already active target "+i);continue}const s=await aC(r.localStore,i),o=await Cf(r.localStore,s);await aw(r,PC(s),o.targetId,!1,o.resumeToken),Vp(r.remoteStore,o)}for(const i of n)r.Iu.has(i)&&await hl(r.localStore,i,!1).then(()=>{fl(r.remoteStore,i),ml(r,i)}).catch(Vs)}}function Lp(t){const e=re(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=AC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=O9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=R9.bind(null,e),e.Pu.H_=v9.bind(null,e.eventManager),e.Pu.yu=_9.bind(null,e.eventManager),e}function dw(t){const e=re(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=C9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=k9.bind(null,e),e}class Su{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Op(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return iC(this.persistence,new rC,e.initialUser,this.serializer)}Cu(e){return new G_(Np.mi,this.serializer)}Du(e){return new fC}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Su.provider={build:()=>new Su};class $9 extends Su{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){oe(this.persistence.referenceDelegate instanceof Rf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new JR(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?zt.withCacheSize(this.cacheSizeBytes):zt.DEFAULT;return new G_(r=>Rf.mi(r,n),this.serializer)}}class bC extends Su{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await dw(this.xu.syncEngine),await Dl(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return iC(this.persistence,new rC,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new JR(r,e.asyncQueue,n)}Mu(e,n){const r=new Z6(n,this.persistence);return new X6(e.asyncQueue,r)}Cu(e){const n=nC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?zt.withCacheSize(this.cacheSizeBytes):zt.DEFAULT;return new Q_(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,pC(),xh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new fC}}class z9 extends bC{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof ng&&(this.sharedClientState.syncEngine={Co:L9.bind(null,n),vo:j9.bind(null,n),Fo:B9.bind(null,n),Ts:U9.bind(null,n),Do:M9.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji(async r=>{await F9(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Du(e){const n=pC();if(!ng.v(n))throw new G(j.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=nC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ng(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Au{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>XI(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=N9.bind(null,this.syncEngine),await Ky(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new y9}()}createDatastore(e){const n=Op(e.databaseInfo.databaseId),r=function(s){return new Zj(s)}(e.databaseInfo);return function(s,o,a,l){return new r9(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new s9(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>XI(this.syncEngine,n,0),function(){return HI.v()?new HI:new Qj}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,d){const h=new I9(i,s,o,a,l,u);return d&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=re(i);q(Fo,"RemoteStore shutting down."),s.Ea.add(5),await kl(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Au.provider={build:()=>new Au};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ht("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs="FirestoreClient";class q9{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=$t.UNAUTHENTICATED,this.clientId=vp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{q(xs,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(q(xs,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Mp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ig(t,e){t.asyncQueue.verifyOperationInProgress(),q(xs,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await sC(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function e1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await fw(t);q(xs,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>GI(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>GI(e.remoteStore,i)),t._onlineComponents=e}async function fw(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){q(xs,"Using user provided OfflineComponentProvider");try{await ig(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===j.FAILED_PRECONDITION||i.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Es("Error using user provided cache. Falling back to memory cache: "+n),await ig(t,new Su)}}else q(xs,"Using default OfflineComponentProvider"),await ig(t,new $9(void 0));return t._offlineComponents}async function pw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(q(xs,"Using user provided OnlineComponentProvider"),await e1(t,t._uninitializedComponentsProvider._online)):(q(xs,"Using default OnlineComponentProvider"),await e1(t,new Au))),t._onlineComponents}function RC(t){return fw(t).then(e=>e.persistence)}function W9(t){return fw(t).then(e=>e.localStore)}function CC(t){return pw(t).then(e=>e.remoteStore)}function H9(t){return pw(t).then(e=>e.syncEngine)}async function Of(t){const e=await pw(t),n=e.eventManager;return n.onListen=S9.bind(null,e.syncEngine),n.onUnlisten=x9.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=A9.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=P9.bind(null,e.syncEngine),n}function K9(t){return t.asyncQueue.enqueue(async()=>{const e=await RC(t),n=await CC(t);return e.setNetworkEnabled(!0),function(i){const s=re(i);return s.Ea.delete(0),Qu(s)}(n)})}function G9(t){return t.asyncQueue.enqueue(async()=>{const e=await RC(t),n=await CC(t);return e.setNetworkEnabled(!1),async function(i){const s=re(i);s.Ea.add(0),await kl(s),s.Ra.set("Offline")}(n)})}function Q9(t,e){const n=new or;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await function(u,d){const h=re(u);return h.persistence.runTransaction("read document","readonly",p=>h.localDocuments.getDocument(p,d))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new G(j.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=Mp(a,`Failed to get document '${s} from cache`);o.reject(l)}}(await W9(t),e,n)),n.promise}function Y9(t,e,n={}){const r=new or;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const d=new hw({next:p=>{d.Nu(),o.enqueueAndForget(()=>iw(s,h));const m=p.docs.has(a);!m&&p.fromCache?u.reject(new G(j.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&l&&l.source==="server"?u.reject(new G(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),h=new ow(Wu(a.path),d,{includeMetadataChanges:!0,qa:!0});return rw(s,h)}(await Of(t),t.asyncQueue,e,n,r)),r.promise}function J9(t,e,n={}){const r=new or;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const d=new hw({next:p=>{d.Nu(),o.enqueueAndForget(()=>iw(s,h)),p.fromCache&&l.source==="server"?u.reject(new G(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),h=new ow(a,d,{includeMetadataChanges:!0,qa:!0});return rw(s,h)}(await Of(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X9="firestore.googleapis.com",n1=!0;class r1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new G(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=X9,this.ssl=n1}else this.host=e.host,this.ssl=e.ssl??n1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=HR;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<YR)throw new G(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Rb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kC(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new G(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new G(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new G(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mw{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new r1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new r1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new xb;switch(r.type){case"firstParty":return new z6(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=t1.get(n);r&&(q("ComponentProvider","Removing Datastore"),t1.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new jr(this.firestore,e,this._query)}}class Ye{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ii(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ye(this.firestore,e,this._key)}toJSON(){return{type:Ye._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if($u(n,Ye._jsonSchema))return new Ye(e,r||null,new Y(be.fromString(n.referencePath)))}}Ye._jsonSchemaVersion="firestore/documentReference/1.0",Ye._jsonSchema={type:yt("string",Ye._jsonSchemaVersion),referencePath:yt("string")};class ii extends jr{constructor(e,n,r){super(e,n,Wu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ye(this.firestore,null,new Y(e))}withConverter(e){return new ii(this.firestore,e,this._path)}}function Oe(t,e,...n){if(t=Je(t),bb("collection","path",e),t instanceof mw){const r=be.fromString(e,...n);return KT(r),new ii(t,null,r)}{if(!(t instanceof Ye||t instanceof ii))throw new G(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(be.fromString(e,...n));return KT(r),new ii(t.firestore,null,r)}}function Te(t,e,...n){if(t=Je(t),arguments.length===1&&(e=vp.newId()),bb("doc","path",e),t instanceof mw){const r=be.fromString(e,...n);return HT(r),new Ye(t,null,new Y(r))}{if(!(t instanceof Ye||t instanceof ii))throw new G(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(be.fromString(e,...n));return HT(r),new Ye(t.firestore,t instanceof ii?t.converter:null,new Y(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1="AsyncQueue";class s1{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new mC(this,"async_queue_retry"),this._c=()=>{const r=xh();r&&q(i1,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=xh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=xh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new or;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ms(e))throw e;q(i1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,ht("INTERNAL UNHANDLED ERROR: ",o1(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=nw.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&te(47125,{Pc:o1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function o1(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a1(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class gn extends mw{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new s1,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new s1(e),this._firestoreClient=void 0,await e}}}function DC(t,e,n){n||(n=wf);const r=pp(t,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(Ro(s,e))return i;throw new G(j.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new G(j.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<YR)throw new G(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Ns(e.host)&&g_(e.host),r.initialize({options:e,instanceIdentifier:n})}function Us(t){if(t._terminated)throw new G(j.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||NC(t),t._firestoreClient}function NC(t){var r,i,s;const e=t._freezeSettings(),n=function(a,l,u,d){return new P5(a,l,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,kC(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new q9(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}function OC(t,e){Es("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return MC(t,Au.provider,{build:r=>new bC(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function VC(t){Es("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();MC(t,Au.provider,{build:n=>new z9(n,e.cacheSizeBytes)})}function MC(t,e,n){if((t=Et(t,gn))._firestoreClient||t._terminated)throw new G(j.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new G(j.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},NC(t)}function gw(t){return K9(Us(t=Et(t,gn)))}function yw(t){return G9(Us(t=Et(t,gn)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this._byteString=e}static fromBase64String(e){try{return new An(lt.fromBase64String(e))}catch(n){throw new G(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new An(lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:An._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if($u(e,An._jsonSchema))return An.fromBase64String(e.bytes)}}An._jsonSchemaVersion="firestore/bytes/1.0",An._jsonSchema={type:yt("string",An._jsonSchemaVersion),bytes:yt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new G(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new G(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new G(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return he(this._lat,e._lat)||he(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ar._jsonSchemaVersion}}static fromJSON(e){if($u(e,ar._jsonSchema))return new ar(e.latitude,e.longitude)}}ar._jsonSchemaVersion="firestore/geoPoint/1.0",ar._jsonSchema={type:yt("string",ar._jsonSchemaVersion),latitude:yt("number"),longitude:yt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:lr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if($u(e,lr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new lr(e.vectorValues);throw new G(j.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}lr._jsonSchemaVersion="firestore/vectorValue/1.0",lr._jsonSchema={type:yt("string",lr._jsonSchemaVersion),vectorValues:yt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z9=/^__.*__$/;class eB{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new wi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Cl(e,this.data,n,this.fieldTransforms)}}class LC{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new wi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function FC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te(40011,{Ac:t})}}class vw{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new vw({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Vf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(FC(this.Ac)&&Z9.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class tB{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Op(e)}Cc(e,n,r,i=!1){return new vw({Ac:e,methodName:n,Dc:r,path:Qe.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Fp(t){const e=t._freezeSettings(),n=Op(t._databaseId);return new tB(t._databaseId,!!e.ignoreUndefinedProperties,n)}function UC(t,e,n,r,i,s={}){const o=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);ww("Data must be an object, but it was:",o,r);const a=jC(r,o);let l,u;if(s.merge)l=new dn(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const h of s.mergeFields){const p=Yy(e,h,n);if(!o.contains(p))throw new G(j.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);$C(d,p)||d.push(p)}l=new dn(d),u=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=o.fieldTransforms;return new eB(new Wt(a),l,u)}class Up extends Ju{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Up}}class _w extends Ju{_toFieldTransform(e){return new IR(e.path,new ll)}isEqual(e){return e instanceof _w}}function nB(t,e,n,r){const i=t.Cc(1,e,n);ww("Data must be an object, but it was:",i,r);const s=[],o=Wt.empty();Ls(r,(l,u)=>{const d=Ew(e,l,n);u=Je(u);const h=i.yc(d);if(u instanceof Up)s.push(d);else{const p=Xu(u,h);p!=null&&(s.push(d),o.set(d,p))}});const a=new dn(s);return new LC(o,a,i.fieldTransforms)}function rB(t,e,n,r,i,s){const o=t.Cc(1,e,n),a=[Yy(e,r,n)],l=[i];if(s.length%2!=0)throw new G(j.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(Yy(e,s[p])),l.push(s[p+1]);const u=[],d=Wt.empty();for(let p=a.length-1;p>=0;--p)if(!$C(u,a[p])){const m=a[p];let E=l[p];E=Je(E);const v=o.yc(m);if(E instanceof Up)u.push(m);else{const S=Xu(E,v);S!=null&&(u.push(m),d.set(m,S))}}const h=new dn(u);return new LC(d,h,o.fieldTransforms)}function iB(t,e,n,r=!1){return Xu(n,t.Cc(r?4:3,e))}function Xu(t,e){if(BC(t=Je(t)))return ww("Unsupported field value:",e,t),jC(t,e);if(t instanceof Ju)return function(r,i){if(!FC(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Xu(a,i.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Je(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return q5(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Re.fromDate(r);return{timestampValue:dl(i.serializer,s)}}if(r instanceof Re){const s=new Re(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:dl(i.serializer,s)}}if(r instanceof ar)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof An)return{bytesValue:CR(i.serializer,r._byteString)};if(r instanceof Ye){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:q_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof lr)return function(o,a){return{mapValue:{fields:{[V_]:{stringValue:M_},[il]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Sc("VectorValues must only contain numeric values.");return U_(a.serializer,u)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${_p(r)}`)}(t,e)}function jC(t,e){const n={};return Kb(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ls(t,(r,i)=>{const s=Xu(i,e.mc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function BC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Re||t instanceof ar||t instanceof An||t instanceof Ye||t instanceof Ju||t instanceof lr)}function ww(t,e,n){if(!BC(n)||!Cb(n)){const r=_p(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Yy(t,e,n){if((e=Je(e))instanceof Yu)return e._internalPath;if(typeof e=="string")return Ew(t,e);throw Vf("Field path arguments must be of type string or ",t,!1,void 0,n)}const sB=new RegExp("[~\\*/\\[\\]]");function Ew(t,e,n){if(e.search(sB)>=0)throw Vf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Yu(...e.split("."))._internalPath}catch{throw Vf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Vf(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new G(j.INVALID_ARGUMENT,a+t+l)}function $C(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ye(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new oB(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(jp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class oB extends zC{data(){return super.data()}}function jp(t,e){return typeof e=="string"?Ew(t,e):e instanceof Yu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qC(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new G(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Tw{}class Bp extends Tw{}function ct(t,e,...n){let r=[];e instanceof Tw&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof $p).length,a=s.filter(l=>l instanceof Zu).length;if(o>1||o>0&&a>0)throw new G(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Zu extends Bp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Zu(e,n,r)}_apply(e){const n=this._parse(e);return WC(e._query,n),new jr(e.firestore,e.converter,My(e._query,n))}_parse(e){const n=Fp(e.firestore);return function(s,o,a,l,u,d,h){let p;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new G(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){c1(h,d);const E=[];for(const v of h)E.push(l1(l,s,v));p={arrayValue:{values:E}}}else p=l1(l,s,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||c1(h,d),p=iB(a,o,h,d==="in"||d==="not-in");return _e.create(u,d,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function mt(t,e,n){const r=e,i=jp("where",t);return Zu._create(i,r,n)}class $p extends Tw{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new $p(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ke.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)WC(o,l),o=My(o,l)}(e._query,n),new jr(e.firestore,e.converter,My(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class zp extends Bp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new zp(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new G(j.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new G(j.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Tu(s,o)}(e._query,this._field,this._direction);return new jr(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Rl(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Or(t,e="asc"){const n=e,r=jp("orderBy",t);return zp._create(r,n)}class qp extends Bp{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new qp(e,n,r)}_apply(e){return new jr(e.firestore,e.converter,If(e._query,this._limit,this._limitType))}}function ed(t){return Q6("limit",t),qp._create("limit",t,"F")}function l1(t,e,n){if(typeof(n=Je(n))=="string"){if(n==="")throw new G(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!dR(e)&&n.indexOf("/")!==-1)throw new G(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(be.fromString(n));if(!Y.isDocumentKey(r))throw new G(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return wu(t,new Y(r))}if(n instanceof Ye)return wu(t,n._key);throw new G(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_p(n)}.`)}function c1(t,e){if(!Array.isArray(t)||t.length===0)throw new G(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function WC(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new G(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class HC{convertValue(e,n="none"){switch(Is(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ke(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(mi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw te(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ls(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[il].arrayValue)==null?void 0:i.values)==null?void 0:s.map(o=>Ke(o.doubleValue));return new lr(n)}convertGeoPoint(e){return new ar(Ke(e.latitude),Ke(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Ap(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(vu(e));default:return null}}convertTimestamp(e){const n=pi(e);return new Re(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=be.fromString(e);oe(jR(r),9688,{name:e});const i=new Ts(r.get(1),r.get(3)),s=new Y(r.popFirst(5));return i.isEqual(n)||ht(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KC(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class uo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class si extends zC{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Bc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(jp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new G(j.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=si._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}si._jsonSchemaVersion="firestore/documentSnapshot/1.0",si._jsonSchema={type:yt("string",si._jsonSchemaVersion),bundleSource:yt("string","DocumentSnapshot"),bundleName:yt("string"),bundle:yt("string")};class Bc extends si{data(e={}){return super.data(e)}}class fs{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new uo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Bc(this._firestore,this._userDataWriter,r.key,r,new uo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new G(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Bc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new uo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Bc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new uo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,d=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:aB(a.type),doc:l,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new G(j.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=fs._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=vp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function aB(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(t){t=Et(t,Ye);const e=Et(t.firestore,gn);return Y9(Us(e),t._key).then(n=>QC(e,t,n))}fs._jsonSchemaVersion="firestore/querySnapshot/1.0",fs._jsonSchema={type:yt("string",fs._jsonSchemaVersion),bundleSource:yt("string","QuerySnapshot"),bundleName:yt("string"),bundle:yt("string")};class Wp extends HC{constructor(e){super(),this.firestore=e}convertBytes(e){return new An(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ye(this.firestore,null,n)}}function GC(t){t=Et(t,Ye);const e=Et(t.firestore,gn),n=Us(e),r=new Wp(e);return Q9(n,t._key).then(i=>new si(e,r,t._key,i,new uo(i!==null&&i.hasLocalMutations,!0),t.converter))}function ut(t){t=Et(t,jr);const e=Et(t.firestore,gn),n=Us(e),r=new Wp(e);return qC(t._query),J9(n,t._query).then(i=>new fs(e,r,t,i))}function gl(t,e,n){t=Et(t,Ye);const r=Et(t.firestore,gn),i=KC(t.converter,e,n);return td(r,[UC(Fp(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Kt.none())])}function Ht(t,e,n,...r){t=Et(t,Ye);const i=Et(t.firestore,gn),s=Fp(i);let o;return o=typeof(e=Je(e))=="string"||e instanceof Yu?rB(s,"updateDoc",t._key,e,n,r):nB(s,"updateDoc",t._key,e),td(i,[o.toMutation(t._key,Kt.exists(!0))])}function nr(t){return td(Et(t.firestore,gn),[new Cp(t._key,Kt.none())])}function Ps(t,e){const n=Et(t.firestore,gn),r=Te(t),i=KC(t.converter,e);return td(n,[UC(Fp(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Kt.exists(!1))]).then(()=>r)}function Jy(t,...e){var l,u,d;t=Je(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||a1(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(a1(e[r])){const h=e[r];e[r]=(l=h.next)==null?void 0:l.bind(h),e[r+1]=(u=h.error)==null?void 0:u.bind(h),e[r+2]=(d=h.complete)==null?void 0:d.bind(h)}let s,o,a;if(t instanceof Ye)o=Et(t.firestore,gn),a=Wu(t._key.path),s={next:h=>{e[r]&&e[r](QC(o,t,h))},error:e[r+1],complete:e[r+2]};else{const h=Et(t,jr);o=Et(h.firestore,gn),a=h._query;const p=new Wp(o);s={next:m=>{e[r]&&e[r](new fs(o,p,h,m))},error:e[r+1],complete:e[r+2]},qC(t._query)}return function(p,m,E,v){const S=new hw(v),_=new ow(m,S,E);return p.asyncQueue.enqueueAndForget(async()=>rw(await Of(p),_)),()=>{S.Nu(),p.asyncQueue.enqueueAndForget(async()=>iw(await Of(p),_))}}(Us(o),a,i,s)}function td(t,e){return function(r,i){const s=new or;return r.asyncQueue.enqueueAndForget(async()=>b9(await H9(r),i,s)),s.promise}(Us(t),e)}function QC(t,e,n){const r=n.docs.get(e._key),i=new Wp(t);return new si(t,i,e._key,r,new uo(n.hasPendingWrites,n.fromCache),e.converter)}function xe(){return new _w("serverTimestamp")}(function(e,n=!0){(function(i){bl=i})(xl),Co(new ws("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new gn(new B6(r.getProvider("auth-internal")),new q6(o,r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new G(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ts(u.options.projectId,d)}(o,i),o);return s={useFetchStreams:n,...s},a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),kr($T,zT,e),kr($T,zT,"esm2020")})();const u1=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:HC,Bytes:An,CollectionReference:ii,DocumentReference:Ye,DocumentSnapshot:si,FieldPath:Yu,FieldValue:Ju,Firestore:gn,FirestoreError:G,GeoPoint:ar,Query:jr,QueryCompositeFilterConstraint:$p,QueryConstraint:Bp,QueryDocumentSnapshot:Bc,QueryFieldFilterConstraint:Zu,QueryLimitConstraint:qp,QueryOrderByConstraint:zp,QuerySnapshot:fs,SnapshotMetadata:uo,Timestamp:Re,VectorValue:lr,_AutoId:vp,_ByteString:lt,_DatabaseId:Ts,_DocumentKey:Y,_EmptyAuthCredentialsProvider:xb,_FieldPath:Qe,_cast:Et,_logWarn:Es,_validateIsNotUsedTogether:Rb,addDoc:Ps,collection:Oe,deleteDoc:nr,disableNetwork:yw,doc:Te,enableIndexedDbPersistence:OC,enableMultiTabIndexedDbPersistence:VC,enableNetwork:gw,ensureFirestoreConfigured:Us,executeWrite:td,getDoc:xt,getDocFromCache:GC,getDocs:ut,initializeFirestore:DC,limit:ed,onSnapshot:Jy,orderBy:Or,query:ct,serverTimestamp:xe,setDoc:gl,updateDoc:Ht,where:mt},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lB="type.googleapis.com/google.protobuf.Int64Value",cB="type.googleapis.com/google.protobuf.UInt64Value";function YC(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function Mf(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>Mf(e));if(typeof t=="function"||typeof t=="object")return YC(t,e=>Mf(e));throw new Error("Data cannot be encoded in JSON: "+t)}function yl(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case lB:case cB:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>yl(e)):typeof t=="function"||typeof t=="object"?YC(t,e=>yl(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class hn extends Fr{constructor(e,n,r){super(`${Iw}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,hn.prototype)}}function uB(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Lf(t,e){let n=uB(t),r=n,i;try{const s=e&&e.error;if(s){const o=s.status;if(typeof o=="string"){if(!d1[o])return new hn("internal","internal");n=d1[o],r=o}const a=s.message;typeof a=="string"&&(r=a),i=s.details,i!==void 0&&(i=yl(i))}}catch{}return n==="ok"?null:new hn(n,r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dB{constructor(e,n,r,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Sn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(s=>this.auth=s,()=>{}),this.messaging||r.get().then(s=>this.messaging=s,()=>{}),this.appCheck||i==null||i.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xy="us-central1",hB=/^data: (.*?)(?:\n|$)/;function fB(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new hn("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class pB{constructor(e,n,r,i,s=Xy,o=(...a)=>fetch(...a)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new dB(e,n,r,i),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(s);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=Xy}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function mB(t,e,n){const r=Ns(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(g_(t.emulatorOrigin+"/backends"),PP("Functions",!0))}function gB(t,e,n){const r=i=>vB(t,e,i,{});return r.stream=(i,s)=>wB(t,e,i,s),r}function JC(t){return t.emulatorOrigin&&Ns(t.emulatorOrigin)?"include":void 0}async function yB(t,e,n,r,i){n["Content-Type"]="application/json";let s;try{s=await r(t,{method:"POST",body:JSON.stringify(e),headers:n,credentials:JC(i)})}catch{return{status:0,json:null}}let o=null;try{o=await s.json()}catch{}return{status:s.status,json:o}}async function XC(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function vB(t,e,n,r){const i=t._url(e);return _B(t,i,n,r)}async function _B(t,e,n,r){n=Mf(n);const i={data:n},s=await XC(t,r),o=r.timeout||7e4,a=fB(o),l=await Promise.race([yB(e,i,s,t.fetchImpl,t),a.promise,t.cancelAllRequests]);if(a.cancel(),!l)throw new hn("cancelled","Firebase Functions instance was deleted.");const u=Lf(l.status,l.json);if(u)throw u;if(!l.json)throw new hn("internal","Response is not valid JSON object.");let d=l.json.data;if(typeof d>"u"&&(d=l.json.result),typeof d>"u")throw new hn("internal","Response is missing data field.");return{data:yl(d)}}function wB(t,e,n,r){const i=t._url(e);return EB(t,i,n,r||{})}async function EB(t,e,n,r){var p;n=Mf(n);const i={data:n},s=await XC(t,r);s["Content-Type"]="application/json",s.Accept="text/event-stream";let o;try{o=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(i),headers:s,signal:r==null?void 0:r.signal,credentials:JC(t)})}catch(m){if(m instanceof Error&&m.name==="AbortError"){const v=new hn("cancelled","Request was cancelled.");return{data:Promise.reject(v),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(v)}}}}}}const E=Lf(0,null);return{data:Promise.reject(E),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(E)}}}}}}let a,l;const u=new Promise((m,E)=>{a=m,l=E});(p=r==null?void 0:r.signal)==null||p.addEventListener("abort",()=>{const m=new hn("cancelled","Request was cancelled.");l(m)});const d=o.body.getReader(),h=TB(d,a,l,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const m=h.getReader();return{async next(){const{value:E,done:v}=await m.read();return{value:E,done:v}},async return(){return await m.cancel(),{done:!0,value:void 0}}}}},data:u}}function TB(t,e,n,r){const i=(o,a)=>{const l=o.match(hB);if(!l)return;const u=l[1];try{const d=JSON.parse(u);if("result"in d){e(yl(d.result));return}if("message"in d){a.enqueue(yl(d.message));return}if("error"in d){const h=Lf(0,d);a.error(h),n(h);return}}catch(d){if(d instanceof hn){a.error(d),n(d);return}}},s=new TextDecoder;return new ReadableStream({start(o){let a="";return l();async function l(){if(r!=null&&r.aborted){const u=new hn("cancelled","Request was cancelled");return o.error(u),n(u),Promise.resolve()}try{const{value:u,done:d}=await t.read();if(d){a.trim()&&i(a.trim(),o),o.close();return}if(r!=null&&r.aborted){const p=new hn("cancelled","Request was cancelled");o.error(p),n(p),await t.cancel();return}a+=s.decode(u,{stream:!0});const h=a.split(`
`);a=h.pop()||"";for(const p of h)p.trim()&&i(p.trim(),o);return l()}catch(u){const d=u instanceof hn?u:Lf(0,null);o.error(d),n(d)}}},cancel(){return t.cancel()}})}const h1="@firebase/functions",f1="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IB="auth-internal",SB="app-check-internal",AB="messaging-internal";function xB(t){const e=(n,{instanceIdentifier:r})=>{const i=n.getProvider("app").getImmediate(),s=n.getProvider(IB),o=n.getProvider(AB),a=n.getProvider(SB);return new pB(i,s,o,a,r)};Co(new ws(Iw,e,"PUBLIC").setMultipleInstances(!0)),kr(h1,f1,t),kr(h1,f1,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PB(t=VP(),e=Xy){const r=pp(Je(t),Iw).getImmediate({identifier:e}),i=YF("functions");return i&&bB(r,...i),r}function bB(t,e,n){mB(Je(t),e,n)}function $$(t,e,n){return gB(Je(t),e)}xB();let cc=!1;const RB=async()=>{var t,e;if(cc){console.log("ℹ️ Firestore persistence already enabled, skipping...");return}try{console.log("🔧 Configuring Firestore offline persistence...");try{await VC(ne),console.log("✅ Multi-tab offline persistence enabled"),cc=!0}catch(n){if((n==null?void 0:n.name)==="QuotaExceededError"||(t=n==null?void 0:n.message)!=null&&t.includes("QuotaExceededError")){console.log("⚠️ IndexedDB quota exceeded; skipping offline persistence");return}if(n.code==="failed-precondition"){console.log("⚠️ Multiple tabs detected, falling back to single tab persistence");try{await OC(ne),console.log("✅ Single-tab offline persistence enabled"),cc=!0}catch(r){(r==null?void 0:r.name)==="QuotaExceededError"||(e=r==null?void 0:r.message)!=null&&e.includes("QuotaExceededError")?console.log("⚠️ IndexedDB quota exceeded; skipping offline persistence"):r.code==="unimplemented"?console.log("ℹ️ Offline persistence not supported in this browser"):r.code==="failed-precondition"?(console.log("ℹ️ Firestore has already been started, persistence cannot be enabled"),cc=!0):console.error("❌ Failed to enable single-tab persistence:",r)}}else n.code==="unimplemented"?console.log("ℹ️ Offline persistence not supported in this browser"):n.code==="failed-precondition"?(console.log("ℹ️ Firestore has already been started, persistence cannot be enabled"),cc=!0):console.error("❌ Failed to enable multi-tab persistence:",n)}}catch(n){console.error("❌ Error configuring Firestore offline:",n)}},Zy={apiKey:"AIzaSyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s",authDomain:"voda-c6abd.firebaseapp.com",projectId:"voda-c6abd",storageBucket:"voda-c6abd.firebasestorage.app",messagingSenderId:"483702062341",appId:"1:483702062341:web:b1ff06ad175cb7ae428b6c"};console.log("🔥 Initializing Firebase with config:",{projectId:Zy.projectId,authDomain:Zy.authDomain,emulatorMode:!1});const Sw=OP(Zy),yr=M6(Sw),ne=DC(Sw,{experimentalAutoDetectLongPolling:!0}),CB=PB(Sw,"us-central1");console.log("✅ Firebase initialized successfully");const kB=async()=>{try{await RB(),console.log("✅ Firestore features configured successfully")}catch(t){console.error("❌ Error configuring Firestore features:",t)}};setTimeout(kB,100);let to=0;const sg=3,DB=1e3,ZC=async t=>{var e,n;if(console.error("🔥 Firestore connection error:",t),(t.code==="unavailable"||t.code==="failed-precondition"||(e=t.message)!=null&&e.includes("ERR_ABORTED")||(n=t.message)!=null&&n.includes("UNAVAILABLE"))&&to<sg){to++;const r=Math.min(DB*Math.pow(2,to-1),1e4);console.log(`🔄 Attempting to reconnect (${to}/${sg}) in ${r}ms...`);try{await yw(ne),await new Promise(i=>setTimeout(i,r)),await gw(ne),console.log("✅ Firestore reconnected successfully"),to=0}catch(i){console.error("❌ Failed to reconnect:",i),to>=sg&&(console.error("❌ Maximum reconnection attempts reached."),NB())}}},NB=()=>{const t=document.createElement("div");t.style.cssText=`
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #f8d7da;
    color: #721c24;
    padding: 20px;
    border-radius: 8px;
    border: 1px solid #f5c6cb;
    z-index: 10000;
    text-align: center;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    max-width: 400px;
  `,t.innerHTML=`
    <h3 style="margin: 0 0 10px 0;">مشكلة في الاتصال</h3>
    <p style="margin: 0 0 15px 0;">لا يمكن الاتصال بالخادم. يرجى التحقق من اتصال الإنترنت.</p>
    <button onclick="window.location.reload()" style="
      background: #dc3545;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
    ">إعادة تحميل الصفحة</button>
  `,document.body.appendChild(t),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},1e4)};window.addEventListener("online",async()=>{console.log("🌐 Network back online, enabling Firestore...");try{await gw(ne),to=0,console.log("✅ Firestore network enabled")}catch(t){console.error("❌ Failed to enable Firestore network:",t)}});window.addEventListener("offline",async()=>{console.log("🌐 Network offline, disabling Firestore network...");try{await yw(ne),console.log("✅ Firestore network disabled")}catch(t){console.error("❌ Failed to disable Firestore network:",t)}});window.addEventListener("unhandledrejection",t=>{var e,n,r,i,s,o;(((e=t.reason)==null?void 0:e.code)==="unavailable"||((n=t.reason)==null?void 0:n.code)==="failed-precondition"||(i=(r=t.reason)==null?void 0:r.message)!=null&&i.includes("ERR_ABORTED")||(o=(s=t.reason)==null?void 0:s.message)!=null&&o.includes("UNAVAILABLE"))&&(ZC(t.reason),t.preventDefault())});console.log("Using Firebase Production Environment");const p1=Object.freeze(Object.defineProperty({__proto__:null,auth:yr,db:ne,functions:CB,handleFirestoreError:ZC},Symbol.toStringTag,{value:"Module"})),Ze=t=>t&&t.toDate?t.toDate():new Date,OB=t=>{if(t===null)return!1;const e=Object.getPrototypeOf(t);return e===Object.prototype||e===null},Ff=t=>{if(t===void 0)return;if(t===null)return null;if(Array.isArray(t))return t.map(n=>Ff(n)).filter(n=>n!==void 0);if(t instanceof Date||!OB(t))return t;const e={};for(const[n,r]of Object.entries(t)){const i=Ff(r);i!==void 0&&(e[n]=i)}return e},m1={async create(t){await gl(Te(ne,"profiles",t.userId),{userId:t.userId,shopId:t.shopId,role:t.role,fullName:t.fullName,phone:t.phone,createdAt:xe()})},async getById(t){const e=Te(ne,"profiles",t),n=await xt(e);if(n.exists()){const r=n.data();return{userId:n.id,...r,createdAt:Ze(r.createdAt)}}return null},async update(t,e){const n=Te(ne,"profiles",t);await Ht(n,{...e,updatedAt:xe()})},async getByShopId(t){const e=ct(Oe(ne,"profiles"),mt("shopId","==",t));return(await ut(e)).docs.map(r=>{const i=r.data();return{userId:r.id,...i,createdAt:Ze(i.createdAt)}})}},og={async create(t){return(await Ps(Oe(ne,"referrals"),{...t,createdAt:xe(),updatedAt:xe()})).id},async getByReferrerId(t){const e=ct(Oe(ne,"referrals"),mt("referrerId","==",t),Or("createdAt","desc"));return(await ut(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:Ze(r.data().createdAt),updatedAt:Ze(r.data().updatedAt)}))},async getByReferralCode(t){const e=ct(Oe(ne,"referrals"),mt("referralCode","==",t),ed(1)),n=await ut(e);if(n.empty)return null;const r=n.docs[0];return{id:r.id,...r.data(),createdAt:Ze(r.data().createdAt),updatedAt:Ze(r.data().updatedAt)}},async updateStatus(t,e){await Ht(Te(ne,"referrals",t),{status:e,updatedAt:xe()})},generateReferralCode(t){const e=Date.now().toString(36);return`REF_${t.slice(-6)}_${e}`.toUpperCase()}},z$={async create(t){return(await Ps(Oe(ne,"merchantWallets"),{...t,transferLimit:t.transferLimit||2e5,withdrawLimit:t.withdrawLimit||2e5,transferUsage:t.transferUsage||0,withdrawUsage:t.withdrawUsage||0,createdAt:xe(),updatedAt:xe()})).id},async getByMerchantId(t){const e=ct(Oe(ne,"merchantWallets"),mt("merchantUserId","==",t),Or("createdAt","desc"));return(await ut(e)).docs.map(r=>{const i=r.data();return{id:r.id,...i,transferLimit:i.transferLimit||2e5,withdrawLimit:i.withdrawLimit||2e5,transferUsage:i.transferUsage||0,withdrawUsage:i.withdrawUsage||0,createdAt:Ze(i.createdAt),updatedAt:Ze(i.updatedAt)}})},async getById(t){const e=Te(ne,"merchantWallets",t),n=await xt(e);if(n.exists()){const r=n.data();return{id:n.id,...r,transferLimit:r.transferLimit||2e5,withdrawLimit:r.withdrawLimit||2e5,transferUsage:r.transferUsage||0,withdrawUsage:r.withdrawUsage||0,createdAt:Ze(r.createdAt),updatedAt:Ze(r.updatedAt)}}return null},async update(t,e){const n=Te(ne,"merchantWallets",t);await Ht(n,{...e,updatedAt:xe()})},async updateUsage(t,e,n){const r=Te(ne,"merchantWallets",t),i={updatedAt:xe()};e!==void 0&&(i.transferUsage=e),n!==void 0&&(i.withdrawUsage=n),await Ht(r,i)},async resetDailyUsage(t){const n=(await this.getByMerchantId(t)).map(r=>this.updateUsage(r.id,0,0));await Promise.all(n)},async delete(t){const e=Te(ne,"merchantWallets",t);await nr(e)}},VB={async create(t){try{console.log("Creating transaction:",t);const{calculateCommission:e,calculateProfit:n}=await Le(async()=>{const{calculateCommission:u,calculateProfit:d}=await import("./commissionCalculator-DbNVJv5a.js");return{calculateCommission:u,calculateProfit:d}},[]),r=t.commission!==void 0?t.commission:e(t.amount,t.txnType),i=n(t.amount,t.txnType),s=t.merchantUserId||t.createdBy;s||console.warn("⚠️ لا يوجد merchantUserId أو createdBy في بيانات المعاملة، سيتم إنشاء المعاملة بدون ربط مستخدم.");const o=Object.fromEntries(Object.entries(t).filter(([u,d])=>d!==void 0)),a={...o,merchantUserId:s,commission:r,profit:i,createdAt:xe(),confirmedAt:o.confirmedAt?xe():null},l=await Ps(Oe(ne,"transactions"),a);if(console.log("Transaction created with ID:",l.id,"Profit:",i),i>0){const{ProfitService:u}=await Le(async()=>{const{ProfitService:d}=await import("./profitService-CoFuE1nE.js");return{ProfitService:d}},__vite__mapDeps([0,1,2]));u.addProfit(i),console.log("✅ تم إضافة الربح إلى النظام:",i,"جنيه")}return await this.updateLineUsage(t.lineId,t.amount),l.id}catch(e){throw console.error("Error creating transaction:",e),e}},async updateLineUsage(t,e){try{console.log("Updating line usage:",{lineId:t,amount:e})}catch(n){console.error("Error updating line usage:",n)}},async getByShopId(t){const e=ct(Oe(ne,"transactions"),mt("shopId","==",t),Or("createdAt","desc"));return(await ut(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:Ze(r.data().createdAt),confirmedAt:r.data().confirmedAt?Ze(r.data().confirmedAt):void 0}))},async getByMerchantId(t){const e=ct(Oe(ne,"transactions"),mt("merchantUserId","==",t),Or("createdAt","desc"));return(await ut(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:Ze(r.data().createdAt),confirmedAt:r.data().confirmedAt?Ze(r.data().confirmedAt):void 0}))},async getByUserId(t){const e=ct(Oe(ne,"transactions"),mt("merchantUserId","==",t),Or("createdAt","desc"));return(await ut(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:Ze(r.data().createdAt),confirmedAt:r.data().confirmedAt?Ze(r.data().confirmedAt):void 0}))},async updateStatus(t,e,n){const r=Te(ne,"transactions",t);await Ht(r,{status:e,confirmedAt:n?xe():null})}},q$={async log(t,e,n,r,i){await Ps(Oe(ne,"auditLogs"),{actor:i,action:t,entity:e,entityId:n,meta:r,createdAt:xe()})},async getLogs(t=100){const e=ct(Oe(ne,"auditLogs"),Or("createdAt","desc"),ed(t));return(await ut(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:Ze(r.data().createdAt)}))},async getDeletedTransactions(){try{const t=ct(Oe(ne,"deletedTransactions"),Or("deletedAt","desc"));return(await ut(t)).docs.map(n=>({id:n.id,...n.data(),deletedAt:Ze(n.data().deletedAt)}))}catch(t){return console.error("Error getting deleted transactions:",t),[]}},async getDeletedTransactionsByUser(t){try{const e=ct(Oe(ne,"deletedTransactions"),mt("userId","==",t),Or("deletedAt","desc"));return(await ut(e)).docs.map(r=>({id:r.id,...r.data(),deletedAt:Ze(r.data().deletedAt)}))}catch(e){return console.error("Error getting deleted transactions by user:",e),[]}},async saveDeletedTransaction(t){try{if(console.log("🗑️ محاولة حفظ معاملة محذوفة في Firebase:",t.id),!t.userId)throw new Error("معرف المستخدم مطلوب لحفظ المعاملة المحذوفة");if(!t.originalTransactionId)throw new Error("معرف المعاملة الأصلي مطلوب");const e={...t,deletedAt:xe(),userId:t.userId,originalTransactionId:t.originalTransactionId,type:t.type||"unknown",amount:t.amount||0,status:t.status||"deleted"};console.log("📝 بيانات المعاملة المحذوفة للحفظ:",e);let n=3,r;for(;n>0;)try{const i=await Ps(Oe(ne,"deletedTransactions"),e);console.log("✅ تم حفظ المعاملة المحذوفة بنجاح، معرف الوثيقة:",i.id);return}catch(i){r=i,n--,console.warn(`⚠️ فشل في حفظ المعاملة المحذوفة، المحاولات المتبقية: ${n}`,i),n>0&&await new Promise(s=>setTimeout(s,1e3))}throw console.error("❌ فشل في حفظ المعاملة المحذوفة بعد جميع المحاولات"),r}catch(e){throw console.error("❌ خطأ في حفظ المعاملة المحذوفة:",e),e instanceof Error&&(e.message.includes("network")?console.error("🌐 خطأ في الشبكة - تحقق من الاتصال بالإنترنت"):e.message.includes("permission")?console.error("🔒 خطأ في الصلاحيات - تحقق من قواعد Firestore"):e.message.includes("quota")&&console.error("📊 تم تجاوز حد الاستخدام - تحقق من حصة Firebase")),e}},async permanentlyDeleteTransaction(t,e){try{const n=ct(Oe(ne,"deletedTransactions"),mt("originalTransactionId","==",t),mt("userId","==",e)),i=(await ut(n)).docs.map(s=>nr(s.ref));await Promise.all(i),console.log("تم حذف المعاملة نهائياً من Firebase:",t);try{const s=ct(Oe(ne,"userTransactions"),mt("userId","==",e)),a=(await ut(s)).docs.filter(l=>{var d,h;const u=l.data();return l.id===t||u.id===t||u.transactionId===t||u.originalTransactionId===t||((d=u.receipt)==null?void 0:d.id)===t||((h=u.receipt)==null?void 0:h.transactionId)===t});a.length>0&&(console.log(`🧹 تنظيف ${a.length} أثر في userTransactions`),await Promise.all(a.map(l=>nr(l.ref))))}catch(s){console.warn("⚠️ تعذر تنظيف userTransactions أثناء الحذف النهائي:",s)}try{const s=Te(ne,"transactions",t);(await xt(s)).exists()&&(console.log("🧹 حذف المستند المطابق من transactions بالمعرّف المباشر"),await nr(s));const a=ct(Oe(ne,"transactions"),mt("transactionId","==",t)),l=await ut(a);l.empty||(console.log(`🧹 حذف ${l.size} مستند من transactions بـ transactionId`),await Promise.all(l.docs.map(h=>nr(h.ref))));const u=ct(Oe(ne,"transactions"),mt("originalTransactionId","==",t)),d=await ut(u);d.empty||(console.log(`🧹 حذف ${d.size} مستند من transactions بـ originalTransactionId`),await Promise.all(d.docs.map(h=>nr(h.ref))))}catch(s){console.warn("⚠️ تعذر تنظيف مجموعة transactions أثناء الحذف النهائي:",s)}}catch(n){throw console.error("Error permanently deleting transaction:",n),n}}},W$={async add(t){return(await Ps(Oe(ne,"daily_reports_archive"),{userId:t.userId,reportDate:t.reportDate,totalTransactions:t.totalTransactions,totalAmount:t.totalAmount,totalWithdrawn:t.totalWithdrawn,totalSent:t.totalSent,profit:t.profit??null,walletId:t.walletId??null,createdAt:xe()})).id},async getByUser(t,e=50){try{const n=ct(Oe(ne,"daily_reports_archive"),mt("userId","==",t),ed(e)),i=(await ut(n)).docs.map(s=>({id:s.id,userId:String(s.data().userId),reportDate:String(s.data().reportDate),totalTransactions:Number(s.data().totalTransactions||0),totalAmount:Number(s.data().totalAmount||0),totalWithdrawn:Number(s.data().totalWithdrawn||0),totalSent:Number(s.data().totalSent||0),profit:s.data().profit!==void 0?Number(s.data().profit):void 0,walletId:s.data().walletId??null,createdAt:Ze(s.data().createdAt)}));return i.sort((s,o)=>s.reportDate<o.reportDate?1:-1),i}catch(n){throw console.error("Error loading daily reports archive:",n),n}}},H$={async getUserData(t){try{console.log("🔍 محاولة الحصول على بيانات المستخدم:",{userId:t});const e=Te(ne,"users",t),n=await xt(e);if(n.exists()){const r=n.data();return console.log("✅ تم العثور على بيانات المستخدم:",r),{...r,createdAt:Ze(r.createdAt),updatedAt:Ze(r.updatedAt)}}else{console.log("⚠️ لا توجد بيانات للمستخدم، إنشاء بيانات افتراضية");const r={cashBalance:0,walletBalances:{"wallet-1":1e4,"wallet-2":5e3},createdAt:new Date,updatedAt:new Date};return await this.saveUserData(t,r),console.log("✅ تم إنشاء وحفظ البيانات الافتراضية"),r}}catch(e){return console.error("❌ خطأ في الحصول على بيانات المستخدم:",e),{cashBalance:0,walletBalances:{"wallet-1":1e4,"wallet-2":5e3},createdAt:new Date,updatedAt:new Date}}},async saveUserData(t,e){try{const n=Te(ne,"users",t),r=Ff(e);await gl(n,{...r||{},updatedAt:xe()},{merge:!0})}catch(n){throw console.error("Error saving user data:",n),n}},async updateUserData(t,e){try{console.log("🔄 بدء تحديث بيانات المستخدم في Firebase:",{userId:t,data:e});const n=Te(ne,"users",t),r=Object.fromEntries(Object.entries(e).filter(([l,u])=>u!==void 0)),i=Ff(r);let s={};try{const l=await xt(n);s=l.exists()?l.data():{},console.log("📥 البيانات الحالية:",s)}catch(l){console.warn("⚠️ تعذر الحصول على البيانات الحالية، استخدام البيانات الجديدة فقط:",l)}const o={...s,...i,updatedAt:xe()};console.log("📝 البيانات المدمجة للحفظ:",o);let a=3;for(;a>0;)try{await gl(n,o,{merge:!0}),console.log("✅ تم تحديث بيانات المستخدم بنجاح");return}catch(l){if(a--,console.warn(`⚠️ فشل في الحفظ، المحاولات المتبقية: ${a}`,l),a===0)throw l;await new Promise(u=>setTimeout(u,1e3))}}catch(n){throw console.error("❌ خطأ في تحديث بيانات المستخدم:",n),n instanceof Error&&(n.message.includes("network")?console.error("🌐 خطأ في الشبكة - تحقق من الاتصال بالإنترنت"):n.message.includes("permission")?console.error("🔒 خطأ في الصلاحيات - تحقق من قواعد Firestore"):n.message.includes("quota")&&console.error("📊 تم تجاوز حد الاستخدام - تحقق من حصة Firebase")),n}},async getUserWallets(t){try{const e=await this.getUserData(t);return(e==null?void 0:e.wallets)||[]}catch(e){return console.error("Error getting user wallets:",e),[]}},async getUserTransactions(t){try{const e=ct(Oe(ne,"userTransactions"),mt("userId","==",t),Or("createdAt","desc"));return(await ut(e)).docs.map(i=>({id:i.id,...i.data(),createdAt:Ze(i.data().createdAt)})).filter(i=>(i==null?void 0:i.status)!=="cancelled"&&!(i!=null&&i.isDeleted))}catch(e){return console.error("Error getting user transactions:",e),[]}},async saveUserTransaction(t,e){try{const n=Object.fromEntries(Object.entries(e??{}).filter(([i,s])=>s!==void 0));return(await Ps(Oe(ne,"userTransactions"),{...n,userId:t,createdAt:xe()})).id}catch(n){throw console.error("Error saving user transaction:",n),n}},async removeUserTransaction(t,e){try{console.log("🗑️ محاولة حذف المعاملة من userTransactions:",{userId:t,transactionId:e});const n=ct(Oe(ne,"userTransactions"),mt("userId","==",t)),r=await ut(n);console.log(`📊 تم العثور على ${r.docs.length} معاملة للمستخدم`);const i=r.docs.filter(s=>{var d,h;const o=s.data(),a=s.id,u=[o.id===e,o.transactionId===e,a===e,o.originalTransactionId===e,((d=o.receipt)==null?void 0:d.transactionId)===e,((h=o.receipt)==null?void 0:h.id)===e].some(p=>p===!0);return u&&console.log("🎯 تم العثور على معاملة مطابقة:",{docId:a,dataId:o.id,transactionId:o.transactionId,originalTransactionId:o.originalTransactionId,searchingFor:e}),u});if(i.length>0){console.log(`🗑️ سيتم حذف ${i.length} معاملة مطابقة حذفًا نهائيًا`);const s=i.map(async o=>{console.log("🗑️ حذف المستند نهائيًا:",o.id),await nr(o.ref)});await Promise.all(s),console.log("✅ تم حذف كل المعاملات المطابقة نهائيًا من userTransactions:",e);try{const o=Te(ne,"transactions",e);if((await xt(o)).exists())console.log("🔗 العثور على المعاملة في transactions، سيتم حذفها نهائيًا"),await nr(o);else{const l=ct(Oe(ne,"transactions"),mt("transactionId","==",e)),u=await ut(l);u.empty||(console.log(`🔍 العثور على ${u.size} مستند في transactions بـ transactionId سيُحذف`),await Promise.all(u.docs.map(p=>nr(p.ref))));const d=ct(Oe(ne,"transactions"),mt("originalTransactionId","==",e)),h=await ut(d);h.empty||(console.log(`🔍 العثور على ${h.size} مستند في transactions بـ originalTransactionId سيُحذف`),await Promise.all(h.docs.map(p=>nr(p.ref))))}}catch(o){console.warn("⚠️ تعذر حذف المعاملة في مجموعة transactions أثناء الحذف النهائي:",o)}return}console.log("ℹ️ لم يتم العثور على المعاملة في userTransactions (قد تكون محذوفة مسبقاً):",e)}catch(n){throw console.error("❌ خطأ في حذف المعاملة من userTransactions:",n),n}}};var MB=(t=>(t.MONTHLY="monthly",t.QUARTERLY="quarterly",t.YEARLY="yearly",t.LIFETIME="lifetime",t.ZERO="zero",t))(MB||{});const LB=(t,e=new Date)=>{const n=new Date(e);switch(t){case"monthly":{const r=new Date(n);return r.setDate(r.getDate()+30),r}case"quarterly":{const r=new Date(n);return r.setDate(r.getDate()+90),r}case"yearly":{const r=new Date(n);return r.setDate(r.getDate()+365),r}case"lifetime":return null;case"zero":return null;default:return null}},Ph=t=>{var i,s;if(!t||!t.isActive)return!1;if(t.planType==="lifetime")return!0;if(!t.endDate){const o=new Date,a=t.activatedAt,l=(i=a==null?void 0:a.toDate)!=null&&i.call(a)?a.toDate():t.activatedAt?new Date(t.activatedAt):null;return l&&o.getTime()-l.getTime()<4*60*60*1e3,!0}const e=new Date,n=t.endDate,r=n!=null&&n.toDate?n.toDate():new Date(n);if(!r||isNaN(r.getTime())){const o=t.activatedAt,a=(s=o==null?void 0:o.toDate)!=null&&s.call(o)?o.toDate():t.activatedAt?new Date(t.activatedAt):null;return a&&e.getTime()-a.getTime()<4*60*60*1e3,!0}return e<=r},FB=t=>{if(!t||!t.isActive)return null;if(t.planType==="lifetime")return-1;if(!t.endDate)return null;const e=new Date,n=t.endDate,r=n!=null&&n.toDate?n.toDate():new Date(n);if(!r||isNaN(r.getTime()))return null;const i=r.getTime()-e.getTime(),s=Math.ceil(i/(1e3*60*60*24));return s>0?s:0},K$=async(t,e,n,r)=>{try{const i=new Date,s=LB(e,i),o={planType:e,startDate:i,endDate:s,isActive:!0,activatedBy:n,activatedAt:i};console.log("🔄 Activating subscription for user:",{userId:t,planType:e,adminId:n,subscriptionData:o});const a=Te(ne,"users",t);if(await Ht(a,{subscription:o,isActive:!0,approved:!0,isOnFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,updatedAt:new Date}),console.log("✅ Subscription data updated in Firestore"),typeof window<"u"){const l=new CustomEvent("subscriptionActivated",{detail:{userId:t,planType:e,timestamp:new Date().toISOString()}});window.dispatchEvent(l),console.log("📢 Subscription activation event dispatched:",{userId:t,planType:e});const u=new CustomEvent("userSubscriptionUpdated",{detail:{userId:t,planType:e,isActive:!0,timestamp:new Date().toISOString()}});window.dispatchEvent(u),console.log("📢 Global subscription update event dispatched")}console.log(`✅ تم تفعيل اشتراك ${e} للمستخدم ${t}`)}catch(i){throw console.error("❌ خطأ في تفعيل الاشتراك:",i),new Error("فشل في تفعيل الاشتراك")}},G$=async t=>{try{const e=Te(ne,"users",t);await Ht(e,{"subscription.isActive":!1,isActive:!1,updatedAt:new Date}),console.log(`✅ تم إلغاء تفعيل اشتراك المستخدم ${t}`)}catch(e){throw console.error("❌ خطأ في إلغاء تفعيل الاشتراك:",e),new Error("فشل في إلغاء تفعيل الاشتراك")}},Q$=async t=>{try{const e=Te(ne,"users",t),n=await xt(e);return n.exists()&&n.data().subscription||null}catch(e){return console.error("❌ خطأ في الحصول على بيانات الاشتراك:",e),null}},Y$=t=>{switch(t){case"monthly":return"شهرية";case"quarterly":return"ربع سنوية";case"yearly":return"سنوية";case"lifetime":return"مدى الحياة";case"zero":return"زيرو";default:return"غير محدد"}},J$=t=>{if(!t)return"text-gray-500";if(!t.isActive)return"text-red-500";if(t.planType==="lifetime")return"text-green-600";const e=FB(t);return e===null||e<=0?"text-red-500":e<=7?"text-yellow-500":"text-green-500"},X$=t=>t?(t instanceof Date?t:new Date(t)).toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric"}):"غير محدد";class Aw{static async startFreeTrialFromAdmin(e){try{const n=Te(ne,"users",e),r=await xt(n);if(!r.exists())return{success:!1,message:"المستخدم غير موجود"};if(r.data().hasUsedFreeTrial)return{success:!1,message:"لقد استخدم هذا المستخدم التجربة المجانية من قبل"};const s=new Date,o=await this.getTrialDurationHours(),a=new Date(s.getTime()+o*60*60*1e3);return await Ht(n,{hasUsedFreeTrial:!0,freeTrialStartDate:s,freeTrialEndDate:a,isOnFreeTrial:!0,isActive:!0,approved:!0,updatedAt:xe()}),{success:!0,message:`تم تفعيل التجربة المجانية لمدة ${o} ${o>=3&&o<=10?"ساعات":o===2?"ساعتين":"ساعة"}`}}catch(n){return console.error("Error starting admin free trial:",n),{success:!1,message:"حدث خطأ أثناء تفعيل التجربة المجانية"}}}static async startFreeTrial(e){try{const n=Te(ne,"users",e),r=await xt(n);if(!r.exists())return{success:!1,message:"المستخدم غير موجود"};if(r.data().hasUsedFreeTrial)return{success:!1,message:"لقد استخدمت التجربة المجانية من قبل"};const s=new Date,o=await this.getTrialDurationHours(),a=new Date(s.getTime()+o*60*60*1e3);return await Ht(n,{hasUsedFreeTrial:!0,freeTrialStartDate:s,freeTrialEndDate:a,isOnFreeTrial:!0,isActive:!0,approved:!0,updatedAt:xe()}),{success:!0,message:`تم تفعيل التجربة المجانية لمدة ${o} ${o>=3&&o<=10?"ساعات":o===2?"ساعتين":"ساعة"}`}}catch(n){return console.error("خطأ في بدء التجربة المجانية:",n),{success:!1,message:"حدث خطأ أثناء تفعيل التجربة المجانية"}}}static async checkTrialValidity(e){var n,r,i,s;try{const o=Te(ne,"users",e),a=await xt(o);if(!a.exists())return{isValid:!1,isExpired:!1,hoursRemaining:0,hasUsedTrial:!1};const l=a.data(),u=l.hasUsedFreeTrial||!1,d=l.isOnFreeTrial||!1;let h=(r=(n=l.freeTrialEndDate)==null?void 0:n.toDate)!=null&&r.call(n)?l.freeTrialEndDate.toDate():l.freeTrialEndDate?new Date(l.freeTrialEndDate):null;const p=(s=(i=l.freeTrialStartDate)==null?void 0:i.toDate)!=null&&s.call(i)?l.freeTrialStartDate.toDate():l.freeTrialStartDate?new Date(l.freeTrialStartDate):null;if(!u||!d||!h)return{isValid:!1,isExpired:!1,hoursRemaining:0,hasUsedTrial:u};const m=new Date;if(m>h){const _=Ph(l.subscription);return await Ht(o,{isOnFreeTrial:!1,isActive:_,approved:_,updatedAt:xe()}),!_&&typeof window<"u"&&setTimeout(()=>{window.location.href="/user/pending-approval"},1e3),{isValid:!1,isExpired:!0,hoursRemaining:0,hasUsedTrial:u}}try{const _=await this.getTrialDurationHours();if(p&&_&&Number.isFinite(_)&&Math.round((h.getTime()-p.getTime())/36e5)<_){const I=new Date(p.getTime()+_*60*60*1e3);I.getTime()>h.getTime()&&(await Ht(o,{freeTrialEndDate:I,updatedAt:xe()}),h=I)}}catch(_){console.warn("checkTrialValidity: failed to auto-extend to configured hours",_)}const v=h.getTime()-m.getTime();return{isValid:!0,isExpired:!1,hoursRemaining:Math.ceil(v/(1e3*3600)),hasUsedTrial:u}}catch(o){return console.error("خطأ في التحقق من صلاحية التجربة المجانية:",o),{isValid:!1,isExpired:!1,hoursRemaining:0,hasUsedTrial:!1}}}static async getTrialData(e){var n,r;try{const i=Te(ne,"users",e),s=await xt(i);if(!s.exists())return{hasUsedFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,isOnFreeTrial:!1};const o=s.data();return{hasUsedFreeTrial:o.hasUsedFreeTrial||!1,freeTrialStartDate:((n=o.freeTrialStartDate)==null?void 0:n.toDate())||null,freeTrialEndDate:((r=o.freeTrialEndDate)==null?void 0:r.toDate())||null,isOnFreeTrial:o.isOnFreeTrial||!1}}catch(i){return console.error("خطأ في الحصول على بيانات التجربة المجانية:",i),{hasUsedFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,isOnFreeTrial:!1}}}static async getTrialDurationHours(){try{const e=Te(ne,"config","freeTrial"),n=await xt(e);if(n.exists()){const r=n.data(),i=typeof(r==null?void 0:r.durationHours)=="number"?r.durationHours:this.TRIAL_DURATION_HOURS;return!Number.isFinite(i)||i<1?this.TRIAL_DURATION_HOURS:i}return this.TRIAL_DURATION_HOURS}catch(e){return console.warn("getTrialDurationHours: fallback to default due to error",e),this.TRIAL_DURATION_HOURS}}static async updateTrialDurationHours(e){try{if(!Number.isFinite(e)||e<1)return{success:!1,message:"المدة يجب أن تكون ساعة واحدة على الأقل"};const n=Te(ne,"config","freeTrial");return await gl(n,{durationHours:e,updatedAt:xe()},{merge:!0}),{success:!0,message:"تم تحديث مدة التجربة المجانية بنجاح"}}catch(n){return console.error("Error updating trial duration hours:",n),{success:!1,message:"تعذر تحديث مدة التجربة المجانية"}}}static async resetActiveTrialToCurrentDuration(e){var n,r;try{const i=Te(ne,"users",e),s=await xt(i);if(!s.exists())return{success:!1,message:"المستخدم غير موجود"};const o=s.data(),a=!!o.isOnFreeTrial,l=(r=(n=o.freeTrialStartDate)==null?void 0:n.toDate)!=null&&r.call(n)?o.freeTrialStartDate.toDate():o.freeTrialStartDate?new Date(o.freeTrialStartDate):null;if(!a||!l)return{success:!1,message:"لا توجد تجربة نشطة لإعادة ضبطها"};const u=await this.getTrialDurationHours(),d=new Date(l.getTime()+u*60*60*1e3);return await Ht(i,{freeTrialEndDate:d,updatedAt:xe()}),{success:!0,message:`تم ضبط نهاية التجربة إلى ${u} ${u>=3&&u<=10?"ساعات":u===2?"ساعتين":"ساعة"}`}}catch(i){return console.error("Error resetting active trial duration:",i),{success:!1,message:"تعذر إعادة ضبط مدة التجربة"}}}}h0(Aw,"TRIAL_DURATION_HOURS",24);const Z$=Object.freeze(Object.defineProperty({__proto__:null,FreeTrialService:Aw},Symbol.toStringTag,{value:"Module"})),ek=b.createContext(void 0);function Hp(){const t=b.useContext(ek);if(t===void 0)throw new Error("useFirebaseAuth must be used within a FirebaseAuthProvider");return t}const UB=({children:t})=>{const[e,n]=b.useState(null),[r,i]=b.useState(null),[s,o]=b.useState(null),[a,l]=b.useState(!1),[u,d]=b.useState(!0),h=async T=>{var w,x,P,C,k,R,W,X;try{const Z=Te(ne,"profiles",T);let ie=!1;try{const U=await GC(Z);if(U.exists()){const H=U.data(),ae={userId:U.id,shopId:H.shopId,role:H.role,fullName:H.fullName,phone:H.phone,shopName:H.shopName||null,approved:H.approved,avatarId:H.avatarId,createdAt:((x=(w=H.createdAt)==null?void 0:w.toDate)==null?void 0:x.call(w))||new Date,updatedAt:((C=(P=H.updatedAt)==null?void 0:P.toDate)==null?void 0:C.call(P))||new Date,trialStarted:H.trialStarted||!1,trialStartDate:(R=(k=H.trialStartDate)==null?void 0:k.toDate)==null?void 0:R.call(k),trialEndDate:(X=(W=H.trialEndDate)==null?void 0:W.toDate)==null?void 0:X.call(W),trialExpired:H.trialExpired||!1};i(ae),ie=!0,d(!1)}}catch(U){console.log("Cache profile not available:",(U==null?void 0:U.code)||U)}try{if(!ie){const U=localStorage.getItem(`profile_cache_${T}`);if(U){const H=JSON.parse(U);i(H),ie=!0,d(!1)}}}catch{}return Jy(Z,U=>{var H,ae,J,se,ce,Pe,je,me;if(U.exists()){const nt=U.data(),vn={userId:U.id,shopId:nt.shopId,role:nt.role,fullName:nt.fullName,phone:nt.phone,shopName:nt.shopName||null,approved:nt.approved,avatarId:nt.avatarId,createdAt:((ae=(H=nt.createdAt)==null?void 0:H.toDate)==null?void 0:ae.call(H))||new Date,updatedAt:((se=(J=nt.updatedAt)==null?void 0:J.toDate)==null?void 0:se.call(J))||new Date,trialStarted:nt.trialStarted||!1,trialStartDate:(Pe=(ce=nt.trialStartDate)==null?void 0:ce.toDate)==null?void 0:Pe.call(ce),trialEndDate:(me=(je=nt.trialEndDate)==null?void 0:je.toDate)==null?void 0:me.call(je),trialExpired:nt.trialExpired||!1};i(vn);try{localStorage.setItem(`profile_cache_${U.id}`,JSON.stringify(vn))}catch{}ie||(ie=!0,d(!1))}},U=>{console.error("Profile listener error:",U)})}catch(Z){return console.error("Error setting up profile listener:",Z),await m(T),d(!1),()=>{}}},p=async T=>{try{const w=Te(ne,"users",T.uid);(await xt(w)).exists()?(await Ht(w,{lastLogin:xe(),updatedAt:xe()}),console.log("✅ ensureAdminUserDoc: Updated lastLogin for",T.uid)):(await gl(w,{email:T.email||"",displayName:T.displayName||"مستخدم جديد",phone:null,shopName:null,isActive:!1,createdAt:xe(),updatedAt:xe(),lastLogin:xe()},{merge:!0}),console.log("✅ ensureAdminUserDoc: Created users doc for",T.uid))}catch(w){console.error("❌ ensureAdminUserDoc error:",w)}},m=async(T,w,x,P,C)=>{var k,R;try{console.log("Creating default profile for user:",T);const W=og.generateReferralCode(T),X={userId:T,shopId:"default-shop",role:"user",fullName:w||"مستخدم جديد",phone:x||null,shopName:P||null,approved:!1,referralCode:W,referredBy:C||null,createdAt:new Date,updatedAt:new Date};i(X),console.log("Created temporary profile:",X);try{const{doc:Z,setDoc:ie,serverTimestamp:B}=await Le(async()=>{const{doc:J,setDoc:se,serverTimestamp:ce}=await Promise.resolve().then(()=>u1);return{doc:J,setDoc:se,serverTimestamp:ce}},void 0),{db:U}=await Le(async()=>{const{db:J}=await Promise.resolve().then(()=>p1);return{db:J}},void 0),H={email:((k=yr.currentUser)==null?void 0:k.email)||"",displayName:w||"مستخدم جديد",phone:x||null,shopName:P||null,isActive:!1,referralCode:W,referredBy:C||null,createdAt:B(),lastLogin:null,updatedAt:B()};if(console.log("Attempting to add user to admin collection with data:",H),await ie(Z(U,"users",T),H,{merge:!0}),console.log("✅ User successfully added to admin collection:",H),C)try{const J=await og.getByReferralCode(C);J?(await og.create({referrerId:J.referrerId,referredUserId:T,referredUserEmail:((R=yr.currentUser)==null?void 0:R.email)||"",referralCode:C,status:"completed"}),console.log("✅ Referral record created successfully")):console.log("⚠️ Referral code not found:",C)}catch(J){console.error("❌ Error creating referral record:",J)}const ae=await xt(Z(U,"users",T));ae.exists()?console.log("✅ User document verified in Firestore:",ae.data()):console.log("❌ User document not found after creation")}catch(Z){console.error("❌ Error adding user to admin collection:",Z)}try{let Z="default-shop";const{doc:ie,getDoc:B,setDoc:U,serverTimestamp:H}=await Le(async()=>{const{doc:ce,getDoc:Pe,setDoc:je,serverTimestamp:me}=await Promise.resolve().then(()=>u1);return{doc:ce,getDoc:Pe,setDoc:je,serverTimestamp:me}},void 0),{db:ae}=await Le(async()=>{const{db:ce}=await Promise.resolve().then(()=>p1);return{db:ce}},void 0);(await B(ie(ae,"shops",Z))).exists()||await U(ie(ae,"shops",Z),{name:P||"متجر افتراضي",ownerId:T,createdAt:H(),updatedAt:H(),isActive:!0}),await m1.create({userId:T,shopId:Z,role:"user",fullName:"مستخدم جديد",phone:null});const se=await m1.getById(T);se&&(i(se),console.log("Updated with Firebase profile:",se))}catch(Z){console.error("Error creating profile:",Z),console.log("Using local profile - Firebase unavailable")}}catch(W){console.error("Error creating default profile:",W)}};b.useEffect(()=>{console.log("🔥 Setting up auth state listener"),d(!0);const T=setTimeout(()=>{console.warn("⚠️ Global auth timeout reached, forcing loading to false"),d(!1)},2e4);localStorage.getItem("demoProfile")&&(console.log("🧹 Cleaning up demo profile from localStorage"),localStorage.removeItem("demoProfile"));const w=localStorage.getItem("demoUser"),x=localStorage.getItem("demoProfile");if(w&&x){console.log("🔐 Found demo user in localStorage");try{const C=JSON.parse(w),k=JSON.parse(x);n(C),i(k),clearTimeout(T),d(!1);return}catch(C){console.error("Error parsing demo user data:",C),localStorage.removeItem("demoUser"),localStorage.removeItem("demoProfile")}}const P=A3(yr,async C=>{console.log("🔐 Auth state changed:",{uid:C==null?void 0:C.uid,email:C==null?void 0:C.email,emailVerified:C==null?void 0:C.emailVerified,timestamp:new Date().toISOString()}),n(C),C?(console.log("📋 User authenticated, starting profile hydration for:",C.uid),h(C.uid),y(),p(C)):(console.log("📋 User not authenticated, clearing profile"),i(null),o(null),l(!1),d(!1)),clearTimeout(T)});return()=>{clearTimeout(T),P()}},[]);const E=async(T,w,x,P,C,k)=>{try{console.log("🔐 Attempting to sign up user:",T);const R=await CT(yr,T,w);return console.log("🔐 Sign up successful:",R.user.uid),await m(R.user.uid,x,P,C,k),await p(R.user),{error:null}}catch(R){console.error("🔐 Sign up error:",R);let W="حدث خطأ أثناء إنشاء الحساب";return R.code==="auth/email-already-in-use"?W="هذا البريد الإلكتروني مستخدم بالفعل":R.code==="auth/weak-password"?W="كلمة المرور ضعيفة جداً":R.code==="auth/invalid-email"&&(W="البريد الإلكتروني غير صحيح"),{error:{...R,message:W}}}},v=async(T,w)=>{try{if(console.log("🔐 Attempting to sign in user:",T),T==="test@example.com"&&w==="123456"){console.log("🔐 Demo user login detected");const P={uid:"demo-user-123",email:"test@example.com",displayName:"مستخدم تجريبي",emailVerified:!0},C={userId:"demo-user-123",shopId:"demo-shop",role:"user",fullName:"مستخدم تجريبي",phone:"01000000000",approved:!0,createdAt:new Date,updatedAt:new Date};return localStorage.setItem("demoUser",JSON.stringify(P)),localStorage.setItem("demoProfile",JSON.stringify(C)),n(P),i(C),d(!1),console.log("🔐 Demo user signed in successfully"),{error:null}}const x=await E3(yr,T,w);console.log("🔐 Sign in successful:",x.user.uid);try{if((await xt(Te(ne,"deletedUsers",x.user.uid))).exists())return console.log("🚫 User is deleted, signing out"),await kT(yr),{error:{code:"auth/user-deleted",message:"تم حذف هذا الحساب من قبل الإدارة. لا يمكنك تسجيل الدخول."}}}catch(P){console.error("Error checking deleted users:",P)}return await p(x.user),{error:null}}catch(x){if(console.error("🔐 Sign in error:",x),T==="test@example.com"&&x.code==="auth/user-not-found"){console.log("🔐 Creating test user...");try{const C=await CT(yr,T,w);return console.log("🔐 Test user created:",C.user.uid),await m(C.user.uid,"مستخدم تجريبي","01000000000","متجر تجريبي"),{error:null}}catch(C){return console.error("🔐 Error creating test user:",C),{error:C}}}let P="حدث خطأ أثناء تسجيل الدخول";return x.code==="auth/invalid-credential"?P="البريد الإلكتروني أو كلمة المرور غير صحيحة":x.code==="auth/user-not-found"?P="لا يوجد حساب بهذا البريد الإلكتروني":x.code==="auth/wrong-password"?P="كلمة المرور غير صحيحة":x.code==="auth/too-many-requests"&&(P="تم تجاوز عدد المحاولات المسموح، حاول لاحقاً"),{error:{...x,message:P}}}},S=async()=>{try{localStorage.getItem("demoUser")?(console.log("🔐 Signing out demo user"),localStorage.removeItem("demoUser"),localStorage.removeItem("demoProfile"),n(null),i(null),d(!1)):await kT(yr),window.location.pathname.includes("/user/dashboard")?window.location.href="/user/login":window.location.href="/landing"}catch(T){console.error("Sign out error:",T)}},_=async T=>{try{return await w3(yr,T),{error:null}}catch(w){console.error("Reset password error:",w);let x="حدث خطأ أثناء إرسال رابط إعادة تعيين كلمة المرور";return w.code==="auth/user-not-found"?x="لا يوجد حساب بهذا البريد الإلكتروني":w.code==="auth/invalid-email"&&(x="البريد الإلكتروني غير صحيح"),{error:{...w,message:x}}}},y=async()=>{if(!e){console.log("No user found for subscription check"),o(null),l(!1);return}console.log("Checking subscription status for user:",e.uid);try{return Jy(Te(ne,"users",e.uid),async w=>{var x,P,C,k,R,W;if(w.exists()){const X=w.data();o(X),console.log("📊 Subscription Data Details (Real-time):",{userId:e.uid,userEmail:e.email,subscription:X.subscription,subscriptionExists:!!X.subscription,planType:(x=X.subscription)==null?void 0:x.planType,isActive:(P=X.subscription)==null?void 0:P.isActive,startDate:(C=X.subscription)==null?void 0:C.startDate,endDate:(k=X.subscription)==null?void 0:k.endDate,activatedBy:(R=X.subscription)==null?void 0:R.activatedBy,activatedAt:(W=X.subscription)==null?void 0:W.activatedAt,isOnFreeTrial:X.isOnFreeTrial,freeTrialEndDate:X.freeTrialEndDate});let Z=!1;if(X.isOnFreeTrial){console.log("🎁 User is on free trial, checking validity...");const ie=await Aw.checkTrialValidity(e.uid);ie.isValid&&!ie.isExpired?(console.log("✅ Free trial is valid, granting access"),Z=!0):ie.isExpired?(console.log("⏰ Free trial has expired, checking regular subscription"),Z=Ph(X.subscription)):(console.log("❌ Free trial is not valid"),Z=Ph(X.subscription))}else Z=Ph(X.subscription);l(Z),console.log("✅ Subscription Validation Result (Real-time):",{userId:e.uid,isValid:Z,isOnFreeTrial:X.isOnFreeTrial,reason:X.isOnFreeTrial?"Free trial active":X.subscription?X.subscription.isActive?X.subscription.planType==="lifetime"?"Lifetime plan":X.subscription.endDate?new Date>new Date(X.subscription.endDate)?"Expired":"Valid":"No end date":"Subscription not active":"No subscription data"})}},w=>{console.error("❌ Subscription listener error:",w)})}catch(T){console.error("Error setting up subscription listener:",T)}},V={user:e,profile:r,userSubscription:s,isSubscriptionActive:a,loading:u,signUp:E,signIn:v,signOut:S,resetPassword:_,updateUserProfile:async T=>{if(e)try{const w={updatedAt:xe()};T.fullName!==void 0&&(w.fullName=T.fullName),T.phone!==void 0&&(w.phone=T.phone),await Ht(Te(ne,"profiles",e.uid),w),await h(e.uid)}catch(w){console.error("Error updating user profile:",w)}},updateAvatarId:async T=>{if(e)try{await Ht(Te(ne,"profiles",e.uid),{avatarId:T,updatedAt:xe()}),await h(e.uid)}catch(w){console.error("Error updating avatarId:",w)}},refreshProfile:async()=>{if(e)try{console.log("Refreshing profile for user:",e.uid),await h(e.uid),await y()}catch(T){console.error("Error refreshing profile:",T)}},checkSubscriptionStatus:y};return O.jsx(ek.Provider,{value:V,children:t})},jB=()=>{const t=hp(),e=yi(),{signOut:n,user:r}=Hp(),[i,s]=b.useState(!1),[o,a]=b.useState(!1),l=[{id:"home",label:"الرئيسية",icon:uO,path:"/user/dashboard",action:()=>{t("/user/dashboard"),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},100)}},{id:"debts",label:"الديون",icon:cO,path:"/debts",action:()=>{t("/user/dashboard",{state:{openDebtDialog:!0}})}},{id:"transfer",label:"تحويل",icon:oO,path:"/transfer",action:()=>{t("/user/dashboard",{state:{openTransactionSection:!0,transactionType:"transfer",startNewTransaction:!0}})}},{id:"add",label:"",icon:kE,path:"/add",isSpecial:!0},{id:"withdraw",label:"سحب",icon:sO,path:"/withdraw",action:()=>{t("/user/dashboard",{state:{openTransactionSection:!0,transactionType:"withdraw",startNewTransaction:!0}})}},{id:"transactions",label:"المعاملات",icon:Lm,path:"/transactions"},{id:"settings",label:"الإعدادات",icon:DE,path:"/profile-settings"}],u=[{id:"maintenance",label:"الصيانة",icon:pO,action:()=>{s(!1),t("/user/dashboard",{state:{openMaintenanceDialog:!0}})},color:"#0EA5E9"},{id:"credit-cards",label:"كروت الائتمان",icon:lO,action:()=>{s(!1),t("/user/dashboard",{state:{openCreditCardsDialog:!0}})},color:"#8B5CF6"},{id:"sales",label:"المبيعات",icon:hO,action:()=>{s(!1),t("/user/dashboard",{state:{openSalesDialog:!0}})},color:"#F59E0B"},{id:"shop-expenses",label:"مصروفات المحل",icon:Lm,action:()=>{s(!1),t("/user/dashboard",{state:{openShopExpensesDialog:!0}})},color:"#F97316"},{id:"deficiencies",label:"النواقص",icon:fO,action:()=>{s(!1),t("/user/dashboard",{state:{openDeficienciesDialog:!0}})},color:"#DB2777"},{id:"add-wallet",label:"إضافة محفظة",icon:kE,action:()=>{s(!1),t("/user/add-wallet")},color:"#EF4444"},{id:"cashier-shift",label:"وردية الكاشير",icon:aO,action:()=>{s(!1),t("/user/dashboard",{state:{openCashierShiftModal:!0}})},color:"#3B82F6"},{id:"contact",label:"للتواصل والاقتراحات",icon:dO,action:()=>{s(!1);const E=`مرحباً، أود التواصل معكم
البريد الإلكتروني المسجل: ${(r==null?void 0:r.email)||"غير محدد"}`,v=encodeURIComponent(E);window.open(`https://wa.me/201000392539?text=${v}`,"_blank")},color:"#10B981"},{id:"logout",label:"تسجيل خروج",icon:CE,action:async()=>{s(!1);try{await n()}catch(m){console.error("Logout error:",m)}},color:"#EF4444"}],d=[{id:"shop-expenses-settings",label:"مصروفات المحل",icon:Lm,action:()=>{a(!1),t("/user/dashboard",{state:{openShopExpensesDialog:!0}})},color:"#F97316"},{id:"profile-settings",label:"إعدادات الملف الشخصي",icon:DE,action:()=>{a(!1),t("/profile-settings")},color:"#6366F1"},{id:"logout",label:"تسجيل الخروج",icon:CE,action:async()=>{a(!1);try{await n()}catch(m){console.error("Logout error:",m)}},color:"#EF4444"}],h=(m,E,v)=>{v?v():E&&m==="/add"?s(!i):E||t(m)},p=m=>e.pathname===m;return O.jsxs("div",{className:"mobile-bottom-nav",children:[i&&O.jsxs(O.Fragment,{children:[O.jsx("div",{className:"quick-actions-overlay",onClick:()=>s(!1)}),O.jsx("div",{className:"floating-actions-container",children:u.map((m,E)=>O.jsxs("div",{className:"floating-action-button",onClick:m.action,style:{"--action-color":m.color,"--animation-delay":`${E*.1}s`},children:[O.jsx("div",{className:"floating-action-icon",style:{backgroundColor:m.color},children:O.jsx(m.icon,{className:"action-icon"})}),O.jsx("span",{className:"floating-action-label",children:m.label})]},m.id))})]}),o&&O.jsxs(O.Fragment,{children:[O.jsx("div",{className:"quick-actions-overlay",onClick:()=>a(!1)}),O.jsx("div",{className:"floating-actions-container",children:d.map((m,E)=>O.jsxs("div",{className:"floating-action-button",onClick:m.action,style:{"--action-color":m.color,"--animation-delay":`${E*.1}s`},children:[O.jsx("div",{className:"floating-action-icon",style:{backgroundColor:m.color},children:O.jsx(m.icon,{className:"action-icon"})}),O.jsx("span",{className:"floating-action-label",children:m.label})]},m.id))})]}),O.jsx("nav",{className:"mobile-bottom-nav-container",children:l.map(m=>{const E=m.icon,v=p(m.path);return O.jsxs("button",{onClick:()=>h(m.path,m.isSpecial,m.action),className:`mobile-nav-item ${v?"active":""} ${m.isSpecial?"special":""}`,"aria-label":m.label,children:[O.jsx("div",{className:`nav-icon-container ${m.isSpecial?"special-icon":""}`,children:O.jsx(E,{className:`nav-icon ${v?"active-icon":""} ${m.isSpecial?"special-icon-svg":""} ${m.isSpecial&&m.id==="add"&&i?"rotated":""} ${m.isSpecial&&m.id==="settings"&&o?"rotated":""}`})}),!m.isSpecial&&O.jsx("span",{className:`nav-label ${v?"active-label":""}`,children:m.label})]},m.id)})})]})},BB=()=>{const t=yi();return b.useEffect(()=>{const e=new URLSearchParams(t.search),n=e.get("text")||e.get("body")||e.get("message")||"",r=e.get("type")||void 0,i=e.get("amount")||void 0,s=e.get("receiver")||e.get("to")||void 0,o=e.get("sender")||e.get("from")||void 0,a=e.get("provider")||void 0,l={};n&&(l.text=n);const u={};r&&(u.type=r),i&&(u.amount=i),s&&(u.receiverMsisdn=s),o&&(u.senderMsisdn=o),a&&(u.provider=a),Object.keys(u).length>0&&(l.payload=u);const d=()=>{try{window.dispatchEvent(new CustomEvent("mobileSmsReceived",{detail:l}))}catch(m){console.error("Dispatch mobileSmsReceived failed:",m)}};d();const h=setTimeout(d,600),p=setTimeout(d,1500);return()=>{clearTimeout(h),clearTimeout(p)}},[t.search]),O.jsx("div",{style:{padding:16},children:O.jsx("p",{children:"تم استقبال رسالة SMS، جارٍ معالجتها وإضافتها للتقارير..."})})},ag=768;function tk(){const[t,e]=b.useState(void 0);return b.useEffect(()=>{const n=window.matchMedia(`(max-width: ${ag-1}px)`),r=()=>{e(window.innerWidth<ag)};return n.addEventListener("change",r),e(window.innerWidth<ag),()=>n.removeEventListener("change",r)},[]),!!t}function $B(){const t=tk(),[e,n]=b.useState("default"),[r,i]=b.useState(!1);return b.useEffect(()=>{const o=localStorage.getItem("notificationConsentRequested")==="true";if(i(o),o){const a=localStorage.getItem("notificationPermission");(a==="granted"||a==="denied"||a==="default")&&n(a);return}t&&typeof window<"u"&&("Notification"in window?Notification.requestPermission().then(a=>{n(a),localStorage.setItem("notificationPermission",a),localStorage.setItem("notificationConsentRequested","true"),i(!0)}).catch(()=>{n("default"),localStorage.setItem("notificationConsentRequested","true"),i(!0)}):(n("unsupported"),localStorage.setItem("notificationConsentRequested","true"),i(!0)))},[t]),{permission:e,hasRequested:r,requestConsent:async()=>{if(typeof window<"u"&&"Notification"in window){const o=await Notification.requestPermission();return n(o),localStorage.setItem("notificationPermission",o),localStorage.setItem("notificationConsentRequested","true"),i(!0),o}return"unsupported"}}}const zB=t=>t==="withdraw"||t==="receive"?"receive":"send",qB=async t=>{if(!t)return null;const e=ct(Oe(ne,"transactions"),mt("reference","==",t),ed(1)),n=await ut(e);return n.empty?null:n.docs[0].id},WB=async t=>{if(!t||!t.shopId||!t.lineId||!t.provider)throw new Error("بيانات الإشعار غير مكتملة: يجب توفير shopId و lineId و provider");if(!t.amount||t.amount<=0)throw new Error("قيمة المبلغ في الإشعار غير صالحة");const e=await qB(t.reference);if(e)return{id:e,duplicate:!0};const n=zB(t.type),r={shopId:t.shopId,lineId:t.lineId,merchantUserId:t.merchantUserId||t.createdBy,walletId:t.walletId,provider:t.provider,txnType:n,amount:t.amount,fee:void 0,commission:void 0,profit:0,reference:t.reference,senderMsisdn:t.senderMsisdn,receiverMsisdn:t.receiverMsisdn,note:t.note,status:"confirmed",createdBy:t.createdBy,confirmedAt:new Date};return{id:await VB.create(r),duplicate:!1}};function HB(t){let e=0;for(let n=0;n<t.length;n++)e=Math.imul(31,e)+t.charCodeAt(n)|0;return"SMS_"+Math.abs(e).toString(36)}function KB(t){const e=t.toLowerCase();return e.includes("سحب")||e.includes("withdraw")?"withdraw":(e.includes("تحويل")||e.includes("transfer")||e.includes("تم تحويل"),"transfer")}function GB(t){const n=t.replace(/,/g,"").match(/(\d{1,9}(?:\.\d{1,2})?)/);return n?parseFloat(n[1]):null}function QB(t){const e=t.match(/01\d{9}/);return e?e[0]:void 0}function YB(t){const e=t.toLowerCase();if(e.includes("فودافون")||e.includes("vodafone"))return"vodafone_cash";if(e.includes("اورانج")||e.includes("orange"))return"orange_cash";if(e.includes("اتصالات")||e.includes("etisalat"))return"etisalat_cash";if(e.includes("instapay")||e.includes("إنستا باي")||e.includes("انستابي"))return"instapay"}function JB(t={}){if(typeof window>"u")return()=>{};const e=t.createdBy||"mobile_sms_bridge",n=async r=>{const s=r.detail||{};try{let o=null;if(s&&s.payload)o=s.payload,o.shopId=o.shopId||t.shopId,o.lineId=o.lineId||t.lineId,o.provider=o.provider||t.provider,o.createdBy=o.createdBy||e;else if(s&&s.text){const l=s.text,u=KB(l),d=GB(l),h=u==="transfer"?QB(l):void 0,p=YB(l)||t.provider;if(!t.shopId||!t.lineId||!p){console.warn("SMS integration missing identifiers. Provide shopId, lineId, provider in initSmsIntegration."),Ud.warning("تعذّر ربط رسالة SMS بالمعاملة تلقائياً (بيانات غير مكتملة)");return}o={type:u,amount:d||0,provider:p,shopId:t.shopId,lineId:t.lineId,receiverMsisdn:h,reference:s.reference||HB(l),createdBy:e,note:"Parsed from SMS"}}if(!o)return;if((await WB(o)).duplicate)Ud.info("تم تجاهل عملية مكررة من رسالة SMS");else{const l=o.type==="withdraw"?"سحب":"تحويل";Ud.success(`تم تسجيل ${l} تلقائياً من رسالة SMS`)}}catch(o){console.error("Failed to process mobile SMS notification:",o),Ud.error("فشل تسجيل المعاملة من رسالة SMS")}};return window.addEventListener("mobileSmsReceived",n),()=>window.removeEventListener("mobileSmsReceived",n)}const XB=z.lazy(()=>Le(()=>import("./Index--7MpbvOc.js"),[])),g1=z.lazy(()=>Le(()=>import("./LandingPage-C_Ip4Mfp.js"),__vite__mapDeps([3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27]))),ZB=z.lazy(()=>Le(()=>import("./SubscriptionsPage-UaTJQ8Cq.js"),__vite__mapDeps([28,4,5,19,29,30,23,24,21,22,26]))),e$=z.lazy(()=>Le(()=>import("./AuthPage-9przauFt.js"),__vite__mapDeps([31,4,13,5,20]))),t$=z.lazy(()=>Le(()=>import("./UserLoginPage-CxMaXYwe.js"),__vite__mapDeps([32,4,13,33,20,34,35,15,36]))),y1=z.lazy(()=>Le(()=>import("./UserRegisterPage-CpJXRLyS.js"),__vite__mapDeps([37,5,4,13,14,38,39,40,41,33,42,43,34,35,15,36]))),n$=z.lazy(()=>Le(()=>import("./UserAccountSetupPage-CvoYgNPU.js"),__vite__mapDeps([44,5,4,13,14,38,43,33,42,26,36]))),r$=z.lazy(()=>Le(()=>import("./ForgotPasswordCodePage-Dc_XFW5R.js"),__vite__mapDeps([45,13,4,5,34,17,26]))),i$=z.lazy(()=>Le(()=>import("./DashboardLoginPage-D1PJ7UnL.js"),__vite__mapDeps([46,5,13,4,20,33,35,15,18]))),s$=z.lazy(()=>Le(()=>import("./ProtectedDashboard-Bt-BxkSH.js"),__vite__mapDeps([47,5,4,13,48,49,8,9,11,50,39,26,51]))),o$=z.lazy(()=>Le(()=>import("./ProtectedUserDashboard-DH6Atd8R.js"),__vite__mapDeps([52,53,54]))),a$=z.lazy(()=>Le(()=>import("./MerchantDashboard-Lesc9k3v.js"),__vite__mapDeps([55,4,7,8,9,10,11,48,33,56,5,57,13,14,49,12,58,59]))),l$=z.lazy(()=>Le(()=>import("./PendingApprovalPage-CJni9NxW.js"),__vite__mapDeps([60,5,4,19,61,18,35,26,62]))),c$=z.lazy(()=>Le(()=>import("./AdminLogin-BHe90p-V.js"),__vite__mapDeps([63,18,34,35,15]))),u$=z.lazy(()=>Le(()=>import("./ProtectedAdminDashboard-3czaMfXD.js"),__vite__mapDeps([64,6,7,8,9,10,11,4,12,13,14,15,16,17,18,5,49,38,48,65,19,62,61,42,66,67,53,33,30,34,35,25,68,24,26,69,29]))),d$=z.lazy(()=>Le(()=>import("./AuthTestPage-dAHehoA7.js"),__vite__mapDeps([70,4,5,13,14]))),h$=z.lazy(()=>Le(()=>import("./ProfileSettingsPage-C1ADDmJw.js"),__vite__mapDeps([71,5,4,13,14,16,72,12,9,2,18,15,61,35,59,21,33,66,41,67,24,62]))),f$=z.lazy(()=>Le(()=>import("./TransactionsPage-9fdPd0xs.js"),__vite__mapDeps([73,5,4,13,48,10,9,8,74,12,65,2,57,26,35,15,14,61,30,21,51]))),p$=z.lazy(()=>Le(()=>import("./WalletAdditionPage-IE9AeIEn.js"),__vite__mapDeps([75,5,4,13,14,49,8,9,11,21,39,42,61]))),m$=z.lazy(()=>Le(()=>import("./ReferralsPage-BY3cVEB1.js"),__vite__mapDeps([76,5,4,13,48,38,41,54,26,67,68,40,51]))),g$=z.lazy(()=>Le(()=>import("./NotFound-C4kpmAhk.js"),[])),y$=new UL,v$=()=>yi().pathname.startsWith("/user/dashboard")?O.jsx(jB,{}):null,_$=()=>{const t=tk(),{profile:e}=Hp();return $B(),b.useEffect(()=>{if(t&&(e!=null&&e.shopId))return JB({shopId:e.shopId,createdBy:e.userId})},[t,e==null?void 0:e.shopId]),b.useEffect(()=>{if(!t)return;const n=document.createElement("style");n.setAttribute("data-disable-pull-to-refresh","true"),n.textContent="html, body { overscroll-behavior-y: none; }",document.head.appendChild(n);let r=0;const i=o=>{var a,l;r=((l=(a=o.touches)==null?void 0:a[0])==null?void 0:l.clientY)||0},s=o=>{var d,h;const a=((h=(d=o.touches)==null?void 0:d[0])==null?void 0:h.clientY)||0;((document.scrollingElement||document.documentElement).scrollTop||window.scrollY||0)<=0&&a>r&&o.cancelable&&o.preventDefault()};return document.addEventListener("touchstart",i,{passive:!0}),document.addEventListener("touchmove",s,{passive:!1}),()=>{document.removeEventListener("touchstart",i),document.removeEventListener("touchmove",s);try{document.head.removeChild(n)}catch{}}},[t]),null},w$=()=>O.jsx(BL,{client:y$,children:O.jsx($F,{children:O.jsxs(mL,{children:[O.jsx(JO,{}),O.jsx(RV,{}),O.jsxs(FF,{children:[O.jsx(_$,{}),O.jsx(b.Suspense,{fallback:O.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:O.jsx("div",{className:"text-center",children:O.jsxs("div",{className:"flex items-center justify-center gap-2",children:[O.jsx("span",{className:"w-3 h-3 rounded-full bg-gradient-to-r from-indigo-500 to-purple-500 animate-bounce",style:{animationDelay:"0ms"}}),O.jsx("span",{className:"w-3 h-3 rounded-full bg-gradient-to-r from-indigo-500 to-purple-500 animate-bounce",style:{animationDelay:"150ms"}}),O.jsx("span",{className:"w-3 h-3 rounded-full bg-gradient-to-r from-indigo-500 to-purple-500 animate-bounce",style:{animationDelay:"300ms"}})]})})}),children:O.jsxs(CF,{children:[O.jsx(qe,{path:"/",element:O.jsx(g1,{})}),O.jsx(qe,{path:"/dashboard-redirect",element:O.jsx(XB,{})}),O.jsx(qe,{path:"/landing",element:O.jsx(g1,{})}),O.jsx(qe,{path:"/subscriptions",element:O.jsx(ZB,{})}),O.jsx(qe,{path:"/auth",element:O.jsx(e$,{})}),O.jsx(qe,{path:"/sms-hook",element:O.jsx(BB,{})}),O.jsx(qe,{path:"/user/login",element:O.jsx(t$,{})}),O.jsx(qe,{path:"/user/forgot-password",element:O.jsx(r$,{})}),O.jsx(qe,{path:"/user/register",element:O.jsx(y1,{})}),O.jsx(qe,{path:"/register",element:O.jsx(y1,{})}),O.jsx(qe,{path:"/user/account-setup",element:O.jsx(n$,{})}),O.jsx(qe,{path:"/user/pending-approval",element:O.jsx(l$,{})}),O.jsx(qe,{path:"/user/dashboard",element:O.jsx(o$,{})}),O.jsx(qe,{path:"/user/add-wallet",element:O.jsx(p$,{})}),O.jsx(qe,{path:"/admin/login",element:O.jsx(c$,{})}),O.jsx(qe,{path:"/admin/dashboard",element:O.jsx(u$,{})}),O.jsx(qe,{path:"/profile-settings",element:O.jsx(h$,{})}),O.jsx(qe,{path:"/transactions",element:O.jsx(f$,{})}),O.jsx(qe,{path:"/referrals",element:O.jsx(m$,{})}),O.jsx(qe,{path:"/auth-test",element:O.jsx(d$,{})}),O.jsx(qe,{path:"/merchant/*",element:O.jsx(a$,{})}),O.jsx(qe,{path:"/dashboard/login",element:O.jsx(i$,{})}),O.jsx(qe,{path:"/dashboard",element:O.jsx(s$,{})}),O.jsx(qe,{path:"*",element:O.jsx(g$,{})})]})}),O.jsx(v$,{})]})]})})}),nk=b.createContext(void 0),E$=({children:t})=>{const[e,n]=b.useState(null),[r,i]=b.useState(!1),[s,o]=b.useState(null),{profile:a,user:l}=Hp();b.useEffect(()=>{try{const p=localStorage.getItem("cashier_shift_user"),m=localStorage.getItem("cashier_shift_active"),E=localStorage.getItem("cashier_shift_start_at");p&&n(JSON.parse(p)),m&&i(m==="true"),E&&o(Number(E))}catch{}},[]);const u=p=>{n(p);try{p?localStorage.setItem("cashier_shift_user",JSON.stringify(p)):localStorage.removeItem("cashier_shift_user")}catch{}},d=()=>{i(!0);try{localStorage.setItem("cashier_shift_active","true")}catch{}const p=Date.now();o(p);try{localStorage.setItem("cashier_shift_start_at",String(p))}catch{}try{const m=`cashBalance_${(l==null?void 0:l.uid)||"default"}`,E=`userCashBalance_${(l==null?void 0:l.uid)||"default"}`,v=`walletBalances_${(l==null?void 0:l.uid)||"default"}`;let S=localStorage.getItem(m);if(S==null){const y=localStorage.getItem(E);if(y!=null){S=y;try{localStorage.setItem(m,y),localStorage.removeItem(E)}catch{}}}const _=localStorage.getItem(v);S?localStorage.setItem("shiftStartDrawerFunds",S):localStorage.setItem("shiftStartDrawerFunds","0"),_?localStorage.setItem("shiftStartWalletBalances",_):localStorage.setItem("shiftStartWalletBalances","{}")}catch{}try{a!=null&&a.shopId&&(async()=>{try{const m=Te(ne,"dashboardData",a.shopId),E=await xt(m);if(E.exists()){const v=E.data(),S=Number((v==null?void 0:v.cashBalance)??0),_=(v==null?void 0:v.walletBalances)??{};try{const y=localStorage.getItem("shiftStartDrawerFunds"),I=localStorage.getItem("shiftStartWalletBalances"),D=y?parseFloat(y):0,N=I?JSON.parse(I):{},V=!y||!Number.isFinite(D)||D===0,T=!I||Object.keys(N||{}).length===0;V&&localStorage.setItem("shiftStartDrawerFunds",String(Number.isFinite(S)?S:0)),T&&localStorage.setItem("shiftStartWalletBalances",JSON.stringify(_||{}))}catch{}}}catch(m){console.warn("Shift start Firebase read failed:",m)}})()}catch{}},h=()=>{i(!1);try{localStorage.setItem("cashier_shift_active","false")}catch{}};return O.jsx(nk.Provider,{value:{shiftUser:e,isShiftActive:r,shiftStartAt:s,setShiftUser:u,startShift:d,endShift:h},children:t})},ez=()=>{const t=b.useContext(nk);if(!t)throw new Error("useShift must be used within ShiftProvider");return t},rk=b.createContext(void 0);function T$({children:t}){const{profile:e,user:n,loading:r}=Hp(),[i,s]=b.useState(null),[o,a]=b.useState(null),[l,u]=b.useState(!0);b.useEffect(()=>{!r&&e?(s(e.shopId),a((e==null?void 0:e.shopName)||(n==null?void 0:n.displayName)||"المحل"),u(!1)):r||u(!1)},[e,r]);const d={shopId:i,shopName:o,loading:l};return O.jsx(rk.Provider,{value:d,children:t})}function tz(){const t=b.useContext(rk);return t===void 0?{shopId:null,shopName:null,loading:!1}:t}BA(document.getElementById("root")).render(O.jsx(UB,{children:O.jsx(E$,{children:O.jsx(T$,{children:O.jsx(w$,{})})})}));export{mt as $,ur as A,k2 as B,aO as C,gs as D,_t as E,Aw as F,A$ as G,xe as H,hO as I,m1 as J,ez as K,V$ as L,dO as M,O$ as N,CE as O,yn as P,oO as Q,z as R,MB as S,Re as T,Ht as U,DE as V,CF as W,mO as X,qe as Y,ct as Z,Le as _,hp as a,p1 as a$,Oe as a0,Ps as a1,z$ as a2,kE as a3,lO as a4,Q$ as a5,Qv as a6,Gv as a7,S$ as a8,GA as a9,Pl as aA,U$ as aB,j$ as aC,$M as aD,fO as aE,tk as aF,Co as aG,ws as aH,kr as aI,xl as aJ,Sn as aK,Fr as aL,Je as aM,pp as aN,YF as aO,VP as aP,Ns as aQ,g_ as aR,PP as aS,F$ as aT,nr as aU,G$ as aV,L1 as aW,VB as aX,d2 as aY,W$ as aZ,u1 as a_,Xh as aa,L$ as ab,J$ as ac,Y$ as ad,X$ as ae,FB as af,tz as ag,Or as ah,H$ as ai,q$ as aj,a2 as ak,cO as al,pO as am,ut as an,jx as ao,QM as ap,YM as aq,JM as ar,$A as as,qA as at,b$ as au,ys as av,Nu as aw,O2 as ax,Lm as ay,sO as az,M$ as b,Z$ as b0,rn as c,l2 as d,Ud as e,CB as f,yr as g,$$ as h,Te as i,O as j,ne as k,K$ as l,Ph as m,E3 as n,Jy as o,xt as p,gl as q,b as r,w3 as s,og as t,Hp as u,Bo as v,tO as w,yi as x,m2 as y,tp as z};
