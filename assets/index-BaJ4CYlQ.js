const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./LandingPage-AVKl1Q13.js","./card-DLfh52HJ.js","./BrandLogo-DPD3Nlqz.js","./brandingService-4hYRmldz.js","./whatsappService-CkFpZfJI.js","./appDownloadService-Dco1xcoJ.js","./arrow-left-CFvmOtRJ.js","./star-L08Zk0xc.js","./crown-CQUYKMvV.js","./download-CV0yHFGN.js","./zap-OiVuvqCw.js","./shield-BUfn1tuF.js","./chart-column-C_McLIUh.js","./circle-check-big-nE2HPuqM.js","./SubscriptionsPage-gX6AP0HZ.js","./contentService-DAeaXyWl.js","./calendar-B_Alfioc.js","./AuthPage-B1yOsj3i.js","./TopUpPage-BSEQSPzD.js","./select-DyuXCEgh.js","./Combination-uvOg_TRR.js","./index-BDxANiQU.js","./AdminTopupsPage-BgPHf7p_.js","./AdminNotificationsPage-DzLTFvIt.js","./label-BUMa-ycB.js","./textarea-BV93sHIa.js","./link-BBtMUsR1.js","./UserRegisterPage-dXaJoRI3.js","./alert-QDvacVfI.js","./wallet-C1yKhE0a.js","./user-plus-Cm39e-fC.js","./share-2-Djo-VfVd.js","./phone-YdedcXja.js","./store-Cv5kGqRP.js","./UserAccountSetupPage-wb1SOxKk.js","./DashboardLoginPage-CzwRd_Dg.js","./ProtectedDashboard-kv4Wfwq7.js","./badge-CK9fQGht.js","./MasterPinDialog-CaA8A3a3.js","./dialog-Dficjy7S.js","./circle-alert-DetpNY9Y.js","./dollar-sign-B82hCvWQ.js","./circle-x-BMM-biHI.js","./ProtectedUserDashboard-ypIilQbE.js","./broadcastService-FoH3ZT6x.js","./MerchantDashboard-CNFGVMVx.js","./dropdown-menu-C2FHz94g.js","./index-CvylMYeU.js","./WalletsManagement-DM8bbrtc.js","./progress-9fiwWm9n.js","./walletDailyLimitsService-CbdZ_7wZ.js","./square-pen-OQ3nvd0b.js","./PendingApprovalPage-Czezksfx.js","./gift-04i0Aw1w.js","./refresh-cw-DLI1ZDVa.js","./AdminLogin-Dc5ueVkx.js","./ProtectedAdminDashboard-D3Q8VHcZ.js","./ProfileIcon-623ctrff.js","./avatars-DDgW7Iin.js","./switch-Bkn2XlwO.js","./separator-CyJmhVM9.js","./copy-CzZ7ueGi.js","./users-BUenrJap.js","./AuthTestPage-RYuRCyNL.js","./ProfileSettingsPage-BSogQtKY.js","./walletSelectionPinService-fh4XBRJS.js","./TransactionsPage-MjpfwePv.js","./MaintenanceDialog-BS9B6y-S.js","./profitService-Bj9jIfaS.js","./WalletAdditionPage-D-qRBeuU.js","./ReferralsPage-CN-dXAOa.js","./CPanelPage-D652YA89.js","./CPanelLoginPage-COfX6Y0P.js"])))=>i.map(i=>d[i]);
var uN=Object.defineProperty;var n0=t=>{throw TypeError(t)};var dN=(t,e,n)=>e in t?uN(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var r0=(t,e,n)=>dN(t,typeof e!="symbol"?e+"":e,n),Dm=(t,e,n)=>e.has(t)||n0("Cannot "+n);var $=(t,e,n)=>(Dm(t,e,"read from private field"),n?n.call(t):e.get(t)),Ne=(t,e,n)=>e.has(t)?n0("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),me=(t,e,n,r)=>(Dm(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Gt=(t,e,n)=>(Dm(t,e,"access private method"),n);var Ld=(t,e,n,r)=>({set _(s){me(t,e,s,n)},get _(){return $(t,e,r)}});function hN(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Kb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Gb={exports:{}},cp={},Qb={exports:{}},Pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xu=Symbol.for("react.element"),fN=Symbol.for("react.portal"),pN=Symbol.for("react.fragment"),mN=Symbol.for("react.strict_mode"),gN=Symbol.for("react.profiler"),yN=Symbol.for("react.provider"),vN=Symbol.for("react.context"),_N=Symbol.for("react.forward_ref"),wN=Symbol.for("react.suspense"),EN=Symbol.for("react.memo"),TN=Symbol.for("react.lazy"),s0=Symbol.iterator;function IN(t){return t===null||typeof t!="object"?null:(t=s0&&t[s0]||t["@@iterator"],typeof t=="function"?t:null)}var Yb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Xb=Object.assign,Jb={};function Rl(t,e,n){this.props=t,this.context=e,this.refs=Jb,this.updater=n||Yb}Rl.prototype.isReactComponent={};Rl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Rl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Zb(){}Zb.prototype=Rl.prototype;function Lv(t,e,n){this.props=t,this.context=e,this.refs=Jb,this.updater=n||Yb}var Mv=Lv.prototype=new Zb;Mv.constructor=Lv;Xb(Mv,Rl.prototype);Mv.isPureReactComponent=!0;var i0=Array.isArray,eA=Object.prototype.hasOwnProperty,Fv={current:null},tA={key:!0,ref:!0,__self:!0,__source:!0};function nA(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)eA.call(e,r)&&!tA.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Xu,type:t,key:i,ref:o,props:s,_owner:Fv.current}}function SN(t,e){return{$$typeof:Xu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Uv(t){return typeof t=="object"&&t!==null&&t.$$typeof===Xu}function bN(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var o0=/\/+/g;function Nm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?bN(""+t.key):e.toString(36)}function Eh(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Xu:case fN:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Nm(o,0):r,i0(s)?(n="",t!=null&&(n=t.replace(o0,"$&/")+"/"),Eh(s,e,n,"",function(c){return c})):s!=null&&(Uv(s)&&(s=SN(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(o0,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",i0(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Nm(i,a);o+=Eh(i,e,n,l,s)}else if(l=IN(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Nm(i,a++),o+=Eh(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Md(t,e,n){if(t==null)return t;var r=[],s=0;return Eh(t,r,"","",function(i){return e.call(n,i,s++)}),r}function AN(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var mn={current:null},Th={transition:null},xN={ReactCurrentDispatcher:mn,ReactCurrentBatchConfig:Th,ReactCurrentOwner:Fv};function rA(){throw Error("act(...) is not supported in production builds of React.")}Pe.Children={map:Md,forEach:function(t,e,n){Md(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Md(t,function(){e++}),e},toArray:function(t){return Md(t,function(e){return e})||[]},only:function(t){if(!Uv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Pe.Component=Rl;Pe.Fragment=pN;Pe.Profiler=gN;Pe.PureComponent=Lv;Pe.StrictMode=mN;Pe.Suspense=wN;Pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xN;Pe.act=rA;Pe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Xb({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Fv.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)eA.call(e,l)&&!tA.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Xu,type:t.type,key:s,ref:i,props:r,_owner:o}};Pe.createContext=function(t){return t={$$typeof:vN,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:yN,_context:t},t.Consumer=t};Pe.createElement=nA;Pe.createFactory=function(t){var e=nA.bind(null,t);return e.type=t,e};Pe.createRef=function(){return{current:null}};Pe.forwardRef=function(t){return{$$typeof:_N,render:t}};Pe.isValidElement=Uv;Pe.lazy=function(t){return{$$typeof:TN,_payload:{_status:-1,_result:t},_init:AN}};Pe.memo=function(t,e){return{$$typeof:EN,type:t,compare:e===void 0?null:e}};Pe.startTransition=function(t){var e=Th.transition;Th.transition={};try{t()}finally{Th.transition=e}};Pe.unstable_act=rA;Pe.useCallback=function(t,e){return mn.current.useCallback(t,e)};Pe.useContext=function(t){return mn.current.useContext(t)};Pe.useDebugValue=function(){};Pe.useDeferredValue=function(t){return mn.current.useDeferredValue(t)};Pe.useEffect=function(t,e){return mn.current.useEffect(t,e)};Pe.useId=function(){return mn.current.useId()};Pe.useImperativeHandle=function(t,e,n){return mn.current.useImperativeHandle(t,e,n)};Pe.useInsertionEffect=function(t,e){return mn.current.useInsertionEffect(t,e)};Pe.useLayoutEffect=function(t,e){return mn.current.useLayoutEffect(t,e)};Pe.useMemo=function(t,e){return mn.current.useMemo(t,e)};Pe.useReducer=function(t,e,n){return mn.current.useReducer(t,e,n)};Pe.useRef=function(t){return mn.current.useRef(t)};Pe.useState=function(t){return mn.current.useState(t)};Pe.useSyncExternalStore=function(t,e,n){return mn.current.useSyncExternalStore(t,e,n)};Pe.useTransition=function(){return mn.current.useTransition()};Pe.version="18.3.1";Qb.exports=Pe;var b=Qb.exports;const z=Kb(b),sA=hN({__proto__:null,default:z},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RN=b,PN=Symbol.for("react.element"),CN=Symbol.for("react.fragment"),kN=Object.prototype.hasOwnProperty,DN=RN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,NN={key:!0,ref:!0,__self:!0,__source:!0};function iA(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)kN.call(e,r)&&!NN.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:PN,type:t,key:i,ref:o,props:s,_owner:DN.current}}cp.Fragment=CN;cp.jsx=iA;cp.jsxs=iA;Gb.exports=cp;var x=Gb.exports,oA={exports:{}},Kn={},aA={exports:{}},lA={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,U){var Y=F.length;F.push(U);e:for(;0<Y;){var de=Y-1>>>1,ne=F[de];if(0<s(ne,U))F[de]=U,F[Y]=ne,Y=de;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var U=F[0],Y=F.pop();if(Y!==U){F[0]=Y;e:for(var de=0,ne=F.length,ce=ne>>>1;de<ce;){var le=2*(de+1)-1,Ie=F[le],Qe=le+1,ae=F[Qe];if(0>s(Ie,Y))Qe<ne&&0>s(ae,Ie)?(F[de]=ae,F[Qe]=Y,de=Qe):(F[de]=Ie,F[le]=Y,de=le);else if(Qe<ne&&0>s(ae,Y))F[de]=ae,F[Qe]=Y,de=Qe;else break e}}return U}function s(F,U){var Y=F.sortIndex-U.sortIndex;return Y!==0?Y:F.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,f=3,p=!1,E=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(F){for(var U=n(c);U!==null;){if(U.callback===null)r(c);else if(U.startTime<=F)r(c),U.sortIndex=U.expirationTime,e(l,U);else break;U=n(c)}}function k(F){if(g=!1,T(F),!E)if(n(l)!==null)E=!0,ie(O);else{var U=n(c);U!==null&&Q(k,U.startTime-F)}}function O(F,U){E=!1,g&&(g=!1,_(I),I=-1),p=!0;var Y=f;try{for(T(U),h=n(l);h!==null&&(!(h.expirationTime>U)||F&&!R());){var de=h.callback;if(typeof de=="function"){h.callback=null,f=h.priorityLevel;var ne=de(h.expirationTime<=U);U=t.unstable_now(),typeof ne=="function"?h.callback=ne:h===n(l)&&r(l),T(U)}else r(l);h=n(l)}if(h!==null)var ce=!0;else{var le=n(c);le!==null&&Q(k,le.startTime-U),ce=!1}return ce}finally{h=null,f=Y,p=!1}}var V=!1,S=null,I=-1,A=5,D=-1;function R(){return!(t.unstable_now()-D<A)}function N(){if(S!==null){var F=t.unstable_now();D=F;var U=!0;try{U=S(!0,F)}finally{U?C():(V=!1,S=null)}}else V=!1}var C;if(typeof w=="function")C=function(){w(N)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,Z=q.port2;q.port1.onmessage=N,C=function(){Z.postMessage(null)}}else C=function(){v(N,0)};function ie(F){S=F,V||(V=!0,C())}function Q(F,U){I=v(function(){F(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){E||p||(E=!0,ie(O))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(F){switch(f){case 1:case 2:case 3:var U=3;break;default:U=f}var Y=f;f=U;try{return F()}finally{f=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,U){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var Y=f;f=F;try{return U()}finally{f=Y}},t.unstable_scheduleCallback=function(F,U,Y){var de=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?de+Y:de):Y=de,F){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=Y+ne,F={id:d++,callback:U,priorityLevel:F,startTime:Y,expirationTime:ne,sortIndex:-1},Y>de?(F.sortIndex=Y,e(c,F),n(l)===null&&F===n(c)&&(g?(_(I),I=-1):g=!0,Q(k,Y-de))):(F.sortIndex=ne,e(l,F),E||p||(E=!0,ie(O))),F},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(F){var U=f;return function(){var Y=f;f=U;try{return F.apply(this,arguments)}finally{f=Y}}}})(lA);aA.exports=lA;var ON=aA.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VN=b,Hn=ON;function K(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var cA=new Set,ou={};function Zo(t,e){Ja(t,e),Ja(t+"Capture",e)}function Ja(t,e){for(ou[t]=e,t=0;t<e.length;t++)cA.add(e[t])}var Ts=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ug=Object.prototype.hasOwnProperty,LN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,a0={},l0={};function MN(t){return Ug.call(l0,t)?!0:Ug.call(a0,t)?!1:LN.test(t)?l0[t]=!0:(a0[t]=!0,!1)}function FN(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function UN(t,e,n,r){if(e===null||typeof e>"u"||FN(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function gn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Ht={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ht[t]=new gn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ht[e]=new gn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ht[t]=new gn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ht[t]=new gn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ht[t]=new gn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ht[t]=new gn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ht[t]=new gn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ht[t]=new gn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ht[t]=new gn(t,5,!1,t.toLowerCase(),null,!1,!1)});var jv=/[\-:]([a-z])/g;function Bv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(jv,Bv);Ht[e]=new gn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(jv,Bv);Ht[e]=new gn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(jv,Bv);Ht[e]=new gn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ht[t]=new gn(t,1,!1,t.toLowerCase(),null,!1,!1)});Ht.xlinkHref=new gn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ht[t]=new gn(t,1,!1,t.toLowerCase(),null,!0,!0)});function $v(t,e,n,r){var s=Ht.hasOwnProperty(e)?Ht[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(UN(e,n,s,r)&&(n=null),r||s===null?MN(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ks=VN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fd=Symbol.for("react.element"),Ea=Symbol.for("react.portal"),Ta=Symbol.for("react.fragment"),zv=Symbol.for("react.strict_mode"),jg=Symbol.for("react.profiler"),uA=Symbol.for("react.provider"),dA=Symbol.for("react.context"),qv=Symbol.for("react.forward_ref"),Bg=Symbol.for("react.suspense"),$g=Symbol.for("react.suspense_list"),Hv=Symbol.for("react.memo"),ti=Symbol.for("react.lazy"),hA=Symbol.for("react.offscreen"),c0=Symbol.iterator;function lc(t){return t===null||typeof t!="object"?null:(t=c0&&t[c0]||t["@@iterator"],typeof t=="function"?t:null)}var ut=Object.assign,Om;function bc(t){if(Om===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Om=e&&e[1]||""}return`
`+Om+t}var Vm=!1;function Lm(t,e){if(!t||Vm)return"";Vm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Vm=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?bc(t):""}function jN(t){switch(t.tag){case 5:return bc(t.type);case 16:return bc("Lazy");case 13:return bc("Suspense");case 19:return bc("SuspenseList");case 0:case 2:case 15:return t=Lm(t.type,!1),t;case 11:return t=Lm(t.type.render,!1),t;case 1:return t=Lm(t.type,!0),t;default:return""}}function zg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ta:return"Fragment";case Ea:return"Portal";case jg:return"Profiler";case zv:return"StrictMode";case Bg:return"Suspense";case $g:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case dA:return(t.displayName||"Context")+".Consumer";case uA:return(t._context.displayName||"Context")+".Provider";case qv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Hv:return e=t.displayName||null,e!==null?e:zg(t.type)||"Memo";case ti:e=t._payload,t=t._init;try{return zg(t(e))}catch{}}return null}function BN(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zg(e);case 8:return e===zv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Di(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function fA(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function $N(t){var e=fA(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ud(t){t._valueTracker||(t._valueTracker=$N(t))}function pA(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=fA(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Xh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function qg(t,e){var n=e.checked;return ut({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function u0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Di(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function mA(t,e){e=e.checked,e!=null&&$v(t,"checked",e,!1)}function Hg(t,e){mA(t,e);var n=Di(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Wg(t,e.type,n):e.hasOwnProperty("defaultValue")&&Wg(t,e.type,Di(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function d0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Wg(t,e,n){(e!=="number"||Xh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ac=Array.isArray;function Na(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Di(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Kg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(K(91));return ut({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function h0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(K(92));if(Ac(n)){if(1<n.length)throw Error(K(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Di(n)}}function gA(t,e){var n=Di(e.value),r=Di(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function f0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function yA(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Gg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?yA(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var jd,vA=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(jd=jd||document.createElement("div"),jd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=jd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function au(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Mc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zN=["Webkit","ms","Moz","O"];Object.keys(Mc).forEach(function(t){zN.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Mc[e]=Mc[t]})});function _A(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Mc.hasOwnProperty(t)&&Mc[t]?(""+e).trim():e+"px"}function wA(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=_A(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var qN=ut({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Qg(t,e){if(e){if(qN[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(K(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(K(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(K(61))}if(e.style!=null&&typeof e.style!="object")throw Error(K(62))}}function Yg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xg=null;function Wv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Jg=null,Oa=null,Va=null;function p0(t){if(t=ed(t)){if(typeof Jg!="function")throw Error(K(280));var e=t.stateNode;e&&(e=pp(e),Jg(t.stateNode,t.type,e))}}function EA(t){Oa?Va?Va.push(t):Va=[t]:Oa=t}function TA(){if(Oa){var t=Oa,e=Va;if(Va=Oa=null,p0(t),e)for(t=0;t<e.length;t++)p0(e[t])}}function IA(t,e){return t(e)}function SA(){}var Mm=!1;function bA(t,e,n){if(Mm)return t(e,n);Mm=!0;try{return IA(t,e,n)}finally{Mm=!1,(Oa!==null||Va!==null)&&(SA(),TA())}}function lu(t,e){var n=t.stateNode;if(n===null)return null;var r=pp(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(K(231,e,typeof n));return n}var Zg=!1;if(Ts)try{var cc={};Object.defineProperty(cc,"passive",{get:function(){Zg=!0}}),window.addEventListener("test",cc,cc),window.removeEventListener("test",cc,cc)}catch{Zg=!1}function HN(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Fc=!1,Jh=null,Zh=!1,ey=null,WN={onError:function(t){Fc=!0,Jh=t}};function KN(t,e,n,r,s,i,o,a,l){Fc=!1,Jh=null,HN.apply(WN,arguments)}function GN(t,e,n,r,s,i,o,a,l){if(KN.apply(this,arguments),Fc){if(Fc){var c=Jh;Fc=!1,Jh=null}else throw Error(K(198));Zh||(Zh=!0,ey=c)}}function ea(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function AA(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function m0(t){if(ea(t)!==t)throw Error(K(188))}function QN(t){var e=t.alternate;if(!e){if(e=ea(t),e===null)throw Error(K(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return m0(s),t;if(i===r)return m0(s),e;i=i.sibling}throw Error(K(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(K(189))}}if(n.alternate!==r)throw Error(K(190))}if(n.tag!==3)throw Error(K(188));return n.stateNode.current===n?t:e}function xA(t){return t=QN(t),t!==null?RA(t):null}function RA(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=RA(t);if(e!==null)return e;t=t.sibling}return null}var PA=Hn.unstable_scheduleCallback,g0=Hn.unstable_cancelCallback,YN=Hn.unstable_shouldYield,XN=Hn.unstable_requestPaint,vt=Hn.unstable_now,JN=Hn.unstable_getCurrentPriorityLevel,Kv=Hn.unstable_ImmediatePriority,CA=Hn.unstable_UserBlockingPriority,ef=Hn.unstable_NormalPriority,ZN=Hn.unstable_LowPriority,kA=Hn.unstable_IdlePriority,up=null,Qr=null;function e2(t){if(Qr&&typeof Qr.onCommitFiberRoot=="function")try{Qr.onCommitFiberRoot(up,t,void 0,(t.current.flags&128)===128)}catch{}}var vr=Math.clz32?Math.clz32:r2,t2=Math.log,n2=Math.LN2;function r2(t){return t>>>=0,t===0?32:31-(t2(t)/n2|0)|0}var Bd=64,$d=4194304;function xc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function tf(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=xc(a):(i&=o,i!==0&&(r=xc(i)))}else o=n&~s,o!==0?r=xc(o):i!==0&&(r=xc(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-vr(e),s=1<<n,r|=t[n],e&=~s;return r}function s2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function i2(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-vr(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=s2(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function ty(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function DA(){var t=Bd;return Bd<<=1,!(Bd&4194240)&&(Bd=64),t}function Fm(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ju(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-vr(e),t[e]=n}function o2(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-vr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Gv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-vr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var $e=0;function NA(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var OA,Qv,VA,LA,MA,ny=!1,zd=[],yi=null,vi=null,_i=null,cu=new Map,uu=new Map,ri=[],a2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function y0(t,e){switch(t){case"focusin":case"focusout":yi=null;break;case"dragenter":case"dragleave":vi=null;break;case"mouseover":case"mouseout":_i=null;break;case"pointerover":case"pointerout":cu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":uu.delete(e.pointerId)}}function uc(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ed(e),e!==null&&Qv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function l2(t,e,n,r,s){switch(e){case"focusin":return yi=uc(yi,t,e,n,r,s),!0;case"dragenter":return vi=uc(vi,t,e,n,r,s),!0;case"mouseover":return _i=uc(_i,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return cu.set(i,uc(cu.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,uu.set(i,uc(uu.get(i)||null,t,e,n,r,s)),!0}return!1}function FA(t){var e=Eo(t.target);if(e!==null){var n=ea(e);if(n!==null){if(e=n.tag,e===13){if(e=AA(n),e!==null){t.blockedOn=e,MA(t.priority,function(){VA(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ih(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ry(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Xg=r,n.target.dispatchEvent(r),Xg=null}else return e=ed(n),e!==null&&Qv(e),t.blockedOn=n,!1;e.shift()}return!0}function v0(t,e,n){Ih(t)&&n.delete(e)}function c2(){ny=!1,yi!==null&&Ih(yi)&&(yi=null),vi!==null&&Ih(vi)&&(vi=null),_i!==null&&Ih(_i)&&(_i=null),cu.forEach(v0),uu.forEach(v0)}function dc(t,e){t.blockedOn===e&&(t.blockedOn=null,ny||(ny=!0,Hn.unstable_scheduleCallback(Hn.unstable_NormalPriority,c2)))}function du(t){function e(s){return dc(s,t)}if(0<zd.length){dc(zd[0],t);for(var n=1;n<zd.length;n++){var r=zd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(yi!==null&&dc(yi,t),vi!==null&&dc(vi,t),_i!==null&&dc(_i,t),cu.forEach(e),uu.forEach(e),n=0;n<ri.length;n++)r=ri[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ri.length&&(n=ri[0],n.blockedOn===null);)FA(n),n.blockedOn===null&&ri.shift()}var La=ks.ReactCurrentBatchConfig,nf=!0;function u2(t,e,n,r){var s=$e,i=La.transition;La.transition=null;try{$e=1,Yv(t,e,n,r)}finally{$e=s,La.transition=i}}function d2(t,e,n,r){var s=$e,i=La.transition;La.transition=null;try{$e=4,Yv(t,e,n,r)}finally{$e=s,La.transition=i}}function Yv(t,e,n,r){if(nf){var s=ry(t,e,n,r);if(s===null)Gm(t,e,r,rf,n),y0(t,r);else if(l2(s,t,e,n,r))r.stopPropagation();else if(y0(t,r),e&4&&-1<a2.indexOf(t)){for(;s!==null;){var i=ed(s);if(i!==null&&OA(i),i=ry(t,e,n,r),i===null&&Gm(t,e,r,rf,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Gm(t,e,r,null,n)}}var rf=null;function ry(t,e,n,r){if(rf=null,t=Wv(r),t=Eo(t),t!==null)if(e=ea(t),e===null)t=null;else if(n=e.tag,n===13){if(t=AA(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return rf=t,null}function UA(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(JN()){case Kv:return 1;case CA:return 4;case ef:case ZN:return 16;case kA:return 536870912;default:return 16}default:return 16}}var hi=null,Xv=null,Sh=null;function jA(){if(Sh)return Sh;var t,e=Xv,n=e.length,r,s="value"in hi?hi.value:hi.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Sh=s.slice(t,1<r?1-r:void 0)}function bh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function qd(){return!0}function _0(){return!1}function Gn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?qd:_0,this.isPropagationStopped=_0,this}return ut(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=qd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=qd)},persist:function(){},isPersistent:qd}),e}var Pl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jv=Gn(Pl),Zu=ut({},Pl,{view:0,detail:0}),h2=Gn(Zu),Um,jm,hc,dp=ut({},Zu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==hc&&(hc&&t.type==="mousemove"?(Um=t.screenX-hc.screenX,jm=t.screenY-hc.screenY):jm=Um=0,hc=t),Um)},movementY:function(t){return"movementY"in t?t.movementY:jm}}),w0=Gn(dp),f2=ut({},dp,{dataTransfer:0}),p2=Gn(f2),m2=ut({},Zu,{relatedTarget:0}),Bm=Gn(m2),g2=ut({},Pl,{animationName:0,elapsedTime:0,pseudoElement:0}),y2=Gn(g2),v2=ut({},Pl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),_2=Gn(v2),w2=ut({},Pl,{data:0}),E0=Gn(w2),E2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},T2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},I2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function S2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=I2[t])?!!e[t]:!1}function Zv(){return S2}var b2=ut({},Zu,{key:function(t){if(t.key){var e=E2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=bh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?T2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zv,charCode:function(t){return t.type==="keypress"?bh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?bh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),A2=Gn(b2),x2=ut({},dp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T0=Gn(x2),R2=ut({},Zu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zv}),P2=Gn(R2),C2=ut({},Pl,{propertyName:0,elapsedTime:0,pseudoElement:0}),k2=Gn(C2),D2=ut({},dp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),N2=Gn(D2),O2=[9,13,27,32],e_=Ts&&"CompositionEvent"in window,Uc=null;Ts&&"documentMode"in document&&(Uc=document.documentMode);var V2=Ts&&"TextEvent"in window&&!Uc,BA=Ts&&(!e_||Uc&&8<Uc&&11>=Uc),I0=" ",S0=!1;function $A(t,e){switch(t){case"keyup":return O2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zA(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ia=!1;function L2(t,e){switch(t){case"compositionend":return zA(e);case"keypress":return e.which!==32?null:(S0=!0,I0);case"textInput":return t=e.data,t===I0&&S0?null:t;default:return null}}function M2(t,e){if(Ia)return t==="compositionend"||!e_&&$A(t,e)?(t=jA(),Sh=Xv=hi=null,Ia=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return BA&&e.locale!=="ko"?null:e.data;default:return null}}var F2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function b0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!F2[t.type]:e==="textarea"}function qA(t,e,n,r){EA(r),e=sf(e,"onChange"),0<e.length&&(n=new Jv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var jc=null,hu=null;function U2(t){t1(t,0)}function hp(t){var e=Aa(t);if(pA(e))return t}function j2(t,e){if(t==="change")return e}var HA=!1;if(Ts){var $m;if(Ts){var zm="oninput"in document;if(!zm){var A0=document.createElement("div");A0.setAttribute("oninput","return;"),zm=typeof A0.oninput=="function"}$m=zm}else $m=!1;HA=$m&&(!document.documentMode||9<document.documentMode)}function x0(){jc&&(jc.detachEvent("onpropertychange",WA),hu=jc=null)}function WA(t){if(t.propertyName==="value"&&hp(hu)){var e=[];qA(e,hu,t,Wv(t)),bA(U2,e)}}function B2(t,e,n){t==="focusin"?(x0(),jc=e,hu=n,jc.attachEvent("onpropertychange",WA)):t==="focusout"&&x0()}function $2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return hp(hu)}function z2(t,e){if(t==="click")return hp(e)}function q2(t,e){if(t==="input"||t==="change")return hp(e)}function H2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Tr=typeof Object.is=="function"?Object.is:H2;function fu(t,e){if(Tr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Ug.call(e,s)||!Tr(t[s],e[s]))return!1}return!0}function R0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function P0(t,e){var n=R0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=R0(n)}}function KA(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?KA(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function GA(){for(var t=window,e=Xh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Xh(t.document)}return e}function t_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function W2(t){var e=GA(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&KA(n.ownerDocument.documentElement,n)){if(r!==null&&t_(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=P0(n,i);var o=P0(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var K2=Ts&&"documentMode"in document&&11>=document.documentMode,Sa=null,sy=null,Bc=null,iy=!1;function C0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;iy||Sa==null||Sa!==Xh(r)||(r=Sa,"selectionStart"in r&&t_(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Bc&&fu(Bc,r)||(Bc=r,r=sf(sy,"onSelect"),0<r.length&&(e=new Jv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Sa)))}function Hd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ba={animationend:Hd("Animation","AnimationEnd"),animationiteration:Hd("Animation","AnimationIteration"),animationstart:Hd("Animation","AnimationStart"),transitionend:Hd("Transition","TransitionEnd")},qm={},QA={};Ts&&(QA=document.createElement("div").style,"AnimationEvent"in window||(delete ba.animationend.animation,delete ba.animationiteration.animation,delete ba.animationstart.animation),"TransitionEvent"in window||delete ba.transitionend.transition);function fp(t){if(qm[t])return qm[t];if(!ba[t])return t;var e=ba[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in QA)return qm[t]=e[n];return t}var YA=fp("animationend"),XA=fp("animationiteration"),JA=fp("animationstart"),ZA=fp("transitionend"),e1=new Map,k0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ki(t,e){e1.set(t,e),Zo(e,[t])}for(var Hm=0;Hm<k0.length;Hm++){var Wm=k0[Hm],G2=Wm.toLowerCase(),Q2=Wm[0].toUpperCase()+Wm.slice(1);Ki(G2,"on"+Q2)}Ki(YA,"onAnimationEnd");Ki(XA,"onAnimationIteration");Ki(JA,"onAnimationStart");Ki("dblclick","onDoubleClick");Ki("focusin","onFocus");Ki("focusout","onBlur");Ki(ZA,"onTransitionEnd");Ja("onMouseEnter",["mouseout","mouseover"]);Ja("onMouseLeave",["mouseout","mouseover"]);Ja("onPointerEnter",["pointerout","pointerover"]);Ja("onPointerLeave",["pointerout","pointerover"]);Zo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Y2=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rc));function D0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,GN(r,e,void 0,t),t.currentTarget=null}function t1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;D0(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;D0(s,a,c),i=l}}}if(Zh)throw t=ey,Zh=!1,ey=null,t}function Je(t,e){var n=e[uy];n===void 0&&(n=e[uy]=new Set);var r=t+"__bubble";n.has(r)||(n1(e,t,2,!1),n.add(r))}function Km(t,e,n){var r=0;e&&(r|=4),n1(n,t,r,e)}var Wd="_reactListening"+Math.random().toString(36).slice(2);function pu(t){if(!t[Wd]){t[Wd]=!0,cA.forEach(function(n){n!=="selectionchange"&&(Y2.has(n)||Km(n,!1,t),Km(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Wd]||(e[Wd]=!0,Km("selectionchange",!1,e))}}function n1(t,e,n,r){switch(UA(e)){case 1:var s=u2;break;case 4:s=d2;break;default:s=Yv}n=s.bind(null,e,n,t),s=void 0,!Zg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Gm(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Eo(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}bA(function(){var c=i,d=Wv(n),h=[];e:{var f=e1.get(t);if(f!==void 0){var p=Jv,E=t;switch(t){case"keypress":if(bh(n)===0)break e;case"keydown":case"keyup":p=A2;break;case"focusin":E="focus",p=Bm;break;case"focusout":E="blur",p=Bm;break;case"beforeblur":case"afterblur":p=Bm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=w0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=p2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=P2;break;case YA:case XA:case JA:p=y2;break;case ZA:p=k2;break;case"scroll":p=h2;break;case"wheel":p=N2;break;case"copy":case"cut":case"paste":p=_2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=T0}var g=(e&4)!==0,v=!g&&t==="scroll",_=g?f!==null?f+"Capture":null:f;g=[];for(var w=c,T;w!==null;){T=w;var k=T.stateNode;if(T.tag===5&&k!==null&&(T=k,_!==null&&(k=lu(w,_),k!=null&&g.push(mu(w,k,T)))),v)break;w=w.return}0<g.length&&(f=new p(f,E,null,n,d),h.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==Xg&&(E=n.relatedTarget||n.fromElement)&&(Eo(E)||E[Is]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(E=n.relatedTarget||n.toElement,p=c,E=E?Eo(E):null,E!==null&&(v=ea(E),E!==v||E.tag!==5&&E.tag!==6)&&(E=null)):(p=null,E=c),p!==E)){if(g=w0,k="onMouseLeave",_="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(g=T0,k="onPointerLeave",_="onPointerEnter",w="pointer"),v=p==null?f:Aa(p),T=E==null?f:Aa(E),f=new g(k,w+"leave",p,n,d),f.target=v,f.relatedTarget=T,k=null,Eo(d)===c&&(g=new g(_,w+"enter",E,n,d),g.target=T,g.relatedTarget=v,k=g),v=k,p&&E)t:{for(g=p,_=E,w=0,T=g;T;T=la(T))w++;for(T=0,k=_;k;k=la(k))T++;for(;0<w-T;)g=la(g),w--;for(;0<T-w;)_=la(_),T--;for(;w--;){if(g===_||_!==null&&g===_.alternate)break t;g=la(g),_=la(_)}g=null}else g=null;p!==null&&N0(h,f,p,g,!1),E!==null&&v!==null&&N0(h,v,E,g,!0)}}e:{if(f=c?Aa(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var O=j2;else if(b0(f))if(HA)O=q2;else{O=$2;var V=B2}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(O=z2);if(O&&(O=O(t,c))){qA(h,O,n,d);break e}V&&V(t,f,c),t==="focusout"&&(V=f._wrapperState)&&V.controlled&&f.type==="number"&&Wg(f,"number",f.value)}switch(V=c?Aa(c):window,t){case"focusin":(b0(V)||V.contentEditable==="true")&&(Sa=V,sy=c,Bc=null);break;case"focusout":Bc=sy=Sa=null;break;case"mousedown":iy=!0;break;case"contextmenu":case"mouseup":case"dragend":iy=!1,C0(h,n,d);break;case"selectionchange":if(K2)break;case"keydown":case"keyup":C0(h,n,d)}var S;if(e_)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Ia?$A(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(BA&&n.locale!=="ko"&&(Ia||I!=="onCompositionStart"?I==="onCompositionEnd"&&Ia&&(S=jA()):(hi=d,Xv="value"in hi?hi.value:hi.textContent,Ia=!0)),V=sf(c,I),0<V.length&&(I=new E0(I,t,null,n,d),h.push({event:I,listeners:V}),S?I.data=S:(S=zA(n),S!==null&&(I.data=S)))),(S=V2?L2(t,n):M2(t,n))&&(c=sf(c,"onBeforeInput"),0<c.length&&(d=new E0("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=S))}t1(h,e)})}function mu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function sf(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=lu(t,n),i!=null&&r.unshift(mu(t,i,s)),i=lu(t,e),i!=null&&r.push(mu(t,i,s))),t=t.return}return r}function la(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function N0(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=lu(n,i),l!=null&&o.unshift(mu(n,l,a))):s||(l=lu(n,i),l!=null&&o.push(mu(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var X2=/\r\n?/g,J2=/\u0000|\uFFFD/g;function O0(t){return(typeof t=="string"?t:""+t).replace(X2,`
`).replace(J2,"")}function Kd(t,e,n){if(e=O0(e),O0(t)!==e&&n)throw Error(K(425))}function of(){}var oy=null,ay=null;function ly(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var cy=typeof setTimeout=="function"?setTimeout:void 0,Z2=typeof clearTimeout=="function"?clearTimeout:void 0,V0=typeof Promise=="function"?Promise:void 0,eO=typeof queueMicrotask=="function"?queueMicrotask:typeof V0<"u"?function(t){return V0.resolve(null).then(t).catch(tO)}:cy;function tO(t){setTimeout(function(){throw t})}function Qm(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),du(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);du(e)}function wi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function L0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Cl=Math.random().toString(36).slice(2),qr="__reactFiber$"+Cl,gu="__reactProps$"+Cl,Is="__reactContainer$"+Cl,uy="__reactEvents$"+Cl,nO="__reactListeners$"+Cl,rO="__reactHandles$"+Cl;function Eo(t){var e=t[qr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Is]||n[qr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=L0(t);t!==null;){if(n=t[qr])return n;t=L0(t)}return e}t=n,n=t.parentNode}return null}function ed(t){return t=t[qr]||t[Is],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Aa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(K(33))}function pp(t){return t[gu]||null}var dy=[],xa=-1;function Gi(t){return{current:t}}function et(t){0>xa||(t.current=dy[xa],dy[xa]=null,xa--)}function Ke(t,e){xa++,dy[xa]=t.current,t.current=e}var Ni={},on=Gi(Ni),xn=Gi(!1),Uo=Ni;function Za(t,e){var n=t.type.contextTypes;if(!n)return Ni;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Rn(t){return t=t.childContextTypes,t!=null}function af(){et(xn),et(on)}function M0(t,e,n){if(on.current!==Ni)throw Error(K(168));Ke(on,e),Ke(xn,n)}function r1(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(K(108,BN(t)||"Unknown",s));return ut({},n,r)}function lf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ni,Uo=on.current,Ke(on,t),Ke(xn,xn.current),!0}function F0(t,e,n){var r=t.stateNode;if(!r)throw Error(K(169));n?(t=r1(t,e,Uo),r.__reactInternalMemoizedMergedChildContext=t,et(xn),et(on),Ke(on,t)):et(xn),Ke(xn,n)}var cs=null,mp=!1,Ym=!1;function s1(t){cs===null?cs=[t]:cs.push(t)}function sO(t){mp=!0,s1(t)}function Qi(){if(!Ym&&cs!==null){Ym=!0;var t=0,e=$e;try{var n=cs;for($e=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}cs=null,mp=!1}catch(s){throw cs!==null&&(cs=cs.slice(t+1)),PA(Kv,Qi),s}finally{$e=e,Ym=!1}}return null}var Ra=[],Pa=0,cf=null,uf=0,Zn=[],er=0,jo=null,hs=1,fs="";function co(t,e){Ra[Pa++]=uf,Ra[Pa++]=cf,cf=t,uf=e}function i1(t,e,n){Zn[er++]=hs,Zn[er++]=fs,Zn[er++]=jo,jo=t;var r=hs;t=fs;var s=32-vr(r)-1;r&=~(1<<s),n+=1;var i=32-vr(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,hs=1<<32-vr(e)+s|n<<s|r,fs=i+t}else hs=1<<i|n<<s|r,fs=t}function n_(t){t.return!==null&&(co(t,1),i1(t,1,0))}function r_(t){for(;t===cf;)cf=Ra[--Pa],Ra[Pa]=null,uf=Ra[--Pa],Ra[Pa]=null;for(;t===jo;)jo=Zn[--er],Zn[er]=null,fs=Zn[--er],Zn[er]=null,hs=Zn[--er],Zn[er]=null}var Bn=null,Fn=null,rt=!1,gr=null;function o1(t,e){var n=tr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function U0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Bn=t,Fn=wi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Bn=t,Fn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=jo!==null?{id:hs,overflow:fs}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=tr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Bn=t,Fn=null,!0):!1;default:return!1}}function hy(t){return(t.mode&1)!==0&&(t.flags&128)===0}function fy(t){if(rt){var e=Fn;if(e){var n=e;if(!U0(t,e)){if(hy(t))throw Error(K(418));e=wi(n.nextSibling);var r=Bn;e&&U0(t,e)?o1(r,n):(t.flags=t.flags&-4097|2,rt=!1,Bn=t)}}else{if(hy(t))throw Error(K(418));t.flags=t.flags&-4097|2,rt=!1,Bn=t}}}function j0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Bn=t}function Gd(t){if(t!==Bn)return!1;if(!rt)return j0(t),rt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ly(t.type,t.memoizedProps)),e&&(e=Fn)){if(hy(t))throw a1(),Error(K(418));for(;e;)o1(t,e),e=wi(e.nextSibling)}if(j0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(K(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Fn=wi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Fn=null}}else Fn=Bn?wi(t.stateNode.nextSibling):null;return!0}function a1(){for(var t=Fn;t;)t=wi(t.nextSibling)}function el(){Fn=Bn=null,rt=!1}function s_(t){gr===null?gr=[t]:gr.push(t)}var iO=ks.ReactCurrentBatchConfig;function fc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(K(309));var r=n.stateNode}if(!r)throw Error(K(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(K(284));if(!n._owner)throw Error(K(290,t))}return t}function Qd(t,e){throw t=Object.prototype.toString.call(e),Error(K(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function B0(t){var e=t._init;return e(t._payload)}function l1(t){function e(_,w){if(t){var T=_.deletions;T===null?(_.deletions=[w],_.flags|=16):T.push(w)}}function n(_,w){if(!t)return null;for(;w!==null;)e(_,w),w=w.sibling;return null}function r(_,w){for(_=new Map;w!==null;)w.key!==null?_.set(w.key,w):_.set(w.index,w),w=w.sibling;return _}function s(_,w){return _=Si(_,w),_.index=0,_.sibling=null,_}function i(_,w,T){return _.index=T,t?(T=_.alternate,T!==null?(T=T.index,T<w?(_.flags|=2,w):T):(_.flags|=2,w)):(_.flags|=1048576,w)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,w,T,k){return w===null||w.tag!==6?(w=rg(T,_.mode,k),w.return=_,w):(w=s(w,T),w.return=_,w)}function l(_,w,T,k){var O=T.type;return O===Ta?d(_,w,T.props.children,k,T.key):w!==null&&(w.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===ti&&B0(O)===w.type)?(k=s(w,T.props),k.ref=fc(_,w,T),k.return=_,k):(k=Dh(T.type,T.key,T.props,null,_.mode,k),k.ref=fc(_,w,T),k.return=_,k)}function c(_,w,T,k){return w===null||w.tag!==4||w.stateNode.containerInfo!==T.containerInfo||w.stateNode.implementation!==T.implementation?(w=sg(T,_.mode,k),w.return=_,w):(w=s(w,T.children||[]),w.return=_,w)}function d(_,w,T,k,O){return w===null||w.tag!==7?(w=Oo(T,_.mode,k,O),w.return=_,w):(w=s(w,T),w.return=_,w)}function h(_,w,T){if(typeof w=="string"&&w!==""||typeof w=="number")return w=rg(""+w,_.mode,T),w.return=_,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Fd:return T=Dh(w.type,w.key,w.props,null,_.mode,T),T.ref=fc(_,null,w),T.return=_,T;case Ea:return w=sg(w,_.mode,T),w.return=_,w;case ti:var k=w._init;return h(_,k(w._payload),T)}if(Ac(w)||lc(w))return w=Oo(w,_.mode,T,null),w.return=_,w;Qd(_,w)}return null}function f(_,w,T,k){var O=w!==null?w.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return O!==null?null:a(_,w,""+T,k);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Fd:return T.key===O?l(_,w,T,k):null;case Ea:return T.key===O?c(_,w,T,k):null;case ti:return O=T._init,f(_,w,O(T._payload),k)}if(Ac(T)||lc(T))return O!==null?null:d(_,w,T,k,null);Qd(_,T)}return null}function p(_,w,T,k,O){if(typeof k=="string"&&k!==""||typeof k=="number")return _=_.get(T)||null,a(w,_,""+k,O);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Fd:return _=_.get(k.key===null?T:k.key)||null,l(w,_,k,O);case Ea:return _=_.get(k.key===null?T:k.key)||null,c(w,_,k,O);case ti:var V=k._init;return p(_,w,T,V(k._payload),O)}if(Ac(k)||lc(k))return _=_.get(T)||null,d(w,_,k,O,null);Qd(w,k)}return null}function E(_,w,T,k){for(var O=null,V=null,S=w,I=w=0,A=null;S!==null&&I<T.length;I++){S.index>I?(A=S,S=null):A=S.sibling;var D=f(_,S,T[I],k);if(D===null){S===null&&(S=A);break}t&&S&&D.alternate===null&&e(_,S),w=i(D,w,I),V===null?O=D:V.sibling=D,V=D,S=A}if(I===T.length)return n(_,S),rt&&co(_,I),O;if(S===null){for(;I<T.length;I++)S=h(_,T[I],k),S!==null&&(w=i(S,w,I),V===null?O=S:V.sibling=S,V=S);return rt&&co(_,I),O}for(S=r(_,S);I<T.length;I++)A=p(S,_,I,T[I],k),A!==null&&(t&&A.alternate!==null&&S.delete(A.key===null?I:A.key),w=i(A,w,I),V===null?O=A:V.sibling=A,V=A);return t&&S.forEach(function(R){return e(_,R)}),rt&&co(_,I),O}function g(_,w,T,k){var O=lc(T);if(typeof O!="function")throw Error(K(150));if(T=O.call(T),T==null)throw Error(K(151));for(var V=O=null,S=w,I=w=0,A=null,D=T.next();S!==null&&!D.done;I++,D=T.next()){S.index>I?(A=S,S=null):A=S.sibling;var R=f(_,S,D.value,k);if(R===null){S===null&&(S=A);break}t&&S&&R.alternate===null&&e(_,S),w=i(R,w,I),V===null?O=R:V.sibling=R,V=R,S=A}if(D.done)return n(_,S),rt&&co(_,I),O;if(S===null){for(;!D.done;I++,D=T.next())D=h(_,D.value,k),D!==null&&(w=i(D,w,I),V===null?O=D:V.sibling=D,V=D);return rt&&co(_,I),O}for(S=r(_,S);!D.done;I++,D=T.next())D=p(S,_,I,D.value,k),D!==null&&(t&&D.alternate!==null&&S.delete(D.key===null?I:D.key),w=i(D,w,I),V===null?O=D:V.sibling=D,V=D);return t&&S.forEach(function(N){return e(_,N)}),rt&&co(_,I),O}function v(_,w,T,k){if(typeof T=="object"&&T!==null&&T.type===Ta&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case Fd:e:{for(var O=T.key,V=w;V!==null;){if(V.key===O){if(O=T.type,O===Ta){if(V.tag===7){n(_,V.sibling),w=s(V,T.props.children),w.return=_,_=w;break e}}else if(V.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===ti&&B0(O)===V.type){n(_,V.sibling),w=s(V,T.props),w.ref=fc(_,V,T),w.return=_,_=w;break e}n(_,V);break}else e(_,V);V=V.sibling}T.type===Ta?(w=Oo(T.props.children,_.mode,k,T.key),w.return=_,_=w):(k=Dh(T.type,T.key,T.props,null,_.mode,k),k.ref=fc(_,w,T),k.return=_,_=k)}return o(_);case Ea:e:{for(V=T.key;w!==null;){if(w.key===V)if(w.tag===4&&w.stateNode.containerInfo===T.containerInfo&&w.stateNode.implementation===T.implementation){n(_,w.sibling),w=s(w,T.children||[]),w.return=_,_=w;break e}else{n(_,w);break}else e(_,w);w=w.sibling}w=sg(T,_.mode,k),w.return=_,_=w}return o(_);case ti:return V=T._init,v(_,w,V(T._payload),k)}if(Ac(T))return E(_,w,T,k);if(lc(T))return g(_,w,T,k);Qd(_,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,w!==null&&w.tag===6?(n(_,w.sibling),w=s(w,T),w.return=_,_=w):(n(_,w),w=rg(T,_.mode,k),w.return=_,_=w),o(_)):n(_,w)}return v}var tl=l1(!0),c1=l1(!1),df=Gi(null),hf=null,Ca=null,i_=null;function o_(){i_=Ca=hf=null}function a_(t){var e=df.current;et(df),t._currentValue=e}function py(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ma(t,e){hf=t,i_=Ca=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(In=!0),t.firstContext=null)}function sr(t){var e=t._currentValue;if(i_!==t)if(t={context:t,memoizedValue:e,next:null},Ca===null){if(hf===null)throw Error(K(308));Ca=t,hf.dependencies={lanes:0,firstContext:t}}else Ca=Ca.next=t;return e}var To=null;function l_(t){To===null?To=[t]:To.push(t)}function u1(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,l_(e)):(n.next=s.next,s.next=n),e.interleaved=n,Ss(t,r)}function Ss(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ni=!1;function c_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function d1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function gs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ei(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Me&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Ss(t,n)}return s=r.interleaved,s===null?(e.next=e,l_(r)):(e.next=s.next,s.next=e),r.interleaved=e,Ss(t,n)}function Ah(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Gv(t,n)}}function $0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ff(t,e,n,r){var s=t.updateQueue;ni=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,d=c=l=null,a=i;do{var f=a.lane,p=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var E=t,g=a;switch(f=e,p=n,g.tag){case 1:if(E=g.payload,typeof E=="function"){h=E.call(p,h,f);break e}h=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=g.payload,f=typeof E=="function"?E.call(p,h,f):E,f==null)break e;h=ut({},h,f);break e;case 2:ni=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=p,l=h):d=d.next=p,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);$o|=o,t.lanes=o,t.memoizedState=h}}function z0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(K(191,s));s.call(r)}}}var td={},Yr=Gi(td),yu=Gi(td),vu=Gi(td);function Io(t){if(t===td)throw Error(K(174));return t}function u_(t,e){switch(Ke(vu,e),Ke(yu,t),Ke(Yr,td),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Gg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Gg(e,t)}et(Yr),Ke(Yr,e)}function nl(){et(Yr),et(yu),et(vu)}function h1(t){Io(vu.current);var e=Io(Yr.current),n=Gg(e,t.type);e!==n&&(Ke(yu,t),Ke(Yr,n))}function d_(t){yu.current===t&&(et(Yr),et(yu))}var lt=Gi(0);function pf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Xm=[];function h_(){for(var t=0;t<Xm.length;t++)Xm[t]._workInProgressVersionPrimary=null;Xm.length=0}var xh=ks.ReactCurrentDispatcher,Jm=ks.ReactCurrentBatchConfig,Bo=0,ct=null,Pt=null,Ut=null,mf=!1,$c=!1,_u=0,oO=0;function Qt(){throw Error(K(321))}function f_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Tr(t[n],e[n]))return!1;return!0}function p_(t,e,n,r,s,i){if(Bo=i,ct=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,xh.current=t===null||t.memoizedState===null?uO:dO,t=n(r,s),$c){i=0;do{if($c=!1,_u=0,25<=i)throw Error(K(301));i+=1,Ut=Pt=null,e.updateQueue=null,xh.current=hO,t=n(r,s)}while($c)}if(xh.current=gf,e=Pt!==null&&Pt.next!==null,Bo=0,Ut=Pt=ct=null,mf=!1,e)throw Error(K(300));return t}function m_(){var t=_u!==0;return _u=0,t}function Fr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ut===null?ct.memoizedState=Ut=t:Ut=Ut.next=t,Ut}function ir(){if(Pt===null){var t=ct.alternate;t=t!==null?t.memoizedState:null}else t=Pt.next;var e=Ut===null?ct.memoizedState:Ut.next;if(e!==null)Ut=e,Pt=t;else{if(t===null)throw Error(K(310));Pt=t,t={memoizedState:Pt.memoizedState,baseState:Pt.baseState,baseQueue:Pt.baseQueue,queue:Pt.queue,next:null},Ut===null?ct.memoizedState=Ut=t:Ut=Ut.next=t}return Ut}function wu(t,e){return typeof e=="function"?e(t):e}function Zm(t){var e=ir(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var r=Pt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((Bo&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,ct.lanes|=d,$o|=d}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,Tr(r,e.memoizedState)||(In=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,ct.lanes|=i,$o|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function eg(t){var e=ir(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Tr(i,e.memoizedState)||(In=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function f1(){}function p1(t,e){var n=ct,r=ir(),s=e(),i=!Tr(r.memoizedState,s);if(i&&(r.memoizedState=s,In=!0),r=r.queue,g_(y1.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ut!==null&&Ut.memoizedState.tag&1){if(n.flags|=2048,Eu(9,g1.bind(null,n,r,s,e),void 0,null),jt===null)throw Error(K(349));Bo&30||m1(n,e,s)}return s}function m1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ct.updateQueue,e===null?(e={lastEffect:null,stores:null},ct.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function g1(t,e,n,r){e.value=n,e.getSnapshot=r,v1(e)&&_1(t)}function y1(t,e,n){return n(function(){v1(e)&&_1(t)})}function v1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Tr(t,n)}catch{return!0}}function _1(t){var e=Ss(t,1);e!==null&&_r(e,t,1,-1)}function q0(t){var e=Fr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wu,lastRenderedState:t},e.queue=t,t=t.dispatch=cO.bind(null,ct,t),[e.memoizedState,t]}function Eu(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ct.updateQueue,e===null?(e={lastEffect:null,stores:null},ct.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function w1(){return ir().memoizedState}function Rh(t,e,n,r){var s=Fr();ct.flags|=t,s.memoizedState=Eu(1|e,n,void 0,r===void 0?null:r)}function gp(t,e,n,r){var s=ir();r=r===void 0?null:r;var i=void 0;if(Pt!==null){var o=Pt.memoizedState;if(i=o.destroy,r!==null&&f_(r,o.deps)){s.memoizedState=Eu(e,n,i,r);return}}ct.flags|=t,s.memoizedState=Eu(1|e,n,i,r)}function H0(t,e){return Rh(8390656,8,t,e)}function g_(t,e){return gp(2048,8,t,e)}function E1(t,e){return gp(4,2,t,e)}function T1(t,e){return gp(4,4,t,e)}function I1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function S1(t,e,n){return n=n!=null?n.concat([t]):null,gp(4,4,I1.bind(null,e,t),n)}function y_(){}function b1(t,e){var n=ir();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&f_(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function A1(t,e){var n=ir();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&f_(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function x1(t,e,n){return Bo&21?(Tr(n,e)||(n=DA(),ct.lanes|=n,$o|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,In=!0),t.memoizedState=n)}function aO(t,e){var n=$e;$e=n!==0&&4>n?n:4,t(!0);var r=Jm.transition;Jm.transition={};try{t(!1),e()}finally{$e=n,Jm.transition=r}}function R1(){return ir().memoizedState}function lO(t,e,n){var r=Ii(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},P1(t))C1(e,n);else if(n=u1(t,e,n,r),n!==null){var s=hn();_r(n,t,r,s),k1(n,e,r)}}function cO(t,e,n){var r=Ii(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(P1(t))C1(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Tr(a,o)){var l=e.interleaved;l===null?(s.next=s,l_(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=u1(t,e,s,r),n!==null&&(s=hn(),_r(n,t,r,s),k1(n,e,r))}}function P1(t){var e=t.alternate;return t===ct||e!==null&&e===ct}function C1(t,e){$c=mf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function k1(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Gv(t,n)}}var gf={readContext:sr,useCallback:Qt,useContext:Qt,useEffect:Qt,useImperativeHandle:Qt,useInsertionEffect:Qt,useLayoutEffect:Qt,useMemo:Qt,useReducer:Qt,useRef:Qt,useState:Qt,useDebugValue:Qt,useDeferredValue:Qt,useTransition:Qt,useMutableSource:Qt,useSyncExternalStore:Qt,useId:Qt,unstable_isNewReconciler:!1},uO={readContext:sr,useCallback:function(t,e){return Fr().memoizedState=[t,e===void 0?null:e],t},useContext:sr,useEffect:H0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Rh(4194308,4,I1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Rh(4194308,4,t,e)},useInsertionEffect:function(t,e){return Rh(4,2,t,e)},useMemo:function(t,e){var n=Fr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Fr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=lO.bind(null,ct,t),[r.memoizedState,t]},useRef:function(t){var e=Fr();return t={current:t},e.memoizedState=t},useState:q0,useDebugValue:y_,useDeferredValue:function(t){return Fr().memoizedState=t},useTransition:function(){var t=q0(!1),e=t[0];return t=aO.bind(null,t[1]),Fr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ct,s=Fr();if(rt){if(n===void 0)throw Error(K(407));n=n()}else{if(n=e(),jt===null)throw Error(K(349));Bo&30||m1(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,H0(y1.bind(null,r,i,t),[t]),r.flags|=2048,Eu(9,g1.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Fr(),e=jt.identifierPrefix;if(rt){var n=fs,r=hs;n=(r&~(1<<32-vr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=_u++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=oO++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},dO={readContext:sr,useCallback:b1,useContext:sr,useEffect:g_,useImperativeHandle:S1,useInsertionEffect:E1,useLayoutEffect:T1,useMemo:A1,useReducer:Zm,useRef:w1,useState:function(){return Zm(wu)},useDebugValue:y_,useDeferredValue:function(t){var e=ir();return x1(e,Pt.memoizedState,t)},useTransition:function(){var t=Zm(wu)[0],e=ir().memoizedState;return[t,e]},useMutableSource:f1,useSyncExternalStore:p1,useId:R1,unstable_isNewReconciler:!1},hO={readContext:sr,useCallback:b1,useContext:sr,useEffect:g_,useImperativeHandle:S1,useInsertionEffect:E1,useLayoutEffect:T1,useMemo:A1,useReducer:eg,useRef:w1,useState:function(){return eg(wu)},useDebugValue:y_,useDeferredValue:function(t){var e=ir();return Pt===null?e.memoizedState=t:x1(e,Pt.memoizedState,t)},useTransition:function(){var t=eg(wu)[0],e=ir().memoizedState;return[t,e]},useMutableSource:f1,useSyncExternalStore:p1,useId:R1,unstable_isNewReconciler:!1};function ur(t,e){if(t&&t.defaultProps){e=ut({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function my(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ut({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var yp={isMounted:function(t){return(t=t._reactInternals)?ea(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=hn(),s=Ii(t),i=gs(r,s);i.payload=e,n!=null&&(i.callback=n),e=Ei(t,i,s),e!==null&&(_r(e,t,s,r),Ah(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=hn(),s=Ii(t),i=gs(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Ei(t,i,s),e!==null&&(_r(e,t,s,r),Ah(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=hn(),r=Ii(t),s=gs(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ei(t,s,r),e!==null&&(_r(e,t,r,n),Ah(e,t,r))}};function W0(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!fu(n,r)||!fu(s,i):!0}function D1(t,e,n){var r=!1,s=Ni,i=e.contextType;return typeof i=="object"&&i!==null?i=sr(i):(s=Rn(e)?Uo:on.current,r=e.contextTypes,i=(r=r!=null)?Za(t,s):Ni),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=yp,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function K0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&yp.enqueueReplaceState(e,e.state,null)}function gy(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},c_(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=sr(i):(i=Rn(e)?Uo:on.current,s.context=Za(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(my(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&yp.enqueueReplaceState(s,s.state,null),ff(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function rl(t,e){try{var n="",r=e;do n+=jN(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function tg(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function yy(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var fO=typeof WeakMap=="function"?WeakMap:Map;function N1(t,e,n){n=gs(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){vf||(vf=!0,xy=r),yy(t,e)},n}function O1(t,e,n){n=gs(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){yy(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){yy(t,e),typeof r!="function"&&(Ti===null?Ti=new Set([this]):Ti.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function G0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new fO;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=xO.bind(null,t,e,n),e.then(t,t))}function Q0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Y0(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=gs(-1,1),e.tag=2,Ei(n,e,1))),n.lanes|=1),t)}var pO=ks.ReactCurrentOwner,In=!1;function un(t,e,n,r){e.child=t===null?c1(e,null,n,r):tl(e,t.child,n,r)}function X0(t,e,n,r,s){n=n.render;var i=e.ref;return Ma(e,s),r=p_(t,e,n,r,i,s),n=m_(),t!==null&&!In?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,bs(t,e,s)):(rt&&n&&n_(e),e.flags|=1,un(t,e,r,s),e.child)}function J0(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!b_(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,V1(t,e,i,r,s)):(t=Dh(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:fu,n(o,r)&&t.ref===e.ref)return bs(t,e,s)}return e.flags|=1,t=Si(i,r),t.ref=e.ref,t.return=e,e.child=t}function V1(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(fu(i,r)&&t.ref===e.ref)if(In=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(In=!0);else return e.lanes=t.lanes,bs(t,e,s)}return vy(t,e,n,r,s)}function L1(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ke(Da,Nn),Nn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ke(Da,Nn),Nn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ke(Da,Nn),Nn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ke(Da,Nn),Nn|=r;return un(t,e,s,n),e.child}function M1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function vy(t,e,n,r,s){var i=Rn(n)?Uo:on.current;return i=Za(e,i),Ma(e,s),n=p_(t,e,n,r,i,s),r=m_(),t!==null&&!In?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,bs(t,e,s)):(rt&&r&&n_(e),e.flags|=1,un(t,e,n,s),e.child)}function Z0(t,e,n,r,s){if(Rn(n)){var i=!0;lf(e)}else i=!1;if(Ma(e,s),e.stateNode===null)Ph(t,e),D1(e,n,r),gy(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=sr(c):(c=Rn(n)?Uo:on.current,c=Za(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&K0(e,o,r,c),ni=!1;var f=e.memoizedState;o.state=f,ff(e,r,o,s),l=e.memoizedState,a!==r||f!==l||xn.current||ni?(typeof d=="function"&&(my(e,n,d,r),l=e.memoizedState),(a=ni||W0(e,n,a,r,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,d1(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:ur(e.type,a),o.props=c,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=sr(l):(l=Rn(n)?Uo:on.current,l=Za(e,l));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&K0(e,o,r,l),ni=!1,f=e.memoizedState,o.state=f,ff(e,r,o,s);var E=e.memoizedState;a!==h||f!==E||xn.current||ni?(typeof p=="function"&&(my(e,n,p,r),E=e.memoizedState),(c=ni||W0(e,n,c,r,f,E,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,E,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,E,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=E),o.props=r,o.state=E,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return _y(t,e,n,r,i,s)}function _y(t,e,n,r,s,i){M1(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&F0(e,n,!1),bs(t,e,i);r=e.stateNode,pO.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=tl(e,t.child,null,i),e.child=tl(e,null,a,i)):un(t,e,a,i),e.memoizedState=r.state,s&&F0(e,n,!0),e.child}function F1(t){var e=t.stateNode;e.pendingContext?M0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&M0(t,e.context,!1),u_(t,e.containerInfo)}function eT(t,e,n,r,s){return el(),s_(s),e.flags|=256,un(t,e,n,r),e.child}var wy={dehydrated:null,treeContext:null,retryLane:0};function Ey(t){return{baseLanes:t,cachePool:null,transitions:null}}function U1(t,e,n){var r=e.pendingProps,s=lt.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ke(lt,s&1),t===null)return fy(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=wp(o,r,0,null),t=Oo(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Ey(n),e.memoizedState=wy,t):v_(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return mO(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Si(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Si(a,i):(i=Oo(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Ey(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=wy,r}return i=t.child,t=i.sibling,r=Si(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function v_(t,e){return e=wp({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Yd(t,e,n,r){return r!==null&&s_(r),tl(e,t.child,null,n),t=v_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function mO(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=tg(Error(K(422))),Yd(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=wp({mode:"visible",children:r.children},s,0,null),i=Oo(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&tl(e,t.child,null,o),e.child.memoizedState=Ey(o),e.memoizedState=wy,i);if(!(e.mode&1))return Yd(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(K(419)),r=tg(i,r,void 0),Yd(t,e,o,r)}if(a=(o&t.childLanes)!==0,In||a){if(r=jt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Ss(t,s),_r(r,t,s,-1))}return S_(),r=tg(Error(K(421))),Yd(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=RO.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Fn=wi(s.nextSibling),Bn=e,rt=!0,gr=null,t!==null&&(Zn[er++]=hs,Zn[er++]=fs,Zn[er++]=jo,hs=t.id,fs=t.overflow,jo=e),e=v_(e,r.children),e.flags|=4096,e)}function tT(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),py(t.return,e,n)}function ng(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function j1(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(un(t,e,r.children,n),r=lt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&tT(t,n,e);else if(t.tag===19)tT(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ke(lt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&pf(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),ng(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&pf(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}ng(e,!0,n,null,i);break;case"together":ng(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ph(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function bs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),$o|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(K(153));if(e.child!==null){for(t=e.child,n=Si(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Si(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function gO(t,e,n){switch(e.tag){case 3:F1(e),el();break;case 5:h1(e);break;case 1:Rn(e.type)&&lf(e);break;case 4:u_(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ke(df,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ke(lt,lt.current&1),e.flags|=128,null):n&e.child.childLanes?U1(t,e,n):(Ke(lt,lt.current&1),t=bs(t,e,n),t!==null?t.sibling:null);Ke(lt,lt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return j1(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ke(lt,lt.current),r)break;return null;case 22:case 23:return e.lanes=0,L1(t,e,n)}return bs(t,e,n)}var B1,Ty,$1,z1;B1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ty=function(){};$1=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Io(Yr.current);var i=null;switch(n){case"input":s=qg(t,s),r=qg(t,r),i=[];break;case"select":s=ut({},s,{value:void 0}),r=ut({},r,{value:void 0}),i=[];break;case"textarea":s=Kg(t,s),r=Kg(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=of)}Qg(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ou.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ou.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Je("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};z1=function(t,e,n,r){n!==r&&(e.flags|=4)};function pc(t,e){if(!rt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Yt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function yO(t,e,n){var r=e.pendingProps;switch(r_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yt(e),null;case 1:return Rn(e.type)&&af(),Yt(e),null;case 3:return r=e.stateNode,nl(),et(xn),et(on),h_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Gd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,gr!==null&&(Cy(gr),gr=null))),Ty(t,e),Yt(e),null;case 5:d_(e);var s=Io(vu.current);if(n=e.type,t!==null&&e.stateNode!=null)$1(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(K(166));return Yt(e),null}if(t=Io(Yr.current),Gd(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[qr]=e,r[gu]=i,t=(e.mode&1)!==0,n){case"dialog":Je("cancel",r),Je("close",r);break;case"iframe":case"object":case"embed":Je("load",r);break;case"video":case"audio":for(s=0;s<Rc.length;s++)Je(Rc[s],r);break;case"source":Je("error",r);break;case"img":case"image":case"link":Je("error",r),Je("load",r);break;case"details":Je("toggle",r);break;case"input":u0(r,i),Je("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Je("invalid",r);break;case"textarea":h0(r,i),Je("invalid",r)}Qg(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Kd(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Kd(r.textContent,a,t),s=["children",""+a]):ou.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Je("scroll",r)}switch(n){case"input":Ud(r),d0(r,i,!0);break;case"textarea":Ud(r),f0(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=of)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=yA(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[qr]=e,t[gu]=r,B1(t,e,!1,!1),e.stateNode=t;e:{switch(o=Yg(n,r),n){case"dialog":Je("cancel",t),Je("close",t),s=r;break;case"iframe":case"object":case"embed":Je("load",t),s=r;break;case"video":case"audio":for(s=0;s<Rc.length;s++)Je(Rc[s],t);s=r;break;case"source":Je("error",t),s=r;break;case"img":case"image":case"link":Je("error",t),Je("load",t),s=r;break;case"details":Je("toggle",t),s=r;break;case"input":u0(t,r),s=qg(t,r),Je("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=ut({},r,{value:void 0}),Je("invalid",t);break;case"textarea":h0(t,r),s=Kg(t,r),Je("invalid",t);break;default:s=r}Qg(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?wA(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&vA(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&au(t,l):typeof l=="number"&&au(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ou.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Je("scroll",t):l!=null&&$v(t,i,l,o))}switch(n){case"input":Ud(t),d0(t,r,!1);break;case"textarea":Ud(t),f0(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Di(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Na(t,!!r.multiple,i,!1):r.defaultValue!=null&&Na(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=of)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Yt(e),null;case 6:if(t&&e.stateNode!=null)z1(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(K(166));if(n=Io(vu.current),Io(Yr.current),Gd(e)){if(r=e.stateNode,n=e.memoizedProps,r[qr]=e,(i=r.nodeValue!==n)&&(t=Bn,t!==null))switch(t.tag){case 3:Kd(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Kd(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[qr]=e,e.stateNode=r}return Yt(e),null;case 13:if(et(lt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(rt&&Fn!==null&&e.mode&1&&!(e.flags&128))a1(),el(),e.flags|=98560,i=!1;else if(i=Gd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(K(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(K(317));i[qr]=e}else el(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Yt(e),i=!1}else gr!==null&&(Cy(gr),gr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||lt.current&1?kt===0&&(kt=3):S_())),e.updateQueue!==null&&(e.flags|=4),Yt(e),null);case 4:return nl(),Ty(t,e),t===null&&pu(e.stateNode.containerInfo),Yt(e),null;case 10:return a_(e.type._context),Yt(e),null;case 17:return Rn(e.type)&&af(),Yt(e),null;case 19:if(et(lt),i=e.memoizedState,i===null)return Yt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)pc(i,!1);else{if(kt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=pf(t),o!==null){for(e.flags|=128,pc(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ke(lt,lt.current&1|2),e.child}t=t.sibling}i.tail!==null&&vt()>sl&&(e.flags|=128,r=!0,pc(i,!1),e.lanes=4194304)}else{if(!r)if(t=pf(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),pc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!rt)return Yt(e),null}else 2*vt()-i.renderingStartTime>sl&&n!==1073741824&&(e.flags|=128,r=!0,pc(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=vt(),e.sibling=null,n=lt.current,Ke(lt,r?n&1|2:n&1),e):(Yt(e),null);case 22:case 23:return I_(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Nn&1073741824&&(Yt(e),e.subtreeFlags&6&&(e.flags|=8192)):Yt(e),null;case 24:return null;case 25:return null}throw Error(K(156,e.tag))}function vO(t,e){switch(r_(e),e.tag){case 1:return Rn(e.type)&&af(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return nl(),et(xn),et(on),h_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return d_(e),null;case 13:if(et(lt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(K(340));el()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return et(lt),null;case 4:return nl(),null;case 10:return a_(e.type._context),null;case 22:case 23:return I_(),null;case 24:return null;default:return null}}var Xd=!1,tn=!1,_O=typeof WeakSet=="function"?WeakSet:Set,ee=null;function ka(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){pt(t,e,r)}else n.current=null}function Iy(t,e,n){try{n()}catch(r){pt(t,e,r)}}var nT=!1;function wO(t,e){if(oy=nf,t=GA(),t_(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var p;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===n&&++c===s&&(a=o),f===i&&++d===r&&(l=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ay={focusedElem:t,selectionRange:n},nf=!1,ee=e;ee!==null;)if(e=ee,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ee=t;else for(;ee!==null;){e=ee;try{var E=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var g=E.memoizedProps,v=E.memoizedState,_=e.stateNode,w=_.getSnapshotBeforeUpdate(e.elementType===e.type?g:ur(e.type,g),v);_.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(k){pt(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,ee=t;break}ee=e.return}return E=nT,nT=!1,E}function zc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Iy(e,n,i)}s=s.next}while(s!==r)}}function vp(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Sy(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function q1(t){var e=t.alternate;e!==null&&(t.alternate=null,q1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[qr],delete e[gu],delete e[uy],delete e[nO],delete e[rO])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function H1(t){return t.tag===5||t.tag===3||t.tag===4}function rT(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||H1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function by(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=of));else if(r!==4&&(t=t.child,t!==null))for(by(t,e,n),t=t.sibling;t!==null;)by(t,e,n),t=t.sibling}function Ay(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ay(t,e,n),t=t.sibling;t!==null;)Ay(t,e,n),t=t.sibling}var $t=null,pr=!1;function Ks(t,e,n){for(n=n.child;n!==null;)W1(t,e,n),n=n.sibling}function W1(t,e,n){if(Qr&&typeof Qr.onCommitFiberUnmount=="function")try{Qr.onCommitFiberUnmount(up,n)}catch{}switch(n.tag){case 5:tn||ka(n,e);case 6:var r=$t,s=pr;$t=null,Ks(t,e,n),$t=r,pr=s,$t!==null&&(pr?(t=$t,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):$t.removeChild(n.stateNode));break;case 18:$t!==null&&(pr?(t=$t,n=n.stateNode,t.nodeType===8?Qm(t.parentNode,n):t.nodeType===1&&Qm(t,n),du(t)):Qm($t,n.stateNode));break;case 4:r=$t,s=pr,$t=n.stateNode.containerInfo,pr=!0,Ks(t,e,n),$t=r,pr=s;break;case 0:case 11:case 14:case 15:if(!tn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Iy(n,e,o),s=s.next}while(s!==r)}Ks(t,e,n);break;case 1:if(!tn&&(ka(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){pt(n,e,a)}Ks(t,e,n);break;case 21:Ks(t,e,n);break;case 22:n.mode&1?(tn=(r=tn)||n.memoizedState!==null,Ks(t,e,n),tn=r):Ks(t,e,n);break;default:Ks(t,e,n)}}function sT(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new _O),e.forEach(function(r){var s=PO.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function lr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:$t=a.stateNode,pr=!1;break e;case 3:$t=a.stateNode.containerInfo,pr=!0;break e;case 4:$t=a.stateNode.containerInfo,pr=!0;break e}a=a.return}if($t===null)throw Error(K(160));W1(i,o,s),$t=null,pr=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){pt(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)K1(e,t),e=e.sibling}function K1(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(lr(e,t),Mr(t),r&4){try{zc(3,t,t.return),vp(3,t)}catch(g){pt(t,t.return,g)}try{zc(5,t,t.return)}catch(g){pt(t,t.return,g)}}break;case 1:lr(e,t),Mr(t),r&512&&n!==null&&ka(n,n.return);break;case 5:if(lr(e,t),Mr(t),r&512&&n!==null&&ka(n,n.return),t.flags&32){var s=t.stateNode;try{au(s,"")}catch(g){pt(t,t.return,g)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&mA(s,i),Yg(a,o);var c=Yg(a,i);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?wA(s,h):d==="dangerouslySetInnerHTML"?vA(s,h):d==="children"?au(s,h):$v(s,d,h,c)}switch(a){case"input":Hg(s,i);break;case"textarea":gA(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?Na(s,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?Na(s,!!i.multiple,i.defaultValue,!0):Na(s,!!i.multiple,i.multiple?[]:"",!1))}s[gu]=i}catch(g){pt(t,t.return,g)}}break;case 6:if(lr(e,t),Mr(t),r&4){if(t.stateNode===null)throw Error(K(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){pt(t,t.return,g)}}break;case 3:if(lr(e,t),Mr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{du(e.containerInfo)}catch(g){pt(t,t.return,g)}break;case 4:lr(e,t),Mr(t);break;case 13:lr(e,t),Mr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(E_=vt())),r&4&&sT(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(tn=(c=tn)||d,lr(e,t),tn=c):lr(e,t),Mr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(ee=t,d=t.child;d!==null;){for(h=ee=d;ee!==null;){switch(f=ee,p=f.child,f.tag){case 0:case 11:case 14:case 15:zc(4,f,f.return);break;case 1:ka(f,f.return);var E=f.stateNode;if(typeof E.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,E.props=e.memoizedProps,E.state=e.memoizedState,E.componentWillUnmount()}catch(g){pt(r,n,g)}}break;case 5:ka(f,f.return);break;case 22:if(f.memoizedState!==null){oT(h);continue}}p!==null?(p.return=f,ee=p):oT(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=_A("display",o))}catch(g){pt(t,t.return,g)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(g){pt(t,t.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:lr(e,t),Mr(t),r&4&&sT(t);break;case 21:break;default:lr(e,t),Mr(t)}}function Mr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(H1(n)){var r=n;break e}n=n.return}throw Error(K(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(au(s,""),r.flags&=-33);var i=rT(t);Ay(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=rT(t);by(t,a,o);break;default:throw Error(K(161))}}catch(l){pt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function EO(t,e,n){ee=t,G1(t)}function G1(t,e,n){for(var r=(t.mode&1)!==0;ee!==null;){var s=ee,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Xd;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||tn;a=Xd;var c=tn;if(Xd=o,(tn=l)&&!c)for(ee=s;ee!==null;)o=ee,l=o.child,o.tag===22&&o.memoizedState!==null?aT(s):l!==null?(l.return=o,ee=l):aT(s);for(;i!==null;)ee=i,G1(i),i=i.sibling;ee=s,Xd=a,tn=c}iT(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ee=i):iT(t)}}function iT(t){for(;ee!==null;){var e=ee;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:tn||vp(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!tn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:ur(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&z0(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}z0(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&du(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}tn||e.flags&512&&Sy(e)}catch(f){pt(e,e.return,f)}}if(e===t){ee=null;break}if(n=e.sibling,n!==null){n.return=e.return,ee=n;break}ee=e.return}}function oT(t){for(;ee!==null;){var e=ee;if(e===t){ee=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ee=n;break}ee=e.return}}function aT(t){for(;ee!==null;){var e=ee;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{vp(4,e)}catch(l){pt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){pt(e,s,l)}}var i=e.return;try{Sy(e)}catch(l){pt(e,i,l)}break;case 5:var o=e.return;try{Sy(e)}catch(l){pt(e,o,l)}}}catch(l){pt(e,e.return,l)}if(e===t){ee=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ee=a;break}ee=e.return}}var TO=Math.ceil,yf=ks.ReactCurrentDispatcher,__=ks.ReactCurrentOwner,nr=ks.ReactCurrentBatchConfig,Me=0,jt=null,bt=null,qt=0,Nn=0,Da=Gi(0),kt=0,Tu=null,$o=0,_p=0,w_=0,qc=null,Tn=null,E_=0,sl=1/0,ls=null,vf=!1,xy=null,Ti=null,Jd=!1,fi=null,_f=0,Hc=0,Ry=null,Ch=-1,kh=0;function hn(){return Me&6?vt():Ch!==-1?Ch:Ch=vt()}function Ii(t){return t.mode&1?Me&2&&qt!==0?qt&-qt:iO.transition!==null?(kh===0&&(kh=DA()),kh):(t=$e,t!==0||(t=window.event,t=t===void 0?16:UA(t.type)),t):1}function _r(t,e,n,r){if(50<Hc)throw Hc=0,Ry=null,Error(K(185));Ju(t,n,r),(!(Me&2)||t!==jt)&&(t===jt&&(!(Me&2)&&(_p|=n),kt===4&&si(t,qt)),Pn(t,r),n===1&&Me===0&&!(e.mode&1)&&(sl=vt()+500,mp&&Qi()))}function Pn(t,e){var n=t.callbackNode;i2(t,e);var r=tf(t,t===jt?qt:0);if(r===0)n!==null&&g0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&g0(n),e===1)t.tag===0?sO(lT.bind(null,t)):s1(lT.bind(null,t)),eO(function(){!(Me&6)&&Qi()}),n=null;else{switch(NA(r)){case 1:n=Kv;break;case 4:n=CA;break;case 16:n=ef;break;case 536870912:n=kA;break;default:n=ef}n=nx(n,Q1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Q1(t,e){if(Ch=-1,kh=0,Me&6)throw Error(K(327));var n=t.callbackNode;if(Fa()&&t.callbackNode!==n)return null;var r=tf(t,t===jt?qt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=wf(t,r);else{e=r;var s=Me;Me|=2;var i=X1();(jt!==t||qt!==e)&&(ls=null,sl=vt()+500,No(t,e));do try{bO();break}catch(a){Y1(t,a)}while(!0);o_(),yf.current=i,Me=s,bt!==null?e=0:(jt=null,qt=0,e=kt)}if(e!==0){if(e===2&&(s=ty(t),s!==0&&(r=s,e=Py(t,s))),e===1)throw n=Tu,No(t,0),si(t,r),Pn(t,vt()),n;if(e===6)si(t,r);else{if(s=t.current.alternate,!(r&30)&&!IO(s)&&(e=wf(t,r),e===2&&(i=ty(t),i!==0&&(r=i,e=Py(t,i))),e===1))throw n=Tu,No(t,0),si(t,r),Pn(t,vt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(K(345));case 2:uo(t,Tn,ls);break;case 3:if(si(t,r),(r&130023424)===r&&(e=E_+500-vt(),10<e)){if(tf(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){hn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=cy(uo.bind(null,t,Tn,ls),e);break}uo(t,Tn,ls);break;case 4:if(si(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-vr(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=vt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*TO(r/1960))-r,10<r){t.timeoutHandle=cy(uo.bind(null,t,Tn,ls),r);break}uo(t,Tn,ls);break;case 5:uo(t,Tn,ls);break;default:throw Error(K(329))}}}return Pn(t,vt()),t.callbackNode===n?Q1.bind(null,t):null}function Py(t,e){var n=qc;return t.current.memoizedState.isDehydrated&&(No(t,e).flags|=256),t=wf(t,e),t!==2&&(e=Tn,Tn=n,e!==null&&Cy(e)),t}function Cy(t){Tn===null?Tn=t:Tn.push.apply(Tn,t)}function IO(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Tr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function si(t,e){for(e&=~w_,e&=~_p,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-vr(e),r=1<<n;t[n]=-1,e&=~r}}function lT(t){if(Me&6)throw Error(K(327));Fa();var e=tf(t,0);if(!(e&1))return Pn(t,vt()),null;var n=wf(t,e);if(t.tag!==0&&n===2){var r=ty(t);r!==0&&(e=r,n=Py(t,r))}if(n===1)throw n=Tu,No(t,0),si(t,e),Pn(t,vt()),n;if(n===6)throw Error(K(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,uo(t,Tn,ls),Pn(t,vt()),null}function T_(t,e){var n=Me;Me|=1;try{return t(e)}finally{Me=n,Me===0&&(sl=vt()+500,mp&&Qi())}}function zo(t){fi!==null&&fi.tag===0&&!(Me&6)&&Fa();var e=Me;Me|=1;var n=nr.transition,r=$e;try{if(nr.transition=null,$e=1,t)return t()}finally{$e=r,nr.transition=n,Me=e,!(Me&6)&&Qi()}}function I_(){Nn=Da.current,et(Da)}function No(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Z2(n)),bt!==null)for(n=bt.return;n!==null;){var r=n;switch(r_(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&af();break;case 3:nl(),et(xn),et(on),h_();break;case 5:d_(r);break;case 4:nl();break;case 13:et(lt);break;case 19:et(lt);break;case 10:a_(r.type._context);break;case 22:case 23:I_()}n=n.return}if(jt=t,bt=t=Si(t.current,null),qt=Nn=e,kt=0,Tu=null,w_=_p=$o=0,Tn=qc=null,To!==null){for(e=0;e<To.length;e++)if(n=To[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}To=null}return t}function Y1(t,e){do{var n=bt;try{if(o_(),xh.current=gf,mf){for(var r=ct.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}mf=!1}if(Bo=0,Ut=Pt=ct=null,$c=!1,_u=0,__.current=null,n===null||n.return===null){kt=1,Tu=e,bt=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=qt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=Q0(o);if(p!==null){p.flags&=-257,Y0(p,o,a,i,e),p.mode&1&&G0(i,c,e),e=p,l=c;var E=e.updateQueue;if(E===null){var g=new Set;g.add(l),e.updateQueue=g}else E.add(l);break e}else{if(!(e&1)){G0(i,c,e),S_();break e}l=Error(K(426))}}else if(rt&&a.mode&1){var v=Q0(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),Y0(v,o,a,i,e),s_(rl(l,a));break e}}i=l=rl(l,a),kt!==4&&(kt=2),qc===null?qc=[i]:qc.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var _=N1(i,l,e);$0(i,_);break e;case 1:a=l;var w=i.type,T=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Ti===null||!Ti.has(T)))){i.flags|=65536,e&=-e,i.lanes|=e;var k=O1(i,a,e);$0(i,k);break e}}i=i.return}while(i!==null)}Z1(n)}catch(O){e=O,bt===n&&n!==null&&(bt=n=n.return);continue}break}while(!0)}function X1(){var t=yf.current;return yf.current=gf,t===null?gf:t}function S_(){(kt===0||kt===3||kt===2)&&(kt=4),jt===null||!($o&268435455)&&!(_p&268435455)||si(jt,qt)}function wf(t,e){var n=Me;Me|=2;var r=X1();(jt!==t||qt!==e)&&(ls=null,No(t,e));do try{SO();break}catch(s){Y1(t,s)}while(!0);if(o_(),Me=n,yf.current=r,bt!==null)throw Error(K(261));return jt=null,qt=0,kt}function SO(){for(;bt!==null;)J1(bt)}function bO(){for(;bt!==null&&!YN();)J1(bt)}function J1(t){var e=tx(t.alternate,t,Nn);t.memoizedProps=t.pendingProps,e===null?Z1(t):bt=e,__.current=null}function Z1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=vO(n,e),n!==null){n.flags&=32767,bt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{kt=6,bt=null;return}}else if(n=yO(n,e,Nn),n!==null){bt=n;return}if(e=e.sibling,e!==null){bt=e;return}bt=e=t}while(e!==null);kt===0&&(kt=5)}function uo(t,e,n){var r=$e,s=nr.transition;try{nr.transition=null,$e=1,AO(t,e,n,r)}finally{nr.transition=s,$e=r}return null}function AO(t,e,n,r){do Fa();while(fi!==null);if(Me&6)throw Error(K(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(K(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(o2(t,i),t===jt&&(bt=jt=null,qt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Jd||(Jd=!0,nx(ef,function(){return Fa(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=nr.transition,nr.transition=null;var o=$e;$e=1;var a=Me;Me|=4,__.current=null,wO(t,n),K1(n,t),W2(ay),nf=!!oy,ay=oy=null,t.current=n,EO(n),XN(),Me=a,$e=o,nr.transition=i}else t.current=n;if(Jd&&(Jd=!1,fi=t,_f=s),i=t.pendingLanes,i===0&&(Ti=null),e2(n.stateNode),Pn(t,vt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(vf)throw vf=!1,t=xy,xy=null,t;return _f&1&&t.tag!==0&&Fa(),i=t.pendingLanes,i&1?t===Ry?Hc++:(Hc=0,Ry=t):Hc=0,Qi(),null}function Fa(){if(fi!==null){var t=NA(_f),e=nr.transition,n=$e;try{if(nr.transition=null,$e=16>t?16:t,fi===null)var r=!1;else{if(t=fi,fi=null,_f=0,Me&6)throw Error(K(331));var s=Me;for(Me|=4,ee=t.current;ee!==null;){var i=ee,o=i.child;if(ee.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ee=c;ee!==null;){var d=ee;switch(d.tag){case 0:case 11:case 15:zc(8,d,i)}var h=d.child;if(h!==null)h.return=d,ee=h;else for(;ee!==null;){d=ee;var f=d.sibling,p=d.return;if(q1(d),d===c){ee=null;break}if(f!==null){f.return=p,ee=f;break}ee=p}}}var E=i.alternate;if(E!==null){var g=E.child;if(g!==null){E.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}ee=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ee=o;else e:for(;ee!==null;){if(i=ee,i.flags&2048)switch(i.tag){case 0:case 11:case 15:zc(9,i,i.return)}var _=i.sibling;if(_!==null){_.return=i.return,ee=_;break e}ee=i.return}}var w=t.current;for(ee=w;ee!==null;){o=ee;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,ee=T;else e:for(o=w;ee!==null;){if(a=ee,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:vp(9,a)}}catch(O){pt(a,a.return,O)}if(a===o){ee=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,ee=k;break e}ee=a.return}}if(Me=s,Qi(),Qr&&typeof Qr.onPostCommitFiberRoot=="function")try{Qr.onPostCommitFiberRoot(up,t)}catch{}r=!0}return r}finally{$e=n,nr.transition=e}}return!1}function cT(t,e,n){e=rl(n,e),e=N1(t,e,1),t=Ei(t,e,1),e=hn(),t!==null&&(Ju(t,1,e),Pn(t,e))}function pt(t,e,n){if(t.tag===3)cT(t,t,n);else for(;e!==null;){if(e.tag===3){cT(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ti===null||!Ti.has(r))){t=rl(n,t),t=O1(e,t,1),e=Ei(e,t,1),t=hn(),e!==null&&(Ju(e,1,t),Pn(e,t));break}}e=e.return}}function xO(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=hn(),t.pingedLanes|=t.suspendedLanes&n,jt===t&&(qt&n)===n&&(kt===4||kt===3&&(qt&130023424)===qt&&500>vt()-E_?No(t,0):w_|=n),Pn(t,e)}function ex(t,e){e===0&&(t.mode&1?(e=$d,$d<<=1,!($d&130023424)&&($d=4194304)):e=1);var n=hn();t=Ss(t,e),t!==null&&(Ju(t,e,n),Pn(t,n))}function RO(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),ex(t,n)}function PO(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(K(314))}r!==null&&r.delete(e),ex(t,n)}var tx;tx=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||xn.current)In=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return In=!1,gO(t,e,n);In=!!(t.flags&131072)}else In=!1,rt&&e.flags&1048576&&i1(e,uf,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ph(t,e),t=e.pendingProps;var s=Za(e,on.current);Ma(e,n),s=p_(null,e,r,t,s,n);var i=m_();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Rn(r)?(i=!0,lf(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,c_(e),s.updater=yp,e.stateNode=s,s._reactInternals=e,gy(e,r,t,n),e=_y(null,e,r,!0,i,n)):(e.tag=0,rt&&i&&n_(e),un(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ph(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=kO(r),t=ur(r,t),s){case 0:e=vy(null,e,r,t,n);break e;case 1:e=Z0(null,e,r,t,n);break e;case 11:e=X0(null,e,r,t,n);break e;case 14:e=J0(null,e,r,ur(r.type,t),n);break e}throw Error(K(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ur(r,s),vy(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ur(r,s),Z0(t,e,r,s,n);case 3:e:{if(F1(e),t===null)throw Error(K(387));r=e.pendingProps,i=e.memoizedState,s=i.element,d1(t,e),ff(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=rl(Error(K(423)),e),e=eT(t,e,r,n,s);break e}else if(r!==s){s=rl(Error(K(424)),e),e=eT(t,e,r,n,s);break e}else for(Fn=wi(e.stateNode.containerInfo.firstChild),Bn=e,rt=!0,gr=null,n=c1(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(el(),r===s){e=bs(t,e,n);break e}un(t,e,r,n)}e=e.child}return e;case 5:return h1(e),t===null&&fy(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,ly(r,s)?o=null:i!==null&&ly(r,i)&&(e.flags|=32),M1(t,e),un(t,e,o,n),e.child;case 6:return t===null&&fy(e),null;case 13:return U1(t,e,n);case 4:return u_(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=tl(e,null,r,n):un(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ur(r,s),X0(t,e,r,s,n);case 7:return un(t,e,e.pendingProps,n),e.child;case 8:return un(t,e,e.pendingProps.children,n),e.child;case 12:return un(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ke(df,r._currentValue),r._currentValue=o,i!==null)if(Tr(i.value,o)){if(i.children===s.children&&!xn.current){e=bs(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=gs(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),py(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(K(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),py(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}un(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ma(e,n),s=sr(s),r=r(s),e.flags|=1,un(t,e,r,n),e.child;case 14:return r=e.type,s=ur(r,e.pendingProps),s=ur(r.type,s),J0(t,e,r,s,n);case 15:return V1(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ur(r,s),Ph(t,e),e.tag=1,Rn(r)?(t=!0,lf(e)):t=!1,Ma(e,n),D1(e,r,s),gy(e,r,s,n),_y(null,e,r,!0,t,n);case 19:return j1(t,e,n);case 22:return L1(t,e,n)}throw Error(K(156,e.tag))};function nx(t,e){return PA(t,e)}function CO(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tr(t,e,n,r){return new CO(t,e,n,r)}function b_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function kO(t){if(typeof t=="function")return b_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===qv)return 11;if(t===Hv)return 14}return 2}function Si(t,e){var n=t.alternate;return n===null?(n=tr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Dh(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")b_(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ta:return Oo(n.children,s,i,e);case zv:o=8,s|=8;break;case jg:return t=tr(12,n,e,s|2),t.elementType=jg,t.lanes=i,t;case Bg:return t=tr(13,n,e,s),t.elementType=Bg,t.lanes=i,t;case $g:return t=tr(19,n,e,s),t.elementType=$g,t.lanes=i,t;case hA:return wp(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case uA:o=10;break e;case dA:o=9;break e;case qv:o=11;break e;case Hv:o=14;break e;case ti:o=16,r=null;break e}throw Error(K(130,t==null?t:typeof t,""))}return e=tr(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Oo(t,e,n,r){return t=tr(7,t,r,e),t.lanes=n,t}function wp(t,e,n,r){return t=tr(22,t,r,e),t.elementType=hA,t.lanes=n,t.stateNode={isHidden:!1},t}function rg(t,e,n){return t=tr(6,t,null,e),t.lanes=n,t}function sg(t,e,n){return e=tr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function DO(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fm(0),this.expirationTimes=Fm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fm(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function A_(t,e,n,r,s,i,o,a,l){return t=new DO(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=tr(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},c_(i),t}function NO(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ea,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function rx(t){if(!t)return Ni;t=t._reactInternals;e:{if(ea(t)!==t||t.tag!==1)throw Error(K(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Rn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(K(171))}if(t.tag===1){var n=t.type;if(Rn(n))return r1(t,n,e)}return e}function sx(t,e,n,r,s,i,o,a,l){return t=A_(n,r,!0,t,s,i,o,a,l),t.context=rx(null),n=t.current,r=hn(),s=Ii(n),i=gs(r,s),i.callback=e??null,Ei(n,i,s),t.current.lanes=s,Ju(t,s,r),Pn(t,r),t}function Ep(t,e,n,r){var s=e.current,i=hn(),o=Ii(s);return n=rx(n),e.context===null?e.context=n:e.pendingContext=n,e=gs(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ei(s,e,o),t!==null&&(_r(t,s,o,i),Ah(t,s,o)),o}function Ef(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function uT(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function x_(t,e){uT(t,e),(t=t.alternate)&&uT(t,e)}function OO(){return null}var ix=typeof reportError=="function"?reportError:function(t){console.error(t)};function R_(t){this._internalRoot=t}Tp.prototype.render=R_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(K(409));Ep(t,e,null,null)};Tp.prototype.unmount=R_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;zo(function(){Ep(null,t,null,null)}),e[Is]=null}};function Tp(t){this._internalRoot=t}Tp.prototype.unstable_scheduleHydration=function(t){if(t){var e=LA();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ri.length&&e!==0&&e<ri[n].priority;n++);ri.splice(n,0,t),n===0&&FA(t)}};function P_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ip(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function dT(){}function VO(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Ef(o);i.call(c)}}var o=sx(e,r,t,0,null,!1,!1,"",dT);return t._reactRootContainer=o,t[Is]=o.current,pu(t.nodeType===8?t.parentNode:t),zo(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Ef(l);a.call(c)}}var l=A_(t,0,!1,null,null,!1,!1,"",dT);return t._reactRootContainer=l,t[Is]=l.current,pu(t.nodeType===8?t.parentNode:t),zo(function(){Ep(e,l,n,r)}),l}function Sp(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Ef(o);a.call(l)}}Ep(e,o,t,s)}else o=VO(n,e,t,s,r);return Ef(o)}OA=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=xc(e.pendingLanes);n!==0&&(Gv(e,n|1),Pn(e,vt()),!(Me&6)&&(sl=vt()+500,Qi()))}break;case 13:zo(function(){var r=Ss(t,1);if(r!==null){var s=hn();_r(r,t,1,s)}}),x_(t,1)}};Qv=function(t){if(t.tag===13){var e=Ss(t,134217728);if(e!==null){var n=hn();_r(e,t,134217728,n)}x_(t,134217728)}};VA=function(t){if(t.tag===13){var e=Ii(t),n=Ss(t,e);if(n!==null){var r=hn();_r(n,t,e,r)}x_(t,e)}};LA=function(){return $e};MA=function(t,e){var n=$e;try{return $e=t,e()}finally{$e=n}};Jg=function(t,e,n){switch(e){case"input":if(Hg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=pp(r);if(!s)throw Error(K(90));pA(r),Hg(r,s)}}}break;case"textarea":gA(t,n);break;case"select":e=n.value,e!=null&&Na(t,!!n.multiple,e,!1)}};IA=T_;SA=zo;var LO={usingClientEntryPoint:!1,Events:[ed,Aa,pp,EA,TA,T_]},mc={findFiberByHostInstance:Eo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},MO={bundleType:mc.bundleType,version:mc.version,rendererPackageName:mc.rendererPackageName,rendererConfig:mc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ks.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=xA(t),t===null?null:t.stateNode},findFiberByHostInstance:mc.findFiberByHostInstance||OO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zd.isDisabled&&Zd.supportsFiber)try{up=Zd.inject(MO),Qr=Zd}catch{}}Kn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LO;Kn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!P_(e))throw Error(K(200));return NO(t,e,null,n)};Kn.createRoot=function(t,e){if(!P_(t))throw Error(K(299));var n=!1,r="",s=ix;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=A_(t,1,!1,null,null,n,!1,r,s),t[Is]=e.current,pu(t.nodeType===8?t.parentNode:t),new R_(e)};Kn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(K(188)):(t=Object.keys(t).join(","),Error(K(268,t)));return t=xA(e),t=t===null?null:t.stateNode,t};Kn.flushSync=function(t){return zo(t)};Kn.hydrate=function(t,e,n){if(!Ip(e))throw Error(K(200));return Sp(null,t,e,!0,n)};Kn.hydrateRoot=function(t,e,n){if(!P_(t))throw Error(K(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=ix;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=sx(e,null,t,1,n??null,s,!1,i,o),t[Is]=e.current,pu(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Tp(e)};Kn.render=function(t,e,n){if(!Ip(e))throw Error(K(200));return Sp(null,t,e,!1,n)};Kn.unmountComponentAtNode=function(t){if(!Ip(t))throw Error(K(40));return t._reactRootContainer?(zo(function(){Sp(null,null,t,!1,function(){t._reactRootContainer=null,t[Is]=null})}),!0):!1};Kn.unstable_batchedUpdates=T_;Kn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ip(n))throw Error(K(200));if(t==null||t._reactInternals===void 0)throw Error(K(38));return Sp(t,e,n,!1,r)};Kn.version="18.3.1-next-f1338f8080-20240426";function ox(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ox)}catch(t){console.error(t)}}ox(),oA.exports=Kn;var nd=oA.exports;const ax=Kb(nd);var lx,hT=nd;lx=hT.createRoot,hT.hydrateRoot;const FO="modulepreload",UO=function(t,e){return new URL(t,e).href},fT={},Oe=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=UO(c,r),c in fT)return;fT[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(!!r)for(let E=o.length-1;E>=0;E--){const g=o[E];if(g.href===c&&(!d||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${h}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":FO,d||(p.as="script"),p.crossOrigin="",p.href=c,l&&p.setAttribute("nonce",l),document.head.appendChild(p),d)return new Promise((E,g)=>{p.addEventListener("load",E),p.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},jO=1,BO=1e6;let ig=0;function $O(){return ig=(ig+1)%Number.MAX_SAFE_INTEGER,ig.toString()}const og=new Map,pT=t=>{if(og.has(t))return;const e=setTimeout(()=>{og.delete(t),Wc({type:"REMOVE_TOAST",toastId:t})},BO);og.set(t,e)},zO=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,jO)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?pT(n):t.toasts.forEach(r=>{pT(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Nh=[];let Oh={toasts:[]};function Wc(t){Oh=zO(Oh,t),Nh.forEach(e=>{e(Oh)})}function qO({...t}){const e=$O(),n=s=>Wc({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>Wc({type:"DISMISS_TOAST",toastId:e});return Wc({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function C_(){const[t,e]=b.useState(Oh);return b.useEffect(()=>(Nh.push(e),()=>{const n=Nh.indexOf(e);n>-1&&Nh.splice(n,1)}),[t]),{...t,toast:qO,dismiss:n=>Wc({type:"DISMISS_TOAST",toastId:n})}}function Ct(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function mT(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function cx(...t){return e=>{let n=!1;const r=t.map(s=>{const i=mT(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():mT(t[s],null)}}}}function Ir(...t){return b.useCallback(cx(...t),t)}function c7(t,e){const n=b.createContext(e),r=i=>{const{children:o,...a}=i,l=b.useMemo(()=>a,Object.values(a));return x.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function s(i){const o=b.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function bp(t,e=[]){let n=[];function r(i,o){const a=b.createContext(o),l=n.length;n=[...n,o];const c=h=>{var _;const{scope:f,children:p,...E}=h,g=((_=f==null?void 0:f[t])==null?void 0:_[l])||a,v=b.useMemo(()=>E,Object.values(E));return x.jsx(g.Provider,{value:v,children:p})};c.displayName=i+"Provider";function d(h,f){var g;const p=((g=f==null?void 0:f[t])==null?void 0:g[l])||a,E=b.useContext(p);if(E)return E;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[c,d]}const s=()=>{const i=n.map(o=>b.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return b.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,HO(s,...e)]}function HO(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(i)[`__scope${c}`];return{...a,...h}},{});return b.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function Tf(t){const e=KO(t),n=b.forwardRef((r,s)=>{const{children:i,...o}=r,a=b.Children.toArray(i),l=a.find(QO);if(l){const c=l.props.children,d=a.map(h=>h===l?b.Children.count(c)>1?b.Children.only(null):b.isValidElement(c)?c.props.children:null:h);return x.jsx(e,{...o,ref:s,children:b.isValidElement(c)?b.cloneElement(c,void 0,d):null})}return x.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var WO=Tf("Slot");function KO(t){const e=b.forwardRef((n,r)=>{const{children:s,...i}=n;if(b.isValidElement(s)){const o=XO(s),a=YO(i,s.props);return s.type!==b.Fragment&&(a.ref=r?cx(r,o):o),b.cloneElement(s,a)}return b.Children.count(s)>1?b.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var ux=Symbol("radix.slottable");function GO(t){const e=({children:n})=>x.jsx(x.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=ux,e}function QO(t){return b.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===ux}function YO(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{const l=i(...a);return s(...a),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function XO(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function JO(t){const e=t+"CollectionProvider",[n,r]=bp(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:v,children:_}=g,w=z.useRef(null),T=z.useRef(new Map).current;return x.jsx(s,{scope:v,itemMap:T,collectionRef:w,children:_})};o.displayName=e;const a=t+"CollectionSlot",l=Tf(a),c=z.forwardRef((g,v)=>{const{scope:_,children:w}=g,T=i(a,_),k=Ir(v,T.collectionRef);return x.jsx(l,{ref:k,children:w})});c.displayName=a;const d=t+"CollectionItemSlot",h="data-radix-collection-item",f=Tf(d),p=z.forwardRef((g,v)=>{const{scope:_,children:w,...T}=g,k=z.useRef(null),O=Ir(v,k),V=i(d,_);return z.useEffect(()=>(V.itemMap.set(k,{ref:k,...T}),()=>void V.itemMap.delete(k))),x.jsx(f,{[h]:"",ref:O,children:w})});p.displayName=d;function E(g){const v=i(t+"CollectionConsumer",g);return z.useCallback(()=>{const w=v.collectionRef.current;if(!w)return[];const T=Array.from(w.querySelectorAll(`[${h}]`));return Array.from(v.itemMap.values()).sort((V,S)=>T.indexOf(V.ref.current)-T.indexOf(S.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:c,ItemSlot:p},E,r]}var ZO=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Cn=ZO.reduce((t,e)=>{const n=Tf(`Primitive.${e}`),r=b.forwardRef((s,i)=>{const{asChild:o,...a}=s,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),x.jsx(l,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function dx(t,e){t&&nd.flushSync(()=>t.dispatchEvent(e))}function Oi(t){const e=b.useRef(t);return b.useEffect(()=>{e.current=t}),b.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function eV(t,e=globalThis==null?void 0:globalThis.document){const n=Oi(t);b.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var tV="DismissableLayer",ky="dismissableLayer.update",nV="dismissableLayer.pointerDownOutside",rV="dismissableLayer.focusOutside",gT,hx=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),k_=b.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=t,c=b.useContext(hx),[d,h]=b.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=b.useState({}),E=Ir(e,S=>h(S)),g=Array.from(c.layers),[v]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),_=g.indexOf(v),w=d?g.indexOf(d):-1,T=c.layersWithOutsidePointerEventsDisabled.size>0,k=w>=_,O=iV(S=>{const I=S.target,A=[...c.branches].some(D=>D.contains(I));!k||A||(s==null||s(S),o==null||o(S),S.defaultPrevented||a==null||a())},f),V=oV(S=>{const I=S.target;[...c.branches].some(D=>D.contains(I))||(i==null||i(S),o==null||o(S),S.defaultPrevented||a==null||a())},f);return eV(S=>{w===c.layers.size-1&&(r==null||r(S),!S.defaultPrevented&&a&&(S.preventDefault(),a()))},f),b.useEffect(()=>{if(d)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(gT=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),yT(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=gT)}},[d,f,n,c]),b.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),yT())},[d,c]),b.useEffect(()=>{const S=()=>p({});return document.addEventListener(ky,S),()=>document.removeEventListener(ky,S)},[]),x.jsx(Cn.div,{...l,ref:E,style:{pointerEvents:T?k?"auto":"none":void 0,...t.style},onFocusCapture:Ct(t.onFocusCapture,V.onFocusCapture),onBlurCapture:Ct(t.onBlurCapture,V.onBlurCapture),onPointerDownCapture:Ct(t.onPointerDownCapture,O.onPointerDownCapture)})});k_.displayName=tV;var sV="DismissableLayerBranch",fx=b.forwardRef((t,e)=>{const n=b.useContext(hx),r=b.useRef(null),s=Ir(e,r);return b.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),x.jsx(Cn.div,{...t,ref:s})});fx.displayName=sV;function iV(t,e=globalThis==null?void 0:globalThis.document){const n=Oi(t),r=b.useRef(!1),s=b.useRef(()=>{});return b.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){px(nV,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function oV(t,e=globalThis==null?void 0:globalThis.document){const n=Oi(t),r=b.useRef(!1);return b.useEffect(()=>{const s=i=>{i.target&&!r.current&&px(rV,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function yT(){const t=new CustomEvent(ky);document.dispatchEvent(t)}function px(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?dx(s,i):s.dispatchEvent(i)}var aV=k_,lV=fx,Vi=globalThis!=null&&globalThis.document?b.useLayoutEffect:()=>{},cV="Portal",mx=b.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,i]=b.useState(!1);Vi(()=>i(!0),[]);const o=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?ax.createPortal(x.jsx(Cn.div,{...r,ref:e}),o):null});mx.displayName=cV;function uV(t,e){return b.useReducer((n,r)=>e[n][r]??n,t)}var D_=t=>{const{present:e,children:n}=t,r=dV(e),s=typeof n=="function"?n({present:r.isPresent}):b.Children.only(n),i=Ir(r.ref,hV(s));return typeof n=="function"||r.isPresent?b.cloneElement(s,{ref:i}):null};D_.displayName="Presence";function dV(t){const[e,n]=b.useState(),r=b.useRef(null),s=b.useRef(t),i=b.useRef("none"),o=t?"mounted":"unmounted",[a,l]=uV(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return b.useEffect(()=>{const c=eh(r.current);i.current=a==="mounted"?c:"none"},[a]),Vi(()=>{const c=r.current,d=s.current;if(d!==t){const f=i.current,p=eh(c);t?l("MOUNT"):p==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(d&&f!==p?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),Vi(()=>{if(e){let c;const d=e.ownerDocument.defaultView??window,h=p=>{const g=eh(r.current).includes(CSS.escape(p.animationName));if(p.target===e&&g&&(l("ANIMATION_END"),!s.current)){const v=e.style.animationFillMode;e.style.animationFillMode="forwards",c=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=v)})}},f=p=>{p.target===e&&(i.current=eh(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:b.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function eh(t){return(t==null?void 0:t.animationName)||"none"}function hV(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var fV=sA[" useInsertionEffect ".trim().toString()]||Vi;function pV({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,o]=mV({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:s;{const d=b.useRef(t!==void 0);b.useEffect(()=>{const h=d.current;h!==a&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=a},[a,r])}const c=b.useCallback(d=>{var h;if(a){const f=gV(d)?d(t):d;f!==t&&((h=o.current)==null||h.call(o,f))}else i(d)},[a,t,i,o]);return[l,c]}function mV({defaultProp:t,onChange:e}){const[n,r]=b.useState(t),s=b.useRef(n),i=b.useRef(e);return fV(()=>{i.current=e},[e]),b.useEffect(()=>{var o;s.current!==n&&((o=i.current)==null||o.call(i,n),s.current=n)},[n,s]),[n,r,i]}function gV(t){return typeof t=="function"}var yV=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),vV="VisuallyHidden",Ap=b.forwardRef((t,e)=>x.jsx(Cn.span,{...t,ref:e,style:{...yV,...t.style}}));Ap.displayName=vV;var _V=Ap,N_="ToastProvider",[O_,wV,EV]=JO("Toast"),[gx]=bp("Toast",[EV]),[TV,xp]=gx(N_),yx=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[a,l]=b.useState(null),[c,d]=b.useState(0),h=b.useRef(!1),f=b.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${N_}\`. Expected non-empty \`string\`.`),x.jsx(O_.Provider,{scope:e,children:x.jsx(TV,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:b.useCallback(()=>d(p=>p+1),[]),onToastRemove:b.useCallback(()=>d(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};yx.displayName=N_;var vx="ToastViewport",IV=["F8"],Dy="toast.viewportPause",Ny="toast.viewportResume",_x=b.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=IV,label:s="Notifications ({hotkey})",...i}=t,o=xp(vx,n),a=wV(n),l=b.useRef(null),c=b.useRef(null),d=b.useRef(null),h=b.useRef(null),f=Ir(e,h,o.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),E=o.toastCount>0;b.useEffect(()=>{const v=_=>{var T;r.length!==0&&r.every(k=>_[k]||_.code===k)&&((T=h.current)==null||T.focus())};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[r]),b.useEffect(()=>{const v=l.current,_=h.current;if(E&&v&&_){const w=()=>{if(!o.isClosePausedRef.current){const V=new CustomEvent(Dy);_.dispatchEvent(V),o.isClosePausedRef.current=!0}},T=()=>{if(o.isClosePausedRef.current){const V=new CustomEvent(Ny);_.dispatchEvent(V),o.isClosePausedRef.current=!1}},k=V=>{!v.contains(V.relatedTarget)&&T()},O=()=>{v.contains(document.activeElement)||T()};return v.addEventListener("focusin",w),v.addEventListener("focusout",k),v.addEventListener("pointermove",w),v.addEventListener("pointerleave",O),window.addEventListener("blur",w),window.addEventListener("focus",T),()=>{v.removeEventListener("focusin",w),v.removeEventListener("focusout",k),v.removeEventListener("pointermove",w),v.removeEventListener("pointerleave",O),window.removeEventListener("blur",w),window.removeEventListener("focus",T)}}},[E,o.isClosePausedRef]);const g=b.useCallback(({tabbingDirection:v})=>{const w=a().map(T=>{const k=T.ref.current,O=[k,...LV(k)];return v==="forwards"?O:O.reverse()});return(v==="forwards"?w.reverse():w).flat()},[a]);return b.useEffect(()=>{const v=h.current;if(v){const _=w=>{var O,V,S;const T=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!T){const I=document.activeElement,A=w.shiftKey;if(w.target===v&&A){(O=c.current)==null||O.focus();return}const N=g({tabbingDirection:A?"backwards":"forwards"}),C=N.findIndex(q=>q===I);ag(N.slice(C+1))?w.preventDefault():A?(V=c.current)==null||V.focus():(S=d.current)==null||S.focus()}};return v.addEventListener("keydown",_),()=>v.removeEventListener("keydown",_)}},[a,g]),x.jsxs(lV,{ref:l,role:"region","aria-label":s.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:E?void 0:"none"},children:[E&&x.jsx(Oy,{ref:c,onFocusFromOutsideViewport:()=>{const v=g({tabbingDirection:"forwards"});ag(v)}}),x.jsx(O_.Slot,{scope:n,children:x.jsx(Cn.ol,{tabIndex:-1,...i,ref:f})}),E&&x.jsx(Oy,{ref:d,onFocusFromOutsideViewport:()=>{const v=g({tabbingDirection:"backwards"});ag(v)}})]})});_x.displayName=vx;var wx="ToastFocusProxy",Oy=b.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=xp(wx,n);return x.jsx(Ap,{tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=i.viewport)!=null&&c.contains(a))&&r()}})});Oy.displayName=wx;var rd="Toast",SV="toast.swipeStart",bV="toast.swipeMove",AV="toast.swipeCancel",xV="toast.swipeEnd",Ex=b.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[a,l]=pV({prop:r,defaultProp:s??!0,onChange:i,caller:rd});return x.jsx(D_,{present:n||a,children:x.jsx(CV,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:Oi(t.onPause),onResume:Oi(t.onResume),onSwipeStart:Ct(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Ct(t.onSwipeMove,c=>{const{x:d,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Ct(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Ct(t.onSwipeEnd,c=>{const{x:d,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),l(!1)})})})});Ex.displayName=rd;var[RV,PV]=gx(rd,{onClose(){}}),CV=b.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:p,...E}=t,g=xp(rd,n),[v,_]=b.useState(null),w=Ir(e,q=>_(q)),T=b.useRef(null),k=b.useRef(null),O=s||g.duration,V=b.useRef(0),S=b.useRef(O),I=b.useRef(0),{onToastAdd:A,onToastRemove:D}=g,R=Oi(()=>{var Z;(v==null?void 0:v.contains(document.activeElement))&&((Z=g.viewport)==null||Z.focus()),o()}),N=b.useCallback(q=>{!q||q===1/0||(window.clearTimeout(I.current),V.current=new Date().getTime(),I.current=window.setTimeout(R,q))},[R]);b.useEffect(()=>{const q=g.viewport;if(q){const Z=()=>{N(S.current),c==null||c()},ie=()=>{const Q=new Date().getTime()-V.current;S.current=S.current-Q,window.clearTimeout(I.current),l==null||l()};return q.addEventListener(Dy,ie),q.addEventListener(Ny,Z),()=>{q.removeEventListener(Dy,ie),q.removeEventListener(Ny,Z)}}},[g.viewport,O,l,c,N]),b.useEffect(()=>{i&&!g.isClosePausedRef.current&&N(O)},[i,O,g.isClosePausedRef,N]),b.useEffect(()=>(A(),()=>D()),[A,D]);const C=b.useMemo(()=>v?Rx(v):null,[v]);return g.viewport?x.jsxs(x.Fragment,{children:[C&&x.jsx(kV,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:C}),x.jsx(RV,{scope:n,onClose:R,children:nd.createPortal(x.jsx(O_.ItemSlot,{scope:n,children:x.jsx(aV,{asChild:!0,onEscapeKeyDown:Ct(a,()=>{g.isFocusedToastEscapeKeyDownRef.current||R(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:x.jsx(Cn.li,{tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":g.swipeDirection,...E,ref:w,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Ct(t.onKeyDown,q=>{q.key==="Escape"&&(a==null||a(q.nativeEvent),q.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,R()))}),onPointerDown:Ct(t.onPointerDown,q=>{q.button===0&&(T.current={x:q.clientX,y:q.clientY})}),onPointerMove:Ct(t.onPointerMove,q=>{if(!T.current)return;const Z=q.clientX-T.current.x,ie=q.clientY-T.current.y,Q=!!k.current,F=["left","right"].includes(g.swipeDirection),U=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,Y=F?U(0,Z):0,de=F?0:U(0,ie),ne=q.pointerType==="touch"?10:2,ce={x:Y,y:de},le={originalEvent:q,delta:ce};Q?(k.current=ce,th(bV,h,le,{discrete:!1})):vT(ce,g.swipeDirection,ne)?(k.current=ce,th(SV,d,le,{discrete:!1}),q.target.setPointerCapture(q.pointerId)):(Math.abs(Z)>ne||Math.abs(ie)>ne)&&(T.current=null)}),onPointerUp:Ct(t.onPointerUp,q=>{const Z=k.current,ie=q.target;if(ie.hasPointerCapture(q.pointerId)&&ie.releasePointerCapture(q.pointerId),k.current=null,T.current=null,Z){const Q=q.currentTarget,F={originalEvent:q,delta:Z};vT(Z,g.swipeDirection,g.swipeThreshold)?th(xV,p,F,{discrete:!0}):th(AV,f,F,{discrete:!0}),Q.addEventListener("click",U=>U.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),kV=t=>{const{__scopeToast:e,children:n,...r}=t,s=xp(rd,e),[i,o]=b.useState(!1),[a,l]=b.useState(!1);return OV(()=>o(!0)),b.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:x.jsx(mx,{asChild:!0,children:x.jsx(Ap,{...r,children:i&&x.jsxs(x.Fragment,{children:[s.label," ",n]})})})},DV="ToastTitle",Tx=b.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return x.jsx(Cn.div,{...r,ref:e})});Tx.displayName=DV;var NV="ToastDescription",Ix=b.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return x.jsx(Cn.div,{...r,ref:e})});Ix.displayName=NV;var Sx="ToastAction",bx=b.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?x.jsx(xx,{altText:n,asChild:!0,children:x.jsx(V_,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${Sx}\`. Expected non-empty \`string\`.`),null)});bx.displayName=Sx;var Ax="ToastClose",V_=b.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=PV(Ax,n);return x.jsx(xx,{asChild:!0,children:x.jsx(Cn.button,{type:"button",...r,ref:e,onClick:Ct(t.onClick,s.onClose)})})});V_.displayName=Ax;var xx=b.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return x.jsx(Cn.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function Rx(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),VV(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...Rx(r))}}),e}function th(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?dx(s,i):s.dispatchEvent(i)}var vT=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function OV(t=()=>{}){const e=Oi(t);Vi(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function VV(t){return t.nodeType===t.ELEMENT_NODE}function LV(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function ag(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var MV=yx,Px=_x,Cx=Ex,kx=Tx,Dx=Ix,Nx=bx,Ox=V_;function Vx(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=Vx(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Lx(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=Vx(t))&&(r&&(r+=" "),r+=e);return r}const _T=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,wT=Lx,Mx=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return wT(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const d=n==null?void 0:n[c],h=i==null?void 0:i[c];if(d===null)return null;const f=_T(d)||_T(h);return s[c][f]}),a=n&&Object.entries(n).reduce((c,d)=>{let[h,f]=d;return f===void 0||(c[h]=f),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,d)=>{let{class:h,className:f,...p}=d;return Object.entries(p).every(E=>{let[g,v]=E;return Array.isArray(v)?v.includes({...i,...a}[g]):{...i,...a}[g]===v})?[...c,h,f]:c},[]);return wT(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FV=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Fx=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var UV={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jV=b.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},l)=>b.createElement("svg",{ref:l,...UV,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:Fx("lucide",s),...a},[...o.map(([c,d])=>b.createElement(c,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=(t,e)=>{const n=b.forwardRef(({className:r,...s},i)=>b.createElement(jV,{ref:i,iconNode:e,className:Fx(`lucide-${FV(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BV=ot("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $V=ot("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zV=ot("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qV=ot("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HV=ot("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WV=ot("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KV=ot("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GV=ot("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QV=ot("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YV=ot("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ET=ot("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TT=ot("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XV=ot("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JV=ot("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IT=ot("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lg=ot("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ux=ot("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ST=ot("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZV=ot("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eL=ot("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tL=ot("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nL=ot("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rL=ot("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jx=ot("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),L_="-",sL=t=>{const e=oL(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(L_);return a[0]===""&&a.length!==1&&a.shift(),Bx(a,e)||iL(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},Bx=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?Bx(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(L_);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},bT=/^\[(.+)\]$/,iL=t=>{if(bT.test(t)){const e=bT.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},oL=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return lL(Object.entries(t.classGroups),n).forEach(([i,o])=>{Vy(o,r,i,e)}),r},Vy=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:AT(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(aL(s)){Vy(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{Vy(o,AT(e,i),n,r)})})},AT=(t,e)=>{let n=t;return e.split(L_).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},aL=t=>t.isThemeGetter,lL=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[n,s]}):t,cL=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},$x="!",uL=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=a=>{const l=[];let c=0,d=0,h;for(let v=0;v<a.length;v++){let _=a[v];if(c===0){if(_===s&&(r||a.slice(v,v+i)===e)){l.push(a.slice(d,v)),d=v+i;continue}if(_==="/"){h=v;continue}}_==="["?c++:_==="]"&&c--}const f=l.length===0?a:a.substring(d),p=f.startsWith($x),E=p?f.substring(1):f,g=h&&h>d?h-d:void 0;return{modifiers:l,hasImportantModifier:p,baseClassName:E,maybePostfixModifierPosition:g}};return n?a=>n({className:a,parseClassName:o}):o},dL=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},hL=t=>({cache:cL(t.cacheSize),parseClassName:uL(t),...sL(t)}),fL=/\s+/,pL=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(fL);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:d,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:p}=n(c);let E=!!p,g=r(E?f.substring(0,p):f);if(!g){if(!E){a=c+(a.length>0?" "+a:a);continue}if(g=r(f),!g){a=c+(a.length>0?" "+a:a);continue}E=!1}const v=dL(d).join(":"),_=h?v+$x:v,w=_+g;if(i.includes(w))continue;i.push(w);const T=s(g,E);for(let k=0;k<T.length;++k){const O=T[k];i.push(_+O)}a=c+(a.length>0?" "+a:a)}return a};function mL(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=zx(e))&&(r&&(r+=" "),r+=n);return r}const zx=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=zx(t[r]))&&(n&&(n+=" "),n+=e);return n};function gL(t,...e){let n,r,s,i=o;function o(l){const c=e.reduce((d,h)=>h(d),t());return n=hL(c),r=n.cache.get,s=n.cache.set,i=a,a(l)}function a(l){const c=r(l);if(c)return c;const d=pL(l,n);return s(l,d),d}return function(){return i(mL.apply(null,arguments))}}const Xe=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},qx=/^\[(?:([a-z-]+):)?(.+)\]$/i,yL=/^\d+\/\d+$/,vL=new Set(["px","full","screen"]),_L=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,wL=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,EL=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,TL=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,IL=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,os=t=>Ua(t)||vL.has(t)||yL.test(t),Gs=t=>kl(t,"length",kL),Ua=t=>!!t&&!Number.isNaN(Number(t)),cg=t=>kl(t,"number",Ua),gc=t=>!!t&&Number.isInteger(Number(t)),SL=t=>t.endsWith("%")&&Ua(t.slice(0,-1)),Ee=t=>qx.test(t),Qs=t=>_L.test(t),bL=new Set(["length","size","percentage"]),AL=t=>kl(t,bL,Hx),xL=t=>kl(t,"position",Hx),RL=new Set(["image","url"]),PL=t=>kl(t,RL,NL),CL=t=>kl(t,"",DL),yc=()=>!0,kl=(t,e,n)=>{const r=qx.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},kL=t=>wL.test(t)&&!EL.test(t),Hx=()=>!1,DL=t=>TL.test(t),NL=t=>IL.test(t),OL=()=>{const t=Xe("colors"),e=Xe("spacing"),n=Xe("blur"),r=Xe("brightness"),s=Xe("borderColor"),i=Xe("borderRadius"),o=Xe("borderSpacing"),a=Xe("borderWidth"),l=Xe("contrast"),c=Xe("grayscale"),d=Xe("hueRotate"),h=Xe("invert"),f=Xe("gap"),p=Xe("gradientColorStops"),E=Xe("gradientColorStopPositions"),g=Xe("inset"),v=Xe("margin"),_=Xe("opacity"),w=Xe("padding"),T=Xe("saturate"),k=Xe("scale"),O=Xe("sepia"),V=Xe("skew"),S=Xe("space"),I=Xe("translate"),A=()=>["auto","contain","none"],D=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto",Ee,e],N=()=>[Ee,e],C=()=>["",os,Gs],q=()=>["auto",Ua,Ee],Z=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ie=()=>["solid","dashed","dotted","double","none"],Q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],F=()=>["start","end","center","between","around","evenly","stretch"],U=()=>["","0",Ee],Y=()=>["auto","avoid","all","avoid-page","page","left","right","column"],de=()=>[Ua,Ee];return{cacheSize:500,separator:":",theme:{colors:[yc],spacing:[os,Gs],blur:["none","",Qs,Ee],brightness:de(),borderColor:[t],borderRadius:["none","","full",Qs,Ee],borderSpacing:N(),borderWidth:C(),contrast:de(),grayscale:U(),hueRotate:de(),invert:U(),gap:N(),gradientColorStops:[t],gradientColorStopPositions:[SL,Gs],inset:R(),margin:R(),opacity:de(),padding:N(),saturate:de(),scale:de(),sepia:U(),skew:de(),space:N(),translate:N()},classGroups:{aspect:[{aspect:["auto","square","video",Ee]}],container:["container"],columns:[{columns:[Qs]}],"break-after":[{"break-after":Y()}],"break-before":[{"break-before":Y()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Z(),Ee]}],overflow:[{overflow:D()}],"overflow-x":[{"overflow-x":D()}],"overflow-y":[{"overflow-y":D()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",gc,Ee]}],basis:[{basis:R()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ee]}],grow:[{grow:U()}],shrink:[{shrink:U()}],order:[{order:["first","last","none",gc,Ee]}],"grid-cols":[{"grid-cols":[yc]}],"col-start-end":[{col:["auto",{span:["full",gc,Ee]},Ee]}],"col-start":[{"col-start":q()}],"col-end":[{"col-end":q()}],"grid-rows":[{"grid-rows":[yc]}],"row-start-end":[{row:["auto",{span:[gc,Ee]},Ee]}],"row-start":[{"row-start":q()}],"row-end":[{"row-end":q()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ee]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ee]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...F()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...F(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...F(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ee,e]}],"min-w":[{"min-w":[Ee,e,"min","max","fit"]}],"max-w":[{"max-w":[Ee,e,"none","full","min","max","fit","prose",{screen:[Qs]},Qs]}],h:[{h:[Ee,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ee,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ee,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ee,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Qs,Gs]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",cg]}],"font-family":[{font:[yc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ee]}],"line-clamp":[{"line-clamp":["none",Ua,cg]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",os,Ee]}],"list-image":[{"list-image":["none",Ee]}],"list-style-type":[{list:["none","disc","decimal",Ee]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[_]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[_]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ie(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",os,Gs]}],"underline-offset":[{"underline-offset":["auto",os,Ee]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ee]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ee]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[_]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Z(),xL]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",AL]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},PL]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[E]}],"gradient-via-pos":[{via:[E]}],"gradient-to-pos":[{to:[E]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[_]}],"border-style":[{border:[...ie(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[_]}],"divide-style":[{divide:ie()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...ie()]}],"outline-offset":[{"outline-offset":[os,Ee]}],"outline-w":[{outline:[os,Gs]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:C()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[_]}],"ring-offset-w":[{"ring-offset":[os,Gs]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Qs,CL]}],"shadow-color":[{shadow:[yc]}],opacity:[{opacity:[_]}],"mix-blend":[{"mix-blend":[...Q(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Q()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Qs,Ee]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[T]}],sepia:[{sepia:[O]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[_]}],"backdrop-saturate":[{"backdrop-saturate":[T]}],"backdrop-sepia":[{"backdrop-sepia":[O]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ee]}],duration:[{duration:de()}],ease:[{ease:["linear","in","out","in-out",Ee]}],delay:[{delay:de()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ee]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[k]}],"scale-x":[{"scale-x":[k]}],"scale-y":[{"scale-y":[k]}],rotate:[{rotate:[gc,Ee]}],"translate-x":[{"translate-x":[I]}],"translate-y":[{"translate-y":[I]}],"skew-x":[{"skew-x":[V]}],"skew-y":[{"skew-y":[V]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ee]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ee]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ee]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[os,Gs,cg]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},VL=gL(OL);function Ds(...t){return VL(Lx(t))}const LL=MV,Wx=b.forwardRef(({className:t,...e},n)=>x.jsx(Px,{ref:n,className:Ds("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));Wx.displayName=Px.displayName;const ML=Mx("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Kx=b.forwardRef(({className:t,variant:e,...n},r)=>x.jsx(Cx,{ref:r,className:Ds(ML({variant:e}),t),...n}));Kx.displayName=Cx.displayName;const FL=b.forwardRef(({className:t,...e},n)=>x.jsx(Nx,{ref:n,className:Ds("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));FL.displayName=Nx.displayName;const Gx=b.forwardRef(({className:t,...e},n)=>x.jsx(Ox,{ref:n,className:Ds("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:x.jsx(jx,{className:"h-4 w-4"})}));Gx.displayName=Ox.displayName;const Qx=b.forwardRef(({className:t,...e},n)=>x.jsx(kx,{ref:n,className:Ds("text-sm font-semibold",t),...e}));Qx.displayName=kx.displayName;const Yx=b.forwardRef(({className:t,...e},n)=>x.jsx(Dx,{ref:n,className:Ds("text-sm opacity-90",t),...e}));Yx.displayName=Dx.displayName;function UL(){const{toasts:t}=C_();return x.jsxs(LL,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return x.jsxs(Kx,{...i,children:[x.jsxs("div",{className:"grid gap-1",children:[n&&x.jsx(Qx,{children:n}),r&&x.jsx(Yx,{children:r})]}),s,x.jsx(Gx,{})]},e)}),x.jsx(Wx,{})]})}var If=["light","dark"],M_="(prefers-color-scheme: dark)",jL=typeof window>"u",F_=b.createContext(void 0),BL={setTheme:t=>{},themes:[]},Xx=()=>{var t;return(t=b.useContext(F_))!=null?t:BL},$L=t=>b.useContext(F_)?t.children:b.createElement(qL,{...t}),zL=["light","dark"],qL=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:n=!0,enableColorScheme:r=!0,storageKey:s="theme",themes:i=zL,defaultTheme:o=n?"system":"light",attribute:a="data-theme",value:l,children:c,nonce:d})=>{let[h,f]=b.useState(()=>xT(s,o)),[p,E]=b.useState(()=>xT(s)),g=l?Object.values(l):i,v=b.useCallback(k=>{let O=k;if(!O)return;k==="system"&&n&&(O=RT());let V=l?l[O]:O,S=e?WL():null,I=document.documentElement;if(a==="class"?(I.classList.remove(...g),V&&I.classList.add(V)):V?I.setAttribute(a,V):I.removeAttribute(a),r){let A=If.includes(o)?o:null,D=If.includes(O)?O:A;I.style.colorScheme=D}S==null||S()},[]),_=b.useCallback(k=>{let O=typeof k=="function"?k(k):k;f(O);try{localStorage.setItem(s,O)}catch{}},[t]),w=b.useCallback(k=>{let O=RT(k);E(O),h==="system"&&n&&!t&&v("system")},[h,t]);b.useEffect(()=>{let k=window.matchMedia(M_);return k.addListener(w),w(k),()=>k.removeListener(w)},[w]),b.useEffect(()=>{let k=O=>{if(O.key!==s)return;let V=O.newValue||o;_(V)};return window.addEventListener("storage",k),()=>window.removeEventListener("storage",k)},[_]),b.useEffect(()=>{v(t??h)},[t,h]);let T=b.useMemo(()=>({theme:h,setTheme:_,forcedTheme:t,resolvedTheme:h==="system"?p:h,themes:n?[...i,"system"]:i,systemTheme:n?p:void 0}),[h,_,t,p,n,i]);return b.createElement(F_.Provider,{value:T},b.createElement(HL,{forcedTheme:t,disableTransitionOnChange:e,enableSystem:n,enableColorScheme:r,storageKey:s,themes:i,defaultTheme:o,attribute:a,value:l,children:c,attrs:g,nonce:d}),c)},HL=b.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:o,attrs:a,nonce:l})=>{let c=i==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(E=>`'${E}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=s?If.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(E,g=!1,v=!0)=>{let _=o?o[E]:E,w=g?E+"|| ''":`'${_}'`,T="";return s&&v&&!g&&If.includes(E)&&(T+=`d.style.colorScheme = '${E}';`),n==="class"?g||_?T+=`c.add(${w})`:T+="null":_&&(T+=`d[s](n,${w})`),T},p=t?`!function(){${d}${f(t)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${c})){var t='${M_}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}${c?"":"else{"+f(i,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}else{${f(i,!1,!1)};}${h}}catch(t){}}();`;return b.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:p}})}),xT=(t,e)=>{if(jL)return;let n;try{n=localStorage.getItem(t)||void 0}catch{}return n||e},WL=()=>{let t=document.createElement("style");return t.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},RT=t=>(t||(t=window.matchMedia(M_)),t.matches?"dark":"light"),KL=t=>{switch(t){case"success":return YL;case"info":return JL;case"warning":return XL;case"error":return ZL;default:return null}},GL=Array(12).fill(0),QL=({visible:t,className:e})=>z.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},z.createElement("div",{className:"sonner-spinner"},GL.map((n,r)=>z.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),YL=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),XL=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),JL=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),ZL=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),eM=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},z.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),z.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),tM=()=>{let[t,e]=z.useState(document.hidden);return z.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},Ly=1,nM=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;let{message:r,...s}=e,i=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:Ly++,o=this.toasts.find(l=>l.id===i),a=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...e,id:i,title:r}),{...l,...e,id:i,dismissible:a,title:r}):l):this.addToast({title:r,...s,dismissible:a,id:i}),i},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),this.subscribers.forEach(n=>n({id:e,dismiss:!0})),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));let s=e instanceof Promise?e:e(),i=r!==void 0,o,a=s.then(async c=>{if(o=["resolve",c],z.isValidElement(c))i=!1,this.create({id:r,type:"default",message:c});else if(sM(c)&&!c.ok){i=!1;let d=typeof n.error=="function"?await n.error(`HTTP error! status: ${c.status}`):n.error,h=typeof n.description=="function"?await n.description(`HTTP error! status: ${c.status}`):n.description;this.create({id:r,type:"error",message:d,description:h})}else if(n.success!==void 0){i=!1;let d=typeof n.success=="function"?await n.success(c):n.success,h=typeof n.description=="function"?await n.description(c):n.description;this.create({id:r,type:"success",message:d,description:h})}}).catch(async c=>{if(o=["reject",c],n.error!==void 0){i=!1;let d=typeof n.error=="function"?await n.error(c):n.error,h=typeof n.description=="function"?await n.description(c):n.description;this.create({id:r,type:"error",message:d,description:h})}}).finally(()=>{var c;i&&(this.dismiss(r),r=void 0),(c=n.finally)==null||c.call(n)}),l=()=>new Promise((c,d)=>a.then(()=>o[0]==="reject"?d(o[1]):c(o[1])).catch(d));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,n)=>{let r=(n==null?void 0:n.id)||Ly++;return this.create({jsx:e(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},wn=new nM,rM=(t,e)=>{let n=(e==null?void 0:e.id)||Ly++;return wn.addToast({title:t,...e,id:n}),n},sM=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",iM=rM,oM=()=>wn.toasts,aM=()=>wn.getActiveToasts(),St=Object.assign(iM,{success:wn.success,info:wn.info,warning:wn.warning,error:wn.error,custom:wn.custom,message:wn.message,promise:wn.promise,dismiss:wn.dismiss,loading:wn.loading},{getHistory:oM,getToasts:aM});function lM(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}lM(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function nh(t){return t.label!==void 0}var cM=3,uM="32px",dM="16px",PT=4e3,hM=356,fM=14,pM=20,mM=200;function cr(...t){return t.filter(Boolean).join(" ")}function gM(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var yM=t=>{var e,n,r,s,i,o,a,l,c,d,h;let{invert:f,toast:p,unstyled:E,interacting:g,setHeights:v,visibleToasts:_,heights:w,index:T,toasts:k,expanded:O,removeToast:V,defaultRichColors:S,closeButton:I,style:A,cancelButtonStyle:D,actionButtonStyle:R,className:N="",descriptionClassName:C="",duration:q,position:Z,gap:ie,loadingIcon:Q,expandByDefault:F,classNames:U,icons:Y,closeButtonAriaLabel:de="Close toast",pauseWhenPageIsHidden:ne}=t,[ce,le]=z.useState(null),[Ie,Qe]=z.useState(null),[ae,ye]=z.useState(!1),[Re,Tt]=z.useState(!1),[Nt,Kt]=z.useState(!1),[Bt,yn]=z.useState(!1),[Cr,ve]=z.useState(!1),[Qn,Us]=z.useState(0),[at,Ot]=z.useState(0),kr=z.useRef(p.duration||q||PT),Id=z.useRef(null),Dr=z.useRef(null),gm=T===0,no=T+1<=_,an=p.type,ss=p.dismissible!==!1,Gl=p.className||"",ym=p.descriptionClassName||"",ra=z.useMemo(()=>w.findIndex(fe=>fe.toastId===p.id)||0,[w,p.id]),Sd=z.useMemo(()=>{var fe;return(fe=p.closeButton)!=null?fe:I},[p.closeButton,I]),Ql=z.useMemo(()=>p.duration||q||PT,[p.duration,q]),is=z.useRef(0),Nr=z.useRef(0),sa=z.useRef(0),vn=z.useRef(null),[bd,ia]=Z.split("-"),Yl=z.useMemo(()=>w.reduce((fe,Ue,We)=>We>=ra?fe:fe+Ue.height,0),[w,ra]),js=tM(),Ad=p.invert||f,xt=an==="loading";Nr.current=z.useMemo(()=>ra*ie+Yl,[ra,Yl]),z.useEffect(()=>{kr.current=Ql},[Ql]),z.useEffect(()=>{ye(!0)},[]),z.useEffect(()=>{let fe=Dr.current;if(fe){let Ue=fe.getBoundingClientRect().height;return Ot(Ue),v(We=>[{toastId:p.id,height:Ue,position:p.position},...We]),()=>v(We=>We.filter(Vt=>Vt.toastId!==p.id))}},[v,p.id]),z.useLayoutEffect(()=>{if(!ae)return;let fe=Dr.current,Ue=fe.style.height;fe.style.height="auto";let We=fe.getBoundingClientRect().height;fe.style.height=Ue,Ot(We),v(Vt=>Vt.find(kn=>kn.toastId===p.id)?Vt.map(kn=>kn.toastId===p.id?{...kn,height:We}:kn):[{toastId:p.id,height:We,position:p.position},...Vt])},[ae,p.title,p.description,v,p.id]);let or=z.useCallback(()=>{Tt(!0),Us(Nr.current),v(fe=>fe.filter(Ue=>Ue.toastId!==p.id)),setTimeout(()=>{V(p)},mM)},[p,V,v,Nr]);z.useEffect(()=>{if(p.promise&&an==="loading"||p.duration===1/0||p.type==="loading")return;let fe;return O||g||ne&&js?(()=>{if(sa.current<is.current){let Ue=new Date().getTime()-is.current;kr.current=kr.current-Ue}sa.current=new Date().getTime()})():kr.current!==1/0&&(is.current=new Date().getTime(),fe=setTimeout(()=>{var Ue;(Ue=p.onAutoClose)==null||Ue.call(p,p),or()},kr.current)),()=>clearTimeout(fe)},[O,g,p,an,ne,js,or]),z.useEffect(()=>{p.delete&&or()},[or,p.delete]);function ro(){var fe,Ue,We;return Y!=null&&Y.loading?z.createElement("div",{className:cr(U==null?void 0:U.loader,(fe=p==null?void 0:p.classNames)==null?void 0:fe.loader,"sonner-loader"),"data-visible":an==="loading"},Y.loading):Q?z.createElement("div",{className:cr(U==null?void 0:U.loader,(Ue=p==null?void 0:p.classNames)==null?void 0:Ue.loader,"sonner-loader"),"data-visible":an==="loading"},Q):z.createElement(QL,{className:cr(U==null?void 0:U.loader,(We=p==null?void 0:p.classNames)==null?void 0:We.loader),visible:an==="loading"})}return z.createElement("li",{tabIndex:0,ref:Dr,className:cr(N,Gl,U==null?void 0:U.toast,(e=p==null?void 0:p.classNames)==null?void 0:e.toast,U==null?void 0:U.default,U==null?void 0:U[an],(n=p==null?void 0:p.classNames)==null?void 0:n[an]),"data-sonner-toast":"","data-rich-colors":(r=p.richColors)!=null?r:S,"data-styled":!(p.jsx||p.unstyled||E),"data-mounted":ae,"data-promise":!!p.promise,"data-swiped":Cr,"data-removed":Re,"data-visible":no,"data-y-position":bd,"data-x-position":ia,"data-index":T,"data-front":gm,"data-swiping":Nt,"data-dismissible":ss,"data-type":an,"data-invert":Ad,"data-swipe-out":Bt,"data-swipe-direction":Ie,"data-expanded":!!(O||F&&ae),style:{"--index":T,"--toasts-before":T,"--z-index":k.length-T,"--offset":`${Re?Qn:Nr.current}px`,"--initial-height":F?"auto":`${at}px`,...A,...p.style},onDragEnd:()=>{Kt(!1),le(null),vn.current=null},onPointerDown:fe=>{xt||!ss||(Id.current=new Date,Us(Nr.current),fe.target.setPointerCapture(fe.pointerId),fe.target.tagName!=="BUTTON"&&(Kt(!0),vn.current={x:fe.clientX,y:fe.clientY}))},onPointerUp:()=>{var fe,Ue,We,Vt;if(Bt||!ss)return;vn.current=null;let kn=Number(((fe=Dr.current)==null?void 0:fe.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Or=Number(((Ue=Dr.current)==null?void 0:Ue.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Yn=new Date().getTime()-((We=Id.current)==null?void 0:We.getTime()),_n=ce==="x"?kn:Or,ar=Math.abs(_n)/Yn;if(Math.abs(_n)>=pM||ar>.11){Us(Nr.current),(Vt=p.onDismiss)==null||Vt.call(p,p),Qe(ce==="x"?kn>0?"right":"left":Or>0?"down":"up"),or(),yn(!0),ve(!1);return}Kt(!1),le(null)},onPointerMove:fe=>{var Ue,We,Vt,kn;if(!vn.current||!ss||((Ue=window.getSelection())==null?void 0:Ue.toString().length)>0)return;let Or=fe.clientY-vn.current.y,Yn=fe.clientX-vn.current.x,_n=(We=t.swipeDirections)!=null?We:gM(Z);!ce&&(Math.abs(Yn)>1||Math.abs(Or)>1)&&le(Math.abs(Yn)>Math.abs(Or)?"x":"y");let ar={x:0,y:0};ce==="y"?(_n.includes("top")||_n.includes("bottom"))&&(_n.includes("top")&&Or<0||_n.includes("bottom")&&Or>0)&&(ar.y=Or):ce==="x"&&(_n.includes("left")||_n.includes("right"))&&(_n.includes("left")&&Yn<0||_n.includes("right")&&Yn>0)&&(ar.x=Yn),(Math.abs(ar.x)>0||Math.abs(ar.y)>0)&&ve(!0),(Vt=Dr.current)==null||Vt.style.setProperty("--swipe-amount-x",`${ar.x}px`),(kn=Dr.current)==null||kn.style.setProperty("--swipe-amount-y",`${ar.y}px`)}},Sd&&!p.jsx?z.createElement("button",{"aria-label":de,"data-disabled":xt,"data-close-button":!0,onClick:xt||!ss?()=>{}:()=>{var fe;or(),(fe=p.onDismiss)==null||fe.call(p,p)},className:cr(U==null?void 0:U.closeButton,(s=p==null?void 0:p.classNames)==null?void 0:s.closeButton)},(i=Y==null?void 0:Y.close)!=null?i:eM):null,p.jsx||b.isValidElement(p.title)?p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title:z.createElement(z.Fragment,null,an||p.icon||p.promise?z.createElement("div",{"data-icon":"",className:cr(U==null?void 0:U.icon,(o=p==null?void 0:p.classNames)==null?void 0:o.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||ro():null,p.type!=="loading"?p.icon||(Y==null?void 0:Y[an])||KL(an):null):null,z.createElement("div",{"data-content":"",className:cr(U==null?void 0:U.content,(a=p==null?void 0:p.classNames)==null?void 0:a.content)},z.createElement("div",{"data-title":"",className:cr(U==null?void 0:U.title,(l=p==null?void 0:p.classNames)==null?void 0:l.title)},typeof p.title=="function"?p.title():p.title),p.description?z.createElement("div",{"data-description":"",className:cr(C,ym,U==null?void 0:U.description,(c=p==null?void 0:p.classNames)==null?void 0:c.description)},typeof p.description=="function"?p.description():p.description):null),b.isValidElement(p.cancel)?p.cancel:p.cancel&&nh(p.cancel)?z.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||D,onClick:fe=>{var Ue,We;nh(p.cancel)&&ss&&((We=(Ue=p.cancel).onClick)==null||We.call(Ue,fe),or())},className:cr(U==null?void 0:U.cancelButton,(d=p==null?void 0:p.classNames)==null?void 0:d.cancelButton)},p.cancel.label):null,b.isValidElement(p.action)?p.action:p.action&&nh(p.action)?z.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||R,onClick:fe=>{var Ue,We;nh(p.action)&&((We=(Ue=p.action).onClick)==null||We.call(Ue,fe),!fe.defaultPrevented&&or())},className:cr(U==null?void 0:U.actionButton,(h=p==null?void 0:p.classNames)==null?void 0:h.actionButton)},p.action.label):null))};function CT(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function vM(t,e){let n={};return[t,e].forEach((r,s)=>{let i=s===1,o=i?"--mobile-offset":"--offset",a=i?dM:uM;function l(c){["top","right","bottom","left"].forEach(d=>{n[`${o}-${d}`]=typeof c=="number"?`${c}px`:c})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(c=>{r[c]===void 0?n[`${o}-${c}`]=a:n[`${o}-${c}`]=typeof r[c]=="number"?`${r[c]}px`:r[c]}):l(a)}),n}var _M=b.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:o,className:a,offset:l,mobileOffset:c,theme:d="light",richColors:h,duration:f,style:p,visibleToasts:E=cM,toastOptions:g,dir:v=CT(),gap:_=fM,loadingIcon:w,icons:T,containerAriaLabel:k="Notifications",pauseWhenPageIsHidden:O}=t,[V,S]=z.useState([]),I=z.useMemo(()=>Array.from(new Set([r].concat(V.filter(ne=>ne.position).map(ne=>ne.position)))),[V,r]),[A,D]=z.useState([]),[R,N]=z.useState(!1),[C,q]=z.useState(!1),[Z,ie]=z.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Q=z.useRef(null),F=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),U=z.useRef(null),Y=z.useRef(!1),de=z.useCallback(ne=>{S(ce=>{var le;return(le=ce.find(Ie=>Ie.id===ne.id))!=null&&le.delete||wn.dismiss(ne.id),ce.filter(({id:Ie})=>Ie!==ne.id)})},[]);return z.useEffect(()=>wn.subscribe(ne=>{if(ne.dismiss){S(ce=>ce.map(le=>le.id===ne.id?{...le,delete:!0}:le));return}setTimeout(()=>{ax.flushSync(()=>{S(ce=>{let le=ce.findIndex(Ie=>Ie.id===ne.id);return le!==-1?[...ce.slice(0,le),{...ce[le],...ne},...ce.slice(le+1)]:[ne,...ce]})})})}),[]),z.useEffect(()=>{if(d!=="system"){ie(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ie("dark"):ie("light")),typeof window>"u")return;let ne=window.matchMedia("(prefers-color-scheme: dark)");try{ne.addEventListener("change",({matches:ce})=>{ie(ce?"dark":"light")})}catch{ne.addListener(({matches:le})=>{try{ie(le?"dark":"light")}catch(Ie){console.error(Ie)}})}},[d]),z.useEffect(()=>{V.length<=1&&N(!1)},[V]),z.useEffect(()=>{let ne=ce=>{var le,Ie;s.every(Qe=>ce[Qe]||ce.code===Qe)&&(N(!0),(le=Q.current)==null||le.focus()),ce.code==="Escape"&&(document.activeElement===Q.current||(Ie=Q.current)!=null&&Ie.contains(document.activeElement))&&N(!1)};return document.addEventListener("keydown",ne),()=>document.removeEventListener("keydown",ne)},[s]),z.useEffect(()=>{if(Q.current)return()=>{U.current&&(U.current.focus({preventScroll:!0}),U.current=null,Y.current=!1)}},[Q.current]),z.createElement("section",{ref:e,"aria-label":`${k} ${F}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},I.map((ne,ce)=>{var le;let[Ie,Qe]=ne.split("-");return V.length?z.createElement("ol",{key:ne,dir:v==="auto"?CT():v,tabIndex:-1,ref:Q,className:a,"data-sonner-toaster":!0,"data-theme":Z,"data-y-position":Ie,"data-lifted":R&&V.length>1&&!i,"data-x-position":Qe,style:{"--front-toast-height":`${((le=A[0])==null?void 0:le.height)||0}px`,"--width":`${hM}px`,"--gap":`${_}px`,...p,...vM(l,c)},onBlur:ae=>{Y.current&&!ae.currentTarget.contains(ae.relatedTarget)&&(Y.current=!1,U.current&&(U.current.focus({preventScroll:!0}),U.current=null))},onFocus:ae=>{ae.target instanceof HTMLElement&&ae.target.dataset.dismissible==="false"||Y.current||(Y.current=!0,U.current=ae.relatedTarget)},onMouseEnter:()=>N(!0),onMouseMove:()=>N(!0),onMouseLeave:()=>{C||N(!1)},onDragEnd:()=>N(!1),onPointerDown:ae=>{ae.target instanceof HTMLElement&&ae.target.dataset.dismissible==="false"||q(!0)},onPointerUp:()=>q(!1)},V.filter(ae=>!ae.position&&ce===0||ae.position===ne).map((ae,ye)=>{var Re,Tt;return z.createElement(yM,{key:ae.id,icons:T,index:ye,toast:ae,defaultRichColors:h,duration:(Re=g==null?void 0:g.duration)!=null?Re:f,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:n,visibleToasts:E,closeButton:(Tt=g==null?void 0:g.closeButton)!=null?Tt:o,interacting:C,position:ne,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:de,toasts:V.filter(Nt=>Nt.position==ae.position),heights:A.filter(Nt=>Nt.position==ae.position),setHeights:D,expandByDefault:i,gap:_,loadingIcon:w,expanded:R,pauseWhenPageIsHidden:O,swipeDirections:t.swipeDirections})})):null}))});const wM=({...t})=>{const{theme:e="system"}=Xx();return x.jsx(_M,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})},EM=["top","right","bottom","left"],Li=Math.min,Vn=Math.max,Sf=Math.round,rh=Math.floor,Xr=t=>({x:t,y:t}),TM={left:"right",right:"left",bottom:"top",top:"bottom"},IM={start:"end",end:"start"};function My(t,e,n){return Vn(t,Li(e,n))}function As(t,e){return typeof t=="function"?t(e):t}function xs(t){return t.split("-")[0]}function Dl(t){return t.split("-")[1]}function U_(t){return t==="x"?"y":"x"}function j_(t){return t==="y"?"height":"width"}const SM=new Set(["top","bottom"]);function Hr(t){return SM.has(xs(t))?"y":"x"}function B_(t){return U_(Hr(t))}function bM(t,e,n){n===void 0&&(n=!1);const r=Dl(t),s=B_(t),i=j_(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=bf(o)),[o,bf(o)]}function AM(t){const e=bf(t);return[Fy(t),e,Fy(e)]}function Fy(t){return t.replace(/start|end/g,e=>IM[e])}const kT=["left","right"],DT=["right","left"],xM=["top","bottom"],RM=["bottom","top"];function PM(t,e,n){switch(t){case"top":case"bottom":return n?e?DT:kT:e?kT:DT;case"left":case"right":return e?xM:RM;default:return[]}}function CM(t,e,n,r){const s=Dl(t);let i=PM(xs(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(Fy)))),i}function bf(t){return t.replace(/left|right|bottom|top/g,e=>TM[e])}function kM(t){return{top:0,right:0,bottom:0,left:0,...t}}function Jx(t){return typeof t!="number"?kM(t):{top:t,right:t,bottom:t,left:t}}function Af(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function NT(t,e,n){let{reference:r,floating:s}=t;const i=Hr(e),o=B_(e),a=j_(o),l=xs(e),c=i==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,f=r[a]/2-s[a]/2;let p;switch(l){case"top":p={x:d,y:r.y-s.height};break;case"bottom":p={x:d,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:h};break;case"left":p={x:r.x-s.width,y:h};break;default:p={x:r.x,y:r.y}}switch(Dl(e)){case"start":p[o]-=f*(n&&c?-1:1);break;case"end":p[o]+=f*(n&&c?-1:1);break}return p}const DM=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:h}=NT(c,r,l),f=r,p={},E=0;for(let g=0;g<a.length;g++){const{name:v,fn:_}=a[g],{x:w,y:T,data:k,reset:O}=await _({x:d,y:h,initialPlacement:r,placement:f,strategy:s,middlewareData:p,rects:c,platform:o,elements:{reference:t,floating:e}});d=w??d,h=T??h,p={...p,[v]:{...p[v],...k}},O&&E<=50&&(E++,typeof O=="object"&&(O.placement&&(f=O.placement),O.rects&&(c=O.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):O.rects),{x:d,y:h}=NT(c,f,l)),g=-1)}return{x:d,y:h,placement:f,strategy:s,middlewareData:p}};async function Iu(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:f=!1,padding:p=0}=As(e,t),E=Jx(p),v=a[f?h==="floating"?"reference":"floating":h],_=Af(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(v)))==null||n?v:v.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:d,strategy:l})),w=h==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,T=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),k=await(i.isElement==null?void 0:i.isElement(T))?await(i.getScale==null?void 0:i.getScale(T))||{x:1,y:1}:{x:1,y:1},O=Af(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:w,offsetParent:T,strategy:l}):w);return{top:(_.top-O.top+E.top)/k.y,bottom:(O.bottom-_.bottom+E.bottom)/k.y,left:(_.left-O.left+E.left)/k.x,right:(O.right-_.right+E.right)/k.x}}const NM=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:d=0}=As(t,e)||{};if(c==null)return{};const h=Jx(d),f={x:n,y:r},p=B_(s),E=j_(p),g=await o.getDimensions(c),v=p==="y",_=v?"top":"left",w=v?"bottom":"right",T=v?"clientHeight":"clientWidth",k=i.reference[E]+i.reference[p]-f[p]-i.floating[E],O=f[p]-i.reference[p],V=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let S=V?V[T]:0;(!S||!await(o.isElement==null?void 0:o.isElement(V)))&&(S=a.floating[T]||i.floating[E]);const I=k/2-O/2,A=S/2-g[E]/2-1,D=Li(h[_],A),R=Li(h[w],A),N=D,C=S-g[E]-R,q=S/2-g[E]/2+I,Z=My(N,q,C),ie=!l.arrow&&Dl(s)!=null&&q!==Z&&i.reference[E]/2-(q<N?D:R)-g[E]/2<0,Q=ie?q<N?q-N:q-C:0;return{[p]:f[p]+Q,data:{[p]:Z,centerOffset:q-Z-Q,...ie&&{alignmentOffset:Q}},reset:ie}}}),OM=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:E="none",flipAlignment:g=!0,...v}=As(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const _=xs(s),w=Hr(a),T=xs(a)===a,k=await(l.isRTL==null?void 0:l.isRTL(c.floating)),O=f||(T||!g?[bf(a)]:AM(a)),V=E!=="none";!f&&V&&O.push(...CM(a,g,E,k));const S=[a,...O],I=await Iu(e,v),A=[];let D=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&A.push(I[_]),h){const q=bM(s,o,k);A.push(I[q[0]],I[q[1]])}if(D=[...D,{placement:s,overflows:A}],!A.every(q=>q<=0)){var R,N;const q=(((R=i.flip)==null?void 0:R.index)||0)+1,Z=S[q];if(Z&&(!(h==="alignment"?w!==Hr(Z):!1)||D.every(F=>Hr(F.placement)===w?F.overflows[0]>0:!0)))return{data:{index:q,overflows:D},reset:{placement:Z}};let ie=(N=D.filter(Q=>Q.overflows[0]<=0).sort((Q,F)=>Q.overflows[1]-F.overflows[1])[0])==null?void 0:N.placement;if(!ie)switch(p){case"bestFit":{var C;const Q=(C=D.filter(F=>{if(V){const U=Hr(F.placement);return U===w||U==="y"}return!0}).map(F=>[F.placement,F.overflows.filter(U=>U>0).reduce((U,Y)=>U+Y,0)]).sort((F,U)=>F[1]-U[1])[0])==null?void 0:C[0];Q&&(ie=Q);break}case"initialPlacement":ie=a;break}if(s!==ie)return{reset:{placement:ie}}}return{}}}};function OT(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function VT(t){return EM.some(e=>t[e]>=0)}const VM=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=As(t,e);switch(r){case"referenceHidden":{const i=await Iu(e,{...s,elementContext:"reference"}),o=OT(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:VT(o)}}}case"escaped":{const i=await Iu(e,{...s,altBoundary:!0}),o=OT(i,n.floating);return{data:{escapedOffsets:o,escaped:VT(o)}}}default:return{}}}}},Zx=new Set(["left","top"]);async function LM(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=xs(n),a=Dl(n),l=Hr(n)==="y",c=Zx.has(o)?-1:1,d=i&&l?-1:1,h=As(e,t);let{mainAxis:f,crossAxis:p,alignmentAxis:E}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof E=="number"&&(p=a==="end"?E*-1:E),l?{x:p*d,y:f*c}:{x:f*c,y:p*d}}const MM=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await LM(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},FM=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:v=>{let{x:_,y:w}=v;return{x:_,y:w}}},...l}=As(t,e),c={x:n,y:r},d=await Iu(e,l),h=Hr(xs(s)),f=U_(h);let p=c[f],E=c[h];if(i){const v=f==="y"?"top":"left",_=f==="y"?"bottom":"right",w=p+d[v],T=p-d[_];p=My(w,p,T)}if(o){const v=h==="y"?"top":"left",_=h==="y"?"bottom":"right",w=E+d[v],T=E-d[_];E=My(w,E,T)}const g=a.fn({...e,[f]:p,[h]:E});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[f]:i,[h]:o}}}}}},UM=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=As(t,e),d={x:n,y:r},h=Hr(s),f=U_(h);let p=d[f],E=d[h];const g=As(a,e),v=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const T=f==="y"?"height":"width",k=i.reference[f]-i.floating[T]+v.mainAxis,O=i.reference[f]+i.reference[T]-v.mainAxis;p<k?p=k:p>O&&(p=O)}if(c){var _,w;const T=f==="y"?"width":"height",k=Zx.has(xs(s)),O=i.reference[h]-i.floating[T]+(k&&((_=o.offset)==null?void 0:_[h])||0)+(k?0:v.crossAxis),V=i.reference[h]+i.reference[T]+(k?0:((w=o.offset)==null?void 0:w[h])||0)-(k?v.crossAxis:0);E<O?E=O:E>V&&(E=V)}return{[f]:p,[h]:E}}}},jM=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...c}=As(t,e),d=await Iu(e,c),h=xs(s),f=Dl(s),p=Hr(s)==="y",{width:E,height:g}=i.floating;let v,_;h==="top"||h==="bottom"?(v=h,_=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(_=h,v=f==="end"?"top":"bottom");const w=g-d.top-d.bottom,T=E-d.left-d.right,k=Li(g-d[v],w),O=Li(E-d[_],T),V=!e.middlewareData.shift;let S=k,I=O;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(I=T),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(S=w),V&&!f){const D=Vn(d.left,0),R=Vn(d.right,0),N=Vn(d.top,0),C=Vn(d.bottom,0);p?I=E-2*(D!==0||R!==0?D+R:Vn(d.left,d.right)):S=g-2*(N!==0||C!==0?N+C:Vn(d.top,d.bottom))}await l({...e,availableWidth:I,availableHeight:S});const A=await o.getDimensions(a.floating);return E!==A.width||g!==A.height?{reset:{rects:!0}}:{}}}};function Rp(){return typeof window<"u"}function Nl(t){return eR(t)?(t.nodeName||"").toLowerCase():"#document"}function $n(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ns(t){var e;return(e=(eR(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function eR(t){return Rp()?t instanceof Node||t instanceof $n(t).Node:!1}function Sr(t){return Rp()?t instanceof Element||t instanceof $n(t).Element:!1}function Zr(t){return Rp()?t instanceof HTMLElement||t instanceof $n(t).HTMLElement:!1}function LT(t){return!Rp()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof $n(t).ShadowRoot}const BM=new Set(["inline","contents"]);function sd(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=br(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!BM.has(s)}const $M=new Set(["table","td","th"]);function zM(t){return $M.has(Nl(t))}const qM=[":popover-open",":modal"];function Pp(t){return qM.some(e=>{try{return t.matches(e)}catch{return!1}})}const HM=["transform","translate","scale","rotate","perspective"],WM=["transform","translate","scale","rotate","perspective","filter"],KM=["paint","layout","strict","content"];function $_(t){const e=z_(),n=Sr(t)?br(t):t;return HM.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||WM.some(r=>(n.willChange||"").includes(r))||KM.some(r=>(n.contain||"").includes(r))}function GM(t){let e=Mi(t);for(;Zr(e)&&!il(e);){if($_(e))return e;if(Pp(e))return null;e=Mi(e)}return null}function z_(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const QM=new Set(["html","body","#document"]);function il(t){return QM.has(Nl(t))}function br(t){return $n(t).getComputedStyle(t)}function Cp(t){return Sr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Mi(t){if(Nl(t)==="html")return t;const e=t.assignedSlot||t.parentNode||LT(t)&&t.host||ns(t);return LT(e)?e.host:e}function tR(t){const e=Mi(t);return il(e)?t.ownerDocument?t.ownerDocument.body:t.body:Zr(e)&&sd(e)?e:tR(e)}function Su(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=tR(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=$n(s);if(i){const a=Uy(o);return e.concat(o,o.visualViewport||[],sd(s)?s:[],a&&n?Su(a):[])}return e.concat(s,Su(s,[],n))}function Uy(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function nR(t){const e=br(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Zr(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=Sf(n)!==i||Sf(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function q_(t){return Sr(t)?t:t.contextElement}function ja(t){const e=q_(t);if(!Zr(e))return Xr(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=nR(e);let o=(i?Sf(n.width):n.width)/r,a=(i?Sf(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const YM=Xr(0);function rR(t){const e=$n(t);return!z_()||!e.visualViewport?YM:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function XM(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==$n(t)?!1:e}function qo(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=q_(t);let o=Xr(1);e&&(r?Sr(r)&&(o=ja(r)):o=ja(t));const a=XM(i,n,r)?rR(i):Xr(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,d=s.width/o.x,h=s.height/o.y;if(i){const f=$n(i),p=r&&Sr(r)?$n(r):r;let E=f,g=Uy(E);for(;g&&r&&p!==E;){const v=ja(g),_=g.getBoundingClientRect(),w=br(g),T=_.left+(g.clientLeft+parseFloat(w.paddingLeft))*v.x,k=_.top+(g.clientTop+parseFloat(w.paddingTop))*v.y;l*=v.x,c*=v.y,d*=v.x,h*=v.y,l+=T,c+=k,E=$n(g),g=Uy(E)}}return Af({width:d,height:h,x:l,y:c})}function kp(t,e){const n=Cp(t).scrollLeft;return e?e.left+n:qo(ns(t)).left+n}function sR(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-kp(t,n),s=n.top+e.scrollTop;return{x:r,y:s}}function JM(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=ns(r),a=e?Pp(e.floating):!1;if(r===o||a&&i)return n;let l={scrollLeft:0,scrollTop:0},c=Xr(1);const d=Xr(0),h=Zr(r);if((h||!h&&!i)&&((Nl(r)!=="body"||sd(o))&&(l=Cp(r)),Zr(r))){const p=qo(r);c=ja(r),d.x=p.x+r.clientLeft,d.y=p.y+r.clientTop}const f=o&&!h&&!i?sR(o,l):Xr(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+d.x+f.x,y:n.y*c.y-l.scrollTop*c.y+d.y+f.y}}function ZM(t){return Array.from(t.getClientRects())}function eF(t){const e=ns(t),n=Cp(t),r=t.ownerDocument.body,s=Vn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Vn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+kp(t);const a=-n.scrollTop;return br(r).direction==="rtl"&&(o+=Vn(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}const MT=25;function tF(t,e){const n=$n(t),r=ns(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const d=z_();(!d||d&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}const c=kp(r);if(c<=0){const d=r.ownerDocument,h=d.body,f=getComputedStyle(h),p=d.compatMode==="CSS1Compat"&&parseFloat(f.marginLeft)+parseFloat(f.marginRight)||0,E=Math.abs(r.clientWidth-h.clientWidth-p);E<=MT&&(i-=E)}else c<=MT&&(i+=c);return{width:i,height:o,x:a,y:l}}const nF=new Set(["absolute","fixed"]);function rF(t,e){const n=qo(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Zr(t)?ja(t):Xr(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function FT(t,e,n){let r;if(e==="viewport")r=tF(t,n);else if(e==="document")r=eF(ns(t));else if(Sr(e))r=rF(e,n);else{const s=rR(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Af(r)}function iR(t,e){const n=Mi(t);return n===e||!Sr(n)||il(n)?!1:br(n).position==="fixed"||iR(n,e)}function sF(t,e){const n=e.get(t);if(n)return n;let r=Su(t,[],!1).filter(a=>Sr(a)&&Nl(a)!=="body"),s=null;const i=br(t).position==="fixed";let o=i?Mi(t):t;for(;Sr(o)&&!il(o);){const a=br(o),l=$_(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&nF.has(s.position)||sd(o)&&!l&&iR(t,o))?r=r.filter(d=>d!==o):s=a,o=Mi(o)}return e.set(t,r),r}function iF(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?Pp(e)?[]:sF(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,d)=>{const h=FT(e,d,s);return c.top=Vn(h.top,c.top),c.right=Li(h.right,c.right),c.bottom=Li(h.bottom,c.bottom),c.left=Vn(h.left,c.left),c},FT(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function oF(t){const{width:e,height:n}=nR(t);return{width:e,height:n}}function aF(t,e,n){const r=Zr(e),s=ns(e),i=n==="fixed",o=qo(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=Xr(0);function c(){l.x=kp(s)}if(r||!r&&!i)if((Nl(e)!=="body"||sd(s))&&(a=Cp(e)),r){const p=qo(e,!0,i,e);l.x=p.x+e.clientLeft,l.y=p.y+e.clientTop}else s&&c();i&&!r&&s&&c();const d=s&&!r&&!i?sR(s,a):Xr(0),h=o.left+a.scrollLeft-l.x-d.x,f=o.top+a.scrollTop-l.y-d.y;return{x:h,y:f,width:o.width,height:o.height}}function ug(t){return br(t).position==="static"}function UT(t,e){if(!Zr(t)||br(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return ns(t)===n&&(n=n.ownerDocument.body),n}function oR(t,e){const n=$n(t);if(Pp(t))return n;if(!Zr(t)){let s=Mi(t);for(;s&&!il(s);){if(Sr(s)&&!ug(s))return s;s=Mi(s)}return n}let r=UT(t,e);for(;r&&zM(r)&&ug(r);)r=UT(r,e);return r&&il(r)&&ug(r)&&!$_(r)?n:r||GM(t)||n}const lF=async function(t){const e=this.getOffsetParent||oR,n=this.getDimensions,r=await n(t.floating);return{reference:aF(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function cF(t){return br(t).direction==="rtl"}const uF={convertOffsetParentRelativeRectToViewportRelativeRect:JM,getDocumentElement:ns,getClippingRect:iF,getOffsetParent:oR,getElementRects:lF,getClientRects:ZM,getDimensions:oF,getScale:ja,isElement:Sr,isRTL:cF};function aR(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function dF(t,e){let n=null,r;const s=ns(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const c=t.getBoundingClientRect(),{left:d,top:h,width:f,height:p}=c;if(a||e(),!f||!p)return;const E=rh(h),g=rh(s.clientWidth-(d+f)),v=rh(s.clientHeight-(h+p)),_=rh(d),T={rootMargin:-E+"px "+-g+"px "+-v+"px "+-_+"px",threshold:Vn(0,Li(1,l))||1};let k=!0;function O(V){const S=V[0].intersectionRatio;if(S!==l){if(!k)return o();S?o(!1,S):r=setTimeout(()=>{o(!1,1e-7)},1e3)}S===1&&!aR(c,t.getBoundingClientRect())&&o(),k=!1}try{n=new IntersectionObserver(O,{...T,root:s.ownerDocument})}catch{n=new IntersectionObserver(O,T)}n.observe(t)}return o(!0),i}function hF(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=q_(t),d=s||i?[...c?Su(c):[],...Su(e)]:[];d.forEach(_=>{s&&_.addEventListener("scroll",n,{passive:!0}),i&&_.addEventListener("resize",n)});const h=c&&a?dF(c,n):null;let f=-1,p=null;o&&(p=new ResizeObserver(_=>{let[w]=_;w&&w.target===c&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var T;(T=p)==null||T.observe(e)})),n()}),c&&!l&&p.observe(c),p.observe(e));let E,g=l?qo(t):null;l&&v();function v(){const _=qo(t);g&&!aR(g,_)&&n(),g=_,E=requestAnimationFrame(v)}return n(),()=>{var _;d.forEach(w=>{s&&w.removeEventListener("scroll",n),i&&w.removeEventListener("resize",n)}),h==null||h(),(_=p)==null||_.disconnect(),p=null,l&&cancelAnimationFrame(E)}}const fF=MM,pF=FM,mF=OM,gF=jM,yF=VM,jT=NM,vF=UM,_F=(t,e,n)=>{const r=new Map,s={platform:uF,...n},i={...s.platform,_c:r};return DM(t,e,{...s,platform:i})};var wF=typeof document<"u",EF=function(){},Vh=wF?b.useLayoutEffect:EF;function xf(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!xf(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!xf(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function lR(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function BT(t,e){const n=lR(t);return Math.round(e*n)/n}function dg(t){const e=b.useRef(t);return Vh(()=>{e.current=t}),e}function TF(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[d,h]=b.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,p]=b.useState(r);xf(f,r)||p(r);const[E,g]=b.useState(null),[v,_]=b.useState(null),w=b.useCallback(F=>{F!==V.current&&(V.current=F,g(F))},[]),T=b.useCallback(F=>{F!==S.current&&(S.current=F,_(F))},[]),k=i||E,O=o||v,V=b.useRef(null),S=b.useRef(null),I=b.useRef(d),A=l!=null,D=dg(l),R=dg(s),N=dg(c),C=b.useCallback(()=>{if(!V.current||!S.current)return;const F={placement:e,strategy:n,middleware:f};R.current&&(F.platform=R.current),_F(V.current,S.current,F).then(U=>{const Y={...U,isPositioned:N.current!==!1};q.current&&!xf(I.current,Y)&&(I.current=Y,nd.flushSync(()=>{h(Y)}))})},[f,e,n,R,N]);Vh(()=>{c===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,h(F=>({...F,isPositioned:!1})))},[c]);const q=b.useRef(!1);Vh(()=>(q.current=!0,()=>{q.current=!1}),[]),Vh(()=>{if(k&&(V.current=k),O&&(S.current=O),k&&O){if(D.current)return D.current(k,O,C);C()}},[k,O,C,D,A]);const Z=b.useMemo(()=>({reference:V,floating:S,setReference:w,setFloating:T}),[w,T]),ie=b.useMemo(()=>({reference:k,floating:O}),[k,O]),Q=b.useMemo(()=>{const F={position:n,left:0,top:0};if(!ie.floating)return F;const U=BT(ie.floating,d.x),Y=BT(ie.floating,d.y);return a?{...F,transform:"translate("+U+"px, "+Y+"px)",...lR(ie.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:U,top:Y}},[n,a,ie.floating,d.x,d.y]);return b.useMemo(()=>({...d,update:C,refs:Z,elements:ie,floatingStyles:Q}),[d,C,Z,ie,Q])}const IF=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?jT({element:r.current,padding:s}).fn(n):{}:r?jT({element:r,padding:s}).fn(n):{}}}},SF=(t,e)=>({...fF(t),options:[t,e]}),bF=(t,e)=>({...pF(t),options:[t,e]}),AF=(t,e)=>({...vF(t),options:[t,e]}),xF=(t,e)=>({...mF(t),options:[t,e]}),RF=(t,e)=>({...gF(t),options:[t,e]}),PF=(t,e)=>({...yF(t),options:[t,e]}),CF=(t,e)=>({...IF(t),options:[t,e]});var kF="Arrow",cR=b.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return x.jsx(Cn.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:x.jsx("polygon",{points:"0,0 30,0 15,10"})})});cR.displayName=kF;var DF=cR;function NF(t){const[e,n]=b.useState(void 0);return Vi(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var H_="Popper",[uR,dR]=bp(H_),[OF,hR]=uR(H_),fR=t=>{const{__scopePopper:e,children:n}=t,[r,s]=b.useState(null);return x.jsx(OF,{scope:e,anchor:r,onAnchorChange:s,children:n})};fR.displayName=H_;var pR="PopperAnchor",mR=b.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=hR(pR,n),o=b.useRef(null),a=Ir(e,o),l=b.useRef(null);return b.useEffect(()=>{const c=l.current;l.current=(r==null?void 0:r.current)||o.current,c!==l.current&&i.onAnchorChange(l.current)}),r?null:x.jsx(Cn.div,{...s,ref:a})});mR.displayName=pR;var W_="PopperContent",[VF,LF]=uR(W_),gR=b.forwardRef((t,e)=>{var ae,ye,Re,Tt,Nt,Kt;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:E,...g}=t,v=hR(W_,n),[_,w]=b.useState(null),T=Ir(e,Bt=>w(Bt)),[k,O]=b.useState(null),V=NF(k),S=(V==null?void 0:V.width)??0,I=(V==null?void 0:V.height)??0,A=r+(i!=="center"?"-"+i:""),D=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},R=Array.isArray(c)?c:[c],N=R.length>0,C={padding:D,boundary:R.filter(FF),altBoundary:N},{refs:q,floatingStyles:Z,placement:ie,isPositioned:Q,middlewareData:F}=TF({strategy:"fixed",placement:A,whileElementsMounted:(...Bt)=>hF(...Bt,{animationFrame:p==="always"}),elements:{reference:v.anchor},middleware:[SF({mainAxis:s+I,alignmentAxis:o}),l&&bF({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?AF():void 0,...C}),l&&xF({...C}),RF({...C,apply:({elements:Bt,rects:yn,availableWidth:Cr,availableHeight:ve})=>{const{width:Qn,height:Us}=yn.reference,at=Bt.floating.style;at.setProperty("--radix-popper-available-width",`${Cr}px`),at.setProperty("--radix-popper-available-height",`${ve}px`),at.setProperty("--radix-popper-anchor-width",`${Qn}px`),at.setProperty("--radix-popper-anchor-height",`${Us}px`)}}),k&&CF({element:k,padding:a}),UF({arrowWidth:S,arrowHeight:I}),f&&PF({strategy:"referenceHidden",...C})]}),[U,Y]=_R(ie),de=Oi(E);Vi(()=>{Q&&(de==null||de())},[Q,de]);const ne=(ae=F.arrow)==null?void 0:ae.x,ce=(ye=F.arrow)==null?void 0:ye.y,le=((Re=F.arrow)==null?void 0:Re.centerOffset)!==0,[Ie,Qe]=b.useState();return Vi(()=>{_&&Qe(window.getComputedStyle(_).zIndex)},[_]),x.jsx("div",{ref:q.setFloating,"data-radix-popper-content-wrapper":"",style:{...Z,transform:Q?Z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ie,"--radix-popper-transform-origin":[(Tt=F.transformOrigin)==null?void 0:Tt.x,(Nt=F.transformOrigin)==null?void 0:Nt.y].join(" "),...((Kt=F.hide)==null?void 0:Kt.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:x.jsx(VF,{scope:n,placedSide:U,onArrowChange:O,arrowX:ne,arrowY:ce,shouldHideArrow:le,children:x.jsx(Cn.div,{"data-side":U,"data-align":Y,...g,ref:T,style:{...g.style,animation:Q?void 0:"none"}})})})});gR.displayName=W_;var yR="PopperArrow",MF={top:"bottom",right:"left",bottom:"top",left:"right"},vR=b.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=LF(yR,r),o=MF[i.placedSide];return x.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:x.jsx(DF,{...s,ref:n,style:{...s.style,display:"block"}})})});vR.displayName=yR;function FF(t){return t!==null}var UF=t=>({name:"transformOrigin",options:t,fn(e){var v,_,w;const{placement:n,rects:r,middlewareData:s}=e,o=((v=s.arrow)==null?void 0:v.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,d]=_R(n),h={start:"0%",center:"50%",end:"100%"}[d],f=(((_=s.arrow)==null?void 0:_.x)??0)+a/2,p=(((w=s.arrow)==null?void 0:w.y)??0)+l/2;let E="",g="";return c==="bottom"?(E=o?h:`${f}px`,g=`${-l}px`):c==="top"?(E=o?h:`${f}px`,g=`${r.floating.height+l}px`):c==="right"?(E=`${-l}px`,g=o?h:`${p}px`):c==="left"&&(E=`${r.floating.width+l}px`,g=o?h:`${p}px`),{data:{x:E,y:g}}}});function _R(t){const[e,n="center"]=t.split("-");return[e,n]}var d7=fR,jF=mR,BF=gR,$F=vR,[Dp]=bp("Tooltip",[dR]),K_=dR(),wR="TooltipProvider",zF=700,$T="tooltip.open",[qF,ER]=Dp(wR),TR=t=>{const{__scopeTooltip:e,delayDuration:n=zF,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,o=b.useRef(!0),a=b.useRef(!1),l=b.useRef(0);return b.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),x.jsx(qF,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:b.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:b.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:b.useCallback(c=>{a.current=c},[]),disableHoverableContent:s,children:i})};TR.displayName=wR;var IR="Tooltip",[h7,Np]=Dp(IR),jy="TooltipTrigger",HF=b.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Np(jy,n),i=ER(jy,n),o=K_(n),a=b.useRef(null),l=Ir(e,a,s.onTriggerChange),c=b.useRef(!1),d=b.useRef(!1),h=b.useCallback(()=>c.current=!1,[]);return b.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),x.jsx(jF,{asChild:!0,...o,children:x.jsx(Cn.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:l,onPointerMove:Ct(t.onPointerMove,f=>{f.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:Ct(t.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:Ct(t.onPointerDown,()=>{s.open&&s.onClose(),c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Ct(t.onFocus,()=>{c.current||s.onOpen()}),onBlur:Ct(t.onBlur,s.onClose),onClick:Ct(t.onClick,s.onClose)})})});HF.displayName=jy;var WF="TooltipPortal",[f7,KF]=Dp(WF,{forceMount:void 0}),ol="TooltipContent",SR=b.forwardRef((t,e)=>{const n=KF(ol,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=Np(ol,t.__scopeTooltip);return x.jsx(D_,{present:r||o.open,children:o.disableHoverableContent?x.jsx(bR,{side:s,...i,ref:e}):x.jsx(GF,{side:s,...i,ref:e})})}),GF=b.forwardRef((t,e)=>{const n=Np(ol,t.__scopeTooltip),r=ER(ol,t.__scopeTooltip),s=b.useRef(null),i=Ir(e,s),[o,a]=b.useState(null),{trigger:l,onClose:c}=n,d=s.current,{onPointerInTransitChange:h}=r,f=b.useCallback(()=>{a(null),h(!1)},[h]),p=b.useCallback((E,g)=>{const v=E.currentTarget,_={x:E.clientX,y:E.clientY},w=ZF(_,v.getBoundingClientRect()),T=e4(_,w),k=t4(g.getBoundingClientRect()),O=r4([...T,...k]);a(O),h(!0)},[h]);return b.useEffect(()=>()=>f(),[f]),b.useEffect(()=>{if(l&&d){const E=v=>p(v,d),g=v=>p(v,l);return l.addEventListener("pointerleave",E),d.addEventListener("pointerleave",g),()=>{l.removeEventListener("pointerleave",E),d.removeEventListener("pointerleave",g)}}},[l,d,p,f]),b.useEffect(()=>{if(o){const E=g=>{const v=g.target,_={x:g.clientX,y:g.clientY},w=(l==null?void 0:l.contains(v))||(d==null?void 0:d.contains(v)),T=!n4(_,o);w?f():T&&(f(),c())};return document.addEventListener("pointermove",E),()=>document.removeEventListener("pointermove",E)}},[l,d,o,c,f]),x.jsx(bR,{...t,ref:i})}),[QF,YF]=Dp(IR,{isInside:!1}),XF=GO("TooltipContent"),bR=b.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=t,l=Np(ol,n),c=K_(n),{onClose:d}=l;return b.useEffect(()=>(document.addEventListener($T,d),()=>document.removeEventListener($T,d)),[d]),b.useEffect(()=>{if(l.trigger){const h=f=>{const p=f.target;p!=null&&p.contains(l.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,d]),x.jsx(k_,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:x.jsxs(BF,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[x.jsx(XF,{children:r}),x.jsx(QF,{scope:n,isInside:!0,children:x.jsx(_V,{id:l.contentId,role:"tooltip",children:s||r})})]})})});SR.displayName=ol;var AR="TooltipArrow",JF=b.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=K_(n);return YF(AR,n).isInside?null:x.jsx($F,{...s,...r,ref:e})});JF.displayName=AR;function ZF(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function e4(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function t4(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function n4(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i],l=e[o],c=a.x,d=a.y,h=l.x,f=l.y;d>r!=f>r&&n<(h-c)*(r-d)/(f-d)+c&&(s=!s)}return s}function r4(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),s4(e)}function s4(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var i4=TR,xR=SR;const o4=i4,a4=b.forwardRef(({className:t,sideOffset:e=4,...n},r)=>x.jsx(xR,{ref:r,sideOffset:e,className:Ds("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));a4.displayName=xR.displayName;var Op=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},l4={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},oi,Vv,Fb,c4=(Fb=class{constructor(){Ne(this,oi,l4);Ne(this,Vv,!1)}setTimeoutProvider(t){me(this,oi,t)}setTimeout(t,e){return $(this,oi).setTimeout(t,e)}clearTimeout(t){$(this,oi).clearTimeout(t)}setInterval(t,e){return $(this,oi).setInterval(t,e)}clearInterval(t){$(this,oi).clearInterval(t)}},oi=new WeakMap,Vv=new WeakMap,Fb),By=new c4;function u4(t){setTimeout(t,0)}var Vp=typeof window>"u"||"Deno"in globalThis;function dr(){}function d4(t,e){return typeof t=="function"?t(e):t}function h4(t){return typeof t=="number"&&t>=0&&t!==1/0}function f4(t,e){return Math.max(t+(e||0)-Date.now(),0)}function $y(t,e){return typeof t=="function"?t(e):t}function p4(t,e){return typeof t=="function"?t(e):t}function zT(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==G_(o,e.options))return!1}else if(!Au(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function qT(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(bu(e.options.mutationKey)!==bu(i))return!1}else if(!Au(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function G_(t,e){return((e==null?void 0:e.queryKeyHashFn)||bu)(t)}function bu(t){return JSON.stringify(t,(e,n)=>zy(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Au(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Au(t[n],e[n])):!1}var m4=Object.prototype.hasOwnProperty;function RR(t,e){if(t===e)return t;const n=HT(t)&&HT(e);if(!n&&!(zy(t)&&zy(e)))return e;const s=(n?t:Object.keys(t)).length,i=n?e:Object.keys(e),o=i.length,a=n?new Array(o):{};let l=0;for(let c=0;c<o;c++){const d=n?c:i[c],h=t[d],f=e[d];if(h===f){a[d]=h,(n?c<s:m4.call(t,d))&&l++;continue}if(h===null||f===null||typeof h!="object"||typeof f!="object"){a[d]=f;continue}const p=RR(h,f);a[d]=p,p===h&&l++}return s===o&&l===s?t:a}function HT(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function zy(t){if(!WT(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!WT(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function WT(t){return Object.prototype.toString.call(t)==="[object Object]"}function g4(t){return new Promise(e=>{By.setTimeout(e,t)})}function y4(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?RR(t,e):e}function v4(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function _4(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Q_=Symbol();function PR(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Q_?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var xo,ai,qa,Ub,w4=(Ub=class extends Op{constructor(){super();Ne(this,xo);Ne(this,ai);Ne(this,qa);me(this,qa,e=>{if(!Vp&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){$(this,ai)||this.setEventListener($(this,qa))}onUnsubscribe(){var e;this.hasListeners()||((e=$(this,ai))==null||e.call(this),me(this,ai,void 0))}setEventListener(e){var n;me(this,qa,e),(n=$(this,ai))==null||n.call(this),me(this,ai,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){$(this,xo)!==e&&(me(this,xo,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof $(this,xo)=="boolean"?$(this,xo):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},xo=new WeakMap,ai=new WeakMap,qa=new WeakMap,Ub),CR=new w4;function E4(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}var T4=u4;function I4(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=T4;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var dn=I4(),Ha,li,Wa,jb,S4=(jb=class extends Op{constructor(){super();Ne(this,Ha,!0);Ne(this,li);Ne(this,Wa);me(this,Wa,e=>{if(!Vp&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){$(this,li)||this.setEventListener($(this,Wa))}onUnsubscribe(){var e;this.hasListeners()||((e=$(this,li))==null||e.call(this),me(this,li,void 0))}setEventListener(e){var n;me(this,Wa,e),(n=$(this,li))==null||n.call(this),me(this,li,e(this.setOnline.bind(this)))}setOnline(e){$(this,Ha)!==e&&(me(this,Ha,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return $(this,Ha)}},Ha=new WeakMap,li=new WeakMap,Wa=new WeakMap,jb),Rf=new S4;function b4(t){return Math.min(1e3*2**t,3e4)}function kR(t){return(t??"online")==="online"?Rf.isOnline():!0}var qy=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function DR(t){let e=!1,n=0,r;const s=E4(),i=()=>s.status!=="pending",o=g=>{var v;if(!i()){const _=new qy(g);f(_),(v=t.onCancel)==null||v.call(t,_)}},a=()=>{e=!0},l=()=>{e=!1},c=()=>CR.isFocused()&&(t.networkMode==="always"||Rf.isOnline())&&t.canRun(),d=()=>kR(t.networkMode)&&t.canRun(),h=g=>{i()||(r==null||r(),s.resolve(g))},f=g=>{i()||(r==null||r(),s.reject(g))},p=()=>new Promise(g=>{var v;r=_=>{(i()||c())&&g(_)},(v=t.onPause)==null||v.call(t)}).then(()=>{var g;r=void 0,i()||(g=t.onContinue)==null||g.call(t)}),E=()=>{if(i())return;let g;const v=n===0?t.initialPromise:void 0;try{g=v??t.fn()}catch(_){g=Promise.reject(_)}Promise.resolve(g).then(h).catch(_=>{var V;if(i())return;const w=t.retry??(Vp?0:3),T=t.retryDelay??b4,k=typeof T=="function"?T(n,_):T,O=w===!0||typeof w=="number"&&n<w||typeof w=="function"&&w(n,_);if(e||!O){f(_);return}n++,(V=t.onFail)==null||V.call(t,n,_),g4(k).then(()=>c()?void 0:p()).then(()=>{e?f(_):E()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:a,continueRetry:l,canStart:d,start:()=>(d()?E():p().then(E),s)}}var Ro,Bb,NR=(Bb=class{constructor(){Ne(this,Ro)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),h4(this.gcTime)&&me(this,Ro,By.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Vp?1/0:5*60*1e3))}clearGcTimeout(){$(this,Ro)&&(By.clearTimeout($(this,Ro)),me(this,Ro,void 0))}},Ro=new WeakMap,Bb),Po,Ka,Jn,Co,Mt,Gu,ko,hr,as,$b,A4=($b=class extends NR{constructor(n){super();Ne(this,hr);Ne(this,Po);Ne(this,Ka);Ne(this,Jn);Ne(this,Co);Ne(this,Mt);Ne(this,Gu);Ne(this,ko);me(this,ko,!1),me(this,Gu,n.defaultOptions),this.setOptions(n.options),this.observers=[],me(this,Co,n.client),me(this,Jn,$(this,Co).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,me(this,Po,GT(this.options)),this.state=n.state??$(this,Po),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=$(this,Mt))==null?void 0:n.promise}setOptions(n){if(this.options={...$(this,Gu),...n},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=GT(this.options);r.data!==void 0&&(this.setState(KT(r.data,r.dataUpdatedAt)),me(this,Po,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&$(this,Jn).remove(this)}setData(n,r){const s=y4(this.state.data,n,this.options);return Gt(this,hr,as).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){Gt(this,hr,as).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=$(this,Mt))==null?void 0:s.promise;return(i=$(this,Mt))==null||i.cancel(n),r?r.then(dr).catch(dr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState($(this,Po))}isActive(){return this.observers.some(n=>p4(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Q_||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>$y(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!f4(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=$(this,Mt))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=$(this,Mt))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),$(this,Jn).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||($(this,Mt)&&($(this,ko)?$(this,Mt).cancel({revert:!0}):$(this,Mt).cancelRetry()),this.scheduleGc()),$(this,Jn).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Gt(this,hr,as).call(this,{type:"invalidate"})}async fetch(n,r){var c,d,h,f,p,E,g,v,_,w,T,k;if(this.state.fetchStatus!=="idle"&&((c=$(this,Mt))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if($(this,Mt))return $(this,Mt).continueRetry(),$(this,Mt).promise}if(n&&this.setOptions(n),!this.options.queryFn){const O=this.observers.find(V=>V.options.queryFn);O&&this.setOptions(O.options)}const s=new AbortController,i=O=>{Object.defineProperty(O,"signal",{enumerable:!0,get:()=>(me(this,ko,!0),s.signal)})},o=()=>{const O=PR(this.options,r),S=(()=>{const I={client:$(this,Co),queryKey:this.queryKey,meta:this.meta};return i(I),I})();return me(this,ko,!1),this.options.persister?this.options.persister(O,S,this):O(S)},l=(()=>{const O={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:$(this,Co),state:this.state,fetchFn:o};return i(O),O})();(d=this.options.behavior)==null||d.onFetch(l,this),me(this,Ka,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&Gt(this,hr,as).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta}),me(this,Mt,DR({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,onCancel:O=>{O instanceof qy&&O.revert&&this.setState({...$(this,Ka),fetchStatus:"idle"}),s.abort()},onFail:(O,V)=>{Gt(this,hr,as).call(this,{type:"failed",failureCount:O,error:V})},onPause:()=>{Gt(this,hr,as).call(this,{type:"pause"})},onContinue:()=>{Gt(this,hr,as).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const O=await $(this,Mt).start();if(O===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(O),(E=(p=$(this,Jn).config).onSuccess)==null||E.call(p,O,this),(v=(g=$(this,Jn).config).onSettled)==null||v.call(g,O,this.state.error,this),O}catch(O){if(O instanceof qy){if(O.silent)return $(this,Mt).promise;if(O.revert){if(this.state.data===void 0)throw O;return this.state.data}}throw Gt(this,hr,as).call(this,{type:"error",error:O}),(w=(_=$(this,Jn).config).onError)==null||w.call(_,O,this),(k=(T=$(this,Jn).config).onSettled)==null||k.call(T,this.state.data,O,this),O}finally{this.scheduleGc()}}},Po=new WeakMap,Ka=new WeakMap,Jn=new WeakMap,Co=new WeakMap,Mt=new WeakMap,Gu=new WeakMap,ko=new WeakMap,hr=new WeakSet,as=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...x4(s.data,this.options),fetchMeta:n.meta??null};case"success":const i={...s,...KT(n.data,n.dataUpdatedAt),dataUpdateCount:s.dataUpdateCount+1,...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return me(this,Ka,n.manual?i:void 0),i;case"error":const o=n.error;return{...s,error:o,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),dn.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),$(this,Jn).notify({query:this,type:"updated",action:n})})},$b);function x4(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:kR(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function KT(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function GT(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}function QT(t){return{onFetch:(e,n)=>{var d,h,f,p,E;const r=e.options,s=(f=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,i=((p=e.state.data)==null?void 0:p.pages)||[],o=((E=e.state.data)==null?void 0:E.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let g=!1;const v=T=>{Object.defineProperty(T,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},_=PR(e.options,e.fetchOptions),w=async(T,k,O)=>{if(g)return Promise.reject();if(k==null&&T.pages.length)return Promise.resolve(T);const S=(()=>{const R={client:e.client,queryKey:e.queryKey,pageParam:k,direction:O?"backward":"forward",meta:e.options.meta};return v(R),R})(),I=await _(S),{maxPages:A}=e.options,D=O?_4:v4;return{pages:D(T.pages,I,A),pageParams:D(T.pageParams,k,A)}};if(s&&i.length){const T=s==="backward",k=T?R4:YT,O={pages:i,pageParams:o},V=k(r,O);a=await w(O,V,T)}else{const T=t??i.length;do{const k=l===0?o[0]??r.initialPageParam:YT(r,a);if(l>0&&k==null)break;a=await w(a,k),l++}while(l<T)}return a};e.options.persister?e.fetchFn=()=>{var g,v;return(v=(g=e.options).persister)==null?void 0:v.call(g,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=c}}}function YT(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function R4(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Qu,jr,cn,Do,Br,ei,zb,P4=(zb=class extends NR{constructor(n){super();Ne(this,Br);Ne(this,Qu);Ne(this,jr);Ne(this,cn);Ne(this,Do);me(this,Qu,n.client),this.mutationId=n.mutationId,me(this,cn,n.mutationCache),me(this,jr,[]),this.state=n.state||C4(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){$(this,jr).includes(n)||($(this,jr).push(n),this.clearGcTimeout(),$(this,cn).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){me(this,jr,$(this,jr).filter(r=>r!==n)),this.scheduleGc(),$(this,cn).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){$(this,jr).length||(this.state.status==="pending"?this.scheduleGc():$(this,cn).remove(this))}continue(){var n;return((n=$(this,Do))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var a,l,c,d,h,f,p,E,g,v,_,w,T,k,O,V,S,I,A,D;const r=()=>{Gt(this,Br,ei).call(this,{type:"continue"})},s={client:$(this,Qu),meta:this.options.meta,mutationKey:this.options.mutationKey};me(this,Do,DR({fn:()=>this.options.mutationFn?this.options.mutationFn(n,s):Promise.reject(new Error("No mutationFn found")),onFail:(R,N)=>{Gt(this,Br,ei).call(this,{type:"failed",failureCount:R,error:N})},onPause:()=>{Gt(this,Br,ei).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>$(this,cn).canRun(this)}));const i=this.state.status==="pending",o=!$(this,Do).canStart();try{if(i)r();else{Gt(this,Br,ei).call(this,{type:"pending",variables:n,isPaused:o}),await((l=(a=$(this,cn).config).onMutate)==null?void 0:l.call(a,n,this,s));const N=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,n,s));N!==this.state.context&&Gt(this,Br,ei).call(this,{type:"pending",context:N,variables:n,isPaused:o})}const R=await $(this,Do).start();return await((f=(h=$(this,cn).config).onSuccess)==null?void 0:f.call(h,R,n,this.state.context,this,s)),await((E=(p=this.options).onSuccess)==null?void 0:E.call(p,R,n,this.state.context,s)),await((v=(g=$(this,cn).config).onSettled)==null?void 0:v.call(g,R,null,this.state.variables,this.state.context,this,s)),await((w=(_=this.options).onSettled)==null?void 0:w.call(_,R,null,n,this.state.context,s)),Gt(this,Br,ei).call(this,{type:"success",data:R}),R}catch(R){try{throw await((k=(T=$(this,cn).config).onError)==null?void 0:k.call(T,R,n,this.state.context,this,s)),await((V=(O=this.options).onError)==null?void 0:V.call(O,R,n,this.state.context,s)),await((I=(S=$(this,cn).config).onSettled)==null?void 0:I.call(S,void 0,R,this.state.variables,this.state.context,this,s)),await((D=(A=this.options).onSettled)==null?void 0:D.call(A,void 0,R,n,this.state.context,s)),R}finally{Gt(this,Br,ei).call(this,{type:"error",error:R})}}finally{$(this,cn).runNext(this)}}},Qu=new WeakMap,jr=new WeakMap,cn=new WeakMap,Do=new WeakMap,Br=new WeakSet,ei=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),dn.batch(()=>{$(this,jr).forEach(s=>{s.onMutationUpdate(n)}),$(this,cn).notify({mutation:this,type:"updated",action:n})})},zb);function C4(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var us,fr,Yu,qb,k4=(qb=class extends Op{constructor(e={}){super();Ne(this,us);Ne(this,fr);Ne(this,Yu);this.config=e,me(this,us,new Set),me(this,fr,new Map),me(this,Yu,0)}build(e,n,r){const s=new P4({client:e,mutationCache:this,mutationId:++Ld(this,Yu)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){$(this,us).add(e);const n=sh(e);if(typeof n=="string"){const r=$(this,fr).get(n);r?r.push(e):$(this,fr).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if($(this,us).delete(e)){const n=sh(e);if(typeof n=="string"){const r=$(this,fr).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&$(this,fr).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=sh(e);if(typeof n=="string"){const r=$(this,fr).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=sh(e);if(typeof n=="string"){const s=(r=$(this,fr).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){dn.batch(()=>{$(this,us).forEach(e=>{this.notify({type:"removed",mutation:e})}),$(this,us).clear(),$(this,fr).clear()})}getAll(){return Array.from($(this,us))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>qT(n,r))}findAll(e={}){return this.getAll().filter(n=>qT(e,n))}notify(e){dn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return dn.batch(()=>Promise.all(e.map(n=>n.continue().catch(dr))))}},us=new WeakMap,fr=new WeakMap,Yu=new WeakMap,qb);function sh(t){var e;return(e=t.options.scope)==null?void 0:e.id}var $r,Hb,D4=(Hb=class extends Op{constructor(e={}){super();Ne(this,$r);this.config=e,me(this,$r,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??G_(s,n);let o=this.get(i);return o||(o=new A4({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){$(this,$r).has(e.queryHash)||($(this,$r).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=$(this,$r).get(e.queryHash);n&&(e.destroy(),n===e&&$(this,$r).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){dn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return $(this,$r).get(e)}getAll(){return[...$(this,$r).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>zT(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>zT(e,r)):n}notify(e){dn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){dn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){dn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},$r=new WeakMap,Hb),ft,ci,ui,Ga,Qa,di,Ya,Xa,Wb,N4=(Wb=class{constructor(t={}){Ne(this,ft);Ne(this,ci);Ne(this,ui);Ne(this,Ga);Ne(this,Qa);Ne(this,di);Ne(this,Ya);Ne(this,Xa);me(this,ft,t.queryCache||new D4),me(this,ci,t.mutationCache||new k4),me(this,ui,t.defaultOptions||{}),me(this,Ga,new Map),me(this,Qa,new Map),me(this,di,0)}mount(){Ld(this,di)._++,$(this,di)===1&&(me(this,Ya,CR.subscribe(async t=>{t&&(await this.resumePausedMutations(),$(this,ft).onFocus())})),me(this,Xa,Rf.subscribe(async t=>{t&&(await this.resumePausedMutations(),$(this,ft).onOnline())})))}unmount(){var t,e;Ld(this,di)._--,$(this,di)===0&&((t=$(this,Ya))==null||t.call(this),me(this,Ya,void 0),(e=$(this,Xa))==null||e.call(this),me(this,Xa,void 0))}isFetching(t){return $(this,ft).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return $(this,ci).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=$(this,ft).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=$(this,ft).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime($y(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return $(this,ft).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=$(this,ft).get(r.queryHash),i=s==null?void 0:s.state.data,o=d4(e,i);if(o!==void 0)return $(this,ft).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return dn.batch(()=>$(this,ft).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=$(this,ft).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=$(this,ft);dn.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=$(this,ft);return dn.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=dn.batch(()=>$(this,ft).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(dr).catch(dr)}invalidateQueries(t,e={}){return dn.batch(()=>($(this,ft).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=dn.batch(()=>$(this,ft).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(dr)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(dr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=$(this,ft).build(this,e);return n.isStaleByTime($y(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(dr).catch(dr)}fetchInfiniteQuery(t){return t.behavior=QT(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(dr).catch(dr)}ensureInfiniteQueryData(t){return t.behavior=QT(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Rf.isOnline()?$(this,ci).resumePausedMutations():Promise.resolve()}getQueryCache(){return $(this,ft)}getMutationCache(){return $(this,ci)}getDefaultOptions(){return $(this,ui)}setDefaultOptions(t){me(this,ui,t)}setQueryDefaults(t,e){$(this,Ga).set(bu(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...$(this,Ga).values()],n={};return e.forEach(r=>{Au(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){$(this,Qa).set(bu(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...$(this,Qa).values()],n={};return e.forEach(r=>{Au(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...$(this,ui).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=G_(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Q_&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...$(this,ui).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){$(this,ft).clear(),$(this,ci).clear()}},ft=new WeakMap,ci=new WeakMap,ui=new WeakMap,Ga=new WeakMap,Qa=new WeakMap,di=new WeakMap,Ya=new WeakMap,Xa=new WeakMap,Wb),O4=b.createContext(void 0),V4=({client:t,children:e})=>(b.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),x.jsx(O4.Provider,{value:t,children:e}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xu(){return xu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xu.apply(this,arguments)}var pi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(pi||(pi={}));const XT="popstate";function L4(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return Pf("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Ru(s)}return OR(e,n,null,t)}function M4(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:a="",hash:l=""}=ta(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Pf("",{pathname:o,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=s.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof i=="string"?i:Ru(i))}function r(s,i){Y_(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return OR(e,n,r,t)}function wt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Y_(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function F4(){return Math.random().toString(36).substr(2,8)}function JT(t,e){return{usr:t.state,key:t.key,idx:e}}function Pf(t,e,n,r){return n===void 0&&(n=null),xu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ta(e):e,{state:n,key:e&&e.key||r||F4()})}function Ru(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ta(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function OR(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=pi.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(xu({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=pi.Pop;let v=d(),_=v==null?null:v-c;c=v,l&&l({action:a,location:g.location,delta:_})}function f(v,_){a=pi.Push;let w=Pf(g.location,v,_);n&&n(w,v),c=d()+1;let T=JT(w,c),k=g.createHref(w);try{o.pushState(T,"",k)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;s.location.assign(k)}i&&l&&l({action:a,location:g.location,delta:1})}function p(v,_){a=pi.Replace;let w=Pf(g.location,v,_);n&&n(w,v),c=d();let T=JT(w,c),k=g.createHref(w);o.replaceState(T,"",k),i&&l&&l({action:a,location:g.location,delta:0})}function E(v){let _=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof v=="string"?v:Ru(v);return w=w.replace(/ $/,"%20"),wt(_,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,_)}let g={get action(){return a},get location(){return t(s,o)},listen(v){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(XT,h),l=v,()=>{s.removeEventListener(XT,h),l=null}},createHref(v){return e(s,v)},createURL:E,encodeLocation(v){let _=E(v);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:f,replace:p,go(v){return o.go(v)}};return g}var ZT;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(ZT||(ZT={}));function U4(t,e,n){return n===void 0&&(n="/"),j4(t,e,n)}function j4(t,e,n,r){let s=typeof e=="string"?ta(e):e,i=X_(s.pathname||"/",n);if(i==null)return null;let o=VR(t);B4(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=Z4(i);a=Y4(o[l],c)}return a}function VR(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(wt(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=bi([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(wt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),VR(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:G4(c,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of LR(i.path))s(i,o,l)}),e}function LR(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=LR(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function B4(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Q4(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const $4=/^:[\w-]+$/,z4=3,q4=2,H4=1,W4=10,K4=-2,eI=t=>t==="*";function G4(t,e){let n=t.split("/"),r=n.length;return n.some(eI)&&(r+=K4),e&&(r+=q4),n.filter(s=>!eI(s)).reduce((s,i)=>s+($4.test(i)?z4:i===""?H4:W4),r)}function Q4(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function Y4(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=X4({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),f=l.route;if(!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:bi([i,h.pathname]),pathnameBase:rU(bi([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=bi([i,h.pathnameBase]))}return o}function X4(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=J4(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,d,h)=>{let{paramName:f,isOptional:p}=d;if(f==="*"){let g=a[h]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const E=a[h];return p&&!E?c[f]=void 0:c[f]=(E||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function J4(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Y_(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function Z4(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Y_(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function X_(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function eU(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?ta(t):t;return{pathname:n?n.startsWith("/")?n:tU(n,e):e,search:sU(r),hash:iU(s)}}function tU(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function hg(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function nU(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function J_(t,e){let n=nU(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Z_(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=ta(t):(s=xu({},t),wt(!s.pathname||!s.pathname.includes("?"),hg("?","pathname","search",s)),wt(!s.pathname||!s.pathname.includes("#"),hg("#","pathname","hash",s)),wt(!s.search||!s.search.includes("#"),hg("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=eU(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const bi=t=>t.join("/").replace(/\/\/+/g,"/"),rU=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),sU=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,iU=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function oU(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const MR=["post","put","patch","delete"];new Set(MR);const aU=["get",...MR];new Set(aU);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pu(){return Pu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Pu.apply(this,arguments)}const ew=b.createContext(null),lU=b.createContext(null),Yi=b.createContext(null),Lp=b.createContext(null),Ns=b.createContext({outlet:null,matches:[],isDataRoute:!1}),FR=b.createContext(null);function cU(t,e){let{relative:n}=e===void 0?{}:e;Ol()||wt(!1);let{basename:r,navigator:s}=b.useContext(Yi),{hash:i,pathname:o,search:a}=jR(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:bi([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Ol(){return b.useContext(Lp)!=null}function rs(){return Ol()||wt(!1),b.useContext(Lp).location}function UR(t){b.useContext(Yi).static||b.useLayoutEffect(t)}function id(){let{isDataRoute:t}=b.useContext(Ns);return t?TU():uU()}function uU(){Ol()||wt(!1);let t=b.useContext(ew),{basename:e,future:n,navigator:r}=b.useContext(Yi),{matches:s}=b.useContext(Ns),{pathname:i}=rs(),o=JSON.stringify(J_(s,n.v7_relativeSplatPath)),a=b.useRef(!1);return UR(()=>{a.current=!0}),b.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=Z_(c,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:bi([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,i,t])}function g7(){let{matches:t}=b.useContext(Ns),e=t[t.length-1];return e?e.params:{}}function jR(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=b.useContext(Yi),{matches:s}=b.useContext(Ns),{pathname:i}=rs(),o=JSON.stringify(J_(s,r.v7_relativeSplatPath));return b.useMemo(()=>Z_(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function dU(t,e){return hU(t,e)}function hU(t,e,n,r){Ol()||wt(!1);let{navigator:s}=b.useContext(Yi),{matches:i}=b.useContext(Ns),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=rs(),d;if(e){var h;let v=typeof e=="string"?ta(e):e;l==="/"||(h=v.pathname)!=null&&h.startsWith(l)||wt(!1),d=v}else d=c;let f=d.pathname||"/",p=f;if(l!=="/"){let v=l.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(v.length).join("/")}let E=U4(t,{pathname:p}),g=yU(E&&E.map(v=>Object.assign({},v,{params:Object.assign({},a,v.params),pathname:bi([l,s.encodeLocation?s.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:bi([l,s.encodeLocation?s.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),i,n,r);return e&&g?b.createElement(Lp.Provider,{value:{location:Pu({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:pi.Pop}},g):g}function fU(){let t=EU(),e=oU(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),n?b.createElement("pre",{style:s},n):null,null)}const pU=b.createElement(fU,null);class mU extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?b.createElement(Ns.Provider,{value:this.props.routeContext},b.createElement(FR.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function gU(t){let{routeContext:e,match:n,children:r}=t,s=b.useContext(ew);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),b.createElement(Ns.Provider,{value:e},r)}function yU(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||wt(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:f,errors:p}=n,E=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||E){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let p,E=!1,g=null,v=null;n&&(p=a&&h.route.id?a[h.route.id]:void 0,g=h.route.errorElement||pU,l&&(c<0&&f===0?(IU("route-fallback"),E=!0,v=null):c===f&&(E=!0,v=h.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,f+1)),w=()=>{let T;return p?T=g:E?T=v:h.route.Component?T=b.createElement(h.route.Component,null):h.route.element?T=h.route.element:T=d,b.createElement(gU,{match:h,routeContext:{outlet:d,matches:_,isDataRoute:n!=null},children:T})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?b.createElement(mU,{location:n.location,revalidation:n.revalidation,component:g,error:p,children:w(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):w()},null)}var BR=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(BR||{}),$R=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}($R||{});function vU(t){let e=b.useContext(ew);return e||wt(!1),e}function _U(t){let e=b.useContext(lU);return e||wt(!1),e}function wU(t){let e=b.useContext(Ns);return e||wt(!1),e}function zR(t){let e=wU(),n=e.matches[e.matches.length-1];return n.route.id||wt(!1),n.route.id}function EU(){var t;let e=b.useContext(FR),n=_U(),r=zR();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function TU(){let{router:t}=vU(BR.UseNavigateStable),e=zR($R.UseNavigateStable),n=b.useRef(!1);return UR(()=>{n.current=!0}),b.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Pu({fromRouteId:e},i)))},[t,e])}const tI={};function IU(t,e,n){tI[t]||(tI[t]=!0)}function qR(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function y7(t){let{to:e,replace:n,state:r,relative:s}=t;Ol()||wt(!1);let{future:i,static:o}=b.useContext(Yi),{matches:a}=b.useContext(Ns),{pathname:l}=rs(),c=id(),d=Z_(e,J_(a,i.v7_relativeSplatPath),l,s==="path"),h=JSON.stringify(d);return b.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:s}),[c,h,s,n,r]),null}function se(t){wt(!1)}function HR(t){let{basename:e="/",children:n=null,location:r,navigationType:s=pi.Pop,navigator:i,static:o=!1,future:a}=t;Ol()&&wt(!1);let l=e.replace(/^\/*/,"/"),c=b.useMemo(()=>({basename:l,navigator:i,static:o,future:Pu({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=ta(r));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:E="default"}=r,g=b.useMemo(()=>{let v=X_(d,l);return v==null?null:{location:{pathname:v,search:h,hash:f,state:p,key:E},navigationType:s}},[l,d,h,f,p,E,s]);return g==null?null:b.createElement(Yi.Provider,{value:c},b.createElement(Lp.Provider,{children:n,value:g}))}function nI(t){let{children:e,location:n}=t;return dU(Hy(e),n)}new Promise(()=>{});function Hy(t,e){e===void 0&&(e=[]);let n=[];return b.Children.forEach(t,(r,s)=>{if(!b.isValidElement(r))return;let i=[...e,s];if(r.type===b.Fragment){n.push.apply(n,Hy(r.props.children,i));return}r.type!==se&&wt(!1),!r.props.index||!r.props.children||wt(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Hy(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wy(){return Wy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wy.apply(this,arguments)}function SU(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function bU(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function AU(t,e){return t.button===0&&(!e||e==="_self")&&!bU(t)}function Ky(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function xU(t,e){let n=Ky(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const RU=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],PU="6";try{window.__reactRouterVersion=PU}catch{}const CU="startTransition",Cf=sA[CU];function kU(t){let{basename:e,children:n,future:r,window:s}=t,i=b.useRef();i.current==null&&(i.current=L4({window:s,v5Compat:!0}));let o=i.current,[a,l]=b.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=b.useCallback(h=>{c&&Cf?Cf(()=>l(h)):l(h)},[l,c]);return b.useLayoutEffect(()=>o.listen(d),[o,d]),b.useEffect(()=>qR(r),[r]),b.createElement(HR,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}function DU(t){let{basename:e,children:n,future:r,window:s}=t,i=b.useRef();i.current==null&&(i.current=M4({window:s,v5Compat:!0}));let o=i.current,[a,l]=b.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=b.useCallback(h=>{c&&Cf?Cf(()=>l(h)):l(h)},[l,c]);return b.useLayoutEffect(()=>o.listen(d),[o,d]),b.useEffect(()=>qR(r),[r]),b.createElement(HR,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const NU=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",OU=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,VU=b.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:h}=e,f=SU(e,RU),{basename:p}=b.useContext(Yi),E,g=!1;if(typeof c=="string"&&OU.test(c)&&(E=c,NU))try{let T=new URL(window.location.href),k=c.startsWith("//")?new URL(T.protocol+c):new URL(c),O=X_(k.pathname,p);k.origin===T.origin&&O!=null?c=O+k.search+k.hash:g=!0}catch{}let v=cU(c,{relative:s}),_=LU(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:s,viewTransition:h});function w(T){r&&r(T),T.defaultPrevented||_(T)}return b.createElement("a",Wy({},f,{href:E||v,onClick:g||i?r:w,ref:n,target:l}))});var rI;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(rI||(rI={}));var sI;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(sI||(sI={}));function LU(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=id(),c=rs(),d=jR(t,{relative:o});return b.useCallback(h=>{if(AU(h,n)){h.preventDefault();let f=r!==void 0?r:Ru(c)===Ru(d);l(t,{replace:f,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,d,r,s,n,t,i,o,a])}function v7(t){let e=b.useRef(Ky(t)),n=b.useRef(!1),r=rs(),s=b.useMemo(()=>xU(r.search,n.current?null:e.current),[r.search]),i=id(),o=b.useCallback((a,l)=>{const c=Ky(typeof a=="function"?a(s):a);n.current=!0,i("?"+c,l)},[i,s]);return[s,o]}const WR=b.createContext(void 0),MU=({children:t})=>{const[e,n]=b.useState("medium"),[r,s]=b.useState(!1),[i,o]=b.useState(!1);b.useEffect(()=>{const l=()=>{const c=window.innerWidth<=768;s(c)};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]),b.useEffect(()=>{try{const l=!!window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron")||typeof window<"u"&&window.location&&window.location.protocol==="file:";o(l)}catch{o(!1)}},[]),b.useEffect(()=>{const l=["appFontSize","desktopFontSize","mobileFontSize"];for(const c of l){const d=localStorage.getItem(c);if(d&&["small","medium","large"].includes(d)){n(d);break}}},[]),b.useEffect(()=>{const l=document.documentElement;l.classList.remove("font-size-small","font-size-medium","font-size-large"),l.classList.add(`font-size-${e}`)},[e]);const a=l=>{n(l),localStorage.setItem("appFontSize",l),i&&localStorage.setItem("desktopFontSize",l)};return x.jsx(WR.Provider,{value:{fontSize:e,setFontSize:a,isMobile:r,isDesktopApp:i},children:t})},_7=()=>{const t=b.useContext(WR);if(t===void 0)throw new Error("useFontSize must be used within a FontSizeProvider");return t},FU=Mx("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),KR=b.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?WO:"button";return x.jsx(o,{className:Ds(FU({variant:e,size:n,className:t})),ref:i,...s})});KR.displayName="Button";const Gy=b.forwardRef(({className:t,type:e,...n},r)=>{const s={...n};return Object.prototype.hasOwnProperty.call(s,"value")&&s.value===void 0&&(s.value=""),x.jsx("input",{type:e,className:Ds("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...s})});Gy.displayName="Input";const UU=()=>{};var iI={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},jU=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},tw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=i>>2,h=(i&3)<<4|a>>4;let f=(a&15)<<2|c>>6,p=c&63;l||(p=64,o||(f=64)),r.push(n[d],n[h],n[f],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(GR(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):jU(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new BU;const f=i<<2|a>>4;if(r.push(f),c!==64){const p=a<<4&240|c>>2;if(r.push(p),h!==64){const E=c<<6&192|h;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class BU extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $U=function(t){const e=GR(t);return tw.encodeByteArray(e,!0)},kf=function(t){return $U(t).replace(/\./g,"")},QR=function(t){try{return tw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zU=()=>YR().__FIREBASE_DEFAULTS__,qU=()=>{if(typeof process>"u"||typeof iI>"u")return;const t=iI.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},HU=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&QR(t[1]);return e&&JSON.parse(e)},Mp=()=>{try{return UU()||zU()||qU()||HU()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},WU=t=>{var e,n;return(n=(e=Mp())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},XR=t=>{const e=WU(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},JR=()=>{var t;return(t=Mp())==null?void 0:t.config},KU=t=>{var e;return(e=Mp())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Os(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function nw(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GU(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[kf(JSON.stringify(n)),kf(JSON.stringify(o)),""].join(".")}const Kc={};function QU(){const t={prod:[],emulator:[]};for(const e of Object.keys(Kc))Kc[e]?t.emulator.push(e):t.prod.push(e);return t}function YU(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let oI=!1;function ZR(t,e){if(typeof window>"u"||typeof document>"u"||!Os(window.location.host)||Kc[t]===e||Kc[t]||oI)return;Kc[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",i=QU().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,p){f.setAttribute("width","24"),f.setAttribute("id",p),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function c(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{oI=!0,o()},f}function d(f,p){f.setAttribute("id",p),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){const f=YU(r),p=n("text"),E=document.getElementById(p)||document.createElement("span"),g=n("learnmore"),v=document.getElementById(g)||document.createElement("a"),_=n("preprendIcon"),w=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const T=f.element;a(T),d(v,g);const k=c();l(w,_),T.append(w,E,v,k),document.body.appendChild(T)}i?(E.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function XU(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wt())}function eP(){var e;const t=(e=Mp())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function JU(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ZU(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function e6(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function t6(){const t=Wt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function tP(){return!eP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nP(){return!eP()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function rw(){try{return typeof indexedDB=="object"}catch{return!1}}function n6(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r6="FirebaseError";class Rr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=r6,Object.setPrototypeOf(this,Rr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vl.prototype.create)}}class Vl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?s6(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Rr(s,a,r)}}function s6(t,e){return t.replace(i6,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const i6=/\{\$([^}]+)}/g;function al(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(aI(i)&&aI(o)){if(!al(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function aI(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rP(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Pc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Cc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function o6(t,e){const n=new a6(t,e);return n.subscribe.bind(n)}class a6{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");l6(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=fg),s.error===void 0&&(s.error=fg),s.complete===void 0&&(s.complete=fg);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function l6(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function fg(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w7=4*60*60*1e3;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(t){return t&&t._delegate?t._delegate:t}class Ar{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ho="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c6{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Qy;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(d6(e))try{this.getOrInitializeService({instanceIdentifier:ho})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ho){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ho){return this.instances.has(e)}getOptions(e=ho){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:u6(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ho){return this.component?this.component.multipleInstances?e:ho:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function u6(t){return t===ho?void 0:t}function d6(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h6{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new c6(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ce;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ce||(Ce={}));const f6={debug:Ce.DEBUG,verbose:Ce.VERBOSE,info:Ce.INFO,warn:Ce.WARN,error:Ce.ERROR,silent:Ce.SILENT},p6=Ce.INFO,m6={[Ce.DEBUG]:"log",[Ce.VERBOSE]:"log",[Ce.INFO]:"info",[Ce.WARN]:"warn",[Ce.ERROR]:"error"},g6=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=m6[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Fp{constructor(e){this.name=e,this._logLevel=p6,this._logHandler=g6,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?f6[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ce.DEBUG,...e),this._logHandler(this,Ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ce.VERBOSE,...e),this._logHandler(this,Ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ce.INFO,...e),this._logHandler(this,Ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ce.WARN,...e),this._logHandler(this,Ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ce.ERROR,...e),this._logHandler(this,Ce.ERROR,...e)}}const y6=(t,e)=>e.some(n=>t instanceof n);let lI,cI;function v6(){return lI||(lI=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _6(){return cI||(cI=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const sP=new WeakMap,Yy=new WeakMap,iP=new WeakMap,pg=new WeakMap,sw=new WeakMap;function w6(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Ai(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&sP.set(n,t)}).catch(()=>{}),sw.set(e,t),e}function E6(t){if(Yy.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Yy.set(t,e)}let Xy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Yy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||iP.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ai(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function T6(t){Xy=t(Xy)}function I6(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(mg(this),e,...n);return iP.set(r,e.sort?e.sort():[e]),Ai(r)}:_6().includes(t)?function(...e){return t.apply(mg(this),e),Ai(sP.get(this))}:function(...e){return Ai(t.apply(mg(this),e))}}function S6(t){return typeof t=="function"?I6(t):(t instanceof IDBTransaction&&E6(t),y6(t,v6())?new Proxy(t,Xy):t)}function Ai(t){if(t instanceof IDBRequest)return w6(t);if(pg.has(t))return pg.get(t);const e=S6(t);return e!==t&&(pg.set(t,e),sw.set(e,t)),e}const mg=t=>sw.get(t);function b6(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Ai(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ai(o.result),l.oldVersion,l.newVersion,Ai(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const A6=["get","getKey","getAll","getAllKeys","count"],x6=["put","add","delete","clear"],gg=new Map;function uI(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(gg.get(e))return gg.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=x6.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||A6.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return gg.set(e,i),i}T6(t=>({...t,get:(e,n,r)=>uI(e,n)||t.get(e,n,r),has:(e,n)=>!!uI(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(P6(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function P6(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Jy="@firebase/app",dI="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rs=new Fp("@firebase/app"),C6="@firebase/app-compat",k6="@firebase/analytics-compat",D6="@firebase/analytics",N6="@firebase/app-check-compat",O6="@firebase/app-check",V6="@firebase/auth",L6="@firebase/auth-compat",M6="@firebase/database",F6="@firebase/data-connect",U6="@firebase/database-compat",j6="@firebase/functions",B6="@firebase/functions-compat",$6="@firebase/installations",z6="@firebase/installations-compat",q6="@firebase/messaging",H6="@firebase/messaging-compat",W6="@firebase/performance",K6="@firebase/performance-compat",G6="@firebase/remote-config",Q6="@firebase/remote-config-compat",Y6="@firebase/storage",X6="@firebase/storage-compat",J6="@firebase/firestore",Z6="@firebase/ai",e3="@firebase/firestore-compat",t3="firebase",n3="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zy="[DEFAULT]",r3={[Jy]:"fire-core",[C6]:"fire-core-compat",[D6]:"fire-analytics",[k6]:"fire-analytics-compat",[O6]:"fire-app-check",[N6]:"fire-app-check-compat",[V6]:"fire-auth",[L6]:"fire-auth-compat",[M6]:"fire-rtdb",[F6]:"fire-data-connect",[U6]:"fire-rtdb-compat",[j6]:"fire-fn",[B6]:"fire-fn-compat",[$6]:"fire-iid",[z6]:"fire-iid-compat",[q6]:"fire-fcm",[H6]:"fire-fcm-compat",[W6]:"fire-perf",[K6]:"fire-perf-compat",[G6]:"fire-rc",[Q6]:"fire-rc-compat",[Y6]:"fire-gcs",[X6]:"fire-gcs-compat",[J6]:"fire-fst",[e3]:"fire-fst-compat",[Z6]:"fire-vertex","fire-js":"fire-js",[t3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Df=new Map,s3=new Map,ev=new Map;function hI(t,e){try{t.container.addComponent(e)}catch(n){Rs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function es(t){const e=t.name;if(ev.has(e))return Rs.debug(`There were multiple attempts to register component ${e}.`),!1;ev.set(e,t);for(const n of Df.values())hI(n,t);for(const n of s3.values())hI(n,t);return!0}function Up(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ln(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xi=new Vl("app","Firebase",i3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ar("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const od=n3;function oP(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Zy,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw xi.create("bad-app-name",{appName:String(s)});if(n||(n=JR()),!n)throw xi.create("no-options");const i=Df.get(s);if(i){if(al(n,i.options)&&al(r,i.config))return i;throw xi.create("duplicate-app",{appName:s})}const o=new h6(s);for(const l of ev.values())o.addComponent(l);const a=new o3(n,r,o);return Df.set(s,a),a}function aP(t=Zy){const e=Df.get(t);if(!e&&t===Zy&&JR())return oP();if(!e)throw xi.create("no-app",{appName:t});return e}function zn(t,e,n){let r=r3[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Rs.warn(o.join(" "));return}es(new Ar(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a3="firebase-heartbeat-database",l3=1,Cu="firebase-heartbeat-store";let yg=null;function lP(){return yg||(yg=b6(a3,l3,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Cu)}catch(n){console.warn(n)}}}}).catch(t=>{throw xi.create("idb-open",{originalErrorMessage:t.message})})),yg}async function c3(t){try{const n=(await lP()).transaction(Cu),r=await n.objectStore(Cu).get(cP(t));return await n.done,r}catch(e){if(e instanceof Rr)Rs.warn(e.message);else{const n=xi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Rs.warn(n.message)}}}async function fI(t,e){try{const r=(await lP()).transaction(Cu,"readwrite");await r.objectStore(Cu).put(e,cP(t)),await r.done}catch(n){if(n instanceof Rr)Rs.warn(n.message);else{const r=xi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Rs.warn(r.message)}}}function cP(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u3=1024,d3=30;class h3{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new p3(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=pI();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>d3){const o=m3(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Rs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=pI(),{heartbeatsToSend:r,unsentEntries:s}=f3(this._heartbeatsCache.heartbeats),i=kf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Rs.warn(n),""}}}function pI(){return new Date().toISOString().substring(0,10)}function f3(t,e=u3){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),mI(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),mI(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class p3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rw()?n6().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await c3(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return fI(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return fI(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function mI(t){return kf(JSON.stringify({version:2,heartbeats:t})).length}function m3(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g3(t){es(new Ar("platform-logger",e=>new R6(e),"PRIVATE")),es(new Ar("heartbeat",e=>new h3(e),"PRIVATE")),zn(Jy,dI,t),zn(Jy,dI,"esm2020"),zn("fire-js","")}g3("");function uP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const y3=uP,dP=new Vl("auth","Firebase",uP());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nf=new Fp("@firebase/auth");function v3(t,...e){Nf.logLevel<=Ce.WARN&&Nf.warn(`Auth (${od}): ${t}`,...e)}function Lh(t,...e){Nf.logLevel<=Ce.ERROR&&Nf.error(`Auth (${od}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ho(t,...e){throw ow(t,...e)}function iw(t,...e){return ow(t,...e)}function hP(t,e,n){const r={...y3(),[e]:n};return new Vl("auth","Firebase",r).create(e,{appName:t.name})}function Ri(t){return hP(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ow(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return dP.create(t,...e)}function ke(t,e,...n){if(!t)throw ow(e,...n)}function ps(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Lh(e),new Error(e)}function Of(t,e){t||ps(e)}function _3(){return gI()==="http:"||gI()==="https:"}function gI(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_3()||ZU()||"connection"in navigator)?navigator.onLine:!0}function E3(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e,n){this.shortDelay=e,this.longDelay=n,Of(n>e,"Short delay should be less than long delay!"),this.isMobile=XU()||e6()}get(){return w3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T3(t,e){Of(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ps("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ps("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ps("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S3=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],b3=new ad(3e4,6e4);function Xi(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Vs(t,e,n,r,s={}){return pP(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=rP({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:l,...i};return JU()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&Os(t.emulatorConfig.host)&&(c.credentials="include"),fP.fetch()(await mP(t,t.config.apiHost,n,a),c)})}async function pP(t,e,n){t._canInitEmulator=!1;const r={...I3,...e};try{const s=new x3(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw ih(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw ih(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw ih(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw ih(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw hP(t,d,c);Ho(t,d)}}catch(s){if(s instanceof Rr)throw s;Ho(t,"network-request-failed",{message:String(s)})}}async function jp(t,e,n,r,s={}){const i=await Vs(t,e,n,r,s);return"mfaPendingCredential"in i&&Ho(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function mP(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?T3(t.config,s):`${t.config.apiScheme}://${s}`;return S3.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function A3(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class x3{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(iw(this.auth,"network-request-failed")),b3.get())})}}function ih(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=iw(t,e,r);return s.customData._tokenResponse=n,s}function yI(t){return t!==void 0&&t.enterprise!==void 0}class R3{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return A3(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function P3(t,e){return Vs(t,"GET","/v2/recaptchaConfig",Xi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C3(t,e){return Vs(t,"POST","/v1/accounts:delete",e)}async function Vf(t,e){return Vs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function k3(t,e=!1){const n=He(t),r=await n.getIdToken(e),s=aw(r);ke(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Gc(vg(s.auth_time)),issuedAtTime:Gc(vg(s.iat)),expirationTime:Gc(vg(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function vg(t){return Number(t)*1e3}function aw(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Lh("JWT malformed, contained fewer than 3 sections"),null;try{const s=QR(n);return s?JSON.parse(s):(Lh("Failed to decode base64 JWT payload"),null)}catch(s){return Lh("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function vI(t){const e=aw(t);return ke(e,"internal-error"),ke(typeof e.exp<"u","internal-error"),ke(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ku(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Rr&&D3(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function D3({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gc(this.lastLoginAt),this.creationTime=Gc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lf(t){var h;const e=t.auth,n=await t.getIdToken(),r=await ku(t,Vf(e,{idToken:n}));ke(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(h=s.providerUserInfo)!=null&&h.length?gP(s.providerUserInfo):[],o=V3(t.providerData,i),a=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),c=a?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new tv(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,d)}async function O3(t){const e=He(t);await Lf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function V3(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function gP(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L3(t,e){const n=await pP(t,{},async()=>{const r=rP({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await mP(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&Os(t.emulatorConfig.host)&&(l.credentials="include"),fP.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function M3(t,e){return Vs(t,"POST","/v2/accounts:revokeToken",Xi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ke(e.idToken,"internal-error"),ke(typeof e.idToken<"u","internal-error"),ke(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):vI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ke(e.length!==0,"internal-error");const n=vI(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ke(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await L3(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Ba;return r&&(ke(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ke(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ke(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ba,this.toJSON())}_performRefresh(){return ps("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ys(t,e){ke(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class yr{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new N3(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new tv(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await ku(this,this.stsTokenManager.getToken(this.auth,e));return ke(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return k3(this,e)}reload(){return O3(this)}_assign(e){this!==e&&(ke(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new yr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Lf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ln(this.auth.app))return Promise.reject(Ri(this.auth));const e=await this.getIdToken();return await ku(this,C3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,c=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:h,emailVerified:f,isAnonymous:p,providerData:E,stsTokenManager:g}=n;ke(h&&g,e,"internal-error");const v=Ba.fromJSON(this.name,g);ke(typeof h=="string",e,"internal-error"),Ys(r,e.name),Ys(s,e.name),ke(typeof f=="boolean",e,"internal-error"),ke(typeof p=="boolean",e,"internal-error"),Ys(i,e.name),Ys(o,e.name),Ys(a,e.name),Ys(l,e.name),Ys(c,e.name),Ys(d,e.name);const _=new yr({uid:h,auth:e,email:s,emailVerified:f,displayName:r,isAnonymous:p,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:v,createdAt:c,lastLoginAt:d});return E&&Array.isArray(E)&&(_.providerData=E.map(w=>({...w}))),l&&(_._redirectEventId=l),_}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ba;s.updateFromServerResponse(n);const i=new yr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Lf(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ke(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?gP(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new Ba;a.updateFromIdToken(r);const l=new yr({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new tv(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I=new Map;function So(t){Of(t instanceof Function,"Expected a class definition");let e=_I.get(t);return e?(Of(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,_I.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}yP.type="NONE";const nv=yP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _g(t,e,n){return`firebase:${t}:${e}:${n}`}class $a{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=_g(this.userKey,s.apiKey,i),this.fullPersistenceKey=_g("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Vf(this.auth,{idToken:e}).catch(()=>{});return n?yr._fromGetAccountInfoResponse(this.auth,n,e):null}return yr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new $a(So(nv),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||So(nv);const o=_g(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){let h;if(typeof d=="string"){const f=await Vf(e,{idToken:d}).catch(()=>{});if(!f)break;h=await yr._fromGetAccountInfoResponse(e,f,d)}else h=yr._fromJSON(e,d);c!==i&&(a=h),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new $a(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new $a(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wI(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(vP(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(F3(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(wP(e))return"Blackberry";if(EP(e))return"Webos";if(U3(e))return"Safari";if((e.includes("chrome/")||j3(e))&&!e.includes("edge/"))return"Chrome";if(_P(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function F3(t=Wt()){return/firefox\//i.test(t)}function U3(t=Wt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function j3(t=Wt()){return/crios\//i.test(t)}function vP(t=Wt()){return/iemobile/i.test(t)}function _P(t=Wt()){return/android/i.test(t)}function wP(t=Wt()){return/blackberry/i.test(t)}function EP(t=Wt()){return/webos/i.test(t)}function B3(t=Wt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function $3(){return t6()&&document.documentMode===10}function z3(t=Wt()){return B3(t)||_P(t)||EP(t)||wP(t)||/windows phone/i.test(t)||vP(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TP(t,e=[]){let n;switch(t){case"Browser":n=wI(Wt());break;case"Worker":n=`${wI(Wt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${od}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H3(t,e={}){return Vs(t,"GET","/v2/passwordPolicy",Xi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W3=6;class K3{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??W3,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G3{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new EI(this),this.idTokenSubscription=new EI(this),this.beforeStateQueue=new q3(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=So(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await $a.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Vf(this,{idToken:e}),r=await yr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Ln(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ke(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Lf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=E3()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ln(this.app))return Promise.reject(Ri(this));const n=e?He(e):null;return n&&ke(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ke(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ln(this.app)?Promise.reject(Ri(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ln(this.app)?Promise.reject(Ri(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(So(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await H3(this),n=new K3(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Vl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await M3(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&So(e)||this._popupRedirectResolver;ke(n,this,"argument-error"),this.redirectPersistenceManager=await $a.create(this,[So(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ke(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=TP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Ln(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&v3(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Ll(t){return He(t)}class EI{constructor(e){this.auth=e,this.observer=null,this.addObserver=o6(n=>this.observer=n)}get next(){return ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lw={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Q3(t){lw=t}function Y3(t){return lw.loadJS(t)}function X3(){return lw.recaptchaEnterpriseScript}class J3{constructor(){this.enterprise=new Z3}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Z3{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const ej="recaptcha-enterprise",IP="NO_RECAPTCHA";class tj{constructor(e){this.type=ej,this.auth=Ll(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{P3(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new R3(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;yI(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(IP)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new J3().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&yI(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=X3();l.length!==0&&(l+=a),Y3(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function TI(t,e,n,r=!1,s=!1){const i=new tj(t);let o;if(s)o=IP;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Mf(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await TI(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await TI(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nj(t,e){const n=Up(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(al(i,e??{}))return s;Ho(s,"already-initialized")}return n.initialize({options:e})}function rj(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(So);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ps("not implemented")}_getIdTokenResponse(e){return ps("not implemented")}_linkToIdToken(e,n){return ps("not implemented")}_getReauthenticationResolver(e){return ps("not implemented")}}async function ij(t,e){return Vs(t,"POST","/v1/accounts:update",e)}async function oj(t,e){return Vs(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aj(t,e){return jp(t,"POST","/v1/accounts:signInWithPassword",Xi(t,e))}async function lj(t,e){return Vs(t,"POST","/v1/accounts:sendOobCode",Xi(t,e))}async function cj(t,e){return lj(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uj(t,e){return jp(t,"POST","/v1/accounts:signInWithEmailLink",Xi(t,e))}async function dj(t,e){return jp(t,"POST","/v1/accounts:signInWithEmailLink",Xi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du extends sj{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Du(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Du(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Mf(e,n,"signInWithPassword",aj);case"emailLink":return uj(e,{email:this._email,oobCode:this._password});default:Ho(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Mf(e,r,"signUpPassword",oj);case"emailLink":return dj(e,{idToken:n,email:this._email,oobCode:this._password});default:Ho(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hj(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function fj(t){const e=Pc(Cc(t)).link,n=e?Pc(Cc(e)).deep_link_id:null,r=Pc(Cc(t)).deep_link_id;return(r?Pc(Cc(r)).link:null)||r||n||e||t}class cw{constructor(e){const n=Pc(Cc(e)),r=n.apiKey??null,s=n.oobCode??null,i=hj(n.mode??null);ke(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=fj(e);try{return new cw(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(){this.providerId=Ml.PROVIDER_ID}static credential(e,n){return Du._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=cw.parseLink(n);return ke(r,"argument-error"),Du._fromEmailAndCode(e,r.code,r.tenantId)}}Ml.PROVIDER_ID="password";Ml.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ml.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pj(t,e){return jp(t,"POST","/v1/accounts:signUp",Xi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await yr._fromIdTokenResponse(e,r,s),o=II(r);return new ll({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=II(r);return new ll({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function II(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff extends Rr{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Ff.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Ff(e,n,r,s)}}function SP(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Ff._fromErrorAndOperation(t,i,e,r):i})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mj(t,e,n=!1){const{auth:r}=t;if(Ln(r.app))return Promise.reject(Ri(r));const s="reauthenticate";try{const i=await ku(t,SP(r,s,e,t),n);ke(i.idToken,r,"internal-error");const o=aw(i.idToken);ke(o,r,"internal-error");const{sub:a}=o;return ke(t.uid===a,r,"user-mismatch"),ll._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Ho(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gj(t,e,n=!1){if(Ln(t.app))return Promise.reject(Ri(t));const r="signIn",s=await SP(t,r,e),i=await ll._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function yj(t,e){return gj(Ll(t),e)}async function E7(t,e){return mj(He(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bP(t){const e=Ll(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function vj(t,e,n){const r=Ll(t);await Mf(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",cj)}async function SI(t,e,n){if(Ln(t.app))return Promise.reject(Ri(t));const r=Ll(t),o=await Mf(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",pj).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&bP(t),l}),a=await ll._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function _j(t,e,n){return Ln(t.app)?Promise.reject(Ri(t)):yj(He(t),Ml.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&bP(t),r})}function T7(t,e){return wj(He(t),null,e)}async function wj(t,e,n){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(i.password=n);const o=await ku(t,ij(r,i));await t._updateTokensIfNecessary(o,!0)}function Ej(t,e,n,r){return He(t).onAuthStateChanged(e,n,r)}function bI(t){return He(t).signOut()}const AI="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(AI,"1"),this.storage.removeItem(AI),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tj=1e3,Ij=10;class xP extends AP{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=z3(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);$3()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Ij):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Tj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}xP.type="LOCAL";const Sj=xP;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj extends AP{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}bj.type="SESSION";new ad(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new ad(2e3,1e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new ad(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new ad(5e3,15e3);var xI="@firebase/auth",RI="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xj(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Rj(t){es(new Ar("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ke(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:TP(t)},c=new G3(r,s,i,l);return rj(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),es(new Ar("auth-internal",e=>{const n=Ll(e.getProvider("auth").getImmediate());return(r=>new Aj(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),zn(xI,RI,xj(t)),zn(xI,RI,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pj=5*60;KU("authIdTokenMaxAge");function Cj(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}Q3({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=iw("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",Cj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Rj("Browser");var kj="firebase",Dj="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zn(kj,Dj,"app");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nj=new Map,Oj={activated:!1,tokenObservers:[]},Vj={initialized:!1,enabled:!1};function xr(t){return Nj.get(t)||{...Oj}}function RP(){return Vj}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lj="https://content-firebaseappcheck.googleapis.com/v1";const Mj="exchangeDebugToken",PI={RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},I7=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj{constructor(e,n,r,s,i){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=s,s>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new Qy,this.pending.promise.catch(n=>{}),await Uj(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new Qy,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function Uj(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jj={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},mi=new Vl("appCheck","AppCheck",jj);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PP(t){if(!xr(t).activated)throw mi.create("use-before-activation",{appName:t.name})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CP({url:t,body:e},n){const r={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){const h=await s.getHeartbeatsHeader();h&&(r["X-Firebase-Client"]=h)}const i={method:"POST",body:JSON.stringify(e),headers:r};let o;try{o=await fetch(t,i)}catch(h){throw mi.create("fetch-network-error",{originalErrorMessage:h==null?void 0:h.message})}if(o.status!==200)throw mi.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(h){throw mi.create("fetch-parse-error",{originalErrorMessage:h==null?void 0:h.message})}const l=a.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw mi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const c=Number(l[1])*1e3,d=Date.now();return{token:a.token,expireTimeMillis:d+c,issuedAtTimeMillis:d}}function kP(t,e){const{projectId:n,appId:r,apiKey:s}=t.options;return{url:`${Lj}/projects/${n}/apps/${r}:${Mj}?key=${s}`,body:{debug_token:e}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bj="firebase-app-check-database",$j=1,rv="firebase-app-check-store";let oh=null;function zj(){return oh||(oh=new Promise((t,e)=>{try{const n=indexedDB.open(Bj,$j);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var s;e(mi.create("storage-open",{originalErrorMessage:(s=r.target.error)==null?void 0:s.message}))},n.onupgradeneeded=r=>{const s=r.target.result;switch(r.oldVersion){case 0:s.createObjectStore(rv,{keyPath:"compositeKey"})}}}catch(n){e(mi.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),oh)}function qj(t,e){return Hj(Wj(t),e)}async function Hj(t,e){const r=(await zj()).transaction(rv,"readwrite"),i=r.objectStore(rv).put({compositeKey:t,value:e});return new Promise((o,a)=>{i.onsuccess=l=>{o()},r.onerror=l=>{var c;a(mi.create("storage-set",{originalErrorMessage:(c=l.target.error)==null?void 0:c.message}))}})}function Wj(t){return`${t.options.appId}-${t.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kc=new Fp("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wg(t,e){return rw()?qj(t,e).catch(n=>{kc.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DP(){return RP().enabled}async function NP(){const t=RP();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kj={error:"UNKNOWN_ERROR"};function Gj(t){return tw.encodeString(JSON.stringify(t),!1)}async function sv(t,e=!1,n=!1){const r=t.app;PP(r);const s=xr(r);let i=s.token,o;if(i&&!Dc(i)&&(s.token=void 0,i=void 0),!i){const c=await s.cachedTokenPromise;c&&(Dc(c)?i=c:await wg(r,void 0))}if(!e&&i&&Dc(i))return{token:i.token};let a=!1;if(DP())try{s.exchangeTokenPromise||(s.exchangeTokenPromise=CP(kP(r,await NP()),t.heartbeatServiceProvider).finally(()=>{s.exchangeTokenPromise=void 0}),a=!0);const c=await s.exchangeTokenPromise;return await wg(r,c),s.token=c,{token:c.token}}catch(c){return c.code==="appCheck/throttled"||c.code==="appCheck/initial-throttle"?kc.warn(c.message):n&&kc.error(c),Eg(c)}try{s.exchangeTokenPromise||(s.exchangeTokenPromise=s.provider.getToken().finally(()=>{s.exchangeTokenPromise=void 0}),a=!0),i=await xr(r).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"||c.code==="appCheck/initial-throttle"?kc.warn(c.message):n&&kc.error(c),o=c}let l;return i?o?Dc(i)?l={token:i.token,internalError:o}:l=Eg(o):(l={token:i.token},s.token=i,await wg(r,i)):l=Eg(o),a&&Jj(r,l),l}async function Qj(t){const e=t.app;PP(e);const{provider:n}=xr(e);if(DP()){const r=await NP(),{token:s}=await CP(kP(e,r),t.heartbeatServiceProvider);return{token:s}}else{const{token:r}=await n.getToken();return{token:r}}}function Yj(t,e,n,r){const{app:s}=t,i=xr(s),o={next:n,error:r,type:e};if(i.tokenObservers=[...i.tokenObservers,o],i.token&&Dc(i.token)){const a=i.token;Promise.resolve().then(()=>{n({token:a.token}),CI(t)}).catch(()=>{})}i.cachedTokenPromise.then(()=>CI(t))}function OP(t,e){const n=xr(t),r=n.tokenObservers.filter(s=>s.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function CI(t){const{app:e}=t,n=xr(e);let r=n.tokenRefresher;r||(r=Xj(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function Xj(t){const{app:e}=t;return new Fj(async()=>{const n=xr(e);let r;if(n.token?r=await sv(t,!0):r=await sv(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=xr(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const s=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,s),Math.max(0,r-Date.now())}else return 0},PI.RETRIAL_MIN_WAIT,PI.RETRIAL_MAX_WAIT)}function Jj(t,e){const n=xr(t).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Dc(t){return t.expireTimeMillis-Date.now()>0}function Eg(t){return{token:Gj(Kj),error:t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=xr(this.app);for(const n of e)OP(this.app,n.next);return Promise.resolve()}}function e5(t,e){return new Zj(t,e)}function t5(t){return{getToken:e=>sv(t,e),getLimitedUseToken:()=>Qj(t),addTokenListener:e=>Yj(t,"INTERNAL",e),removeTokenListener:e=>OP(t.app,e)}}const n5="@firebase/app-check",r5="0.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s5="app-check",kI="app-check-internal";function i5(){es(new Ar(s5,t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return e5(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(kI).initialize()})),es(new Ar(kI,t=>{const e=t.getProvider("app-check").getImmediate();return t5(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),zn(n5,r5)}i5();var DI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Pi,VP;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,I){function A(){}A.prototype=I.prototype,S.F=I.prototype,S.prototype=new A,S.prototype.constructor=S,S.D=function(D,R,N){for(var C=Array(arguments.length-2),q=2;q<arguments.length;q++)C[q-2]=arguments[q];return I.prototype[R].apply(D,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,I,A){A||(A=0);const D=Array(16);if(typeof I=="string")for(var R=0;R<16;++R)D[R]=I.charCodeAt(A++)|I.charCodeAt(A++)<<8|I.charCodeAt(A++)<<16|I.charCodeAt(A++)<<24;else for(R=0;R<16;++R)D[R]=I[A++]|I[A++]<<8|I[A++]<<16|I[A++]<<24;I=S.g[0],A=S.g[1],R=S.g[2];let N=S.g[3],C;C=I+(N^A&(R^N))+D[0]+3614090360&4294967295,I=A+(C<<7&4294967295|C>>>25),C=N+(R^I&(A^R))+D[1]+3905402710&4294967295,N=I+(C<<12&4294967295|C>>>20),C=R+(A^N&(I^A))+D[2]+606105819&4294967295,R=N+(C<<17&4294967295|C>>>15),C=A+(I^R&(N^I))+D[3]+3250441966&4294967295,A=R+(C<<22&4294967295|C>>>10),C=I+(N^A&(R^N))+D[4]+4118548399&4294967295,I=A+(C<<7&4294967295|C>>>25),C=N+(R^I&(A^R))+D[5]+1200080426&4294967295,N=I+(C<<12&4294967295|C>>>20),C=R+(A^N&(I^A))+D[6]+2821735955&4294967295,R=N+(C<<17&4294967295|C>>>15),C=A+(I^R&(N^I))+D[7]+4249261313&4294967295,A=R+(C<<22&4294967295|C>>>10),C=I+(N^A&(R^N))+D[8]+1770035416&4294967295,I=A+(C<<7&4294967295|C>>>25),C=N+(R^I&(A^R))+D[9]+2336552879&4294967295,N=I+(C<<12&4294967295|C>>>20),C=R+(A^N&(I^A))+D[10]+4294925233&4294967295,R=N+(C<<17&4294967295|C>>>15),C=A+(I^R&(N^I))+D[11]+2304563134&4294967295,A=R+(C<<22&4294967295|C>>>10),C=I+(N^A&(R^N))+D[12]+1804603682&4294967295,I=A+(C<<7&4294967295|C>>>25),C=N+(R^I&(A^R))+D[13]+4254626195&4294967295,N=I+(C<<12&4294967295|C>>>20),C=R+(A^N&(I^A))+D[14]+2792965006&4294967295,R=N+(C<<17&4294967295|C>>>15),C=A+(I^R&(N^I))+D[15]+1236535329&4294967295,A=R+(C<<22&4294967295|C>>>10),C=I+(R^N&(A^R))+D[1]+4129170786&4294967295,I=A+(C<<5&4294967295|C>>>27),C=N+(A^R&(I^A))+D[6]+3225465664&4294967295,N=I+(C<<9&4294967295|C>>>23),C=R+(I^A&(N^I))+D[11]+643717713&4294967295,R=N+(C<<14&4294967295|C>>>18),C=A+(N^I&(R^N))+D[0]+3921069994&4294967295,A=R+(C<<20&4294967295|C>>>12),C=I+(R^N&(A^R))+D[5]+3593408605&4294967295,I=A+(C<<5&4294967295|C>>>27),C=N+(A^R&(I^A))+D[10]+38016083&4294967295,N=I+(C<<9&4294967295|C>>>23),C=R+(I^A&(N^I))+D[15]+3634488961&4294967295,R=N+(C<<14&4294967295|C>>>18),C=A+(N^I&(R^N))+D[4]+3889429448&4294967295,A=R+(C<<20&4294967295|C>>>12),C=I+(R^N&(A^R))+D[9]+568446438&4294967295,I=A+(C<<5&4294967295|C>>>27),C=N+(A^R&(I^A))+D[14]+3275163606&4294967295,N=I+(C<<9&4294967295|C>>>23),C=R+(I^A&(N^I))+D[3]+4107603335&4294967295,R=N+(C<<14&4294967295|C>>>18),C=A+(N^I&(R^N))+D[8]+1163531501&4294967295,A=R+(C<<20&4294967295|C>>>12),C=I+(R^N&(A^R))+D[13]+2850285829&4294967295,I=A+(C<<5&4294967295|C>>>27),C=N+(A^R&(I^A))+D[2]+4243563512&4294967295,N=I+(C<<9&4294967295|C>>>23),C=R+(I^A&(N^I))+D[7]+1735328473&4294967295,R=N+(C<<14&4294967295|C>>>18),C=A+(N^I&(R^N))+D[12]+2368359562&4294967295,A=R+(C<<20&4294967295|C>>>12),C=I+(A^R^N)+D[5]+4294588738&4294967295,I=A+(C<<4&4294967295|C>>>28),C=N+(I^A^R)+D[8]+2272392833&4294967295,N=I+(C<<11&4294967295|C>>>21),C=R+(N^I^A)+D[11]+1839030562&4294967295,R=N+(C<<16&4294967295|C>>>16),C=A+(R^N^I)+D[14]+4259657740&4294967295,A=R+(C<<23&4294967295|C>>>9),C=I+(A^R^N)+D[1]+2763975236&4294967295,I=A+(C<<4&4294967295|C>>>28),C=N+(I^A^R)+D[4]+1272893353&4294967295,N=I+(C<<11&4294967295|C>>>21),C=R+(N^I^A)+D[7]+4139469664&4294967295,R=N+(C<<16&4294967295|C>>>16),C=A+(R^N^I)+D[10]+3200236656&4294967295,A=R+(C<<23&4294967295|C>>>9),C=I+(A^R^N)+D[13]+681279174&4294967295,I=A+(C<<4&4294967295|C>>>28),C=N+(I^A^R)+D[0]+3936430074&4294967295,N=I+(C<<11&4294967295|C>>>21),C=R+(N^I^A)+D[3]+3572445317&4294967295,R=N+(C<<16&4294967295|C>>>16),C=A+(R^N^I)+D[6]+76029189&4294967295,A=R+(C<<23&4294967295|C>>>9),C=I+(A^R^N)+D[9]+3654602809&4294967295,I=A+(C<<4&4294967295|C>>>28),C=N+(I^A^R)+D[12]+3873151461&4294967295,N=I+(C<<11&4294967295|C>>>21),C=R+(N^I^A)+D[15]+530742520&4294967295,R=N+(C<<16&4294967295|C>>>16),C=A+(R^N^I)+D[2]+3299628645&4294967295,A=R+(C<<23&4294967295|C>>>9),C=I+(R^(A|~N))+D[0]+4096336452&4294967295,I=A+(C<<6&4294967295|C>>>26),C=N+(A^(I|~R))+D[7]+1126891415&4294967295,N=I+(C<<10&4294967295|C>>>22),C=R+(I^(N|~A))+D[14]+2878612391&4294967295,R=N+(C<<15&4294967295|C>>>17),C=A+(N^(R|~I))+D[5]+4237533241&4294967295,A=R+(C<<21&4294967295|C>>>11),C=I+(R^(A|~N))+D[12]+1700485571&4294967295,I=A+(C<<6&4294967295|C>>>26),C=N+(A^(I|~R))+D[3]+2399980690&4294967295,N=I+(C<<10&4294967295|C>>>22),C=R+(I^(N|~A))+D[10]+4293915773&4294967295,R=N+(C<<15&4294967295|C>>>17),C=A+(N^(R|~I))+D[1]+2240044497&4294967295,A=R+(C<<21&4294967295|C>>>11),C=I+(R^(A|~N))+D[8]+1873313359&4294967295,I=A+(C<<6&4294967295|C>>>26),C=N+(A^(I|~R))+D[15]+4264355552&4294967295,N=I+(C<<10&4294967295|C>>>22),C=R+(I^(N|~A))+D[6]+2734768916&4294967295,R=N+(C<<15&4294967295|C>>>17),C=A+(N^(R|~I))+D[13]+1309151649&4294967295,A=R+(C<<21&4294967295|C>>>11),C=I+(R^(A|~N))+D[4]+4149444226&4294967295,I=A+(C<<6&4294967295|C>>>26),C=N+(A^(I|~R))+D[11]+3174756917&4294967295,N=I+(C<<10&4294967295|C>>>22),C=R+(I^(N|~A))+D[2]+718787259&4294967295,R=N+(C<<15&4294967295|C>>>17),C=A+(N^(R|~I))+D[9]+3951481745&4294967295,S.g[0]=S.g[0]+I&4294967295,S.g[1]=S.g[1]+(R+(C<<21&4294967295|C>>>11))&4294967295,S.g[2]=S.g[2]+R&4294967295,S.g[3]=S.g[3]+N&4294967295}r.prototype.v=function(S,I){I===void 0&&(I=S.length);const A=I-this.blockSize,D=this.C;let R=this.h,N=0;for(;N<I;){if(R==0)for(;N<=A;)s(this,S,N),N+=this.blockSize;if(typeof S=="string"){for(;N<I;)if(D[R++]=S.charCodeAt(N++),R==this.blockSize){s(this,D),R=0;break}}else for(;N<I;)if(D[R++]=S[N++],R==this.blockSize){s(this,D),R=0;break}}this.h=R,this.o+=I},r.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var I=1;I<S.length-8;++I)S[I]=0;I=this.o*8;for(var A=S.length-8;A<S.length;++A)S[A]=I&255,I/=256;for(this.v(S),S=Array(16),I=0,A=0;A<4;++A)for(let D=0;D<32;D+=8)S[I++]=this.g[A]>>>D&255;return S};function i(S,I){var A=a;return Object.prototype.hasOwnProperty.call(A,S)?A[S]:A[S]=I(S)}function o(S,I){this.h=I;const A=[];let D=!0;for(let R=S.length-1;R>=0;R--){const N=S[R]|0;D&&N==I||(A[R]=N,D=!1)}this.g=A}var a={};function l(S){return-128<=S&&S<128?i(S,function(I){return new o([I|0],I<0?-1:0)}):new o([S|0],S<0?-1:0)}function c(S){if(isNaN(S)||!isFinite(S))return h;if(S<0)return v(c(-S));const I=[];let A=1;for(let D=0;S>=A;D++)I[D]=S/A|0,A*=4294967296;return new o(I,0)}function d(S,I){if(S.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(S.charAt(0)=="-")return v(d(S.substring(1),I));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=c(Math.pow(I,8));let D=h;for(let N=0;N<S.length;N+=8){var R=Math.min(8,S.length-N);const C=parseInt(S.substring(N,N+R),I);R<8?(R=c(Math.pow(I,R)),D=D.j(R).add(c(C))):(D=D.j(A),D=D.add(c(C)))}return D}var h=l(0),f=l(1),p=l(16777216);t=o.prototype,t.m=function(){if(g(this))return-v(this).m();let S=0,I=1;for(let A=0;A<this.g.length;A++){const D=this.i(A);S+=(D>=0?D:4294967296+D)*I,I*=4294967296}return S},t.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(E(this))return"0";if(g(this))return"-"+v(this).toString(S);const I=c(Math.pow(S,6));var A=this;let D="";for(;;){const R=k(A,I).g;A=_(A,R.j(I));let N=((A.g.length>0?A.g[0]:A.h)>>>0).toString(S);if(A=R,E(A))return N+D;for(;N.length<6;)N="0"+N;D=N+D}},t.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function E(S){if(S.h!=0)return!1;for(let I=0;I<S.g.length;I++)if(S.g[I]!=0)return!1;return!0}function g(S){return S.h==-1}t.l=function(S){return S=_(this,S),g(S)?-1:E(S)?0:1};function v(S){const I=S.g.length,A=[];for(let D=0;D<I;D++)A[D]=~S.g[D];return new o(A,~S.h).add(f)}t.abs=function(){return g(this)?v(this):this},t.add=function(S){const I=Math.max(this.g.length,S.g.length),A=[];let D=0;for(let R=0;R<=I;R++){let N=D+(this.i(R)&65535)+(S.i(R)&65535),C=(N>>>16)+(this.i(R)>>>16)+(S.i(R)>>>16);D=C>>>16,N&=65535,C&=65535,A[R]=C<<16|N}return new o(A,A[A.length-1]&-2147483648?-1:0)};function _(S,I){return S.add(v(I))}t.j=function(S){if(E(this)||E(S))return h;if(g(this))return g(S)?v(this).j(v(S)):v(v(this).j(S));if(g(S))return v(this.j(v(S)));if(this.l(p)<0&&S.l(p)<0)return c(this.m()*S.m());const I=this.g.length+S.g.length,A=[];for(var D=0;D<2*I;D++)A[D]=0;for(D=0;D<this.g.length;D++)for(let R=0;R<S.g.length;R++){const N=this.i(D)>>>16,C=this.i(D)&65535,q=S.i(R)>>>16,Z=S.i(R)&65535;A[2*D+2*R]+=C*Z,w(A,2*D+2*R),A[2*D+2*R+1]+=N*Z,w(A,2*D+2*R+1),A[2*D+2*R+1]+=C*q,w(A,2*D+2*R+1),A[2*D+2*R+2]+=N*q,w(A,2*D+2*R+2)}for(S=0;S<I;S++)A[S]=A[2*S+1]<<16|A[2*S];for(S=I;S<2*I;S++)A[S]=0;return new o(A,0)};function w(S,I){for(;(S[I]&65535)!=S[I];)S[I+1]+=S[I]>>>16,S[I]&=65535,I++}function T(S,I){this.g=S,this.h=I}function k(S,I){if(E(I))throw Error("division by zero");if(E(S))return new T(h,h);if(g(S))return I=k(v(S),I),new T(v(I.g),v(I.h));if(g(I))return I=k(S,v(I)),new T(v(I.g),I.h);if(S.g.length>30){if(g(S)||g(I))throw Error("slowDivide_ only works with positive integers.");for(var A=f,D=I;D.l(S)<=0;)A=O(A),D=O(D);var R=V(A,1),N=V(D,1);for(D=V(D,2),A=V(A,2);!E(D);){var C=N.add(D);C.l(S)<=0&&(R=R.add(A),N=C),D=V(D,1),A=V(A,1)}return I=_(S,R.j(I)),new T(R,I)}for(R=h;S.l(I)>=0;){for(A=Math.max(1,Math.floor(S.m()/I.m())),D=Math.ceil(Math.log(A)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),N=c(A),C=N.j(I);g(C)||C.l(S)>0;)A-=D,N=c(A),C=N.j(I);E(N)&&(N=f),R=R.add(N),S=_(S,C)}return new T(R,S)}t.B=function(S){return k(this,S).h},t.and=function(S){const I=Math.max(this.g.length,S.g.length),A=[];for(let D=0;D<I;D++)A[D]=this.i(D)&S.i(D);return new o(A,this.h&S.h)},t.or=function(S){const I=Math.max(this.g.length,S.g.length),A=[];for(let D=0;D<I;D++)A[D]=this.i(D)|S.i(D);return new o(A,this.h|S.h)},t.xor=function(S){const I=Math.max(this.g.length,S.g.length),A=[];for(let D=0;D<I;D++)A[D]=this.i(D)^S.i(D);return new o(A,this.h^S.h)};function O(S){const I=S.g.length+1,A=[];for(let D=0;D<I;D++)A[D]=S.i(D)<<1|S.i(D-1)>>>31;return new o(A,S.h)}function V(S,I){const A=I>>5;I%=32;const D=S.g.length-A,R=[];for(let N=0;N<D;N++)R[N]=I>0?S.i(N+A)>>>I|S.i(N+A+1)<<32-I:S.i(N+A);return new o(R,S.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,VP=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,Pi=o}).apply(typeof DI<"u"?DI:typeof self<"u"?self:typeof window<"u"?window:{});var ah=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var LP,Nc,MP,Mh,iv,FP,UP,jP;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof ah=="object"&&ah];for(var m=0;m<u.length;++m){var y=u[m];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=n(this);function s(u,m){if(m)e:{var y=r;u=u.split(".");for(var P=0;P<u.length-1;P++){var M=u[P];if(!(M in y))break e;y=y[M]}u=u[u.length-1],P=y[u],m=m(P),m!=P&&m!=null&&e(y,u,{configurable:!0,writable:!0,value:m})}}s("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(u){return u||function(m){var y=[],P;for(P in m)Object.prototype.hasOwnProperty.call(m,P)&&y.push([P,m[P]]);return y}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function l(u,m,y){return u.call.apply(u.bind,arguments)}function c(u,m,y){return c=l,c.apply(null,arguments)}function d(u,m){var y=Array.prototype.slice.call(arguments,1);return function(){var P=y.slice();return P.push.apply(P,arguments),u.apply(this,P)}}function h(u,m){function y(){}y.prototype=m.prototype,u.Z=m.prototype,u.prototype=new y,u.prototype.constructor=u,u.Ob=function(P,M,j){for(var X=Array(arguments.length-2),Se=2;Se<arguments.length;Se++)X[Se-2]=arguments[Se];return m.prototype[M].apply(P,X)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function p(u){const m=u.length;if(m>0){const y=Array(m);for(let P=0;P<m;P++)y[P]=u[P];return y}return[]}function E(u,m){for(let P=1;P<arguments.length;P++){const M=arguments[P];var y=typeof M;if(y=y!="object"?y:M?Array.isArray(M)?"array":y:"null",y=="array"||y=="object"&&typeof M.length=="number"){y=u.length||0;const j=M.length||0;u.length=y+j;for(let X=0;X<j;X++)u[y+X]=M[X]}else u.push(M)}}class g{constructor(m,y){this.i=m,this.j=y,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function v(u){o.setTimeout(()=>{throw u},0)}function _(){var u=S;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class w{constructor(){this.h=this.g=null}add(m,y){const P=T.get();P.set(m,y),this.h?this.h.next=P:this.g=P,this.h=P}}var T=new g(()=>new k,u=>u.reset());class k{constructor(){this.next=this.g=this.h=null}set(m,y){this.h=m,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let O,V=!1,S=new w,I=()=>{const u=Promise.resolve(void 0);O=()=>{u.then(A)}};function A(){for(var u;u=_();){try{u.h.call(u.g)}catch(y){v(y)}var m=T;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}V=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function R(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}R.prototype.h=function(){this.defaultPrevented=!0};var N=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const y=()=>{};o.addEventListener("test",y,m),o.removeEventListener("test",y,m)}catch{}return u}();function C(u){return/^[\s\xa0]*$/.test(u)}function q(u,m){R.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}h(q,R),q.prototype.init=function(u,m){const y=this.type=u.type,P=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(y=="mouseover"?m=u.fromElement:y=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&q.Z.h.call(this)},q.prototype.h=function(){q.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Z="closure_listenable_"+(Math.random()*1e6|0),ie=0;function Q(u,m,y,P,M){this.listener=u,this.proxy=null,this.src=m,this.type=y,this.capture=!!P,this.ha=M,this.key=++ie,this.da=this.fa=!1}function F(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function U(u,m,y){for(const P in u)m.call(y,u[P],P,u)}function Y(u,m){for(const y in u)m.call(void 0,u[y],y,u)}function de(u){const m={};for(const y in u)m[y]=u[y];return m}const ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ce(u,m){let y,P;for(let M=1;M<arguments.length;M++){P=arguments[M];for(y in P)u[y]=P[y];for(let j=0;j<ne.length;j++)y=ne[j],Object.prototype.hasOwnProperty.call(P,y)&&(u[y]=P[y])}}function le(u){this.src=u,this.g={},this.h=0}le.prototype.add=function(u,m,y,P,M){const j=u.toString();u=this.g[j],u||(u=this.g[j]=[],this.h++);const X=Qe(u,m,P,M);return X>-1?(m=u[X],y||(m.fa=!1)):(m=new Q(m,this.src,j,!!P,M),m.fa=y,u.push(m)),m};function Ie(u,m){const y=m.type;if(y in u.g){var P=u.g[y],M=Array.prototype.indexOf.call(P,m,void 0),j;(j=M>=0)&&Array.prototype.splice.call(P,M,1),j&&(F(m),u.g[y].length==0&&(delete u.g[y],u.h--))}}function Qe(u,m,y,P){for(let M=0;M<u.length;++M){const j=u[M];if(!j.da&&j.listener==m&&j.capture==!!y&&j.ha==P)return M}return-1}var ae="closure_lm_"+(Math.random()*1e6|0),ye={};function Re(u,m,y,P,M){if(Array.isArray(m)){for(let j=0;j<m.length;j++)Re(u,m[j],y,P,M);return null}return y=Us(y),u&&u[Z]?u.J(m,y,a(P)?!!P.capture:!1,M):Tt(u,m,y,!1,P,M)}function Tt(u,m,y,P,M,j){if(!m)throw Error("Invalid event type");const X=a(M)?!!M.capture:!!M;let Se=ve(u);if(Se||(u[ae]=Se=new le(u)),y=Se.add(m,y,P,X,j),y.proxy)return y;if(P=Nt(),y.proxy=P,P.src=u,P.listener=y,u.addEventListener)N||(M=X),M===void 0&&(M=!1),u.addEventListener(m.toString(),P,M);else if(u.attachEvent)u.attachEvent(yn(m.toString()),P);else if(u.addListener&&u.removeListener)u.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Nt(){function u(y){return m.call(u.src,u.listener,y)}const m=Cr;return u}function Kt(u,m,y,P,M){if(Array.isArray(m))for(var j=0;j<m.length;j++)Kt(u,m[j],y,P,M);else P=a(P)?!!P.capture:!!P,y=Us(y),u&&u[Z]?(u=u.i,j=String(m).toString(),j in u.g&&(m=u.g[j],y=Qe(m,y,P,M),y>-1&&(F(m[y]),Array.prototype.splice.call(m,y,1),m.length==0&&(delete u.g[j],u.h--)))):u&&(u=ve(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Qe(m,y,P,M)),(y=u>-1?m[u]:null)&&Bt(y))}function Bt(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Z])Ie(m.i,u);else{var y=u.type,P=u.proxy;m.removeEventListener?m.removeEventListener(y,P,u.capture):m.detachEvent?m.detachEvent(yn(y),P):m.addListener&&m.removeListener&&m.removeListener(P),(y=ve(m))?(Ie(y,u),y.h==0&&(y.src=null,m[ae]=null)):F(u)}}}function yn(u){return u in ye?ye[u]:ye[u]="on"+u}function Cr(u,m){if(u.da)u=!0;else{m=new q(m,this);const y=u.listener,P=u.ha||u.src;u.fa&&Bt(u),u=y.call(P,m)}return u}function ve(u){return u=u[ae],u instanceof le?u:null}var Qn="__closure_events_fn_"+(Math.random()*1e9>>>0);function Us(u){return typeof u=="function"?u:(u[Qn]||(u[Qn]=function(m){return u.handleEvent(m)}),u[Qn])}function at(){D.call(this),this.i=new le(this),this.M=this,this.G=null}h(at,D),at.prototype[Z]=!0,at.prototype.removeEventListener=function(u,m,y,P){Kt(this,u,m,y,P)};function Ot(u,m){var y,P=u.G;if(P)for(y=[];P;P=P.G)y.push(P);if(u=u.M,P=m.type||m,typeof m=="string")m=new R(m,u);else if(m instanceof R)m.target=m.target||u;else{var M=m;m=new R(P,u),ce(m,M)}M=!0;let j,X;if(y)for(X=y.length-1;X>=0;X--)j=m.g=y[X],M=kr(j,P,!0,m)&&M;if(j=m.g=u,M=kr(j,P,!0,m)&&M,M=kr(j,P,!1,m)&&M,y)for(X=0;X<y.length;X++)j=m.g=y[X],M=kr(j,P,!1,m)&&M}at.prototype.N=function(){if(at.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const y=u.g[m];for(let P=0;P<y.length;P++)F(y[P]);delete u.g[m],u.h--}}this.G=null},at.prototype.J=function(u,m,y,P){return this.i.add(String(u),m,!1,y,P)},at.prototype.K=function(u,m,y,P){return this.i.add(String(u),m,!0,y,P)};function kr(u,m,y,P){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let M=!0;for(let j=0;j<m.length;++j){const X=m[j];if(X&&!X.da&&X.capture==y){const Se=X.listener,Rt=X.ha||X.src;X.fa&&Ie(u.i,X),M=Se.call(Rt,P)!==!1&&M}}return M&&!P.defaultPrevented}function Id(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=c(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:o.setTimeout(u,m||0)}function Dr(u){u.g=Id(()=>{u.g=null,u.i&&(u.i=!1,Dr(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class gm extends D{constructor(m,y){super(),this.m=m,this.l=y,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Dr(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function no(u){D.call(this),this.h=u,this.g={}}h(no,D);var an=[];function ss(u){U(u.g,function(m,y){this.g.hasOwnProperty(y)&&Bt(m)},u),u.g={}}no.prototype.N=function(){no.Z.N.call(this),ss(this)},no.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gl=o.JSON.stringify,ym=o.JSON.parse,ra=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function Sd(){}function Ql(){}var is={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Nr(){R.call(this,"d")}h(Nr,R);function sa(){R.call(this,"c")}h(sa,R);var vn={},bd=null;function ia(){return bd=bd||new at}vn.Ia="serverreachability";function Yl(u){R.call(this,vn.Ia,u)}h(Yl,R);function js(u){const m=ia();Ot(m,new Yl(m))}vn.STAT_EVENT="statevent";function Ad(u,m){R.call(this,vn.STAT_EVENT,u),this.stat=m}h(Ad,R);function xt(u){const m=ia();Ot(m,new Ad(m,u))}vn.Ja="timingevent";function or(u,m){R.call(this,vn.Ja,u),this.size=m}h(or,R);function ro(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},m)}function fe(){this.g=!0}fe.prototype.ua=function(){this.g=!1};function Ue(u,m,y,P,M,j){u.info(function(){if(u.g)if(j){var X="",Se=j.split("&");for(let qe=0;qe<Se.length;qe++){var Rt=Se[qe].split("=");if(Rt.length>1){const Lt=Rt[0];Rt=Rt[1];const Lr=Lt.split("_");X=Lr.length>=2&&Lr[1]=="type"?X+(Lt+"="+Rt+"&"):X+(Lt+"=redacted&")}}}else X=null;else X=j;return"XMLHTTP REQ ("+P+") [attempt "+M+"]: "+m+`
`+y+`
`+X})}function We(u,m,y,P,M,j,X){u.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+M+"]: "+m+`
`+y+`
`+j+" "+X})}function Vt(u,m,y,P){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Or(u,y)+(P?" "+P:"")})}function kn(u,m){u.info(function(){return"TIMEOUT: "+m})}fe.prototype.info=function(){};function Or(u,m){if(!u.g)return m;if(!m)return null;try{const j=JSON.parse(m);if(j){for(u=0;u<j.length;u++)if(Array.isArray(j[u])){var y=j[u];if(!(y.length<2)){var P=y[1];if(Array.isArray(P)&&!(P.length<1)){var M=P[0];if(M!="noop"&&M!="stop"&&M!="close")for(let X=1;X<P.length;X++)P[X]=""}}}}return Gl(j)}catch{return m}}var Yn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},_n={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ar;function vm(){}h(vm,Sd),vm.prototype.g=function(){return new XMLHttpRequest},ar=new vm;function Xl(u){return encodeURIComponent(String(u))}function WD(u){var m=1;u=u.split(":");const y=[];for(;m>0&&u.length;)y.push(u.shift()),m--;return u.length&&y.push(u.join(":")),y}function Bs(u,m,y,P){this.j=u,this.i=m,this.l=y,this.S=P||1,this.V=new no(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new _E}function _E(){this.i=null,this.g="",this.h=!1}var wE={},_m={};function wm(u,m,y){u.M=1,u.A=Rd(Vr(m)),u.u=y,u.R=!0,EE(u,null)}function EE(u,m){u.F=Date.now(),xd(u),u.B=Vr(u.A);var y=u.B,P=u.S;Array.isArray(P)||(P=[String(P)]),OE(y.i,"t",P),u.C=0,y=u.j.L,u.h=new _E,u.g=JE(u.j,y?m:null,!u.u),u.P>0&&(u.O=new gm(c(u.Y,u,u.g),u.P)),m=u.V,y=u.g,P=u.ba;var M="readystatechange";Array.isArray(M)||(M&&(an[0]=M.toString()),M=an);for(let j=0;j<M.length;j++){const X=Re(y,M[j],P||m.handleEvent,!1,m.h||m);if(!X)break;m.g[X.key]=X}m=u.J?de(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),js(),Ue(u.i,u.v,u.B,u.l,u.S,u.u)}Bs.prototype.ba=function(u){u=u.target;const m=this.O;m&&qs(u)==3?m.j():this.Y(u)},Bs.prototype.Y=function(u){try{if(u==this.g)e:{const Se=qs(this.g),Rt=this.g.ya(),qe=this.g.ca();if(!(Se<3)&&(Se!=3||this.g&&(this.h.h||this.g.la()||BE(this.g)))){this.K||Se!=4||Rt==7||(Rt==8||qe<=0?js(3):js(2)),Em(this);var m=this.g.ca();this.X=m;var y=KD(this);if(this.o=m==200,We(this.i,this.v,this.B,this.l,this.S,Se,m),this.o){if(this.U&&!this.L){t:{if(this.g){var P,M=this.g;if((P=M.g?M.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(P)){var j=P;break t}}j=null}if(u=j)Vt(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Tm(this,u);else{this.o=!1,this.m=3,xt(12),so(this),Jl(this);break e}}if(this.R){u=!0;let Lt;for(;!this.K&&this.C<y.length;)if(Lt=GD(this,y),Lt==_m){Se==4&&(this.m=4,xt(14),u=!1),Vt(this.i,this.l,null,"[Incomplete Response]");break}else if(Lt==wE){this.m=4,xt(15),Vt(this.i,this.l,y,"[Invalid Chunk]"),u=!1;break}else Vt(this.i,this.l,Lt,null),Tm(this,Lt);if(TE(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Se!=4||y.length!=0||this.h.h||(this.m=1,xt(16),u=!1),this.o=this.o&&u,!u)Vt(this.i,this.l,y,"[Invalid Chunked Response]"),so(this),Jl(this);else if(y.length>0&&!this.W){this.W=!0;var X=this.j;X.g==this&&X.aa&&!X.P&&(X.j.info("Great, no buffering proxy detected. Bytes received: "+y.length),Cm(X),X.P=!0,xt(11))}}else Vt(this.i,this.l,y,null),Tm(this,y);Se==4&&so(this),this.o&&!this.K&&(Se==4?GE(this.j,this):(this.o=!1,xd(this)))}else lN(this.g),m==400&&y.indexOf("Unknown SID")>0?(this.m=3,xt(12)):(this.m=0,xt(13)),so(this),Jl(this)}}}catch{}finally{}};function KD(u){if(!TE(u))return u.g.la();const m=BE(u.g);if(m==="")return"";let y="";const P=m.length,M=qs(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return so(u),Jl(u),"";u.h.i=new o.TextDecoder}for(let j=0;j<P;j++)u.h.h=!0,y+=u.h.i.decode(m[j],{stream:!(M&&j==P-1)});return m.length=0,u.h.g+=y,u.C=0,u.h.g}function TE(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function GD(u,m){var y=u.C,P=m.indexOf(`
`,y);return P==-1?_m:(y=Number(m.substring(y,P)),isNaN(y)?wE:(P+=1,P+y>m.length?_m:(m=m.slice(P,P+y),u.C=P+y,m)))}Bs.prototype.cancel=function(){this.K=!0,so(this)};function xd(u){u.T=Date.now()+u.H,IE(u,u.H)}function IE(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=ro(c(u.aa,u),m)}function Em(u){u.D&&(o.clearTimeout(u.D),u.D=null)}Bs.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(kn(this.i,this.B),this.M!=2&&(js(),xt(17)),so(this),this.m=2,Jl(this)):IE(this,this.T-u)};function Jl(u){u.j.I==0||u.K||GE(u.j,u)}function so(u){Em(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,ss(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function Tm(u,m){try{var y=u.j;if(y.I!=0&&(y.g==u||Im(y.h,u))){if(!u.L&&Im(y.h,u)&&y.I==3){try{var P=y.Ba.g.parse(m)}catch{P=null}if(Array.isArray(P)&&P.length==3){var M=P;if(M[0]==0){e:if(!y.v){if(y.g)if(y.g.F+3e3<u.F)Nd(y),kd(y);else break e;Pm(y),xt(18)}}else y.xa=M[1],0<y.xa-y.K&&M[2]<37500&&y.F&&y.A==0&&!y.C&&(y.C=ro(c(y.Va,y),6e3));AE(y.h)<=1&&y.ta&&(y.ta=void 0)}else oo(y,11)}else if((u.L||y.g==u)&&Nd(y),!C(m))for(M=y.Ba.g.parse(m),m=0;m<M.length;m++){let qe=M[m];const Lt=qe[0];if(!(Lt<=y.K))if(y.K=Lt,qe=qe[1],y.I==2)if(qe[0]=="c"){y.M=qe[1],y.ba=qe[2];const Lr=qe[3];Lr!=null&&(y.ka=Lr,y.j.info("VER="+y.ka));const ao=qe[4];ao!=null&&(y.za=ao,y.j.info("SVER="+y.za));const Hs=qe[5];Hs!=null&&typeof Hs=="number"&&Hs>0&&(P=1.5*Hs,y.O=P,y.j.info("backChannelRequestTimeoutMs_="+P)),P=y;const Ws=u.g;if(Ws){const Vd=Ws.g?Ws.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Vd){var j=P.h;j.g||Vd.indexOf("spdy")==-1&&Vd.indexOf("quic")==-1&&Vd.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(Sm(j,j.h),j.h=null))}if(P.G){const km=Ws.g?Ws.g.getResponseHeader("X-HTTP-Session-Id"):null;km&&(P.wa=km,Ye(P.J,P.G,km))}}y.I=3,y.l&&y.l.ra(),y.aa&&(y.T=Date.now()-u.F,y.j.info("Handshake RTT: "+y.T+"ms")),P=y;var X=u;if(P.na=XE(P,P.L?P.ba:null,P.W),X.L){xE(P.h,X);var Se=X,Rt=P.O;Rt&&(Se.H=Rt),Se.D&&(Em(Se),xd(Se)),P.g=X}else WE(P);y.i.length>0&&Dd(y)}else qe[0]!="stop"&&qe[0]!="close"||oo(y,7);else y.I==3&&(qe[0]=="stop"||qe[0]=="close"?qe[0]=="stop"?oo(y,7):Rm(y):qe[0]!="noop"&&y.l&&y.l.qa(qe),y.A=0)}}js(4)}catch{}}var QD=class{constructor(u,m){this.g=u,this.map=m}};function SE(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function bE(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function AE(u){return u.h?1:u.g?u.g.size:0}function Im(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Sm(u,m){u.g?u.g.add(m):u.h=m}function xE(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}SE.prototype.cancel=function(){if(this.i=RE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function RE(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const y of u.g.values())m=m.concat(y.G);return m}return p(u.i)}var PE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function YD(u,m){if(u){u=u.split("&");for(let y=0;y<u.length;y++){const P=u[y].indexOf("=");let M,j=null;P>=0?(M=u[y].substring(0,P),j=u[y].substring(P+1)):M=u[y],m(M,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function $s(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof $s?(this.l=u.l,Zl(this,u.j),this.o=u.o,this.g=u.g,ec(this,u.u),this.h=u.h,bm(this,VE(u.i)),this.m=u.m):u&&(m=String(u).match(PE))?(this.l=!1,Zl(this,m[1]||"",!0),this.o=tc(m[2]||""),this.g=tc(m[3]||"",!0),ec(this,m[4]),this.h=tc(m[5]||"",!0),bm(this,m[6]||"",!0),this.m=tc(m[7]||"")):(this.l=!1,this.i=new rc(null,this.l))}$s.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(nc(m,CE,!0),":");var y=this.g;return(y||m=="file")&&(u.push("//"),(m=this.o)&&u.push(nc(m,CE,!0),"@"),u.push(Xl(y).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.u,y!=null&&u.push(":",String(y))),(y=this.h)&&(this.g&&y.charAt(0)!="/"&&u.push("/"),u.push(nc(y,y.charAt(0)=="/"?ZD:JD,!0))),(y=this.i.toString())&&u.push("?",y),(y=this.m)&&u.push("#",nc(y,tN)),u.join("")},$s.prototype.resolve=function(u){const m=Vr(this);let y=!!u.j;y?Zl(m,u.j):y=!!u.o,y?m.o=u.o:y=!!u.g,y?m.g=u.g:y=u.u!=null;var P=u.h;if(y)ec(m,u.u);else if(y=!!u.h){if(P.charAt(0)!="/")if(this.g&&!this.h)P="/"+P;else{var M=m.h.lastIndexOf("/");M!=-1&&(P=m.h.slice(0,M+1)+P)}if(M=P,M==".."||M==".")P="";else if(M.indexOf("./")!=-1||M.indexOf("/.")!=-1){P=M.lastIndexOf("/",0)==0,M=M.split("/");const j=[];for(let X=0;X<M.length;){const Se=M[X++];Se=="."?P&&X==M.length&&j.push(""):Se==".."?((j.length>1||j.length==1&&j[0]!="")&&j.pop(),P&&X==M.length&&j.push("")):(j.push(Se),P=!0)}P=j.join("/")}else P=M}return y?m.h=P:y=u.i.toString()!=="",y?bm(m,VE(u.i)):y=!!u.m,y&&(m.m=u.m),m};function Vr(u){return new $s(u)}function Zl(u,m,y){u.j=y?tc(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function ec(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function bm(u,m,y){m instanceof rc?(u.i=m,nN(u.i,u.l)):(y||(m=nc(m,eN)),u.i=new rc(m,u.l))}function Ye(u,m,y){u.i.set(m,y)}function Rd(u){return Ye(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function tc(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function nc(u,m,y){return typeof u=="string"?(u=encodeURI(u).replace(m,XD),y&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function XD(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var CE=/[#\/\?@]/g,JD=/[#\?:]/g,ZD=/[#\?]/g,eN=/[#\?@]/g,tN=/#/g;function rc(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function io(u){u.g||(u.g=new Map,u.h=0,u.i&&YD(u.i,function(m,y){u.add(decodeURIComponent(m.replace(/\+/g," ")),y)}))}t=rc.prototype,t.add=function(u,m){io(this),this.i=null,u=oa(this,u);let y=this.g.get(u);return y||this.g.set(u,y=[]),y.push(m),this.h+=1,this};function kE(u,m){io(u),m=oa(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function DE(u,m){return io(u),m=oa(u,m),u.g.has(m)}t.forEach=function(u,m){io(this),this.g.forEach(function(y,P){y.forEach(function(M){u.call(m,M,P,this)},this)},this)};function NE(u,m){io(u);let y=[];if(typeof m=="string")DE(u,m)&&(y=y.concat(u.g.get(oa(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)y=y.concat(u[m]);return y}t.set=function(u,m){return io(this),this.i=null,u=oa(this,u),DE(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},t.get=function(u,m){return u?(u=NE(this,u),u.length>0?String(u[0]):m):m};function OE(u,m,y){kE(u,m),y.length>0&&(u.i=null,u.g.set(oa(u,m),p(y)),u.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let P=0;P<m.length;P++){var y=m[P];const M=Xl(y);y=NE(this,y);for(let j=0;j<y.length;j++){let X=M;y[j]!==""&&(X+="="+Xl(y[j])),u.push(X)}}return this.i=u.join("&")};function VE(u){const m=new rc;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function oa(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function nN(u,m){m&&!u.j&&(io(u),u.i=null,u.g.forEach(function(y,P){const M=P.toLowerCase();P!=M&&(kE(this,P),OE(this,M,y))},u)),u.j=m}function rN(u,m){const y=new fe;if(o.Image){const P=new Image;P.onload=d(zs,y,"TestLoadImage: loaded",!0,m,P),P.onerror=d(zs,y,"TestLoadImage: error",!1,m,P),P.onabort=d(zs,y,"TestLoadImage: abort",!1,m,P),P.ontimeout=d(zs,y,"TestLoadImage: timeout",!1,m,P),o.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=u}else m(!1)}function sN(u,m){const y=new fe,P=new AbortController,M=setTimeout(()=>{P.abort(),zs(y,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:P.signal}).then(j=>{clearTimeout(M),j.ok?zs(y,"TestPingServer: ok",!0,m):zs(y,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(M),zs(y,"TestPingServer: error",!1,m)})}function zs(u,m,y,P,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),P(y)}catch{}}function iN(){this.g=new ra}function Am(u){this.i=u.Sb||null,this.h=u.ab||!1}h(Am,Sd),Am.prototype.g=function(){return new Pd(this.i,this.h)};function Pd(u,m){at.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h(Pd,at),t=Pd.prototype,t.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,ic(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||o).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,sc(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ic(this)),this.g&&(this.readyState=3,ic(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;LE(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function LE(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?sc(this):ic(this),this.readyState==3&&LE(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,sc(this))},t.Na=function(u){this.g&&(this.response=u,sc(this))},t.ga=function(){this.g&&sc(this)};function sc(u){u.readyState=4,u.l=null,u.j=null,u.B=null,ic(u)}t.setRequestHeader=function(u,m){this.A.append(u,m)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var y=m.next();!y.done;)y=y.value,u.push(y[0]+": "+y[1]),y=m.next();return u.join(`\r
`)};function ic(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Pd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function ME(u){let m="";return U(u,function(y,P){m+=P,m+=":",m+=y,m+=`\r
`}),m}function xm(u,m,y){e:{for(P in y){var P=!1;break e}P=!0}P||(y=ME(y),typeof u=="string"?y!=null&&Xl(y):Ye(u,m,y))}function ht(u){at.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(ht,at);var oN=/^https?$/i,aN=["POST","PUT"];t=ht.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,m,y,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ar.g(),this.g.onreadystatechange=f(c(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(j){FE(this,j);return}if(u=y||"",y=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var M in P)y.set(M,P[M]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const j of P.keys())y.set(j,P.get(j));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(y.keys()).find(j=>j.toLowerCase()=="content-type"),M=o.FormData&&u instanceof o.FormData,!(Array.prototype.indexOf.call(aN,m,void 0)>=0)||P||M||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,X]of y)this.g.setRequestHeader(j,X);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(j){FE(this,j)}};function FE(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,UE(u),Cd(u)}function UE(u){u.A||(u.A=!0,Ot(u,"complete"),Ot(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Ot(this,"complete"),Ot(this,"abort"),Cd(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Cd(this,!0)),ht.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?jE(this):this.Xa())},t.Xa=function(){jE(this)};function jE(u){if(u.h&&typeof i<"u"){if(u.v&&qs(u)==4)setTimeout(u.Ca.bind(u),0);else if(Ot(u,"readystatechange"),qs(u)==4){u.h=!1;try{const j=u.ca();e:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var y;if(!(y=m)){var P;if(P=j===0){let X=String(u.D).match(PE)[1]||null;!X&&o.self&&o.self.location&&(X=o.self.location.protocol.slice(0,-1)),P=!oN.test(X?X.toLowerCase():"")}y=P}if(y)Ot(u,"complete"),Ot(u,"success");else{u.o=6;try{var M=qs(u)>2?u.g.statusText:""}catch{M=""}u.l=M+" ["+u.ca()+"]",UE(u)}}finally{Cd(u)}}}}function Cd(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const y=u.g;u.g=null,m||Ot(u,"ready");try{y.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function qs(u){return u.g?u.g.readyState:0}t.ca=function(){try{return qs(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),ym(m)}};function BE(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function lN(u){const m={};u=(u.g&&qs(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<u.length;P++){if(C(u[P]))continue;var y=WD(u[P]);const M=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const j=m[M]||[];m[M]=j,j.push(y)}Y(m,function(P){return P.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function oc(u,m,y){return y&&y.internalChannelParams&&y.internalChannelParams[u]||m}function $E(u){this.za=0,this.i=[],this.j=new fe,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=oc("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=oc("baseRetryDelayMs",5e3,u),this.Za=oc("retryDelaySeedMs",1e4,u),this.Ta=oc("forwardChannelMaxRetries",2,u),this.va=oc("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new SE(u&&u.concurrentRequestLimit),this.Ba=new iN,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=$E.prototype,t.ka=8,t.I=1,t.connect=function(u,m,y,P){xt(0),this.W=u,this.H=m||{},y&&P!==void 0&&(this.H.OSID=y,this.H.OAID=P),this.F=this.X,this.J=XE(this,null,this.W),Dd(this)};function Rm(u){if(zE(u),u.I==3){var m=u.V++,y=Vr(u.J);if(Ye(y,"SID",u.M),Ye(y,"RID",m),Ye(y,"TYPE","terminate"),ac(u,y),m=new Bs(u,u.j,m),m.M=2,m.A=Rd(Vr(y)),y=!1,o.navigator&&o.navigator.sendBeacon)try{y=o.navigator.sendBeacon(m.A.toString(),"")}catch{}!y&&o.Image&&(new Image().src=m.A,y=!0),y||(m.g=JE(m.j,null),m.g.ea(m.A)),m.F=Date.now(),xd(m)}YE(u)}function kd(u){u.g&&(Cm(u),u.g.cancel(),u.g=null)}function zE(u){kd(u),u.v&&(o.clearTimeout(u.v),u.v=null),Nd(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&o.clearTimeout(u.m),u.m=null)}function Dd(u){if(!bE(u.h)&&!u.m){u.m=!0;var m=u.Ea;O||I(),V||(O(),V=!0),S.add(m,u),u.D=0}}function cN(u,m){return AE(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=ro(c(u.Ea,u,m),QE(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const M=new Bs(this,this.j,u);let j=this.o;if(this.U&&(j?(j=de(j),ce(j,this.U)):j=this.U),this.u!==null||this.R||(M.J=j,j=null),this.S)e:{for(var m=0,y=0;y<this.i.length;y++){t:{var P=this.i[y];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(m+=P,m>4096){m=y;break e}if(m===4096||y===this.i.length-1){m=y+1;break e}}m=1e3}else m=1e3;m=HE(this,M,m),y=Vr(this.J),Ye(y,"RID",u),Ye(y,"CVER",22),this.G&&Ye(y,"X-HTTP-Session-Id",this.G),ac(this,y),j&&(this.R?m="headers="+Xl(ME(j))+"&"+m:this.u&&xm(y,this.u,j)),Sm(this.h,M),this.Ra&&Ye(y,"TYPE","init"),this.S?(Ye(y,"$req",m),Ye(y,"SID","null"),M.U=!0,wm(M,y,null)):wm(M,y,m),this.I=2}}else this.I==3&&(u?qE(this,u):this.i.length==0||bE(this.h)||qE(this))};function qE(u,m){var y;m?y=m.l:y=u.V++;const P=Vr(u.J);Ye(P,"SID",u.M),Ye(P,"RID",y),Ye(P,"AID",u.K),ac(u,P),u.u&&u.o&&xm(P,u.u,u.o),y=new Bs(u,u.j,y,u.D+1),u.u===null&&(y.J=u.o),m&&(u.i=m.G.concat(u.i)),m=HE(u,y,1e3),y.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Sm(u.h,y),wm(y,P,m)}function ac(u,m){u.H&&U(u.H,function(y,P){Ye(m,P,y)}),u.l&&U({},function(y,P){Ye(m,P,y)})}function HE(u,m,y){y=Math.min(u.i.length,y);const P=u.l?c(u.l.Ka,u.l,u):null;e:{var M=u.i;let Se=-1;for(;;){const Rt=["count="+y];Se==-1?y>0?(Se=M[0].g,Rt.push("ofs="+Se)):Se=0:Rt.push("ofs="+Se);let qe=!0;for(let Lt=0;Lt<y;Lt++){var j=M[Lt].g;const Lr=M[Lt].map;if(j-=Se,j<0)Se=Math.max(0,M[Lt].g-100),qe=!1;else try{j="req"+j+"_"||"";try{var X=Lr instanceof Map?Lr:Object.entries(Lr);for(const[ao,Hs]of X){let Ws=Hs;a(Hs)&&(Ws=Gl(Hs)),Rt.push(j+ao+"="+encodeURIComponent(Ws))}}catch(ao){throw Rt.push(j+"type="+encodeURIComponent("_badmap")),ao}}catch{P&&P(Lr)}}if(qe){X=Rt.join("&");break e}}X=void 0}return u=u.i.splice(0,y),m.G=u,X}function WE(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;O||I(),V||(O(),V=!0),S.add(m,u),u.A=0}}function Pm(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=ro(c(u.Da,u),QE(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,KE(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=ro(c(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,xt(10),kd(this),KE(this))};function Cm(u){u.B!=null&&(o.clearTimeout(u.B),u.B=null)}function KE(u){u.g=new Bs(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=Vr(u.na);Ye(m,"RID","rpc"),Ye(m,"SID",u.M),Ye(m,"AID",u.K),Ye(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&Ye(m,"TO",u.ia),Ye(m,"TYPE","xmlhttp"),ac(u,m),u.u&&u.o&&xm(m,u.u,u.o),u.O&&(u.g.H=u.O);var y=u.g;u=u.ba,y.M=1,y.A=Rd(Vr(m)),y.u=null,y.R=!0,EE(y,u)}t.Va=function(){this.C!=null&&(this.C=null,kd(this),Pm(this),xt(19))};function Nd(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function GE(u,m){var y=null;if(u.g==m){Nd(u),Cm(u),u.g=null;var P=2}else if(Im(u.h,m))y=m.G,xE(u.h,m),P=1;else return;if(u.I!=0){if(m.o)if(P==1){y=m.u?m.u.length:0,m=Date.now()-m.F;var M=u.D;P=ia(),Ot(P,new or(P,y)),Dd(u)}else WE(u);else if(M=m.m,M==3||M==0&&m.X>0||!(P==1&&cN(u,m)||P==2&&Pm(u)))switch(y&&y.length>0&&(m=u.h,m.i=m.i.concat(y)),M){case 1:oo(u,5);break;case 4:oo(u,10);break;case 3:oo(u,6);break;default:oo(u,2)}}}function QE(u,m){let y=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(y*=2),y*m}function oo(u,m){if(u.j.info("Error code "+m),m==2){var y=c(u.bb,u),P=u.Ua;const M=!P;P=new $s(P||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Zl(P,"https"),Rd(P),M?rN(P.toString(),y):sN(P.toString(),y)}else xt(2);u.I=0,u.l&&u.l.pa(m),YE(u),zE(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function YE(u){if(u.I=0,u.ja=[],u.l){const m=RE(u.h);(m.length!=0||u.i.length!=0)&&(E(u.ja,m),E(u.ja,u.i),u.h.i.length=0,p(u.i),u.i.length=0),u.l.oa()}}function XE(u,m,y){var P=y instanceof $s?Vr(y):new $s(y);if(P.g!="")m&&(P.g=m+"."+P.g),ec(P,P.u);else{var M=o.location;P=M.protocol,m=m?m+"."+M.hostname:M.hostname,M=+M.port;const j=new $s(null);P&&Zl(j,P),m&&(j.g=m),M&&ec(j,M),y&&(j.h=y),P=j}return y=u.G,m=u.wa,y&&m&&Ye(P,y,m),Ye(P,"VER",u.ka),ac(u,P),P}function JE(u,m,y){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new ht(new Am({ab:y})):new ht(u.ma),m.Fa(u.L),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ZE(){}t=ZE.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Od(){}Od.prototype.g=function(u,m){return new Dn(u,m)};function Dn(u,m){at.call(this),this.g=new $E(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!C(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!C(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new aa(this)}h(Dn,at),Dn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Dn.prototype.close=function(){Rm(this.g)},Dn.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var y={};y.__data__=u,u=y}else this.v&&(y={},y.__data__=Gl(u),u=y);m.i.push(new QD(m.Ya++,u)),m.I==3&&Dd(m)},Dn.prototype.N=function(){this.g.l=null,delete this.j,Rm(this.g),delete this.g,Dn.Z.N.call(this)};function e0(u){Nr.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const y in m){u=y;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}h(e0,Nr);function t0(){sa.call(this),this.status=1}h(t0,sa);function aa(u){this.g=u}h(aa,ZE),aa.prototype.ra=function(){Ot(this.g,"a")},aa.prototype.qa=function(u){Ot(this.g,new e0(u))},aa.prototype.pa=function(u){Ot(this.g,new t0)},aa.prototype.oa=function(){Ot(this.g,"b")},Od.prototype.createWebChannel=Od.prototype.g,Dn.prototype.send=Dn.prototype.o,Dn.prototype.open=Dn.prototype.m,Dn.prototype.close=Dn.prototype.close,jP=function(){return new Od},UP=function(){return ia()},FP=vn,iv={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Yn.NO_ERROR=0,Yn.TIMEOUT=8,Yn.HTTP_ERROR=6,Mh=Yn,_n.COMPLETE="complete",MP=_n,Ql.EventType=is,is.OPEN="a",is.CLOSE="b",is.ERROR="c",is.MESSAGE="d",at.prototype.listen=at.prototype.J,Nc=Ql,ht.prototype.listenOnce=ht.prototype.K,ht.prototype.getLastError=ht.prototype.Ha,ht.prototype.getLastErrorCode=ht.prototype.ya,ht.prototype.getStatus=ht.prototype.ca,ht.prototype.getResponseJson=ht.prototype.La,ht.prototype.getResponseText=ht.prototype.la,ht.prototype.send=ht.prototype.ea,ht.prototype.setWithCredentials=ht.prototype.Fa,LP=ht}).apply(typeof ah<"u"?ah:typeof self<"u"?self:typeof window<"u"?window:{});const NI="@firebase/firestore",OI="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Jt.UNAUTHENTICATED=new Jt(null),Jt.GOOGLE_CREDENTIALS=new Jt("google-credentials-uid"),Jt.FIRST_PARTY=new Jt("first-party-uid"),Jt.MOCK_USER=new Jt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fi=new Fp("@firebase/firestore");function ga(){return Fi.logLevel}function BP(t){Fi.setLogLevel(t)}function H(t,...e){if(Fi.logLevel<=Ce.DEBUG){const n=e.map(uw);Fi.debug(`Firestore (${Fl}): ${t}`,...n)}}function _t(t,...e){if(Fi.logLevel<=Ce.ERROR){const n=e.map(uw);Fi.error(`Firestore (${Fl}): ${t}`,...n)}}function Ui(t,...e){if(Fi.logLevel<=Ce.WARN){const n=e.map(uw);Fi.warn(`Firestore (${Fl}): ${t}`,...n)}}function uw(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,$P(t,r,n)}function $P(t,e,n){let r=`FIRESTORE (${Fl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw _t(r),new Error(r)}function oe(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||$P(e,s,r)}function re(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class G extends Rr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o5{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class zP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Jt.UNAUTHENTICATED))}shutdown(){}}class a5{constructor(e){this.t=e,this.currentUser=Jt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){oe(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new rr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new rr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new rr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(oe(typeof r.accessToken=="string",31837,{l:r}),new o5(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return oe(e===null||typeof e=="string",2055,{h:e}),new Jt(e)}}class l5{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Jt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class c5{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new l5(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Jt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class VI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class u5{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ln(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){oe(this.o===void 0,3512);const r=i=>{i.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new VI(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(oe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new VI(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d5(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=d5(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function ge(t,e){return t<e?-1:t>e?1:0}function ov(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Tg(s)===Tg(i)?ge(s,i):Tg(s)?1:-1}return ge(t.length,e.length)}const h5=55296,f5=57343;function Tg(t){const e=t.charCodeAt(0);return e>=h5&&e<=f5}function cl(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}function qP(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI="__name__";class Ur{constructor(e,n,r){n===void 0?n=0:n>e.length&&te(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&te(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ur.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ur?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Ur.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return ge(e.length,n.length)}static compareSegments(e,n){const r=Ur.isNumericId(e),s=Ur.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Ur.extractNumericId(e).compare(Ur.extractNumericId(n)):ov(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Pi.fromString(e.substring(4,e.length-2))}}class Fe extends Ur{construct(e,n,r){return new Fe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new G(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Fe(n)}static emptyPath(){return new Fe([])}}const p5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class st extends Ur{construct(e,n,r){return new st(e,n,r)}static isValidIdentifier(e){return p5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),st.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===LI}static keyField(){return new st([LI])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new G(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new G(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new G(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new G(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new st(n)}static emptyPath(){return new st([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.path=e}static fromPath(e){return new J(Fe.fromString(e))}static fromName(e){return new J(Fe.fromString(e).popFirst(5))}static empty(){return new J(Fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Fe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new J(new Fe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HP(t,e,n){if(!n)throw new G(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function WP(t,e,n,r){if(e===!0&&r===!0)throw new G(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function MI(t){if(!J.isDocumentKey(t))throw new G(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function FI(t){if(J.isDocumentKey(t))throw new G(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function KP(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function $p(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":te(12329,{type:typeof t})}function Et(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new G(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=$p(t);throw new G(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function m5(t,e){if(e<=0)throw new G(B.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(t,e){const n={typeString:t};return e&&(n.value=e),n}function ld(t,e){if(!KP(t))throw new G(B.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new G(B.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI=-62135596800,jI=1e6;class je{static now(){return je.fromMillis(Date.now())}static fromDate(e){return je.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*jI);return new je(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new G(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<UI)throw new G(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/jI}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:je._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ld(e,je._jsonSchema))return new je(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-UI;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}je._jsonSchemaVersion="firestore/timestamp/1.0",je._jsonSchema={type:At("string",je._jsonSchemaVersion),seconds:At("number"),nanoseconds:At("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{static fromTimestamp(e){return new ue(e)}static min(){return new ue(new je(0,0))}static max(){return new ue(new je(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ul=-1;class Uf{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function av(t){return t.fields.find(e=>e.kind===2)}function fo(t){return t.fields.filter(e=>e.kind!==2)}Uf.UNKNOWN_ID=-1;class Fh{constructor(e,n){this.fieldPath=e,this.kind=n}}class Nu{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Nu(0,Wn.min())}}function GP(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ue.fromTimestamp(r===1e9?new je(n+1,0):new je(n,r));return new Wn(s,J.empty(),e)}function QP(t){return new Wn(t.readTime,t.key,ul)}class Wn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Wn(ue.min(),J.empty(),ul)}static max(){return new Wn(ue.max(),J.empty(),ul)}}function dw(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=J.comparator(t.documentKey,e.documentKey),n!==0?n:ge(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class XP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ji(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==YP)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):L.reject(n)}static resolve(e){return new L((n,r)=>{n(e)})}static reject(e){return new L((n,r)=>{r(e)})}static waitFor(e){return new L((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=L.resolve(!1);for(const r of e)n=n.next(s=>s?L.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new L((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new L((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const On="SimpleDb";class zp{static open(e,n,r,s){try{return new zp(n,e.transaction(s,r))}catch(i){throw new Qc(n,i)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new rr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new Qc(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const s=hw(r.target.error);this.S.reject(new Qc(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(H(On,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new y5(n)}}class Ci{static delete(e){return H(On,"Removing database:",e),go(YR().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!rw())return!1;if(Ci.F())return!0;const e=Wt(),n=Ci.M(e),r=0<n&&n<10,s=JP(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,Ci.M(Wt())===12.2&&_t("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(H(On,"Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new Qc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new G(B.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new G(B.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Qc(e,o))},s.onupgradeneeded=i=>{H(On,'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.N.k(o,s.transaction,i.oldVersion,this.version).next(()=>{H(On,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const a=zp.open(this.db,e,i?"readonly":"readwrite",r),l=s(a).next(c=>(a.C(),c)).catch(c=>(a.abort(c),L.reject(c))).toPromise();return l.catch(()=>{}),await a.D,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(H(On,"Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function JP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class g5{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return go(this.U.delete())}}class Qc extends G{constructor(e,n){super(B.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Zi(t){return t.name==="IndexedDbTransactionError"}class y5{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(H(On,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(H(On,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),go(r)}add(e){return H(On,"ADD",this.store.name,e,e),go(this.store.add(e))}get(e){return go(this.store.get(e)).next(n=>(n===void 0&&(n=null),H(On,"GET",this.store.name,e,n),n))}delete(e){return H(On,"DELETE",this.store.name,e),go(this.store.delete(e))}count(){return H(On,"COUNT",this.store.name),go(this.store.count())}J(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new L((o,a)=>{i.onerror=l=>{a(l.target.error)},i.onsuccess=l=>{o(l.target.result)}})}{const i=this.cursor(r),o=[];return this.H(i,(a,l)=>{o.push(l)}).next(()=>o)}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new L((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}Z(e,n){H(On,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const s=this.cursor(r);return this.H(s,(i,o,a)=>a.delete())}ee(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.H(s,n)}te(e){const n=this.cursor({});return new L((r,s)=>{n.onerror=i=>{const o=hw(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}H(e,n){const r=[];return new L((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const l=new g5(a),c=n(a.primaryKey,a.value,l);if(c instanceof L){const d=c.catch(h=>(l.done(),L.reject(h)));r.push(d)}l.isDone?s():l.G===null?a.continue():a.continue(l.G)}}).next(()=>L.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function go(t){return new L((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=hw(r.target.error);n(s)}})}let BI=!1;function hw(t){const e=Ci.M(Wt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new G("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return BI||(BI=!0,setTimeout(()=>{throw r},0)),r}}return t}const Yc="IndexBackfiller";class v5{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){H(Yc,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.ne.ie();H(Yc,`Documents written: ${n}`)}catch(n){Zi(n)?H(Yc,"Ignoring IndexedDB error during index backfill: ",n):await Ji(n)}await this.re(6e4)})}}class _5{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.se(n,e))}se(e,n){const r=new Set;let s=n,i=!0;return L.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return H(Yc,`Processing collection: ${o}`),this.oe(e,o,s).next(a=>{s-=a,r.add(o)});i=!1})).next(()=>n-s)}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next(i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this._e(s,i)).next(a=>(H(Yc,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}_e(e,n){let r=e;return n.changes.forEach((s,i)=>{const o=QP(i);dw(o,r)>0&&(r=o)}),new Wn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Sn.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vo=-1;function qp(t){return t==null}function Ou(t){return t===0&&1/t==-1/0}function ZP(t){return typeof t=="number"&&Number.isInteger(t)&&!Ou(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jf="";function sn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=$I(e)),e=w5(t.get(n),e);return $I(e)}function w5(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case jf:n+="";break;default:n+=i}}return n}function $I(t){return t+jf+""}function Wr(t){const e=t.length;if(oe(e>=2,64408,{path:t}),e===2)return oe(t.charAt(0)===jf&&t.charAt(1)==="",56145,{path:t}),Fe.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const o=t.indexOf(jf,i);switch((o<0||o>n)&&te(50515,{path:t}),t.charAt(o+1)){case"":const a=t.substring(i,o);let l;s.length===0?l=a:(s+=a,l=s,s=""),r.push(l);break;case"":s+=t.substring(i,o),s+="\0";break;case"":s+=t.substring(i,o+1);break;default:te(61167,{path:t})}i=o+2}return new Fe(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po="remoteDocuments",cd="owner",ca="owner",Vu="mutationQueues",E5="userId",mr="mutations",zI="batchId",bo="userMutationsIndex",qI=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uh(t,e){return[t,sn(e)]}function eC(t,e,n){return[t,sn(e),n]}const T5={},dl="documentMutations",Bf="remoteDocumentsV14",I5=["prefixPath","collectionGroup","readTime","documentId"],jh="documentKeyIndex",S5=["prefixPath","collectionGroup","documentId"],tC="collectionGroupIndex",b5=["collectionGroup","readTime","prefixPath","documentId"],Lu="remoteDocumentGlobal",lv="remoteDocumentGlobalKey",hl="targets",nC="queryTargetsIndex",A5=["canonicalId","targetId"],fl="targetDocuments",x5=["targetId","path"],fw="documentTargetsIndex",R5=["path","targetId"],$f="targetGlobalKey",Lo="targetGlobal",Mu="collectionParents",P5=["collectionId","parent"],pl="clientMetadata",C5="clientId",Hp="bundles",k5="bundleId",Wp="namedQueries",D5="name",pw="indexConfiguration",N5="indexId",cv="collectionGroupIndex",O5="collectionGroup",Xc="indexState",V5=["indexId","uid"],rC="sequenceNumberIndex",L5=["uid","sequenceNumber"],Jc="indexEntries",M5=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],sC="documentKeyIndex",F5=["indexId","uid","orderedDocumentKey"],Kp="documentOverlays",U5=["userId","collectionPath","documentId"],uv="collectionPathOverlayIndex",j5=["userId","collectionPath","largestBatchId"],iC="collectionGroupOverlayIndex",B5=["userId","collectionGroup","largestBatchId"],mw="globals",$5="name",oC=[Vu,mr,dl,po,hl,cd,Lo,fl,pl,Lu,Mu,Hp,Wp],z5=[...oC,Kp],aC=[Vu,mr,dl,Bf,hl,cd,Lo,fl,pl,Lu,Mu,Hp,Wp,Kp],lC=aC,gw=[...lC,pw,Xc,Jc],q5=gw,cC=[...gw,mw],H5=cC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv extends XP{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function Dt(t,e){const n=re(t);return Ci.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HI(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function eo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function uC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e,n){this.comparator=e,this.root=n||zt.EMPTY}insert(e,n){return new Ge(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,zt.BLACK,null,null))}remove(e){return new Ge(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new lh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new lh(this.root,e,this.comparator,!1)}getReverseIterator(){return new lh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new lh(this.root,e,this.comparator,!0)}}class lh{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??zt.RED,this.left=s??zt.EMPTY,this.right=i??zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new zt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return zt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw te(27949);return e+(this.isRed()?0:1)}}zt.EMPTY=null,zt.RED=!0,zt.BLACK=!1;zt.EMPTY=new class{constructor(){this.size=0}get key(){throw te(57766)}get value(){throw te(16141)}get color(){throw te(16727)}get left(){throw te(29726)}get right(){throw te(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new zt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e){this.comparator=e,this.data=new Ge(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new WI(this.data.getIterator())}getIteratorFrom(e){return new WI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ze)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ze(this.comparator);return n.data=e,n}}class WI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ua(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.fields=e,e.sort(st.comparator)}static empty(){return new bn([])}unionWith(e){let n=new ze(st.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new bn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return cl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new dC("Invalid base64 string: "+i):i}}(e);return new yt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new yt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yt.EMPTY_BYTE_STRING=new yt("");const W5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ps(t){if(oe(!!t,39018),typeof t=="string"){let e=0;const n=W5.exec(t);if(oe(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:nt(t.seconds),nanos:nt(t.nanos)}}function nt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Cs(t){return typeof t=="string"?yt.fromBase64String(t):yt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC="server_timestamp",fC="__type__",pC="__previous_value__",mC="__local_write_time__";function yw(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[fC])==null?void 0:r.stringValue)===hC}function Gp(t){const e=t.mapValue.fields[pC];return yw(e)?Gp(e):e}function Fu(t){const e=Ps(t.mapValue.fields[mC].timestampValue);return new je(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K5{constructor(e,n,r,s,i,o,a,l,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=d}}const zf="(default)";class ji{constructor(e,n){this.projectId=e,this.database=n||zf}static empty(){return new ji("","")}get isDefaultDatabase(){return this.database===zf}isEqual(e){return e instanceof ji&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vw="__type__",gC="__max__",gi={mapValue:{fields:{__type__:{stringValue:gC}}}},_w="__vector__",ml="value",Bh={nullValue:"NULL_VALUE"};function Bi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?yw(t)?4:yC(t)?9007199254740991:Qp(t)?10:11:te(28295,{value:t})}function ts(t,e){if(t===e)return!0;const n=Bi(t);if(n!==Bi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Fu(t).isEqual(Fu(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Ps(s.timestampValue),a=Ps(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Cs(s.bytesValue).isEqual(Cs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return nt(s.geoPointValue.latitude)===nt(i.geoPointValue.latitude)&&nt(s.geoPointValue.longitude)===nt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return nt(s.integerValue)===nt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=nt(s.doubleValue),a=nt(i.doubleValue);return o===a?Ou(o)===Ou(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return cl(t.arrayValue.values||[],e.arrayValue.values||[],ts);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(HI(o)!==HI(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ts(o[l],a[l])))return!1;return!0}(t,e);default:return te(52216,{left:t})}}function Uu(t,e){return(t.values||[]).find(n=>ts(n,e))!==void 0}function $i(t,e){if(t===e)return 0;const n=Bi(t),r=Bi(e);if(n!==r)return ge(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ge(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=nt(i.integerValue||i.doubleValue),l=nt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return KI(t.timestampValue,e.timestampValue);case 4:return KI(Fu(t),Fu(e));case 5:return ov(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Cs(i),l=Cs(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=ge(a[c],l[c]);if(d!==0)return d}return ge(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=ge(nt(i.latitude),nt(o.latitude));return a!==0?a:ge(nt(i.longitude),nt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return GI(t.arrayValue,e.arrayValue);case 10:return function(i,o){var f,p,E,g;const a=i.fields||{},l=o.fields||{},c=(f=a[ml])==null?void 0:f.arrayValue,d=(p=l[ml])==null?void 0:p.arrayValue,h=ge(((E=c==null?void 0:c.values)==null?void 0:E.length)||0,((g=d==null?void 0:d.values)==null?void 0:g.length)||0);return h!==0?h:GI(c,d)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===gi.mapValue&&o===gi.mapValue)return 0;if(i===gi.mapValue)return 1;if(o===gi.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const f=ov(l[h],d[h]);if(f!==0)return f;const p=$i(a[l[h]],c[d[h]]);if(p!==0)return p}return ge(l.length,d.length)}(t.mapValue,e.mapValue);default:throw te(23264,{he:n})}}function KI(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ge(t,e);const n=Ps(t),r=Ps(e),s=ge(n.seconds,r.seconds);return s!==0?s:ge(n.nanos,r.nanos)}function GI(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=$i(n[s],r[s]);if(i)return i}return ge(n.length,r.length)}function gl(t){return hv(t)}function hv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ps(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Cs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return J.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=hv(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${hv(n.fields[o])}`;return s+"}"}(t.mapValue):te(61005,{value:t})}function $h(t){switch(Bi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Gp(t);return e?16+$h(e):16;case 5:return 2*t.stringValue.length;case 6:return Cs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+$h(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return eo(r.fields,(i,o)=>{s+=i.length+$h(o)}),s}(t.mapValue);default:throw te(13486,{value:t})}}function ju(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function fv(t){return!!t&&"integerValue"in t}function Bu(t){return!!t&&"arrayValue"in t}function QI(t){return!!t&&"nullValue"in t}function YI(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function zh(t){return!!t&&"mapValue"in t}function Qp(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[vw])==null?void 0:r.stringValue)===_w}function Zc(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return eo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Zc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Zc(t.arrayValue.values[n]);return e}return{...t}}function yC(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===gC}const vC={mapValue:{fields:{[vw]:{stringValue:_w},[ml]:{arrayValue:{}}}}};function G5(t){return"nullValue"in t?Bh:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?ju(ji.empty(),J.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Qp(t)?vC:{mapValue:{}}:te(35942,{value:t})}function Q5(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?ju(ji.empty(),J.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?vC:"mapValue"in t?Qp(t)?{mapValue:{}}:gi:te(61959,{value:t})}function XI(t,e){const n=$i(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function JI(t,e){const n=$i(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.value=e}static empty(){return new nn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!zh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zc(n)}setAll(e){let n=st.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Zc(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());zh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ts(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];zh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){eo(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new nn(Zc(this.value))}}function _C(t){const e=[];return eo(t.fields,(n,r)=>{const s=new st([n]);if(zh(r)){const i=_C(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new bn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new mt(e,0,ue.min(),ue.min(),ue.min(),nn.empty(),0)}static newFoundDocument(e,n,r,s){return new mt(e,1,n,ue.min(),r,s,0)}static newNoDocument(e,n){return new mt(e,2,n,ue.min(),ue.min(),nn.empty(),0)}static newUnknownDocument(e,n){return new mt(e,3,n,ue.min(),ue.min(),nn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e,n){this.position=e,this.inclusive=n}}function ZI(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=J.comparator(J.fromName(o.referenceValue),n.key):r=$i(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function eS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ts(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e,n="asc"){this.field=e,this.dir=n}}function Y5(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{}class De extends wC{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new X5(e,n,r):n==="array-contains"?new eB(e,r):n==="in"?new AC(e,r):n==="not-in"?new tB(e,r):n==="array-contains-any"?new nB(e,r):new De(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new J5(e,r):new Z5(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison($i(n,this.value)):n!==null&&Bi(this.value)===Bi(n)&&this.matchesComparison($i(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Be extends wC{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Be(e,n)}matches(e){return vl(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function vl(t){return t.op==="and"}function pv(t){return t.op==="or"}function ww(t){return EC(t)&&vl(t)}function EC(t){for(const e of t.filters)if(e instanceof Be)return!1;return!0}function mv(t){if(t instanceof De)return t.field.canonicalString()+t.op.toString()+gl(t.value);if(ww(t))return t.filters.map(e=>mv(e)).join(",");{const e=t.filters.map(n=>mv(n)).join(",");return`${t.op}(${e})`}}function TC(t,e){return t instanceof De?function(r,s){return s instanceof De&&r.op===s.op&&r.field.isEqual(s.field)&&ts(r.value,s.value)}(t,e):t instanceof Be?function(r,s){return s instanceof Be&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&TC(o,s.filters[a]),!0):!1}(t,e):void te(19439)}function IC(t,e){const n=t.filters.concat(e);return Be.create(n,t.op)}function SC(t){return t instanceof De?function(n){return`${n.field.canonicalString()} ${n.op} ${gl(n.value)}`}(t):t instanceof Be?function(n){return n.op.toString()+" {"+n.getFilters().map(SC).join(" ,")+"}"}(t):"Filter"}class X5 extends De{constructor(e,n,r){super(e,n,r),this.key=J.fromName(r.referenceValue)}matches(e){const n=J.comparator(e.key,this.key);return this.matchesComparison(n)}}class J5 extends De{constructor(e,n){super(e,"in",n),this.keys=bC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Z5 extends De{constructor(e,n){super(e,"not-in",n),this.keys=bC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function bC(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>J.fromName(r.referenceValue))}class eB extends De{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Bu(n)&&Uu(n.arrayValue,this.value)}}class AC extends De{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Uu(this.value.arrayValue,n)}}class tB extends De{constructor(e,n){super(e,"not-in",n)}matches(e){if(Uu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Uu(this.value.arrayValue,n)}}class nB extends De{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Bu(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Uu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rB{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function gv(t,e=null,n=[],r=[],s=null,i=null,o=null){return new rB(t,e,n,r,s,i,o)}function Wo(t){const e=re(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>mv(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),qp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>gl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>gl(r)).join(",")),e.Te=n}return e.Te}function ud(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Y5(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!TC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!eS(t.startAt,e.startAt)&&eS(t.endAt,e.endAt)}function qf(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Hf(t,e){return t.filters.filter(n=>n instanceof De&&n.field.isEqual(e))}function tS(t,e,n){let r=Bh,s=!0;for(const i of Hf(t,e)){let o=Bh,a=!0;switch(i.op){case"<":case"<=":o=G5(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=Bh}XI({value:r,inclusive:s},{value:o,inclusive:a})<0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];XI({value:r,inclusive:s},{value:o,inclusive:n.inclusive})<0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}function nS(t,e,n){let r=gi,s=!0;for(const i of Hf(t,e)){let o=gi,a=!0;switch(i.op){case">=":case">":o=Q5(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=gi}JI({value:r,inclusive:s},{value:o,inclusive:a})>0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];JI({value:r,inclusive:s},{value:o,inclusive:n.inclusive})>0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function xC(t,e,n,r,s,i,o,a){return new Ul(t,e,n,r,s,i,o,a)}function dd(t){return new Ul(t)}function rS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function RC(t){return t.collectionGroup!==null}function eu(t){const e=re(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ze(st.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new $u(i,r))}),n.has(st.keyField().canonicalString())||e.Ie.push(new $u(st.keyField(),r))}return e.Ie}function qn(t){const e=re(t);return e.Ee||(e.Ee=sB(e,eu(t))),e.Ee}function sB(t,e){if(t.limitType==="F")return gv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new $u(s.field,i)});const n=t.endAt?new yl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new yl(t.startAt.position,t.startAt.inclusive):null;return gv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function yv(t,e){const n=t.filters.concat([e]);return new Ul(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Wf(t,e,n){return new Ul(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Yp(t,e){return ud(qn(t),qn(e))&&t.limitType===e.limitType}function PC(t){return`${Wo(qn(t))}|lt:${t.limitType}`}function ya(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>SC(s)).join(", ")}]`),qp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>gl(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>gl(s)).join(",")),`Target(${r})`}(qn(t))}; limitType=${t.limitType})`}function hd(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):J.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of eu(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=ZI(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,eu(r),s)||r.endAt&&!function(o,a,l){const c=ZI(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,eu(r),s))}(t,e)}function CC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function kC(t){return(e,n)=>{let r=!1;for(const s of eu(t)){const i=iB(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function iB(t,e,n){const r=t.field.isKeyField()?J.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?$i(l,c):te(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return te(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){eo(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return uC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oB=new Ge(J.comparator);function Un(){return oB}const DC=new Ge(J.comparator);function Oc(...t){let e=DC;for(const n of t)e=e.insert(n.key,n);return e}function NC(t){let e=DC;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Kr(){return tu()}function OC(){return tu()}function tu(){return new Ls(t=>t.toString(),(t,e)=>t.isEqual(e))}const aB=new Ge(J.comparator),lB=new ze(J.comparator);function xe(...t){let e=lB;for(const n of t)e=e.add(n);return e}const cB=new ze(ge);function Ew(){return cB}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ou(e)?"-0":e}}function VC(t){return{integerValue:""+t}}function uB(t,e){return ZP(e)?VC(e):Tw(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(){this._=void 0}}function dB(t,e,n){return t instanceof _l?function(s,i){const o={fields:{[fC]:{stringValue:hC},[mC]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&yw(i)&&(i=Gp(i)),i&&(o.fields[pC]=i),{mapValue:o}}(n,e):t instanceof Ko?MC(t,e):t instanceof wl?FC(t,e):function(s,i){const o=LC(s,i),a=sS(o)+sS(s.Ae);return fv(o)&&fv(s.Ae)?VC(a):Tw(s.serializer,a)}(t,e)}function hB(t,e,n){return t instanceof Ko?MC(t,e):t instanceof wl?FC(t,e):n}function LC(t,e){return t instanceof zu?function(r){return fv(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class _l extends Xp{}class Ko extends Xp{constructor(e){super(),this.elements=e}}function MC(t,e){const n=UC(e);for(const r of t.elements)n.some(s=>ts(s,r))||n.push(r);return{arrayValue:{values:n}}}class wl extends Xp{constructor(e){super(),this.elements=e}}function FC(t,e){let n=UC(e);for(const r of t.elements)n=n.filter(s=>!ts(s,r));return{arrayValue:{values:n}}}class zu extends Xp{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function sS(t){return nt(t.integerValue||t.doubleValue)}function UC(t){return Bu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(e,n){this.field=e,this.transform=n}}function fB(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Ko&&s instanceof Ko||r instanceof wl&&s instanceof wl?cl(r.elements,s.elements,ts):r instanceof zu&&s instanceof zu?ts(r.Ae,s.Ae):r instanceof _l&&s instanceof _l}(t.transform,e.transform)}class pB{constructor(e,n){this.version=e,this.transformResults=n}}class rn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new rn}static exists(e){return new rn(void 0,e)}static updateTime(e){return new rn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Jp{}function jC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Zp(t.key,rn.none()):new jl(t.key,t.data,rn.none());{const n=t.data,r=nn.empty();let s=new ze(st.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Ms(t.key,r,new bn(s.toArray()),rn.none())}}function mB(t,e,n){t instanceof jl?function(s,i,o){const a=s.value.clone(),l=oS(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ms?function(s,i,o){if(!qh(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=oS(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(BC(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function nu(t,e,n,r){return t instanceof jl?function(i,o,a,l){if(!qh(i.precondition,o))return a;const c=i.value.clone(),d=aS(i.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ms?function(i,o,a,l){if(!qh(i.precondition,o))return a;const c=aS(i.fieldTransforms,l,o),d=o.data;return d.setAll(BC(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,o,a){return qh(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function gB(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=LC(r.transform,s||null);i!=null&&(n===null&&(n=nn.empty()),n.set(r.field,i))}return n||null}function iS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&cl(r,s,(i,o)=>fB(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class jl extends Jp{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ms extends Jp{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function BC(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function oS(t,e,n){const r=new Map;oe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,hB(o,a,n[s]))}return r}function aS(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,dB(i,o,e))}return r}class Zp extends Jp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $C extends Jp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&mB(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=nu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=nu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=OC();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=jC(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(ue.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),xe())}isEqual(e){return this.batchId===e.batchId&&cl(this.mutations,e.mutations,(n,r)=>iS(n,r))&&cl(this.baseMutations,e.baseMutations,(n,r)=>iS(n,r))}}class bw{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){oe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return aB}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new bw(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yB{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var It,Ve;function vB(t){switch(t){case B.OK:return te(64938);case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0;default:return te(15467,{code:t})}}function zC(t){if(t===void 0)return _t("GRPC error has no .code"),B.UNKNOWN;switch(t){case It.OK:return B.OK;case It.CANCELLED:return B.CANCELLED;case It.UNKNOWN:return B.UNKNOWN;case It.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case It.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case It.INTERNAL:return B.INTERNAL;case It.UNAVAILABLE:return B.UNAVAILABLE;case It.UNAUTHENTICATED:return B.UNAUTHENTICATED;case It.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case It.NOT_FOUND:return B.NOT_FOUND;case It.ALREADY_EXISTS:return B.ALREADY_EXISTS;case It.PERMISSION_DENIED:return B.PERMISSION_DENIED;case It.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case It.ABORTED:return B.ABORTED;case It.OUT_OF_RANGE:return B.OUT_OF_RANGE;case It.UNIMPLEMENTED:return B.UNIMPLEMENTED;case It.DATA_LOSS:return B.DATA_LOSS;default:return te(39323,{code:t})}}(Ve=It||(It={}))[Ve.OK=0]="OK",Ve[Ve.CANCELLED=1]="CANCELLED",Ve[Ve.UNKNOWN=2]="UNKNOWN",Ve[Ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ve[Ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ve[Ve.NOT_FOUND=5]="NOT_FOUND",Ve[Ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ve[Ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ve[Ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ve[Ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ve[Ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ve[Ve.ABORTED=10]="ABORTED",Ve[Ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ve[Ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ve[Ve.INTERNAL=13]="INTERNAL",Ve[Ve.UNAVAILABLE=14]="UNAVAILABLE",Ve[Ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _B(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wB=new Pi([4294967295,4294967295],0);function lS(t){const e=_B().encode(t),n=new VP;return n.update(e),new Uint8Array(n.digest())}function cS(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Pi([n,r],0),new Pi([s,i],0)]}class xw{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Vc(`Invalid padding: ${n}`);if(r<0)throw new Vc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Vc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Vc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Pi.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Pi.fromNumber(r)));return s.compare(wB)===1&&(s=new Pi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=lS(e),[r,s]=cS(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new xw(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=lS(e),[r,s]=cS(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Vc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,pd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new fd(ue.min(),s,new Ge(ge),Un(),xe())}}class pd{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new pd(r,n,xe(),xe(),xe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class qC{constructor(e,n){this.targetId=e,this.Ce=n}}class HC{constructor(e,n,r=yt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class uS{constructor(){this.ve=0,this.Fe=dS(),this.Me=yt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=xe(),n=xe(),r=xe();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:te(38017,{changeType:i})}}),new pd(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=dS()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,oe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class EB{constructor(e){this.Ge=e,this.ze=new Map,this.je=Un(),this.Je=ch(),this.He=ch(),this.Ye=new Ge(ge)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:te(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(qf(i))if(r===0){const o=new J(i.path);this.et(n,o,mt.newNoDocument(o,ue.min()))}else oe(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Cs(r).toUint8Array()}catch(l){if(l instanceof dC)return Ui("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new xw(o,s,i)}catch(l){return Ui(l instanceof Vc?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const a=this.ot(o);if(a){if(i.current&&qf(a.target)){const l=new J(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,mt.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=xe();this.He.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new fd(e,n,this.Ye,this.je,r);return this.je=Un(),this.Je=ch(),this.He=ch(),this.Ye=new Ge(ge),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new uS,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new ze(ge),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new ze(ge),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new uS),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function ch(){return new Ge(J.comparator)}function dS(){return new Ge(J.comparator)}const TB={asc:"ASCENDING",desc:"DESCENDING"},IB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},SB={and:"AND",or:"OR"};class bB{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function vv(t,e){return t.useProto3Json||qp(e)?e:{value:e}}function El(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function WC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function AB(t,e){return El(t,e.toTimestamp())}function fn(t){return oe(!!t,49232),ue.fromTimestamp(function(n){const r=Ps(n);return new je(r.seconds,r.nanos)}(t))}function Rw(t,e){return _v(t,e).canonicalString()}function _v(t,e){const n=function(s){return new Fe(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function KC(t){const e=Fe.fromString(t);return oe(nk(e),10190,{key:e.toString()}),e}function Kf(t,e){return Rw(t.databaseId,e.path)}function Mo(t,e){const n=KC(e);if(n.get(1)!==t.databaseId.projectId)throw new G(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new G(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new J(YC(n))}function GC(t,e){return Rw(t.databaseId,e)}function QC(t){const e=KC(t);return e.length===4?Fe.emptyPath():YC(e)}function wv(t){return new Fe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function YC(t){return oe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function hS(t,e,n){return{name:Kf(t,e),fields:n.value.mapValue.fields}}function xB(t,e,n){const r=Mo(t,e.name),s=fn(e.updateTime),i=e.createTime?fn(e.createTime):ue.min(),o=new nn({mapValue:{fields:e.fields}}),a=mt.newFoundDocument(r,s,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function RB(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:te(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(oe(d===void 0||typeof d=="string",58123),yt.fromBase64String(d||"")):(oe(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),yt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?B.UNKNOWN:zC(c.code);return new G(d,c.message||"")}(o);n=new HC(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Mo(t,r.document.name),i=fn(r.document.updateTime),o=r.document.createTime?fn(r.document.createTime):ue.min(),a=new nn({mapValue:{fields:r.document.fields}}),l=mt.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new Hh(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Mo(t,r.document),i=r.readTime?fn(r.readTime):ue.min(),o=mt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Hh([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Mo(t,r.document),i=r.removedTargetIds||[];n=new Hh([],i,s,null)}else{if(!("filter"in e))return te(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new yB(s,i),a=r.targetId;n=new qC(a,o)}}return n}function Gf(t,e){let n;if(e instanceof jl)n={update:hS(t,e.key,e.value)};else if(e instanceof Zp)n={delete:Kf(t,e.key)};else if(e instanceof Ms)n={update:hS(t,e.key,e.data),updateMask:OB(e.fieldMask)};else{if(!(e instanceof $C))return te(16599,{Vt:e.type});n={verify:Kf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof _l)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ko)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof wl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof zu)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw te(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:AB(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:te(27497)}(t,e.precondition)),n}function Ev(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?rn.updateTime(fn(i.updateTime)):i.exists!==void 0?rn.exists(i.exists):rn.none()}(e.currentDocument):rn.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(o,a){let l=null;if("setToServerValue"in a)oe(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),l=new _l;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];l=new Ko(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];l=new wl(d)}else"increment"in a?l=new zu(o,a.increment):te(16584,{proto:a});const c=st.fromServerFormat(a.fieldPath);return new Iw(c,l)}(t,s)):[];if(e.update){e.update.name;const s=Mo(t,e.update.name),i=new nn({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const c=l.fieldPaths||[];return new bn(c.map(d=>st.fromServerFormat(d)))}(e.updateMask);return new Ms(s,i,o,n,r)}return new jl(s,i,n,r)}if(e.delete){const s=Mo(t,e.delete);return new Zp(s,n)}if(e.verify){const s=Mo(t,e.verify);return new $C(s,n)}return te(1463,{proto:e})}function PB(t,e){return t&&t.length>0?(oe(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?fn(s.updateTime):fn(i);return o.isEqual(ue.min())&&(o=fn(i)),new pB(o,s.transformResults||[])}(n,e))):[]}function XC(t,e){return{documents:[GC(t,e.path)]}}function JC(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=GC(t,s);const i=function(c){if(c.length!==0)return tk(Be.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(d=>function(f){return{field:va(f.field),direction:kB(f.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=vv(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:s}}function ZC(t){let e=QC(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){oe(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(h){const f=ek(h);return f instanceof Be&&ww(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(E){return new $u(_a(E.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,qp(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(h){const f=!!h.before,p=h.values||[];return new yl(p,f)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const f=!h.before,p=h.values||[];return new yl(p,f)}(n.endAt)),xC(e,s,o,i,a,"F",l,c)}function CB(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function ek(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=_a(n.unaryFilter.field);return De.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=_a(n.unaryFilter.field);return De.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=_a(n.unaryFilter.field);return De.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=_a(n.unaryFilter.field);return De.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return te(61313);default:return te(60726)}}(t):t.fieldFilter!==void 0?function(n){return De.create(_a(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return te(58110);default:return te(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Be.create(n.compositeFilter.filters.map(r=>ek(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return te(1026)}}(n.compositeFilter.op))}(t):te(30097,{filter:t})}function kB(t){return TB[t]}function DB(t){return IB[t]}function NB(t){return SB[t]}function va(t){return{fieldPath:t.canonicalString()}}function _a(t){return st.fromServerFormat(t.fieldPath)}function tk(t){return t instanceof De?function(n){if(n.op==="=="){if(YI(n.value))return{unaryFilter:{field:va(n.field),op:"IS_NAN"}};if(QI(n.value))return{unaryFilter:{field:va(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(YI(n.value))return{unaryFilter:{field:va(n.field),op:"IS_NOT_NAN"}};if(QI(n.value))return{unaryFilter:{field:va(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:va(n.field),op:DB(n.op),value:n.value}}}(t):t instanceof Be?function(n){const r=n.getFilters().map(s=>tk(s));return r.length===1?r[0]:{compositeFilter:{op:NB(n.op),filters:r}}}(t):te(54877,{filter:t})}function OB(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function nk(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e,n,r,s,i=ue.min(),o=ue.min(),a=yt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ms(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ms(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ms(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ms(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e){this.yt=e}}function VB(t,e){let n;if(e.document)n=xB(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=J.fromSegments(e.noDocument.path),s=Qo(e.noDocument.readTime);n=mt.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return te(56709);{const r=J.fromSegments(e.unknownDocument.path),s=Qo(e.unknownDocument.version);n=mt.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime(function(s){const i=new je(s[0],s[1]);return ue.fromTimestamp(i)}(e.readTime)),n}function fS(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Qf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,o){return{name:Kf(i,o.key),fields:o.data.value.mapValue.fields,updateTime:El(i,o.version.toTimestamp()),createTime:El(i,o.createTime.toTimestamp())}}(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Go(e.version)};else{if(!e.isUnknownDocument())return te(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:Go(e.version)}}return r}function Qf(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Go(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Qo(t){const e=new je(t.seconds,t.nanoseconds);return ue.fromTimestamp(e)}function yo(t,e){const n=(e.baseMutations||[]).map(i=>Ev(t.yt,i));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map(i=>Ev(t.yt,i)),s=je.fromMillis(e.localWriteTimeMs);return new Sw(e.batchId,s,n,r)}function Lc(t){const e=Qo(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Qo(t.lastLimboFreeSnapshotVersion):ue.min();let r;return r=function(i){return i.documents!==void 0}(t.query)?function(i){const o=i.documents.length;return oe(o===1,1966,{count:o}),qn(dd(QC(i.documents[0])))}(t.query):function(i){return qn(ZC(i))}(t.query),new ms(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,yt.fromBase64String(t.resumeToken))}function sk(t,e){const n=Go(e.snapshotVersion),r=Go(e.lastLimboFreeSnapshotVersion);let s;s=qf(e.target)?XC(t.yt,e.target):JC(t.yt,e.target).ft;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Wo(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function ik(t){const e=ZC({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Wf(e,e.limit,"L"):e}function Ig(t,e){return new Aw(e.largestBatchId,Ev(t.yt,e.overlayMutation))}function pS(t,e){const n=e.path.lastSegment();return[t,sn(e.path.popLast()),n]}function mS(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Go(r.readTime),documentKey:sn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LB{getBundleMetadata(e,n){return gS(e).get(n).next(r=>{if(r)return function(i){return{id:i.bundleId,createTime:Qo(i.createTime),version:i.version}}(r)})}saveBundleMetadata(e,n){return gS(e).put(function(s){return{bundleId:s.id,createTime:Go(fn(s.createTime)),version:s.version}}(n))}getNamedQuery(e,n){return yS(e).get(n).next(r=>{if(r)return function(i){return{name:i.name,query:ik(i.bundledQuery),readTime:Qo(i.readTime)}}(r)})}saveNamedQuery(e,n){return yS(e).put(function(s){return{name:s.name,readTime:Go(fn(s.readTime)),bundledQuery:s.bundledQuery}}(n))}}function gS(t){return Dt(t,Hp)}function yS(t){return Dt(t,Wp)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new em(e,r)}getOverlay(e,n){return vc(e).get(pS(this.userId,n)).next(r=>r?Ig(this.serializer,r):null)}getOverlays(e,n){const r=Kr();return L.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){const s=[];return r.forEach((i,o)=>{const a=new Aw(n,o);s.push(this.St(e,a))}),L.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach(o=>s.add(sn(o.getCollectionPath())));const i=[];return s.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(vc(e).Z(uv,a))}),L.waitFor(i)}getOverlaysForCollection(e,n,r){const s=Kr(),i=sn(n),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return vc(e).J(uv,o).next(a=>{for(const l of a){const c=Ig(this.serializer,l);s.set(c.getKey(),c)}return s})}getOverlaysForCollectionGroup(e,n,r,s){const i=Kr();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return vc(e).ee({index:iC,range:a},(l,c,d)=>{const h=Ig(this.serializer,c);i.size()<s||h.largestBatchId===o?(i.set(h.getKey(),h),o=h.largestBatchId):d.done()}).next(()=>i)}St(e,n){return vc(e).put(function(s,i,o){const[a,l,c]=pS(i,o.mutation.key);return{userId:i,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Gf(s.yt,o.mutation)}}(this.serializer,this.userId,n))}}function vc(t){return Dt(t,Kp)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MB{bt(e){return Dt(e,mw)}getSessionToken(e){return this.bt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?yt.fromUint8Array(r):yt.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(nt(e.integerValue));else if("doubleValue"in e){const r=nt(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),Ou(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=Ps(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(Cs(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?yC(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):Qp(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):te(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const s of Object.keys(r))this.Ot(s,n),this.Ct(r[s],n)}kt(e,n){var o,a;const r=e.fields||{};this.Ft(n,53);const s=ml,i=((a=(o=r[s].arrayValue)==null?void 0:o.values)==null?void 0:a.length)||0;this.Ft(n,15),n.Mt(nt(i)),this.Ot(s,n),this.Ct(r[s],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const s of r)this.Ct(s,n)}Lt(e,n){this.Ft(n,37),J.fromName(e).path.forEach(r=>{this.Ft(n,60),this.Ut(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}vo.Kt=new vo;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da=255;function FB(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function vS(t){const e=64-function(r){let s=0;for(let i=0;i<8;++i){const o=FB(255&r[i]);if(s+=o,o!==8)break}return s}(t);return Math.ceil(e/8)}class UB{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const s=n.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const s=n.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(e){const n=this.en(e),r=vS(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}nn(e){const n=this.en(e),r=vS(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}rn(){this.sn(da),this.sn(255)}_n(){this.an(da),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===da?(this.sn(da),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===da?(this.an(da),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class jB{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class BB{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class _c{constructor(){this.cn=new UB,this.ln=new jB(this.cn),this.hn=new BB(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e,n,r,s){this.Tn=e,this.In=n,this.En=r,this.dn=s}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new _o(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:Wh(this.En),directionalValue:Wh(this.dn),orderedDocumentKey:Wh(n),documentKey:r.path.toArray()}}Vn(e,n,r){const s=this.Rn(e,n,r);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function Xs(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=_S(t.En,e.En),n!==0?n:(n=_S(t.dn,e.dn),n!==0?n:J.comparator(t.In,e.In)))}function _S(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function Wh(t){return nP()?function(n){let r="";for(let s=0;s<n.length;s++)r+=String.fromCharCode(n[s]);return r}(t):t}function wS(t){return typeof t!="string"?t:function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(t)}class ES{constructor(e){this.mn=new ze((n,r)=>st.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(oe(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=av(e);if(n!==void 0&&!this.wn(n))return!1;const r=fo(e);let s=new Set,i=0,o=0;for(;i<r.length&&this.wn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.mn.size>0){const a=this.mn.getIterator().getNext();if(!s.has(a.field.canonicalString())){const l=r[i];if(!this.Sn(a,l)||!this.bn(this.fn[o++],l))return!1}++i}for(;i<r.length;++i){const a=r[i];if(o>=this.fn.length||!this.bn(this.fn[o++],a))return!1}return!0}Dn(){if(this.pn)return null;let e=new ze(st.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Fh(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Fh(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Fh(r.field,r.dir==="asc"?0:1)));return new Uf(Uf.UNKNOWN_ID,this.collectionId,n,Nu.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ok(t){var n,r;if(oe(t instanceof De||t instanceof Be,20012),t instanceof De){if(t instanceof AC){const s=((r=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:r.map(i=>De.create(t.field,"==",i)))||[];return Be.create(s,"or")}return t}const e=t.filters.map(s=>ok(s));return Be.create(e,t.op)}function $B(t){if(t.getFilters().length===0)return[];const e=Sv(ok(t));return oe(ak(e),7391),Tv(e)||Iv(e)?[e]:e.getFilters()}function Tv(t){return t instanceof De}function Iv(t){return t instanceof Be&&ww(t)}function ak(t){return Tv(t)||Iv(t)||function(n){if(n instanceof Be&&pv(n)){for(const r of n.getFilters())if(!Tv(r)&&!Iv(r))return!1;return!0}return!1}(t)}function Sv(t){if(oe(t instanceof De||t instanceof Be,34018),t instanceof De)return t;if(t.filters.length===1)return Sv(t.filters[0]);const e=t.filters.map(r=>Sv(r));let n=Be.create(e,t.op);return n=Yf(n),ak(n)?n:(oe(n instanceof Be,64498),oe(vl(n),40251),oe(n.filters.length>1,57927),n.filters.reduce((r,s)=>Pw(r,s)))}function Pw(t,e){let n;return oe(t instanceof De||t instanceof Be,38388),oe(e instanceof De||e instanceof Be,25473),n=t instanceof De?e instanceof De?function(s,i){return Be.create([s,i],"and")}(t,e):TS(t,e):e instanceof De?TS(e,t):function(s,i){if(oe(s.filters.length>0&&i.filters.length>0,48005),vl(s)&&vl(i))return IC(s,i.getFilters());const o=pv(s)?s:i,a=pv(s)?i:s,l=o.filters.map(c=>Pw(c,a));return Be.create(l,"or")}(t,e),Yf(n)}function TS(t,e){if(vl(e))return IC(e,t.getFilters());{const n=e.filters.map(r=>Pw(t,r));return Be.create(n,"or")}}function Yf(t){if(oe(t instanceof De||t instanceof Be,11850),t instanceof De)return t;const e=t.getFilters();if(e.length===1)return Yf(e[0]);if(EC(t))return t;const n=e.map(s=>Yf(s)),r=[];return n.forEach(s=>{s instanceof De?r.push(s):s instanceof Be&&(s.op===t.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:Be.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zB{constructor(){this.Cn=new Cw}addToCollectionParentIndex(e,n){return this.Cn.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(Wn.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(Wn.min())}updateCollectionGroup(e,n,r){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class Cw{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new ze(Fe.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ze(Fe.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS="IndexedDbIndexManager",uh=new Uint8Array(0);class qB{constructor(e,n){this.databaseId=n,this.vn=new Cw,this.Fn=new Ls(r=>Wo(r),(r,s)=>ud(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(()=>{this.vn.add(n)});const i={collectionId:r,parent:sn(s)};return SS(e).put(i)}return L.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[qP(n),""],!1,!0);return SS(e).J(s).next(i=>{for(const o of i){if(o.collectionId!==n)break;r.push(Wr(o.parent))}return r})}addFieldIndex(e,n){const r=wc(e),s=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete s.indexId;const i=r.add(s);if(n.indexState){const o=fa(e);return i.next(a=>{o.put(mS(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return i.next()}deleteFieldIndex(e,n){const r=wc(e),s=fa(e),i=ha(e);return r.delete(n.indexId).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=wc(e),r=ha(e),s=fa(e);return n.Z().next(()=>r.Z()).next(()=>s.Z())}createTargetIndexes(e,n){return L.forEach(this.Mn(n),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const i=new ES(r).Dn();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,n){const r=ha(e);let s=!0;const i=new Map;return L.forEach(this.Mn(n),o=>this.xn(e,o).next(a=>{s&&(s=!!a),i.set(o,a)})).next(()=>{if(s){let o=xe();const a=[];return L.forEach(i,(l,c)=>{H(IS,`Using index ${function(T){return`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(k=>`${k.fieldPath}:${k.kind}`).join(",")}`}(l)} to execute ${Wo(n)}`);const d=function(T,k){const O=av(k);if(O===void 0)return null;for(const V of Hf(T,O.fieldPath))switch(V.op){case"array-contains-any":return V.value.arrayValue.values||[];case"array-contains":return[V.value]}return null}(c,l),h=function(T,k){const O=new Map;for(const V of fo(k))for(const S of Hf(T,V.fieldPath))switch(S.op){case"==":case"in":O.set(V.fieldPath.canonicalString(),S.value);break;case"not-in":case"!=":return O.set(V.fieldPath.canonicalString(),S.value),Array.from(O.values())}return null}(c,l),f=function(T,k){const O=[];let V=!0;for(const S of fo(k)){const I=S.kind===0?tS(T,S.fieldPath,T.startAt):nS(T,S.fieldPath,T.startAt);O.push(I.value),V&&(V=I.inclusive)}return new yl(O,V)}(c,l),p=function(T,k){const O=[];let V=!0;for(const S of fo(k)){const I=S.kind===0?nS(T,S.fieldPath,T.endAt):tS(T,S.fieldPath,T.endAt);O.push(I.value),V&&(V=I.inclusive)}return new yl(O,V)}(c,l),E=this.On(l,c,f),g=this.On(l,c,p),v=this.Nn(l,c,h),_=this.Bn(l.indexId,d,E,f.inclusive,g,p.inclusive,v);return L.forEach(_,w=>r.Y(w,n.limit).next(T=>{T.forEach(k=>{const O=J.fromSegments(k.documentKey);o.has(O)||(o=o.add(O),a.push(O))})}))}).next(()=>a)}return L.resolve(null)})}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=$B(Be.create(e.filters,"and")).map(r=>gv(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,n),n)}Bn(e,n,r,s,i,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,i.length),c=l/(n!=null?n.length:1),d=[];for(let h=0;h<l;++h){const f=n?this.Ln(n[h/c]):uh,p=this.kn(e,f,r[h%c],s),E=this.qn(e,f,i[h%c],o),g=a.map(v=>this.kn(e,f,v,!0));d.push(...this.createRange(p,E,g))}return d}kn(e,n,r,s){const i=new _o(e,J.empty(),n,r);return s?i:i.An()}qn(e,n,r,s){const i=new _o(e,J.empty(),n,r);return s?i.An():i}xn(e,n){const r=new ES(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let o=null;for(const a of i)r.yn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const s=this.Mn(n);return L.forEach(s,i=>this.xn(e,i).next(o=>{o?r!==0&&o.fields.length<function(l){let c=new ze(st.comparator),d=!1;for(const h of l.filters)for(const f of h.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?d=!0:c=c.add(f.field));for(const h of l.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(d?1:0)}(i)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&s.length>1&&r===2?1:r)}Qn(e,n){const r=new _c;for(const s of fo(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const o=r.Pn(s.kind);vo.Kt.Dt(i,o)}return r.un()}Ln(e){const n=new _c;return vo.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new _c;return vo.Kt.Dt(ju(this.databaseId,n),r.Pn(function(i){const o=fo(i);return o.length===0?0:o[o.length-1].kind}(e))),r.un()}Nn(e,n,r){if(r===null)return[];let s=[];s.push(new _c);let i=0;for(const o of fo(e)){const a=r[i++];for(const l of s)if(this.Un(n,o.fieldPath)&&Bu(a))s=this.Kn(s,o,a);else{const c=l.Pn(o.kind);vo.Kt.Dt(a,c)}}return this.Wn(s)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const a of s){const l=new _c;l.seed(a.un()),vo.Kt.Dt(o,l.Pn(n.kind)),i.push(l)}return i}Un(e,n){return!!e.filters.find(r=>r instanceof De&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=wc(e),s=fa(e);return(n?r.J(cv,IDBKeyRange.bound(n,n)):r.J()).next(i=>{const o=[];return L.forEach(i,a=>s.get([a.indexId,this.uid]).next(l=>{o.push(function(d,h){const f=h?new Nu(h.sequenceNumber,new Wn(Qo(h.readTime),new J(Wr(h.documentKey)),h.largestBatchId)):Nu.empty(),p=d.fields.map(([E,g])=>new Fh(st.fromServerFormat(E),g));return new Uf(d.indexId,d.collectionGroup,p,f)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:ge(r.collectionGroup,s.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const s=wc(e),i=fa(e);return this.Gn(e).next(o=>s.J(cv,IDBKeyRange.bound(n,n)).next(a=>L.forEach(a,l=>i.put(mS(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return L.forEach(n,(s,i)=>{const o=r.get(s.collectionGroup);return(o?L.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next(a=>(r.set(s.collectionGroup,a),L.forEach(a,l=>this.zn(e,s,l).next(c=>{const d=this.jn(i,l);return c.isEqual(d)?L.resolve():this.Jn(e,i,l,c,d)}))))})}Hn(e,n,r,s){return ha(e).put(s.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,s){return ha(e).delete(s.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const s=ha(e);let i=new ze(Xs);return s.ee({index:sC,range:IDBKeyRange.only([r.indexId,this.uid,Wh(this.$n(r,n))])},(o,a)=>{i=i.add(new _o(r.indexId,n,wS(a.arrayValue),wS(a.directionalValue)))}).next(()=>i)}jn(e,n){let r=new ze(Xs);const s=this.Qn(n,e);if(s==null)return r;const i=av(n);if(i!=null){const o=e.data.field(i.fieldPath);if(Bu(o))for(const a of o.arrayValue.values||[])r=r.add(new _o(n.indexId,e.key,this.Ln(a),s))}else r=r.add(new _o(n.indexId,e.key,uh,s));return r}Jn(e,n,r,s,i){H(IS,"Updating index entries for document '%s'",n.key);const o=[];return function(l,c,d,h,f){const p=l.getIterator(),E=c.getIterator();let g=ua(p),v=ua(E);for(;g||v;){let _=!1,w=!1;if(g&&v){const T=d(g,v);T<0?w=!0:T>0&&(_=!0)}else g!=null?w=!0:_=!0;_?(h(v),v=ua(E)):w?(f(g),g=ua(p)):(g=ua(p),v=ua(E))}}(s,i,Xs,a=>{o.push(this.Hn(e,n,r,a))},a=>{o.push(this.Yn(e,n,r,a))}),L.waitFor(o)}Gn(e){let n=1;return fa(e).ee({index:rC,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,i)=>{i.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Xs(o,a)).filter((o,a,l)=>!a||Xs(o,l[a-1])!==0);const s=[];s.push(e);for(const o of r){const a=Xs(o,e),l=Xs(o,n);if(a===0)s[0]=e.An();else if(a>0&&l<0)s.push(o),s.push(o.An());else if(l>0)break}s.push(n);const i=[];for(let o=0;o<s.length;o+=2){if(this.Zn(s[o],s[o+1]))return[];const a=s[o].Vn(this.uid,uh,J.empty()),l=s[o+1].Vn(this.uid,uh,J.empty());i.push(IDBKeyRange.bound(a,l))}return i}Zn(e,n){return Xs(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(bS)}getMinOffset(e,n){return L.mapArray(this.Mn(n),r=>this.xn(e,r).next(s=>s||te(44426))).next(bS)}}function SS(t){return Dt(t,Mu)}function ha(t){return Dt(t,Jc)}function wc(t){return Dt(t,pw)}function fa(t){return Dt(t,Xc)}function bS(t){oe(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;dw(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new Wn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},lk=41943040;class Zt{static withCacheSize(e){return new Zt(e,Zt.DEFAULT_COLLECTION_PERCENTILE,Zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ck(t,e,n){const r=t.store(mr),s=t.store(dl),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.ee({range:o},(d,h,f)=>(a++,f.delete()));i.push(l.next(()=>{oe(a===1,47070,{batchId:n.batchId})}));const c=[];for(const d of n.mutations){const h=eC(e,d.key.path,n.batchId);i.push(s.delete(h)),c.push(d.key)}return L.waitFor(i).next(()=>c)}function Xf(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw te(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zt.DEFAULT_COLLECTION_PERCENTILE=10,Zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zt.DEFAULT=new Zt(lk,Zt.DEFAULT_COLLECTION_PERCENTILE,Zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zt.DISABLED=new Zt(-1,0,0);class tm{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.Xn={}}static wt(e,n,r,s){oe(e.uid!=="",64387);const i=e.isAuthenticated()?e.uid:"";return new tm(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Js(e).ee({index:bo,range:r},(s,i,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,s){const i=wa(e),o=Js(e);return o.add({}).next(a=>{oe(typeof a=="number",49019);const l=new Sw(a,n,r,s),c=function(p,E,g){const v=g.baseMutations.map(w=>Gf(p.yt,w)),_=g.mutations.map(w=>Gf(p.yt,w));return{userId:E,batchId:g.batchId,localWriteTimeMs:g.localWriteTime.toMillis(),baseMutations:v,mutations:_}}(this.serializer,this.userId,l),d=[];let h=new ze((f,p)=>ge(f.canonicalString(),p.canonicalString()));for(const f of s){const p=eC(this.userId,f.key.path,a);h=h.add(f.key.path.popLast()),d.push(o.put(c)),d.push(i.put(p,T5))}return h.forEach(f=>{d.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Xn[a]=l.keys()}),L.waitFor(d).next(()=>l)})}lookupMutationBatch(e,n){return Js(e).get(n).next(r=>r?(oe(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),yo(this.serializer,r)):null)}er(e,n){return this.Xn[n]?L.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const s=r.keys();return this.Xn[n]=s,s}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return Js(e).ee({index:bo,range:s},(o,a,l)=>{a.userId===this.userId&&(oe(a.batchId>=r,47524,{tr:r}),i=yo(this.serializer,a)),l.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Vo;return Js(e).ee({index:bo,range:n,reverse:!0},(s,i,o)=>{r=i.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,Vo],[this.userId,Number.POSITIVE_INFINITY]);return Js(e).J(bo,n).next(r=>r.map(s=>yo(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Uh(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return wa(e).ee({range:s},(o,a,l)=>{const[c,d,h]=o,f=Wr(d);if(c===this.userId&&n.path.isEqual(f))return Js(e).get(h).next(p=>{if(!p)throw te(61480,{nr:o,batchId:h});oe(p.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:p.userId,batchId:h}),i.push(yo(this.serializer,p))});l.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ze(ge);const s=[];return n.forEach(i=>{const o=Uh(this.userId,i.path),a=IDBKeyRange.lowerBound(o),l=wa(e).ee({range:a},(c,d,h)=>{const[f,p,E]=c,g=Wr(p);f===this.userId&&i.path.isEqual(g)?r=r.add(E):h.done()});s.push(l)}),L.waitFor(s).next(()=>this.rr(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=Uh(this.userId,r),o=IDBKeyRange.lowerBound(i);let a=new ze(ge);return wa(e).ee({range:o},(l,c,d)=>{const[h,f,p]=l,E=Wr(f);h===this.userId&&r.isPrefixOf(E)?E.length===s&&(a=a.add(p)):d.done()}).next(()=>this.rr(e,a))}rr(e,n){const r=[],s=[];return n.forEach(i=>{s.push(Js(e).get(i).next(o=>{if(o===null)throw te(35274,{batchId:i});oe(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:i}),r.push(yo(this.serializer,o))}))}),L.waitFor(s).next(()=>r)}removeMutationBatch(e,n){return ck(e.le,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.ir(n.batchId)}),L.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return L.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),s=[];return wa(e).ee({range:r},(i,o,a)=>{if(i[0]===this.userId){const l=Wr(i[1]);s.push(l)}else a.done()}).next(()=>{oe(s.length===0,56720,{sr:s.map(i=>i.canonicalString())})})})}containsKey(e,n){return uk(e,this.userId,n)}_r(e){return dk(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:Vo,lastStreamToken:""})}}function uk(t,e,n){const r=Uh(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return wa(t).ee({range:i,X:!0},(a,l,c)=>{const[d,h,f]=a;d===e&&h===s&&(o=!0),c.done()}).next(()=>o)}function Js(t){return Dt(t,mr)}function wa(t){return Dt(t,dl)}function dk(t){return Dt(t,Vu)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Yo(0)}static cr(){return new Yo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HB{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next(n=>{const r=new Yo(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(n=>ue.fromTimestamp(new je(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.lr(e).next(s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.hr(e,s)))}addTargetData(e,n){return this.Pr(e,n).next(()=>this.lr(e).next(r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>pa(e).delete(n.targetId)).next(()=>this.lr(e)).next(r=>(oe(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r)))}removeTargets(e,n,r){let s=0;const i=[];return pa(e).ee((o,a)=>{const l=Lc(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(s++,i.push(this.removeTargetData(e,l)))}).next(()=>L.waitFor(i)).next(()=>s)}forEachTarget(e,n){return pa(e).ee((r,s)=>{const i=Lc(s);n(i)})}lr(e){return xS(e).get($f).next(n=>(oe(n!==null,2888),n))}hr(e,n){return xS(e).put($f,n)}Pr(e,n){return pa(e).put(sk(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Wo(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return pa(e).ee({range:s,index:nC},(o,a,l)=>{const c=Lc(a);ud(n,c.target)&&(i=c,l.done())}).next(()=>i)}addMatchingKeys(e,n,r){const s=[],i=ii(e);return n.forEach(o=>{const a=sn(o.path);s.push(i.put({targetId:r,path:a})),s.push(this.referenceDelegate.addReference(e,r,o))}),L.waitFor(s)}removeMatchingKeys(e,n,r){const s=ii(e);return L.forEach(n,i=>{const o=sn(i.path);return L.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])})}removeMatchingKeysForTargetId(e,n){const r=ii(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=ii(e);let i=xe();return s.ee({range:r,X:!0},(o,a,l)=>{const c=Wr(o[1]),d=new J(c);i=i.add(d)}).next(()=>i)}containsKey(e,n){const r=sn(n.path),s=IDBKeyRange.bound([r],[qP(r)],!1,!0);let i=0;return ii(e).ee({index:fw,X:!0,range:s},([o,a],l,c)=>{o!==0&&(i++,c.done())}).next(()=>i>0)}At(e,n){return pa(e).get(n).next(r=>r?Lc(r):null)}}function pa(t){return Dt(t,hl)}function xS(t){return Dt(t,Lo)}function ii(t){return Dt(t,fl)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS="LruGarbageCollector",hk=1048576;function PS([t,e],[n,r]){const s=ge(t,n);return s===0?ge(e,r):s}class WB{constructor(e){this.Ir=e,this.buffer=new ze(PS),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();PS(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class fk{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){H(RS,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Zi(n)?H(RS,"Ignoring IndexedDB error during garbage collection: ",n):await Ji(n)}await this.Vr(3e5)})}}class KB{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return L.resolve(Sn.ce);const r=new WB(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(AS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),AS):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,a,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,o=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(i=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),ga()<=Ce.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:h})))}}function pk(t,e){return new KB(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GB{constructor(e,n){this.db=e,this.garbageCollector=pk(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,(r,s)=>n(s))}addReference(e,n,r){return dh(e,r)}removeReference(e,n,r){return dh(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return dh(e,n)}br(e,n){return function(s,i){let o=!1;return dk(s).te(a=>uk(s,a,i).next(l=>(l&&(o=!0),L.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.Sr(e,(o,a)=>{if(a<=n){const l=this.br(e,o).next(c=>{if(!c)return i++,r.getEntry(e,o).next(()=>(r.removeEntry(o,ue.min()),ii(e).delete(function(h){return[0,sn(h.path)]}(o))))});s.push(l)}}).next(()=>L.waitFor(s)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return dh(e,n)}Sr(e,n){const r=ii(e);let s,i=Sn.ce;return r.ee({index:fw},([o,a],{path:l,sequenceNumber:c})=>{o===0?(i!==Sn.ce&&n(new J(Wr(s)),i),i=c,s=l):i=Sn.ce}).next(()=>{i!==Sn.ce&&n(new J(Wr(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function dh(t,e){return ii(t).put(function(r,s){return{targetId:0,path:sn(r.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(){this.changes=new Ls(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,mt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QB{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return lo(e).put(r)}removeEntry(e,n,r){return lo(e).delete(function(i,o){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Qf(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Dr(e,r)))}getEntry(e,n){let r=mt.newInvalidDocument(n);return lo(e).ee({index:jh,range:IDBKeyRange.only(Ec(n))},(s,i)=>{r=this.Cr(n,i)}).next(()=>r)}vr(e,n){let r={size:0,document:mt.newInvalidDocument(n)};return lo(e).ee({index:jh,range:IDBKeyRange.only(Ec(n))},(s,i)=>{r={document:this.Cr(n,i),size:Xf(i)}}).next(()=>r)}getEntries(e,n){let r=Un();return this.Fr(e,n,(s,i)=>{const o=this.Cr(s,i);r=r.insert(s,o)}).next(()=>r)}Mr(e,n){let r=Un(),s=new Ge(J.comparator);return this.Fr(e,n,(i,o)=>{const a=this.Cr(i,o);r=r.insert(i,a),s=s.insert(i,Xf(o))}).next(()=>({documents:r,Or:s}))}Fr(e,n,r){if(n.isEmpty())return L.resolve();let s=new ze(DS);n.forEach(l=>s=s.add(l));const i=IDBKeyRange.bound(Ec(s.first()),Ec(s.last())),o=s.getIterator();let a=o.getNext();return lo(e).ee({index:jh,range:i},(l,c,d)=>{const h=J.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&DS(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?d.j(Ec(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,s,i){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),Qf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return lo(e).J(IDBKeyRange.bound(a,l,!0)).next(c=>{i==null||i.incrementDocumentReadCount(c.length);let d=Un();for(const h of c){const f=this.Cr(J.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);f.isFoundDocument()&&(hd(n,f)||s.has(f.key))&&(d=d.insert(f.key,f))}return d})}getAllFromCollectionGroup(e,n,r,s){let i=Un();const o=kS(n,r),a=kS(n,Wn.max());return lo(e).ee({index:tC,range:IDBKeyRange.bound(o,a,!0)},(l,c,d)=>{const h=this.Cr(J.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);i=i.insert(h.key,h),i.size===s&&d.done()}).next(()=>i)}newChangeBuffer(e){return new YB(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return CS(e).get(lv).next(n=>(oe(!!n,20021),n))}Dr(e,n){return CS(e).put(lv,n)}Cr(e,n){if(n){const r=VB(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(ue.min())))return r}return mt.newInvalidDocument(e)}}function gk(t){return new QB(t)}class YB extends mk{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new Ls(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const n=[];let r=0,s=new ze((i,o)=>ge(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const a=this.Br.get(i);if(n.push(this.Nr.removeEntry(e,i,a.readTime)),o.isValidDocument()){const l=fS(this.Nr.serializer,o);s=s.add(i.path.popLast());const c=Xf(l);r+=c-a.size,n.push(this.Nr.addEntry(e,i,l))}else if(r-=a.size,this.trackRemovals){const l=fS(this.Nr.serializer,o.convertToNoDocument(ue.min()));n.push(this.Nr.addEntry(e,i,l))}}),s.forEach(i=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,i))}),n.push(this.Nr.updateMetadata(e,r)),L.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next(r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next(({documents:r,Or:s})=>(s.forEach((i,o)=>{this.Br.set(i,{size:o,readTime:r.get(i).readTime})}),r))}}function CS(t){return Dt(t,Lu)}function lo(t){return Dt(t,Bf)}function Ec(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function kS(t,e){const n=e.documentKey.path.toArray();return[t,Qf(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function DS(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=ge(n[i],r[i]),s)return s;return s=ge(n.length,r.length),s||(s=ge(n[n.length-2],r[r.length-2]),s||ge(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XB{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&nu(r.mutation,s,bn.empty(),je.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,xe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=xe()){const s=Kr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Oc();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Kr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,xe()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Un();const o=tu(),a=function(){return tu()}();return n.forEach((l,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof Ms)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),nu(d.mutation,c,d.mutation.getFieldMask(),je.now())):o.set(c.key,bn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>a.set(c,new XB(d,o.get(c)??null))),a))}recalculateAndSaveOverlays(e,n){const r=tu();let s=new Ge((o,a)=>o-a),i=xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||bn.empty();d=a.applyToLocalView(c,d),r.set(l,d);const h=(s.get(a.batchId)||xe()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,h=OC();d.forEach(f=>{if(!i.has(f)){const p=jC(n.get(f),r.get(f));p!==null&&h.set(f,p),i=i.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return L.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return J.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):RC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):L.resolve(Kr());let a=ul,l=i;return o.next(c=>L.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(d)?L.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{l=l.insert(d,f)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,xe())).next(d=>({batchId:a,changes:NC(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new J(n)).next(r=>{let s=Oc();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Oc();return this.indexManager.getCollectionParents(e,i).next(a=>L.forEach(a,l=>{const c=function(h,f){return new Ul(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(d=>{d.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,mt.newInvalidDocument(d)))});let a=Oc();return o.forEach((l,c)=>{const d=i.get(l);d!==void 0&&nu(d.mutation,c,bn.empty(),je.now()),hd(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JB{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return L.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:fn(s.createTime)}}(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:ik(s.bundledQuery),readTime:fn(s.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZB{constructor(){this.overlays=new Ge(J.comparator),this.qr=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Kr();return L.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),L.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),L.resolve()}getOverlaysForCollection(e,n,r){const s=Kr(),i=n.length+1,o=new J(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return L.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ge((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=Kr(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=Kr(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return L.resolve(a)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Aw(n,r));let i=this.qr.get(n);i===void 0&&(i=xe(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e${constructor(){this.sessionToken=yt.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(){this.Qr=new ze(Ft.$r),this.Ur=new ze(Ft.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Ft(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Ft(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new J(new Fe([])),r=new Ft(n,e),s=new Ft(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new J(new Fe([])),r=new Ft(n,e),s=new Ft(n,e+1);let i=xe();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ft(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ft{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return J.comparator(e.key,n.key)||ge(e.Yr,n.Yr)}static Kr(e,n){return ge(e.Yr,n.Yr)||J.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t${constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ze(Ft.$r)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Sw(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Zr=this.Zr.add(new Ft(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return L.resolve(o)}lookupMutationBatch(e,n){return L.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return L.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?Vo:this.tr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ft(n,0),s=new Ft(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const a=this.Xr(o.Yr);i.push(a)}),L.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ze(ge);return n.forEach(s=>{const i=new Ft(s,0),o=new Ft(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],a=>{r=r.add(a.Yr)})}),L.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;J.isDocumentKey(i)||(i=i.child(""));const o=new Ft(new J(i),0);let a=new ze(ge);return this.Zr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.Yr)),!0)},o),L.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){oe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return L.forEach(n.mutations,s=>{const i=new Ft(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Ft(n,0),s=this.Zr.firstAfterOrEqual(r);return L.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n${constructor(e){this.ri=e,this.docs=function(){return new Ge(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():mt.newInvalidDocument(n))}getEntries(e,n){let r=Un();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():mt.newInvalidDocument(s))}),L.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Un();const o=n.path,a=new J(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||dw(QP(d),r)<=0||(s.has(d.key)||hd(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return L.resolve(i)}getAllFromCollectionGroup(e,n,r,s){te(9500)}ii(e,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new r$(this)}getSize(e){return L.resolve(this.size)}}class r$ extends mk{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),L.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s${constructor(e){this.persistence=e,this.si=new Ls(n=>Wo(n),ud),this.lastRemoteSnapshotVersion=ue.min(),this.highestTargetId=0,this.oi=0,this._i=new kw,this.targetCount=0,this.ai=Yo.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),L.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Yo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.Pr(n),L.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),L.waitFor(i).next(()=>s)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return L.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),L.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),L.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),L.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return L.resolve(r)}containsKey(e,n){return L.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(e,n){this.ui={},this.overlays={},this.ci=new Sn(0),this.li=!1,this.li=!0,this.hi=new e$,this.referenceDelegate=e(this),this.Pi=new s$(this),this.indexManager=new zB,this.remoteDocumentCache=function(s){return new n$(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new rk(n),this.Ii=new JB(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new ZB,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new t$(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){H("MemoryPersistence","Starting transaction:",e);const s=new i$(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return L.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class i$ extends XP{constructor(e){super(),this.currentSequenceNumber=e}}class nm{constructor(e){this.persistence=e,this.Ri=new kw,this.Vi=null}static mi(e){return new nm(e)}get fi(){if(this.Vi)return this.Vi;throw te(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),L.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),L.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.fi,r=>{const s=J.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,ue.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return L.or([()=>L.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Jf{constructor(e,n){this.persistence=e,this.pi=new Ls(r=>sn(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=pk(this,n)}static mi(e,n){return new Jf(e,n)}Ei(){}di(e){return L.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return L.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?L.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,i.removeEntry(o,ue.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),L.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),L.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=$h(e.data.value)),n}br(e,n,r){return L.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return L.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o${constructor(e){this.serializer=e}k(e,n,r,s){const i=new zp("createOrUpgrade",n);r<1&&s>=1&&(function(l){l.createObjectStore(cd)}(e),function(l){l.createObjectStore(Vu,{keyPath:E5}),l.createObjectStore(mr,{keyPath:zI,autoIncrement:!0}).createIndex(bo,qI,{unique:!0}),l.createObjectStore(dl)}(e),NS(e),function(l){l.createObjectStore(po)}(e));let o=L.resolve();return r<3&&s>=3&&(r!==0&&(function(l){l.deleteObjectStore(fl),l.deleteObjectStore(hl),l.deleteObjectStore(Lo)}(e),NS(e)),o=o.next(()=>function(l){const c=l.store(Lo),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ue.min().toTimestamp(),targetCount:0};return c.put($f,d)}(i))),r<4&&s>=4&&(r!==0&&(o=o.next(()=>function(l,c){return c.store(mr).J().next(h=>{l.deleteObjectStore(mr),l.createObjectStore(mr,{keyPath:zI,autoIncrement:!0}).createIndex(bo,qI,{unique:!0});const f=c.store(mr),p=h.map(E=>f.put(E));return L.waitFor(p)})}(e,i))),o=o.next(()=>{(function(l){l.createObjectStore(pl,{keyPath:C5})})(e)})),r<5&&s>=5&&(o=o.next(()=>this.yi(i))),r<6&&s>=6&&(o=o.next(()=>(function(l){l.createObjectStore(Lu)}(e),this.wi(i)))),r<7&&s>=7&&(o=o.next(()=>this.Si(i))),r<8&&s>=8&&(o=o.next(()=>this.bi(e,i))),r<9&&s>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(o=o.next(()=>this.Di(i))),r<11&&s>=11&&(o=o.next(()=>{(function(l){l.createObjectStore(Hp,{keyPath:k5})})(e),function(l){l.createObjectStore(Wp,{keyPath:D5})}(e)})),r<12&&s>=12&&(o=o.next(()=>{(function(l){const c=l.createObjectStore(Kp,{keyPath:U5});c.createIndex(uv,j5,{unique:!1}),c.createIndex(iC,B5,{unique:!1})})(e)})),r<13&&s>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore(Bf,{keyPath:I5});c.createIndex(jh,S5),c.createIndex(tC,b5)}(e)).next(()=>this.Ci(e,i)).next(()=>e.deleteObjectStore(po))),r<14&&s>=14&&(o=o.next(()=>this.Fi(e,i))),r<15&&s>=15&&(o=o.next(()=>function(l){l.createObjectStore(pw,{keyPath:N5,autoIncrement:!0}).createIndex(cv,O5,{unique:!1}),l.createObjectStore(Xc,{keyPath:V5}).createIndex(rC,L5,{unique:!1}),l.createObjectStore(Jc,{keyPath:M5}).createIndex(sC,F5,{unique:!1})}(e))),r<16&&s>=16&&(o=o.next(()=>{n.objectStore(Xc).clear()}).next(()=>{n.objectStore(Jc).clear()})),r<17&&s>=17&&(o=o.next(()=>{(function(l){l.createObjectStore(mw,{keyPath:$5})})(e)})),r<18&&s>=18&&nP()&&(o=o.next(()=>{n.objectStore(Xc).clear()}).next(()=>{n.objectStore(Jc).clear()})),o}wi(e){let n=0;return e.store(po).ee((r,s)=>{n+=Xf(s)}).next(()=>{const r={byteSize:n};return e.store(Lu).put(lv,r)})}yi(e){const n=e.store(Vu),r=e.store(mr);return n.J().next(s=>L.forEach(s,i=>{const o=IDBKeyRange.bound([i.userId,Vo],[i.userId,i.lastAcknowledgedBatchId]);return r.J(bo,o).next(a=>L.forEach(a,l=>{oe(l.userId===i.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const c=yo(this.serializer,l);return ck(e,i.userId,c).next(()=>{})}))}))}Si(e){const n=e.store(fl),r=e.store(po);return e.store(Lo).get($f).next(s=>{const i=[];return r.ee((o,a)=>{const l=new Fe(o),c=function(h){return[0,sn(h)]}(l);i.push(n.get(c).next(d=>d?L.resolve():(h=>n.put({targetId:0,path:sn(h),sequenceNumber:s.highestListenSequenceNumber}))(l)))}).next(()=>L.waitFor(i))})}bi(e,n){e.createObjectStore(Mu,{keyPath:P5});const r=n.store(Mu),s=new Cw,i=o=>{if(s.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:sn(l)})}};return n.store(po).ee({X:!0},(o,a)=>{const l=new Fe(o);return i(l.popLast())}).next(()=>n.store(dl).ee({X:!0},([o,a,l],c)=>{const d=Wr(a);return i(d.popLast())}))}Di(e){const n=e.store(hl);return n.ee((r,s)=>{const i=Lc(s),o=sk(this.serializer,i);return n.put(o)})}Ci(e,n){const r=n.store(po),s=[];return r.ee((i,o)=>{const a=n.store(Bf),l=function(h){return h.document?new J(Fe.fromString(h.document.name).popFirst(5)):h.noDocument?J.fromSegments(h.noDocument.path):h.unknownDocument?J.fromSegments(h.unknownDocument.path):te(36783)}(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(c))}).next(()=>L.waitFor(s))}Fi(e,n){const r=n.store(mr),s=gk(this.serializer),i=new Dw(nm.mi,this.serializer.yt);return r.J().next(o=>{const a=new Map;return o.forEach(l=>{let c=a.get(l.userId)??xe();yo(this.serializer,l).keys().forEach(d=>c=c.add(d)),a.set(l.userId,c)}),L.forEach(a,(l,c)=>{const d=new Jt(c),h=em.wt(this.serializer,d),f=i.getIndexManager(d),p=tm.wt(d,this.serializer,f,i.referenceDelegate);return new yk(s,p,h,f).recalculateAndSaveOverlaysForDocumentKeys(new dv(n,Sn.ce),l).next()})})}}function NS(t){t.createObjectStore(fl,{keyPath:x5}).createIndex(fw,R5,{unique:!0}),t.createObjectStore(hl,{keyPath:"targetId"}).createIndex(nC,A5,{unique:!0}),t.createObjectStore(Lo)}const Zs="IndexedDbPersistence",Sg=18e5,bg=5e3,Ag="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",a$="main";class Nw{constructor(e,n,r,s,i,o,a,l,c,d,h=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=i,this.window=o,this.document=a,this.xi=c,this.Oi=d,this.Ni=h,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=f=>Promise.resolve(),!Nw.v())throw new G(B.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new GB(this,s),this.$i=n+a$,this.serializer=new rk(l),this.Ui=new Ci(this.$i,this.Ni,new o$(this.serializer)),this.hi=new MB,this.Pi=new HB(this.referenceDelegate,this.serializer),this.remoteDocumentCache=gk(this.serializer),this.Ii=new LB,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,d===!1&&_t(Zs,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new G(B.FAILED_PRECONDITION,Ag);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new Sn(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>hh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(n=>this.isPrimary&&!n?this.Zi(e).next(()=>!1):!!n&&this.Xi(e).next(()=>!0))).catch(e=>{if(Zi(e))return H(Zs,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return H(Zs,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return Tc(e).get(ca).next(n=>L.resolve(this.es(n)))}ts(e){return hh(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Sg)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Dt(n,pl);return r.J().next(s=>{const i=this.ss(s,Sg),o=s.filter(a=>i.indexOf(a)===-1);return L.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?L.resolve(!0):Tc(e).get(ca).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,bg)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new G(B.FAILED_PRECONDITION,Ag);return!1}}return!(!this.networkEnabled||!this.inForeground)||hh(e).J().next(r=>this.ss(r,bg).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(i||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&H(Zs,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[cd,pl],e=>{const n=new dv(e,Sn.ce);return this.Zi(n).next(()=>this.ts(n))}),this.Ui.close(),this.Ps()}ss(e,n){return e.filter(r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>hh(e).J().next(n=>this.ss(n,Sg).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return tm.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new qB(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return em.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){H(Zs,"Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=function(l){return l===18?H5:l===17?cC:l===16?q5:l===15?gw:l===14?lC:l===13?aC:l===12?z5:l===11?oC:void te(60245)}(this.Ni);let o;return this.Ui.runTransaction(e,s,i,a=>(o=new dv(a,this.ci?this.ci.next():Sn.ce),n==="readwrite-primary"?this.Hi(o).next(l=>!!l||this.Yi(o)).next(l=>{if(!l)throw _t(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new G(B.FAILED_PRECONDITION,YP);return r(o)}).next(l=>this.Xi(o).next(()=>l)):this.Is(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Is(e){return Tc(e).get(ca).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,bg)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new G(B.FAILED_PRECONDITION,Ag)})}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Tc(e).put(ca,n)}static v(){return Ci.v()}Zi(e){const n=Tc(e);return n.get(ca).next(r=>this.es(r)?(H(Zs,"Releasing primary lease."),n.delete(ca)):L.resolve())}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(_t(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;tP()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const r=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return H(Zs,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return _t(Zs,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){_t("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Tc(t){return Dt(t,cd)}function hh(t){return Dt(t,pl)}function vk(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=xe(),s=xe();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Ow(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l${constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return tP()?8:JP(Wt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new l$;return this.Ss(e,n,o).next(a=>{if(i.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(ga()<=Ce.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",ya(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),L.resolve()):(ga()<=Ce.DEBUG&&H("QueryEngine","Query:",ya(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(ga()<=Ce.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",ya(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,qn(n))):L.resolve())}ys(e,n){if(rS(n))return L.resolve(null);let r=qn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Wf(n,null,"F"),r=qn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=xe(...i);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Ds(n,a);return this.Cs(n,c,o,l.readTime)?this.ys(e,Wf(n,null,"F")):this.vs(e,c,n,l)}))})))}ws(e,n,r,s){return rS(n)||s.isEqual(ue.min())?L.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?L.resolve(null):(ga()<=Ce.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ya(n)),this.vs(e,o,n,GP(s,ul)).next(a=>a))})}Ds(e,n){let r=new ze(kC(e));return n.forEach((s,i)=>{hd(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return ga()<=Ce.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",ya(n)),this.ps.getDocumentsMatchingQuery(e,n,Wn.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vw="LocalStore",c$=3e8;class u${constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Ge(ge),this.xs=new Ls(i=>Wo(i),ud),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new yk(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function wk(t,e,n,r){return new u$(t,e,n,r)}async function Ek(t,e){const n=re(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=xe();for(const c of s){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Ls:c,removedBatchIds:o,addedBatchIds:a}))})})}function d$(t,e){const n=re(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const h=c.batch,f=h.keys();let p=L.resolve();return f.forEach(E=>{p=p.next(()=>d.getEntry(l,E)).next(g=>{const v=c.docVersions.get(E);oe(v!==null,48541),g.version.compareTo(v)<0&&(h.applyToRemoteDocument(g,c),g.isValidDocument()&&(g.setReadTime(c.commitVersion),d.addEntry(g)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=xe();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Tk(t){const e=re(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function h$(t,e){const n=re(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const a=[];e.targetChanges.forEach((d,h)=>{const f=s.get(h);if(!f)return;a.push(n.Pi.removeMatchingKeys(i,d.removedDocuments,h).next(()=>n.Pi.addMatchingKeys(i,d.addedDocuments,h)));let p=f.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?p=p.withResumeToken(yt.EMPTY_BYTE_STRING,ue.min()).withLastLimboFreeSnapshotVersion(ue.min()):d.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(d.resumeToken,r)),s=s.insert(h,p),function(g,v,_){return g.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=c$?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(f,p,d)&&a.push(n.Pi.updateTargetData(i,p))});let l=Un(),c=xe();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(f$(i,o,e.documentUpdates).next(d=>{l=d.ks,c=d.qs})),!r.isEqual(ue.min())){const d=n.Pi.getLastRemoteSnapshotVersion(i).next(h=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return L.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.Ms=s,i))}function f$(t,e,n){let r=xe(),s=xe();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Un();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(ue.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):H(Vw,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{ks:o,qs:s}})}function p$(t,e){const n=re(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Vo),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Zf(t,e){const n=re(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,L.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new ms(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Tl(t,e,n){const r=re(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Zi(o))throw o;H(Vw,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function ep(t,e,n){const r=re(t);let s=ue.min(),i=xe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const h=re(l),f=h.xs.get(d);return f!==void 0?L.resolve(h.Ms.get(f)):h.Pi.getTargetData(c,d)}(r,o,qn(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:ue.min(),n?i:xe())).next(a=>(bk(r,CC(e),a),{documents:a,Qs:i})))}function Ik(t,e){const n=re(t),r=re(n.Pi),s=n.Ms.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",i=>r.At(i,e).next(o=>o?o.target:null))}function Sk(t,e){const n=re(t),r=n.Os.get(e)||ue.min();return n.persistence.runTransaction("Get new document changes","readonly",s=>n.Ns.getAllFromCollectionGroup(s,e,GP(r,ul),Number.MAX_SAFE_INTEGER)).then(s=>(bk(n,e,s),s))}function bk(t,e,n){let r=t.Os.get(e)||ue.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ak="firestore_clients";function OS(t,e){return`${Ak}_${t}_${e}`}const xk="firestore_mutations";function VS(t,e,n){let r=`${xk}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const Rk="firestore_targets";function xg(t,e){return`${Rk}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zr="SharedClientState";class tp{constructor(e,n,r,s){this.user=e,this.batchId=n,this.state=r,this.error=s}static Ws(e,n,r){const s=JSON.parse(r);let i,o=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return o&&s.error&&(o=typeof s.error.message=="string"&&typeof s.error.code=="string",o&&(i=new G(s.error.code,s.error.message))),o?new tp(e,n,s.state,i):(_t(zr,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ru{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ws(e,n){const r=JSON.parse(n);let s,i=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return i&&r.error&&(i=typeof r.error.message=="string"&&typeof r.error.code=="string",i&&(s=new G(r.error.code,r.error.message))),i?new ru(e,r.state,s):(_t(zr,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class np{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const r=JSON.parse(n);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,i=Ew();for(let o=0;s&&o<r.activeTargetIds.length;++o)s=ZP(r.activeTargetIds[o]),i=i.add(r.activeTargetIds[o]);return s?new np(e,i):(_t(zr,`Failed to parse client data for instance '${e}': ${n}`),null)}}class Lw{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new Lw(n.clientId,n.onlineState):(_t(zr,`Failed to parse online state: ${e}`),null)}}class bv{constructor(){this.activeTargetIds=Ew()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Rg{constructor(e,n,r,s,i){this.window=e,this.Mi=n,this.persistenceKey=r,this.Js=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Ge(ge),this.started=!1,this.Xs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.eo=OS(this.persistenceKey,this.Js),this.no=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new bv),this.ro=new RegExp(`^${Ak}_${o}_([^_]*)$`),this.io=new RegExp(`^${xk}_${o}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${Rk}_${o}_(\\d+)$`),this.oo=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this._o=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const s=this.getItem(OS(this.persistenceKey,r));if(s){const i=np.Ws(r,s);i&&(this.Zs=this.Zs.insert(i.clientId,i))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const r=this.uo(n);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach((r,s)=>{s.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,r){this.ho(e,n,r),this.Po(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(xg(this.persistenceKey,e));if(s){const i=ru.Ws(e,s);i&&(r=i.state)}}return n&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(xg(this.persistenceKey,e))}updateQueryState(e,n,r){this.Io(e,n,r)}handleUserChange(e,n,r){n.forEach(s=>{this.Po(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return H(zr,"READ",e,n),n}setItem(e,n){H(zr,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){H(zr,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(H(zr,"EVENT",n.key,n.newValue),n.key===this.eo)return void _t("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const r=this.Ro(n.key);return this.Vo(r,null)}{const r=this.mo(n.key,n.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(this.so.test(n.key)){if(n.newValue!==null){const r=this.yo(n.key,n.newValue);if(r)return this.wo(r)}}else if(n.key===this.oo){if(n.newValue!==null){const r=this.uo(n.newValue);if(r)return this.co(r)}}else if(n.key===this.no){const r=function(i){let o=Sn.ce;if(i!=null)try{const a=JSON.parse(i);oe(typeof a=="number",30636,{So:i}),o=a}catch(a){_t(zr,"Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==Sn.ce&&this.sequenceNumberHandler(r)}else if(n.key===this._o){const r=this.bo(n.newValue);await Promise.all(r.map(s=>this.syncEngine.Do(s)))}}}else this.Xs.push(n)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,r){const s=new tp(this.currentUser,e,n,r),i=VS(this.persistenceKey,this.currentUser,e);this.setItem(i,s.Gs())}Po(e){const n=VS(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,r){const s=xg(this.persistenceKey,e),i=new ru(e,n,r);this.setItem(s,i.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const r=this.Ro(e);return np.Ws(r,n)}fo(e,n){const r=this.io.exec(e),s=Number(r[1]),i=r[2]!==void 0?r[2]:null;return tp.Ws(new Jt(i),s,n)}yo(e,n){const r=this.so.exec(e),s=Number(r[1]);return ru.Ws(s,n)}uo(e){return Lw.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);H(zr,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const r=n?this.Zs.insert(e,n):this.Zs.remove(e),s=this.lo(this.Zs),i=this.lo(r),o=[],a=[];return i.forEach(l=>{s.has(l)||o.push(l)}),s.forEach(l=>{i.has(l)||a.push(l)}),this.syncEngine.Fo(o,a).then(()=>{this.Zs=r})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=Ew();return e.forEach((r,s)=>{n=n.unionWith(s.activeTargetIds)}),n}}class Pk{constructor(){this.Mo=new bv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new bv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m${Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS="ConnectivityMonitor";class MS{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){H(LS,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){H(LS,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fh=null;function Av(){return fh===null?fh=function(){return 268435456+Math.round(2147483648*Math.random())}():fh++,"0x"+fh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pg="RestConnection",g$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class y${get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===zf?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=Av(),a=this.zo(e,n.toUriEncodedString());H(Pg,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,i);const{host:c}=new URL(a),d=Os(c);return this.Jo(e,a,l,r,d).then(h=>(H(Pg,`Received RPC '${e}' ${o}: `,h),h),h=>{throw Ui(Pg,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",r),h})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Fl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=g$[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v${constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xt="WebChannelConnection";class _$ extends y${constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=Av();return new Promise((a,l)=>{const c=new LP;c.setWithCredentials(!0),c.listenOnce(MP.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Mh.NO_ERROR:const h=c.getResponseJson();H(Xt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),a(h);break;case Mh.TIMEOUT:H(Xt,`RPC '${e}' ${o} timed out`),l(new G(B.DEADLINE_EXCEEDED,"Request time out"));break;case Mh.HTTP_ERROR:const f=c.getStatus();if(H(Xt,`RPC '${e}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let p=c.getResponseJson();Array.isArray(p)&&(p=p[0]);const E=p==null?void 0:p.error;if(E&&E.status&&E.message){const g=function(_){const w=_.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(w)>=0?w:B.UNKNOWN}(E.status);l(new G(g,E.message))}else l(new G(B.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new G(B.UNAVAILABLE,"Connection failed."));break;default:te(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{H(Xt,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(s);H(Xt,`RPC '${e}' ${o} sending request:`,s),c.send(n,"POST",d,r,15)})}T_(e,n,r){const s=Av(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=jP(),a=UP(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");H(Xt,`Creating RPC '${e}' stream ${s}: ${d}`,l);const h=o.createWebChannel(d,l);this.I_(h);let f=!1,p=!1;const E=new v$({Yo:v=>{p?H(Xt,`Not sending because RPC '${e}' stream ${s} is closed:`,v):(f||(H(Xt,`Opening RPC '${e}' stream ${s} transport.`),h.open(),f=!0),H(Xt,`RPC '${e}' stream ${s} sending:`,v),h.send(v))},Zo:()=>h.close()}),g=(v,_,w)=>{v.listen(_,T=>{try{w(T)}catch(k){setTimeout(()=>{throw k},0)}})};return g(h,Nc.EventType.OPEN,()=>{p||(H(Xt,`RPC '${e}' stream ${s} transport opened.`),E.o_())}),g(h,Nc.EventType.CLOSE,()=>{p||(p=!0,H(Xt,`RPC '${e}' stream ${s} transport closed`),E.a_(),this.E_(h))}),g(h,Nc.EventType.ERROR,v=>{p||(p=!0,Ui(Xt,`RPC '${e}' stream ${s} transport errored. Name:`,v.name,"Message:",v.message),E.a_(new G(B.UNAVAILABLE,"The operation could not be completed")))}),g(h,Nc.EventType.MESSAGE,v=>{var _;if(!p){const w=v.data[0];oe(!!w,16349);const T=w,k=(T==null?void 0:T.error)||((_=T[0])==null?void 0:_.error);if(k){H(Xt,`RPC '${e}' stream ${s} received error:`,k);const O=k.status;let V=function(A){const D=It[A];if(D!==void 0)return zC(D)}(O),S=k.message;V===void 0&&(V=B.INTERNAL,S="Unknown error status: "+O+" with message "+k.message),p=!0,E.a_(new G(V,S)),h.close()}else H(Xt,`RPC '${e}' stream ${s} received:`,w),E.u_(w)}}),g(a,FP.STAT_EVENT,v=>{v.stat===iv.PROXY?H(Xt,`RPC '${e}' stream ${s} detected buffering proxy`):v.stat===iv.NOPROXY&&H(Xt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{E.__()},0),E}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ck(){return typeof window<"u"?window:null}function Kh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rm(t){return new bB(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&H("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS="PersistentStream";class Dk{constructor(e,n,r,s,i,o,a,l){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new kk(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(_t(n.toString()),_t("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new G(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return H(FS,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(H(FS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class w$ extends Dk{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=RB(this.serializer,e),r=function(i){if(!("targetChange"in i))return ue.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ue.min():o.readTime?fn(o.readTime):ue.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=wv(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=qf(l)?{documents:XC(i,l)}:{query:JC(i,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=WC(i,o.resumeToken);const c=vv(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ue.min())>0){a.readTime=El(i,o.snapshotVersion.toTimestamp());const c=vv(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=CB(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=wv(this.serializer),n.removeTarget=e,this.q_(n)}}class E$ extends Dk{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return oe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,oe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){oe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=PB(e.writeResults,e.commitTime),r=fn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=wv(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Gf(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T${}class I$ extends T${constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new G(B.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,_v(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new G(B.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,_v(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(B.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class S${constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(_t(n),this.aa=!1):H("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xo="RemoteStore";class b${constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{na(this)&&(H(Xo,"Restarting streams for network reachability change."),await async function(l){const c=re(l);c.Ea.add(4),await Bl(c),c.Ra.set("Unknown"),c.Ea.delete(4),await md(c)}(this))})}),this.Ra=new S$(r,s)}}async function md(t){if(na(t))for(const e of t.da)await e(!0)}async function Bl(t){for(const e of t.da)await e(!1)}function sm(t,e){const n=re(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Uw(n)?Fw(n):zl(n).O_()&&Mw(n,e))}function Il(t,e){const n=re(t),r=zl(n);n.Ia.delete(e),r.O_()&&Nk(n,e),n.Ia.size===0&&(r.O_()?r.L_():na(n)&&n.Ra.set("Unknown"))}function Mw(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ue.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}zl(t).Y_(e)}function Nk(t,e){t.Va.Ue(e),zl(t).Z_(e)}function Fw(t){t.Va=new EB({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),zl(t).start(),t.Ra.ua()}function Uw(t){return na(t)&&!zl(t).x_()&&t.Ia.size>0}function na(t){return re(t).Ea.size===0}function Ok(t){t.Va=void 0}async function A$(t){t.Ra.set("Online")}async function x$(t){t.Ia.forEach((e,n)=>{Mw(t,e)})}async function R$(t,e){Ok(t),Uw(t)?(t.Ra.ha(e),Fw(t)):t.Ra.set("Unknown")}async function P$(t,e,n){if(t.Ra.set("Online"),e instanceof HC&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ia.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ia.delete(a),s.Va.removeTarget(a))}(t,e)}catch(r){H(Xo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await rp(t,r)}else if(e instanceof Hh?t.Va.Ze(e):e instanceof qC?t.Va.st(e):t.Va.tt(e),!n.isEqual(ue.min()))try{const r=await Tk(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Va.Tt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.Ia.get(c);d&&i.Ia.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=i.Ia.get(l);if(!d)return;i.Ia.set(l,d.withResumeToken(yt.EMPTY_BYTE_STRING,d.snapshotVersion)),Nk(i,l);const h=new ms(d.target,l,c,d.sequenceNumber);Mw(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){H(Xo,"Failed to raise snapshot:",r),await rp(t,r)}}async function rp(t,e,n){if(!Zi(e))throw e;t.Ea.add(1),await Bl(t),t.Ra.set("Offline"),n||(n=()=>Tk(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H(Xo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await md(t)})}function Vk(t,e){return e().catch(n=>rp(t,n,e))}async function $l(t){const e=re(t),n=zi(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Vo;for(;C$(e);)try{const s=await p$(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,k$(e,s)}catch(s){await rp(e,s)}Lk(e)&&Mk(e)}function C$(t){return na(t)&&t.Ta.length<10}function k$(t,e){t.Ta.push(e);const n=zi(t);n.O_()&&n.X_&&n.ea(e.mutations)}function Lk(t){return na(t)&&!zi(t).x_()&&t.Ta.length>0}function Mk(t){zi(t).start()}async function D$(t){zi(t).ra()}async function N$(t){const e=zi(t);for(const n of t.Ta)e.ea(n.mutations)}async function O$(t,e,n){const r=t.Ta.shift(),s=bw.from(r,e,n);await Vk(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await $l(t)}async function V$(t,e){e&&zi(t).X_&&await async function(r,s){if(function(o){return vB(o)&&o!==B.ABORTED}(s.code)){const i=r.Ta.shift();zi(r).B_(),await Vk(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await $l(r)}}(t,e),Lk(t)&&Mk(t)}async function US(t,e){const n=re(t);n.asyncQueue.verifyOperationInProgress(),H(Xo,"RemoteStore received new credentials");const r=na(n);n.Ea.add(3),await Bl(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await md(n)}async function xv(t,e){const n=re(t);e?(n.Ea.delete(2),await md(n)):e||(n.Ea.add(2),await Bl(n),n.Ra.set("Unknown"))}function zl(t){return t.ma||(t.ma=function(n,r,s){const i=re(n);return i.sa(),new w$(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:A$.bind(null,t),t_:x$.bind(null,t),r_:R$.bind(null,t),H_:P$.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Uw(t)?Fw(t):t.Ra.set("Unknown")):(await t.ma.stop(),Ok(t))})),t.ma}function zi(t){return t.fa||(t.fa=function(n,r,s){const i=re(n);return i.sa(),new E$(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:D$.bind(null,t),r_:V$.bind(null,t),ta:N$.bind(null,t),na:O$.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await $l(t)):(await t.fa.stop(),t.Ta.length>0&&(H(Xo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new jw(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gd(t,e){if(_t("AsyncQueue",`${e}: ${t}`),Zi(t))return new G(B.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{static emptySet(e){return new za(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||J.comparator(n.key,r.key):(n,r)=>J.comparator(n.key,r.key),this.keyedMap=Oc(),this.sortedSet=new Ge(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof za)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new za;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(){this.ga=new Ge(J.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):te(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Sl{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Sl(e,n,za.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Yp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L${constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class M${constructor(){this.queries=BS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=re(n),i=s.queries;s.queries=BS(),i.forEach((o,a)=>{for(const l of a.Sa)l.onError(r)})})(this,new G(B.ABORTED,"Firestore shutting down"))}}function BS(){return new Ls(t=>PC(t),Yp)}async function Bw(t,e){const n=re(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new L$,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=gd(o,`Initialization of query '${ya(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&zw(n)}async function $w(t,e){const n=re(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function F$(t,e){const n=re(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Fa(s)&&(r=!0);o.wa=s}}r&&zw(n)}function U$(t,e,n){const r=re(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function zw(t){t.Ca.forEach(e=>{e.next()})}var Rv,$S;($S=Rv||(Rv={})).Ma="default",$S.Cache="cache";class qw{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Sl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Sl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Rv.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(e){this.key=e}}class Uk{constructor(e){this.key=e}}class jk{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=xe(),this.mutatedKeys=xe(),this.eu=kC(e),this.tu=new za(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new jS,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const f=s.get(d),p=hd(this.query,h)?h:null,E=!!f&&this.mutatedKeys.has(f.key),g=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let v=!1;f&&p?f.data.isEqual(p.data)?E!==g&&(r.track({type:3,doc:p}),v=!0):this.su(f,p)||(r.track({type:2,doc:p}),v=!0,(l&&this.eu(p,l)>0||c&&this.eu(p,c)<0)&&(a=!0)):!f&&p?(r.track({type:0,doc:p}),v=!0):f&&!p&&(r.track({type:1,doc:f}),v=!0,(l||c)&&(a=!0)),v&&(p?(o=o.add(p),i=g?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{tu:o,iu:r,Cs:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((d,h)=>function(p,E){const g=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te(20277,{Rt:v})}};return g(p)-g(E)}(d.type,h.type)||this.eu(d.doc,h.doc)),this.ou(r),s=s??!1;const a=n&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,c=l!==this.Za;return this.Za=l,o.length!==0||c?{snapshot:new Sl(this.query,e.tu,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new jS,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=xe(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new Uk(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new Fk(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=xe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Sl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ql="SyncEngine";class j${constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class B${constructor(e){this.key=e,this.hu=!1}}class $${constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Ls(a=>PC(a),Yp),this.Iu=new Map,this.Eu=new Set,this.du=new Ge(J.comparator),this.Au=new Map,this.Ru=new kw,this.Vu={},this.mu=new Map,this.fu=Yo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function z$(t,e,n=!0){const r=im(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await Bk(r,e,n,!0),s}async function q$(t,e){const n=im(t);await Bk(n,e,!0,!1)}async function Bk(t,e,n,r){const s=await Zf(t.localStore,qn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await Hw(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&sm(t.remoteStore,s),a}async function Hw(t,e,n,r,s){t.pu=(h,f,p)=>async function(g,v,_,w){let T=v.view.ru(_);T.Cs&&(T=await ep(g.localStore,v.query,!1).then(({documents:S})=>v.view.ru(S,T)));const k=w&&w.targetChanges.get(v.targetId),O=w&&w.targetMismatches.get(v.targetId)!=null,V=v.view.applyChanges(T,g.isPrimaryClient,k,O);return Pv(g,v.targetId,V.au),V.snapshot}(t,h,f,p);const i=await ep(t.localStore,e,!0),o=new jk(e,i.Qs),a=o.ru(i.documents),l=pd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);Pv(t,n,c.au);const d=new j$(e,n,o);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function H$(t,e,n){const r=re(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!Yp(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Tl(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Il(r.remoteStore,s.targetId),bl(r,s.targetId)}).catch(Ji)):(bl(r,s.targetId),await Tl(r.localStore,s.targetId,!0))}async function W$(t,e){const n=re(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Il(n.remoteStore,r.targetId))}async function K$(t,e,n){const r=Qw(t);try{const s=await function(o,a){const l=re(o),c=je.now(),d=a.reduce((p,E)=>p.add(E.key),xe());let h,f;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let E=Un(),g=xe();return l.Ns.getEntries(p,d).next(v=>{E=v,E.forEach((_,w)=>{w.isValidDocument()||(g=g.add(_))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,E)).next(v=>{h=v;const _=[];for(const w of a){const T=gB(w,h.get(w.key).overlayedDocument);T!=null&&_.push(new Ms(w.key,T,_C(T.value.mapValue),rn.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,_,a)}).next(v=>{f=v;const _=v.applyToLocalDocumentSet(h,g);return l.documentOverlayCache.saveOverlays(p,v.batchId,_)})}).then(()=>({batchId:f.batchId,changes:NC(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Vu[o.currentUser.toKey()];c||(c=new Ge(ge)),c=c.insert(a,l),o.Vu[o.currentUser.toKey()]=c}(r,s.batchId,n),await to(r,s.changes),await $l(r.remoteStore)}catch(s){const i=gd(s,"Failed to persist write");n.reject(i)}}async function $k(t,e){const n=re(t);try{const r=await h$(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(oe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?oe(o.hu,14607):s.removedDocuments.size>0&&(oe(o.hu,42227),o.hu=!1))}),await to(n,r,e)}catch(r){await Ji(r)}}function zS(t,e,n){const r=re(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=re(o);l.onlineState=a;let c=!1;l.queries.forEach((d,h)=>{for(const f of h.Sa)f.va(a)&&(c=!0)}),c&&zw(l)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function G$(t,e,n){const r=re(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Ge(J.comparator);o=o.insert(i,mt.newNoDocument(i,ue.min()));const a=xe().add(i),l=new fd(ue.min(),new Map,new Ge(ge),o,a);await $k(r,l),r.du=r.du.remove(i),r.Au.delete(e),Gw(r)}else await Tl(r.localStore,e,!1).then(()=>bl(r,e,n)).catch(Ji)}async function Q$(t,e){const n=re(t),r=e.batch.batchId;try{const s=await d$(n.localStore,e);Kw(n,r,null),Ww(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await to(n,s)}catch(s){await Ji(s)}}async function Y$(t,e,n){const r=re(t);try{const s=await function(o,a){const l=re(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(oe(h!==null,37113),d=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);Kw(r,e,n),Ww(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await to(r,s)}catch(s){await Ji(s)}}function Ww(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function Kw(t,e,n){const r=re(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function bl(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||zk(t,r)})}function zk(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Il(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Gw(t))}function Pv(t,e,n){for(const r of n)r instanceof Fk?(t.Ru.addReference(r.key,e),X$(t,r)):r instanceof Uk?(H(ql,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||zk(t,r.key)):te(19791,{wu:r})}function X$(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(H(ql,"New document in limbo: "+n),t.Eu.add(r),Gw(t))}function Gw(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new J(Fe.fromString(e)),r=t.fu.next();t.Au.set(r,new B$(n)),t.du=t.du.insert(n,r),sm(t.remoteStore,new ms(qn(dd(n.path)),r,"TargetPurposeLimboResolution",Sn.ce))}}async function to(t,e,n){const r=re(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{o.push(r.pu(l,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){s.push(c);const h=Ow.As(l.targetId,c);i.push(h)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(l,c){const d=re(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>L.forEach(c,f=>L.forEach(f.Es,p=>d.persistence.referenceDelegate.addReference(h,f.targetId,p)).next(()=>L.forEach(f.ds,p=>d.persistence.referenceDelegate.removeReference(h,f.targetId,p)))))}catch(h){if(!Zi(h))throw h;H(Vw,"Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const p=d.Ms.get(f),E=p.snapshotVersion,g=p.withLastLimboFreeSnapshotVersion(E);d.Ms=d.Ms.insert(f,g)}}}(r.localStore,i))}async function J$(t,e){const n=re(t);if(!n.currentUser.isEqual(e)){H(ql,"User change. New user:",e.toKey());const r=await Ek(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(a=>{a.forEach(l=>{l.reject(new G(B.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await to(n,r.Ls)}}function Z$(t,e){const n=re(t),r=n.Au.get(e);if(r&&r.hu)return xe().add(r.key);{let s=xe();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const a=n.Tu.get(o);s=s.unionWith(a.view.nu)}return s}}async function e9(t,e){const n=re(t),r=await ep(n.localStore,e.query,!0),s=e.view.cu(r);return n.isPrimaryClient&&Pv(n,e.targetId,s.au),s}async function t9(t,e){const n=re(t);return Sk(n.localStore,e).then(r=>to(n,r))}async function n9(t,e,n,r){const s=re(t),i=await function(a,l){const c=re(a),d=re(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.er(h,l).next(f=>f?c.localDocuments.getDocuments(h,f):L.resolve(null)))}(s.localStore,e);i!==null?(n==="pending"?await $l(s.remoteStore):n==="acknowledged"||n==="rejected"?(Kw(s,e,r||null),Ww(s,e),function(a,l){re(re(a).mutationQueue).ir(l)}(s.localStore,e)):te(6720,"Unknown batchState",{Su:n}),await to(s,i)):H(ql,"Cannot apply mutation batch with id: "+e)}async function r9(t,e){const n=re(t);if(im(n),Qw(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),s=await qS(n,r.toArray());n.gu=!0,await xv(n.remoteStore,!0);for(const i of s)sm(n.remoteStore,i)}else if(e===!1&&n.gu!==!1){const r=[];let s=Promise.resolve();n.Iu.forEach((i,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):s=s.then(()=>(bl(n,o),Tl(n.localStore,o,!0))),Il(n.remoteStore,o)}),await s,await qS(n,r),function(o){const a=re(o);a.Au.forEach((l,c)=>{Il(a.remoteStore,c)}),a.Ru.Jr(),a.Au=new Map,a.du=new Ge(J.comparator)}(n),n.gu=!1,await xv(n.remoteStore,!1)}}async function qS(t,e,n){const r=re(t),s=[],i=[];for(const o of e){let a;const l=r.Iu.get(o);if(l&&l.length!==0){a=await Zf(r.localStore,qn(l[0]));for(const c of l){const d=r.Tu.get(c),h=await e9(r,d);h.snapshot&&i.push(h.snapshot)}}else{const c=await Ik(r.localStore,o);a=await Zf(r.localStore,c),await Hw(r,qk(c),o,!1,a.resumeToken)}s.push(a)}return r.Pu.H_(i),s}function qk(t){return xC(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function s9(t){return function(n){return re(re(n).persistence).Ts()}(re(t).localStore)}async function i9(t,e,n,r){const s=re(t);if(s.gu)return void H(ql,"Ignoring unexpected query state notification.");const i=s.Iu.get(e);if(i&&i.length>0)switch(n){case"current":case"not-current":{const o=await Sk(s.localStore,CC(i[0])),a=fd.createSynthesizedRemoteEventForCurrentChange(e,n==="current",yt.EMPTY_BYTE_STRING);await to(s,o,a);break}case"rejected":await Tl(s.localStore,e,!0),bl(s,e,r);break;default:te(64155,n)}}async function o9(t,e,n){const r=im(t);if(r.gu){for(const s of e){if(r.Iu.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){H(ql,"Adding an already active target "+s);continue}const i=await Ik(r.localStore,s),o=await Zf(r.localStore,i);await Hw(r,qk(i),o.targetId,!1,o.resumeToken),sm(r.remoteStore,o)}for(const s of n)r.Iu.has(s)&&await Tl(r.localStore,s,!1).then(()=>{Il(r.remoteStore,s),bl(r,s)}).catch(Ji)}}function im(t){const e=re(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=$k.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Z$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=G$.bind(null,e),e.Pu.H_=F$.bind(null,e.eventManager),e.Pu.yu=U$.bind(null,e.eventManager),e}function Qw(t){const e=re(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Q$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Y$.bind(null,e),e}class qu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=rm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return wk(this.persistence,new _k,e.initialUser,this.serializer)}Cu(e){return new Dw(nm.mi,this.serializer)}Du(e){return new Pk}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}qu.provider={build:()=>new qu};class a9 extends qu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){oe(this.persistence.referenceDelegate instanceof Jf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new fk(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Zt.withCacheSize(this.cacheSizeBytes):Zt.DEFAULT;return new Dw(r=>Jf.mi(r,n),this.serializer)}}class Hk extends qu{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await Qw(this.xu.syncEngine),await $l(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return wk(this.persistence,new _k,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new fk(r,e.asyncQueue,n)}Mu(e,n){const r=new _5(n,this.persistence);return new v5(e.asyncQueue,r)}Cu(e){const n=vk(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Zt.withCacheSize(this.cacheSizeBytes):Zt.DEFAULT;return new Nw(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,Ck(),Kh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new Pk}}class l9 extends Hk{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof Rg&&(this.sharedClientState.syncEngine={Co:n9.bind(null,n),vo:i9.bind(null,n),Fo:o9.bind(null,n),Ts:s9.bind(null,n),Do:t9.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji(async r=>{await r9(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Du(e){const n=Ck();if(!Rg.v(n))throw new G(B.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=vk(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Rg(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Hu{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>zS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=J$.bind(null,this.syncEngine),await xv(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new M$}()}createDatastore(e){const n=rm(e.databaseInfo.databaseId),r=function(i){return new _$(i)}(e.databaseInfo);return function(i,o,a,l){return new I$(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new b$(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>zS(this.syncEngine,n,0),function(){return MS.v()?new MS:new m$}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,d){const h=new $$(s,i,o,a,l,c);return d&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=re(s);H(Xo,"RemoteStore shutting down."),i.Ea.add(5),await Bl(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Hu.provider={build:()=>new Hu};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):_t("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qi="FirestoreClient";class c9{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Jt.UNAUTHENTICATED,this.clientId=Bp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{H(qi,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(H(qi,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=gd(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Cg(t,e){t.asyncQueue.verifyOperationInProgress(),H(qi,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Ek(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function HS(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Xw(t);H(qi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>US(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>US(e.remoteStore,s)),t._onlineComponents=e}async function Xw(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H(qi,"Using user provided OfflineComponentProvider");try{await Cg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===B.FAILED_PRECONDITION||s.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Ui("Error using user provided cache. Falling back to memory cache: "+n),await Cg(t,new qu)}}else H(qi,"Using default OfflineComponentProvider"),await Cg(t,new a9(void 0));return t._offlineComponents}async function Jw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H(qi,"Using user provided OnlineComponentProvider"),await HS(t,t._uninitializedComponentsProvider._online)):(H(qi,"Using default OnlineComponentProvider"),await HS(t,new Hu))),t._onlineComponents}function Wk(t){return Xw(t).then(e=>e.persistence)}function Kk(t){return Xw(t).then(e=>e.localStore)}function Gk(t){return Jw(t).then(e=>e.remoteStore)}function u9(t){return Jw(t).then(e=>e.syncEngine)}async function sp(t){const e=await Jw(t),n=e.eventManager;return n.onListen=z$.bind(null,e.syncEngine),n.onUnlisten=H$.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=q$.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=W$.bind(null,e.syncEngine),n}function d9(t){return t.asyncQueue.enqueue(async()=>{const e=await Wk(t),n=await Gk(t);return e.setNetworkEnabled(!0),function(s){const i=re(s);return i.Ea.delete(0),md(i)}(n)})}function h9(t){return t.asyncQueue.enqueue(async()=>{const e=await Wk(t),n=await Gk(t);return e.setNetworkEnabled(!1),async function(s){const i=re(s);i.Ea.add(0),await Bl(i),i.Ra.set("Offline")}(n)})}function f9(t,e){const n=new rr;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,o){try{const a=await function(c,d){const h=re(c);return h.persistence.runTransaction("read document","readonly",f=>h.localDocuments.getDocument(f,d))}(s,i);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new G(B.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=gd(a,`Failed to get document '${i} from cache`);o.reject(l)}}(await Kk(t),e,n)),n.promise}function p9(t,e,n={}){const r=new rr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new Yw({next:f=>{d.Nu(),o.enqueueAndForget(()=>$w(i,h));const p=f.docs.has(a);!p&&f.fromCache?c.reject(new G(B.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&f.fromCache&&l&&l.source==="server"?c.reject(new G(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new qw(dd(a.path),d,{includeMetadataChanges:!0,qa:!0});return Bw(i,h)}(await sp(t),t.asyncQueue,e,n,r)),r.promise}function m9(t,e){const n=new rr;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,o){try{const a=await ep(s,i,!0),l=new jk(i,a.Qs),c=l.ru(a.documents),d=l.applyChanges(c,!1);o.resolve(d.snapshot)}catch(a){const l=gd(a,`Failed to execute query '${i} against cache`);o.reject(l)}}(await Kk(t),e,n)),n.promise}function g9(t,e,n={}){const r=new rr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new Yw({next:f=>{d.Nu(),o.enqueueAndForget(()=>$w(i,h)),f.fromCache&&l.source==="server"?c.reject(new G(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new qw(a,d,{includeMetadataChanges:!0,qa:!0});return Bw(i,h)}(await sp(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qk(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y9="firestore.googleapis.com",KS=!0;class GS{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new G(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=y9,this.ssl=KS}else this.host=e.host,this.ssl=e.ssl??KS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=lk;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<hk)throw new G(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}WP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Qk(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new G(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new G(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new G(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Zw{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new GS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new GS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new zP;switch(r.type){case"firstParty":return new c5(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=WS.get(n);r&&(H("ComponentProvider","Removing Datastore"),WS.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Pr(this.firestore,e,this._query)}}class it{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ys(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new it(this.firestore,e,this._key)}toJSON(){return{type:it._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(ld(n,it._jsonSchema))return new it(e,r||null,new J(Fe.fromString(n.referencePath)))}}it._jsonSchemaVersion="firestore/documentReference/1.0",it._jsonSchema={type:At("string",it._jsonSchemaVersion),referencePath:At("string")};class ys extends Pr{constructor(e,n,r){super(e,n,dd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new it(this.firestore,null,new J(e))}withConverter(e){return new ys(this.firestore,e,this._path)}}function he(t,e,...n){if(t=He(t),HP("collection","path",e),t instanceof Zw){const r=Fe.fromString(e,...n);return FI(r),new ys(t,null,r)}{if(!(t instanceof it||t instanceof ys))throw new G(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Fe.fromString(e,...n));return FI(r),new ys(t.firestore,null,r)}}function we(t,e,...n){if(t=He(t),arguments.length===1&&(e=Bp.newId()),HP("doc","path",e),t instanceof Zw){const r=Fe.fromString(e,...n);return MI(r),new it(t,null,new J(r))}{if(!(t instanceof it||t instanceof ys))throw new G(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Fe.fromString(e,...n));return MI(r),new it(t.firestore,t instanceof ys?t.converter:null,new J(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS="AsyncQueue";class YS{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new kk(this,"async_queue_retry"),this._c=()=>{const r=Kh();r&&H(QS,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Kh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Kh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new rr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Zi(e))throw e;H(QS,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,_t("INTERNAL UNHANDLED ERROR: ",XS(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=jw.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&te(47125,{Pc:XS(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function XS(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JS(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class pn extends Zw{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new YS,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new YS(e),this._firestoreClient=void 0,await e}}}function Yk(t,e,n){n||(n=zf);const r=Up(t,"firestore");if(r.isInitialized(n)){const s=r.getImmediate({identifier:n}),i=r.getOptions(n);if(al(i,e))return s;throw new G(B.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new G(B.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<hk)throw new G(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Os(e.host)&&nw(e.host),r.initialize({options:e,instanceIdentifier:n})}function Fs(t){if(t._terminated)throw new G(B.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Xk(t),t._firestoreClient}function Xk(t){var r,s,i;const e=t._freezeSettings(),n=function(a,l,c,d){return new K5(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,Qk(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new c9(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}function v9(t,e){Ui("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return Jk(t,Hu.provider,{build:r=>new Hk(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function _9(t){Ui("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();Jk(t,Hu.provider,{build:n=>new l9(n,e.cacheSizeBytes)})}function Jk(t,e,n){if((t=Et(t,pn))._firestoreClient||t._terminated)throw new G(B.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new G(B.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},Xk(t)}function eE(t){return d9(Fs(t=Et(t,pn)))}function tE(t){return h9(Fs(t=Et(t,pn)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Mn(yt.fromBase64String(e))}catch(n){throw new G(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Mn(yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Mn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ld(e,Mn._jsonSchema))return Mn.fromBase64String(e.bytes)}}Mn._jsonSchemaVersion="firestore/bytes/1.0",Mn._jsonSchema={type:At("string",Mn._jsonSchemaVersion),bytes:At("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new G(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new st(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new G(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new G(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:wr._jsonSchemaVersion}}static fromJSON(e){if(ld(e,wr._jsonSchema))return new wr(e.latitude,e.longitude)}}wr._jsonSchemaVersion="firestore/geoPoint/1.0",wr._jsonSchema={type:At("string",wr._jsonSchemaVersion),latitude:At("number"),longitude:At("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Er._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ld(e,Er._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Er(e.vectorValues);throw new G(B.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Er._jsonSchemaVersion="firestore/vectorValue/1.0",Er._jsonSchema={type:At("string",Er._jsonSchemaVersion),vectorValues:At("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w9=/^__.*__$/;class E9{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ms(e,this.data,this.fieldMask,n,this.fieldTransforms):new jl(e,this.data,n,this.fieldTransforms)}}class Zk{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ms(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function eD(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te(40011,{Ac:t})}}class om{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new om({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return ip(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(eD(this.Ac)&&w9.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class T9{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||rm(e)}Cc(e,n,r,s=!1){return new om({Ac:e,methodName:n,Dc:r,path:st.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function am(t){const e=t._freezeSettings(),n=rm(t._databaseId);return new T9(t._databaseId,!!e.ignoreUndefinedProperties,n)}function tD(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);sE("Data must be an object, but it was:",o,r);const a=nD(r,o);let l,c;if(i.merge)l=new bn(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const h of i.mergeFields){const f=Cv(e,h,n);if(!o.contains(f))throw new G(B.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);sD(d,f)||d.push(f)}l=new bn(d),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new E9(new nn(a),l,c)}class lm extends Hl{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof lm}}function I9(t,e,n){return new om({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class nE extends Hl{_toFieldTransform(e){return new Iw(e.path,new _l)}isEqual(e){return e instanceof nE}}class rE extends Hl{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=I9(this,e,!0),r=this.vc.map(i=>Wl(i,n)),s=new Ko(r);return new Iw(e.path,s)}isEqual(e){return e instanceof rE&&al(this.vc,e.vc)}}function S9(t,e,n,r){const s=t.Cc(1,e,n);sE("Data must be an object, but it was:",s,r);const i=[],o=nn.empty();eo(r,(l,c)=>{const d=iE(e,l,n);c=He(c);const h=s.yc(d);if(c instanceof lm)i.push(d);else{const f=Wl(c,h);f!=null&&(i.push(d),o.set(d,f))}});const a=new bn(i);return new Zk(o,a,s.fieldTransforms)}function b9(t,e,n,r,s,i){const o=t.Cc(1,e,n),a=[Cv(e,r,n)],l=[s];if(i.length%2!=0)throw new G(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<i.length;f+=2)a.push(Cv(e,i[f])),l.push(i[f+1]);const c=[],d=nn.empty();for(let f=a.length-1;f>=0;--f)if(!sD(c,a[f])){const p=a[f];let E=l[f];E=He(E);const g=o.yc(p);if(E instanceof lm)c.push(p);else{const v=Wl(E,g);v!=null&&(c.push(p),d.set(p,v))}}const h=new bn(c);return new Zk(d,h,o.fieldTransforms)}function A9(t,e,n,r=!1){return Wl(n,t.Cc(r?4:3,e))}function Wl(t,e){if(rD(t=He(t)))return sE("Unsupported field value:",e,t),nD(t,e);if(t instanceof Hl)return function(r,s){if(!eD(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=Wl(a,s.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=He(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return uB(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=je.fromDate(r);return{timestampValue:El(s.serializer,i)}}if(r instanceof je){const i=new je(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:El(s.serializer,i)}}if(r instanceof wr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Mn)return{bytesValue:WC(s.serializer,r._byteString)};if(r instanceof it){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Rw(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Er)return function(o,a){return{mapValue:{fields:{[vw]:{stringValue:_w},[ml]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Sc("VectorValues must only contain numeric values.");return Tw(a.serializer,c)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${$p(r)}`)}(t,e)}function nD(t,e){const n={};return uC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):eo(t,(r,s)=>{const i=Wl(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function rD(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof je||t instanceof wr||t instanceof Mn||t instanceof it||t instanceof Hl||t instanceof Er)}function sE(t,e,n){if(!rD(n)||!KP(n)){const r=$p(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Cv(t,e,n){if((e=He(e))instanceof yd)return e._internalPath;if(typeof e=="string")return iE(t,e);throw ip("Field path arguments must be of type string or ",t,!1,void 0,n)}const x9=new RegExp("[~\\*/\\[\\]]");function iE(t,e,n){if(e.search(x9)>=0)throw ip(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new yd(...e.split("."))._internalPath}catch{throw ip(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ip(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new G(B.INVALID_ARGUMENT,a+t+l)}function sD(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new it(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new R9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(cm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class R9 extends iD{data(){return super.data()}}function cm(t,e){return typeof e=="string"?iE(t,e):e instanceof yd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oD(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new G(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class oE{}class um extends oE{}function _e(t,e,...n){let r=[];e instanceof oE&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof dm).length,a=i.filter(l=>l instanceof vd).length;if(o>1||o>0&&a>0)throw new G(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class vd extends um{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new vd(e,n,r)}_apply(e){const n=this._parse(e);return aD(e._query,n),new Pr(e.firestore,e.converter,yv(e._query,n))}_parse(e){const n=am(e.firestore);return function(i,o,a,l,c,d,h){let f;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new G(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){eb(h,d);const E=[];for(const g of h)E.push(ZS(l,i,g));f={arrayValue:{values:E}}}else f=ZS(l,i,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||eb(h,d),f=A9(a,o,h,d==="in"||d==="not-in");return De.create(c,d,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function pe(t,e,n){const r=e,s=cm("where",t);return vd._create(s,r,n)}class dm extends oE{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new dm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Be.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)aD(o,l),o=yv(o,l)}(e._query,n),new Pr(e.firestore,e.converter,yv(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class hm extends um{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new hm(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new G(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new G(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new $u(i,o)}(e._query,this._field,this._direction);return new Pr(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Ul(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Jr(t,e="asc"){const n=e,r=cm("orderBy",t);return hm._create(r,n)}class fm extends um{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new fm(e,n,r)}_apply(e){return new Pr(e.firestore,e.converter,Wf(e._query,this._limit,this._limitType))}}function ki(t){return m5("limit",t),fm._create("limit",t,"F")}function ZS(t,e,n){if(typeof(n=He(n))=="string"){if(n==="")throw new G(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!RC(e)&&n.indexOf("/")!==-1)throw new G(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Fe.fromString(n));if(!J.isDocumentKey(r))throw new G(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ju(t,new J(r))}if(n instanceof it)return ju(t,n._key);throw new G(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${$p(n)}.`)}function eb(t,e){if(!Array.isArray(t)||t.length===0)throw new G(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function aD(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new G(B.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G(B.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class lD{convertValue(e,n="none"){switch(Bi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Cs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw te(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return eo(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[ml].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>nt(o.doubleValue));return new Er(n)}convertGeoPoint(e){return new wr(nt(e.latitude),nt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Gp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Fu(e));default:return null}}convertTimestamp(e){const n=Ps(e);return new je(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Fe.fromString(e);oe(nk(r),9688,{name:e});const s=new ji(r.get(1),r.get(3)),i=new J(r.popFirst(5));return s.isEqual(n)||_t(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cD(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Ao{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vs extends iD{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new su(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(cm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new G(B.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=vs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}vs._jsonSchemaVersion="firestore/documentSnapshot/1.0",vs._jsonSchema={type:At("string",vs._jsonSchemaVersion),bundleSource:At("string","DocumentSnapshot"),bundleName:At("string"),bundle:At("string")};class su extends vs{data(e={}){return super.data(e)}}class _s{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ao(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new su(this._firestore,this._userDataWriter,r.key,r,new Ao(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new G(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new su(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Ao(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new su(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Ao(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:P9(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new G(B.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=_s._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Bp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function P9(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gt(t){t=Et(t,it);const e=Et(t.firestore,pn);return p9(Fs(e),t._key).then(n=>dD(e,t,n))}_s._jsonSchemaVersion="firestore/querySnapshot/1.0",_s._jsonSchema={type:At("string",_s._jsonSchemaVersion),bundleSource:At("string","QuerySnapshot"),bundleName:At("string"),bundle:At("string")};class _d extends lD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new it(this.firestore,null,n)}}function uD(t){t=Et(t,it);const e=Et(t.firestore,pn),n=Fs(e),r=new _d(e);return f9(n,t._key).then(s=>new vs(e,r,t._key,s,new Ao(s!==null&&s.hasLocalMutations,!0),t.converter))}function Te(t){t=Et(t,Pr);const e=Et(t.firestore,pn),n=Fs(e),r=new _d(e);return oD(t._query),g9(n,t._query).then(s=>new _s(e,r,t,s))}function C9(t){t=Et(t,Pr);const e=Et(t.firestore,pn),n=Fs(e),r=new _d(e);return m9(n,t._query).then(s=>new _s(e,r,t,s))}function Hi(t,e,n){t=Et(t,it);const r=Et(t.firestore,pn),s=cD(t.converter,e,n);return wd(r,[tD(am(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,rn.none())])}function Ze(t,e,n,...r){t=Et(t,it);const s=Et(t.firestore,pn),i=am(s);let o;return o=typeof(e=He(e))=="string"||e instanceof yd?b9(i,"updateDoc",t._key,e,n,r):S9(i,"updateDoc",t._key,e),wd(s,[o.toMutation(t._key,rn.exists(!0))])}function en(t){return wd(Et(t.firestore,pn),[new Zp(t._key,rn.none())])}function ws(t,e){const n=Et(t.firestore,pn),r=we(t),s=cD(t.converter,e);return wd(n,[tD(am(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,rn.exists(!1))]).then(()=>r)}function Wu(t,...e){var l,c,d;t=He(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||JS(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(JS(e[r])){const h=e[r];e[r]=(l=h.next)==null?void 0:l.bind(h),e[r+1]=(c=h.error)==null?void 0:c.bind(h),e[r+2]=(d=h.complete)==null?void 0:d.bind(h)}let i,o,a;if(t instanceof it)o=Et(t.firestore,pn),a=dd(t._key.path),i={next:h=>{e[r]&&e[r](dD(o,t,h))},error:e[r+1],complete:e[r+2]};else{const h=Et(t,Pr);o=Et(h.firestore,pn),a=h._query;const f=new _d(o);i={next:p=>{e[r]&&e[r](new _s(o,f,h,p))},error:e[r+1],complete:e[r+2]},oD(t._query)}return function(f,p,E,g){const v=new Yw(g),_=new qw(p,v,E);return f.asyncQueue.enqueueAndForget(async()=>Bw(await sp(f),_)),()=>{v.Nu(),f.asyncQueue.enqueueAndForget(async()=>$w(await sp(f),_))}}(Fs(o),a,s,i)}function wd(t,e){return function(r,s){const i=new rr;return r.asyncQueue.enqueueAndForget(async()=>K$(await u9(r),s,i)),i.promise}(Fs(t),e)}function dD(t,e,n){const r=n.docs.get(e._key),s=new _d(t);return new vs(t,s,e._key,r,new Ao(n.hasPendingWrites,n.fromCache),e.converter)}function Ae(){return new nE("serverTimestamp")}function k9(...t){return new rE("arrayUnion",t)}(function(e,n=!0){(function(s){Fl=s})(od),es(new Ar("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new pn(new a5(r.getProvider("auth-internal")),new u5(o,r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new G(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ji(c.options.projectId,d)}(o,s),o);return i={useFetchStreams:n,...i},a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),zn(NI,OI,e),zn(NI,OI,"esm2020")})();const kg=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:lD,Bytes:Mn,CollectionReference:ys,DocumentReference:it,DocumentSnapshot:vs,FieldPath:yd,FieldValue:Hl,Firestore:pn,FirestoreError:G,GeoPoint:wr,Query:Pr,QueryCompositeFilterConstraint:dm,QueryConstraint:um,QueryDocumentSnapshot:su,QueryFieldFilterConstraint:vd,QueryLimitConstraint:fm,QueryOrderByConstraint:hm,QuerySnapshot:_s,SnapshotMetadata:Ao,Timestamp:je,VectorValue:Er,_AutoId:Bp,_ByteString:yt,_DatabaseId:ji,_DocumentKey:J,_EmptyAuthCredentialsProvider:zP,_FieldPath:st,_cast:Et,_logWarn:Ui,_validateIsNotUsedTogether:WP,addDoc:ws,arrayUnion:k9,collection:he,deleteDoc:en,disableNetwork:tE,doc:we,enableIndexedDbPersistence:v9,enableMultiTabIndexedDbPersistence:_9,enableNetwork:eE,ensureFirestoreConfigured:Fs,executeWrite:wd,getDoc:gt,getDocFromCache:uD,getDocs:Te,getDocsFromCache:C9,initializeFirestore:Yk,limit:ki,onSnapshot:Wu,orderBy:Jr,query:_e,serverTimestamp:Ae,setDoc:Hi,setLogLevel:BP,updateDoc:Ze,where:pe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D9="type.googleapis.com/google.protobuf.Int64Value",N9="type.googleapis.com/google.protobuf.UInt64Value";function hD(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function op(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>op(e));if(typeof t=="function"||typeof t=="object")return hD(t,e=>op(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Al(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case D9:case N9:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Al(e)):typeof t=="function"||typeof t=="object"?hD(t,e=>Al(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tb={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class An extends Rr{constructor(e,n,r){super(`${aE}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,An.prototype)}}function O9(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function ap(t,e){let n=O9(t),r=n,s;try{const i=e&&e.error;if(i){const o=i.status;if(typeof o=="string"){if(!tb[o])return new An("internal","internal");n=tb[o],r=o}const a=i.message;typeof a=="string"&&(r=a),s=i.details,s!==void 0&&(s=Al(s))}}catch{}return n==="ok"?null:new An(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V9{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Ln(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(i=>this.auth=i,()=>{}),this.messaging||r.get().then(i=>this.messaging=i,()=>{}),this.appCheck||s==null||s.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv="us-central1",L9=/^data: (.*?)(?:\n|$)/;function M9(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new An("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class F9{constructor(e,n,r,s,i=kv,o=(...a)=>fetch(...a)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new V9(e,n,r,s),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(i);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=kv}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function U9(t,e,n){const r=Os(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(nw(t.emulatorOrigin+"/backends"),ZR("Functions",!0))}function j9(t,e,n){const r=s=>$9(t,e,s,{});return r.stream=(s,i)=>q9(t,e,s,i),r}function fD(t){return t.emulatorOrigin&&Os(t.emulatorOrigin)?"include":void 0}async function B9(t,e,n,r,s){n["Content-Type"]="application/json";let i;try{i=await r(t,{method:"POST",body:JSON.stringify(e),headers:n,credentials:fD(s)})}catch{return{status:0,json:null}}let o=null;try{o=await i.json()}catch{}return{status:i.status,json:o}}async function pD(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function $9(t,e,n,r){const s=t._url(e);return z9(t,s,n,r)}async function z9(t,e,n,r){n=op(n);const s={data:n},i=await pD(t,r),o=r.timeout||7e4,a=M9(o),l=await Promise.race([B9(e,s,i,t.fetchImpl,t),a.promise,t.cancelAllRequests]);if(a.cancel(),!l)throw new An("cancelled","Firebase Functions instance was deleted.");const c=ap(l.status,l.json);if(c)throw c;if(!l.json)throw new An("internal","Response is not valid JSON object.");let d=l.json.data;if(typeof d>"u"&&(d=l.json.result),typeof d>"u")throw new An("internal","Response is missing data field.");return{data:Al(d)}}function q9(t,e,n,r){const s=t._url(e);return H9(t,s,n,r||{})}async function H9(t,e,n,r){var f;n=op(n);const s={data:n},i=await pD(t,r);i["Content-Type"]="application/json",i.Accept="text/event-stream";let o;try{o=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(s),headers:i,signal:r==null?void 0:r.signal,credentials:fD(t)})}catch(p){if(p instanceof Error&&p.name==="AbortError"){const g=new An("cancelled","Request was cancelled.");return{data:Promise.reject(g),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(g)}}}}}}const E=ap(0,null);return{data:Promise.reject(E),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(E)}}}}}}let a,l;const c=new Promise((p,E)=>{a=p,l=E});(f=r==null?void 0:r.signal)==null||f.addEventListener("abort",()=>{const p=new An("cancelled","Request was cancelled.");l(p)});const d=o.body.getReader(),h=W9(d,a,l,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const p=h.getReader();return{async next(){const{value:E,done:g}=await p.read();return{value:E,done:g}},async return(){return await p.cancel(),{done:!0,value:void 0}}}}},data:c}}function W9(t,e,n,r){const s=(o,a)=>{const l=o.match(L9);if(!l)return;const c=l[1];try{const d=JSON.parse(c);if("result"in d){e(Al(d.result));return}if("message"in d){a.enqueue(Al(d.message));return}if("error"in d){const h=ap(0,d);a.error(h),n(h);return}}catch(d){if(d instanceof An){a.error(d),n(d);return}}},i=new TextDecoder;return new ReadableStream({start(o){let a="";return l();async function l(){if(r!=null&&r.aborted){const c=new An("cancelled","Request was cancelled");return o.error(c),n(c),Promise.resolve()}try{const{value:c,done:d}=await t.read();if(d){a.trim()&&s(a.trim(),o),o.close();return}if(r!=null&&r.aborted){const f=new An("cancelled","Request was cancelled");o.error(f),n(f),await t.cancel();return}a+=i.decode(c,{stream:!0});const h=a.split(`
`);a=h.pop()||"";for(const f of h)f.trim()&&s(f.trim(),o);return l()}catch(c){const d=c instanceof An?c:ap(0,null);o.error(d),n(d)}}},cancel(){return t.cancel()}})}const nb="@firebase/functions",rb="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K9="auth-internal",G9="app-check-internal",Q9="messaging-internal";function Y9(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),i=n.getProvider(K9),o=n.getProvider(Q9),a=n.getProvider(G9);return new F9(s,i,o,a,r)};es(new Ar(aE,e,"PUBLIC").setMultipleInstances(!0)),zn(nb,rb,t),zn(nb,rb,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X9(t=aP(),e=kv){const r=Up(He(t),aE).getImmediate({identifier:e}),s=XR("functions");return s&&J9(r,...s),r}function J9(t,e,n){U9(He(t),e,n)}function mD(t,e,n){return j9(He(t),e)}Y9();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gD="firebasestorage.googleapis.com",yD="storageBucket",Z9=2*60*1e3,ez=10*60*1e3,tz=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt extends Rr{constructor(e,n,r=0){super(Dg(e),`Firebase Storage: ${n} (${Dg(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,dt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Dg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var tt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(tt||(tt={}));function Dg(t){return"storage/"+t}function lE(){const t="An unknown error occurred, please check the error payload for server response.";return new dt(tt.UNKNOWN,t)}function nz(t){return new dt(tt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function rz(t){return new dt(tt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function sz(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new dt(tt.UNAUTHENTICATED,t)}function iz(){return new dt(tt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function oz(t){return new dt(tt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function vD(){return new dt(tt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function _D(){return new dt(tt.CANCELED,"User canceled the upload/download.")}function az(t){return new dt(tt.INVALID_URL,"Invalid URL '"+t+"'.")}function lz(t){return new dt(tt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function cz(){return new dt(tt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+yD+"' property when initializing the app?")}function wD(){return new dt(tt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function uz(){return new dt(tt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function dz(){return new dt(tt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function hz(t){return new dt(tt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Dv(t){return new dt(tt.INVALID_ARGUMENT,t)}function ED(){return new dt(tt.APP_DELETED,"The Firebase app was deleted.")}function fz(t){return new dt(tt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function iu(t,e){return new dt(tt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Ic(t){throw new dt(tt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=jn.makeFromUrl(e,n)}catch{return new jn(e,"")}if(r.path==="")return r;throw lz(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(k){k.path.charAt(k.path.length-1)==="/"&&(k.path_=k.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(k){k.path_=decodeURIComponent(k.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",p=new RegExp(`^https?://${h}/${d}/b/${s}/o${f}`,"i"),E={bucket:1,path:3},g=n===gD?"(?:storage.googleapis.com|storage.cloud.google.com)":n,v="([^?#]*)",_=new RegExp(`^https?://${g}/${s}/${v}`,"i"),T=[{regex:a,indices:l,postModify:i},{regex:p,indices:E,postModify:c},{regex:_,indices:{bucket:1,path:2},postModify:c}];for(let k=0;k<T.length;k++){const O=T[k],V=O.regex.exec(e);if(V){const S=V[O.indices.bucket];let I=V[O.indices.path];I||(I=""),r=new jn(S,I),O.postModify(r);break}}if(r==null)throw az(e);return r}}class pz{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mz(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function d(...v){c||(c=!0,e.apply(null,v))}function h(v){s=setTimeout(()=>{s=null,t(p,l())},v)}function f(){i&&clearTimeout(i)}function p(v,..._){if(c){f();return}if(v){f(),d.call(null,v,..._);return}if(l()||o){f(),d.call(null,v,..._);return}r<64&&(r*=2);let T;a===1?(a=2,T=0):T=(r+Math.random())*1e3,h(T)}let E=!1;function g(v){E||(E=!0,f(),!c&&(s!==null?(v||(a=2),clearTimeout(s),h(0)):v||(a=1)))}return h(0),i=setTimeout(()=>{o=!0,g(!0)},n),g}function gz(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yz(t){return t!==void 0}function vz(t){return typeof t=="function"}function _z(t){return typeof t=="object"&&!Array.isArray(t)}function pm(t){return typeof t=="string"||t instanceof String}function sb(t){return cE()&&t instanceof Blob}function cE(){return typeof Blob<"u"}function ib(t,e,n,r){if(r<e)throw Dv(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Dv(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ed(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function TD(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Fo;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Fo||(Fo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ID(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wz{constructor(e,n,r,s,i,o,a,l,c,d,h,f=!0,p=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=h,this.retry=f,this.isUsingEmulator=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,g)=>{this.resolve_=E,this.reject_=g,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new ph(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===Fo.NO_ERROR,l=i.getStatus();if(!a||ID(l,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===Fo.ABORT;r(!1,new ph(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new ph(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());yz(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=lE();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?ED():_D();o(l)}else{const l=vD();o(l)}};this.canceled_?n(!1,new ph(!1,null,!0)):this.backoffId_=mz(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&gz(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ph{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function Ez(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Tz(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Iz(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Sz(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function bz(t,e,n,r,s,i,o=!0,a=!1){const l=TD(t.urlParams),c=t.url+l,d=Object.assign({},t.headers);return Iz(d,e),Ez(d,n),Tz(d,i),Sz(d,r),new wz(c,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Az(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function xz(...t){const e=Az();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(cE())return new Blob(t);throw new dt(tt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Rz(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pz(t){if(typeof atob>"u")throw hz("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ng{constructor(e,n){this.data=e,this.contentType=n||null}}function Cz(t,e){switch(t){case Gr.RAW:return new Ng(SD(e));case Gr.BASE64:case Gr.BASE64URL:return new Ng(bD(t,e));case Gr.DATA_URL:return new Ng(Dz(e),Nz(e))}throw lE()}function SD(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function kz(t){let e;try{e=decodeURIComponent(t)}catch{throw iu(Gr.DATA_URL,"Malformed data URL.")}return SD(e)}function bD(t,e){switch(t){case Gr.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw iu(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Gr.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw iu(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Pz(e)}catch(s){throw s.message.includes("polyfill")?s:iu(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class AD{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw iu(Gr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=Oz(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function Dz(t){const e=new AD(t);return e.base64?bD(Gr.BASE64,e.rest):kz(e.rest)}function Nz(t){return new AD(t).contentType}function Oz(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e,n){let r=0,s="";sb(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(sb(this.data_)){const r=this.data_,s=Rz(r,e,n);return s===null?null:new ds(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new ds(r,!0)}}static getBlob(...e){if(cE()){const n=e.map(r=>r instanceof ds?r.data_:r);return new ds(xz.apply(null,n))}else{const n=e.map(o=>pm(o)?Cz(Gr.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new ds(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xD(t){let e;try{e=JSON.parse(t)}catch{return null}return _z(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vz(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Lz(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function RD(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mz(t,e){return e}class ln{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||Mz}}let mh=null;function Fz(t){return!pm(t)||t.length<2?t:RD(t)}function uE(){if(mh)return mh;const t=[];t.push(new ln("bucket")),t.push(new ln("generation")),t.push(new ln("metageneration")),t.push(new ln("name","fullPath",!0));function e(i,o){return Fz(o)}const n=new ln("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new ln("size");return s.xform=r,t.push(s),t.push(new ln("timeCreated")),t.push(new ln("updated")),t.push(new ln("md5Hash",null,!0)),t.push(new ln("cacheControl",null,!0)),t.push(new ln("contentDisposition",null,!0)),t.push(new ln("contentEncoding",null,!0)),t.push(new ln("contentLanguage",null,!0)),t.push(new ln("contentType",null,!0)),t.push(new ln("metadata","customMetadata",!0)),mh=t,mh}function Uz(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new jn(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function jz(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return Uz(r,t),r}function PD(t,e,n){const r=xD(e);return r===null?null:jz(t,r,n)}function Bz(t,e,n,r){const s=xD(e);if(s===null||!pm(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const d=t.bucket,h=t.fullPath,f="/b/"+o(d)+"/o/"+o(h),p=Ed(f,n,r),E=TD({alt:"media",token:c});return p+E})[0]}function CD(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class Kl{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Es(t){if(!t)throw lE()}function dE(t,e){function n(r,s){const i=PD(t,s,e);return Es(i!==null),i}return n}function $z(t,e){function n(r,s){const i=PD(t,s,e);return Es(i!==null),Bz(i,s,t.host,t._protocol)}return n}function Td(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=iz():s=sz():n.getStatus()===402?s=rz(t.bucket):n.getStatus()===403?s=oz(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function kD(t){const e=Td(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=nz(t.path)),i.serverResponse=s.serverResponse,i}return n}function zz(t,e,n){const r=e.fullServerUrl(),s=Ed(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new Kl(s,i,dE(t,n),o);return a.errorHandler=kD(e),a}function qz(t,e,n){const r=e.fullServerUrl(),s=Ed(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new Kl(s,i,$z(t,n),o);return a.errorHandler=kD(e),a}function Hz(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function DD(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=Hz(null,e)),r}function ND(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let T="";for(let k=0;k<2;k++)T=T+Math.random().toString().slice(2);return T}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=DD(e,r,s),d=CD(c,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",p=ds.getBlob(h,r,f);if(p===null)throw wD();const E={name:c.fullPath},g=Ed(i,t.host,t._protocol),v="POST",_=t.maxUploadRetryTime,w=new Kl(g,v,dE(t,n),_);return w.urlParams=E,w.headers=o,w.body=p.uploadData(),w.errorHandler=Td(e),w}class lp{constructor(e,n,r,s){this.current=e,this.total=n,this.finalized=!!r,this.metadata=s||null}}function hE(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Es(!1)}return Es(!!n&&(e||["active"]).indexOf(n)!==-1),n}function Wz(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o=DD(e,r,s),a={name:o.fullPath},l=Ed(i,t.host,t._protocol),c="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},h=CD(o,n),f=t.maxUploadRetryTime;function p(g){hE(g);let v;try{v=g.getResponseHeader("X-Goog-Upload-URL")}catch{Es(!1)}return Es(pm(v)),v}const E=new Kl(l,c,p,f);return E.urlParams=a,E.headers=d,E.body=h,E.errorHandler=Td(e),E}function Kz(t,e,n,r){const s={"X-Goog-Upload-Command":"query"};function i(c){const d=hE(c,["active","final"]);let h=null;try{h=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Es(!1)}h||Es(!1);const f=Number(h);return Es(!isNaN(f)),new lp(f,r.size(),d==="final")}const o="POST",a=t.maxUploadRetryTime,l=new Kl(n,o,i,a);return l.headers=s,l.errorHandler=Td(e),l}const ob=256*1024;function Gz(t,e,n,r,s,i,o,a){const l=new lp(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw uz();const c=l.total-l.current;let d=c;s>0&&(d=Math.min(d,s));const h=l.current,f=h+d;let p="";d===0?p="finalize":c===d?p="upload, finalize":p="upload";const E={"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":`${l.current}`},g=r.slice(h,f);if(g===null)throw wD();function v(k,O){const V=hE(k,["active","final"]),S=l.current+d,I=r.size();let A;return V==="final"?A=dE(e,i)(k,O):A=null,new lp(S,I,V==="final",A)}const _="POST",w=e.maxUploadRetryTime,T=new Kl(n,_,v,w);return T.headers=E,T.body=g.uploadData(),T.progressCallback=a||null,T.errorHandler=Td(t),T}const En={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Og(t){switch(t){case"running":case"pausing":case"canceling":return En.RUNNING;case"paused":return En.PAUSED;case"success":return En.SUCCESS;case"canceled":return En.CANCELED;case"error":return En.ERROR;default:return En.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qz{constructor(e,n,r){if(vz(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ma(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class Yz{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Fo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Fo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Fo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw Ic("cannot .send() more than once");if(Os(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ic("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ic("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ic("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ic("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Xz extends Yz{initXhr(){this.xhr_.responseType="text"}}function wo(){return new Xz}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jz{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=uE(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(tt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const i=this.isExponentialBackoffExpired();if(ID(s.status,[]))if(i)s=vD();else{this.sleepTime=Math.max(this.sleepTime*2,tz),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(tt.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,i)=>{this._resolve=s,this._reject=i,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=Wz(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,wo,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._uploadUrl=i,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const s=Kz(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(s,wo,n,r);this._request=i,i.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=ob*this._chunkMultiplier,n=new lp(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,i)=>{let o;try{o=Gz(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,wo,s,i,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){ob*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=zz(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,wo,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=ND(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,wo,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=_D(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=Og(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,s){const i=new Qz(n||void 0,r||void 0,s||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Og(this._state)){case En.SUCCESS:ma(this._resolve.bind(null,this.snapshot))();break;case En.CANCELED:case En.ERROR:const n=this._reject;ma(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Og(this._state)){case En.RUNNING:case En.PAUSED:e.next&&ma(e.next.bind(e,this.snapshot))();break;case En.SUCCESS:e.complete&&ma(e.complete.bind(e))();break;case En.CANCELED:case En.ERROR:e.error&&ma(e.error.bind(e,this._error))();break;default:e.error&&ma(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e,n){this._service=e,n instanceof jn?this._location=n:this._location=jn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Jo(e,n)}get root(){const e=new jn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return RD(this._location.path)}get storage(){return this._service}get parent(){const e=Vz(this._location.path);if(e===null)return null;const n=new jn(this._location.bucket,e);return new Jo(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw fz(e)}}function Zz(t,e,n){t._throwIfRoot("uploadBytes");const r=ND(t.storage,t._location,uE(),new ds(e,!0),n);return t.storage.makeRequestWithTokens(r,wo).then(s=>({metadata:s,ref:t}))}function e8(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new Jz(t,new ds(e),n)}function t8(t){t._throwIfRoot("getDownloadURL");const e=qz(t.storage,t._location,uE());return t.storage.makeRequestWithTokens(e,wo).then(n=>{if(n===null)throw dz();return n})}function n8(t,e){const n=Lz(t._location.path,e),r=new jn(t._location.bucket,n);return new Jo(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r8(t){return/^[A-Za-z]+:\/\//.test(t)}function s8(t,e){return new Jo(t,e)}function OD(t,e){if(t instanceof fE){const n=t;if(n._bucket==null)throw cz();const r=new Jo(n,n._bucket);return e!=null?OD(r,e):r}else return e!==void 0?n8(t,e):t}function i8(t,e){if(e&&r8(e)){if(t instanceof fE)return s8(t,e);throw Dv("To use ref(service, url), the first argument must be a Storage instance.")}else return OD(t,e)}function ab(t,e){const n=e==null?void 0:e[yD];return n==null?null:jn.makeFromBucketSpec(n,t)}function o8(t,e,n,r={}){t.host=`${e}:${n}`;const s=Os(e);s&&(nw(`https://${t.host}/b`),ZR("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:GU(i,t.app.options.projectId))}class fE{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=gD,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Z9,this._maxUploadRetryTime=ez,this._requests=new Set,s!=null?this._bucket=jn.makeFromBucketSpec(s,this._host):this._bucket=ab(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=jn.makeFromBucketSpec(this._url,e):this._bucket=ab(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){ib("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){ib("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Ln(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Jo(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new pz(ED());{const o=bz(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const lb="@firebase/storage",cb="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VD="storage";function b7(t,e,n){return t=He(t),Zz(t,e,n)}function A7(t,e,n){return t=He(t),e8(t,e,n)}function x7(t){return t=He(t),t8(t)}function R7(t,e){return t=He(t),i8(t,e)}function a8(t=aP(),e){t=He(t);const r=Up(t,VD).getImmediate({identifier:e}),s=XR("storage");return s&&l8(r,...s),r}function l8(t,e,n,r={}){o8(t,e,n,r)}function c8(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new fE(n,r,s,e,od)}function u8(){es(new Ar(VD,c8,"PUBLIC").setMultipleInstances(!0)),zn(lb,cb,""),zn(lb,cb,"esm2020")}u8();const d8={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_VERSION:"0.0.0",VITE_DEV_MODE:"true",VITE_ENABLE_OFFLINE_PERSISTENCE:"false",VITE_FIREBASE_API_KEY:"AIzaSyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s",VITE_FIREBASE_APP_ID:"1:483702062341:web:b1ff06ad175cb7ae428b6c",VITE_FIREBASE_AUTH_DOMAIN:"voda-c6abd.firebaseapp.com",VITE_FIREBASE_AUTH_EMULATOR_URL:"http://localhost:9099",VITE_FIREBASE_FIRESTORE_EMULATOR_HOST:"localhost:8080",VITE_FIREBASE_FUNCTIONS_EMULATOR_HOST:"localhost:5001",VITE_FIREBASE_MEASUREMENT_ID:"G-CV6QGH7G7P",VITE_FIREBASE_MESSAGING_SENDER_ID:"483702062341",VITE_FIREBASE_PROJECT_ID:"voda-c6abd",VITE_FIREBASE_STORAGE_BUCKET:"voda-c6abd.appspot.com",VITE_FORCE_HASH_ROUTER:"true",VITE_SHOP_ID:"demo-shop-001",VITE_SHOP_NAME:"   ",VITE_SHOW_ENV_BANNER:"true",VITE_USE_EMULATORS:"false",VITE_USE_FIREBASE_EMULATOR:"false"},Nv={apiKey:"AIzaSyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s",authDomain:"voda-c6abd.firebaseapp.com",projectId:"voda-c6abd",storageBucket:"voda-c6abd.appspot.com",messagingSenderId:"483702062341",appId:"1:483702062341:web:b1ff06ad175cb7ae428b6c"};console.log(" Initializing Firebase with config:",{projectId:Nv.projectId,authDomain:Nv.authDomain,emulatorMode:!1});const mm=oP(Nv);try{typeof window<"u",void 0||console.log(" App Check not initialized: missing VITE_FIREBASE_RECAPTCHA_KEY")}catch(t){console.log(" Failed to initialize App Check (will proceed without it):",t)}const Xn=nj(mm,{persistence:[Sj,nv]});console.log(" Firebase Auth initialized with browserLocalPersistence (fallback to inMemory)");const W=Yk(mm,{experimentalAutoDetectLongPolling:!0});try{BP("error")}catch{}const pE=X9(mm,"us-central1"),h8=a8(mm);console.log(" Firebase initialized successfully");const f8=async()=>{try{console.log(" Offline persistence disabled (env flag or emulator mode)"),console.log(" Firestore features configured successfully")}catch(t){console.error(" Error configuring Firestore features:",t)}};setTimeout(f8,100);let mo=0;const Vg=3,p8=1e3,LD=async t=>{var e,n;if(console.error(" Firestore connection error:",t),(t.code==="unavailable"||t.code==="failed-precondition"||(e=t.message)!=null&&e.includes("ERR_ABORTED")||(n=t.message)!=null&&n.includes("UNAVAILABLE"))&&mo<Vg){mo++;const r=Math.min(p8*Math.pow(2,mo-1),1e4);console.log(` Attempting to reconnect (${mo}/${Vg}) in ${r}ms...`);try{await tE(W),await new Promise(s=>setTimeout(s,r)),await eE(W),console.log(" Firestore reconnected successfully"),mo=0}catch(s){console.error(" Failed to reconnect:",s),mo>=Vg&&(console.error(" Maximum reconnection attempts reached."),m8())}}},m8=()=>{const t=document.createElement("div");t.style.cssText=`
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #f8d7da;
    color: #721c24;
    padding: 20px;
    border-radius: 8px;
    border: 1px solid #f5c6cb;
    z-index: 10000;
    text-align: center;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    max-width: 400px;
  `,t.innerHTML=`
    <h3 style="margin: 0 0 10px 0;">  </h3>
    <p style="margin: 0 0 15px 0;">   .     .</p>
    <button onclick="window.location.reload()" style="
      background: #dc3545;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
    ">  </button>
  `,document.body.appendChild(t),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},1e4)};window.addEventListener("online",async()=>{console.log(" Network back online, enabling Firestore...");try{await eE(W),mo=0,console.log(" Firestore network enabled")}catch(t){console.error(" Failed to enable Firestore network:",t)}});window.addEventListener("offline",async()=>{console.log(" Network offline, disabling Firestore network...");try{await tE(W),console.log(" Firestore network disabled")}catch(t){console.error(" Failed to disable Firestore network:",t)}});window.addEventListener("unhandledrejection",t=>{var e,n,r,s,i,o;(((e=t.reason)==null?void 0:e.code)==="unavailable"||((n=t.reason)==null?void 0:n.code)==="failed-precondition"||(s=(r=t.reason)==null?void 0:r.message)!=null&&s.includes("ERR_ABORTED")||(o=(i=t.reason)==null?void 0:i.message)!=null&&o.includes("UNAVAILABLE"))&&(LD(t.reason),t.preventDefault())});console.log("Using Firebase Production Environment");const Lg=Object.freeze(Object.defineProperty({__proto__:null,auth:Xn,db:W,functions:pE,handleFirestoreError:LD,storage:h8},Symbol.toStringTag,{value:"Module"})),Le=t=>{if(t&&typeof t=="object"&&typeof t.toDate=="function")return t.toDate();if(t instanceof Date)return t;if(typeof t=="number")return new Date(t);if(typeof t=="string"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return new Date},g8=t=>{if(t===null)return!1;const e=Object.getPrototypeOf(t);return e===Object.prototype||e===null},Ku=t=>{if(t===void 0)return;if(t===null)return null;if(Array.isArray(t))return t.map(n=>Ku(n)).filter(n=>n!==void 0);if(t instanceof Date||!g8(t))return t;const e={};for(const[n,r]of Object.entries(t)){const s=Ku(r);s!==void 0&&(e[n]=s)}return e},Gh={async create(t){await Hi(we(W,"profiles",t.userId),{userId:t.userId,shopId:t.shopId,role:t.role,fullName:t.fullName,phone:t.phone,createdAt:Ae()})},async getById(t){const e=we(W,"profiles",t),n=await gt(e);if(n.exists()){const r=n.data();return{userId:n.id,...r,createdAt:Le(r.createdAt)}}return null},async update(t,e){const n=we(W,"profiles",t);await Ze(n,{...e,updatedAt:Ae()})},async getByShopId(t){const e=_e(he(W,"profiles"),pe("shopId","==",t));return(await Te(e)).docs.map(r=>{const s=r.data();return{userId:r.id,...s,createdAt:Le(s.createdAt)}})}},Ov={async create(t){return(await ws(he(W,"referrals"),{...t,createdAt:Ae(),updatedAt:Ae()})).id},async getByReferrerId(t){try{const e=_e(he(W,"referrals"),pe("referrerId","==",t),Jr("createdAt","desc"));return(await Te(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:Le(r.data().createdAt),updatedAt:Le(r.data().updatedAt)}))}catch(e){if(String((e==null?void 0:e.message)||"").includes("requires an index")){const r=_e(he(W,"referrals"),pe("referrerId","==",t));return(await Te(r)).docs.map(i=>({id:i.id,...i.data(),createdAt:Le(i.data().createdAt),updatedAt:Le(i.data().updatedAt)})).sort((i,o)=>{var a,l,c,d;return(((l=(a=o.createdAt)==null?void 0:a.getTime)==null?void 0:l.call(a))||0)-(((d=(c=i.createdAt)==null?void 0:c.getTime)==null?void 0:d.call(c))||0)})}throw e}},async getByReferralCode(t){const e=_e(he(W,"referrals"),pe("referralCode","==",t),ki(1)),n=await Te(e);if(n.empty)return null;const r=n.docs[0];return{id:r.id,...r.data(),createdAt:Le(r.data().createdAt),updatedAt:Le(r.data().updatedAt)}},async updateStatus(t,e){await Ze(we(W,"referrals",t),{status:e,updatedAt:Ae()})},generateReferralCode(t){const e=Date.now().toString(36);return`REF_${t.slice(-6)}_${e}`.toUpperCase()}},MD={async getByUserId(t){const e=_e(he(W,"profiles"),pe("userId","==",t)),n=await Te(e);if(!n.empty){const r=n.docs[0],s=r.data();return{userId:r.id,...s,createdAt:Le(s.createdAt),updatedAt:Le(s.updatedAt)}}return null},async update(t,e){const n=_e(he(W,"profiles"),pe("userId","==",t)),r=await Te(n);if(!r.empty){const s=we(W,"profiles",r.docs[0].id);await Ze(s,{...e,updatedAt:Ae()})}}},y8={async create(t){return(await ws(he(W,"merchantWallets"),{...t,transferLimit:t.transferLimit||2e5,withdrawLimit:t.withdrawLimit||2e5,transferUsage:t.transferUsage||0,withdrawUsage:t.withdrawUsage||0,createdAt:Ae(),updatedAt:Ae()})).id},async getByMerchantId(t){const e=_e(he(W,"merchantWallets"),pe("merchantUserId","==",t)),r=(await Te(e)).docs.map(a=>{const l=a.data();return{id:a.id,...l,transferLimit:l.transferLimit||2e5,withdrawLimit:l.withdrawLimit||2e5,transferUsage:l.transferUsage||0,withdrawUsage:l.withdrawUsage||0,createdAt:Le(l.createdAt),updatedAt:Le(l.updatedAt)}});if(r.length>0)return r.sort((a,l)=>{const c=a.createdAt,d=l.createdAt;return c&&d?d.getTime()-c.getTime():c&&!d?-1:!c&&d?1:0});const s=_e(he(W,"wallets"),pe("userId","==",t));return(await Te(s)).docs.map(a=>{const l=a.data();return{id:a.id,merchantUserId:l.userId||t,provider:l.provider||"instapay",msisdn:l.msisdn||"",label:l.name||l.label||"",isActive:l.isActive!==!1,dailyLimit:l.dailyLimit||2e5,monthlyLimit:l.monthlyLimit||2e5,transferLimit:l.transferLimit||l.monthlyTransferLimit||2e5,withdrawLimit:l.withdrawLimit||l.monthlyWithdrawLimit||2e5,transferUsage:l.transferUsage||l.monthlyTransferUsage||0,withdrawUsage:l.withdrawUsage||l.monthlyWithdrawUsage||0,dailyTransferLimit:l.dailyTransferLimit,dailyWithdrawLimit:l.dailyWithdrawLimit,createdAt:Le(l.createdAt),updatedAt:Le(l.updatedAt)}}).sort((a,l)=>{const c=a.createdAt,d=l.createdAt;return c&&d?d.getTime()-c.getTime():c&&!d?-1:!c&&d?1:0})},async getById(t){const e=we(W,"merchantWallets",t),n=await gt(e);if(n.exists()){const r=n.data();return{id:n.id,...r,transferLimit:r.transferLimit||2e5,withdrawLimit:r.withdrawLimit||2e5,transferUsage:r.transferUsage||0,withdrawUsage:r.withdrawUsage||0,createdAt:Le(r.createdAt),updatedAt:Le(r.updatedAt)}}return null},async update(t,e){const n=we(W,"merchantWallets",t);await Ze(n,{...e,updatedAt:Ae()})},async updateUsage(t,e,n){const r=we(W,"merchantWallets",t),s={updatedAt:Ae()};e!==void 0&&(s.transferUsage=e),n!==void 0&&(s.withdrawUsage=n),await Ze(r,s)},async resetDailyUsage(t){const n=(await this.getByMerchantId(t)).map(r=>this.updateUsage(r.id,0,0));await Promise.all(n)},async reassignByMsisdns(t,e){try{if(!e)throw new Error("merchantUserId   ");if(!Array.isArray(t)||t.length===0)return{updated:0,failed:0};const r=((o,a)=>o.reduce((l,c,d)=>(d%a===0&&l.push(o.slice(d,d+a)),l),[]))(t.map(o=>o.trim()).filter(Boolean),10);let s=0,i=0;for(const o of r){const a=_e(he(W,"merchantWallets"),pe("msisdn","in",o)),c=(await Te(a)).docs.map(async d=>{try{const h=d.data();if(h.merchantUserId&&h.merchantUserId!==e)return;await Ze(d.ref,{merchantUserId:e,updatedAt:Ae()}),s+=1}catch(h){console.error("Failed to reassign wallet",d.id,h),i+=1}});await Promise.allSettled(c)}return{updated:s,failed:i}}catch(n){return console.error("Error reassigning wallets by msisdns:",n),{updated:0,failed:t.length}}},async delete(t){const e=we(W,"merchantWallets",t);await en(e)}},FD={async create(t){try{console.log("Creating transaction:",t);const{calculateCommission:e,calculateProfit:n}=await Oe(async()=>{const{calculateCommission:c,calculateProfit:d}=await Promise.resolve().then(()=>$8);return{calculateCommission:c,calculateProfit:d}},void 0,import.meta.url),r=t.commission!==void 0?t.commission:e(t.amount,t.txnType),s=n(t.amount,t.txnType),i=t.merchantUserId||t.createdBy;i||console.warn("   merchantUserId  createdBy         .");const o=Object.fromEntries(Object.entries(t).filter(([c,d])=>d!==void 0)),a={...o,merchantUserId:i,commission:r,profit:s,createdAt:o.createdAt?o.createdAt instanceof Date?o.createdAt:new Date(String(o.createdAt)):new Date,uploadedAt:Ae(),confirmedAt:o.confirmedAt?o.confirmedAt instanceof Date?o.confirmedAt:new Date(String(o.confirmedAt)):null},l=await ws(he(W,"transactions"),a);if(console.log("Transaction created with ID:",l.id,"Profit:",s),s>0){const{ProfitService:c}=await Oe(async()=>{const{ProfitService:d}=await import("./profitService-Bj9jIfaS.js").then(h=>h.p);return{ProfitService:d}},[],import.meta.url);c.addProfit(s),console.log("     :",s,"")}return await this.updateLineUsage(t.lineId,t.amount),l.id}catch(e){throw console.error("Error creating transaction:",e),e}},async updateLineUsage(t,e){try{console.log("Updating line usage:",{lineId:t,amount:e})}catch(n){console.error("Error updating line usage:",n)}},async getByShopId(t){const e=_e(he(W,"transactions"),pe("shopId","==",t),Jr("createdAt","desc"));return(await Te(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:Le(r.data().createdAt),confirmedAt:r.data().confirmedAt?Le(r.data().confirmedAt):void 0}))},async getByMerchantId(t){const e=_e(he(W,"transactions"),pe("merchantUserId","==",t),Jr("createdAt","desc"));return(await Te(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:Le(r.data().createdAt),confirmedAt:r.data().confirmedAt?Le(r.data().confirmedAt):void 0}))},async getByUserId(t){const e=_e(he(W,"transactions"),pe("merchantUserId","==",t)),n=_e(he(W,"transactions"),pe("userId","==",t)),[r,s]=await Promise.all([Te(e),Te(n)]),i=[...r.docs,...s.docs],o=new Set,a=[];for(const l of i){if(o.has(l.id))continue;o.add(l.id);const c=l.data();a.push({id:l.id,...c,createdAt:Le(c.createdAt),confirmedAt:c.confirmedAt?Le(c.confirmedAt):void 0})}return a.sort((l,c)=>{const d=l.createdAt,h=c.createdAt;return d&&h?h.getTime()-d.getTime():d&&!h?-1:!d&&h?1:0})},async updateStatus(t,e,n){const r=we(W,"transactions",t);await Ze(r,{status:e,confirmedAt:n?n instanceof Date?n:new Date(String(n)):null})}},v8={async log(t,e,n,r,s){await ws(he(W,"auditLogs"),{actor:s,action:t,entity:e,entityId:n,meta:r,createdAt:Ae()})},async getLogs(t=100){const e=_e(he(W,"auditLogs"),Jr("createdAt","desc"),ki(t));return(await Te(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:Le(r.data().createdAt)}))},async getDeletedTransactions(){try{const t=_e(he(W,"deletedTransactions"),Jr("deletedAt","desc"));return(await Te(t)).docs.map(n=>({id:n.id,...n.data(),deletedAt:Le(n.data().deletedAt)}))}catch(t){return console.error("Error getting deleted transactions:",t),[]}},async getDeletedTransactionsByUser(t){try{const e=_e(he(W,"deletedTransactions"),pe("userId","==",t),Jr("deletedAt","desc"));return(await Te(e)).docs.map(r=>({id:r.id,...r.data(),deletedAt:Le(r.data().deletedAt)})).filter(r=>(r==null?void 0:r.permanent)!==!0)}catch(e){if(String((e==null?void 0:e.message)||"").includes("requires an index"))try{const r=_e(he(W,"deletedTransactions"),pe("userId","==",t));return(await Te(r)).docs.map(o=>({id:o.id,...o.data(),deletedAt:Le(o.data().deletedAt)})).filter(o=>(o==null?void 0:o.permanent)!==!0).sort((o,a)=>{const l=(o.deletedAt instanceof Date?o.deletedAt:new Date(o.deletedAt)).getTime();return(a.deletedAt instanceof Date?a.deletedAt:new Date(a.deletedAt)).getTime()-l})}catch(r){return console.error("Fallback error getting deleted transactions by user:",r),[]}return console.error("Error getting deleted transactions by user:",e),[]}},async saveDeletedTransaction(t){var e;try{if(console.log("      Firebase:",t.id),!t.userId)throw new Error("     ");if(!t.originalTransactionId)throw new Error("   ");const n=t.reference??t.transactionReference??((e=t.receipt)==null?void 0:e.reference),r={...t,deletedAt:Ae(),userId:t.userId,originalTransactionId:t.originalTransactionId,type:t.type||"unknown",amount:t.amount||0,status:t.status||"deleted",...n?{reference:n}:{}};console.log("    :",r);let s=3,i;for(;s>0;)try{const o=await ws(he(W,"deletedTransactions"),r);console.log("       :",o.id);return}catch(o){i=o,s--,console.warn(`       : ${s}`,o),s>0&&await new Promise(a=>setTimeout(a,1e3))}throw console.error("        "),i}catch(n){throw console.error("     :",n),n instanceof Error&&(n.message.includes("network")?console.error("    -    "):n.message.includes("permission")?console.error("    -    Firestore"):n.message.includes("quota")&&console.error("     -    Firebase")),n}},async permanentlyDeleteTransaction(t,e){try{const n=_e(he(W,"deletedTransactions"),pe("originalTransactionId","==",t),pe("userId","==",e)),r=await Te(n);r.empty?await ws(he(W,"deletedTransactions"),{userId:e,originalTransactionId:t,permanent:!0,deletedAt:Ae()}):await Promise.all(r.docs.map(s=>Ze(s.ref,{permanent:!0,deletedAt:Ae()}))),console.log("    :",t);try{const s=_e(he(W,"userTransactions"),pe("userId","==",e)),o=(await Te(s)).docs.filter(a=>{var c,d;const l=a.data();return a.id===t||l.id===t||l.transactionId===t||l.originalTransactionId===t||((c=l.receipt)==null?void 0:c.id)===t||((d=l.receipt)==null?void 0:d.transactionId)===t});o.length>0&&(console.log(`  ${o.length}   userTransactions`),await Promise.all(o.map(a=>en(a.ref))))}catch(s){console.warn("   userTransactions   :",s)}try{const s=we(W,"transactions",t);(await gt(s)).exists()&&(console.log("     transactions  "),await en(s));const o=_e(he(W,"transactions"),pe("transactionId","==",t)),a=await Te(o);a.empty||(console.log(`  ${a.size}   transactions  transactionId`),await Promise.all(a.docs.map(d=>en(d.ref))));const l=_e(he(W,"transactions"),pe("originalTransactionId","==",t)),c=await Te(l);c.empty||(console.log(`  ${c.size}   transactions  originalTransactionId`),await Promise.all(c.docs.map(d=>en(d.ref))));try{const d=_e(he(W,"deletedTransactions"),pe("userId","==",e),pe("originalTransactionId","==",t)),h=await Te(d),f=h.docs.map(E=>{var g;return String(((g=E.data())==null?void 0:g.reference)||"")}).filter(Boolean),p=h.docs.map(E=>{var g;return String(((g=E.data())==null?void 0:g.transactionId)||"")}).filter(Boolean);for(const E of f){const g=_e(he(W,"transactions"),pe("reference","==",E)),v=await Te(g);v.empty||(console.log(`  ${v.size}   transactions  reference=${E}`),await Promise.all(v.docs.map(_=>en(_.ref))))}for(const E of p){try{const _=we(W,"transactions",E);(await gt(_)).exists()&&(console.log("     transactions  :",E),await en(_))}catch{}const g=_e(he(W,"transactions"),pe("transactionId","==",E)),v=await Te(g);v.empty||(console.log(`  ${v.size}   transactions  transactionId=${E}`),await Promise.all(v.docs.map(_=>en(_.ref))))}}catch{}}catch(s){console.warn("    transactions   :",s)}}catch(n){throw console.error("Error permanently deleting transaction:",n),n}}},_8={async add(t){return(await ws(he(W,"daily_reports_archive"),{userId:t.userId,reportDate:t.reportDate,totalTransactions:t.totalTransactions,totalAmount:t.totalAmount,totalWithdrawn:t.totalWithdrawn,totalSent:t.totalSent,profit:t.profit??null,walletId:t.walletId??null,createdAt:Ae()})).id},async getByUser(t,e=50){try{const n=_e(he(W,"daily_reports_archive"),pe("userId","==",t),ki(e)),s=(await Te(n)).docs.map(i=>({id:i.id,userId:String(i.data().userId),reportDate:String(i.data().reportDate),totalTransactions:Number(i.data().totalTransactions||0),totalAmount:Number(i.data().totalAmount||0),totalWithdrawn:Number(i.data().totalWithdrawn||0),totalSent:Number(i.data().totalSent||0),profit:i.data().profit!==void 0?Number(i.data().profit):void 0,walletId:i.data().walletId??null,createdAt:Le(i.data().createdAt)}));return s.sort((i,o)=>i.reportDate<o.reportDate?1:-1),s}catch(n){throw console.error("Error loading daily reports archive:",n),n}},async deleteOlderThan(t,e=10){try{const n=new Date;n.setDate(n.getDate()-e);const r=_e(he(W,"daily_reports_archive"),pe("userId","==",t)),s=await Te(r);let i=0;for(const o of s.docs){const a=Le(o.data().createdAt);a&&a.getTime()<n.getTime()&&(await en(o.ref),i++)}return i>0&&console.log(`   ${i}      ${e}   ${t}`),i}catch(n){throw console.error("Error deleting old daily reports archive:",n),n}},async trimToMaxCount(t,e=10){try{const n=_e(he(W,"daily_reports_archive"),pe("userId","==",t)),s=(await Te(n)).docs.map(o=>({ref:o.ref,reportDate:String(o.data().reportDate||""),createdAt:Le(o.data().createdAt)}));if(s.sort((o,a)=>{var d,h;if(o.reportDate&&a.reportDate)return o.reportDate<a.reportDate?1:-1;const l=((d=o.createdAt)==null?void 0:d.getTime())??0;return(((h=a.createdAt)==null?void 0:h.getTime())??0)-l}),s.length<=e)return 0;const i=s.slice(e);for(const o of i)await en(o.ref);return console.log(`     ${t}  ${e}   ${i.length}`),i.length}catch(n){throw console.error("Error trimming daily reports archive to max count:",n),n}}},mE={async getUserData(t){try{console.log("     :",{userId:t});const e=we(W,"users",t),n=await gt(e);if(n.exists()){const r=n.data();return console.log("     :",r),{...r,createdAt:Le(r.createdAt),updatedAt:Le(r.updatedAt)}}else{console.log("       ");const r={walletBalances:{},createdAt:new Date,updatedAt:new Date};return await this.saveUserData(t,r),console.log("     "),r}}catch(e){return console.error("      :",e),{walletBalances:{},createdAt:new Date,updatedAt:new Date}}},getLocalReceipts(t){try{const e=localStorage.getItem(`localReceipts_${t}`);if(!e)return[];const n=JSON.parse(e);return Array.isArray(n)?n:[]}catch{return[]}},saveLocalReceipt(t,e){try{const n=this.getLocalReceipts(t),r=200,s=l=>{var c;return String((l==null?void 0:l.id)||(l==null?void 0:l.transactionId)||(l==null?void 0:l.originalTransactionId)||(l==null?void 0:l.reference)||(l==null?void 0:l.transactionReference)||((c=l==null?void 0:l.receipt)==null?void 0:c.reference)||`${(l==null?void 0:l.type)||"tx"}-${new Date((l==null?void 0:l.createdAt)||Date.now()).getTime()}`)},i=s(e),o=n.filter(l=>s(l)!==i),a=[e,...o].slice(0,r);localStorage.setItem(`localReceipts_${t}`,JSON.stringify(a))}catch{}},removeLocalReceiptById(t,e){try{const r=this.getLocalReceipts(t).filter(s=>{var o,a;return![s==null?void 0:s.id,s==null?void 0:s.transactionId,s==null?void 0:s.originalTransactionId,(o=s==null?void 0:s.receipt)==null?void 0:o.transactionId,(a=s==null?void 0:s.receipt)==null?void 0:a.id].map(l=>String(l||"")).includes(String(e))});localStorage.setItem(`localReceipts_${t}`,JSON.stringify(r))}catch{}},removeLocalReceiptByRef(t,e){try{if(!e)return;const r=this.getLocalReceipts(t).filter(s=>{var o;return![s==null?void 0:s.reference,s==null?void 0:s.transactionReference,(o=s==null?void 0:s.receipt)==null?void 0:o.reference].map(a=>String(a||"")).includes(String(e))});localStorage.setItem(`localReceipts_${t}`,JSON.stringify(r))}catch{}},subscribeDeletedTransactionsLocalSync(t){try{const e=_e(he(W,"deletedTransactions"),pe("userId","==",t));return Wu(e,r=>{try{r.docChanges().forEach(s=>{const i=s.doc.data(),o=String((i==null?void 0:i.originalTransactionId)||""),a=String((i==null?void 0:i.transactionId)||""),l=String((i==null?void 0:i.reference)||"");o&&this.removeLocalReceiptById(t,o),a&&this.removeLocalReceiptById(t,a),l&&this.removeLocalReceiptByRef(t,l)})}catch{}},r=>{console.warn("deletedTransactions local sync error:",r)})}catch(e){return console.warn("subscribeDeletedTransactionsLocalSync failed:",e),()=>{}}},async saveUserData(t,e){try{const n=we(W,"users",t),r=Ku(e);await Hi(n,{...r||{},updatedAt:Ae()},{merge:!0})}catch(n){throw console.error("Error saving user data:",n),n}},async updateUserData(t,e){try{console.log("      Firebase:",{userId:t,data:e});const n=we(W,"users",t),r=Object.fromEntries(Object.entries(e).filter(([l,c])=>c!==void 0)),s=Ku(r);let i={};try{const l=await gt(n);i=l.exists()?l.data():{},console.log("  :",i)}catch(l){console.warn("         :",l)}const o={...i,...s,updatedAt:Ae()};console.log("   :",o);let a=3;for(;a>0;)try{await Hi(n,o,{merge:!0}),console.log("     ");return}catch(l){if(a--,console.warn(`     : ${a}`,l),a===0)throw l;await new Promise(c=>setTimeout(c,1e3))}}catch(n){throw console.error("     :",n),n instanceof Error&&(n.message.includes("network")?console.error("    -    "):n.message.includes("permission")?console.error("    -    Firestore"):n.message.includes("quota")&&console.error("     -    Firebase")),n}},async getUserWallets(t){try{const e=await this.getUserData(t);return(e==null?void 0:e.wallets)||[]}catch(e){return console.error("Error getting user wallets:",e),[]}},async getUserTransactions(t){try{let e;try{const l=_e(he(W,"userTransactions"),pe("userId","==",t),Jr("createdAt","desc"),ki(200));e=await Te(l)}catch(l){const c=String((l==null?void 0:l.message)||""),d=_e(he(W,"userTransactions"),pe("userId","==",t));e=await Te(d)}const n=e.docs.map(l=>({id:l.id,...l.data(),createdAt:Le(l.data().createdAt)})),s=[...this.getLocalReceipts(t),...n],i=l=>{var c;return String((l==null?void 0:l.id)||(l==null?void 0:l.transactionId)||(l==null?void 0:l.originalTransactionId)||(l==null?void 0:l.reference)||(l==null?void 0:l.transactionReference)||((c=l==null?void 0:l.receipt)==null?void 0:c.reference)||`${(l==null?void 0:l.type)||"tx"}-${new Date((l==null?void 0:l.createdAt)||0).getTime()}`)},o=new Set;return s.filter(l=>{const c=i(l);return o.has(c)?!1:(o.add(c),!0)}).filter(l=>(l==null?void 0:l.status)!=="cancelled"&&!(l!=null&&l.isDeleted)).sort((l,c)=>{const d=l.createdAt?new Date(l.createdAt).getTime():0;return(c.createdAt?new Date(c.createdAt).getTime():0)-d})}catch(e){console.error("Error getting user transactions:",e);const n=(e==null?void 0:e.code)||"";if(n==="permission-denied"||n==="unauthenticated")throw e;return[]}},async saveUserTransaction(t,e){var n,r;try{const s=Object.fromEntries(Object.entries(e??{}).filter(([o,a])=>a!==void 0));try{const o=s.reference;if(o){const c=_e(he(W,"deletedTransactions"),pe("userId","==",t),pe("reference","==",o));if(!(await Te(c)).empty)return console.log("          ."),"skip-deleted"}{const c=_e(he(W,"deletedTransactions"),pe("userId","==",t),pe("permanent","==",!0)),d=await Te(c);if(!d.empty){const h=[s.id,s.transactionId,s.originalTransactionId,(n=s.receipt)==null?void 0:n.id,(r=s.receipt)==null?void 0:r.transactionId,s.reference,s.transactionReference].filter(p=>!!p).map(p=>String(p));if(d.docs.find(p=>{const E=p.data(),g=String(E.originalTransactionId||E.transactionId||p.id||""),v=String(E.reference||"");return g&&h.includes(g)||v&&h.includes(v)}))return console.log("        /   ."),"skip-deleted"}}const a=_e(he(W,"deletedTransactions"),pe("userId","==",t),Jr("deletedAt","desc"),ki(20)),l=await Te(a);if(!l.empty){const c=s.senderMsisdn||s.senderPhone||s.sender_msisdn,d=s.receiverMsisdn||s.receiverPhone||s.receiver_msisdn,h=Number(s.amount||0),f=s.createdAt?new Date(String(s.createdAt)):new Date,p=10*60*1e3;if(l.docs.find(g=>{const v=g.data(),_=v.senderMsisdn||v.senderPhone||v.sender_msisdn,w=v.receiverMsisdn||v.receiverPhone||v.receiver_msisdn,T=Number(v.amount||0),k=v.createdAt?new Date(String(v.createdAt)):f;return Math.abs(k.getTime()-f.getTime())<=p&&T===h&&_===c&&w===d}))return console.log("        ."),"skip-deleted"}}catch(o){console.warn("           :",o)}try{const o=_e(he(W,"userTransactions"),pe("userId","==",t));if(s.transactionId){const g=_e(he(W,"userTransactions"),pe("userId","==",t),pe("transactionId","==",s.transactionId)),v=await Te(g);if(!v.empty){const _=v.docs[0];return await Ze(we(W,"userTransactions",_.id),{...s,uploadedAt:Ae()}),_.id}}if(s.reference){const g=_e(he(W,"userTransactions"),pe("userId","==",t),pe("reference","==",s.reference)),v=await Te(g);if(!v.empty){const _=v.docs[0];return await Ze(we(W,"userTransactions",_.id),{...s,uploadedAt:Ae()}),_.id}}const a=_e(he(W,"userTransactions"),pe("userId","==",t),Jr("createdAt","desc"),ki(20)),l=await Te(a),c=s.senderMsisdn||s.senderPhone||s.sender_msisdn,d=s.receiverMsisdn||s.receiverPhone||s.receiver_msisdn,h=Number(s.amount||0),f=s.createdAt?new Date(String(s.createdAt)):new Date,p=5*60*1e3,E=l.docs.find(g=>{const v=g.data(),_=v.senderMsisdn||v.senderPhone||v.sender_msisdn,w=v.receiverMsisdn||v.receiverPhone||v.receiver_msisdn,T=Number(v.amount||0),k=Le(v.createdAt);return Math.abs(k.getTime()-f.getTime())<=p&&T===h&&_===c&&w===d});if(E)return await Ze(we(W,"userTransactions",E.id),{...s,uploadedAt:Ae()}),E.id}catch(o){console.warn("      saveUserTransaction  :",o)}return(await ws(he(W,"userTransactions"),{...s,userId:t,createdAt:s.createdAt?s.createdAt instanceof Date?s.createdAt:new Date(String(s.createdAt)):Ae(),uploadedAt:Ae()})).id}catch(s){throw console.error("Error saving user transaction:",s),s}},async removeUserTransaction(t,e){try{console.log("     userTransactions:",{userId:t,transactionId:e});try{const o=we(W,"userTransactions",e),a=await gt(o);if(a.exists()){const l=a.data();if([l==null?void 0:l.userId,l==null?void 0:l.merchantUserId,l==null?void 0:l.createdBy].map(d=>String(d||"")).includes(String(t))){console.log("    userTransactions  ( ):",e),await en(o),console.log("     userTransactions");try{this.removeLocalReceiptById(t,e)}catch{}return}else console.log("           ")}}catch(o){console.warn("     userTransactions   :",o)}const n=_e(he(W,"userTransactions"),pe("userId","==",t)),r=await Te(n);console.log(`    ${r.docs.length}  `);const s=r.docs.filter(o=>{var h,f;const a=o.data(),l=o.id,d=[a.id===e,a.transactionId===e,l===e,a.originalTransactionId===e,((h=a.receipt)==null?void 0:h.transactionId)===e,((f=a.receipt)==null?void 0:f.id)===e].some(p=>p===!0);return d&&console.log("     :",{docId:l,dataId:a.id,transactionId:a.transactionId,originalTransactionId:a.originalTransactionId,searchingFor:e}),d}),i=[_e(he(W,"userTransactions"),pe("merchantUserId","==",t)),_e(he(W,"userTransactions"),pe("createdBy","==",t))];for(const o of i)try{const l=(await Te(o)).docs.filter(c=>{var f,p;const d=c.data(),h=c.id;return d.id===e||d.transactionId===e||h===e||d.originalTransactionId===e||((f=d.receipt)==null?void 0:f.transactionId)===e||((p=d.receipt)==null?void 0:p.id)===e});l.length&&(console.log(`   ${l.length}       `),s.push(...l))}catch{}if(s.length>0){console.log(`   ${s.length}    `);const o=s.map(async a=>{try{console.log("   :",a.id),await en(a.ref)}catch(l){console.warn("     userTransactions ():",{id:a.id,error:l})}});await Promise.allSettled(o);try{this.removeLocalReceiptById(t,e)}catch{}console.log("        userTransactions:",e);try{const a=we(W,"transactions",e);if((await gt(a)).exists())console.log("     transactions   "),await en(a);else{const c=_e(he(W,"transactions"),pe("transactionId","==",e)),d=await Te(c);d.empty||(console.log(`   ${d.size}   transactions  transactionId `),await Promise.all(d.docs.map(p=>en(p.ref))));const h=_e(he(W,"transactions"),pe("originalTransactionId","==",e)),f=await Te(h);f.empty||(console.log(`   ${f.size}   transactions  originalTransactionId `),await Promise.all(f.docs.map(p=>en(p.ref))))}}catch(a){console.warn("      transactions   :",a)}return}console.log("       userTransactions (   ):",e)}catch(n){console.error("      userTransactions ():",n);return}}},P7=Object.freeze(Object.defineProperty({__proto__:null,auditLogService:v8,dailyReportsArchiveService:_8,merchantWalletService:y8,profileService:Gh,profileServiceExtra:MD,referralService:Ov,sanitizeFirestoreData:Ku,transactionService:FD,userDataService:mE},Symbol.toStringTag,{value:"Module"}));var Qh=(t=>(t.MONTHLY="monthly",t.QUARTERLY="quarterly",t.YEARLY="yearly",t.LIFETIME="lifetime",t.ZERO="zero",t.TAHWEELA="tahweela",t))(Qh||{});const w8=(t,e=new Date)=>{const n=new Date(e);switch(t){case"monthly":{const r=new Date(n);return r.setDate(r.getDate()+30),r}case"tahweela":{const r=new Date(n);return r.setDate(r.getDate()+30),r}case"quarterly":{const r=new Date(n);return r.setDate(r.getDate()+90),r}case"yearly":{const r=new Date(n);return r.setDate(r.getDate()+365),r}case"lifetime":return null;case"zero":return null;default:return null}},Yh=t=>{var s,i;if(!t||!t.isActive)return!1;if(t.planType==="lifetime")return!0;if(!t.endDate){const o=new Date,a=t.activatedAt,l=(s=a==null?void 0:a.toDate)!=null&&s.call(a)?a.toDate():t.activatedAt?new Date(t.activatedAt):null;return l&&o.getTime()-l.getTime()<4*60*60*1e3,!0}const e=new Date,n=t.endDate,r=n!=null&&n.toDate?n.toDate():new Date(n);if(!r||isNaN(r.getTime())){const o=t.activatedAt,a=(i=o==null?void 0:o.toDate)!=null&&i.call(o)?o.toDate():t.activatedAt?new Date(t.activatedAt):null;return a&&e.getTime()-a.getTime()<4*60*60*1e3,!0}return e<=r},E8=t=>{if(!t||!t.isActive)return null;if(t.planType==="lifetime")return-1;if(!t.endDate)return null;const e=new Date,n=t.endDate,r=n!=null&&n.toDate?n.toDate():new Date(n);if(!r||isNaN(r.getTime()))return null;const s=r.getTime()-e.getTime(),i=Math.ceil(s/(1e3*60*60*24));return i>0?i:0},C7=async(t,e,n,r)=>{try{const s=new Date,i=w8(e,s),o={planType:e,startDate:s,endDate:i,isActive:!0,activatedBy:n,activatedAt:s};console.log(" Activating subscription for user:",{userId:t,planType:e,adminId:n,subscriptionData:o});const a=we(W,"users",t);if(await Ze(a,{subscription:o,isActive:!0,approved:!0,isOnFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,updatedAt:new Date}),console.log(" Subscription data updated in Firestore"),typeof window<"u"){const l=new CustomEvent("subscriptionActivated",{detail:{userId:t,planType:e,timestamp:new Date().toISOString()}});window.dispatchEvent(l),console.log(" Subscription activation event dispatched:",{userId:t,planType:e});const c=new CustomEvent("userSubscriptionUpdated",{detail:{userId:t,planType:e,isActive:!0,timestamp:new Date().toISOString()}});window.dispatchEvent(c),console.log(" Global subscription update event dispatched")}console.log(`    ${e}  ${t}`)}catch(s){throw console.error("    :",s),new Error("   ")}},k7=async t=>{try{const e=we(W,"users",t);await Ze(e,{"subscription.isActive":!1,isActive:!1,isOnFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,updatedAt:new Date}),console.log(`      ${t}`)}catch(e){throw console.error("     :",e),new Error("    ")}},D7=async t=>{try{const e=we(W,"users",t),n=await gt(e);return n.exists()&&n.data().subscription||null}catch(e){return console.error("      :",e),null}},N7=t=>{switch(t){case"monthly":return"";case"quarterly":return" ";case"yearly":return"";case"lifetime":return" ";case"zero":return"";case"tahweela":return"";default:return" "}},O7=t=>{if(!t)return"text-gray-500";if(!t.isActive)return"text-red-500";if(t.planType==="lifetime")return"text-green-600";const e=E8(t);return e===null||e<=0?"text-red-500":e<=7?"text-yellow-500":"text-green-500"},V7=t=>t?(t instanceof Date?t:new Date(t)).toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric"}):" ";class gE{static async startFreeTrialFromAdmin(e){try{const n=we(W,"users",e),r=await gt(n);if(!r.exists())return{success:!1,message:"  "};if(r.data().hasUsedFreeTrial)return{success:!1,message:"       "};const i=new Date,o=await this.getTrialDurationHours(),a=new Date(i.getTime()+o*60*60*1e3);return await Ze(n,{hasUsedFreeTrial:!0,freeTrialStartDate:i,freeTrialEndDate:a,isOnFreeTrial:!0,isActive:!0,approved:!0,updatedAt:Ae()}),{success:!0,message:`     ${o} ${o>=3&&o<=10?"":o===2?"":""}`}}catch(n){return console.error("Error starting admin free trial:",n),{success:!1,message:"     "}}}static async startFreeTrial(e){try{const n=we(W,"users",e),r=await gt(n);if(!r.exists())return{success:!1,message:"  "};if(r.data().hasUsedFreeTrial)return{success:!1,message:"     "};const i=new Date,o=await this.getTrialDurationHours(),a=new Date(i.getTime()+o*60*60*1e3);return await Ze(n,{hasUsedFreeTrial:!0,freeTrialStartDate:i,freeTrialEndDate:a,isOnFreeTrial:!0,isActive:!0,approved:!0,updatedAt:Ae()}),{success:!0,message:`     ${o} ${o>=3&&o<=10?"":o===2?"":""}`}}catch(n){return console.error("    :",n),{success:!1,message:"     "}}}static async checkTrialValidity(e){var n,r,s,i;try{const o=we(W,"users",e),a=await gt(o);if(!a.exists())return{isValid:!1,isExpired:!1,hoursRemaining:0,hasUsedTrial:!1};const l=a.data(),c=l.hasUsedFreeTrial||!1,d=l.isOnFreeTrial||!1;let h=(r=(n=l.freeTrialEndDate)==null?void 0:n.toDate)!=null&&r.call(n)?l.freeTrialEndDate.toDate():l.freeTrialEndDate?new Date(l.freeTrialEndDate):null;const f=(i=(s=l.freeTrialStartDate)==null?void 0:s.toDate)!=null&&i.call(s)?l.freeTrialStartDate.toDate():l.freeTrialStartDate?new Date(l.freeTrialStartDate):null;if(!c||!d||!h)return{isValid:!1,isExpired:!1,hoursRemaining:0,hasUsedTrial:c};const p=new Date;if(p>h){const _=Yh(l.subscription);return await Ze(o,{isOnFreeTrial:!1,isActive:_,approved:_,updatedAt:Ae()}),!_&&typeof window<"u"&&setTimeout(()=>{window.location.href="/user/pending-approval"},1e3),{isValid:!1,isExpired:!0,hoursRemaining:0,hasUsedTrial:c}}try{const _=await this.getTrialDurationHours();if(f&&_&&Number.isFinite(_)&&Math.round((h.getTime()-f.getTime())/36e5)<_){const T=new Date(f.getTime()+_*60*60*1e3);T.getTime()>h.getTime()&&(await Ze(o,{freeTrialEndDate:T,updatedAt:Ae()}),h=T)}}catch(_){console.warn("checkTrialValidity: failed to auto-extend to configured hours",_)}const g=h.getTime()-p.getTime();return{isValid:!0,isExpired:!1,hoursRemaining:Math.ceil(g/(1e3*3600)),hasUsedTrial:c}}catch(o){return console.error("      :",o),{isValid:!1,isExpired:!1,hoursRemaining:0,hasUsedTrial:!1}}}static async getTrialData(e){var n,r;try{const s=we(W,"users",e),i=await gt(s);if(!i.exists())return{hasUsedFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,isOnFreeTrial:!1};const o=i.data();return{hasUsedFreeTrial:o.hasUsedFreeTrial||!1,freeTrialStartDate:((n=o.freeTrialStartDate)==null?void 0:n.toDate())||null,freeTrialEndDate:((r=o.freeTrialEndDate)==null?void 0:r.toDate())||null,isOnFreeTrial:o.isOnFreeTrial||!1}}catch(s){return console.error("      :",s),{hasUsedFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,isOnFreeTrial:!1}}}static async getTrialDurationHours(){try{const e=we(W,"config","freeTrial"),n=await gt(e);if(n.exists()){const r=n.data(),s=typeof(r==null?void 0:r.durationHours)=="number"?r.durationHours:this.TRIAL_DURATION_HOURS;return!Number.isFinite(s)||s<1?this.TRIAL_DURATION_HOURS:s}return this.TRIAL_DURATION_HOURS}catch(e){return console.warn("getTrialDurationHours: fallback to default due to error",e),this.TRIAL_DURATION_HOURS}}static async updateTrialDurationHours(e){try{if(!Number.isFinite(e)||e<1)return{success:!1,message:"       "};const n=we(W,"config","freeTrial");return await Hi(n,{durationHours:e,updatedAt:Ae()},{merge:!0}),{success:!0,message:"     "}}catch(n){return console.error("Error updating trial duration hours:",n),{success:!1,message:"    "}}}static async resetActiveTrialToCurrentDuration(e){var n,r;try{const s=we(W,"users",e),i=await gt(s);if(!i.exists())return{success:!1,message:"  "};const o=i.data(),a=!!o.isOnFreeTrial,l=(r=(n=o.freeTrialStartDate)==null?void 0:n.toDate)!=null&&r.call(n)?o.freeTrialStartDate.toDate():o.freeTrialStartDate?new Date(o.freeTrialStartDate):null;if(!a||!l)return{success:!1,message:"     "};const c=await this.getTrialDurationHours(),d=new Date(l.getTime()+c*60*60*1e3);return await Ze(s,{freeTrialEndDate:d,updatedAt:Ae()}),{success:!0,message:`     ${c} ${c>=3&&c<=10?"":c===2?"":""}`}}catch(s){return console.error("Error resetting active trial duration:",s),{success:!1,message:"    "}}}}r0(gE,"TRIAL_DURATION_HOURS",24);const L7=Object.freeze(Object.defineProperty({__proto__:null,FreeTrialService:gE},Symbol.toStringTag,{value:"Module"})),T8={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_VERSION:"0.0.0",VITE_DEV_MODE:"true",VITE_ENABLE_OFFLINE_PERSISTENCE:"false",VITE_FIREBASE_API_KEY:"AIzaSyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s",VITE_FIREBASE_APP_ID:"1:483702062341:web:b1ff06ad175cb7ae428b6c",VITE_FIREBASE_AUTH_DOMAIN:"voda-c6abd.firebaseapp.com",VITE_FIREBASE_AUTH_EMULATOR_URL:"http://localhost:9099",VITE_FIREBASE_FIRESTORE_EMULATOR_HOST:"localhost:8080",VITE_FIREBASE_FUNCTIONS_EMULATOR_HOST:"localhost:5001",VITE_FIREBASE_MEASUREMENT_ID:"G-CV6QGH7G7P",VITE_FIREBASE_MESSAGING_SENDER_ID:"483702062341",VITE_FIREBASE_PROJECT_ID:"voda-c6abd",VITE_FIREBASE_STORAGE_BUCKET:"voda-c6abd.appspot.com",VITE_FORCE_HASH_ROUTER:"true",VITE_SHOP_ID:"demo-shop-001",VITE_SHOP_NAME:"   ",VITE_SHOW_ENV_BANNER:"true",VITE_USE_EMULATORS:"false",VITE_USE_FIREBASE_EMULATOR:"false"},UD=b.createContext(void 0);function Wi(){const t=b.useContext(UD);if(t===void 0)throw new Error("useFirebaseAuth must be used within a FirebaseAuthProvider");return t}const I8=({children:t})=>{const[e,n]=b.useState(null),[r,s]=b.useState(null),[i,o]=b.useState(null),[a,l]=b.useState(!1),[c,d]=b.useState(!0),h=async S=>{var I,A,D,R,N,C,q,Z,ie,Q,F,U,Y,de,ne,ce;try{const le=we(W,"profiles",S);let Ie=!1;try{const ae=await uD(le);if(ae.exists()){const ye=ae.data(),Re={userId:ae.id,shopId:ye.shopId,role:ye.role,fullName:ye.fullName,phone:ye.phone,shopName:ye.shopName||null,approved:ye.approved,avatarId:ye.avatarId,bridgeLink:ye.bridgeLink||null,bridgeDeviceId:ye.bridgeDeviceId||null,showWithdrawNote:ye.showWithdrawNote!==void 0?!!ye.showWithdrawNote:!0,isReceiptNoteEnabled:ye.isReceiptNoteEnabled!==void 0?!!ye.isReceiptNoteEnabled:!0,createdAt:((A=(I=ye.createdAt)==null?void 0:I.toDate)==null?void 0:A.call(I))||new Date,updatedAt:((R=(D=ye.updatedAt)==null?void 0:D.toDate)==null?void 0:R.call(D))||new Date,trialStarted:ye.trialStarted||!1,trialStartDate:(C=(N=ye.trialStartDate)==null?void 0:N.toDate)==null?void 0:C.call(N),trialEndDate:(Z=(q=ye.trialEndDate)==null?void 0:q.toDate)==null?void 0:Z.call(q),trialExpired:ye.trialExpired||!1};s(Re),Ie=!0,d(!1)}}catch(ae){console.log("Cache profile not available:",(ae==null?void 0:ae.code)||ae)}try{if(!Ie){const ae=localStorage.getItem(`profile_cache_${S}`);if(ae){const ye=JSON.parse(ae);s(ye),Ie=!0,d(!1)}}}catch{}if(!Ie)for(let ae=0;ae<3;ae++)try{const ye=await gt(le);if(ye.exists()){const Re=ye.data(),Tt={userId:ye.id,shopId:Re.shopId,role:Re.role,fullName:Re.fullName,phone:Re.phone,shopName:Re.shopName||null,approved:Re.approved,avatarId:Re.avatarId,bridgeLink:Re.bridgeLink||null,bridgeDeviceId:Re.bridgeDeviceId||null,showWithdrawNote:Re.showWithdrawNote!==void 0?!!Re.showWithdrawNote:!0,isReceiptNoteEnabled:Re.isReceiptNoteEnabled!==void 0?!!Re.isReceiptNoteEnabled:!0,createdAt:((Q=(ie=Re.createdAt)==null?void 0:ie.toDate)==null?void 0:Q.call(ie))||new Date,updatedAt:((U=(F=Re.updatedAt)==null?void 0:F.toDate)==null?void 0:U.call(F))||new Date,trialStarted:Re.trialStarted||!1,trialStartDate:(de=(Y=Re.trialStartDate)==null?void 0:Y.toDate)==null?void 0:de.call(Y),trialEndDate:(ce=(ne=Re.trialEndDate)==null?void 0:ne.toDate)==null?void 0:ce.call(ne),trialExpired:Re.trialExpired||!1};s(Tt);try{localStorage.setItem(`profile_cache_${ye.id}`,JSON.stringify(Tt))}catch{}Ie=!0,d(!1);break}}catch{}return Wu(le,async ae=>{var ye,Re,Tt,Nt,Kt,Bt,yn,Cr;if(ae.exists()){const ve=ae.data(),Qn={userId:ae.id,shopId:ve.shopId,role:ve.role,fullName:ve.fullName,phone:ve.phone,shopName:ve.shopName||null,approved:ve.approved,avatarId:ve.avatarId,bridgeLink:ve.bridgeLink||null,bridgeDeviceId:ve.bridgeDeviceId||null,showWithdrawNote:ve.showWithdrawNote!==void 0?!!ve.showWithdrawNote:!0,isReceiptNoteEnabled:ve.isReceiptNoteEnabled!==void 0?!!ve.isReceiptNoteEnabled:!0,createdAt:((Re=(ye=ve.createdAt)==null?void 0:ye.toDate)==null?void 0:Re.call(ye))||new Date,updatedAt:((Nt=(Tt=ve.updatedAt)==null?void 0:Tt.toDate)==null?void 0:Nt.call(Tt))||new Date,trialStarted:ve.trialStarted||!1,trialStartDate:(Bt=(Kt=ve.trialStartDate)==null?void 0:Kt.toDate)==null?void 0:Bt.call(Kt),trialEndDate:(Cr=(yn=ve.trialEndDate)==null?void 0:yn.toDate)==null?void 0:Cr.call(yn),trialExpired:ve.trialExpired||!1};s(Qn);try{localStorage.setItem(`profile_cache_${ae.id}`,JSON.stringify(Qn))}catch{}Ie||(Ie=!0,d(!1))}else if(!Ie)try{const ve=await MD.getByUserId(S);if(ve){const Qn={userId:S,shopId:ve.shopId,role:ve.role||"user",fullName:ve.fullName||null,phone:ve.phone||null,shopName:ve.shopName||null,approved:ve.approved??!1,avatarId:ve.avatarId||void 0,bridgeLink:ve.bridgeLink||null,bridgeDeviceId:ve.bridgeDeviceId||null,createdAt:Ae(),updatedAt:Ae()};await Hi(we(W,"profiles",S),Qn,{merge:!0}),s({...ve,userId:S,createdAt:ve.createdAt||new Date,updatedAt:ve.updatedAt||new Date})}else await p(S)}catch(ve){console.error("Profile migration/create error:",ve)}finally{Ie=!0,d(!1)}},ae=>{console.error("Profile listener error:",ae);try{d(!1)}catch{}})}catch(le){return console.error("Error setting up profile listener:",le),await p(S),d(!1),()=>{}}},f=async S=>{try{const I=we(W,"users",S.uid);(await gt(I)).exists()?(await Ze(I,{lastLogin:Ae(),updatedAt:Ae()}),console.log(" ensureAdminUserDoc: Updated lastLogin for",S.uid)):(await Hi(I,{email:S.email||"",displayName:S.displayName||" ",phone:null,shopName:null,isActive:!1,createdAt:Ae(),updatedAt:Ae(),lastLogin:Ae()},{merge:!0}),console.log(" ensureAdminUserDoc: Created users doc for",S.uid))}catch(I){console.error(" ensureAdminUserDoc error:",I)}},p=async(S,I,A,D,R)=>{var N,C;try{console.log("Creating default profile for user:",S);const q=Ov.generateReferralCode(S);let Z=null;const ie={userId:S,shopId:"default-shop",role:"user",fullName:I||" ",phone:A||null,shopName:D||null,approved:!1,referralCode:q,referredBy:R||null,bridgeLink:null,bridgeDeviceId:null,showWithdrawNote:!0,isReceiptNoteEnabled:!0,createdAt:new Date,updatedAt:new Date};s(ie),console.log("Created temporary profile:",ie);try{const{doc:Q,setDoc:F,serverTimestamp:U}=await Oe(async()=>{const{doc:ce,setDoc:le,serverTimestamp:Ie}=await Promise.resolve().then(()=>kg);return{doc:ce,setDoc:le,serverTimestamp:Ie}},void 0,import.meta.url),{db:Y}=await Oe(async()=>{const{db:ce}=await Promise.resolve().then(()=>Lg);return{db:ce}},void 0,import.meta.url),de={email:((N=Xn.currentUser)==null?void 0:N.email)||"",displayName:I||" ",phone:A||null,shopName:D||null,isActive:!1,referralCode:q,referredBy:R||null,createdAt:U(),lastLogin:null,updatedAt:U()};if(console.log("Attempting to add user to admin collection with data:",de),await F(Q(Y,"users",S),de,{merge:!0}),console.log(" User successfully added to admin collection:",de),R)try{const{query:ce,collection:le,where:Ie,limit:Qe,getDocs:ae}=await Oe(async()=>{const{query:Nt,collection:Kt,where:Bt,limit:yn,getDocs:Cr}=await Promise.resolve().then(()=>kg);return{query:Nt,collection:Kt,where:Bt,limit:yn,getDocs:Cr}},void 0,import.meta.url),{db:ye}=await Oe(async()=>{const{db:Nt}=await Promise.resolve().then(()=>Lg);return{db:Nt}},void 0,import.meta.url),Re=ce(le(ye,"users"),Ie("referralCode","==",R),Qe(1)),Tt=await ae(Re);Tt.empty?console.log(" Referral code not found in users collection:",R):(Z=Tt.docs[0].id,await Ov.create({referrerId:Z,referredUserId:S,referredUserEmail:((C=Xn.currentUser)==null?void 0:C.email)||"",referralCode:R,status:"completed"}),console.log(" Referral record created successfully for referrer:",Z))}catch(ce){console.error(" Error creating referral record:",ce)}const ne=await gt(Q(Y,"users",S));ne.exists()?console.log(" User document verified in Firestore:",ne.data()):console.log(" User document not found after creation")}catch(Q){console.error(" Error adding user to admin collection:",Q)}try{const{addDoc:Q,collection:F,serverTimestamp:U}=await Oe(async()=>{const{addDoc:le,collection:Ie,serverTimestamp:Qe}=await Promise.resolve().then(()=>kg);return{addDoc:le,collection:Ie,serverTimestamp:Qe}},void 0,import.meta.url),{db:Y}=await Oe(async()=>{const{db:le}=await Promise.resolve().then(()=>Lg);return{db:le}},void 0,import.meta.url),ne=(await Q(F(Y,"shops"),{name:D||" ",ownerId:S,createdAt:U(),updatedAt:U(),isActive:!0})).id;await Gh.create({userId:S,shopId:ne,role:"user",fullName:" ",phone:null});try{await Gh.update(S,{referralCode:q,referredBy:Z||null,showWithdrawNote:!0,isReceiptNoteEnabled:!0})}catch(le){console.warn(" Failed to update profile with referral fields:",le)}const ce=await Gh.getById(S);ce&&(s(ce),console.log("Updated with Firebase profile:",ce))}catch(Q){console.error("Error creating profile:",Q),console.log("Using local profile - Firebase unavailable")}}catch(q){console.error("Error creating default profile:",q)}};b.useEffect(()=>{console.log(" Setting up auth state listener"),d(!0);const S=setTimeout(()=>{console.warn(" Global auth timeout reached, forcing loading to false"),d(!1)},2e4);localStorage.getItem("demoProfile")&&(console.log(" Cleaning up demo profile from localStorage"),localStorage.removeItem("demoProfile"));const I=localStorage.getItem("demoUser"),A=localStorage.getItem("demoProfile");if(I&&A){console.log(" Found demo user in localStorage");try{const R=JSON.parse(I),N=JSON.parse(A);n(R),s(N),clearTimeout(S),d(!1);return}catch(R){console.error("Error parsing demo user data:",R),localStorage.removeItem("demoUser"),localStorage.removeItem("demoProfile")}}const D=Ej(Xn,async R=>{console.log(" Auth state changed:",{uid:R==null?void 0:R.uid,email:R==null?void 0:R.email,emailVerified:R==null?void 0:R.emailVerified,timestamp:new Date().toISOString()}),n(R),R?(console.log(" User authenticated, starting profile hydration for:",R.uid),h(R.uid),w(),f(R)):(console.log(" User not authenticated, clearing profile"),s(null),o(null),l(!1),d(!1)),clearTimeout(S)});return()=>{clearTimeout(S),D()}},[]),b.useEffect(()=>{const S=async()=>{try{await T(),await w()}catch{}};try{window.addEventListener("app:softRefresh",S)}catch{}return()=>{try{window.removeEventListener("app:softRefresh",S)}catch{}}},[e==null?void 0:e.uid]),b.useEffect(()=>{if(!(e!=null&&e.uid))return;const S=mE.subscribeDeletedTransactionsLocalSync(e.uid);return()=>{try{S==null||S()}catch{}}},[e==null?void 0:e.uid]);const E=async(S,I,A,D,R,N)=>{try{const C=(S||"").trim().toLowerCase(),q=(I||"").trim();console.log(" Attempting to sign up user:",C);const Z=await SI(Xn,C,q);console.log(" Sign up successful:",Z.user.uid),await p(Z.user.uid,A,D,R,N),await f(Z.user);try{await h(Z.user.uid),await w()}catch{}return{error:null}}catch(C){console.error(" Sign up error:",C);let q="    ";return C.code==="auth/email-already-in-use"?q="    ":C.code==="auth/weak-password"?q="   ":C.code==="auth/invalid-email"&&(q="   "),{error:{...C,message:q}}}},g=async(S,I)=>{const A=(S||"").trim().toLowerCase(),D=(I||"").trim();try{const R=F=>F.replace(/[\u200B\u200C\u200D\u200E\u200F\u061C]/g,""),N=F=>F.replace(/[-]/g,U=>String("0123456789"["".indexOf(U)])).replace(/[-]/g,U=>String("0123456789"["".indexOf(U)])),C=F=>F.replace(/[0-9]/g,U=>""[Number(U)]),q=F=>N(R(F));if(console.log(" Attempting to sign in user:",A),A==="test@example.com"&&D==="123456"){console.log(" Demo user login detected");const F={uid:"demo-user-123",email:"test@example.com",displayName:" ",emailVerified:!0},U={userId:"demo-user-123",shopId:"demo-shop",role:"user",fullName:" ",phone:"01000000000",approved:!0,createdAt:new Date,updatedAt:new Date};return localStorage.setItem("demoUser",JSON.stringify(F)),localStorage.setItem("demoProfile",JSON.stringify(U)),n(F),s(U),d(!1),console.log(" Demo user signed in successfully"),{error:null}}let Z;const ie=[q(D),R(D),C(R(D))];let Q=null;for(const F of ie)try{F!==D&&console.log(" Trying password variant"),Z=await _j(Xn,A,F);break}catch(U){if(Q=U,(U==null?void 0:U.code)!=="auth/wrong-password"&&(U==null?void 0:U.code)!=="auth/invalid-credential")throw U}if(!Z)throw Q||new Error("auth/invalid-credential");console.log(" Sign in successful:",Z.user.uid);try{if((await gt(we(W,"deletedUsers",Z.user.uid))).exists())return console.log(" User is deleted, signing out"),await bI(Xn),{error:{code:"auth/user-deleted",message:"      .    ."}}}catch(F){console.error("Error checking deleted users:",F)}await f(Z.user);try{await h(Z.user.uid),await w()}catch{}return{error:null}}catch(R){if(console.error(" Sign in error:",R),A==="test@example.com"&&R.code==="auth/user-not-found"){console.log(" Creating test user...");try{const C=await SI(Xn,A,D);return console.log(" Test user created:",C.user.uid),await p(C.user.uid," ","01000000000"," "),{error:null}}catch(C){return console.error(" Error creating test user:",C),{error:C}}}let N="    ";return R.code==="auth/invalid-credential"?N="      ":R.code==="auth/user-not-found"?N="     ":R.code==="auth/wrong-password"?N="   ":R.code==="auth/too-many-requests"&&(N="      "),{error:{...R,message:N}}}},v=async()=>{try{localStorage.getItem("demoUser")?(console.log(" Signing out demo user"),localStorage.removeItem("demoUser"),localStorage.removeItem("demoProfile"),n(null),s(null),d(!1)):await bI(Xn);const A=(()=>{try{const D=typeof window<"u"?window:null,R=!!(D&&D.electronAPI)||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"),N=typeof window<"u"&&window.location.protocol==="file:",C=typeof window<"u"&&typeof window.location.hash=="string"&&window.location.hash.startsWith("#/");return R||N||C||typeof import.meta<"u"&&T8&&!0}catch{return!1}})()?"#/user/login":"/user/login";try{window.location.replace(A)}catch{window.location.href=A}}catch(S){console.error("Sign out error:",S)}},_=async S=>{try{return await vj(Xn,S),{error:null}}catch(I){console.error("Reset password error:",I);let A="        ";return I.code==="auth/user-not-found"?A="     ":I.code==="auth/invalid-email"&&(A="   "),{error:{...I,message:A}}}},w=async()=>{if(!e){console.log("No user found for subscription check"),o(null),l(!1);return}console.log("Checking subscription status for user:",e.uid);try{return Wu(we(W,"users",e.uid),async I=>{var A,D,R,N,C,q,Z,ie;if(I.exists()){const Q=I.data();o(Q),console.log(" Subscription Data Details (Real-time):",{userId:e.uid,userEmail:e.email,subscription:Q.subscription,subscriptionExists:!!Q.subscription,planType:(A=Q.subscription)==null?void 0:A.planType,isActive:(D=Q.subscription)==null?void 0:D.isActive,startDate:(R=Q.subscription)==null?void 0:R.startDate,endDate:(N=Q.subscription)==null?void 0:N.endDate,activatedBy:(C=Q.subscription)==null?void 0:C.activatedBy,activatedAt:(q=Q.subscription)==null?void 0:q.activatedAt,isOnFreeTrial:Q.isOnFreeTrial,freeTrialEndDate:Q.freeTrialEndDate,branchPackageStatus:(Z=Q==null?void 0:Q.branchPackage)==null?void 0:Z.status});const F=((ie=Q==null?void 0:Q.branchPackage)==null?void 0:ie.status)==="active";let U=!1;if(F)console.log(" Branch package is active, granting access"),U=!0;else if(Q.isOnFreeTrial){console.log(" User is on free trial, checking validity...");const Y=await gE.checkTrialValidity(e.uid);Y.isValid&&!Y.isExpired?(console.log(" Free trial is valid, granting access"),U=!0):Y.isExpired?(console.log(" Free trial has expired, checking regular subscription"),U=Yh(Q.subscription)):(console.log(" Free trial is not valid"),U=Yh(Q.subscription))}else U=Yh(Q.subscription);l(U),console.log(" Subscription Validation Result (Real-time):",{userId:e.uid,isValid:U,isOnFreeTrial:Q.isOnFreeTrial,hasActiveBranchPackage:F,reason:F?"Branch package active":Q.isOnFreeTrial?"Free trial active":Q.subscription?Q.subscription.isActive?Q.subscription.planType==="lifetime"?"Lifetime plan":Q.subscription.endDate?new Date>new Date(Q.subscription.endDate)?"Expired":"Valid":"No end date":"Subscription not active":"No subscription data"})}},I=>{console.error(" Subscription listener error:",I)})}catch(S){console.error("Error setting up subscription listener:",S)}},T=async()=>{if(e)try{console.log("Refreshing profile for user:",e.uid),await h(e.uid),await w()}catch(S){console.error("Error refreshing profile:",S)}},V={user:e,profile:r,userSubscription:i,isSubscriptionActive:a,loading:c,signUp:E,signIn:g,signOut:v,resetPassword:_,updateUserProfile:async S=>{if(e)try{const I={updatedAt:Ae()};if(S.fullName!==void 0&&(I.fullName=S.fullName),S.phone!==void 0&&(I.phone=S.phone),S.bridgeLink!==void 0){const A=(S.bridgeLink||"").trim();I.bridgeLink=A.length?A:null}if(S.bridgeDeviceId!==void 0){const A=(S.bridgeDeviceId||"").trim();I.bridgeDeviceId=A.length?A:null}S.showWithdrawNote!==void 0&&(I.showWithdrawNote=!!S.showWithdrawNote),S.isReceiptNoteEnabled!==void 0&&(I.isReceiptNoteEnabled=!!S.isReceiptNoteEnabled),await Ze(we(W,"profiles",e.uid),I),await h(e.uid)}catch(I){console.error("Error updating user profile:",I)}},updateAvatarId:async S=>{if(e)try{await Ze(we(W,"profiles",e.uid),{avatarId:S,updatedAt:Ae()}),await h(e.uid)}catch(I){console.error("Error updating avatarId:",I)}},refreshProfile:T,checkSubscriptionStatus:w};return x.jsx(UD.Provider,{value:V,children:t})},gh=()=>{const[t,e]=b.useState(""),[n,r]=b.useState(""),[s,i]=b.useState(!1),[o,a]=b.useState(!1),{signIn:l}=Wi(),c=id();b.useEffect(()=>{try{const p=typeof window<"u"?window.localStorage.getItem("cashy:lastEmail"):null;p&&e(p)}catch{}},[]);const d=async p=>{if(p.preventDefault(),o){St.info("     ...");return}if(typeof navigator<"u"&&navigator.onLine===!1){St.error("   .      .");return}const E=(t||"").trim().toLowerCase(),g=(n||"").trim();if(console.log("    :",{email:E,password:"***"}),!t||!n){St.error("   ");return}if(!/^\S+@\S+\.\S+$/.test(E)){St.error("    ");return}a(!0);try{console.log("  signIn...");const{error:v}=await l(E,g);if(console.log(" SignIn result:",{error:v}),v){console.error("    :",v);const _=v==null?void 0:v.code;_==="auth/user-not-found"?St.error("     "):_==="auth/wrong-password"?St.error("   "):_==="auth/invalid-credential"?St.error("      "):_==="auth/too-many-requests"?St.error("      "):St.error((v==null?void 0:v.message)||"    ")}else console.log("    !"),St.success("   !"),c("/user/dashboard")}catch(v){console.error("   :",v),St.error("   ")}finally{a(!1)}},h=p=>{if(o){p.preventDefault(),p.stopPropagation(),St.info("     ...");return}if(typeof navigator<"u"&&navigator.onLine===!1){p.preventDefault(),p.stopPropagation(),St.error("   .      .");return}t||St.error("   "),n||St.error("   ");const E=(t||"").trim().toLowerCase();E&&!/^\S+@\S+\.\S+$/.test(E)&&St.error("    ")},f=()=>{c("/user/forgot-password")};return b.useEffect(()=>{if(!(typeof window<"u"&&window.matchMedia&&window.matchMedia("(pointer: coarse)").matches))return;const p=document.documentElement,E=document.body,g=p.style.overflow,v=E.style.overflow,_=p.style.overscrollBehaviorY,w=E.style.overscrollBehaviorY;return p.style.overflow="hidden",E.style.overflow="hidden",p.style.overscrollBehaviorY="none",E.style.overscrollBehaviorY="none",()=>{p.style.overflow=g||"",E.style.overflow=v||"",p.style.overscrollBehaviorY=_||"",E.style.overscrollBehaviorY=w||""}},[]),x.jsxs("div",{className:"fixed inset-0 relative overscroll-y-none overflow-hidden flex items-center justify-center p-4 bg-fixed bg-no-repeat bg-cover",style:{backgroundImage:"var(--bg-purple-gradient)"},children:[x.jsx("div",{className:"pointer-events-none absolute inset-0 bg-[radial-gradient(ellipse_at_center,_rgba(168,85,247,0.18),_transparent_70%)]"}),x.jsxs("div",{className:"w-full max-w-md mt-16 md:mt-12 lg:mt-10",children:[x.jsxs("div",{className:"text-center mb-8",children:[x.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-r from-green-600 to-blue-600 rounded-full mb-4 shadow-2xl",children:x.jsx(nL,{className:"w-10 h-10 text-white"})}),x.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[x.jsx("div",{className:"h-8 w-8 bg-red-600 rounded-lg flex items-center justify-center shadow",children:x.jsx("span",{className:"text-white font-bold text-sm",children:""})}),x.jsxs("div",{className:"flex items-center gap-1",children:[x.jsx(ZV,{className:"h-5 w-5 text-white"}),x.jsx("span",{className:"text-xl font-bold text-white",children:" "})]})]}),x.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"  "}),x.jsx("p",{className:"text-white/80",children:"    "})]}),x.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-8 shadow-2xl border border-white/20",children:[x.jsxs("form",{onSubmit:d,className:"space-y-6",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-white",children:" "}),x.jsxs("div",{className:"relative",children:[x.jsx(TT,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/70 w-5 h-5"}),x.jsx(Gy,{id:"email",type:"email",placeholder:"  ",value:t,onChange:p=>{const E=p.target.value;e(E);try{window.localStorage.setItem("cashy:lastEmail",E)}catch{}},className:"pl-10 pr-4 py-3 rounded-lg bg-white/20 border-white/30 text-white placeholder:text-white/70 focus:ring-2 focus:ring-green-400",dir:"rtl",required:!0})]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-white",children:" "}),x.jsxs("div",{className:"relative",children:[x.jsx(YV,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/70 w-5 h-5"}),x.jsx(Gy,{id:"password",type:s?"text":"password",placeholder:"  ",value:n,onChange:p=>r(p.target.value),className:"pl-10 pr-10 py-3 rounded-lg bg-white/20 border-white/30 text-white placeholder:text-white/70 focus:ring-2 focus:ring-green-400",autoComplete:"off",dir:"rtl",required:!0}),x.jsx("button",{type:"button",onClick:()=>i(!s),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-white/70 hover:text-white transition-colors",children:s?x.jsx(WV,{className:"w-5 h-5"}):x.jsx(KV,{className:"w-5 h-5"})})]})]}),x.jsx("div",{className:"flex justify-end",children:x.jsxs(KR,{type:"button",variant:"ghost",size:"sm",onClick:f,className:"text-green-200 hover:text-green-100 p-0 h-auto font-normal hover:bg-transparent",children:[x.jsx(TT,{className:"w-4 h-4 ml-1"}),"  "]})}),x.jsx("button",{type:"submit",onClick:h,className:"w-full bg-gradient-to-r from-green-600 to-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:from-green-700 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-green-400 transition-all duration-200",children:o?x.jsxs("div",{className:"flex items-center justify-center",children:[x.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white ml-2"}),"  ..."]}):x.jsxs("div",{className:"flex items-center justify-center",children:[x.jsx($V,{className:"w-5 h-5 ml-2"})," "]})})]}),x.jsxs("div",{className:"mt-6 text-center space-y-3",children:[x.jsxs("p",{className:"text-sm text-white/80",children:["  "," ",x.jsx(VU,{to:"/user/register",className:"text-green-200 hover:text-green-100 font-medium transition-colors hover:underline",children:"  "})]}),x.jsxs("p",{className:"text-sm text-white/80",children:["        "," ",x.jsx("a",{href:"https://wa.me/201000392539",target:"_blank",rel:"noreferrer",className:"text-green-200 hover:text-green-100 font-medium hover:underline",children:"01000392539"})," ","   "," ",x.jsx("a",{href:"mailto:info@cashy-link.com",className:"text-blue-200 hover:text-blue-100 font-medium hover:underline",children:"info@cashy-link.com"})]})]})]}),x.jsx("div",{className:"mt-6 text-center",children:x.jsx("p",{className:"text-xs text-white/70",children:"   "})})]})]})},S8=()=>{const t=id(),e=rs(),{signOut:n,user:r,userSubscription:s}=Wi(),{toast:i}=C_(),[o,a]=b.useState(!1),[l,c]=b.useState(!1),d=[{id:"home",label:"",icon:QV,path:"/user/dashboard",action:()=>{t("/user/dashboard"),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},100)}},{id:"debts",label:"",icon:GV,path:"/debts",action:()=>{t("/user/dashboard",{state:{openDebtDialog:!0}})}},{id:"transfer",label:"",icon:zV,path:"/transfer",action:()=>{t("/user/dashboard",{state:{openTransactionSection:!0,transactionType:"transfer",startNewTransaction:!0}})}},{id:"add",label:"",icon:IT,path:"/add",isSpecial:!0},{id:"withdraw",label:"",icon:BV,path:"/withdraw",action:()=>{t("/user/dashboard",{state:{openTransactionSection:!0,transactionType:"withdraw",startNewTransaction:!0}})}},{id:"transactions",label:"",icon:lg,path:"/transactions"},{id:"settings",label:"",icon:ST,path:"/profile-settings"}],h=[{id:"maintenance",label:"",icon:rL,action:()=>{a(!1),t("/user/dashboard",{state:{openMaintenanceDialog:!0}})},color:"#0EA5E9"},{id:"credit-cards",label:" ",icon:HV,action:()=>{a(!1),t("/user/dashboard",{state:{openCreditCardsDialog:!0}})},color:"#8B5CF6"},{id:"sales",label:"",icon:eL,action:()=>{a(!1),t("/user/dashboard",{state:{openSalesDialog:!0}})},color:"#F59E0B"},{id:"shop-expenses",label:" ",icon:lg,action:()=>{a(!1),t("/user/dashboard",{state:{openShopExpensesDialog:!0}})},color:"#F97316"},{id:"deficiencies",label:"",icon:tL,action:()=>{a(!1),t("/user/dashboard",{state:{openDeficienciesDialog:!0}})},color:"#DB2777"},{id:"add-wallet",label:" ",icon:IT,action:()=>{a(!1),t("/user/add-wallet")},color:"#EF4444"},{id:"cashier-shift",label:" ",icon:qV,action:()=>{a(!1),t("/user/dashboard",{state:{openCashierShiftModal:!0}})},color:"#3B82F6"},{id:"contact",label:" ",icon:XV,action:()=>{a(!1);const v=`   
  : ${(r==null?void 0:r.email)||" "}`,_=encodeURIComponent(v);window.open(`https://wa.me/201000392539?text=${_}`,"_blank")},color:"#10B981"},{id:"logout",label:" ",icon:ET,action:async()=>{a(!1);try{await n(),t("/user/login",{replace:!0})}catch(g){console.error("Logout error:",g);try{t("/user/login",{replace:!0})}catch{}}},color:"#EF4444"}],f=[{id:"shop-expenses-settings",label:" ",icon:lg,action:()=>{c(!1),t("/user/dashboard",{state:{openShopExpensesDialog:!0}})},color:"#F97316"},{id:"profile-settings",label:"  ",icon:ST,action:()=>{c(!1),t("/profile-settings")},color:"#6366F1"},{id:"logout",label:" ",icon:ET,action:async()=>{c(!1);try{await n(),t("/user/login",{replace:!0})}catch(g){console.error("Logout error:",g);try{t("/user/login",{replace:!0})}catch{}}},color:"#EF4444"}],p=(g,v,_,w)=>{var S;const k=((S=s==null?void 0:s.subscription)==null?void 0:S.planType)===Qh.TAHWEELA,O=I=>["/user/dashboard","/profile-settings"].includes(I),V=I=>I==="debts";if(_){if(k&&!V(w)&&!O(g)){i({title:"  ",description:"      .",variant:"destructive"});return}_()}else if(v&&g==="/add"){if(k){i({title:"  ",description:"      .",variant:"destructive"});return}a(!o)}else if(!v){if(k&&!O(g)){i({title:"  ",description:"      .",variant:"destructive"});return}t(g)}},E=g=>e.pathname===g;return x.jsxs("div",{className:"mobile-bottom-nav",children:[o&&x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"quick-actions-overlay",onClick:()=>a(!1)}),x.jsx("div",{className:"floating-actions-container",children:h.map((g,v)=>x.jsxs("div",{className:"floating-action-button",onClick:()=>{var w;if(((w=s==null?void 0:s.subscription)==null?void 0:w.planType)===Qh.TAHWEELA){i({title:"  ",description:"      .",variant:"destructive"});return}g.action()},style:{"--action-color":g.color,"--animation-delay":`${v*.1}s`},children:[x.jsx("div",{className:"floating-action-icon",style:{backgroundColor:g.color},children:x.jsx(g.icon,{className:"action-icon"})}),x.jsx("span",{className:"floating-action-label",children:g.label})]},g.id))})]}),l&&x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"quick-actions-overlay",onClick:()=>c(!1)}),x.jsx("div",{className:"floating-actions-container",children:f.map((g,v)=>x.jsxs("div",{className:"floating-action-button",onClick:()=>{var T;const _=(T=s==null?void 0:s.subscription)==null?void 0:T.planType,w=new Set(["logout","profile-settings"]);if(_===Qh.TAHWEELA&&!w.has(g.id)){i({title:"  ",description:"      .",variant:"destructive"});return}g.action()},style:{"--action-color":g.color,"--animation-delay":`${v*.1}s`},children:[x.jsx("div",{className:"floating-action-icon",style:{backgroundColor:g.color},children:x.jsx(g.icon,{className:"action-icon"})}),x.jsx("span",{className:"floating-action-label",children:g.label})]},g.id))})]}),x.jsx("nav",{className:"mobile-bottom-nav-container",children:d.map(g=>{const v=g.icon,_=E(g.path);return x.jsxs("button",{onClick:()=>p(g.path,g.isSpecial,g.action,g.id),className:`mobile-nav-item ${_?"active":""} ${g.isSpecial?"special":""}`,type:"button","aria-label":g.label,children:[x.jsx("div",{className:`nav-icon-container ${g.isSpecial?"special-icon":""} ${g.isSpecial&&g.id==="add"&&o?"special-open":""}`,children:x.jsx(v,{className:`nav-icon ${_?"active-icon":""} ${g.isSpecial?"special-icon-svg":""} ${g.isSpecial&&g.id==="add"&&o?"rotated":""} ${g.isSpecial&&g.id==="settings"&&l?"rotated":""}`})}),!g.isSpecial&&x.jsx("span",{className:`nav-label ${_?"active-label":""}`,children:g.label})]},g.id)})})]})},b8=()=>{const t=typeof window<"u"?window.electronAPI:void 0,e=!!t,[n,r]=z.useState(!1),[s,i]=z.useState(!1),o=async()=>{try{e&&t?await t.windowMinimize():console.info("windowMinimize (dev preview)")}catch(d){console.warn("failed to minimize",d)}},a=async()=>{try{e&&t?await t.windowClose():console.info("windowClose (dev preview)")}catch(d){console.warn("failed to close",d)}},l=async()=>{try{window.dispatchEvent(new CustomEvent("app:softRefresh"))}catch(d){console.warn("failed to soft refresh",d)}};return z.useEffect(()=>{if(!(!e||!t))try{t.onUpdateAvailable(()=>r(!0)),t.onUpdateDownloaded(()=>r(!0)),t.checkUpdate()}catch(d){console.warn("update init failed",d)}},[e,t]),e?x.jsxs("div",{className:"fixed top-2 right-2 z-[2000] flex items-center gap-2",style:{pointerEvents:"auto"},children:[x.jsx("button",{type:"button","aria-label":"",title:"",onClick:a,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-red-600 hover:bg-red-500/10 focus:outline-none dark:text-red-400 dark:hover:bg-red-400/10",children:x.jsx(jx,{className:"w-5 h-5"})}),x.jsx("button",{type:"button","aria-label":"",title:" ",onClick:l,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-blue-600 hover:bg-blue-500/10 focus:outline-none dark:text-blue-400 dark:hover:bg-blue-400/10",children:x.jsx(Ux,{className:"w-5 h-5"})}),x.jsx("button",{type:"button","aria-label":"",title:"",onClick:o,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-gray-800 hover:bg-black/10 focus:outline-none dark:text-white/80 dark:hover:bg-white/10",children:x.jsx(JV,{className:"w-5 h-5"})})]}):null},yh=({className:t=""})=>{const[e,n]=b.useState("./logo.svg"),[r,s]=b.useState(0),i=b.useCallback(()=>{s(o=>{const a=o+1;return a===1?n("./logo.png"):a===2&&n("./placeholder.svg"),a})},[]);return x.jsx("div",{className:`min-h-screen bg-background flex items-center justify-center ${t}`,children:x.jsxs("div",{className:"flex flex-col items-center justify-center",children:[x.jsx("img",{src:e,alt:"logo",onError:i,className:"w-16 h-16 animate-spin",style:{animationDuration:"0.6s"}}),x.jsx("p",{className:"mt-3 text-base font-extrabold text-primary tracking-wide animate-pulse",style:{fontFamily:"'Tajawal','Cairo',sans-serif"},children:"  "})]})})};/*! Capacitor: https://capacitorjs.com/ - MIT License */var xl;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(xl||(xl={}));class Mg extends Error{constructor(e,n,r){super(e),this.message=e,this.code=n,this.data=r}}const A8=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},x8=t=>{const e=t.CapacitorCustomPlatform||null,n=t.Capacitor||{},r=n.Plugins=n.Plugins||{},s=()=>e!==null?e.name:A8(t),i=()=>s()!=="web",o=h=>{const f=c.get(h);return!!(f!=null&&f.platforms.has(s())||a(h))},a=h=>{var f;return(f=n.PluginHeaders)===null||f===void 0?void 0:f.find(p=>p.name===h)},l=h=>t.console.error(h),c=new Map,d=(h,f={})=>{const p=c.get(h);if(p)return console.warn(`Capacitor plugin "${h}" already registered. Cannot register plugins twice.`),p.proxy;const E=s(),g=a(h);let v;const _=async()=>(!v&&E in f?v=typeof f[E]=="function"?v=await f[E]():v=f[E]:e!==null&&!v&&"web"in f&&(v=typeof f.web=="function"?v=await f.web():v=f.web),v),w=(I,A)=>{var D,R;if(g){const N=g==null?void 0:g.methods.find(C=>A===C.name);if(N)return N.rtype==="promise"?C=>n.nativePromise(h,A.toString(),C):(C,q)=>n.nativeCallback(h,A.toString(),C,q);if(I)return(D=I[A])===null||D===void 0?void 0:D.bind(I)}else{if(I)return(R=I[A])===null||R===void 0?void 0:R.bind(I);throw new Mg(`"${h}" plugin is not implemented on ${E}`,xl.Unimplemented)}},T=I=>{let A;const D=(...R)=>{const N=_().then(C=>{const q=w(C,I);if(q){const Z=q(...R);return A=Z==null?void 0:Z.remove,Z}else throw new Mg(`"${h}.${I}()" is not implemented on ${E}`,xl.Unimplemented)});return I==="addListener"&&(N.remove=async()=>A()),N};return D.toString=()=>`${I.toString()}() { [capacitor code] }`,Object.defineProperty(D,"name",{value:I,writable:!1,configurable:!1}),D},k=T("addListener"),O=T("removeListener"),V=(I,A)=>{const D=k({eventName:I},A),R=async()=>{const C=await D;O({eventName:I,callbackId:C},A)},N=new Promise(C=>D.then(()=>C({remove:R})));return N.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await R()},N},S=new Proxy({},{get(I,A){switch(A){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return g?V:k;case"removeListener":return O;default:return T(A)}}});return r[h]=S,c.set(h,{name:h,proxy:S,platforms:new Set([...Object.keys(f),...g?[E]:[]])}),S};return n.convertFileSrc||(n.convertFileSrc=h=>h),n.getPlatform=s,n.handleError=l,n.isNativePlatform=i,n.isPluginAvailable=o,n.registerPlugin=d,n.Exception=Mg,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},R8=t=>t.Capacitor=x8(t),be=R8(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),yE=be.registerPlugin;class jD{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,n){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(n);const i=this.windowListeners[e];i&&!i.registered&&this.addWindowListener(i),r&&this.sendRetainedArgumentsForEvent(e);const o=async()=>this.removeListener(e,n);return Promise.resolve({remove:o})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,r){const s=this.listeners[e];if(!s){if(r){let i=this.retainedEventArguments[e];i||(i=[]),i.push(n),this.retainedEventArguments[e]=i}return}s.forEach(i=>i(n))}hasListeners(e){var n;return!!(!((n=this.listeners[e])===null||n===void 0)&&n.length)}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(e="not implemented"){return new be.Exception(e,xl.Unimplemented)}unavailable(e="not available"){return new be.Exception(e,xl.Unavailable)}async removeListener(e,n){const r=this.listeners[e];if(!r)return;const s=r.indexOf(n);this.listeners[e].splice(s,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(r=>{this.notifyListeners(e,r)}))}}const ub=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),db=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class P8 extends jD{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[s,i]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=db(s).trim(),i=db(i).trim(),n[s]=i}),n}async setCookie(e){try{const n=ub(e.key),r=ub(e.value),s=`; expires=${(e.expires||"").replace("expires=","")}`,i=(e.path||"/").replace("path=",""),o=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${r||""}${s}; path=${i}; ${o};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}yE("CapacitorCookies",{web:()=>new P8});const C8=async t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const s=r.result;e(s.indexOf(",")>=0?s.split(",")[1]:s)},r.onerror=s=>n(s),r.readAsDataURL(t)}),k8=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(s=>s.toLocaleLowerCase()).reduce((s,i,o)=>(s[i]=t[e[o]],s),{})},D8=(t,e=!0)=>t?Object.entries(t).reduce((r,s)=>{const[i,o]=s;let a,l;return Array.isArray(o)?(l="",o.forEach(c=>{a=e?encodeURIComponent(c):c,l+=`${i}=${a}&`}),l.slice(0,-1)):(a=e?encodeURIComponent(o):o,l=`${i}=${a}`),`${r}&${l}`},"").substr(1):null,N8=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),s=k8(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(s.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[o,a]of Object.entries(t.data||{}))i.set(o,a);n.body=i.toString()}else if(s.includes("multipart/form-data")||t.data instanceof FormData){const i=new FormData;if(t.data instanceof FormData)t.data.forEach((a,l)=>{i.append(l,a)});else for(const a of Object.keys(t.data))i.append(a,t.data[a]);n.body=i;const o=new Headers(n.headers);o.delete("content-type"),n.headers=o}else(s.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class O8 extends jD{async request(e){const n=N8(e,e.webFetchExtra),r=D8(e.params,e.shouldEncodeUrlParams),s=r?`${e.url}?${r}`:e.url,i=await fetch(s,n),o=i.headers.get("content-type")||"";let{responseType:a="text"}=i.ok?e:{};o.includes("application/json")&&(a="json");let l,c;switch(a){case"arraybuffer":case"blob":c=await i.blob(),l=await C8(c);break;case"json":l=await i.json();break;case"document":case"text":default:l=await i.text()}const d={};return i.headers.forEach((h,f)=>{d[f]=h}),{data:l,headers:d,status:i.status,url:i.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}yE("CapacitorHttp",{web:()=>new O8});const Fg=768;function BD(){const[t,e]=b.useState(void 0);return b.useEffect(()=>{const n=window.matchMedia(`(max-width: ${Fg-1}px)`),r=()=>{e(window.innerWidth<Fg)};return n.addEventListener("change",r),e(window.innerWidth<Fg),()=>n.removeEventListener("change",r)},[]),!!t}function V8(){const t=BD(),[e,n]=b.useState("default"),[r,s]=b.useState(!1);return b.useEffect(()=>{const o=localStorage.getItem("notificationConsentRequested")==="true";if(s(o),o){const a=localStorage.getItem("notificationPermission");(a==="granted"||a==="denied"||a==="default")&&n(a);return}t&&typeof window<"u"&&("Notification"in window?Notification.requestPermission().then(a=>{n(a),localStorage.setItem("notificationPermission",a),localStorage.setItem("notificationConsentRequested","true"),s(!0)}).catch(()=>{n("default"),localStorage.setItem("notificationConsentRequested","true"),s(!0)}):(n("unsupported"),localStorage.setItem("notificationConsentRequested","true"),s(!0)))},[t]),{permission:e,hasRequested:r,requestConsent:async()=>{if(typeof window<"u"&&"Notification"in window){const o=await Notification.requestPermission();return n(o),localStorage.setItem("notificationPermission",o),localStorage.setItem("notificationConsentRequested","true"),s(!0),o}return"unsupported"}}}const hb=yE("AppLauncher",{web:()=>Oe(()=>import("./web-BM9ednu6.js"),[],import.meta.url).then(t=>new t.AppLauncherWeb)});function L8(t,e){if(!t||!t.trim())throw new Error("USSD code is required");const n=`tel:${t.replace(/#/g,"%23")}`,s=`cashy://ussd?code=${t.replace(/#/g,"%23")}${e?`&sim=${e}`:""}`;let i=!1;try{be&&be.getPlatform()!=="web"&&(hb.openUrl({url:s}),i=!0)}catch{}if(!i)try{window.location.href=s,i=!0}catch{}if(!i){try{window.location.href=n}catch{}try{be&&be.getPlatform()!=="web"&&hb.openUrl({url:n})}catch{}}}function $D(t,e){const n=String(t||"").replace(/\D/g,""),r=Math.round(Number(e||0));return!n||n.length!==11||!n.startsWith("01")||!r||r<=0?null:n.startsWith("010")?`*9*7*${n}*${r}#`:n.startsWith("011")?`*323*${n}*${r}#`:n.startsWith("012")?`*115*1*${n}*${r}#`:n.startsWith("015")?`*322*${n}*${r}#`:null}function M8(t,e,n){const r=String(t||"").replace(/\D/g,""),s=String(e||"").replace(/\D/g,""),i=Math.round(Number(n||0));return!s||s.length!==11||!s.startsWith("01")||!i||i<=0?null:!r||!r.startsWith("01")?$D(s,i):r.startsWith("010")?`*9*7*${s}*${i}#`:r.startsWith("011")?`*323*${s}*${i}#`:r.startsWith("012")?`*115*1*${s}*${i}#`:r.startsWith("015")?`*322*${s}*${i}#`:null}function M7(t,e,n){const r=$D(t,e),s=String(n||"").replace(/\D/g,"");return!r||!s?r:`${r.endsWith("#")?r.slice(0,-1):r}*${s}#`}function F8(t){const e=String(t||"").replace(/\D/g,"");return e.startsWith("010")?"vodafone":e.startsWith("011")?"etisalat":e.startsWith("012")?"orange":e.startsWith("015")?"we":null}function U8(t){const e=F8(t),n=e?`simSlot_${e}`:"simSlot_default";try{if(localStorage.getItem(n)==="sim2")return"sim2"}catch{}return"sim1"}function F7(t,e,n){const r=M8(t,e,n);if(!r)throw new Error("Unsupported network or invalid sender/receiver/amount");const s=U8(t||e);L8(r,s)}async function j8(t,e="Cashy"){if(!t||!t.trim())throw new Error("Notification message is required");try{if(typeof Notification<"u"&&(Notification.permission==="granted"?"granted":await Notification.requestPermission())==="granted"){new Notification(e||"Cashy",{body:t});return}typeof window<"u"&&typeof alert=="function"?alert(`${e||"Cashy"}
${t}`):console.log(`[${e||"Cashy"}] ${t}`)}catch(n){console.warn("Notification not available:",n)}}function vE(t,e){return e==="send"?0:Math.round(t*.01*100)/100}function B8(t,e,n=0){const r=vE(t,e),s=Math.max(0,r-n);return Math.round(s*100)/100}const $8=Object.freeze(Object.defineProperty({__proto__:null,calculateCommission:vE,calculateProfit:B8},Symbol.toStringTag,{value:"Module"})),z8=t=>t==="withdraw"||t==="receive"?"receive":"send",q8=async t=>{if(!t)return null;const e=_e(he(W,"transactions"),pe("reference","==",t),ki(1)),n=await Te(e);return n.empty?null:n.docs[0].id},H8=async t=>{if(!t||!t.shopId||!t.lineId||!t.provider)throw new Error("   :   shopId  lineId  provider");if(!t.amount||t.amount<=0)throw new Error("     ");const e=await q8(t.reference);if(e)return{id:e,duplicate:!0};const n=z8(t.type),r={shopId:t.shopId,lineId:t.lineId,merchantUserId:t.merchantUserId||t.createdBy,walletId:t.walletId,provider:t.provider,txnType:n,amount:t.amount,fee:void 0,commission:void 0,profit:0,reference:t.reference,senderMsisdn:t.senderMsisdn,receiverMsisdn:t.receiverMsisdn,note:t.note,status:"confirmed",createdBy:t.createdBy,createdAt:new Date,confirmedAt:new Date},s=await FD.create(r);try{const i="  ",o=`: ${t.type} | : ${t.amount} | : ${t.provider}`;await j8(o,i)}catch(i){console.warn("   :",i)}try{const i=t.merchantUserId||t.createdBy;if(i){const o=n==="receive"?"withdraw":"send",a=vE(t.amount,n);await mE.saveUserTransaction(i,{type:o,amount:t.amount,commission:a,status:"confirmed",createdAt:new Date,senderMsisdn:t.senderMsisdn,receiverMsisdn:t.receiverMsisdn,walletId:t.walletId,lineId:t.lineId,provider:t.provider,note:t.note,transactionId:s})}else console.warn("    :   userId (merchantUserId  createdBy)  .")}catch(i){console.warn("      userTransactions   :",i)}return{id:s,duplicate:!1}};function W8(t){let e=0;for(let n=0;n<t.length;n++)e=Math.imul(31,e)+t.charCodeAt(n)|0;return"SMS_"+Math.abs(e).toString(36)}function K8(t){const e=t.toLowerCase();return e.includes("")||e.includes("withdraw")?"withdraw":(e.includes("")||e.includes("transfer")||e.includes(" "),"transfer")}function G8(t){const n=t.replace(/,/g,"").match(/(\d{1,9}(?:\.\d{1,2})?)/);return n?parseFloat(n[1]):null}function Q8(t){const e=t.match(/01\d{9}/);return e?e[0]:void 0}function Y8(t){const e=t.toLowerCase();if(e.includes("")||e.includes("vodafone"))return"vodafone_cash";if(e.includes("")||e.includes("orange"))return"orange_cash";if(e.includes("")||e.includes("etisalat"))return"etisalat_cash";if(e.includes("instapay")||e.includes(" ")||e.includes(""))return"instapay"}function X8(t={}){if(typeof window>"u")return()=>{};const e=t.createdBy||"mobile_sms_bridge",n=async r=>{const i=r.detail||{};try{let o=null;if(i&&i.payload)o=i.payload,o.shopId=o.shopId||t.shopId,o.lineId=o.lineId||t.lineId,o.provider=o.provider||t.provider,o.createdBy=o.createdBy||e;else if(i&&i.text){const l=i.text,c=K8(l),d=G8(l),h=c==="transfer"?Q8(l):void 0,f=Y8(l)||t.provider;if(!t.shopId||!t.lineId||!f){console.warn("SMS integration missing identifiers. Provide shopId, lineId, provider in initSmsIntegration."),St.warning("   SMS   (  )");return}o={type:c,amount:d||0,provider:f,shopId:t.shopId,lineId:t.lineId,receiverMsisdn:h,reference:i.reference||W8(l),createdBy:e,note:"Parsed from SMS"}}if(!o)return;if((await H8(o)).duplicate)St.info("      SMS");else{const l=o.type==="withdraw"?"":"";St.success(`  ${l}    SMS`)}}catch(o){console.error("Failed to process mobile SMS notification:",o),St.error("     SMS")}};return window.addEventListener("mobileSmsReceived",n),()=>window.removeEventListener("mobileSmsReceived",n)}async function J8(t,e="android",n){var l,c,d,h,f;const r=n||((l=Xn.currentUser)==null?void 0:l.uid)||"";if(!r)throw new Error("  userId   ");const s=(d=(c=import.meta)==null?void 0:c.env)==null?void 0:d.VITE_PUSH_REGISTER_ENDPOINT,i=(f=(h=import.meta)==null?void 0:h.env)==null?void 0:f.VITE_PUSH_NOTIFICATIONS_API_KEY,o={userId:r,platform:e,token:t};if(s){const p=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json",...i?{Authorization:`Bearer ${i}`}:{}},body:JSON.stringify(o)});if(p.ok)return p.json()}const a=await fetch("/api/devices/save-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!a.ok)throw new Error(`  : ${a.status}`);return a.json()}async function Z8(t,e="android",n){return await mD(pE,"saveDeviceToken")({token:t,platform:e,userId:n})}async function U7(t,e=" ",n="    50 ",r={type:"transfer",amount:"50",txId:"12345"}){const i=await mD(pE,"sendFcmToUser")({userId:t,title:e,body:n,data:r});return(i==null?void 0:i.data)??i}function zD(){if(typeof window>"u")return()=>{};const t=async e=>{var n;try{const r=e.detail||window.__fcmToken||"";if(!r)return;const s=((n=Xn.currentUser)==null?void 0:n.uid)||"";if(!s){console.warn("FCM bridge:           ");return}try{await Z8(r,"android",s)}catch{await J8(r,"android",s)}console.log("    FCM  :",s)}catch(r){console.error("    FCM  :",r)}};window.addEventListener("fcm-token",t);try{const e=window.__fcmToken;e&&t(new CustomEvent("fcm-token",{detail:e}))}catch{}return()=>{window.removeEventListener("fcm-token",t)}}async function e7(){var t,e,n;try{if(!(be!=null&&be.isNativePlatform))return!1;const r=be.getPlatform();if(localStorage.getItem("nativePushRequested")==="true")return!1;const i=((t=be.Plugins)==null?void 0:t.PushNotifications)||window.PushNotifications;if(!i){if(typeof window<"u"&&"Notification"in window&&typeof Notification.requestPermission=="function")try{await Notification.requestPermission()}catch{}return localStorage.setItem("nativePushRequested","true"),!1}try{await((e=i.requestPermissions)==null?void 0:e.call(i))}catch{}try{await((n=i.register)==null?void 0:n.call(i))}catch{}return localStorage.setItem("nativePushRequested","true"),!0}catch{return!1}}const t7={},fb=z.lazy(()=>Oe(()=>import("./Index-BVhgHwHv.js"),[],import.meta.url)),vh=z.lazy(()=>Oe(()=>import("./LandingPage-AVKl1Q13.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]),import.meta.url)),pb=z.lazy(()=>Oe(()=>import("./SubscriptionsPage-gX6AP0HZ.js"),__vite__mapDeps([14,1,4,15,16,7,8,6,13]),import.meta.url)),mb=z.lazy(()=>Oe(()=>import("./AuthPage-B1yOsj3i.js"),__vite__mapDeps([17,1,5,2,3,9]),import.meta.url)),_h=z.lazy(()=>Oe(()=>import("./TopUpPage-BSEQSPzD.js"),__vite__mapDeps([18,1,19,20,21]),import.meta.url)),gb=z.lazy(()=>Oe(()=>import("./AdminTopupsPage-BgPHf7p_.js"),__vite__mapDeps([22,19,20,21]),import.meta.url)),yb=z.lazy(()=>Oe(()=>import("./AdminNotificationsPage-DzLTFvIt.js"),__vite__mapDeps([23,1,24,25,26]),import.meta.url)),wh=z.lazy(()=>Oe(()=>import("./UserRegisterPage-dXaJoRI3.js"),__vite__mapDeps([27,1,24,28,29,30,31,32,33]),import.meta.url)),vb=z.lazy(()=>Oe(()=>import("./UserAccountSetupPage-wb1SOxKk.js"),__vite__mapDeps([34,1,24,28,33,32,13]),import.meta.url)),_b=z.lazy(()=>Oe(()=>import("./ForgotPasswordCodePage-CT_KDzx4.js"),[],import.meta.url)),wb=z.lazy(()=>Oe(()=>import("./DashboardLoginPage-CzwRd_Dg.js"),__vite__mapDeps([35,1,11]),import.meta.url)),Eb=z.lazy(()=>Oe(()=>import("./ProtectedDashboard-kv4Wfwq7.js"),__vite__mapDeps([36,1,37,19,20,21,38,24,39,11,40,41,29,13,42]),import.meta.url)),Sc=z.lazy(()=>Oe(()=>import("./ProtectedUserDashboard-ypIilQbE.js"),__vite__mapDeps([43,44,26,38,24,39,20,11,40]),import.meta.url)),Tb=z.lazy(()=>Oe(()=>import("./MerchantDashboard-CNFGVMVx.js"),__vite__mapDeps([45,46,19,20,21,47,37,48,39,1,49,24,50,51]),import.meta.url)),Ib=z.lazy(()=>Oe(()=>import("./PendingApprovalPage-Czezksfx.js"),__vite__mapDeps([52,1,4,40,11,53,13,54]),import.meta.url)),Sb=z.lazy(()=>Oe(()=>import("./AdminLogin-Dc5ueVkx.js"),__vite__mapDeps([55,11]),import.meta.url)),bb=z.lazy(()=>Oe(()=>import("./ProtectedAdminDashboard-D3Q8VHcZ.js"),__vite__mapDeps([56,15,3,57,46,19,20,21,47,39,24,38,11,40,58,1,25,59,28,37,60,4,54,32,61,44,16,10,53,8,5,62,9,13,42]),import.meta.url)),Ab=z.lazy(()=>Oe(()=>import("./AuthTestPage-RYuRCyNL.js"),__vite__mapDeps([63,1,24]),import.meta.url)),xb=z.lazy(()=>Oe(()=>import("./ProfileSettingsPage-BSogQtKY.js"),__vite__mapDeps([64,1,24,58,5,65,38,39,20,11,40,51,59,21,6,31,61,8,54]),import.meta.url)),Rb=z.lazy(()=>Oe(()=>import("./TransactionsPage-MjpfwePv.js"),__vite__mapDeps([66,1,39,20,19,21,37,47,67,60,38,24,11,40,4,49,13,9,16,68,41,6,42]),import.meta.url)),Pb=z.lazy(()=>Oe(()=>import("./WalletAdditionPage-D-qRBeuU.js"),__vite__mapDeps([69,1,24,19,20,21,50,6,29,32,40]),import.meta.url)),Cb=z.lazy(()=>Oe(()=>import("./ReferralsPage-CN-dXAOa.js"),__vite__mapDeps([70,1,37,28,31,26,13,61,53,62,30,42]),import.meta.url)),kb=z.lazy(()=>Oe(()=>import("./CPanelPage-D652YA89.js"),__vite__mapDeps([71,1,24,39,20]),import.meta.url)),Db=z.lazy(()=>Oe(()=>import("./CPanelLoginPage-COfX6Y0P.js"),__vite__mapDeps([72,24,1,11]),import.meta.url)),Nb=z.lazy(()=>Oe(()=>import("./NotFound-rvWgQqM6.js"),[],import.meta.url)),Ob=z.lazy(()=>Oe(()=>import("./SmsHookBridge-D_BkqArs.js"),[],import.meta.url)),n7=new N4,r7=()=>{if(!((be==null?void 0:be.isNativePlatform)&&be.getPlatform()==="android"))return null;const e=()=>{try{window.location.reload()}catch{}};return x.jsx("div",{className:"fixed top-2 right-2 z-[2000] flex items-center gap-2",style:{pointerEvents:"auto"},children:x.jsx("button",{type:"button","aria-label":"",title:" ",onClick:e,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-blue-600 hover:bg-blue-500/10 focus:outline-none dark:text-blue-400 dark:hover:bg-blue-400/10",children:x.jsx(Ux,{className:"w-5 h-5"})})})},Vb=()=>{const t=rs(),{user:e,loading:n}=Wi(),r=(be==null?void 0:be.isNativePlatform)&&be.getPlatform()==="android",s=t.pathname.startsWith("/user/dashboard"),i=r&&t.pathname==="/",o=!!e&&(s||i);return n?null:o?x.jsx(S8,{}):null},Lb=()=>{const t=BD(),{profile:e}=Wi(),n=rs(),{toast:r}=C_();return V8(),b.useEffect(()=>{e7()},[]),b.useEffect(()=>{const s=zD(),i=n.pathname.startsWith("/user/dashboard");if(t&&(e!=null&&e.shopId)&&i){const o=X8({shopId:e.shopId,createdBy:e.userId});return()=>{try{o()}catch{}try{s()}catch{}}}return()=>{try{s()}catch{}}},[t,e==null?void 0:e.shopId,n.pathname]),b.useEffect(()=>{if(!t)return;const s=document.createElement("style");s.setAttribute("data-disable-pull-to-refresh","true"),s.textContent="html, body { overscroll-behavior-y: contain; touch-action: pan-y; }",document.head.appendChild(s);let i=0,o=null;const a=c=>{var d,h;i=((h=(d=c.touches)==null?void 0:d[0])==null?void 0:h.clientY)||0,o=c.target},l=c=>{var v,_;const d=((_=(v=c.touches)==null?void 0:v[0])==null?void 0:_.clientY)||0,h=document.scrollingElement||document.documentElement,f=h.scrollTop||window.scrollY||0,p=h.scrollHeight-h.clientHeight||0,E=o||null,g=(()=>{let w=E;for(;w&&w!==document.body;){const k=window.getComputedStyle(w).overflowY;if((k==="auto"||k==="scroll")&&w.scrollHeight>w.clientHeight)return!0;w=w.parentElement}return!1})();!g&&f<=0&&d>i&&c.cancelable&&c.preventDefault(),!g&&f>=p&&d<i&&c.cancelable&&c.preventDefault()};return document.addEventListener("touchstart",a,{passive:!0}),document.addEventListener("touchmove",l,{passive:!1}),()=>{document.removeEventListener("touchstart",a),document.removeEventListener("touchmove",l);try{document.head.removeChild(s)}catch{}}},[t]),b.useEffect(()=>{if(!((be==null?void 0:be.isNativePlatform)&&be.getPlatform()==="android"))return;let i=!1;return(async()=>{try{const o="0.0.0",a=await fetch("https://cashy-link.com/mobile_version.json",{cache:"no-store"});if(!a.ok)throw new Error("   ");const l=await a.json(),c=String((l==null?void 0:l.version)||"0.0.0"),d=l!=null&&l.url?String(l.url).trim():void 0;if(!i&&d&&((f,p)=>{const E=f.split(".").map(v=>parseInt(v,10)||0),g=p.split(".").map(v=>parseInt(v,10)||0);for(let v=0;v<Math.max(E.length,g.length);v++){const _=E[v]||0,w=g[v]||0;if(_>w)return 1;if(_<w)return-1}return 0})(c,o)>0){try{r({title:"  ",description:` ${c}       `})}catch{}try{window.open(d,"_blank")}catch{}}}catch(o){console.warn("   :",o)}})(),()=>{i=!0}},[]),b.useEffect(()=>{const s=(be==null?void 0:be.isNativePlatform)&&be.getPlatform()==="android",i=typeof window<"u"&&(window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"));if(s||i)return;let o=!1;return(async()=>{try{const a="0.0.0",l=await fetch("https://cashy-link.com/desktop_version.json",{cache:"no-store"});if(!l.ok)return;const c=await l.json(),d=String((c==null?void 0:c.version)||"0.0.0"),h=!!(c!=null&&c.force);if(!o&&((p,E)=>{const g=String(p).split(".").map(_=>parseInt(_,10)||0),v=String(E).split(".").map(_=>parseInt(_,10)||0);for(let _=0;_<Math.max(g.length,v.length);_++){const w=g[_]||0,T=v[_]||0;if(w>T)return 1;if(w<T)return-1}return 0})(d,a)>0){if(h){try{window.location.reload()}catch{}return}try{r({title:"  ",description:` ${d}      `})}catch{}}}catch{}})(),()=>{o=!0}},[]),null},Mb=()=>rs().pathname.startsWith("/user/dashboard")?x.jsxs(x.Fragment,{children:[x.jsx(UL,{}),x.jsx(wM,{})]}):null,s7=()=>x.jsx(V4,{client:n7,children:x.jsx(MU,{children:x.jsxs(o4,{children:[typeof window<"u"&&(window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"))&&!(be!=null&&be.isNativePlatform&&be.getPlatform()==="android")&&x.jsx(b8,{}),x.jsx(r7,{}),typeof window<"u"&&(window.electronAPI||window.location.protocol==="file:"||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron")||typeof window.location.hash=="string"&&window.location.hash.startsWith("#/")||typeof import.meta<"u"&&t7)?x.jsxs(DU,{children:[x.jsx(Lb,{}),x.jsx(Mb,{}),x.jsxs(b.Suspense,{fallback:x.jsx(yh,{}),children:[null,x.jsxs(nI,{children:[x.jsx(se,{path:"/",element:be!=null&&be.isNativePlatform&&be.getPlatform()==="android"?z.createElement(()=>{const{user:e,loading:n}=Wi();return n?z.createElement(yh):e?z.createElement(Sc):z.createElement(gh)}):x.jsx(vh,{})}),x.jsx(se,{path:"/dashboard-redirect",element:x.jsx(fb,{})}),x.jsx(se,{path:"/landing",element:x.jsx(vh,{})}),x.jsx(se,{path:"/subscriptions",element:x.jsx(pb,{})}),x.jsx(se,{path:"/auth",element:x.jsx(mb,{})}),x.jsx(se,{path:"/sms-hook",element:x.jsx(Ob,{})}),x.jsx(se,{path:"/user/login",element:x.jsx(gh,{})}),x.jsx(se,{path:"/user/forgot-password",element:x.jsx(_b,{})}),x.jsx(se,{path:"/user/register",element:x.jsx(wh,{})}),x.jsx(se,{path:"/register",element:x.jsx(wh,{})}),x.jsx(se,{path:"/user/account-setup",element:x.jsx(vb,{})}),x.jsx(se,{path:"/user/pending-approval",element:x.jsx(Ib,{})}),x.jsx(se,{path:"/user/dashboard",element:x.jsx(Sc,{})}),x.jsx(se,{path:"/branch/:shopId/dashboard",element:x.jsx(Sc,{})}),x.jsx(se,{path:"/user/add-wallet",element:x.jsx(Pb,{})}),x.jsx(se,{path:"/admin/login",element:x.jsx(Sb,{})}),x.jsx(se,{path:"/admin/dashboard",element:x.jsx(bb,{})}),x.jsx(se,{path:"/admin/topups",element:x.jsx(gb,{})}),x.jsx(se,{path:"/admin/notifications",element:x.jsx(yb,{})}),x.jsx(se,{path:"/profile-settings",element:x.jsx(xb,{})}),x.jsx(se,{path:"/transactions",element:x.jsx(Rb,{})}),x.jsx(se,{path:"/referrals",element:x.jsx(Cb,{})}),x.jsx(se,{path:"/cpanel",element:x.jsx(kb,{})}),x.jsx(se,{path:"/cpanel/login",element:x.jsx(Db,{})}),x.jsx(se,{path:"/auth-test",element:x.jsx(Ab,{})}),x.jsx(se,{path:"/topup",element:x.jsx(_h,{})}),x.jsx(se,{path:"/recharge",element:x.jsx(_h,{})}),x.jsx(se,{path:"/merchant/*",element:x.jsx(Tb,{})}),x.jsx(se,{path:"/dashboard/login",element:x.jsx(wb,{})}),x.jsx(se,{path:"/dashboard",element:x.jsx(Eb,{})}),x.jsx(se,{path:"*",element:x.jsx(Nb,{})})]})]}),x.jsx(Vb,{})]}):x.jsxs(kU,{children:[x.jsx(Lb,{}),x.jsx(Mb,{}),x.jsxs(b.Suspense,{fallback:x.jsx(yh,{}),children:[null,x.jsxs(nI,{children:[x.jsx(se,{path:"/",element:be!=null&&be.isNativePlatform&&be.getPlatform()==="android"?z.createElement(()=>{const{user:e,loading:n}=Wi();return n?z.createElement(yh):e?z.createElement(Sc):z.createElement(gh)}):x.jsx(vh,{})}),x.jsx(se,{path:"/dashboard-redirect",element:x.jsx(fb,{})}),x.jsx(se,{path:"/landing",element:x.jsx(vh,{})}),x.jsx(se,{path:"/subscriptions",element:x.jsx(pb,{})}),x.jsx(se,{path:"/auth",element:x.jsx(mb,{})}),x.jsx(se,{path:"/sms-hook",element:x.jsx(Ob,{})}),x.jsx(se,{path:"/user/login",element:x.jsx(gh,{})}),x.jsx(se,{path:"/user/forgot-password",element:x.jsx(_b,{})}),x.jsx(se,{path:"/user/register",element:x.jsx(wh,{})}),x.jsx(se,{path:"/register",element:x.jsx(wh,{})}),x.jsx(se,{path:"/user/account-setup",element:x.jsx(vb,{})}),x.jsx(se,{path:"/user/pending-approval",element:x.jsx(Ib,{})}),x.jsx(se,{path:"/user/dashboard",element:x.jsx(Sc,{})}),x.jsx(se,{path:"/user/add-wallet",element:x.jsx(Pb,{})}),x.jsx(se,{path:"/admin/login",element:x.jsx(Sb,{})}),x.jsx(se,{path:"/admin/dashboard",element:x.jsx(bb,{})}),x.jsx(se,{path:"/admin/topups",element:x.jsx(gb,{})}),x.jsx(se,{path:"/admin/notifications",element:x.jsx(yb,{})}),x.jsx(se,{path:"/profile-settings",element:x.jsx(xb,{})}),x.jsx(se,{path:"/transactions",element:x.jsx(Rb,{})}),x.jsx(se,{path:"/referrals",element:x.jsx(Cb,{})}),x.jsx(se,{path:"/cpanel",element:x.jsx(kb,{})}),x.jsx(se,{path:"/cpanel/login",element:x.jsx(Db,{})}),x.jsx(se,{path:"/auth-test",element:x.jsx(Ab,{})}),x.jsx(se,{path:"/topup",element:x.jsx(_h,{})}),x.jsx(se,{path:"/recharge",element:x.jsx(_h,{})}),x.jsx(se,{path:"/merchant/*",element:x.jsx(Tb,{})}),x.jsx(se,{path:"/dashboard/login",element:x.jsx(wb,{})}),x.jsx(se,{path:"/dashboard",element:x.jsx(Eb,{})}),x.jsx(se,{path:"*",element:x.jsx(Nb,{})})]})]}),x.jsx(Vb,{})]})]})})}),qD=b.createContext(void 0),i7=({children:t})=>{const[e,n]=b.useState(null),[r,s]=b.useState(!1),[i,o]=b.useState(null),{profile:a,user:l}=Wi();b.useEffect(()=>{try{const f=localStorage.getItem("cashier_shift_user"),p=localStorage.getItem("cashier_shift_active"),E=localStorage.getItem("cashier_shift_start_at");f&&n(JSON.parse(f)),p&&s(p==="true"),E&&o(Number(E))}catch{}},[]),b.useEffect(()=>{if(!(a!=null&&a.shopId))return;const f=we(W,"cashierShift",a.shopId);let p=null;return(async()=>{try{(await gt(f)).exists()||await Hi(f,{isShiftActive:!1,shiftStartAt:null,shiftUser:null}),p=Wu(f,g=>{if(g.exists()){const v=g.data(),_=(v==null?void 0:v.shiftUser)||null,w=!!(v!=null&&v.isShiftActive),T=(v==null?void 0:v.shiftStartAt)??null;let k=_;if(!k)try{const O=localStorage.getItem("cashier_shift_user"),V=O?JSON.parse(O):null;V&&(k=V)}catch{}n(k),s(w),o(typeof T=="number"?T:T?Number(T):null);try{k?localStorage.setItem("cashier_shift_user",JSON.stringify(k)):localStorage.removeItem("cashier_shift_user"),localStorage.setItem("cashier_shift_active",w?"true":"false"),T!=null&&localStorage.setItem("cashier_shift_start_at",String(T))}catch{}}},g=>{console.warn("cashierShift snapshot error:",g)})}catch(E){console.warn("Failed to init cashierShift doc:",E)}})(),()=>{p&&p()}},[a==null?void 0:a.shopId]);const c=f=>{n(f);try{f?localStorage.setItem("cashier_shift_user",JSON.stringify(f)):localStorage.removeItem("cashier_shift_user")}catch{}try{if(a!=null&&a.shopId){const p=we(W,"cashierShift",a.shopId);Ze(p,{shiftUser:f||null})}}catch{}},d=()=>{s(!0);try{localStorage.setItem("cashier_shift_active","true")}catch{}const f=Date.now();o(f);try{localStorage.setItem("cashier_shift_start_at",String(f))}catch{}try{if(a!=null&&a.shopId){const p=we(W,"cashierShift",a.shopId);Ze(p,{isShiftActive:!0,shiftStartAt:f})}}catch{}try{const E=`cashBalance_${(l==null?void 0:l.uid)||"default"}`,g=`userCashBalance_${(l==null?void 0:l.uid)||"default"}`,v=`walletBalances_${(l==null?void 0:l.uid)||"default"}`;let _=localStorage.getItem(E);if(_==null){const T=localStorage.getItem(g);if(T!=null){_=T;try{localStorage.setItem(E,T),localStorage.removeItem(g)}catch{}}}if(_==null&&(l!=null&&l.uid)){const T=localStorage.getItem("cashBalance"),k=localStorage.getItem("userCashBalance");if(T!=null){try{localStorage.setItem(E,T),localStorage.removeItem("cashBalance")}catch{}_=T}else if(k!=null){try{localStorage.setItem(E,k),localStorage.removeItem("userCashBalance")}catch{}_=k}}const w=localStorage.getItem(v);_?localStorage.setItem("shiftStartDrawerFunds",_):localStorage.setItem("shiftStartDrawerFunds","0"),w?localStorage.setItem("shiftStartWalletBalances",w):localStorage.setItem("shiftStartWalletBalances","{}")}catch{}try{a!=null&&a.shopId&&(async()=>{try{const p=we(W,"dashboardData",a.shopId),E=await gt(p);if(E.exists()){const g=E.data(),v=Number((g==null?void 0:g.cashBalance)??0),_=(g==null?void 0:g.walletBalances)??{};try{const w=localStorage.getItem("shiftStartDrawerFunds"),T=localStorage.getItem("shiftStartWalletBalances"),k=w?parseFloat(w):0,O=T?JSON.parse(T):{},V=!w||!Number.isFinite(k)||k===0,S=!T||Object.keys(O||{}).length===0;V&&localStorage.setItem("shiftStartDrawerFunds",String(Number.isFinite(v)?v:0)),S&&localStorage.setItem("shiftStartWalletBalances",JSON.stringify(_||{}))}catch{}}}catch(p){console.warn("Shift start Firebase read failed:",p)}})()}catch{}},h=()=>{s(!1);try{localStorage.setItem("cashier_shift_active","false")}catch{}try{if(a!=null&&a.shopId){const f=we(W,"cashierShift",a.shopId);Ze(f,{isShiftActive:!1})}}catch{}};return x.jsx(qD.Provider,{value:{shiftUser:e,isShiftActive:r,shiftStartAt:i,setShiftUser:c,startShift:d,endShift:h},children:t})},j7=()=>{const t=b.useContext(qD);if(!t)throw new Error("useShift must be used within ShiftProvider");return t},HD=b.createContext(void 0);function o7({children:t}){const{profile:e,user:n,loading:r}=Wi(),[s,i]=b.useState(null),[o,a]=b.useState(null),[l,c]=b.useState(!0);b.useEffect(()=>{if(!r&&e){const h=e!=null&&e.userId?`selectedShopId_${e.userId}`:n!=null&&n.uid?`selectedShopId_${n==null?void 0:n.uid}`:"selectedShopId";let f=null;try{f=localStorage.getItem(h)||null}catch{}i(f||e.shopId),a((e==null?void 0:e.shopName)||(n==null?void 0:n.displayName)||""),c(!1)}else r||c(!1)},[e,r]),b.useEffect(()=>{const h=()=>{const p=e!=null&&e.userId?`selectedShopId_${e.userId}`:n!=null&&n.uid?`selectedShopId_${n==null?void 0:n.uid}`:"selectedShopId";try{const E=localStorage.getItem(p);i(E||((e==null?void 0:e.shopId)??null))}catch{}};window.addEventListener("selectedShopIdChanged",h);const f=p=>{const E=e!=null&&e.userId?`selectedShopId_${e.userId}`:n!=null&&n.uid?`selectedShopId_${n==null?void 0:n.uid}`:"selectedShopId";if(!(!p.key||p.key!==E))try{const g=localStorage.getItem(E);i(g||((e==null?void 0:e.shopId)??null))}catch{}};return window.addEventListener("storage",f),()=>{window.removeEventListener("selectedShopIdChanged",h),window.removeEventListener("storage",f)}},[e==null?void 0:e.userId,n==null?void 0:n.uid,e==null?void 0:e.shopId]);const d={shopId:s,shopName:o,loading:l};return x.jsx(HD.Provider,{value:d,children:t})}function B7(){const t=b.useContext(HD);return t===void 0?{shopId:null,shopName:null,loading:!1}:t}try{const t=navigator.userAgent||navigator.vendor||"",e=/iPad|iPhone|iPod/.test(t),n=document.documentElement;n&&(n.classList.toggle("ios",e),n.classList.toggle("android",!e))}catch{}try{zD()}catch{}const a7=()=>{const{theme:t="system"}=Xx();return b.useEffect(()=>{try{const e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,n=t==="system"?e?"dark":"light":t;document.documentElement.setAttribute("data-theme",n||"light"),document.documentElement.classList.toggle("dark",n==="dark")}catch{}},[t]),null};lx(document.getElementById("root")).render(x.jsx($L,{attribute:"class",defaultTheme:"system",enableSystem:!0,storageKey:"theme",children:x.jsx(I8,{children:x.jsx(i7,{children:x.jsxs(o7,{children:[x.jsx(s7,{}),x.jsx(a7,{})]})})})}));export{jD as $,$V as A,KR as B,qV as C,Yh as D,WV as E,gE as F,_j as G,Hi as H,Gy as I,ot as J,gt as K,VU as L,XV as M,y7 as N,Ze as O,U7 as P,a8 as Q,z as R,ZV as S,R7 as T,nL as U,A7 as V,x7 as W,Ov as X,Ds as Y,Mx as Z,rs as _,id as a,Vi as a$,je as a0,bp as a1,JO as a2,Cn as a3,Ct as a4,Ir as a5,pV as a6,Oi as a7,eL as a8,Oe as a9,NF as aA,Ml as aB,E7 as aC,qO as aD,B7 as aE,C9 as aF,v8 as aG,GV as aH,rL as aI,en as aJ,_7 as aK,Xx as aL,$D as aM,JV as aN,N7 as aO,O7 as aP,V7 as aQ,E8 as aR,M7 as aS,L8 as aT,dR as aU,d7 as aV,jF as aW,dx as aX,BF as aY,$F as aZ,cx as a_,Gh as aa,j7 as ab,BD as ac,be as ad,ET as ae,zV as af,uD as ag,yh as ah,ST as ai,nI as aj,se as ak,b7 as al,h8 as am,pe as an,y8 as ao,IT as ap,HV as aq,D7 as ar,D_ as as,mx as at,Tf as au,k_ as av,c7 as aw,jx as ax,mE as ay,k9 as az,v7 as b,yV as b0,nd as b1,lg as b2,BV as b3,T7 as b4,tL as b5,k7 as b6,sA as b7,FD as b8,B8 as b9,GO as ba,FU as bb,g7 as bc,_8 as bd,M8 as be,F7 as bf,kg as bg,Lg as bh,P7 as bi,L7 as bj,C_ as c,Xn as d,he as e,W as f,Te as g,mD as h,pE as i,x as j,ws as k,ki as l,TT as m,YV as n,Jr as o,KV as p,_e as q,b as r,Ae as s,vj as t,Wi as u,we as v,Wu as w,St as x,C7 as y,Qh as z};
