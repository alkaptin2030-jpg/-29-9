const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-CRTRtp5n.js","./index-Bu1U7Yvm.css","./appDownloadService-DyjNta3x.js"])))=>i.map(i=>d[i]);
import{J as W,c as Wt,r,j as e,M as Oe,I as Xt,B as Q,E as Kt,p as Jt,e as le,f as Z,q as ge,an as us,g as Fe,z as y,ax as he,U as lt,C as pe,b5 as $e,ad as ea,m as sa,n as Gs,aj as nt,aa as P,w as hs,aH as ta,S as Zs,af as aa,ap as Qs,aO as ra,O as la,v as Ie,s as na,h as ia,i as ca,aJ as Ne,H as da,b6 as oa,y as ma,a as xa,u as ua,ai as ha,d as ga}from"./index-CRTRtp5n.js";import{u as pa,g as Ws,s as ba,l as fa}from"./contentService-bkUGtpus.js";import{a as ja,M as Xs,u as ya,s as Na}from"./brandingService-C_0Gbtm2.js";import{A as Ks,P as wa}from"./ProfileIcon-nA3MSCtr.js";import{C as Ve,a as ns,b as is,d as Re,c as va}from"./card-BWbpEQyA.js";import{L as Js}from"./label-CdFvUt-8.js";import{T as ka,B as ne}from"./textarea-DQyPJT_z.js";import{a as Sa,S as xe}from"./switch-MQhFCmpk.js";import{A as Ea,a as Da}from"./alert-_BbrLo27.js";import{B as Be}from"./badge-BiCYvJZV.js";import{a as Ca,S as Ue,P as Aa}from"./separator-D0LqprUB.js";import{u as Ta,c as it,v as ct}from"./whatsappService-B6jIbpdo.js";import{R as cs}from"./refresh-cw-BR59kZdN.js";import{C as _a}from"./circle-alert-C8bkuj4U.js";import{P as dt}from"./phone-GOqtzBPR.js";import{C as Ia}from"./copy-ByaiM2OB.js";import{E as Ua,p as La}from"./broadcastService-Dd5lrgU_.js";import{C as J}from"./calendar-CnsgDt6w.js";import{S as Pa,a as Fa,b as Va,c as Ra,d as we}from"./select-DM6OjFkg.js";import{Z as gs}from"./zap-CL70EcMP.js";import{G as ue}from"./gift-C132gbwh.js";import{C as Me}from"./crown-CU_5bOax.js";import{resolveDownloadUrl as me,publishDesktopVersion as Ma}from"./appDownloadService-DyjNta3x.js";import{S as Oa}from"./shield-DeV9RBuc.js";import{U as ds}from"./users-BWhf-dug.js";import{D as os}from"./download-C_npWio7.js";import{C as ms}from"./circle-check-big-Ojm6vB3H.js";import{C as $a}from"./circle-x-v6xgjvYt.js";import"./dropdown-menu-BSiXoF6l.js";import"./Combination-EUxQ4mum.js";import"./index-vkwF3IfT.js";import"./dialog-01iWrO8X.js";import"./MasterPinDialog-C0ewEeVK.js";import"./avatars-BvGfB2nO.js";import"./index-Bn4QWtVJ.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ba=W("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=W("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qa=W("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ha=W("Infinity",[["path",{d:"M12 12c-2-2.67-4-4-6-4a4 4 0 1 0 0 8c2 0 4-1.33 6-4Zm0 0c2 2.67 4 4 6 4a4 4 0 0 0 0-8c-2 0-4 1.33-6 4Z",key:"1z0uae"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const za=W("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=W("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=W("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ya=W("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ga=W("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Za=W("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]),Qa=()=>{const{settings:n,loading:i,error:b,updateSettings:u,refreshSettings:j}=Ta(),{toast:p}=Wt(),[o,S]=r.useState({phoneNumber:"",defaultMessage:"",isEnabled:!0}),[x,D]=r.useState(!1),[C,H]=r.useState(!1),[E,f]=r.useState(""),[h,m]=r.useState({});r.useEffect(()=>{n&&S({phoneNumber:n.phoneNumber,defaultMessage:n.defaultMessage,isEnabled:n.isEnabled})},[n]);const z=()=>{var T,$;const k={};return(T=o.phoneNumber)!=null&&T.trim()?ct(o.phoneNumber)||(k.phoneNumber="Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ ØºÙŠØ± ØµØ­ÙŠØ­ (ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ 10-15 Ø±Ù‚Ù…)"):k.phoneNumber="Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ Ù…Ø·Ù„ÙˆØ¨",($=o.defaultMessage)!=null&&$.trim()?o.defaultMessage.length<10&&(k.defaultMessage="Ø§Ù„Ø±Ø³Ø§Ù„Ø© ÙŠØ¬Ø¨ Ø£Ù† ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ 10 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„"):k.defaultMessage="Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ù…Ø·Ù„ÙˆØ¨Ø©",m(k),Object.keys(k).length===0},M=async()=>{if(!z()){p({title:"Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª",description:"ÙŠØ±Ø¬Ù‰ ØªØµØ­ÙŠØ­ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ù‚Ø¨Ù„ Ø§Ù„Ø­ÙØ¸",variant:"destructive"});return}D(!0);try{if(await u(o))p({title:"ØªÙ… Ø§Ù„Ø­ÙØ¸ Ø¨Ù†Ø¬Ø§Ø­",description:"ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ Ø¨Ù†Ø¬Ø§Ø­",variant:"default"});else throw new Error("ÙØ´Ù„ ÙÙŠ Ø§Ù„Ø­ÙØ¸")}catch{p({title:"Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø­ÙØ¸",description:"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª",variant:"destructive"})}finally{D(!1)}},g=()=>{if(o.phoneNumber&&o.defaultMessage)try{const k=it(o.phoneNumber,o.defaultMessage);f(k),H(!0)}catch{p({title:"Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©",description:"ØªØ£ÙƒØ¯ Ù…Ù† ØµØ­Ø© Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨",variant:"destructive"})}},O=async()=>{try{await navigator.clipboard.writeText(E),p({title:"ØªÙ… Ø§Ù„Ù†Ø³Ø®",description:"ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø· Ø¥Ù„Ù‰ Ø§Ù„Ø­Ø§ÙØ¸Ø©",variant:"default"})}catch{p({title:"Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù†Ø³Ø®",description:"ÙØ´Ù„ ÙÙŠ Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·",variant:"destructive"})}},ie=k=>{const T=k.replace(/[^\d+]/g,"");S($=>({...$,phoneNumber:T})),h.phoneNumber&&m($=>({...$,phoneNumber:""}))};return i?e.jsxs(Ve,{children:[e.jsx(ns,{children:e.jsxs(is,{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"h-5 w-5"}),"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨"]})}),e.jsx(Re,{children:e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(cs,{className:"h-6 w-6 animate-spin"}),e.jsx("span",{className:"mr-2",children:"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„..."})]})})]}):e.jsx("div",{className:"space-y-6",children:e.jsxs(Ve,{children:[e.jsxs(ns,{children:[e.jsxs(is,{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"h-5 w-5"}),"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨"]}),e.jsx(va,{children:"Ø¥Ø¯Ø§Ø±Ø© Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ ÙˆØ§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ø§Ù„Ù…Ø¹Ø±ÙˆØ¶Ø© ÙÙŠ Ø¬Ù…ÙŠØ¹ Ø£Ù†Ø­Ø§Ø¡ Ø§Ù„Ù…ÙˆÙ‚Ø¹"})]}),e.jsxs(Re,{className:"space-y-6",children:[b&&e.jsxs(Ea,{variant:"destructive",children:[e.jsx(_a,{className:"h-4 w-4"}),e.jsx(Da,{children:b})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`h-3 w-3 rounded-full ${o.isEnabled?"bg-green-500":"bg-red-500"}`}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Ø­Ø§Ù„Ø© Ø®Ø¯Ù…Ø© Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:o.isEnabled?"Ù…ÙØ¹Ù„Ø©":"Ù…Ø¹Ø·Ù„Ø©"})]})]}),e.jsx(Sa,{checked:o.isEnabled,onCheckedChange:k=>S(T=>({...T,isEnabled:k}))})]}),e.jsx(Ca,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Js,{htmlFor:"phoneNumber",className:"flex items-center gap-2",children:[e.jsx(dt,{className:"h-4 w-4"}),"Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨"]}),e.jsx(Xt,{id:"phoneNumber",type:"tel",placeholder:"Ù…Ø«Ø§Ù„: 201000392539",value:o.phoneNumber,onChange:k=>ie(k.target.value),className:h.phoneNumber?"border-red-500":"",dir:"ltr"}),h.phoneNumber&&e.jsx("p",{className:"text-sm text-red-500",children:h.phoneNumber}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ Ù…Ø¹ Ø±Ù…Ø² Ø§Ù„Ø¯ÙˆÙ„Ø© (Ù…Ø«Ø§Ù„: 201000392539 Ù„Ù…ØµØ±)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Js,{htmlFor:"defaultMessage",children:"Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©"}),e.jsx(ka,{id:"defaultMessage",placeholder:"Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ Ø£Ø±ÙŠØ¯ Ø§Ù„Ø§Ø³ØªÙØ³Ø§Ø± Ø¹Ù† Ø®Ø¯Ù…Ø§ØªÙƒÙ…",value:o.defaultMessage,onChange:k=>{S(T=>({...T,defaultMessage:k.target.value})),h.defaultMessage&&m(T=>({...T,defaultMessage:""}))},className:h.defaultMessage?"border-red-500":"",rows:4}),h.defaultMessage&&e.jsx("p",{className:"text-sm text-red-500",children:h.defaultMessage}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Ù‡Ø°Ù‡ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø³ØªØ¸Ù‡Ø± Ø§ÙØªØ±Ø§Ø¶ÙŠØ§Ù‹ Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø£Ø²Ø±Ø§Ø± Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsxs(Q,{onClick:M,disabled:x,className:"flex items-center gap-2",children:[x?e.jsx(cs,{className:"h-4 w-4 animate-spin"}):e.jsx(xe,{className:"h-4 w-4"}),x?"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸...":"Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª"]}),e.jsxs(Q,{variant:"outline",onClick:g,disabled:!o.phoneNumber||!o.defaultMessage,className:"flex items-center gap-2",children:[C?e.jsx(Kt,{className:"h-4 w-4"}):e.jsx(Jt,{className:"h-4 w-4"}),"Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ø±Ø§Ø¨Ø·"]}),e.jsxs(Q,{variant:"outline",onClick:j,className:"flex items-center gap-2",children:[e.jsx(cs,{className:"h-4 w-4"}),"ØªØ­Ø¯ÙŠØ«"]})]}),C&&E&&e.jsxs(Ve,{className:"bg-muted/50",children:[e.jsx(ns,{children:e.jsx(is,{className:"text-lg",children:"Ù…Ø¹Ø§ÙŠÙ†Ø© Ø±Ø§Ø¨Ø· Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨"})}),e.jsxs(Re,{className:"space-y-4",children:[e.jsx("div",{className:"p-3 bg-background rounded border font-mono text-sm break-all",children:E}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Q,{variant:"outline",size:"sm",onClick:O,className:"flex items-center gap-2",children:[e.jsx(Ia,{className:"h-4 w-4"}),"Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·"]}),e.jsxs(Q,{variant:"outline",size:"sm",onClick:()=>window.open(E,"_blank"),className:"flex items-center gap-2",children:[e.jsx(Ua,{className:"h-4 w-4"}),"ÙØªØ­ ÙÙŠ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨"]})]})]})]}),n&&e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«:"}),e.jsxs(Be,{variant:"outline",className:"mr-2",children:[n.lastUpdated.toLocaleDateString("ar-EG")," - ",n.lastUpdated.toLocaleTimeString("ar-EG")]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Ø§Ù„Ø­Ø§Ù„Ø©:"}),e.jsx(Be,{variant:n.isEnabled?"default":"secondary",className:"mr-2",children:n.isEnabled?"Ù…ÙØ¹Ù„":"Ù…Ø¹Ø·Ù„"})]})]})]})]})]})})},qe={enableVisualAlerts:!0,enableAudioAlerts:!0,criticalDays:1,warningDays:3,infoDays:7},Wa=n=>{const i=new Date,u=new Date(n).getTime()-i.getTime();return Math.ceil(u/(1e3*60*60*24))},Xa=(n,i=qe)=>n<0?"expired":n<=i.criticalDays?"critical":n<=i.warningDays?"warning":(n<=i.infoDays,"info"),Ka=(n,i,b)=>{const u=Ja(b);return i<0?`Ø§Ù†ØªÙ‡Øª ØµÙ„Ø§Ø­ÙŠØ© Ø§Ø´ØªØ±Ø§Ùƒ ${u} Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… ${n}`:i===0?`ÙŠÙ†ØªÙ‡ÙŠ Ø§Ø´ØªØ±Ø§Ùƒ ${u} Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… ${n} Ø§Ù„ÙŠÙˆÙ…!`:i===1?`ÙŠÙ†ØªÙ‡ÙŠ Ø§Ø´ØªØ±Ø§Ùƒ ${u} Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… ${n} ØºØ¯Ø§Ù‹`:`ÙŠÙ†ØªÙ‡ÙŠ Ø§Ø´ØªØ±Ø§Ùƒ ${u} Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… ${n} Ø®Ù„Ø§Ù„ ${i} Ø£ÙŠØ§Ù…`},Ja=n=>{switch(n){case y.MONTHLY:return"Ø§Ù„Ø´Ù‡Ø±ÙŠ";case y.YEARLY:return"Ø§Ù„Ø³Ù†ÙˆÙŠ";case y.LIFETIME:return"Ù…Ø¯Ù‰ Ø§Ù„Ø­ÙŠØ§Ø©";default:return"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"}},er=async()=>{try{const n=le(Z,"users"),i=ge(n,us("subscription","!=",null)),b=await Fe(i),u=[];return b.forEach(j=>{var o,S,x,D;const p=j.data();p.subscription&&(p.subscription.planType||p.subscription.plan)&&u.push({id:j.id,...p,subscription:{...p.subscription,startDate:((S=(o=p.subscription.startDate)==null?void 0:o.toDate)==null?void 0:S.call(o))||new Date(p.subscription.startDate),endDate:((D=(x=p.subscription.endDate)==null?void 0:x.toDate)==null?void 0:D.call(x))||new Date(p.subscription.endDate),planType:p.subscription.planType||p.subscription.plan}})}),u}catch(n){return console.error("Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª Ø§Ù„Ù†Ø´Ø·Ø©:",n),[]}},sr=async(n=qe)=>{try{const i=await er(),b=[];return i.forEach(u=>{if(!u.subscription||!u.subscription.endDate)return;const j=Wa(u.subscription.endDate),p=Xa(j,n);if(j<=n.infoDays||j<0){const o={id:`${u.id}_${Date.now()}`,userId:u.id,userName:u.displayName||u.email||"Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ",userEmail:u.email||"",subscriptionPlan:u.subscription.planType,expiryDate:u.subscription.endDate,daysRemaining:j,type:p,message:Ka(u.displayName||u.email||"Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ",j,u.subscription.planType),isRead:!1,createdAt:new Date};b.push(o)}}),b.sort((u,j)=>{const p={expired:0,critical:1,warning:2,info:3};return p[u.type]!==p[j.type]?p[u.type]-p[j.type]:u.daysRemaining-j.daysRemaining}),b}catch(i){return console.error("Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ:",i),[]}},tr=(n,i)=>i?n.filter(b=>b.type===i):n,ar=n=>{localStorage.setItem("notificationSettings",JSON.stringify(n))},rr=()=>{try{const n=localStorage.getItem("notificationSettings");if(n)return{...qe,...JSON.parse(n)}}catch(n){console.error("Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª:",n)}return qe},lr=({isOpen:n,onClose:i})=>{const[b,u]=r.useState([]),[j,p]=r.useState([]),[o,S]=r.useState("all"),[x,D]=r.useState(!0),[C,H]=r.useState(rr());r.useEffect(()=>{n&&E()},[n]),r.useEffect(()=>{p(o==="all"?b:tr(b,o))},[b,o]);const E=async()=>{D(!0);try{const g=await sr(C);u(g)}catch(g){console.error("Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª:",g)}finally{D(!1)}},f=g=>{switch(g){case"urgent":return e.jsx($e,{className:"w-5 h-5 text-red-500"});case"warning":return e.jsx(pe,{className:"w-5 h-5 text-yellow-500"});case"info":return e.jsx(ne,{className:"w-5 h-5 text-blue-500"});default:return e.jsx(ne,{className:"w-5 h-5 text-gray-500"})}},h=g=>{switch(g){case"urgent":return"bg-red-50 border-red-200";case"warning":return"bg-yellow-50 border-yellow-200";case"info":return"bg-blue-50 border-blue-200";default:return"bg-gray-50 border-gray-200"}},m=g=>new Intl.DateTimeFormat("ar-SA",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(g),z=g=>{switch(g){case"all":return"Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª";case"urgent":return"Ø¹Ø§Ø¬Ù„ (ÙŠÙˆÙ… ÙˆØ§Ø­Ø¯)";case"warning":return"ØªØ­Ø°ÙŠØ± (3 Ø£ÙŠØ§Ù…)";case"info":return"Ù…Ø¹Ù„ÙˆÙ…Ø§Øª (7 Ø£ÙŠØ§Ù…)";default:return"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"}},M=g=>{const O={...C,[g]:!C[g]};H(O),ar(O)};return n?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ne,{className:"w-6 h-6"}),e.jsx("h2",{className:"text-xl font-bold",children:"Ù…Ø±ÙƒØ² Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª"}),b.length>0&&e.jsx("span",{className:"bg-white text-blue-600 px-2 py-1 rounded-full text-sm font-medium",children:b.length})]}),e.jsx("button",{onClick:i,className:"p-2 hover:bg-white hover:bg-opacity-20 rounded-lg transition-colors",children:e.jsx(he,{className:"w-5 h-5"})})]})}),e.jsxs("div",{className:"p-4 border-b bg-gray-50",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ba,{className:"w-4 h-4 text-gray-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"ØªØµÙÙŠØ© Ø­Ø³Ø¨:"})]}),["all","urgent","warning","info"].map(g=>e.jsx("button",{onClick:()=>S(g),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors ${o===g?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:z(g)},g))]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª:"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:C.visualAlerts,onChange:()=>M("visualAlerts"),className:"rounded"}),e.jsx("span",{className:"text-sm",children:"Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ù…Ø±Ø¦ÙŠØ©"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:C.soundAlerts,onChange:()=>M("soundAlerts"),className:"rounded"}),e.jsx("span",{className:"text-sm",children:"Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„ØµÙˆØªÙŠØ©"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:C.autoRefresh,onChange:()=>M("autoRefresh"),className:"rounded"}),e.jsx("span",{className:"text-sm",children:"Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ"})]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto max-h-96",children:x?e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"mr-3 text-gray-600",children:"Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª..."})]}):j.length===0?e.jsxs("div",{className:"text-center p-8",children:[e.jsx(ne,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª"}),e.jsx("p",{className:"text-gray-500",children:o==="all"?"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø­Ø§Ù„ÙŠÙ‹Ø§":`Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ù…Ù† Ù†ÙˆØ¹ "${z(o)}"`})]}):e.jsx("div",{className:"p-4 space-y-3",children:j.map(g=>e.jsx("div",{className:`p-4 rounded-lg border-r-4 ${h(g.type)}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[f(g.type),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:g.message}),e.jsx("span",{className:"text-xs text-gray-500",children:m(g.createdAt)})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(lt,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"text-gray-700",children:[e.jsx("strong",{children:"Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:"})," ",g.userName]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"text-gray-700",children:[e.jsx("strong",{children:"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡:"})," ",m(g.expiryDate)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"text-gray-700",children:[e.jsx("strong",{children:"Ø§Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©:"})," ",g.daysRemaining]})]})]})]})]})},g.id))})}),e.jsx("div",{className:"p-4 border-t bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«: ",m(new Date)]}),e.jsx("button",{onClick:E,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:"ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª"})]})})]})}):null},nr=({notification:n,onClose:i,soundEnabled:b,onToggleSound:u})=>{const[j,p]=r.useState(!1),[o,S]=r.useState(null);r.useEffect(()=>{if(n&&(p(!0),b&&x(n.type),n.type!=="urgent")){const f=setTimeout(()=>{D()},1e4);return()=>clearTimeout(f)}},[n,b]),r.useEffect(()=>{typeof window<"u"&&window.AudioContext&&S(new AudioContext)},[]);const x=f=>{if(!(!o||!b))try{const h=o.createOscillator(),m=o.createGain();switch(h.connect(m),m.connect(o.destination),f){case"urgent":h.frequency.setValueAtTime(800,o.currentTime),h.frequency.setValueAtTime(1e3,o.currentTime+.1),h.frequency.setValueAtTime(800,o.currentTime+.2),m.gain.setValueAtTime(.3,o.currentTime),m.gain.exponentialRampToValueAtTime(.01,o.currentTime+.5),h.start(o.currentTime),h.stop(o.currentTime+.5);break;case"warning":h.frequency.setValueAtTime(600,o.currentTime),h.frequency.setValueAtTime(700,o.currentTime+.15),m.gain.setValueAtTime(.2,o.currentTime),m.gain.exponentialRampToValueAtTime(.01,o.currentTime+.3),h.start(o.currentTime),h.stop(o.currentTime+.3);break;case"info":h.frequency.setValueAtTime(400,o.currentTime),m.gain.setValueAtTime(.1,o.currentTime),m.gain.exponentialRampToValueAtTime(.01,o.currentTime+.2),h.start(o.currentTime),h.stop(o.currentTime+.2);break}}catch(h){console.error("Ø®Ø·Ø£ ÙÙŠ ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª:",h)}},D=()=>{p(!1),setTimeout(()=>{i()},300)},C=f=>{switch(f){case"urgent":return{bg:"bg-red-500",border:"border-red-600",text:"text-white",icon:e.jsx($e,{className:"w-6 h-6"}),pulse:"animate-pulse"};case"warning":return{bg:"bg-yellow-500",border:"border-yellow-600",text:"text-white",icon:e.jsx(pe,{className:"w-6 h-6"}),pulse:""};case"info":return{bg:"bg-blue-500",border:"border-blue-600",text:"text-white",icon:e.jsx(ne,{className:"w-6 h-6"}),pulse:""};default:return{bg:"bg-gray-500",border:"border-gray-600",text:"text-white",icon:e.jsx(ne,{className:"w-6 h-6"}),pulse:""}}},H=f=>new Intl.DateTimeFormat("ar-SA",{year:"numeric",month:"long",day:"numeric"}).format(f);if(!n)return null;const E=C(n.type);return e.jsxs("div",{className:"fixed top-4 right-4 z-[9999]",children:[e.jsxs("div",{className:`
          transform transition-all duration-300 ease-in-out
          ${j?"translate-x-0 opacity-100":"translate-x-full opacity-0"}
          ${E.bg} ${E.border} ${E.text} ${E.pulse}
          border-2 rounded-lg shadow-2xl max-w-md min-w-80
          backdrop-blur-sm
        `,children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white border-opacity-20",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[E.icon,e.jsxs("h3",{className:"font-bold text-lg",children:[n.type==="urgent"&&"ØªÙ†Ø¨ÙŠÙ‡ Ø¹Ø§Ø¬Ù„!",n.type==="warning"&&"ØªØ­Ø°ÙŠØ±",n.type==="info"&&"Ø¥Ø´Ø¹Ø§Ø±"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:u,className:"p-1 hover:bg-white hover:bg-opacity-20 rounded transition-colors",title:b?"Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØµÙˆØª":"ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª",children:b?e.jsx(Ga,{className:"w-4 h-4"}):e.jsx(Za,{className:"w-4 h-4"})}),e.jsx("button",{onClick:D,className:"p-1 hover:bg-white hover:bg-opacity-20 rounded transition-colors",children:e.jsx(he,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("p",{className:"text-lg font-medium mb-3",children:n.message}),e.jsxs("div",{className:"space-y-2 text-sm opacity-90",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:"})," ",n.userName]}),e.jsxs("div",{children:[e.jsx("strong",{children:"ØªØ§Ø±ÙŠØ® Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ:"})," ",H(n.expiryDate)]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Ø§Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©:"})," ",n.daysRemaining," ÙŠÙˆÙ…"]})]})]}),n.type==="urgent"&&e.jsx("div",{className:"h-1 bg-white bg-opacity-20",children:e.jsx("div",{className:"h-full bg-white animate-pulse",style:{animation:"progress 10s linear forwards"}})})]}),e.jsx("style",{jsx:!0,children:`
        @keyframes progress {
          from { width: 100%; }
          to { width: 0%; }
        }
      `})]})},ir=({user:n,onActivateSubscription:i,onDeactivateSubscription:b,onDeleteUser:u})=>{const[j,p]=r.useState(y.MONTHLY),[o,S]=r.useState(!1),x=ea(),D=f=>{const h=f==null?void 0:f.displayName;if(typeof h=="string"&&h.trim())return h.trim();if(h&&typeof h=="object"){const m=h.full_name||h.name||h.ar||h.en;if(typeof m=="string"&&m.trim())return m.trim()}return typeof(f==null?void 0:f.email)=="string"&&f.email.includes("@")?f.email.split("@")[0]:"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"},C=f=>{switch(f){case y.LIFETIME:return e.jsx(Me,{className:"w-4 h-4 text-yellow-500"});case y.YEARLY:return e.jsx(ue,{className:"w-4 h-4 text-blue-500"});case y.QUARTERLY:return e.jsx(J,{className:"w-4 h-4 text-purple-500"});case y.MONTHLY:return e.jsx(gs,{className:"w-4 h-4 text-green-500"});case y.ZERO:return e.jsx(Gs,{className:"w-4 h-4 text-gray-500"});default:return null}},H=f=>{switch(f){case y.MONTHLY:return"Ø´Ù‡Ø±ÙŠØ©";case y.QUARTERLY:return"Ø±Ø¨Ø¹ Ø³Ù†ÙˆÙŠØ©";case y.YEARLY:return"Ø³Ù†ÙˆÙŠØ©";case y.LIFETIME:return"Ù…Ø¯Ù‰ Ø§Ù„Ø­ÙŠØ§Ø©";case y.ZERO:return"Ø²ÙŠØ±Ùˆ";default:return"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"}},E=f=>f?(f.toDate?f.toDate():new Date(f)).toLocaleDateString("ar-EG"):"ØºÙŠØ± Ù…Ø­Ø¯Ø¯";return e.jsx(Ve,{className:"hover:shadow-lg transition-shadow",children:e.jsxs(Re,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(lt,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:D(n)}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx(sa,{className:"w-3 h-3 ml-1"}),n.email]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500 mt-1",children:[e.jsx(dt,{className:"w-3 h-3 ml-1"}),n.phone||"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"]})]})]}),e.jsx(Be,{variant:n.isActive?"default":"secondary",children:n.isActive?"Ù†Ø´Ø·":"ØºÙŠØ± Ù†Ø´Ø·"})]}),n.subscription&&e.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[C(n.subscription.planType),e.jsx("span",{className:"text-sm font-medium",children:H(n.subscription.planType)})]}),e.jsx(Be,{variant:n.subscription.isActive?"default":"destructive",children:n.subscription.isActive?"Ù…ÙØ¹Ù„":"Ù…Ù†ØªÙ‡ÙŠ"})]}),e.jsxs("div",{className:"text-xs text-gray-600",children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx(J,{className:"w-3 h-3 ml-1"}),"Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©: ",E(n.subscription.startDate)]}),n.subscription.endDate&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(J,{className:"w-3 h-3 ml-1"}),"Ø§Ù„Ù†Ù‡Ø§ÙŠØ©: ",E(n.subscription.endDate)]})]})]}),e.jsxs("div",{className:"space-y-3",children:[i&&o&&e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø¨Ø§Ù‚Ø©:"}),x?e.jsxs("select",{className:"w-full h-10 border border-input bg-background rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-ring",value:j,onChange:f=>p(f.target.value),children:[e.jsx("option",{value:y.MONTHLY,children:"Ø´Ù‡Ø±ÙŠØ©"}),e.jsx("option",{value:y.QUARTERLY,children:"Ø±Ø¨Ø¹ Ø³Ù†ÙˆÙŠØ©"}),e.jsx("option",{value:y.YEARLY,children:"Ø³Ù†ÙˆÙŠØ©"}),e.jsx("option",{value:y.LIFETIME,children:"Ù…Ø¯Ù‰ Ø§Ù„Ø­ÙŠØ§Ø©"}),e.jsx("option",{value:y.ZERO,children:"Ø²ÙŠØ±Ùˆ"})]}):e.jsxs(Pa,{value:j,onValueChange:f=>p(f),children:[e.jsx(Fa,{className:"w-full",children:e.jsx(Va,{placeholder:"Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø¨Ø§Ù‚Ø©"})}),e.jsxs(Ra,{children:[e.jsx(we,{value:y.MONTHLY,children:e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(pe,{className:"w-4 h-4"}),e.jsx("span",{children:"Ø´Ù‡Ø±ÙŠØ©"})]})}),e.jsx(we,{value:y.QUARTERLY,children:e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(J,{className:"w-4 h-4"}),e.jsx("span",{children:"Ø±Ø¨Ø¹ Ø³Ù†ÙˆÙŠØ©"})]})}),e.jsx(we,{value:y.YEARLY,children:e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(J,{className:"w-4 h-4"}),e.jsx("span",{children:"Ø³Ù†ÙˆÙŠØ©"})]})}),e.jsx(we,{value:y.LIFETIME,children:e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(Ha,{className:"w-4 h-4"}),e.jsx("span",{children:"Ù…Ø¯Ù‰ Ø§Ù„Ø­ÙŠØ§Ø©"})]})}),e.jsx(we,{value:y.ZERO,children:e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(Gs,{className:"w-4 h-4"}),e.jsx("span",{children:"Ø²ÙŠØ±Ùˆ"})]})})]})]})]}),e.jsxs("div",{className:"flex space-x-2 space-x-reverse",children:[e.jsx(Q,{size:"sm",onClick:()=>{i(n.id,j),S(!1)},className:"flex-1",children:"ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªÙØ¹ÙŠÙ„"}),e.jsx(Q,{size:"sm",variant:"outline",onClick:()=>S(!1),className:"flex-1",children:"Ø¥Ù„ØºØ§Ø¡"})]})]}),e.jsxs("div",{className:"flex space-x-2 space-x-reverse",children:[i&&!o&&e.jsx(Q,{size:"sm",variant:"outline",onClick:()=>S(!0),className:"flex-1",children:"ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ"}),b&&e.jsx(Q,{size:"sm",variant:"outline",onClick:()=>b(n.id),className:"flex-1",children:"Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ"}),u&&e.jsx(Q,{size:"sm",variant:"destructive",onClick:()=>u(n.id),children:e.jsx(nt,{className:"w-4 h-4"})})]})]})]})})},cr={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_DEV_MODE:"true",VITE_ENABLE_OFFLINE_PERSISTENCE:"false",VITE_FIREBASE_API_KEY:"AIzaSyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s",VITE_FIREBASE_APP_ID:"1:483702062341:web:b1ff06ad175cb7ae428b6c",VITE_FIREBASE_AUTH_DOMAIN:"voda-c6abd.firebaseapp.com",VITE_FIREBASE_AUTH_EMULATOR_URL:"http://localhost:9099",VITE_FIREBASE_FIRESTORE_EMULATOR_HOST:"localhost:8080",VITE_FIREBASE_FUNCTIONS_EMULATOR_HOST:"localhost:5001",VITE_FIREBASE_MEASUREMENT_ID:"G-CV6QGH7G7P",VITE_FIREBASE_MESSAGING_SENDER_ID:"483702062341",VITE_FIREBASE_PROJECT_ID:"voda-c6abd",VITE_FIREBASE_STORAGE_BUCKET:"voda-c6abd.appspot.com",VITE_FORCE_HASH_ROUTER:"true",VITE_SHOP_ID:"demo-shop-001",VITE_SHOP_NAME:"Ù…Ø­Ù„ ÙƒØ§Ø´ÙŠ Ù„ÙŠÙ†Ùƒ Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠ",VITE_SHOW_ENV_BANNER:"true",VITE_USE_EMULATORS:"false",VITE_USE_FIREBASE_EMULATOR:"false"},dr=({navigate:n,auth:i,devMode:b,setDevMode:u,error:j,setError:p,authLoading:o,setAuthLoading:S,activeTab:x,setActiveTab:D,setNotificationCenterOpen:C,setNotificationSettings:H,setNotifications:E,notificationCount:f,setNotificationCount:h,users:m,setUsers:z,filteredUsers:M,setFilteredUsers:g,loading:O,setLoading:ie,setEditingPlan:k,isSavingContent:T,setIsSavingContent:$,lastUpdateInfo:ae,loadContentFromFirebase:ve,saveContentToFirebase:ke})=>{var Ys;const[Y,be]=r.useState(!0),[I,ce]=r.useState(""),[v,A]=r.useState(null),[U,F]=r.useState({}),[X,ee]=r.useState(!1),[se,ps]=r.useState(null),[te,K]=r.useState({name:"",price:"",period:"",description:"",features:[]}),[gt,bs]=r.useState(!1),[ur,hr]=r.useState(!1),[gr,pr]=r.useState(null),[br,fr]=r.useState(!1),[pt,bt]=r.useState({sound:!0}),[ft,jr]=r.useState(!1),[jt,yt]=r.useState(null),[Se,Nt]=r.useState([]),[fs,He]=r.useState(!1),[js,Ee]=r.useState(void 0),[ze,De]=r.useState(""),[Ye,wt]=r.useState(null),[ys,Ns]=r.useState(!1),ws=Se.filter(s=>!((s==null?void 0:s.contacted)===!0||(s==null?void 0:s.status)==="contacted")),Ce=Se.filter(s=>(s==null?void 0:s.contacted)===!0||(s==null?void 0:s.status)==="contacted"),vt=async s=>{try{await la(Ie(Z,"waiting_list",s),{contacted:!0,status:"contacted",contactedAt:na()})}catch(t){console.error("Failed to mark waiting item as contacted",t),alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø© Ø¥Ù„Ù‰ ØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„.")}},[w,re]=r.useState({}),[Ge,kt]=r.useState(null),[Ze,St]=r.useState(null),[Qe,Et]=r.useState(null),[vs,ks]=r.useState(!1),[Ss,Es]=r.useState(!1),[Ds,Cs]=r.useState(!1),[fe,Dt]=r.useState(""),[je,Ct]=r.useState(""),[ye,At]=r.useState(""),[Tt,We]=r.useState(0),[_t,Xe]=r.useState(0),[It,Ke]=r.useState(0),[Je,As]=r.useState(""),[es,Ts]=r.useState(""),[ss,_s]=r.useState(""),Ae=s=>{const t=s==null?void 0:s.displayName;let a="";typeof t=="string"?a=t:t&&typeof t=="object"&&(a=(t.ar||t.en||"").toString()),!a&&typeof(s==null?void 0:s.email)=="string"&&(a=s.email);const l=String(a).trim().charAt(0);return l?l.toUpperCase():"ØŸ"},de=s=>{const t=s==null?void 0:s.displayName;if(typeof t=="string"&&t.trim())return t.trim();if(t&&typeof t=="object"){const a=t.full_name||t.name||t.ar||t.en;if(typeof a=="string"&&a.trim())return a.trim()}return typeof(s==null?void 0:s.email)=="string"&&s.email.includes("@")?s.email.split("@")[0]:"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"},[ts,Is]=r.useState(""),[as,Us]=r.useState(""),[Ls,Ps]=r.useState(""),[rs,Fs]=r.useState(""),[Vs,Rs]=r.useState(!1),[Te,Ms]=r.useState(""),[B,Os]=r.useState(24),[$s,Bs]=r.useState("24"),[qs,Hs]=r.useState(!1),[yr,zs]=r.useState(!1);r.useEffect(()=>{x==="trials"&&(async()=>{try{zs(!0);const{FreeTrialService:s}=await P(async()=>{const{FreeTrialService:a}=await import("./index-CRTRtp5n.js").then(l=>l.bi);return{FreeTrialService:a}},__vite__mapDeps([0,1]),import.meta.url),t=await s.getTrialDurationHours();Os(t),Bs(String(t))}catch(s){console.error("Failed to load trial duration",s)}finally{zs(!1)}})()},[x]),r.useEffect(()=>{x==="branding"&&(async()=>{try{const s=await ja();Ee(s.logoUrl),De(s.logoUrl||"")}catch(s){console.error("Failed to load branding config",s)}})()},[x]),r.useEffect(()=>{x==="application"&&(async()=>{try{const{getAppDownloads:s}=await P(async()=>{const{getAppDownloads:a}=await import("./appDownloadService-DyjNta3x.js");return{getAppDownloads:a}},__vite__mapDeps([2,0,1]),import.meta.url),t=await s();re(t||{}),As((t==null?void 0:t.androidUrl)||""),Ts((t==null?void 0:t.pcUrl)||""),_s((t==null?void 0:t.pc32Url)||""),tt((t==null?void 0:t.pcVersion)||""),at((t==null?void 0:t.pcUrl)||""),rt((t==null?void 0:t.pc32Url)||"")}catch(s){console.error("Failed to load app downloads",s)}})()},[x]),r.useEffect(()=>{if(x==="waitingList"){He(!0);try{const s=ge(le(Z,"waiting_list")),t=hs(s,a=>{const l=a.docs.map(d=>({id:d.id,...d.data()})).sort((d,c)=>{var L,V,q,R,G,oe;const N=((V=(L=d==null?void 0:d.createdAt)==null?void 0:L.toMillis)==null?void 0:V.call(L))??((q=d==null?void 0:d.createdAt)==null?void 0:q.seconds)*1e3??0;return(((G=(R=c==null?void 0:c.createdAt)==null?void 0:R.toMillis)==null?void 0:G.call(R))??((oe=c==null?void 0:c.createdAt)==null?void 0:oe.seconds)*1e3??0)-N});Nt(l),He(!1)});return()=>t()}catch(s){console.error("Failed to subscribe to waiting_list:",s),He(!1)}}},[x]);const Ut=async()=>{var s;if(!ts.trim()||!as.trim()){alert("ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© Ø¹Ù†ÙˆØ§Ù† ÙˆØ±Ø³Ø§Ù„Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±");return}try{Rs(!0);const t=rs.trim()?`user:${rs.trim()}`:"global";await La({title:ts.trim(),message:as.trim(),audienceKey:t,createdBy:(s=i==null?void 0:i.currentUser)==null?void 0:s.uid,linkUrl:Ls.trim()||void 0}),Is(""),Us(""),Ps(""),Fs(""),alert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± Ø¨Ù†Ø¬Ø§Ø­!")}catch(t){console.error("Ø®Ø·Ø£ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±:",t),alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±")}finally{Rs(!1)}};r.useEffect(()=>{if(!I.trim())g(m);else{const s=m.filter(t=>t.email&&typeof t.email=="string"&&t.email.toLowerCase().includes(I.toLowerCase())||t.displayName&&typeof t.displayName=="string"&&t.displayName.toLowerCase().includes(I.toLowerCase())||t.name&&typeof t.name=="string"&&t.name.toLowerCase().includes(I.toLowerCase()));g(s)}},[m,I,g]);const Lt=()=>{i!=null&&i.signOut&&i.signOut(),n("/admin/login")},Pt=async(s,t,a=null)=>{var l;try{console.log("Activating subscription for user:",s,"with plan:",t,"and variant:",a);const d=((l=i==null?void 0:i.currentUser)==null?void 0:l.uid)||"admin-user-id";await ma(s,t,d,a),console.log("âœ… ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ Ø¨Ù†Ø¬Ø§Ø­")}catch(d){console.error("âŒ Ø®Ø·Ø£ ÙÙŠ ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ:",d),alert("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.")}},Ft=async s=>{try{console.log("Deactivating subscription for user:",s),await oa(s),console.log("âœ… ØªÙ… Ø¥Ù„ØºØ§Ø¡ ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ Ø¨Ù†Ø¬Ø§Ø­")}catch(t){console.error("âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ù„ØºØ§Ø¡ ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ:",t),alert("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ù„ØºØ§Ø¡ ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.")}},Vt=async s=>{var t;try{if(!window.confirm(`Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹ØŸ

Ø³ÙŠØªÙ… Ø­Ø°Ù:
- Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
- Ø¬Ù…ÙŠØ¹ Ø¨ÙŠØ§Ù†Ø§ØªÙ‡
- Ø§Ø´ØªØ±Ø§ÙƒÙ‡
- Ù…Ø¹Ø§Ù…Ù„Ø§ØªÙ‡
- Ù…Ø­Ø§Ø¯Ø«Ø§ØªÙ‡

Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡!`))return;console.log("Ø¨Ø¯Ø¡ Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:",s);const l=((t=i==null?void 0:i.currentUser)==null?void 0:t.uid)||"unknown-admin";try{const c=await ia(ca,"deleteUserPermanently")({userId:s});console.log("Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø¯Ø§Ù„Ø© Ø§Ù„Ø­Ø°Ù Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ:",c),z(N=>N.filter(_=>_.id!==s)),g(N=>N.filter(_=>_.id!==s)),alert("ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹ Ù…Ø¹ Ø¬Ù…ÙŠØ¹ Ø¨ÙŠØ§Ù†Ø§ØªÙ‡ ÙˆØ­Ø³Ø§Ø¨ Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©.");return}catch(d){console.warn("ØªØ¹Ø°Ø± ØªÙ†ÙÙŠØ° Ø§Ù„Ø­Ø°Ù Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ø¹Ø¨Ø± Cloud FunctionsØŒ Ø³ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø­Ø°Ù Ø§Ù„Ù…Ø­Ù„ÙŠ Ø§Ù„Ù…Ø¤Ù‚Øª:",(d==null?void 0:d.message)||d)}{const d=[];try{await Ne(Ie(Z,"profiles",s)),console.log("ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ")}catch(c){console.error("Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ:",c),d.push(`Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ: ${(c==null?void 0:c.message)||c}`)}try{await Ne(Ie(Z,"users",s)),console.log("ØªÙ… Ø­Ø°Ù ÙˆØ«ÙŠÙ‚Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ù† Ù…Ø¬Ù…ÙˆØ¹Ø© users")}catch(c){console.error("Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù ÙˆØ«ÙŠÙ‚Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ù† Ù…Ø¬Ù…ÙˆØ¹Ø© users:",c),d.push(`users: ${(c==null?void 0:c.message)||c}`)}try{const c=ge(le(Z,"transactions"),us("userId","==",s)),N=await Fe(c),_=N.docs.map(q=>Ne(q.ref)),L=await Promise.allSettled(_),V=L.filter(q=>q.status==="rejected");V.length?(console.warn("ÙØ´Ù„ Ø­Ø°Ù Ø¨Ø¹Ø¶ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª:",V.length),d.push(`Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª: ÙØ´Ù„ Ø­Ø°Ù ${V.length} Ù…Ù† Ø£ØµÙ„ ${L.length}`)):console.log(`ØªÙ… Ø­Ø°Ù ${N.size} Ù…Ø¹Ø§Ù…Ù„Ø©`)}catch(c){console.error("Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨/Ø­Ø°Ù Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª:",c),d.push(`Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª: ${(c==null?void 0:c.message)||c}`)}try{const c=ge(le(Z,"chatRooms"),us("participants","array-contains",s)),N=await Fe(c),_=N.docs.map(async L=>{try{const q=(await Fe(le(L.ref,"messages"))).docs.map(R=>Ne(R.ref));await Promise.allSettled(q),await Ne(L.ref)}catch(V){console.error("ÙØ´Ù„ Ø­Ø°Ù Ù…Ø­Ø§Ø¯Ø«Ø©/Ø±Ø³Ø§Ø¦Ù„:",V),d.push(`Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª: ${L.id}`)}});await Promise.all(_),console.log(`ØªÙ… Ø¥Ù†Ù‡Ø§Ø¡ Ù…Ø¹Ø§Ù„Ø¬Ø© ${N.size} Ù…Ø­Ø§Ø¯Ø«Ø©`)}catch(c){console.error("Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨/Ø­Ø°Ù Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª:",c),d.push(`Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª: ${(c==null?void 0:c.message)||c}`)}try{await da(Ie(Z,"deletedUsers",s),{deletedAt:new Date,deletedBy:l,reason:"Ø­Ø°Ù Ù†Ù‡Ø§Ø¦ÙŠ Ù…Ù† Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©"})}catch(c){console.error("Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙƒÙ…Ø­Ø°ÙˆÙ:",c),d.push(`deletedUsers: ${(c==null?void 0:c.message)||c}`)}z(c=>c.filter(N=>N.id!==s)),g(c=>c.filter(N=>N.id!==s)),d.length===0?alert("ØªÙ… Ø­Ø°Ù Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø­Ù„ÙŠØ§Ù‹ Ø¨Ù†Ø¬Ø§Ø­. Ù…Ù„Ø§Ø­Ø¸Ø©: Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© Ù„Ù… ÙŠÙØ­Ø°Ù."):alert(`ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø¹ Ù…Ù„Ø§Ø­Ø¸Ø§Øª:
- ${d.join(`
- `)}

Ø¨Ø¹Ø¶ Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ Ù‚Ø¯ Ù„Ù… ØªÙØ­Ø°Ù Ø¨Ø§Ù„ÙƒØ§Ù…Ù„. ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„Ø§Ø­Ù‚Ù‹Ø§.`)}}catch(a){console.error("âŒ Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:",a),alert(`Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${a.message||"Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ"}`)}};r.useEffect(()=>{(async()=>{try{if(typeof ve=="function"){const t=await ve();t&&(t.monthly||t.yearly||t.lifetime)&&F(t)}}catch(t){console.warn("Failed to load content data:",t)}})()},[]);const Rt=async()=>{var s;try{if(typeof ke!="function")return;$(!0);const t=((s=i==null?void 0:i.currentUser)==null?void 0:s.uid)||"admin-user-id";await ke(U,t),alert("ØªÙ… Ø­ÙØ¸ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª Ø¨Ù†Ø¬Ø§Ø­")}catch(t){console.error("âŒ Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ù…Ø­ØªÙˆÙ‰:",t),alert(`ÙØ´Ù„ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ù…Ø­ØªÙˆÙ‰: ${(t==null?void 0:t.message)||"Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ"}`)}finally{$(!1)}},_e=(s,t,a)=>{F(l=>({...l,[s]:{...(l==null?void 0:l[s])||{},[t]:a}}))},Mt=s=>{F(t=>{var a;return{...t,[s]:{...(t==null?void 0:t[s])||{},features:[...((a=t==null?void 0:t[s])==null?void 0:a.features)||[],""]}}})},Ot=(s,t,a)=>{F(l=>{var c;const d=[...((c=l==null?void 0:l[s])==null?void 0:c.features)||[]];return d[t]=a,{...l,[s]:{...(l==null?void 0:l[s])||{},features:d}}})},$t=(s,t)=>{F(a=>{var d;const l=[...((d=a==null?void 0:a[s])==null?void 0:d.features)||[]];return l.splice(t,1),{...a,[s]:{...(a==null?void 0:a[s])||{},features:l}}})},Bt=()=>{bt(s=>({...s,sound:!s.sound}))},qt=()=>{yt(null)},Ht=async()=>{try{const s=Number($s);if(isNaN(s)||s<1){alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¯Ø© ØµØ­ÙŠØ­Ø© Ø¨Ø§Ù„Ø³Ø§Ø¹Ø§Øª");return}Hs(!0);const{FreeTrialService:t}=await P(async()=>{const{FreeTrialService:l}=await import("./index-CRTRtp5n.js").then(d=>d.bi);return{FreeTrialService:l}},__vite__mapDeps([0,1]),import.meta.url),a=await t.updateTrialDurationHours(s);a.success?(Os(s),alert(a.message)):alert(a.message||"ÙØ´Ù„ ØªØ­Ø¯ÙŠØ« Ù…Ø¯Ø© Ø§Ù„ØªØ¬Ø±Ø¨Ø©")}catch(s){console.error("Error updating trial duration:",s),alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ø¯ÙŠØ« Ù…Ø¯Ø© Ø§Ù„ØªØ¬Ø±Ø¨Ø©")}finally{Hs(!1)}},zt=async s=>{try{const{FreeTrialService:t}=await P(async()=>{const{FreeTrialService:l}=await import("./index-CRTRtp5n.js").then(d=>d.bi);return{FreeTrialService:l}},__vite__mapDeps([0,1]),import.meta.url),a=await t.startFreeTrialFromAdmin(s);alert(a.message||`ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ© Ù„Ù…Ø¯Ø© ${B} ${B>=3&&B<=10?"Ø³Ø§Ø¹Ø§Øª":B===2?"Ø³Ø§Ø¹ØªÙŠÙ†":"Ø³Ø§Ø¹Ø©"}`)}catch(t){console.error("Error activating free trial:",t),alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ©. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.")}},Yt=async s=>{try{const{FreeTrialService:t}=await P(async()=>{const{FreeTrialService:l}=await import("./index-CRTRtp5n.js").then(d=>d.bi);return{FreeTrialService:l}},__vite__mapDeps([0,1]),import.meta.url),a=await t.resetActiveTrialToCurrentDuration(s);alert(a.message)}catch(t){console.error("Error resetting user trial end:",t),alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ø¯ÙŠØ« Ù†Ù‡Ø§ÙŠØ© Ø§Ù„ØªØ¬Ø±Ø¨Ø©.")}},Gt=(s,t)=>{console.log("Toggling user status:",s,t)},ls=s=>s?(s.toDate?s.toDate():new Date(s)).toLocaleDateString("ar-EG",{year:"numeric",month:"2-digit",day:"2-digit"}):"ØºÙŠØ± Ù…Ø­Ø¯Ø¯",Zt=[{id:"users",label:"Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†",icon:ds},{id:"subscriptions",label:"Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª",icon:J},{id:"trials",label:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªØ¬Ø§Ø±Ø¨ Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ©",icon:ue},{id:"content",label:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø­ØªÙˆÙ‰",icon:ta},{id:"branding",label:"Ø§Ù„Ø¹Ù„Ø§Ù…Ø© Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ©",icon:nt},{id:"application",label:"Ø§Ù„ØªØ·Ø¨ÙŠÙ‚",icon:Zs},{id:"whatsapp",label:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨",icon:Oe},{id:"branches",label:"Ø¨Ø§Ù‚Ø§Øª Ø§Ù„ÙØ±ÙˆØ¹",icon:et},{id:"analytics",label:"Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª",icon:Ks},{id:"externalNotifications",label:"Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø®Ø§Ø±Ø¬ÙŠØ©",icon:ne}];return o?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©..."}),!1]})}):j?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center bg-white p-8 rounded-lg shadow-lg max-w-md w-full",children:[e.jsx("div",{className:"text-red-600 mb-4",children:e.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…"}),e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:e.jsx("p",{className:"text-red-700 text-sm font-medium",children:j})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>{p(null),S(!0),window.location.reload()},className:"w-full bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"ðŸ”„ Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©"}),e.jsx("button",{onClick:()=>{p(null),n("/admin/login")},className:"w-full bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors",children:"ðŸ”‘ Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„"}),!1,e.jsx("button",{onClick:()=>{console.log("ðŸ” Current error details:",j),console.log("ðŸ” Auth state:",i.currentUser),console.log("ðŸ” Dev mode:",b),console.log("ðŸ” Environment:",cr)},className:"w-full bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors text-sm",children:"ðŸ› Ø·Ø¨Ø§Ø¹Ø© ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø®Ø·Ø£ ÙÙŠ ÙˆØ­Ø¯Ø© Ø§Ù„ØªØ­ÙƒÙ…"})]})]})}):!b&&!i.currentUser?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center bg-white p-8 rounded-lg shadow-lg max-w-md w-full",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø¯ÙŠØ±"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>n("/admin/login"),className:"w-full bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"ðŸ”‘ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„"}),!1]})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col md:flex-row overflow-x-hidden",children:[e.jsxs("div",{className:`bg-white shadow-lg transition-all duration-300 flex flex-col z-40 ${Y?"translate-x-0 w-64 md:w-64":"translate-x-full w-64 md:w-16 md:translate-x-0"} fixed inset-y-0 right-0 md:static md:inset-auto`,children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[Y&&e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-600 to-blue-600 rounded-lg flex items-center justify-center",children:e.jsx(Oa,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-800",children:"Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ­ÙƒÙ…"})]})]}),e.jsx("button",{onClick:()=>be(!Y),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:Y?e.jsx(he,{className:"w-5 h-5"}):e.jsx(za,{className:"w-5 h-5"})})]})}),e.jsx("nav",{className:"flex-1 p-4",children:e.jsx("ul",{className:"space-y-2",children:Zt.map(s=>{const t=s.icon;return e.jsx("li",{children:e.jsxs("button",{onClick:()=>{if(s.id==="externalNotifications"){n("/admin/notifications");return}D(s.id)},className:`w-full flex items-center space-x-3 space-x-reverse p-3 rounded-lg transition-colors ${x===s.id?"bg-gradient-to-r from-purple-600 to-blue-600 text-white":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx(t,{className:"w-5 h-5"}),Y&&e.jsx("span",{className:"font-medium",children:s.label})]})},s.id)})})}),e.jsx("div",{className:"p-4 border-t border-gray-200",children:e.jsxs("button",{onClick:Lt,className:"w-full flex items-center space-x-3 space-x-reverse p-3 rounded-lg text-red-600 hover:bg-red-50 transition-colors",children:[e.jsx(aa,{className:"w-5 h-5"}),Y&&e.jsx("span",{className:"font-medium",children:"ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬"})]})})]}),Y&&e.jsx("div",{className:"fixed inset-0 bg-black/30 md:hidden",onClick:()=>be(!1)}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200 p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[!Y&&e.jsx("button",{className:"md:hidden p-2 rounded-lg hover:bg-gray-100",onClick:()=>be(!0),"aria-label":"ÙØªØ­ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©",children:e.jsx(Qs,{className:"w-5 h-5"})}),e.jsxs("h1",{className:"text-2xl font-bold text-gray-800",children:[x==="users"&&"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†",x==="waitingList"&&"Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±",x==="subscriptions"&&"Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª",x==="trials"&&"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªØ¬Ø§Ø±Ø¨ Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ©",x==="branding"&&"Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¹Ù„Ø§Ù…Ø© Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ©",x==="application"&&"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚",x==="analytics"&&"Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª",x==="branches"&&"Ø¨Ø§Ù‚Ø§Øª Ø§Ù„ÙØ±ÙˆØ¹"]}),b&&e.jsx("span",{className:"px-2 py-1 bg-orange-100 text-orange-800 text-xs rounded-full",children:"ðŸ”§ ÙˆØ¶Ø¹ Ø§Ù„ØªØ·ÙˆÙŠØ±"})]}),e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ ",b?"Ø§Ù„Ù…Ø·ÙˆØ±":"Ø§Ù„Ù…Ø¯ÙŠØ±"]}),e.jsx(wa,{})]})]})}),e.jsxs("main",{className:"flex-1 p-3 sm:p-4 md:p-6 max-w-full overflow-x-hidden",children:[x==="waitingList"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Ø·Ù„Ø¨Ø§Øª Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±"}),e.jsx("div",{className:"text-sm text-gray-500 flex items-center gap-3",children:fs?"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...":e.jsxs(e.Fragment,{children:[e.jsxs("span",{children:["Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ",Se.length]}),e.jsxs("span",{className:"text-red-600",children:["Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±: ",ws.length]}),e.jsxs("span",{className:"text-green-600",children:["ØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„: ",Ce.length]})]})})]}),e.jsx("div",{className:"overflow-x-auto",children:fs?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-500",children:"Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª..."})]}):Se.length===0?e.jsx("div",{className:"p-8 text-center text-gray-600",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª ÙÙŠ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ø­Ø§Ù„ÙŠØ§Ù‹"}):e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500",children:"Ø§Ù„Ø§Ø³Ù…"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500",children:"Ø§Ù„Ù…Ø¹Ø±Ù"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500",children:"Ø³Ø¨Ø¨ Ø§Ù„Ø·Ù„Ø¨"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500",children:"Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500",children:"Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500",children:"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ws.map(s=>{var N;const t=(s.phone||"").toString(),a=t.replace(/\D/g,"");let l=null;const d="Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ Ø·Ù„Ø¨Øª Ø§Ù„ØªØ­Ø¯Ø« Ù…Ø¹Ù†Ø§. ÙƒÙŠÙ Ù†Ø³Ø§Ø¹Ø¯ÙƒØŸ";try{ct(t)&&(l=it(t,d))}catch{l=null}const c=(N=s.createdAt)!=null&&N.toDate?s.createdAt.toDate():s.createdAt?new Date(s.createdAt):null;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-800",children:s.name||"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"}),e.jsx("td",{className:"px-4 py-3 text-xs text-gray-500",children:s.userId||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:s.reason||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:a||"â€”"}),e.jsxs("td",{className:"px-4 py-3 flex items-center gap-2",children:[l?e.jsx("a",{href:l,target:"_blank",rel:"noopener noreferrer",children:e.jsx("button",{className:"px-3 py-1.5 rounded-md bg-green-600 text-white text-sm hover:bg-green-700",children:"ÙˆØ§ØªØ³Ø§Ø¨"})}):e.jsx("span",{className:"text-xs text-gray-400",children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø±Ù‚Ù…"}),e.jsx("button",{className:"px-3 py-1.5 rounded-md bg-indigo-600 text-white text-sm hover:bg-indigo-700",onClick:()=>vt(s.id),title:"ØªÙ…ÙŠÙŠØ² ÙƒØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„",children:"ØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„"})]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:c?c.toLocaleString("ar-EG"):"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"})]},s.id)})})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"ØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„"}),e.jsx("div",{className:"text-sm text-gray-500",children:Ce.length})]}),e.jsx("div",{className:"overflow-x-auto",children:Ce.length===0?e.jsx("div",{className:"p-8 text-center text-gray-600",children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¹Ù†Ø§ØµØ± ÙÙŠ Ù‚Ø³Ù… ØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„"}):e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500",children:"Ø§Ù„Ø§Ø³Ù…"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500",children:"Ø§Ù„Ù…Ø¹Ø±Ù"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500",children:"Ø³Ø¨Ø¨ Ø§Ù„Ø·Ù„Ø¨"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500",children:"Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500",children:"Ø§Ù„Ø­Ø§Ù„Ø©"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500",children:"ØªØ§Ø±ÙŠØ® Ø§Ù„ØªÙˆØ§ØµÙ„"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Ce.map(s=>{var d;const a=(s.phone||"").toString().replace(/\D/g,""),l=(d=s.contactedAt)!=null&&d.toDate?s.contactedAt.toDate():s.contactedAt?new Date(s.contactedAt):null;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-800",children:s.name||"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"}),e.jsx("td",{className:"px-4 py-3 text-xs text-gray-500",children:s.userId||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:s.reason||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:a||"â€”"}),e.jsx("td",{className:"px-4 py-3 text-xs",children:e.jsx("span",{className:"px-2 py-1 rounded-full bg-green-100 text-green-700",children:"ØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:l?l.toLocaleString("ar-EG"):"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"})]},s.id)})})]})})]})]}),x==="users"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†"}),e.jsx("p",{className:"text-2xl font-bold text-gray-800",children:m.length})]}),e.jsx(ds,{className:"w-8 h-8 text-blue-600"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"}),e.jsx("input",{type:"text",value:rs,onChange:s=>Fs(s.target.value),placeholder:"Ø¶Ø¹ uid Ø§Ù„Ø®Ø§Øµ Ø¨Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„Ø§Ø³ØªÙ‡Ø¯Ø§Ù Ø¥Ø´Ø¹Ø§Ø± Ø´Ø®ØµÙŠ",className:"w-full rounded-md border-gray-300 focus:border-blue-500 focus:ring-blue-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Ø§ØªØ±ÙƒÙ‡ ÙØ§Ø±ØºÙ‹Ø§ Ù„Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¹Ø§Ù…Ø› Ø¥Ù† ÙˆØ¶Ø¹ØªÙ‡ Ø³ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± Ù„Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙ‚Ø·."})]})]}),e.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù†Ø´Ø·ÙŠÙ†"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:m.filter(s=>s.isActive).length})]}),e.jsx(st,{className:"w-8 h-8 text-green-600"})]})}),e.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù…Ø¹Ø·Ù„ÙŠÙ†"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:m.filter(s=>!s.isActive).length})]}),e.jsx(Ya,{className:"w-8 h-8 text-red-600"})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ue,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ù…Ø³ØªØ®Ø¯Ù…...",value:I,onChange:s=>ce(s.target.value),className:"pr-10 pl-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm"})]})]}),I&&e.jsxs("div",{className:"text-sm text-gray-600",children:["Ø¹Ø±Ø¶ ",M.length," Ù…Ù† Ø£ØµÙ„ ",m.length," Ù…Ø³ØªØ®Ø¯Ù…",I&&e.jsx("button",{onClick:()=>ce(""),className:"mr-2 text-purple-600 hover:text-purple-800 underline",children:"Ù…Ø³Ø­ Ø§Ù„Ø¨Ø­Ø«"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:O?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-500",children:"Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª..."})]}):M.length===0?e.jsx("div",{className:"p-8 text-center text-gray-500",children:I?"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ Ù„Ù„Ø¨Ø­Ø«":"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†"}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:M.map(s=>e.jsx(ir,{user:s,onActivateSubscription:Pt,onToggleUserStatus:Gt,onDeactivateSubscription:Ft,onDeleteUser:Vt},s.id))})})]})]}),x==="application"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 sm:p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(Zs,{className:"w-5 h-5 text-green-600"})," Ø¥Ø¯Ø§Ø±Ø© ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø£Ù†Ø¯Ø±ÙˆÙŠØ¯"]}),(w==null?void 0:w.androidUrl)&&e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø­Ø§Ù„ÙŠ: ",e.jsx("a",{href:me(w.androidUrl),className:"text-blue-600 underline",target:"_blank",rel:"noopener noreferrer",children:"ØªÙ†Ø²ÙŠÙ„"}),w.androidVersion?` | Ø§Ù„Ø¥ØµØ¯Ø§Ø±: ${w.androidVersion}`:""]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 lg:gap-6 items-start lg:items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ù…Ù„Ù APK"}),e.jsx("input",{type:"file",accept:".apk",onChange:s=>{var t;return kt(((t=s.target.files)==null?void 0:t[0])||null)},className:"w-full p-2 border border-gray-300 rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ø±Ù‚Ù… Ø§Ù„Ø¥ØµØ¯Ø§Ø± (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"}),e.jsx("input",{type:"text",value:fe,onChange:s=>Dt(s.target.value),placeholder:"Ù…Ø«Ø§Ù„: 1.0.3",className:"w-full p-2 border border-gray-300 rounded-md"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("button",{onClick:async()=>{var s;if(Ge)try{ks(!0),We(0);const{uploadAppBinaryResumable:t}=await P(async()=>{const{uploadAppBinaryResumable:l}=await import("./appDownloadService-DyjNta3x.js");return{uploadAppBinaryResumable:l}},__vite__mapDeps([2,0,1]),import.meta.url),a=await t(Ge,"android",((s=i==null?void 0:i.currentUser)==null?void 0:s.uid)||"admin",fe||void 0,l=>We(l),3e5);re(l=>({...l,androidUrl:a,androidVersion:fe||l.androidVersion}))}catch(t){console.error("Android upload failed",t),alert(t!=null&&t.message?`ÙØ´Ù„ Ø±ÙØ¹ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø£Ù†Ø¯Ø±ÙˆÙŠØ¯: ${t.message}`:"ÙØ´Ù„ Ø±ÙØ¹ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø£Ù†Ø¯Ø±ÙˆÙŠØ¯")}finally{ks(!1),We(0)}},disabled:vs||!Ge,className:"w-full sm:w-auto flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 disabled:opacity-50",children:[e.jsx(Le,{className:"w-4 h-4"}),vs?`Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø±ÙØ¹... ${Tt}%`:"Ø±ÙØ¹ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø£Ù†Ø¯Ø±ÙˆÙŠØ¯"]}),(w==null?void 0:w.androidUrl)&&e.jsxs("a",{href:me(w.androidUrl),className:"w-full sm:w-auto text-center flex items-center justify-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",target:"_blank",rel:"noopener noreferrer",children:[e.jsx(os,{className:"w-4 h-4"})," ØªÙ†Ø²ÙŠÙ„ Ø§Ù„Ø­Ø§Ù„ÙŠ"]})]})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 lg:grid-cols-3 gap-3 lg:gap-4 items-start lg:items-end",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ø±Ø§Ø¨Ø· Ù…Ø¨Ø§Ø´Ø± Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø£Ù†Ø¯Ø±ÙˆÙŠØ¯ (APK)"}),e.jsx("input",{type:"url",value:Je,onChange:s=>As(s.target.value),placeholder:"https://example.com/app-release.apk",className:"w-full p-2 border border-gray-300 rounded-md"})]}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-3",children:e.jsxs("button",{onClick:async()=>{var s;try{const{setAppDownloadLinks:t}=await P(async()=>{const{setAppDownloadLinks:a}=await import("./appDownloadService-DyjNta3x.js");return{setAppDownloadLinks:a}},__vite__mapDeps([2,0,1]),import.meta.url);await t({androidUrl:Je||void 0,androidVersion:fe||void 0},((s=i==null?void 0:i.currentUser)==null?void 0:s.uid)||"admin"),re(a=>({...a,androidUrl:Je||void 0,androidVersion:fe||(a==null?void 0:a.androidVersion)})),alert("ØªÙ… Ø­ÙØ¸ Ø±Ø§Ø¨Ø· Ø§Ù„Ø£Ù†Ø¯Ø±ÙˆÙŠØ¯ Ø¨Ù†Ø¬Ø§Ø­")}catch(t){console.error("Failed to save android link",t),alert(t!=null&&t.message?`ÙØ´Ù„ Ø­ÙØ¸ Ø§Ù„Ø±Ø§Ø¨Ø·: ${t.message}`:"ÙØ´Ù„ Ø­ÙØ¸ Ø§Ù„Ø±Ø§Ø¨Ø·")}},className:"w-full sm:w-auto flex items-center gap-2 bg-emerald-600 text-white px-4 py-2 rounded-lg hover:bg-emerald-700",children:[e.jsx(xe,{className:"w-4 h-4"})," Ø­ÙØ¸ Ø§Ù„Ø±Ø§Ø¨Ø·"]})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 sm:p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(Xs,{className:"w-5 h-5 text-indigo-600"})," Ø¥Ø¯Ø§Ø±Ø© ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± (Windows) â€” 64 Ø¨Øª"]}),(w==null?void 0:w.pcUrl)&&e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø­Ø§Ù„ÙŠ: ",e.jsx("a",{href:me(w.pcUrl),className:"text-blue-600 underline",target:"_blank",rel:"noopener noreferrer",children:"ØªÙ†Ø²ÙŠÙ„"}),w.pcVersion?` | Ø§Ù„Ø¥ØµØ¯Ø§Ø±: ${w.pcVersion}`:""]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 lg:gap-6 items-start lg:items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ù…Ù„Ù Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ (EXE/ZIP)"}),e.jsx("input",{type:"file",accept:".exe,.zip",onChange:s=>{var t;return St(((t=s.target.files)==null?void 0:t[0])||null)},className:"w-full p-2 border border-gray-300 rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ø±Ù‚Ù… Ø§Ù„Ø¥ØµØ¯Ø§Ø± (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"}),e.jsx("input",{type:"text",value:je,onChange:s=>Ct(s.target.value),placeholder:"Ù…Ø«Ø§Ù„: 2.1.0",className:"w-full p-2 border border-gray-300 rounded-md"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("button",{onClick:async()=>{var s;if(Ze)try{Es(!0),Xe(0);const{uploadAppBinaryResumable:t}=await P(async()=>{const{uploadAppBinaryResumable:l}=await import("./appDownloadService-DyjNta3x.js");return{uploadAppBinaryResumable:l}},__vite__mapDeps([2,0,1]),import.meta.url),a=await t(Ze,"pc",((s=i==null?void 0:i.currentUser)==null?void 0:s.uid)||"admin",je||void 0,l=>Xe(l),3e5);re(l=>({...l,pcUrl:a,pcVersion:je||l.pcVersion}))}catch(t){console.error("PC upload failed",t),alert(t!=null&&t.message?`ÙØ´Ù„ Ø±ÙØ¹ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±: ${t.message}`:"ÙØ´Ù„ Ø±ÙØ¹ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±")}finally{Es(!1),Xe(0)}},disabled:Ss||!Ze,className:"w-full sm:w-auto flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 disabled:opacity-50",children:[e.jsx(Le,{className:"w-4 h-4"}),Ss?`Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø±ÙØ¹... ${_t}%`:"Ø±ÙØ¹ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±"]}),(w==null?void 0:w.pcUrl)&&e.jsxs("a",{href:me(w.pcUrl),className:"w-full sm:w-auto text-center flex items-center justify-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",target:"_blank",rel:"noopener noreferrer",children:[e.jsx(os,{className:"w-4 h-4"})," ØªÙ†Ø²ÙŠÙ„ Ù†Ø³Ø®Ø© 64 Ø¨Øª"]})]})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 lg:grid-cols-3 gap-3 lg:gap-4 items-start lg:items-end",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ø±Ø§Ø¨Ø· Ù…Ø¨Ø§Ø´Ø± Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± (EXE/ZIP)"}),e.jsx("input",{type:"url",value:es,onChange:s=>Ts(s.target.value),placeholder:"https://example.com/cashy-setup.exe",className:"w-full p-2 border border-gray-300 rounded-md"})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs("button",{onClick:async()=>{var s;try{const{setAppDownloadLinks:t}=await P(async()=>{const{setAppDownloadLinks:a}=await import("./appDownloadService-DyjNta3x.js");return{setAppDownloadLinks:a}},__vite__mapDeps([2,0,1]),import.meta.url);await t({pcUrl:es||void 0,pcVersion:je||void 0},((s=i==null?void 0:i.currentUser)==null?void 0:s.uid)||"admin"),re(a=>({...a,pcUrl:es||void 0,pcVersion:je||(a==null?void 0:a.pcVersion)})),alert("ØªÙ… Ø­ÙØ¸ Ø±Ø§Ø¨Ø· Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± Ø¨Ù†Ø¬Ø§Ø­")}catch(t){console.error("Failed to save pc link",t),alert(t!=null&&t.message?`ÙØ´Ù„ Ø­ÙØ¸ Ø§Ù„Ø±Ø§Ø¨Ø·: ${t.message}`:"ÙØ´Ù„ Ø­ÙØ¸ Ø§Ù„Ø±Ø§Ø¨Ø·")}},className:"flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700",children:[e.jsx(xe,{className:"w-4 h-4"})," Ø­ÙØ¸ Ø§Ù„Ø±Ø§Ø¨Ø·"]})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 sm:p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(Xs,{className:"w-5 h-5 text-sky-600"})," Ø¥Ø¯Ø§Ø±Ø© ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± (Windows) â€” 32 Ø¨Øª"]}),(w==null?void 0:w.pc32Url)&&e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø­Ø§Ù„ÙŠ: ",e.jsx("a",{href:me(w.pc32Url),className:"text-blue-600 underline",target:"_blank",rel:"noopener noreferrer",children:"ØªÙ†Ø²ÙŠÙ„"}),w.pc32Version?` | Ø§Ù„Ø¥ØµØ¯Ø§Ø±: ${w.pc32Version}`:""]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 lg:gap-6 items-start lg:items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ù…Ù„Ù Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ (EXE/ZIP)"}),e.jsx("input",{type:"file",accept:".exe,.zip",onChange:s=>{var t;return Et(((t=s.target.files)==null?void 0:t[0])||null)},className:"w-full p-2 border border-gray-300 rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ø±Ù‚Ù… Ø§Ù„Ø¥ØµØ¯Ø§Ø± (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"}),e.jsx("input",{type:"text",value:ye,onChange:s=>At(s.target.value),placeholder:"Ù…Ø«Ø§Ù„: 2.1.0",className:"w-full p-2 border border-gray-300 rounded-md"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("button",{onClick:async()=>{var s;if(Qe)try{Cs(!0),Ke(0);const{uploadAppBinaryResumable:t}=await P(async()=>{const{uploadAppBinaryResumable:l}=await import("./appDownloadService-DyjNta3x.js");return{uploadAppBinaryResumable:l}},__vite__mapDeps([2,0,1]),import.meta.url),a=await t(Qe,"pc32",((s=i==null?void 0:i.currentUser)==null?void 0:s.uid)||"admin",ye||void 0,l=>Ke(l),3e5);re(l=>({...l,pc32Url:a,pc32Version:ye||l.pc32Version}))}catch(t){console.error("PC32 upload failed",t),alert(t!=null&&t.message?`ÙØ´Ù„ Ø±ÙØ¹ ØªØ·Ø¨ÙŠÙ‚ 32 Ø¨Øª: ${t.message}`:"ÙØ´Ù„ Ø±ÙØ¹ ØªØ·Ø¨ÙŠÙ‚ 32 Ø¨Øª")}finally{Cs(!1),Ke(0)}},disabled:Ds||!Qe,className:"w-full sm:w-auto flex items-center gap-2 bg-sky-600 text-white px-4 py-2 rounded-lg hover:bg-sky-700 disabled:opacity-50",children:[e.jsx(Le,{className:"w-4 h-4"}),Ds?`Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø±ÙØ¹... ${It}%`:"Ø±ÙØ¹ ØªØ·Ø¨ÙŠÙ‚ 32 Ø¨Øª"]}),(w==null?void 0:w.pc32Url)&&e.jsxs("a",{href:me(w.pc32Url),className:"w-full sm:w-auto text-center flex items-center justify-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",target:"_blank",rel:"noopener noreferrer",children:[e.jsx(os,{className:"w-4 h-4"})," ØªÙ†Ø²ÙŠÙ„ Ù†Ø³Ø®Ø© 32 Ø¨Øª"]})]})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 lg:grid-cols-3 gap-3 lg:gap-4 items-start lg:items-end",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ø±Ø§Ø¨Ø· Ù…Ø¨Ø§Ø´Ø± Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± Ù†Ø³Ø®Ø© 32 Ø¨Øª (EXE/ZIP)"}),e.jsx("input",{type:"url",value:ss,onChange:s=>_s(s.target.value),placeholder:"https://example.com/cashy-setup-ia32.exe",className:"w-full p-2 border border-gray-300 rounded-md"})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs("button",{onClick:async()=>{var s;try{const{setAppDownloadLinks:t}=await P(async()=>{const{setAppDownloadLinks:a}=await import("./appDownloadService-DyjNta3x.js");return{setAppDownloadLinks:a}},__vite__mapDeps([2,0,1]),import.meta.url);await t({pc32Url:ss||void 0,pc32Version:ye||void 0},((s=i==null?void 0:i.currentUser)==null?void 0:s.uid)||"admin"),re(a=>({...a,pc32Url:ss||void 0,pc32Version:ye||(a==null?void 0:a.pc32Version)})),alert("ØªÙ… Ø­ÙØ¸ Ø±Ø§Ø¨Ø· 32 Ø¨Øª Ø¨Ù†Ø¬Ø§Ø­")}catch(t){console.error("Failed to save pc32 link",t),alert(t!=null&&t.message?`ÙØ´Ù„ Ø­ÙØ¸ Ø§Ù„Ø±Ø§Ø¨Ø·: ${t.message}`:"ÙØ´Ù„ Ø­ÙØ¸ Ø§Ù„Ø±Ø§Ø¨Ø·")}},className:"flex items-center gap-2 bg-sky-600 text-white px-4 py-2 rounded-lg hover:bg-sky-700",children:[e.jsx(xe,{className:"w-4 h-4"})," Ø­ÙØ¸ Ø§Ù„Ø±Ø§Ø¨Ø·"]})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 sm:p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(qa,{className:"w-5 h-5 text-indigo-600"})," Ø¥Ø¯Ø§Ø±Ø© ØªØ­Ø¯ÙŠØ«Ø§Øª Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±"]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Ø¥ØµØ¯Ø§Ø± Ù…ÙˆØ­Ù‘Ø¯ Ù…Ø¹ Ø±ÙˆØ§Ø¨Ø· 64-Ø¨Øª Ùˆ32-Ø¨ØªØŒ ÙˆÙ…Ù„Ø§Ø­Ø¸Ø§Øª ÙˆØ®ÙŠØ§Ø± Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø¬Ø¨Ø§Ø±ÙŠ."})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ø±Ù‚Ù… Ø§Ù„Ø¥ØµØ¯Ø§Ø±"}),e.jsx("input",{type:"text",value:ot,onChange:s=>tt(s.target.value),className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Ù…Ø«Ø§Ù„: 1.4.0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ø±Ø§Ø¨Ø· Ù†Ø³Ø®Ø© 64-Ø¨Øª"}),e.jsx("input",{type:"text",value:mt,onChange:s=>at(s.target.value),className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ø«Ø¨Ù‘Øª x64"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ø±Ø§Ø¨Ø· Ù†Ø³Ø®Ø© 32-Ø¨Øª"}),e.jsx("input",{type:"text",value:xt,onChange:s=>rt(s.target.value),className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ø«Ø¨Ù‘Øª ia32"})]}),e.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„ØªØ­Ø¯ÙŠØ«"}),e.jsx("textarea",{value:ut,onChange:s=>or(s.target.value),className:"w-full p-2 border border-gray-300 rounded-md",rows:4,placeholder:"Ù†Øµ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª"})]}),e.jsx("div",{children:e.jsxs("label",{className:"inline-flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx("input",{type:"checkbox",checked:ht,onChange:s=>mr(s.target.checked)}),"ØªØ­Ø¯ÙŠØ« Ø¥Ø¬Ø¨Ø§Ø±ÙŠ (Ù„Ù† ÙŠÙØªØ­ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¥Ù„Ø§ Ø¨Ø¹Ø¯ Ø§Ù„ØªØ­Ø¯ÙŠØ«)"]})})]}),e.jsxs("div",{className:"mt-4 flex items-center gap-3",children:[e.jsx("button",{onClick:xr,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-60",disabled:Pe==="publishing",children:"Ù†Ø´Ø± Ø§Ù„ØªØ­Ø¯ÙŠØ«"}),Pe==="publishing"&&e.jsx("span",{className:"text-sm text-gray-600",children:"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù†Ø´Ø±..."}),Pe==="done"&&e.jsx("span",{className:"text-sm text-green-600",children:"ØªÙ… Ø§Ù„Ù†Ø´Ø± Ø¨Ù†Ø¬Ø§Ø­"}),Pe==="error"&&e.jsx("span",{className:"text-sm text-red-600",children:"ÙØ´Ù„ Ø§Ù„Ù†Ø´Ø±"})]})]})]}),x==="branches"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Ø·Ù„Ø¨Ø§Øª Ø¨Ø§Ù‚Ø§Øª Ø§Ù„ÙØ±ÙˆØ¹ (Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„ØªÙØ¹ÙŠÙ„)"}),e.jsx("p",{className:"text-2xl font-bold text-gray-800",children:m.filter(s=>{var t,a;return((t=s.branchPackage)==null?void 0:t.status)==="pending"||((a=s.branchPackage)==null?void 0:a.requested)}).length})]}),e.jsx(et,{className:"w-8 h-8 text-purple-600"})]})}),e.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Ø¨Ø§Ù‚Ø§Øª Ø§Ù„ÙØ±ÙˆØ¹ Ø§Ù„Ù…ÙØ¹Ù‘Ù„Ø©"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:m.filter(s=>{var t;return((t=s.branchPackage)==null?void 0:t.status)==="active"}).length})]}),e.jsx(ms,{className:"w-8 h-8 text-green-600"})]})}),e.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø­Ø³Ø§Ø¨Ø§Øª Ø¨Ø§Ù‚Ø§Øª Ø§Ù„ÙØ±ÙˆØ¹"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:m.filter(s=>{var t,a;return((t=s.branchPackage)==null?void 0:t.requested)||((a=s.branchPackage)==null?void 0:a.status)}).length})]}),e.jsx(ds,{className:"w-8 h-8 text-blue-600"})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Ù‚Ø³Ù… Ø¨Ø§Ù‚Ø§Øª Ø§Ù„ÙØ±ÙˆØ¹"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ue,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø­Ø³Ø§Ø¨ Ø¨Ø§Ù‚Ø§Øª Ø§Ù„ÙØ±ÙˆØ¹...",value:I,onChange:s=>ce(s.target.value),className:"pr-10 pl-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm"})]})]}),I&&e.jsxs("div",{className:"text-sm text-gray-600",children:["Ø¹Ø±Ø¶ ",M.filter(s=>{var t,a;return((t=s.branchPackage)==null?void 0:t.requested)||((a=s.branchPackage)==null?void 0:a.status)}).length," Ù…Ù† Ø£ØµÙ„ ",m.filter(s=>{var t,a;return((t=s.branchPackage)==null?void 0:t.requested)||((a=s.branchPackage)==null?void 0:a.status)}).length," Ø­Ø³Ø§Ø¨",I&&e.jsx("button",{onClick:()=>ce(""),className:"mr-2 text-purple-600 hover:text-purple-800 underline",children:"Ù…Ø³Ø­ Ø§Ù„Ø¨Ø­Ø«"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:O?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-500",children:"Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª..."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-4",children:(I?M:m).filter(s=>{var t,a;return((t=s.branchPackage)==null?void 0:t.requested)||((a=s.branchPackage)==null?void 0:a.status)}).map(s=>{var a,l,d;const t=((a=s.branchPackage)==null?void 0:a.status)||((l=s.branchPackage)!=null&&l.requested?"pending":"none");return e.jsxs("div",{className:"border rounded-lg p-4 bg-white shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-purple-600 font-semibold",children:Ae(s)})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-800",children:de(s)}),e.jsx("p",{className:"text-sm text-gray-500",children:s.email}),((d=s.branchPackage)==null?void 0:d.requestedAt)&&e.jsxs("p",{className:"text-xs text-gray-400",children:["ØªØ§Ø±ÙŠØ® Ø§Ù„Ø·Ù„Ø¨: ",ls(s.branchPackage.requestedAt)]})]})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${t==="active"?"bg-green-100 text-green-700":t==="pending"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-600"}`,children:t==="active"?"Ù…ÙØ¹Ù‘Ù„":t==="pending"?"Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„ØªÙØ¹ÙŠÙ„":"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"}),t==="active"&&e.jsx("button",{title:"Ø¥Ù„ØºØ§Ø¡ Ø¨Ø§Ù‚Ø© Ø§Ù„ÙØ±ÙˆØ¹",onClick:async()=>{var N;if(window.confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ù„ØºØ§Ø¡ ØªÙØ¹ÙŠÙ„ Ø¨Ø§Ù‚Ø© Ø§Ù„ÙØ±ÙˆØ¹ Ù„Ù‡Ø°Ø§ Ø§Ù„Ø­Ø³Ø§Ø¨ØŸ"))try{const{doc:_,updateDoc:L}=await P(async()=>{const{doc:R,updateDoc:G}=await import("./index-CRTRtp5n.js").then(oe=>oe.bf);return{doc:R,updateDoc:G}},__vite__mapDeps([0,1]),import.meta.url),{db:V}=await P(async()=>{const{db:R}=await import("./index-CRTRtp5n.js").then(G=>G.bg);return{db:R}},__vite__mapDeps([0,1]),import.meta.url),q=((N=i==null?void 0:i.currentUser)==null?void 0:N.uid)||"admin-user-id";await L(_(V,"users",s.id),{branchPackage:{requested:!0,status:"canceled",canceledAt:new Date,canceledBy:q},updatedAt:new Date}),alert("ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø¨Ø§Ù‚Ø© Ø§Ù„ÙØ±ÙˆØ¹ Ù„Ù‡Ø°Ø§ Ø§Ù„Ø­Ø³Ø§Ø¨")}catch(_){console.error("ÙØ´Ù„ ÙÙŠ Ø¥Ù„ØºØ§Ø¡ Ø¨Ø§Ù‚Ø© Ø§Ù„ÙØ±ÙˆØ¹:",_),alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¥Ù„ØºØ§Ø¡ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰")}},className:"p-1 rounded-md text-red-600 hover:bg-red-50",children:e.jsx($a,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex items-center space-x-2 space-x-reverse",children:t!=="active"&&e.jsx("button",{onClick:async()=>{var c;try{const{doc:N,updateDoc:_,setDoc:L}=await P(async()=>{const{doc:R,updateDoc:G,setDoc:oe}=await import("./index-CRTRtp5n.js").then(Qt=>Qt.bf);return{doc:R,updateDoc:G,setDoc:oe}},__vite__mapDeps([0,1]),import.meta.url),{db:V}=await P(async()=>{const{db:R}=await import("./index-CRTRtp5n.js").then(G=>G.bg);return{db:R}},__vite__mapDeps([0,1]),import.meta.url),q=((c=i==null?void 0:i.currentUser)==null?void 0:c.uid)||"admin-user-id";await _(N(V,"users",s.id),{branchPackage:{requested:!0,status:"active",activatedAt:new Date,activatedBy:q},isActive:!0,approved:!0,role:"merchant",updatedAt:new Date}),await L(N(V,"profiles",s.id),{role:"merchant",approved:!0,updatedAt:new Date},{merge:!0}),alert("ØªÙ… ØªÙØ¹ÙŠÙ„ Ø¨Ø§Ù‚Ø© Ø§Ù„ÙØ±ÙˆØ¹ Ù„Ù‡Ø°Ø§ Ø§Ù„Ø­Ø³Ø§Ø¨")}catch(N){console.error("ÙØ´Ù„ ÙÙŠ ØªÙØ¹ÙŠÙ„ Ø¨Ø§Ù‚Ø© Ø§Ù„ÙØ±ÙˆØ¹:",N),alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªÙØ¹ÙŠÙ„ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰")}},className:"px-3 py-1 text-sm rounded-md bg-purple-600 text-white hover:bg-purple-700",children:"ØªÙØ¹ÙŠÙ„ Ø¨Ø§Ù‚Ø© Ø§Ù„ÙØ±ÙˆØ¹"})})]})]},s.id)})})})]})]}),x==="subscriptions"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª Ø§Ù„Ù†Ø´Ø·Ø©"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:m.filter(s=>{var t;return(t=s.subscription)==null?void 0:t.isActive}).length})]}),e.jsx(ms,{className:"w-8 h-8 text-green-600"})]})}),e.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"ØªÙ†ØªÙ‡ÙŠ Ø®Ù„Ø§Ù„ 7 Ø£ÙŠØ§Ù…"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:m.filter(s=>{var c,N;if(!((c=s.subscription)!=null&&c.endDate)||!((N=s.subscription)!=null&&N.isActive))return!1;const t=s.subscription.endDate.toDate?s.subscription.endDate.toDate():new Date(s.subscription.endDate),a=new Date,l=t.getTime()-a.getTime(),d=Math.ceil(l/(1e3*60*60*24));return d<=7&&d>0}).length})]}),e.jsx($e,{className:"w-8 h-8 text-orange-600"})]})}),e.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Ù…Ù†ØªÙ‡ÙŠØ© Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:m.filter(s=>{var a;return(a=s.subscription)!=null&&a.endDate?(s.subscription.endDate.toDate?s.subscription.endDate.toDate():new Date(s.subscription.endDate))<new Date:!1}).length})]}),e.jsx(pe,{className:"w-8 h-8 text-red-600"})]})}),e.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Ø§Ø´ØªØ±Ø§ÙƒØ§Øª Ù…Ø¯Ù‰ Ø§Ù„Ø­ÙŠØ§Ø©"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:m.filter(s=>{var t;return((t=s.subscription)==null?void 0:t.planType)===y.LIFETIME}).length})]}),e.jsx(Me,{className:"w-8 h-8 text-yellow-600"})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Ø¬Ø¯ÙˆÙ„ Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª Ù…Ø¹ ØªÙˆØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© ÙˆØ§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡"})]}),e.jsx("div",{className:"overflow-x-auto",children:O?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-500",children:"Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª..."})]}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ù†ÙˆØ¹ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ø§Ù„Ø­Ø§Ù„Ø©"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ø§Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m.filter(s=>{var t;return(t=s.subscription)==null?void 0:t.planType}).sort((s,t)=>{var d,c;if(!((d=s.subscription)!=null&&d.endDate)||!((c=t.subscription)!=null&&c.endDate))return 0;const a=s.subscription.endDate.toDate?s.subscription.endDate.toDate():new Date(s.subscription.endDate),l=t.subscription.endDate.toDate?t.subscription.endDate.toDate():new Date(t.subscription.endDate);return a.getTime()-l.getTime()}).map(s=>{const t=s.subscription;if(!t)return null;const a=t.startDate?t.startDate.toDate?t.startDate.toDate():new Date(t.startDate):null,l=t.endDate?t.endDate.toDate?t.endDate.toDate():new Date(t.endDate):null;let d=null,c="ØºÙŠØ± Ù…Ø­Ø¯Ø¯";if(t.planType===y.LIFETIME)c="Ù…Ø¯Ù‰ Ø§Ù„Ø­ÙŠØ§Ø©";else if(l){const N=new Date,_=l.getTime()-N.getTime();d=Math.ceil(_/(1e3*60*60*24)),d<0?c="Ù…Ù†ØªÙ‡ÙŠ":d<=7?c="ÙŠÙ†ØªÙ‡ÙŠ Ù‚Ø±ÙŠØ¨Ø§Ù‹":c="Ù†Ø´Ø·"}return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-600 to-blue-600 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-white font-medium text-sm",children:Ae(s)})}),e.jsxs("div",{className:"mr-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:de(s)}),e.jsx("div",{className:"text-sm text-gray-500",children:s.email})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[t.planType===y.LIFETIME&&e.jsx(Me,{className:"w-4 h-4 text-yellow-500 ml-2"}),t.planType===y.YEARLY&&e.jsx(ue,{className:"w-4 h-4 text-blue-500 ml-2"}),t.planType===y.QUARTERLY&&e.jsx(J,{className:"w-4 h-4 text-purple-500 ml-2"}),t.planType===y.MONTHLY&&e.jsx(gs,{className:"w-4 h-4 text-green-500 ml-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:ra(t.planType)})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:a?a.toLocaleDateString("ar-EG"):"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.planType===y.LIFETIME?"Ù…Ø¯Ù‰ Ø§Ù„Ø­ÙŠØ§Ø©":l?l.toLocaleDateString("ar-EG"):"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${c==="Ù†Ø´Ø·"?"bg-green-100 text-green-800":c==="ÙŠÙ†ØªÙ‡ÙŠ Ù‚Ø±ÙŠØ¨Ø§Ù‹"?"bg-orange-100 text-orange-800":c==="Ù…Ù†ØªÙ‡ÙŠ"?"bg-red-100 text-red-800":c==="Ù…Ø¯Ù‰ Ø§Ù„Ø­ÙŠØ§Ø©"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:c})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.planType===y.LIFETIME?"âˆž":d!==null?d<0?"Ù…Ù†ØªÙ‡ÙŠ":`${d} ÙŠÙˆÙ…`:"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"})]},s.id)}).filter(Boolean)})]})})]})]}),x==="content"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Ø¥Ø¯Ø§Ø±Ø© Ù…Ø­ØªÙˆÙ‰ Ø®Ø·Ø· Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ"}),ae&&ae.lastUpdated&&e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«: ",new Date(ae.lastUpdated).toLocaleString("ar-SA"),ae.updatedBy&&` Ø¨ÙˆØ§Ø³Ø·Ø©: ${ae.updatedBy}`]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>{bs(!0),K({name:"Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ø±Ø¨Ø¹ Ø³Ù†ÙˆÙŠØ©",price:"250 Ø¬Ù†ÙŠÙ‡",period:"ÙƒÙ„ 3 Ø£Ø´Ù‡Ø±",description:"Ø­Ù„ ÙˆØ³Ø· Ø¨ÙŠÙ† Ø§Ù„Ø´Ù‡Ø±ÙŠØ© ÙˆØ§Ù„Ø³Ù†ÙˆÙŠØ©",features:["Ø¥Ø¯Ø§Ø±Ø© Ù…Ø­Ø§ÙØ¸ Ù…ØªØ¹Ø¯Ø¯Ø©","ØªÙ‚Ø§Ø±ÙŠØ± Ø±Ø¨Ø¹ Ø³Ù†ÙˆÙŠØ©"]}),ps("quarterly"),ee(!0)},className:"flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:[e.jsx(Qs,{className:"w-4 h-4"}),"Ø¥Ø¶Ø§ÙØ© Ø¨Ø§Ù‚Ø© Ø¬Ø¯ÙŠØ¯Ø©"]}),e.jsxs("button",{onClick:Rt,disabled:T,className:"flex items-center gap-2 bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 disabled:opacity-50",children:[e.jsx(xe,{className:"w-4 h-4"}),T?"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸...":"Ø­ÙØ¸ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:Object.entries(U).map(([s,t])=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"font-semibold text-gray-800 flex items-center gap-2",children:[s==="monthly"&&e.jsx(gs,{className:"w-4 h-4 text-green-500"}),s==="quarterly"&&e.jsx(J,{className:"w-4 h-4 text-purple-500"}),s==="yearly"&&e.jsx(ue,{className:"w-4 h-4 text-blue-500"}),s==="lifetime"&&e.jsx(Me,{className:"w-4 h-4 text-yellow-500"}),t.name]}),e.jsx("button",{onClick:()=>{A(v===s?null:s),bs(!1),ps(s),K({...t,features:[...t.features||[]]}),ee(!0)},className:"text-purple-600 hover:text-purple-800",children:e.jsx(Aa,{className:"w-4 h-4"})})]}),v===s?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ø§Ø³Ù… Ø§Ù„Ø¨Ø§Ù‚Ø©"}),e.jsx("input",{type:"text",value:t.name,onChange:a=>_e(s,"name",a.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ø§Ù„Ø³Ø¹Ø±"}),e.jsx("input",{type:"text",value:t.price,onChange:a=>_e(s,"price",a.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ø§Ù„Ù…Ø¯Ø©"}),e.jsx("input",{type:"text",value:t.period,onChange:a=>_e(s,"period",a.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ø§Ù„ÙˆØµÙ"}),e.jsx("textarea",{value:t.description,onChange:a=>_e(s,"description",a.target.value),rows:3,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª"}),e.jsx("button",{onClick:()=>Mt(s),className:"text-sm text-purple-600 hover:text-purple-800",children:"+ Ø¥Ø¶Ø§ÙØ© Ù…ÙŠØ²Ø©"})]}),e.jsx("div",{className:"space-y-2",children:t.features.map((a,l)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:a,onChange:d=>Ot(s,l,d.target.value),className:"flex-1 p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm"}),e.jsx("button",{onClick:()=>$t(s,l),className:"text-red-500 hover:text-red-700",children:e.jsx(he,{className:"w-4 h-4"})})]},l))})]})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:t.price}),e.jsx("div",{className:"text-sm text-gray-600",children:t.period}),e.jsx("div",{className:"text-sm text-gray-700",children:t.description}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª:"}),t.features.map((a,l)=>e.jsxs("div",{className:"text-xs text-gray-600 flex items-center gap-1",children:[e.jsx(ms,{className:"w-3 h-3 text-green-500"}),a]},l))]})]})]},s))})]}),X&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",children:e.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-xl shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"text-lg font-semibold",children:gt?"Ø¥Ø¶Ø§ÙØ© Ø¨Ø§Ù‚Ø© Ø¬Ø¯ÙŠØ¯Ø©":`ØªØ¹Ø¯ÙŠÙ„ ${se==="monthly"?"Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ø´Ù‡Ø±ÙŠØ©":se==="yearly"?"Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ø³Ù†ÙˆÙŠØ©":se==="lifetime"?"Ø¨Ø§Ù‚Ø© Ù…Ø¯Ù‰ Ø§Ù„Ø­ÙŠØ§Ø©":"Ø¨Ø§Ù‚Ø© Ø±Ø¨Ø¹ Ø³Ù†ÙˆÙŠØ©"}`}),e.jsx("button",{onClick:()=>ee(!1),className:"text-gray-500 hover:text-gray-700",children:e.jsx(he,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ø§Ø³Ù… Ø§Ù„Ø¨Ø§Ù‚Ø©"}),e.jsx("input",{type:"text",value:te.name,onChange:s=>K(t=>({...t,name:s.target.value})),className:"w-full p-2 border rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ø§Ù„Ø³Ø¹Ø±"}),e.jsx("input",{type:"text",value:te.price,onChange:s=>K(t=>({...t,price:s.target.value})),className:"w-full p-2 border rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ø§Ù„Ù…Ø¯Ø©"}),e.jsx("input",{type:"text",value:te.period,onChange:s=>K(t=>({...t,period:s.target.value})),className:"w-full p-2 border rounded-md"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ø§Ù„ÙˆØµÙ"}),e.jsx("textarea",{rows:3,value:te.description,onChange:s=>K(t=>({...t,description:s.target.value})),className:"w-full p-2 border rounded-md"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª"}),e.jsx("button",{onClick:()=>K(s=>({...s,features:[...s.features||[],""]})),className:"text-sm text-purple-600 hover:text-purple-800",children:"+ Ø¥Ø¶Ø§ÙØ© Ù…ÙŠØ²Ø©"})]}),e.jsx("div",{className:"space-y-2",children:(te.features||[]).map((s,t)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:s,onChange:a=>{const l=a.target.value;K(d=>{const c=[...d.features||[]];return c[t]=l,{...d,features:c}})},className:"flex-1 p-2 border rounded-md text-sm"}),e.jsx("button",{onClick:()=>{K(a=>{const l=[...a.features||[]];return l.splice(t,1),{...a,features:l}})},className:"text-red-500 hover:text-red-700",children:e.jsx(he,{className:"w-4 h-4"})})]},t))})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-end gap-3",children:[e.jsx("button",{onClick:()=>ee(!1),className:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200",children:"Ø¥Ù„ØºØ§Ø¡"}),e.jsx("button",{onClick:()=>{se&&(F(s=>({...s,[se]:{...te}})),ee(!1))},className:"px-4 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700",children:"Ø­ÙØ¸ Ø¯Ø§Ø®Ù„ Ø§Ù„ØµÙØ­Ø©"}),e.jsx("button",{onClick:async()=>{var s;if(se)try{const t=((s=i==null?void 0:i.currentUser)==null?void 0:s.uid)||"admin";await pa(se,te,t),F(a=>({...a,[se]:{...te}})),ee(!1)}catch(t){console.error("Immediate save failed",t),alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø­ÙØ¸ Ø§Ù„ÙÙˆØ±ÙŠ. Ø­Ø§ÙˆÙ„ Ù„Ø§Ø­Ù‚Ù‹Ø§ Ø£Ùˆ Ø§Ø³ØªØ®Ø¯Ù… Ø­ÙØ¸ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª.")}},className:"px-4 py-2 rounded-md bg-purple-600 text-white hover:bg-purple-700",children:"Ø­ÙØ¸ ÙÙˆØ±ÙŠ"})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Ø³ÙŠØ¸Ù‡Ø± Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± ÙƒÙ…ÙˆØ¯Ø§Ù„ ØµØºÙŠØ± ÙÙŠ Ù…Ù†ØªØµÙ Ø§Ù„Ø´Ø§Ø´Ø© Ù…Ø¹ Ø¶Ø¨Ø§Ø¨ Ø®ÙÙŠÙ."})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±"}),e.jsx("input",{type:"text",value:ts,onChange:s=>Is(s.target.value),placeholder:"Ø£Ø¯Ø®Ù„ Ø¹Ù†ÙˆØ§Ù†Ù‹Ø§ Ù‚ØµÙŠØ±Ù‹Ø§ ÙˆØ¬Ø°Ø§Ø¨Ù‹Ø§",className:"w-full rounded-md border-gray-300 focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ù†Øµ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±"}),e.jsx("textarea",{value:as,onChange:s=>Us(s.target.value),placeholder:"Ø§ÙƒØªØ¨ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„Ø°ÙŠ Ø³ÙŠØ¸Ù‡Ø± Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†",rows:4,className:"w-full rounded-md border-gray-300 focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ø±Ø§Ø¨Ø· Ø§Ø®ØªÙŠØ§Ø±ÙŠ"}),e.jsx("input",{type:"text",value:Ls,onChange:s=>Ps(s.target.value),placeholder:"Ù…Ø«Ø§Ù„: /user/dashboard Ø£Ùˆ https://example.com",className:"w-full rounded-md border-gray-300 focus:border-blue-500 focus:ring-blue-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø±Ø§Ø¨Ø· Ø®Ø§Ø±Ø¬ÙŠÙ‹Ø§ Ø³ÙŠÙØªØ­ ÙÙŠ Ù†Ø§ÙØ°Ø© Ø¬Ø¯ÙŠØ¯Ø©ØŒ ÙˆØ¥Ø°Ø§ ÙƒØ§Ù† Ø¯Ø§Ø®Ù„ÙŠÙ‹Ø§ Ø³ÙŠØªÙ… Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…ÙˆÙ‚Ø¹."})]}),e.jsx("div",{className:"flex items-center justify-end gap-3",children:e.jsx("button",{onClick:Ut,disabled:Vs,className:"px-4 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:Vs?"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...":"Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø±"})})]})]})]}),x==="branding"&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø´Ø¹Ø§Ø±"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"ØµÙˆØ±Ø© Ø§Ù„Ø´Ø¹Ø§Ø± Ø§Ù„Ø­Ø§Ù„ÙŠØ©"}),e.jsxs("div",{className:"flex items-center gap-4",children:[js?e.jsx("img",{src:js,alt:"Brand Logo",className:"h-16 w-16 object-contain rounded-lg border"}):e.jsx("div",{className:"h-16 w-16 rounded-lg border flex items-center justify-center text-gray-400",children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø´Ø¹Ø§Ø±"}),e.jsx("button",{onClick:()=>{Ee(""),De("")},className:"px-3 py-2 text-sm rounded-lg bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600",children:"Ù…Ø³Ø­ Ø§Ù„Ø´Ø¹Ø§Ø±"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Ø±ÙØ¹ Ø´Ø¹Ø§Ø± Ø¬Ø¯ÙŠØ¯"}),e.jsx("input",{type:"file",accept:"image/*",onChange:s=>{var t;return wt(((t=s.target.files)==null?void 0:t[0])||null)},className:"block w-full text-sm"}),e.jsxs("button",{disabled:ys||!Ye,onClick:async()=>{if(Ye){Ns(!0);try{const s=await ya(Ye);Ee(s),De("")}catch(s){console.error("Upload logo error",s)}finally{Ns(!1)}}},className:"inline-flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-lg hover:opacity-90 disabled:opacity-50",children:[e.jsx(Le,{className:"w-4 h-4"}),ys?"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø±ÙØ¹...":"Ø±ÙØ¹ Ø§Ù„Ø´Ø¹Ø§Ø±"]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø© Ø®Ø§Ø±Ø¬ÙŠ"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",placeholder:"https://example.com/logo.png",value:ze,onChange:s=>De(s.target.value),className:"w-full rounded-lg border px-3 py-2 bg-transparent"}),e.jsxs("button",{onClick:async()=>{try{await Na({logoUrl:ze.trim()}),Ee(ze.trim())}catch(s){console.error("Save external logo url error",s)}},className:"inline-flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-lg hover:opacity-90",children:[e.jsx(xe,{className:"w-4 h-4"}),"Ø­ÙØ¸ Ø§Ù„Ø±Ø§Ø¨Ø·"]})]})]})]}),x==="trials"&&e.jsxs("div",{className:"space-y-6",children:[console.log("ðŸ” Trials tab rendering - users data:",m),console.log("ðŸ” Users count:",(m==null?void 0:m.length)||0),console.log("ðŸ” Users on trial:",((Ys=m==null?void 0:m.filter(s=>s.isOnFreeTrial))==null?void 0:Ys.length)||0),O&&e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†..."})]})}),j&&!O&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[e.jsx($e,{className:"w-12 h-12 text-red-500 mx-auto mb-3"}),e.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª"}),e.jsx("p",{className:"text-red-600 mb-4",children:j}),e.jsx("p",{className:"text-sm text-red-500",children:"ØªØ£ÙƒØ¯ Ù…Ù† Ø§ØªØµØ§Ù„ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª ÙˆØ¥Ø¹Ø¯Ø§Ø¯Ø§Øª Firebase"})]}),!O&&!j&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ÙÙŠ Ø§Ù„ØªØ¬Ø±Ø¨Ø©"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:m.filter(s=>s.isOnFreeTrial).length})]}),e.jsx(ue,{className:"w-8 h-8 text-blue-600"})]})}),e.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Ø§Ù„ØªØ¬Ø§Ø±Ø¨ Ø§Ù„Ù…Ù†ØªÙ‡ÙŠØ©"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:m.filter(s=>s.hasUsedFreeTrial&&!s.isOnFreeTrial).length})]}),e.jsx(pe,{className:"w-8 h-8 text-red-600"})]})}),e.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‡Ù„ÙŠÙ†"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:m.filter(s=>!s.hasUsedFreeTrial&&!s.isOnFreeTrial&&!s.approved).length})]}),e.jsx(st,{className:"w-8 h-8 text-green-600"})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ø¯Ø© Ø§Ù„ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ©"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"ÙŠØªÙ… ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØªØºÙŠÙŠØ± ÙÙˆØ±ÙŠØ§Ù‹ Ø¹Ù„Ù‰ Ø£ÙŠ ØªÙØ¹ÙŠÙ„ Ø¬Ø¯ÙŠØ¯."})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ø§Ù„Ù…Ø¯Ø© Ø¨Ø§Ù„Ø³Ø§Ø¹Ø§Øª"}),e.jsx("input",{type:"number",min:1,max:336,value:$s,onChange:s=>Bs(s.target.value),className:"w-full px-4 py-2 rounded-md border border-gray-300 focus:border-blue-500 focus:ring-blue-500 text-sm",placeholder:"Ø§ÙƒØªØ¨ Ø¹Ø¯Ø¯ Ø§Ù„Ø³Ø§Ø¹Ø§Øª"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Ø§Ù„Ù…Ø¯Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©: ",B," ",B>=3&&B<=10?"Ø³Ø§Ø¹Ø§Øª":B===2?"Ø³Ø§Ø¹ØªÙŠÙ†":"Ø³Ø§Ø¹Ø©"]})]}),e.jsx("div",{className:"flex items-center md:justify-end",children:e.jsx("button",{onClick:Ht,disabled:qs,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm font-medium disabled:opacity-50",children:qs?"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ø¯ÙŠØ«...":"ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø¯Ø©"})})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‡Ù„ÙŠÙ† Ù„Ù„ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ©"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ø°ÙŠÙ† Ù„Ù… ÙŠØ³ØªØ®Ø¯Ù…ÙˆØ§ Ø§Ù„ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ© Ù…Ù† Ù‚Ø¨Ù„"}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:Te,onChange:s=>Ms(s.target.value),placeholder:"Ø§Ø¨Ø­Ø« Ø¨Ø§Ù„Ø§Ø³Ù… Ø£Ùˆ Ø§Ù„Ø¨Ø±ÙŠØ¯ ÙÙŠ Ø§Ù„Ù…Ø¤Ù‡Ù„ÙŠÙ† Ù„Ù„ØªØ¬Ø±Ø¨Ø©",className:"w-full px-4 py-2 pl-10 rounded-md border border-gray-300 focus:border-blue-500 focus:ring-blue-500 text-sm"}),e.jsx(Ue,{className:"w-4 h-4 text-gray-400 absolute left-3 top-2.5"})]})})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[m.filter(s=>!s.hasUsedFreeTrial&&!s.isOnFreeTrial&&!s.approved).filter(s=>{const t=Te.trim().toLowerCase();if(!t)return!0;const a=de(s).toLowerCase(),l=(s.email||"").toLowerCase();return a.includes(t)||l.includes(t)}).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 font-semibold",children:Ae(s)})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-800",children:de(s)}),e.jsx("p",{className:"text-sm text-gray-500",children:s.email}),e.jsxs("p",{className:"text-xs text-gray-400",children:["ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ³Ø¬ÙŠÙ„: ",ls(s.createdAt)]})]})]}),e.jsx("div",{className:"flex items-center space-x-3 space-x-reverse",children:e.jsx("button",{onClick:()=>zt(s.id),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:`ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªØ¬Ø±Ø¨Ø© ${B} ${B>=3&&B<=10?"Ø³Ø§Ø¹Ø§Øª":B===2?"Ø³Ø§Ø¹ØªÙŠÙ†":"Ø³Ø§Ø¹Ø©"}`})})]},s.id)),m.filter(s=>!s.hasUsedFreeTrial&&!s.isOnFreeTrial&&!s.approved).length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ue,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ù…Ø¤Ù‡Ù„ÙŠÙ† Ù„Ù„ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ© Ø­Ø§Ù„ÙŠØ§Ù‹"})]})]})})]}),m.filter(s=>s.isOnFreeTrial).length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ÙÙŠ Ø§Ù„ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ©"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ø°ÙŠÙ† ÙŠØ³ØªØ®Ø¯Ù…ÙˆÙ† Ø§Ù„ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ© Ø­Ø§Ù„ÙŠØ§Ù‹"}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:Te,onChange:s=>Ms(s.target.value),placeholder:"Ø§Ø¨Ø­Ø« Ø¨Ø§Ù„Ø§Ø³Ù… Ø£Ùˆ Ø§Ù„Ø¨Ø±ÙŠØ¯ ÙÙŠ Ø§Ù„ØªØ¬Ø§Ø±Ø¨ Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ©",className:"w-full px-4 py-2 pl-10 rounded-md border border-gray-300 focus:border-blue-500 focus:ring-blue-500 text-sm"}),e.jsx(Ue,{className:"w-4 h-4 text-gray-400 absolute left-3 top-2.5"})]})})]}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"space-y-4",children:m.filter(s=>s.isOnFreeTrial).filter(s=>{const t=Te.trim().toLowerCase();if(!t)return!0;const a=de(s).toLowerCase(),l=(s.email||"").toLowerCase();return a.includes(t)||l.includes(t)}).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border border-blue-200 rounded-lg bg-blue-50",children:[e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 font-semibold",children:Ae(s)})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-800",children:de(s)}),e.jsx("p",{className:"text-sm text-gray-500",children:s.email}),e.jsxs("p",{className:"text-xs text-blue-600",children:["ØªÙ†ØªÙ‡ÙŠ ÙÙŠ: ",s.freeTrialEndDate?ls(s.freeTrialEndDate):"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:"Ù†Ø´Ø·"}),e.jsx("button",{onClick:()=>Yt(s.id),className:"px-3 py-1 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-xs",children:"Ø¶Ø¨Ø· Ù†Ù‡Ø§ÙŠØ© Ø§Ù„ØªØ¬Ø±Ø¨Ø©"})]})]},s.id))})})]})]})]}),x==="whatsapp"&&e.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(Oe,{className:"w-6 h-6 text-green-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨"})]}),e.jsx(Qa,{})]}),x==="analytics"&&e.jsxs("div",{className:"bg-white rounded-lg p-8 shadow-sm border border-gray-200 text-center",children:[e.jsx(Ks,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª"}),e.jsx("p",{className:"text-gray-500",children:"Ø³ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ù‚Ø±ÙŠØ¨Ø§Ù‹"})]})]})]}),e.jsx(lr,{isOpen:ft,onClose:()=>C(!1)}),e.jsx(nr,{notification:jt,onClose:qt,soundEnabled:pt.soundAlerts,onToggleSound:Bt})]})},[ot,tt]=r.useState(""),[mt,at]=r.useState(""),[xt,rt]=r.useState(""),[ut,or]=r.useState(""),[ht,mr]=r.useState(!1),[Pe,xs]=r.useState("idle"),xr=async()=>{try{xs("publishing");const n=await Ma(ot.trim(),mt.trim(),xt.trim(),ut.trim(),!!ht);xs("done")}catch{xs("error")}},tl=()=>{const n=xa(),{user:i,loading:b}=ua(),[u,j]=r.useState(!1),[p,o]=r.useState(null),[S,x]=r.useState(!1),[D,C]=r.useState("users"),[H,E]=r.useState(0),[f,h]=r.useState([]),[m,z]=r.useState([]),[M,g]=r.useState(!1),[O,ie]=r.useState(null),[k,T]=r.useState([]),[$,ae]=r.useState({});r.useEffect(()=>{const v=localStorage.getItem("admin_dev_mode")==="true";j(v)},[]),r.useEffect(()=>{if(!u&&!i)return;x(!0),o(null);const v=ge(le(Z,"users")),A=hs(v,U=>{const F=U.docs.map(X=>({id:X.id,...X.data()}));T(F),x(!1),o(null)},U=>{console.error("Error loading users:",U),u?(T([]),x(!1),o(null)):(o("ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†"),x(!1))});return()=>A()},[i,u]),r.useEffect(()=>{if(!u&&!i)return;const v=ge(le(Z,"profiles")),A=hs(v,U=>{const F={};U.forEach(X=>{F[X.id]=X.data()}),ae(F)},U=>{console.error("Error loading profiles:",U)});return()=>A()},[i,u]),r.useEffect(()=>{const v=k.map(A=>{const U=$[A.id]||{},F=typeof U.fullName=="string"?U.fullName:void 0,X=typeof U.phone=="string"?U.phone:void 0,ee=typeof A.displayName=="string"&&A.displayName.trim()?A.displayName:F||A.displayName||void 0;return{...A,displayName:ee,phone:A.phone??X??null}});h(v),z(v)},[k,$]);const ve=v=>{console.log("Notification center:",v)},ke=v=>{console.log("Notification settings:",v)},Y=v=>{console.log("Notifications:",v)},be=v=>{console.log("Editing plan:",v)};r.useEffect(()=>{i&&(async()=>{try{const v=await Ws();ie(v)}catch(v){console.warn("Failed to load last update info:",v),ie(null)}})()},[i]);const I=async()=>{try{return await fa()}catch(v){return console.error("Error loading content:",v),{}}},ce=async v=>{try{g(!0),await ba(v,(i==null?void 0:i.uid)||"admin");const A=await Ws();return ie(A),!0}catch(A){return console.error("Error saving content:",A),!1}finally{g(!1)}};return b?e.jsx(ha,{}):e.jsx(dr,{navigate:n,auth:ga,devMode:u,setDevMode:j,error:p,setError:o,authLoading:b,setAuthLoading:()=>{},activeTab:D,setActiveTab:C,setNotificationCenterOpen:ve,setNotificationSettings:ke,setNotifications:Y,notificationCount:H,setNotificationCount:E,users:f,setUsers:h,filteredUsers:m,setFilteredUsers:z,loading:S,setLoading:x,setEditingPlan:be,isSavingContent:M,setIsSavingContent:g,lastUpdateInfo:O,loadContentFromFirebase:I,saveContentToFirebase:ce})};export{tl as default};
