const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./LandingPage-CIKvzW3p.js","./card-BtLxEpHt.js","./BrandLogo-wUZZK77G.js","./brandingService-DudLvLaH.js","./whatsappService-Dmm9Obgk.js","./appDownloadService-ClkYpJwu.js","./arrow-left-Fua1p-Yt.js","./star-DqYNkH8j.js","./crown-BTUTv64X.js","./download-BY7PuLfb.js","./zap-FiHILDco.js","./shield-Dvikdag6.js","./chart-column-XxwGwmhn.js","./circle-check-big-DNZxnolB.js","./SubscriptionsPage-BadOvkfj.js","./contentService-B3rZcAmB.js","./calendar-oIySzeH5.js","./AuthPage-BGRV0SdE.js","./TopUpPage-CjS2GsI8.js","./select-Cbuw9qY3.js","./Combination-CDaqlTJ_.js","./index-DqU4rmJ0.js","./AdminTopupsPage-jPrQxFz-.js","./AdminNotificationsPage-TjeiE9Xe.js","./label-CYlIvCqy.js","./textarea-B4Hku7fb.js","./link-BwHLtCTU.js","./UserRegisterPage-CISh_ljd.js","./alert-D8852_Vt.js","./wallet-CWEu-Kss.js","./user-plus-v4TLorw2.js","./share-2-a_vgL4Fr.js","./phone-CEsKoYhQ.js","./store-DnHwoCqY.js","./UserAccountSetupPage-Clz0wWBI.js","./DashboardLoginPage-C9h9FuaT.js","./ProtectedDashboard-uHiZc8Cp.js","./badge-DGRSMt6l.js","./MasterPinDialog-DQ3Gc3ql.js","./dialog-DYxeSMlS.js","./circle-alert-Cc12Eez8.js","./dollar-sign-4rPDfXIl.js","./circle-x-B1zu4JIP.js","./ProtectedUserDashboard-CD5wD4hi.js","./broadcastService-W6HQEAKz.js","./MerchantDashboard-CKw5kZpy.js","./dropdown-menu-CTKDy3Fy.js","./index-Cx8Kdq7N.js","./WalletsManagement-Chiq7ttr.js","./progress-Bkw006WH.js","./walletDailyLimitsService-CPKPT3lY.js","./square-pen-DvFxYYEt.js","./PendingApprovalPage-CG6lCA1U.js","./gift-B3WEHP1J.js","./refresh-cw-Cp6_8OTE.js","./AdminLogin-Bd2RsgGC.js","./ProtectedAdminDashboard-DDUEzEiB.js","./NotificationBell-C_-S8-m0.js","./avatars-Dgv5SA6_.js","./switch-DLKHoTfA.js","./separator-C3D4JrYi.js","./copy-CvdvDhAO.js","./users-ZbrnLEQe.js","./AuthTestPage-BH77ZxeW.js","./ProfileSettingsPage-CAYnKGyb.js","./walletSelectionPinService-DYoZjVgj.js","./TransactionsPage-sluj9z7s.js","./MaintenanceDialog-BxIrOiZc.js","./profitService-B0S70xb1.js","./WalletAdditionPage-ZFS9NHTY.js","./ReferralsPage-BB5lVEwf.js","./CPanelPage-DFpIiNY-.js","./CPanelLoginPage-DM2Y5Q26.js"])))=>i.map(i=>d[i]);
var JD=Object.defineProperty;var XE=t=>{throw TypeError(t)};var ZD=(t,e,n)=>e in t?JD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var JE=(t,e,n)=>ZD(t,typeof e!="symbol"?e+"":e,n),Om=(t,e,n)=>e.has(t)||XE("Cannot "+n);var $=(t,e,n)=>(Om(t,e,"read from private field"),n?n.call(t):e.get(t)),De=(t,e,n)=>e.has(t)?XE("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),fe=(t,e,n,r)=>(Om(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Gt=(t,e,n)=>(Om(t,e,"access private method"),n);var Bd=(t,e,n,r)=>({set _(s){fe(t,e,s,n)},get _(){return $(t,e,r)}});function eN(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Fb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ub={exports:{}},hp={},jb={exports:{}},xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ed=Symbol.for("react.element"),tN=Symbol.for("react.portal"),nN=Symbol.for("react.fragment"),rN=Symbol.for("react.strict_mode"),sN=Symbol.for("react.profiler"),iN=Symbol.for("react.provider"),oN=Symbol.for("react.context"),aN=Symbol.for("react.forward_ref"),lN=Symbol.for("react.suspense"),cN=Symbol.for("react.memo"),uN=Symbol.for("react.lazy"),ZE=Symbol.iterator;function dN(t){return t===null||typeof t!="object"?null:(t=ZE&&t[ZE]||t["@@iterator"],typeof t=="function"?t:null)}var Bb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$b=Object.assign,zb={};function Ml(t,e,n){this.props=t,this.context=e,this.refs=zb,this.updater=n||Bb}Ml.prototype.isReactComponent={};Ml.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ml.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function qb(){}qb.prototype=Ml.prototype;function Nv(t,e,n){this.props=t,this.context=e,this.refs=zb,this.updater=n||Bb}var Ov=Nv.prototype=new qb;Ov.constructor=Nv;$b(Ov,Ml.prototype);Ov.isPureReactComponent=!0;var e0=Array.isArray,Hb=Object.prototype.hasOwnProperty,Vv={current:null},Wb={key:!0,ref:!0,__self:!0,__source:!0};function Kb(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Hb.call(e,r)&&!Wb.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:ed,type:t,key:i,ref:o,props:s,_owner:Vv.current}}function hN(t,e){return{$$typeof:ed,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Lv(t){return typeof t=="object"&&t!==null&&t.$$typeof===ed}function fN(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var t0=/\/+/g;function Vm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?fN(""+t.key):e.toString(36)}function Ah(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ed:case tN:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Vm(o,0):r,e0(s)?(n="",t!=null&&(n=t.replace(t0,"$&/")+"/"),Ah(s,e,n,"",function(c){return c})):s!=null&&(Lv(s)&&(s=hN(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(t0,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",e0(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Vm(i,a);o+=Ah(i,e,n,l,s)}else if(l=dN(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Vm(i,a++),o+=Ah(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function $d(t,e,n){if(t==null)return t;var r=[],s=0;return Ah(t,r,"","",function(i){return e.call(n,i,s++)}),r}function pN(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var pn={current:null},xh={transition:null},mN={ReactCurrentDispatcher:pn,ReactCurrentBatchConfig:xh,ReactCurrentOwner:Vv};function Gb(){throw Error("act(...) is not supported in production builds of React.")}xe.Children={map:$d,forEach:function(t,e,n){$d(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return $d(t,function(){e++}),e},toArray:function(t){return $d(t,function(e){return e})||[]},only:function(t){if(!Lv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};xe.Component=Ml;xe.Fragment=nN;xe.Profiler=sN;xe.PureComponent=Nv;xe.StrictMode=rN;xe.Suspense=lN;xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mN;xe.act=Gb;xe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=$b({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Vv.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Hb.call(e,l)&&!Wb.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:ed,type:t.type,key:s,ref:i,props:r,_owner:o}};xe.createContext=function(t){return t={$$typeof:oN,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:iN,_context:t},t.Consumer=t};xe.createElement=Kb;xe.createFactory=function(t){var e=Kb.bind(null,t);return e.type=t,e};xe.createRef=function(){return{current:null}};xe.forwardRef=function(t){return{$$typeof:aN,render:t}};xe.isValidElement=Lv;xe.lazy=function(t){return{$$typeof:uN,_payload:{_status:-1,_result:t},_init:pN}};xe.memo=function(t,e){return{$$typeof:cN,type:t,compare:e===void 0?null:e}};xe.startTransition=function(t){var e=xh.transition;xh.transition={};try{t()}finally{xh.transition=e}};xe.unstable_act=Gb;xe.useCallback=function(t,e){return pn.current.useCallback(t,e)};xe.useContext=function(t){return pn.current.useContext(t)};xe.useDebugValue=function(){};xe.useDeferredValue=function(t){return pn.current.useDeferredValue(t)};xe.useEffect=function(t,e){return pn.current.useEffect(t,e)};xe.useId=function(){return pn.current.useId()};xe.useImperativeHandle=function(t,e,n){return pn.current.useImperativeHandle(t,e,n)};xe.useInsertionEffect=function(t,e){return pn.current.useInsertionEffect(t,e)};xe.useLayoutEffect=function(t,e){return pn.current.useLayoutEffect(t,e)};xe.useMemo=function(t,e){return pn.current.useMemo(t,e)};xe.useReducer=function(t,e,n){return pn.current.useReducer(t,e,n)};xe.useRef=function(t){return pn.current.useRef(t)};xe.useState=function(t){return pn.current.useState(t)};xe.useSyncExternalStore=function(t,e,n){return pn.current.useSyncExternalStore(t,e,n)};xe.useTransition=function(){return pn.current.useTransition()};xe.version="18.3.1";jb.exports=xe;var x=jb.exports;const z=Fb(x),Qb=eN({__proto__:null,default:z},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gN=x,yN=Symbol.for("react.element"),vN=Symbol.for("react.fragment"),_N=Object.prototype.hasOwnProperty,wN=gN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,EN={key:!0,ref:!0,__self:!0,__source:!0};function Yb(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)_N.call(e,r)&&!EN.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:yN,type:t,key:i,ref:o,props:s,_owner:wN.current}}hp.Fragment=vN;hp.jsx=Yb;hp.jsxs=Yb;Ub.exports=hp;var A=Ub.exports,Xb={exports:{}},Wn={},Jb={exports:{}},Zb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,U){var Y=F.length;F.push(U);e:for(;0<Y;){var de=Y-1>>>1,ne=F[de];if(0<s(ne,U))F[de]=U,F[Y]=ne,Y=de;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var U=F[0],Y=F.pop();if(Y!==U){F[0]=Y;e:for(var de=0,ne=F.length,ce=ne>>>1;de<ce;){var le=2*(de+1)-1,we=F[le],Qe=le+1,ae=F[Qe];if(0>s(we,Y))Qe<ne&&0>s(ae,we)?(F[de]=ae,F[Qe]=Y,de=Qe):(F[de]=we,F[le]=Y,de=le);else if(Qe<ne&&0>s(ae,Y))F[de]=ae,F[Qe]=Y,de=Qe;else break e}}return U}function s(F,U){var Y=F.sortIndex-U.sortIndex;return Y!==0?Y:F.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,p=3,f=!1,v=!1,y=!1,E=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(F){for(var U=n(c);U!==null;){if(U.callback===null)r(c);else if(U.startTime<=F)r(c),U.sortIndex=U.expirationTime,e(l,U);else break;U=n(c)}}function D(F){if(y=!1,I(F),!v)if(n(l)!==null)v=!0,ie(O);else{var U=n(c);U!==null&&G(D,U.startTime-F)}}function O(F,U){v=!1,y&&(y=!1,w(T),T=-1),f=!0;var Y=p;try{for(I(U),h=n(l);h!==null&&(!(h.expirationTime>U)||F&&!P());){var de=h.callback;if(typeof de=="function"){h.callback=null,p=h.priorityLevel;var ne=de(h.expirationTime<=U);U=t.unstable_now(),typeof ne=="function"?h.callback=ne:h===n(l)&&r(l),I(U)}else r(l);h=n(l)}if(h!==null)var ce=!0;else{var le=n(c);le!==null&&G(D,le.startTime-U),ce=!1}return ce}finally{h=null,p=Y,f=!1}}var V=!1,S=null,T=-1,b=5,k=-1;function P(){return!(t.unstable_now()-k<b)}function N(){if(S!==null){var F=t.unstable_now();k=F;var U=!0;try{U=S(!0,F)}finally{U?C():(V=!1,S=null)}}else V=!1}var C;if(typeof _=="function")C=function(){_(N)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,Z=q.port2;q.port1.onmessage=N,C=function(){Z.postMessage(null)}}else C=function(){E(N,0)};function ie(F){S=F,V||(V=!0,C())}function G(F,U){T=E(function(){F(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){v||f||(v=!0,ie(O))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(F){switch(p){case 1:case 2:case 3:var U=3;break;default:U=p}var Y=p;p=U;try{return F()}finally{p=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,U){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var Y=p;p=F;try{return U()}finally{p=Y}},t.unstable_scheduleCallback=function(F,U,Y){var de=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?de+Y:de):Y=de,F){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=Y+ne,F={id:d++,callback:U,priorityLevel:F,startTime:Y,expirationTime:ne,sortIndex:-1},Y>de?(F.sortIndex=Y,e(c,F),n(l)===null&&F===n(c)&&(y?(w(T),T=-1):y=!0,G(D,Y-de))):(F.sortIndex=ne,e(l,F),v||f||(v=!0,ie(O))),F},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(F){var U=p;return function(){var Y=p;p=U;try{return F.apply(this,arguments)}finally{p=Y}}}})(Zb);Jb.exports=Zb;var TN=Jb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IN=x,qn=TN;function W(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var eA=new Set,du={};function oa(t,e){al(t,e),al(t+"Capture",e)}function al(t,e){for(du[t]=e,t=0;t<e.length;t++)eA.add(e[t])}var _s=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ug=Object.prototype.hasOwnProperty,SN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,n0={},r0={};function bN(t){return Ug.call(r0,t)?!0:Ug.call(n0,t)?!1:SN.test(t)?r0[t]=!0:(n0[t]=!0,!1)}function AN(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function xN(t,e,n,r){if(e===null||typeof e>"u"||AN(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function mn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Ht={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ht[t]=new mn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ht[e]=new mn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ht[t]=new mn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ht[t]=new mn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ht[t]=new mn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ht[t]=new mn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ht[t]=new mn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ht[t]=new mn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ht[t]=new mn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Mv=/[\-:]([a-z])/g;function Fv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Mv,Fv);Ht[e]=new mn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Mv,Fv);Ht[e]=new mn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Mv,Fv);Ht[e]=new mn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ht[t]=new mn(t,1,!1,t.toLowerCase(),null,!1,!1)});Ht.xlinkHref=new mn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ht[t]=new mn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Uv(t,e,n,r){var s=Ht.hasOwnProperty(e)?Ht[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(xN(e,n,s,r)&&(n=null),r||s===null?bN(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Rs=IN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,zd=Symbol.for("react.element"),Ra=Symbol.for("react.portal"),Ca=Symbol.for("react.fragment"),jv=Symbol.for("react.strict_mode"),jg=Symbol.for("react.profiler"),tA=Symbol.for("react.provider"),nA=Symbol.for("react.context"),Bv=Symbol.for("react.forward_ref"),Bg=Symbol.for("react.suspense"),$g=Symbol.for("react.suspense_list"),$v=Symbol.for("react.memo"),Zs=Symbol.for("react.lazy"),rA=Symbol.for("react.offscreen"),s0=Symbol.iterator;function mc(t){return t===null||typeof t!="object"?null:(t=s0&&t[s0]||t["@@iterator"],typeof t=="function"?t:null)}var ut=Object.assign,Lm;function kc(t){if(Lm===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Lm=e&&e[1]||""}return`
`+Lm+t}var Mm=!1;function Fm(t,e){if(!t||Mm)return"";Mm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Mm=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?kc(t):""}function PN(t){switch(t.tag){case 5:return kc(t.type);case 16:return kc("Lazy");case 13:return kc("Suspense");case 19:return kc("SuspenseList");case 0:case 2:case 15:return t=Fm(t.type,!1),t;case 11:return t=Fm(t.type.render,!1),t;case 1:return t=Fm(t.type,!0),t;default:return""}}function zg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ca:return"Fragment";case Ra:return"Portal";case jg:return"Profiler";case jv:return"StrictMode";case Bg:return"Suspense";case $g:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case nA:return(t.displayName||"Context")+".Consumer";case tA:return(t._context.displayName||"Context")+".Provider";case Bv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case $v:return e=t.displayName||null,e!==null?e:zg(t.type)||"Memo";case Zs:e=t._payload,t=t._init;try{return zg(t(e))}catch{}}return null}function RN(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zg(e);case 8:return e===jv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Di(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function sA(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function CN(t){var e=sA(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function qd(t){t._valueTracker||(t._valueTracker=CN(t))}function iA(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=sA(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function tf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function qg(t,e){var n=e.checked;return ut({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function i0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Di(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function oA(t,e){e=e.checked,e!=null&&Uv(t,"checked",e,!1)}function Hg(t,e){oA(t,e);var n=Di(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Wg(t,e.type,n):e.hasOwnProperty("defaultValue")&&Wg(t,e.type,Di(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function o0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Wg(t,e,n){(e!=="number"||tf(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Dc=Array.isArray;function Ba(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Di(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Kg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return ut({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function a0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(W(92));if(Dc(n)){if(1<n.length)throw Error(W(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Di(n)}}function aA(t,e){var n=Di(e.value),r=Di(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function l0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function lA(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Gg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?lA(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Hd,cA=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Hd=Hd||document.createElement("div"),Hd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Hd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function hu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Bc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kN=["Webkit","ms","Moz","O"];Object.keys(Bc).forEach(function(t){kN.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Bc[e]=Bc[t]})});function uA(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Bc.hasOwnProperty(t)&&Bc[t]?(""+e).trim():e+"px"}function dA(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=uA(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var DN=ut({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Qg(t,e){if(e){if(DN[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function Yg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xg=null;function zv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Jg=null,$a=null,za=null;function c0(t){if(t=rd(t)){if(typeof Jg!="function")throw Error(W(280));var e=t.stateNode;e&&(e=yp(e),Jg(t.stateNode,t.type,e))}}function hA(t){$a?za?za.push(t):za=[t]:$a=t}function fA(){if($a){var t=$a,e=za;if(za=$a=null,c0(t),e)for(t=0;t<e.length;t++)c0(e[t])}}function pA(t,e){return t(e)}function mA(){}var Um=!1;function gA(t,e,n){if(Um)return t(e,n);Um=!0;try{return pA(t,e,n)}finally{Um=!1,($a!==null||za!==null)&&(mA(),fA())}}function fu(t,e){var n=t.stateNode;if(n===null)return null;var r=yp(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(W(231,e,typeof n));return n}var Zg=!1;if(_s)try{var gc={};Object.defineProperty(gc,"passive",{get:function(){Zg=!0}}),window.addEventListener("test",gc,gc),window.removeEventListener("test",gc,gc)}catch{Zg=!1}function NN(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var $c=!1,nf=null,rf=!1,ey=null,ON={onError:function(t){$c=!0,nf=t}};function VN(t,e,n,r,s,i,o,a,l){$c=!1,nf=null,NN.apply(ON,arguments)}function LN(t,e,n,r,s,i,o,a,l){if(VN.apply(this,arguments),$c){if($c){var c=nf;$c=!1,nf=null}else throw Error(W(198));rf||(rf=!0,ey=c)}}function aa(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function yA(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function u0(t){if(aa(t)!==t)throw Error(W(188))}function MN(t){var e=t.alternate;if(!e){if(e=aa(t),e===null)throw Error(W(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return u0(s),t;if(i===r)return u0(s),e;i=i.sibling}throw Error(W(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(W(189))}}if(n.alternate!==r)throw Error(W(190))}if(n.tag!==3)throw Error(W(188));return n.stateNode.current===n?t:e}function vA(t){return t=MN(t),t!==null?_A(t):null}function _A(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=_A(t);if(e!==null)return e;t=t.sibling}return null}var wA=qn.unstable_scheduleCallback,d0=qn.unstable_cancelCallback,FN=qn.unstable_shouldYield,UN=qn.unstable_requestPaint,yt=qn.unstable_now,jN=qn.unstable_getCurrentPriorityLevel,qv=qn.unstable_ImmediatePriority,EA=qn.unstable_UserBlockingPriority,sf=qn.unstable_NormalPriority,BN=qn.unstable_LowPriority,TA=qn.unstable_IdlePriority,fp=null,Kr=null;function $N(t){if(Kr&&typeof Kr.onCommitFiberRoot=="function")try{Kr.onCommitFiberRoot(fp,t,void 0,(t.current.flags&128)===128)}catch{}}var vr=Math.clz32?Math.clz32:HN,zN=Math.log,qN=Math.LN2;function HN(t){return t>>>=0,t===0?32:31-(zN(t)/qN|0)|0}var Wd=64,Kd=4194304;function Nc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function of(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Nc(a):(i&=o,i!==0&&(r=Nc(i)))}else o=n&~s,o!==0?r=Nc(o):i!==0&&(r=Nc(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-vr(e),s=1<<n,r|=t[n],e&=~s;return r}function WN(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function KN(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-vr(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=WN(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function ty(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function IA(){var t=Wd;return Wd<<=1,!(Wd&4194240)&&(Wd=64),t}function jm(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function td(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-vr(e),t[e]=n}function GN(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-vr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Hv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-vr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var $e=0;function SA(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var bA,Wv,AA,xA,PA,ny=!1,Gd=[],vi=null,_i=null,wi=null,pu=new Map,mu=new Map,ti=[],QN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function h0(t,e){switch(t){case"focusin":case"focusout":vi=null;break;case"dragenter":case"dragleave":_i=null;break;case"mouseover":case"mouseout":wi=null;break;case"pointerover":case"pointerout":pu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":mu.delete(e.pointerId)}}function yc(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=rd(e),e!==null&&Wv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function YN(t,e,n,r,s){switch(e){case"focusin":return vi=yc(vi,t,e,n,r,s),!0;case"dragenter":return _i=yc(_i,t,e,n,r,s),!0;case"mouseover":return wi=yc(wi,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return pu.set(i,yc(pu.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,mu.set(i,yc(mu.get(i)||null,t,e,n,r,s)),!0}return!1}function RA(t){var e=Io(t.target);if(e!==null){var n=aa(e);if(n!==null){if(e=n.tag,e===13){if(e=yA(n),e!==null){t.blockedOn=e,PA(t.priority,function(){AA(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ph(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ry(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Xg=r,n.target.dispatchEvent(r),Xg=null}else return e=rd(n),e!==null&&Wv(e),t.blockedOn=n,!1;e.shift()}return!0}function f0(t,e,n){Ph(t)&&n.delete(e)}function XN(){ny=!1,vi!==null&&Ph(vi)&&(vi=null),_i!==null&&Ph(_i)&&(_i=null),wi!==null&&Ph(wi)&&(wi=null),pu.forEach(f0),mu.forEach(f0)}function vc(t,e){t.blockedOn===e&&(t.blockedOn=null,ny||(ny=!0,qn.unstable_scheduleCallback(qn.unstable_NormalPriority,XN)))}function gu(t){function e(s){return vc(s,t)}if(0<Gd.length){vc(Gd[0],t);for(var n=1;n<Gd.length;n++){var r=Gd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(vi!==null&&vc(vi,t),_i!==null&&vc(_i,t),wi!==null&&vc(wi,t),pu.forEach(e),mu.forEach(e),n=0;n<ti.length;n++)r=ti[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ti.length&&(n=ti[0],n.blockedOn===null);)RA(n),n.blockedOn===null&&ti.shift()}var qa=Rs.ReactCurrentBatchConfig,af=!0;function JN(t,e,n,r){var s=$e,i=qa.transition;qa.transition=null;try{$e=1,Kv(t,e,n,r)}finally{$e=s,qa.transition=i}}function ZN(t,e,n,r){var s=$e,i=qa.transition;qa.transition=null;try{$e=4,Kv(t,e,n,r)}finally{$e=s,qa.transition=i}}function Kv(t,e,n,r){if(af){var s=ry(t,e,n,r);if(s===null)Ym(t,e,r,lf,n),h0(t,r);else if(YN(s,t,e,n,r))r.stopPropagation();else if(h0(t,r),e&4&&-1<QN.indexOf(t)){for(;s!==null;){var i=rd(s);if(i!==null&&bA(i),i=ry(t,e,n,r),i===null&&Ym(t,e,r,lf,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Ym(t,e,r,null,n)}}var lf=null;function ry(t,e,n,r){if(lf=null,t=zv(r),t=Io(t),t!==null)if(e=aa(t),e===null)t=null;else if(n=e.tag,n===13){if(t=yA(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return lf=t,null}function CA(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jN()){case qv:return 1;case EA:return 4;case sf:case BN:return 16;case TA:return 536870912;default:return 16}default:return 16}}var pi=null,Gv=null,Rh=null;function kA(){if(Rh)return Rh;var t,e=Gv,n=e.length,r,s="value"in pi?pi.value:pi.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Rh=s.slice(t,1<r?1-r:void 0)}function Ch(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Qd(){return!0}function p0(){return!1}function Kn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Qd:p0,this.isPropagationStopped=p0,this}return ut(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Qd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Qd)},persist:function(){},isPersistent:Qd}),e}var Fl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qv=Kn(Fl),nd=ut({},Fl,{view:0,detail:0}),e2=Kn(nd),Bm,$m,_c,pp=ut({},nd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==_c&&(_c&&t.type==="mousemove"?(Bm=t.screenX-_c.screenX,$m=t.screenY-_c.screenY):$m=Bm=0,_c=t),Bm)},movementY:function(t){return"movementY"in t?t.movementY:$m}}),m0=Kn(pp),t2=ut({},pp,{dataTransfer:0}),n2=Kn(t2),r2=ut({},nd,{relatedTarget:0}),zm=Kn(r2),s2=ut({},Fl,{animationName:0,elapsedTime:0,pseudoElement:0}),i2=Kn(s2),o2=ut({},Fl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),a2=Kn(o2),l2=ut({},Fl,{data:0}),g0=Kn(l2),c2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},u2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},d2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function h2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=d2[t])?!!e[t]:!1}function Yv(){return h2}var f2=ut({},nd,{key:function(t){if(t.key){var e=c2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ch(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?u2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yv,charCode:function(t){return t.type==="keypress"?Ch(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ch(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),p2=Kn(f2),m2=ut({},pp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),y0=Kn(m2),g2=ut({},nd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yv}),y2=Kn(g2),v2=ut({},Fl,{propertyName:0,elapsedTime:0,pseudoElement:0}),_2=Kn(v2),w2=ut({},pp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),E2=Kn(w2),T2=[9,13,27,32],Xv=_s&&"CompositionEvent"in window,zc=null;_s&&"documentMode"in document&&(zc=document.documentMode);var I2=_s&&"TextEvent"in window&&!zc,DA=_s&&(!Xv||zc&&8<zc&&11>=zc),v0=" ",_0=!1;function NA(t,e){switch(t){case"keyup":return T2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function OA(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ka=!1;function S2(t,e){switch(t){case"compositionend":return OA(e);case"keypress":return e.which!==32?null:(_0=!0,v0);case"textInput":return t=e.data,t===v0&&_0?null:t;default:return null}}function b2(t,e){if(ka)return t==="compositionend"||!Xv&&NA(t,e)?(t=kA(),Rh=Gv=pi=null,ka=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return DA&&e.locale!=="ko"?null:e.data;default:return null}}var A2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function w0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!A2[t.type]:e==="textarea"}function VA(t,e,n,r){hA(r),e=cf(e,"onChange"),0<e.length&&(n=new Qv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var qc=null,yu=null;function x2(t){WA(t,0)}function mp(t){var e=Oa(t);if(iA(e))return t}function P2(t,e){if(t==="change")return e}var LA=!1;if(_s){var qm;if(_s){var Hm="oninput"in document;if(!Hm){var E0=document.createElement("div");E0.setAttribute("oninput","return;"),Hm=typeof E0.oninput=="function"}qm=Hm}else qm=!1;LA=qm&&(!document.documentMode||9<document.documentMode)}function T0(){qc&&(qc.detachEvent("onpropertychange",MA),yu=qc=null)}function MA(t){if(t.propertyName==="value"&&mp(yu)){var e=[];VA(e,yu,t,zv(t)),gA(x2,e)}}function R2(t,e,n){t==="focusin"?(T0(),qc=e,yu=n,qc.attachEvent("onpropertychange",MA)):t==="focusout"&&T0()}function C2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return mp(yu)}function k2(t,e){if(t==="click")return mp(e)}function D2(t,e){if(t==="input"||t==="change")return mp(e)}function N2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Tr=typeof Object.is=="function"?Object.is:N2;function vu(t,e){if(Tr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Ug.call(e,s)||!Tr(t[s],e[s]))return!1}return!0}function I0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function S0(t,e){var n=I0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=I0(n)}}function FA(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?FA(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function UA(){for(var t=window,e=tf();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=tf(t.document)}return e}function Jv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function O2(t){var e=UA(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&FA(n.ownerDocument.documentElement,n)){if(r!==null&&Jv(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=S0(n,i);var o=S0(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var V2=_s&&"documentMode"in document&&11>=document.documentMode,Da=null,sy=null,Hc=null,iy=!1;function b0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;iy||Da==null||Da!==tf(r)||(r=Da,"selectionStart"in r&&Jv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Hc&&vu(Hc,r)||(Hc=r,r=cf(sy,"onSelect"),0<r.length&&(e=new Qv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Da)))}function Yd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Na={animationend:Yd("Animation","AnimationEnd"),animationiteration:Yd("Animation","AnimationIteration"),animationstart:Yd("Animation","AnimationStart"),transitionend:Yd("Transition","TransitionEnd")},Wm={},jA={};_s&&(jA=document.createElement("div").style,"AnimationEvent"in window||(delete Na.animationend.animation,delete Na.animationiteration.animation,delete Na.animationstart.animation),"TransitionEvent"in window||delete Na.transitionend.transition);function gp(t){if(Wm[t])return Wm[t];if(!Na[t])return t;var e=Na[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in jA)return Wm[t]=e[n];return t}var BA=gp("animationend"),$A=gp("animationiteration"),zA=gp("animationstart"),qA=gp("transitionend"),HA=new Map,A0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qi(t,e){HA.set(t,e),oa(e,[t])}for(var Km=0;Km<A0.length;Km++){var Gm=A0[Km],L2=Gm.toLowerCase(),M2=Gm[0].toUpperCase()+Gm.slice(1);Qi(L2,"on"+M2)}Qi(BA,"onAnimationEnd");Qi($A,"onAnimationIteration");Qi(zA,"onAnimationStart");Qi("dblclick","onDoubleClick");Qi("focusin","onFocus");Qi("focusout","onBlur");Qi(qA,"onTransitionEnd");al("onMouseEnter",["mouseout","mouseover"]);al("onMouseLeave",["mouseout","mouseover"]);al("onPointerEnter",["pointerout","pointerover"]);al("onPointerLeave",["pointerout","pointerover"]);oa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));oa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));oa("onBeforeInput",["compositionend","keypress","textInput","paste"]);oa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));oa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));oa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),F2=new Set("cancel close invalid load scroll toggle".split(" ").concat(Oc));function x0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,LN(r,e,void 0,t),t.currentTarget=null}function WA(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;x0(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;x0(s,a,c),i=l}}}if(rf)throw t=ey,rf=!1,ey=null,t}function Je(t,e){var n=e[uy];n===void 0&&(n=e[uy]=new Set);var r=t+"__bubble";n.has(r)||(KA(e,t,2,!1),n.add(r))}function Qm(t,e,n){var r=0;e&&(r|=4),KA(n,t,r,e)}var Xd="_reactListening"+Math.random().toString(36).slice(2);function _u(t){if(!t[Xd]){t[Xd]=!0,eA.forEach(function(n){n!=="selectionchange"&&(F2.has(n)||Qm(n,!1,t),Qm(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Xd]||(e[Xd]=!0,Qm("selectionchange",!1,e))}}function KA(t,e,n,r){switch(CA(e)){case 1:var s=JN;break;case 4:s=ZN;break;default:s=Kv}n=s.bind(null,e,n,t),s=void 0,!Zg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Ym(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Io(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}gA(function(){var c=i,d=zv(n),h=[];e:{var p=HA.get(t);if(p!==void 0){var f=Qv,v=t;switch(t){case"keypress":if(Ch(n)===0)break e;case"keydown":case"keyup":f=p2;break;case"focusin":v="focus",f=zm;break;case"focusout":v="blur",f=zm;break;case"beforeblur":case"afterblur":f=zm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=m0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=n2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=y2;break;case BA:case $A:case zA:f=i2;break;case qA:f=_2;break;case"scroll":f=e2;break;case"wheel":f=E2;break;case"copy":case"cut":case"paste":f=a2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=y0}var y=(e&4)!==0,E=!y&&t==="scroll",w=y?p!==null?p+"Capture":null:p;y=[];for(var _=c,I;_!==null;){I=_;var D=I.stateNode;if(I.tag===5&&D!==null&&(I=D,w!==null&&(D=fu(_,w),D!=null&&y.push(wu(_,D,I)))),E)break;_=_.return}0<y.length&&(p=new f(p,v,null,n,d),h.push({event:p,listeners:y}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",p&&n!==Xg&&(v=n.relatedTarget||n.fromElement)&&(Io(v)||v[ws]))break e;if((f||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,f?(v=n.relatedTarget||n.toElement,f=c,v=v?Io(v):null,v!==null&&(E=aa(v),v!==E||v.tag!==5&&v.tag!==6)&&(v=null)):(f=null,v=c),f!==v)){if(y=m0,D="onMouseLeave",w="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(y=y0,D="onPointerLeave",w="onPointerEnter",_="pointer"),E=f==null?p:Oa(f),I=v==null?p:Oa(v),p=new y(D,_+"leave",f,n,d),p.target=E,p.relatedTarget=I,D=null,Io(d)===c&&(y=new y(w,_+"enter",v,n,d),y.target=I,y.relatedTarget=E,D=y),E=D,f&&v)t:{for(y=f,w=v,_=0,I=y;I;I=ga(I))_++;for(I=0,D=w;D;D=ga(D))I++;for(;0<_-I;)y=ga(y),_--;for(;0<I-_;)w=ga(w),I--;for(;_--;){if(y===w||w!==null&&y===w.alternate)break t;y=ga(y),w=ga(w)}y=null}else y=null;f!==null&&P0(h,p,f,y,!1),v!==null&&E!==null&&P0(h,E,v,y,!0)}}e:{if(p=c?Oa(c):window,f=p.nodeName&&p.nodeName.toLowerCase(),f==="select"||f==="input"&&p.type==="file")var O=P2;else if(w0(p))if(LA)O=D2;else{O=C2;var V=R2}else(f=p.nodeName)&&f.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(O=k2);if(O&&(O=O(t,c))){VA(h,O,n,d);break e}V&&V(t,p,c),t==="focusout"&&(V=p._wrapperState)&&V.controlled&&p.type==="number"&&Wg(p,"number",p.value)}switch(V=c?Oa(c):window,t){case"focusin":(w0(V)||V.contentEditable==="true")&&(Da=V,sy=c,Hc=null);break;case"focusout":Hc=sy=Da=null;break;case"mousedown":iy=!0;break;case"contextmenu":case"mouseup":case"dragend":iy=!1,b0(h,n,d);break;case"selectionchange":if(V2)break;case"keydown":case"keyup":b0(h,n,d)}var S;if(Xv)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else ka?NA(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(DA&&n.locale!=="ko"&&(ka||T!=="onCompositionStart"?T==="onCompositionEnd"&&ka&&(S=kA()):(pi=d,Gv="value"in pi?pi.value:pi.textContent,ka=!0)),V=cf(c,T),0<V.length&&(T=new g0(T,t,null,n,d),h.push({event:T,listeners:V}),S?T.data=S:(S=OA(n),S!==null&&(T.data=S)))),(S=I2?S2(t,n):b2(t,n))&&(c=cf(c,"onBeforeInput"),0<c.length&&(d=new g0("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=S))}WA(h,e)})}function wu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function cf(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=fu(t,n),i!=null&&r.unshift(wu(t,i,s)),i=fu(t,e),i!=null&&r.push(wu(t,i,s))),t=t.return}return r}function ga(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function P0(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=fu(n,i),l!=null&&o.unshift(wu(n,l,a))):s||(l=fu(n,i),l!=null&&o.push(wu(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var U2=/\r\n?/g,j2=/\u0000|\uFFFD/g;function R0(t){return(typeof t=="string"?t:""+t).replace(U2,`
`).replace(j2,"")}function Jd(t,e,n){if(e=R0(e),R0(t)!==e&&n)throw Error(W(425))}function uf(){}var oy=null,ay=null;function ly(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var cy=typeof setTimeout=="function"?setTimeout:void 0,B2=typeof clearTimeout=="function"?clearTimeout:void 0,C0=typeof Promise=="function"?Promise:void 0,$2=typeof queueMicrotask=="function"?queueMicrotask:typeof C0<"u"?function(t){return C0.resolve(null).then(t).catch(z2)}:cy;function z2(t){setTimeout(function(){throw t})}function Xm(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),gu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);gu(e)}function Ei(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function k0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ul=Math.random().toString(36).slice(2),$r="__reactFiber$"+Ul,Eu="__reactProps$"+Ul,ws="__reactContainer$"+Ul,uy="__reactEvents$"+Ul,q2="__reactListeners$"+Ul,H2="__reactHandles$"+Ul;function Io(t){var e=t[$r];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ws]||n[$r]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=k0(t);t!==null;){if(n=t[$r])return n;t=k0(t)}return e}t=n,n=t.parentNode}return null}function rd(t){return t=t[$r]||t[ws],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Oa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(W(33))}function yp(t){return t[Eu]||null}var dy=[],Va=-1;function Yi(t){return{current:t}}function Ze(t){0>Va||(t.current=dy[Va],dy[Va]=null,Va--)}function Ke(t,e){Va++,dy[Va]=t.current,t.current=e}var Ni={},sn=Yi(Ni),xn=Yi(!1),zo=Ni;function ll(t,e){var n=t.type.contextTypes;if(!n)return Ni;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Pn(t){return t=t.childContextTypes,t!=null}function df(){Ze(xn),Ze(sn)}function D0(t,e,n){if(sn.current!==Ni)throw Error(W(168));Ke(sn,e),Ke(xn,n)}function GA(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(W(108,RN(t)||"Unknown",s));return ut({},n,r)}function hf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ni,zo=sn.current,Ke(sn,t),Ke(xn,xn.current),!0}function N0(t,e,n){var r=t.stateNode;if(!r)throw Error(W(169));n?(t=GA(t,e,zo),r.__reactInternalMemoizedMergedChildContext=t,Ze(xn),Ze(sn),Ke(sn,t)):Ze(xn),Ke(xn,n)}var os=null,vp=!1,Jm=!1;function QA(t){os===null?os=[t]:os.push(t)}function W2(t){vp=!0,QA(t)}function Xi(){if(!Jm&&os!==null){Jm=!0;var t=0,e=$e;try{var n=os;for($e=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}os=null,vp=!1}catch(s){throw os!==null&&(os=os.slice(t+1)),wA(qv,Xi),s}finally{$e=e,Jm=!1}}return null}var La=[],Ma=0,ff=null,pf=0,Jn=[],Zn=0,qo=null,cs=1,us="";function ho(t,e){La[Ma++]=pf,La[Ma++]=ff,ff=t,pf=e}function YA(t,e,n){Jn[Zn++]=cs,Jn[Zn++]=us,Jn[Zn++]=qo,qo=t;var r=cs;t=us;var s=32-vr(r)-1;r&=~(1<<s),n+=1;var i=32-vr(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,cs=1<<32-vr(e)+s|n<<s|r,us=i+t}else cs=1<<i|n<<s|r,us=t}function Zv(t){t.return!==null&&(ho(t,1),YA(t,1,0))}function e_(t){for(;t===ff;)ff=La[--Ma],La[Ma]=null,pf=La[--Ma],La[Ma]=null;for(;t===qo;)qo=Jn[--Zn],Jn[Zn]=null,us=Jn[--Zn],Jn[Zn]=null,cs=Jn[--Zn],Jn[Zn]=null}var Bn=null,Fn=null,nt=!1,gr=null;function XA(t,e){var n=er(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function O0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Bn=t,Fn=Ei(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Bn=t,Fn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=qo!==null?{id:cs,overflow:us}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=er(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Bn=t,Fn=null,!0):!1;default:return!1}}function hy(t){return(t.mode&1)!==0&&(t.flags&128)===0}function fy(t){if(nt){var e=Fn;if(e){var n=e;if(!O0(t,e)){if(hy(t))throw Error(W(418));e=Ei(n.nextSibling);var r=Bn;e&&O0(t,e)?XA(r,n):(t.flags=t.flags&-4097|2,nt=!1,Bn=t)}}else{if(hy(t))throw Error(W(418));t.flags=t.flags&-4097|2,nt=!1,Bn=t}}}function V0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Bn=t}function Zd(t){if(t!==Bn)return!1;if(!nt)return V0(t),nt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ly(t.type,t.memoizedProps)),e&&(e=Fn)){if(hy(t))throw JA(),Error(W(418));for(;e;)XA(t,e),e=Ei(e.nextSibling)}if(V0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(W(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Fn=Ei(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Fn=null}}else Fn=Bn?Ei(t.stateNode.nextSibling):null;return!0}function JA(){for(var t=Fn;t;)t=Ei(t.nextSibling)}function cl(){Fn=Bn=null,nt=!1}function t_(t){gr===null?gr=[t]:gr.push(t)}var K2=Rs.ReactCurrentBatchConfig;function wc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(W(309));var r=n.stateNode}if(!r)throw Error(W(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(W(284));if(!n._owner)throw Error(W(290,t))}return t}function eh(t,e){throw t=Object.prototype.toString.call(e),Error(W(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function L0(t){var e=t._init;return e(t._payload)}function ZA(t){function e(w,_){if(t){var I=w.deletions;I===null?(w.deletions=[_],w.flags|=16):I.push(_)}}function n(w,_){if(!t)return null;for(;_!==null;)e(w,_),_=_.sibling;return null}function r(w,_){for(w=new Map;_!==null;)_.key!==null?w.set(_.key,_):w.set(_.index,_),_=_.sibling;return w}function s(w,_){return w=bi(w,_),w.index=0,w.sibling=null,w}function i(w,_,I){return w.index=I,t?(I=w.alternate,I!==null?(I=I.index,I<_?(w.flags|=2,_):I):(w.flags|=2,_)):(w.flags|=1048576,_)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,_,I,D){return _===null||_.tag!==6?(_=ig(I,w.mode,D),_.return=w,_):(_=s(_,I),_.return=w,_)}function l(w,_,I,D){var O=I.type;return O===Ca?d(w,_,I.props.children,D,I.key):_!==null&&(_.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Zs&&L0(O)===_.type)?(D=s(_,I.props),D.ref=wc(w,_,I),D.return=w,D):(D=Mh(I.type,I.key,I.props,null,w.mode,D),D.ref=wc(w,_,I),D.return=w,D)}function c(w,_,I,D){return _===null||_.tag!==4||_.stateNode.containerInfo!==I.containerInfo||_.stateNode.implementation!==I.implementation?(_=og(I,w.mode,D),_.return=w,_):(_=s(_,I.children||[]),_.return=w,_)}function d(w,_,I,D,O){return _===null||_.tag!==7?(_=Mo(I,w.mode,D,O),_.return=w,_):(_=s(_,I),_.return=w,_)}function h(w,_,I){if(typeof _=="string"&&_!==""||typeof _=="number")return _=ig(""+_,w.mode,I),_.return=w,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case zd:return I=Mh(_.type,_.key,_.props,null,w.mode,I),I.ref=wc(w,null,_),I.return=w,I;case Ra:return _=og(_,w.mode,I),_.return=w,_;case Zs:var D=_._init;return h(w,D(_._payload),I)}if(Dc(_)||mc(_))return _=Mo(_,w.mode,I,null),_.return=w,_;eh(w,_)}return null}function p(w,_,I,D){var O=_!==null?_.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return O!==null?null:a(w,_,""+I,D);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case zd:return I.key===O?l(w,_,I,D):null;case Ra:return I.key===O?c(w,_,I,D):null;case Zs:return O=I._init,p(w,_,O(I._payload),D)}if(Dc(I)||mc(I))return O!==null?null:d(w,_,I,D,null);eh(w,I)}return null}function f(w,_,I,D,O){if(typeof D=="string"&&D!==""||typeof D=="number")return w=w.get(I)||null,a(_,w,""+D,O);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case zd:return w=w.get(D.key===null?I:D.key)||null,l(_,w,D,O);case Ra:return w=w.get(D.key===null?I:D.key)||null,c(_,w,D,O);case Zs:var V=D._init;return f(w,_,I,V(D._payload),O)}if(Dc(D)||mc(D))return w=w.get(I)||null,d(_,w,D,O,null);eh(_,D)}return null}function v(w,_,I,D){for(var O=null,V=null,S=_,T=_=0,b=null;S!==null&&T<I.length;T++){S.index>T?(b=S,S=null):b=S.sibling;var k=p(w,S,I[T],D);if(k===null){S===null&&(S=b);break}t&&S&&k.alternate===null&&e(w,S),_=i(k,_,T),V===null?O=k:V.sibling=k,V=k,S=b}if(T===I.length)return n(w,S),nt&&ho(w,T),O;if(S===null){for(;T<I.length;T++)S=h(w,I[T],D),S!==null&&(_=i(S,_,T),V===null?O=S:V.sibling=S,V=S);return nt&&ho(w,T),O}for(S=r(w,S);T<I.length;T++)b=f(S,w,T,I[T],D),b!==null&&(t&&b.alternate!==null&&S.delete(b.key===null?T:b.key),_=i(b,_,T),V===null?O=b:V.sibling=b,V=b);return t&&S.forEach(function(P){return e(w,P)}),nt&&ho(w,T),O}function y(w,_,I,D){var O=mc(I);if(typeof O!="function")throw Error(W(150));if(I=O.call(I),I==null)throw Error(W(151));for(var V=O=null,S=_,T=_=0,b=null,k=I.next();S!==null&&!k.done;T++,k=I.next()){S.index>T?(b=S,S=null):b=S.sibling;var P=p(w,S,k.value,D);if(P===null){S===null&&(S=b);break}t&&S&&P.alternate===null&&e(w,S),_=i(P,_,T),V===null?O=P:V.sibling=P,V=P,S=b}if(k.done)return n(w,S),nt&&ho(w,T),O;if(S===null){for(;!k.done;T++,k=I.next())k=h(w,k.value,D),k!==null&&(_=i(k,_,T),V===null?O=k:V.sibling=k,V=k);return nt&&ho(w,T),O}for(S=r(w,S);!k.done;T++,k=I.next())k=f(S,w,T,k.value,D),k!==null&&(t&&k.alternate!==null&&S.delete(k.key===null?T:k.key),_=i(k,_,T),V===null?O=k:V.sibling=k,V=k);return t&&S.forEach(function(N){return e(w,N)}),nt&&ho(w,T),O}function E(w,_,I,D){if(typeof I=="object"&&I!==null&&I.type===Ca&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case zd:e:{for(var O=I.key,V=_;V!==null;){if(V.key===O){if(O=I.type,O===Ca){if(V.tag===7){n(w,V.sibling),_=s(V,I.props.children),_.return=w,w=_;break e}}else if(V.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Zs&&L0(O)===V.type){n(w,V.sibling),_=s(V,I.props),_.ref=wc(w,V,I),_.return=w,w=_;break e}n(w,V);break}else e(w,V);V=V.sibling}I.type===Ca?(_=Mo(I.props.children,w.mode,D,I.key),_.return=w,w=_):(D=Mh(I.type,I.key,I.props,null,w.mode,D),D.ref=wc(w,_,I),D.return=w,w=D)}return o(w);case Ra:e:{for(V=I.key;_!==null;){if(_.key===V)if(_.tag===4&&_.stateNode.containerInfo===I.containerInfo&&_.stateNode.implementation===I.implementation){n(w,_.sibling),_=s(_,I.children||[]),_.return=w,w=_;break e}else{n(w,_);break}else e(w,_);_=_.sibling}_=og(I,w.mode,D),_.return=w,w=_}return o(w);case Zs:return V=I._init,E(w,_,V(I._payload),D)}if(Dc(I))return v(w,_,I,D);if(mc(I))return y(w,_,I,D);eh(w,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,_!==null&&_.tag===6?(n(w,_.sibling),_=s(_,I),_.return=w,w=_):(n(w,_),_=ig(I,w.mode,D),_.return=w,w=_),o(w)):n(w,_)}return E}var ul=ZA(!0),e1=ZA(!1),mf=Yi(null),gf=null,Fa=null,n_=null;function r_(){n_=Fa=gf=null}function s_(t){var e=mf.current;Ze(mf),t._currentValue=e}function py(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ha(t,e){gf=t,n_=Fa=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(In=!0),t.firstContext=null)}function sr(t){var e=t._currentValue;if(n_!==t)if(t={context:t,memoizedValue:e,next:null},Fa===null){if(gf===null)throw Error(W(308));Fa=t,gf.dependencies={lanes:0,firstContext:t}}else Fa=Fa.next=t;return e}var So=null;function i_(t){So===null?So=[t]:So.push(t)}function t1(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,i_(e)):(n.next=s.next,s.next=n),e.interleaved=n,Es(t,r)}function Es(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ei=!1;function o_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function n1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function fs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ti(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Me&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Es(t,n)}return s=r.interleaved,s===null?(e.next=e,i_(r)):(e.next=s.next,s.next=e),r.interleaved=e,Es(t,n)}function kh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Hv(t,n)}}function M0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function yf(t,e,n,r){var s=t.updateQueue;ei=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,d=c=l=null,a=i;do{var p=a.lane,f=a.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,y=a;switch(p=e,f=n,y.tag){case 1:if(v=y.payload,typeof v=="function"){h=v.call(f,h,p);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,p=typeof v=="function"?v.call(f,h,p):v,p==null)break e;h=ut({},h,p);break e;case 2:ei=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[a]:p.push(a))}else f={eventTime:f,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=f,l=h):d=d.next=f,o|=p;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;p=a,a=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Wo|=o,t.lanes=o,t.memoizedState=h}}function F0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(W(191,s));s.call(r)}}}var sd={},Gr=Yi(sd),Tu=Yi(sd),Iu=Yi(sd);function bo(t){if(t===sd)throw Error(W(174));return t}function a_(t,e){switch(Ke(Iu,e),Ke(Tu,t),Ke(Gr,sd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Gg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Gg(e,t)}Ze(Gr),Ke(Gr,e)}function dl(){Ze(Gr),Ze(Tu),Ze(Iu)}function r1(t){bo(Iu.current);var e=bo(Gr.current),n=Gg(e,t.type);e!==n&&(Ke(Tu,t),Ke(Gr,n))}function l_(t){Tu.current===t&&(Ze(Gr),Ze(Tu))}var lt=Yi(0);function vf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Zm=[];function c_(){for(var t=0;t<Zm.length;t++)Zm[t]._workInProgressVersionPrimary=null;Zm.length=0}var Dh=Rs.ReactCurrentDispatcher,eg=Rs.ReactCurrentBatchConfig,Ho=0,ct=null,Rt=null,Ut=null,_f=!1,Wc=!1,Su=0,G2=0;function Qt(){throw Error(W(321))}function u_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Tr(t[n],e[n]))return!1;return!0}function d_(t,e,n,r,s,i){if(Ho=i,ct=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Dh.current=t===null||t.memoizedState===null?J2:Z2,t=n(r,s),Wc){i=0;do{if(Wc=!1,Su=0,25<=i)throw Error(W(301));i+=1,Ut=Rt=null,e.updateQueue=null,Dh.current=eO,t=n(r,s)}while(Wc)}if(Dh.current=wf,e=Rt!==null&&Rt.next!==null,Ho=0,Ut=Rt=ct=null,_f=!1,e)throw Error(W(300));return t}function h_(){var t=Su!==0;return Su=0,t}function Lr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ut===null?ct.memoizedState=Ut=t:Ut=Ut.next=t,Ut}function ir(){if(Rt===null){var t=ct.alternate;t=t!==null?t.memoizedState:null}else t=Rt.next;var e=Ut===null?ct.memoizedState:Ut.next;if(e!==null)Ut=e,Rt=t;else{if(t===null)throw Error(W(310));Rt=t,t={memoizedState:Rt.memoizedState,baseState:Rt.baseState,baseQueue:Rt.baseQueue,queue:Rt.queue,next:null},Ut===null?ct.memoizedState=Ut=t:Ut=Ut.next=t}return Ut}function bu(t,e){return typeof e=="function"?e(t):e}function tg(t){var e=ir(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=Rt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((Ho&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,ct.lanes|=d,Wo|=d}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,Tr(r,e.memoizedState)||(In=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,ct.lanes|=i,Wo|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ng(t){var e=ir(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Tr(i,e.memoizedState)||(In=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function s1(){}function i1(t,e){var n=ct,r=ir(),s=e(),i=!Tr(r.memoizedState,s);if(i&&(r.memoizedState=s,In=!0),r=r.queue,f_(l1.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ut!==null&&Ut.memoizedState.tag&1){if(n.flags|=2048,Au(9,a1.bind(null,n,r,s,e),void 0,null),jt===null)throw Error(W(349));Ho&30||o1(n,e,s)}return s}function o1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ct.updateQueue,e===null?(e={lastEffect:null,stores:null},ct.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function a1(t,e,n,r){e.value=n,e.getSnapshot=r,c1(e)&&u1(t)}function l1(t,e,n){return n(function(){c1(e)&&u1(t)})}function c1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Tr(t,n)}catch{return!0}}function u1(t){var e=Es(t,1);e!==null&&_r(e,t,1,-1)}function U0(t){var e=Lr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bu,lastRenderedState:t},e.queue=t,t=t.dispatch=X2.bind(null,ct,t),[e.memoizedState,t]}function Au(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ct.updateQueue,e===null?(e={lastEffect:null,stores:null},ct.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function d1(){return ir().memoizedState}function Nh(t,e,n,r){var s=Lr();ct.flags|=t,s.memoizedState=Au(1|e,n,void 0,r===void 0?null:r)}function _p(t,e,n,r){var s=ir();r=r===void 0?null:r;var i=void 0;if(Rt!==null){var o=Rt.memoizedState;if(i=o.destroy,r!==null&&u_(r,o.deps)){s.memoizedState=Au(e,n,i,r);return}}ct.flags|=t,s.memoizedState=Au(1|e,n,i,r)}function j0(t,e){return Nh(8390656,8,t,e)}function f_(t,e){return _p(2048,8,t,e)}function h1(t,e){return _p(4,2,t,e)}function f1(t,e){return _p(4,4,t,e)}function p1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function m1(t,e,n){return n=n!=null?n.concat([t]):null,_p(4,4,p1.bind(null,e,t),n)}function p_(){}function g1(t,e){var n=ir();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&u_(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function y1(t,e){var n=ir();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&u_(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function v1(t,e,n){return Ho&21?(Tr(n,e)||(n=IA(),ct.lanes|=n,Wo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,In=!0),t.memoizedState=n)}function Q2(t,e){var n=$e;$e=n!==0&&4>n?n:4,t(!0);var r=eg.transition;eg.transition={};try{t(!1),e()}finally{$e=n,eg.transition=r}}function _1(){return ir().memoizedState}function Y2(t,e,n){var r=Si(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},w1(t))E1(e,n);else if(n=t1(t,e,n,r),n!==null){var s=dn();_r(n,t,r,s),T1(n,e,r)}}function X2(t,e,n){var r=Si(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(w1(t))E1(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Tr(a,o)){var l=e.interleaved;l===null?(s.next=s,i_(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=t1(t,e,s,r),n!==null&&(s=dn(),_r(n,t,r,s),T1(n,e,r))}}function w1(t){var e=t.alternate;return t===ct||e!==null&&e===ct}function E1(t,e){Wc=_f=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function T1(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Hv(t,n)}}var wf={readContext:sr,useCallback:Qt,useContext:Qt,useEffect:Qt,useImperativeHandle:Qt,useInsertionEffect:Qt,useLayoutEffect:Qt,useMemo:Qt,useReducer:Qt,useRef:Qt,useState:Qt,useDebugValue:Qt,useDeferredValue:Qt,useTransition:Qt,useMutableSource:Qt,useSyncExternalStore:Qt,useId:Qt,unstable_isNewReconciler:!1},J2={readContext:sr,useCallback:function(t,e){return Lr().memoizedState=[t,e===void 0?null:e],t},useContext:sr,useEffect:j0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Nh(4194308,4,p1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Nh(4194308,4,t,e)},useInsertionEffect:function(t,e){return Nh(4,2,t,e)},useMemo:function(t,e){var n=Lr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Lr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Y2.bind(null,ct,t),[r.memoizedState,t]},useRef:function(t){var e=Lr();return t={current:t},e.memoizedState=t},useState:U0,useDebugValue:p_,useDeferredValue:function(t){return Lr().memoizedState=t},useTransition:function(){var t=U0(!1),e=t[0];return t=Q2.bind(null,t[1]),Lr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ct,s=Lr();if(nt){if(n===void 0)throw Error(W(407));n=n()}else{if(n=e(),jt===null)throw Error(W(349));Ho&30||o1(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,j0(l1.bind(null,r,i,t),[t]),r.flags|=2048,Au(9,a1.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Lr(),e=jt.identifierPrefix;if(nt){var n=us,r=cs;n=(r&~(1<<32-vr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Su++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=G2++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Z2={readContext:sr,useCallback:g1,useContext:sr,useEffect:f_,useImperativeHandle:m1,useInsertionEffect:h1,useLayoutEffect:f1,useMemo:y1,useReducer:tg,useRef:d1,useState:function(){return tg(bu)},useDebugValue:p_,useDeferredValue:function(t){var e=ir();return v1(e,Rt.memoizedState,t)},useTransition:function(){var t=tg(bu)[0],e=ir().memoizedState;return[t,e]},useMutableSource:s1,useSyncExternalStore:i1,useId:_1,unstable_isNewReconciler:!1},eO={readContext:sr,useCallback:g1,useContext:sr,useEffect:f_,useImperativeHandle:m1,useInsertionEffect:h1,useLayoutEffect:f1,useMemo:y1,useReducer:ng,useRef:d1,useState:function(){return ng(bu)},useDebugValue:p_,useDeferredValue:function(t){var e=ir();return Rt===null?e.memoizedState=t:v1(e,Rt.memoizedState,t)},useTransition:function(){var t=ng(bu)[0],e=ir().memoizedState;return[t,e]},useMutableSource:s1,useSyncExternalStore:i1,useId:_1,unstable_isNewReconciler:!1};function ur(t,e){if(t&&t.defaultProps){e=ut({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function my(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ut({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var wp={isMounted:function(t){return(t=t._reactInternals)?aa(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=dn(),s=Si(t),i=fs(r,s);i.payload=e,n!=null&&(i.callback=n),e=Ti(t,i,s),e!==null&&(_r(e,t,s,r),kh(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=dn(),s=Si(t),i=fs(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Ti(t,i,s),e!==null&&(_r(e,t,s,r),kh(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=dn(),r=Si(t),s=fs(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ti(t,s,r),e!==null&&(_r(e,t,r,n),kh(e,t,r))}};function B0(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!vu(n,r)||!vu(s,i):!0}function I1(t,e,n){var r=!1,s=Ni,i=e.contextType;return typeof i=="object"&&i!==null?i=sr(i):(s=Pn(e)?zo:sn.current,r=e.contextTypes,i=(r=r!=null)?ll(t,s):Ni),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=wp,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function $0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&wp.enqueueReplaceState(e,e.state,null)}function gy(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},o_(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=sr(i):(i=Pn(e)?zo:sn.current,s.context=ll(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(my(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&wp.enqueueReplaceState(s,s.state,null),yf(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function hl(t,e){try{var n="",r=e;do n+=PN(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function rg(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function yy(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var tO=typeof WeakMap=="function"?WeakMap:Map;function S1(t,e,n){n=fs(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Tf||(Tf=!0,xy=r),yy(t,e)},n}function b1(t,e,n){n=fs(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){yy(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){yy(t,e),typeof r!="function"&&(Ii===null?Ii=new Set([this]):Ii.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function z0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new tO;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=mO.bind(null,t,e,n),e.then(t,t))}function q0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function H0(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=fs(-1,1),e.tag=2,Ti(n,e,1))),n.lanes|=1),t)}var nO=Rs.ReactCurrentOwner,In=!1;function cn(t,e,n,r){e.child=t===null?e1(e,null,n,r):ul(e,t.child,n,r)}function W0(t,e,n,r,s){n=n.render;var i=e.ref;return Ha(e,s),r=d_(t,e,n,r,i,s),n=h_(),t!==null&&!In?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ts(t,e,s)):(nt&&n&&Zv(e),e.flags|=1,cn(t,e,r,s),e.child)}function K0(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!T_(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,A1(t,e,i,r,s)):(t=Mh(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:vu,n(o,r)&&t.ref===e.ref)return Ts(t,e,s)}return e.flags|=1,t=bi(i,r),t.ref=e.ref,t.return=e,e.child=t}function A1(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(vu(i,r)&&t.ref===e.ref)if(In=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(In=!0);else return e.lanes=t.lanes,Ts(t,e,s)}return vy(t,e,n,r,s)}function x1(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ke(ja,Nn),Nn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ke(ja,Nn),Nn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ke(ja,Nn),Nn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ke(ja,Nn),Nn|=r;return cn(t,e,s,n),e.child}function P1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function vy(t,e,n,r,s){var i=Pn(n)?zo:sn.current;return i=ll(e,i),Ha(e,s),n=d_(t,e,n,r,i,s),r=h_(),t!==null&&!In?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ts(t,e,s)):(nt&&r&&Zv(e),e.flags|=1,cn(t,e,n,s),e.child)}function G0(t,e,n,r,s){if(Pn(n)){var i=!0;hf(e)}else i=!1;if(Ha(e,s),e.stateNode===null)Oh(t,e),I1(e,n,r),gy(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=sr(c):(c=Pn(n)?zo:sn.current,c=ll(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&$0(e,o,r,c),ei=!1;var p=e.memoizedState;o.state=p,yf(e,r,o,s),l=e.memoizedState,a!==r||p!==l||xn.current||ei?(typeof d=="function"&&(my(e,n,d,r),l=e.memoizedState),(a=ei||B0(e,n,a,r,p,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,n1(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:ur(e.type,a),o.props=c,h=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=sr(l):(l=Pn(n)?zo:sn.current,l=ll(e,l));var f=n.getDerivedStateFromProps;(d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||p!==l)&&$0(e,o,r,l),ei=!1,p=e.memoizedState,o.state=p,yf(e,r,o,s);var v=e.memoizedState;a!==h||p!==v||xn.current||ei?(typeof f=="function"&&(my(e,n,f,r),v=e.memoizedState),(c=ei||B0(e,n,c,r,p,v,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return _y(t,e,n,r,i,s)}function _y(t,e,n,r,s,i){P1(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&N0(e,n,!1),Ts(t,e,i);r=e.stateNode,nO.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ul(e,t.child,null,i),e.child=ul(e,null,a,i)):cn(t,e,a,i),e.memoizedState=r.state,s&&N0(e,n,!0),e.child}function R1(t){var e=t.stateNode;e.pendingContext?D0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&D0(t,e.context,!1),a_(t,e.containerInfo)}function Q0(t,e,n,r,s){return cl(),t_(s),e.flags|=256,cn(t,e,n,r),e.child}var wy={dehydrated:null,treeContext:null,retryLane:0};function Ey(t){return{baseLanes:t,cachePool:null,transitions:null}}function C1(t,e,n){var r=e.pendingProps,s=lt.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ke(lt,s&1),t===null)return fy(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Ip(o,r,0,null),t=Mo(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Ey(n),e.memoizedState=wy,t):m_(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return rO(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=bi(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=bi(a,i):(i=Mo(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Ey(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=wy,r}return i=t.child,t=i.sibling,r=bi(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function m_(t,e){return e=Ip({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function th(t,e,n,r){return r!==null&&t_(r),ul(e,t.child,null,n),t=m_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function rO(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=rg(Error(W(422))),th(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Ip({mode:"visible",children:r.children},s,0,null),i=Mo(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ul(e,t.child,null,o),e.child.memoizedState=Ey(o),e.memoizedState=wy,i);if(!(e.mode&1))return th(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(W(419)),r=rg(i,r,void 0),th(t,e,o,r)}if(a=(o&t.childLanes)!==0,In||a){if(r=jt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Es(t,s),_r(r,t,s,-1))}return E_(),r=rg(Error(W(421))),th(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=gO.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Fn=Ei(s.nextSibling),Bn=e,nt=!0,gr=null,t!==null&&(Jn[Zn++]=cs,Jn[Zn++]=us,Jn[Zn++]=qo,cs=t.id,us=t.overflow,qo=e),e=m_(e,r.children),e.flags|=4096,e)}function Y0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),py(t.return,e,n)}function sg(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function k1(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(cn(t,e,r.children,n),r=lt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Y0(t,n,e);else if(t.tag===19)Y0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ke(lt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&vf(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),sg(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&vf(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}sg(e,!0,n,null,i);break;case"together":sg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Oh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ts(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Wo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(W(153));if(e.child!==null){for(t=e.child,n=bi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=bi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function sO(t,e,n){switch(e.tag){case 3:R1(e),cl();break;case 5:r1(e);break;case 1:Pn(e.type)&&hf(e);break;case 4:a_(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ke(mf,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ke(lt,lt.current&1),e.flags|=128,null):n&e.child.childLanes?C1(t,e,n):(Ke(lt,lt.current&1),t=Ts(t,e,n),t!==null?t.sibling:null);Ke(lt,lt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return k1(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ke(lt,lt.current),r)break;return null;case 22:case 23:return e.lanes=0,x1(t,e,n)}return Ts(t,e,n)}var D1,Ty,N1,O1;D1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ty=function(){};N1=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,bo(Gr.current);var i=null;switch(n){case"input":s=qg(t,s),r=qg(t,r),i=[];break;case"select":s=ut({},s,{value:void 0}),r=ut({},r,{value:void 0}),i=[];break;case"textarea":s=Kg(t,s),r=Kg(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=uf)}Qg(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(du.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(du.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Je("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};O1=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ec(t,e){if(!nt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Yt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function iO(t,e,n){var r=e.pendingProps;switch(e_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yt(e),null;case 1:return Pn(e.type)&&df(),Yt(e),null;case 3:return r=e.stateNode,dl(),Ze(xn),Ze(sn),c_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Zd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,gr!==null&&(Cy(gr),gr=null))),Ty(t,e),Yt(e),null;case 5:l_(e);var s=bo(Iu.current);if(n=e.type,t!==null&&e.stateNode!=null)N1(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(W(166));return Yt(e),null}if(t=bo(Gr.current),Zd(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[$r]=e,r[Eu]=i,t=(e.mode&1)!==0,n){case"dialog":Je("cancel",r),Je("close",r);break;case"iframe":case"object":case"embed":Je("load",r);break;case"video":case"audio":for(s=0;s<Oc.length;s++)Je(Oc[s],r);break;case"source":Je("error",r);break;case"img":case"image":case"link":Je("error",r),Je("load",r);break;case"details":Je("toggle",r);break;case"input":i0(r,i),Je("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Je("invalid",r);break;case"textarea":a0(r,i),Je("invalid",r)}Qg(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Jd(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Jd(r.textContent,a,t),s=["children",""+a]):du.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Je("scroll",r)}switch(n){case"input":qd(r),o0(r,i,!0);break;case"textarea":qd(r),l0(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=uf)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=lA(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[$r]=e,t[Eu]=r,D1(t,e,!1,!1),e.stateNode=t;e:{switch(o=Yg(n,r),n){case"dialog":Je("cancel",t),Je("close",t),s=r;break;case"iframe":case"object":case"embed":Je("load",t),s=r;break;case"video":case"audio":for(s=0;s<Oc.length;s++)Je(Oc[s],t);s=r;break;case"source":Je("error",t),s=r;break;case"img":case"image":case"link":Je("error",t),Je("load",t),s=r;break;case"details":Je("toggle",t),s=r;break;case"input":i0(t,r),s=qg(t,r),Je("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=ut({},r,{value:void 0}),Je("invalid",t);break;case"textarea":a0(t,r),s=Kg(t,r),Je("invalid",t);break;default:s=r}Qg(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?dA(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&cA(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&hu(t,l):typeof l=="number"&&hu(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(du.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Je("scroll",t):l!=null&&Uv(t,i,l,o))}switch(n){case"input":qd(t),o0(t,r,!1);break;case"textarea":qd(t),l0(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Di(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ba(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ba(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=uf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Yt(e),null;case 6:if(t&&e.stateNode!=null)O1(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(W(166));if(n=bo(Iu.current),bo(Gr.current),Zd(e)){if(r=e.stateNode,n=e.memoizedProps,r[$r]=e,(i=r.nodeValue!==n)&&(t=Bn,t!==null))switch(t.tag){case 3:Jd(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Jd(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[$r]=e,e.stateNode=r}return Yt(e),null;case 13:if(Ze(lt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(nt&&Fn!==null&&e.mode&1&&!(e.flags&128))JA(),cl(),e.flags|=98560,i=!1;else if(i=Zd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(W(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(W(317));i[$r]=e}else cl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Yt(e),i=!1}else gr!==null&&(Cy(gr),gr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||lt.current&1?kt===0&&(kt=3):E_())),e.updateQueue!==null&&(e.flags|=4),Yt(e),null);case 4:return dl(),Ty(t,e),t===null&&_u(e.stateNode.containerInfo),Yt(e),null;case 10:return s_(e.type._context),Yt(e),null;case 17:return Pn(e.type)&&df(),Yt(e),null;case 19:if(Ze(lt),i=e.memoizedState,i===null)return Yt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Ec(i,!1);else{if(kt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=vf(t),o!==null){for(e.flags|=128,Ec(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ke(lt,lt.current&1|2),e.child}t=t.sibling}i.tail!==null&&yt()>fl&&(e.flags|=128,r=!0,Ec(i,!1),e.lanes=4194304)}else{if(!r)if(t=vf(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ec(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!nt)return Yt(e),null}else 2*yt()-i.renderingStartTime>fl&&n!==1073741824&&(e.flags|=128,r=!0,Ec(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=yt(),e.sibling=null,n=lt.current,Ke(lt,r?n&1|2:n&1),e):(Yt(e),null);case 22:case 23:return w_(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Nn&1073741824&&(Yt(e),e.subtreeFlags&6&&(e.flags|=8192)):Yt(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function oO(t,e){switch(e_(e),e.tag){case 1:return Pn(e.type)&&df(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return dl(),Ze(xn),Ze(sn),c_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return l_(e),null;case 13:if(Ze(lt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(W(340));cl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ze(lt),null;case 4:return dl(),null;case 10:return s_(e.type._context),null;case 22:case 23:return w_(),null;case 24:return null;default:return null}}var nh=!1,en=!1,aO=typeof WeakSet=="function"?WeakSet:Set,ee=null;function Ua(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){pt(t,e,r)}else n.current=null}function Iy(t,e,n){try{n()}catch(r){pt(t,e,r)}}var X0=!1;function lO(t,e){if(oy=af,t=UA(),Jv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,p=null;t:for(;;){for(var f;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(f=h.firstChild)!==null;)p=h,h=f;for(;;){if(h===t)break t;if(p===n&&++c===s&&(a=o),p===i&&++d===r&&(l=o),(f=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ay={focusedElem:t,selectionRange:n},af=!1,ee=e;ee!==null;)if(e=ee,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ee=t;else for(;ee!==null;){e=ee;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var y=v.memoizedProps,E=v.memoizedState,w=e.stateNode,_=w.getSnapshotBeforeUpdate(e.elementType===e.type?y:ur(e.type,y),E);w.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(D){pt(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,ee=t;break}ee=e.return}return v=X0,X0=!1,v}function Kc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Iy(e,n,i)}s=s.next}while(s!==r)}}function Ep(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Sy(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function V1(t){var e=t.alternate;e!==null&&(t.alternate=null,V1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[$r],delete e[Eu],delete e[uy],delete e[q2],delete e[H2])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function L1(t){return t.tag===5||t.tag===3||t.tag===4}function J0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||L1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function by(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=uf));else if(r!==4&&(t=t.child,t!==null))for(by(t,e,n),t=t.sibling;t!==null;)by(t,e,n),t=t.sibling}function Ay(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ay(t,e,n),t=t.sibling;t!==null;)Ay(t,e,n),t=t.sibling}var $t=null,pr=!1;function Hs(t,e,n){for(n=n.child;n!==null;)M1(t,e,n),n=n.sibling}function M1(t,e,n){if(Kr&&typeof Kr.onCommitFiberUnmount=="function")try{Kr.onCommitFiberUnmount(fp,n)}catch{}switch(n.tag){case 5:en||Ua(n,e);case 6:var r=$t,s=pr;$t=null,Hs(t,e,n),$t=r,pr=s,$t!==null&&(pr?(t=$t,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):$t.removeChild(n.stateNode));break;case 18:$t!==null&&(pr?(t=$t,n=n.stateNode,t.nodeType===8?Xm(t.parentNode,n):t.nodeType===1&&Xm(t,n),gu(t)):Xm($t,n.stateNode));break;case 4:r=$t,s=pr,$t=n.stateNode.containerInfo,pr=!0,Hs(t,e,n),$t=r,pr=s;break;case 0:case 11:case 14:case 15:if(!en&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Iy(n,e,o),s=s.next}while(s!==r)}Hs(t,e,n);break;case 1:if(!en&&(Ua(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){pt(n,e,a)}Hs(t,e,n);break;case 21:Hs(t,e,n);break;case 22:n.mode&1?(en=(r=en)||n.memoizedState!==null,Hs(t,e,n),en=r):Hs(t,e,n);break;default:Hs(t,e,n)}}function Z0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new aO),e.forEach(function(r){var s=yO.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function lr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:$t=a.stateNode,pr=!1;break e;case 3:$t=a.stateNode.containerInfo,pr=!0;break e;case 4:$t=a.stateNode.containerInfo,pr=!0;break e}a=a.return}if($t===null)throw Error(W(160));M1(i,o,s),$t=null,pr=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){pt(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)F1(e,t),e=e.sibling}function F1(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(lr(e,t),Vr(t),r&4){try{Kc(3,t,t.return),Ep(3,t)}catch(y){pt(t,t.return,y)}try{Kc(5,t,t.return)}catch(y){pt(t,t.return,y)}}break;case 1:lr(e,t),Vr(t),r&512&&n!==null&&Ua(n,n.return);break;case 5:if(lr(e,t),Vr(t),r&512&&n!==null&&Ua(n,n.return),t.flags&32){var s=t.stateNode;try{hu(s,"")}catch(y){pt(t,t.return,y)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&oA(s,i),Yg(a,o);var c=Yg(a,i);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?dA(s,h):d==="dangerouslySetInnerHTML"?cA(s,h):d==="children"?hu(s,h):Uv(s,d,h,c)}switch(a){case"input":Hg(s,i);break;case"textarea":aA(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?Ba(s,!!i.multiple,f,!1):p!==!!i.multiple&&(i.defaultValue!=null?Ba(s,!!i.multiple,i.defaultValue,!0):Ba(s,!!i.multiple,i.multiple?[]:"",!1))}s[Eu]=i}catch(y){pt(t,t.return,y)}}break;case 6:if(lr(e,t),Vr(t),r&4){if(t.stateNode===null)throw Error(W(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(y){pt(t,t.return,y)}}break;case 3:if(lr(e,t),Vr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{gu(e.containerInfo)}catch(y){pt(t,t.return,y)}break;case 4:lr(e,t),Vr(t);break;case 13:lr(e,t),Vr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(v_=yt())),r&4&&Z0(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(en=(c=en)||d,lr(e,t),en=c):lr(e,t),Vr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(ee=t,d=t.child;d!==null;){for(h=ee=d;ee!==null;){switch(p=ee,f=p.child,p.tag){case 0:case 11:case 14:case 15:Kc(4,p,p.return);break;case 1:Ua(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(y){pt(r,n,y)}}break;case 5:Ua(p,p.return);break;case 22:if(p.memoizedState!==null){tT(h);continue}}f!==null?(f.return=p,ee=f):tT(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=uA("display",o))}catch(y){pt(t,t.return,y)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(y){pt(t,t.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:lr(e,t),Vr(t),r&4&&Z0(t);break;case 21:break;default:lr(e,t),Vr(t)}}function Vr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(L1(n)){var r=n;break e}n=n.return}throw Error(W(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(hu(s,""),r.flags&=-33);var i=J0(t);Ay(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=J0(t);by(t,a,o);break;default:throw Error(W(161))}}catch(l){pt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function cO(t,e,n){ee=t,U1(t)}function U1(t,e,n){for(var r=(t.mode&1)!==0;ee!==null;){var s=ee,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||nh;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||en;a=nh;var c=en;if(nh=o,(en=l)&&!c)for(ee=s;ee!==null;)o=ee,l=o.child,o.tag===22&&o.memoizedState!==null?nT(s):l!==null?(l.return=o,ee=l):nT(s);for(;i!==null;)ee=i,U1(i),i=i.sibling;ee=s,nh=a,en=c}eT(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ee=i):eT(t)}}function eT(t){for(;ee!==null;){var e=ee;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:en||Ep(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!en)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:ur(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&F0(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}F0(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&gu(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}en||e.flags&512&&Sy(e)}catch(p){pt(e,e.return,p)}}if(e===t){ee=null;break}if(n=e.sibling,n!==null){n.return=e.return,ee=n;break}ee=e.return}}function tT(t){for(;ee!==null;){var e=ee;if(e===t){ee=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ee=n;break}ee=e.return}}function nT(t){for(;ee!==null;){var e=ee;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ep(4,e)}catch(l){pt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){pt(e,s,l)}}var i=e.return;try{Sy(e)}catch(l){pt(e,i,l)}break;case 5:var o=e.return;try{Sy(e)}catch(l){pt(e,o,l)}}}catch(l){pt(e,e.return,l)}if(e===t){ee=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ee=a;break}ee=e.return}}var uO=Math.ceil,Ef=Rs.ReactCurrentDispatcher,g_=Rs.ReactCurrentOwner,tr=Rs.ReactCurrentBatchConfig,Me=0,jt=null,bt=null,qt=0,Nn=0,ja=Yi(0),kt=0,xu=null,Wo=0,Tp=0,y_=0,Gc=null,En=null,v_=0,fl=1/0,is=null,Tf=!1,xy=null,Ii=null,rh=!1,mi=null,If=0,Qc=0,Py=null,Vh=-1,Lh=0;function dn(){return Me&6?yt():Vh!==-1?Vh:Vh=yt()}function Si(t){return t.mode&1?Me&2&&qt!==0?qt&-qt:K2.transition!==null?(Lh===0&&(Lh=IA()),Lh):(t=$e,t!==0||(t=window.event,t=t===void 0?16:CA(t.type)),t):1}function _r(t,e,n,r){if(50<Qc)throw Qc=0,Py=null,Error(W(185));td(t,n,r),(!(Me&2)||t!==jt)&&(t===jt&&(!(Me&2)&&(Tp|=n),kt===4&&ni(t,qt)),Rn(t,r),n===1&&Me===0&&!(e.mode&1)&&(fl=yt()+500,vp&&Xi()))}function Rn(t,e){var n=t.callbackNode;KN(t,e);var r=of(t,t===jt?qt:0);if(r===0)n!==null&&d0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&d0(n),e===1)t.tag===0?W2(rT.bind(null,t)):QA(rT.bind(null,t)),$2(function(){!(Me&6)&&Xi()}),n=null;else{switch(SA(r)){case 1:n=qv;break;case 4:n=EA;break;case 16:n=sf;break;case 536870912:n=TA;break;default:n=sf}n=K1(n,j1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function j1(t,e){if(Vh=-1,Lh=0,Me&6)throw Error(W(327));var n=t.callbackNode;if(Wa()&&t.callbackNode!==n)return null;var r=of(t,t===jt?qt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Sf(t,r);else{e=r;var s=Me;Me|=2;var i=$1();(jt!==t||qt!==e)&&(is=null,fl=yt()+500,Lo(t,e));do try{fO();break}catch(a){B1(t,a)}while(!0);r_(),Ef.current=i,Me=s,bt!==null?e=0:(jt=null,qt=0,e=kt)}if(e!==0){if(e===2&&(s=ty(t),s!==0&&(r=s,e=Ry(t,s))),e===1)throw n=xu,Lo(t,0),ni(t,r),Rn(t,yt()),n;if(e===6)ni(t,r);else{if(s=t.current.alternate,!(r&30)&&!dO(s)&&(e=Sf(t,r),e===2&&(i=ty(t),i!==0&&(r=i,e=Ry(t,i))),e===1))throw n=xu,Lo(t,0),ni(t,r),Rn(t,yt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(W(345));case 2:fo(t,En,is);break;case 3:if(ni(t,r),(r&130023424)===r&&(e=v_+500-yt(),10<e)){if(of(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){dn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=cy(fo.bind(null,t,En,is),e);break}fo(t,En,is);break;case 4:if(ni(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-vr(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=yt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*uO(r/1960))-r,10<r){t.timeoutHandle=cy(fo.bind(null,t,En,is),r);break}fo(t,En,is);break;case 5:fo(t,En,is);break;default:throw Error(W(329))}}}return Rn(t,yt()),t.callbackNode===n?j1.bind(null,t):null}function Ry(t,e){var n=Gc;return t.current.memoizedState.isDehydrated&&(Lo(t,e).flags|=256),t=Sf(t,e),t!==2&&(e=En,En=n,e!==null&&Cy(e)),t}function Cy(t){En===null?En=t:En.push.apply(En,t)}function dO(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Tr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ni(t,e){for(e&=~y_,e&=~Tp,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-vr(e),r=1<<n;t[n]=-1,e&=~r}}function rT(t){if(Me&6)throw Error(W(327));Wa();var e=of(t,0);if(!(e&1))return Rn(t,yt()),null;var n=Sf(t,e);if(t.tag!==0&&n===2){var r=ty(t);r!==0&&(e=r,n=Ry(t,r))}if(n===1)throw n=xu,Lo(t,0),ni(t,e),Rn(t,yt()),n;if(n===6)throw Error(W(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,fo(t,En,is),Rn(t,yt()),null}function __(t,e){var n=Me;Me|=1;try{return t(e)}finally{Me=n,Me===0&&(fl=yt()+500,vp&&Xi())}}function Ko(t){mi!==null&&mi.tag===0&&!(Me&6)&&Wa();var e=Me;Me|=1;var n=tr.transition,r=$e;try{if(tr.transition=null,$e=1,t)return t()}finally{$e=r,tr.transition=n,Me=e,!(Me&6)&&Xi()}}function w_(){Nn=ja.current,Ze(ja)}function Lo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,B2(n)),bt!==null)for(n=bt.return;n!==null;){var r=n;switch(e_(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&df();break;case 3:dl(),Ze(xn),Ze(sn),c_();break;case 5:l_(r);break;case 4:dl();break;case 13:Ze(lt);break;case 19:Ze(lt);break;case 10:s_(r.type._context);break;case 22:case 23:w_()}n=n.return}if(jt=t,bt=t=bi(t.current,null),qt=Nn=e,kt=0,xu=null,y_=Tp=Wo=0,En=Gc=null,So!==null){for(e=0;e<So.length;e++)if(n=So[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}So=null}return t}function B1(t,e){do{var n=bt;try{if(r_(),Dh.current=wf,_f){for(var r=ct.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}_f=!1}if(Ho=0,Ut=Rt=ct=null,Wc=!1,Su=0,g_.current=null,n===null||n.return===null){kt=1,xu=e,bt=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=qt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=q0(o);if(f!==null){f.flags&=-257,H0(f,o,a,i,e),f.mode&1&&z0(i,c,e),e=f,l=c;var v=e.updateQueue;if(v===null){var y=new Set;y.add(l),e.updateQueue=y}else v.add(l);break e}else{if(!(e&1)){z0(i,c,e),E_();break e}l=Error(W(426))}}else if(nt&&a.mode&1){var E=q0(o);if(E!==null){!(E.flags&65536)&&(E.flags|=256),H0(E,o,a,i,e),t_(hl(l,a));break e}}i=l=hl(l,a),kt!==4&&(kt=2),Gc===null?Gc=[i]:Gc.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=S1(i,l,e);M0(i,w);break e;case 1:a=l;var _=i.type,I=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(Ii===null||!Ii.has(I)))){i.flags|=65536,e&=-e,i.lanes|=e;var D=b1(i,a,e);M0(i,D);break e}}i=i.return}while(i!==null)}q1(n)}catch(O){e=O,bt===n&&n!==null&&(bt=n=n.return);continue}break}while(!0)}function $1(){var t=Ef.current;return Ef.current=wf,t===null?wf:t}function E_(){(kt===0||kt===3||kt===2)&&(kt=4),jt===null||!(Wo&268435455)&&!(Tp&268435455)||ni(jt,qt)}function Sf(t,e){var n=Me;Me|=2;var r=$1();(jt!==t||qt!==e)&&(is=null,Lo(t,e));do try{hO();break}catch(s){B1(t,s)}while(!0);if(r_(),Me=n,Ef.current=r,bt!==null)throw Error(W(261));return jt=null,qt=0,kt}function hO(){for(;bt!==null;)z1(bt)}function fO(){for(;bt!==null&&!FN();)z1(bt)}function z1(t){var e=W1(t.alternate,t,Nn);t.memoizedProps=t.pendingProps,e===null?q1(t):bt=e,g_.current=null}function q1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=oO(n,e),n!==null){n.flags&=32767,bt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{kt=6,bt=null;return}}else if(n=iO(n,e,Nn),n!==null){bt=n;return}if(e=e.sibling,e!==null){bt=e;return}bt=e=t}while(e!==null);kt===0&&(kt=5)}function fo(t,e,n){var r=$e,s=tr.transition;try{tr.transition=null,$e=1,pO(t,e,n,r)}finally{tr.transition=s,$e=r}return null}function pO(t,e,n,r){do Wa();while(mi!==null);if(Me&6)throw Error(W(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(W(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(GN(t,i),t===jt&&(bt=jt=null,qt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||rh||(rh=!0,K1(sf,function(){return Wa(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=tr.transition,tr.transition=null;var o=$e;$e=1;var a=Me;Me|=4,g_.current=null,lO(t,n),F1(n,t),O2(ay),af=!!oy,ay=oy=null,t.current=n,cO(n),UN(),Me=a,$e=o,tr.transition=i}else t.current=n;if(rh&&(rh=!1,mi=t,If=s),i=t.pendingLanes,i===0&&(Ii=null),$N(n.stateNode),Rn(t,yt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Tf)throw Tf=!1,t=xy,xy=null,t;return If&1&&t.tag!==0&&Wa(),i=t.pendingLanes,i&1?t===Py?Qc++:(Qc=0,Py=t):Qc=0,Xi(),null}function Wa(){if(mi!==null){var t=SA(If),e=tr.transition,n=$e;try{if(tr.transition=null,$e=16>t?16:t,mi===null)var r=!1;else{if(t=mi,mi=null,If=0,Me&6)throw Error(W(331));var s=Me;for(Me|=4,ee=t.current;ee!==null;){var i=ee,o=i.child;if(ee.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ee=c;ee!==null;){var d=ee;switch(d.tag){case 0:case 11:case 15:Kc(8,d,i)}var h=d.child;if(h!==null)h.return=d,ee=h;else for(;ee!==null;){d=ee;var p=d.sibling,f=d.return;if(V1(d),d===c){ee=null;break}if(p!==null){p.return=f,ee=p;break}ee=f}}}var v=i.alternate;if(v!==null){var y=v.child;if(y!==null){v.child=null;do{var E=y.sibling;y.sibling=null,y=E}while(y!==null)}}ee=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ee=o;else e:for(;ee!==null;){if(i=ee,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Kc(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,ee=w;break e}ee=i.return}}var _=t.current;for(ee=_;ee!==null;){o=ee;var I=o.child;if(o.subtreeFlags&2064&&I!==null)I.return=o,ee=I;else e:for(o=_;ee!==null;){if(a=ee,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ep(9,a)}}catch(O){pt(a,a.return,O)}if(a===o){ee=null;break e}var D=a.sibling;if(D!==null){D.return=a.return,ee=D;break e}ee=a.return}}if(Me=s,Xi(),Kr&&typeof Kr.onPostCommitFiberRoot=="function")try{Kr.onPostCommitFiberRoot(fp,t)}catch{}r=!0}return r}finally{$e=n,tr.transition=e}}return!1}function sT(t,e,n){e=hl(n,e),e=S1(t,e,1),t=Ti(t,e,1),e=dn(),t!==null&&(td(t,1,e),Rn(t,e))}function pt(t,e,n){if(t.tag===3)sT(t,t,n);else for(;e!==null;){if(e.tag===3){sT(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ii===null||!Ii.has(r))){t=hl(n,t),t=b1(e,t,1),e=Ti(e,t,1),t=dn(),e!==null&&(td(e,1,t),Rn(e,t));break}}e=e.return}}function mO(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=dn(),t.pingedLanes|=t.suspendedLanes&n,jt===t&&(qt&n)===n&&(kt===4||kt===3&&(qt&130023424)===qt&&500>yt()-v_?Lo(t,0):y_|=n),Rn(t,e)}function H1(t,e){e===0&&(t.mode&1?(e=Kd,Kd<<=1,!(Kd&130023424)&&(Kd=4194304)):e=1);var n=dn();t=Es(t,e),t!==null&&(td(t,e,n),Rn(t,n))}function gO(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),H1(t,n)}function yO(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(W(314))}r!==null&&r.delete(e),H1(t,n)}var W1;W1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||xn.current)In=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return In=!1,sO(t,e,n);In=!!(t.flags&131072)}else In=!1,nt&&e.flags&1048576&&YA(e,pf,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Oh(t,e),t=e.pendingProps;var s=ll(e,sn.current);Ha(e,n),s=d_(null,e,r,t,s,n);var i=h_();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Pn(r)?(i=!0,hf(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,o_(e),s.updater=wp,e.stateNode=s,s._reactInternals=e,gy(e,r,t,n),e=_y(null,e,r,!0,i,n)):(e.tag=0,nt&&i&&Zv(e),cn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Oh(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=_O(r),t=ur(r,t),s){case 0:e=vy(null,e,r,t,n);break e;case 1:e=G0(null,e,r,t,n);break e;case 11:e=W0(null,e,r,t,n);break e;case 14:e=K0(null,e,r,ur(r.type,t),n);break e}throw Error(W(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ur(r,s),vy(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ur(r,s),G0(t,e,r,s,n);case 3:e:{if(R1(e),t===null)throw Error(W(387));r=e.pendingProps,i=e.memoizedState,s=i.element,n1(t,e),yf(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=hl(Error(W(423)),e),e=Q0(t,e,r,n,s);break e}else if(r!==s){s=hl(Error(W(424)),e),e=Q0(t,e,r,n,s);break e}else for(Fn=Ei(e.stateNode.containerInfo.firstChild),Bn=e,nt=!0,gr=null,n=e1(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(cl(),r===s){e=Ts(t,e,n);break e}cn(t,e,r,n)}e=e.child}return e;case 5:return r1(e),t===null&&fy(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,ly(r,s)?o=null:i!==null&&ly(r,i)&&(e.flags|=32),P1(t,e),cn(t,e,o,n),e.child;case 6:return t===null&&fy(e),null;case 13:return C1(t,e,n);case 4:return a_(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ul(e,null,r,n):cn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ur(r,s),W0(t,e,r,s,n);case 7:return cn(t,e,e.pendingProps,n),e.child;case 8:return cn(t,e,e.pendingProps.children,n),e.child;case 12:return cn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ke(mf,r._currentValue),r._currentValue=o,i!==null)if(Tr(i.value,o)){if(i.children===s.children&&!xn.current){e=Ts(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=fs(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),py(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(W(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),py(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}cn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ha(e,n),s=sr(s),r=r(s),e.flags|=1,cn(t,e,r,n),e.child;case 14:return r=e.type,s=ur(r,e.pendingProps),s=ur(r.type,s),K0(t,e,r,s,n);case 15:return A1(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ur(r,s),Oh(t,e),e.tag=1,Pn(r)?(t=!0,hf(e)):t=!1,Ha(e,n),I1(e,r,s),gy(e,r,s,n),_y(null,e,r,!0,t,n);case 19:return k1(t,e,n);case 22:return x1(t,e,n)}throw Error(W(156,e.tag))};function K1(t,e){return wA(t,e)}function vO(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function er(t,e,n,r){return new vO(t,e,n,r)}function T_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function _O(t){if(typeof t=="function")return T_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Bv)return 11;if(t===$v)return 14}return 2}function bi(t,e){var n=t.alternate;return n===null?(n=er(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Mh(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")T_(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ca:return Mo(n.children,s,i,e);case jv:o=8,s|=8;break;case jg:return t=er(12,n,e,s|2),t.elementType=jg,t.lanes=i,t;case Bg:return t=er(13,n,e,s),t.elementType=Bg,t.lanes=i,t;case $g:return t=er(19,n,e,s),t.elementType=$g,t.lanes=i,t;case rA:return Ip(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case tA:o=10;break e;case nA:o=9;break e;case Bv:o=11;break e;case $v:o=14;break e;case Zs:o=16,r=null;break e}throw Error(W(130,t==null?t:typeof t,""))}return e=er(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Mo(t,e,n,r){return t=er(7,t,r,e),t.lanes=n,t}function Ip(t,e,n,r){return t=er(22,t,r,e),t.elementType=rA,t.lanes=n,t.stateNode={isHidden:!1},t}function ig(t,e,n){return t=er(6,t,null,e),t.lanes=n,t}function og(t,e,n){return e=er(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function wO(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jm(0),this.expirationTimes=jm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jm(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function I_(t,e,n,r,s,i,o,a,l){return t=new wO(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=er(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},o_(i),t}function EO(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ra,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function G1(t){if(!t)return Ni;t=t._reactInternals;e:{if(aa(t)!==t||t.tag!==1)throw Error(W(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Pn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(t.tag===1){var n=t.type;if(Pn(n))return GA(t,n,e)}return e}function Q1(t,e,n,r,s,i,o,a,l){return t=I_(n,r,!0,t,s,i,o,a,l),t.context=G1(null),n=t.current,r=dn(),s=Si(n),i=fs(r,s),i.callback=e??null,Ti(n,i,s),t.current.lanes=s,td(t,s,r),Rn(t,r),t}function Sp(t,e,n,r){var s=e.current,i=dn(),o=Si(s);return n=G1(n),e.context===null?e.context=n:e.pendingContext=n,e=fs(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ti(s,e,o),t!==null&&(_r(t,s,o,i),kh(t,s,o)),o}function bf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function iT(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function S_(t,e){iT(t,e),(t=t.alternate)&&iT(t,e)}function TO(){return null}var Y1=typeof reportError=="function"?reportError:function(t){console.error(t)};function b_(t){this._internalRoot=t}bp.prototype.render=b_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(W(409));Sp(t,e,null,null)};bp.prototype.unmount=b_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ko(function(){Sp(null,t,null,null)}),e[ws]=null}};function bp(t){this._internalRoot=t}bp.prototype.unstable_scheduleHydration=function(t){if(t){var e=xA();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ti.length&&e!==0&&e<ti[n].priority;n++);ti.splice(n,0,t),n===0&&RA(t)}};function A_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ap(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function oT(){}function IO(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=bf(o);i.call(c)}}var o=Q1(e,r,t,0,null,!1,!1,"",oT);return t._reactRootContainer=o,t[ws]=o.current,_u(t.nodeType===8?t.parentNode:t),Ko(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=bf(l);a.call(c)}}var l=I_(t,0,!1,null,null,!1,!1,"",oT);return t._reactRootContainer=l,t[ws]=l.current,_u(t.nodeType===8?t.parentNode:t),Ko(function(){Sp(e,l,n,r)}),l}function xp(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=bf(o);a.call(l)}}Sp(e,o,t,s)}else o=IO(n,e,t,s,r);return bf(o)}bA=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Nc(e.pendingLanes);n!==0&&(Hv(e,n|1),Rn(e,yt()),!(Me&6)&&(fl=yt()+500,Xi()))}break;case 13:Ko(function(){var r=Es(t,1);if(r!==null){var s=dn();_r(r,t,1,s)}}),S_(t,1)}};Wv=function(t){if(t.tag===13){var e=Es(t,134217728);if(e!==null){var n=dn();_r(e,t,134217728,n)}S_(t,134217728)}};AA=function(t){if(t.tag===13){var e=Si(t),n=Es(t,e);if(n!==null){var r=dn();_r(n,t,e,r)}S_(t,e)}};xA=function(){return $e};PA=function(t,e){var n=$e;try{return $e=t,e()}finally{$e=n}};Jg=function(t,e,n){switch(e){case"input":if(Hg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=yp(r);if(!s)throw Error(W(90));iA(r),Hg(r,s)}}}break;case"textarea":aA(t,n);break;case"select":e=n.value,e!=null&&Ba(t,!!n.multiple,e,!1)}};pA=__;mA=Ko;var SO={usingClientEntryPoint:!1,Events:[rd,Oa,yp,hA,fA,__]},Tc={findFiberByHostInstance:Io,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},bO={bundleType:Tc.bundleType,version:Tc.version,rendererPackageName:Tc.rendererPackageName,rendererConfig:Tc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=vA(t),t===null?null:t.stateNode},findFiberByHostInstance:Tc.findFiberByHostInstance||TO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sh.isDisabled&&sh.supportsFiber)try{fp=sh.inject(bO),Kr=sh}catch{}}Wn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=SO;Wn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!A_(e))throw Error(W(200));return EO(t,e,null,n)};Wn.createRoot=function(t,e){if(!A_(t))throw Error(W(299));var n=!1,r="",s=Y1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=I_(t,1,!1,null,null,n,!1,r,s),t[ws]=e.current,_u(t.nodeType===8?t.parentNode:t),new b_(e)};Wn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(W(188)):(t=Object.keys(t).join(","),Error(W(268,t)));return t=vA(e),t=t===null?null:t.stateNode,t};Wn.flushSync=function(t){return Ko(t)};Wn.hydrate=function(t,e,n){if(!Ap(e))throw Error(W(200));return xp(null,t,e,!0,n)};Wn.hydrateRoot=function(t,e,n){if(!A_(t))throw Error(W(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Y1;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Q1(e,null,t,1,n??null,s,!1,i,o),t[ws]=e.current,_u(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new bp(e)};Wn.render=function(t,e,n){if(!Ap(e))throw Error(W(200));return xp(null,t,e,!1,n)};Wn.unmountComponentAtNode=function(t){if(!Ap(t))throw Error(W(40));return t._reactRootContainer?(Ko(function(){xp(null,null,t,!1,function(){t._reactRootContainer=null,t[ws]=null})}),!0):!1};Wn.unstable_batchedUpdates=__;Wn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ap(n))throw Error(W(200));if(t==null||t._reactInternals===void 0)throw Error(W(38));return xp(t,e,n,!1,r)};Wn.version="18.3.1-next-f1338f8080-20240426";function X1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(X1)}catch(t){console.error(t)}}X1(),Xb.exports=Wn;var id=Xb.exports;const J1=Fb(id);var Z1,aT=id;Z1=aT.createRoot,aT.hydrateRoot;const AO="modulepreload",xO=function(t,e){return new URL(t,e).href},lT={},Oe=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=xO(c,r),c in lT)return;lT[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(!!r)for(let v=o.length-1;v>=0;v--){const y=o[v];if(y.href===c&&(!d||y.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${h}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":AO,d||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),d)return new Promise((v,y)=>{f.addEventListener("load",v),f.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},PO=1,RO=1e6;let ag=0;function CO(){return ag=(ag+1)%Number.MAX_SAFE_INTEGER,ag.toString()}const lg=new Map,cT=t=>{if(lg.has(t))return;const e=setTimeout(()=>{lg.delete(t),Yc({type:"REMOVE_TOAST",toastId:t})},RO);lg.set(t,e)},kO=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,PO)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?cT(n):t.toasts.forEach(r=>{cT(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Fh=[];let Uh={toasts:[]};function Yc(t){Uh=kO(Uh,t),Fh.forEach(e=>{e(Uh)})}function DO({...t}){const e=CO(),n=s=>Yc({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>Yc({type:"DISMISS_TOAST",toastId:e});return Yc({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function ex(){const[t,e]=x.useState(Uh);return x.useEffect(()=>(Fh.push(e),()=>{const n=Fh.indexOf(e);n>-1&&Fh.splice(n,1)}),[t]),{...t,toast:DO,dismiss:n=>Yc({type:"DISMISS_TOAST",toastId:n})}}function Ct(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function uT(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function tx(...t){return e=>{let n=!1;const r=t.map(s=>{const i=uT(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():uT(t[s],null)}}}}function Ir(...t){return x.useCallback(tx(...t),t)}function x8(t,e){const n=x.createContext(e),r=i=>{const{children:o,...a}=i,l=x.useMemo(()=>a,Object.values(a));return A.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function s(i){const o=x.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function Pp(t,e=[]){let n=[];function r(i,o){const a=x.createContext(o),l=n.length;n=[...n,o];const c=h=>{var w;const{scope:p,children:f,...v}=h,y=((w=p==null?void 0:p[t])==null?void 0:w[l])||a,E=x.useMemo(()=>v,Object.values(v));return A.jsx(y.Provider,{value:E,children:f})};c.displayName=i+"Provider";function d(h,p){var y;const f=((y=p==null?void 0:p[t])==null?void 0:y[l])||a,v=x.useContext(f);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[c,d]}const s=()=>{const i=n.map(o=>x.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return x.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,NO(s,...e)]}function NO(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(i)[`__scope${c}`];return{...a,...h}},{});return x.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function Af(t){const e=VO(t),n=x.forwardRef((r,s)=>{const{children:i,...o}=r,a=x.Children.toArray(i),l=a.find(MO);if(l){const c=l.props.children,d=a.map(h=>h===l?x.Children.count(c)>1?x.Children.only(null):x.isValidElement(c)?c.props.children:null:h);return A.jsx(e,{...o,ref:s,children:x.isValidElement(c)?x.cloneElement(c,void 0,d):null})}return A.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var OO=Af("Slot");function VO(t){const e=x.forwardRef((n,r)=>{const{children:s,...i}=n;if(x.isValidElement(s)){const o=UO(s),a=FO(i,s.props);return s.type!==x.Fragment&&(a.ref=r?tx(r,o):o),x.cloneElement(s,a)}return x.Children.count(s)>1?x.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var nx=Symbol("radix.slottable");function LO(t){const e=({children:n})=>A.jsx(A.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=nx,e}function MO(t){return x.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===nx}function FO(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{const l=i(...a);return s(...a),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function UO(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function jO(t){const e=t+"CollectionProvider",[n,r]=Pp(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=y=>{const{scope:E,children:w}=y,_=z.useRef(null),I=z.useRef(new Map).current;return A.jsx(s,{scope:E,itemMap:I,collectionRef:_,children:w})};o.displayName=e;const a=t+"CollectionSlot",l=Af(a),c=z.forwardRef((y,E)=>{const{scope:w,children:_}=y,I=i(a,w),D=Ir(E,I.collectionRef);return A.jsx(l,{ref:D,children:_})});c.displayName=a;const d=t+"CollectionItemSlot",h="data-radix-collection-item",p=Af(d),f=z.forwardRef((y,E)=>{const{scope:w,children:_,...I}=y,D=z.useRef(null),O=Ir(E,D),V=i(d,w);return z.useEffect(()=>(V.itemMap.set(D,{ref:D,...I}),()=>void V.itemMap.delete(D))),A.jsx(p,{[h]:"",ref:O,children:_})});f.displayName=d;function v(y){const E=i(t+"CollectionConsumer",y);return z.useCallback(()=>{const _=E.collectionRef.current;if(!_)return[];const I=Array.from(_.querySelectorAll(`[${h}]`));return Array.from(E.itemMap.values()).sort((V,S)=>I.indexOf(V.ref.current)-I.indexOf(S.ref.current))},[E.collectionRef,E.itemMap])}return[{Provider:o,Slot:c,ItemSlot:f},v,r]}var BO=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Cn=BO.reduce((t,e)=>{const n=Af(`Primitive.${e}`),r=x.forwardRef((s,i)=>{const{asChild:o,...a}=s,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),A.jsx(l,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function rx(t,e){t&&id.flushSync(()=>t.dispatchEvent(e))}function Oi(t){const e=x.useRef(t);return x.useEffect(()=>{e.current=t}),x.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function $O(t,e=globalThis==null?void 0:globalThis.document){const n=Oi(t);x.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var zO="DismissableLayer",ky="dismissableLayer.update",qO="dismissableLayer.pointerDownOutside",HO="dismissableLayer.focusOutside",dT,sx=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),x_=x.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=t,c=x.useContext(sx),[d,h]=x.useState(null),p=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,f]=x.useState({}),v=Ir(e,S=>h(S)),y=Array.from(c.layers),[E]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),w=y.indexOf(E),_=d?y.indexOf(d):-1,I=c.layersWithOutsidePointerEventsDisabled.size>0,D=_>=w,O=KO(S=>{const T=S.target,b=[...c.branches].some(k=>k.contains(T));!D||b||(s==null||s(S),o==null||o(S),S.defaultPrevented||a==null||a())},p),V=GO(S=>{const T=S.target;[...c.branches].some(k=>k.contains(T))||(i==null||i(S),o==null||o(S),S.defaultPrevented||a==null||a())},p);return $O(S=>{_===c.layers.size-1&&(r==null||r(S),!S.defaultPrevented&&a&&(S.preventDefault(),a()))},p),x.useEffect(()=>{if(d)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(dT=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),hT(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=dT)}},[d,p,n,c]),x.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),hT())},[d,c]),x.useEffect(()=>{const S=()=>f({});return document.addEventListener(ky,S),()=>document.removeEventListener(ky,S)},[]),A.jsx(Cn.div,{...l,ref:v,style:{pointerEvents:I?D?"auto":"none":void 0,...t.style},onFocusCapture:Ct(t.onFocusCapture,V.onFocusCapture),onBlurCapture:Ct(t.onBlurCapture,V.onBlurCapture),onPointerDownCapture:Ct(t.onPointerDownCapture,O.onPointerDownCapture)})});x_.displayName=zO;var WO="DismissableLayerBranch",ix=x.forwardRef((t,e)=>{const n=x.useContext(sx),r=x.useRef(null),s=Ir(e,r);return x.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),A.jsx(Cn.div,{...t,ref:s})});ix.displayName=WO;function KO(t,e=globalThis==null?void 0:globalThis.document){const n=Oi(t),r=x.useRef(!1),s=x.useRef(()=>{});return x.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){ox(qO,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function GO(t,e=globalThis==null?void 0:globalThis.document){const n=Oi(t),r=x.useRef(!1);return x.useEffect(()=>{const s=i=>{i.target&&!r.current&&ox(HO,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function hT(){const t=new CustomEvent(ky);document.dispatchEvent(t)}function ox(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?rx(s,i):s.dispatchEvent(i)}var QO=x_,YO=ix,Vi=globalThis!=null&&globalThis.document?x.useLayoutEffect:()=>{},XO="Portal",ax=x.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,i]=x.useState(!1);Vi(()=>i(!0),[]);const o=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?J1.createPortal(A.jsx(Cn.div,{...r,ref:e}),o):null});ax.displayName=XO;function JO(t,e){return x.useReducer((n,r)=>e[n][r]??n,t)}var P_=t=>{const{present:e,children:n}=t,r=ZO(e),s=typeof n=="function"?n({present:r.isPresent}):x.Children.only(n),i=Ir(r.ref,eV(s));return typeof n=="function"||r.isPresent?x.cloneElement(s,{ref:i}):null};P_.displayName="Presence";function ZO(t){const[e,n]=x.useState(),r=x.useRef(null),s=x.useRef(t),i=x.useRef("none"),o=t?"mounted":"unmounted",[a,l]=JO(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const c=ih(r.current);i.current=a==="mounted"?c:"none"},[a]),Vi(()=>{const c=r.current,d=s.current;if(d!==t){const p=i.current,f=ih(c);t?l("MOUNT"):f==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(d&&p!==f?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),Vi(()=>{if(e){let c;const d=e.ownerDocument.defaultView??window,h=f=>{const y=ih(r.current).includes(CSS.escape(f.animationName));if(f.target===e&&y&&(l("ANIMATION_END"),!s.current)){const E=e.style.animationFillMode;e.style.animationFillMode="forwards",c=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=E)})}},p=f=>{f.target===e&&(i.current=ih(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(c),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:x.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function ih(t){return(t==null?void 0:t.animationName)||"none"}function eV(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var tV=Qb[" useInsertionEffect ".trim().toString()]||Vi;function nV({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,o]=rV({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:s;{const d=x.useRef(t!==void 0);x.useEffect(()=>{const h=d.current;h!==a&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=a},[a,r])}const c=x.useCallback(d=>{var h;if(a){const p=sV(d)?d(t):d;p!==t&&((h=o.current)==null||h.call(o,p))}else i(d)},[a,t,i,o]);return[l,c]}function rV({defaultProp:t,onChange:e}){const[n,r]=x.useState(t),s=x.useRef(n),i=x.useRef(e);return tV(()=>{i.current=e},[e]),x.useEffect(()=>{var o;s.current!==n&&((o=i.current)==null||o.call(i,n),s.current=n)},[n,s]),[n,r,i]}function sV(t){return typeof t=="function"}var iV=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),oV="VisuallyHidden",Rp=x.forwardRef((t,e)=>A.jsx(Cn.span,{...t,ref:e,style:{...iV,...t.style}}));Rp.displayName=oV;var aV=Rp,R_="ToastProvider",[C_,lV,cV]=jO("Toast"),[lx]=Pp("Toast",[cV]),[uV,Cp]=lx(R_),cx=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[a,l]=x.useState(null),[c,d]=x.useState(0),h=x.useRef(!1),p=x.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${R_}\`. Expected non-empty \`string\`.`),A.jsx(C_.Provider,{scope:e,children:A.jsx(uV,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:x.useCallback(()=>d(f=>f+1),[]),onToastRemove:x.useCallback(()=>d(f=>f-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:p,children:o})})};cx.displayName=R_;var ux="ToastViewport",dV=["F8"],Dy="toast.viewportPause",Ny="toast.viewportResume",dx=x.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=dV,label:s="Notifications ({hotkey})",...i}=t,o=Cp(ux,n),a=lV(n),l=x.useRef(null),c=x.useRef(null),d=x.useRef(null),h=x.useRef(null),p=Ir(e,h,o.onViewportChange),f=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),v=o.toastCount>0;x.useEffect(()=>{const E=w=>{var I;r.length!==0&&r.every(D=>w[D]||w.code===D)&&((I=h.current)==null||I.focus())};return document.addEventListener("keydown",E),()=>document.removeEventListener("keydown",E)},[r]),x.useEffect(()=>{const E=l.current,w=h.current;if(v&&E&&w){const _=()=>{if(!o.isClosePausedRef.current){const V=new CustomEvent(Dy);w.dispatchEvent(V),o.isClosePausedRef.current=!0}},I=()=>{if(o.isClosePausedRef.current){const V=new CustomEvent(Ny);w.dispatchEvent(V),o.isClosePausedRef.current=!1}},D=V=>{!E.contains(V.relatedTarget)&&I()},O=()=>{E.contains(document.activeElement)||I()};return E.addEventListener("focusin",_),E.addEventListener("focusout",D),E.addEventListener("pointermove",_),E.addEventListener("pointerleave",O),window.addEventListener("blur",_),window.addEventListener("focus",I),()=>{E.removeEventListener("focusin",_),E.removeEventListener("focusout",D),E.removeEventListener("pointermove",_),E.removeEventListener("pointerleave",O),window.removeEventListener("blur",_),window.removeEventListener("focus",I)}}},[v,o.isClosePausedRef]);const y=x.useCallback(({tabbingDirection:E})=>{const _=a().map(I=>{const D=I.ref.current,O=[D,...SV(D)];return E==="forwards"?O:O.reverse()});return(E==="forwards"?_.reverse():_).flat()},[a]);return x.useEffect(()=>{const E=h.current;if(E){const w=_=>{var O,V,S;const I=_.altKey||_.ctrlKey||_.metaKey;if(_.key==="Tab"&&!I){const T=document.activeElement,b=_.shiftKey;if(_.target===E&&b){(O=c.current)==null||O.focus();return}const N=y({tabbingDirection:b?"backwards":"forwards"}),C=N.findIndex(q=>q===T);cg(N.slice(C+1))?_.preventDefault():b?(V=c.current)==null||V.focus():(S=d.current)==null||S.focus()}};return E.addEventListener("keydown",w),()=>E.removeEventListener("keydown",w)}},[a,y]),A.jsxs(YO,{ref:l,role:"region","aria-label":s.replace("{hotkey}",f),tabIndex:-1,style:{pointerEvents:v?void 0:"none"},children:[v&&A.jsx(Oy,{ref:c,onFocusFromOutsideViewport:()=>{const E=y({tabbingDirection:"forwards"});cg(E)}}),A.jsx(C_.Slot,{scope:n,children:A.jsx(Cn.ol,{tabIndex:-1,...i,ref:p})}),v&&A.jsx(Oy,{ref:d,onFocusFromOutsideViewport:()=>{const E=y({tabbingDirection:"backwards"});cg(E)}})]})});dx.displayName=ux;var hx="ToastFocusProxy",Oy=x.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=Cp(hx,n);return A.jsx(Rp,{tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=i.viewport)!=null&&c.contains(a))&&r()}})});Oy.displayName=hx;var od="Toast",hV="toast.swipeStart",fV="toast.swipeMove",pV="toast.swipeCancel",mV="toast.swipeEnd",fx=x.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[a,l]=nV({prop:r,defaultProp:s??!0,onChange:i,caller:od});return A.jsx(P_,{present:n||a,children:A.jsx(vV,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:Oi(t.onPause),onResume:Oi(t.onResume),onSwipeStart:Ct(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Ct(t.onSwipeMove,c=>{const{x:d,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Ct(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Ct(t.onSwipeEnd,c=>{const{x:d,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),l(!1)})})})});fx.displayName=od;var[gV,yV]=lx(od,{onClose(){}}),vV=x.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:p,onSwipeEnd:f,...v}=t,y=Cp(od,n),[E,w]=x.useState(null),_=Ir(e,q=>w(q)),I=x.useRef(null),D=x.useRef(null),O=s||y.duration,V=x.useRef(0),S=x.useRef(O),T=x.useRef(0),{onToastAdd:b,onToastRemove:k}=y,P=Oi(()=>{var Z;(E==null?void 0:E.contains(document.activeElement))&&((Z=y.viewport)==null||Z.focus()),o()}),N=x.useCallback(q=>{!q||q===1/0||(window.clearTimeout(T.current),V.current=new Date().getTime(),T.current=window.setTimeout(P,q))},[P]);x.useEffect(()=>{const q=y.viewport;if(q){const Z=()=>{N(S.current),c==null||c()},ie=()=>{const G=new Date().getTime()-V.current;S.current=S.current-G,window.clearTimeout(T.current),l==null||l()};return q.addEventListener(Dy,ie),q.addEventListener(Ny,Z),()=>{q.removeEventListener(Dy,ie),q.removeEventListener(Ny,Z)}}},[y.viewport,O,l,c,N]),x.useEffect(()=>{i&&!y.isClosePausedRef.current&&N(O)},[i,O,y.isClosePausedRef,N]),x.useEffect(()=>(b(),()=>k()),[b,k]);const C=x.useMemo(()=>E?wx(E):null,[E]);return y.viewport?A.jsxs(A.Fragment,{children:[C&&A.jsx(_V,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:C}),A.jsx(gV,{scope:n,onClose:P,children:id.createPortal(A.jsx(C_.ItemSlot,{scope:n,children:A.jsx(QO,{asChild:!0,onEscapeKeyDown:Ct(a,()=>{y.isFocusedToastEscapeKeyDownRef.current||P(),y.isFocusedToastEscapeKeyDownRef.current=!1}),children:A.jsx(Cn.li,{tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":y.swipeDirection,...v,ref:_,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Ct(t.onKeyDown,q=>{q.key==="Escape"&&(a==null||a(q.nativeEvent),q.nativeEvent.defaultPrevented||(y.isFocusedToastEscapeKeyDownRef.current=!0,P()))}),onPointerDown:Ct(t.onPointerDown,q=>{q.button===0&&(I.current={x:q.clientX,y:q.clientY})}),onPointerMove:Ct(t.onPointerMove,q=>{if(!I.current)return;const Z=q.clientX-I.current.x,ie=q.clientY-I.current.y,G=!!D.current,F=["left","right"].includes(y.swipeDirection),U=["left","up"].includes(y.swipeDirection)?Math.min:Math.max,Y=F?U(0,Z):0,de=F?0:U(0,ie),ne=q.pointerType==="touch"?10:2,ce={x:Y,y:de},le={originalEvent:q,delta:ce};G?(D.current=ce,oh(fV,h,le,{discrete:!1})):fT(ce,y.swipeDirection,ne)?(D.current=ce,oh(hV,d,le,{discrete:!1}),q.target.setPointerCapture(q.pointerId)):(Math.abs(Z)>ne||Math.abs(ie)>ne)&&(I.current=null)}),onPointerUp:Ct(t.onPointerUp,q=>{const Z=D.current,ie=q.target;if(ie.hasPointerCapture(q.pointerId)&&ie.releasePointerCapture(q.pointerId),D.current=null,I.current=null,Z){const G=q.currentTarget,F={originalEvent:q,delta:Z};fT(Z,y.swipeDirection,y.swipeThreshold)?oh(mV,f,F,{discrete:!0}):oh(pV,p,F,{discrete:!0}),G.addEventListener("click",U=>U.preventDefault(),{once:!0})}})})})}),y.viewport)})]}):null}),_V=t=>{const{__scopeToast:e,children:n,...r}=t,s=Cp(od,e),[i,o]=x.useState(!1),[a,l]=x.useState(!1);return TV(()=>o(!0)),x.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:A.jsx(ax,{asChild:!0,children:A.jsx(Rp,{...r,children:i&&A.jsxs(A.Fragment,{children:[s.label," ",n]})})})},wV="ToastTitle",px=x.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return A.jsx(Cn.div,{...r,ref:e})});px.displayName=wV;var EV="ToastDescription",mx=x.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return A.jsx(Cn.div,{...r,ref:e})});mx.displayName=EV;var gx="ToastAction",yx=x.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?A.jsx(_x,{altText:n,asChild:!0,children:A.jsx(k_,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${gx}\`. Expected non-empty \`string\`.`),null)});yx.displayName=gx;var vx="ToastClose",k_=x.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=yV(vx,n);return A.jsx(_x,{asChild:!0,children:A.jsx(Cn.button,{type:"button",...r,ref:e,onClick:Ct(t.onClick,s.onClose)})})});k_.displayName=vx;var _x=x.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return A.jsx(Cn.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function wx(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),IV(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...wx(r))}}),e}function oh(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?rx(s,i):s.dispatchEvent(i)}var fT=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function TV(t=()=>{}){const e=Oi(t);Vi(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function IV(t){return t.nodeType===t.ELEMENT_NODE}function SV(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function cg(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var bV=cx,Ex=dx,Tx=fx,Ix=px,Sx=mx,bx=yx,Ax=k_;function xx(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=xx(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Px(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=xx(t))&&(r&&(r+=" "),r+=e);return r}const pT=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,mT=Px,Rx=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return mT(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const d=n==null?void 0:n[c],h=i==null?void 0:i[c];if(d===null)return null;const p=pT(d)||pT(h);return s[c][p]}),a=n&&Object.entries(n).reduce((c,d)=>{let[h,p]=d;return p===void 0||(c[h]=p),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,d)=>{let{class:h,className:p,...f}=d;return Object.entries(f).every(v=>{let[y,E]=v;return Array.isArray(E)?E.includes({...i,...a}[y]):{...i,...a}[y]===E})?[...c,h,p]:c},[]);return mT(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AV=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Cx=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var xV={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PV=x.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},l)=>x.createElement("svg",{ref:l,...xV,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:Cx("lucide",s),...a},[...o.map(([c,d])=>x.createElement(c,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=(t,e)=>{const n=x.forwardRef(({className:r,...s},i)=>x.createElement(PV,{ref:i,iconNode:e,className:Cx(`lucide-${AV(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RV=ot("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CV=ot("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kV=ot("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DV=ot("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NV=ot("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OV=ot("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VV=ot("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LV=ot("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MV=ot("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FV=ot("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gT=ot("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yT=ot("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UV=ot("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jV=ot("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vT=ot("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ug=ot("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kx=ot("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _T=ot("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BV=ot("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $V=ot("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zV=ot("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qV=ot("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HV=ot("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dx=ot("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),D_="-",WV=t=>{const e=GV(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(D_);return a[0]===""&&a.length!==1&&a.shift(),Nx(a,e)||KV(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},Nx=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?Nx(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(D_);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},wT=/^\[(.+)\]$/,KV=t=>{if(wT.test(t)){const e=wT.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},GV=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return YV(Object.entries(t.classGroups),n).forEach(([i,o])=>{Vy(o,r,i,e)}),r},Vy=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:ET(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(QV(s)){Vy(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{Vy(o,ET(e,i),n,r)})})},ET=(t,e)=>{let n=t;return e.split(D_).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},QV=t=>t.isThemeGetter,YV=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[n,s]}):t,XV=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},Ox="!",JV=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=a=>{const l=[];let c=0,d=0,h;for(let E=0;E<a.length;E++){let w=a[E];if(c===0){if(w===s&&(r||a.slice(E,E+i)===e)){l.push(a.slice(d,E)),d=E+i;continue}if(w==="/"){h=E;continue}}w==="["?c++:w==="]"&&c--}const p=l.length===0?a:a.substring(d),f=p.startsWith(Ox),v=f?p.substring(1):p,y=h&&h>d?h-d:void 0;return{modifiers:l,hasImportantModifier:f,baseClassName:v,maybePostfixModifierPosition:y}};return n?a=>n({className:a,parseClassName:o}):o},ZV=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},eL=t=>({cache:XV(t.cacheSize),parseClassName:JV(t),...WV(t)}),tL=/\s+/,nL=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(tL);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:d,hasImportantModifier:h,baseClassName:p,maybePostfixModifierPosition:f}=n(c);let v=!!f,y=r(v?p.substring(0,f):p);if(!y){if(!v){a=c+(a.length>0?" "+a:a);continue}if(y=r(p),!y){a=c+(a.length>0?" "+a:a);continue}v=!1}const E=ZV(d).join(":"),w=h?E+Ox:E,_=w+y;if(i.includes(_))continue;i.push(_);const I=s(y,v);for(let D=0;D<I.length;++D){const O=I[D];i.push(w+O)}a=c+(a.length>0?" "+a:a)}return a};function rL(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=Vx(e))&&(r&&(r+=" "),r+=n);return r}const Vx=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=Vx(t[r]))&&(n&&(n+=" "),n+=e);return n};function sL(t,...e){let n,r,s,i=o;function o(l){const c=e.reduce((d,h)=>h(d),t());return n=eL(c),r=n.cache.get,s=n.cache.set,i=a,a(l)}function a(l){const c=r(l);if(c)return c;const d=nL(l,n);return s(l,d),d}return function(){return i(rL.apply(null,arguments))}}const Xe=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},Lx=/^\[(?:([a-z-]+):)?(.+)\]$/i,iL=/^\d+\/\d+$/,oL=new Set(["px","full","screen"]),aL=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,lL=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,cL=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,uL=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,dL=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,rs=t=>Ka(t)||oL.has(t)||iL.test(t),Ws=t=>jl(t,"length",_L),Ka=t=>!!t&&!Number.isNaN(Number(t)),dg=t=>jl(t,"number",Ka),Ic=t=>!!t&&Number.isInteger(Number(t)),hL=t=>t.endsWith("%")&&Ka(t.slice(0,-1)),_e=t=>Lx.test(t),Ks=t=>aL.test(t),fL=new Set(["length","size","percentage"]),pL=t=>jl(t,fL,Mx),mL=t=>jl(t,"position",Mx),gL=new Set(["image","url"]),yL=t=>jl(t,gL,EL),vL=t=>jl(t,"",wL),Sc=()=>!0,jl=(t,e,n)=>{const r=Lx.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},_L=t=>lL.test(t)&&!cL.test(t),Mx=()=>!1,wL=t=>uL.test(t),EL=t=>dL.test(t),TL=()=>{const t=Xe("colors"),e=Xe("spacing"),n=Xe("blur"),r=Xe("brightness"),s=Xe("borderColor"),i=Xe("borderRadius"),o=Xe("borderSpacing"),a=Xe("borderWidth"),l=Xe("contrast"),c=Xe("grayscale"),d=Xe("hueRotate"),h=Xe("invert"),p=Xe("gap"),f=Xe("gradientColorStops"),v=Xe("gradientColorStopPositions"),y=Xe("inset"),E=Xe("margin"),w=Xe("opacity"),_=Xe("padding"),I=Xe("saturate"),D=Xe("scale"),O=Xe("sepia"),V=Xe("skew"),S=Xe("space"),T=Xe("translate"),b=()=>["auto","contain","none"],k=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto",_e,e],N=()=>[_e,e],C=()=>["",rs,Ws],q=()=>["auto",Ka,_e],Z=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ie=()=>["solid","dashed","dotted","double","none"],G=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],F=()=>["start","end","center","between","around","evenly","stretch"],U=()=>["","0",_e],Y=()=>["auto","avoid","all","avoid-page","page","left","right","column"],de=()=>[Ka,_e];return{cacheSize:500,separator:":",theme:{colors:[Sc],spacing:[rs,Ws],blur:["none","",Ks,_e],brightness:de(),borderColor:[t],borderRadius:["none","","full",Ks,_e],borderSpacing:N(),borderWidth:C(),contrast:de(),grayscale:U(),hueRotate:de(),invert:U(),gap:N(),gradientColorStops:[t],gradientColorStopPositions:[hL,Ws],inset:P(),margin:P(),opacity:de(),padding:N(),saturate:de(),scale:de(),sepia:U(),skew:de(),space:N(),translate:N()},classGroups:{aspect:[{aspect:["auto","square","video",_e]}],container:["container"],columns:[{columns:[Ks]}],"break-after":[{"break-after":Y()}],"break-before":[{"break-before":Y()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Z(),_e]}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:b()}],"overscroll-x":[{"overscroll-x":b()}],"overscroll-y":[{"overscroll-y":b()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ic,_e]}],basis:[{basis:P()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",_e]}],grow:[{grow:U()}],shrink:[{shrink:U()}],order:[{order:["first","last","none",Ic,_e]}],"grid-cols":[{"grid-cols":[Sc]}],"col-start-end":[{col:["auto",{span:["full",Ic,_e]},_e]}],"col-start":[{"col-start":q()}],"col-end":[{"col-end":q()}],"grid-rows":[{"grid-rows":[Sc]}],"row-start-end":[{row:["auto",{span:[Ic,_e]},_e]}],"row-start":[{"row-start":q()}],"row-end":[{"row-end":q()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",_e]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",_e]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...F()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...F(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...F(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[_]}],px:[{px:[_]}],py:[{py:[_]}],ps:[{ps:[_]}],pe:[{pe:[_]}],pt:[{pt:[_]}],pr:[{pr:[_]}],pb:[{pb:[_]}],pl:[{pl:[_]}],m:[{m:[E]}],mx:[{mx:[E]}],my:[{my:[E]}],ms:[{ms:[E]}],me:[{me:[E]}],mt:[{mt:[E]}],mr:[{mr:[E]}],mb:[{mb:[E]}],ml:[{ml:[E]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",_e,e]}],"min-w":[{"min-w":[_e,e,"min","max","fit"]}],"max-w":[{"max-w":[_e,e,"none","full","min","max","fit","prose",{screen:[Ks]},Ks]}],h:[{h:[_e,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[_e,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[_e,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[_e,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Ks,Ws]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",dg]}],"font-family":[{font:[Sc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",_e]}],"line-clamp":[{"line-clamp":["none",Ka,dg]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",rs,_e]}],"list-image":[{"list-image":["none",_e]}],"list-style-type":[{list:["none","disc","decimal",_e]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ie(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",rs,Ws]}],"underline-offset":[{"underline-offset":["auto",rs,_e]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",_e]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",_e]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Z(),mL]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",pL]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},yL]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...ie(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:ie()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...ie()]}],"outline-offset":[{"outline-offset":[rs,_e]}],"outline-w":[{outline:[rs,Ws]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:C()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[rs,Ws]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Ks,vL]}],"shadow-color":[{shadow:[Sc]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":[...G(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":G()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Ks,_e]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[I]}],sepia:[{sepia:[O]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[I]}],"backdrop-sepia":[{"backdrop-sepia":[O]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",_e]}],duration:[{duration:de()}],ease:[{ease:["linear","in","out","in-out",_e]}],delay:[{delay:de()}],animate:[{animate:["none","spin","ping","pulse","bounce",_e]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[D]}],"scale-x":[{"scale-x":[D]}],"scale-y":[{"scale-y":[D]}],rotate:[{rotate:[Ic,_e]}],"translate-x":[{"translate-x":[T]}],"translate-y":[{"translate-y":[T]}],"skew-x":[{"skew-x":[V]}],"skew-y":[{"skew-y":[V]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",_e]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",_e]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",_e]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[rs,Ws,dg]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},IL=sL(TL);function Cs(...t){return IL(Px(t))}const SL=bV,Fx=x.forwardRef(({className:t,...e},n)=>A.jsx(Ex,{ref:n,className:Cs("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));Fx.displayName=Ex.displayName;const bL=Rx("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Ux=x.forwardRef(({className:t,variant:e,...n},r)=>A.jsx(Tx,{ref:r,className:Cs(bL({variant:e}),t),...n}));Ux.displayName=Tx.displayName;const AL=x.forwardRef(({className:t,...e},n)=>A.jsx(bx,{ref:n,className:Cs("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));AL.displayName=bx.displayName;const jx=x.forwardRef(({className:t,...e},n)=>A.jsx(Ax,{ref:n,className:Cs("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:A.jsx(Dx,{className:"h-4 w-4"})}));jx.displayName=Ax.displayName;const Bx=x.forwardRef(({className:t,...e},n)=>A.jsx(Ix,{ref:n,className:Cs("text-sm font-semibold",t),...e}));Bx.displayName=Ix.displayName;const $x=x.forwardRef(({className:t,...e},n)=>A.jsx(Sx,{ref:n,className:Cs("text-sm opacity-90",t),...e}));$x.displayName=Sx.displayName;function xL(){const{toasts:t}=ex();return A.jsxs(SL,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return A.jsxs(Ux,{...i,children:[A.jsxs("div",{className:"grid gap-1",children:[n&&A.jsx(Bx,{children:n}),r&&A.jsx($x,{children:r})]}),s,A.jsx(jx,{})]},e)}),A.jsx(Fx,{})]})}var TT=["light","dark"],PL="(prefers-color-scheme: dark)",RL=x.createContext(void 0),CL={setTheme:t=>{},themes:[]},kL=()=>{var t;return(t=x.useContext(RL))!=null?t:CL};x.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:o,attrs:a,nonce:l})=>{let c=i==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(v=>`'${v}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=s?TT.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",p=(v,y=!1,E=!0)=>{let w=o?o[v]:v,_=y?v+"|| ''":`'${w}'`,I="";return s&&E&&!y&&TT.includes(v)&&(I+=`d.style.colorScheme = '${v}';`),n==="class"?y||w?I+=`c.add(${_})`:I+="null":w&&(I+=`d[s](n,${_})`),I},f=t?`!function(){${d}${p(t)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${c})){var t='${PL}',m=window.matchMedia(t);if(m.media!==t||m.matches){${p("dark")}}else{${p("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${p(o?"x[e]":"e",!0)}}${c?"":"else{"+p(i,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${p(o?"x[e]":"e",!0)}}else{${p(i,!1,!1)};}${h}}catch(t){}}();`;return x.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:f}})});var DL=t=>{switch(t){case"success":return VL;case"info":return ML;case"warning":return LL;case"error":return FL;default:return null}},NL=Array(12).fill(0),OL=({visible:t,className:e})=>z.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},z.createElement("div",{className:"sonner-spinner"},NL.map((n,r)=>z.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),VL=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),LL=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),ML=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),FL=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),UL=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},z.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),z.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),jL=()=>{let[t,e]=z.useState(document.hidden);return z.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},Ly=1,BL=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;let{message:r,...s}=e,i=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:Ly++,o=this.toasts.find(l=>l.id===i),a=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...e,id:i,title:r}),{...l,...e,id:i,dismissible:a,title:r}):l):this.addToast({title:r,...s,dismissible:a,id:i}),i},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),this.subscribers.forEach(n=>n({id:e,dismiss:!0})),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));let s=e instanceof Promise?e:e(),i=r!==void 0,o,a=s.then(async c=>{if(o=["resolve",c],z.isValidElement(c))i=!1,this.create({id:r,type:"default",message:c});else if(zL(c)&&!c.ok){i=!1;let d=typeof n.error=="function"?await n.error(`HTTP error! status: ${c.status}`):n.error,h=typeof n.description=="function"?await n.description(`HTTP error! status: ${c.status}`):n.description;this.create({id:r,type:"error",message:d,description:h})}else if(n.success!==void 0){i=!1;let d=typeof n.success=="function"?await n.success(c):n.success,h=typeof n.description=="function"?await n.description(c):n.description;this.create({id:r,type:"success",message:d,description:h})}}).catch(async c=>{if(o=["reject",c],n.error!==void 0){i=!1;let d=typeof n.error=="function"?await n.error(c):n.error,h=typeof n.description=="function"?await n.description(c):n.description;this.create({id:r,type:"error",message:d,description:h})}}).finally(()=>{var c;i&&(this.dismiss(r),r=void 0),(c=n.finally)==null||c.call(n)}),l=()=>new Promise((c,d)=>a.then(()=>o[0]==="reject"?d(o[1]):c(o[1])).catch(d));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,n)=>{let r=(n==null?void 0:n.id)||Ly++;return this.create({jsx:e(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},_n=new BL,$L=(t,e)=>{let n=(e==null?void 0:e.id)||Ly++;return _n.addToast({title:t,...e,id:n}),n},zL=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",qL=$L,HL=()=>_n.toasts,WL=()=>_n.getActiveToasts(),It=Object.assign(qL,{success:_n.success,info:_n.info,warning:_n.warning,error:_n.error,custom:_n.custom,message:_n.message,promise:_n.promise,dismiss:_n.dismiss,loading:_n.loading},{getHistory:HL,getToasts:WL});function KL(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}KL(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function ah(t){return t.label!==void 0}var GL=3,QL="32px",YL="16px",IT=4e3,XL=356,JL=14,ZL=20,eM=200;function cr(...t){return t.filter(Boolean).join(" ")}function tM(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var nM=t=>{var e,n,r,s,i,o,a,l,c,d,h;let{invert:p,toast:f,unstyled:v,interacting:y,setHeights:E,visibleToasts:w,heights:_,index:I,toasts:D,expanded:O,removeToast:V,defaultRichColors:S,closeButton:T,style:b,cancelButtonStyle:k,actionButtonStyle:P,className:N="",descriptionClassName:C="",duration:q,position:Z,gap:ie,loadingIcon:G,expandByDefault:F,classNames:U,icons:Y,closeButtonAriaLabel:de="Close toast",pauseWhenPageIsHidden:ne}=t,[ce,le]=z.useState(null),[we,Qe]=z.useState(null),[ae,me]=z.useState(!1),[Se,Et]=z.useState(!1),[Nt,Kt]=z.useState(!1),[Bt,gn]=z.useState(!1),[Pr,ge]=z.useState(!1),[Gn,Ms]=z.useState(0),[at,Ot]=z.useState(0),Rr=z.useRef(f.duration||q||IT),Pd=z.useRef(null),Cr=z.useRef(null),vm=I===0,so=I+1<=w,on=f.type,ts=f.dismissible!==!1,tc=f.className||"",_m=f.descriptionClassName||"",da=z.useMemo(()=>_.findIndex(he=>he.toastId===f.id)||0,[_,f.id]),Rd=z.useMemo(()=>{var he;return(he=f.closeButton)!=null?he:T},[f.closeButton,T]),nc=z.useMemo(()=>f.duration||q||IT,[f.duration,q]),ns=z.useRef(0),kr=z.useRef(0),ha=z.useRef(0),yn=z.useRef(null),[Cd,fa]=Z.split("-"),rc=z.useMemo(()=>_.reduce((he,Ue,We)=>We>=da?he:he+Ue.height,0),[_,da]),Fs=jL(),kd=f.invert||p,xt=on==="loading";kr.current=z.useMemo(()=>da*ie+rc,[da,rc]),z.useEffect(()=>{Rr.current=nc},[nc]),z.useEffect(()=>{me(!0)},[]),z.useEffect(()=>{let he=Cr.current;if(he){let Ue=he.getBoundingClientRect().height;return Ot(Ue),E(We=>[{toastId:f.id,height:Ue,position:f.position},...We]),()=>E(We=>We.filter(Vt=>Vt.toastId!==f.id))}},[E,f.id]),z.useLayoutEffect(()=>{if(!ae)return;let he=Cr.current,Ue=he.style.height;he.style.height="auto";let We=he.getBoundingClientRect().height;he.style.height=Ue,Ot(We),E(Vt=>Vt.find(kn=>kn.toastId===f.id)?Vt.map(kn=>kn.toastId===f.id?{...kn,height:We}:kn):[{toastId:f.id,height:We,position:f.position},...Vt])},[ae,f.title,f.description,E,f.id]);let or=z.useCallback(()=>{Et(!0),Ms(kr.current),E(he=>he.filter(Ue=>Ue.toastId!==f.id)),setTimeout(()=>{V(f)},eM)},[f,V,E,kr]);z.useEffect(()=>{if(f.promise&&on==="loading"||f.duration===1/0||f.type==="loading")return;let he;return O||y||ne&&Fs?(()=>{if(ha.current<ns.current){let Ue=new Date().getTime()-ns.current;Rr.current=Rr.current-Ue}ha.current=new Date().getTime()})():Rr.current!==1/0&&(ns.current=new Date().getTime(),he=setTimeout(()=>{var Ue;(Ue=f.onAutoClose)==null||Ue.call(f,f),or()},Rr.current)),()=>clearTimeout(he)},[O,y,f,on,ne,Fs,or]),z.useEffect(()=>{f.delete&&or()},[or,f.delete]);function io(){var he,Ue,We;return Y!=null&&Y.loading?z.createElement("div",{className:cr(U==null?void 0:U.loader,(he=f==null?void 0:f.classNames)==null?void 0:he.loader,"sonner-loader"),"data-visible":on==="loading"},Y.loading):G?z.createElement("div",{className:cr(U==null?void 0:U.loader,(Ue=f==null?void 0:f.classNames)==null?void 0:Ue.loader,"sonner-loader"),"data-visible":on==="loading"},G):z.createElement(OL,{className:cr(U==null?void 0:U.loader,(We=f==null?void 0:f.classNames)==null?void 0:We.loader),visible:on==="loading"})}return z.createElement("li",{tabIndex:0,ref:Cr,className:cr(N,tc,U==null?void 0:U.toast,(e=f==null?void 0:f.classNames)==null?void 0:e.toast,U==null?void 0:U.default,U==null?void 0:U[on],(n=f==null?void 0:f.classNames)==null?void 0:n[on]),"data-sonner-toast":"","data-rich-colors":(r=f.richColors)!=null?r:S,"data-styled":!(f.jsx||f.unstyled||v),"data-mounted":ae,"data-promise":!!f.promise,"data-swiped":Pr,"data-removed":Se,"data-visible":so,"data-y-position":Cd,"data-x-position":fa,"data-index":I,"data-front":vm,"data-swiping":Nt,"data-dismissible":ts,"data-type":on,"data-invert":kd,"data-swipe-out":Bt,"data-swipe-direction":we,"data-expanded":!!(O||F&&ae),style:{"--index":I,"--toasts-before":I,"--z-index":D.length-I,"--offset":`${Se?Gn:kr.current}px`,"--initial-height":F?"auto":`${at}px`,...b,...f.style},onDragEnd:()=>{Kt(!1),le(null),yn.current=null},onPointerDown:he=>{xt||!ts||(Pd.current=new Date,Ms(kr.current),he.target.setPointerCapture(he.pointerId),he.target.tagName!=="BUTTON"&&(Kt(!0),yn.current={x:he.clientX,y:he.clientY}))},onPointerUp:()=>{var he,Ue,We,Vt;if(Bt||!ts)return;yn.current=null;let kn=Number(((he=Cr.current)==null?void 0:he.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Dr=Number(((Ue=Cr.current)==null?void 0:Ue.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Qn=new Date().getTime()-((We=Pd.current)==null?void 0:We.getTime()),vn=ce==="x"?kn:Dr,ar=Math.abs(vn)/Qn;if(Math.abs(vn)>=ZL||ar>.11){Ms(kr.current),(Vt=f.onDismiss)==null||Vt.call(f,f),Qe(ce==="x"?kn>0?"right":"left":Dr>0?"down":"up"),or(),gn(!0),ge(!1);return}Kt(!1),le(null)},onPointerMove:he=>{var Ue,We,Vt,kn;if(!yn.current||!ts||((Ue=window.getSelection())==null?void 0:Ue.toString().length)>0)return;let Dr=he.clientY-yn.current.y,Qn=he.clientX-yn.current.x,vn=(We=t.swipeDirections)!=null?We:tM(Z);!ce&&(Math.abs(Qn)>1||Math.abs(Dr)>1)&&le(Math.abs(Qn)>Math.abs(Dr)?"x":"y");let ar={x:0,y:0};ce==="y"?(vn.includes("top")||vn.includes("bottom"))&&(vn.includes("top")&&Dr<0||vn.includes("bottom")&&Dr>0)&&(ar.y=Dr):ce==="x"&&(vn.includes("left")||vn.includes("right"))&&(vn.includes("left")&&Qn<0||vn.includes("right")&&Qn>0)&&(ar.x=Qn),(Math.abs(ar.x)>0||Math.abs(ar.y)>0)&&ge(!0),(Vt=Cr.current)==null||Vt.style.setProperty("--swipe-amount-x",`${ar.x}px`),(kn=Cr.current)==null||kn.style.setProperty("--swipe-amount-y",`${ar.y}px`)}},Rd&&!f.jsx?z.createElement("button",{"aria-label":de,"data-disabled":xt,"data-close-button":!0,onClick:xt||!ts?()=>{}:()=>{var he;or(),(he=f.onDismiss)==null||he.call(f,f)},className:cr(U==null?void 0:U.closeButton,(s=f==null?void 0:f.classNames)==null?void 0:s.closeButton)},(i=Y==null?void 0:Y.close)!=null?i:UL):null,f.jsx||x.isValidElement(f.title)?f.jsx?f.jsx:typeof f.title=="function"?f.title():f.title:z.createElement(z.Fragment,null,on||f.icon||f.promise?z.createElement("div",{"data-icon":"",className:cr(U==null?void 0:U.icon,(o=f==null?void 0:f.classNames)==null?void 0:o.icon)},f.promise||f.type==="loading"&&!f.icon?f.icon||io():null,f.type!=="loading"?f.icon||(Y==null?void 0:Y[on])||DL(on):null):null,z.createElement("div",{"data-content":"",className:cr(U==null?void 0:U.content,(a=f==null?void 0:f.classNames)==null?void 0:a.content)},z.createElement("div",{"data-title":"",className:cr(U==null?void 0:U.title,(l=f==null?void 0:f.classNames)==null?void 0:l.title)},typeof f.title=="function"?f.title():f.title),f.description?z.createElement("div",{"data-description":"",className:cr(C,_m,U==null?void 0:U.description,(c=f==null?void 0:f.classNames)==null?void 0:c.description)},typeof f.description=="function"?f.description():f.description):null),x.isValidElement(f.cancel)?f.cancel:f.cancel&&ah(f.cancel)?z.createElement("button",{"data-button":!0,"data-cancel":!0,style:f.cancelButtonStyle||k,onClick:he=>{var Ue,We;ah(f.cancel)&&ts&&((We=(Ue=f.cancel).onClick)==null||We.call(Ue,he),or())},className:cr(U==null?void 0:U.cancelButton,(d=f==null?void 0:f.classNames)==null?void 0:d.cancelButton)},f.cancel.label):null,x.isValidElement(f.action)?f.action:f.action&&ah(f.action)?z.createElement("button",{"data-button":!0,"data-action":!0,style:f.actionButtonStyle||P,onClick:he=>{var Ue,We;ah(f.action)&&((We=(Ue=f.action).onClick)==null||We.call(Ue,he),!he.defaultPrevented&&or())},className:cr(U==null?void 0:U.actionButton,(h=f==null?void 0:f.classNames)==null?void 0:h.actionButton)},f.action.label):null))};function ST(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function rM(t,e){let n={};return[t,e].forEach((r,s)=>{let i=s===1,o=i?"--mobile-offset":"--offset",a=i?YL:QL;function l(c){["top","right","bottom","left"].forEach(d=>{n[`${o}-${d}`]=typeof c=="number"?`${c}px`:c})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(c=>{r[c]===void 0?n[`${o}-${c}`]=a:n[`${o}-${c}`]=typeof r[c]=="number"?`${r[c]}px`:r[c]}):l(a)}),n}var sM=x.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:o,className:a,offset:l,mobileOffset:c,theme:d="light",richColors:h,duration:p,style:f,visibleToasts:v=GL,toastOptions:y,dir:E=ST(),gap:w=JL,loadingIcon:_,icons:I,containerAriaLabel:D="Notifications",pauseWhenPageIsHidden:O}=t,[V,S]=z.useState([]),T=z.useMemo(()=>Array.from(new Set([r].concat(V.filter(ne=>ne.position).map(ne=>ne.position)))),[V,r]),[b,k]=z.useState([]),[P,N]=z.useState(!1),[C,q]=z.useState(!1),[Z,ie]=z.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),G=z.useRef(null),F=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),U=z.useRef(null),Y=z.useRef(!1),de=z.useCallback(ne=>{S(ce=>{var le;return(le=ce.find(we=>we.id===ne.id))!=null&&le.delete||_n.dismiss(ne.id),ce.filter(({id:we})=>we!==ne.id)})},[]);return z.useEffect(()=>_n.subscribe(ne=>{if(ne.dismiss){S(ce=>ce.map(le=>le.id===ne.id?{...le,delete:!0}:le));return}setTimeout(()=>{J1.flushSync(()=>{S(ce=>{let le=ce.findIndex(we=>we.id===ne.id);return le!==-1?[...ce.slice(0,le),{...ce[le],...ne},...ce.slice(le+1)]:[ne,...ce]})})})}),[]),z.useEffect(()=>{if(d!=="system"){ie(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ie("dark"):ie("light")),typeof window>"u")return;let ne=window.matchMedia("(prefers-color-scheme: dark)");try{ne.addEventListener("change",({matches:ce})=>{ie(ce?"dark":"light")})}catch{ne.addListener(({matches:le})=>{try{ie(le?"dark":"light")}catch(we){console.error(we)}})}},[d]),z.useEffect(()=>{V.length<=1&&N(!1)},[V]),z.useEffect(()=>{let ne=ce=>{var le,we;s.every(Qe=>ce[Qe]||ce.code===Qe)&&(N(!0),(le=G.current)==null||le.focus()),ce.code==="Escape"&&(document.activeElement===G.current||(we=G.current)!=null&&we.contains(document.activeElement))&&N(!1)};return document.addEventListener("keydown",ne),()=>document.removeEventListener("keydown",ne)},[s]),z.useEffect(()=>{if(G.current)return()=>{U.current&&(U.current.focus({preventScroll:!0}),U.current=null,Y.current=!1)}},[G.current]),z.createElement("section",{ref:e,"aria-label":`${D} ${F}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},T.map((ne,ce)=>{var le;let[we,Qe]=ne.split("-");return V.length?z.createElement("ol",{key:ne,dir:E==="auto"?ST():E,tabIndex:-1,ref:G,className:a,"data-sonner-toaster":!0,"data-theme":Z,"data-y-position":we,"data-lifted":P&&V.length>1&&!i,"data-x-position":Qe,style:{"--front-toast-height":`${((le=b[0])==null?void 0:le.height)||0}px`,"--width":`${XL}px`,"--gap":`${w}px`,...f,...rM(l,c)},onBlur:ae=>{Y.current&&!ae.currentTarget.contains(ae.relatedTarget)&&(Y.current=!1,U.current&&(U.current.focus({preventScroll:!0}),U.current=null))},onFocus:ae=>{ae.target instanceof HTMLElement&&ae.target.dataset.dismissible==="false"||Y.current||(Y.current=!0,U.current=ae.relatedTarget)},onMouseEnter:()=>N(!0),onMouseMove:()=>N(!0),onMouseLeave:()=>{C||N(!1)},onDragEnd:()=>N(!1),onPointerDown:ae=>{ae.target instanceof HTMLElement&&ae.target.dataset.dismissible==="false"||q(!0)},onPointerUp:()=>q(!1)},V.filter(ae=>!ae.position&&ce===0||ae.position===ne).map((ae,me)=>{var Se,Et;return z.createElement(nM,{key:ae.id,icons:I,index:me,toast:ae,defaultRichColors:h,duration:(Se=y==null?void 0:y.duration)!=null?Se:p,className:y==null?void 0:y.className,descriptionClassName:y==null?void 0:y.descriptionClassName,invert:n,visibleToasts:v,closeButton:(Et=y==null?void 0:y.closeButton)!=null?Et:o,interacting:C,position:ne,style:y==null?void 0:y.style,unstyled:y==null?void 0:y.unstyled,classNames:y==null?void 0:y.classNames,cancelButtonStyle:y==null?void 0:y.cancelButtonStyle,actionButtonStyle:y==null?void 0:y.actionButtonStyle,removeToast:de,toasts:V.filter(Nt=>Nt.position==ae.position),heights:b.filter(Nt=>Nt.position==ae.position),setHeights:k,expandByDefault:i,gap:w,loadingIcon:_,expanded:P,pauseWhenPageIsHidden:O,swipeDirections:t.swipeDirections})})):null}))});const iM=({...t})=>{const{theme:e="system"}=kL();return A.jsx(sM,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})},oM=["top","right","bottom","left"],Li=Math.min,Vn=Math.max,xf=Math.round,lh=Math.floor,Qr=t=>({x:t,y:t}),aM={left:"right",right:"left",bottom:"top",top:"bottom"},lM={start:"end",end:"start"};function My(t,e,n){return Vn(t,Li(e,n))}function Is(t,e){return typeof t=="function"?t(e):t}function Ss(t){return t.split("-")[0]}function Bl(t){return t.split("-")[1]}function N_(t){return t==="x"?"y":"x"}function O_(t){return t==="y"?"height":"width"}const cM=new Set(["top","bottom"]);function zr(t){return cM.has(Ss(t))?"y":"x"}function V_(t){return N_(zr(t))}function uM(t,e,n){n===void 0&&(n=!1);const r=Bl(t),s=V_(t),i=O_(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=Pf(o)),[o,Pf(o)]}function dM(t){const e=Pf(t);return[Fy(t),e,Fy(e)]}function Fy(t){return t.replace(/start|end/g,e=>lM[e])}const bT=["left","right"],AT=["right","left"],hM=["top","bottom"],fM=["bottom","top"];function pM(t,e,n){switch(t){case"top":case"bottom":return n?e?AT:bT:e?bT:AT;case"left":case"right":return e?hM:fM;default:return[]}}function mM(t,e,n,r){const s=Bl(t);let i=pM(Ss(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(Fy)))),i}function Pf(t){return t.replace(/left|right|bottom|top/g,e=>aM[e])}function gM(t){return{top:0,right:0,bottom:0,left:0,...t}}function zx(t){return typeof t!="number"?gM(t):{top:t,right:t,bottom:t,left:t}}function Rf(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function xT(t,e,n){let{reference:r,floating:s}=t;const i=zr(e),o=V_(e),a=O_(o),l=Ss(e),c=i==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,p=r[a]/2-s[a]/2;let f;switch(l){case"top":f={x:d,y:r.y-s.height};break;case"bottom":f={x:d,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:h};break;case"left":f={x:r.x-s.width,y:h};break;default:f={x:r.x,y:r.y}}switch(Bl(e)){case"start":f[o]-=p*(n&&c?-1:1);break;case"end":f[o]+=p*(n&&c?-1:1);break}return f}const yM=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:h}=xT(c,r,l),p=r,f={},v=0;for(let y=0;y<a.length;y++){const{name:E,fn:w}=a[y],{x:_,y:I,data:D,reset:O}=await w({x:d,y:h,initialPlacement:r,placement:p,strategy:s,middlewareData:f,rects:c,platform:o,elements:{reference:t,floating:e}});d=_??d,h=I??h,f={...f,[E]:{...f[E],...D}},O&&v<=50&&(v++,typeof O=="object"&&(O.placement&&(p=O.placement),O.rects&&(c=O.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):O.rects),{x:d,y:h}=xT(c,p,l)),y=-1)}return{x:d,y:h,placement:p,strategy:s,middlewareData:f}};async function Pu(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:p=!1,padding:f=0}=Is(e,t),v=zx(f),E=a[p?h==="floating"?"reference":"floating":h],w=Rf(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(E)))==null||n?E:E.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:d,strategy:l})),_=h==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,I=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),D=await(i.isElement==null?void 0:i.isElement(I))?await(i.getScale==null?void 0:i.getScale(I))||{x:1,y:1}:{x:1,y:1},O=Rf(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:_,offsetParent:I,strategy:l}):_);return{top:(w.top-O.top+v.top)/D.y,bottom:(O.bottom-w.bottom+v.bottom)/D.y,left:(w.left-O.left+v.left)/D.x,right:(O.right-w.right+v.right)/D.x}}const vM=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:d=0}=Is(t,e)||{};if(c==null)return{};const h=zx(d),p={x:n,y:r},f=V_(s),v=O_(f),y=await o.getDimensions(c),E=f==="y",w=E?"top":"left",_=E?"bottom":"right",I=E?"clientHeight":"clientWidth",D=i.reference[v]+i.reference[f]-p[f]-i.floating[v],O=p[f]-i.reference[f],V=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let S=V?V[I]:0;(!S||!await(o.isElement==null?void 0:o.isElement(V)))&&(S=a.floating[I]||i.floating[v]);const T=D/2-O/2,b=S/2-y[v]/2-1,k=Li(h[w],b),P=Li(h[_],b),N=k,C=S-y[v]-P,q=S/2-y[v]/2+T,Z=My(N,q,C),ie=!l.arrow&&Bl(s)!=null&&q!==Z&&i.reference[v]/2-(q<N?k:P)-y[v]/2<0,G=ie?q<N?q-N:q-C:0;return{[f]:p[f]+G,data:{[f]:Z,centerOffset:q-Z-G,...ie&&{alignmentOffset:G}},reset:ie}}}),_M=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:y=!0,...E}=Is(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const w=Ss(s),_=zr(a),I=Ss(a)===a,D=await(l.isRTL==null?void 0:l.isRTL(c.floating)),O=p||(I||!y?[Pf(a)]:dM(a)),V=v!=="none";!p&&V&&O.push(...mM(a,y,v,D));const S=[a,...O],T=await Pu(e,E),b=[];let k=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&b.push(T[w]),h){const q=uM(s,o,D);b.push(T[q[0]],T[q[1]])}if(k=[...k,{placement:s,overflows:b}],!b.every(q=>q<=0)){var P,N;const q=(((P=i.flip)==null?void 0:P.index)||0)+1,Z=S[q];if(Z&&(!(h==="alignment"?_!==zr(Z):!1)||k.every(F=>zr(F.placement)===_?F.overflows[0]>0:!0)))return{data:{index:q,overflows:k},reset:{placement:Z}};let ie=(N=k.filter(G=>G.overflows[0]<=0).sort((G,F)=>G.overflows[1]-F.overflows[1])[0])==null?void 0:N.placement;if(!ie)switch(f){case"bestFit":{var C;const G=(C=k.filter(F=>{if(V){const U=zr(F.placement);return U===_||U==="y"}return!0}).map(F=>[F.placement,F.overflows.filter(U=>U>0).reduce((U,Y)=>U+Y,0)]).sort((F,U)=>F[1]-U[1])[0])==null?void 0:C[0];G&&(ie=G);break}case"initialPlacement":ie=a;break}if(s!==ie)return{reset:{placement:ie}}}return{}}}};function PT(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function RT(t){return oM.some(e=>t[e]>=0)}const wM=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Is(t,e);switch(r){case"referenceHidden":{const i=await Pu(e,{...s,elementContext:"reference"}),o=PT(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:RT(o)}}}case"escaped":{const i=await Pu(e,{...s,altBoundary:!0}),o=PT(i,n.floating);return{data:{escapedOffsets:o,escaped:RT(o)}}}default:return{}}}}},qx=new Set(["left","top"]);async function EM(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Ss(n),a=Bl(n),l=zr(n)==="y",c=qx.has(o)?-1:1,d=i&&l?-1:1,h=Is(e,t);let{mainAxis:p,crossAxis:f,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof v=="number"&&(f=a==="end"?v*-1:v),l?{x:f*d,y:p*c}:{x:p*c,y:f*d}}const TM=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await EM(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},IM=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:E=>{let{x:w,y:_}=E;return{x:w,y:_}}},...l}=Is(t,e),c={x:n,y:r},d=await Pu(e,l),h=zr(Ss(s)),p=N_(h);let f=c[p],v=c[h];if(i){const E=p==="y"?"top":"left",w=p==="y"?"bottom":"right",_=f+d[E],I=f-d[w];f=My(_,f,I)}if(o){const E=h==="y"?"top":"left",w=h==="y"?"bottom":"right",_=v+d[E],I=v-d[w];v=My(_,v,I)}const y=a.fn({...e,[p]:f,[h]:v});return{...y,data:{x:y.x-n,y:y.y-r,enabled:{[p]:i,[h]:o}}}}}},SM=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Is(t,e),d={x:n,y:r},h=zr(s),p=N_(h);let f=d[p],v=d[h];const y=Is(a,e),E=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(l){const I=p==="y"?"height":"width",D=i.reference[p]-i.floating[I]+E.mainAxis,O=i.reference[p]+i.reference[I]-E.mainAxis;f<D?f=D:f>O&&(f=O)}if(c){var w,_;const I=p==="y"?"width":"height",D=qx.has(Ss(s)),O=i.reference[h]-i.floating[I]+(D&&((w=o.offset)==null?void 0:w[h])||0)+(D?0:E.crossAxis),V=i.reference[h]+i.reference[I]+(D?0:((_=o.offset)==null?void 0:_[h])||0)-(D?E.crossAxis:0);v<O?v=O:v>V&&(v=V)}return{[p]:f,[h]:v}}}},bM=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...c}=Is(t,e),d=await Pu(e,c),h=Ss(s),p=Bl(s),f=zr(s)==="y",{width:v,height:y}=i.floating;let E,w;h==="top"||h==="bottom"?(E=h,w=p===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(w=h,E=p==="end"?"top":"bottom");const _=y-d.top-d.bottom,I=v-d.left-d.right,D=Li(y-d[E],_),O=Li(v-d[w],I),V=!e.middlewareData.shift;let S=D,T=O;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(T=I),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(S=_),V&&!p){const k=Vn(d.left,0),P=Vn(d.right,0),N=Vn(d.top,0),C=Vn(d.bottom,0);f?T=v-2*(k!==0||P!==0?k+P:Vn(d.left,d.right)):S=y-2*(N!==0||C!==0?N+C:Vn(d.top,d.bottom))}await l({...e,availableWidth:T,availableHeight:S});const b=await o.getDimensions(a.floating);return v!==b.width||y!==b.height?{reset:{rects:!0}}:{}}}};function kp(){return typeof window<"u"}function $l(t){return Hx(t)?(t.nodeName||"").toLowerCase():"#document"}function $n(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Zr(t){var e;return(e=(Hx(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Hx(t){return kp()?t instanceof Node||t instanceof $n(t).Node:!1}function Sr(t){return kp()?t instanceof Element||t instanceof $n(t).Element:!1}function Yr(t){return kp()?t instanceof HTMLElement||t instanceof $n(t).HTMLElement:!1}function CT(t){return!kp()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof $n(t).ShadowRoot}const AM=new Set(["inline","contents"]);function ad(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=br(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!AM.has(s)}const xM=new Set(["table","td","th"]);function PM(t){return xM.has($l(t))}const RM=[":popover-open",":modal"];function Dp(t){return RM.some(e=>{try{return t.matches(e)}catch{return!1}})}const CM=["transform","translate","scale","rotate","perspective"],kM=["transform","translate","scale","rotate","perspective","filter"],DM=["paint","layout","strict","content"];function L_(t){const e=M_(),n=Sr(t)?br(t):t;return CM.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||kM.some(r=>(n.willChange||"").includes(r))||DM.some(r=>(n.contain||"").includes(r))}function NM(t){let e=Mi(t);for(;Yr(e)&&!pl(e);){if(L_(e))return e;if(Dp(e))return null;e=Mi(e)}return null}function M_(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const OM=new Set(["html","body","#document"]);function pl(t){return OM.has($l(t))}function br(t){return $n(t).getComputedStyle(t)}function Np(t){return Sr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Mi(t){if($l(t)==="html")return t;const e=t.assignedSlot||t.parentNode||CT(t)&&t.host||Zr(t);return CT(e)?e.host:e}function Wx(t){const e=Mi(t);return pl(e)?t.ownerDocument?t.ownerDocument.body:t.body:Yr(e)&&ad(e)?e:Wx(e)}function Ru(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=Wx(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=$n(s);if(i){const a=Uy(o);return e.concat(o,o.visualViewport||[],ad(s)?s:[],a&&n?Ru(a):[])}return e.concat(s,Ru(s,[],n))}function Uy(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Kx(t){const e=br(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Yr(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=xf(n)!==i||xf(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function F_(t){return Sr(t)?t:t.contextElement}function Ga(t){const e=F_(t);if(!Yr(e))return Qr(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=Kx(e);let o=(i?xf(n.width):n.width)/r,a=(i?xf(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const VM=Qr(0);function Gx(t){const e=$n(t);return!M_()||!e.visualViewport?VM:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function LM(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==$n(t)?!1:e}function Go(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=F_(t);let o=Qr(1);e&&(r?Sr(r)&&(o=Ga(r)):o=Ga(t));const a=LM(i,n,r)?Gx(i):Qr(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,d=s.width/o.x,h=s.height/o.y;if(i){const p=$n(i),f=r&&Sr(r)?$n(r):r;let v=p,y=Uy(v);for(;y&&r&&f!==v;){const E=Ga(y),w=y.getBoundingClientRect(),_=br(y),I=w.left+(y.clientLeft+parseFloat(_.paddingLeft))*E.x,D=w.top+(y.clientTop+parseFloat(_.paddingTop))*E.y;l*=E.x,c*=E.y,d*=E.x,h*=E.y,l+=I,c+=D,v=$n(y),y=Uy(v)}}return Rf({width:d,height:h,x:l,y:c})}function Op(t,e){const n=Np(t).scrollLeft;return e?e.left+n:Go(Zr(t)).left+n}function Qx(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-Op(t,n),s=n.top+e.scrollTop;return{x:r,y:s}}function MM(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=Zr(r),a=e?Dp(e.floating):!1;if(r===o||a&&i)return n;let l={scrollLeft:0,scrollTop:0},c=Qr(1);const d=Qr(0),h=Yr(r);if((h||!h&&!i)&&(($l(r)!=="body"||ad(o))&&(l=Np(r)),Yr(r))){const f=Go(r);c=Ga(r),d.x=f.x+r.clientLeft,d.y=f.y+r.clientTop}const p=o&&!h&&!i?Qx(o,l):Qr(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+d.x+p.x,y:n.y*c.y-l.scrollTop*c.y+d.y+p.y}}function FM(t){return Array.from(t.getClientRects())}function UM(t){const e=Zr(t),n=Np(t),r=t.ownerDocument.body,s=Vn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Vn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Op(t);const a=-n.scrollTop;return br(r).direction==="rtl"&&(o+=Vn(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}const kT=25;function jM(t,e){const n=$n(t),r=Zr(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const d=M_();(!d||d&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}const c=Op(r);if(c<=0){const d=r.ownerDocument,h=d.body,p=getComputedStyle(h),f=d.compatMode==="CSS1Compat"&&parseFloat(p.marginLeft)+parseFloat(p.marginRight)||0,v=Math.abs(r.clientWidth-h.clientWidth-f);v<=kT&&(i-=v)}else c<=kT&&(i+=c);return{width:i,height:o,x:a,y:l}}const BM=new Set(["absolute","fixed"]);function $M(t,e){const n=Go(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Yr(t)?Ga(t):Qr(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function DT(t,e,n){let r;if(e==="viewport")r=jM(t,n);else if(e==="document")r=UM(Zr(t));else if(Sr(e))r=$M(e,n);else{const s=Gx(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Rf(r)}function Yx(t,e){const n=Mi(t);return n===e||!Sr(n)||pl(n)?!1:br(n).position==="fixed"||Yx(n,e)}function zM(t,e){const n=e.get(t);if(n)return n;let r=Ru(t,[],!1).filter(a=>Sr(a)&&$l(a)!=="body"),s=null;const i=br(t).position==="fixed";let o=i?Mi(t):t;for(;Sr(o)&&!pl(o);){const a=br(o),l=L_(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&BM.has(s.position)||ad(o)&&!l&&Yx(t,o))?r=r.filter(d=>d!==o):s=a,o=Mi(o)}return e.set(t,r),r}function qM(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?Dp(e)?[]:zM(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,d)=>{const h=DT(e,d,s);return c.top=Vn(h.top,c.top),c.right=Li(h.right,c.right),c.bottom=Li(h.bottom,c.bottom),c.left=Vn(h.left,c.left),c},DT(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function HM(t){const{width:e,height:n}=Kx(t);return{width:e,height:n}}function WM(t,e,n){const r=Yr(e),s=Zr(e),i=n==="fixed",o=Go(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=Qr(0);function c(){l.x=Op(s)}if(r||!r&&!i)if(($l(e)!=="body"||ad(s))&&(a=Np(e)),r){const f=Go(e,!0,i,e);l.x=f.x+e.clientLeft,l.y=f.y+e.clientTop}else s&&c();i&&!r&&s&&c();const d=s&&!r&&!i?Qx(s,a):Qr(0),h=o.left+a.scrollLeft-l.x-d.x,p=o.top+a.scrollTop-l.y-d.y;return{x:h,y:p,width:o.width,height:o.height}}function hg(t){return br(t).position==="static"}function NT(t,e){if(!Yr(t)||br(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Zr(t)===n&&(n=n.ownerDocument.body),n}function Xx(t,e){const n=$n(t);if(Dp(t))return n;if(!Yr(t)){let s=Mi(t);for(;s&&!pl(s);){if(Sr(s)&&!hg(s))return s;s=Mi(s)}return n}let r=NT(t,e);for(;r&&PM(r)&&hg(r);)r=NT(r,e);return r&&pl(r)&&hg(r)&&!L_(r)?n:r||NM(t)||n}const KM=async function(t){const e=this.getOffsetParent||Xx,n=this.getDimensions,r=await n(t.floating);return{reference:WM(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function GM(t){return br(t).direction==="rtl"}const QM={convertOffsetParentRelativeRectToViewportRelativeRect:MM,getDocumentElement:Zr,getClippingRect:qM,getOffsetParent:Xx,getElementRects:KM,getClientRects:FM,getDimensions:HM,getScale:Ga,isElement:Sr,isRTL:GM};function Jx(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function YM(t,e){let n=null,r;const s=Zr(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const c=t.getBoundingClientRect(),{left:d,top:h,width:p,height:f}=c;if(a||e(),!p||!f)return;const v=lh(h),y=lh(s.clientWidth-(d+p)),E=lh(s.clientHeight-(h+f)),w=lh(d),I={rootMargin:-v+"px "+-y+"px "+-E+"px "+-w+"px",threshold:Vn(0,Li(1,l))||1};let D=!0;function O(V){const S=V[0].intersectionRatio;if(S!==l){if(!D)return o();S?o(!1,S):r=setTimeout(()=>{o(!1,1e-7)},1e3)}S===1&&!Jx(c,t.getBoundingClientRect())&&o(),D=!1}try{n=new IntersectionObserver(O,{...I,root:s.ownerDocument})}catch{n=new IntersectionObserver(O,I)}n.observe(t)}return o(!0),i}function XM(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=F_(t),d=s||i?[...c?Ru(c):[],...Ru(e)]:[];d.forEach(w=>{s&&w.addEventListener("scroll",n,{passive:!0}),i&&w.addEventListener("resize",n)});const h=c&&a?YM(c,n):null;let p=-1,f=null;o&&(f=new ResizeObserver(w=>{let[_]=w;_&&_.target===c&&f&&(f.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var I;(I=f)==null||I.observe(e)})),n()}),c&&!l&&f.observe(c),f.observe(e));let v,y=l?Go(t):null;l&&E();function E(){const w=Go(t);y&&!Jx(y,w)&&n(),y=w,v=requestAnimationFrame(E)}return n(),()=>{var w;d.forEach(_=>{s&&_.removeEventListener("scroll",n),i&&_.removeEventListener("resize",n)}),h==null||h(),(w=f)==null||w.disconnect(),f=null,l&&cancelAnimationFrame(v)}}const JM=TM,ZM=IM,eF=_M,tF=bM,nF=wM,OT=vM,rF=SM,sF=(t,e,n)=>{const r=new Map,s={platform:QM,...n},i={...s.platform,_c:r};return yM(t,e,{...s,platform:i})};var iF=typeof document<"u",oF=function(){},jh=iF?x.useLayoutEffect:oF;function Cf(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Cf(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!Cf(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function Zx(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function VT(t,e){const n=Zx(t);return Math.round(e*n)/n}function fg(t){const e=x.useRef(t);return jh(()=>{e.current=t}),e}function aF(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[d,h]=x.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,f]=x.useState(r);Cf(p,r)||f(r);const[v,y]=x.useState(null),[E,w]=x.useState(null),_=x.useCallback(F=>{F!==V.current&&(V.current=F,y(F))},[]),I=x.useCallback(F=>{F!==S.current&&(S.current=F,w(F))},[]),D=i||v,O=o||E,V=x.useRef(null),S=x.useRef(null),T=x.useRef(d),b=l!=null,k=fg(l),P=fg(s),N=fg(c),C=x.useCallback(()=>{if(!V.current||!S.current)return;const F={placement:e,strategy:n,middleware:p};P.current&&(F.platform=P.current),sF(V.current,S.current,F).then(U=>{const Y={...U,isPositioned:N.current!==!1};q.current&&!Cf(T.current,Y)&&(T.current=Y,id.flushSync(()=>{h(Y)}))})},[p,e,n,P,N]);jh(()=>{c===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,h(F=>({...F,isPositioned:!1})))},[c]);const q=x.useRef(!1);jh(()=>(q.current=!0,()=>{q.current=!1}),[]),jh(()=>{if(D&&(V.current=D),O&&(S.current=O),D&&O){if(k.current)return k.current(D,O,C);C()}},[D,O,C,k,b]);const Z=x.useMemo(()=>({reference:V,floating:S,setReference:_,setFloating:I}),[_,I]),ie=x.useMemo(()=>({reference:D,floating:O}),[D,O]),G=x.useMemo(()=>{const F={position:n,left:0,top:0};if(!ie.floating)return F;const U=VT(ie.floating,d.x),Y=VT(ie.floating,d.y);return a?{...F,transform:"translate("+U+"px, "+Y+"px)",...Zx(ie.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:U,top:Y}},[n,a,ie.floating,d.x,d.y]);return x.useMemo(()=>({...d,update:C,refs:Z,elements:ie,floatingStyles:G}),[d,C,Z,ie,G])}const lF=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?OT({element:r.current,padding:s}).fn(n):{}:r?OT({element:r,padding:s}).fn(n):{}}}},cF=(t,e)=>({...JM(t),options:[t,e]}),uF=(t,e)=>({...ZM(t),options:[t,e]}),dF=(t,e)=>({...rF(t),options:[t,e]}),hF=(t,e)=>({...eF(t),options:[t,e]}),fF=(t,e)=>({...tF(t),options:[t,e]}),pF=(t,e)=>({...nF(t),options:[t,e]}),mF=(t,e)=>({...lF(t),options:[t,e]});var gF="Arrow",eP=x.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return A.jsx(Cn.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:A.jsx("polygon",{points:"0,0 30,0 15,10"})})});eP.displayName=gF;var yF=eP;function vF(t){const[e,n]=x.useState(void 0);return Vi(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var U_="Popper",[tP,nP]=Pp(U_),[_F,rP]=tP(U_),sP=t=>{const{__scopePopper:e,children:n}=t,[r,s]=x.useState(null);return A.jsx(_F,{scope:e,anchor:r,onAnchorChange:s,children:n})};sP.displayName=U_;var iP="PopperAnchor",oP=x.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=rP(iP,n),o=x.useRef(null),a=Ir(e,o),l=x.useRef(null);return x.useEffect(()=>{const c=l.current;l.current=(r==null?void 0:r.current)||o.current,c!==l.current&&i.onAnchorChange(l.current)}),r?null:A.jsx(Cn.div,{...s,ref:a})});oP.displayName=iP;var j_="PopperContent",[wF,EF]=tP(j_),aP=x.forwardRef((t,e)=>{var ae,me,Se,Et,Nt,Kt;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:p=!1,updatePositionStrategy:f="optimized",onPlaced:v,...y}=t,E=rP(j_,n),[w,_]=x.useState(null),I=Ir(e,Bt=>_(Bt)),[D,O]=x.useState(null),V=vF(D),S=(V==null?void 0:V.width)??0,T=(V==null?void 0:V.height)??0,b=r+(i!=="center"?"-"+i:""),k=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},P=Array.isArray(c)?c:[c],N=P.length>0,C={padding:k,boundary:P.filter(IF),altBoundary:N},{refs:q,floatingStyles:Z,placement:ie,isPositioned:G,middlewareData:F}=aF({strategy:"fixed",placement:b,whileElementsMounted:(...Bt)=>XM(...Bt,{animationFrame:f==="always"}),elements:{reference:E.anchor},middleware:[cF({mainAxis:s+T,alignmentAxis:o}),l&&uF({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?dF():void 0,...C}),l&&hF({...C}),fF({...C,apply:({elements:Bt,rects:gn,availableWidth:Pr,availableHeight:ge})=>{const{width:Gn,height:Ms}=gn.reference,at=Bt.floating.style;at.setProperty("--radix-popper-available-width",`${Pr}px`),at.setProperty("--radix-popper-available-height",`${ge}px`),at.setProperty("--radix-popper-anchor-width",`${Gn}px`),at.setProperty("--radix-popper-anchor-height",`${Ms}px`)}}),D&&mF({element:D,padding:a}),SF({arrowWidth:S,arrowHeight:T}),p&&pF({strategy:"referenceHidden",...C})]}),[U,Y]=uP(ie),de=Oi(v);Vi(()=>{G&&(de==null||de())},[G,de]);const ne=(ae=F.arrow)==null?void 0:ae.x,ce=(me=F.arrow)==null?void 0:me.y,le=((Se=F.arrow)==null?void 0:Se.centerOffset)!==0,[we,Qe]=x.useState();return Vi(()=>{w&&Qe(window.getComputedStyle(w).zIndex)},[w]),A.jsx("div",{ref:q.setFloating,"data-radix-popper-content-wrapper":"",style:{...Z,transform:G?Z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:we,"--radix-popper-transform-origin":[(Et=F.transformOrigin)==null?void 0:Et.x,(Nt=F.transformOrigin)==null?void 0:Nt.y].join(" "),...((Kt=F.hide)==null?void 0:Kt.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:A.jsx(wF,{scope:n,placedSide:U,onArrowChange:O,arrowX:ne,arrowY:ce,shouldHideArrow:le,children:A.jsx(Cn.div,{"data-side":U,"data-align":Y,...y,ref:I,style:{...y.style,animation:G?void 0:"none"}})})})});aP.displayName=j_;var lP="PopperArrow",TF={top:"bottom",right:"left",bottom:"top",left:"right"},cP=x.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=EF(lP,r),o=TF[i.placedSide];return A.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:A.jsx(yF,{...s,ref:n,style:{...s.style,display:"block"}})})});cP.displayName=lP;function IF(t){return t!==null}var SF=t=>({name:"transformOrigin",options:t,fn(e){var E,w,_;const{placement:n,rects:r,middlewareData:s}=e,o=((E=s.arrow)==null?void 0:E.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,d]=uP(n),h={start:"0%",center:"50%",end:"100%"}[d],p=(((w=s.arrow)==null?void 0:w.x)??0)+a/2,f=(((_=s.arrow)==null?void 0:_.y)??0)+l/2;let v="",y="";return c==="bottom"?(v=o?h:`${p}px`,y=`${-l}px`):c==="top"?(v=o?h:`${p}px`,y=`${r.floating.height+l}px`):c==="right"?(v=`${-l}px`,y=o?h:`${f}px`):c==="left"&&(v=`${r.floating.width+l}px`,y=o?h:`${f}px`),{data:{x:v,y}}}});function uP(t){const[e,n="center"]=t.split("-");return[e,n]}var R8=sP,bF=oP,AF=aP,xF=cP,[Vp]=Pp("Tooltip",[nP]),B_=nP(),dP="TooltipProvider",PF=700,LT="tooltip.open",[RF,hP]=Vp(dP),fP=t=>{const{__scopeTooltip:e,delayDuration:n=PF,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,o=x.useRef(!0),a=x.useRef(!1),l=x.useRef(0);return x.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),A.jsx(RF,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:x.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:x.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:x.useCallback(c=>{a.current=c},[]),disableHoverableContent:s,children:i})};fP.displayName=dP;var pP="Tooltip",[C8,Lp]=Vp(pP),jy="TooltipTrigger",CF=x.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Lp(jy,n),i=hP(jy,n),o=B_(n),a=x.useRef(null),l=Ir(e,a,s.onTriggerChange),c=x.useRef(!1),d=x.useRef(!1),h=x.useCallback(()=>c.current=!1,[]);return x.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),A.jsx(bF,{asChild:!0,...o,children:A.jsx(Cn.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:l,onPointerMove:Ct(t.onPointerMove,p=>{p.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:Ct(t.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:Ct(t.onPointerDown,()=>{s.open&&s.onClose(),c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Ct(t.onFocus,()=>{c.current||s.onOpen()}),onBlur:Ct(t.onBlur,s.onClose),onClick:Ct(t.onClick,s.onClose)})})});CF.displayName=jy;var kF="TooltipPortal",[k8,DF]=Vp(kF,{forceMount:void 0}),ml="TooltipContent",mP=x.forwardRef((t,e)=>{const n=DF(ml,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=Lp(ml,t.__scopeTooltip);return A.jsx(P_,{present:r||o.open,children:o.disableHoverableContent?A.jsx(gP,{side:s,...i,ref:e}):A.jsx(NF,{side:s,...i,ref:e})})}),NF=x.forwardRef((t,e)=>{const n=Lp(ml,t.__scopeTooltip),r=hP(ml,t.__scopeTooltip),s=x.useRef(null),i=Ir(e,s),[o,a]=x.useState(null),{trigger:l,onClose:c}=n,d=s.current,{onPointerInTransitChange:h}=r,p=x.useCallback(()=>{a(null),h(!1)},[h]),f=x.useCallback((v,y)=>{const E=v.currentTarget,w={x:v.clientX,y:v.clientY},_=FF(w,E.getBoundingClientRect()),I=UF(w,_),D=jF(y.getBoundingClientRect()),O=$F([...I,...D]);a(O),h(!0)},[h]);return x.useEffect(()=>()=>p(),[p]),x.useEffect(()=>{if(l&&d){const v=E=>f(E,d),y=E=>f(E,l);return l.addEventListener("pointerleave",v),d.addEventListener("pointerleave",y),()=>{l.removeEventListener("pointerleave",v),d.removeEventListener("pointerleave",y)}}},[l,d,f,p]),x.useEffect(()=>{if(o){const v=y=>{const E=y.target,w={x:y.clientX,y:y.clientY},_=(l==null?void 0:l.contains(E))||(d==null?void 0:d.contains(E)),I=!BF(w,o);_?p():I&&(p(),c())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[l,d,o,c,p]),A.jsx(gP,{...t,ref:i})}),[OF,VF]=Vp(pP,{isInside:!1}),LF=LO("TooltipContent"),gP=x.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=t,l=Lp(ml,n),c=B_(n),{onClose:d}=l;return x.useEffect(()=>(document.addEventListener(LT,d),()=>document.removeEventListener(LT,d)),[d]),x.useEffect(()=>{if(l.trigger){const h=p=>{const f=p.target;f!=null&&f.contains(l.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,d]),A.jsx(x_,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:A.jsxs(AF,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[A.jsx(LF,{children:r}),A.jsx(OF,{scope:n,isInside:!0,children:A.jsx(aV,{id:l.contentId,role:"tooltip",children:s||r})})]})})});mP.displayName=ml;var yP="TooltipArrow",MF=x.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=B_(n);return VF(yP,n).isInside?null:A.jsx(xF,{...s,...r,ref:e})});MF.displayName=yP;function FF(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function UF(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function jF(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function BF(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i],l=e[o],c=a.x,d=a.y,h=l.x,p=l.y;d>r!=p>r&&n<(h-c)*(r-d)/(p-d)+c&&(s=!s)}return s}function $F(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),zF(e)}function zF(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var qF=fP,vP=mP;const HF=qF,WF=x.forwardRef(({className:t,sideOffset:e=4,...n},r)=>A.jsx(vP,{ref:r,sideOffset:e,className:Cs("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));WF.displayName=vP.displayName;var Mp=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},KF={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},li,Dv,Rb,GF=(Rb=class{constructor(){De(this,li,KF);De(this,Dv,!1)}setTimeoutProvider(t){fe(this,li,t)}setTimeout(t,e){return $(this,li).setTimeout(t,e)}clearTimeout(t){$(this,li).clearTimeout(t)}setInterval(t,e){return $(this,li).setInterval(t,e)}clearInterval(t){$(this,li).clearInterval(t)}},li=new WeakMap,Dv=new WeakMap,Rb),By=new GF;function QF(t){setTimeout(t,0)}var Fp=typeof window>"u"||"Deno"in globalThis;function dr(){}function YF(t,e){return typeof t=="function"?t(e):t}function XF(t){return typeof t=="number"&&t>=0&&t!==1/0}function JF(t,e){return Math.max(t+(e||0)-Date.now(),0)}function $y(t,e){return typeof t=="function"?t(e):t}function ZF(t,e){return typeof t=="function"?t(e):t}function MT(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==$_(o,e.options))return!1}else if(!ku(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function FT(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Cu(e.options.mutationKey)!==Cu(i))return!1}else if(!ku(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function $_(t,e){return((e==null?void 0:e.queryKeyHashFn)||Cu)(t)}function Cu(t){return JSON.stringify(t,(e,n)=>zy(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function ku(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>ku(t[n],e[n])):!1}var e4=Object.prototype.hasOwnProperty;function _P(t,e){if(t===e)return t;const n=UT(t)&&UT(e);if(!n&&!(zy(t)&&zy(e)))return e;const s=(n?t:Object.keys(t)).length,i=n?e:Object.keys(e),o=i.length,a=n?new Array(o):{};let l=0;for(let c=0;c<o;c++){const d=n?c:i[c],h=t[d],p=e[d];if(h===p){a[d]=h,(n?c<s:e4.call(t,d))&&l++;continue}if(h===null||p===null||typeof h!="object"||typeof p!="object"){a[d]=p;continue}const f=_P(h,p);a[d]=f,f===h&&l++}return s===o&&l===s?t:a}function UT(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function zy(t){if(!jT(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!jT(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function jT(t){return Object.prototype.toString.call(t)==="[object Object]"}function t4(t){return new Promise(e=>{By.setTimeout(e,t)})}function n4(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?_P(t,e):e}function r4(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function s4(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var z_=Symbol();function wP(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===z_?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Co,ci,Za,Cb,i4=(Cb=class extends Mp{constructor(){super();De(this,Co);De(this,ci);De(this,Za);fe(this,Za,e=>{if(!Fp&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){$(this,ci)||this.setEventListener($(this,Za))}onUnsubscribe(){var e;this.hasListeners()||((e=$(this,ci))==null||e.call(this),fe(this,ci,void 0))}setEventListener(e){var n;fe(this,Za,e),(n=$(this,ci))==null||n.call(this),fe(this,ci,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){$(this,Co)!==e&&(fe(this,Co,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof $(this,Co)=="boolean"?$(this,Co):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Co=new WeakMap,ci=new WeakMap,Za=new WeakMap,Cb),EP=new i4;function o4(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}var a4=QF;function l4(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=a4;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var un=l4(),el,ui,tl,kb,c4=(kb=class extends Mp{constructor(){super();De(this,el,!0);De(this,ui);De(this,tl);fe(this,tl,e=>{if(!Fp&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){$(this,ui)||this.setEventListener($(this,tl))}onUnsubscribe(){var e;this.hasListeners()||((e=$(this,ui))==null||e.call(this),fe(this,ui,void 0))}setEventListener(e){var n;fe(this,tl,e),(n=$(this,ui))==null||n.call(this),fe(this,ui,e(this.setOnline.bind(this)))}setOnline(e){$(this,el)!==e&&(fe(this,el,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return $(this,el)}},el=new WeakMap,ui=new WeakMap,tl=new WeakMap,kb),kf=new c4;function u4(t){return Math.min(1e3*2**t,3e4)}function TP(t){return(t??"online")==="online"?kf.isOnline():!0}var qy=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function IP(t){let e=!1,n=0,r;const s=o4(),i=()=>s.status!=="pending",o=y=>{var E;if(!i()){const w=new qy(y);p(w),(E=t.onCancel)==null||E.call(t,w)}},a=()=>{e=!0},l=()=>{e=!1},c=()=>EP.isFocused()&&(t.networkMode==="always"||kf.isOnline())&&t.canRun(),d=()=>TP(t.networkMode)&&t.canRun(),h=y=>{i()||(r==null||r(),s.resolve(y))},p=y=>{i()||(r==null||r(),s.reject(y))},f=()=>new Promise(y=>{var E;r=w=>{(i()||c())&&y(w)},(E=t.onPause)==null||E.call(t)}).then(()=>{var y;r=void 0,i()||(y=t.onContinue)==null||y.call(t)}),v=()=>{if(i())return;let y;const E=n===0?t.initialPromise:void 0;try{y=E??t.fn()}catch(w){y=Promise.reject(w)}Promise.resolve(y).then(h).catch(w=>{var V;if(i())return;const _=t.retry??(Fp?0:3),I=t.retryDelay??u4,D=typeof I=="function"?I(n,w):I,O=_===!0||typeof _=="number"&&n<_||typeof _=="function"&&_(n,w);if(e||!O){p(w);return}n++,(V=t.onFail)==null||V.call(t,n,w),t4(D).then(()=>c()?void 0:f()).then(()=>{e?p(w):v()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:a,continueRetry:l,canStart:d,start:()=>(d()?v():f().then(v),s)}}var ko,Db,SP=(Db=class{constructor(){De(this,ko)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),XF(this.gcTime)&&fe(this,ko,By.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Fp?1/0:5*60*1e3))}clearGcTimeout(){$(this,ko)&&(By.clearTimeout($(this,ko)),fe(this,ko,void 0))}},ko=new WeakMap,Db),Do,nl,Xn,No,Mt,Xu,Oo,hr,ss,Nb,d4=(Nb=class extends SP{constructor(n){super();De(this,hr);De(this,Do);De(this,nl);De(this,Xn);De(this,No);De(this,Mt);De(this,Xu);De(this,Oo);fe(this,Oo,!1),fe(this,Xu,n.defaultOptions),this.setOptions(n.options),this.observers=[],fe(this,No,n.client),fe(this,Xn,$(this,No).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,fe(this,Do,$T(this.options)),this.state=n.state??$(this,Do),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=$(this,Mt))==null?void 0:n.promise}setOptions(n){if(this.options={...$(this,Xu),...n},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=$T(this.options);r.data!==void 0&&(this.setState(BT(r.data,r.dataUpdatedAt)),fe(this,Do,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&$(this,Xn).remove(this)}setData(n,r){const s=n4(this.state.data,n,this.options);return Gt(this,hr,ss).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){Gt(this,hr,ss).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=$(this,Mt))==null?void 0:s.promise;return(i=$(this,Mt))==null||i.cancel(n),r?r.then(dr).catch(dr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState($(this,Do))}isActive(){return this.observers.some(n=>ZF(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===z_||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>$y(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!JF(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=$(this,Mt))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=$(this,Mt))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),$(this,Xn).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||($(this,Mt)&&($(this,Oo)?$(this,Mt).cancel({revert:!0}):$(this,Mt).cancelRetry()),this.scheduleGc()),$(this,Xn).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Gt(this,hr,ss).call(this,{type:"invalidate"})}async fetch(n,r){var c,d,h,p,f,v,y,E,w,_,I,D;if(this.state.fetchStatus!=="idle"&&((c=$(this,Mt))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if($(this,Mt))return $(this,Mt).continueRetry(),$(this,Mt).promise}if(n&&this.setOptions(n),!this.options.queryFn){const O=this.observers.find(V=>V.options.queryFn);O&&this.setOptions(O.options)}const s=new AbortController,i=O=>{Object.defineProperty(O,"signal",{enumerable:!0,get:()=>(fe(this,Oo,!0),s.signal)})},o=()=>{const O=wP(this.options,r),S=(()=>{const T={client:$(this,No),queryKey:this.queryKey,meta:this.meta};return i(T),T})();return fe(this,Oo,!1),this.options.persister?this.options.persister(O,S,this):O(S)},l=(()=>{const O={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:$(this,No),state:this.state,fetchFn:o};return i(O),O})();(d=this.options.behavior)==null||d.onFetch(l,this),fe(this,nl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&Gt(this,hr,ss).call(this,{type:"fetch",meta:(p=l.fetchOptions)==null?void 0:p.meta}),fe(this,Mt,IP({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,onCancel:O=>{O instanceof qy&&O.revert&&this.setState({...$(this,nl),fetchStatus:"idle"}),s.abort()},onFail:(O,V)=>{Gt(this,hr,ss).call(this,{type:"failed",failureCount:O,error:V})},onPause:()=>{Gt(this,hr,ss).call(this,{type:"pause"})},onContinue:()=>{Gt(this,hr,ss).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const O=await $(this,Mt).start();if(O===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(O),(v=(f=$(this,Xn).config).onSuccess)==null||v.call(f,O,this),(E=(y=$(this,Xn).config).onSettled)==null||E.call(y,O,this.state.error,this),O}catch(O){if(O instanceof qy){if(O.silent)return $(this,Mt).promise;if(O.revert){if(this.state.data===void 0)throw O;return this.state.data}}throw Gt(this,hr,ss).call(this,{type:"error",error:O}),(_=(w=$(this,Xn).config).onError)==null||_.call(w,O,this),(D=(I=$(this,Xn).config).onSettled)==null||D.call(I,this.state.data,O,this),O}finally{this.scheduleGc()}}},Do=new WeakMap,nl=new WeakMap,Xn=new WeakMap,No=new WeakMap,Mt=new WeakMap,Xu=new WeakMap,Oo=new WeakMap,hr=new WeakSet,ss=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...h4(s.data,this.options),fetchMeta:n.meta??null};case"success":const i={...s,...BT(n.data,n.dataUpdatedAt),dataUpdateCount:s.dataUpdateCount+1,...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return fe(this,nl,n.manual?i:void 0),i;case"error":const o=n.error;return{...s,error:o,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),un.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),$(this,Xn).notify({query:this,type:"updated",action:n})})},Nb);function h4(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:TP(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function BT(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function $T(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}function zT(t){return{onFetch:(e,n)=>{var d,h,p,f,v;const r=e.options,s=(p=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:p.direction,i=((f=e.state.data)==null?void 0:f.pages)||[],o=((v=e.state.data)==null?void 0:v.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let y=!1;const E=I=>{Object.defineProperty(I,"signal",{enumerable:!0,get:()=>(e.signal.aborted?y=!0:e.signal.addEventListener("abort",()=>{y=!0}),e.signal)})},w=wP(e.options,e.fetchOptions),_=async(I,D,O)=>{if(y)return Promise.reject();if(D==null&&I.pages.length)return Promise.resolve(I);const S=(()=>{const P={client:e.client,queryKey:e.queryKey,pageParam:D,direction:O?"backward":"forward",meta:e.options.meta};return E(P),P})(),T=await w(S),{maxPages:b}=e.options,k=O?s4:r4;return{pages:k(I.pages,T,b),pageParams:k(I.pageParams,D,b)}};if(s&&i.length){const I=s==="backward",D=I?f4:qT,O={pages:i,pageParams:o},V=D(r,O);a=await _(O,V,I)}else{const I=t??i.length;do{const D=l===0?o[0]??r.initialPageParam:qT(r,a);if(l>0&&D==null)break;a=await _(a,D),l++}while(l<I)}return a};e.options.persister?e.fetchFn=()=>{var y,E;return(E=(y=e.options).persister)==null?void 0:E.call(y,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=c}}}function qT(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function f4(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Ju,Fr,ln,Vo,Ur,Js,Ob,p4=(Ob=class extends SP{constructor(n){super();De(this,Ur);De(this,Ju);De(this,Fr);De(this,ln);De(this,Vo);fe(this,Ju,n.client),this.mutationId=n.mutationId,fe(this,ln,n.mutationCache),fe(this,Fr,[]),this.state=n.state||m4(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){$(this,Fr).includes(n)||($(this,Fr).push(n),this.clearGcTimeout(),$(this,ln).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){fe(this,Fr,$(this,Fr).filter(r=>r!==n)),this.scheduleGc(),$(this,ln).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){$(this,Fr).length||(this.state.status==="pending"?this.scheduleGc():$(this,ln).remove(this))}continue(){var n;return((n=$(this,Vo))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var a,l,c,d,h,p,f,v,y,E,w,_,I,D,O,V,S,T,b,k;const r=()=>{Gt(this,Ur,Js).call(this,{type:"continue"})},s={client:$(this,Ju),meta:this.options.meta,mutationKey:this.options.mutationKey};fe(this,Vo,IP({fn:()=>this.options.mutationFn?this.options.mutationFn(n,s):Promise.reject(new Error("No mutationFn found")),onFail:(P,N)=>{Gt(this,Ur,Js).call(this,{type:"failed",failureCount:P,error:N})},onPause:()=>{Gt(this,Ur,Js).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>$(this,ln).canRun(this)}));const i=this.state.status==="pending",o=!$(this,Vo).canStart();try{if(i)r();else{Gt(this,Ur,Js).call(this,{type:"pending",variables:n,isPaused:o}),await((l=(a=$(this,ln).config).onMutate)==null?void 0:l.call(a,n,this,s));const N=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,n,s));N!==this.state.context&&Gt(this,Ur,Js).call(this,{type:"pending",context:N,variables:n,isPaused:o})}const P=await $(this,Vo).start();return await((p=(h=$(this,ln).config).onSuccess)==null?void 0:p.call(h,P,n,this.state.context,this,s)),await((v=(f=this.options).onSuccess)==null?void 0:v.call(f,P,n,this.state.context,s)),await((E=(y=$(this,ln).config).onSettled)==null?void 0:E.call(y,P,null,this.state.variables,this.state.context,this,s)),await((_=(w=this.options).onSettled)==null?void 0:_.call(w,P,null,n,this.state.context,s)),Gt(this,Ur,Js).call(this,{type:"success",data:P}),P}catch(P){try{throw await((D=(I=$(this,ln).config).onError)==null?void 0:D.call(I,P,n,this.state.context,this,s)),await((V=(O=this.options).onError)==null?void 0:V.call(O,P,n,this.state.context,s)),await((T=(S=$(this,ln).config).onSettled)==null?void 0:T.call(S,void 0,P,this.state.variables,this.state.context,this,s)),await((k=(b=this.options).onSettled)==null?void 0:k.call(b,void 0,P,n,this.state.context,s)),P}finally{Gt(this,Ur,Js).call(this,{type:"error",error:P})}}finally{$(this,ln).runNext(this)}}},Ju=new WeakMap,Fr=new WeakMap,ln=new WeakMap,Vo=new WeakMap,Ur=new WeakSet,Js=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),un.batch(()=>{$(this,Fr).forEach(s=>{s.onMutationUpdate(n)}),$(this,ln).notify({mutation:this,type:"updated",action:n})})},Ob);function m4(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var as,fr,Zu,Vb,g4=(Vb=class extends Mp{constructor(e={}){super();De(this,as);De(this,fr);De(this,Zu);this.config=e,fe(this,as,new Set),fe(this,fr,new Map),fe(this,Zu,0)}build(e,n,r){const s=new p4({client:e,mutationCache:this,mutationId:++Bd(this,Zu)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){$(this,as).add(e);const n=ch(e);if(typeof n=="string"){const r=$(this,fr).get(n);r?r.push(e):$(this,fr).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if($(this,as).delete(e)){const n=ch(e);if(typeof n=="string"){const r=$(this,fr).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&$(this,fr).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=ch(e);if(typeof n=="string"){const r=$(this,fr).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=ch(e);if(typeof n=="string"){const s=(r=$(this,fr).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){un.batch(()=>{$(this,as).forEach(e=>{this.notify({type:"removed",mutation:e})}),$(this,as).clear(),$(this,fr).clear()})}getAll(){return Array.from($(this,as))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>FT(n,r))}findAll(e={}){return this.getAll().filter(n=>FT(e,n))}notify(e){un.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return un.batch(()=>Promise.all(e.map(n=>n.continue().catch(dr))))}},as=new WeakMap,fr=new WeakMap,Zu=new WeakMap,Vb);function ch(t){var e;return(e=t.options.scope)==null?void 0:e.id}var jr,Lb,y4=(Lb=class extends Mp{constructor(e={}){super();De(this,jr);this.config=e,fe(this,jr,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??$_(s,n);let o=this.get(i);return o||(o=new d4({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){$(this,jr).has(e.queryHash)||($(this,jr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=$(this,jr).get(e.queryHash);n&&(e.destroy(),n===e&&$(this,jr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){un.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return $(this,jr).get(e)}getAll(){return[...$(this,jr).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>MT(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>MT(e,r)):n}notify(e){un.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){un.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){un.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},jr=new WeakMap,Lb),ft,di,hi,rl,sl,fi,il,ol,Mb,v4=(Mb=class{constructor(t={}){De(this,ft);De(this,di);De(this,hi);De(this,rl);De(this,sl);De(this,fi);De(this,il);De(this,ol);fe(this,ft,t.queryCache||new y4),fe(this,di,t.mutationCache||new g4),fe(this,hi,t.defaultOptions||{}),fe(this,rl,new Map),fe(this,sl,new Map),fe(this,fi,0)}mount(){Bd(this,fi)._++,$(this,fi)===1&&(fe(this,il,EP.subscribe(async t=>{t&&(await this.resumePausedMutations(),$(this,ft).onFocus())})),fe(this,ol,kf.subscribe(async t=>{t&&(await this.resumePausedMutations(),$(this,ft).onOnline())})))}unmount(){var t,e;Bd(this,fi)._--,$(this,fi)===0&&((t=$(this,il))==null||t.call(this),fe(this,il,void 0),(e=$(this,ol))==null||e.call(this),fe(this,ol,void 0))}isFetching(t){return $(this,ft).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return $(this,di).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=$(this,ft).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=$(this,ft).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime($y(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return $(this,ft).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=$(this,ft).get(r.queryHash),i=s==null?void 0:s.state.data,o=YF(e,i);if(o!==void 0)return $(this,ft).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return un.batch(()=>$(this,ft).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=$(this,ft).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=$(this,ft);un.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=$(this,ft);return un.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=un.batch(()=>$(this,ft).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(dr).catch(dr)}invalidateQueries(t,e={}){return un.batch(()=>($(this,ft).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=un.batch(()=>$(this,ft).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(dr)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(dr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=$(this,ft).build(this,e);return n.isStaleByTime($y(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(dr).catch(dr)}fetchInfiniteQuery(t){return t.behavior=zT(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(dr).catch(dr)}ensureInfiniteQueryData(t){return t.behavior=zT(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return kf.isOnline()?$(this,di).resumePausedMutations():Promise.resolve()}getQueryCache(){return $(this,ft)}getMutationCache(){return $(this,di)}getDefaultOptions(){return $(this,hi)}setDefaultOptions(t){fe(this,hi,t)}setQueryDefaults(t,e){$(this,rl).set(Cu(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...$(this,rl).values()],n={};return e.forEach(r=>{ku(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){$(this,sl).set(Cu(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...$(this,sl).values()],n={};return e.forEach(r=>{ku(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...$(this,hi).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=$_(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===z_&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...$(this,hi).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){$(this,ft).clear(),$(this,di).clear()}},ft=new WeakMap,di=new WeakMap,hi=new WeakMap,rl=new WeakMap,sl=new WeakMap,fi=new WeakMap,il=new WeakMap,ol=new WeakMap,Mb),_4=x.createContext(void 0),w4=({client:t,children:e})=>(x.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),A.jsx(_4.Provider,{value:t,children:e}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Du(){return Du=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Du.apply(this,arguments)}var gi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(gi||(gi={}));const HT="popstate";function E4(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return Df("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Nu(s)}return bP(e,n,null,t)}function T4(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:a="",hash:l=""}=la(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Df("",{pathname:o,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=s.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof i=="string"?i:Nu(i))}function r(s,i){q_(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return bP(e,n,r,t)}function _t(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function q_(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function I4(){return Math.random().toString(36).substr(2,8)}function WT(t,e){return{usr:t.state,key:t.key,idx:e}}function Df(t,e,n,r){return n===void 0&&(n=null),Du({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?la(e):e,{state:n,key:e&&e.key||r||I4()})}function Nu(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function la(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function bP(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=gi.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(Du({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=gi.Pop;let E=d(),w=E==null?null:E-c;c=E,l&&l({action:a,location:y.location,delta:w})}function p(E,w){a=gi.Push;let _=Df(y.location,E,w);n&&n(_,E),c=d()+1;let I=WT(_,c),D=y.createHref(_);try{o.pushState(I,"",D)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;s.location.assign(D)}i&&l&&l({action:a,location:y.location,delta:1})}function f(E,w){a=gi.Replace;let _=Df(y.location,E,w);n&&n(_,E),c=d();let I=WT(_,c),D=y.createHref(_);o.replaceState(I,"",D),i&&l&&l({action:a,location:y.location,delta:0})}function v(E){let w=s.location.origin!=="null"?s.location.origin:s.location.href,_=typeof E=="string"?E:Nu(E);return _=_.replace(/ $/,"%20"),_t(w,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,w)}let y={get action(){return a},get location(){return t(s,o)},listen(E){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(HT,h),l=E,()=>{s.removeEventListener(HT,h),l=null}},createHref(E){return e(s,E)},createURL:v,encodeLocation(E){let w=v(E);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:p,replace:f,go(E){return o.go(E)}};return y}var KT;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(KT||(KT={}));function S4(t,e,n){return n===void 0&&(n="/"),b4(t,e,n)}function b4(t,e,n,r){let s=typeof e=="string"?la(e):e,i=H_(s.pathname||"/",n);if(i==null)return null;let o=AP(t);A4(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=F4(i);a=V4(o[l],c)}return a}function AP(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(_t(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Ai([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(_t(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),AP(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:N4(c,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of xP(i.path))s(i,o,l)}),e}function xP(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=xP(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function A4(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:O4(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const x4=/^:[\w-]+$/,P4=3,R4=2,C4=1,k4=10,D4=-2,GT=t=>t==="*";function N4(t,e){let n=t.split("/"),r=n.length;return n.some(GT)&&(r+=D4),e&&(r+=R4),n.filter(s=>!GT(s)).reduce((s,i)=>s+(x4.test(i)?P4:i===""?C4:k4),r)}function O4(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function V4(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=L4({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),p=l.route;if(!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:Ai([i,h.pathname]),pathnameBase:$4(Ai([i,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(i=Ai([i,h.pathnameBase]))}return o}function L4(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=M4(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,d,h)=>{let{paramName:p,isOptional:f}=d;if(p==="*"){let y=a[h]||"";o=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const v=a[h];return f&&!v?c[p]=void 0:c[p]=(v||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function M4(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),q_(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function F4(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return q_(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function H_(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function U4(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?la(t):t;return{pathname:n?n.startsWith("/")?n:j4(n,e):e,search:z4(r),hash:q4(s)}}function j4(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function pg(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function B4(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function W_(t,e){let n=B4(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function K_(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=la(t):(s=Du({},t),_t(!s.pathname||!s.pathname.includes("?"),pg("?","pathname","search",s)),_t(!s.pathname||!s.pathname.includes("#"),pg("#","pathname","hash",s)),_t(!s.search||!s.search.includes("#"),pg("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),h-=1;s.pathname=p.join("/")}a=h>=0?e[h]:"/"}let l=U4(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const Ai=t=>t.join("/").replace(/\/\/+/g,"/"),$4=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),z4=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,q4=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function H4(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const PP=["post","put","patch","delete"];new Set(PP);const W4=["get",...PP];new Set(W4);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ou(){return Ou=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ou.apply(this,arguments)}const G_=x.createContext(null),K4=x.createContext(null),Ji=x.createContext(null),Up=x.createContext(null),Zi=x.createContext({outlet:null,matches:[],isDataRoute:!1}),RP=x.createContext(null);function G4(t,e){let{relative:n}=e===void 0?{}:e;zl()||_t(!1);let{basename:r,navigator:s}=x.useContext(Ji),{hash:i,pathname:o,search:a}=kP(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Ai([r,o])),s.createHref({pathname:l,search:a,hash:i})}function zl(){return x.useContext(Up)!=null}function es(){return zl()||_t(!1),x.useContext(Up).location}function CP(t){x.useContext(Ji).static||x.useLayoutEffect(t)}function ld(){let{isDataRoute:t}=x.useContext(Zi);return t?aU():Q4()}function Q4(){zl()||_t(!1);let t=x.useContext(G_),{basename:e,future:n,navigator:r}=x.useContext(Ji),{matches:s}=x.useContext(Zi),{pathname:i}=es(),o=JSON.stringify(W_(s,n.v7_relativeSplatPath)),a=x.useRef(!1);return CP(()=>{a.current=!0}),x.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=K_(c,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Ai([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,i,t])}function kP(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=x.useContext(Ji),{matches:s}=x.useContext(Zi),{pathname:i}=es(),o=JSON.stringify(W_(s,r.v7_relativeSplatPath));return x.useMemo(()=>K_(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function Y4(t,e){return X4(t,e)}function X4(t,e,n,r){zl()||_t(!1);let{navigator:s}=x.useContext(Ji),{matches:i}=x.useContext(Zi),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=es(),d;if(e){var h;let E=typeof e=="string"?la(e):e;l==="/"||(h=E.pathname)!=null&&h.startsWith(l)||_t(!1),d=E}else d=c;let p=d.pathname||"/",f=p;if(l!=="/"){let E=l.replace(/^\//,"").split("/");f="/"+p.replace(/^\//,"").split("/").slice(E.length).join("/")}let v=S4(t,{pathname:f}),y=nU(v&&v.map(E=>Object.assign({},E,{params:Object.assign({},a,E.params),pathname:Ai([l,s.encodeLocation?s.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?l:Ai([l,s.encodeLocation?s.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),i,n,r);return e&&y?x.createElement(Up.Provider,{value:{location:Ou({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:gi.Pop}},y):y}function J4(){let t=oU(),e=H4(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},e),n?x.createElement("pre",{style:s},n):null,null)}const Z4=x.createElement(J4,null);class eU extends x.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?x.createElement(Zi.Provider,{value:this.props.routeContext},x.createElement(RP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function tU(t){let{routeContext:e,match:n,children:r}=t,s=x.useContext(G_);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),x.createElement(Zi.Provider,{value:e},r)}function nU(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||_t(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:p,errors:f}=n,v=h.route.loader&&p[h.route.id]===void 0&&(!f||f[h.route.id]===void 0);if(h.route.lazy||v){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,h,p)=>{let f,v=!1,y=null,E=null;n&&(f=a&&h.route.id?a[h.route.id]:void 0,y=h.route.errorElement||Z4,l&&(c<0&&p===0?(lU("route-fallback"),v=!0,E=null):c===p&&(v=!0,E=h.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,p+1)),_=()=>{let I;return f?I=y:v?I=E:h.route.Component?I=x.createElement(h.route.Component,null):h.route.element?I=h.route.element:I=d,x.createElement(tU,{match:h,routeContext:{outlet:d,matches:w,isDataRoute:n!=null},children:I})};return n&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?x.createElement(eU,{location:n.location,revalidation:n.revalidation,component:y,error:f,children:_(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):_()},null)}var DP=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(DP||{}),NP=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(NP||{});function rU(t){let e=x.useContext(G_);return e||_t(!1),e}function sU(t){let e=x.useContext(K4);return e||_t(!1),e}function iU(t){let e=x.useContext(Zi);return e||_t(!1),e}function OP(t){let e=iU(),n=e.matches[e.matches.length-1];return n.route.id||_t(!1),n.route.id}function oU(){var t;let e=x.useContext(RP),n=sU(),r=OP();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function aU(){let{router:t}=rU(DP.UseNavigateStable),e=OP(NP.UseNavigateStable),n=x.useRef(!1);return CP(()=>{n.current=!0}),x.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Ou({fromRouteId:e},i)))},[t,e])}const QT={};function lU(t,e,n){QT[t]||(QT[t]=!0)}function VP(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function O8(t){let{to:e,replace:n,state:r,relative:s}=t;zl()||_t(!1);let{future:i,static:o}=x.useContext(Ji),{matches:a}=x.useContext(Zi),{pathname:l}=es(),c=ld(),d=K_(e,W_(a,i.v7_relativeSplatPath),l,s==="path"),h=JSON.stringify(d);return x.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:s}),[c,h,s,n,r]),null}function se(t){_t(!1)}function LP(t){let{basename:e="/",children:n=null,location:r,navigationType:s=gi.Pop,navigator:i,static:o=!1,future:a}=t;zl()&&_t(!1);let l=e.replace(/^\/*/,"/"),c=x.useMemo(()=>({basename:l,navigator:i,static:o,future:Ou({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=la(r));let{pathname:d="/",search:h="",hash:p="",state:f=null,key:v="default"}=r,y=x.useMemo(()=>{let E=H_(d,l);return E==null?null:{location:{pathname:E,search:h,hash:p,state:f,key:v},navigationType:s}},[l,d,h,p,f,v,s]);return y==null?null:x.createElement(Ji.Provider,{value:c},x.createElement(Up.Provider,{children:n,value:y}))}function YT(t){let{children:e,location:n}=t;return Y4(Hy(e),n)}new Promise(()=>{});function Hy(t,e){e===void 0&&(e=[]);let n=[];return x.Children.forEach(t,(r,s)=>{if(!x.isValidElement(r))return;let i=[...e,s];if(r.type===x.Fragment){n.push.apply(n,Hy(r.props.children,i));return}r.type!==se&&_t(!1),!r.props.index||!r.props.children||_t(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Hy(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wy(){return Wy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wy.apply(this,arguments)}function cU(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function uU(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function dU(t,e){return t.button===0&&(!e||e==="_self")&&!uU(t)}function Ky(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function hU(t,e){let n=Ky(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const fU=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],pU="6";try{window.__reactRouterVersion=pU}catch{}const mU="startTransition",Nf=Qb[mU];function gU(t){let{basename:e,children:n,future:r,window:s}=t,i=x.useRef();i.current==null&&(i.current=E4({window:s,v5Compat:!0}));let o=i.current,[a,l]=x.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=x.useCallback(h=>{c&&Nf?Nf(()=>l(h)):l(h)},[l,c]);return x.useLayoutEffect(()=>o.listen(d),[o,d]),x.useEffect(()=>VP(r),[r]),x.createElement(LP,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}function yU(t){let{basename:e,children:n,future:r,window:s}=t,i=x.useRef();i.current==null&&(i.current=T4({window:s,v5Compat:!0}));let o=i.current,[a,l]=x.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=x.useCallback(h=>{c&&Nf?Nf(()=>l(h)):l(h)},[l,c]);return x.useLayoutEffect(()=>o.listen(d),[o,d]),x.useEffect(()=>VP(r),[r]),x.createElement(LP,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const vU=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",_U=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wU=x.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:h}=e,p=cU(e,fU),{basename:f}=x.useContext(Ji),v,y=!1;if(typeof c=="string"&&_U.test(c)&&(v=c,vU))try{let I=new URL(window.location.href),D=c.startsWith("//")?new URL(I.protocol+c):new URL(c),O=H_(D.pathname,f);D.origin===I.origin&&O!=null?c=O+D.search+D.hash:y=!0}catch{}let E=G4(c,{relative:s}),w=EU(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:s,viewTransition:h});function _(I){r&&r(I),I.defaultPrevented||w(I)}return x.createElement("a",Wy({},p,{href:v||E,onClick:y||i?r:_,ref:n,target:l}))});var XT;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(XT||(XT={}));var JT;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(JT||(JT={}));function EU(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=ld(),c=es(),d=kP(t,{relative:o});return x.useCallback(h=>{if(dU(h,n)){h.preventDefault();let p=r!==void 0?r:Nu(c)===Nu(d);l(t,{replace:p,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,d,r,s,n,t,i,o,a])}function V8(t){let e=x.useRef(Ky(t)),n=x.useRef(!1),r=es(),s=x.useMemo(()=>hU(r.search,n.current?null:e.current),[r.search]),i=ld(),o=x.useCallback((a,l)=>{const c=Ky(typeof a=="function"?a(s):a);n.current=!0,i("?"+c,l)},[i,s]);return[s,o]}const MP=x.createContext(void 0),TU=({children:t})=>{const[e,n]=x.useState("medium"),[r,s]=x.useState(!1),[i,o]=x.useState(!1);x.useEffect(()=>{const l=()=>{const c=window.innerWidth<=768;s(c)};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]),x.useEffect(()=>{try{const l=!!window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron")||typeof window<"u"&&window.location&&window.location.protocol==="file:";o(l)}catch{o(!1)}},[]),x.useEffect(()=>{const l=["appFontSize","desktopFontSize","mobileFontSize"];for(const c of l){const d=localStorage.getItem(c);if(d&&["small","medium","large"].includes(d)){n(d);break}}},[]),x.useEffect(()=>{const l=document.documentElement;l.classList.remove("font-size-small","font-size-medium","font-size-large"),l.classList.add(`font-size-${e}`)},[e]);const a=l=>{n(l),localStorage.setItem("appFontSize",l),i&&localStorage.setItem("desktopFontSize",l)};return A.jsx(MP.Provider,{value:{fontSize:e,setFontSize:a,isMobile:r,isDesktopApp:i},children:t})},L8=()=>{const t=x.useContext(MP);if(t===void 0)throw new Error("useFontSize must be used within a FontSizeProvider");return t},IU=Rx("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),FP=x.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?OO:"button";return A.jsx(o,{className:Cs(IU({variant:e,size:n,className:t})),ref:i,...s})});FP.displayName="Button";const Gy=x.forwardRef(({className:t,type:e,...n},r)=>{const s={...n};return Object.prototype.hasOwnProperty.call(s,"value")&&s.value===void 0&&(s.value=""),A.jsx("input",{type:e,className:Cs("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...s})});Gy.displayName="Input";const SU=()=>{};var ZT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UP=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},bU=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},jP={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=i>>2,h=(i&3)<<4|a>>4;let p=(a&15)<<2|c>>6,f=c&63;l||(f=64,o||(p=64)),r.push(n[d],n[h],n[p],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(UP(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):bU(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new AU;const p=i<<2|a>>4;if(r.push(p),c!==64){const f=a<<4&240|c>>2;if(r.push(f),h!==64){const v=c<<6&192|h;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class AU extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xU=function(t){const e=UP(t);return jP.encodeByteArray(e,!0)},Of=function(t){return xU(t).replace(/\./g,"")},BP=function(t){try{return jP.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $P(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PU=()=>$P().__FIREBASE_DEFAULTS__,RU=()=>{if(typeof process>"u"||typeof ZT>"u")return;const t=ZT.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},CU=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&BP(t[1]);return e&&JSON.parse(e)},jp=()=>{try{return SU()||PU()||RU()||CU()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},kU=t=>{var e,n;return(n=(e=jp())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},zP=t=>{const e=kU(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},qP=()=>{var t;return(t=jp())==null?void 0:t.config},DU=t=>{var e;return(e=jp())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NU{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ks(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Q_(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OU(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Of(JSON.stringify(n)),Of(JSON.stringify(o)),""].join(".")}const Xc={};function VU(){const t={prod:[],emulator:[]};for(const e of Object.keys(Xc))Xc[e]?t.emulator.push(e):t.prod.push(e);return t}function LU(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let eI=!1;function HP(t,e){if(typeof window>"u"||typeof document>"u"||!ks(window.location.host)||Xc[t]===e||Xc[t]||eI)return;Xc[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",i=VU().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function l(p,f){p.setAttribute("width","24"),p.setAttribute("id",f),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function c(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{eI=!0,o()},p}function d(p,f){p.setAttribute("id",f),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function h(){const p=LU(r),f=n("text"),v=document.getElementById(f)||document.createElement("span"),y=n("learnmore"),E=document.getElementById(y)||document.createElement("a"),w=n("preprendIcon"),_=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const I=p.element;a(I),d(E,y);const D=c();l(_,w),I.append(_,v,E,D),document.body.appendChild(I)}i?(v.innerText="Preview backend disconnected.",_.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(_.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",f)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function MU(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wt())}function WP(){var e;const t=(e=jp())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function FU(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function UU(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function jU(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function BU(){const t=Wt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function KP(){return!WP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function GP(){return!WP()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function QP(){try{return typeof indexedDB=="object"}catch{return!1}}function $U(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zU="FirebaseError";class Ar extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=zU,Object.setPrototypeOf(this,Ar.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cd.prototype.create)}}class cd{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?qU(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Ar(s,a,r)}}function qU(t,e){return t.replace(HU,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const HU=/\{\$([^}]+)}/g;function gl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(tI(i)&&tI(o)){if(!gl(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function tI(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y_(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Vc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Lc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function WU(t,e){const n=new KU(t,e);return n.subscribe.bind(n)}class KU{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");GU(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=mg),s.error===void 0&&(s.error=mg),s.complete===void 0&&(s.complete=mg);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function GU(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function mg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(t){return t&&t._delegate?t._delegate:t}class bs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QU{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new NU;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(XU(e))try{this.getOrInitializeService({instanceIdentifier:po})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=po){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=po){return this.instances.has(e)}getOptions(e=po){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:YU(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=po){return this.component?this.component.multipleInstances?e:po:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function YU(t){return t===po?void 0:t}function XU(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JU{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new QU(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Re;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Re||(Re={}));const ZU={debug:Re.DEBUG,verbose:Re.VERBOSE,info:Re.INFO,warn:Re.WARN,error:Re.ERROR,silent:Re.SILENT},e6=Re.INFO,t6={[Re.DEBUG]:"log",[Re.VERBOSE]:"log",[Re.INFO]:"info",[Re.WARN]:"warn",[Re.ERROR]:"error"},n6=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=t6[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class X_{constructor(e){this.name=e,this._logLevel=e6,this._logHandler=n6,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Re))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ZU[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Re.DEBUG,...e),this._logHandler(this,Re.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Re.VERBOSE,...e),this._logHandler(this,Re.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Re.INFO,...e),this._logHandler(this,Re.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Re.WARN,...e),this._logHandler(this,Re.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Re.ERROR,...e),this._logHandler(this,Re.ERROR,...e)}}const r6=(t,e)=>e.some(n=>t instanceof n);let nI,rI;function s6(){return nI||(nI=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function i6(){return rI||(rI=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const YP=new WeakMap,Qy=new WeakMap,XP=new WeakMap,gg=new WeakMap,J_=new WeakMap;function o6(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(xi(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&YP.set(n,t)}).catch(()=>{}),J_.set(e,t),e}function a6(t){if(Qy.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Qy.set(t,e)}let Yy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Qy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||XP.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return xi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function l6(t){Yy=t(Yy)}function c6(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(yg(this),e,...n);return XP.set(r,e.sort?e.sort():[e]),xi(r)}:i6().includes(t)?function(...e){return t.apply(yg(this),e),xi(YP.get(this))}:function(...e){return xi(t.apply(yg(this),e))}}function u6(t){return typeof t=="function"?c6(t):(t instanceof IDBTransaction&&a6(t),r6(t,s6())?new Proxy(t,Yy):t)}function xi(t){if(t instanceof IDBRequest)return o6(t);if(gg.has(t))return gg.get(t);const e=u6(t);return e!==t&&(gg.set(t,e),J_.set(e,t)),e}const yg=t=>J_.get(t);function d6(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=xi(o);return r&&o.addEventListener("upgradeneeded",l=>{r(xi(o.result),l.oldVersion,l.newVersion,xi(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const h6=["get","getKey","getAll","getAllKeys","count"],f6=["put","add","delete","clear"],vg=new Map;function sI(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(vg.get(e))return vg.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=f6.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||h6.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return vg.set(e,i),i}l6(t=>({...t,get:(e,n,r)=>sI(e,n)||t.get(e,n,r),has:(e,n)=>!!sI(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p6{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(m6(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function m6(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Xy="@firebase/app",iI="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const As=new X_("@firebase/app"),g6="@firebase/app-compat",y6="@firebase/analytics-compat",v6="@firebase/analytics",_6="@firebase/app-check-compat",w6="@firebase/app-check",E6="@firebase/auth",T6="@firebase/auth-compat",I6="@firebase/database",S6="@firebase/data-connect",b6="@firebase/database-compat",A6="@firebase/functions",x6="@firebase/functions-compat",P6="@firebase/installations",R6="@firebase/installations-compat",C6="@firebase/messaging",k6="@firebase/messaging-compat",D6="@firebase/performance",N6="@firebase/performance-compat",O6="@firebase/remote-config",V6="@firebase/remote-config-compat",L6="@firebase/storage",M6="@firebase/storage-compat",F6="@firebase/firestore",U6="@firebase/ai",j6="@firebase/firestore-compat",B6="firebase",$6="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jy="[DEFAULT]",z6={[Xy]:"fire-core",[g6]:"fire-core-compat",[v6]:"fire-analytics",[y6]:"fire-analytics-compat",[w6]:"fire-app-check",[_6]:"fire-app-check-compat",[E6]:"fire-auth",[T6]:"fire-auth-compat",[I6]:"fire-rtdb",[S6]:"fire-data-connect",[b6]:"fire-rtdb-compat",[A6]:"fire-fn",[x6]:"fire-fn-compat",[P6]:"fire-iid",[R6]:"fire-iid-compat",[C6]:"fire-fcm",[k6]:"fire-fcm-compat",[D6]:"fire-perf",[N6]:"fire-perf-compat",[O6]:"fire-rc",[V6]:"fire-rc-compat",[L6]:"fire-gcs",[M6]:"fire-gcs-compat",[F6]:"fire-fst",[j6]:"fire-fst-compat",[U6]:"fire-vertex","fire-js":"fire-js",[B6]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vf=new Map,q6=new Map,Zy=new Map;function oI(t,e){try{t.container.addComponent(e)}catch(n){As.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Fi(t){const e=t.name;if(Zy.has(e))return As.debug(`There were multiple attempts to register component ${e}.`),!1;Zy.set(e,t);for(const n of Vf.values())oI(n,t);for(const n of q6.values())oI(n,t);return!0}function Bp(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Tn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Pi=new cd("app","Firebase",H6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W6{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new bs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Pi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ud=$6;function JP(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Jy,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Pi.create("bad-app-name",{appName:String(s)});if(n||(n=qP()),!n)throw Pi.create("no-options");const i=Vf.get(s);if(i){if(gl(n,i.options)&&gl(r,i.config))return i;throw Pi.create("duplicate-app",{appName:s})}const o=new JU(s);for(const l of Zy.values())o.addComponent(l);const a=new W6(n,r,o);return Vf.set(s,a),a}function ZP(t=Jy){const e=Vf.get(t);if(!e&&t===Jy&&qP())return JP();if(!e)throw Pi.create("no-app",{appName:t});return e}function nr(t,e,n){let r=z6[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),As.warn(o.join(" "));return}Fi(new bs(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K6="firebase-heartbeat-database",G6=1,Vu="firebase-heartbeat-store";let _g=null;function eR(){return _g||(_g=d6(K6,G6,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Vu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Pi.create("idb-open",{originalErrorMessage:t.message})})),_g}async function Q6(t){try{const n=(await eR()).transaction(Vu),r=await n.objectStore(Vu).get(tR(t));return await n.done,r}catch(e){if(e instanceof Ar)As.warn(e.message);else{const n=Pi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});As.warn(n.message)}}}async function aI(t,e){try{const r=(await eR()).transaction(Vu,"readwrite");await r.objectStore(Vu).put(e,tR(t)),await r.done}catch(n){if(n instanceof Ar)As.warn(n.message);else{const r=Pi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});As.warn(r.message)}}}function tR(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y6=1024,X6=30;class J6{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ej(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=lI();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>X6){const o=tj(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){As.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=lI(),{heartbeatsToSend:r,unsentEntries:s}=Z6(this._heartbeatsCache.heartbeats),i=Of(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return As.warn(n),""}}}function lI(){return new Date().toISOString().substring(0,10)}function Z6(t,e=Y6){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),cI(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),cI(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class ej{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return QP()?$U().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Q6(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return aI(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return aI(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function cI(t){return Of(JSON.stringify({version:2,heartbeats:t})).length}function tj(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nj(t){Fi(new bs("platform-logger",e=>new p6(e),"PRIVATE")),Fi(new bs("heartbeat",e=>new J6(e),"PRIVATE")),nr(Xy,iI,t),nr(Xy,iI,"esm2020"),nr("fire-js","")}nj("");function nR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const rj=nR,rR=new cd("auth","Firebase",nR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lf=new X_("@firebase/auth");function sj(t,...e){Lf.logLevel<=Re.WARN&&Lf.warn(`Auth (${ud}): ${t}`,...e)}function Bh(t,...e){Lf.logLevel<=Re.ERROR&&Lf.error(`Auth (${ud}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(t,...e){throw ew(t,...e)}function Fo(t,...e){return ew(t,...e)}function Z_(t,e,n){const r={...rj(),[e]:n};return new cd("auth","Firebase",r).create(e,{appName:t.name})}function Ri(t){return Z_(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ij(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Xr(t,"argument-error"),Z_(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ew(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return rR.create(t,...e)}function Te(t,e,...n){if(!t)throw ew(e,...n)}function ds(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Bh(e),new Error(e)}function Qo(t,e){t||ds(e)}function oj(){return uI()==="http:"||uI()==="https:"}function uI(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(oj()||UU()||"connection"in navigator)?navigator.onLine:!0}function lj(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e,n){this.shortDelay=e,this.longDelay=n,Qo(n>e,"Short delay should be less than long delay!"),this.isMobile=MU()||jU()}get(){return aj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cj(t,e){Qo(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ds("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ds("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ds("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dj=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],hj=new dd(3e4,6e4);function Ds(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Ns(t,e,n,r,s={}){return iR(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Y_({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:l,...i};return FU()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&ks(t.emulatorConfig.host)&&(c.credentials="include"),sR.fetch()(await oR(t,t.config.apiHost,n,a),c)})}async function iR(t,e,n){t._canInitEmulator=!1;const r={...uj,...e};try{const s=new pj(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw uh(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw uh(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw uh(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw uh(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Z_(t,d,c);Xr(t,d)}}catch(s){if(s instanceof Ar)throw s;Xr(t,"network-request-failed",{message:String(s)})}}async function hd(t,e,n,r,s={}){const i=await Ns(t,e,n,r,s);return"mfaPendingCredential"in i&&Xr(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function oR(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?cj(t.config,s):`${t.config.apiScheme}://${s}`;return dj.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function fj(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class pj{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Fo(this.auth,"network-request-failed")),hj.get())})}}function uh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Fo(t,e,r);return s.customData._tokenResponse=n,s}function dI(t){return t!==void 0&&t.enterprise!==void 0}class mj{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return fj(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function gj(t,e){return Ns(t,"GET","/v2/recaptchaConfig",Ds(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yj(t,e){return Ns(t,"POST","/v1/accounts:delete",e)}async function Mf(t,e){return Ns(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function vj(t,e=!1){const n=He(t),r=await n.getIdToken(e),s=tw(r);Te(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Jc(wg(s.auth_time)),issuedAtTime:Jc(wg(s.iat)),expirationTime:Jc(wg(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function wg(t){return Number(t)*1e3}function tw(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Bh("JWT malformed, contained fewer than 3 sections"),null;try{const s=BP(n);return s?JSON.parse(s):(Bh("Failed to decode base64 JWT payload"),null)}catch(s){return Bh("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function hI(t){const e=tw(t);return Te(e,"internal-error"),Te(typeof e.exp<"u","internal-error"),Te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ar&&_j(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function _j({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wj{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Jc(this.lastLoginAt),this.creationTime=Jc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ff(t){var h;const e=t.auth,n=await t.getIdToken(),r=await yl(t,Mf(e,{idToken:n}));Te(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(h=s.providerUserInfo)!=null&&h.length?aR(s.providerUserInfo):[],o=Tj(t.providerData,i),a=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),c=a?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new ev(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,d)}async function Ej(t){const e=He(t);await Ff(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Tj(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function aR(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ij(t,e){const n=await iR(t,{},async()=>{const r=Y_({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await oR(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&ks(t.emulatorConfig.host)&&(l.credentials="include"),sR.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Sj(t,e){return Ns(t,"POST","/v2/accounts:revokeToken",Ds(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Te(e.idToken,"internal-error"),Te(typeof e.idToken<"u","internal-error"),Te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):hI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Te(e.length!==0,"internal-error");const n=hI(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await Ij(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Qa;return r&&(Te(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Te(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Te(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Qa,this.toJSON())}_performRefresh(){return ds("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gs(t,e){Te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class yr{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new wj(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ev(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await yl(this,this.stsTokenManager.getToken(this.auth,e));return Te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return vj(this,e)}reload(){return Ej(this)}_assign(e){this!==e&&(Te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new yr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ff(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Tn(this.auth.app))return Promise.reject(Ri(this.auth));const e=await this.getIdToken();return await yl(this,yj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,c=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:h,emailVerified:p,isAnonymous:f,providerData:v,stsTokenManager:y}=n;Te(h&&y,e,"internal-error");const E=Qa.fromJSON(this.name,y);Te(typeof h=="string",e,"internal-error"),Gs(r,e.name),Gs(s,e.name),Te(typeof p=="boolean",e,"internal-error"),Te(typeof f=="boolean",e,"internal-error"),Gs(i,e.name),Gs(o,e.name),Gs(a,e.name),Gs(l,e.name),Gs(c,e.name),Gs(d,e.name);const w=new yr({uid:h,auth:e,email:s,emailVerified:p,displayName:r,isAnonymous:f,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:E,createdAt:c,lastLoginAt:d});return v&&Array.isArray(v)&&(w.providerData=v.map(_=>({..._}))),l&&(w._redirectEventId=l),w}static async _fromIdTokenResponse(e,n,r=!1){const s=new Qa;s.updateFromServerResponse(n);const i=new yr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Ff(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Te(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?aR(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new Qa;a.updateFromIdToken(r);const l=new yr({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new ev(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI=new Map;function Ao(t){Qo(t instanceof Function,"Expected a class definition");let e=fI.get(t);return e?(Qo(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,fI.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}lR.type="NONE";const tv=lR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eg(t,e,n){return`firebase:${t}:${e}:${n}`}class Ya{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Eg(this.userKey,s.apiKey,i),this.fullPersistenceKey=Eg("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Mf(this.auth,{idToken:e}).catch(()=>{});return n?yr._fromGetAccountInfoResponse(this.auth,n,e):null}return yr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ya(Ao(tv),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Ao(tv);const o=Eg(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){let h;if(typeof d=="string"){const p=await Mf(e,{idToken:d}).catch(()=>{});if(!p)break;h=await yr._fromGetAccountInfoResponse(e,p,d)}else h=yr._fromJSON(e,d);c!==i&&(a=h),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Ya(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new Ya(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pI(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(cR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(bj(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(dR(e))return"Blackberry";if(hR(e))return"Webos";if(Aj(e))return"Safari";if((e.includes("chrome/")||xj(e))&&!e.includes("edge/"))return"Chrome";if(uR(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function bj(t=Wt()){return/firefox\//i.test(t)}function Aj(t=Wt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xj(t=Wt()){return/crios\//i.test(t)}function cR(t=Wt()){return/iemobile/i.test(t)}function uR(t=Wt()){return/android/i.test(t)}function dR(t=Wt()){return/blackberry/i.test(t)}function hR(t=Wt()){return/webos/i.test(t)}function Pj(t=Wt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Rj(){return BU()&&document.documentMode===10}function Cj(t=Wt()){return Pj(t)||uR(t)||hR(t)||dR(t)||/windows phone/i.test(t)||cR(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fR(t,e=[]){let n;switch(t){case"Browser":n=pI(Wt());break;case"Worker":n=`${pI(Wt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ud}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dj(t,e={}){return Ns(t,"GET","/v2/passwordPolicy",Ds(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nj=6;class Oj{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Nj,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new mI(this),this.idTokenSubscription=new mI(this),this.beforeStateQueue=new kj(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ao(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Ya.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Mf(this,{idToken:e}),r=await yr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Tn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ff(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=lj()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Tn(this.app))return Promise.reject(Ri(this));const n=e?He(e):null;return n&&Te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Tn(this.app)?Promise.reject(Ri(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Tn(this.app)?Promise.reject(Ri(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ao(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Dj(this),n=new Oj(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new cd("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Sj(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ao(e)||this._popupRedirectResolver;Te(n,this,"argument-error"),this.redirectPersistenceManager=await Ya.create(this,[Ao(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Te(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Tn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&sj(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ca(t){return He(t)}class mI{constructor(e){this.auth=e,this.observer=null,this.addObserver=WU(n=>this.observer=n)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nw={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Lj(t){nw=t}function Mj(t){return nw.loadJS(t)}function Fj(){return nw.recaptchaEnterpriseScript}class Uj{constructor(){this.enterprise=new jj}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class jj{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Bj="recaptcha-enterprise",pR="NO_RECAPTCHA";class $j{constructor(e){this.type=Bj,this.auth=ca(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{gj(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new mj(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;dI(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(pR)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Uj().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&dI(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=Fj();l.length!==0&&(l+=a),Mj(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function gI(t,e,n,r=!1,s=!1){const i=new $j(t);let o;if(s)o=pR;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Uf(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await gI(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await gI(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zj(t,e){const n=Bp(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(gl(i,e??{}))return s;Xr(s,"already-initialized")}return n.initialize({options:e})}function qj(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ao);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ds("not implemented")}_getIdTokenResponse(e){return ds("not implemented")}_linkToIdToken(e,n){return ds("not implemented")}_getReauthenticationResolver(e){return ds("not implemented")}}async function Hj(t,e){return Ns(t,"POST","/v1/accounts:update",e)}async function Wj(t,e){return Ns(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kj(t,e){return hd(t,"POST","/v1/accounts:signInWithPassword",Ds(t,e))}async function Gj(t,e){return Ns(t,"POST","/v1/accounts:sendOobCode",Ds(t,e))}async function Qj(t,e){return Gj(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yj(t,e){return hd(t,"POST","/v1/accounts:signInWithEmailLink",Ds(t,e))}async function Xj(t,e){return hd(t,"POST","/v1/accounts:signInWithEmailLink",Ds(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu extends rw{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Lu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Lu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Uf(e,n,"signInWithPassword",Kj);case"emailLink":return Yj(e,{email:this._email,oobCode:this._password});default:Xr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Uf(e,r,"signUpPassword",Wj);case"emailLink":return Xj(e,{idToken:n,email:this._email,oobCode:this._password});default:Xr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xa(t,e){return hd(t,"POST","/v1/accounts:signInWithIdp",Ds(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jj="http://localhost";class Yo extends rw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Yo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Xr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new Yo(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Xa(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Xa(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Xa(e,n)}buildRequest(){const e={requestUri:Jj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Y_(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zj(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function e3(t){const e=Vc(Lc(t)).link,n=e?Vc(Lc(e)).deep_link_id:null,r=Vc(Lc(t)).deep_link_id;return(r?Vc(Lc(r)).link:null)||r||n||e||t}class sw{constructor(e){const n=Vc(Lc(e)),r=n.apiKey??null,s=n.oobCode??null,i=Zj(n.mode??null);Te(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=e3(e);try{return new sw(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(){this.providerId=ql.PROVIDER_ID}static credential(e,n){return Lu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=sw.parseLink(n);return Te(r,"argument-error"),Lu._fromEmailAndCode(e,r.code,r.tenantId)}}ql.PROVIDER_ID="password";ql.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ql.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p extends mR{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri extends $p{constructor(){super("facebook.com")}static credential(e){return Yo._fromParams({providerId:ri.PROVIDER_ID,signInMethod:ri.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ri.credentialFromTaggedObject(e)}static credentialFromError(e){return ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ri.credential(e.oauthAccessToken)}catch{return null}}}ri.FACEBOOK_SIGN_IN_METHOD="facebook.com";ri.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si extends $p{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Yo._fromParams({providerId:si.PROVIDER_ID,signInMethod:si.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return si.credentialFromTaggedObject(e)}static credentialFromError(e){return si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return si.credential(n,r)}catch{return null}}}si.GOOGLE_SIGN_IN_METHOD="google.com";si.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii extends $p{constructor(){super("github.com")}static credential(e){return Yo._fromParams({providerId:ii.PROVIDER_ID,signInMethod:ii.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ii.credentialFromTaggedObject(e)}static credentialFromError(e){return ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ii.credential(e.oauthAccessToken)}catch{return null}}}ii.GITHUB_SIGN_IN_METHOD="github.com";ii.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi extends $p{constructor(){super("twitter.com")}static credential(e,n){return Yo._fromParams({providerId:oi.PROVIDER_ID,signInMethod:oi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return oi.credentialFromTaggedObject(e)}static credentialFromError(e){return oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return oi.credential(n,r)}catch{return null}}}oi.TWITTER_SIGN_IN_METHOD="twitter.com";oi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t3(t,e){return hd(t,"POST","/v1/accounts:signUp",Ds(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await yr._fromIdTokenResponse(e,r,s),o=yI(r);return new Xo({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=yI(r);return new Xo({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function yI(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf extends Ar{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,jf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new jf(e,n,r,s)}}function gR(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?jf._fromErrorAndOperation(t,i,e,r):i})}async function n3(t,e,n=!1){const r=await yl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Xo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yR(t,e,n=!1){const{auth:r}=t;if(Tn(r.app))return Promise.reject(Ri(r));const s="reauthenticate";try{const i=await yl(t,gR(r,s,e,t),n);Te(i.idToken,r,"internal-error");const o=tw(i.idToken);Te(o,r,"internal-error");const{sub:a}=o;return Te(t.uid===a,r,"user-mismatch"),Xo._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Xr(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vR(t,e,n=!1){if(Tn(t.app))return Promise.reject(Ri(t));const r="signIn",s=await gR(t,r,e),i=await Xo._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function r3(t,e){return vR(ca(t),e)}async function M8(t,e){return yR(He(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _R(t){const e=ca(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function s3(t,e,n){const r=ca(t);await Uf(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",Qj)}async function vI(t,e,n){if(Tn(t.app))return Promise.reject(Ri(t));const r=ca(t),o=await Uf(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",t3).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&_R(t),l}),a=await Xo._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function i3(t,e,n){return Tn(t.app)?Promise.reject(Ri(t)):r3(He(t),ql.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&_R(t),r})}function F8(t,e){return o3(He(t),null,e)}async function o3(t,e,n){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(i.password=n);const o=await yl(t,Hj(r,i));await t._updateTokensIfNecessary(o,!0)}function a3(t,e,n,r){return He(t).onAuthStateChanged(e,n,r)}function _I(t){return He(t).signOut()}const wI="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(wI,"1"),this.storage.removeItem(wI),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l3=1e3,c3=10;class ER extends wR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Cj(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);Rj()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,c3):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},l3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}ER.type="LOCAL";const u3=ER;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d3 extends wR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}d3.type="SESSION";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h3(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}new dd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f3(t,e){return Te(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw extends rw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Xa(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Xa(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Xa(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function p3(t){return vR(t.auth,new iw(t),t.bypassAuthState)}function m3(t){const{auth:e,user:n}=t;return Te(n,e,"internal-error"),yR(n,new iw(t),t.bypassAuthState)}async function g3(t){const{auth:e,user:n}=t;return Te(n,e,"internal-error"),n3(n,new iw(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y3{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return p3;case"linkViaPopup":case"linkViaRedirect":return g3;case"reauthViaPopup":case"reauthViaRedirect":return m3;default:Xr(this.auth,"internal-error")}}resolve(e){Qo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Qo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v3=new dd(2e3,1e4);async function U8(t,e,n){if(Tn(t.app))return Promise.reject(Fo(t,"operation-not-supported-in-this-environment"));const r=ca(t);ij(t,e,mR);const s=f3(r);return new xo(r,"signInViaPopup",e,s).executeNotNull()}class xo extends y3{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,xo.currentPopupAction&&xo.currentPopupAction.cancel(),xo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Te(e,this.auth,"internal-error"),e}async onExecution(){Qo(this.filter.length===1,"Popup operations only handle one event");const e=h3();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Fo(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Fo(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,xo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fo(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,v3.get())};e()}}xo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new dd(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new dd(5e3,15e3);var EI="@firebase/auth",TI="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _3{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w3(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function E3(t){Fi(new bs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Te(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fR(t)},c=new Vj(r,s,i,l);return qj(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Fi(new bs("auth-internal",e=>{const n=ca(e.getProvider("auth").getImmediate());return(r=>new _3(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),nr(EI,TI,w3(t)),nr(EI,TI,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T3=5*60;DU("authIdTokenMaxAge");function I3(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}Lj({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Fo("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",I3().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});E3("Browser");var S3="firebase",b3="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nr(S3,b3,"app");var II=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ci,TR;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,T){function b(){}b.prototype=T.prototype,S.F=T.prototype,S.prototype=new b,S.prototype.constructor=S,S.D=function(k,P,N){for(var C=Array(arguments.length-2),q=2;q<arguments.length;q++)C[q-2]=arguments[q];return T.prototype[P].apply(k,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,T,b){b||(b=0);const k=Array(16);if(typeof T=="string")for(var P=0;P<16;++P)k[P]=T.charCodeAt(b++)|T.charCodeAt(b++)<<8|T.charCodeAt(b++)<<16|T.charCodeAt(b++)<<24;else for(P=0;P<16;++P)k[P]=T[b++]|T[b++]<<8|T[b++]<<16|T[b++]<<24;T=S.g[0],b=S.g[1],P=S.g[2];let N=S.g[3],C;C=T+(N^b&(P^N))+k[0]+3614090360&4294967295,T=b+(C<<7&4294967295|C>>>25),C=N+(P^T&(b^P))+k[1]+3905402710&4294967295,N=T+(C<<12&4294967295|C>>>20),C=P+(b^N&(T^b))+k[2]+606105819&4294967295,P=N+(C<<17&4294967295|C>>>15),C=b+(T^P&(N^T))+k[3]+3250441966&4294967295,b=P+(C<<22&4294967295|C>>>10),C=T+(N^b&(P^N))+k[4]+4118548399&4294967295,T=b+(C<<7&4294967295|C>>>25),C=N+(P^T&(b^P))+k[5]+1200080426&4294967295,N=T+(C<<12&4294967295|C>>>20),C=P+(b^N&(T^b))+k[6]+2821735955&4294967295,P=N+(C<<17&4294967295|C>>>15),C=b+(T^P&(N^T))+k[7]+4249261313&4294967295,b=P+(C<<22&4294967295|C>>>10),C=T+(N^b&(P^N))+k[8]+1770035416&4294967295,T=b+(C<<7&4294967295|C>>>25),C=N+(P^T&(b^P))+k[9]+2336552879&4294967295,N=T+(C<<12&4294967295|C>>>20),C=P+(b^N&(T^b))+k[10]+4294925233&4294967295,P=N+(C<<17&4294967295|C>>>15),C=b+(T^P&(N^T))+k[11]+2304563134&4294967295,b=P+(C<<22&4294967295|C>>>10),C=T+(N^b&(P^N))+k[12]+1804603682&4294967295,T=b+(C<<7&4294967295|C>>>25),C=N+(P^T&(b^P))+k[13]+4254626195&4294967295,N=T+(C<<12&4294967295|C>>>20),C=P+(b^N&(T^b))+k[14]+2792965006&4294967295,P=N+(C<<17&4294967295|C>>>15),C=b+(T^P&(N^T))+k[15]+1236535329&4294967295,b=P+(C<<22&4294967295|C>>>10),C=T+(P^N&(b^P))+k[1]+4129170786&4294967295,T=b+(C<<5&4294967295|C>>>27),C=N+(b^P&(T^b))+k[6]+3225465664&4294967295,N=T+(C<<9&4294967295|C>>>23),C=P+(T^b&(N^T))+k[11]+643717713&4294967295,P=N+(C<<14&4294967295|C>>>18),C=b+(N^T&(P^N))+k[0]+3921069994&4294967295,b=P+(C<<20&4294967295|C>>>12),C=T+(P^N&(b^P))+k[5]+3593408605&4294967295,T=b+(C<<5&4294967295|C>>>27),C=N+(b^P&(T^b))+k[10]+38016083&4294967295,N=T+(C<<9&4294967295|C>>>23),C=P+(T^b&(N^T))+k[15]+3634488961&4294967295,P=N+(C<<14&4294967295|C>>>18),C=b+(N^T&(P^N))+k[4]+3889429448&4294967295,b=P+(C<<20&4294967295|C>>>12),C=T+(P^N&(b^P))+k[9]+568446438&4294967295,T=b+(C<<5&4294967295|C>>>27),C=N+(b^P&(T^b))+k[14]+3275163606&4294967295,N=T+(C<<9&4294967295|C>>>23),C=P+(T^b&(N^T))+k[3]+4107603335&4294967295,P=N+(C<<14&4294967295|C>>>18),C=b+(N^T&(P^N))+k[8]+1163531501&4294967295,b=P+(C<<20&4294967295|C>>>12),C=T+(P^N&(b^P))+k[13]+2850285829&4294967295,T=b+(C<<5&4294967295|C>>>27),C=N+(b^P&(T^b))+k[2]+4243563512&4294967295,N=T+(C<<9&4294967295|C>>>23),C=P+(T^b&(N^T))+k[7]+1735328473&4294967295,P=N+(C<<14&4294967295|C>>>18),C=b+(N^T&(P^N))+k[12]+2368359562&4294967295,b=P+(C<<20&4294967295|C>>>12),C=T+(b^P^N)+k[5]+4294588738&4294967295,T=b+(C<<4&4294967295|C>>>28),C=N+(T^b^P)+k[8]+2272392833&4294967295,N=T+(C<<11&4294967295|C>>>21),C=P+(N^T^b)+k[11]+1839030562&4294967295,P=N+(C<<16&4294967295|C>>>16),C=b+(P^N^T)+k[14]+4259657740&4294967295,b=P+(C<<23&4294967295|C>>>9),C=T+(b^P^N)+k[1]+2763975236&4294967295,T=b+(C<<4&4294967295|C>>>28),C=N+(T^b^P)+k[4]+1272893353&4294967295,N=T+(C<<11&4294967295|C>>>21),C=P+(N^T^b)+k[7]+4139469664&4294967295,P=N+(C<<16&4294967295|C>>>16),C=b+(P^N^T)+k[10]+3200236656&4294967295,b=P+(C<<23&4294967295|C>>>9),C=T+(b^P^N)+k[13]+681279174&4294967295,T=b+(C<<4&4294967295|C>>>28),C=N+(T^b^P)+k[0]+3936430074&4294967295,N=T+(C<<11&4294967295|C>>>21),C=P+(N^T^b)+k[3]+3572445317&4294967295,P=N+(C<<16&4294967295|C>>>16),C=b+(P^N^T)+k[6]+76029189&4294967295,b=P+(C<<23&4294967295|C>>>9),C=T+(b^P^N)+k[9]+3654602809&4294967295,T=b+(C<<4&4294967295|C>>>28),C=N+(T^b^P)+k[12]+3873151461&4294967295,N=T+(C<<11&4294967295|C>>>21),C=P+(N^T^b)+k[15]+530742520&4294967295,P=N+(C<<16&4294967295|C>>>16),C=b+(P^N^T)+k[2]+3299628645&4294967295,b=P+(C<<23&4294967295|C>>>9),C=T+(P^(b|~N))+k[0]+4096336452&4294967295,T=b+(C<<6&4294967295|C>>>26),C=N+(b^(T|~P))+k[7]+1126891415&4294967295,N=T+(C<<10&4294967295|C>>>22),C=P+(T^(N|~b))+k[14]+2878612391&4294967295,P=N+(C<<15&4294967295|C>>>17),C=b+(N^(P|~T))+k[5]+4237533241&4294967295,b=P+(C<<21&4294967295|C>>>11),C=T+(P^(b|~N))+k[12]+1700485571&4294967295,T=b+(C<<6&4294967295|C>>>26),C=N+(b^(T|~P))+k[3]+2399980690&4294967295,N=T+(C<<10&4294967295|C>>>22),C=P+(T^(N|~b))+k[10]+4293915773&4294967295,P=N+(C<<15&4294967295|C>>>17),C=b+(N^(P|~T))+k[1]+2240044497&4294967295,b=P+(C<<21&4294967295|C>>>11),C=T+(P^(b|~N))+k[8]+1873313359&4294967295,T=b+(C<<6&4294967295|C>>>26),C=N+(b^(T|~P))+k[15]+4264355552&4294967295,N=T+(C<<10&4294967295|C>>>22),C=P+(T^(N|~b))+k[6]+2734768916&4294967295,P=N+(C<<15&4294967295|C>>>17),C=b+(N^(P|~T))+k[13]+1309151649&4294967295,b=P+(C<<21&4294967295|C>>>11),C=T+(P^(b|~N))+k[4]+4149444226&4294967295,T=b+(C<<6&4294967295|C>>>26),C=N+(b^(T|~P))+k[11]+3174756917&4294967295,N=T+(C<<10&4294967295|C>>>22),C=P+(T^(N|~b))+k[2]+718787259&4294967295,P=N+(C<<15&4294967295|C>>>17),C=b+(N^(P|~T))+k[9]+3951481745&4294967295,S.g[0]=S.g[0]+T&4294967295,S.g[1]=S.g[1]+(P+(C<<21&4294967295|C>>>11))&4294967295,S.g[2]=S.g[2]+P&4294967295,S.g[3]=S.g[3]+N&4294967295}r.prototype.v=function(S,T){T===void 0&&(T=S.length);const b=T-this.blockSize,k=this.C;let P=this.h,N=0;for(;N<T;){if(P==0)for(;N<=b;)s(this,S,N),N+=this.blockSize;if(typeof S=="string"){for(;N<T;)if(k[P++]=S.charCodeAt(N++),P==this.blockSize){s(this,k),P=0;break}}else for(;N<T;)if(k[P++]=S[N++],P==this.blockSize){s(this,k),P=0;break}}this.h=P,this.o+=T},r.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var T=1;T<S.length-8;++T)S[T]=0;T=this.o*8;for(var b=S.length-8;b<S.length;++b)S[b]=T&255,T/=256;for(this.v(S),S=Array(16),T=0,b=0;b<4;++b)for(let k=0;k<32;k+=8)S[T++]=this.g[b]>>>k&255;return S};function i(S,T){var b=a;return Object.prototype.hasOwnProperty.call(b,S)?b[S]:b[S]=T(S)}function o(S,T){this.h=T;const b=[];let k=!0;for(let P=S.length-1;P>=0;P--){const N=S[P]|0;k&&N==T||(b[P]=N,k=!1)}this.g=b}var a={};function l(S){return-128<=S&&S<128?i(S,function(T){return new o([T|0],T<0?-1:0)}):new o([S|0],S<0?-1:0)}function c(S){if(isNaN(S)||!isFinite(S))return h;if(S<0)return E(c(-S));const T=[];let b=1;for(let k=0;S>=b;k++)T[k]=S/b|0,b*=4294967296;return new o(T,0)}function d(S,T){if(S.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(S.charAt(0)=="-")return E(d(S.substring(1),T));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const b=c(Math.pow(T,8));let k=h;for(let N=0;N<S.length;N+=8){var P=Math.min(8,S.length-N);const C=parseInt(S.substring(N,N+P),T);P<8?(P=c(Math.pow(T,P)),k=k.j(P).add(c(C))):(k=k.j(b),k=k.add(c(C)))}return k}var h=l(0),p=l(1),f=l(16777216);t=o.prototype,t.m=function(){if(y(this))return-E(this).m();let S=0,T=1;for(let b=0;b<this.g.length;b++){const k=this.i(b);S+=(k>=0?k:4294967296+k)*T,T*=4294967296}return S},t.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(v(this))return"0";if(y(this))return"-"+E(this).toString(S);const T=c(Math.pow(S,6));var b=this;let k="";for(;;){const P=D(b,T).g;b=w(b,P.j(T));let N=((b.g.length>0?b.g[0]:b.h)>>>0).toString(S);if(b=P,v(b))return N+k;for(;N.length<6;)N="0"+N;k=N+k}},t.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function v(S){if(S.h!=0)return!1;for(let T=0;T<S.g.length;T++)if(S.g[T]!=0)return!1;return!0}function y(S){return S.h==-1}t.l=function(S){return S=w(this,S),y(S)?-1:v(S)?0:1};function E(S){const T=S.g.length,b=[];for(let k=0;k<T;k++)b[k]=~S.g[k];return new o(b,~S.h).add(p)}t.abs=function(){return y(this)?E(this):this},t.add=function(S){const T=Math.max(this.g.length,S.g.length),b=[];let k=0;for(let P=0;P<=T;P++){let N=k+(this.i(P)&65535)+(S.i(P)&65535),C=(N>>>16)+(this.i(P)>>>16)+(S.i(P)>>>16);k=C>>>16,N&=65535,C&=65535,b[P]=C<<16|N}return new o(b,b[b.length-1]&-2147483648?-1:0)};function w(S,T){return S.add(E(T))}t.j=function(S){if(v(this)||v(S))return h;if(y(this))return y(S)?E(this).j(E(S)):E(E(this).j(S));if(y(S))return E(this.j(E(S)));if(this.l(f)<0&&S.l(f)<0)return c(this.m()*S.m());const T=this.g.length+S.g.length,b=[];for(var k=0;k<2*T;k++)b[k]=0;for(k=0;k<this.g.length;k++)for(let P=0;P<S.g.length;P++){const N=this.i(k)>>>16,C=this.i(k)&65535,q=S.i(P)>>>16,Z=S.i(P)&65535;b[2*k+2*P]+=C*Z,_(b,2*k+2*P),b[2*k+2*P+1]+=N*Z,_(b,2*k+2*P+1),b[2*k+2*P+1]+=C*q,_(b,2*k+2*P+1),b[2*k+2*P+2]+=N*q,_(b,2*k+2*P+2)}for(S=0;S<T;S++)b[S]=b[2*S+1]<<16|b[2*S];for(S=T;S<2*T;S++)b[S]=0;return new o(b,0)};function _(S,T){for(;(S[T]&65535)!=S[T];)S[T+1]+=S[T]>>>16,S[T]&=65535,T++}function I(S,T){this.g=S,this.h=T}function D(S,T){if(v(T))throw Error("division by zero");if(v(S))return new I(h,h);if(y(S))return T=D(E(S),T),new I(E(T.g),E(T.h));if(y(T))return T=D(S,E(T)),new I(E(T.g),T.h);if(S.g.length>30){if(y(S)||y(T))throw Error("slowDivide_ only works with positive integers.");for(var b=p,k=T;k.l(S)<=0;)b=O(b),k=O(k);var P=V(b,1),N=V(k,1);for(k=V(k,2),b=V(b,2);!v(k);){var C=N.add(k);C.l(S)<=0&&(P=P.add(b),N=C),k=V(k,1),b=V(b,1)}return T=w(S,P.j(T)),new I(P,T)}for(P=h;S.l(T)>=0;){for(b=Math.max(1,Math.floor(S.m()/T.m())),k=Math.ceil(Math.log(b)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),N=c(b),C=N.j(T);y(C)||C.l(S)>0;)b-=k,N=c(b),C=N.j(T);v(N)&&(N=p),P=P.add(N),S=w(S,C)}return new I(P,S)}t.B=function(S){return D(this,S).h},t.and=function(S){const T=Math.max(this.g.length,S.g.length),b=[];for(let k=0;k<T;k++)b[k]=this.i(k)&S.i(k);return new o(b,this.h&S.h)},t.or=function(S){const T=Math.max(this.g.length,S.g.length),b=[];for(let k=0;k<T;k++)b[k]=this.i(k)|S.i(k);return new o(b,this.h|S.h)},t.xor=function(S){const T=Math.max(this.g.length,S.g.length),b=[];for(let k=0;k<T;k++)b[k]=this.i(k)^S.i(k);return new o(b,this.h^S.h)};function O(S){const T=S.g.length+1,b=[];for(let k=0;k<T;k++)b[k]=S.i(k)<<1|S.i(k-1)>>>31;return new o(b,S.h)}function V(S,T){const b=T>>5;T%=32;const k=S.g.length-b,P=[];for(let N=0;N<k;N++)P[N]=T>0?S.i(N+b)>>>T|S.i(N+b+1)<<32-T:S.i(N+b);return new o(P,S.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,TR=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,Ci=o}).apply(typeof II<"u"?II:typeof self<"u"?self:typeof window<"u"?window:{});var dh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var IR,Mc,SR,$h,nv,bR,AR,xR;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof dh=="object"&&dh];for(var m=0;m<u.length;++m){var g=u[m];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function s(u,m){if(m)e:{var g=r;u=u.split(".");for(var R=0;R<u.length-1;R++){var M=u[R];if(!(M in g))break e;g=g[M]}u=u[u.length-1],R=g[u],m=m(R),m!=R&&m!=null&&e(g,u,{configurable:!0,writable:!0,value:m})}}s("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(u){return u||function(m){var g=[],R;for(R in m)Object.prototype.hasOwnProperty.call(m,R)&&g.push([R,m[R]]);return g}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function l(u,m,g){return u.call.apply(u.bind,arguments)}function c(u,m,g){return c=l,c.apply(null,arguments)}function d(u,m){var g=Array.prototype.slice.call(arguments,1);return function(){var R=g.slice();return R.push.apply(R,arguments),u.apply(this,R)}}function h(u,m){function g(){}g.prototype=m.prototype,u.Z=m.prototype,u.prototype=new g,u.prototype.constructor=u,u.Ob=function(R,M,j){for(var X=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)X[Ee-2]=arguments[Ee];return m.prototype[M].apply(R,X)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function f(u){const m=u.length;if(m>0){const g=Array(m);for(let R=0;R<m;R++)g[R]=u[R];return g}return[]}function v(u,m){for(let R=1;R<arguments.length;R++){const M=arguments[R];var g=typeof M;if(g=g!="object"?g:M?Array.isArray(M)?"array":g:"null",g=="array"||g=="object"&&typeof M.length=="number"){g=u.length||0;const j=M.length||0;u.length=g+j;for(let X=0;X<j;X++)u[g+X]=M[X]}else u.push(M)}}class y{constructor(m,g){this.i=m,this.j=g,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function E(u){o.setTimeout(()=>{throw u},0)}function w(){var u=S;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class _{constructor(){this.h=this.g=null}add(m,g){const R=I.get();R.set(m,g),this.h?this.h.next=R:this.g=R,this.h=R}}var I=new y(()=>new D,u=>u.reset());class D{constructor(){this.next=this.g=this.h=null}set(m,g){this.h=m,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let O,V=!1,S=new _,T=()=>{const u=Promise.resolve(void 0);O=()=>{u.then(b)}};function b(){for(var u;u=w();){try{u.h.call(u.g)}catch(g){E(g)}var m=I;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}V=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var N=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const g=()=>{};o.addEventListener("test",g,m),o.removeEventListener("test",g,m)}catch{}return u}();function C(u){return/^[\s\xa0]*$/.test(u)}function q(u,m){P.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}h(q,P),q.prototype.init=function(u,m){const g=this.type=u.type,R=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(g=="mouseover"?m=u.fromElement:g=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&q.Z.h.call(this)},q.prototype.h=function(){q.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Z="closure_listenable_"+(Math.random()*1e6|0),ie=0;function G(u,m,g,R,M){this.listener=u,this.proxy=null,this.src=m,this.type=g,this.capture=!!R,this.ha=M,this.key=++ie,this.da=this.fa=!1}function F(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function U(u,m,g){for(const R in u)m.call(g,u[R],R,u)}function Y(u,m){for(const g in u)m.call(void 0,u[g],g,u)}function de(u){const m={};for(const g in u)m[g]=u[g];return m}const ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ce(u,m){let g,R;for(let M=1;M<arguments.length;M++){R=arguments[M];for(g in R)u[g]=R[g];for(let j=0;j<ne.length;j++)g=ne[j],Object.prototype.hasOwnProperty.call(R,g)&&(u[g]=R[g])}}function le(u){this.src=u,this.g={},this.h=0}le.prototype.add=function(u,m,g,R,M){const j=u.toString();u=this.g[j],u||(u=this.g[j]=[],this.h++);const X=Qe(u,m,R,M);return X>-1?(m=u[X],g||(m.fa=!1)):(m=new G(m,this.src,j,!!R,M),m.fa=g,u.push(m)),m};function we(u,m){const g=m.type;if(g in u.g){var R=u.g[g],M=Array.prototype.indexOf.call(R,m,void 0),j;(j=M>=0)&&Array.prototype.splice.call(R,M,1),j&&(F(m),u.g[g].length==0&&(delete u.g[g],u.h--))}}function Qe(u,m,g,R){for(let M=0;M<u.length;++M){const j=u[M];if(!j.da&&j.listener==m&&j.capture==!!g&&j.ha==R)return M}return-1}var ae="closure_lm_"+(Math.random()*1e6|0),me={};function Se(u,m,g,R,M){if(Array.isArray(m)){for(let j=0;j<m.length;j++)Se(u,m[j],g,R,M);return null}return g=Ms(g),u&&u[Z]?u.J(m,g,a(R)?!!R.capture:!1,M):Et(u,m,g,!1,R,M)}function Et(u,m,g,R,M,j){if(!m)throw Error("Invalid event type");const X=a(M)?!!M.capture:!!M;let Ee=ge(u);if(Ee||(u[ae]=Ee=new le(u)),g=Ee.add(m,g,R,X,j),g.proxy)return g;if(R=Nt(),g.proxy=R,R.src=u,R.listener=g,u.addEventListener)N||(M=X),M===void 0&&(M=!1),u.addEventListener(m.toString(),R,M);else if(u.attachEvent)u.attachEvent(gn(m.toString()),R);else if(u.addListener&&u.removeListener)u.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return g}function Nt(){function u(g){return m.call(u.src,u.listener,g)}const m=Pr;return u}function Kt(u,m,g,R,M){if(Array.isArray(m))for(var j=0;j<m.length;j++)Kt(u,m[j],g,R,M);else R=a(R)?!!R.capture:!!R,g=Ms(g),u&&u[Z]?(u=u.i,j=String(m).toString(),j in u.g&&(m=u.g[j],g=Qe(m,g,R,M),g>-1&&(F(m[g]),Array.prototype.splice.call(m,g,1),m.length==0&&(delete u.g[j],u.h--)))):u&&(u=ge(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Qe(m,g,R,M)),(g=u>-1?m[u]:null)&&Bt(g))}function Bt(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Z])we(m.i,u);else{var g=u.type,R=u.proxy;m.removeEventListener?m.removeEventListener(g,R,u.capture):m.detachEvent?m.detachEvent(gn(g),R):m.addListener&&m.removeListener&&m.removeListener(R),(g=ge(m))?(we(g,u),g.h==0&&(g.src=null,m[ae]=null)):F(u)}}}function gn(u){return u in me?me[u]:me[u]="on"+u}function Pr(u,m){if(u.da)u=!0;else{m=new q(m,this);const g=u.listener,R=u.ha||u.src;u.fa&&Bt(u),u=g.call(R,m)}return u}function ge(u){return u=u[ae],u instanceof le?u:null}var Gn="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ms(u){return typeof u=="function"?u:(u[Gn]||(u[Gn]=function(m){return u.handleEvent(m)}),u[Gn])}function at(){k.call(this),this.i=new le(this),this.M=this,this.G=null}h(at,k),at.prototype[Z]=!0,at.prototype.removeEventListener=function(u,m,g,R){Kt(this,u,m,g,R)};function Ot(u,m){var g,R=u.G;if(R)for(g=[];R;R=R.G)g.push(R);if(u=u.M,R=m.type||m,typeof m=="string")m=new P(m,u);else if(m instanceof P)m.target=m.target||u;else{var M=m;m=new P(R,u),ce(m,M)}M=!0;let j,X;if(g)for(X=g.length-1;X>=0;X--)j=m.g=g[X],M=Rr(j,R,!0,m)&&M;if(j=m.g=u,M=Rr(j,R,!0,m)&&M,M=Rr(j,R,!1,m)&&M,g)for(X=0;X<g.length;X++)j=m.g=g[X],M=Rr(j,R,!1,m)&&M}at.prototype.N=function(){if(at.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const g=u.g[m];for(let R=0;R<g.length;R++)F(g[R]);delete u.g[m],u.h--}}this.G=null},at.prototype.J=function(u,m,g,R){return this.i.add(String(u),m,!1,g,R)},at.prototype.K=function(u,m,g,R){return this.i.add(String(u),m,!0,g,R)};function Rr(u,m,g,R){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let M=!0;for(let j=0;j<m.length;++j){const X=m[j];if(X&&!X.da&&X.capture==g){const Ee=X.listener,Pt=X.ha||X.src;X.fa&&we(u.i,X),M=Ee.call(Pt,R)!==!1&&M}}return M&&!R.defaultPrevented}function Pd(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=c(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:o.setTimeout(u,m||0)}function Cr(u){u.g=Pd(()=>{u.g=null,u.i&&(u.i=!1,Cr(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class vm extends k{constructor(m,g){super(),this.m=m,this.l=g,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Cr(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function so(u){k.call(this),this.h=u,this.g={}}h(so,k);var on=[];function ts(u){U(u.g,function(m,g){this.g.hasOwnProperty(g)&&Bt(m)},u),u.g={}}so.prototype.N=function(){so.Z.N.call(this),ts(this)},so.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var tc=o.JSON.stringify,_m=o.JSON.parse,da=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function Rd(){}function nc(){}var ns={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function kr(){P.call(this,"d")}h(kr,P);function ha(){P.call(this,"c")}h(ha,P);var yn={},Cd=null;function fa(){return Cd=Cd||new at}yn.Ia="serverreachability";function rc(u){P.call(this,yn.Ia,u)}h(rc,P);function Fs(u){const m=fa();Ot(m,new rc(m))}yn.STAT_EVENT="statevent";function kd(u,m){P.call(this,yn.STAT_EVENT,u),this.stat=m}h(kd,P);function xt(u){const m=fa();Ot(m,new kd(m,u))}yn.Ja="timingevent";function or(u,m){P.call(this,yn.Ja,u),this.size=m}h(or,P);function io(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},m)}function he(){this.g=!0}he.prototype.ua=function(){this.g=!1};function Ue(u,m,g,R,M,j){u.info(function(){if(u.g)if(j){var X="",Ee=j.split("&");for(let qe=0;qe<Ee.length;qe++){var Pt=Ee[qe].split("=");if(Pt.length>1){const Lt=Pt[0];Pt=Pt[1];const Or=Lt.split("_");X=Or.length>=2&&Or[1]=="type"?X+(Lt+"="+Pt+"&"):X+(Lt+"=redacted&")}}}else X=null;else X=j;return"XMLHTTP REQ ("+R+") [attempt "+M+"]: "+m+`
`+g+`
`+X})}function We(u,m,g,R,M,j,X){u.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+M+"]: "+m+`
`+g+`
`+j+" "+X})}function Vt(u,m,g,R){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Dr(u,g)+(R?" "+R:"")})}function kn(u,m){u.info(function(){return"TIMEOUT: "+m})}he.prototype.info=function(){};function Dr(u,m){if(!u.g)return m;if(!m)return null;try{const j=JSON.parse(m);if(j){for(u=0;u<j.length;u++)if(Array.isArray(j[u])){var g=j[u];if(!(g.length<2)){var R=g[1];if(Array.isArray(R)&&!(R.length<1)){var M=R[0];if(M!="noop"&&M!="stop"&&M!="close")for(let X=1;X<R.length;X++)R[X]=""}}}}return tc(j)}catch{return m}}var Qn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},vn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ar;function wm(){}h(wm,Rd),wm.prototype.g=function(){return new XMLHttpRequest},ar=new wm;function sc(u){return encodeURIComponent(String(u))}function OD(u){var m=1;u=u.split(":");const g=[];for(;m>0&&u.length;)g.push(u.shift()),m--;return u.length&&g.push(u.join(":")),g}function Us(u,m,g,R){this.j=u,this.i=m,this.l=g,this.S=R||1,this.V=new so(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new pE}function pE(){this.i=null,this.g="",this.h=!1}var mE={},Em={};function Tm(u,m,g){u.M=1,u.A=Nd(Nr(m)),u.u=g,u.R=!0,gE(u,null)}function gE(u,m){u.F=Date.now(),Dd(u),u.B=Nr(u.A);var g=u.B,R=u.S;Array.isArray(R)||(R=[String(R)]),RE(g.i,"t",R),u.C=0,g=u.j.L,u.h=new pE,u.g=KE(u.j,g?m:null,!u.u),u.P>0&&(u.O=new vm(c(u.Y,u,u.g),u.P)),m=u.V,g=u.g,R=u.ba;var M="readystatechange";Array.isArray(M)||(M&&(on[0]=M.toString()),M=on);for(let j=0;j<M.length;j++){const X=Se(g,M[j],R||m.handleEvent,!1,m.h||m);if(!X)break;m.g[X.key]=X}m=u.J?de(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),Fs(),Ue(u.i,u.v,u.B,u.l,u.S,u.u)}Us.prototype.ba=function(u){u=u.target;const m=this.O;m&&$s(u)==3?m.j():this.Y(u)},Us.prototype.Y=function(u){try{if(u==this.g)e:{const Ee=$s(this.g),Pt=this.g.ya(),qe=this.g.ca();if(!(Ee<3)&&(Ee!=3||this.g&&(this.h.h||this.g.la()||LE(this.g)))){this.K||Ee!=4||Pt==7||(Pt==8||qe<=0?Fs(3):Fs(2)),Im(this);var m=this.g.ca();this.X=m;var g=VD(this);if(this.o=m==200,We(this.i,this.v,this.B,this.l,this.S,Ee,m),this.o){if(this.U&&!this.L){t:{if(this.g){var R,M=this.g;if((R=M.g?M.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(R)){var j=R;break t}}j=null}if(u=j)Vt(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Sm(this,u);else{this.o=!1,this.m=3,xt(12),oo(this),ic(this);break e}}if(this.R){u=!0;let Lt;for(;!this.K&&this.C<g.length;)if(Lt=LD(this,g),Lt==Em){Ee==4&&(this.m=4,xt(14),u=!1),Vt(this.i,this.l,null,"[Incomplete Response]");break}else if(Lt==mE){this.m=4,xt(15),Vt(this.i,this.l,g,"[Invalid Chunk]"),u=!1;break}else Vt(this.i,this.l,Lt,null),Sm(this,Lt);if(yE(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ee!=4||g.length!=0||this.h.h||(this.m=1,xt(16),u=!1),this.o=this.o&&u,!u)Vt(this.i,this.l,g,"[Invalid Chunked Response]"),oo(this),ic(this);else if(g.length>0&&!this.W){this.W=!0;var X=this.j;X.g==this&&X.aa&&!X.P&&(X.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),Dm(X),X.P=!0,xt(11))}}else Vt(this.i,this.l,g,null),Sm(this,g);Ee==4&&oo(this),this.o&&!this.K&&(Ee==4?zE(this.j,this):(this.o=!1,Dd(this)))}else YD(this.g),m==400&&g.indexOf("Unknown SID")>0?(this.m=3,xt(12)):(this.m=0,xt(13)),oo(this),ic(this)}}}catch{}finally{}};function VD(u){if(!yE(u))return u.g.la();const m=LE(u.g);if(m==="")return"";let g="";const R=m.length,M=$s(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return oo(u),ic(u),"";u.h.i=new o.TextDecoder}for(let j=0;j<R;j++)u.h.h=!0,g+=u.h.i.decode(m[j],{stream:!(M&&j==R-1)});return m.length=0,u.h.g+=g,u.C=0,u.h.g}function yE(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function LD(u,m){var g=u.C,R=m.indexOf(`
`,g);return R==-1?Em:(g=Number(m.substring(g,R)),isNaN(g)?mE:(R+=1,R+g>m.length?Em:(m=m.slice(R,R+g),u.C=R+g,m)))}Us.prototype.cancel=function(){this.K=!0,oo(this)};function Dd(u){u.T=Date.now()+u.H,vE(u,u.H)}function vE(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=io(c(u.aa,u),m)}function Im(u){u.D&&(o.clearTimeout(u.D),u.D=null)}Us.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(kn(this.i,this.B),this.M!=2&&(Fs(),xt(17)),oo(this),this.m=2,ic(this)):vE(this,this.T-u)};function ic(u){u.j.I==0||u.K||zE(u.j,u)}function oo(u){Im(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,ts(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function Sm(u,m){try{var g=u.j;if(g.I!=0&&(g.g==u||bm(g.h,u))){if(!u.L&&bm(g.h,u)&&g.I==3){try{var R=g.Ba.g.parse(m)}catch{R=null}if(Array.isArray(R)&&R.length==3){var M=R;if(M[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<u.F)Fd(g),Ld(g);else break e;km(g),xt(18)}}else g.xa=M[1],0<g.xa-g.K&&M[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=io(c(g.Va,g),6e3));EE(g.h)<=1&&g.ta&&(g.ta=void 0)}else lo(g,11)}else if((u.L||g.g==u)&&Fd(g),!C(m))for(M=g.Ba.g.parse(m),m=0;m<M.length;m++){let qe=M[m];const Lt=qe[0];if(!(Lt<=g.K))if(g.K=Lt,qe=qe[1],g.I==2)if(qe[0]=="c"){g.M=qe[1],g.ba=qe[2];const Or=qe[3];Or!=null&&(g.ka=Or,g.j.info("VER="+g.ka));const co=qe[4];co!=null&&(g.za=co,g.j.info("SVER="+g.za));const zs=qe[5];zs!=null&&typeof zs=="number"&&zs>0&&(R=1.5*zs,g.O=R,g.j.info("backChannelRequestTimeoutMs_="+R)),R=g;const qs=u.g;if(qs){const jd=qs.g?qs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(jd){var j=R.h;j.g||jd.indexOf("spdy")==-1&&jd.indexOf("quic")==-1&&jd.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(Am(j,j.h),j.h=null))}if(R.G){const Nm=qs.g?qs.g.getResponseHeader("X-HTTP-Session-Id"):null;Nm&&(R.wa=Nm,Ye(R.J,R.G,Nm))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-u.F,g.j.info("Handshake RTT: "+g.T+"ms")),R=g;var X=u;if(R.na=WE(R,R.L?R.ba:null,R.W),X.L){TE(R.h,X);var Ee=X,Pt=R.O;Pt&&(Ee.H=Pt),Ee.D&&(Im(Ee),Dd(Ee)),R.g=X}else BE(R);g.i.length>0&&Md(g)}else qe[0]!="stop"&&qe[0]!="close"||lo(g,7);else g.I==3&&(qe[0]=="stop"||qe[0]=="close"?qe[0]=="stop"?lo(g,7):Cm(g):qe[0]!="noop"&&g.l&&g.l.qa(qe),g.A=0)}}Fs(4)}catch{}}var MD=class{constructor(u,m){this.g=u,this.map=m}};function _E(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function wE(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function EE(u){return u.h?1:u.g?u.g.size:0}function bm(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Am(u,m){u.g?u.g.add(m):u.h=m}function TE(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}_E.prototype.cancel=function(){if(this.i=IE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function IE(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const g of u.g.values())m=m.concat(g.G);return m}return f(u.i)}var SE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function FD(u,m){if(u){u=u.split("&");for(let g=0;g<u.length;g++){const R=u[g].indexOf("=");let M,j=null;R>=0?(M=u[g].substring(0,R),j=u[g].substring(R+1)):M=u[g],m(M,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function js(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof js?(this.l=u.l,oc(this,u.j),this.o=u.o,this.g=u.g,ac(this,u.u),this.h=u.h,xm(this,CE(u.i)),this.m=u.m):u&&(m=String(u).match(SE))?(this.l=!1,oc(this,m[1]||"",!0),this.o=lc(m[2]||""),this.g=lc(m[3]||"",!0),ac(this,m[4]),this.h=lc(m[5]||"",!0),xm(this,m[6]||"",!0),this.m=lc(m[7]||"")):(this.l=!1,this.i=new uc(null,this.l))}js.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(cc(m,bE,!0),":");var g=this.g;return(g||m=="file")&&(u.push("//"),(m=this.o)&&u.push(cc(m,bE,!0),"@"),u.push(sc(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&u.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(cc(g,g.charAt(0)=="/"?BD:jD,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",cc(g,zD)),u.join("")},js.prototype.resolve=function(u){const m=Nr(this);let g=!!u.j;g?oc(m,u.j):g=!!u.o,g?m.o=u.o:g=!!u.g,g?m.g=u.g:g=u.u!=null;var R=u.h;if(g)ac(m,u.u);else if(g=!!u.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var M=m.h.lastIndexOf("/");M!=-1&&(R=m.h.slice(0,M+1)+R)}if(M=R,M==".."||M==".")R="";else if(M.indexOf("./")!=-1||M.indexOf("/.")!=-1){R=M.lastIndexOf("/",0)==0,M=M.split("/");const j=[];for(let X=0;X<M.length;){const Ee=M[X++];Ee=="."?R&&X==M.length&&j.push(""):Ee==".."?((j.length>1||j.length==1&&j[0]!="")&&j.pop(),R&&X==M.length&&j.push("")):(j.push(Ee),R=!0)}R=j.join("/")}else R=M}return g?m.h=R:g=u.i.toString()!=="",g?xm(m,CE(u.i)):g=!!u.m,g&&(m.m=u.m),m};function Nr(u){return new js(u)}function oc(u,m,g){u.j=g?lc(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function ac(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function xm(u,m,g){m instanceof uc?(u.i=m,qD(u.i,u.l)):(g||(m=cc(m,$D)),u.i=new uc(m,u.l))}function Ye(u,m,g){u.i.set(m,g)}function Nd(u){return Ye(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function lc(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function cc(u,m,g){return typeof u=="string"?(u=encodeURI(u).replace(m,UD),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function UD(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var bE=/[#\/\?@]/g,jD=/[#\?:]/g,BD=/[#\?]/g,$D=/[#\?@]/g,zD=/#/g;function uc(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function ao(u){u.g||(u.g=new Map,u.h=0,u.i&&FD(u.i,function(m,g){u.add(decodeURIComponent(m.replace(/\+/g," ")),g)}))}t=uc.prototype,t.add=function(u,m){ao(this),this.i=null,u=pa(this,u);let g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(m),this.h+=1,this};function AE(u,m){ao(u),m=pa(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function xE(u,m){return ao(u),m=pa(u,m),u.g.has(m)}t.forEach=function(u,m){ao(this),this.g.forEach(function(g,R){g.forEach(function(M){u.call(m,M,R,this)},this)},this)};function PE(u,m){ao(u);let g=[];if(typeof m=="string")xE(u,m)&&(g=g.concat(u.g.get(pa(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)g=g.concat(u[m]);return g}t.set=function(u,m){return ao(this),this.i=null,u=pa(this,u),xE(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},t.get=function(u,m){return u?(u=PE(this,u),u.length>0?String(u[0]):m):m};function RE(u,m,g){AE(u,m),g.length>0&&(u.i=null,u.g.set(pa(u,m),f(g)),u.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let R=0;R<m.length;R++){var g=m[R];const M=sc(g);g=PE(this,g);for(let j=0;j<g.length;j++){let X=M;g[j]!==""&&(X+="="+sc(g[j])),u.push(X)}}return this.i=u.join("&")};function CE(u){const m=new uc;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function pa(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function qD(u,m){m&&!u.j&&(ao(u),u.i=null,u.g.forEach(function(g,R){const M=R.toLowerCase();R!=M&&(AE(this,R),RE(this,M,g))},u)),u.j=m}function HD(u,m){const g=new he;if(o.Image){const R=new Image;R.onload=d(Bs,g,"TestLoadImage: loaded",!0,m,R),R.onerror=d(Bs,g,"TestLoadImage: error",!1,m,R),R.onabort=d(Bs,g,"TestLoadImage: abort",!1,m,R),R.ontimeout=d(Bs,g,"TestLoadImage: timeout",!1,m,R),o.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=u}else m(!1)}function WD(u,m){const g=new he,R=new AbortController,M=setTimeout(()=>{R.abort(),Bs(g,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:R.signal}).then(j=>{clearTimeout(M),j.ok?Bs(g,"TestPingServer: ok",!0,m):Bs(g,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(M),Bs(g,"TestPingServer: error",!1,m)})}function Bs(u,m,g,R,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),R(g)}catch{}}function KD(){this.g=new da}function Pm(u){this.i=u.Sb||null,this.h=u.ab||!1}h(Pm,Rd),Pm.prototype.g=function(){return new Od(this.i,this.h)};function Od(u,m){at.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h(Od,at),t=Od.prototype,t.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,hc(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||o).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,dc(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,hc(this)),this.g&&(this.readyState=3,hc(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;kE(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function kE(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?dc(this):hc(this),this.readyState==3&&kE(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,dc(this))},t.Na=function(u){this.g&&(this.response=u,dc(this))},t.ga=function(){this.g&&dc(this)};function dc(u){u.readyState=4,u.l=null,u.j=null,u.B=null,hc(u)}t.setRequestHeader=function(u,m){this.A.append(u,m)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var g=m.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=m.next();return u.join(`\r
`)};function hc(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Od.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function DE(u){let m="";return U(u,function(g,R){m+=R,m+=":",m+=g,m+=`\r
`}),m}function Rm(u,m,g){e:{for(R in g){var R=!1;break e}R=!0}R||(g=DE(g),typeof u=="string"?g!=null&&sc(g):Ye(u,m,g))}function ht(u){at.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(ht,at);var GD=/^https?$/i,QD=["POST","PUT"];t=ht.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,m,g,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ar.g(),this.g.onreadystatechange=p(c(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(j){NE(this,j);return}if(u=g||"",g=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var M in R)g.set(M,R[M]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const j of R.keys())g.set(j,R.get(j));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(g.keys()).find(j=>j.toLowerCase()=="content-type"),M=o.FormData&&u instanceof o.FormData,!(Array.prototype.indexOf.call(QD,m,void 0)>=0)||R||M||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,X]of g)this.g.setRequestHeader(j,X);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(j){NE(this,j)}};function NE(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,OE(u),Vd(u)}function OE(u){u.A||(u.A=!0,Ot(u,"complete"),Ot(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Ot(this,"complete"),Ot(this,"abort"),Vd(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vd(this,!0)),ht.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?VE(this):this.Xa())},t.Xa=function(){VE(this)};function VE(u){if(u.h&&typeof i<"u"){if(u.v&&$s(u)==4)setTimeout(u.Ca.bind(u),0);else if(Ot(u,"readystatechange"),$s(u)==4){u.h=!1;try{const j=u.ca();e:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var g;if(!(g=m)){var R;if(R=j===0){let X=String(u.D).match(SE)[1]||null;!X&&o.self&&o.self.location&&(X=o.self.location.protocol.slice(0,-1)),R=!GD.test(X?X.toLowerCase():"")}g=R}if(g)Ot(u,"complete"),Ot(u,"success");else{u.o=6;try{var M=$s(u)>2?u.g.statusText:""}catch{M=""}u.l=M+" ["+u.ca()+"]",OE(u)}}finally{Vd(u)}}}}function Vd(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const g=u.g;u.g=null,m||Ot(u,"ready");try{g.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function $s(u){return u.g?u.g.readyState:0}t.ca=function(){try{return $s(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),_m(m)}};function LE(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function YD(u){const m={};u=(u.g&&$s(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<u.length;R++){if(C(u[R]))continue;var g=OD(u[R]);const M=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const j=m[M]||[];m[M]=j,j.push(g)}Y(m,function(R){return R.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function fc(u,m,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||m}function ME(u){this.za=0,this.i=[],this.j=new he,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=fc("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=fc("baseRetryDelayMs",5e3,u),this.Za=fc("retryDelaySeedMs",1e4,u),this.Ta=fc("forwardChannelMaxRetries",2,u),this.va=fc("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new _E(u&&u.concurrentRequestLimit),this.Ba=new KD,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=ME.prototype,t.ka=8,t.I=1,t.connect=function(u,m,g,R){xt(0),this.W=u,this.H=m||{},g&&R!==void 0&&(this.H.OSID=g,this.H.OAID=R),this.F=this.X,this.J=WE(this,null,this.W),Md(this)};function Cm(u){if(FE(u),u.I==3){var m=u.V++,g=Nr(u.J);if(Ye(g,"SID",u.M),Ye(g,"RID",m),Ye(g,"TYPE","terminate"),pc(u,g),m=new Us(u,u.j,m),m.M=2,m.A=Nd(Nr(g)),g=!1,o.navigator&&o.navigator.sendBeacon)try{g=o.navigator.sendBeacon(m.A.toString(),"")}catch{}!g&&o.Image&&(new Image().src=m.A,g=!0),g||(m.g=KE(m.j,null),m.g.ea(m.A)),m.F=Date.now(),Dd(m)}HE(u)}function Ld(u){u.g&&(Dm(u),u.g.cancel(),u.g=null)}function FE(u){Ld(u),u.v&&(o.clearTimeout(u.v),u.v=null),Fd(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&o.clearTimeout(u.m),u.m=null)}function Md(u){if(!wE(u.h)&&!u.m){u.m=!0;var m=u.Ea;O||T(),V||(O(),V=!0),S.add(m,u),u.D=0}}function XD(u,m){return EE(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=io(c(u.Ea,u,m),qE(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const M=new Us(this,this.j,u);let j=this.o;if(this.U&&(j?(j=de(j),ce(j,this.U)):j=this.U),this.u!==null||this.R||(M.J=j,j=null),this.S)e:{for(var m=0,g=0;g<this.i.length;g++){t:{var R=this.i[g];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(m+=R,m>4096){m=g;break e}if(m===4096||g===this.i.length-1){m=g+1;break e}}m=1e3}else m=1e3;m=jE(this,M,m),g=Nr(this.J),Ye(g,"RID",u),Ye(g,"CVER",22),this.G&&Ye(g,"X-HTTP-Session-Id",this.G),pc(this,g),j&&(this.R?m="headers="+sc(DE(j))+"&"+m:this.u&&Rm(g,this.u,j)),Am(this.h,M),this.Ra&&Ye(g,"TYPE","init"),this.S?(Ye(g,"$req",m),Ye(g,"SID","null"),M.U=!0,Tm(M,g,null)):Tm(M,g,m),this.I=2}}else this.I==3&&(u?UE(this,u):this.i.length==0||wE(this.h)||UE(this))};function UE(u,m){var g;m?g=m.l:g=u.V++;const R=Nr(u.J);Ye(R,"SID",u.M),Ye(R,"RID",g),Ye(R,"AID",u.K),pc(u,R),u.u&&u.o&&Rm(R,u.u,u.o),g=new Us(u,u.j,g,u.D+1),u.u===null&&(g.J=u.o),m&&(u.i=m.G.concat(u.i)),m=jE(u,g,1e3),g.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Am(u.h,g),Tm(g,R,m)}function pc(u,m){u.H&&U(u.H,function(g,R){Ye(m,R,g)}),u.l&&U({},function(g,R){Ye(m,R,g)})}function jE(u,m,g){g=Math.min(u.i.length,g);const R=u.l?c(u.l.Ka,u.l,u):null;e:{var M=u.i;let Ee=-1;for(;;){const Pt=["count="+g];Ee==-1?g>0?(Ee=M[0].g,Pt.push("ofs="+Ee)):Ee=0:Pt.push("ofs="+Ee);let qe=!0;for(let Lt=0;Lt<g;Lt++){var j=M[Lt].g;const Or=M[Lt].map;if(j-=Ee,j<0)Ee=Math.max(0,M[Lt].g-100),qe=!1;else try{j="req"+j+"_"||"";try{var X=Or instanceof Map?Or:Object.entries(Or);for(const[co,zs]of X){let qs=zs;a(zs)&&(qs=tc(zs)),Pt.push(j+co+"="+encodeURIComponent(qs))}}catch(co){throw Pt.push(j+"type="+encodeURIComponent("_badmap")),co}}catch{R&&R(Or)}}if(qe){X=Pt.join("&");break e}}X=void 0}return u=u.i.splice(0,g),m.G=u,X}function BE(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;O||T(),V||(O(),V=!0),S.add(m,u),u.A=0}}function km(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=io(c(u.Da,u),qE(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,$E(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=io(c(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,xt(10),Ld(this),$E(this))};function Dm(u){u.B!=null&&(o.clearTimeout(u.B),u.B=null)}function $E(u){u.g=new Us(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=Nr(u.na);Ye(m,"RID","rpc"),Ye(m,"SID",u.M),Ye(m,"AID",u.K),Ye(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&Ye(m,"TO",u.ia),Ye(m,"TYPE","xmlhttp"),pc(u,m),u.u&&u.o&&Rm(m,u.u,u.o),u.O&&(u.g.H=u.O);var g=u.g;u=u.ba,g.M=1,g.A=Nd(Nr(m)),g.u=null,g.R=!0,gE(g,u)}t.Va=function(){this.C!=null&&(this.C=null,Ld(this),km(this),xt(19))};function Fd(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function zE(u,m){var g=null;if(u.g==m){Fd(u),Dm(u),u.g=null;var R=2}else if(bm(u.h,m))g=m.G,TE(u.h,m),R=1;else return;if(u.I!=0){if(m.o)if(R==1){g=m.u?m.u.length:0,m=Date.now()-m.F;var M=u.D;R=fa(),Ot(R,new or(R,g)),Md(u)}else BE(u);else if(M=m.m,M==3||M==0&&m.X>0||!(R==1&&XD(u,m)||R==2&&km(u)))switch(g&&g.length>0&&(m=u.h,m.i=m.i.concat(g)),M){case 1:lo(u,5);break;case 4:lo(u,10);break;case 3:lo(u,6);break;default:lo(u,2)}}}function qE(u,m){let g=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(g*=2),g*m}function lo(u,m){if(u.j.info("Error code "+m),m==2){var g=c(u.bb,u),R=u.Ua;const M=!R;R=new js(R||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||oc(R,"https"),Nd(R),M?HD(R.toString(),g):WD(R.toString(),g)}else xt(2);u.I=0,u.l&&u.l.pa(m),HE(u),FE(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function HE(u){if(u.I=0,u.ja=[],u.l){const m=IE(u.h);(m.length!=0||u.i.length!=0)&&(v(u.ja,m),v(u.ja,u.i),u.h.i.length=0,f(u.i),u.i.length=0),u.l.oa()}}function WE(u,m,g){var R=g instanceof js?Nr(g):new js(g);if(R.g!="")m&&(R.g=m+"."+R.g),ac(R,R.u);else{var M=o.location;R=M.protocol,m=m?m+"."+M.hostname:M.hostname,M=+M.port;const j=new js(null);R&&oc(j,R),m&&(j.g=m),M&&ac(j,M),g&&(j.h=g),R=j}return g=u.G,m=u.wa,g&&m&&Ye(R,g,m),Ye(R,"VER",u.ka),pc(u,R),R}function KE(u,m,g){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new ht(new Pm({ab:g})):new ht(u.ma),m.Fa(u.L),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function GE(){}t=GE.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Ud(){}Ud.prototype.g=function(u,m){return new Dn(u,m)};function Dn(u,m){at.call(this),this.g=new ME(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!C(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!C(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new ma(this)}h(Dn,at),Dn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Dn.prototype.close=function(){Cm(this.g)},Dn.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.v&&(g={},g.__data__=tc(u),u=g);m.i.push(new MD(m.Ya++,u)),m.I==3&&Md(m)},Dn.prototype.N=function(){this.g.l=null,delete this.j,Cm(this.g),delete this.g,Dn.Z.N.call(this)};function QE(u){kr.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const g in m){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}h(QE,kr);function YE(){ha.call(this),this.status=1}h(YE,ha);function ma(u){this.g=u}h(ma,GE),ma.prototype.ra=function(){Ot(this.g,"a")},ma.prototype.qa=function(u){Ot(this.g,new QE(u))},ma.prototype.pa=function(u){Ot(this.g,new YE)},ma.prototype.oa=function(){Ot(this.g,"b")},Ud.prototype.createWebChannel=Ud.prototype.g,Dn.prototype.send=Dn.prototype.o,Dn.prototype.open=Dn.prototype.m,Dn.prototype.close=Dn.prototype.close,xR=function(){return new Ud},AR=function(){return fa()},bR=yn,nv={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Qn.NO_ERROR=0,Qn.TIMEOUT=8,Qn.HTTP_ERROR=6,$h=Qn,vn.COMPLETE="complete",SR=vn,nc.EventType=ns,ns.OPEN="a",ns.CLOSE="b",ns.ERROR="c",ns.MESSAGE="d",at.prototype.listen=at.prototype.J,Mc=nc,ht.prototype.listenOnce=ht.prototype.K,ht.prototype.getLastError=ht.prototype.Ha,ht.prototype.getLastErrorCode=ht.prototype.ya,ht.prototype.getStatus=ht.prototype.ca,ht.prototype.getResponseJson=ht.prototype.La,ht.prototype.getResponseText=ht.prototype.la,ht.prototype.send=ht.prototype.ea,ht.prototype.setWithCredentials=ht.prototype.Fa,IR=ht}).apply(typeof dh<"u"?dh:typeof self<"u"?self:typeof window<"u"?window:{});const SI="@firebase/firestore",bI="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Jt.UNAUTHENTICATED=new Jt(null),Jt.GOOGLE_CREDENTIALS=new Jt("google-credentials-uid"),Jt.FIRST_PARTY=new Jt("first-party-uid"),Jt.MOCK_USER=new Jt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui=new X_("@firebase/firestore");function Sa(){return Ui.logLevel}function PR(t){Ui.setLogLevel(t)}function H(t,...e){if(Ui.logLevel<=Re.DEBUG){const n=e.map(ow);Ui.debug(`Firestore (${Hl}): ${t}`,...n)}}function vt(t,...e){if(Ui.logLevel<=Re.ERROR){const n=e.map(ow);Ui.error(`Firestore (${Hl}): ${t}`,...n)}}function ji(t,...e){if(Ui.logLevel<=Re.WARN){const n=e.map(ow);Ui.warn(`Firestore (${Hl}): ${t}`,...n)}}function ow(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,RR(t,r,n)}function RR(t,e,n){let r=`FIRESTORE (${Hl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw vt(r),new Error(r)}function oe(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||RR(e,s,r)}function re(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends Ar{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A3{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class CR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Jt.UNAUTHENTICATED))}shutdown(){}}class x3{constructor(e){this.t=e,this.currentUser=Jt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){oe(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new rr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new rr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new rr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(oe(typeof r.accessToken=="string",31837,{l:r}),new A3(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return oe(e===null||typeof e=="string",2055,{h:e}),new Jt(e)}}class P3{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Jt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class R3{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new P3(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Jt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class AI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class C3{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Tn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){oe(this.o===void 0,3512);const r=i=>{i.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new AI(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(oe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new AI(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k3(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=k3(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function pe(t,e){return t<e?-1:t>e?1:0}function rv(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Tg(s)===Tg(i)?pe(s,i):Tg(s)?1:-1}return pe(t.length,e.length)}const D3=55296,N3=57343;function Tg(t){const e=t.charCodeAt(0);return e>=D3&&e<=N3}function vl(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}function kR(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI="__name__";class Mr{constructor(e,n,r){n===void 0?n=0:n>e.length&&te(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&te(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Mr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Mr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Mr.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return pe(e.length,n.length)}static compareSegments(e,n){const r=Mr.isNumericId(e),s=Mr.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Mr.extractNumericId(e).compare(Mr.extractNumericId(n)):rv(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ci.fromString(e.substring(4,e.length-2))}}class Fe extends Mr{construct(e,n,r){return new Fe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new K(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Fe(n)}static emptyPath(){return new Fe([])}}const O3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rt extends Mr{construct(e,n,r){return new rt(e,n,r)}static isValidIdentifier(e){return O3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===xI}static keyField(){return new rt([xI])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new K(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new K(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new K(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new K(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rt(n)}static emptyPath(){return new rt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.path=e}static fromPath(e){return new J(Fe.fromString(e))}static fromName(e){return new J(Fe.fromString(e).popFirst(5))}static empty(){return new J(Fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Fe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new J(new Fe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DR(t,e,n){if(!n)throw new K(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function NR(t,e,n,r){if(e===!0&&r===!0)throw new K(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function PI(t){if(!J.isDocumentKey(t))throw new K(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function RI(t){if(J.isDocumentKey(t))throw new K(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function OR(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function qp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":te(12329,{type:typeof t})}function wt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=qp(t);throw new K(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function V3(t,e){if(e<=0)throw new K(B.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(t,e){const n={typeString:t};return e&&(n.value=e),n}function fd(t,e){if(!OR(t))throw new K(B.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new K(B.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI=-62135596800,kI=1e6;class je{static now(){return je.fromMillis(Date.now())}static fromDate(e){return je.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*kI);return new je(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<CI)throw new K(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/kI}_compareTo(e){return this.seconds===e.seconds?pe(this.nanoseconds,e.nanoseconds):pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:je._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(fd(e,je._jsonSchema))return new je(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-CI;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}je._jsonSchemaVersion="firestore/timestamp/1.0",je._jsonSchema={type:At("string",je._jsonSchemaVersion),seconds:At("number"),nanoseconds:At("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{static fromTimestamp(e){return new ue(e)}static min(){return new ue(new je(0,0))}static max(){return new ue(new je(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _l=-1;class Bf{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function sv(t){return t.fields.find(e=>e.kind===2)}function mo(t){return t.fields.filter(e=>e.kind!==2)}Bf.UNKNOWN_ID=-1;class zh{constructor(e,n){this.fieldPath=e,this.kind=n}}class Mu{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Mu(0,Hn.min())}}function VR(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ue.fromTimestamp(r===1e9?new je(n+1,0):new je(n,r));return new Hn(s,J.empty(),e)}function LR(t){return new Hn(t.readTime,t.key,_l)}class Hn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Hn(ue.min(),J.empty(),_l)}static max(){return new Hn(ue.max(),J.empty(),_l)}}function aw(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=J.comparator(t.documentKey,e.documentKey),n!==0?n:pe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class FR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eo(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==MR)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):L.reject(n)}static resolve(e){return new L((n,r)=>{n(e)})}static reject(e){return new L((n,r)=>{r(e)})}static waitFor(e){return new L((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=L.resolve(!1);for(const r of e)n=n.next(s=>s?L.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new L((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new L((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const On="SimpleDb";class Hp{static open(e,n,r,s){try{return new Hp(n,e.transaction(s,r))}catch(i){throw new Zc(n,i)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new rr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new Zc(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const s=lw(r.target.error);this.S.reject(new Zc(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(H(On,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new M3(n)}}class ki{static delete(e){return H(On,"Removing database:",e),vo($P().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!QP())return!1;if(ki.F())return!0;const e=Wt(),n=ki.M(e),r=0<n&&n<10,s=UR(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,ki.M(Wt())===12.2&&vt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(H(On,"Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new Zc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new K(B.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new K(B.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Zc(e,o))},s.onupgradeneeded=i=>{H(On,'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.N.k(o,s.transaction,i.oldVersion,this.version).next(()=>{H(On,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const a=Hp.open(this.db,e,i?"readonly":"readwrite",r),l=s(a).next(c=>(a.C(),c)).catch(c=>(a.abort(c),L.reject(c))).toPromise();return l.catch(()=>{}),await a.D,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(H(On,"Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function UR(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class L3{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return vo(this.U.delete())}}class Zc extends K{constructor(e,n){super(B.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function to(t){return t.name==="IndexedDbTransactionError"}class M3{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(H(On,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(H(On,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),vo(r)}add(e){return H(On,"ADD",this.store.name,e,e),vo(this.store.add(e))}get(e){return vo(this.store.get(e)).next(n=>(n===void 0&&(n=null),H(On,"GET",this.store.name,e,n),n))}delete(e){return H(On,"DELETE",this.store.name,e),vo(this.store.delete(e))}count(){return H(On,"COUNT",this.store.name),vo(this.store.count())}J(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new L((o,a)=>{i.onerror=l=>{a(l.target.error)},i.onsuccess=l=>{o(l.target.result)}})}{const i=this.cursor(r),o=[];return this.H(i,(a,l)=>{o.push(l)}).next(()=>o)}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new L((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}Z(e,n){H(On,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const s=this.cursor(r);return this.H(s,(i,o,a)=>a.delete())}ee(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.H(s,n)}te(e){const n=this.cursor({});return new L((r,s)=>{n.onerror=i=>{const o=lw(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}H(e,n){const r=[];return new L((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const l=new L3(a),c=n(a.primaryKey,a.value,l);if(c instanceof L){const d=c.catch(h=>(l.done(),L.reject(h)));r.push(d)}l.isDone?s():l.G===null?a.continue():a.continue(l.G)}}).next(()=>L.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function vo(t){return new L((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=lw(r.target.error);n(s)}})}let DI=!1;function lw(t){const e=ki.M(Wt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new K("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return DI||(DI=!0,setTimeout(()=>{throw r},0)),r}}return t}const eu="IndexBackfiller";class F3{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){H(eu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.ne.ie();H(eu,`Documents written: ${n}`)}catch(n){to(n)?H(eu,"Ignoring IndexedDB error during index backfill: ",n):await eo(n)}await this.re(6e4)})}}class U3{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.se(n,e))}se(e,n){const r=new Set;let s=n,i=!0;return L.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return H(eu,`Processing collection: ${o}`),this.oe(e,o,s).next(a=>{s-=a,r.add(o)});i=!1})).next(()=>n-s)}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next(i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this._e(s,i)).next(a=>(H(eu,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}_e(e,n){let r=e;return n.changes.forEach((s,i)=>{const o=LR(i);aw(o,r)>0&&(r=o)}),new Hn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Sn.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uo=-1;function Wp(t){return t==null}function Fu(t){return t===0&&1/t==-1/0}function jR(t){return typeof t=="number"&&Number.isInteger(t)&&!Fu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $f="";function rn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=NI(e)),e=j3(t.get(n),e);return NI(e)}function j3(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case $f:n+="";break;default:n+=i}}return n}function NI(t){return t+$f+""}function qr(t){const e=t.length;if(oe(e>=2,64408,{path:t}),e===2)return oe(t.charAt(0)===$f&&t.charAt(1)==="",56145,{path:t}),Fe.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const o=t.indexOf($f,i);switch((o<0||o>n)&&te(50515,{path:t}),t.charAt(o+1)){case"":const a=t.substring(i,o);let l;s.length===0?l=a:(s+=a,l=s,s=""),r.push(l);break;case"":s+=t.substring(i,o),s+="\0";break;case"":s+=t.substring(i,o+1);break;default:te(61167,{path:t})}i=o+2}return new Fe(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go="remoteDocuments",pd="owner",ya="owner",Uu="mutationQueues",B3="userId",mr="mutations",OI="batchId",Po="userMutationsIndex",VI=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qh(t,e){return[t,rn(e)]}function BR(t,e,n){return[t,rn(e),n]}const $3={},wl="documentMutations",zf="remoteDocumentsV14",z3=["prefixPath","collectionGroup","readTime","documentId"],Hh="documentKeyIndex",q3=["prefixPath","collectionGroup","documentId"],$R="collectionGroupIndex",H3=["collectionGroup","readTime","prefixPath","documentId"],ju="remoteDocumentGlobal",iv="remoteDocumentGlobalKey",El="targets",zR="queryTargetsIndex",W3=["canonicalId","targetId"],Tl="targetDocuments",K3=["targetId","path"],cw="documentTargetsIndex",G3=["path","targetId"],qf="targetGlobalKey",jo="targetGlobal",Bu="collectionParents",Q3=["collectionId","parent"],Il="clientMetadata",Y3="clientId",Kp="bundles",X3="bundleId",Gp="namedQueries",J3="name",uw="indexConfiguration",Z3="indexId",ov="collectionGroupIndex",e5="collectionGroup",tu="indexState",t5=["indexId","uid"],qR="sequenceNumberIndex",n5=["uid","sequenceNumber"],nu="indexEntries",r5=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],HR="documentKeyIndex",s5=["indexId","uid","orderedDocumentKey"],Qp="documentOverlays",i5=["userId","collectionPath","documentId"],av="collectionPathOverlayIndex",o5=["userId","collectionPath","largestBatchId"],WR="collectionGroupOverlayIndex",a5=["userId","collectionGroup","largestBatchId"],dw="globals",l5="name",KR=[Uu,mr,wl,go,El,pd,jo,Tl,Il,ju,Bu,Kp,Gp],c5=[...KR,Qp],GR=[Uu,mr,wl,zf,El,pd,jo,Tl,Il,ju,Bu,Kp,Gp,Qp],QR=GR,hw=[...QR,uw,tu,nu],u5=hw,YR=[...hw,dw],d5=YR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv extends FR{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function Dt(t,e){const n=re(t);return ki.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LI(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function no(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function XR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e,n){this.comparator=e,this.root=n||zt.EMPTY}insert(e,n){return new Ge(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,zt.BLACK,null,null))}remove(e){return new Ge(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hh(this.root,e,this.comparator,!1)}getReverseIterator(){return new hh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hh(this.root,e,this.comparator,!0)}}class hh{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??zt.RED,this.left=s??zt.EMPTY,this.right=i??zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new zt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return zt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw te(27949);return e+(this.isRed()?0:1)}}zt.EMPTY=null,zt.RED=!0,zt.BLACK=!1;zt.EMPTY=new class{constructor(){this.size=0}get key(){throw te(57766)}get value(){throw te(16141)}get color(){throw te(16727)}get left(){throw te(29726)}get right(){throw te(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new zt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e){this.comparator=e,this.data=new Ge(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new MI(this.data.getIterator())}getIteratorFrom(e){return new MI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ze)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ze(this.comparator);return n.data=e,n}}class MI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function va(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.fields=e,e.sort(rt.comparator)}static empty(){return new bn([])}unionWith(e){let n=new ze(rt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new bn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return vl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new JR("Invalid base64 string: "+i):i}}(e);return new gt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new gt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gt.EMPTY_BYTE_STRING=new gt("");const h5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xs(t){if(oe(!!t,39018),typeof t=="string"){let e=0;const n=h5.exec(t);if(oe(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:tt(t.seconds),nanos:tt(t.nanos)}}function tt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ps(t){return typeof t=="string"?gt.fromBase64String(t):gt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR="server_timestamp",eC="__type__",tC="__previous_value__",nC="__local_write_time__";function fw(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[eC])==null?void 0:r.stringValue)===ZR}function Yp(t){const e=t.mapValue.fields[tC];return fw(e)?Yp(e):e}function $u(t){const e=xs(t.mapValue.fields[nC].timestampValue);return new je(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f5{constructor(e,n,r,s,i,o,a,l,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=d}}const Hf="(default)";class Bi{constructor(e,n){this.projectId=e,this.database=n||Hf}static empty(){return new Bi("","")}get isDefaultDatabase(){return this.database===Hf}isEqual(e){return e instanceof Bi&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pw="__type__",rC="__max__",yi={mapValue:{fields:{__type__:{stringValue:rC}}}},mw="__vector__",Sl="value",Wh={nullValue:"NULL_VALUE"};function $i(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?fw(t)?4:sC(t)?9007199254740991:Xp(t)?10:11:te(28295,{value:t})}function Jr(t,e){if(t===e)return!0;const n=$i(t);if(n!==$i(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return $u(t).isEqual($u(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=xs(s.timestampValue),a=xs(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Ps(s.bytesValue).isEqual(Ps(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return tt(s.geoPointValue.latitude)===tt(i.geoPointValue.latitude)&&tt(s.geoPointValue.longitude)===tt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return tt(s.integerValue)===tt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=tt(s.doubleValue),a=tt(i.doubleValue);return o===a?Fu(o)===Fu(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return vl(t.arrayValue.values||[],e.arrayValue.values||[],Jr);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(LI(o)!==LI(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Jr(o[l],a[l])))return!1;return!0}(t,e);default:return te(52216,{left:t})}}function zu(t,e){return(t.values||[]).find(n=>Jr(n,e))!==void 0}function zi(t,e){if(t===e)return 0;const n=$i(t),r=$i(e);if(n!==r)return pe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return pe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=tt(i.integerValue||i.doubleValue),l=tt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return FI(t.timestampValue,e.timestampValue);case 4:return FI($u(t),$u(e));case 5:return rv(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Ps(i),l=Ps(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=pe(a[c],l[c]);if(d!==0)return d}return pe(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=pe(tt(i.latitude),tt(o.latitude));return a!==0?a:pe(tt(i.longitude),tt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return UI(t.arrayValue,e.arrayValue);case 10:return function(i,o){var p,f,v,y;const a=i.fields||{},l=o.fields||{},c=(p=a[Sl])==null?void 0:p.arrayValue,d=(f=l[Sl])==null?void 0:f.arrayValue,h=pe(((v=c==null?void 0:c.values)==null?void 0:v.length)||0,((y=d==null?void 0:d.values)==null?void 0:y.length)||0);return h!==0?h:UI(c,d)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===yi.mapValue&&o===yi.mapValue)return 0;if(i===yi.mapValue)return 1;if(o===yi.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const p=rv(l[h],d[h]);if(p!==0)return p;const f=zi(a[l[h]],c[d[h]]);if(f!==0)return f}return pe(l.length,d.length)}(t.mapValue,e.mapValue);default:throw te(23264,{he:n})}}function FI(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return pe(t,e);const n=xs(t),r=xs(e),s=pe(n.seconds,r.seconds);return s!==0?s:pe(n.nanos,r.nanos)}function UI(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=zi(n[s],r[s]);if(i)return i}return pe(n.length,r.length)}function bl(t){return cv(t)}function cv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=xs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ps(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return J.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=cv(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${cv(n.fields[o])}`;return s+"}"}(t.mapValue):te(61005,{value:t})}function Kh(t){switch($i(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Yp(t);return e?16+Kh(e):16;case 5:return 2*t.stringValue.length;case 6:return Ps(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Kh(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return no(r.fields,(i,o)=>{s+=i.length+Kh(o)}),s}(t.mapValue);default:throw te(13486,{value:t})}}function qu(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function uv(t){return!!t&&"integerValue"in t}function Hu(t){return!!t&&"arrayValue"in t}function jI(t){return!!t&&"nullValue"in t}function BI(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Gh(t){return!!t&&"mapValue"in t}function Xp(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[pw])==null?void 0:r.stringValue)===mw}function ru(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return no(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ru(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ru(t.arrayValue.values[n]);return e}return{...t}}function sC(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===rC}const iC={mapValue:{fields:{[pw]:{stringValue:mw},[Sl]:{arrayValue:{}}}}};function p5(t){return"nullValue"in t?Wh:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?qu(Bi.empty(),J.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Xp(t)?iC:{mapValue:{}}:te(35942,{value:t})}function m5(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?qu(Bi.empty(),J.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?iC:"mapValue"in t?Xp(t)?{mapValue:{}}:yi:te(61959,{value:t})}function $I(t,e){const n=zi(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function zI(t,e){const n=zi(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.value=e}static empty(){return new tn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Gh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ru(n)}setAll(e){let n=rt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=ru(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Gh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Jr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Gh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){no(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new tn(ru(this.value))}}function oC(t){const e=[];return no(t.fields,(n,r)=>{const s=new rt([n]);if(Gh(r)){const i=oC(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new bn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new mt(e,0,ue.min(),ue.min(),ue.min(),tn.empty(),0)}static newFoundDocument(e,n,r,s){return new mt(e,1,n,ue.min(),r,s,0)}static newNoDocument(e,n){return new mt(e,2,n,ue.min(),ue.min(),tn.empty(),0)}static newUnknownDocument(e,n){return new mt(e,3,n,ue.min(),ue.min(),tn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=tn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(e,n){this.position=e,this.inclusive=n}}function qI(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=J.comparator(J.fromName(o.referenceValue),n.key):r=zi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function HI(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Jr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e,n="asc"){this.field=e,this.dir=n}}function g5(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{}class ke extends aC{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new y5(e,n,r):n==="array-contains"?new w5(e,r):n==="in"?new fC(e,r):n==="not-in"?new E5(e,r):n==="array-contains-any"?new T5(e,r):new ke(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new v5(e,r):new _5(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(zi(n,this.value)):n!==null&&$i(this.value)===$i(n)&&this.matchesComparison(zi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Be extends aC{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Be(e,n)}matches(e){return xl(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function xl(t){return t.op==="and"}function dv(t){return t.op==="or"}function gw(t){return lC(t)&&xl(t)}function lC(t){for(const e of t.filters)if(e instanceof Be)return!1;return!0}function hv(t){if(t instanceof ke)return t.field.canonicalString()+t.op.toString()+bl(t.value);if(gw(t))return t.filters.map(e=>hv(e)).join(",");{const e=t.filters.map(n=>hv(n)).join(",");return`${t.op}(${e})`}}function cC(t,e){return t instanceof ke?function(r,s){return s instanceof ke&&r.op===s.op&&r.field.isEqual(s.field)&&Jr(r.value,s.value)}(t,e):t instanceof Be?function(r,s){return s instanceof Be&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&cC(o,s.filters[a]),!0):!1}(t,e):void te(19439)}function uC(t,e){const n=t.filters.concat(e);return Be.create(n,t.op)}function dC(t){return t instanceof ke?function(n){return`${n.field.canonicalString()} ${n.op} ${bl(n.value)}`}(t):t instanceof Be?function(n){return n.op.toString()+" {"+n.getFilters().map(dC).join(" ,")+"}"}(t):"Filter"}class y5 extends ke{constructor(e,n,r){super(e,n,r),this.key=J.fromName(r.referenceValue)}matches(e){const n=J.comparator(e.key,this.key);return this.matchesComparison(n)}}class v5 extends ke{constructor(e,n){super(e,"in",n),this.keys=hC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class _5 extends ke{constructor(e,n){super(e,"not-in",n),this.keys=hC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function hC(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>J.fromName(r.referenceValue))}class w5 extends ke{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Hu(n)&&zu(n.arrayValue,this.value)}}class fC extends ke{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&zu(this.value.arrayValue,n)}}class E5 extends ke{constructor(e,n){super(e,"not-in",n)}matches(e){if(zu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!zu(this.value.arrayValue,n)}}class T5 extends ke{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Hu(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>zu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I5{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function fv(t,e=null,n=[],r=[],s=null,i=null,o=null){return new I5(t,e,n,r,s,i,o)}function Jo(t){const e=re(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>hv(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Wp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>bl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>bl(r)).join(",")),e.Te=n}return e.Te}function md(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!g5(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!cC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!HI(t.startAt,e.startAt)&&HI(t.endAt,e.endAt)}function Wf(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Kf(t,e){return t.filters.filter(n=>n instanceof ke&&n.field.isEqual(e))}function WI(t,e,n){let r=Wh,s=!0;for(const i of Kf(t,e)){let o=Wh,a=!0;switch(i.op){case"<":case"<=":o=p5(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=Wh}$I({value:r,inclusive:s},{value:o,inclusive:a})<0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];$I({value:r,inclusive:s},{value:o,inclusive:n.inclusive})<0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}function KI(t,e,n){let r=yi,s=!0;for(const i of Kf(t,e)){let o=yi,a=!0;switch(i.op){case">=":case">":o=m5(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=yi}zI({value:r,inclusive:s},{value:o,inclusive:a})>0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];zI({value:r,inclusive:s},{value:o,inclusive:n.inclusive})>0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function pC(t,e,n,r,s,i,o,a){return new Wl(t,e,n,r,s,i,o,a)}function gd(t){return new Wl(t)}function GI(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function mC(t){return t.collectionGroup!==null}function su(t){const e=re(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ze(rt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Wu(i,r))}),n.has(rt.keyField().canonicalString())||e.Ie.push(new Wu(rt.keyField(),r))}return e.Ie}function zn(t){const e=re(t);return e.Ee||(e.Ee=S5(e,su(t))),e.Ee}function S5(t,e){if(t.limitType==="F")return fv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Wu(s.field,i)});const n=t.endAt?new Al(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Al(t.startAt.position,t.startAt.inclusive):null;return fv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function pv(t,e){const n=t.filters.concat([e]);return new Wl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Gf(t,e,n){return new Wl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Jp(t,e){return md(zn(t),zn(e))&&t.limitType===e.limitType}function gC(t){return`${Jo(zn(t))}|lt:${t.limitType}`}function ba(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>dC(s)).join(", ")}]`),Wp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>bl(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>bl(s)).join(",")),`Target(${r})`}(zn(t))}; limitType=${t.limitType})`}function yd(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):J.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of su(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=qI(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,su(r),s)||r.endAt&&!function(o,a,l){const c=qI(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,su(r),s))}(t,e)}function yC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function vC(t){return(e,n)=>{let r=!1;for(const s of su(t)){const i=b5(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function b5(t,e,n){const r=t.field.isKeyField()?J.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?zi(l,c):te(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return te(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){no(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return XR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A5=new Ge(J.comparator);function Un(){return A5}const _C=new Ge(J.comparator);function Fc(...t){let e=_C;for(const n of t)e=e.insert(n.key,n);return e}function wC(t){let e=_C;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Hr(){return iu()}function EC(){return iu()}function iu(){return new Os(t=>t.toString(),(t,e)=>t.isEqual(e))}const x5=new Ge(J.comparator),P5=new ze(J.comparator);function Ie(...t){let e=P5;for(const n of t)e=e.add(n);return e}const R5=new ze(pe);function yw(){return R5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fu(e)?"-0":e}}function TC(t){return{integerValue:""+t}}function C5(t,e){return jR(e)?TC(e):vw(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(){this._=void 0}}function k5(t,e,n){return t instanceof Pl?function(s,i){const o={fields:{[eC]:{stringValue:ZR},[nC]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&fw(i)&&(i=Yp(i)),i&&(o.fields[tC]=i),{mapValue:o}}(n,e):t instanceof Zo?SC(t,e):t instanceof Rl?bC(t,e):function(s,i){const o=IC(s,i),a=QI(o)+QI(s.Ae);return uv(o)&&uv(s.Ae)?TC(a):vw(s.serializer,a)}(t,e)}function D5(t,e,n){return t instanceof Zo?SC(t,e):t instanceof Rl?bC(t,e):n}function IC(t,e){return t instanceof Ku?function(r){return uv(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Pl extends Zp{}class Zo extends Zp{constructor(e){super(),this.elements=e}}function SC(t,e){const n=AC(e);for(const r of t.elements)n.some(s=>Jr(s,r))||n.push(r);return{arrayValue:{values:n}}}class Rl extends Zp{constructor(e){super(),this.elements=e}}function bC(t,e){let n=AC(e);for(const r of t.elements)n=n.filter(s=>!Jr(s,r));return{arrayValue:{values:n}}}class Ku extends Zp{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function QI(t){return tt(t.integerValue||t.doubleValue)}function AC(t){return Hu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(e,n){this.field=e,this.transform=n}}function N5(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Zo&&s instanceof Zo||r instanceof Rl&&s instanceof Rl?vl(r.elements,s.elements,Jr):r instanceof Ku&&s instanceof Ku?Jr(r.Ae,s.Ae):r instanceof Pl&&s instanceof Pl}(t.transform,e.transform)}class O5{constructor(e,n){this.version=e,this.transformResults=n}}class nn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new nn}static exists(e){return new nn(void 0,e)}static updateTime(e){return new nn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Qh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class em{}function xC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new tm(t.key,nn.none()):new Kl(t.key,t.data,nn.none());{const n=t.data,r=tn.empty();let s=new ze(rt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Vs(t.key,r,new bn(s.toArray()),nn.none())}}function V5(t,e,n){t instanceof Kl?function(s,i,o){const a=s.value.clone(),l=XI(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Vs?function(s,i,o){if(!Qh(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=XI(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(PC(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ou(t,e,n,r){return t instanceof Kl?function(i,o,a,l){if(!Qh(i.precondition,o))return a;const c=i.value.clone(),d=JI(i.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Vs?function(i,o,a,l){if(!Qh(i.precondition,o))return a;const c=JI(i.fieldTransforms,l,o),d=o.data;return d.setAll(PC(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,o,a){return Qh(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function L5(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=IC(r.transform,s||null);i!=null&&(n===null&&(n=tn.empty()),n.set(r.field,i))}return n||null}function YI(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&vl(r,s,(i,o)=>N5(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Kl extends em{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Vs extends em{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function PC(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function XI(t,e,n){const r=new Map;oe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,D5(o,a,n[s]))}return r}function JI(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,k5(i,o,e))}return r}class tm extends em{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class RC extends em{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&V5(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ou(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ou(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=EC();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=xC(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(ue.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ie())}isEqual(e){return this.batchId===e.batchId&&vl(this.mutations,e.mutations,(n,r)=>YI(n,r))&&vl(this.baseMutations,e.baseMutations,(n,r)=>YI(n,r))}}class Ew{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){oe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return x5}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Ew(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M5{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tt,Ve;function F5(t){switch(t){case B.OK:return te(64938);case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0;default:return te(15467,{code:t})}}function CC(t){if(t===void 0)return vt("GRPC error has no .code"),B.UNKNOWN;switch(t){case Tt.OK:return B.OK;case Tt.CANCELLED:return B.CANCELLED;case Tt.UNKNOWN:return B.UNKNOWN;case Tt.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case Tt.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case Tt.INTERNAL:return B.INTERNAL;case Tt.UNAVAILABLE:return B.UNAVAILABLE;case Tt.UNAUTHENTICATED:return B.UNAUTHENTICATED;case Tt.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case Tt.NOT_FOUND:return B.NOT_FOUND;case Tt.ALREADY_EXISTS:return B.ALREADY_EXISTS;case Tt.PERMISSION_DENIED:return B.PERMISSION_DENIED;case Tt.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case Tt.ABORTED:return B.ABORTED;case Tt.OUT_OF_RANGE:return B.OUT_OF_RANGE;case Tt.UNIMPLEMENTED:return B.UNIMPLEMENTED;case Tt.DATA_LOSS:return B.DATA_LOSS;default:return te(39323,{code:t})}}(Ve=Tt||(Tt={}))[Ve.OK=0]="OK",Ve[Ve.CANCELLED=1]="CANCELLED",Ve[Ve.UNKNOWN=2]="UNKNOWN",Ve[Ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ve[Ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ve[Ve.NOT_FOUND=5]="NOT_FOUND",Ve[Ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ve[Ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ve[Ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ve[Ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ve[Ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ve[Ve.ABORTED=10]="ABORTED",Ve[Ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ve[Ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ve[Ve.INTERNAL=13]="INTERNAL",Ve[Ve.UNAVAILABLE=14]="UNAVAILABLE",Ve[Ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U5(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j5=new Ci([4294967295,4294967295],0);function ZI(t){const e=U5().encode(t),n=new TR;return n.update(e),new Uint8Array(n.digest())}function eS(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Ci([n,r],0),new Ci([s,i],0)]}class Iw{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Uc(`Invalid padding: ${n}`);if(r<0)throw new Uc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Uc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Uc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ci.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Ci.fromNumber(r)));return s.compare(j5)===1&&(s=new Ci([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=ZI(e),[r,s]=eS(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Iw(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=ZI(e),[r,s]=eS(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Uc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,_d.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new vd(ue.min(),s,new Ge(pe),Un(),Ie())}}class _d{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new _d(r,n,Ie(),Ie(),Ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class kC{constructor(e,n){this.targetId=e,this.Ce=n}}class DC{constructor(e,n,r=gt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class tS{constructor(){this.ve=0,this.Fe=nS(),this.Me=gt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ie(),n=Ie(),r=Ie();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:te(38017,{changeType:i})}}),new _d(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=nS()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,oe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class B5{constructor(e){this.Ge=e,this.ze=new Map,this.je=Un(),this.Je=fh(),this.He=fh(),this.Ye=new Ge(pe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:te(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Wf(i))if(r===0){const o=new J(i.path);this.et(n,o,mt.newNoDocument(o,ue.min()))}else oe(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Ps(r).toUint8Array()}catch(l){if(l instanceof JR)return ji("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Iw(o,s,i)}catch(l){return ji(l instanceof Uc?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const a=this.ot(o);if(a){if(i.current&&Wf(a.target)){const l=new J(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,mt.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=Ie();this.He.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new vd(e,n,this.Ye,this.je,r);return this.je=Un(),this.Je=fh(),this.He=fh(),this.Ye=new Ge(pe),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new tS,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new ze(pe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new ze(pe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new tS),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function fh(){return new Ge(J.comparator)}function nS(){return new Ge(J.comparator)}const $5={asc:"ASCENDING",desc:"DESCENDING"},z5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},q5={and:"AND",or:"OR"};class H5{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function mv(t,e){return t.useProto3Json||Wp(e)?e:{value:e}}function Cl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function NC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function W5(t,e){return Cl(t,e.toTimestamp())}function hn(t){return oe(!!t,49232),ue.fromTimestamp(function(n){const r=xs(n);return new je(r.seconds,r.nanos)}(t))}function Sw(t,e){return gv(t,e).canonicalString()}function gv(t,e){const n=function(s){return new Fe(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function OC(t){const e=Fe.fromString(t);return oe(zC(e),10190,{key:e.toString()}),e}function Qf(t,e){return Sw(t.databaseId,e.path)}function Bo(t,e){const n=OC(e);if(n.get(1)!==t.databaseId.projectId)throw new K(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new J(MC(n))}function VC(t,e){return Sw(t.databaseId,e)}function LC(t){const e=OC(t);return e.length===4?Fe.emptyPath():MC(e)}function yv(t){return new Fe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function MC(t){return oe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function rS(t,e,n){return{name:Qf(t,e),fields:n.value.mapValue.fields}}function K5(t,e,n){const r=Bo(t,e.name),s=hn(e.updateTime),i=e.createTime?hn(e.createTime):ue.min(),o=new tn({mapValue:{fields:e.fields}}),a=mt.newFoundDocument(r,s,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function G5(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:te(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(oe(d===void 0||typeof d=="string",58123),gt.fromBase64String(d||"")):(oe(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),gt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?B.UNKNOWN:CC(c.code);return new K(d,c.message||"")}(o);n=new DC(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Bo(t,r.document.name),i=hn(r.document.updateTime),o=r.document.createTime?hn(r.document.createTime):ue.min(),a=new tn({mapValue:{fields:r.document.fields}}),l=mt.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new Yh(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Bo(t,r.document),i=r.readTime?hn(r.readTime):ue.min(),o=mt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Yh([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Bo(t,r.document),i=r.removedTargetIds||[];n=new Yh([],i,s,null)}else{if(!("filter"in e))return te(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new M5(s,i),a=r.targetId;n=new kC(a,o)}}return n}function Yf(t,e){let n;if(e instanceof Kl)n={update:rS(t,e.key,e.value)};else if(e instanceof tm)n={delete:Qf(t,e.key)};else if(e instanceof Vs)n={update:rS(t,e.key,e.data),updateMask:eB(e.fieldMask)};else{if(!(e instanceof RC))return te(16599,{Vt:e.type});n={verify:Qf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Pl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Zo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Rl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ku)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw te(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:W5(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:te(27497)}(t,e.precondition)),n}function vv(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?nn.updateTime(hn(i.updateTime)):i.exists!==void 0?nn.exists(i.exists):nn.none()}(e.currentDocument):nn.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(o,a){let l=null;if("setToServerValue"in a)oe(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),l=new Pl;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];l=new Zo(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];l=new Rl(d)}else"increment"in a?l=new Ku(o,a.increment):te(16584,{proto:a});const c=rt.fromServerFormat(a.fieldPath);return new _w(c,l)}(t,s)):[];if(e.update){e.update.name;const s=Bo(t,e.update.name),i=new tn({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const c=l.fieldPaths||[];return new bn(c.map(d=>rt.fromServerFormat(d)))}(e.updateMask);return new Vs(s,i,o,n,r)}return new Kl(s,i,n,r)}if(e.delete){const s=Bo(t,e.delete);return new tm(s,n)}if(e.verify){const s=Bo(t,e.verify);return new RC(s,n)}return te(1463,{proto:e})}function Q5(t,e){return t&&t.length>0?(oe(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?hn(s.updateTime):hn(i);return o.isEqual(ue.min())&&(o=hn(i)),new O5(o,s.transformResults||[])}(n,e))):[]}function FC(t,e){return{documents:[VC(t,e.path)]}}function UC(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=VC(t,s);const i=function(c){if(c.length!==0)return $C(Be.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(d=>function(p){return{field:Aa(p.field),direction:X5(p.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=mv(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:s}}function jC(t){let e=LC(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){oe(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(h){const p=BC(h);return p instanceof Be&&gw(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(p=>function(v){return new Wu(xa(v.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(h){let p;return p=typeof h=="object"?h.value:h,Wp(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(h){const p=!!h.before,f=h.values||[];return new Al(f,p)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const p=!h.before,f=h.values||[];return new Al(f,p)}(n.endAt)),pC(e,s,o,i,a,"F",l,c)}function Y5(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function BC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=xa(n.unaryFilter.field);return ke.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=xa(n.unaryFilter.field);return ke.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=xa(n.unaryFilter.field);return ke.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=xa(n.unaryFilter.field);return ke.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return te(61313);default:return te(60726)}}(t):t.fieldFilter!==void 0?function(n){return ke.create(xa(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return te(58110);default:return te(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Be.create(n.compositeFilter.filters.map(r=>BC(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return te(1026)}}(n.compositeFilter.op))}(t):te(30097,{filter:t})}function X5(t){return $5[t]}function J5(t){return z5[t]}function Z5(t){return q5[t]}function Aa(t){return{fieldPath:t.canonicalString()}}function xa(t){return rt.fromServerFormat(t.fieldPath)}function $C(t){return t instanceof ke?function(n){if(n.op==="=="){if(BI(n.value))return{unaryFilter:{field:Aa(n.field),op:"IS_NAN"}};if(jI(n.value))return{unaryFilter:{field:Aa(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(BI(n.value))return{unaryFilter:{field:Aa(n.field),op:"IS_NOT_NAN"}};if(jI(n.value))return{unaryFilter:{field:Aa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Aa(n.field),op:J5(n.op),value:n.value}}}(t):t instanceof Be?function(n){const r=n.getFilters().map(s=>$C(s));return r.length===1?r[0]:{compositeFilter:{op:Z5(n.op),filters:r}}}(t):te(54877,{filter:t})}function eB(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function zC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e,n,r,s,i=ue.min(),o=ue.min(),a=gt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new hs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new hs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new hs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new hs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(e){this.yt=e}}function tB(t,e){let n;if(e.document)n=K5(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=J.fromSegments(e.noDocument.path),s=ta(e.noDocument.readTime);n=mt.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return te(56709);{const r=J.fromSegments(e.unknownDocument.path),s=ta(e.unknownDocument.version);n=mt.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime(function(s){const i=new je(s[0],s[1]);return ue.fromTimestamp(i)}(e.readTime)),n}function sS(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Xf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,o){return{name:Qf(i,o.key),fields:o.data.value.mapValue.fields,updateTime:Cl(i,o.version.toTimestamp()),createTime:Cl(i,o.createTime.toTimestamp())}}(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:ea(e.version)};else{if(!e.isUnknownDocument())return te(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:ea(e.version)}}return r}function Xf(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function ea(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ta(t){const e=new je(t.seconds,t.nanoseconds);return ue.fromTimestamp(e)}function _o(t,e){const n=(e.baseMutations||[]).map(i=>vv(t.yt,i));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map(i=>vv(t.yt,i)),s=je.fromMillis(e.localWriteTimeMs);return new ww(e.batchId,s,n,r)}function jc(t){const e=ta(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?ta(t.lastLimboFreeSnapshotVersion):ue.min();let r;return r=function(i){return i.documents!==void 0}(t.query)?function(i){const o=i.documents.length;return oe(o===1,1966,{count:o}),zn(gd(LC(i.documents[0])))}(t.query):function(i){return zn(jC(i))}(t.query),new hs(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,gt.fromBase64String(t.resumeToken))}function HC(t,e){const n=ea(e.snapshotVersion),r=ea(e.lastLimboFreeSnapshotVersion);let s;s=Wf(e.target)?FC(t.yt,e.target):UC(t.yt,e.target).ft;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Jo(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function WC(t){const e=jC({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Gf(e,e.limit,"L"):e}function Ig(t,e){return new Tw(e.largestBatchId,vv(t.yt,e.overlayMutation))}function iS(t,e){const n=e.path.lastSegment();return[t,rn(e.path.popLast()),n]}function oS(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:ea(r.readTime),documentKey:rn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nB{getBundleMetadata(e,n){return aS(e).get(n).next(r=>{if(r)return function(i){return{id:i.bundleId,createTime:ta(i.createTime),version:i.version}}(r)})}saveBundleMetadata(e,n){return aS(e).put(function(s){return{bundleId:s.id,createTime:ea(hn(s.createTime)),version:s.version}}(n))}getNamedQuery(e,n){return lS(e).get(n).next(r=>{if(r)return function(i){return{name:i.name,query:WC(i.bundledQuery),readTime:ta(i.readTime)}}(r)})}saveNamedQuery(e,n){return lS(e).put(function(s){return{name:s.name,readTime:ea(hn(s.readTime)),bundledQuery:s.bundledQuery}}(n))}}function aS(t){return Dt(t,Kp)}function lS(t){return Dt(t,Gp)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new nm(e,r)}getOverlay(e,n){return bc(e).get(iS(this.userId,n)).next(r=>r?Ig(this.serializer,r):null)}getOverlays(e,n){const r=Hr();return L.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){const s=[];return r.forEach((i,o)=>{const a=new Tw(n,o);s.push(this.St(e,a))}),L.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach(o=>s.add(rn(o.getCollectionPath())));const i=[];return s.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(bc(e).Z(av,a))}),L.waitFor(i)}getOverlaysForCollection(e,n,r){const s=Hr(),i=rn(n),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return bc(e).J(av,o).next(a=>{for(const l of a){const c=Ig(this.serializer,l);s.set(c.getKey(),c)}return s})}getOverlaysForCollectionGroup(e,n,r,s){const i=Hr();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return bc(e).ee({index:WR,range:a},(l,c,d)=>{const h=Ig(this.serializer,c);i.size()<s||h.largestBatchId===o?(i.set(h.getKey(),h),o=h.largestBatchId):d.done()}).next(()=>i)}St(e,n){return bc(e).put(function(s,i,o){const[a,l,c]=iS(i,o.mutation.key);return{userId:i,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Yf(s.yt,o.mutation)}}(this.serializer,this.userId,n))}}function bc(t){return Dt(t,Qp)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rB{bt(e){return Dt(e,dw)}getSessionToken(e){return this.bt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?gt.fromUint8Array(r):gt.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(tt(e.integerValue));else if("doubleValue"in e){const r=tt(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),Fu(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=xs(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(Ps(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?sC(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):Xp(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):te(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const s of Object.keys(r))this.Ot(s,n),this.Ct(r[s],n)}kt(e,n){var o,a;const r=e.fields||{};this.Ft(n,53);const s=Sl,i=((a=(o=r[s].arrayValue)==null?void 0:o.values)==null?void 0:a.length)||0;this.Ft(n,15),n.Mt(tt(i)),this.Ot(s,n),this.Ct(r[s],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const s of r)this.Ct(s,n)}Lt(e,n){this.Ft(n,37),J.fromName(e).path.forEach(r=>{this.Ft(n,60),this.Ut(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}wo.Kt=new wo;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _a=255;function sB(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function cS(t){const e=64-function(r){let s=0;for(let i=0;i<8;++i){const o=sB(255&r[i]);if(s+=o,o!==8)break}return s}(t);return Math.ceil(e/8)}class iB{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const s=n.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const s=n.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(e){const n=this.en(e),r=cS(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}nn(e){const n=this.en(e),r=cS(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}rn(){this.sn(_a),this.sn(255)}_n(){this.an(_a),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===_a?(this.sn(_a),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===_a?(this.an(_a),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class oB{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class aB{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Ac{constructor(){this.cn=new iB,this.ln=new oB(this.cn),this.hn=new aB(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e,n,r,s){this.Tn=e,this.In=n,this.En=r,this.dn=s}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new Eo(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:Xh(this.En),directionalValue:Xh(this.dn),orderedDocumentKey:Xh(n),documentKey:r.path.toArray()}}Vn(e,n,r){const s=this.Rn(e,n,r);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function Qs(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=uS(t.En,e.En),n!==0?n:(n=uS(t.dn,e.dn),n!==0?n:J.comparator(t.In,e.In)))}function uS(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function Xh(t){return GP()?function(n){let r="";for(let s=0;s<n.length;s++)r+=String.fromCharCode(n[s]);return r}(t):t}function dS(t){return typeof t!="string"?t:function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(t)}class hS{constructor(e){this.mn=new ze((n,r)=>rt.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(oe(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=sv(e);if(n!==void 0&&!this.wn(n))return!1;const r=mo(e);let s=new Set,i=0,o=0;for(;i<r.length&&this.wn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.mn.size>0){const a=this.mn.getIterator().getNext();if(!s.has(a.field.canonicalString())){const l=r[i];if(!this.Sn(a,l)||!this.bn(this.fn[o++],l))return!1}++i}for(;i<r.length;++i){const a=r[i];if(o>=this.fn.length||!this.bn(this.fn[o++],a))return!1}return!0}Dn(){if(this.pn)return null;let e=new ze(rt.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new zh(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new zh(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new zh(r.field,r.dir==="asc"?0:1)));return new Bf(Bf.UNKNOWN_ID,this.collectionId,n,Mu.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KC(t){var n,r;if(oe(t instanceof ke||t instanceof Be,20012),t instanceof ke){if(t instanceof fC){const s=((r=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:r.map(i=>ke.create(t.field,"==",i)))||[];return Be.create(s,"or")}return t}const e=t.filters.map(s=>KC(s));return Be.create(e,t.op)}function lB(t){if(t.getFilters().length===0)return[];const e=Ev(KC(t));return oe(GC(e),7391),_v(e)||wv(e)?[e]:e.getFilters()}function _v(t){return t instanceof ke}function wv(t){return t instanceof Be&&gw(t)}function GC(t){return _v(t)||wv(t)||function(n){if(n instanceof Be&&dv(n)){for(const r of n.getFilters())if(!_v(r)&&!wv(r))return!1;return!0}return!1}(t)}function Ev(t){if(oe(t instanceof ke||t instanceof Be,34018),t instanceof ke)return t;if(t.filters.length===1)return Ev(t.filters[0]);const e=t.filters.map(r=>Ev(r));let n=Be.create(e,t.op);return n=Jf(n),GC(n)?n:(oe(n instanceof Be,64498),oe(xl(n),40251),oe(n.filters.length>1,57927),n.filters.reduce((r,s)=>bw(r,s)))}function bw(t,e){let n;return oe(t instanceof ke||t instanceof Be,38388),oe(e instanceof ke||e instanceof Be,25473),n=t instanceof ke?e instanceof ke?function(s,i){return Be.create([s,i],"and")}(t,e):fS(t,e):e instanceof ke?fS(e,t):function(s,i){if(oe(s.filters.length>0&&i.filters.length>0,48005),xl(s)&&xl(i))return uC(s,i.getFilters());const o=dv(s)?s:i,a=dv(s)?i:s,l=o.filters.map(c=>bw(c,a));return Be.create(l,"or")}(t,e),Jf(n)}function fS(t,e){if(xl(e))return uC(e,t.getFilters());{const n=e.filters.map(r=>bw(t,r));return Be.create(n,"or")}}function Jf(t){if(oe(t instanceof ke||t instanceof Be,11850),t instanceof ke)return t;const e=t.getFilters();if(e.length===1)return Jf(e[0]);if(lC(t))return t;const n=e.map(s=>Jf(s)),r=[];return n.forEach(s=>{s instanceof ke?r.push(s):s instanceof Be&&(s.op===t.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:Be.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cB{constructor(){this.Cn=new Aw}addToCollectionParentIndex(e,n){return this.Cn.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(Hn.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(Hn.min())}updateCollectionGroup(e,n,r){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class Aw{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new ze(Fe.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ze(Fe.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS="IndexedDbIndexManager",ph=new Uint8Array(0);class uB{constructor(e,n){this.databaseId=n,this.vn=new Aw,this.Fn=new Os(r=>Jo(r),(r,s)=>md(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(()=>{this.vn.add(n)});const i={collectionId:r,parent:rn(s)};return mS(e).put(i)}return L.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[kR(n),""],!1,!0);return mS(e).J(s).next(i=>{for(const o of i){if(o.collectionId!==n)break;r.push(qr(o.parent))}return r})}addFieldIndex(e,n){const r=xc(e),s=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete s.indexId;const i=r.add(s);if(n.indexState){const o=Ea(e);return i.next(a=>{o.put(oS(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return i.next()}deleteFieldIndex(e,n){const r=xc(e),s=Ea(e),i=wa(e);return r.delete(n.indexId).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=xc(e),r=wa(e),s=Ea(e);return n.Z().next(()=>r.Z()).next(()=>s.Z())}createTargetIndexes(e,n){return L.forEach(this.Mn(n),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const i=new hS(r).Dn();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,n){const r=wa(e);let s=!0;const i=new Map;return L.forEach(this.Mn(n),o=>this.xn(e,o).next(a=>{s&&(s=!!a),i.set(o,a)})).next(()=>{if(s){let o=Ie();const a=[];return L.forEach(i,(l,c)=>{H(pS,`Using index ${function(I){return`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map(D=>`${D.fieldPath}:${D.kind}`).join(",")}`}(l)} to execute ${Jo(n)}`);const d=function(I,D){const O=sv(D);if(O===void 0)return null;for(const V of Kf(I,O.fieldPath))switch(V.op){case"array-contains-any":return V.value.arrayValue.values||[];case"array-contains":return[V.value]}return null}(c,l),h=function(I,D){const O=new Map;for(const V of mo(D))for(const S of Kf(I,V.fieldPath))switch(S.op){case"==":case"in":O.set(V.fieldPath.canonicalString(),S.value);break;case"not-in":case"!=":return O.set(V.fieldPath.canonicalString(),S.value),Array.from(O.values())}return null}(c,l),p=function(I,D){const O=[];let V=!0;for(const S of mo(D)){const T=S.kind===0?WI(I,S.fieldPath,I.startAt):KI(I,S.fieldPath,I.startAt);O.push(T.value),V&&(V=T.inclusive)}return new Al(O,V)}(c,l),f=function(I,D){const O=[];let V=!0;for(const S of mo(D)){const T=S.kind===0?KI(I,S.fieldPath,I.endAt):WI(I,S.fieldPath,I.endAt);O.push(T.value),V&&(V=T.inclusive)}return new Al(O,V)}(c,l),v=this.On(l,c,p),y=this.On(l,c,f),E=this.Nn(l,c,h),w=this.Bn(l.indexId,d,v,p.inclusive,y,f.inclusive,E);return L.forEach(w,_=>r.Y(_,n.limit).next(I=>{I.forEach(D=>{const O=J.fromSegments(D.documentKey);o.has(O)||(o=o.add(O),a.push(O))})}))}).next(()=>a)}return L.resolve(null)})}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=lB(Be.create(e.filters,"and")).map(r=>fv(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,n),n)}Bn(e,n,r,s,i,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,i.length),c=l/(n!=null?n.length:1),d=[];for(let h=0;h<l;++h){const p=n?this.Ln(n[h/c]):ph,f=this.kn(e,p,r[h%c],s),v=this.qn(e,p,i[h%c],o),y=a.map(E=>this.kn(e,p,E,!0));d.push(...this.createRange(f,v,y))}return d}kn(e,n,r,s){const i=new Eo(e,J.empty(),n,r);return s?i:i.An()}qn(e,n,r,s){const i=new Eo(e,J.empty(),n,r);return s?i.An():i}xn(e,n){const r=new hS(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let o=null;for(const a of i)r.yn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const s=this.Mn(n);return L.forEach(s,i=>this.xn(e,i).next(o=>{o?r!==0&&o.fields.length<function(l){let c=new ze(rt.comparator),d=!1;for(const h of l.filters)for(const p of h.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?d=!0:c=c.add(p.field));for(const h of l.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(d?1:0)}(i)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&s.length>1&&r===2?1:r)}Qn(e,n){const r=new Ac;for(const s of mo(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const o=r.Pn(s.kind);wo.Kt.Dt(i,o)}return r.un()}Ln(e){const n=new Ac;return wo.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new Ac;return wo.Kt.Dt(qu(this.databaseId,n),r.Pn(function(i){const o=mo(i);return o.length===0?0:o[o.length-1].kind}(e))),r.un()}Nn(e,n,r){if(r===null)return[];let s=[];s.push(new Ac);let i=0;for(const o of mo(e)){const a=r[i++];for(const l of s)if(this.Un(n,o.fieldPath)&&Hu(a))s=this.Kn(s,o,a);else{const c=l.Pn(o.kind);wo.Kt.Dt(a,c)}}return this.Wn(s)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const a of s){const l=new Ac;l.seed(a.un()),wo.Kt.Dt(o,l.Pn(n.kind)),i.push(l)}return i}Un(e,n){return!!e.filters.find(r=>r instanceof ke&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=xc(e),s=Ea(e);return(n?r.J(ov,IDBKeyRange.bound(n,n)):r.J()).next(i=>{const o=[];return L.forEach(i,a=>s.get([a.indexId,this.uid]).next(l=>{o.push(function(d,h){const p=h?new Mu(h.sequenceNumber,new Hn(ta(h.readTime),new J(qr(h.documentKey)),h.largestBatchId)):Mu.empty(),f=d.fields.map(([v,y])=>new zh(rt.fromServerFormat(v),y));return new Bf(d.indexId,d.collectionGroup,f,p)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:pe(r.collectionGroup,s.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const s=xc(e),i=Ea(e);return this.Gn(e).next(o=>s.J(ov,IDBKeyRange.bound(n,n)).next(a=>L.forEach(a,l=>i.put(oS(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return L.forEach(n,(s,i)=>{const o=r.get(s.collectionGroup);return(o?L.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next(a=>(r.set(s.collectionGroup,a),L.forEach(a,l=>this.zn(e,s,l).next(c=>{const d=this.jn(i,l);return c.isEqual(d)?L.resolve():this.Jn(e,i,l,c,d)}))))})}Hn(e,n,r,s){return wa(e).put(s.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,s){return wa(e).delete(s.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const s=wa(e);let i=new ze(Qs);return s.ee({index:HR,range:IDBKeyRange.only([r.indexId,this.uid,Xh(this.$n(r,n))])},(o,a)=>{i=i.add(new Eo(r.indexId,n,dS(a.arrayValue),dS(a.directionalValue)))}).next(()=>i)}jn(e,n){let r=new ze(Qs);const s=this.Qn(n,e);if(s==null)return r;const i=sv(n);if(i!=null){const o=e.data.field(i.fieldPath);if(Hu(o))for(const a of o.arrayValue.values||[])r=r.add(new Eo(n.indexId,e.key,this.Ln(a),s))}else r=r.add(new Eo(n.indexId,e.key,ph,s));return r}Jn(e,n,r,s,i){H(pS,"Updating index entries for document '%s'",n.key);const o=[];return function(l,c,d,h,p){const f=l.getIterator(),v=c.getIterator();let y=va(f),E=va(v);for(;y||E;){let w=!1,_=!1;if(y&&E){const I=d(y,E);I<0?_=!0:I>0&&(w=!0)}else y!=null?_=!0:w=!0;w?(h(E),E=va(v)):_?(p(y),y=va(f)):(y=va(f),E=va(v))}}(s,i,Qs,a=>{o.push(this.Hn(e,n,r,a))},a=>{o.push(this.Yn(e,n,r,a))}),L.waitFor(o)}Gn(e){let n=1;return Ea(e).ee({index:qR,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,i)=>{i.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Qs(o,a)).filter((o,a,l)=>!a||Qs(o,l[a-1])!==0);const s=[];s.push(e);for(const o of r){const a=Qs(o,e),l=Qs(o,n);if(a===0)s[0]=e.An();else if(a>0&&l<0)s.push(o),s.push(o.An());else if(l>0)break}s.push(n);const i=[];for(let o=0;o<s.length;o+=2){if(this.Zn(s[o],s[o+1]))return[];const a=s[o].Vn(this.uid,ph,J.empty()),l=s[o+1].Vn(this.uid,ph,J.empty());i.push(IDBKeyRange.bound(a,l))}return i}Zn(e,n){return Qs(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(gS)}getMinOffset(e,n){return L.mapArray(this.Mn(n),r=>this.xn(e,r).next(s=>s||te(44426))).next(gS)}}function mS(t){return Dt(t,Bu)}function wa(t){return Dt(t,nu)}function xc(t){return Dt(t,uw)}function Ea(t){return Dt(t,tu)}function gS(t){oe(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;aw(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new Hn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},QC=41943040;class Zt{static withCacheSize(e){return new Zt(e,Zt.DEFAULT_COLLECTION_PERCENTILE,Zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YC(t,e,n){const r=t.store(mr),s=t.store(wl),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.ee({range:o},(d,h,p)=>(a++,p.delete()));i.push(l.next(()=>{oe(a===1,47070,{batchId:n.batchId})}));const c=[];for(const d of n.mutations){const h=BR(e,d.key.path,n.batchId);i.push(s.delete(h)),c.push(d.key)}return L.waitFor(i).next(()=>c)}function Zf(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw te(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zt.DEFAULT_COLLECTION_PERCENTILE=10,Zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zt.DEFAULT=new Zt(QC,Zt.DEFAULT_COLLECTION_PERCENTILE,Zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zt.DISABLED=new Zt(-1,0,0);class rm{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.Xn={}}static wt(e,n,r,s){oe(e.uid!=="",64387);const i=e.isAuthenticated()?e.uid:"";return new rm(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ys(e).ee({index:Po,range:r},(s,i,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,s){const i=Pa(e),o=Ys(e);return o.add({}).next(a=>{oe(typeof a=="number",49019);const l=new ww(a,n,r,s),c=function(f,v,y){const E=y.baseMutations.map(_=>Yf(f.yt,_)),w=y.mutations.map(_=>Yf(f.yt,_));return{userId:v,batchId:y.batchId,localWriteTimeMs:y.localWriteTime.toMillis(),baseMutations:E,mutations:w}}(this.serializer,this.userId,l),d=[];let h=new ze((p,f)=>pe(p.canonicalString(),f.canonicalString()));for(const p of s){const f=BR(this.userId,p.key.path,a);h=h.add(p.key.path.popLast()),d.push(o.put(c)),d.push(i.put(f,$3))}return h.forEach(p=>{d.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.Xn[a]=l.keys()}),L.waitFor(d).next(()=>l)})}lookupMutationBatch(e,n){return Ys(e).get(n).next(r=>r?(oe(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),_o(this.serializer,r)):null)}er(e,n){return this.Xn[n]?L.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const s=r.keys();return this.Xn[n]=s,s}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return Ys(e).ee({index:Po,range:s},(o,a,l)=>{a.userId===this.userId&&(oe(a.batchId>=r,47524,{tr:r}),i=_o(this.serializer,a)),l.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Uo;return Ys(e).ee({index:Po,range:n,reverse:!0},(s,i,o)=>{r=i.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,Uo],[this.userId,Number.POSITIVE_INFINITY]);return Ys(e).J(Po,n).next(r=>r.map(s=>_o(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=qh(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return Pa(e).ee({range:s},(o,a,l)=>{const[c,d,h]=o,p=qr(d);if(c===this.userId&&n.path.isEqual(p))return Ys(e).get(h).next(f=>{if(!f)throw te(61480,{nr:o,batchId:h});oe(f.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:f.userId,batchId:h}),i.push(_o(this.serializer,f))});l.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ze(pe);const s=[];return n.forEach(i=>{const o=qh(this.userId,i.path),a=IDBKeyRange.lowerBound(o),l=Pa(e).ee({range:a},(c,d,h)=>{const[p,f,v]=c,y=qr(f);p===this.userId&&i.path.isEqual(y)?r=r.add(v):h.done()});s.push(l)}),L.waitFor(s).next(()=>this.rr(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=qh(this.userId,r),o=IDBKeyRange.lowerBound(i);let a=new ze(pe);return Pa(e).ee({range:o},(l,c,d)=>{const[h,p,f]=l,v=qr(p);h===this.userId&&r.isPrefixOf(v)?v.length===s&&(a=a.add(f)):d.done()}).next(()=>this.rr(e,a))}rr(e,n){const r=[],s=[];return n.forEach(i=>{s.push(Ys(e).get(i).next(o=>{if(o===null)throw te(35274,{batchId:i});oe(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:i}),r.push(_o(this.serializer,o))}))}),L.waitFor(s).next(()=>r)}removeMutationBatch(e,n){return YC(e.le,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.ir(n.batchId)}),L.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return L.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),s=[];return Pa(e).ee({range:r},(i,o,a)=>{if(i[0]===this.userId){const l=qr(i[1]);s.push(l)}else a.done()}).next(()=>{oe(s.length===0,56720,{sr:s.map(i=>i.canonicalString())})})})}containsKey(e,n){return XC(e,this.userId,n)}_r(e){return JC(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:Uo,lastStreamToken:""})}}function XC(t,e,n){const r=qh(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return Pa(t).ee({range:i,X:!0},(a,l,c)=>{const[d,h,p]=a;d===e&&h===s&&(o=!0),c.done()}).next(()=>o)}function Ys(t){return Dt(t,mr)}function Pa(t){return Dt(t,wl)}function JC(t){return Dt(t,Uu)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new na(0)}static cr(){return new na(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dB{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next(n=>{const r=new na(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(n=>ue.fromTimestamp(new je(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.lr(e).next(s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.hr(e,s)))}addTargetData(e,n){return this.Pr(e,n).next(()=>this.lr(e).next(r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Ta(e).delete(n.targetId)).next(()=>this.lr(e)).next(r=>(oe(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r)))}removeTargets(e,n,r){let s=0;const i=[];return Ta(e).ee((o,a)=>{const l=jc(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(s++,i.push(this.removeTargetData(e,l)))}).next(()=>L.waitFor(i)).next(()=>s)}forEachTarget(e,n){return Ta(e).ee((r,s)=>{const i=jc(s);n(i)})}lr(e){return vS(e).get(qf).next(n=>(oe(n!==null,2888),n))}hr(e,n){return vS(e).put(qf,n)}Pr(e,n){return Ta(e).put(HC(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Jo(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return Ta(e).ee({range:s,index:zR},(o,a,l)=>{const c=jc(a);md(n,c.target)&&(i=c,l.done())}).next(()=>i)}addMatchingKeys(e,n,r){const s=[],i=ai(e);return n.forEach(o=>{const a=rn(o.path);s.push(i.put({targetId:r,path:a})),s.push(this.referenceDelegate.addReference(e,r,o))}),L.waitFor(s)}removeMatchingKeys(e,n,r){const s=ai(e);return L.forEach(n,i=>{const o=rn(i.path);return L.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])})}removeMatchingKeysForTargetId(e,n){const r=ai(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=ai(e);let i=Ie();return s.ee({range:r,X:!0},(o,a,l)=>{const c=qr(o[1]),d=new J(c);i=i.add(d)}).next(()=>i)}containsKey(e,n){const r=rn(n.path),s=IDBKeyRange.bound([r],[kR(r)],!1,!0);let i=0;return ai(e).ee({index:cw,X:!0,range:s},([o,a],l,c)=>{o!==0&&(i++,c.done())}).next(()=>i>0)}At(e,n){return Ta(e).get(n).next(r=>r?jc(r):null)}}function Ta(t){return Dt(t,El)}function vS(t){return Dt(t,jo)}function ai(t){return Dt(t,Tl)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S="LruGarbageCollector",ZC=1048576;function wS([t,e],[n,r]){const s=pe(t,n);return s===0?pe(e,r):s}class hB{constructor(e){this.Ir=e,this.buffer=new ze(wS),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();wS(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class ek{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){H(_S,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){to(n)?H(_S,"Ignoring IndexedDB error during garbage collection: ",n):await eo(n)}await this.Vr(3e5)})}}class fB{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return L.resolve(Sn.ce);const r=new hB(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(yS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),yS):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,a,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,o=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(i=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),Sa()<=Re.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:h})))}}function tk(t,e){return new fB(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pB{constructor(e,n){this.db=e,this.garbageCollector=tk(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,(r,s)=>n(s))}addReference(e,n,r){return mh(e,r)}removeReference(e,n,r){return mh(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return mh(e,n)}br(e,n){return function(s,i){let o=!1;return JC(s).te(a=>XC(s,a,i).next(l=>(l&&(o=!0),L.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.Sr(e,(o,a)=>{if(a<=n){const l=this.br(e,o).next(c=>{if(!c)return i++,r.getEntry(e,o).next(()=>(r.removeEntry(o,ue.min()),ai(e).delete(function(h){return[0,rn(h.path)]}(o))))});s.push(l)}}).next(()=>L.waitFor(s)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return mh(e,n)}Sr(e,n){const r=ai(e);let s,i=Sn.ce;return r.ee({index:cw},([o,a],{path:l,sequenceNumber:c})=>{o===0?(i!==Sn.ce&&n(new J(qr(s)),i),i=c,s=l):i=Sn.ce}).next(()=>{i!==Sn.ce&&n(new J(qr(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function mh(t,e){return ai(t).put(function(r,s){return{targetId:0,path:rn(r.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(){this.changes=new Os(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,mt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mB{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return uo(e).put(r)}removeEntry(e,n,r){return uo(e).delete(function(i,o){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Xf(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Dr(e,r)))}getEntry(e,n){let r=mt.newInvalidDocument(n);return uo(e).ee({index:Hh,range:IDBKeyRange.only(Pc(n))},(s,i)=>{r=this.Cr(n,i)}).next(()=>r)}vr(e,n){let r={size:0,document:mt.newInvalidDocument(n)};return uo(e).ee({index:Hh,range:IDBKeyRange.only(Pc(n))},(s,i)=>{r={document:this.Cr(n,i),size:Zf(i)}}).next(()=>r)}getEntries(e,n){let r=Un();return this.Fr(e,n,(s,i)=>{const o=this.Cr(s,i);r=r.insert(s,o)}).next(()=>r)}Mr(e,n){let r=Un(),s=new Ge(J.comparator);return this.Fr(e,n,(i,o)=>{const a=this.Cr(i,o);r=r.insert(i,a),s=s.insert(i,Zf(o))}).next(()=>({documents:r,Or:s}))}Fr(e,n,r){if(n.isEmpty())return L.resolve();let s=new ze(IS);n.forEach(l=>s=s.add(l));const i=IDBKeyRange.bound(Pc(s.first()),Pc(s.last())),o=s.getIterator();let a=o.getNext();return uo(e).ee({index:Hh,range:i},(l,c,d)=>{const h=J.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&IS(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?d.j(Pc(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,s,i){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),Xf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return uo(e).J(IDBKeyRange.bound(a,l,!0)).next(c=>{i==null||i.incrementDocumentReadCount(c.length);let d=Un();for(const h of c){const p=this.Cr(J.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);p.isFoundDocument()&&(yd(n,p)||s.has(p.key))&&(d=d.insert(p.key,p))}return d})}getAllFromCollectionGroup(e,n,r,s){let i=Un();const o=TS(n,r),a=TS(n,Hn.max());return uo(e).ee({index:$R,range:IDBKeyRange.bound(o,a,!0)},(l,c,d)=>{const h=this.Cr(J.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);i=i.insert(h.key,h),i.size===s&&d.done()}).next(()=>i)}newChangeBuffer(e){return new gB(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return ES(e).get(iv).next(n=>(oe(!!n,20021),n))}Dr(e,n){return ES(e).put(iv,n)}Cr(e,n){if(n){const r=tB(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(ue.min())))return r}return mt.newInvalidDocument(e)}}function rk(t){return new mB(t)}class gB extends nk{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new Os(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const n=[];let r=0,s=new ze((i,o)=>pe(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const a=this.Br.get(i);if(n.push(this.Nr.removeEntry(e,i,a.readTime)),o.isValidDocument()){const l=sS(this.Nr.serializer,o);s=s.add(i.path.popLast());const c=Zf(l);r+=c-a.size,n.push(this.Nr.addEntry(e,i,l))}else if(r-=a.size,this.trackRemovals){const l=sS(this.Nr.serializer,o.convertToNoDocument(ue.min()));n.push(this.Nr.addEntry(e,i,l))}}),s.forEach(i=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,i))}),n.push(this.Nr.updateMetadata(e,r)),L.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next(r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next(({documents:r,Or:s})=>(s.forEach((i,o)=>{this.Br.set(i,{size:o,readTime:r.get(i).readTime})}),r))}}function ES(t){return Dt(t,ju)}function uo(t){return Dt(t,zf)}function Pc(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function TS(t,e){const n=e.documentKey.path.toArray();return[t,Xf(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function IS(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=pe(n[i],r[i]),s)return s;return s=pe(n.length,r.length),s||(s=pe(n[n.length-2],r[r.length-2]),s||pe(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yB{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ou(r.mutation,s,bn.empty(),je.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ie()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ie()){const s=Hr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Fc();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Hr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ie()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Un();const o=iu(),a=function(){return iu()}();return n.forEach((l,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof Vs)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),ou(d.mutation,c,d.mutation.getFieldMask(),je.now())):o.set(c.key,bn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>a.set(c,new yB(d,o.get(c)??null))),a))}recalculateAndSaveOverlays(e,n){const r=iu();let s=new Ge((o,a)=>o-a),i=Ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||bn.empty();d=a.applyToLocalView(c,d),r.set(l,d);const h=(s.get(a.batchId)||Ie()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,h=EC();d.forEach(p=>{if(!i.has(p)){const f=xC(n.get(p),r.get(p));f!==null&&h.set(p,f),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return L.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return J.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):mC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):L.resolve(Hr());let a=_l,l=i;return o.next(c=>L.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(d)?L.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{l=l.insert(d,p)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,Ie())).next(d=>({batchId:a,changes:wC(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new J(n)).next(r=>{let s=Fc();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Fc();return this.indexManager.getCollectionParents(e,i).next(a=>L.forEach(a,l=>{const c=function(h,p){return new Wl(p,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(d=>{d.forEach((h,p)=>{o=o.insert(h,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,mt.newInvalidDocument(d)))});let a=Fc();return o.forEach((l,c)=>{const d=i.get(l);d!==void 0&&ou(d.mutation,c,bn.empty(),je.now()),yd(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vB{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return L.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:hn(s.createTime)}}(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:WC(s.bundledQuery),readTime:hn(s.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _B{constructor(){this.overlays=new Ge(J.comparator),this.qr=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Hr();return L.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),L.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),L.resolve()}getOverlaysForCollection(e,n,r){const s=Hr(),i=n.length+1,o=new J(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return L.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ge((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=Hr(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=Hr(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return L.resolve(a)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Tw(n,r));let i=this.qr.get(n);i===void 0&&(i=Ie(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wB{constructor(){this.sessionToken=gt.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(){this.Qr=new ze(Ft.$r),this.Ur=new ze(Ft.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Ft(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Ft(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new J(new Fe([])),r=new Ft(n,e),s=new Ft(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new J(new Fe([])),r=new Ft(n,e),s=new Ft(n,e+1);let i=Ie();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ft(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ft{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return J.comparator(e.key,n.key)||pe(e.Yr,n.Yr)}static Kr(e,n){return pe(e.Yr,n.Yr)||J.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EB{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ze(Ft.$r)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new ww(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Zr=this.Zr.add(new Ft(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return L.resolve(o)}lookupMutationBatch(e,n){return L.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return L.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?Uo:this.tr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ft(n,0),s=new Ft(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const a=this.Xr(o.Yr);i.push(a)}),L.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ze(pe);return n.forEach(s=>{const i=new Ft(s,0),o=new Ft(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],a=>{r=r.add(a.Yr)})}),L.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;J.isDocumentKey(i)||(i=i.child(""));const o=new Ft(new J(i),0);let a=new ze(pe);return this.Zr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.Yr)),!0)},o),L.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){oe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return L.forEach(n.mutations,s=>{const i=new Ft(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Ft(n,0),s=this.Zr.firstAfterOrEqual(r);return L.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TB{constructor(e){this.ri=e,this.docs=function(){return new Ge(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():mt.newInvalidDocument(n))}getEntries(e,n){let r=Un();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():mt.newInvalidDocument(s))}),L.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Un();const o=n.path,a=new J(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||aw(LR(d),r)<=0||(s.has(d.key)||yd(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return L.resolve(i)}getAllFromCollectionGroup(e,n,r,s){te(9500)}ii(e,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new IB(this)}getSize(e){return L.resolve(this.size)}}class IB extends nk{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),L.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SB{constructor(e){this.persistence=e,this.si=new Os(n=>Jo(n),md),this.lastRemoteSnapshotVersion=ue.min(),this.highestTargetId=0,this.oi=0,this._i=new xw,this.targetCount=0,this.ai=na.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),L.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new na(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.Pr(n),L.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),L.waitFor(i).next(()=>s)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return L.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),L.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),L.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),L.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return L.resolve(r)}containsKey(e,n){return L.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{constructor(e,n){this.ui={},this.overlays={},this.ci=new Sn(0),this.li=!1,this.li=!0,this.hi=new wB,this.referenceDelegate=e(this),this.Pi=new SB(this),this.indexManager=new cB,this.remoteDocumentCache=function(s){return new TB(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new qC(n),this.Ii=new vB(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new _B,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new EB(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){H("MemoryPersistence","Starting transaction:",e);const s=new bB(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return L.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class bB extends FR{constructor(e){super(),this.currentSequenceNumber=e}}class sm{constructor(e){this.persistence=e,this.Ri=new xw,this.Vi=null}static mi(e){return new sm(e)}get fi(){if(this.Vi)return this.Vi;throw te(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),L.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),L.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.fi,r=>{const s=J.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,ue.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return L.or([()=>L.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class ep{constructor(e,n){this.persistence=e,this.pi=new Os(r=>rn(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=tk(this,n)}static mi(e,n){return new ep(e,n)}Ei(){}di(e){return L.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return L.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?L.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,i.removeEntry(o,ue.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),L.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),L.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Kh(e.data.value)),n}br(e,n,r){return L.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return L.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AB{constructor(e){this.serializer=e}k(e,n,r,s){const i=new Hp("createOrUpgrade",n);r<1&&s>=1&&(function(l){l.createObjectStore(pd)}(e),function(l){l.createObjectStore(Uu,{keyPath:B3}),l.createObjectStore(mr,{keyPath:OI,autoIncrement:!0}).createIndex(Po,VI,{unique:!0}),l.createObjectStore(wl)}(e),SS(e),function(l){l.createObjectStore(go)}(e));let o=L.resolve();return r<3&&s>=3&&(r!==0&&(function(l){l.deleteObjectStore(Tl),l.deleteObjectStore(El),l.deleteObjectStore(jo)}(e),SS(e)),o=o.next(()=>function(l){const c=l.store(jo),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ue.min().toTimestamp(),targetCount:0};return c.put(qf,d)}(i))),r<4&&s>=4&&(r!==0&&(o=o.next(()=>function(l,c){return c.store(mr).J().next(h=>{l.deleteObjectStore(mr),l.createObjectStore(mr,{keyPath:OI,autoIncrement:!0}).createIndex(Po,VI,{unique:!0});const p=c.store(mr),f=h.map(v=>p.put(v));return L.waitFor(f)})}(e,i))),o=o.next(()=>{(function(l){l.createObjectStore(Il,{keyPath:Y3})})(e)})),r<5&&s>=5&&(o=o.next(()=>this.yi(i))),r<6&&s>=6&&(o=o.next(()=>(function(l){l.createObjectStore(ju)}(e),this.wi(i)))),r<7&&s>=7&&(o=o.next(()=>this.Si(i))),r<8&&s>=8&&(o=o.next(()=>this.bi(e,i))),r<9&&s>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(o=o.next(()=>this.Di(i))),r<11&&s>=11&&(o=o.next(()=>{(function(l){l.createObjectStore(Kp,{keyPath:X3})})(e),function(l){l.createObjectStore(Gp,{keyPath:J3})}(e)})),r<12&&s>=12&&(o=o.next(()=>{(function(l){const c=l.createObjectStore(Qp,{keyPath:i5});c.createIndex(av,o5,{unique:!1}),c.createIndex(WR,a5,{unique:!1})})(e)})),r<13&&s>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore(zf,{keyPath:z3});c.createIndex(Hh,q3),c.createIndex($R,H3)}(e)).next(()=>this.Ci(e,i)).next(()=>e.deleteObjectStore(go))),r<14&&s>=14&&(o=o.next(()=>this.Fi(e,i))),r<15&&s>=15&&(o=o.next(()=>function(l){l.createObjectStore(uw,{keyPath:Z3,autoIncrement:!0}).createIndex(ov,e5,{unique:!1}),l.createObjectStore(tu,{keyPath:t5}).createIndex(qR,n5,{unique:!1}),l.createObjectStore(nu,{keyPath:r5}).createIndex(HR,s5,{unique:!1})}(e))),r<16&&s>=16&&(o=o.next(()=>{n.objectStore(tu).clear()}).next(()=>{n.objectStore(nu).clear()})),r<17&&s>=17&&(o=o.next(()=>{(function(l){l.createObjectStore(dw,{keyPath:l5})})(e)})),r<18&&s>=18&&GP()&&(o=o.next(()=>{n.objectStore(tu).clear()}).next(()=>{n.objectStore(nu).clear()})),o}wi(e){let n=0;return e.store(go).ee((r,s)=>{n+=Zf(s)}).next(()=>{const r={byteSize:n};return e.store(ju).put(iv,r)})}yi(e){const n=e.store(Uu),r=e.store(mr);return n.J().next(s=>L.forEach(s,i=>{const o=IDBKeyRange.bound([i.userId,Uo],[i.userId,i.lastAcknowledgedBatchId]);return r.J(Po,o).next(a=>L.forEach(a,l=>{oe(l.userId===i.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const c=_o(this.serializer,l);return YC(e,i.userId,c).next(()=>{})}))}))}Si(e){const n=e.store(Tl),r=e.store(go);return e.store(jo).get(qf).next(s=>{const i=[];return r.ee((o,a)=>{const l=new Fe(o),c=function(h){return[0,rn(h)]}(l);i.push(n.get(c).next(d=>d?L.resolve():(h=>n.put({targetId:0,path:rn(h),sequenceNumber:s.highestListenSequenceNumber}))(l)))}).next(()=>L.waitFor(i))})}bi(e,n){e.createObjectStore(Bu,{keyPath:Q3});const r=n.store(Bu),s=new Aw,i=o=>{if(s.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:rn(l)})}};return n.store(go).ee({X:!0},(o,a)=>{const l=new Fe(o);return i(l.popLast())}).next(()=>n.store(wl).ee({X:!0},([o,a,l],c)=>{const d=qr(a);return i(d.popLast())}))}Di(e){const n=e.store(El);return n.ee((r,s)=>{const i=jc(s),o=HC(this.serializer,i);return n.put(o)})}Ci(e,n){const r=n.store(go),s=[];return r.ee((i,o)=>{const a=n.store(zf),l=function(h){return h.document?new J(Fe.fromString(h.document.name).popFirst(5)):h.noDocument?J.fromSegments(h.noDocument.path):h.unknownDocument?J.fromSegments(h.unknownDocument.path):te(36783)}(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(c))}).next(()=>L.waitFor(s))}Fi(e,n){const r=n.store(mr),s=rk(this.serializer),i=new Pw(sm.mi,this.serializer.yt);return r.J().next(o=>{const a=new Map;return o.forEach(l=>{let c=a.get(l.userId)??Ie();_o(this.serializer,l).keys().forEach(d=>c=c.add(d)),a.set(l.userId,c)}),L.forEach(a,(l,c)=>{const d=new Jt(c),h=nm.wt(this.serializer,d),p=i.getIndexManager(d),f=rm.wt(d,this.serializer,p,i.referenceDelegate);return new sk(s,f,h,p).recalculateAndSaveOverlaysForDocumentKeys(new lv(n,Sn.ce),l).next()})})}}function SS(t){t.createObjectStore(Tl,{keyPath:K3}).createIndex(cw,G3,{unique:!0}),t.createObjectStore(El,{keyPath:"targetId"}).createIndex(zR,W3,{unique:!0}),t.createObjectStore(jo)}const Xs="IndexedDbPersistence",Sg=18e5,bg=5e3,Ag="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",xB="main";class Rw{constructor(e,n,r,s,i,o,a,l,c,d,h=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=i,this.window=o,this.document=a,this.xi=c,this.Oi=d,this.Ni=h,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=p=>Promise.resolve(),!Rw.v())throw new K(B.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new pB(this,s),this.$i=n+xB,this.serializer=new qC(l),this.Ui=new ki(this.$i,this.Ni,new AB(this.serializer)),this.hi=new rB,this.Pi=new dB(this.referenceDelegate,this.serializer),this.remoteDocumentCache=rk(this.serializer),this.Ii=new nB,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,d===!1&&vt(Xs,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new K(B.FAILED_PRECONDITION,Ag);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new Sn(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>gh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(n=>this.isPrimary&&!n?this.Zi(e).next(()=>!1):!!n&&this.Xi(e).next(()=>!0))).catch(e=>{if(to(e))return H(Xs,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return H(Xs,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return Rc(e).get(ya).next(n=>L.resolve(this.es(n)))}ts(e){return gh(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Sg)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Dt(n,Il);return r.J().next(s=>{const i=this.ss(s,Sg),o=s.filter(a=>i.indexOf(a)===-1);return L.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?L.resolve(!0):Rc(e).get(ya).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,bg)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new K(B.FAILED_PRECONDITION,Ag);return!1}}return!(!this.networkEnabled||!this.inForeground)||gh(e).J().next(r=>this.ss(r,bg).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(i||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&H(Xs,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[pd,Il],e=>{const n=new lv(e,Sn.ce);return this.Zi(n).next(()=>this.ts(n))}),this.Ui.close(),this.Ps()}ss(e,n){return e.filter(r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>gh(e).J().next(n=>this.ss(n,Sg).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return rm.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new uB(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return nm.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){H(Xs,"Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=function(l){return l===18?d5:l===17?YR:l===16?u5:l===15?hw:l===14?QR:l===13?GR:l===12?c5:l===11?KR:void te(60245)}(this.Ni);let o;return this.Ui.runTransaction(e,s,i,a=>(o=new lv(a,this.ci?this.ci.next():Sn.ce),n==="readwrite-primary"?this.Hi(o).next(l=>!!l||this.Yi(o)).next(l=>{if(!l)throw vt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new K(B.FAILED_PRECONDITION,MR);return r(o)}).next(l=>this.Xi(o).next(()=>l)):this.Is(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Is(e){return Rc(e).get(ya).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,bg)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new K(B.FAILED_PRECONDITION,Ag)})}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Rc(e).put(ya,n)}static v(){return ki.v()}Zi(e){const n=Rc(e);return n.get(ya).next(r=>this.es(r)?(H(Xs,"Releasing primary lease."),n.delete(ya)):L.resolve())}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(vt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;KP()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const r=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return H(Xs,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return vt(Xs,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){vt("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Rc(t){return Dt(t,pd)}function gh(t){return Dt(t,Il)}function ik(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Ie(),s=Ie();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Cw(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PB{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return KP()?8:UR(Wt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new PB;return this.Ss(e,n,o).next(a=>{if(i.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(Sa()<=Re.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",ba(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),L.resolve()):(Sa()<=Re.DEBUG&&H("QueryEngine","Query:",ba(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Sa()<=Re.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",ba(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zn(n))):L.resolve())}ys(e,n){if(GI(n))return L.resolve(null);let r=zn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Gf(n,null,"F"),r=zn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Ie(...i);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Ds(n,a);return this.Cs(n,c,o,l.readTime)?this.ys(e,Gf(n,null,"F")):this.vs(e,c,n,l)}))})))}ws(e,n,r,s){return GI(n)||s.isEqual(ue.min())?L.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?L.resolve(null):(Sa()<=Re.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ba(n)),this.vs(e,o,n,VR(s,_l)).next(a=>a))})}Ds(e,n){let r=new ze(vC(e));return n.forEach((s,i)=>{yd(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return Sa()<=Re.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",ba(n)),this.ps.getDocumentsMatchingQuery(e,n,Hn.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kw="LocalStore",RB=3e8;class CB{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Ge(pe),this.xs=new Os(i=>Jo(i),md),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new sk(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function ak(t,e,n,r){return new CB(t,e,n,r)}async function lk(t,e){const n=re(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=Ie();for(const c of s){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Ls:c,removedBatchIds:o,addedBatchIds:a}))})})}function kB(t,e){const n=re(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const h=c.batch,p=h.keys();let f=L.resolve();return p.forEach(v=>{f=f.next(()=>d.getEntry(l,v)).next(y=>{const E=c.docVersions.get(v);oe(E!==null,48541),y.version.compareTo(E)<0&&(h.applyToRemoteDocument(y,c),y.isValidDocument()&&(y.setReadTime(c.commitVersion),d.addEntry(y)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Ie();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function ck(t){const e=re(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function DB(t,e){const n=re(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const a=[];e.targetChanges.forEach((d,h)=>{const p=s.get(h);if(!p)return;a.push(n.Pi.removeMatchingKeys(i,d.removedDocuments,h).next(()=>n.Pi.addMatchingKeys(i,d.addedDocuments,h)));let f=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?f=f.withResumeToken(gt.EMPTY_BYTE_STRING,ue.min()).withLastLimboFreeSnapshotVersion(ue.min()):d.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(d.resumeToken,r)),s=s.insert(h,f),function(y,E,w){return y.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=RB?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(p,f,d)&&a.push(n.Pi.updateTargetData(i,f))});let l=Un(),c=Ie();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(NB(i,o,e.documentUpdates).next(d=>{l=d.ks,c=d.qs})),!r.isEqual(ue.min())){const d=n.Pi.getLastRemoteSnapshotVersion(i).next(h=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return L.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.Ms=s,i))}function NB(t,e,n){let r=Ie(),s=Ie();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Un();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(ue.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):H(kw,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{ks:o,qs:s}})}function OB(t,e){const n=re(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Uo),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function tp(t,e){const n=re(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,L.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new hs(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function kl(t,e,n){const r=re(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!to(o))throw o;H(kw,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function np(t,e,n){const r=re(t);let s=ue.min(),i=Ie();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const h=re(l),p=h.xs.get(d);return p!==void 0?L.resolve(h.Ms.get(p)):h.Pi.getTargetData(c,d)}(r,o,zn(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:ue.min(),n?i:Ie())).next(a=>(hk(r,yC(e),a),{documents:a,Qs:i})))}function uk(t,e){const n=re(t),r=re(n.Pi),s=n.Ms.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",i=>r.At(i,e).next(o=>o?o.target:null))}function dk(t,e){const n=re(t),r=n.Os.get(e)||ue.min();return n.persistence.runTransaction("Get new document changes","readonly",s=>n.Ns.getAllFromCollectionGroup(s,e,VR(r,_l),Number.MAX_SAFE_INTEGER)).then(s=>(hk(n,e,s),s))}function hk(t,e,n){let r=t.Os.get(e)||ue.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk="firestore_clients";function bS(t,e){return`${fk}_${t}_${e}`}const pk="firestore_mutations";function AS(t,e,n){let r=`${pk}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const mk="firestore_targets";function xg(t,e){return`${mk}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br="SharedClientState";class rp{constructor(e,n,r,s){this.user=e,this.batchId=n,this.state=r,this.error=s}static Ws(e,n,r){const s=JSON.parse(r);let i,o=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return o&&s.error&&(o=typeof s.error.message=="string"&&typeof s.error.code=="string",o&&(i=new K(s.error.code,s.error.message))),o?new rp(e,n,s.state,i):(vt(Br,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class au{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ws(e,n){const r=JSON.parse(n);let s,i=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return i&&r.error&&(i=typeof r.error.message=="string"&&typeof r.error.code=="string",i&&(s=new K(r.error.code,r.error.message))),i?new au(e,r.state,s):(vt(Br,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class sp{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const r=JSON.parse(n);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,i=yw();for(let o=0;s&&o<r.activeTargetIds.length;++o)s=jR(r.activeTargetIds[o]),i=i.add(r.activeTargetIds[o]);return s?new sp(e,i):(vt(Br,`Failed to parse client data for instance '${e}': ${n}`),null)}}class Dw{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new Dw(n.clientId,n.onlineState):(vt(Br,`Failed to parse online state: ${e}`),null)}}class Tv{constructor(){this.activeTargetIds=yw()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Pg{constructor(e,n,r,s,i){this.window=e,this.Mi=n,this.persistenceKey=r,this.Js=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Ge(pe),this.started=!1,this.Xs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.eo=bS(this.persistenceKey,this.Js),this.no=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new Tv),this.ro=new RegExp(`^${fk}_${o}_([^_]*)$`),this.io=new RegExp(`^${pk}_${o}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${mk}_${o}_(\\d+)$`),this.oo=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this._o=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const s=this.getItem(bS(this.persistenceKey,r));if(s){const i=sp.Ws(r,s);i&&(this.Zs=this.Zs.insert(i.clientId,i))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const r=this.uo(n);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach((r,s)=>{s.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,r){this.ho(e,n,r),this.Po(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(xg(this.persistenceKey,e));if(s){const i=au.Ws(e,s);i&&(r=i.state)}}return n&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(xg(this.persistenceKey,e))}updateQueryState(e,n,r){this.Io(e,n,r)}handleUserChange(e,n,r){n.forEach(s=>{this.Po(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return H(Br,"READ",e,n),n}setItem(e,n){H(Br,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){H(Br,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(H(Br,"EVENT",n.key,n.newValue),n.key===this.eo)return void vt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const r=this.Ro(n.key);return this.Vo(r,null)}{const r=this.mo(n.key,n.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(this.so.test(n.key)){if(n.newValue!==null){const r=this.yo(n.key,n.newValue);if(r)return this.wo(r)}}else if(n.key===this.oo){if(n.newValue!==null){const r=this.uo(n.newValue);if(r)return this.co(r)}}else if(n.key===this.no){const r=function(i){let o=Sn.ce;if(i!=null)try{const a=JSON.parse(i);oe(typeof a=="number",30636,{So:i}),o=a}catch(a){vt(Br,"Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==Sn.ce&&this.sequenceNumberHandler(r)}else if(n.key===this._o){const r=this.bo(n.newValue);await Promise.all(r.map(s=>this.syncEngine.Do(s)))}}}else this.Xs.push(n)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,r){const s=new rp(this.currentUser,e,n,r),i=AS(this.persistenceKey,this.currentUser,e);this.setItem(i,s.Gs())}Po(e){const n=AS(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,r){const s=xg(this.persistenceKey,e),i=new au(e,n,r);this.setItem(s,i.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const r=this.Ro(e);return sp.Ws(r,n)}fo(e,n){const r=this.io.exec(e),s=Number(r[1]),i=r[2]!==void 0?r[2]:null;return rp.Ws(new Jt(i),s,n)}yo(e,n){const r=this.so.exec(e),s=Number(r[1]);return au.Ws(s,n)}uo(e){return Dw.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);H(Br,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const r=n?this.Zs.insert(e,n):this.Zs.remove(e),s=this.lo(this.Zs),i=this.lo(r),o=[],a=[];return i.forEach(l=>{s.has(l)||o.push(l)}),s.forEach(l=>{i.has(l)||a.push(l)}),this.syncEngine.Fo(o,a).then(()=>{this.Zs=r})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=yw();return e.forEach((r,s)=>{n=n.unionWith(s.activeTargetIds)}),n}}class gk{constructor(){this.Mo=new Tv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Tv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VB{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS="ConnectivityMonitor";class PS{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){H(xS,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){H(xS,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yh=null;function Iv(){return yh===null?yh=function(){return 268435456+Math.round(2147483648*Math.random())}():yh++,"0x"+yh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rg="RestConnection",LB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class MB{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Hf?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=Iv(),a=this.zo(e,n.toUriEncodedString());H(Rg,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,i);const{host:c}=new URL(a),d=ks(c);return this.Jo(e,a,l,r,d).then(h=>(H(Rg,`Received RPC '${e}' ${o}: `,h),h),h=>{throw ji(Rg,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",r),h})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Hl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=LB[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FB{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xt="WebChannelConnection";class UB extends MB{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=Iv();return new Promise((a,l)=>{const c=new IR;c.setWithCredentials(!0),c.listenOnce(SR.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case $h.NO_ERROR:const h=c.getResponseJson();H(Xt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),a(h);break;case $h.TIMEOUT:H(Xt,`RPC '${e}' ${o} timed out`),l(new K(B.DEADLINE_EXCEEDED,"Request time out"));break;case $h.HTTP_ERROR:const p=c.getStatus();if(H(Xt,`RPC '${e}' ${o} failed with status:`,p,"response text:",c.getResponseText()),p>0){let f=c.getResponseJson();Array.isArray(f)&&(f=f[0]);const v=f==null?void 0:f.error;if(v&&v.status&&v.message){const y=function(w){const _=w.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(_)>=0?_:B.UNKNOWN}(v.status);l(new K(y,v.message))}else l(new K(B.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new K(B.UNAVAILABLE,"Connection failed."));break;default:te(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{H(Xt,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(s);H(Xt,`RPC '${e}' ${o} sending request:`,s),c.send(n,"POST",d,r,15)})}T_(e,n,r){const s=Iv(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=xR(),a=AR(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");H(Xt,`Creating RPC '${e}' stream ${s}: ${d}`,l);const h=o.createWebChannel(d,l);this.I_(h);let p=!1,f=!1;const v=new FB({Yo:E=>{f?H(Xt,`Not sending because RPC '${e}' stream ${s} is closed:`,E):(p||(H(Xt,`Opening RPC '${e}' stream ${s} transport.`),h.open(),p=!0),H(Xt,`RPC '${e}' stream ${s} sending:`,E),h.send(E))},Zo:()=>h.close()}),y=(E,w,_)=>{E.listen(w,I=>{try{_(I)}catch(D){setTimeout(()=>{throw D},0)}})};return y(h,Mc.EventType.OPEN,()=>{f||(H(Xt,`RPC '${e}' stream ${s} transport opened.`),v.o_())}),y(h,Mc.EventType.CLOSE,()=>{f||(f=!0,H(Xt,`RPC '${e}' stream ${s} transport closed`),v.a_(),this.E_(h))}),y(h,Mc.EventType.ERROR,E=>{f||(f=!0,ji(Xt,`RPC '${e}' stream ${s} transport errored. Name:`,E.name,"Message:",E.message),v.a_(new K(B.UNAVAILABLE,"The operation could not be completed")))}),y(h,Mc.EventType.MESSAGE,E=>{var w;if(!f){const _=E.data[0];oe(!!_,16349);const I=_,D=(I==null?void 0:I.error)||((w=I[0])==null?void 0:w.error);if(D){H(Xt,`RPC '${e}' stream ${s} received error:`,D);const O=D.status;let V=function(b){const k=Tt[b];if(k!==void 0)return CC(k)}(O),S=D.message;V===void 0&&(V=B.INTERNAL,S="Unknown error status: "+O+" with message "+D.message),f=!0,v.a_(new K(V,S)),h.close()}else H(Xt,`RPC '${e}' stream ${s} received:`,_),v.u_(_)}}),y(a,bR.STAT_EVENT,E=>{E.stat===nv.PROXY?H(Xt,`RPC '${e}' stream ${s} detected buffering proxy`):E.stat===nv.NOPROXY&&H(Xt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{v.__()},0),v}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yk(){return typeof window<"u"?window:null}function Jh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function im(t){return new H5(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&H("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS="PersistentStream";class _k{constructor(e,n,r,s,i,o,a,l){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new vk(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(vt(n.toString()),vt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new K(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return H(RS,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(H(RS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class jB extends _k{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=G5(this.serializer,e),r=function(i){if(!("targetChange"in i))return ue.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ue.min():o.readTime?hn(o.readTime):ue.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=yv(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=Wf(l)?{documents:FC(i,l)}:{query:UC(i,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=NC(i,o.resumeToken);const c=mv(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ue.min())>0){a.readTime=Cl(i,o.snapshotVersion.toTimestamp());const c=mv(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=Y5(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=yv(this.serializer),n.removeTarget=e,this.q_(n)}}class BB extends _k{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return oe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,oe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){oe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=Q5(e.writeResults,e.commitTime),r=hn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=yv(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Yf(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $B{}class zB extends $B{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new K(B.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,gv(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new K(B.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,gv(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K(B.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class qB{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(vt(n),this.aa=!1):H("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra="RemoteStore";class HB{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{ua(this)&&(H(ra,"Restarting streams for network reachability change."),await async function(l){const c=re(l);c.Ea.add(4),await Gl(c),c.Ra.set("Unknown"),c.Ea.delete(4),await wd(c)}(this))})}),this.Ra=new qB(r,s)}}async function wd(t){if(ua(t))for(const e of t.da)await e(!0)}async function Gl(t){for(const e of t.da)await e(!1)}function om(t,e){const n=re(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Vw(n)?Ow(n):Yl(n).O_()&&Nw(n,e))}function Dl(t,e){const n=re(t),r=Yl(n);n.Ia.delete(e),r.O_()&&wk(n,e),n.Ia.size===0&&(r.O_()?r.L_():ua(n)&&n.Ra.set("Unknown"))}function Nw(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ue.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Yl(t).Y_(e)}function wk(t,e){t.Va.Ue(e),Yl(t).Z_(e)}function Ow(t){t.Va=new B5({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Yl(t).start(),t.Ra.ua()}function Vw(t){return ua(t)&&!Yl(t).x_()&&t.Ia.size>0}function ua(t){return re(t).Ea.size===0}function Ek(t){t.Va=void 0}async function WB(t){t.Ra.set("Online")}async function KB(t){t.Ia.forEach((e,n)=>{Nw(t,e)})}async function GB(t,e){Ek(t),Vw(t)?(t.Ra.ha(e),Ow(t)):t.Ra.set("Unknown")}async function QB(t,e,n){if(t.Ra.set("Online"),e instanceof DC&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ia.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ia.delete(a),s.Va.removeTarget(a))}(t,e)}catch(r){H(ra,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ip(t,r)}else if(e instanceof Yh?t.Va.Ze(e):e instanceof kC?t.Va.st(e):t.Va.tt(e),!n.isEqual(ue.min()))try{const r=await ck(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Va.Tt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.Ia.get(c);d&&i.Ia.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=i.Ia.get(l);if(!d)return;i.Ia.set(l,d.withResumeToken(gt.EMPTY_BYTE_STRING,d.snapshotVersion)),wk(i,l);const h=new hs(d.target,l,c,d.sequenceNumber);Nw(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){H(ra,"Failed to raise snapshot:",r),await ip(t,r)}}async function ip(t,e,n){if(!to(e))throw e;t.Ea.add(1),await Gl(t),t.Ra.set("Offline"),n||(n=()=>ck(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H(ra,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await wd(t)})}function Tk(t,e){return e().catch(n=>ip(t,n,e))}async function Ql(t){const e=re(t),n=qi(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Uo;for(;YB(e);)try{const s=await OB(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,XB(e,s)}catch(s){await ip(e,s)}Ik(e)&&Sk(e)}function YB(t){return ua(t)&&t.Ta.length<10}function XB(t,e){t.Ta.push(e);const n=qi(t);n.O_()&&n.X_&&n.ea(e.mutations)}function Ik(t){return ua(t)&&!qi(t).x_()&&t.Ta.length>0}function Sk(t){qi(t).start()}async function JB(t){qi(t).ra()}async function ZB(t){const e=qi(t);for(const n of t.Ta)e.ea(n.mutations)}async function e9(t,e,n){const r=t.Ta.shift(),s=Ew.from(r,e,n);await Tk(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Ql(t)}async function t9(t,e){e&&qi(t).X_&&await async function(r,s){if(function(o){return F5(o)&&o!==B.ABORTED}(s.code)){const i=r.Ta.shift();qi(r).B_(),await Tk(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Ql(r)}}(t,e),Ik(t)&&Sk(t)}async function CS(t,e){const n=re(t);n.asyncQueue.verifyOperationInProgress(),H(ra,"RemoteStore received new credentials");const r=ua(n);n.Ea.add(3),await Gl(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await wd(n)}async function Sv(t,e){const n=re(t);e?(n.Ea.delete(2),await wd(n)):e||(n.Ea.add(2),await Gl(n),n.Ra.set("Unknown"))}function Yl(t){return t.ma||(t.ma=function(n,r,s){const i=re(n);return i.sa(),new jB(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:WB.bind(null,t),t_:KB.bind(null,t),r_:GB.bind(null,t),H_:QB.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Vw(t)?Ow(t):t.Ra.set("Unknown")):(await t.ma.stop(),Ek(t))})),t.ma}function qi(t){return t.fa||(t.fa=function(n,r,s){const i=re(n);return i.sa(),new BB(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:JB.bind(null,t),r_:t9.bind(null,t),ta:ZB.bind(null,t),na:e9.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Ql(t)):(await t.fa.stop(),t.Ta.length>0&&(H(ra,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new Lw(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ed(t,e){if(vt("AsyncQueue",`${e}: ${t}`),to(t))return new K(B.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{static emptySet(e){return new Ja(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||J.comparator(n.key,r.key):(n,r)=>J.comparator(n.key,r.key),this.keyedMap=Fc(),this.sortedSet=new Ge(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ja)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ja;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(){this.ga=new Ge(J.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):te(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Nl{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Nl(e,n,Ja.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Jp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n9{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class r9{constructor(){this.queries=DS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=re(n),i=s.queries;s.queries=DS(),i.forEach((o,a)=>{for(const l of a.Sa)l.onError(r)})})(this,new K(B.ABORTED,"Firestore shutting down"))}}function DS(){return new Os(t=>gC(t),Jp)}async function Mw(t,e){const n=re(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new n9,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=Ed(o,`Initialization of query '${ba(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Uw(n)}async function Fw(t,e){const n=re(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function s9(t,e){const n=re(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Fa(s)&&(r=!0);o.wa=s}}r&&Uw(n)}function i9(t,e,n){const r=re(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function Uw(t){t.Ca.forEach(e=>{e.next()})}var bv,NS;(NS=bv||(bv={})).Ma="default",NS.Cache="cache";class jw{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Nl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Nl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==bv.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(e){this.key=e}}class Ak{constructor(e){this.key=e}}class xk{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ie(),this.mutatedKeys=Ie(),this.eu=vC(e),this.tu=new Ja(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new kS,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const p=s.get(d),f=yd(this.query,h)?h:null,v=!!p&&this.mutatedKeys.has(p.key),y=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let E=!1;p&&f?p.data.isEqual(f.data)?v!==y&&(r.track({type:3,doc:f}),E=!0):this.su(p,f)||(r.track({type:2,doc:f}),E=!0,(l&&this.eu(f,l)>0||c&&this.eu(f,c)<0)&&(a=!0)):!p&&f?(r.track({type:0,doc:f}),E=!0):p&&!f&&(r.track({type:1,doc:p}),E=!0,(l||c)&&(a=!0)),E&&(f?(o=o.add(f),i=y?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{tu:o,iu:r,Cs:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((d,h)=>function(f,v){const y=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te(20277,{Rt:E})}};return y(f)-y(v)}(d.type,h.type)||this.eu(d.doc,h.doc)),this.ou(r),s=s??!1;const a=n&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,c=l!==this.Za;return this.Za=l,o.length!==0||c?{snapshot:new Nl(this.query,e.tu,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new kS,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ie(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new Ak(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new bk(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Ie();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Nl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Xl="SyncEngine";class o9{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class a9{constructor(e){this.key=e,this.hu=!1}}class l9{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Os(a=>gC(a),Jp),this.Iu=new Map,this.Eu=new Set,this.du=new Ge(J.comparator),this.Au=new Map,this.Ru=new xw,this.Vu={},this.mu=new Map,this.fu=na.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function c9(t,e,n=!0){const r=am(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await Pk(r,e,n,!0),s}async function u9(t,e){const n=am(t);await Pk(n,e,!0,!1)}async function Pk(t,e,n,r){const s=await tp(t.localStore,zn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await Bw(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&om(t.remoteStore,s),a}async function Bw(t,e,n,r,s){t.pu=(h,p,f)=>async function(y,E,w,_){let I=E.view.ru(w);I.Cs&&(I=await np(y.localStore,E.query,!1).then(({documents:S})=>E.view.ru(S,I)));const D=_&&_.targetChanges.get(E.targetId),O=_&&_.targetMismatches.get(E.targetId)!=null,V=E.view.applyChanges(I,y.isPrimaryClient,D,O);return Av(y,E.targetId,V.au),V.snapshot}(t,h,p,f);const i=await np(t.localStore,e,!0),o=new xk(e,i.Qs),a=o.ru(i.documents),l=_d.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);Av(t,n,c.au);const d=new o9(e,n,o);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function d9(t,e,n){const r=re(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!Jp(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await kl(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Dl(r.remoteStore,s.targetId),Ol(r,s.targetId)}).catch(eo)):(Ol(r,s.targetId),await kl(r.localStore,s.targetId,!0))}async function h9(t,e){const n=re(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Dl(n.remoteStore,r.targetId))}async function f9(t,e,n){const r=Hw(t);try{const s=await function(o,a){const l=re(o),c=je.now(),d=a.reduce((f,v)=>f.add(v.key),Ie());let h,p;return l.persistence.runTransaction("Locally write mutations","readwrite",f=>{let v=Un(),y=Ie();return l.Ns.getEntries(f,d).next(E=>{v=E,v.forEach((w,_)=>{_.isValidDocument()||(y=y.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(f,v)).next(E=>{h=E;const w=[];for(const _ of a){const I=L5(_,h.get(_.key).overlayedDocument);I!=null&&w.push(new Vs(_.key,I,oC(I.value.mapValue),nn.exists(!0)))}return l.mutationQueue.addMutationBatch(f,c,w,a)}).next(E=>{p=E;const w=E.applyToLocalDocumentSet(h,y);return l.documentOverlayCache.saveOverlays(f,E.batchId,w)})}).then(()=>({batchId:p.batchId,changes:wC(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Vu[o.currentUser.toKey()];c||(c=new Ge(pe)),c=c.insert(a,l),o.Vu[o.currentUser.toKey()]=c}(r,s.batchId,n),await ro(r,s.changes),await Ql(r.remoteStore)}catch(s){const i=Ed(s,"Failed to persist write");n.reject(i)}}async function Rk(t,e){const n=re(t);try{const r=await DB(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(oe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?oe(o.hu,14607):s.removedDocuments.size>0&&(oe(o.hu,42227),o.hu=!1))}),await ro(n,r,e)}catch(r){await eo(r)}}function OS(t,e,n){const r=re(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=re(o);l.onlineState=a;let c=!1;l.queries.forEach((d,h)=>{for(const p of h.Sa)p.va(a)&&(c=!0)}),c&&Uw(l)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function p9(t,e,n){const r=re(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Ge(J.comparator);o=o.insert(i,mt.newNoDocument(i,ue.min()));const a=Ie().add(i),l=new vd(ue.min(),new Map,new Ge(pe),o,a);await Rk(r,l),r.du=r.du.remove(i),r.Au.delete(e),qw(r)}else await kl(r.localStore,e,!1).then(()=>Ol(r,e,n)).catch(eo)}async function m9(t,e){const n=re(t),r=e.batch.batchId;try{const s=await kB(n.localStore,e);zw(n,r,null),$w(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ro(n,s)}catch(s){await eo(s)}}async function g9(t,e,n){const r=re(t);try{const s=await function(o,a){const l=re(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(oe(h!==null,37113),d=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);zw(r,e,n),$w(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ro(r,s)}catch(s){await eo(s)}}function $w(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function zw(t,e,n){const r=re(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Ol(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||Ck(t,r)})}function Ck(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Dl(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),qw(t))}function Av(t,e,n){for(const r of n)r instanceof bk?(t.Ru.addReference(r.key,e),y9(t,r)):r instanceof Ak?(H(Xl,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||Ck(t,r.key)):te(19791,{wu:r})}function y9(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(H(Xl,"New document in limbo: "+n),t.Eu.add(r),qw(t))}function qw(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new J(Fe.fromString(e)),r=t.fu.next();t.Au.set(r,new a9(n)),t.du=t.du.insert(n,r),om(t.remoteStore,new hs(zn(gd(n.path)),r,"TargetPurposeLimboResolution",Sn.ce))}}async function ro(t,e,n){const r=re(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{o.push(r.pu(l,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){s.push(c);const h=Cw.As(l.targetId,c);i.push(h)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(l,c){const d=re(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>L.forEach(c,p=>L.forEach(p.Es,f=>d.persistence.referenceDelegate.addReference(h,p.targetId,f)).next(()=>L.forEach(p.ds,f=>d.persistence.referenceDelegate.removeReference(h,p.targetId,f)))))}catch(h){if(!to(h))throw h;H(kw,"Failed to update sequence numbers: "+h)}for(const h of c){const p=h.targetId;if(!h.fromCache){const f=d.Ms.get(p),v=f.snapshotVersion,y=f.withLastLimboFreeSnapshotVersion(v);d.Ms=d.Ms.insert(p,y)}}}(r.localStore,i))}async function v9(t,e){const n=re(t);if(!n.currentUser.isEqual(e)){H(Xl,"User change. New user:",e.toKey());const r=await lk(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(a=>{a.forEach(l=>{l.reject(new K(B.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ro(n,r.Ls)}}function _9(t,e){const n=re(t),r=n.Au.get(e);if(r&&r.hu)return Ie().add(r.key);{let s=Ie();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const a=n.Tu.get(o);s=s.unionWith(a.view.nu)}return s}}async function w9(t,e){const n=re(t),r=await np(n.localStore,e.query,!0),s=e.view.cu(r);return n.isPrimaryClient&&Av(n,e.targetId,s.au),s}async function E9(t,e){const n=re(t);return dk(n.localStore,e).then(r=>ro(n,r))}async function T9(t,e,n,r){const s=re(t),i=await function(a,l){const c=re(a),d=re(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.er(h,l).next(p=>p?c.localDocuments.getDocuments(h,p):L.resolve(null)))}(s.localStore,e);i!==null?(n==="pending"?await Ql(s.remoteStore):n==="acknowledged"||n==="rejected"?(zw(s,e,r||null),$w(s,e),function(a,l){re(re(a).mutationQueue).ir(l)}(s.localStore,e)):te(6720,"Unknown batchState",{Su:n}),await ro(s,i)):H(Xl,"Cannot apply mutation batch with id: "+e)}async function I9(t,e){const n=re(t);if(am(n),Hw(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),s=await VS(n,r.toArray());n.gu=!0,await Sv(n.remoteStore,!0);for(const i of s)om(n.remoteStore,i)}else if(e===!1&&n.gu!==!1){const r=[];let s=Promise.resolve();n.Iu.forEach((i,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):s=s.then(()=>(Ol(n,o),kl(n.localStore,o,!0))),Dl(n.remoteStore,o)}),await s,await VS(n,r),function(o){const a=re(o);a.Au.forEach((l,c)=>{Dl(a.remoteStore,c)}),a.Ru.Jr(),a.Au=new Map,a.du=new Ge(J.comparator)}(n),n.gu=!1,await Sv(n.remoteStore,!1)}}async function VS(t,e,n){const r=re(t),s=[],i=[];for(const o of e){let a;const l=r.Iu.get(o);if(l&&l.length!==0){a=await tp(r.localStore,zn(l[0]));for(const c of l){const d=r.Tu.get(c),h=await w9(r,d);h.snapshot&&i.push(h.snapshot)}}else{const c=await uk(r.localStore,o);a=await tp(r.localStore,c),await Bw(r,kk(c),o,!1,a.resumeToken)}s.push(a)}return r.Pu.H_(i),s}function kk(t){return pC(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function S9(t){return function(n){return re(re(n).persistence).Ts()}(re(t).localStore)}async function b9(t,e,n,r){const s=re(t);if(s.gu)return void H(Xl,"Ignoring unexpected query state notification.");const i=s.Iu.get(e);if(i&&i.length>0)switch(n){case"current":case"not-current":{const o=await dk(s.localStore,yC(i[0])),a=vd.createSynthesizedRemoteEventForCurrentChange(e,n==="current",gt.EMPTY_BYTE_STRING);await ro(s,o,a);break}case"rejected":await kl(s.localStore,e,!0),Ol(s,e,r);break;default:te(64155,n)}}async function A9(t,e,n){const r=am(t);if(r.gu){for(const s of e){if(r.Iu.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){H(Xl,"Adding an already active target "+s);continue}const i=await uk(r.localStore,s),o=await tp(r.localStore,i);await Bw(r,kk(i),o.targetId,!1,o.resumeToken),om(r.remoteStore,o)}for(const s of n)r.Iu.has(s)&&await kl(r.localStore,s,!1).then(()=>{Dl(r.remoteStore,s),Ol(r,s)}).catch(eo)}}function am(t){const e=re(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Rk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=_9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=p9.bind(null,e),e.Pu.H_=s9.bind(null,e.eventManager),e.Pu.yu=i9.bind(null,e.eventManager),e}function Hw(t){const e=re(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=m9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=g9.bind(null,e),e}class Gu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=im(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return ak(this.persistence,new ok,e.initialUser,this.serializer)}Cu(e){return new Pw(sm.mi,this.serializer)}Du(e){return new gk}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Gu.provider={build:()=>new Gu};class x9 extends Gu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){oe(this.persistence.referenceDelegate instanceof ep,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new ek(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Zt.withCacheSize(this.cacheSizeBytes):Zt.DEFAULT;return new Pw(r=>ep.mi(r,n),this.serializer)}}class Dk extends Gu{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await Hw(this.xu.syncEngine),await Ql(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return ak(this.persistence,new ok,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new ek(r,e.asyncQueue,n)}Mu(e,n){const r=new U3(n,this.persistence);return new F3(e.asyncQueue,r)}Cu(e){const n=ik(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Zt.withCacheSize(this.cacheSizeBytes):Zt.DEFAULT;return new Rw(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,yk(),Jh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new gk}}class P9 extends Dk{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof Pg&&(this.sharedClientState.syncEngine={Co:T9.bind(null,n),vo:b9.bind(null,n),Fo:A9.bind(null,n),Ts:S9.bind(null,n),Do:E9.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji(async r=>{await I9(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Du(e){const n=yk();if(!Pg.v(n))throw new K(B.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=ik(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Pg(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Qu{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>OS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=v9.bind(null,this.syncEngine),await Sv(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new r9}()}createDatastore(e){const n=im(e.databaseInfo.databaseId),r=function(i){return new UB(i)}(e.databaseInfo);return function(i,o,a,l){return new zB(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new HB(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>OS(this.syncEngine,n,0),function(){return PS.v()?new PS:new VB}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,d){const h=new l9(s,i,o,a,l,c);return d&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=re(s);H(ra,"RemoteStore shutting down."),i.Ea.add(5),await Gl(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Qu.provider={build:()=>new Qu};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):vt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hi="FirestoreClient";class R9{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Jt.UNAUTHENTICATED,this.clientId=zp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{H(Hi,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(H(Hi,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ed(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Cg(t,e){t.asyncQueue.verifyOperationInProgress(),H(Hi,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await lk(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function LS(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Kw(t);H(Hi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>CS(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>CS(e.remoteStore,s)),t._onlineComponents=e}async function Kw(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H(Hi,"Using user provided OfflineComponentProvider");try{await Cg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===B.FAILED_PRECONDITION||s.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;ji("Error using user provided cache. Falling back to memory cache: "+n),await Cg(t,new Gu)}}else H(Hi,"Using default OfflineComponentProvider"),await Cg(t,new x9(void 0));return t._offlineComponents}async function Gw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H(Hi,"Using user provided OnlineComponentProvider"),await LS(t,t._uninitializedComponentsProvider._online)):(H(Hi,"Using default OnlineComponentProvider"),await LS(t,new Qu))),t._onlineComponents}function Nk(t){return Kw(t).then(e=>e.persistence)}function Ok(t){return Kw(t).then(e=>e.localStore)}function Vk(t){return Gw(t).then(e=>e.remoteStore)}function C9(t){return Gw(t).then(e=>e.syncEngine)}async function op(t){const e=await Gw(t),n=e.eventManager;return n.onListen=c9.bind(null,e.syncEngine),n.onUnlisten=d9.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=u9.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=h9.bind(null,e.syncEngine),n}function k9(t){return t.asyncQueue.enqueue(async()=>{const e=await Nk(t),n=await Vk(t);return e.setNetworkEnabled(!0),function(s){const i=re(s);return i.Ea.delete(0),wd(i)}(n)})}function D9(t){return t.asyncQueue.enqueue(async()=>{const e=await Nk(t),n=await Vk(t);return e.setNetworkEnabled(!1),async function(s){const i=re(s);i.Ea.add(0),await Gl(i),i.Ra.set("Offline")}(n)})}function N9(t,e){const n=new rr;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,o){try{const a=await function(c,d){const h=re(c);return h.persistence.runTransaction("read document","readonly",p=>h.localDocuments.getDocument(p,d))}(s,i);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new K(B.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=Ed(a,`Failed to get document '${i} from cache`);o.reject(l)}}(await Ok(t),e,n)),n.promise}function O9(t,e,n={}){const r=new rr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new Ww({next:p=>{d.Nu(),o.enqueueAndForget(()=>Fw(i,h));const f=p.docs.has(a);!f&&p.fromCache?c.reject(new K(B.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&p.fromCache&&l&&l.source==="server"?c.reject(new K(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new jw(gd(a.path),d,{includeMetadataChanges:!0,qa:!0});return Mw(i,h)}(await op(t),t.asyncQueue,e,n,r)),r.promise}function V9(t,e){const n=new rr;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,o){try{const a=await np(s,i,!0),l=new xk(i,a.Qs),c=l.ru(a.documents),d=l.applyChanges(c,!1);o.resolve(d.snapshot)}catch(a){const l=Ed(a,`Failed to execute query '${i} against cache`);o.reject(l)}}(await Ok(t),e,n)),n.promise}function L9(t,e,n={}){const r=new rr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new Ww({next:p=>{d.Nu(),o.enqueueAndForget(()=>Fw(i,h)),p.fromCache&&l.source==="server"?c.reject(new K(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new jw(a,d,{includeMetadataChanges:!0,qa:!0});return Mw(i,h)}(await op(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lk(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M9="firestore.googleapis.com",FS=!0;class US{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new K(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=M9,this.ssl=FS}else this.host=e.host,this.ssl=e.ssl??FS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=QC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<ZC)throw new K(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}NR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Lk(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new K(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new K(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new K(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Qw{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new US({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new US(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new CR;switch(r.type){case"firstParty":return new R3(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=MS.get(n);r&&(H("ComponentProvider","Removing Datastore"),MS.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new xr(this.firestore,e,this._query)}}class it{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ps(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new it(this.firestore,e,this._key)}toJSON(){return{type:it._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(fd(n,it._jsonSchema))return new it(e,r||null,new J(Fe.fromString(n.referencePath)))}}it._jsonSchemaVersion="firestore/documentReference/1.0",it._jsonSchema={type:At("string",it._jsonSchemaVersion),referencePath:At("string")};class ps extends xr{constructor(e,n,r){super(e,n,gd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new it(this.firestore,null,new J(e))}withConverter(e){return new ps(this.firestore,e,this._path)}}function ye(t,e,...n){if(t=He(t),DR("collection","path",e),t instanceof Qw){const r=Fe.fromString(e,...n);return RI(r),new ps(t,null,r)}{if(!(t instanceof it||t instanceof ps))throw new K(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Fe.fromString(e,...n));return RI(r),new ps(t.firestore,null,r)}}function ve(t,e,...n){if(t=He(t),arguments.length===1&&(e=zp.newId()),DR("doc","path",e),t instanceof Qw){const r=Fe.fromString(e,...n);return PI(r),new it(t,null,new J(r))}{if(!(t instanceof it||t instanceof ps))throw new K(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Fe.fromString(e,...n));return PI(r),new it(t.firestore,t instanceof ps?t.converter:null,new J(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS="AsyncQueue";class BS{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new vk(this,"async_queue_retry"),this._c=()=>{const r=Jh();r&&H(jS,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Jh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Jh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new rr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!to(e))throw e;H(jS,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,vt("INTERNAL UNHANDLED ERROR: ",$S(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Lw.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&te(47125,{Pc:$S(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function $S(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class fn extends Qw{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new BS,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new BS(e),this._firestoreClient=void 0,await e}}}function Mk(t,e,n){n||(n=Hf);const r=Bp(t,"firestore");if(r.isInitialized(n)){const s=r.getImmediate({identifier:n}),i=r.getOptions(n);if(gl(i,e))return s;throw new K(B.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new K(B.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<ZC)throw new K(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&ks(e.host)&&Q_(e.host),r.initialize({options:e,instanceIdentifier:n})}function Ls(t){if(t._terminated)throw new K(B.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Fk(t),t._firestoreClient}function Fk(t){var r,s,i;const e=t._freezeSettings(),n=function(a,l,c,d){return new f5(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,Lk(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new R9(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}function F9(t,e){ji("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return Uk(t,Qu.provider,{build:r=>new Dk(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function U9(t){ji("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();Uk(t,Qu.provider,{build:n=>new P9(n,e.cacheSizeBytes)})}function Uk(t,e,n){if((t=wt(t,fn))._firestoreClient||t._terminated)throw new K(B.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new K(B.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},Fk(t)}function Yw(t){return k9(Ls(t=wt(t,fn)))}function Xw(t){return D9(Ls(t=wt(t,fn)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ln(gt.fromBase64String(e))}catch(n){throw new K(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ln(gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ln._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(fd(e,Ln._jsonSchema))return Ln.fromBase64String(e.bytes)}}Ln._jsonSchemaVersion="firestore/bytes/1.0",Ln._jsonSchema={type:At("string",Ln._jsonSchemaVersion),bytes:At("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return pe(this._lat,e._lat)||pe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:wr._jsonSchemaVersion}}static fromJSON(e){if(fd(e,wr._jsonSchema))return new wr(e.latitude,e.longitude)}}wr._jsonSchemaVersion="firestore/geoPoint/1.0",wr._jsonSchema={type:At("string",wr._jsonSchemaVersion),latitude:At("number"),longitude:At("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Er._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(fd(e,Er._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Er(e.vectorValues);throw new K(B.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Er._jsonSchemaVersion="firestore/vectorValue/1.0",Er._jsonSchema={type:At("string",Er._jsonSchemaVersion),vectorValues:At("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j9=/^__.*__$/;class B9{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Vs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Kl(e,this.data,n,this.fieldTransforms)}}class jk{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Vs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Bk(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te(40011,{Ac:t})}}class lm{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new lm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return ap(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Bk(this.Ac)&&j9.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class $9{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||im(e)}Cc(e,n,r,s=!1){return new lm({Ac:e,methodName:n,Dc:r,path:rt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function cm(t){const e=t._freezeSettings(),n=im(t._databaseId);return new $9(t._databaseId,!!e.ignoreUndefinedProperties,n)}function $k(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);eE("Data must be an object, but it was:",o,r);const a=zk(r,o);let l,c;if(i.merge)l=new bn(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const h of i.mergeFields){const p=xv(e,h,n);if(!o.contains(p))throw new K(B.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);Hk(d,p)||d.push(p)}l=new bn(d),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new B9(new tn(a),l,c)}class um extends Jl{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof um}}function z9(t,e,n){return new lm({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Jw extends Jl{_toFieldTransform(e){return new _w(e.path,new Pl)}isEqual(e){return e instanceof Jw}}class Zw extends Jl{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=z9(this,e,!0),r=this.vc.map(i=>Zl(i,n)),s=new Zo(r);return new _w(e.path,s)}isEqual(e){return e instanceof Zw&&gl(this.vc,e.vc)}}function q9(t,e,n,r){const s=t.Cc(1,e,n);eE("Data must be an object, but it was:",s,r);const i=[],o=tn.empty();no(r,(l,c)=>{const d=tE(e,l,n);c=He(c);const h=s.yc(d);if(c instanceof um)i.push(d);else{const p=Zl(c,h);p!=null&&(i.push(d),o.set(d,p))}});const a=new bn(i);return new jk(o,a,s.fieldTransforms)}function H9(t,e,n,r,s,i){const o=t.Cc(1,e,n),a=[xv(e,r,n)],l=[s];if(i.length%2!=0)throw new K(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)a.push(xv(e,i[p])),l.push(i[p+1]);const c=[],d=tn.empty();for(let p=a.length-1;p>=0;--p)if(!Hk(c,a[p])){const f=a[p];let v=l[p];v=He(v);const y=o.yc(f);if(v instanceof um)c.push(f);else{const E=Zl(v,y);E!=null&&(c.push(f),d.set(f,E))}}const h=new bn(c);return new jk(d,h,o.fieldTransforms)}function W9(t,e,n,r=!1){return Zl(n,t.Cc(r?4:3,e))}function Zl(t,e){if(qk(t=He(t)))return eE("Unsupported field value:",e,t),zk(t,e);if(t instanceof Jl)return function(r,s){if(!Bk(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=Zl(a,s.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=He(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return C5(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=je.fromDate(r);return{timestampValue:Cl(s.serializer,i)}}if(r instanceof je){const i=new je(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Cl(s.serializer,i)}}if(r instanceof wr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ln)return{bytesValue:NC(s.serializer,r._byteString)};if(r instanceof it){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Sw(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Er)return function(o,a){return{mapValue:{fields:{[pw]:{stringValue:mw},[Sl]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Sc("VectorValues must only contain numeric values.");return vw(a.serializer,c)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${qp(r)}`)}(t,e)}function zk(t,e){const n={};return XR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):no(t,(r,s)=>{const i=Zl(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function qk(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof je||t instanceof wr||t instanceof Ln||t instanceof it||t instanceof Jl||t instanceof Er)}function eE(t,e,n){if(!qk(n)||!OR(n)){const r=qp(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function xv(t,e,n){if((e=He(e))instanceof Td)return e._internalPath;if(typeof e=="string")return tE(t,e);throw ap("Field path arguments must be of type string or ",t,!1,void 0,n)}const K9=new RegExp("[~\\*/\\[\\]]");function tE(t,e,n){if(e.search(K9)>=0)throw ap(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Td(...e.split("."))._internalPath}catch{throw ap(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ap(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new K(B.INVALID_ARGUMENT,a+t+l)}function Hk(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new it(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new G9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(dm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class G9 extends Wk{data(){return super.data()}}function dm(t,e){return typeof e=="string"?tE(t,e):e instanceof Td?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kk(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class nE{}class hm extends nE{}function Ce(t,e,...n){let r=[];e instanceof nE&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof fm).length,a=i.filter(l=>l instanceof Id).length;if(o>1||o>0&&a>0)throw new K(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Id extends hm{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Id(e,n,r)}_apply(e){const n=this._parse(e);return Gk(e._query,n),new xr(e.firestore,e.converter,pv(e._query,n))}_parse(e){const n=cm(e.firestore);return function(i,o,a,l,c,d,h){let p;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new K(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){HS(h,d);const v=[];for(const y of h)v.push(qS(l,i,y));p={arrayValue:{values:v}}}else p=qS(l,i,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||HS(h,d),p=W9(a,o,h,d==="in"||d==="not-in");return ke.create(c,d,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function be(t,e,n){const r=e,s=dm("where",t);return Id._create(s,r,n)}class fm extends nE{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new fm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Be.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)Gk(o,l),o=pv(o,l)}(e._query,n),new xr(e.firestore,e.converter,pv(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class pm extends hm{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new pm(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new K(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new K(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Wu(i,o)}(e._query,this._field,this._direction);return new xr(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Wl(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function ms(t,e="asc"){const n=e,r=dm("orderBy",t);return pm._create(r,n)}class mm extends hm{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new mm(e,n,r)}_apply(e){return new xr(e.firestore,e.converter,Gf(e._query,this._limit,this._limitType))}}function sa(t){return V3("limit",t),mm._create("limit",t,"F")}function qS(t,e,n){if(typeof(n=He(n))=="string"){if(n==="")throw new K(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!mC(e)&&n.indexOf("/")!==-1)throw new K(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Fe.fromString(n));if(!J.isDocumentKey(r))throw new K(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return qu(t,new J(r))}if(n instanceof it)return qu(t,n._key);throw new K(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qp(n)}.`)}function HS(t,e){if(!Array.isArray(t)||t.length===0)throw new K(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Gk(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new K(B.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K(B.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Qk{convertValue(e,n="none"){switch($i(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ps(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw te(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return no(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Sl].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>tt(o.doubleValue));return new Er(n)}convertGeoPoint(e){return new wr(tt(e.latitude),tt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Yp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp($u(e));default:return null}}convertTimestamp(e){const n=xs(e);return new je(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Fe.fromString(e);oe(zC(r),9688,{name:e});const s=new Bi(r.get(1),r.get(3)),i=new J(r.popFirst(5));return s.isEqual(n)||vt(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yk(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Ro{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class gs extends Wk{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new lu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(dm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new K(B.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=gs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}gs._jsonSchemaVersion="firestore/documentSnapshot/1.0",gs._jsonSchema={type:At("string",gs._jsonSchemaVersion),bundleSource:At("string","DocumentSnapshot"),bundleName:At("string"),bundle:At("string")};class lu extends gs{data(e={}){return super.data(e)}}class ys{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ro(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new lu(this._firestore,this._userDataWriter,r.key,r,new Ro(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new lu(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Ro(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new lu(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Ro(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:Q9(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new K(B.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ys._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=zp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Q9(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(t){t=wt(t,it);const e=wt(t.firestore,fn);return O9(Ls(e),t._key).then(n=>Jk(e,t,n))}ys._jsonSchemaVersion="firestore/querySnapshot/1.0",ys._jsonSchema={type:At("string",ys._jsonSchemaVersion),bundleSource:At("string","QuerySnapshot"),bundleName:At("string"),bundle:At("string")};class Sd extends Qk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ln(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new it(this.firestore,null,n)}}function Xk(t){t=wt(t,it);const e=wt(t.firestore,fn),n=Ls(e),r=new Sd(e);return N9(n,t._key).then(s=>new gs(e,r,t._key,s,new Ro(s!==null&&s.hasLocalMutations,!0),t.converter))}function Ne(t){t=wt(t,xr);const e=wt(t.firestore,fn),n=Ls(e),r=new Sd(e);return Kk(t._query),L9(n,t._query).then(s=>new ys(e,r,t,s))}function Y9(t){t=wt(t,xr);const e=wt(t.firestore,fn),n=Ls(e),r=new Sd(e);return V9(n,t._query).then(s=>new ys(e,r,t,s))}function Wi(t,e,n){t=wt(t,it);const r=wt(t.firestore,fn),s=Yk(t.converter,e,n);return bd(r,[$k(cm(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,nn.none())])}function st(t,e,n,...r){t=wt(t,it);const s=wt(t.firestore,fn),i=cm(s);let o;return o=typeof(e=He(e))=="string"||e instanceof Td?H9(i,"updateDoc",t._key,e,n,r):q9(i,"updateDoc",t._key,e),bd(s,[o.toMutation(t._key,nn.exists(!0))])}function Mn(t){return bd(wt(t.firestore,fn),[new tm(t._key,nn.none())])}function Ki(t,e){const n=wt(t.firestore,fn),r=ve(t),s=Yk(t.converter,e);return bd(n,[$k(cm(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,nn.exists(!1))]).then(()=>r)}function lp(t,...e){var l,c,d;t=He(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||zS(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(zS(e[r])){const h=e[r];e[r]=(l=h.next)==null?void 0:l.bind(h),e[r+1]=(c=h.error)==null?void 0:c.bind(h),e[r+2]=(d=h.complete)==null?void 0:d.bind(h)}let i,o,a;if(t instanceof it)o=wt(t.firestore,fn),a=gd(t._key.path),i={next:h=>{e[r]&&e[r](Jk(o,t,h))},error:e[r+1],complete:e[r+2]};else{const h=wt(t,xr);o=wt(h.firestore,fn),a=h._query;const p=new Sd(o);i={next:f=>{e[r]&&e[r](new ys(o,p,h,f))},error:e[r+1],complete:e[r+2]},Kk(t._query)}return function(p,f,v,y){const E=new Ww(y),w=new jw(f,E,v);return p.asyncQueue.enqueueAndForget(async()=>Mw(await op(p),w)),()=>{E.Nu(),p.asyncQueue.enqueueAndForget(async()=>Fw(await op(p),w))}}(Ls(o),a,s,i)}function bd(t,e){return function(r,s){const i=new rr;return r.asyncQueue.enqueueAndForget(async()=>f9(await C9(r),s,i)),i.promise}(Ls(t),e)}function Jk(t,e,n){const r=n.docs.get(e._key),s=new Sd(t);return new gs(t,s,e._key,r,new Ro(n.hasPendingWrites,n.fromCache),e.converter)}function Ae(){return new Jw("serverTimestamp")}function X9(...t){return new Zw("arrayUnion",t)}(function(e,n=!0){(function(s){Hl=s})(ud),Fi(new bs("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new fn(new x3(r.getProvider("auth-internal")),new C3(o,r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new K(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bi(c.options.projectId,d)}(o,s),o);return i={useFetchStreams:n,...i},a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),nr(SI,bI,e),nr(SI,bI,"esm2020")})();const kg=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:Qk,Bytes:Ln,CollectionReference:ps,DocumentReference:it,DocumentSnapshot:gs,FieldPath:Td,FieldValue:Jl,Firestore:fn,FirestoreError:K,GeoPoint:wr,Query:xr,QueryCompositeFilterConstraint:fm,QueryConstraint:hm,QueryDocumentSnapshot:lu,QueryFieldFilterConstraint:Id,QueryLimitConstraint:mm,QueryOrderByConstraint:pm,QuerySnapshot:ys,SnapshotMetadata:Ro,Timestamp:je,VectorValue:Er,_AutoId:zp,_ByteString:gt,_DatabaseId:Bi,_DocumentKey:J,_EmptyAuthCredentialsProvider:CR,_FieldPath:rt,_cast:wt,_logWarn:ji,_validateIsNotUsedTogether:NR,addDoc:Ki,arrayUnion:X9,collection:ye,deleteDoc:Mn,disableNetwork:Xw,doc:ve,enableIndexedDbPersistence:F9,enableMultiTabIndexedDbPersistence:U9,enableNetwork:Yw,ensureFirestoreConfigured:Ls,executeWrite:bd,getDoc:St,getDocFromCache:Xk,getDocs:Ne,getDocsFromCache:Y9,initializeFirestore:Mk,limit:sa,onSnapshot:lp,orderBy:ms,query:Ce,serverTimestamp:Ae,setDoc:Wi,setLogLevel:PR,updateDoc:st,where:be},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J9="type.googleapis.com/google.protobuf.Int64Value",Z9="type.googleapis.com/google.protobuf.UInt64Value";function Zk(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function cp(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>cp(e));if(typeof t=="function"||typeof t=="object")return Zk(t,e=>cp(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Vl(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case J9:case Z9:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Vl(e)):typeof t=="function"||typeof t=="object"?Zk(t,e=>Vl(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class An extends Ar{constructor(e,n,r){super(`${rE}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,An.prototype)}}function e$(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function up(t,e){let n=e$(t),r=n,s;try{const i=e&&e.error;if(i){const o=i.status;if(typeof o=="string"){if(!WS[o])return new An("internal","internal");n=WS[o],r=o}const a=i.message;typeof a=="string"&&(r=a),s=i.details,s!==void 0&&(s=Vl(s))}}catch{}return n==="ok"?null:new An(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t${constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Tn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(i=>this.auth=i,()=>{}),this.messaging||r.get().then(i=>this.messaging=i,()=>{}),this.appCheck||s==null||s.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv="us-central1",n$=/^data: (.*?)(?:\n|$)/;function r$(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new An("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class s${constructor(e,n,r,s,i=Pv,o=(...a)=>fetch(...a)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new t$(e,n,r,s),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(i);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=Pv}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function i$(t,e,n){const r=ks(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(Q_(t.emulatorOrigin+"/backends"),HP("Functions",!0))}function o$(t,e,n){const r=s=>l$(t,e,s,{});return r.stream=(s,i)=>u$(t,e,s,i),r}function eD(t){return t.emulatorOrigin&&ks(t.emulatorOrigin)?"include":void 0}async function a$(t,e,n,r,s){n["Content-Type"]="application/json";let i;try{i=await r(t,{method:"POST",body:JSON.stringify(e),headers:n,credentials:eD(s)})}catch{return{status:0,json:null}}let o=null;try{o=await i.json()}catch{}return{status:i.status,json:o}}async function tD(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function l$(t,e,n,r){const s=t._url(e);return c$(t,s,n,r)}async function c$(t,e,n,r){n=cp(n);const s={data:n},i=await tD(t,r),o=r.timeout||7e4,a=r$(o),l=await Promise.race([a$(e,s,i,t.fetchImpl,t),a.promise,t.cancelAllRequests]);if(a.cancel(),!l)throw new An("cancelled","Firebase Functions instance was deleted.");const c=up(l.status,l.json);if(c)throw c;if(!l.json)throw new An("internal","Response is not valid JSON object.");let d=l.json.data;if(typeof d>"u"&&(d=l.json.result),typeof d>"u")throw new An("internal","Response is missing data field.");return{data:Vl(d)}}function u$(t,e,n,r){const s=t._url(e);return d$(t,s,n,r||{})}async function d$(t,e,n,r){var p;n=cp(n);const s={data:n},i=await tD(t,r);i["Content-Type"]="application/json",i.Accept="text/event-stream";let o;try{o=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(s),headers:i,signal:r==null?void 0:r.signal,credentials:eD(t)})}catch(f){if(f instanceof Error&&f.name==="AbortError"){const y=new An("cancelled","Request was cancelled.");return{data:Promise.reject(y),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(y)}}}}}}const v=up(0,null);return{data:Promise.reject(v),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(v)}}}}}}let a,l;const c=new Promise((f,v)=>{a=f,l=v});(p=r==null?void 0:r.signal)==null||p.addEventListener("abort",()=>{const f=new An("cancelled","Request was cancelled.");l(f)});const d=o.body.getReader(),h=h$(d,a,l,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const f=h.getReader();return{async next(){const{value:v,done:y}=await f.read();return{value:v,done:y}},async return(){return await f.cancel(),{done:!0,value:void 0}}}}},data:c}}function h$(t,e,n,r){const s=(o,a)=>{const l=o.match(n$);if(!l)return;const c=l[1];try{const d=JSON.parse(c);if("result"in d){e(Vl(d.result));return}if("message"in d){a.enqueue(Vl(d.message));return}if("error"in d){const h=up(0,d);a.error(h),n(h);return}}catch(d){if(d instanceof An){a.error(d),n(d);return}}},i=new TextDecoder;return new ReadableStream({start(o){let a="";return l();async function l(){if(r!=null&&r.aborted){const c=new An("cancelled","Request was cancelled");return o.error(c),n(c),Promise.resolve()}try{const{value:c,done:d}=await t.read();if(d){a.trim()&&s(a.trim(),o),o.close();return}if(r!=null&&r.aborted){const p=new An("cancelled","Request was cancelled");o.error(p),n(p),await t.cancel();return}a+=i.decode(c,{stream:!0});const h=a.split(`
`);a=h.pop()||"";for(const p of h)p.trim()&&s(p.trim(),o);return l()}catch(c){const d=c instanceof An?c:up(0,null);o.error(d),n(d)}}},cancel(){return t.cancel()}})}const KS="@firebase/functions",GS="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f$="auth-internal",p$="app-check-internal",m$="messaging-internal";function g$(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),i=n.getProvider(f$),o=n.getProvider(m$),a=n.getProvider(p$);return new s$(s,i,o,a,r)};Fi(new bs(rE,e,"PUBLIC").setMultipleInstances(!0)),nr(KS,GS,t),nr(KS,GS,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y$(t=ZP(),e=Pv){const r=Bp(He(t),rE).getImmediate({identifier:e}),s=zP("functions");return s&&v$(r,...s),r}function v$(t,e,n){i$(He(t),e,n)}function nD(t,e,n){return o$(He(t),e)}g$();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD="firebasestorage.googleapis.com",sD="storageBucket",_$=2*60*1e3,w$=10*60*1e3,E$=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt extends Ar{constructor(e,n,r=0){super(Dg(e),`Firebase Storage: ${n} (${Dg(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,dt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Dg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var et;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(et||(et={}));function Dg(t){return"storage/"+t}function sE(){const t="An unknown error occurred, please check the error payload for server response.";return new dt(et.UNKNOWN,t)}function T$(t){return new dt(et.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function I$(t){return new dt(et.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function S$(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new dt(et.UNAUTHENTICATED,t)}function b$(){return new dt(et.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function A$(t){return new dt(et.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function iD(){return new dt(et.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function oD(){return new dt(et.CANCELED,"User canceled the upload/download.")}function x$(t){return new dt(et.INVALID_URL,"Invalid URL '"+t+"'.")}function P$(t){return new dt(et.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function R$(){return new dt(et.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+sD+"' property when initializing the app?")}function aD(){return new dt(et.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function C$(){return new dt(et.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function k$(){return new dt(et.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function D$(t){return new dt(et.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Rv(t){return new dt(et.INVALID_ARGUMENT,t)}function lD(){return new dt(et.APP_DELETED,"The Firebase app was deleted.")}function N$(t){return new dt(et.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function cu(t,e){return new dt(et.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Cc(t){throw new dt(et.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=jn.makeFromUrl(e,n)}catch{return new jn(e,"")}if(r.path==="")return r;throw P$(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(D){D.path.charAt(D.path.length-1)==="/"&&(D.path_=D.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(D){D.path_=decodeURIComponent(D.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",f=new RegExp(`^https?://${h}/${d}/b/${s}/o${p}`,"i"),v={bucket:1,path:3},y=n===rD?"(?:storage.googleapis.com|storage.cloud.google.com)":n,E="([^?#]*)",w=new RegExp(`^https?://${y}/${s}/${E}`,"i"),I=[{regex:a,indices:l,postModify:i},{regex:f,indices:v,postModify:c},{regex:w,indices:{bucket:1,path:2},postModify:c}];for(let D=0;D<I.length;D++){const O=I[D],V=O.regex.exec(e);if(V){const S=V[O.indices.bucket];let T=V[O.indices.path];T||(T=""),r=new jn(S,T),O.postModify(r);break}}if(r==null)throw x$(e);return r}}class O${constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V$(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function d(...E){c||(c=!0,e.apply(null,E))}function h(E){s=setTimeout(()=>{s=null,t(f,l())},E)}function p(){i&&clearTimeout(i)}function f(E,...w){if(c){p();return}if(E){p(),d.call(null,E,...w);return}if(l()||o){p(),d.call(null,E,...w);return}r<64&&(r*=2);let I;a===1?(a=2,I=0):I=(r+Math.random())*1e3,h(I)}let v=!1;function y(E){v||(v=!0,p(),!c&&(s!==null?(E||(a=2),clearTimeout(s),h(0)):E||(a=1)))}return h(0),i=setTimeout(()=>{o=!0,y(!0)},n),y}function L$(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M$(t){return t!==void 0}function F$(t){return typeof t=="function"}function U$(t){return typeof t=="object"&&!Array.isArray(t)}function gm(t){return typeof t=="string"||t instanceof String}function QS(t){return iE()&&t instanceof Blob}function iE(){return typeof Blob<"u"}function YS(t,e,n,r){if(r<e)throw Rv(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Rv(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ad(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function cD(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var $o;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})($o||($o={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uD(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j${constructor(e,n,r,s,i,o,a,l,c,d,h,p=!0,f=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=h,this.retry=p,this.isUsingEmulator=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,y)=>{this.resolve_=v,this.reject_=y,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new vh(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===$o.NO_ERROR,l=i.getStatus();if(!a||uD(l,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===$o.ABORT;r(!1,new vh(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new vh(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());M$(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=sE();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?lD():oD();o(l)}else{const l=iD();o(l)}};this.canceled_?n(!1,new vh(!1,null,!0)):this.backoffId_=V$(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&L$(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class vh{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function B$(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function $$(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function z$(t,e){e&&(t["X-Firebase-GMPID"]=e)}function q$(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function H$(t,e,n,r,s,i,o=!0,a=!1){const l=cD(t.urlParams),c=t.url+l,d=Object.assign({},t.headers);return z$(d,e),B$(d,n),$$(d,i),q$(d,r),new j$(c,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W$(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function K$(...t){const e=W$();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(iE())return new Blob(t);throw new dt(et.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function G$(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q$(t){if(typeof atob>"u")throw D$("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ng{constructor(e,n){this.data=e,this.contentType=n||null}}function Y$(t,e){switch(t){case Wr.RAW:return new Ng(dD(e));case Wr.BASE64:case Wr.BASE64URL:return new Ng(hD(t,e));case Wr.DATA_URL:return new Ng(J$(e),Z$(e))}throw sE()}function dD(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function X$(t){let e;try{e=decodeURIComponent(t)}catch{throw cu(Wr.DATA_URL,"Malformed data URL.")}return dD(e)}function hD(t,e){switch(t){case Wr.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw cu(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Wr.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw cu(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Q$(e)}catch(s){throw s.message.includes("polyfill")?s:cu(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class fD{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw cu(Wr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=ez(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function J$(t){const e=new fD(t);return e.base64?hD(Wr.BASE64,e.rest):X$(e.rest)}function Z$(t){return new fD(t).contentType}function ez(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e,n){let r=0,s="";QS(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(QS(this.data_)){const r=this.data_,s=G$(r,e,n);return s===null?null:new ls(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new ls(r,!0)}}static getBlob(...e){if(iE()){const n=e.map(r=>r instanceof ls?r.data_:r);return new ls(K$.apply(null,n))}else{const n=e.map(o=>gm(o)?Y$(Wr.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new ls(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pD(t){let e;try{e=JSON.parse(t)}catch{return null}return U$(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tz(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function nz(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function mD(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rz(t,e){return e}class an{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||rz}}let _h=null;function sz(t){return!gm(t)||t.length<2?t:mD(t)}function oE(){if(_h)return _h;const t=[];t.push(new an("bucket")),t.push(new an("generation")),t.push(new an("metageneration")),t.push(new an("name","fullPath",!0));function e(i,o){return sz(o)}const n=new an("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new an("size");return s.xform=r,t.push(s),t.push(new an("timeCreated")),t.push(new an("updated")),t.push(new an("md5Hash",null,!0)),t.push(new an("cacheControl",null,!0)),t.push(new an("contentDisposition",null,!0)),t.push(new an("contentEncoding",null,!0)),t.push(new an("contentLanguage",null,!0)),t.push(new an("contentType",null,!0)),t.push(new an("metadata","customMetadata",!0)),_h=t,_h}function iz(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new jn(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function oz(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return iz(r,t),r}function gD(t,e,n){const r=pD(e);return r===null?null:oz(t,r,n)}function az(t,e,n,r){const s=pD(e);if(s===null||!gm(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const d=t.bucket,h=t.fullPath,p="/b/"+o(d)+"/o/"+o(h),f=Ad(p,n,r),v=cD({alt:"media",token:c});return f+v})[0]}function yD(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class ec{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vs(t){if(!t)throw sE()}function aE(t,e){function n(r,s){const i=gD(t,s,e);return vs(i!==null),i}return n}function lz(t,e){function n(r,s){const i=gD(t,s,e);return vs(i!==null),az(i,s,t.host,t._protocol)}return n}function xd(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=b$():s=S$():n.getStatus()===402?s=I$(t.bucket):n.getStatus()===403?s=A$(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function vD(t){const e=xd(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=T$(t.path)),i.serverResponse=s.serverResponse,i}return n}function cz(t,e,n){const r=e.fullServerUrl(),s=Ad(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new ec(s,i,aE(t,n),o);return a.errorHandler=vD(e),a}function uz(t,e,n){const r=e.fullServerUrl(),s=Ad(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new ec(s,i,lz(t,n),o);return a.errorHandler=vD(e),a}function dz(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function _D(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=dz(null,e)),r}function wD(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let I="";for(let D=0;D<2;D++)I=I+Math.random().toString().slice(2);return I}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=_D(e,r,s),d=yD(c,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,p=`\r
--`+l+"--",f=ls.getBlob(h,r,p);if(f===null)throw aD();const v={name:c.fullPath},y=Ad(i,t.host,t._protocol),E="POST",w=t.maxUploadRetryTime,_=new ec(y,E,aE(t,n),w);return _.urlParams=v,_.headers=o,_.body=f.uploadData(),_.errorHandler=xd(e),_}class dp{constructor(e,n,r,s){this.current=e,this.total=n,this.finalized=!!r,this.metadata=s||null}}function lE(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{vs(!1)}return vs(!!n&&(e||["active"]).indexOf(n)!==-1),n}function hz(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o=_D(e,r,s),a={name:o.fullPath},l=Ad(i,t.host,t._protocol),c="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},h=yD(o,n),p=t.maxUploadRetryTime;function f(y){lE(y);let E;try{E=y.getResponseHeader("X-Goog-Upload-URL")}catch{vs(!1)}return vs(gm(E)),E}const v=new ec(l,c,f,p);return v.urlParams=a,v.headers=d,v.body=h,v.errorHandler=xd(e),v}function fz(t,e,n,r){const s={"X-Goog-Upload-Command":"query"};function i(c){const d=lE(c,["active","final"]);let h=null;try{h=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{vs(!1)}h||vs(!1);const p=Number(h);return vs(!isNaN(p)),new dp(p,r.size(),d==="final")}const o="POST",a=t.maxUploadRetryTime,l=new ec(n,o,i,a);return l.headers=s,l.errorHandler=xd(e),l}const XS=256*1024;function pz(t,e,n,r,s,i,o,a){const l=new dp(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw C$();const c=l.total-l.current;let d=c;s>0&&(d=Math.min(d,s));const h=l.current,p=h+d;let f="";d===0?f="finalize":c===d?f="upload, finalize":f="upload";const v={"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":`${l.current}`},y=r.slice(h,p);if(y===null)throw aD();function E(D,O){const V=lE(D,["active","final"]),S=l.current+d,T=r.size();let b;return V==="final"?b=aE(e,i)(D,O):b=null,new dp(S,T,V==="final",b)}const w="POST",_=e.maxUploadRetryTime,I=new ec(n,w,E,_);return I.headers=v,I.body=y.uploadData(),I.progressCallback=a||null,I.errorHandler=xd(t),I}const wn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Og(t){switch(t){case"running":case"pausing":case"canceling":return wn.RUNNING;case"paused":return wn.PAUSED;case"success":return wn.SUCCESS;case"canceled":return wn.CANCELED;case"error":return wn.ERROR;default:return wn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mz{constructor(e,n,r){if(F$(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ia(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class gz{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=$o.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=$o.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=$o.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw Cc("cannot .send() more than once");if(ks(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Cc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Cc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Cc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Cc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class yz extends gz{initXhr(){this.xhr_.responseType="text"}}function To(){return new yz}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vz{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=oE(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(et.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const i=this.isExponentialBackoffExpired();if(uD(s.status,[]))if(i)s=iD();else{this.sleepTime=Math.max(this.sleepTime*2,E$),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(et.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,i)=>{this._resolve=s,this._reject=i,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=hz(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,To,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._uploadUrl=i,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const s=fz(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(s,To,n,r);this._request=i,i.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=XS*this._chunkMultiplier,n=new dp(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,i)=>{let o;try{o=pz(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,To,s,i,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){XS*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=cz(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,To,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=wD(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,To,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=oD(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=Og(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,s){const i=new mz(n||void 0,r||void 0,s||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Og(this._state)){case wn.SUCCESS:Ia(this._resolve.bind(null,this.snapshot))();break;case wn.CANCELED:case wn.ERROR:const n=this._reject;Ia(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Og(this._state)){case wn.RUNNING:case wn.PAUSED:e.next&&Ia(e.next.bind(e,this.snapshot))();break;case wn.SUCCESS:e.complete&&Ia(e.complete.bind(e))();break;case wn.CANCELED:case wn.ERROR:e.error&&Ia(e.error.bind(e,this._error))();break;default:e.error&&Ia(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e,n){this._service=e,n instanceof jn?this._location=n:this._location=jn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ia(e,n)}get root(){const e=new jn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return mD(this._location.path)}get storage(){return this._service}get parent(){const e=tz(this._location.path);if(e===null)return null;const n=new jn(this._location.bucket,e);return new ia(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw N$(e)}}function _z(t,e,n){t._throwIfRoot("uploadBytes");const r=wD(t.storage,t._location,oE(),new ls(e,!0),n);return t.storage.makeRequestWithTokens(r,To).then(s=>({metadata:s,ref:t}))}function wz(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new vz(t,new ls(e),n)}function Ez(t){t._throwIfRoot("getDownloadURL");const e=uz(t.storage,t._location,oE());return t.storage.makeRequestWithTokens(e,To).then(n=>{if(n===null)throw k$();return n})}function Tz(t,e){const n=nz(t._location.path,e),r=new jn(t._location.bucket,n);return new ia(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iz(t){return/^[A-Za-z]+:\/\//.test(t)}function Sz(t,e){return new ia(t,e)}function ED(t,e){if(t instanceof cE){const n=t;if(n._bucket==null)throw R$();const r=new ia(n,n._bucket);return e!=null?ED(r,e):r}else return e!==void 0?Tz(t,e):t}function bz(t,e){if(e&&Iz(e)){if(t instanceof cE)return Sz(t,e);throw Rv("To use ref(service, url), the first argument must be a Storage instance.")}else return ED(t,e)}function JS(t,e){const n=e==null?void 0:e[sD];return n==null?null:jn.makeFromBucketSpec(n,t)}function Az(t,e,n,r={}){t.host=`${e}:${n}`;const s=ks(e);s&&(Q_(`https://${t.host}/b`),HP("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:OU(i,t.app.options.projectId))}class cE{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=rD,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=_$,this._maxUploadRetryTime=w$,this._requests=new Set,s!=null?this._bucket=jn.makeFromBucketSpec(s,this._host):this._bucket=JS(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=jn.makeFromBucketSpec(this._url,e):this._bucket=JS(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){YS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){YS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Tn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ia(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new O$(lD());{const o=H$(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const ZS="@firebase/storage",eb="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TD="storage";function B8(t,e,n){return t=He(t),_z(t,e,n)}function $8(t,e,n){return t=He(t),wz(t,e,n)}function z8(t){return t=He(t),Ez(t)}function q8(t,e){return t=He(t),bz(t,e)}function xz(t=ZP(),e){t=He(t);const r=Bp(t,TD).getImmediate({identifier:e}),s=zP("storage");return s&&Pz(r,...s),r}function Pz(t,e,n,r={}){Az(t,e,n,r)}function Rz(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new cE(n,r,s,e,ud)}function Cz(){Fi(new bs(TD,Rz,"PUBLIC").setMultipleInstances(!0)),nr(ZS,eb,""),nr(ZS,eb,"esm2020")}Cz();const Cv={apiKey:"AIzaSyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s",authDomain:"voda-c6abd.firebaseapp.com",projectId:"voda-c6abd",storageBucket:"voda-c6abd.appspot.com",messagingSenderId:"483702062341",appId:"1:483702062341:web:b1ff06ad175cb7ae428b6c"};console.log(" Initializing Firebase with config:",{projectId:Cv.projectId,authDomain:Cv.authDomain,emulatorMode:!1});const ym=JP(Cv),Yn=zj(ym,{persistence:[u3,tv]});console.log(" Firebase Auth initialized with browserLocalPersistence (fallback to inMemory)");const Q=Mk(ym,{experimentalAutoDetectLongPolling:!0});try{PR("error")}catch{}const uE=y$(ym,"us-central1"),kz=xz(ym);console.log(" Firebase initialized successfully");const Dz=async()=>{try{console.log(" Offline persistence disabled (env flag or emulator mode)"),console.log(" Firestore features configured successfully")}catch(t){console.error(" Error configuring Firestore features:",t)}};setTimeout(Dz,100);let yo=0;const Vg=3,Nz=1e3,ID=async t=>{var e,n;if(console.error(" Firestore connection error:",t),(t.code==="unavailable"||t.code==="failed-precondition"||(e=t.message)!=null&&e.includes("ERR_ABORTED")||(n=t.message)!=null&&n.includes("UNAVAILABLE"))&&yo<Vg){yo++;const r=Math.min(Nz*Math.pow(2,yo-1),1e4);console.log(` Attempting to reconnect (${yo}/${Vg}) in ${r}ms...`);try{await Xw(Q),await new Promise(s=>setTimeout(s,r)),await Yw(Q),console.log(" Firestore reconnected successfully"),yo=0}catch(s){console.error(" Failed to reconnect:",s),yo>=Vg&&(console.error(" Maximum reconnection attempts reached."),Oz())}}},Oz=()=>{const t=document.createElement("div");t.style.cssText=`
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #f8d7da;
    color: #721c24;
    padding: 20px;
    border-radius: 8px;
    border: 1px solid #f5c6cb;
    z-index: 10000;
    text-align: center;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    max-width: 400px;
  `,t.innerHTML=`
    <h3 style="margin: 0 0 10px 0;">  </h3>
    <p style="margin: 0 0 15px 0;">   .     .</p>
    <button onclick="window.location.reload()" style="
      background: #dc3545;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
    ">  </button>
  `,document.body.appendChild(t),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},1e4)};window.addEventListener("online",async()=>{console.log(" Network back online, enabling Firestore...");try{await Yw(Q),yo=0,console.log(" Firestore network enabled")}catch(t){console.error(" Failed to enable Firestore network:",t)}});window.addEventListener("offline",async()=>{console.log(" Network offline, disabling Firestore network...");try{await Xw(Q),console.log(" Firestore network disabled")}catch(t){console.error(" Failed to disable Firestore network:",t)}});window.addEventListener("unhandledrejection",t=>{var e,n,r,s,i,o;(((e=t.reason)==null?void 0:e.code)==="unavailable"||((n=t.reason)==null?void 0:n.code)==="failed-precondition"||(s=(r=t.reason)==null?void 0:r.message)!=null&&s.includes("ERR_ABORTED")||(o=(i=t.reason)==null?void 0:i.message)!=null&&o.includes("UNAVAILABLE"))&&(ID(t.reason),t.preventDefault())});console.log("Using Firebase Production Environment");const Lg=Object.freeze(Object.defineProperty({__proto__:null,auth:Yn,db:Q,functions:uE,handleFirestoreError:ID,storage:kz},Symbol.toStringTag,{value:"Module"})),Le=t=>{if(t&&typeof t=="object"&&typeof t.toDate=="function")return t.toDate();if(t instanceof Date)return t;if(typeof t=="number")return new Date(t);if(typeof t=="string"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return new Date},Vz=t=>{if(t===null)return!1;const e=Object.getPrototypeOf(t);return e===Object.prototype||e===null},Yu=t=>{if(t===void 0)return;if(t===null)return null;if(Array.isArray(t))return t.map(n=>Yu(n)).filter(n=>n!==void 0);if(t instanceof Date||!Vz(t))return t;const e={};for(const[n,r]of Object.entries(t)){const s=Yu(r);s!==void 0&&(e[n]=s)}return e},Zh={async create(t){await Wi(ve(Q,"profiles",t.userId),{userId:t.userId,shopId:t.shopId,role:t.role,fullName:t.fullName,phone:t.phone,createdAt:Ae()})},async getById(t){const e=ve(Q,"profiles",t),n=await St(e);if(n.exists()){const r=n.data();return{userId:n.id,...r,createdAt:Le(r.createdAt)}}return null},async update(t,e){const n=ve(Q,"profiles",t);await st(n,{...e,updatedAt:Ae()})},async getByShopId(t){const e=Ce(ye(Q,"profiles"),be("shopId","==",t));return(await Ne(e)).docs.map(r=>{const s=r.data();return{userId:r.id,...s,createdAt:Le(s.createdAt)}})}},kv={async create(t){return(await Ki(ye(Q,"referrals"),{...t,createdAt:Ae(),updatedAt:Ae()})).id},async getByReferrerId(t){try{const e=Ce(ye(Q,"referrals"),be("referrerId","==",t),ms("createdAt","desc"));return(await Ne(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:Le(r.data().createdAt),updatedAt:Le(r.data().updatedAt)}))}catch(e){if(String((e==null?void 0:e.message)||"").includes("requires an index")){const r=Ce(ye(Q,"referrals"),be("referrerId","==",t));return(await Ne(r)).docs.map(i=>({id:i.id,...i.data(),createdAt:Le(i.data().createdAt),updatedAt:Le(i.data().updatedAt)})).sort((i,o)=>{var a,l,c,d;return(((l=(a=o.createdAt)==null?void 0:a.getTime)==null?void 0:l.call(a))||0)-(((d=(c=i.createdAt)==null?void 0:c.getTime)==null?void 0:d.call(c))||0)})}throw e}},async getByReferralCode(t){const e=Ce(ye(Q,"referrals"),be("referralCode","==",t),sa(1)),n=await Ne(e);if(n.empty)return null;const r=n.docs[0];return{id:r.id,...r.data(),createdAt:Le(r.data().createdAt),updatedAt:Le(r.data().updatedAt)}},async updateStatus(t,e){await st(ve(Q,"referrals",t),{status:e,updatedAt:Ae()})},generateReferralCode(t){const e=Date.now().toString(36);return`REF_${t.slice(-6)}_${e}`.toUpperCase()}},SD={async getByUserId(t){const e=Ce(ye(Q,"profiles"),be("userId","==",t)),n=await Ne(e);if(!n.empty){const r=n.docs[0],s=r.data();return{userId:r.id,...s,createdAt:Le(s.createdAt),updatedAt:Le(s.updatedAt)}}return null},async update(t,e){const n=Ce(ye(Q,"profiles"),be("userId","==",t)),r=await Ne(n);if(!r.empty){const s=ve(Q,"profiles",r.docs[0].id);await st(s,{...e,updatedAt:Ae()})}}},Lz={async create(t){return(await Ki(ye(Q,"merchantWallets"),{...t,transferLimit:t.transferLimit||2e5,withdrawLimit:t.withdrawLimit||2e5,transferUsage:t.transferUsage||0,withdrawUsage:t.withdrawUsage||0,createdAt:Ae(),updatedAt:Ae()})).id},async getByMerchantId(t){const e=Ce(ye(Q,"merchantWallets"),be("merchantUserId","==",t)),r=(await Ne(e)).docs.map(a=>{const l=a.data();return{id:a.id,...l,transferLimit:l.transferLimit||2e5,withdrawLimit:l.withdrawLimit||2e5,transferUsage:l.transferUsage||0,withdrawUsage:l.withdrawUsage||0,createdAt:Le(l.createdAt),updatedAt:Le(l.updatedAt)}});if(r.length>0)return r.sort((a,l)=>{const c=a.createdAt,d=l.createdAt;return c&&d?d.getTime()-c.getTime():c&&!d?-1:!c&&d?1:0});const s=Ce(ye(Q,"wallets"),be("userId","==",t));return(await Ne(s)).docs.map(a=>{const l=a.data();return{id:a.id,merchantUserId:l.userId||t,provider:l.provider||"instapay",msisdn:l.msisdn||"",label:l.name||l.label||"",isActive:l.isActive!==!1,dailyLimit:l.dailyLimit||2e5,monthlyLimit:l.monthlyLimit||2e5,transferLimit:l.transferLimit||l.monthlyTransferLimit||2e5,withdrawLimit:l.withdrawLimit||l.monthlyWithdrawLimit||2e5,transferUsage:l.transferUsage||l.monthlyTransferUsage||0,withdrawUsage:l.withdrawUsage||l.monthlyWithdrawUsage||0,dailyTransferLimit:l.dailyTransferLimit,dailyWithdrawLimit:l.dailyWithdrawLimit,createdAt:Le(l.createdAt),updatedAt:Le(l.updatedAt)}}).sort((a,l)=>{const c=a.createdAt,d=l.createdAt;return c&&d?d.getTime()-c.getTime():c&&!d?-1:!c&&d?1:0})},async getById(t){const e=ve(Q,"merchantWallets",t),n=await St(e);if(n.exists()){const r=n.data();return{id:n.id,...r,transferLimit:r.transferLimit||2e5,withdrawLimit:r.withdrawLimit||2e5,transferUsage:r.transferUsage||0,withdrawUsage:r.withdrawUsage||0,createdAt:Le(r.createdAt),updatedAt:Le(r.updatedAt)}}return null},async update(t,e){const n=ve(Q,"merchantWallets",t);await st(n,{...e,updatedAt:Ae()})},async updateUsage(t,e,n){const r=ve(Q,"merchantWallets",t),s={updatedAt:Ae()};e!==void 0&&(s.transferUsage=e),n!==void 0&&(s.withdrawUsage=n),await st(r,s)},async resetDailyUsage(t){const n=(await this.getByMerchantId(t)).map(r=>this.updateUsage(r.id,0,0));await Promise.all(n)},async reassignByMsisdns(t,e){try{if(!e)throw new Error("merchantUserId   ");if(!Array.isArray(t)||t.length===0)return{updated:0,failed:0};const r=((o,a)=>o.reduce((l,c,d)=>(d%a===0&&l.push(o.slice(d,d+a)),l),[]))(t.map(o=>o.trim()).filter(Boolean),10);let s=0,i=0;for(const o of r){const a=Ce(ye(Q,"merchantWallets"),be("msisdn","in",o)),c=(await Ne(a)).docs.map(async d=>{try{const h=d.data();if(h.merchantUserId&&h.merchantUserId!==e)return;await st(d.ref,{merchantUserId:e,updatedAt:Ae()}),s+=1}catch(h){console.error("Failed to reassign wallet",d.id,h),i+=1}});await Promise.allSettled(c)}return{updated:s,failed:i}}catch(n){return console.error("Error reassigning wallets by msisdns:",n),{updated:0,failed:t.length}}},async delete(t){const e=ve(Q,"merchantWallets",t);await Mn(e)}},bD={async create(t){try{console.log("Creating transaction:",t);const{calculateCommission:e,calculateProfit:n}=await Oe(async()=>{const{calculateCommission:c,calculateProfit:d}=await Promise.resolve().then(()=>l8);return{calculateCommission:c,calculateProfit:d}},void 0,import.meta.url),r=t.commission!==void 0?t.commission:e(t.amount,t.txnType),s=n(t.amount,t.txnType),i=t.merchantUserId||t.createdBy;i||console.warn("   merchantUserId  createdBy         .");const o=Object.fromEntries(Object.entries(t).filter(([c,d])=>d!==void 0)),a={...o,merchantUserId:i,commission:r,profit:s,createdAt:o.createdAt?o.createdAt instanceof Date?o.createdAt:new Date(String(o.createdAt)):new Date,uploadedAt:Ae(),confirmedAt:o.confirmedAt?o.confirmedAt instanceof Date?o.confirmedAt:new Date(String(o.confirmedAt)):null},l=await Ki(ye(Q,"transactions"),a);if(console.log("Transaction created with ID:",l.id,"Profit:",s),s>0){const{ProfitService:c}=await Oe(async()=>{const{ProfitService:d}=await import("./profitService-B0S70xb1.js").then(h=>h.p);return{ProfitService:d}},[],import.meta.url);c.addProfit(s),console.log("     :",s,"")}return await this.updateLineUsage(t.lineId,t.amount),l.id}catch(e){throw console.error("Error creating transaction:",e),e}},async updateLineUsage(t,e){try{console.log("Updating line usage:",{lineId:t,amount:e})}catch(n){console.error("Error updating line usage:",n)}},async getByShopId(t){const e=Ce(ye(Q,"transactions"),be("shopId","==",t),ms("createdAt","desc"));return(await Ne(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:Le(r.data().createdAt),confirmedAt:r.data().confirmedAt?Le(r.data().confirmedAt):void 0}))},async getByMerchantId(t){const e=Ce(ye(Q,"transactions"),be("merchantUserId","==",t),ms("createdAt","desc"));return(await Ne(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:Le(r.data().createdAt),confirmedAt:r.data().confirmedAt?Le(r.data().confirmedAt):void 0}))},async getByUserId(t){const e=Ce(ye(Q,"transactions"),be("merchantUserId","==",t)),n=Ce(ye(Q,"transactions"),be("userId","==",t)),[r,s]=await Promise.all([Ne(e),Ne(n)]),i=[...r.docs,...s.docs],o=new Set,a=[];for(const l of i){if(o.has(l.id))continue;o.add(l.id);const c=l.data();a.push({id:l.id,...c,createdAt:Le(c.createdAt),confirmedAt:c.confirmedAt?Le(c.confirmedAt):void 0})}return a.sort((l,c)=>{const d=l.createdAt,h=c.createdAt;return d&&h?h.getTime()-d.getTime():d&&!h?-1:!d&&h?1:0})},async updateStatus(t,e,n){const r=ve(Q,"transactions",t);await st(r,{status:e,confirmedAt:n?n instanceof Date?n:new Date(String(n)):null})}},Mz={async log(t,e,n,r,s){await Ki(ye(Q,"auditLogs"),{actor:s,action:t,entity:e,entityId:n,meta:r,createdAt:Ae()})},async getLogs(t=100){const e=Ce(ye(Q,"auditLogs"),ms("createdAt","desc"),sa(t));return(await Ne(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:Le(r.data().createdAt)}))},async getDeletedTransactions(){try{const t=Ce(ye(Q,"deletedTransactions"),ms("deletedAt","desc"));return(await Ne(t)).docs.map(n=>({id:n.id,...n.data(),deletedAt:Le(n.data().deletedAt)}))}catch(t){return console.error("Error getting deleted transactions:",t),[]}},async getDeletedTransactionsByUser(t){try{const e=Ce(ye(Q,"deletedTransactions"),be("userId","==",t),ms("deletedAt","desc"));return(await Ne(e)).docs.map(r=>({id:r.id,...r.data(),deletedAt:Le(r.data().deletedAt)}))}catch(e){if(String((e==null?void 0:e.message)||"").includes("requires an index"))try{const r=Ce(ye(Q,"deletedTransactions"),be("userId","==",t));return(await Ne(r)).docs.map(o=>({id:o.id,...o.data(),deletedAt:Le(o.data().deletedAt)})).sort((o,a)=>{const l=(o.deletedAt instanceof Date?o.deletedAt:new Date(o.deletedAt)).getTime();return(a.deletedAt instanceof Date?a.deletedAt:new Date(a.deletedAt)).getTime()-l})}catch(r){return console.error("Fallback error getting deleted transactions by user:",r),[]}return console.error("Error getting deleted transactions by user:",e),[]}},async saveDeletedTransaction(t){var e;try{if(console.log("      Firebase:",t.id),!t.userId)throw new Error("     ");if(!t.originalTransactionId)throw new Error("   ");const n=t.reference??t.transactionReference??((e=t.receipt)==null?void 0:e.reference),r={...t,deletedAt:Ae(),userId:t.userId,originalTransactionId:t.originalTransactionId,type:t.type||"unknown",amount:t.amount||0,status:t.status||"deleted",...n?{reference:n}:{}};console.log("    :",r);let s=3,i;for(;s>0;)try{const o=await Ki(ye(Q,"deletedTransactions"),r);console.log("       :",o.id);return}catch(o){i=o,s--,console.warn(`       : ${s}`,o),s>0&&await new Promise(a=>setTimeout(a,1e3))}throw console.error("        "),i}catch(n){throw console.error("     :",n),n instanceof Error&&(n.message.includes("network")?console.error("    -    "):n.message.includes("permission")?console.error("    -    Firestore"):n.message.includes("quota")&&console.error("     -    Firebase")),n}},async permanentlyDeleteTransaction(t,e){try{const n=Ce(ye(Q,"deletedTransactions"),be("originalTransactionId","==",t),be("userId","==",e)),s=(await Ne(n)).docs.map(i=>Mn(i.ref));await Promise.all(s),console.log("     Firebase:",t);try{const i=Ce(ye(Q,"userTransactions"),be("userId","==",e)),a=(await Ne(i)).docs.filter(l=>{var d,h;const c=l.data();return l.id===t||c.id===t||c.transactionId===t||c.originalTransactionId===t||((d=c.receipt)==null?void 0:d.id)===t||((h=c.receipt)==null?void 0:h.transactionId)===t});a.length>0&&(console.log(`  ${a.length}   userTransactions`),await Promise.all(a.map(l=>Mn(l.ref))))}catch(i){console.warn("   userTransactions   :",i)}try{const i=ve(Q,"transactions",t);(await St(i)).exists()&&(console.log("     transactions  "),await Mn(i));const a=Ce(ye(Q,"transactions"),be("transactionId","==",t)),l=await Ne(a);l.empty||(console.log(`  ${l.size}   transactions  transactionId`),await Promise.all(l.docs.map(h=>Mn(h.ref))));const c=Ce(ye(Q,"transactions"),be("originalTransactionId","==",t)),d=await Ne(c);d.empty||(console.log(`  ${d.size}   transactions  originalTransactionId`),await Promise.all(d.docs.map(h=>Mn(h.ref))))}catch(i){console.warn("    transactions   :",i)}}catch(n){throw console.error("Error permanently deleting transaction:",n),n}}},Fz={async add(t){return(await Ki(ye(Q,"daily_reports_archive"),{userId:t.userId,reportDate:t.reportDate,totalTransactions:t.totalTransactions,totalAmount:t.totalAmount,totalWithdrawn:t.totalWithdrawn,totalSent:t.totalSent,profit:t.profit??null,walletId:t.walletId??null,createdAt:Ae()})).id},async getByUser(t,e=50){try{const n=Ce(ye(Q,"daily_reports_archive"),be("userId","==",t),sa(e)),s=(await Ne(n)).docs.map(i=>({id:i.id,userId:String(i.data().userId),reportDate:String(i.data().reportDate),totalTransactions:Number(i.data().totalTransactions||0),totalAmount:Number(i.data().totalAmount||0),totalWithdrawn:Number(i.data().totalWithdrawn||0),totalSent:Number(i.data().totalSent||0),profit:i.data().profit!==void 0?Number(i.data().profit):void 0,walletId:i.data().walletId??null,createdAt:Le(i.data().createdAt)}));return s.sort((i,o)=>i.reportDate<o.reportDate?1:-1),s}catch(n){throw console.error("Error loading daily reports archive:",n),n}},async deleteOlderThan(t,e=10){try{const n=new Date;n.setDate(n.getDate()-e);const r=Ce(ye(Q,"daily_reports_archive"),be("userId","==",t)),s=await Ne(r);let i=0;for(const o of s.docs){const a=Le(o.data().createdAt);a&&a.getTime()<n.getTime()&&(await Mn(o.ref),i++)}return i>0&&console.log(`   ${i}      ${e}   ${t}`),i}catch(n){throw console.error("Error deleting old daily reports archive:",n),n}},async trimToMaxCount(t,e=10){try{const n=Ce(ye(Q,"daily_reports_archive"),be("userId","==",t)),s=(await Ne(n)).docs.map(o=>({ref:o.ref,reportDate:String(o.data().reportDate||""),createdAt:Le(o.data().createdAt)}));if(s.sort((o,a)=>{var d,h;if(o.reportDate&&a.reportDate)return o.reportDate<a.reportDate?1:-1;const l=((d=o.createdAt)==null?void 0:d.getTime())??0;return(((h=a.createdAt)==null?void 0:h.getTime())??0)-l}),s.length<=e)return 0;const i=s.slice(e);for(const o of i)await Mn(o.ref);return console.log(`     ${t}  ${e}   ${i.length}`),i.length}catch(n){throw console.error("Error trimming daily reports archive to max count:",n),n}}},AD={async getUserData(t){try{console.log("     :",{userId:t});const e=ve(Q,"users",t),n=await St(e);if(n.exists()){const r=n.data();return console.log("     :",r),{...r,createdAt:Le(r.createdAt),updatedAt:Le(r.updatedAt)}}else{console.log("       ");const r={walletBalances:{},createdAt:new Date,updatedAt:new Date};return await this.saveUserData(t,r),console.log("     "),r}}catch(e){return console.error("      :",e),{walletBalances:{},createdAt:new Date,updatedAt:new Date}}},async saveUserData(t,e){try{const n=ve(Q,"users",t),r=Yu(e);await Wi(n,{...r||{},updatedAt:Ae()},{merge:!0})}catch(n){throw console.error("Error saving user data:",n),n}},async updateUserData(t,e){try{console.log("      Firebase:",{userId:t,data:e});const n=ve(Q,"users",t),r=Object.fromEntries(Object.entries(e).filter(([l,c])=>c!==void 0)),s=Yu(r);let i={};try{const l=await St(n);i=l.exists()?l.data():{},console.log("  :",i)}catch(l){console.warn("         :",l)}const o={...i,...s,updatedAt:Ae()};console.log("   :",o);let a=3;for(;a>0;)try{await Wi(n,o,{merge:!0}),console.log("     ");return}catch(l){if(a--,console.warn(`     : ${a}`,l),a===0)throw l;await new Promise(c=>setTimeout(c,1e3))}}catch(n){throw console.error("     :",n),n instanceof Error&&(n.message.includes("network")?console.error("    -    "):n.message.includes("permission")?console.error("    -    Firestore"):n.message.includes("quota")&&console.error("     -    Firebase")),n}},async getUserWallets(t){try{const e=await this.getUserData(t);return(e==null?void 0:e.wallets)||[]}catch(e){return console.error("Error getting user wallets:",e),[]}},async getUserTransactions(t){try{const e=Ce(ye(Q,"userTransactions"),be("userId","==",t));return(await Ne(e)).docs.map(s=>({id:s.id,...s.data(),createdAt:Le(s.data().createdAt)})).filter(s=>(s==null?void 0:s.status)!=="cancelled"&&!(s!=null&&s.isDeleted)).sort((s,i)=>{const o=s.createdAt?new Date(s.createdAt).getTime():0;return(i.createdAt?new Date(i.createdAt).getTime():0)-o})}catch(e){console.error("Error getting user transactions:",e);const n=(e==null?void 0:e.code)||"";if(n==="permission-denied"||n==="unauthenticated")throw e;return[]}},async saveUserTransaction(t,e){try{const n=Object.fromEntries(Object.entries(e??{}).filter(([s,i])=>i!==void 0));try{const s=n.reference;if(s){const a=Ce(ye(Q,"deletedTransactions"),be("userId","==",t),be("reference","==",s));if(!(await Ne(a)).empty)return console.log("          ."),"skip-deleted"}const i=Ce(ye(Q,"deletedTransactions"),be("userId","==",t),ms("deletedAt","desc"),sa(20)),o=await Ne(i);if(!o.empty){const a=n.senderMsisdn||n.senderPhone||n.sender_msisdn,l=n.receiverMsisdn||n.receiverPhone||n.receiver_msisdn,c=Number(n.amount||0),d=n.createdAt?new Date(String(n.createdAt)):new Date,h=10*60*1e3;if(o.docs.find(f=>{const v=f.data(),y=v.senderMsisdn||v.senderPhone||v.sender_msisdn,E=v.receiverMsisdn||v.receiverPhone||v.receiver_msisdn,w=Number(v.amount||0),_=v.createdAt?new Date(String(v.createdAt)):d;return Math.abs(_.getTime()-d.getTime())<=h&&w===c&&y===a&&E===l}))return console.log("        ."),"skip-deleted"}}catch(s){console.warn("           :",s)}try{const s=Ce(ye(Q,"userTransactions"),be("userId","==",t));if(n.transactionId){const f=Ce(ye(Q,"userTransactions"),be("userId","==",t),be("transactionId","==",n.transactionId)),v=await Ne(f);if(!v.empty){const y=v.docs[0];return await st(ve(Q,"userTransactions",y.id),{...n,uploadedAt:Ae()}),y.id}}if(n.reference){const f=Ce(ye(Q,"userTransactions"),be("userId","==",t),be("reference","==",n.reference)),v=await Ne(f);if(!v.empty){const y=v.docs[0];return await st(ve(Q,"userTransactions",y.id),{...n,uploadedAt:Ae()}),y.id}}const i=Ce(ye(Q,"userTransactions"),be("userId","==",t),ms("createdAt","desc"),sa(20)),o=await Ne(i),a=n.senderMsisdn||n.senderPhone||n.sender_msisdn,l=n.receiverMsisdn||n.receiverPhone||n.receiver_msisdn,c=Number(n.amount||0),d=n.createdAt?new Date(String(n.createdAt)):new Date,h=5*60*1e3,p=o.docs.find(f=>{const v=f.data(),y=v.senderMsisdn||v.senderPhone||v.sender_msisdn,E=v.receiverMsisdn||v.receiverPhone||v.receiver_msisdn,w=Number(v.amount||0),_=Le(v.createdAt);return Math.abs(_.getTime()-d.getTime())<=h&&w===c&&y===a&&E===l});if(p)return await st(ve(Q,"userTransactions",p.id),{...n,uploadedAt:Ae()}),p.id}catch(s){console.warn("      saveUserTransaction  :",s)}return(await Ki(ye(Q,"userTransactions"),{...n,userId:t,createdAt:n.createdAt?n.createdAt instanceof Date?n.createdAt:new Date(String(n.createdAt)):Ae(),uploadedAt:Ae()})).id}catch(n){throw console.error("Error saving user transaction:",n),n}},async removeUserTransaction(t,e){try{console.log("     userTransactions:",{userId:t,transactionId:e});const n=Ce(ye(Q,"userTransactions"),be("userId","==",t)),r=await Ne(n);console.log(`    ${r.docs.length}  `);const s=r.docs.filter(i=>{var d,h;const o=i.data(),a=i.id,c=[o.id===e,o.transactionId===e,a===e,o.originalTransactionId===e,((d=o.receipt)==null?void 0:d.transactionId)===e,((h=o.receipt)==null?void 0:h.id)===e].some(p=>p===!0);return c&&console.log("     :",{docId:a,dataId:o.id,transactionId:o.transactionId,originalTransactionId:o.originalTransactionId,searchingFor:e}),c});if(s.length>0){console.log(`   ${s.length}    `);const i=s.map(async o=>{console.log("   :",o.id),await Mn(o.ref)});await Promise.all(i),console.log("        userTransactions:",e);try{const o=ve(Q,"transactions",e);if((await St(o)).exists())console.log("     transactions   "),await Mn(o);else{const l=Ce(ye(Q,"transactions"),be("transactionId","==",e)),c=await Ne(l);c.empty||(console.log(`   ${c.size}   transactions  transactionId `),await Promise.all(c.docs.map(p=>Mn(p.ref))));const d=Ce(ye(Q,"transactions"),be("originalTransactionId","==",e)),h=await Ne(d);h.empty||(console.log(`   ${h.size}   transactions  originalTransactionId `),await Promise.all(h.docs.map(p=>Mn(p.ref))))}}catch(o){console.warn("      transactions   :",o)}return}console.log("       userTransactions (   ):",e)}catch(n){throw console.error("      userTransactions:",n),n}}},H8=Object.freeze(Object.defineProperty({__proto__:null,auditLogService:Mz,dailyReportsArchiveService:Fz,merchantWalletService:Lz,profileService:Zh,profileServiceExtra:SD,referralService:kv,sanitizeFirestoreData:Yu,transactionService:bD,userDataService:AD},Symbol.toStringTag,{value:"Module"}));var Uz=(t=>(t.MONTHLY="monthly",t.QUARTERLY="quarterly",t.YEARLY="yearly",t.LIFETIME="lifetime",t.ZERO="zero",t))(Uz||{});const jz=(t,e=new Date)=>{const n=new Date(e);switch(t){case"monthly":{const r=new Date(n);return r.setDate(r.getDate()+30),r}case"quarterly":{const r=new Date(n);return r.setDate(r.getDate()+90),r}case"yearly":{const r=new Date(n);return r.setDate(r.getDate()+365),r}case"lifetime":return null;case"zero":return null;default:return null}},ef=t=>{var s,i;if(!t||!t.isActive)return!1;if(t.planType==="lifetime")return!0;if(!t.endDate){const o=new Date,a=t.activatedAt,l=(s=a==null?void 0:a.toDate)!=null&&s.call(a)?a.toDate():t.activatedAt?new Date(t.activatedAt):null;return l&&o.getTime()-l.getTime()<4*60*60*1e3,!0}const e=new Date,n=t.endDate,r=n!=null&&n.toDate?n.toDate():new Date(n);if(!r||isNaN(r.getTime())){const o=t.activatedAt,a=(i=o==null?void 0:o.toDate)!=null&&i.call(o)?o.toDate():t.activatedAt?new Date(t.activatedAt):null;return a&&e.getTime()-a.getTime()<4*60*60*1e3,!0}return e<=r},Bz=t=>{if(!t||!t.isActive)return null;if(t.planType==="lifetime")return-1;if(!t.endDate)return null;const e=new Date,n=t.endDate,r=n!=null&&n.toDate?n.toDate():new Date(n);if(!r||isNaN(r.getTime()))return null;const s=r.getTime()-e.getTime(),i=Math.ceil(s/(1e3*60*60*24));return i>0?i:0},W8=async(t,e,n,r)=>{try{const s=new Date,i=jz(e,s),o={planType:e,startDate:s,endDate:i,isActive:!0,activatedBy:n,activatedAt:s};console.log(" Activating subscription for user:",{userId:t,planType:e,adminId:n,subscriptionData:o});const a=ve(Q,"users",t);if(await st(a,{subscription:o,isActive:!0,approved:!0,isOnFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,updatedAt:new Date}),console.log(" Subscription data updated in Firestore"),typeof window<"u"){const l=new CustomEvent("subscriptionActivated",{detail:{userId:t,planType:e,timestamp:new Date().toISOString()}});window.dispatchEvent(l),console.log(" Subscription activation event dispatched:",{userId:t,planType:e});const c=new CustomEvent("userSubscriptionUpdated",{detail:{userId:t,planType:e,isActive:!0,timestamp:new Date().toISOString()}});window.dispatchEvent(c),console.log(" Global subscription update event dispatched")}console.log(`    ${e}  ${t}`)}catch(s){throw console.error("    :",s),new Error("   ")}},K8=async t=>{try{const e=ve(Q,"users",t);await st(e,{"subscription.isActive":!1,isActive:!1,isOnFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,updatedAt:new Date}),console.log(`      ${t}`)}catch(e){throw console.error("     :",e),new Error("    ")}},G8=async t=>{try{const e=ve(Q,"users",t),n=await St(e);return n.exists()&&n.data().subscription||null}catch(e){return console.error("      :",e),null}},Q8=t=>{switch(t){case"monthly":return"";case"quarterly":return" ";case"yearly":return"";case"lifetime":return" ";case"zero":return"";default:return" "}},Y8=t=>{if(!t)return"text-gray-500";if(!t.isActive)return"text-red-500";if(t.planType==="lifetime")return"text-green-600";const e=Bz(t);return e===null||e<=0?"text-red-500":e<=7?"text-yellow-500":"text-green-500"},X8=t=>t?(t instanceof Date?t:new Date(t)).toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric"}):" ";class dE{static async startFreeTrialFromAdmin(e){try{const n=ve(Q,"users",e),r=await St(n);if(!r.exists())return{success:!1,message:"  "};if(r.data().hasUsedFreeTrial)return{success:!1,message:"       "};const i=new Date,o=await this.getTrialDurationHours(),a=new Date(i.getTime()+o*60*60*1e3);return await st(n,{hasUsedFreeTrial:!0,freeTrialStartDate:i,freeTrialEndDate:a,isOnFreeTrial:!0,isActive:!0,approved:!0,updatedAt:Ae()}),{success:!0,message:`     ${o} ${o>=3&&o<=10?"":o===2?"":""}`}}catch(n){return console.error("Error starting admin free trial:",n),{success:!1,message:"     "}}}static async startFreeTrial(e){try{const n=ve(Q,"users",e),r=await St(n);if(!r.exists())return{success:!1,message:"  "};if(r.data().hasUsedFreeTrial)return{success:!1,message:"     "};const i=new Date,o=await this.getTrialDurationHours(),a=new Date(i.getTime()+o*60*60*1e3);return await st(n,{hasUsedFreeTrial:!0,freeTrialStartDate:i,freeTrialEndDate:a,isOnFreeTrial:!0,isActive:!0,approved:!0,updatedAt:Ae()}),{success:!0,message:`     ${o} ${o>=3&&o<=10?"":o===2?"":""}`}}catch(n){return console.error("    :",n),{success:!1,message:"     "}}}static async checkTrialValidity(e){var n,r,s,i;try{const o=ve(Q,"users",e),a=await St(o);if(!a.exists())return{isValid:!1,isExpired:!1,hoursRemaining:0,hasUsedTrial:!1};const l=a.data(),c=l.hasUsedFreeTrial||!1,d=l.isOnFreeTrial||!1;let h=(r=(n=l.freeTrialEndDate)==null?void 0:n.toDate)!=null&&r.call(n)?l.freeTrialEndDate.toDate():l.freeTrialEndDate?new Date(l.freeTrialEndDate):null;const p=(i=(s=l.freeTrialStartDate)==null?void 0:s.toDate)!=null&&i.call(s)?l.freeTrialStartDate.toDate():l.freeTrialStartDate?new Date(l.freeTrialStartDate):null;if(!c||!d||!h)return{isValid:!1,isExpired:!1,hoursRemaining:0,hasUsedTrial:c};const f=new Date;if(f>h){const w=ef(l.subscription);return await st(o,{isOnFreeTrial:!1,isActive:w,approved:w,updatedAt:Ae()}),!w&&typeof window<"u"&&setTimeout(()=>{window.location.href="/user/pending-approval"},1e3),{isValid:!1,isExpired:!0,hoursRemaining:0,hasUsedTrial:c}}try{const w=await this.getTrialDurationHours();if(p&&w&&Number.isFinite(w)&&Math.round((h.getTime()-p.getTime())/36e5)<w){const I=new Date(p.getTime()+w*60*60*1e3);I.getTime()>h.getTime()&&(await st(o,{freeTrialEndDate:I,updatedAt:Ae()}),h=I)}}catch(w){console.warn("checkTrialValidity: failed to auto-extend to configured hours",w)}const y=h.getTime()-f.getTime();return{isValid:!0,isExpired:!1,hoursRemaining:Math.ceil(y/(1e3*3600)),hasUsedTrial:c}}catch(o){return console.error("      :",o),{isValid:!1,isExpired:!1,hoursRemaining:0,hasUsedTrial:!1}}}static async getTrialData(e){var n,r;try{const s=ve(Q,"users",e),i=await St(s);if(!i.exists())return{hasUsedFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,isOnFreeTrial:!1};const o=i.data();return{hasUsedFreeTrial:o.hasUsedFreeTrial||!1,freeTrialStartDate:((n=o.freeTrialStartDate)==null?void 0:n.toDate())||null,freeTrialEndDate:((r=o.freeTrialEndDate)==null?void 0:r.toDate())||null,isOnFreeTrial:o.isOnFreeTrial||!1}}catch(s){return console.error("      :",s),{hasUsedFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,isOnFreeTrial:!1}}}static async getTrialDurationHours(){try{const e=ve(Q,"config","freeTrial"),n=await St(e);if(n.exists()){const r=n.data(),s=typeof(r==null?void 0:r.durationHours)=="number"?r.durationHours:this.TRIAL_DURATION_HOURS;return!Number.isFinite(s)||s<1?this.TRIAL_DURATION_HOURS:s}return this.TRIAL_DURATION_HOURS}catch(e){return console.warn("getTrialDurationHours: fallback to default due to error",e),this.TRIAL_DURATION_HOURS}}static async updateTrialDurationHours(e){try{if(!Number.isFinite(e)||e<1)return{success:!1,message:"       "};const n=ve(Q,"config","freeTrial");return await Wi(n,{durationHours:e,updatedAt:Ae()},{merge:!0}),{success:!0,message:"     "}}catch(n){return console.error("Error updating trial duration hours:",n),{success:!1,message:"    "}}}static async resetActiveTrialToCurrentDuration(e){var n,r;try{const s=ve(Q,"users",e),i=await St(s);if(!i.exists())return{success:!1,message:"  "};const o=i.data(),a=!!o.isOnFreeTrial,l=(r=(n=o.freeTrialStartDate)==null?void 0:n.toDate)!=null&&r.call(n)?o.freeTrialStartDate.toDate():o.freeTrialStartDate?new Date(o.freeTrialStartDate):null;if(!a||!l)return{success:!1,message:"     "};const c=await this.getTrialDurationHours(),d=new Date(l.getTime()+c*60*60*1e3);return await st(s,{freeTrialEndDate:d,updatedAt:Ae()}),{success:!0,message:`     ${c} ${c>=3&&c<=10?"":c===2?"":""}`}}catch(s){return console.error("Error resetting active trial duration:",s),{success:!1,message:"    "}}}}JE(dE,"TRIAL_DURATION_HOURS",24);const J8=Object.freeze(Object.defineProperty({__proto__:null,FreeTrialService:dE},Symbol.toStringTag,{value:"Module"})),$z={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_DEV_MODE:"true",VITE_ENABLE_OFFLINE_PERSISTENCE:"false",VITE_FIREBASE_API_KEY:"AIzaSyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s",VITE_FIREBASE_APP_ID:"1:483702062341:web:b1ff06ad175cb7ae428b6c",VITE_FIREBASE_AUTH_DOMAIN:"voda-c6abd.firebaseapp.com",VITE_FIREBASE_AUTH_EMULATOR_URL:"http://localhost:9099",VITE_FIREBASE_FIRESTORE_EMULATOR_HOST:"localhost:8080",VITE_FIREBASE_FUNCTIONS_EMULATOR_HOST:"localhost:5001",VITE_FIREBASE_MEASUREMENT_ID:"G-CV6QGH7G7P",VITE_FIREBASE_MESSAGING_SENDER_ID:"483702062341",VITE_FIREBASE_PROJECT_ID:"voda-c6abd",VITE_FIREBASE_STORAGE_BUCKET:"voda-c6abd.appspot.com",VITE_FORCE_HASH_ROUTER:"true",VITE_SHOP_ID:"demo-shop-001",VITE_SHOP_NAME:"   ",VITE_SHOW_ENV_BANNER:"true",VITE_USE_EMULATORS:"false",VITE_USE_FIREBASE_EMULATOR:"false"},xD=x.createContext(void 0);function Gi(){const t=x.useContext(xD);if(t===void 0)throw new Error("useFirebaseAuth must be used within a FirebaseAuthProvider");return t}const zz=({children:t})=>{const[e,n]=x.useState(null),[r,s]=x.useState(null),[i,o]=x.useState(null),[a,l]=x.useState(!1),[c,d]=x.useState(!0),h=async S=>{var T,b,k,P,N,C,q,Z,ie,G,F,U,Y,de,ne,ce;try{const le=ve(Q,"profiles",S);let we=!1;try{const ae=await Xk(le);if(ae.exists()){const me=ae.data(),Se={userId:ae.id,shopId:me.shopId,role:me.role,fullName:me.fullName,phone:me.phone,shopName:me.shopName||null,approved:me.approved,avatarId:me.avatarId,bridgeLink:me.bridgeLink||null,bridgeDeviceId:me.bridgeDeviceId||null,showWithdrawNote:me.showWithdrawNote!==void 0?!!me.showWithdrawNote:!0,isReceiptNoteEnabled:me.isReceiptNoteEnabled!==void 0?!!me.isReceiptNoteEnabled:!0,createdAt:((b=(T=me.createdAt)==null?void 0:T.toDate)==null?void 0:b.call(T))||new Date,updatedAt:((P=(k=me.updatedAt)==null?void 0:k.toDate)==null?void 0:P.call(k))||new Date,trialStarted:me.trialStarted||!1,trialStartDate:(C=(N=me.trialStartDate)==null?void 0:N.toDate)==null?void 0:C.call(N),trialEndDate:(Z=(q=me.trialEndDate)==null?void 0:q.toDate)==null?void 0:Z.call(q),trialExpired:me.trialExpired||!1};s(Se),we=!0,d(!1)}}catch(ae){console.log("Cache profile not available:",(ae==null?void 0:ae.code)||ae)}try{if(!we){const ae=localStorage.getItem(`profile_cache_${S}`);if(ae){const me=JSON.parse(ae);s(me),we=!0,d(!1)}}}catch{}if(!we)for(let ae=0;ae<3;ae++)try{const me=await St(le);if(me.exists()){const Se=me.data(),Et={userId:me.id,shopId:Se.shopId,role:Se.role,fullName:Se.fullName,phone:Se.phone,shopName:Se.shopName||null,approved:Se.approved,avatarId:Se.avatarId,bridgeLink:Se.bridgeLink||null,bridgeDeviceId:Se.bridgeDeviceId||null,showWithdrawNote:Se.showWithdrawNote!==void 0?!!Se.showWithdrawNote:!0,isReceiptNoteEnabled:Se.isReceiptNoteEnabled!==void 0?!!Se.isReceiptNoteEnabled:!0,createdAt:((G=(ie=Se.createdAt)==null?void 0:ie.toDate)==null?void 0:G.call(ie))||new Date,updatedAt:((U=(F=Se.updatedAt)==null?void 0:F.toDate)==null?void 0:U.call(F))||new Date,trialStarted:Se.trialStarted||!1,trialStartDate:(de=(Y=Se.trialStartDate)==null?void 0:Y.toDate)==null?void 0:de.call(Y),trialEndDate:(ce=(ne=Se.trialEndDate)==null?void 0:ne.toDate)==null?void 0:ce.call(ne),trialExpired:Se.trialExpired||!1};s(Et);try{localStorage.setItem(`profile_cache_${me.id}`,JSON.stringify(Et))}catch{}we=!0,d(!1);break}}catch{}return lp(le,async ae=>{var me,Se,Et,Nt,Kt,Bt,gn,Pr;if(ae.exists()){const ge=ae.data(),Gn={userId:ae.id,shopId:ge.shopId,role:ge.role,fullName:ge.fullName,phone:ge.phone,shopName:ge.shopName||null,approved:ge.approved,avatarId:ge.avatarId,bridgeLink:ge.bridgeLink||null,bridgeDeviceId:ge.bridgeDeviceId||null,showWithdrawNote:ge.showWithdrawNote!==void 0?!!ge.showWithdrawNote:!0,isReceiptNoteEnabled:ge.isReceiptNoteEnabled!==void 0?!!ge.isReceiptNoteEnabled:!0,createdAt:((Se=(me=ge.createdAt)==null?void 0:me.toDate)==null?void 0:Se.call(me))||new Date,updatedAt:((Nt=(Et=ge.updatedAt)==null?void 0:Et.toDate)==null?void 0:Nt.call(Et))||new Date,trialStarted:ge.trialStarted||!1,trialStartDate:(Bt=(Kt=ge.trialStartDate)==null?void 0:Kt.toDate)==null?void 0:Bt.call(Kt),trialEndDate:(Pr=(gn=ge.trialEndDate)==null?void 0:gn.toDate)==null?void 0:Pr.call(gn),trialExpired:ge.trialExpired||!1};s(Gn);try{localStorage.setItem(`profile_cache_${ae.id}`,JSON.stringify(Gn))}catch{}we||(we=!0,d(!1))}else if(!we)try{const ge=await SD.getByUserId(S);if(ge){const Gn={userId:S,shopId:ge.shopId,role:ge.role||"user",fullName:ge.fullName||null,phone:ge.phone||null,shopName:ge.shopName||null,approved:ge.approved??!1,avatarId:ge.avatarId||void 0,bridgeLink:ge.bridgeLink||null,bridgeDeviceId:ge.bridgeDeviceId||null,createdAt:Ae(),updatedAt:Ae()};await Wi(ve(Q,"profiles",S),Gn,{merge:!0}),s({...ge,userId:S,createdAt:ge.createdAt||new Date,updatedAt:ge.updatedAt||new Date})}else await f(S)}catch(ge){console.error("Profile migration/create error:",ge)}finally{we=!0,d(!1)}},ae=>{console.error("Profile listener error:",ae);try{d(!1)}catch{}})}catch(le){return console.error("Error setting up profile listener:",le),await f(S),d(!1),()=>{}}},p=async S=>{try{const T=ve(Q,"users",S.uid);(await St(T)).exists()?(await st(T,{lastLogin:Ae(),updatedAt:Ae()}),console.log(" ensureAdminUserDoc: Updated lastLogin for",S.uid)):(await Wi(T,{email:S.email||"",displayName:S.displayName||" ",phone:null,shopName:null,isActive:!1,createdAt:Ae(),updatedAt:Ae(),lastLogin:Ae()},{merge:!0}),console.log(" ensureAdminUserDoc: Created users doc for",S.uid))}catch(T){console.error(" ensureAdminUserDoc error:",T)}},f=async(S,T,b,k,P)=>{var N,C;try{console.log("Creating default profile for user:",S);const q=kv.generateReferralCode(S);let Z=null;const ie={userId:S,shopId:"default-shop",role:"user",fullName:T||" ",phone:b||null,shopName:k||null,approved:!1,referralCode:q,referredBy:P||null,bridgeLink:null,bridgeDeviceId:null,showWithdrawNote:!0,isReceiptNoteEnabled:!0,createdAt:new Date,updatedAt:new Date};s(ie),console.log("Created temporary profile:",ie);try{const{doc:G,setDoc:F,serverTimestamp:U}=await Oe(async()=>{const{doc:ce,setDoc:le,serverTimestamp:we}=await Promise.resolve().then(()=>kg);return{doc:ce,setDoc:le,serverTimestamp:we}},void 0,import.meta.url),{db:Y}=await Oe(async()=>{const{db:ce}=await Promise.resolve().then(()=>Lg);return{db:ce}},void 0,import.meta.url),de={email:((N=Yn.currentUser)==null?void 0:N.email)||"",displayName:T||" ",phone:b||null,shopName:k||null,isActive:!1,referralCode:q,referredBy:P||null,createdAt:U(),lastLogin:null,updatedAt:U()};if(console.log("Attempting to add user to admin collection with data:",de),await F(G(Y,"users",S),de,{merge:!0}),console.log(" User successfully added to admin collection:",de),P)try{const{query:ce,collection:le,where:we,limit:Qe,getDocs:ae}=await Oe(async()=>{const{query:Nt,collection:Kt,where:Bt,limit:gn,getDocs:Pr}=await Promise.resolve().then(()=>kg);return{query:Nt,collection:Kt,where:Bt,limit:gn,getDocs:Pr}},void 0,import.meta.url),{db:me}=await Oe(async()=>{const{db:Nt}=await Promise.resolve().then(()=>Lg);return{db:Nt}},void 0,import.meta.url),Se=ce(le(me,"users"),we("referralCode","==",P),Qe(1)),Et=await ae(Se);Et.empty?console.log(" Referral code not found in users collection:",P):(Z=Et.docs[0].id,await kv.create({referrerId:Z,referredUserId:S,referredUserEmail:((C=Yn.currentUser)==null?void 0:C.email)||"",referralCode:P,status:"completed"}),console.log(" Referral record created successfully for referrer:",Z))}catch(ce){console.error(" Error creating referral record:",ce)}const ne=await St(G(Y,"users",S));ne.exists()?console.log(" User document verified in Firestore:",ne.data()):console.log(" User document not found after creation")}catch(G){console.error(" Error adding user to admin collection:",G)}try{const{addDoc:G,collection:F,serverTimestamp:U}=await Oe(async()=>{const{addDoc:le,collection:we,serverTimestamp:Qe}=await Promise.resolve().then(()=>kg);return{addDoc:le,collection:we,serverTimestamp:Qe}},void 0,import.meta.url),{db:Y}=await Oe(async()=>{const{db:le}=await Promise.resolve().then(()=>Lg);return{db:le}},void 0,import.meta.url),ne=(await G(F(Y,"shops"),{name:k||" ",ownerId:S,createdAt:U(),updatedAt:U(),isActive:!0})).id;await Zh.create({userId:S,shopId:ne,role:"user",fullName:" ",phone:null});try{await Zh.update(S,{referralCode:q,referredBy:Z||null,showWithdrawNote:!0,isReceiptNoteEnabled:!0})}catch(le){console.warn(" Failed to update profile with referral fields:",le)}const ce=await Zh.getById(S);ce&&(s(ce),console.log("Updated with Firebase profile:",ce))}catch(G){console.error("Error creating profile:",G),console.log("Using local profile - Firebase unavailable")}}catch(q){console.error("Error creating default profile:",q)}};x.useEffect(()=>{console.log(" Setting up auth state listener"),d(!0);const S=setTimeout(()=>{console.warn(" Global auth timeout reached, forcing loading to false"),d(!1)},2e4);localStorage.getItem("demoProfile")&&(console.log(" Cleaning up demo profile from localStorage"),localStorage.removeItem("demoProfile"));const T=localStorage.getItem("demoUser"),b=localStorage.getItem("demoProfile");if(T&&b){console.log(" Found demo user in localStorage");try{const P=JSON.parse(T),N=JSON.parse(b);n(P),s(N),clearTimeout(S),d(!1);return}catch(P){console.error("Error parsing demo user data:",P),localStorage.removeItem("demoUser"),localStorage.removeItem("demoProfile")}}const k=a3(Yn,async P=>{console.log(" Auth state changed:",{uid:P==null?void 0:P.uid,email:P==null?void 0:P.email,emailVerified:P==null?void 0:P.emailVerified,timestamp:new Date().toISOString()}),n(P),P?(console.log(" User authenticated, starting profile hydration for:",P.uid),h(P.uid),_(),p(P)):(console.log(" User not authenticated, clearing profile"),s(null),o(null),l(!1),d(!1)),clearTimeout(S)});return()=>{clearTimeout(S),k()}},[]);const v=async(S,T,b,k,P,N)=>{try{const C=(S||"").trim().toLowerCase(),q=(T||"").trim();console.log(" Attempting to sign up user:",C);const Z=await vI(Yn,C,q);console.log(" Sign up successful:",Z.user.uid),await f(Z.user.uid,b,k,P,N),await p(Z.user);try{await h(Z.user.uid),await _()}catch{}return{error:null}}catch(C){console.error(" Sign up error:",C);let q="    ";return C.code==="auth/email-already-in-use"?q="    ":C.code==="auth/weak-password"?q="   ":C.code==="auth/invalid-email"&&(q="   "),{error:{...C,message:q}}}},y=async(S,T)=>{const b=(S||"").trim().toLowerCase(),k=(T||"").trim();try{const P=F=>F.replace(/[\u200B\u200C\u200D\u200E\u200F\u061C]/g,""),N=F=>F.replace(/[-]/g,U=>String("0123456789"["".indexOf(U)])).replace(/[-]/g,U=>String("0123456789"["".indexOf(U)])),C=F=>F.replace(/[0-9]/g,U=>""[Number(U)]),q=F=>N(P(F));if(console.log(" Attempting to sign in user:",b),b==="test@example.com"&&k==="123456"){console.log(" Demo user login detected");const F={uid:"demo-user-123",email:"test@example.com",displayName:" ",emailVerified:!0},U={userId:"demo-user-123",shopId:"demo-shop",role:"user",fullName:" ",phone:"01000000000",approved:!0,createdAt:new Date,updatedAt:new Date};return localStorage.setItem("demoUser",JSON.stringify(F)),localStorage.setItem("demoProfile",JSON.stringify(U)),n(F),s(U),d(!1),console.log(" Demo user signed in successfully"),{error:null}}let Z;const ie=[q(k),P(k),C(P(k))];let G=null;for(const F of ie)try{F!==k&&console.log(" Trying password variant"),Z=await i3(Yn,b,F);break}catch(U){if(G=U,(U==null?void 0:U.code)!=="auth/wrong-password"&&(U==null?void 0:U.code)!=="auth/invalid-credential")throw U}if(!Z)throw G||new Error("auth/invalid-credential");console.log(" Sign in successful:",Z.user.uid);try{if((await St(ve(Q,"deletedUsers",Z.user.uid))).exists())return console.log(" User is deleted, signing out"),await _I(Yn),{error:{code:"auth/user-deleted",message:"      .    ."}}}catch(F){console.error("Error checking deleted users:",F)}await p(Z.user);try{await h(Z.user.uid),await _()}catch{}return{error:null}}catch(P){if(console.error(" Sign in error:",P),b==="test@example.com"&&P.code==="auth/user-not-found"){console.log(" Creating test user...");try{const C=await vI(Yn,b,k);return console.log(" Test user created:",C.user.uid),await f(C.user.uid," ","01000000000"," "),{error:null}}catch(C){return console.error(" Error creating test user:",C),{error:C}}}let N="    ";return P.code==="auth/invalid-credential"?N="      ":P.code==="auth/user-not-found"?N="     ":P.code==="auth/wrong-password"?N="   ":P.code==="auth/too-many-requests"&&(N="      "),{error:{...P,message:N}}}},E=async()=>{try{localStorage.getItem("demoUser")?(console.log(" Signing out demo user"),localStorage.removeItem("demoUser"),localStorage.removeItem("demoProfile"),n(null),s(null),d(!1)):await _I(Yn);const b=(()=>{try{const k=typeof window<"u"?window:null,P=!!(k&&k.electronAPI)||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"),N=typeof window<"u"&&window.location.protocol==="file:",C=typeof window<"u"&&typeof window.location.hash=="string"&&window.location.hash.startsWith("#/");return P||N||C||typeof import.meta<"u"&&$z&&!0}catch{return!1}})()?"#/user/login":"/user/login";try{window.location.replace(b)}catch{window.location.href=b}}catch(S){console.error("Sign out error:",S)}},w=async S=>{try{return await s3(Yn,S),{error:null}}catch(T){console.error("Reset password error:",T);let b="        ";return T.code==="auth/user-not-found"?b="     ":T.code==="auth/invalid-email"&&(b="   "),{error:{...T,message:b}}}},_=async()=>{if(!e){console.log("No user found for subscription check"),o(null),l(!1);return}console.log("Checking subscription status for user:",e.uid);try{return lp(ve(Q,"users",e.uid),async T=>{var b,k,P,N,C,q,Z,ie;if(T.exists()){const G=T.data();o(G),console.log(" Subscription Data Details (Real-time):",{userId:e.uid,userEmail:e.email,subscription:G.subscription,subscriptionExists:!!G.subscription,planType:(b=G.subscription)==null?void 0:b.planType,isActive:(k=G.subscription)==null?void 0:k.isActive,startDate:(P=G.subscription)==null?void 0:P.startDate,endDate:(N=G.subscription)==null?void 0:N.endDate,activatedBy:(C=G.subscription)==null?void 0:C.activatedBy,activatedAt:(q=G.subscription)==null?void 0:q.activatedAt,isOnFreeTrial:G.isOnFreeTrial,freeTrialEndDate:G.freeTrialEndDate,branchPackageStatus:(Z=G==null?void 0:G.branchPackage)==null?void 0:Z.status});const F=((ie=G==null?void 0:G.branchPackage)==null?void 0:ie.status)==="active";let U=!1;if(F)console.log(" Branch package is active, granting access"),U=!0;else if(G.isOnFreeTrial){console.log(" User is on free trial, checking validity...");const Y=await dE.checkTrialValidity(e.uid);Y.isValid&&!Y.isExpired?(console.log(" Free trial is valid, granting access"),U=!0):Y.isExpired?(console.log(" Free trial has expired, checking regular subscription"),U=ef(G.subscription)):(console.log(" Free trial is not valid"),U=ef(G.subscription))}else U=ef(G.subscription);l(U),console.log(" Subscription Validation Result (Real-time):",{userId:e.uid,isValid:U,isOnFreeTrial:G.isOnFreeTrial,hasActiveBranchPackage:F,reason:F?"Branch package active":G.isOnFreeTrial?"Free trial active":G.subscription?G.subscription.isActive?G.subscription.planType==="lifetime"?"Lifetime plan":G.subscription.endDate?new Date>new Date(G.subscription.endDate)?"Expired":"Valid":"No end date":"Subscription not active":"No subscription data"})}},T=>{console.error(" Subscription listener error:",T)})}catch(S){console.error("Error setting up subscription listener:",S)}},V={user:e,profile:r,userSubscription:i,isSubscriptionActive:a,loading:c,signUp:v,signIn:y,signOut:E,resetPassword:w,updateUserProfile:async S=>{if(e)try{const T={updatedAt:Ae()};if(S.fullName!==void 0&&(T.fullName=S.fullName),S.phone!==void 0&&(T.phone=S.phone),S.bridgeLink!==void 0){const b=(S.bridgeLink||"").trim();T.bridgeLink=b.length?b:null}if(S.bridgeDeviceId!==void 0){const b=(S.bridgeDeviceId||"").trim();T.bridgeDeviceId=b.length?b:null}S.showWithdrawNote!==void 0&&(T.showWithdrawNote=!!S.showWithdrawNote),S.isReceiptNoteEnabled!==void 0&&(T.isReceiptNoteEnabled=!!S.isReceiptNoteEnabled),await st(ve(Q,"profiles",e.uid),T),await h(e.uid)}catch(T){console.error("Error updating user profile:",T)}},updateAvatarId:async S=>{if(e)try{await st(ve(Q,"profiles",e.uid),{avatarId:S,updatedAt:Ae()}),await h(e.uid)}catch(T){console.error("Error updating avatarId:",T)}},refreshProfile:async()=>{if(e)try{console.log("Refreshing profile for user:",e.uid),await h(e.uid),await _()}catch(S){console.error("Error refreshing profile:",S)}},checkSubscriptionStatus:_};return A.jsx(xD.Provider,{value:V,children:t})},wh=()=>{const[t,e]=x.useState(""),[n,r]=x.useState(""),[s,i]=x.useState(!1),[o,a]=x.useState(!1),{signIn:l}=Gi(),c=ld();x.useEffect(()=>{try{const f=typeof window<"u"?window.localStorage.getItem("cashy:lastEmail"):null;f&&e(f)}catch{}},[]);const d=async f=>{if(f.preventDefault(),o){It.info("     ...");return}if(typeof navigator<"u"&&navigator.onLine===!1){It.error("   .      .");return}const v=(t||"").trim().toLowerCase(),y=(n||"").trim();if(console.log("    :",{email:v,password:"***"}),!t||!n){It.error("   ");return}if(!/^\S+@\S+\.\S+$/.test(v)){It.error("    ");return}a(!0);try{console.log("  signIn...");const{error:E}=await l(v,y);if(console.log(" SignIn result:",{error:E}),E){console.error("    :",E);const w=E==null?void 0:E.code;w==="auth/user-not-found"?It.error("     "):w==="auth/wrong-password"?It.error("   "):w==="auth/invalid-credential"?It.error("      "):w==="auth/too-many-requests"?It.error("      "):It.error((E==null?void 0:E.message)||"    ")}else console.log("    !"),It.success("   !"),c("/user/dashboard")}catch(E){console.error("   :",E),It.error("   ")}finally{a(!1)}},h=f=>{if(o){f.preventDefault(),f.stopPropagation(),It.info("     ...");return}if(typeof navigator<"u"&&navigator.onLine===!1){f.preventDefault(),f.stopPropagation(),It.error("   .      .");return}t||It.error("   "),n||It.error("   ");const v=(t||"").trim().toLowerCase();v&&!/^\S+@\S+\.\S+$/.test(v)&&It.error("    ")},p=()=>{c("/user/forgot-password")};return x.useEffect(()=>{if(!(typeof window<"u"&&window.matchMedia&&window.matchMedia("(pointer: coarse)").matches))return;const f=document.documentElement,v=document.body,y=f.style.overflow,E=v.style.overflow,w=f.style.overscrollBehaviorY,_=v.style.overscrollBehaviorY;return f.style.overflow="hidden",v.style.overflow="hidden",f.style.overscrollBehaviorY="none",v.style.overscrollBehaviorY="none",()=>{f.style.overflow=y||"",v.style.overflow=E||"",f.style.overscrollBehaviorY=w||"",v.style.overscrollBehaviorY=_||""}},[]),A.jsxs("div",{className:"fixed inset-0 relative overscroll-y-none overflow-hidden flex items-center justify-center p-4 bg-fixed bg-no-repeat bg-cover",style:{backgroundImage:"var(--bg-purple-gradient)"},children:[A.jsx("div",{className:"pointer-events-none absolute inset-0 bg-[radial-gradient(ellipse_at_center,_rgba(168,85,247,0.18),_transparent_70%)]"}),A.jsxs("div",{className:"w-full max-w-md mt-16 md:mt-12 lg:mt-10",children:[A.jsxs("div",{className:"text-center mb-8",children:[A.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-r from-green-600 to-blue-600 rounded-full mb-4 shadow-2xl",children:A.jsx(qV,{className:"w-10 h-10 text-white"})}),A.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[A.jsx("div",{className:"h-8 w-8 bg-red-600 rounded-lg flex items-center justify-center shadow",children:A.jsx("span",{className:"text-white font-bold text-sm",children:""})}),A.jsxs("div",{className:"flex items-center gap-1",children:[A.jsx(BV,{className:"h-5 w-5 text-white"}),A.jsx("span",{className:"text-xl font-bold text-white",children:" "})]})]}),A.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"  "}),A.jsx("p",{className:"text-white/80",children:"    "})]}),A.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-8 shadow-2xl border border-white/20",children:[A.jsxs("form",{onSubmit:d,className:"space-y-6",children:[A.jsxs("div",{className:"space-y-2",children:[A.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-white",children:" "}),A.jsxs("div",{className:"relative",children:[A.jsx(yT,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/70 w-5 h-5"}),A.jsx(Gy,{id:"email",type:"email",placeholder:"  ",value:t,onChange:f=>{const v=f.target.value;e(v);try{window.localStorage.setItem("cashy:lastEmail",v)}catch{}},className:"pl-10 pr-4 py-3 rounded-lg bg-white/20 border-white/30 text-white placeholder:text-white/70 focus:ring-2 focus:ring-green-400",dir:"rtl",required:!0})]})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-white",children:" "}),A.jsxs("div",{className:"relative",children:[A.jsx(FV,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/70 w-5 h-5"}),A.jsx(Gy,{id:"password",type:s?"text":"password",placeholder:"  ",value:n,onChange:f=>r(f.target.value),className:"pl-10 pr-10 py-3 rounded-lg bg-white/20 border-white/30 text-white placeholder:text-white/70 focus:ring-2 focus:ring-green-400",autoComplete:"off",dir:"rtl",required:!0}),A.jsx("button",{type:"button",onClick:()=>i(!s),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-white/70 hover:text-white transition-colors",children:s?A.jsx(OV,{className:"w-5 h-5"}):A.jsx(VV,{className:"w-5 h-5"})})]})]}),A.jsx("div",{className:"flex justify-end",children:A.jsxs(FP,{type:"button",variant:"ghost",size:"sm",onClick:p,className:"text-green-200 hover:text-green-100 p-0 h-auto font-normal hover:bg-transparent",children:[A.jsx(yT,{className:"w-4 h-4 ml-1"}),"  "]})}),A.jsx("button",{type:"submit",onClick:h,className:"w-full bg-gradient-to-r from-green-600 to-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:from-green-700 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-green-400 transition-all duration-200",children:o?A.jsxs("div",{className:"flex items-center justify-center",children:[A.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white ml-2"}),"  ..."]}):A.jsxs("div",{className:"flex items-center justify-center",children:[A.jsx(CV,{className:"w-5 h-5 ml-2"})," "]})})]}),A.jsxs("div",{className:"mt-6 text-center space-y-3",children:[A.jsxs("p",{className:"text-sm text-white/80",children:["  "," ",A.jsx(wU,{to:"/user/register",className:"text-green-200 hover:text-green-100 font-medium transition-colors hover:underline",children:"  "})]}),A.jsxs("p",{className:"text-sm text-white/80",children:["        "," ",A.jsx("a",{href:"https://wa.me/201000392539",target:"_blank",rel:"noreferrer",className:"text-green-200 hover:text-green-100 font-medium hover:underline",children:"01000392539"})," ","   "," ",A.jsx("a",{href:"mailto:info@cashy-link.com",className:"text-blue-200 hover:text-blue-100 font-medium hover:underline",children:"info@cashy-link.com"})]})]})]}),A.jsx("div",{className:"mt-6 text-center",children:A.jsx("p",{className:"text-xs text-white/70",children:"   "})})]})]})},qz=()=>{const t=ld(),e=es(),{signOut:n,user:r}=Gi(),[s,i]=x.useState(!1),[o,a]=x.useState(!1),l=[{id:"home",label:"",icon:MV,path:"/user/dashboard",action:()=>{t("/user/dashboard"),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},100)}},{id:"debts",label:"",icon:LV,path:"/debts",action:()=>{t("/user/dashboard",{state:{openDebtDialog:!0}})}},{id:"transfer",label:"",icon:kV,path:"/transfer",action:()=>{t("/user/dashboard",{state:{openTransactionSection:!0,transactionType:"transfer",startNewTransaction:!0}})}},{id:"add",label:"",icon:vT,path:"/add",isSpecial:!0},{id:"withdraw",label:"",icon:RV,path:"/withdraw",action:()=>{t("/user/dashboard",{state:{openTransactionSection:!0,transactionType:"withdraw",startNewTransaction:!0}})}},{id:"transactions",label:"",icon:ug,path:"/transactions"},{id:"settings",label:"",icon:_T,path:"/profile-settings"}],c=[{id:"maintenance",label:"",icon:HV,action:()=>{i(!1),t("/user/dashboard",{state:{openMaintenanceDialog:!0}})},color:"#0EA5E9"},{id:"credit-cards",label:" ",icon:NV,action:()=>{i(!1),t("/user/dashboard",{state:{openCreditCardsDialog:!0}})},color:"#8B5CF6"},{id:"sales",label:"",icon:$V,action:()=>{i(!1),t("/user/dashboard",{state:{openSalesDialog:!0}})},color:"#F59E0B"},{id:"shop-expenses",label:" ",icon:ug,action:()=>{i(!1),t("/user/dashboard",{state:{openShopExpensesDialog:!0}})},color:"#F97316"},{id:"deficiencies",label:"",icon:zV,action:()=>{i(!1),t("/user/dashboard",{state:{openDeficienciesDialog:!0}})},color:"#DB2777"},{id:"add-wallet",label:" ",icon:vT,action:()=>{i(!1),t("/user/add-wallet")},color:"#EF4444"},{id:"cashier-shift",label:" ",icon:DV,action:()=>{i(!1),t("/user/dashboard",{state:{openCashierShiftModal:!0}})},color:"#3B82F6"},{id:"contact",label:" ",icon:UV,action:()=>{i(!1);const v=`   
  : ${(r==null?void 0:r.email)||" "}`,y=encodeURIComponent(v);window.open(`https://wa.me/201000392539?text=${y}`,"_blank")},color:"#10B981"},{id:"logout",label:" ",icon:gT,action:async()=>{i(!1);try{await n(),t("/user/login",{replace:!0})}catch(f){console.error("Logout error:",f);try{t("/user/login",{replace:!0})}catch{}}},color:"#EF4444"}],d=[{id:"shop-expenses-settings",label:" ",icon:ug,action:()=>{a(!1),t("/user/dashboard",{state:{openShopExpensesDialog:!0}})},color:"#F97316"},{id:"profile-settings",label:"  ",icon:_T,action:()=>{a(!1),t("/profile-settings")},color:"#6366F1"},{id:"logout",label:" ",icon:gT,action:async()=>{a(!1);try{await n(),t("/user/login",{replace:!0})}catch(f){console.error("Logout error:",f);try{t("/user/login",{replace:!0})}catch{}}},color:"#EF4444"}],h=(f,v,y)=>{y?y():v&&f==="/add"?i(!s):v||t(f)},p=f=>e.pathname===f;return A.jsxs("div",{className:"mobile-bottom-nav",children:[s&&A.jsxs(A.Fragment,{children:[A.jsx("div",{className:"quick-actions-overlay",onClick:()=>i(!1)}),A.jsx("div",{className:"floating-actions-container",children:c.map((f,v)=>A.jsxs("div",{className:"floating-action-button",onClick:f.action,style:{"--action-color":f.color,"--animation-delay":`${v*.1}s`},children:[A.jsx("div",{className:"floating-action-icon",style:{backgroundColor:f.color},children:A.jsx(f.icon,{className:"action-icon"})}),A.jsx("span",{className:"floating-action-label",children:f.label})]},f.id))})]}),o&&A.jsxs(A.Fragment,{children:[A.jsx("div",{className:"quick-actions-overlay",onClick:()=>a(!1)}),A.jsx("div",{className:"floating-actions-container",children:d.map((f,v)=>A.jsxs("div",{className:"floating-action-button",onClick:f.action,style:{"--action-color":f.color,"--animation-delay":`${v*.1}s`},children:[A.jsx("div",{className:"floating-action-icon",style:{backgroundColor:f.color},children:A.jsx(f.icon,{className:"action-icon"})}),A.jsx("span",{className:"floating-action-label",children:f.label})]},f.id))})]}),A.jsx("nav",{className:"mobile-bottom-nav-container",children:l.map(f=>{const v=f.icon,y=p(f.path);return A.jsxs("button",{onClick:()=>h(f.path,f.isSpecial,f.action),className:`mobile-nav-item ${y?"active":""} ${f.isSpecial?"special":""}`,"aria-label":f.label,children:[A.jsx("div",{className:`nav-icon-container ${f.isSpecial?"special-icon":""} ${f.isSpecial&&f.id==="add"&&s?"special-open":""}`,children:A.jsx(v,{className:`nav-icon ${y?"active-icon":""} ${f.isSpecial?"special-icon-svg":""} ${f.isSpecial&&f.id==="add"&&s?"rotated":""} ${f.isSpecial&&f.id==="settings"&&o?"rotated":""}`})}),!f.isSpecial&&A.jsx("span",{className:`nav-label ${y?"active-label":""}`,children:f.label})]},f.id)})})]})},Hz=()=>{var i,o;const t=typeof window<"u"&&window.electronAPI,e=async()=>{try{t?await window.electronAPI.windowMinimize():console.info("windowMinimize (dev preview)")}catch(a){console.warn("failed to minimize",a)}},n=async()=>{try{t?await window.electronAPI.windowClose():console.info("windowClose (dev preview)")}catch(a){console.warn("failed to close",a)}},r=async()=>{try{const a=window.electronAPI;t&&a&&typeof a.windowReload=="function"?await a.windowReload():window.location.reload()}catch(a){console.warn("failed to refresh",a)}};return t||((o=(i=import.meta)==null?void 0:i.env)==null?void 0:o.DEV)?A.jsxs("div",{className:"fixed top-2 right-2 z-[2000] flex items-center gap-2",style:{pointerEvents:"auto"},children:[A.jsx("button",{type:"button","aria-label":"",title:"",onClick:n,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-red-600 hover:bg-red-500/10 focus:outline-none dark:text-red-400 dark:hover:bg-red-400/10",children:A.jsx(Dx,{className:"w-5 h-5"})}),A.jsx("button",{type:"button","aria-label":"",title:" ",onClick:r,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-blue-600 hover:bg-blue-500/10 focus:outline-none dark:text-blue-400 dark:hover:bg-blue-400/10",children:A.jsx(kx,{className:"w-5 h-5"})}),A.jsx("button",{type:"button","aria-label":"",title:"",onClick:e,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-gray-800 hover:bg-black/10 focus:outline-none dark:text-white/80 dark:hover:bg-white/10",children:A.jsx(jV,{className:"w-5 h-5"})})]}):null},Eh=({className:t=""})=>{const[e,n]=x.useState("./logo.svg"),[r,s]=x.useState(0),i=x.useCallback(()=>{s(o=>{const a=o+1;return a===1?n("./logo.png"):a===2&&n("./placeholder.svg"),a})},[]);return A.jsx("div",{className:`min-h-screen bg-background flex items-center justify-center ${t}`,children:A.jsxs("div",{className:"flex flex-col items-center justify-center",children:[A.jsx("img",{src:e,alt:"logo",onError:i,className:"w-16 h-16 animate-spin",style:{animationDuration:"0.6s"}}),A.jsx("p",{className:"mt-3 text-base font-extrabold text-primary tracking-wide animate-pulse",style:{fontFamily:"'Tajawal','Cairo',sans-serif"},children:"  "})]})})};/*! Capacitor: https://capacitorjs.com/ - MIT License */var Ll;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(Ll||(Ll={}));class Mg extends Error{constructor(e,n,r){super(e),this.message=e,this.code=n,this.data=r}}const Wz=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},Kz=t=>{const e=t.CapacitorCustomPlatform||null,n=t.Capacitor||{},r=n.Plugins=n.Plugins||{},s=()=>e!==null?e.name:Wz(t),i=()=>s()!=="web",o=h=>{const p=c.get(h);return!!(p!=null&&p.platforms.has(s())||a(h))},a=h=>{var p;return(p=n.PluginHeaders)===null||p===void 0?void 0:p.find(f=>f.name===h)},l=h=>t.console.error(h),c=new Map,d=(h,p={})=>{const f=c.get(h);if(f)return console.warn(`Capacitor plugin "${h}" already registered. Cannot register plugins twice.`),f.proxy;const v=s(),y=a(h);let E;const w=async()=>(!E&&v in p?E=typeof p[v]=="function"?E=await p[v]():E=p[v]:e!==null&&!E&&"web"in p&&(E=typeof p.web=="function"?E=await p.web():E=p.web),E),_=(T,b)=>{var k,P;if(y){const N=y==null?void 0:y.methods.find(C=>b===C.name);if(N)return N.rtype==="promise"?C=>n.nativePromise(h,b.toString(),C):(C,q)=>n.nativeCallback(h,b.toString(),C,q);if(T)return(k=T[b])===null||k===void 0?void 0:k.bind(T)}else{if(T)return(P=T[b])===null||P===void 0?void 0:P.bind(T);throw new Mg(`"${h}" plugin is not implemented on ${v}`,Ll.Unimplemented)}},I=T=>{let b;const k=(...P)=>{const N=w().then(C=>{const q=_(C,T);if(q){const Z=q(...P);return b=Z==null?void 0:Z.remove,Z}else throw new Mg(`"${h}.${T}()" is not implemented on ${v}`,Ll.Unimplemented)});return T==="addListener"&&(N.remove=async()=>b()),N};return k.toString=()=>`${T.toString()}() { [capacitor code] }`,Object.defineProperty(k,"name",{value:T,writable:!1,configurable:!1}),k},D=I("addListener"),O=I("removeListener"),V=(T,b)=>{const k=D({eventName:T},b),P=async()=>{const C=await k;O({eventName:T,callbackId:C},b)},N=new Promise(C=>k.then(()=>C({remove:P})));return N.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await P()},N},S=new Proxy({},{get(T,b){switch(b){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return y?V:D;case"removeListener":return O;default:return I(b)}}});return r[h]=S,c.set(h,{name:h,proxy:S,platforms:new Set([...Object.keys(p),...y?[v]:[]])}),S};return n.convertFileSrc||(n.convertFileSrc=h=>h),n.getPlatform=s,n.handleError=l,n.isNativePlatform=i,n.isPluginAvailable=o,n.registerPlugin=d,n.Exception=Mg,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},Gz=t=>t.Capacitor=Kz(t),Pe=Gz(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),hE=Pe.registerPlugin;class PD{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,n){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(n);const i=this.windowListeners[e];i&&!i.registered&&this.addWindowListener(i),r&&this.sendRetainedArgumentsForEvent(e);const o=async()=>this.removeListener(e,n);return Promise.resolve({remove:o})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,r){const s=this.listeners[e];if(!s){if(r){let i=this.retainedEventArguments[e];i||(i=[]),i.push(n),this.retainedEventArguments[e]=i}return}s.forEach(i=>i(n))}hasListeners(e){var n;return!!(!((n=this.listeners[e])===null||n===void 0)&&n.length)}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(e="not implemented"){return new Pe.Exception(e,Ll.Unimplemented)}unavailable(e="not available"){return new Pe.Exception(e,Ll.Unavailable)}async removeListener(e,n){const r=this.listeners[e];if(!r)return;const s=r.indexOf(n);this.listeners[e].splice(s,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(r=>{this.notifyListeners(e,r)}))}}const tb=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),nb=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Qz extends PD{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[s,i]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=nb(s).trim(),i=nb(i).trim(),n[s]=i}),n}async setCookie(e){try{const n=tb(e.key),r=tb(e.value),s=`; expires=${(e.expires||"").replace("expires=","")}`,i=(e.path||"/").replace("path=",""),o=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${r||""}${s}; path=${i}; ${o};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}hE("CapacitorCookies",{web:()=>new Qz});const Yz=async t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const s=r.result;e(s.indexOf(",")>=0?s.split(",")[1]:s)},r.onerror=s=>n(s),r.readAsDataURL(t)}),Xz=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(s=>s.toLocaleLowerCase()).reduce((s,i,o)=>(s[i]=t[e[o]],s),{})},Jz=(t,e=!0)=>t?Object.entries(t).reduce((r,s)=>{const[i,o]=s;let a,l;return Array.isArray(o)?(l="",o.forEach(c=>{a=e?encodeURIComponent(c):c,l+=`${i}=${a}&`}),l.slice(0,-1)):(a=e?encodeURIComponent(o):o,l=`${i}=${a}`),`${r}&${l}`},"").substr(1):null,Zz=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),s=Xz(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(s.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[o,a]of Object.entries(t.data||{}))i.set(o,a);n.body=i.toString()}else if(s.includes("multipart/form-data")||t.data instanceof FormData){const i=new FormData;if(t.data instanceof FormData)t.data.forEach((a,l)=>{i.append(l,a)});else for(const a of Object.keys(t.data))i.append(a,t.data[a]);n.body=i;const o=new Headers(n.headers);o.delete("content-type"),n.headers=o}else(s.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class e8 extends PD{async request(e){const n=Zz(e,e.webFetchExtra),r=Jz(e.params,e.shouldEncodeUrlParams),s=r?`${e.url}?${r}`:e.url,i=await fetch(s,n),o=i.headers.get("content-type")||"";let{responseType:a="text"}=i.ok?e:{};o.includes("application/json")&&(a="json");let l,c;switch(a){case"arraybuffer":case"blob":c=await i.blob(),l=await Yz(c);break;case"json":l=await i.json();break;case"document":case"text":default:l=await i.text()}const d={};return i.headers.forEach((h,p)=>{d[p]=h}),{data:l,headers:d,status:i.status,url:i.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}hE("CapacitorHttp",{web:()=>new e8});const Fg=768;function RD(){const[t,e]=x.useState(void 0);return x.useEffect(()=>{const n=window.matchMedia(`(max-width: ${Fg-1}px)`),r=()=>{e(window.innerWidth<Fg)};return n.addEventListener("change",r),e(window.innerWidth<Fg),()=>n.removeEventListener("change",r)},[]),!!t}function t8(){const t=RD(),[e,n]=x.useState("default"),[r,s]=x.useState(!1);return x.useEffect(()=>{const o=localStorage.getItem("notificationConsentRequested")==="true";if(s(o),o){const a=localStorage.getItem("notificationPermission");(a==="granted"||a==="denied"||a==="default")&&n(a);return}t&&typeof window<"u"&&("Notification"in window?Notification.requestPermission().then(a=>{n(a),localStorage.setItem("notificationPermission",a),localStorage.setItem("notificationConsentRequested","true"),s(!0)}).catch(()=>{n("default"),localStorage.setItem("notificationConsentRequested","true"),s(!0)}):(n("unsupported"),localStorage.setItem("notificationConsentRequested","true"),s(!0)))},[t]),{permission:e,hasRequested:r,requestConsent:async()=>{if(typeof window<"u"&&"Notification"in window){const o=await Notification.requestPermission();return n(o),localStorage.setItem("notificationPermission",o),localStorage.setItem("notificationConsentRequested","true"),s(!0),o}return"unsupported"}}}const rb=hE("AppLauncher",{web:()=>Oe(()=>import("./web-zVIVVSz9.js"),[],import.meta.url).then(t=>new t.AppLauncherWeb)});function n8(t,e){if(!t||!t.trim())throw new Error("USSD code is required");const n=`tel:${t.replace(/#/g,"%23")}`,s=`cashy://ussd?code=${t.replace(/#/g,"%23")}${e?`&sim=${e}`:""}`;let i=!1;try{Pe&&Pe.getPlatform()!=="web"&&(rb.openUrl({url:s}),i=!0)}catch{}if(!i)try{window.location.href=s,i=!0}catch{}if(!i){try{window.location.href=n}catch{}try{Pe&&Pe.getPlatform()!=="web"&&rb.openUrl({url:n})}catch{}}}function CD(t,e){const n=String(t||"").replace(/\D/g,""),r=Math.round(Number(e||0));return!n||n.length!==11||!n.startsWith("01")||!r||r<=0?null:n.startsWith("010")?`*9*7*${n}*${r}#`:n.startsWith("011")?`*323*${n}*${r}#`:n.startsWith("012")?`*115*1*${n}*${r}#`:n.startsWith("015")?`*322*${n}*${r}#`:null}function r8(t,e,n){const r=String(t||"").replace(/\D/g,""),s=String(e||"").replace(/\D/g,""),i=Math.round(Number(n||0));return!s||s.length!==11||!s.startsWith("01")||!i||i<=0?null:!r||!r.startsWith("01")?CD(s,i):r.startsWith("010")?`*9*7*${s}*${i}#`:r.startsWith("011")?`*323*${s}*${i}#`:r.startsWith("012")?`*115*1*${s}*${i}#`:r.startsWith("015")?`*322*${s}*${i}#`:null}function Z8(t,e,n){const r=CD(t,e),s=String(n||"").replace(/\D/g,"");return!r||!s?r:`${r.endsWith("#")?r.slice(0,-1):r}*${s}#`}function s8(t){const e=String(t||"").replace(/\D/g,"");return e.startsWith("010")?"vodafone":e.startsWith("011")?"etisalat":e.startsWith("012")?"orange":e.startsWith("015")?"we":null}function i8(t){const e=s8(t),n=e?`simSlot_${e}`:"simSlot_default";try{if(localStorage.getItem(n)==="sim2")return"sim2"}catch{}return"sim1"}function e7(t,e,n){const r=r8(t,e,n);if(!r)throw new Error("Unsupported network or invalid sender/receiver/amount");const s=i8(t||e);n8(r,s)}async function o8(t,e="Cashy"){if(!t||!t.trim())throw new Error("Notification message is required");try{if(typeof Notification<"u"&&(Notification.permission==="granted"?"granted":await Notification.requestPermission())==="granted"){new Notification(e||"Cashy",{body:t});return}typeof window<"u"&&typeof alert=="function"?alert(`${e||"Cashy"}
${t}`):console.log(`[${e||"Cashy"}] ${t}`)}catch(n){console.warn("Notification not available:",n)}}function fE(t,e){return e==="send"?0:Math.round(t*.01*100)/100}function a8(t,e,n=0){const r=fE(t,e),s=Math.max(0,r-n);return Math.round(s*100)/100}const l8=Object.freeze(Object.defineProperty({__proto__:null,calculateCommission:fE,calculateProfit:a8},Symbol.toStringTag,{value:"Module"})),c8=t=>t==="withdraw"||t==="receive"?"receive":"send",u8=async t=>{if(!t)return null;const e=Ce(ye(Q,"transactions"),be("reference","==",t),sa(1)),n=await Ne(e);return n.empty?null:n.docs[0].id},d8=async t=>{if(!t||!t.shopId||!t.lineId||!t.provider)throw new Error("   :   shopId  lineId  provider");if(!t.amount||t.amount<=0)throw new Error("     ");const e=await u8(t.reference);if(e)return{id:e,duplicate:!0};const n=c8(t.type),r={shopId:t.shopId,lineId:t.lineId,merchantUserId:t.merchantUserId||t.createdBy,walletId:t.walletId,provider:t.provider,txnType:n,amount:t.amount,fee:void 0,commission:void 0,profit:0,reference:t.reference,senderMsisdn:t.senderMsisdn,receiverMsisdn:t.receiverMsisdn,note:t.note,status:"confirmed",createdBy:t.createdBy,createdAt:new Date,confirmedAt:new Date},s=await bD.create(r);try{const i="  ",o=`: ${t.type} | : ${t.amount} | : ${t.provider}`;await o8(o,i)}catch(i){console.warn("   :",i)}try{const i=t.merchantUserId||t.createdBy;if(i){const o=n==="receive"?"withdraw":"send",a=fE(t.amount,n);await AD.saveUserTransaction(i,{type:o,amount:t.amount,commission:a,status:"confirmed",createdAt:new Date,senderMsisdn:t.senderMsisdn,receiverMsisdn:t.receiverMsisdn,walletId:t.walletId,lineId:t.lineId,provider:t.provider,note:t.note,transactionId:s})}else console.warn("    :   userId (merchantUserId  createdBy)  .")}catch(i){console.warn("      userTransactions   :",i)}return{id:s,duplicate:!1}};function h8(t){let e=0;for(let n=0;n<t.length;n++)e=Math.imul(31,e)+t.charCodeAt(n)|0;return"SMS_"+Math.abs(e).toString(36)}function f8(t){const e=t.toLowerCase();return e.includes("")||e.includes("withdraw")?"withdraw":(e.includes("")||e.includes("transfer")||e.includes(" "),"transfer")}function p8(t){const n=t.replace(/,/g,"").match(/(\d{1,9}(?:\.\d{1,2})?)/);return n?parseFloat(n[1]):null}function m8(t){const e=t.match(/01\d{9}/);return e?e[0]:void 0}function g8(t){const e=t.toLowerCase();if(e.includes("")||e.includes("vodafone"))return"vodafone_cash";if(e.includes("")||e.includes("orange"))return"orange_cash";if(e.includes("")||e.includes("etisalat"))return"etisalat_cash";if(e.includes("instapay")||e.includes(" ")||e.includes(""))return"instapay"}function y8(t={}){if(typeof window>"u")return()=>{};const e=t.createdBy||"mobile_sms_bridge",n=async r=>{const i=r.detail||{};try{let o=null;if(i&&i.payload)o=i.payload,o.shopId=o.shopId||t.shopId,o.lineId=o.lineId||t.lineId,o.provider=o.provider||t.provider,o.createdBy=o.createdBy||e;else if(i&&i.text){const l=i.text,c=f8(l),d=p8(l),h=c==="transfer"?m8(l):void 0,p=g8(l)||t.provider;if(!t.shopId||!t.lineId||!p){console.warn("SMS integration missing identifiers. Provide shopId, lineId, provider in initSmsIntegration."),It.warning("   SMS   (  )");return}o={type:c,amount:d||0,provider:p,shopId:t.shopId,lineId:t.lineId,receiverMsisdn:h,reference:i.reference||h8(l),createdBy:e,note:"Parsed from SMS"}}if(!o)return;if((await d8(o)).duplicate)It.info("      SMS");else{const l=o.type==="withdraw"?"":"";It.success(`  ${l}    SMS`)}}catch(o){console.error("Failed to process mobile SMS notification:",o),It.error("     SMS")}};return window.addEventListener("mobileSmsReceived",n),()=>window.removeEventListener("mobileSmsReceived",n)}async function v8(t,e="android",n){var l,c,d,h,p;const r=n||((l=Yn.currentUser)==null?void 0:l.uid)||"";if(!r)throw new Error("  userId   ");const s=(d=(c=import.meta)==null?void 0:c.env)==null?void 0:d.VITE_PUSH_REGISTER_ENDPOINT,i=(p=(h=import.meta)==null?void 0:h.env)==null?void 0:p.VITE_PUSH_NOTIFICATIONS_API_KEY,o={userId:r,platform:e,token:t};if(s){const f=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json",...i?{Authorization:`Bearer ${i}`}:{}},body:JSON.stringify(o)});if(f.ok)return f.json()}const a=await fetch("/api/devices/save-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!a.ok)throw new Error(`  : ${a.status}`);return a.json()}async function _8(t,e="android",n){return await nD(uE,"saveDeviceToken")({token:t,platform:e,userId:n})}async function t7(t,e=" ",n="    50 ",r={type:"transfer",amount:"50",txId:"12345"}){const i=await nD(uE,"sendFcmToUser")({userId:t,title:e,body:n,data:r});return(i==null?void 0:i.data)??i}function kD(){if(typeof window>"u")return()=>{};const t=async e=>{var n;try{const r=e.detail||window.__fcmToken||"";if(!r)return;const s=((n=Yn.currentUser)==null?void 0:n.uid)||"";if(!s){console.warn("FCM bridge:           ");return}try{await _8(r,"android",s)}catch{await v8(r,"android",s)}console.log("    FCM  :",s)}catch(r){console.error("    FCM  :",r)}};window.addEventListener("fcm-token",t);try{const e=window.__fcmToken;e&&t(new CustomEvent("fcm-token",{detail:e}))}catch{}return()=>{window.removeEventListener("fcm-token",t)}}async function w8(){var t,e,n;try{if(!(Pe!=null&&Pe.isNativePlatform))return!1;const r=Pe.getPlatform();if(localStorage.getItem("nativePushRequested")==="true")return!1;const i=((t=Pe.Plugins)==null?void 0:t.PushNotifications)||window.PushNotifications;if(!i){if(typeof window<"u"&&"Notification"in window&&typeof Notification.requestPermission=="function")try{await Notification.requestPermission()}catch{}return localStorage.setItem("nativePushRequested","true"),!1}try{await((e=i.requestPermissions)==null?void 0:e.call(i))}catch{}try{await((n=i.register)==null?void 0:n.call(i))}catch{}return localStorage.setItem("nativePushRequested","true"),!0}catch{return!1}}const uu={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_DEV_MODE:"true",VITE_ENABLE_OFFLINE_PERSISTENCE:"false",VITE_FIREBASE_API_KEY:"AIzaSyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s",VITE_FIREBASE_APP_ID:"1:483702062341:web:b1ff06ad175cb7ae428b6c",VITE_FIREBASE_AUTH_DOMAIN:"voda-c6abd.firebaseapp.com",VITE_FIREBASE_AUTH_EMULATOR_URL:"http://localhost:9099",VITE_FIREBASE_FIRESTORE_EMULATOR_HOST:"localhost:8080",VITE_FIREBASE_FUNCTIONS_EMULATOR_HOST:"localhost:5001",VITE_FIREBASE_MEASUREMENT_ID:"G-CV6QGH7G7P",VITE_FIREBASE_MESSAGING_SENDER_ID:"483702062341",VITE_FIREBASE_PROJECT_ID:"voda-c6abd",VITE_FIREBASE_STORAGE_BUCKET:"voda-c6abd.appspot.com",VITE_FORCE_HASH_ROUTER:"true",VITE_SHOP_ID:"demo-shop-001",VITE_SHOP_NAME:"   ",VITE_SHOW_ENV_BANNER:"true",VITE_USE_EMULATORS:"false",VITE_USE_FIREBASE_EMULATOR:"false"},sb=z.lazy(()=>Oe(()=>import("./Index-B26kp2KW.js"),[],import.meta.url)),Th=z.lazy(()=>Oe(()=>import("./LandingPage-CIKvzW3p.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]),import.meta.url)),ib=z.lazy(()=>Oe(()=>import("./SubscriptionsPage-BadOvkfj.js"),__vite__mapDeps([14,1,4,15,16,7,8,6,13]),import.meta.url)),ob=z.lazy(()=>Oe(()=>import("./AuthPage-BGRV0SdE.js"),__vite__mapDeps([17,1,5,2,3,9]),import.meta.url)),Ih=z.lazy(()=>Oe(()=>import("./TopUpPage-CjS2GsI8.js"),__vite__mapDeps([18,1,19,20,21]),import.meta.url)),ab=z.lazy(()=>Oe(()=>import("./AdminTopupsPage-jPrQxFz-.js"),__vite__mapDeps([22,19,20,21]),import.meta.url)),lb=z.lazy(()=>Oe(()=>import("./AdminNotificationsPage-TjeiE9Xe.js"),__vite__mapDeps([23,1,24,25,26]),import.meta.url)),Sh=z.lazy(()=>Oe(()=>import("./UserRegisterPage-CISh_ljd.js"),__vite__mapDeps([27,1,24,28,29,30,31,32,33]),import.meta.url)),cb=z.lazy(()=>Oe(()=>import("./UserAccountSetupPage-Clz0wWBI.js"),__vite__mapDeps([34,1,24,28,33,32,13]),import.meta.url)),ub=z.lazy(()=>Oe(()=>import("./ForgotPasswordCodePage-BYqfuAi-.js"),[],import.meta.url)),db=z.lazy(()=>Oe(()=>import("./DashboardLoginPage-C9h9FuaT.js"),__vite__mapDeps([35,1,11]),import.meta.url)),hb=z.lazy(()=>Oe(()=>import("./ProtectedDashboard-uHiZc8Cp.js"),__vite__mapDeps([36,1,37,19,20,21,38,24,39,11,40,41,29,13,42]),import.meta.url)),bh=z.lazy(()=>Oe(()=>import("./ProtectedUserDashboard-CD5wD4hi.js"),__vite__mapDeps([43,44,26,38,24,39,20,11,40]),import.meta.url)),fb=z.lazy(()=>Oe(()=>import("./MerchantDashboard-CKw5kZpy.js"),__vite__mapDeps([45,46,19,20,21,47,37,48,39,1,49,24,50,51]),import.meta.url)),pb=z.lazy(()=>Oe(()=>import("./PendingApprovalPage-CG6lCA1U.js"),__vite__mapDeps([52,1,4,40,11,53,13,54]),import.meta.url)),mb=z.lazy(()=>Oe(()=>import("./AdminLogin-Bd2RsgGC.js"),__vite__mapDeps([55,11]),import.meta.url)),gb=z.lazy(()=>Oe(()=>import("./ProtectedAdminDashboard-DDUEzEiB.js"),__vite__mapDeps([56,15,3,57,46,19,20,21,47,39,24,38,11,40,58,54,44,25,13,1,59,28,37,60,4,32,61,16,10,53,8,5,62,9,42]),import.meta.url)),yb=z.lazy(()=>Oe(()=>import("./AuthTestPage-BH77ZxeW.js"),__vite__mapDeps([63,1,24]),import.meta.url)),vb=z.lazy(()=>Oe(()=>import("./ProfileSettingsPage-CAYnKGyb.js"),__vite__mapDeps([64,1,24,58,5,65,38,39,20,11,40,51,59,21,6,31,61,8,54]),import.meta.url)),_b=z.lazy(()=>Oe(()=>import("./TransactionsPage-sluj9z7s.js"),__vite__mapDeps([66,1,39,20,19,21,37,47,67,60,38,24,11,40,4,49,13,9,16,68,41,6,42]),import.meta.url)),wb=z.lazy(()=>Oe(()=>import("./WalletAdditionPage-ZFS9NHTY.js"),__vite__mapDeps([69,1,24,19,20,21,50,6,29,32,40]),import.meta.url)),Eb=z.lazy(()=>Oe(()=>import("./ReferralsPage-BB5lVEwf.js"),__vite__mapDeps([70,1,37,28,31,26,13,61,53,62,30,42]),import.meta.url)),Tb=z.lazy(()=>Oe(()=>import("./CPanelPage-DFpIiNY-.js"),__vite__mapDeps([71,1,24,39,20]),import.meta.url)),Ib=z.lazy(()=>Oe(()=>import("./CPanelLoginPage-DM2Y5Q26.js"),__vite__mapDeps([72,24,1,11]),import.meta.url)),Sb=z.lazy(()=>Oe(()=>import("./NotFound-rUKXQLCC.js"),[],import.meta.url)),bb=z.lazy(()=>Oe(()=>import("./SmsHookBridge-DJRwrrwL.js"),[],import.meta.url)),E8=new v4,T8=()=>{if(!((Pe==null?void 0:Pe.isNativePlatform)&&Pe.getPlatform()==="android"))return null;const e=()=>{try{window.location.reload()}catch{}};return A.jsx("div",{className:"fixed top-2 right-2 z-[2000] flex items-center gap-2",style:{pointerEvents:"auto"},children:A.jsx("button",{type:"button","aria-label":"",title:" ",onClick:e,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-blue-600 hover:bg-blue-500/10 focus:outline-none dark:text-blue-400 dark:hover:bg-blue-400/10",children:A.jsx(kx,{className:"w-5 h-5"})})})},Ab=()=>{const t=es(),{user:e,loading:n}=Gi(),r=(Pe==null?void 0:Pe.isNativePlatform)&&Pe.getPlatform()==="android",s=t.pathname.startsWith("/user/dashboard"),i=r&&t.pathname==="/",o=!!e&&(s||i);return n?null:o?A.jsx(qz,{}):null},xb=()=>{const t=RD(),{profile:e}=Gi(),n=es(),{toast:r}=ex();return t8(),x.useEffect(()=>{w8()},[]),x.useEffect(()=>{const s=kD(),i=n.pathname.startsWith("/user/dashboard");if(t&&(e!=null&&e.shopId)&&i){const o=y8({shopId:e.shopId,createdBy:e.userId});return()=>{try{o()}catch{}try{s()}catch{}}}return()=>{try{s()}catch{}}},[t,e==null?void 0:e.shopId,n.pathname]),x.useEffect(()=>{if(!t)return;const s=document.createElement("style");s.setAttribute("data-disable-pull-to-refresh","true"),s.textContent="html, body { overscroll-behavior-y: contain; touch-action: pan-y; }",document.head.appendChild(s);let i=0,o=null;const a=c=>{var d,h;i=((h=(d=c.touches)==null?void 0:d[0])==null?void 0:h.clientY)||0,o=c.target},l=c=>{var E,w;const d=((w=(E=c.touches)==null?void 0:E[0])==null?void 0:w.clientY)||0,h=document.scrollingElement||document.documentElement,p=h.scrollTop||window.scrollY||0,f=h.scrollHeight-h.clientHeight||0,v=o||null,y=(()=>{let _=v;for(;_&&_!==document.body;){const D=window.getComputedStyle(_).overflowY;if((D==="auto"||D==="scroll")&&_.scrollHeight>_.clientHeight)return!0;_=_.parentElement}return!1})();!y&&p<=0&&d>i&&c.cancelable&&c.preventDefault(),!y&&p>=f&&d<i&&c.cancelable&&c.preventDefault()};return document.addEventListener("touchstart",a,{passive:!0}),document.addEventListener("touchmove",l,{passive:!1}),()=>{document.removeEventListener("touchstart",a),document.removeEventListener("touchmove",l);try{document.head.removeChild(s)}catch{}}},[t]),x.useEffect(()=>{if(!((Pe==null?void 0:Pe.isNativePlatform)&&Pe.getPlatform()==="android"))return;let i=!1;return(async()=>{try{const o=String((uu==null?void 0:uu.VITE_APP_VERSION)||"0.0.0"),a=await fetch("https://cashy-link.com/mobile_version.json",{cache:"no-store"});if(!a.ok)throw new Error("   ");const l=await a.json(),c=String((l==null?void 0:l.version)||"0.0.0"),d=l!=null&&l.url?String(l.url).trim():void 0;if(!i&&d&&((p,f)=>{const v=p.split(".").map(E=>parseInt(E,10)||0),y=f.split(".").map(E=>parseInt(E,10)||0);for(let E=0;E<Math.max(v.length,y.length);E++){const w=v[E]||0,_=y[E]||0;if(w>_)return 1;if(w<_)return-1}return 0})(c,o)>0){try{r({title:"  ",description:` ${c}       `})}catch{}try{window.open(d,"_blank")}catch{}}}catch(o){console.warn("   :",o)}})(),()=>{i=!0}},[]),null},Pb=()=>es().pathname.startsWith("/user/dashboard")?A.jsxs(A.Fragment,{children:[A.jsx(xL,{}),A.jsx(iM,{})]}):null,I8=()=>A.jsx(w4,{client:E8,children:A.jsx(TU,{children:A.jsxs(HF,{children:[typeof window<"u"&&(window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron")||typeof import.meta<"u"&&uu&&!1)&&!(Pe!=null&&Pe.isNativePlatform&&Pe.getPlatform()==="android")&&A.jsx(Hz,{}),A.jsx(T8,{}),typeof window<"u"&&(window.electronAPI||window.location.protocol==="file:"||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron")||typeof window.location.hash=="string"&&window.location.hash.startsWith("#/")||typeof import.meta<"u"&&uu)?A.jsxs(yU,{children:[A.jsx(xb,{}),A.jsx(Pb,{}),A.jsxs(x.Suspense,{fallback:A.jsx(Eh,{}),children:[null,A.jsxs(YT,{children:[A.jsx(se,{path:"/",element:Pe!=null&&Pe.isNativePlatform&&Pe.getPlatform()==="android"?z.createElement(()=>{const{user:e,loading:n}=Gi();return n?z.createElement(Eh):e?z.createElement(bh):z.createElement(wh)}):A.jsx(Th,{})}),A.jsx(se,{path:"/dashboard-redirect",element:A.jsx(sb,{})}),A.jsx(se,{path:"/landing",element:A.jsx(Th,{})}),A.jsx(se,{path:"/subscriptions",element:A.jsx(ib,{})}),A.jsx(se,{path:"/auth",element:A.jsx(ob,{})}),A.jsx(se,{path:"/sms-hook",element:A.jsx(bb,{})}),A.jsx(se,{path:"/user/login",element:A.jsx(wh,{})}),A.jsx(se,{path:"/user/forgot-password",element:A.jsx(ub,{})}),A.jsx(se,{path:"/user/register",element:A.jsx(Sh,{})}),A.jsx(se,{path:"/register",element:A.jsx(Sh,{})}),A.jsx(se,{path:"/user/account-setup",element:A.jsx(cb,{})}),A.jsx(se,{path:"/user/pending-approval",element:A.jsx(pb,{})}),A.jsx(se,{path:"/user/dashboard",element:A.jsx(bh,{})}),A.jsx(se,{path:"/user/add-wallet",element:A.jsx(wb,{})}),A.jsx(se,{path:"/admin/login",element:A.jsx(mb,{})}),A.jsx(se,{path:"/admin/dashboard",element:A.jsx(gb,{})}),A.jsx(se,{path:"/admin/topups",element:A.jsx(ab,{})}),A.jsx(se,{path:"/admin/notifications",element:A.jsx(lb,{})}),A.jsx(se,{path:"/profile-settings",element:A.jsx(vb,{})}),A.jsx(se,{path:"/transactions",element:A.jsx(_b,{})}),A.jsx(se,{path:"/referrals",element:A.jsx(Eb,{})}),A.jsx(se,{path:"/cpanel",element:A.jsx(Tb,{})}),A.jsx(se,{path:"/cpanel/login",element:A.jsx(Ib,{})}),A.jsx(se,{path:"/auth-test",element:A.jsx(yb,{})}),A.jsx(se,{path:"/topup",element:A.jsx(Ih,{})}),A.jsx(se,{path:"/recharge",element:A.jsx(Ih,{})}),A.jsx(se,{path:"/merchant/*",element:A.jsx(fb,{})}),A.jsx(se,{path:"/dashboard/login",element:A.jsx(db,{})}),A.jsx(se,{path:"/dashboard",element:A.jsx(hb,{})}),A.jsx(se,{path:"*",element:A.jsx(Sb,{})})]})]}),A.jsx(Ab,{})]}):A.jsxs(gU,{children:[A.jsx(xb,{}),A.jsx(Pb,{}),A.jsxs(x.Suspense,{fallback:A.jsx(Eh,{}),children:[null,A.jsxs(YT,{children:[A.jsx(se,{path:"/",element:Pe!=null&&Pe.isNativePlatform&&Pe.getPlatform()==="android"?z.createElement(()=>{const{user:e,loading:n}=Gi();return n?z.createElement(Eh):e?z.createElement(bh):z.createElement(wh)}):A.jsx(Th,{})}),A.jsx(se,{path:"/dashboard-redirect",element:A.jsx(sb,{})}),A.jsx(se,{path:"/landing",element:A.jsx(Th,{})}),A.jsx(se,{path:"/subscriptions",element:A.jsx(ib,{})}),A.jsx(se,{path:"/auth",element:A.jsx(ob,{})}),A.jsx(se,{path:"/sms-hook",element:A.jsx(bb,{})}),A.jsx(se,{path:"/user/login",element:A.jsx(wh,{})}),A.jsx(se,{path:"/user/forgot-password",element:A.jsx(ub,{})}),A.jsx(se,{path:"/user/register",element:A.jsx(Sh,{})}),A.jsx(se,{path:"/register",element:A.jsx(Sh,{})}),A.jsx(se,{path:"/user/account-setup",element:A.jsx(cb,{})}),A.jsx(se,{path:"/user/pending-approval",element:A.jsx(pb,{})}),A.jsx(se,{path:"/user/dashboard",element:A.jsx(bh,{})}),A.jsx(se,{path:"/user/add-wallet",element:A.jsx(wb,{})}),A.jsx(se,{path:"/admin/login",element:A.jsx(mb,{})}),A.jsx(se,{path:"/admin/dashboard",element:A.jsx(gb,{})}),A.jsx(se,{path:"/admin/topups",element:A.jsx(ab,{})}),A.jsx(se,{path:"/admin/notifications",element:A.jsx(lb,{})}),A.jsx(se,{path:"/profile-settings",element:A.jsx(vb,{})}),A.jsx(se,{path:"/transactions",element:A.jsx(_b,{})}),A.jsx(se,{path:"/referrals",element:A.jsx(Eb,{})}),A.jsx(se,{path:"/cpanel",element:A.jsx(Tb,{})}),A.jsx(se,{path:"/cpanel/login",element:A.jsx(Ib,{})}),A.jsx(se,{path:"/auth-test",element:A.jsx(yb,{})}),A.jsx(se,{path:"/topup",element:A.jsx(Ih,{})}),A.jsx(se,{path:"/recharge",element:A.jsx(Ih,{})}),A.jsx(se,{path:"/merchant/*",element:A.jsx(fb,{})}),A.jsx(se,{path:"/dashboard/login",element:A.jsx(db,{})}),A.jsx(se,{path:"/dashboard",element:A.jsx(hb,{})}),A.jsx(se,{path:"*",element:A.jsx(Sb,{})})]})]}),A.jsx(Ab,{})]})]})})}),DD=x.createContext(void 0),S8=({children:t})=>{const[e,n]=x.useState(null),[r,s]=x.useState(!1),[i,o]=x.useState(null),{profile:a,user:l}=Gi();x.useEffect(()=>{try{const p=localStorage.getItem("cashier_shift_user"),f=localStorage.getItem("cashier_shift_active"),v=localStorage.getItem("cashier_shift_start_at");p&&n(JSON.parse(p)),f&&s(f==="true"),v&&o(Number(v))}catch{}},[]),x.useEffect(()=>{if(!(a!=null&&a.shopId))return;const p=ve(Q,"cashierShift",a.shopId);let f=null;return(async()=>{try{(await St(p)).exists()||await Wi(p,{isShiftActive:!1,shiftStartAt:null,shiftUser:null}),f=lp(p,y=>{if(y.exists()){const E=y.data(),w=(E==null?void 0:E.shiftUser)||null,_=!!(E!=null&&E.isShiftActive),I=(E==null?void 0:E.shiftStartAt)??null;let D=w;if(!D)try{const O=localStorage.getItem("cashier_shift_user"),V=O?JSON.parse(O):null;V&&(D=V)}catch{}n(D),s(_),o(typeof I=="number"?I:I?Number(I):null);try{D?localStorage.setItem("cashier_shift_user",JSON.stringify(D)):localStorage.removeItem("cashier_shift_user"),localStorage.setItem("cashier_shift_active",_?"true":"false"),I!=null&&localStorage.setItem("cashier_shift_start_at",String(I))}catch{}}},y=>{console.warn("cashierShift snapshot error:",y)})}catch(v){console.warn("Failed to init cashierShift doc:",v)}})(),()=>{f&&f()}},[a==null?void 0:a.shopId]);const c=p=>{n(p);try{p?localStorage.setItem("cashier_shift_user",JSON.stringify(p)):localStorage.removeItem("cashier_shift_user")}catch{}try{if(a!=null&&a.shopId){const f=ve(Q,"cashierShift",a.shopId);st(f,{shiftUser:p||null})}}catch{}},d=()=>{s(!0);try{localStorage.setItem("cashier_shift_active","true")}catch{}const p=Date.now();o(p);try{localStorage.setItem("cashier_shift_start_at",String(p))}catch{}try{if(a!=null&&a.shopId){const f=ve(Q,"cashierShift",a.shopId);st(f,{isShiftActive:!0,shiftStartAt:p})}}catch{}try{const v=`cashBalance_${(l==null?void 0:l.uid)||"default"}`,y=`userCashBalance_${(l==null?void 0:l.uid)||"default"}`,E=`walletBalances_${(l==null?void 0:l.uid)||"default"}`;let w=localStorage.getItem(v);if(w==null){const I=localStorage.getItem(y);if(I!=null){w=I;try{localStorage.setItem(v,I),localStorage.removeItem(y)}catch{}}}if(w==null&&(l!=null&&l.uid)){const I=localStorage.getItem("cashBalance"),D=localStorage.getItem("userCashBalance");if(I!=null){try{localStorage.setItem(v,I),localStorage.removeItem("cashBalance")}catch{}w=I}else if(D!=null){try{localStorage.setItem(v,D),localStorage.removeItem("userCashBalance")}catch{}w=D}}const _=localStorage.getItem(E);w?localStorage.setItem("shiftStartDrawerFunds",w):localStorage.setItem("shiftStartDrawerFunds","0"),_?localStorage.setItem("shiftStartWalletBalances",_):localStorage.setItem("shiftStartWalletBalances","{}")}catch{}try{a!=null&&a.shopId&&(async()=>{try{const f=ve(Q,"dashboardData",a.shopId),v=await St(f);if(v.exists()){const y=v.data(),E=Number((y==null?void 0:y.cashBalance)??0),w=(y==null?void 0:y.walletBalances)??{};try{const _=localStorage.getItem("shiftStartDrawerFunds"),I=localStorage.getItem("shiftStartWalletBalances"),D=_?parseFloat(_):0,O=I?JSON.parse(I):{},V=!_||!Number.isFinite(D)||D===0,S=!I||Object.keys(O||{}).length===0;V&&localStorage.setItem("shiftStartDrawerFunds",String(Number.isFinite(E)?E:0)),S&&localStorage.setItem("shiftStartWalletBalances",JSON.stringify(w||{}))}catch{}}}catch(f){console.warn("Shift start Firebase read failed:",f)}})()}catch{}},h=()=>{s(!1);try{localStorage.setItem("cashier_shift_active","false")}catch{}try{if(a!=null&&a.shopId){const p=ve(Q,"cashierShift",a.shopId);st(p,{isShiftActive:!1})}}catch{}};return A.jsx(DD.Provider,{value:{shiftUser:e,isShiftActive:r,shiftStartAt:i,setShiftUser:c,startShift:d,endShift:h},children:t})},n7=()=>{const t=x.useContext(DD);if(!t)throw new Error("useShift must be used within ShiftProvider");return t},ND=x.createContext(void 0);function b8({children:t}){const{profile:e,user:n,loading:r}=Gi(),[s,i]=x.useState(null),[o,a]=x.useState(null),[l,c]=x.useState(!0);x.useEffect(()=>{!r&&e?(i(e.shopId),a((e==null?void 0:e.shopName)||(n==null?void 0:n.displayName)||""),c(!1)):r||c(!1)},[e,r]);const d={shopId:s,shopName:o,loading:l};return A.jsx(ND.Provider,{value:d,children:t})}function r7(){const t=x.useContext(ND);return t===void 0?{shopId:null,shopName:null,loading:!1}:t}try{const t=navigator.userAgent||navigator.vendor||"",e=/iPad|iPhone|iPod/.test(t),n=document.documentElement;n&&(n.classList.toggle("ios",e),n.classList.toggle("android",!e))}catch{}try{kD()}catch{}Z1(document.getElementById("root")).render(A.jsx(zz,{children:A.jsx(S8,{children:A.jsx(b8,{children:A.jsx(I8,{})})})}));export{PD as $,CV as A,FP as B,DV as C,ef as D,OV as E,dE as F,i3 as G,Wi as H,Gy as I,ot as J,St as K,wU as L,UV as M,O8 as N,st as O,t7 as P,xz as Q,z as R,BV as S,q8 as T,qV as U,$8 as V,z8 as W,kv as X,Cs as Y,Rx as Z,es as _,ld as a,iV as a$,je as a0,Pp as a1,jO as a2,Cn as a3,Ct as a4,Ir as a5,nV as a6,Oi as a7,$V as a8,Oe as a9,vF as aA,ql as aB,M8 as aC,L8 as aD,CD as aE,jV as aF,Q8 as aG,Y8 as aH,X8 as aI,Bz as aJ,Z8 as aK,n8 as aL,DO as aM,r7 as aN,Y9 as aO,Mz as aP,LV as aQ,HV as aR,Mn as aS,nP as aT,R8 as aU,bF as aV,rx as aW,AF as aX,xF as aY,tx as aZ,Vi as a_,Zh as aa,n7 as ab,RD as ac,Pe as ad,gT as ae,kV as af,Xk as ag,Eh as ah,_T as ai,YT as aj,se as ak,B8 as al,kz as am,be as an,Lz as ao,vT as ap,NV as aq,G8 as ar,P_ as as,ax as at,Af as au,x_ as av,x8 as aw,Dx as ax,AD as ay,X9 as az,V8 as b,id as b0,ug as b1,RV as b2,F8 as b3,si as b4,U8 as b5,Fz as b6,zV as b7,K8 as b8,Qb as b9,bD as ba,a8 as bb,LO as bc,IU as bd,r8 as be,e7 as bf,kg as bg,Lg as bh,H8 as bi,J8 as bj,ex as c,Yn as d,ye as e,Q as f,Ne as g,nD as h,uE as i,A as j,Ki as k,sa as l,yT as m,FV as n,ms as o,VV as p,Ce as q,x as r,Ae as s,s3 as t,Gi as u,ve as v,lp as w,It as x,W8 as y,Uz as z};
