const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./LandingPage-CLETKv1r.js","./card-CJtgt22j.js","./BrandLogo-D_YGEepM.js","./brandingService-C8X_E8ms.js","./whatsappService-DizfJqtU.js","./appDownloadService-BdMq41zN.js","./arrow-left-B3Ptn-mB.js","./star-BZRqKiE8.js","./crown-B-JJ7jGB.js","./download-CMHEMId1.js","./zap-LULVjSSq.js","./shield-UNnwisJ-.js","./chart-column-DsDq-qRS.js","./circle-check-big-zmjL59L_.js","./SubscriptionsPage-BC4X0Pi5.js","./contentService-mO3tPzad.js","./calendar-BE6Gk0b2.js","./AuthPage-BuD7lIcz.js","./TopUpPage-omyuvztK.js","./select-DPek_62f.js","./Combination-DQtlRcvV.js","./index-cB24D-Zw.js","./AdminTopupsPage-1sJGPqdv.js","./AdminNotificationsPage-ClF6X3K6.js","./label-C3jr878i.js","./textarea-DZlBmBlN.js","./link-DKX0yIKS.js","./UserRegisterPage-BNyW5h3F.js","./alert-Brq-6fx9.js","./wallet-BPYvdDw5.js","./user-plus-Cex4TIOh.js","./share-2-6pU8olPX.js","./phone-Cau7Hos_.js","./store-DX34ZFOO.js","./UserAccountSetupPage-qpJpC6Kb.js","./DashboardLoginPage-Bj1KbOjR.js","./ProtectedDashboard-D0oXQozE.js","./badge-IWmtCyaI.js","./MasterPinDialog-DbZV4-13.js","./dialog-vGJZIRWz.js","./circle-alert-BXqkrPlH.js","./dollar-sign-DkUN5Chr.js","./circle-x-CIaKJihT.js","./ProtectedUserDashboard-BWChGqWf.js","./broadcastService-BS2xcw61.js","./MerchantDashboard-B8dBi-Q8.js","./dropdown-menu-DHvHQpSY.js","./index-T7xh4Z1V.js","./WalletsManagement-tNELPHtz.js","./progress-B3e3D7e5.js","./walletDailyLimitsService-DOXQzrXL.js","./square-pen-GobuzbWN.js","./PendingApprovalPage-CQApi8sX.js","./gift-yxGuh7p5.js","./refresh-cw-B6lEDDjR.js","./AdminLogin-CEnxqprF.js","./ProtectedAdminDashboard-WX824Wh_.js","./ProfileIcon-DuylvAq7.js","./avatars-CQGTrUQX.js","./switch-D2jJBW_H.js","./separator-B15LeTHE.js","./copy-BmisnciJ.js","./users-C6qR99Ao.js","./AuthTestPage-CBCsCcGS.js","./ProfileSettingsPage-Bc7iXC2B.js","./walletSelectionPinService-Cd1Y260o.js","./TransactionsPage-fKbVjU_W.js","./MaintenanceDialog-Bx9h42pi.js","./profitService-vyye6JvC.js","./WalletAdditionPage-DbVjhtt1.js","./ReferralsPage-DMaGC1Wc.js","./CPanelPage-DPg3CCNk.js","./CPanelLoginPage-D_MYtUnb.js"])))=>i.map(i=>d[i]);
var zD=Object.defineProperty;var B0=t=>{throw TypeError(t)};var qD=(t,e,n)=>e in t?zD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var $0=(t,e,n)=>qD(t,typeof e!="symbol"?e+"":e,n),bm=(t,e,n)=>e.has(t)||B0("Cannot "+n);var $=(t,e,n)=>(bm(t,e,"read from private field"),n?n.call(t):e.get(t)),De=(t,e,n)=>e.has(t)?B0("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),fe=(t,e,n,r)=>(bm(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Gt=(t,e,n)=>(bm(t,e,"access private method"),n);var Cd=(t,e,n,r)=>({set _(s){fe(t,e,s,n)},get _(){return $(t,e,r)}});function HD(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Rb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Cb={exports:{}},rp={},kb={exports:{}},xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qu=Symbol.for("react.element"),WD=Symbol.for("react.portal"),KD=Symbol.for("react.fragment"),GD=Symbol.for("react.strict_mode"),QD=Symbol.for("react.profiler"),YD=Symbol.for("react.provider"),XD=Symbol.for("react.context"),JD=Symbol.for("react.forward_ref"),ZD=Symbol.for("react.suspense"),eN=Symbol.for("react.memo"),tN=Symbol.for("react.lazy"),z0=Symbol.iterator;function nN(t){return t===null||typeof t!="object"?null:(t=z0&&t[z0]||t["@@iterator"],typeof t=="function"?t:null)}var Db={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Nb=Object.assign,Ob={};function Al(t,e,n){this.props=t,this.context=e,this.refs=Ob,this.updater=n||Db}Al.prototype.isReactComponent={};Al.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Al.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Vb(){}Vb.prototype=Al.prototype;function Sv(t,e,n){this.props=t,this.context=e,this.refs=Ob,this.updater=n||Db}var bv=Sv.prototype=new Vb;bv.constructor=Sv;Nb(bv,Al.prototype);bv.isPureReactComponent=!0;var q0=Array.isArray,Lb=Object.prototype.hasOwnProperty,Av={current:null},Mb={key:!0,ref:!0,__self:!0,__source:!0};function Fb(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Lb.call(e,r)&&!Mb.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:qu,type:t,key:i,ref:o,props:s,_owner:Av.current}}function rN(t,e){return{$$typeof:qu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function xv(t){return typeof t=="object"&&t!==null&&t.$$typeof===qu}function sN(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var H0=/\/+/g;function Am(t,e){return typeof t=="object"&&t!==null&&t.key!=null?sN(""+t.key):e.toString(36)}function mh(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case qu:case WD:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Am(o,0):r,q0(s)?(n="",t!=null&&(n=t.replace(H0,"$&/")+"/"),mh(s,e,n,"",function(c){return c})):s!=null&&(xv(s)&&(s=rN(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(H0,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",q0(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Am(i,a);o+=mh(i,e,n,l,s)}else if(l=nN(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Am(i,a++),o+=mh(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function kd(t,e,n){if(t==null)return t;var r=[],s=0;return mh(t,r,"","",function(i){return e.call(n,i,s++)}),r}function iN(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var pn={current:null},gh={transition:null},oN={ReactCurrentDispatcher:pn,ReactCurrentBatchConfig:gh,ReactCurrentOwner:Av};function Ub(){throw Error("act(...) is not supported in production builds of React.")}xe.Children={map:kd,forEach:function(t,e,n){kd(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return kd(t,function(){e++}),e},toArray:function(t){return kd(t,function(e){return e})||[]},only:function(t){if(!xv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};xe.Component=Al;xe.Fragment=KD;xe.Profiler=QD;xe.PureComponent=Sv;xe.StrictMode=GD;xe.Suspense=ZD;xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oN;xe.act=Ub;xe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Nb({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Av.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Lb.call(e,l)&&!Mb.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:qu,type:t.type,key:s,ref:i,props:r,_owner:o}};xe.createContext=function(t){return t={$$typeof:XD,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:YD,_context:t},t.Consumer=t};xe.createElement=Fb;xe.createFactory=function(t){var e=Fb.bind(null,t);return e.type=t,e};xe.createRef=function(){return{current:null}};xe.forwardRef=function(t){return{$$typeof:JD,render:t}};xe.isValidElement=xv;xe.lazy=function(t){return{$$typeof:tN,_payload:{_status:-1,_result:t},_init:iN}};xe.memo=function(t,e){return{$$typeof:eN,type:t,compare:e===void 0?null:e}};xe.startTransition=function(t){var e=gh.transition;gh.transition={};try{t()}finally{gh.transition=e}};xe.unstable_act=Ub;xe.useCallback=function(t,e){return pn.current.useCallback(t,e)};xe.useContext=function(t){return pn.current.useContext(t)};xe.useDebugValue=function(){};xe.useDeferredValue=function(t){return pn.current.useDeferredValue(t)};xe.useEffect=function(t,e){return pn.current.useEffect(t,e)};xe.useId=function(){return pn.current.useId()};xe.useImperativeHandle=function(t,e,n){return pn.current.useImperativeHandle(t,e,n)};xe.useInsertionEffect=function(t,e){return pn.current.useInsertionEffect(t,e)};xe.useLayoutEffect=function(t,e){return pn.current.useLayoutEffect(t,e)};xe.useMemo=function(t,e){return pn.current.useMemo(t,e)};xe.useReducer=function(t,e,n){return pn.current.useReducer(t,e,n)};xe.useRef=function(t){return pn.current.useRef(t)};xe.useState=function(t){return pn.current.useState(t)};xe.useSyncExternalStore=function(t,e,n){return pn.current.useSyncExternalStore(t,e,n)};xe.useTransition=function(){return pn.current.useTransition()};xe.version="18.3.1";kb.exports=xe;var A=kb.exports;const z=Rb(A),jb=HD({__proto__:null,default:z},[A]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aN=A,lN=Symbol.for("react.element"),cN=Symbol.for("react.fragment"),uN=Object.prototype.hasOwnProperty,dN=aN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,hN={key:!0,ref:!0,__self:!0,__source:!0};function Bb(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)uN.call(e,r)&&!hN.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:lN,type:t,key:i,ref:o,props:s,_owner:dN.current}}rp.Fragment=cN;rp.jsx=Bb;rp.jsxs=Bb;Cb.exports=rp;var x=Cb.exports,$b={exports:{}},Wn={},zb={exports:{}},qb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,U){var Y=F.length;F.push(U);e:for(;0<Y;){var de=Y-1>>>1,ne=F[de];if(0<s(ne,U))F[de]=U,F[Y]=ne,Y=de;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var U=F[0],Y=F.pop();if(Y!==U){F[0]=Y;e:for(var de=0,ne=F.length,ce=ne>>>1;de<ce;){var le=2*(de+1)-1,we=F[le],Qe=le+1,ae=F[Qe];if(0>s(we,Y))Qe<ne&&0>s(ae,we)?(F[de]=ae,F[Qe]=Y,de=Qe):(F[de]=we,F[le]=Y,de=le);else if(Qe<ne&&0>s(ae,Y))F[de]=ae,F[Qe]=Y,de=Qe;else break e}}return U}function s(F,U){var Y=F.sortIndex-U.sortIndex;return Y!==0?Y:F.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,p=3,f=!1,_=!1,y=!1,E=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(F){for(var U=n(c);U!==null;){if(U.callback===null)r(c);else if(U.startTime<=F)r(c),U.sortIndex=U.expirationTime,e(l,U);else break;U=n(c)}}function D(F){if(y=!1,I(F),!_)if(n(l)!==null)_=!0,ie(O);else{var U=n(c);U!==null&&G(D,U.startTime-F)}}function O(F,U){_=!1,y&&(y=!1,w(T),T=-1),f=!0;var Y=p;try{for(I(U),h=n(l);h!==null&&(!(h.expirationTime>U)||F&&!P());){var de=h.callback;if(typeof de=="function"){h.callback=null,p=h.priorityLevel;var ne=de(h.expirationTime<=U);U=t.unstable_now(),typeof ne=="function"?h.callback=ne:h===n(l)&&r(l),I(U)}else r(l);h=n(l)}if(h!==null)var ce=!0;else{var le=n(c);le!==null&&G(D,le.startTime-U),ce=!1}return ce}finally{h=null,p=Y,f=!1}}var V=!1,S=null,T=-1,b=5,k=-1;function P(){return!(t.unstable_now()-k<b)}function N(){if(S!==null){var F=t.unstable_now();k=F;var U=!0;try{U=S(!0,F)}finally{U?C():(V=!1,S=null)}}else V=!1}var C;if(typeof v=="function")C=function(){v(N)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,Z=q.port2;q.port1.onmessage=N,C=function(){Z.postMessage(null)}}else C=function(){E(N,0)};function ie(F){S=F,V||(V=!0,C())}function G(F,U){T=E(function(){F(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){_||f||(_=!0,ie(O))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(F){switch(p){case 1:case 2:case 3:var U=3;break;default:U=p}var Y=p;p=U;try{return F()}finally{p=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,U){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var Y=p;p=F;try{return U()}finally{p=Y}},t.unstable_scheduleCallback=function(F,U,Y){var de=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?de+Y:de):Y=de,F){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=Y+ne,F={id:d++,callback:U,priorityLevel:F,startTime:Y,expirationTime:ne,sortIndex:-1},Y>de?(F.sortIndex=Y,e(c,F),n(l)===null&&F===n(c)&&(y?(w(T),T=-1):y=!0,G(D,Y-de))):(F.sortIndex=ne,e(l,F),_||f||(_=!0,ie(O))),F},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(F){var U=p;return function(){var Y=p;p=U;try{return F.apply(this,arguments)}finally{p=Y}}}})(qb);zb.exports=qb;var fN=zb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pN=A,qn=fN;function W(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Hb=new Set,eu={};function Xo(t,e){Ya(t,e),Ya(t+"Capture",e)}function Ya(t,e){for(eu[t]=e,t=0;t<e.length;t++)Hb.add(e[t])}var vs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cg=Object.prototype.hasOwnProperty,mN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,W0={},K0={};function gN(t){return Cg.call(K0,t)?!0:Cg.call(W0,t)?!1:mN.test(t)?K0[t]=!0:(W0[t]=!0,!1)}function yN(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function vN(t,e,n,r){if(e===null||typeof e>"u"||yN(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function mn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Ht={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ht[t]=new mn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ht[e]=new mn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ht[t]=new mn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ht[t]=new mn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ht[t]=new mn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ht[t]=new mn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ht[t]=new mn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ht[t]=new mn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ht[t]=new mn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Pv=/[\-:]([a-z])/g;function Rv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Pv,Rv);Ht[e]=new mn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Pv,Rv);Ht[e]=new mn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Pv,Rv);Ht[e]=new mn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ht[t]=new mn(t,1,!1,t.toLowerCase(),null,!1,!1)});Ht.xlinkHref=new mn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ht[t]=new mn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Cv(t,e,n,r){var s=Ht.hasOwnProperty(e)?Ht[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(vN(e,n,s,r)&&(n=null),r||s===null?gN(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ps=pN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Dd=Symbol.for("react.element"),_a=Symbol.for("react.portal"),wa=Symbol.for("react.fragment"),kv=Symbol.for("react.strict_mode"),kg=Symbol.for("react.profiler"),Wb=Symbol.for("react.provider"),Kb=Symbol.for("react.context"),Dv=Symbol.for("react.forward_ref"),Dg=Symbol.for("react.suspense"),Ng=Symbol.for("react.suspense_list"),Nv=Symbol.for("react.memo"),Xs=Symbol.for("react.lazy"),Gb=Symbol.for("react.offscreen"),G0=Symbol.iterator;function ic(t){return t===null||typeof t!="object"?null:(t=G0&&t[G0]||t["@@iterator"],typeof t=="function"?t:null)}var ut=Object.assign,xm;function Ec(t){if(xm===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);xm=e&&e[1]||""}return`
`+xm+t}var Pm=!1;function Rm(t,e){if(!t||Pm)return"";Pm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Pm=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ec(t):""}function _N(t){switch(t.tag){case 5:return Ec(t.type);case 16:return Ec("Lazy");case 13:return Ec("Suspense");case 19:return Ec("SuspenseList");case 0:case 2:case 15:return t=Rm(t.type,!1),t;case 11:return t=Rm(t.type.render,!1),t;case 1:return t=Rm(t.type,!0),t;default:return""}}function Og(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case wa:return"Fragment";case _a:return"Portal";case kg:return"Profiler";case kv:return"StrictMode";case Dg:return"Suspense";case Ng:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Kb:return(t.displayName||"Context")+".Consumer";case Wb:return(t._context.displayName||"Context")+".Provider";case Dv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Nv:return e=t.displayName||null,e!==null?e:Og(t.type)||"Memo";case Xs:e=t._payload,t=t._init;try{return Og(t(e))}catch{}}return null}function wN(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Og(e);case 8:return e===kv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ai(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Qb(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function EN(t){var e=Qb(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Nd(t){t._valueTracker||(t._valueTracker=EN(t))}function Yb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Qb(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function qh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Vg(t,e){var n=e.checked;return ut({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Q0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ai(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Xb(t,e){e=e.checked,e!=null&&Cv(t,"checked",e,!1)}function Lg(t,e){Xb(t,e);var n=Ai(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Mg(t,e.type,n):e.hasOwnProperty("defaultValue")&&Mg(t,e.type,Ai(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Y0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Mg(t,e,n){(e!=="number"||qh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Tc=Array.isArray;function ka(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ai(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Fg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return ut({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function X0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(W(92));if(Tc(n)){if(1<n.length)throw Error(W(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ai(n)}}function Jb(t,e){var n=Ai(e.value),r=Ai(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function J0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Zb(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ug(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Zb(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Od,eA=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Od=Od||document.createElement("div"),Od.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Od.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function tu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var kc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},TN=["Webkit","ms","Moz","O"];Object.keys(kc).forEach(function(t){TN.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),kc[e]=kc[t]})});function tA(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||kc.hasOwnProperty(t)&&kc[t]?(""+e).trim():e+"px"}function nA(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=tA(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var IN=ut({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jg(t,e){if(e){if(IN[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function Bg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $g=null;function Ov(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var zg=null,Da=null,Na=null;function Z0(t){if(t=Ku(t)){if(typeof zg!="function")throw Error(W(280));var e=t.stateNode;e&&(e=lp(e),zg(t.stateNode,t.type,e))}}function rA(t){Da?Na?Na.push(t):Na=[t]:Da=t}function sA(){if(Da){var t=Da,e=Na;if(Na=Da=null,Z0(t),e)for(t=0;t<e.length;t++)Z0(e[t])}}function iA(t,e){return t(e)}function oA(){}var Cm=!1;function aA(t,e,n){if(Cm)return t(e,n);Cm=!0;try{return iA(t,e,n)}finally{Cm=!1,(Da!==null||Na!==null)&&(oA(),sA())}}function nu(t,e){var n=t.stateNode;if(n===null)return null;var r=lp(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(W(231,e,typeof n));return n}var qg=!1;if(vs)try{var oc={};Object.defineProperty(oc,"passive",{get:function(){qg=!0}}),window.addEventListener("test",oc,oc),window.removeEventListener("test",oc,oc)}catch{qg=!1}function SN(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Dc=!1,Hh=null,Wh=!1,Hg=null,bN={onError:function(t){Dc=!0,Hh=t}};function AN(t,e,n,r,s,i,o,a,l){Dc=!1,Hh=null,SN.apply(bN,arguments)}function xN(t,e,n,r,s,i,o,a,l){if(AN.apply(this,arguments),Dc){if(Dc){var c=Hh;Dc=!1,Hh=null}else throw Error(W(198));Wh||(Wh=!0,Hg=c)}}function Jo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function lA(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function eE(t){if(Jo(t)!==t)throw Error(W(188))}function PN(t){var e=t.alternate;if(!e){if(e=Jo(t),e===null)throw Error(W(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return eE(s),t;if(i===r)return eE(s),e;i=i.sibling}throw Error(W(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(W(189))}}if(n.alternate!==r)throw Error(W(190))}if(n.tag!==3)throw Error(W(188));return n.stateNode.current===n?t:e}function cA(t){return t=PN(t),t!==null?uA(t):null}function uA(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=uA(t);if(e!==null)return e;t=t.sibling}return null}var dA=qn.unstable_scheduleCallback,tE=qn.unstable_cancelCallback,RN=qn.unstable_shouldYield,CN=qn.unstable_requestPaint,yt=qn.unstable_now,kN=qn.unstable_getCurrentPriorityLevel,Vv=qn.unstable_ImmediatePriority,hA=qn.unstable_UserBlockingPriority,Kh=qn.unstable_NormalPriority,DN=qn.unstable_LowPriority,fA=qn.unstable_IdlePriority,sp=null,Kr=null;function NN(t){if(Kr&&typeof Kr.onCommitFiberRoot=="function")try{Kr.onCommitFiberRoot(sp,t,void 0,(t.current.flags&128)===128)}catch{}}var vr=Math.clz32?Math.clz32:LN,ON=Math.log,VN=Math.LN2;function LN(t){return t>>>=0,t===0?32:31-(ON(t)/VN|0)|0}var Vd=64,Ld=4194304;function Ic(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Gh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Ic(a):(i&=o,i!==0&&(r=Ic(i)))}else o=n&~s,o!==0?r=Ic(o):i!==0&&(r=Ic(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-vr(e),s=1<<n,r|=t[n],e&=~s;return r}function MN(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function FN(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-vr(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=MN(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Wg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function pA(){var t=Vd;return Vd<<=1,!(Vd&4194240)&&(Vd=64),t}function km(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Hu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-vr(e),t[e]=n}function UN(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-vr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Lv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-vr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var $e=0;function mA(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var gA,Mv,yA,vA,_A,Kg=!1,Md=[],hi=null,fi=null,pi=null,ru=new Map,su=new Map,Zs=[],jN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function nE(t,e){switch(t){case"focusin":case"focusout":hi=null;break;case"dragenter":case"dragleave":fi=null;break;case"mouseover":case"mouseout":pi=null;break;case"pointerover":case"pointerout":ru.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":su.delete(e.pointerId)}}function ac(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ku(e),e!==null&&Mv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function BN(t,e,n,r,s){switch(e){case"focusin":return hi=ac(hi,t,e,n,r,s),!0;case"dragenter":return fi=ac(fi,t,e,n,r,s),!0;case"mouseover":return pi=ac(pi,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ru.set(i,ac(ru.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,su.set(i,ac(su.get(i)||null,t,e,n,r,s)),!0}return!1}function wA(t){var e=vo(t.target);if(e!==null){var n=Jo(e);if(n!==null){if(e=n.tag,e===13){if(e=lA(n),e!==null){t.blockedOn=e,_A(t.priority,function(){yA(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function yh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Gg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);$g=r,n.target.dispatchEvent(r),$g=null}else return e=Ku(n),e!==null&&Mv(e),t.blockedOn=n,!1;e.shift()}return!0}function rE(t,e,n){yh(t)&&n.delete(e)}function $N(){Kg=!1,hi!==null&&yh(hi)&&(hi=null),fi!==null&&yh(fi)&&(fi=null),pi!==null&&yh(pi)&&(pi=null),ru.forEach(rE),su.forEach(rE)}function lc(t,e){t.blockedOn===e&&(t.blockedOn=null,Kg||(Kg=!0,qn.unstable_scheduleCallback(qn.unstable_NormalPriority,$N)))}function iu(t){function e(s){return lc(s,t)}if(0<Md.length){lc(Md[0],t);for(var n=1;n<Md.length;n++){var r=Md[n];r.blockedOn===t&&(r.blockedOn=null)}}for(hi!==null&&lc(hi,t),fi!==null&&lc(fi,t),pi!==null&&lc(pi,t),ru.forEach(e),su.forEach(e),n=0;n<Zs.length;n++)r=Zs[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Zs.length&&(n=Zs[0],n.blockedOn===null);)wA(n),n.blockedOn===null&&Zs.shift()}var Oa=Ps.ReactCurrentBatchConfig,Qh=!0;function zN(t,e,n,r){var s=$e,i=Oa.transition;Oa.transition=null;try{$e=1,Fv(t,e,n,r)}finally{$e=s,Oa.transition=i}}function qN(t,e,n,r){var s=$e,i=Oa.transition;Oa.transition=null;try{$e=4,Fv(t,e,n,r)}finally{$e=s,Oa.transition=i}}function Fv(t,e,n,r){if(Qh){var s=Gg(t,e,n,r);if(s===null)Bm(t,e,r,Yh,n),nE(t,r);else if(BN(s,t,e,n,r))r.stopPropagation();else if(nE(t,r),e&4&&-1<jN.indexOf(t)){for(;s!==null;){var i=Ku(s);if(i!==null&&gA(i),i=Gg(t,e,n,r),i===null&&Bm(t,e,r,Yh,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Bm(t,e,r,null,n)}}var Yh=null;function Gg(t,e,n,r){if(Yh=null,t=Ov(r),t=vo(t),t!==null)if(e=Jo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=lA(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Yh=t,null}function EA(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kN()){case Vv:return 1;case hA:return 4;case Kh:case DN:return 16;case fA:return 536870912;default:return 16}default:return 16}}var li=null,Uv=null,vh=null;function TA(){if(vh)return vh;var t,e=Uv,n=e.length,r,s="value"in li?li.value:li.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return vh=s.slice(t,1<r?1-r:void 0)}function _h(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Fd(){return!0}function sE(){return!1}function Kn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Fd:sE,this.isPropagationStopped=sE,this}return ut(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Fd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Fd)},persist:function(){},isPersistent:Fd}),e}var xl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jv=Kn(xl),Wu=ut({},xl,{view:0,detail:0}),HN=Kn(Wu),Dm,Nm,cc,ip=ut({},Wu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==cc&&(cc&&t.type==="mousemove"?(Dm=t.screenX-cc.screenX,Nm=t.screenY-cc.screenY):Nm=Dm=0,cc=t),Dm)},movementY:function(t){return"movementY"in t?t.movementY:Nm}}),iE=Kn(ip),WN=ut({},ip,{dataTransfer:0}),KN=Kn(WN),GN=ut({},Wu,{relatedTarget:0}),Om=Kn(GN),QN=ut({},xl,{animationName:0,elapsedTime:0,pseudoElement:0}),YN=Kn(QN),XN=ut({},xl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),JN=Kn(XN),ZN=ut({},xl,{data:0}),oE=Kn(ZN),e2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},t2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},n2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function r2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=n2[t])?!!e[t]:!1}function Bv(){return r2}var s2=ut({},Wu,{key:function(t){if(t.key){var e=e2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=_h(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?t2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bv,charCode:function(t){return t.type==="keypress"?_h(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?_h(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),i2=Kn(s2),o2=ut({},ip,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),aE=Kn(o2),a2=ut({},Wu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bv}),l2=Kn(a2),c2=ut({},xl,{propertyName:0,elapsedTime:0,pseudoElement:0}),u2=Kn(c2),d2=ut({},ip,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),h2=Kn(d2),f2=[9,13,27,32],$v=vs&&"CompositionEvent"in window,Nc=null;vs&&"documentMode"in document&&(Nc=document.documentMode);var p2=vs&&"TextEvent"in window&&!Nc,IA=vs&&(!$v||Nc&&8<Nc&&11>=Nc),lE=" ",cE=!1;function SA(t,e){switch(t){case"keyup":return f2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bA(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ea=!1;function m2(t,e){switch(t){case"compositionend":return bA(e);case"keypress":return e.which!==32?null:(cE=!0,lE);case"textInput":return t=e.data,t===lE&&cE?null:t;default:return null}}function g2(t,e){if(Ea)return t==="compositionend"||!$v&&SA(t,e)?(t=TA(),vh=Uv=li=null,Ea=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return IA&&e.locale!=="ko"?null:e.data;default:return null}}var y2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!y2[t.type]:e==="textarea"}function AA(t,e,n,r){rA(r),e=Xh(e,"onChange"),0<e.length&&(n=new jv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Oc=null,ou=null;function v2(t){MA(t,0)}function op(t){var e=Sa(t);if(Yb(e))return t}function _2(t,e){if(t==="change")return e}var xA=!1;if(vs){var Vm;if(vs){var Lm="oninput"in document;if(!Lm){var dE=document.createElement("div");dE.setAttribute("oninput","return;"),Lm=typeof dE.oninput=="function"}Vm=Lm}else Vm=!1;xA=Vm&&(!document.documentMode||9<document.documentMode)}function hE(){Oc&&(Oc.detachEvent("onpropertychange",PA),ou=Oc=null)}function PA(t){if(t.propertyName==="value"&&op(ou)){var e=[];AA(e,ou,t,Ov(t)),aA(v2,e)}}function w2(t,e,n){t==="focusin"?(hE(),Oc=e,ou=n,Oc.attachEvent("onpropertychange",PA)):t==="focusout"&&hE()}function E2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return op(ou)}function T2(t,e){if(t==="click")return op(e)}function I2(t,e){if(t==="input"||t==="change")return op(e)}function S2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Tr=typeof Object.is=="function"?Object.is:S2;function au(t,e){if(Tr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Cg.call(e,s)||!Tr(t[s],e[s]))return!1}return!0}function fE(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function pE(t,e){var n=fE(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=fE(n)}}function RA(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?RA(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function CA(){for(var t=window,e=qh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=qh(t.document)}return e}function zv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function b2(t){var e=CA(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&RA(n.ownerDocument.documentElement,n)){if(r!==null&&zv(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=pE(n,i);var o=pE(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var A2=vs&&"documentMode"in document&&11>=document.documentMode,Ta=null,Qg=null,Vc=null,Yg=!1;function mE(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Yg||Ta==null||Ta!==qh(r)||(r=Ta,"selectionStart"in r&&zv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Vc&&au(Vc,r)||(Vc=r,r=Xh(Qg,"onSelect"),0<r.length&&(e=new jv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ta)))}function Ud(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ia={animationend:Ud("Animation","AnimationEnd"),animationiteration:Ud("Animation","AnimationIteration"),animationstart:Ud("Animation","AnimationStart"),transitionend:Ud("Transition","TransitionEnd")},Mm={},kA={};vs&&(kA=document.createElement("div").style,"AnimationEvent"in window||(delete Ia.animationend.animation,delete Ia.animationiteration.animation,delete Ia.animationstart.animation),"TransitionEvent"in window||delete Ia.transitionend.transition);function ap(t){if(Mm[t])return Mm[t];if(!Ia[t])return t;var e=Ia[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in kA)return Mm[t]=e[n];return t}var DA=ap("animationend"),NA=ap("animationiteration"),OA=ap("animationstart"),VA=ap("transitionend"),LA=new Map,gE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zi(t,e){LA.set(t,e),Xo(e,[t])}for(var Fm=0;Fm<gE.length;Fm++){var Um=gE[Fm],x2=Um.toLowerCase(),P2=Um[0].toUpperCase()+Um.slice(1);zi(x2,"on"+P2)}zi(DA,"onAnimationEnd");zi(NA,"onAnimationIteration");zi(OA,"onAnimationStart");zi("dblclick","onDoubleClick");zi("focusin","onFocus");zi("focusout","onBlur");zi(VA,"onTransitionEnd");Ya("onMouseEnter",["mouseout","mouseover"]);Ya("onMouseLeave",["mouseout","mouseover"]);Ya("onPointerEnter",["pointerout","pointerover"]);Ya("onPointerLeave",["pointerout","pointerover"]);Xo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Xo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Xo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Xo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Xo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Xo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),R2=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sc));function yE(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,xN(r,e,void 0,t),t.currentTarget=null}function MA(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;yE(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;yE(s,a,c),i=l}}}if(Wh)throw t=Hg,Wh=!1,Hg=null,t}function Je(t,e){var n=e[ty];n===void 0&&(n=e[ty]=new Set);var r=t+"__bubble";n.has(r)||(FA(e,t,2,!1),n.add(r))}function jm(t,e,n){var r=0;e&&(r|=4),FA(n,t,r,e)}var jd="_reactListening"+Math.random().toString(36).slice(2);function lu(t){if(!t[jd]){t[jd]=!0,Hb.forEach(function(n){n!=="selectionchange"&&(R2.has(n)||jm(n,!1,t),jm(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[jd]||(e[jd]=!0,jm("selectionchange",!1,e))}}function FA(t,e,n,r){switch(EA(e)){case 1:var s=zN;break;case 4:s=qN;break;default:s=Fv}n=s.bind(null,e,n,t),s=void 0,!qg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Bm(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=vo(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}aA(function(){var c=i,d=Ov(n),h=[];e:{var p=LA.get(t);if(p!==void 0){var f=jv,_=t;switch(t){case"keypress":if(_h(n)===0)break e;case"keydown":case"keyup":f=i2;break;case"focusin":_="focus",f=Om;break;case"focusout":_="blur",f=Om;break;case"beforeblur":case"afterblur":f=Om;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=iE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=KN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=l2;break;case DA:case NA:case OA:f=YN;break;case VA:f=u2;break;case"scroll":f=HN;break;case"wheel":f=h2;break;case"copy":case"cut":case"paste":f=JN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=aE}var y=(e&4)!==0,E=!y&&t==="scroll",w=y?p!==null?p+"Capture":null:p;y=[];for(var v=c,I;v!==null;){I=v;var D=I.stateNode;if(I.tag===5&&D!==null&&(I=D,w!==null&&(D=nu(v,w),D!=null&&y.push(cu(v,D,I)))),E)break;v=v.return}0<y.length&&(p=new f(p,_,null,n,d),h.push({event:p,listeners:y}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",p&&n!==$g&&(_=n.relatedTarget||n.fromElement)&&(vo(_)||_[_s]))break e;if((f||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,f?(_=n.relatedTarget||n.toElement,f=c,_=_?vo(_):null,_!==null&&(E=Jo(_),_!==E||_.tag!==5&&_.tag!==6)&&(_=null)):(f=null,_=c),f!==_)){if(y=iE,D="onMouseLeave",w="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(y=aE,D="onPointerLeave",w="onPointerEnter",v="pointer"),E=f==null?p:Sa(f),I=_==null?p:Sa(_),p=new y(D,v+"leave",f,n,d),p.target=E,p.relatedTarget=I,D=null,vo(d)===c&&(y=new y(w,v+"enter",_,n,d),y.target=I,y.relatedTarget=E,D=y),E=D,f&&_)t:{for(y=f,w=_,v=0,I=y;I;I=oa(I))v++;for(I=0,D=w;D;D=oa(D))I++;for(;0<v-I;)y=oa(y),v--;for(;0<I-v;)w=oa(w),I--;for(;v--;){if(y===w||w!==null&&y===w.alternate)break t;y=oa(y),w=oa(w)}y=null}else y=null;f!==null&&vE(h,p,f,y,!1),_!==null&&E!==null&&vE(h,E,_,y,!0)}}e:{if(p=c?Sa(c):window,f=p.nodeName&&p.nodeName.toLowerCase(),f==="select"||f==="input"&&p.type==="file")var O=_2;else if(uE(p))if(xA)O=I2;else{O=E2;var V=w2}else(f=p.nodeName)&&f.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(O=T2);if(O&&(O=O(t,c))){AA(h,O,n,d);break e}V&&V(t,p,c),t==="focusout"&&(V=p._wrapperState)&&V.controlled&&p.type==="number"&&Mg(p,"number",p.value)}switch(V=c?Sa(c):window,t){case"focusin":(uE(V)||V.contentEditable==="true")&&(Ta=V,Qg=c,Vc=null);break;case"focusout":Vc=Qg=Ta=null;break;case"mousedown":Yg=!0;break;case"contextmenu":case"mouseup":case"dragend":Yg=!1,mE(h,n,d);break;case"selectionchange":if(A2)break;case"keydown":case"keyup":mE(h,n,d)}var S;if($v)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Ea?SA(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(IA&&n.locale!=="ko"&&(Ea||T!=="onCompositionStart"?T==="onCompositionEnd"&&Ea&&(S=TA()):(li=d,Uv="value"in li?li.value:li.textContent,Ea=!0)),V=Xh(c,T),0<V.length&&(T=new oE(T,t,null,n,d),h.push({event:T,listeners:V}),S?T.data=S:(S=bA(n),S!==null&&(T.data=S)))),(S=p2?m2(t,n):g2(t,n))&&(c=Xh(c,"onBeforeInput"),0<c.length&&(d=new oE("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=S))}MA(h,e)})}function cu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Xh(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=nu(t,n),i!=null&&r.unshift(cu(t,i,s)),i=nu(t,e),i!=null&&r.push(cu(t,i,s))),t=t.return}return r}function oa(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function vE(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=nu(n,i),l!=null&&o.unshift(cu(n,l,a))):s||(l=nu(n,i),l!=null&&o.push(cu(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var C2=/\r\n?/g,k2=/\u0000|\uFFFD/g;function _E(t){return(typeof t=="string"?t:""+t).replace(C2,`
`).replace(k2,"")}function Bd(t,e,n){if(e=_E(e),_E(t)!==e&&n)throw Error(W(425))}function Jh(){}var Xg=null,Jg=null;function Zg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ey=typeof setTimeout=="function"?setTimeout:void 0,D2=typeof clearTimeout=="function"?clearTimeout:void 0,wE=typeof Promise=="function"?Promise:void 0,N2=typeof queueMicrotask=="function"?queueMicrotask:typeof wE<"u"?function(t){return wE.resolve(null).then(t).catch(O2)}:ey;function O2(t){setTimeout(function(){throw t})}function $m(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),iu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);iu(e)}function mi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function EE(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Pl=Math.random().toString(36).slice(2),$r="__reactFiber$"+Pl,uu="__reactProps$"+Pl,_s="__reactContainer$"+Pl,ty="__reactEvents$"+Pl,V2="__reactListeners$"+Pl,L2="__reactHandles$"+Pl;function vo(t){var e=t[$r];if(e)return e;for(var n=t.parentNode;n;){if(e=n[_s]||n[$r]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=EE(t);t!==null;){if(n=t[$r])return n;t=EE(t)}return e}t=n,n=t.parentNode}return null}function Ku(t){return t=t[$r]||t[_s],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Sa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(W(33))}function lp(t){return t[uu]||null}var ny=[],ba=-1;function qi(t){return{current:t}}function Ze(t){0>ba||(t.current=ny[ba],ny[ba]=null,ba--)}function Ke(t,e){ba++,ny[ba]=t.current,t.current=e}var xi={},sn=qi(xi),An=qi(!1),Lo=xi;function Xa(t,e){var n=t.type.contextTypes;if(!n)return xi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function xn(t){return t=t.childContextTypes,t!=null}function Zh(){Ze(An),Ze(sn)}function TE(t,e,n){if(sn.current!==xi)throw Error(W(168));Ke(sn,e),Ke(An,n)}function UA(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(W(108,wN(t)||"Unknown",s));return ut({},n,r)}function ef(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||xi,Lo=sn.current,Ke(sn,t),Ke(An,An.current),!0}function IE(t,e,n){var r=t.stateNode;if(!r)throw Error(W(169));n?(t=UA(t,e,Lo),r.__reactInternalMemoizedMergedChildContext=t,Ze(An),Ze(sn),Ke(sn,t)):Ze(An),Ke(An,n)}var is=null,cp=!1,zm=!1;function jA(t){is===null?is=[t]:is.push(t)}function M2(t){cp=!0,jA(t)}function Hi(){if(!zm&&is!==null){zm=!0;var t=0,e=$e;try{var n=is;for($e=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}is=null,cp=!1}catch(s){throw is!==null&&(is=is.slice(t+1)),dA(Vv,Hi),s}finally{$e=e,zm=!1}}return null}var Aa=[],xa=0,tf=null,nf=0,Jn=[],Zn=0,Mo=null,ls=1,cs="";function oo(t,e){Aa[xa++]=nf,Aa[xa++]=tf,tf=t,nf=e}function BA(t,e,n){Jn[Zn++]=ls,Jn[Zn++]=cs,Jn[Zn++]=Mo,Mo=t;var r=ls;t=cs;var s=32-vr(r)-1;r&=~(1<<s),n+=1;var i=32-vr(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,ls=1<<32-vr(e)+s|n<<s|r,cs=i+t}else ls=1<<i|n<<s|r,cs=t}function qv(t){t.return!==null&&(oo(t,1),BA(t,1,0))}function Hv(t){for(;t===tf;)tf=Aa[--xa],Aa[xa]=null,nf=Aa[--xa],Aa[xa]=null;for(;t===Mo;)Mo=Jn[--Zn],Jn[Zn]=null,cs=Jn[--Zn],Jn[Zn]=null,ls=Jn[--Zn],Jn[Zn]=null}var Bn=null,Fn=null,nt=!1,gr=null;function $A(t,e){var n=er(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function SE(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Bn=t,Fn=mi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Bn=t,Fn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Mo!==null?{id:ls,overflow:cs}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=er(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Bn=t,Fn=null,!0):!1;default:return!1}}function ry(t){return(t.mode&1)!==0&&(t.flags&128)===0}function sy(t){if(nt){var e=Fn;if(e){var n=e;if(!SE(t,e)){if(ry(t))throw Error(W(418));e=mi(n.nextSibling);var r=Bn;e&&SE(t,e)?$A(r,n):(t.flags=t.flags&-4097|2,nt=!1,Bn=t)}}else{if(ry(t))throw Error(W(418));t.flags=t.flags&-4097|2,nt=!1,Bn=t}}}function bE(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Bn=t}function $d(t){if(t!==Bn)return!1;if(!nt)return bE(t),nt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Zg(t.type,t.memoizedProps)),e&&(e=Fn)){if(ry(t))throw zA(),Error(W(418));for(;e;)$A(t,e),e=mi(e.nextSibling)}if(bE(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(W(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Fn=mi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Fn=null}}else Fn=Bn?mi(t.stateNode.nextSibling):null;return!0}function zA(){for(var t=Fn;t;)t=mi(t.nextSibling)}function Ja(){Fn=Bn=null,nt=!1}function Wv(t){gr===null?gr=[t]:gr.push(t)}var F2=Ps.ReactCurrentBatchConfig;function uc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(W(309));var r=n.stateNode}if(!r)throw Error(W(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(W(284));if(!n._owner)throw Error(W(290,t))}return t}function zd(t,e){throw t=Object.prototype.toString.call(e),Error(W(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function AE(t){var e=t._init;return e(t._payload)}function qA(t){function e(w,v){if(t){var I=w.deletions;I===null?(w.deletions=[v],w.flags|=16):I.push(v)}}function n(w,v){if(!t)return null;for(;v!==null;)e(w,v),v=v.sibling;return null}function r(w,v){for(w=new Map;v!==null;)v.key!==null?w.set(v.key,v):w.set(v.index,v),v=v.sibling;return w}function s(w,v){return w=_i(w,v),w.index=0,w.sibling=null,w}function i(w,v,I){return w.index=I,t?(I=w.alternate,I!==null?(I=I.index,I<v?(w.flags|=2,v):I):(w.flags|=2,v)):(w.flags|=1048576,v)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,v,I,D){return v===null||v.tag!==6?(v=Ym(I,w.mode,D),v.return=w,v):(v=s(v,I),v.return=w,v)}function l(w,v,I,D){var O=I.type;return O===wa?d(w,v,I.props.children,D,I.key):v!==null&&(v.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Xs&&AE(O)===v.type)?(D=s(v,I.props),D.ref=uc(w,v,I),D.return=w,D):(D=Ah(I.type,I.key,I.props,null,w.mode,D),D.ref=uc(w,v,I),D.return=w,D)}function c(w,v,I,D){return v===null||v.tag!==4||v.stateNode.containerInfo!==I.containerInfo||v.stateNode.implementation!==I.implementation?(v=Xm(I,w.mode,D),v.return=w,v):(v=s(v,I.children||[]),v.return=w,v)}function d(w,v,I,D,O){return v===null||v.tag!==7?(v=ko(I,w.mode,D,O),v.return=w,v):(v=s(v,I),v.return=w,v)}function h(w,v,I){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Ym(""+v,w.mode,I),v.return=w,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Dd:return I=Ah(v.type,v.key,v.props,null,w.mode,I),I.ref=uc(w,null,v),I.return=w,I;case _a:return v=Xm(v,w.mode,I),v.return=w,v;case Xs:var D=v._init;return h(w,D(v._payload),I)}if(Tc(v)||ic(v))return v=ko(v,w.mode,I,null),v.return=w,v;zd(w,v)}return null}function p(w,v,I,D){var O=v!==null?v.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return O!==null?null:a(w,v,""+I,D);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Dd:return I.key===O?l(w,v,I,D):null;case _a:return I.key===O?c(w,v,I,D):null;case Xs:return O=I._init,p(w,v,O(I._payload),D)}if(Tc(I)||ic(I))return O!==null?null:d(w,v,I,D,null);zd(w,I)}return null}function f(w,v,I,D,O){if(typeof D=="string"&&D!==""||typeof D=="number")return w=w.get(I)||null,a(v,w,""+D,O);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Dd:return w=w.get(D.key===null?I:D.key)||null,l(v,w,D,O);case _a:return w=w.get(D.key===null?I:D.key)||null,c(v,w,D,O);case Xs:var V=D._init;return f(w,v,I,V(D._payload),O)}if(Tc(D)||ic(D))return w=w.get(I)||null,d(v,w,D,O,null);zd(v,D)}return null}function _(w,v,I,D){for(var O=null,V=null,S=v,T=v=0,b=null;S!==null&&T<I.length;T++){S.index>T?(b=S,S=null):b=S.sibling;var k=p(w,S,I[T],D);if(k===null){S===null&&(S=b);break}t&&S&&k.alternate===null&&e(w,S),v=i(k,v,T),V===null?O=k:V.sibling=k,V=k,S=b}if(T===I.length)return n(w,S),nt&&oo(w,T),O;if(S===null){for(;T<I.length;T++)S=h(w,I[T],D),S!==null&&(v=i(S,v,T),V===null?O=S:V.sibling=S,V=S);return nt&&oo(w,T),O}for(S=r(w,S);T<I.length;T++)b=f(S,w,T,I[T],D),b!==null&&(t&&b.alternate!==null&&S.delete(b.key===null?T:b.key),v=i(b,v,T),V===null?O=b:V.sibling=b,V=b);return t&&S.forEach(function(P){return e(w,P)}),nt&&oo(w,T),O}function y(w,v,I,D){var O=ic(I);if(typeof O!="function")throw Error(W(150));if(I=O.call(I),I==null)throw Error(W(151));for(var V=O=null,S=v,T=v=0,b=null,k=I.next();S!==null&&!k.done;T++,k=I.next()){S.index>T?(b=S,S=null):b=S.sibling;var P=p(w,S,k.value,D);if(P===null){S===null&&(S=b);break}t&&S&&P.alternate===null&&e(w,S),v=i(P,v,T),V===null?O=P:V.sibling=P,V=P,S=b}if(k.done)return n(w,S),nt&&oo(w,T),O;if(S===null){for(;!k.done;T++,k=I.next())k=h(w,k.value,D),k!==null&&(v=i(k,v,T),V===null?O=k:V.sibling=k,V=k);return nt&&oo(w,T),O}for(S=r(w,S);!k.done;T++,k=I.next())k=f(S,w,T,k.value,D),k!==null&&(t&&k.alternate!==null&&S.delete(k.key===null?T:k.key),v=i(k,v,T),V===null?O=k:V.sibling=k,V=k);return t&&S.forEach(function(N){return e(w,N)}),nt&&oo(w,T),O}function E(w,v,I,D){if(typeof I=="object"&&I!==null&&I.type===wa&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case Dd:e:{for(var O=I.key,V=v;V!==null;){if(V.key===O){if(O=I.type,O===wa){if(V.tag===7){n(w,V.sibling),v=s(V,I.props.children),v.return=w,w=v;break e}}else if(V.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Xs&&AE(O)===V.type){n(w,V.sibling),v=s(V,I.props),v.ref=uc(w,V,I),v.return=w,w=v;break e}n(w,V);break}else e(w,V);V=V.sibling}I.type===wa?(v=ko(I.props.children,w.mode,D,I.key),v.return=w,w=v):(D=Ah(I.type,I.key,I.props,null,w.mode,D),D.ref=uc(w,v,I),D.return=w,w=D)}return o(w);case _a:e:{for(V=I.key;v!==null;){if(v.key===V)if(v.tag===4&&v.stateNode.containerInfo===I.containerInfo&&v.stateNode.implementation===I.implementation){n(w,v.sibling),v=s(v,I.children||[]),v.return=w,w=v;break e}else{n(w,v);break}else e(w,v);v=v.sibling}v=Xm(I,w.mode,D),v.return=w,w=v}return o(w);case Xs:return V=I._init,E(w,v,V(I._payload),D)}if(Tc(I))return _(w,v,I,D);if(ic(I))return y(w,v,I,D);zd(w,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,v!==null&&v.tag===6?(n(w,v.sibling),v=s(v,I),v.return=w,w=v):(n(w,v),v=Ym(I,w.mode,D),v.return=w,w=v),o(w)):n(w,v)}return E}var Za=qA(!0),HA=qA(!1),rf=qi(null),sf=null,Pa=null,Kv=null;function Gv(){Kv=Pa=sf=null}function Qv(t){var e=rf.current;Ze(rf),t._currentValue=e}function iy(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Va(t,e){sf=t,Kv=Pa=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Tn=!0),t.firstContext=null)}function sr(t){var e=t._currentValue;if(Kv!==t)if(t={context:t,memoizedValue:e,next:null},Pa===null){if(sf===null)throw Error(W(308));Pa=t,sf.dependencies={lanes:0,firstContext:t}}else Pa=Pa.next=t;return e}var _o=null;function Yv(t){_o===null?_o=[t]:_o.push(t)}function WA(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Yv(e)):(n.next=s.next,s.next=n),e.interleaved=n,ws(t,r)}function ws(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Js=!1;function Xv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function KA(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function hs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function gi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Me&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,ws(t,n)}return s=r.interleaved,s===null?(e.next=e,Yv(r)):(e.next=s.next,s.next=e),r.interleaved=e,ws(t,n)}function wh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Lv(t,n)}}function xE(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function of(t,e,n,r){var s=t.updateQueue;Js=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,d=c=l=null,a=i;do{var p=a.lane,f=a.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=t,y=a;switch(p=e,f=n,y.tag){case 1:if(_=y.payload,typeof _=="function"){h=_.call(f,h,p);break e}h=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=y.payload,p=typeof _=="function"?_.call(f,h,p):_,p==null)break e;h=ut({},h,p);break e;case 2:Js=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[a]:p.push(a))}else f={eventTime:f,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=f,l=h):d=d.next=f,o|=p;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;p=a,a=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Uo|=o,t.lanes=o,t.memoizedState=h}}function PE(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(W(191,s));s.call(r)}}}var Gu={},Gr=qi(Gu),du=qi(Gu),hu=qi(Gu);function wo(t){if(t===Gu)throw Error(W(174));return t}function Jv(t,e){switch(Ke(hu,e),Ke(du,t),Ke(Gr,Gu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ug(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ug(e,t)}Ze(Gr),Ke(Gr,e)}function el(){Ze(Gr),Ze(du),Ze(hu)}function GA(t){wo(hu.current);var e=wo(Gr.current),n=Ug(e,t.type);e!==n&&(Ke(du,t),Ke(Gr,n))}function Zv(t){du.current===t&&(Ze(Gr),Ze(du))}var lt=qi(0);function af(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var qm=[];function e_(){for(var t=0;t<qm.length;t++)qm[t]._workInProgressVersionPrimary=null;qm.length=0}var Eh=Ps.ReactCurrentDispatcher,Hm=Ps.ReactCurrentBatchConfig,Fo=0,ct=null,Rt=null,Ut=null,lf=!1,Lc=!1,fu=0,U2=0;function Qt(){throw Error(W(321))}function t_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Tr(t[n],e[n]))return!1;return!0}function n_(t,e,n,r,s,i){if(Fo=i,ct=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Eh.current=t===null||t.memoizedState===null?z2:q2,t=n(r,s),Lc){i=0;do{if(Lc=!1,fu=0,25<=i)throw Error(W(301));i+=1,Ut=Rt=null,e.updateQueue=null,Eh.current=H2,t=n(r,s)}while(Lc)}if(Eh.current=cf,e=Rt!==null&&Rt.next!==null,Fo=0,Ut=Rt=ct=null,lf=!1,e)throw Error(W(300));return t}function r_(){var t=fu!==0;return fu=0,t}function Lr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ut===null?ct.memoizedState=Ut=t:Ut=Ut.next=t,Ut}function ir(){if(Rt===null){var t=ct.alternate;t=t!==null?t.memoizedState:null}else t=Rt.next;var e=Ut===null?ct.memoizedState:Ut.next;if(e!==null)Ut=e,Rt=t;else{if(t===null)throw Error(W(310));Rt=t,t={memoizedState:Rt.memoizedState,baseState:Rt.baseState,baseQueue:Rt.baseQueue,queue:Rt.queue,next:null},Ut===null?ct.memoizedState=Ut=t:Ut=Ut.next=t}return Ut}function pu(t,e){return typeof e=="function"?e(t):e}function Wm(t){var e=ir(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=Rt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((Fo&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,ct.lanes|=d,Uo|=d}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,Tr(r,e.memoizedState)||(Tn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,ct.lanes|=i,Uo|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Km(t){var e=ir(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Tr(i,e.memoizedState)||(Tn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function QA(){}function YA(t,e){var n=ct,r=ir(),s=e(),i=!Tr(r.memoizedState,s);if(i&&(r.memoizedState=s,Tn=!0),r=r.queue,s_(ZA.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ut!==null&&Ut.memoizedState.tag&1){if(n.flags|=2048,mu(9,JA.bind(null,n,r,s,e),void 0,null),jt===null)throw Error(W(349));Fo&30||XA(n,e,s)}return s}function XA(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ct.updateQueue,e===null?(e={lastEffect:null,stores:null},ct.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function JA(t,e,n,r){e.value=n,e.getSnapshot=r,e1(e)&&t1(t)}function ZA(t,e,n){return n(function(){e1(e)&&t1(t)})}function e1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Tr(t,n)}catch{return!0}}function t1(t){var e=ws(t,1);e!==null&&_r(e,t,1,-1)}function RE(t){var e=Lr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pu,lastRenderedState:t},e.queue=t,t=t.dispatch=$2.bind(null,ct,t),[e.memoizedState,t]}function mu(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ct.updateQueue,e===null?(e={lastEffect:null,stores:null},ct.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function n1(){return ir().memoizedState}function Th(t,e,n,r){var s=Lr();ct.flags|=t,s.memoizedState=mu(1|e,n,void 0,r===void 0?null:r)}function up(t,e,n,r){var s=ir();r=r===void 0?null:r;var i=void 0;if(Rt!==null){var o=Rt.memoizedState;if(i=o.destroy,r!==null&&t_(r,o.deps)){s.memoizedState=mu(e,n,i,r);return}}ct.flags|=t,s.memoizedState=mu(1|e,n,i,r)}function CE(t,e){return Th(8390656,8,t,e)}function s_(t,e){return up(2048,8,t,e)}function r1(t,e){return up(4,2,t,e)}function s1(t,e){return up(4,4,t,e)}function i1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function o1(t,e,n){return n=n!=null?n.concat([t]):null,up(4,4,i1.bind(null,e,t),n)}function i_(){}function a1(t,e){var n=ir();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&t_(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function l1(t,e){var n=ir();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&t_(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function c1(t,e,n){return Fo&21?(Tr(n,e)||(n=pA(),ct.lanes|=n,Uo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Tn=!0),t.memoizedState=n)}function j2(t,e){var n=$e;$e=n!==0&&4>n?n:4,t(!0);var r=Hm.transition;Hm.transition={};try{t(!1),e()}finally{$e=n,Hm.transition=r}}function u1(){return ir().memoizedState}function B2(t,e,n){var r=vi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},d1(t))h1(e,n);else if(n=WA(t,e,n,r),n!==null){var s=dn();_r(n,t,r,s),f1(n,e,r)}}function $2(t,e,n){var r=vi(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(d1(t))h1(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Tr(a,o)){var l=e.interleaved;l===null?(s.next=s,Yv(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=WA(t,e,s,r),n!==null&&(s=dn(),_r(n,t,r,s),f1(n,e,r))}}function d1(t){var e=t.alternate;return t===ct||e!==null&&e===ct}function h1(t,e){Lc=lf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function f1(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Lv(t,n)}}var cf={readContext:sr,useCallback:Qt,useContext:Qt,useEffect:Qt,useImperativeHandle:Qt,useInsertionEffect:Qt,useLayoutEffect:Qt,useMemo:Qt,useReducer:Qt,useRef:Qt,useState:Qt,useDebugValue:Qt,useDeferredValue:Qt,useTransition:Qt,useMutableSource:Qt,useSyncExternalStore:Qt,useId:Qt,unstable_isNewReconciler:!1},z2={readContext:sr,useCallback:function(t,e){return Lr().memoizedState=[t,e===void 0?null:e],t},useContext:sr,useEffect:CE,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Th(4194308,4,i1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Th(4194308,4,t,e)},useInsertionEffect:function(t,e){return Th(4,2,t,e)},useMemo:function(t,e){var n=Lr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Lr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=B2.bind(null,ct,t),[r.memoizedState,t]},useRef:function(t){var e=Lr();return t={current:t},e.memoizedState=t},useState:RE,useDebugValue:i_,useDeferredValue:function(t){return Lr().memoizedState=t},useTransition:function(){var t=RE(!1),e=t[0];return t=j2.bind(null,t[1]),Lr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ct,s=Lr();if(nt){if(n===void 0)throw Error(W(407));n=n()}else{if(n=e(),jt===null)throw Error(W(349));Fo&30||XA(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,CE(ZA.bind(null,r,i,t),[t]),r.flags|=2048,mu(9,JA.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Lr(),e=jt.identifierPrefix;if(nt){var n=cs,r=ls;n=(r&~(1<<32-vr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=fu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=U2++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},q2={readContext:sr,useCallback:a1,useContext:sr,useEffect:s_,useImperativeHandle:o1,useInsertionEffect:r1,useLayoutEffect:s1,useMemo:l1,useReducer:Wm,useRef:n1,useState:function(){return Wm(pu)},useDebugValue:i_,useDeferredValue:function(t){var e=ir();return c1(e,Rt.memoizedState,t)},useTransition:function(){var t=Wm(pu)[0],e=ir().memoizedState;return[t,e]},useMutableSource:QA,useSyncExternalStore:YA,useId:u1,unstable_isNewReconciler:!1},H2={readContext:sr,useCallback:a1,useContext:sr,useEffect:s_,useImperativeHandle:o1,useInsertionEffect:r1,useLayoutEffect:s1,useMemo:l1,useReducer:Km,useRef:n1,useState:function(){return Km(pu)},useDebugValue:i_,useDeferredValue:function(t){var e=ir();return Rt===null?e.memoizedState=t:c1(e,Rt.memoizedState,t)},useTransition:function(){var t=Km(pu)[0],e=ir().memoizedState;return[t,e]},useMutableSource:QA,useSyncExternalStore:YA,useId:u1,unstable_isNewReconciler:!1};function ur(t,e){if(t&&t.defaultProps){e=ut({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function oy(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ut({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var dp={isMounted:function(t){return(t=t._reactInternals)?Jo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=dn(),s=vi(t),i=hs(r,s);i.payload=e,n!=null&&(i.callback=n),e=gi(t,i,s),e!==null&&(_r(e,t,s,r),wh(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=dn(),s=vi(t),i=hs(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=gi(t,i,s),e!==null&&(_r(e,t,s,r),wh(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=dn(),r=vi(t),s=hs(n,r);s.tag=2,e!=null&&(s.callback=e),e=gi(t,s,r),e!==null&&(_r(e,t,r,n),wh(e,t,r))}};function kE(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!au(n,r)||!au(s,i):!0}function p1(t,e,n){var r=!1,s=xi,i=e.contextType;return typeof i=="object"&&i!==null?i=sr(i):(s=xn(e)?Lo:sn.current,r=e.contextTypes,i=(r=r!=null)?Xa(t,s):xi),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=dp,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function DE(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&dp.enqueueReplaceState(e,e.state,null)}function ay(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Xv(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=sr(i):(i=xn(e)?Lo:sn.current,s.context=Xa(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(oy(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&dp.enqueueReplaceState(s,s.state,null),of(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function tl(t,e){try{var n="",r=e;do n+=_N(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Gm(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ly(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var W2=typeof WeakMap=="function"?WeakMap:Map;function m1(t,e,n){n=hs(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){df||(df=!0,vy=r),ly(t,e)},n}function g1(t,e,n){n=hs(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){ly(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){ly(t,e),typeof r!="function"&&(yi===null?yi=new Set([this]):yi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function NE(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new W2;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=oO.bind(null,t,e,n),e.then(t,t))}function OE(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function VE(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=hs(-1,1),e.tag=2,gi(n,e,1))),n.lanes|=1),t)}var K2=Ps.ReactCurrentOwner,Tn=!1;function cn(t,e,n,r){e.child=t===null?HA(e,null,n,r):Za(e,t.child,n,r)}function LE(t,e,n,r,s){n=n.render;var i=e.ref;return Va(e,s),r=n_(t,e,n,r,i,s),n=r_(),t!==null&&!Tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Es(t,e,s)):(nt&&n&&qv(e),e.flags|=1,cn(t,e,r,s),e.child)}function ME(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!f_(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,y1(t,e,i,r,s)):(t=Ah(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:au,n(o,r)&&t.ref===e.ref)return Es(t,e,s)}return e.flags|=1,t=_i(i,r),t.ref=e.ref,t.return=e,e.child=t}function y1(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(au(i,r)&&t.ref===e.ref)if(Tn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Tn=!0);else return e.lanes=t.lanes,Es(t,e,s)}return cy(t,e,n,r,s)}function v1(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ke(Ca,Dn),Dn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ke(Ca,Dn),Dn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ke(Ca,Dn),Dn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ke(Ca,Dn),Dn|=r;return cn(t,e,s,n),e.child}function _1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function cy(t,e,n,r,s){var i=xn(n)?Lo:sn.current;return i=Xa(e,i),Va(e,s),n=n_(t,e,n,r,i,s),r=r_(),t!==null&&!Tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Es(t,e,s)):(nt&&r&&qv(e),e.flags|=1,cn(t,e,n,s),e.child)}function FE(t,e,n,r,s){if(xn(n)){var i=!0;ef(e)}else i=!1;if(Va(e,s),e.stateNode===null)Ih(t,e),p1(e,n,r),ay(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=sr(c):(c=xn(n)?Lo:sn.current,c=Xa(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&DE(e,o,r,c),Js=!1;var p=e.memoizedState;o.state=p,of(e,r,o,s),l=e.memoizedState,a!==r||p!==l||An.current||Js?(typeof d=="function"&&(oy(e,n,d,r),l=e.memoizedState),(a=Js||kE(e,n,a,r,p,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,KA(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:ur(e.type,a),o.props=c,h=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=sr(l):(l=xn(n)?Lo:sn.current,l=Xa(e,l));var f=n.getDerivedStateFromProps;(d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||p!==l)&&DE(e,o,r,l),Js=!1,p=e.memoizedState,o.state=p,of(e,r,o,s);var _=e.memoizedState;a!==h||p!==_||An.current||Js?(typeof f=="function"&&(oy(e,n,f,r),_=e.memoizedState),(c=Js||kE(e,n,c,r,p,_,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),o.props=r,o.state=_,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return uy(t,e,n,r,i,s)}function uy(t,e,n,r,s,i){_1(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&IE(e,n,!1),Es(t,e,i);r=e.stateNode,K2.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Za(e,t.child,null,i),e.child=Za(e,null,a,i)):cn(t,e,a,i),e.memoizedState=r.state,s&&IE(e,n,!0),e.child}function w1(t){var e=t.stateNode;e.pendingContext?TE(t,e.pendingContext,e.pendingContext!==e.context):e.context&&TE(t,e.context,!1),Jv(t,e.containerInfo)}function UE(t,e,n,r,s){return Ja(),Wv(s),e.flags|=256,cn(t,e,n,r),e.child}var dy={dehydrated:null,treeContext:null,retryLane:0};function hy(t){return{baseLanes:t,cachePool:null,transitions:null}}function E1(t,e,n){var r=e.pendingProps,s=lt.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ke(lt,s&1),t===null)return sy(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=pp(o,r,0,null),t=ko(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=hy(n),e.memoizedState=dy,t):o_(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return G2(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=_i(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=_i(a,i):(i=ko(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?hy(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=dy,r}return i=t.child,t=i.sibling,r=_i(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function o_(t,e){return e=pp({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function qd(t,e,n,r){return r!==null&&Wv(r),Za(e,t.child,null,n),t=o_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function G2(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Gm(Error(W(422))),qd(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=pp({mode:"visible",children:r.children},s,0,null),i=ko(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Za(e,t.child,null,o),e.child.memoizedState=hy(o),e.memoizedState=dy,i);if(!(e.mode&1))return qd(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(W(419)),r=Gm(i,r,void 0),qd(t,e,o,r)}if(a=(o&t.childLanes)!==0,Tn||a){if(r=jt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,ws(t,s),_r(r,t,s,-1))}return h_(),r=Gm(Error(W(421))),qd(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=aO.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Fn=mi(s.nextSibling),Bn=e,nt=!0,gr=null,t!==null&&(Jn[Zn++]=ls,Jn[Zn++]=cs,Jn[Zn++]=Mo,ls=t.id,cs=t.overflow,Mo=e),e=o_(e,r.children),e.flags|=4096,e)}function jE(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),iy(t.return,e,n)}function Qm(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function T1(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(cn(t,e,r.children,n),r=lt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&jE(t,n,e);else if(t.tag===19)jE(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ke(lt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&af(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Qm(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&af(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Qm(e,!0,n,null,i);break;case"together":Qm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ih(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Es(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Uo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(W(153));if(e.child!==null){for(t=e.child,n=_i(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=_i(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Q2(t,e,n){switch(e.tag){case 3:w1(e),Ja();break;case 5:GA(e);break;case 1:xn(e.type)&&ef(e);break;case 4:Jv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ke(rf,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ke(lt,lt.current&1),e.flags|=128,null):n&e.child.childLanes?E1(t,e,n):(Ke(lt,lt.current&1),t=Es(t,e,n),t!==null?t.sibling:null);Ke(lt,lt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return T1(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ke(lt,lt.current),r)break;return null;case 22:case 23:return e.lanes=0,v1(t,e,n)}return Es(t,e,n)}var I1,fy,S1,b1;I1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};fy=function(){};S1=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,wo(Gr.current);var i=null;switch(n){case"input":s=Vg(t,s),r=Vg(t,r),i=[];break;case"select":s=ut({},s,{value:void 0}),r=ut({},r,{value:void 0}),i=[];break;case"textarea":s=Fg(t,s),r=Fg(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Jh)}jg(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(eu.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(eu.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Je("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};b1=function(t,e,n,r){n!==r&&(e.flags|=4)};function dc(t,e){if(!nt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Yt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Y2(t,e,n){var r=e.pendingProps;switch(Hv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yt(e),null;case 1:return xn(e.type)&&Zh(),Yt(e),null;case 3:return r=e.stateNode,el(),Ze(An),Ze(sn),e_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&($d(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,gr!==null&&(Ey(gr),gr=null))),fy(t,e),Yt(e),null;case 5:Zv(e);var s=wo(hu.current);if(n=e.type,t!==null&&e.stateNode!=null)S1(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(W(166));return Yt(e),null}if(t=wo(Gr.current),$d(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[$r]=e,r[uu]=i,t=(e.mode&1)!==0,n){case"dialog":Je("cancel",r),Je("close",r);break;case"iframe":case"object":case"embed":Je("load",r);break;case"video":case"audio":for(s=0;s<Sc.length;s++)Je(Sc[s],r);break;case"source":Je("error",r);break;case"img":case"image":case"link":Je("error",r),Je("load",r);break;case"details":Je("toggle",r);break;case"input":Q0(r,i),Je("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Je("invalid",r);break;case"textarea":X0(r,i),Je("invalid",r)}jg(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Bd(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Bd(r.textContent,a,t),s=["children",""+a]):eu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Je("scroll",r)}switch(n){case"input":Nd(r),Y0(r,i,!0);break;case"textarea":Nd(r),J0(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Jh)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Zb(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[$r]=e,t[uu]=r,I1(t,e,!1,!1),e.stateNode=t;e:{switch(o=Bg(n,r),n){case"dialog":Je("cancel",t),Je("close",t),s=r;break;case"iframe":case"object":case"embed":Je("load",t),s=r;break;case"video":case"audio":for(s=0;s<Sc.length;s++)Je(Sc[s],t);s=r;break;case"source":Je("error",t),s=r;break;case"img":case"image":case"link":Je("error",t),Je("load",t),s=r;break;case"details":Je("toggle",t),s=r;break;case"input":Q0(t,r),s=Vg(t,r),Je("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=ut({},r,{value:void 0}),Je("invalid",t);break;case"textarea":X0(t,r),s=Fg(t,r),Je("invalid",t);break;default:s=r}jg(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?nA(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&eA(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&tu(t,l):typeof l=="number"&&tu(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(eu.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Je("scroll",t):l!=null&&Cv(t,i,l,o))}switch(n){case"input":Nd(t),Y0(t,r,!1);break;case"textarea":Nd(t),J0(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ai(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ka(t,!!r.multiple,i,!1):r.defaultValue!=null&&ka(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Jh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Yt(e),null;case 6:if(t&&e.stateNode!=null)b1(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(W(166));if(n=wo(hu.current),wo(Gr.current),$d(e)){if(r=e.stateNode,n=e.memoizedProps,r[$r]=e,(i=r.nodeValue!==n)&&(t=Bn,t!==null))switch(t.tag){case 3:Bd(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Bd(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[$r]=e,e.stateNode=r}return Yt(e),null;case 13:if(Ze(lt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(nt&&Fn!==null&&e.mode&1&&!(e.flags&128))zA(),Ja(),e.flags|=98560,i=!1;else if(i=$d(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(W(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(W(317));i[$r]=e}else Ja(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Yt(e),i=!1}else gr!==null&&(Ey(gr),gr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||lt.current&1?kt===0&&(kt=3):h_())),e.updateQueue!==null&&(e.flags|=4),Yt(e),null);case 4:return el(),fy(t,e),t===null&&lu(e.stateNode.containerInfo),Yt(e),null;case 10:return Qv(e.type._context),Yt(e),null;case 17:return xn(e.type)&&Zh(),Yt(e),null;case 19:if(Ze(lt),i=e.memoizedState,i===null)return Yt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)dc(i,!1);else{if(kt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=af(t),o!==null){for(e.flags|=128,dc(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ke(lt,lt.current&1|2),e.child}t=t.sibling}i.tail!==null&&yt()>nl&&(e.flags|=128,r=!0,dc(i,!1),e.lanes=4194304)}else{if(!r)if(t=af(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),dc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!nt)return Yt(e),null}else 2*yt()-i.renderingStartTime>nl&&n!==1073741824&&(e.flags|=128,r=!0,dc(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=yt(),e.sibling=null,n=lt.current,Ke(lt,r?n&1|2:n&1),e):(Yt(e),null);case 22:case 23:return d_(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Dn&1073741824&&(Yt(e),e.subtreeFlags&6&&(e.flags|=8192)):Yt(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function X2(t,e){switch(Hv(e),e.tag){case 1:return xn(e.type)&&Zh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return el(),Ze(An),Ze(sn),e_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Zv(e),null;case 13:if(Ze(lt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(W(340));Ja()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ze(lt),null;case 4:return el(),null;case 10:return Qv(e.type._context),null;case 22:case 23:return d_(),null;case 24:return null;default:return null}}var Hd=!1,en=!1,J2=typeof WeakSet=="function"?WeakSet:Set,ee=null;function Ra(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){pt(t,e,r)}else n.current=null}function py(t,e,n){try{n()}catch(r){pt(t,e,r)}}var BE=!1;function Z2(t,e){if(Xg=Qh,t=CA(),zv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,p=null;t:for(;;){for(var f;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(f=h.firstChild)!==null;)p=h,h=f;for(;;){if(h===t)break t;if(p===n&&++c===s&&(a=o),p===i&&++d===r&&(l=o),(f=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Jg={focusedElem:t,selectionRange:n},Qh=!1,ee=e;ee!==null;)if(e=ee,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ee=t;else for(;ee!==null;){e=ee;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var y=_.memoizedProps,E=_.memoizedState,w=e.stateNode,v=w.getSnapshotBeforeUpdate(e.elementType===e.type?y:ur(e.type,y),E);w.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(D){pt(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,ee=t;break}ee=e.return}return _=BE,BE=!1,_}function Mc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&py(e,n,i)}s=s.next}while(s!==r)}}function hp(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function my(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function A1(t){var e=t.alternate;e!==null&&(t.alternate=null,A1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[$r],delete e[uu],delete e[ty],delete e[V2],delete e[L2])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function x1(t){return t.tag===5||t.tag===3||t.tag===4}function $E(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||x1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function gy(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Jh));else if(r!==4&&(t=t.child,t!==null))for(gy(t,e,n),t=t.sibling;t!==null;)gy(t,e,n),t=t.sibling}function yy(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(yy(t,e,n),t=t.sibling;t!==null;)yy(t,e,n),t=t.sibling}var $t=null,pr=!1;function zs(t,e,n){for(n=n.child;n!==null;)P1(t,e,n),n=n.sibling}function P1(t,e,n){if(Kr&&typeof Kr.onCommitFiberUnmount=="function")try{Kr.onCommitFiberUnmount(sp,n)}catch{}switch(n.tag){case 5:en||Ra(n,e);case 6:var r=$t,s=pr;$t=null,zs(t,e,n),$t=r,pr=s,$t!==null&&(pr?(t=$t,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):$t.removeChild(n.stateNode));break;case 18:$t!==null&&(pr?(t=$t,n=n.stateNode,t.nodeType===8?$m(t.parentNode,n):t.nodeType===1&&$m(t,n),iu(t)):$m($t,n.stateNode));break;case 4:r=$t,s=pr,$t=n.stateNode.containerInfo,pr=!0,zs(t,e,n),$t=r,pr=s;break;case 0:case 11:case 14:case 15:if(!en&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&py(n,e,o),s=s.next}while(s!==r)}zs(t,e,n);break;case 1:if(!en&&(Ra(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){pt(n,e,a)}zs(t,e,n);break;case 21:zs(t,e,n);break;case 22:n.mode&1?(en=(r=en)||n.memoizedState!==null,zs(t,e,n),en=r):zs(t,e,n);break;default:zs(t,e,n)}}function zE(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new J2),e.forEach(function(r){var s=lO.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function lr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:$t=a.stateNode,pr=!1;break e;case 3:$t=a.stateNode.containerInfo,pr=!0;break e;case 4:$t=a.stateNode.containerInfo,pr=!0;break e}a=a.return}if($t===null)throw Error(W(160));P1(i,o,s),$t=null,pr=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){pt(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)R1(e,t),e=e.sibling}function R1(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(lr(e,t),Vr(t),r&4){try{Mc(3,t,t.return),hp(3,t)}catch(y){pt(t,t.return,y)}try{Mc(5,t,t.return)}catch(y){pt(t,t.return,y)}}break;case 1:lr(e,t),Vr(t),r&512&&n!==null&&Ra(n,n.return);break;case 5:if(lr(e,t),Vr(t),r&512&&n!==null&&Ra(n,n.return),t.flags&32){var s=t.stateNode;try{tu(s,"")}catch(y){pt(t,t.return,y)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Xb(s,i),Bg(a,o);var c=Bg(a,i);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?nA(s,h):d==="dangerouslySetInnerHTML"?eA(s,h):d==="children"?tu(s,h):Cv(s,d,h,c)}switch(a){case"input":Lg(s,i);break;case"textarea":Jb(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?ka(s,!!i.multiple,f,!1):p!==!!i.multiple&&(i.defaultValue!=null?ka(s,!!i.multiple,i.defaultValue,!0):ka(s,!!i.multiple,i.multiple?[]:"",!1))}s[uu]=i}catch(y){pt(t,t.return,y)}}break;case 6:if(lr(e,t),Vr(t),r&4){if(t.stateNode===null)throw Error(W(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(y){pt(t,t.return,y)}}break;case 3:if(lr(e,t),Vr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{iu(e.containerInfo)}catch(y){pt(t,t.return,y)}break;case 4:lr(e,t),Vr(t);break;case 13:lr(e,t),Vr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(c_=yt())),r&4&&zE(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(en=(c=en)||d,lr(e,t),en=c):lr(e,t),Vr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(ee=t,d=t.child;d!==null;){for(h=ee=d;ee!==null;){switch(p=ee,f=p.child,p.tag){case 0:case 11:case 14:case 15:Mc(4,p,p.return);break;case 1:Ra(p,p.return);var _=p.stateNode;if(typeof _.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(y){pt(r,n,y)}}break;case 5:Ra(p,p.return);break;case 22:if(p.memoizedState!==null){HE(h);continue}}f!==null?(f.return=p,ee=f):HE(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=tA("display",o))}catch(y){pt(t,t.return,y)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(y){pt(t,t.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:lr(e,t),Vr(t),r&4&&zE(t);break;case 21:break;default:lr(e,t),Vr(t)}}function Vr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(x1(n)){var r=n;break e}n=n.return}throw Error(W(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(tu(s,""),r.flags&=-33);var i=$E(t);yy(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=$E(t);gy(t,a,o);break;default:throw Error(W(161))}}catch(l){pt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function eO(t,e,n){ee=t,C1(t)}function C1(t,e,n){for(var r=(t.mode&1)!==0;ee!==null;){var s=ee,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Hd;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||en;a=Hd;var c=en;if(Hd=o,(en=l)&&!c)for(ee=s;ee!==null;)o=ee,l=o.child,o.tag===22&&o.memoizedState!==null?WE(s):l!==null?(l.return=o,ee=l):WE(s);for(;i!==null;)ee=i,C1(i),i=i.sibling;ee=s,Hd=a,en=c}qE(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ee=i):qE(t)}}function qE(t){for(;ee!==null;){var e=ee;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:en||hp(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!en)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:ur(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&PE(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}PE(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&iu(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}en||e.flags&512&&my(e)}catch(p){pt(e,e.return,p)}}if(e===t){ee=null;break}if(n=e.sibling,n!==null){n.return=e.return,ee=n;break}ee=e.return}}function HE(t){for(;ee!==null;){var e=ee;if(e===t){ee=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ee=n;break}ee=e.return}}function WE(t){for(;ee!==null;){var e=ee;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{hp(4,e)}catch(l){pt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){pt(e,s,l)}}var i=e.return;try{my(e)}catch(l){pt(e,i,l)}break;case 5:var o=e.return;try{my(e)}catch(l){pt(e,o,l)}}}catch(l){pt(e,e.return,l)}if(e===t){ee=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ee=a;break}ee=e.return}}var tO=Math.ceil,uf=Ps.ReactCurrentDispatcher,a_=Ps.ReactCurrentOwner,tr=Ps.ReactCurrentBatchConfig,Me=0,jt=null,bt=null,qt=0,Dn=0,Ca=qi(0),kt=0,gu=null,Uo=0,fp=0,l_=0,Fc=null,En=null,c_=0,nl=1/0,ss=null,df=!1,vy=null,yi=null,Wd=!1,ci=null,hf=0,Uc=0,_y=null,Sh=-1,bh=0;function dn(){return Me&6?yt():Sh!==-1?Sh:Sh=yt()}function vi(t){return t.mode&1?Me&2&&qt!==0?qt&-qt:F2.transition!==null?(bh===0&&(bh=pA()),bh):(t=$e,t!==0||(t=window.event,t=t===void 0?16:EA(t.type)),t):1}function _r(t,e,n,r){if(50<Uc)throw Uc=0,_y=null,Error(W(185));Hu(t,n,r),(!(Me&2)||t!==jt)&&(t===jt&&(!(Me&2)&&(fp|=n),kt===4&&ei(t,qt)),Pn(t,r),n===1&&Me===0&&!(e.mode&1)&&(nl=yt()+500,cp&&Hi()))}function Pn(t,e){var n=t.callbackNode;FN(t,e);var r=Gh(t,t===jt?qt:0);if(r===0)n!==null&&tE(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&tE(n),e===1)t.tag===0?M2(KE.bind(null,t)):jA(KE.bind(null,t)),N2(function(){!(Me&6)&&Hi()}),n=null;else{switch(mA(r)){case 1:n=Vv;break;case 4:n=hA;break;case 16:n=Kh;break;case 536870912:n=fA;break;default:n=Kh}n=F1(n,k1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function k1(t,e){if(Sh=-1,bh=0,Me&6)throw Error(W(327));var n=t.callbackNode;if(La()&&t.callbackNode!==n)return null;var r=Gh(t,t===jt?qt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ff(t,r);else{e=r;var s=Me;Me|=2;var i=N1();(jt!==t||qt!==e)&&(ss=null,nl=yt()+500,Co(t,e));do try{sO();break}catch(a){D1(t,a)}while(!0);Gv(),uf.current=i,Me=s,bt!==null?e=0:(jt=null,qt=0,e=kt)}if(e!==0){if(e===2&&(s=Wg(t),s!==0&&(r=s,e=wy(t,s))),e===1)throw n=gu,Co(t,0),ei(t,r),Pn(t,yt()),n;if(e===6)ei(t,r);else{if(s=t.current.alternate,!(r&30)&&!nO(s)&&(e=ff(t,r),e===2&&(i=Wg(t),i!==0&&(r=i,e=wy(t,i))),e===1))throw n=gu,Co(t,0),ei(t,r),Pn(t,yt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(W(345));case 2:ao(t,En,ss);break;case 3:if(ei(t,r),(r&130023424)===r&&(e=c_+500-yt(),10<e)){if(Gh(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){dn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=ey(ao.bind(null,t,En,ss),e);break}ao(t,En,ss);break;case 4:if(ei(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-vr(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=yt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*tO(r/1960))-r,10<r){t.timeoutHandle=ey(ao.bind(null,t,En,ss),r);break}ao(t,En,ss);break;case 5:ao(t,En,ss);break;default:throw Error(W(329))}}}return Pn(t,yt()),t.callbackNode===n?k1.bind(null,t):null}function wy(t,e){var n=Fc;return t.current.memoizedState.isDehydrated&&(Co(t,e).flags|=256),t=ff(t,e),t!==2&&(e=En,En=n,e!==null&&Ey(e)),t}function Ey(t){En===null?En=t:En.push.apply(En,t)}function nO(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Tr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ei(t,e){for(e&=~l_,e&=~fp,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-vr(e),r=1<<n;t[n]=-1,e&=~r}}function KE(t){if(Me&6)throw Error(W(327));La();var e=Gh(t,0);if(!(e&1))return Pn(t,yt()),null;var n=ff(t,e);if(t.tag!==0&&n===2){var r=Wg(t);r!==0&&(e=r,n=wy(t,r))}if(n===1)throw n=gu,Co(t,0),ei(t,e),Pn(t,yt()),n;if(n===6)throw Error(W(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ao(t,En,ss),Pn(t,yt()),null}function u_(t,e){var n=Me;Me|=1;try{return t(e)}finally{Me=n,Me===0&&(nl=yt()+500,cp&&Hi())}}function jo(t){ci!==null&&ci.tag===0&&!(Me&6)&&La();var e=Me;Me|=1;var n=tr.transition,r=$e;try{if(tr.transition=null,$e=1,t)return t()}finally{$e=r,tr.transition=n,Me=e,!(Me&6)&&Hi()}}function d_(){Dn=Ca.current,Ze(Ca)}function Co(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,D2(n)),bt!==null)for(n=bt.return;n!==null;){var r=n;switch(Hv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Zh();break;case 3:el(),Ze(An),Ze(sn),e_();break;case 5:Zv(r);break;case 4:el();break;case 13:Ze(lt);break;case 19:Ze(lt);break;case 10:Qv(r.type._context);break;case 22:case 23:d_()}n=n.return}if(jt=t,bt=t=_i(t.current,null),qt=Dn=e,kt=0,gu=null,l_=fp=Uo=0,En=Fc=null,_o!==null){for(e=0;e<_o.length;e++)if(n=_o[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}_o=null}return t}function D1(t,e){do{var n=bt;try{if(Gv(),Eh.current=cf,lf){for(var r=ct.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}lf=!1}if(Fo=0,Ut=Rt=ct=null,Lc=!1,fu=0,a_.current=null,n===null||n.return===null){kt=1,gu=e,bt=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=qt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=OE(o);if(f!==null){f.flags&=-257,VE(f,o,a,i,e),f.mode&1&&NE(i,c,e),e=f,l=c;var _=e.updateQueue;if(_===null){var y=new Set;y.add(l),e.updateQueue=y}else _.add(l);break e}else{if(!(e&1)){NE(i,c,e),h_();break e}l=Error(W(426))}}else if(nt&&a.mode&1){var E=OE(o);if(E!==null){!(E.flags&65536)&&(E.flags|=256),VE(E,o,a,i,e),Wv(tl(l,a));break e}}i=l=tl(l,a),kt!==4&&(kt=2),Fc===null?Fc=[i]:Fc.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=m1(i,l,e);xE(i,w);break e;case 1:a=l;var v=i.type,I=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(yi===null||!yi.has(I)))){i.flags|=65536,e&=-e,i.lanes|=e;var D=g1(i,a,e);xE(i,D);break e}}i=i.return}while(i!==null)}V1(n)}catch(O){e=O,bt===n&&n!==null&&(bt=n=n.return);continue}break}while(!0)}function N1(){var t=uf.current;return uf.current=cf,t===null?cf:t}function h_(){(kt===0||kt===3||kt===2)&&(kt=4),jt===null||!(Uo&268435455)&&!(fp&268435455)||ei(jt,qt)}function ff(t,e){var n=Me;Me|=2;var r=N1();(jt!==t||qt!==e)&&(ss=null,Co(t,e));do try{rO();break}catch(s){D1(t,s)}while(!0);if(Gv(),Me=n,uf.current=r,bt!==null)throw Error(W(261));return jt=null,qt=0,kt}function rO(){for(;bt!==null;)O1(bt)}function sO(){for(;bt!==null&&!RN();)O1(bt)}function O1(t){var e=M1(t.alternate,t,Dn);t.memoizedProps=t.pendingProps,e===null?V1(t):bt=e,a_.current=null}function V1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=X2(n,e),n!==null){n.flags&=32767,bt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{kt=6,bt=null;return}}else if(n=Y2(n,e,Dn),n!==null){bt=n;return}if(e=e.sibling,e!==null){bt=e;return}bt=e=t}while(e!==null);kt===0&&(kt=5)}function ao(t,e,n){var r=$e,s=tr.transition;try{tr.transition=null,$e=1,iO(t,e,n,r)}finally{tr.transition=s,$e=r}return null}function iO(t,e,n,r){do La();while(ci!==null);if(Me&6)throw Error(W(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(W(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(UN(t,i),t===jt&&(bt=jt=null,qt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Wd||(Wd=!0,F1(Kh,function(){return La(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=tr.transition,tr.transition=null;var o=$e;$e=1;var a=Me;Me|=4,a_.current=null,Z2(t,n),R1(n,t),b2(Jg),Qh=!!Xg,Jg=Xg=null,t.current=n,eO(n),CN(),Me=a,$e=o,tr.transition=i}else t.current=n;if(Wd&&(Wd=!1,ci=t,hf=s),i=t.pendingLanes,i===0&&(yi=null),NN(n.stateNode),Pn(t,yt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(df)throw df=!1,t=vy,vy=null,t;return hf&1&&t.tag!==0&&La(),i=t.pendingLanes,i&1?t===_y?Uc++:(Uc=0,_y=t):Uc=0,Hi(),null}function La(){if(ci!==null){var t=mA(hf),e=tr.transition,n=$e;try{if(tr.transition=null,$e=16>t?16:t,ci===null)var r=!1;else{if(t=ci,ci=null,hf=0,Me&6)throw Error(W(331));var s=Me;for(Me|=4,ee=t.current;ee!==null;){var i=ee,o=i.child;if(ee.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ee=c;ee!==null;){var d=ee;switch(d.tag){case 0:case 11:case 15:Mc(8,d,i)}var h=d.child;if(h!==null)h.return=d,ee=h;else for(;ee!==null;){d=ee;var p=d.sibling,f=d.return;if(A1(d),d===c){ee=null;break}if(p!==null){p.return=f,ee=p;break}ee=f}}}var _=i.alternate;if(_!==null){var y=_.child;if(y!==null){_.child=null;do{var E=y.sibling;y.sibling=null,y=E}while(y!==null)}}ee=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ee=o;else e:for(;ee!==null;){if(i=ee,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Mc(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,ee=w;break e}ee=i.return}}var v=t.current;for(ee=v;ee!==null;){o=ee;var I=o.child;if(o.subtreeFlags&2064&&I!==null)I.return=o,ee=I;else e:for(o=v;ee!==null;){if(a=ee,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:hp(9,a)}}catch(O){pt(a,a.return,O)}if(a===o){ee=null;break e}var D=a.sibling;if(D!==null){D.return=a.return,ee=D;break e}ee=a.return}}if(Me=s,Hi(),Kr&&typeof Kr.onPostCommitFiberRoot=="function")try{Kr.onPostCommitFiberRoot(sp,t)}catch{}r=!0}return r}finally{$e=n,tr.transition=e}}return!1}function GE(t,e,n){e=tl(n,e),e=m1(t,e,1),t=gi(t,e,1),e=dn(),t!==null&&(Hu(t,1,e),Pn(t,e))}function pt(t,e,n){if(t.tag===3)GE(t,t,n);else for(;e!==null;){if(e.tag===3){GE(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(yi===null||!yi.has(r))){t=tl(n,t),t=g1(e,t,1),e=gi(e,t,1),t=dn(),e!==null&&(Hu(e,1,t),Pn(e,t));break}}e=e.return}}function oO(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=dn(),t.pingedLanes|=t.suspendedLanes&n,jt===t&&(qt&n)===n&&(kt===4||kt===3&&(qt&130023424)===qt&&500>yt()-c_?Co(t,0):l_|=n),Pn(t,e)}function L1(t,e){e===0&&(t.mode&1?(e=Ld,Ld<<=1,!(Ld&130023424)&&(Ld=4194304)):e=1);var n=dn();t=ws(t,e),t!==null&&(Hu(t,e,n),Pn(t,n))}function aO(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),L1(t,n)}function lO(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(W(314))}r!==null&&r.delete(e),L1(t,n)}var M1;M1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||An.current)Tn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Tn=!1,Q2(t,e,n);Tn=!!(t.flags&131072)}else Tn=!1,nt&&e.flags&1048576&&BA(e,nf,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ih(t,e),t=e.pendingProps;var s=Xa(e,sn.current);Va(e,n),s=n_(null,e,r,t,s,n);var i=r_();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,xn(r)?(i=!0,ef(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Xv(e),s.updater=dp,e.stateNode=s,s._reactInternals=e,ay(e,r,t,n),e=uy(null,e,r,!0,i,n)):(e.tag=0,nt&&i&&qv(e),cn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ih(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=uO(r),t=ur(r,t),s){case 0:e=cy(null,e,r,t,n);break e;case 1:e=FE(null,e,r,t,n);break e;case 11:e=LE(null,e,r,t,n);break e;case 14:e=ME(null,e,r,ur(r.type,t),n);break e}throw Error(W(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ur(r,s),cy(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ur(r,s),FE(t,e,r,s,n);case 3:e:{if(w1(e),t===null)throw Error(W(387));r=e.pendingProps,i=e.memoizedState,s=i.element,KA(t,e),of(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=tl(Error(W(423)),e),e=UE(t,e,r,n,s);break e}else if(r!==s){s=tl(Error(W(424)),e),e=UE(t,e,r,n,s);break e}else for(Fn=mi(e.stateNode.containerInfo.firstChild),Bn=e,nt=!0,gr=null,n=HA(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ja(),r===s){e=Es(t,e,n);break e}cn(t,e,r,n)}e=e.child}return e;case 5:return GA(e),t===null&&sy(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Zg(r,s)?o=null:i!==null&&Zg(r,i)&&(e.flags|=32),_1(t,e),cn(t,e,o,n),e.child;case 6:return t===null&&sy(e),null;case 13:return E1(t,e,n);case 4:return Jv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Za(e,null,r,n):cn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ur(r,s),LE(t,e,r,s,n);case 7:return cn(t,e,e.pendingProps,n),e.child;case 8:return cn(t,e,e.pendingProps.children,n),e.child;case 12:return cn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ke(rf,r._currentValue),r._currentValue=o,i!==null)if(Tr(i.value,o)){if(i.children===s.children&&!An.current){e=Es(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=hs(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),iy(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(W(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),iy(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}cn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Va(e,n),s=sr(s),r=r(s),e.flags|=1,cn(t,e,r,n),e.child;case 14:return r=e.type,s=ur(r,e.pendingProps),s=ur(r.type,s),ME(t,e,r,s,n);case 15:return y1(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ur(r,s),Ih(t,e),e.tag=1,xn(r)?(t=!0,ef(e)):t=!1,Va(e,n),p1(e,r,s),ay(e,r,s,n),uy(null,e,r,!0,t,n);case 19:return T1(t,e,n);case 22:return v1(t,e,n)}throw Error(W(156,e.tag))};function F1(t,e){return dA(t,e)}function cO(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function er(t,e,n,r){return new cO(t,e,n,r)}function f_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function uO(t){if(typeof t=="function")return f_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Dv)return 11;if(t===Nv)return 14}return 2}function _i(t,e){var n=t.alternate;return n===null?(n=er(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ah(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")f_(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case wa:return ko(n.children,s,i,e);case kv:o=8,s|=8;break;case kg:return t=er(12,n,e,s|2),t.elementType=kg,t.lanes=i,t;case Dg:return t=er(13,n,e,s),t.elementType=Dg,t.lanes=i,t;case Ng:return t=er(19,n,e,s),t.elementType=Ng,t.lanes=i,t;case Gb:return pp(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Wb:o=10;break e;case Kb:o=9;break e;case Dv:o=11;break e;case Nv:o=14;break e;case Xs:o=16,r=null;break e}throw Error(W(130,t==null?t:typeof t,""))}return e=er(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ko(t,e,n,r){return t=er(7,t,r,e),t.lanes=n,t}function pp(t,e,n,r){return t=er(22,t,r,e),t.elementType=Gb,t.lanes=n,t.stateNode={isHidden:!1},t}function Ym(t,e,n){return t=er(6,t,null,e),t.lanes=n,t}function Xm(t,e,n){return e=er(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function dO(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=km(0),this.expirationTimes=km(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=km(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function p_(t,e,n,r,s,i,o,a,l){return t=new dO(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=er(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Xv(i),t}function hO(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_a,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function U1(t){if(!t)return xi;t=t._reactInternals;e:{if(Jo(t)!==t||t.tag!==1)throw Error(W(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(xn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(t.tag===1){var n=t.type;if(xn(n))return UA(t,n,e)}return e}function j1(t,e,n,r,s,i,o,a,l){return t=p_(n,r,!0,t,s,i,o,a,l),t.context=U1(null),n=t.current,r=dn(),s=vi(n),i=hs(r,s),i.callback=e??null,gi(n,i,s),t.current.lanes=s,Hu(t,s,r),Pn(t,r),t}function mp(t,e,n,r){var s=e.current,i=dn(),o=vi(s);return n=U1(n),e.context===null?e.context=n:e.pendingContext=n,e=hs(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=gi(s,e,o),t!==null&&(_r(t,s,o,i),wh(t,s,o)),o}function pf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function QE(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function m_(t,e){QE(t,e),(t=t.alternate)&&QE(t,e)}function fO(){return null}var B1=typeof reportError=="function"?reportError:function(t){console.error(t)};function g_(t){this._internalRoot=t}gp.prototype.render=g_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(W(409));mp(t,e,null,null)};gp.prototype.unmount=g_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;jo(function(){mp(null,t,null,null)}),e[_s]=null}};function gp(t){this._internalRoot=t}gp.prototype.unstable_scheduleHydration=function(t){if(t){var e=vA();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Zs.length&&e!==0&&e<Zs[n].priority;n++);Zs.splice(n,0,t),n===0&&wA(t)}};function y_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function yp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function YE(){}function pO(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=pf(o);i.call(c)}}var o=j1(e,r,t,0,null,!1,!1,"",YE);return t._reactRootContainer=o,t[_s]=o.current,lu(t.nodeType===8?t.parentNode:t),jo(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=pf(l);a.call(c)}}var l=p_(t,0,!1,null,null,!1,!1,"",YE);return t._reactRootContainer=l,t[_s]=l.current,lu(t.nodeType===8?t.parentNode:t),jo(function(){mp(e,l,n,r)}),l}function vp(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=pf(o);a.call(l)}}mp(e,o,t,s)}else o=pO(n,e,t,s,r);return pf(o)}gA=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ic(e.pendingLanes);n!==0&&(Lv(e,n|1),Pn(e,yt()),!(Me&6)&&(nl=yt()+500,Hi()))}break;case 13:jo(function(){var r=ws(t,1);if(r!==null){var s=dn();_r(r,t,1,s)}}),m_(t,1)}};Mv=function(t){if(t.tag===13){var e=ws(t,134217728);if(e!==null){var n=dn();_r(e,t,134217728,n)}m_(t,134217728)}};yA=function(t){if(t.tag===13){var e=vi(t),n=ws(t,e);if(n!==null){var r=dn();_r(n,t,e,r)}m_(t,e)}};vA=function(){return $e};_A=function(t,e){var n=$e;try{return $e=t,e()}finally{$e=n}};zg=function(t,e,n){switch(e){case"input":if(Lg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=lp(r);if(!s)throw Error(W(90));Yb(r),Lg(r,s)}}}break;case"textarea":Jb(t,n);break;case"select":e=n.value,e!=null&&ka(t,!!n.multiple,e,!1)}};iA=u_;oA=jo;var mO={usingClientEntryPoint:!1,Events:[Ku,Sa,lp,rA,sA,u_]},hc={findFiberByHostInstance:vo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gO={bundleType:hc.bundleType,version:hc.version,rendererPackageName:hc.rendererPackageName,rendererConfig:hc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ps.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=cA(t),t===null?null:t.stateNode},findFiberByHostInstance:hc.findFiberByHostInstance||fO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kd.isDisabled&&Kd.supportsFiber)try{sp=Kd.inject(gO),Kr=Kd}catch{}}Wn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mO;Wn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y_(e))throw Error(W(200));return hO(t,e,null,n)};Wn.createRoot=function(t,e){if(!y_(t))throw Error(W(299));var n=!1,r="",s=B1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=p_(t,1,!1,null,null,n,!1,r,s),t[_s]=e.current,lu(t.nodeType===8?t.parentNode:t),new g_(e)};Wn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(W(188)):(t=Object.keys(t).join(","),Error(W(268,t)));return t=cA(e),t=t===null?null:t.stateNode,t};Wn.flushSync=function(t){return jo(t)};Wn.hydrate=function(t,e,n){if(!yp(e))throw Error(W(200));return vp(null,t,e,!0,n)};Wn.hydrateRoot=function(t,e,n){if(!y_(t))throw Error(W(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=B1;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=j1(e,null,t,1,n??null,s,!1,i,o),t[_s]=e.current,lu(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new gp(e)};Wn.render=function(t,e,n){if(!yp(e))throw Error(W(200));return vp(null,t,e,!1,n)};Wn.unmountComponentAtNode=function(t){if(!yp(t))throw Error(W(40));return t._reactRootContainer?(jo(function(){vp(null,null,t,!1,function(){t._reactRootContainer=null,t[_s]=null})}),!0):!1};Wn.unstable_batchedUpdates=u_;Wn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!yp(n))throw Error(W(200));if(t==null||t._reactInternals===void 0)throw Error(W(38));return vp(t,e,n,!1,r)};Wn.version="18.3.1-next-f1338f8080-20240426";function $1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($1)}catch(t){console.error(t)}}$1(),$b.exports=Wn;var Qu=$b.exports;const z1=Rb(Qu);var q1,XE=Qu;q1=XE.createRoot,XE.hydrateRoot;const yO="modulepreload",vO=function(t,e){return new URL(t,e).href},JE={},Oe=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=vO(c,r),c in JE)return;JE[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(!!r)for(let _=o.length-1;_>=0;_--){const y=o[_];if(y.href===c&&(!d||y.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${h}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":yO,d||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),d)return new Promise((_,y)=>{f.addEventListener("load",_),f.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},_O=1,wO=1e6;let Jm=0;function EO(){return Jm=(Jm+1)%Number.MAX_SAFE_INTEGER,Jm.toString()}const Zm=new Map,ZE=t=>{if(Zm.has(t))return;const e=setTimeout(()=>{Zm.delete(t),jc({type:"REMOVE_TOAST",toastId:t})},wO);Zm.set(t,e)},TO=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,_O)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?ZE(n):t.toasts.forEach(r=>{ZE(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},xh=[];let Ph={toasts:[]};function jc(t){Ph=TO(Ph,t),xh.forEach(e=>{e(Ph)})}function IO({...t}){const e=EO(),n=s=>jc({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>jc({type:"DISMISS_TOAST",toastId:e});return jc({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function H1(){const[t,e]=A.useState(Ph);return A.useEffect(()=>(xh.push(e),()=>{const n=xh.indexOf(e);n>-1&&xh.splice(n,1)}),[t]),{...t,toast:IO,dismiss:n=>jc({type:"DISMISS_TOAST",toastId:n})}}function Ct(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function eT(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function W1(...t){return e=>{let n=!1;const r=t.map(s=>{const i=eT(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():eT(t[s],null)}}}}function Ir(...t){return A.useCallback(W1(...t),t)}function g8(t,e){const n=A.createContext(e),r=i=>{const{children:o,...a}=i,l=A.useMemo(()=>a,Object.values(a));return x.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function s(i){const o=A.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function _p(t,e=[]){let n=[];function r(i,o){const a=A.createContext(o),l=n.length;n=[...n,o];const c=h=>{var w;const{scope:p,children:f,..._}=h,y=((w=p==null?void 0:p[t])==null?void 0:w[l])||a,E=A.useMemo(()=>_,Object.values(_));return x.jsx(y.Provider,{value:E,children:f})};c.displayName=i+"Provider";function d(h,p){var y;const f=((y=p==null?void 0:p[t])==null?void 0:y[l])||a,_=A.useContext(f);if(_)return _;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[c,d]}const s=()=>{const i=n.map(o=>A.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return A.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,SO(s,...e)]}function SO(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(i)[`__scope${c}`];return{...a,...h}},{});return A.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function mf(t){const e=AO(t),n=A.forwardRef((r,s)=>{const{children:i,...o}=r,a=A.Children.toArray(i),l=a.find(PO);if(l){const c=l.props.children,d=a.map(h=>h===l?A.Children.count(c)>1?A.Children.only(null):A.isValidElement(c)?c.props.children:null:h);return x.jsx(e,{...o,ref:s,children:A.isValidElement(c)?A.cloneElement(c,void 0,d):null})}return x.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var bO=mf("Slot");function AO(t){const e=A.forwardRef((n,r)=>{const{children:s,...i}=n;if(A.isValidElement(s)){const o=CO(s),a=RO(i,s.props);return s.type!==A.Fragment&&(a.ref=r?W1(r,o):o),A.cloneElement(s,a)}return A.Children.count(s)>1?A.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var K1=Symbol("radix.slottable");function xO(t){const e=({children:n})=>x.jsx(x.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=K1,e}function PO(t){return A.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===K1}function RO(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{const l=i(...a);return s(...a),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function CO(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function kO(t){const e=t+"CollectionProvider",[n,r]=_p(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=y=>{const{scope:E,children:w}=y,v=z.useRef(null),I=z.useRef(new Map).current;return x.jsx(s,{scope:E,itemMap:I,collectionRef:v,children:w})};o.displayName=e;const a=t+"CollectionSlot",l=mf(a),c=z.forwardRef((y,E)=>{const{scope:w,children:v}=y,I=i(a,w),D=Ir(E,I.collectionRef);return x.jsx(l,{ref:D,children:v})});c.displayName=a;const d=t+"CollectionItemSlot",h="data-radix-collection-item",p=mf(d),f=z.forwardRef((y,E)=>{const{scope:w,children:v,...I}=y,D=z.useRef(null),O=Ir(E,D),V=i(d,w);return z.useEffect(()=>(V.itemMap.set(D,{ref:D,...I}),()=>void V.itemMap.delete(D))),x.jsx(p,{[h]:"",ref:O,children:v})});f.displayName=d;function _(y){const E=i(t+"CollectionConsumer",y);return z.useCallback(()=>{const v=E.collectionRef.current;if(!v)return[];const I=Array.from(v.querySelectorAll(`[${h}]`));return Array.from(E.itemMap.values()).sort((V,S)=>I.indexOf(V.ref.current)-I.indexOf(S.ref.current))},[E.collectionRef,E.itemMap])}return[{Provider:o,Slot:c,ItemSlot:f},_,r]}var DO=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Rn=DO.reduce((t,e)=>{const n=mf(`Primitive.${e}`),r=A.forwardRef((s,i)=>{const{asChild:o,...a}=s,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),x.jsx(l,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function G1(t,e){t&&Qu.flushSync(()=>t.dispatchEvent(e))}function Pi(t){const e=A.useRef(t);return A.useEffect(()=>{e.current=t}),A.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function NO(t,e=globalThis==null?void 0:globalThis.document){const n=Pi(t);A.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var OO="DismissableLayer",Ty="dismissableLayer.update",VO="dismissableLayer.pointerDownOutside",LO="dismissableLayer.focusOutside",tT,Q1=A.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),v_=A.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=t,c=A.useContext(Q1),[d,h]=A.useState(null),p=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,f]=A.useState({}),_=Ir(e,S=>h(S)),y=Array.from(c.layers),[E]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),w=y.indexOf(E),v=d?y.indexOf(d):-1,I=c.layersWithOutsidePointerEventsDisabled.size>0,D=v>=w,O=FO(S=>{const T=S.target,b=[...c.branches].some(k=>k.contains(T));!D||b||(s==null||s(S),o==null||o(S),S.defaultPrevented||a==null||a())},p),V=UO(S=>{const T=S.target;[...c.branches].some(k=>k.contains(T))||(i==null||i(S),o==null||o(S),S.defaultPrevented||a==null||a())},p);return NO(S=>{v===c.layers.size-1&&(r==null||r(S),!S.defaultPrevented&&a&&(S.preventDefault(),a()))},p),A.useEffect(()=>{if(d)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(tT=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),nT(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=tT)}},[d,p,n,c]),A.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),nT())},[d,c]),A.useEffect(()=>{const S=()=>f({});return document.addEventListener(Ty,S),()=>document.removeEventListener(Ty,S)},[]),x.jsx(Rn.div,{...l,ref:_,style:{pointerEvents:I?D?"auto":"none":void 0,...t.style},onFocusCapture:Ct(t.onFocusCapture,V.onFocusCapture),onBlurCapture:Ct(t.onBlurCapture,V.onBlurCapture),onPointerDownCapture:Ct(t.onPointerDownCapture,O.onPointerDownCapture)})});v_.displayName=OO;var MO="DismissableLayerBranch",Y1=A.forwardRef((t,e)=>{const n=A.useContext(Q1),r=A.useRef(null),s=Ir(e,r);return A.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),x.jsx(Rn.div,{...t,ref:s})});Y1.displayName=MO;function FO(t,e=globalThis==null?void 0:globalThis.document){const n=Pi(t),r=A.useRef(!1),s=A.useRef(()=>{});return A.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){X1(VO,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function UO(t,e=globalThis==null?void 0:globalThis.document){const n=Pi(t),r=A.useRef(!1);return A.useEffect(()=>{const s=i=>{i.target&&!r.current&&X1(LO,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function nT(){const t=new CustomEvent(Ty);document.dispatchEvent(t)}function X1(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?G1(s,i):s.dispatchEvent(i)}var jO=v_,BO=Y1,Ri=globalThis!=null&&globalThis.document?A.useLayoutEffect:()=>{},$O="Portal",J1=A.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,i]=A.useState(!1);Ri(()=>i(!0),[]);const o=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?z1.createPortal(x.jsx(Rn.div,{...r,ref:e}),o):null});J1.displayName=$O;function zO(t,e){return A.useReducer((n,r)=>e[n][r]??n,t)}var __=t=>{const{present:e,children:n}=t,r=qO(e),s=typeof n=="function"?n({present:r.isPresent}):A.Children.only(n),i=Ir(r.ref,HO(s));return typeof n=="function"||r.isPresent?A.cloneElement(s,{ref:i}):null};__.displayName="Presence";function qO(t){const[e,n]=A.useState(),r=A.useRef(null),s=A.useRef(t),i=A.useRef("none"),o=t?"mounted":"unmounted",[a,l]=zO(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return A.useEffect(()=>{const c=Gd(r.current);i.current=a==="mounted"?c:"none"},[a]),Ri(()=>{const c=r.current,d=s.current;if(d!==t){const p=i.current,f=Gd(c);t?l("MOUNT"):f==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(d&&p!==f?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),Ri(()=>{if(e){let c;const d=e.ownerDocument.defaultView??window,h=f=>{const y=Gd(r.current).includes(CSS.escape(f.animationName));if(f.target===e&&y&&(l("ANIMATION_END"),!s.current)){const E=e.style.animationFillMode;e.style.animationFillMode="forwards",c=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=E)})}},p=f=>{f.target===e&&(i.current=Gd(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(c),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:A.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function Gd(t){return(t==null?void 0:t.animationName)||"none"}function HO(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var WO=jb[" useInsertionEffect ".trim().toString()]||Ri;function KO({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,o]=GO({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:s;{const d=A.useRef(t!==void 0);A.useEffect(()=>{const h=d.current;h!==a&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=a},[a,r])}const c=A.useCallback(d=>{var h;if(a){const p=QO(d)?d(t):d;p!==t&&((h=o.current)==null||h.call(o,p))}else i(d)},[a,t,i,o]);return[l,c]}function GO({defaultProp:t,onChange:e}){const[n,r]=A.useState(t),s=A.useRef(n),i=A.useRef(e);return WO(()=>{i.current=e},[e]),A.useEffect(()=>{var o;s.current!==n&&((o=i.current)==null||o.call(i,n),s.current=n)},[n,s]),[n,r,i]}function QO(t){return typeof t=="function"}var YO=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),XO="VisuallyHidden",wp=A.forwardRef((t,e)=>x.jsx(Rn.span,{...t,ref:e,style:{...YO,...t.style}}));wp.displayName=XO;var JO=wp,w_="ToastProvider",[E_,ZO,eV]=kO("Toast"),[Z1]=_p("Toast",[eV]),[tV,Ep]=Z1(w_),ex=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[a,l]=A.useState(null),[c,d]=A.useState(0),h=A.useRef(!1),p=A.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${w_}\`. Expected non-empty \`string\`.`),x.jsx(E_.Provider,{scope:e,children:x.jsx(tV,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:A.useCallback(()=>d(f=>f+1),[]),onToastRemove:A.useCallback(()=>d(f=>f-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:p,children:o})})};ex.displayName=w_;var tx="ToastViewport",nV=["F8"],Iy="toast.viewportPause",Sy="toast.viewportResume",nx=A.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=nV,label:s="Notifications ({hotkey})",...i}=t,o=Ep(tx,n),a=ZO(n),l=A.useRef(null),c=A.useRef(null),d=A.useRef(null),h=A.useRef(null),p=Ir(e,h,o.onViewportChange),f=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),_=o.toastCount>0;A.useEffect(()=>{const E=w=>{var I;r.length!==0&&r.every(D=>w[D]||w.code===D)&&((I=h.current)==null||I.focus())};return document.addEventListener("keydown",E),()=>document.removeEventListener("keydown",E)},[r]),A.useEffect(()=>{const E=l.current,w=h.current;if(_&&E&&w){const v=()=>{if(!o.isClosePausedRef.current){const V=new CustomEvent(Iy);w.dispatchEvent(V),o.isClosePausedRef.current=!0}},I=()=>{if(o.isClosePausedRef.current){const V=new CustomEvent(Sy);w.dispatchEvent(V),o.isClosePausedRef.current=!1}},D=V=>{!E.contains(V.relatedTarget)&&I()},O=()=>{E.contains(document.activeElement)||I()};return E.addEventListener("focusin",v),E.addEventListener("focusout",D),E.addEventListener("pointermove",v),E.addEventListener("pointerleave",O),window.addEventListener("blur",v),window.addEventListener("focus",I),()=>{E.removeEventListener("focusin",v),E.removeEventListener("focusout",D),E.removeEventListener("pointermove",v),E.removeEventListener("pointerleave",O),window.removeEventListener("blur",v),window.removeEventListener("focus",I)}}},[_,o.isClosePausedRef]);const y=A.useCallback(({tabbingDirection:E})=>{const v=a().map(I=>{const D=I.ref.current,O=[D,...mV(D)];return E==="forwards"?O:O.reverse()});return(E==="forwards"?v.reverse():v).flat()},[a]);return A.useEffect(()=>{const E=h.current;if(E){const w=v=>{var O,V,S;const I=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!I){const T=document.activeElement,b=v.shiftKey;if(v.target===E&&b){(O=c.current)==null||O.focus();return}const N=y({tabbingDirection:b?"backwards":"forwards"}),C=N.findIndex(q=>q===T);eg(N.slice(C+1))?v.preventDefault():b?(V=c.current)==null||V.focus():(S=d.current)==null||S.focus()}};return E.addEventListener("keydown",w),()=>E.removeEventListener("keydown",w)}},[a,y]),x.jsxs(BO,{ref:l,role:"region","aria-label":s.replace("{hotkey}",f),tabIndex:-1,style:{pointerEvents:_?void 0:"none"},children:[_&&x.jsx(by,{ref:c,onFocusFromOutsideViewport:()=>{const E=y({tabbingDirection:"forwards"});eg(E)}}),x.jsx(E_.Slot,{scope:n,children:x.jsx(Rn.ol,{tabIndex:-1,...i,ref:p})}),_&&x.jsx(by,{ref:d,onFocusFromOutsideViewport:()=>{const E=y({tabbingDirection:"backwards"});eg(E)}})]})});nx.displayName=tx;var rx="ToastFocusProxy",by=A.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=Ep(rx,n);return x.jsx(wp,{tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=i.viewport)!=null&&c.contains(a))&&r()}})});by.displayName=rx;var Yu="Toast",rV="toast.swipeStart",sV="toast.swipeMove",iV="toast.swipeCancel",oV="toast.swipeEnd",sx=A.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[a,l]=KO({prop:r,defaultProp:s??!0,onChange:i,caller:Yu});return x.jsx(__,{present:n||a,children:x.jsx(cV,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:Pi(t.onPause),onResume:Pi(t.onResume),onSwipeStart:Ct(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Ct(t.onSwipeMove,c=>{const{x:d,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Ct(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Ct(t.onSwipeEnd,c=>{const{x:d,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),l(!1)})})})});sx.displayName=Yu;var[aV,lV]=Z1(Yu,{onClose(){}}),cV=A.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:p,onSwipeEnd:f,..._}=t,y=Ep(Yu,n),[E,w]=A.useState(null),v=Ir(e,q=>w(q)),I=A.useRef(null),D=A.useRef(null),O=s||y.duration,V=A.useRef(0),S=A.useRef(O),T=A.useRef(0),{onToastAdd:b,onToastRemove:k}=y,P=Pi(()=>{var Z;(E==null?void 0:E.contains(document.activeElement))&&((Z=y.viewport)==null||Z.focus()),o()}),N=A.useCallback(q=>{!q||q===1/0||(window.clearTimeout(T.current),V.current=new Date().getTime(),T.current=window.setTimeout(P,q))},[P]);A.useEffect(()=>{const q=y.viewport;if(q){const Z=()=>{N(S.current),c==null||c()},ie=()=>{const G=new Date().getTime()-V.current;S.current=S.current-G,window.clearTimeout(T.current),l==null||l()};return q.addEventListener(Iy,ie),q.addEventListener(Sy,Z),()=>{q.removeEventListener(Iy,ie),q.removeEventListener(Sy,Z)}}},[y.viewport,O,l,c,N]),A.useEffect(()=>{i&&!y.isClosePausedRef.current&&N(O)},[i,O,y.isClosePausedRef,N]),A.useEffect(()=>(b(),()=>k()),[b,k]);const C=A.useMemo(()=>E?dx(E):null,[E]);return y.viewport?x.jsxs(x.Fragment,{children:[C&&x.jsx(uV,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:C}),x.jsx(aV,{scope:n,onClose:P,children:Qu.createPortal(x.jsx(E_.ItemSlot,{scope:n,children:x.jsx(jO,{asChild:!0,onEscapeKeyDown:Ct(a,()=>{y.isFocusedToastEscapeKeyDownRef.current||P(),y.isFocusedToastEscapeKeyDownRef.current=!1}),children:x.jsx(Rn.li,{tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":y.swipeDirection,..._,ref:v,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Ct(t.onKeyDown,q=>{q.key==="Escape"&&(a==null||a(q.nativeEvent),q.nativeEvent.defaultPrevented||(y.isFocusedToastEscapeKeyDownRef.current=!0,P()))}),onPointerDown:Ct(t.onPointerDown,q=>{q.button===0&&(I.current={x:q.clientX,y:q.clientY})}),onPointerMove:Ct(t.onPointerMove,q=>{if(!I.current)return;const Z=q.clientX-I.current.x,ie=q.clientY-I.current.y,G=!!D.current,F=["left","right"].includes(y.swipeDirection),U=["left","up"].includes(y.swipeDirection)?Math.min:Math.max,Y=F?U(0,Z):0,de=F?0:U(0,ie),ne=q.pointerType==="touch"?10:2,ce={x:Y,y:de},le={originalEvent:q,delta:ce};G?(D.current=ce,Qd(sV,h,le,{discrete:!1})):rT(ce,y.swipeDirection,ne)?(D.current=ce,Qd(rV,d,le,{discrete:!1}),q.target.setPointerCapture(q.pointerId)):(Math.abs(Z)>ne||Math.abs(ie)>ne)&&(I.current=null)}),onPointerUp:Ct(t.onPointerUp,q=>{const Z=D.current,ie=q.target;if(ie.hasPointerCapture(q.pointerId)&&ie.releasePointerCapture(q.pointerId),D.current=null,I.current=null,Z){const G=q.currentTarget,F={originalEvent:q,delta:Z};rT(Z,y.swipeDirection,y.swipeThreshold)?Qd(oV,f,F,{discrete:!0}):Qd(iV,p,F,{discrete:!0}),G.addEventListener("click",U=>U.preventDefault(),{once:!0})}})})})}),y.viewport)})]}):null}),uV=t=>{const{__scopeToast:e,children:n,...r}=t,s=Ep(Yu,e),[i,o]=A.useState(!1),[a,l]=A.useState(!1);return fV(()=>o(!0)),A.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:x.jsx(J1,{asChild:!0,children:x.jsx(wp,{...r,children:i&&x.jsxs(x.Fragment,{children:[s.label," ",n]})})})},dV="ToastTitle",ix=A.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return x.jsx(Rn.div,{...r,ref:e})});ix.displayName=dV;var hV="ToastDescription",ox=A.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return x.jsx(Rn.div,{...r,ref:e})});ox.displayName=hV;var ax="ToastAction",lx=A.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?x.jsx(ux,{altText:n,asChild:!0,children:x.jsx(T_,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${ax}\`. Expected non-empty \`string\`.`),null)});lx.displayName=ax;var cx="ToastClose",T_=A.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=lV(cx,n);return x.jsx(ux,{asChild:!0,children:x.jsx(Rn.button,{type:"button",...r,ref:e,onClick:Ct(t.onClick,s.onClose)})})});T_.displayName=cx;var ux=A.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return x.jsx(Rn.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function dx(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),pV(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...dx(r))}}),e}function Qd(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?G1(s,i):s.dispatchEvent(i)}var rT=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function fV(t=()=>{}){const e=Pi(t);Ri(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function pV(t){return t.nodeType===t.ELEMENT_NODE}function mV(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function eg(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var gV=ex,hx=nx,fx=sx,px=ix,mx=ox,gx=lx,yx=T_;function vx(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=vx(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function _x(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=vx(t))&&(r&&(r+=" "),r+=e);return r}const sT=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,iT=_x,wx=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return iT(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const d=n==null?void 0:n[c],h=i==null?void 0:i[c];if(d===null)return null;const p=sT(d)||sT(h);return s[c][p]}),a=n&&Object.entries(n).reduce((c,d)=>{let[h,p]=d;return p===void 0||(c[h]=p),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,d)=>{let{class:h,className:p,...f}=d;return Object.entries(f).every(_=>{let[y,E]=_;return Array.isArray(E)?E.includes({...i,...a}[y]):{...i,...a}[y]===E})?[...c,h,p]:c},[]);return iT(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yV=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ex=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var vV={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _V=A.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},l)=>A.createElement("svg",{ref:l,...vV,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:Ex("lucide",s),...a},[...o.map(([c,d])=>A.createElement(c,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=(t,e)=>{const n=A.forwardRef(({className:r,...s},i)=>A.createElement(_V,{ref:i,iconNode:e,className:Ex(`lucide-${yV(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wV=ot("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EV=ot("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TV=ot("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IV=ot("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SV=ot("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bV=ot("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AV=ot("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xV=ot("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PV=ot("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RV=ot("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oT=ot("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aT=ot("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CV=ot("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kV=ot("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lT=ot("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tg=ot("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tx=ot("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cT=ot("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DV=ot("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NV=ot("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OV=ot("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VV=ot("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LV=ot("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ix=ot("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),I_="-",MV=t=>{const e=UV(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(I_);return a[0]===""&&a.length!==1&&a.shift(),Sx(a,e)||FV(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},Sx=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?Sx(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(I_);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},uT=/^\[(.+)\]$/,FV=t=>{if(uT.test(t)){const e=uT.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},UV=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return BV(Object.entries(t.classGroups),n).forEach(([i,o])=>{Ay(o,r,i,e)}),r},Ay=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:dT(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(jV(s)){Ay(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{Ay(o,dT(e,i),n,r)})})},dT=(t,e)=>{let n=t;return e.split(I_).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},jV=t=>t.isThemeGetter,BV=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[n,s]}):t,$V=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},bx="!",zV=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=a=>{const l=[];let c=0,d=0,h;for(let E=0;E<a.length;E++){let w=a[E];if(c===0){if(w===s&&(r||a.slice(E,E+i)===e)){l.push(a.slice(d,E)),d=E+i;continue}if(w==="/"){h=E;continue}}w==="["?c++:w==="]"&&c--}const p=l.length===0?a:a.substring(d),f=p.startsWith(bx),_=f?p.substring(1):p,y=h&&h>d?h-d:void 0;return{modifiers:l,hasImportantModifier:f,baseClassName:_,maybePostfixModifierPosition:y}};return n?a=>n({className:a,parseClassName:o}):o},qV=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},HV=t=>({cache:$V(t.cacheSize),parseClassName:zV(t),...MV(t)}),WV=/\s+/,KV=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(WV);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:d,hasImportantModifier:h,baseClassName:p,maybePostfixModifierPosition:f}=n(c);let _=!!f,y=r(_?p.substring(0,f):p);if(!y){if(!_){a=c+(a.length>0?" "+a:a);continue}if(y=r(p),!y){a=c+(a.length>0?" "+a:a);continue}_=!1}const E=qV(d).join(":"),w=h?E+bx:E,v=w+y;if(i.includes(v))continue;i.push(v);const I=s(y,_);for(let D=0;D<I.length;++D){const O=I[D];i.push(w+O)}a=c+(a.length>0?" "+a:a)}return a};function GV(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=Ax(e))&&(r&&(r+=" "),r+=n);return r}const Ax=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=Ax(t[r]))&&(n&&(n+=" "),n+=e);return n};function QV(t,...e){let n,r,s,i=o;function o(l){const c=e.reduce((d,h)=>h(d),t());return n=HV(c),r=n.cache.get,s=n.cache.set,i=a,a(l)}function a(l){const c=r(l);if(c)return c;const d=KV(l,n);return s(l,d),d}return function(){return i(GV.apply(null,arguments))}}const Xe=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},xx=/^\[(?:([a-z-]+):)?(.+)\]$/i,YV=/^\d+\/\d+$/,XV=new Set(["px","full","screen"]),JV=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,ZV=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,eL=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,tL=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,nL=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ns=t=>Ma(t)||XV.has(t)||YV.test(t),qs=t=>Rl(t,"length",uL),Ma=t=>!!t&&!Number.isNaN(Number(t)),ng=t=>Rl(t,"number",Ma),fc=t=>!!t&&Number.isInteger(Number(t)),rL=t=>t.endsWith("%")&&Ma(t.slice(0,-1)),_e=t=>xx.test(t),Hs=t=>JV.test(t),sL=new Set(["length","size","percentage"]),iL=t=>Rl(t,sL,Px),oL=t=>Rl(t,"position",Px),aL=new Set(["image","url"]),lL=t=>Rl(t,aL,hL),cL=t=>Rl(t,"",dL),pc=()=>!0,Rl=(t,e,n)=>{const r=xx.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},uL=t=>ZV.test(t)&&!eL.test(t),Px=()=>!1,dL=t=>tL.test(t),hL=t=>nL.test(t),fL=()=>{const t=Xe("colors"),e=Xe("spacing"),n=Xe("blur"),r=Xe("brightness"),s=Xe("borderColor"),i=Xe("borderRadius"),o=Xe("borderSpacing"),a=Xe("borderWidth"),l=Xe("contrast"),c=Xe("grayscale"),d=Xe("hueRotate"),h=Xe("invert"),p=Xe("gap"),f=Xe("gradientColorStops"),_=Xe("gradientColorStopPositions"),y=Xe("inset"),E=Xe("margin"),w=Xe("opacity"),v=Xe("padding"),I=Xe("saturate"),D=Xe("scale"),O=Xe("sepia"),V=Xe("skew"),S=Xe("space"),T=Xe("translate"),b=()=>["auto","contain","none"],k=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto",_e,e],N=()=>[_e,e],C=()=>["",ns,qs],q=()=>["auto",Ma,_e],Z=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ie=()=>["solid","dashed","dotted","double","none"],G=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],F=()=>["start","end","center","between","around","evenly","stretch"],U=()=>["","0",_e],Y=()=>["auto","avoid","all","avoid-page","page","left","right","column"],de=()=>[Ma,_e];return{cacheSize:500,separator:":",theme:{colors:[pc],spacing:[ns,qs],blur:["none","",Hs,_e],brightness:de(),borderColor:[t],borderRadius:["none","","full",Hs,_e],borderSpacing:N(),borderWidth:C(),contrast:de(),grayscale:U(),hueRotate:de(),invert:U(),gap:N(),gradientColorStops:[t],gradientColorStopPositions:[rL,qs],inset:P(),margin:P(),opacity:de(),padding:N(),saturate:de(),scale:de(),sepia:U(),skew:de(),space:N(),translate:N()},classGroups:{aspect:[{aspect:["auto","square","video",_e]}],container:["container"],columns:[{columns:[Hs]}],"break-after":[{"break-after":Y()}],"break-before":[{"break-before":Y()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Z(),_e]}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:b()}],"overscroll-x":[{"overscroll-x":b()}],"overscroll-y":[{"overscroll-y":b()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",fc,_e]}],basis:[{basis:P()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",_e]}],grow:[{grow:U()}],shrink:[{shrink:U()}],order:[{order:["first","last","none",fc,_e]}],"grid-cols":[{"grid-cols":[pc]}],"col-start-end":[{col:["auto",{span:["full",fc,_e]},_e]}],"col-start":[{"col-start":q()}],"col-end":[{"col-end":q()}],"grid-rows":[{"grid-rows":[pc]}],"row-start-end":[{row:["auto",{span:[fc,_e]},_e]}],"row-start":[{"row-start":q()}],"row-end":[{"row-end":q()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",_e]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",_e]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...F()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...F(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...F(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[E]}],mx:[{mx:[E]}],my:[{my:[E]}],ms:[{ms:[E]}],me:[{me:[E]}],mt:[{mt:[E]}],mr:[{mr:[E]}],mb:[{mb:[E]}],ml:[{ml:[E]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",_e,e]}],"min-w":[{"min-w":[_e,e,"min","max","fit"]}],"max-w":[{"max-w":[_e,e,"none","full","min","max","fit","prose",{screen:[Hs]},Hs]}],h:[{h:[_e,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[_e,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[_e,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[_e,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Hs,qs]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",ng]}],"font-family":[{font:[pc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",_e]}],"line-clamp":[{"line-clamp":["none",Ma,ng]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ns,_e]}],"list-image":[{"list-image":["none",_e]}],"list-style-type":[{list:["none","disc","decimal",_e]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ie(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ns,qs]}],"underline-offset":[{"underline-offset":["auto",ns,_e]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",_e]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",_e]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Z(),oL]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",iL]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},lL]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[_]}],"gradient-via-pos":[{via:[_]}],"gradient-to-pos":[{to:[_]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...ie(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:ie()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...ie()]}],"outline-offset":[{"outline-offset":[ns,_e]}],"outline-w":[{outline:[ns,qs]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:C()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[ns,qs]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Hs,cL]}],"shadow-color":[{shadow:[pc]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":[...G(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":G()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Hs,_e]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[I]}],sepia:[{sepia:[O]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[I]}],"backdrop-sepia":[{"backdrop-sepia":[O]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",_e]}],duration:[{duration:de()}],ease:[{ease:["linear","in","out","in-out",_e]}],delay:[{delay:de()}],animate:[{animate:["none","spin","ping","pulse","bounce",_e]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[D]}],"scale-x":[{"scale-x":[D]}],"scale-y":[{"scale-y":[D]}],rotate:[{rotate:[fc,_e]}],"translate-x":[{"translate-x":[T]}],"translate-y":[{"translate-y":[T]}],"skew-x":[{"skew-x":[V]}],"skew-y":[{"skew-y":[V]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",_e]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",_e]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",_e]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[ns,qs,ng]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},pL=QV(fL);function Rs(...t){return pL(_x(t))}const mL=gV,Rx=A.forwardRef(({className:t,...e},n)=>x.jsx(hx,{ref:n,className:Rs("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));Rx.displayName=hx.displayName;const gL=wx("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Cx=A.forwardRef(({className:t,variant:e,...n},r)=>x.jsx(fx,{ref:r,className:Rs(gL({variant:e}),t),...n}));Cx.displayName=fx.displayName;const yL=A.forwardRef(({className:t,...e},n)=>x.jsx(gx,{ref:n,className:Rs("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));yL.displayName=gx.displayName;const kx=A.forwardRef(({className:t,...e},n)=>x.jsx(yx,{ref:n,className:Rs("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:x.jsx(Ix,{className:"h-4 w-4"})}));kx.displayName=yx.displayName;const Dx=A.forwardRef(({className:t,...e},n)=>x.jsx(px,{ref:n,className:Rs("text-sm font-semibold",t),...e}));Dx.displayName=px.displayName;const Nx=A.forwardRef(({className:t,...e},n)=>x.jsx(mx,{ref:n,className:Rs("text-sm opacity-90",t),...e}));Nx.displayName=mx.displayName;function vL(){const{toasts:t}=H1();return x.jsxs(mL,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return x.jsxs(Cx,{...i,children:[x.jsxs("div",{className:"grid gap-1",children:[n&&x.jsx(Dx,{children:n}),r&&x.jsx(Nx,{children:r})]}),s,x.jsx(kx,{})]},e)}),x.jsx(Rx,{})]})}var gf=["light","dark"],S_="(prefers-color-scheme: dark)",_L=typeof window>"u",b_=A.createContext(void 0),wL={setTheme:t=>{},themes:[]},Ox=()=>{var t;return(t=A.useContext(b_))!=null?t:wL},EL=t=>A.useContext(b_)?t.children:A.createElement(IL,{...t}),TL=["light","dark"],IL=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:n=!0,enableColorScheme:r=!0,storageKey:s="theme",themes:i=TL,defaultTheme:o=n?"system":"light",attribute:a="data-theme",value:l,children:c,nonce:d})=>{let[h,p]=A.useState(()=>hT(s,o)),[f,_]=A.useState(()=>hT(s)),y=l?Object.values(l):i,E=A.useCallback(D=>{let O=D;if(!O)return;D==="system"&&n&&(O=fT());let V=l?l[O]:O,S=e?bL():null,T=document.documentElement;if(a==="class"?(T.classList.remove(...y),V&&T.classList.add(V)):V?T.setAttribute(a,V):T.removeAttribute(a),r){let b=gf.includes(o)?o:null,k=gf.includes(O)?O:b;T.style.colorScheme=k}S==null||S()},[]),w=A.useCallback(D=>{let O=typeof D=="function"?D(D):D;p(O);try{localStorage.setItem(s,O)}catch{}},[t]),v=A.useCallback(D=>{let O=fT(D);_(O),h==="system"&&n&&!t&&E("system")},[h,t]);A.useEffect(()=>{let D=window.matchMedia(S_);return D.addListener(v),v(D),()=>D.removeListener(v)},[v]),A.useEffect(()=>{let D=O=>{if(O.key!==s)return;let V=O.newValue||o;w(V)};return window.addEventListener("storage",D),()=>window.removeEventListener("storage",D)},[w]),A.useEffect(()=>{E(t??h)},[t,h]);let I=A.useMemo(()=>({theme:h,setTheme:w,forcedTheme:t,resolvedTheme:h==="system"?f:h,themes:n?[...i,"system"]:i,systemTheme:n?f:void 0}),[h,w,t,f,n,i]);return A.createElement(b_.Provider,{value:I},A.createElement(SL,{forcedTheme:t,disableTransitionOnChange:e,enableSystem:n,enableColorScheme:r,storageKey:s,themes:i,defaultTheme:o,attribute:a,value:l,children:c,attrs:y,nonce:d}),c)},SL=A.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:o,attrs:a,nonce:l})=>{let c=i==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(_=>`'${_}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=s?gf.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",p=(_,y=!1,E=!0)=>{let w=o?o[_]:_,v=y?_+"|| ''":`'${w}'`,I="";return s&&E&&!y&&gf.includes(_)&&(I+=`d.style.colorScheme = '${_}';`),n==="class"?y||w?I+=`c.add(${v})`:I+="null":w&&(I+=`d[s](n,${v})`),I},f=t?`!function(){${d}${p(t)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${c})){var t='${S_}',m=window.matchMedia(t);if(m.media!==t||m.matches){${p("dark")}}else{${p("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${p(o?"x[e]":"e",!0)}}${c?"":"else{"+p(i,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${p(o?"x[e]":"e",!0)}}else{${p(i,!1,!1)};}${h}}catch(t){}}();`;return A.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:f}})}),hT=(t,e)=>{if(_L)return;let n;try{n=localStorage.getItem(t)||void 0}catch{}return n||e},bL=()=>{let t=document.createElement("style");return t.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},fT=t=>(t||(t=window.matchMedia(S_)),t.matches?"dark":"light"),AL=t=>{switch(t){case"success":return RL;case"info":return kL;case"warning":return CL;case"error":return DL;default:return null}},xL=Array(12).fill(0),PL=({visible:t,className:e})=>z.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},z.createElement("div",{className:"sonner-spinner"},xL.map((n,r)=>z.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),RL=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),CL=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),kL=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),DL=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),NL=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},z.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),z.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),OL=()=>{let[t,e]=z.useState(document.hidden);return z.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},xy=1,VL=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;let{message:r,...s}=e,i=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:xy++,o=this.toasts.find(l=>l.id===i),a=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...e,id:i,title:r}),{...l,...e,id:i,dismissible:a,title:r}):l):this.addToast({title:r,...s,dismissible:a,id:i}),i},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),this.subscribers.forEach(n=>n({id:e,dismiss:!0})),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));let s=e instanceof Promise?e:e(),i=r!==void 0,o,a=s.then(async c=>{if(o=["resolve",c],z.isValidElement(c))i=!1,this.create({id:r,type:"default",message:c});else if(ML(c)&&!c.ok){i=!1;let d=typeof n.error=="function"?await n.error(`HTTP error! status: ${c.status}`):n.error,h=typeof n.description=="function"?await n.description(`HTTP error! status: ${c.status}`):n.description;this.create({id:r,type:"error",message:d,description:h})}else if(n.success!==void 0){i=!1;let d=typeof n.success=="function"?await n.success(c):n.success,h=typeof n.description=="function"?await n.description(c):n.description;this.create({id:r,type:"success",message:d,description:h})}}).catch(async c=>{if(o=["reject",c],n.error!==void 0){i=!1;let d=typeof n.error=="function"?await n.error(c):n.error,h=typeof n.description=="function"?await n.description(c):n.description;this.create({id:r,type:"error",message:d,description:h})}}).finally(()=>{var c;i&&(this.dismiss(r),r=void 0),(c=n.finally)==null||c.call(n)}),l=()=>new Promise((c,d)=>a.then(()=>o[0]==="reject"?d(o[1]):c(o[1])).catch(d));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,n)=>{let r=(n==null?void 0:n.id)||xy++;return this.create({jsx:e(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},_n=new VL,LL=(t,e)=>{let n=(e==null?void 0:e.id)||xy++;return _n.addToast({title:t,...e,id:n}),n},ML=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",FL=LL,UL=()=>_n.toasts,jL=()=>_n.getActiveToasts(),It=Object.assign(FL,{success:_n.success,info:_n.info,warning:_n.warning,error:_n.error,custom:_n.custom,message:_n.message,promise:_n.promise,dismiss:_n.dismiss,loading:_n.loading},{getHistory:UL,getToasts:jL});function BL(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}BL(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Yd(t){return t.label!==void 0}var $L=3,zL="32px",qL="16px",pT=4e3,HL=356,WL=14,KL=20,GL=200;function cr(...t){return t.filter(Boolean).join(" ")}function QL(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var YL=t=>{var e,n,r,s,i,o,a,l,c,d,h;let{invert:p,toast:f,unstyled:_,interacting:y,setHeights:E,visibleToasts:w,heights:v,index:I,toasts:D,expanded:O,removeToast:V,defaultRichColors:S,closeButton:T,style:b,cancelButtonStyle:k,actionButtonStyle:P,className:N="",descriptionClassName:C="",duration:q,position:Z,gap:ie,loadingIcon:G,expandByDefault:F,classNames:U,icons:Y,closeButtonAriaLabel:de="Close toast",pauseWhenPageIsHidden:ne}=t,[ce,le]=z.useState(null),[we,Qe]=z.useState(null),[ae,me]=z.useState(!1),[Se,Et]=z.useState(!1),[Nt,Kt]=z.useState(!1),[Bt,gn]=z.useState(!1),[Pr,ge]=z.useState(!1),[Gn,Vs]=z.useState(0),[at,Ot]=z.useState(0),Rr=z.useRef(f.duration||q||pT),yd=z.useRef(null),Cr=z.useRef(null),cm=I===0,Zi=I+1<=w,on=f.type,es=f.dismissible!==!1,Hl=f.className||"",um=f.descriptionClassName||"",ta=z.useMemo(()=>v.findIndex(he=>he.toastId===f.id)||0,[v,f.id]),vd=z.useMemo(()=>{var he;return(he=f.closeButton)!=null?he:T},[f.closeButton,T]),Wl=z.useMemo(()=>f.duration||q||pT,[f.duration,q]),ts=z.useRef(0),kr=z.useRef(0),na=z.useRef(0),yn=z.useRef(null),[_d,ra]=Z.split("-"),Kl=z.useMemo(()=>v.reduce((he,Ue,We)=>We>=ta?he:he+Ue.height,0),[v,ta]),Ls=OL(),wd=f.invert||p,xt=on==="loading";kr.current=z.useMemo(()=>ta*ie+Kl,[ta,Kl]),z.useEffect(()=>{Rr.current=Wl},[Wl]),z.useEffect(()=>{me(!0)},[]),z.useEffect(()=>{let he=Cr.current;if(he){let Ue=he.getBoundingClientRect().height;return Ot(Ue),E(We=>[{toastId:f.id,height:Ue,position:f.position},...We]),()=>E(We=>We.filter(Vt=>Vt.toastId!==f.id))}},[E,f.id]),z.useLayoutEffect(()=>{if(!ae)return;let he=Cr.current,Ue=he.style.height;he.style.height="auto";let We=he.getBoundingClientRect().height;he.style.height=Ue,Ot(We),E(Vt=>Vt.find(Cn=>Cn.toastId===f.id)?Vt.map(Cn=>Cn.toastId===f.id?{...Cn,height:We}:Cn):[{toastId:f.id,height:We,position:f.position},...Vt])},[ae,f.title,f.description,E,f.id]);let or=z.useCallback(()=>{Et(!0),Vs(kr.current),E(he=>he.filter(Ue=>Ue.toastId!==f.id)),setTimeout(()=>{V(f)},GL)},[f,V,E,kr]);z.useEffect(()=>{if(f.promise&&on==="loading"||f.duration===1/0||f.type==="loading")return;let he;return O||y||ne&&Ls?(()=>{if(na.current<ts.current){let Ue=new Date().getTime()-ts.current;Rr.current=Rr.current-Ue}na.current=new Date().getTime()})():Rr.current!==1/0&&(ts.current=new Date().getTime(),he=setTimeout(()=>{var Ue;(Ue=f.onAutoClose)==null||Ue.call(f,f),or()},Rr.current)),()=>clearTimeout(he)},[O,y,f,on,ne,Ls,or]),z.useEffect(()=>{f.delete&&or()},[or,f.delete]);function eo(){var he,Ue,We;return Y!=null&&Y.loading?z.createElement("div",{className:cr(U==null?void 0:U.loader,(he=f==null?void 0:f.classNames)==null?void 0:he.loader,"sonner-loader"),"data-visible":on==="loading"},Y.loading):G?z.createElement("div",{className:cr(U==null?void 0:U.loader,(Ue=f==null?void 0:f.classNames)==null?void 0:Ue.loader,"sonner-loader"),"data-visible":on==="loading"},G):z.createElement(PL,{className:cr(U==null?void 0:U.loader,(We=f==null?void 0:f.classNames)==null?void 0:We.loader),visible:on==="loading"})}return z.createElement("li",{tabIndex:0,ref:Cr,className:cr(N,Hl,U==null?void 0:U.toast,(e=f==null?void 0:f.classNames)==null?void 0:e.toast,U==null?void 0:U.default,U==null?void 0:U[on],(n=f==null?void 0:f.classNames)==null?void 0:n[on]),"data-sonner-toast":"","data-rich-colors":(r=f.richColors)!=null?r:S,"data-styled":!(f.jsx||f.unstyled||_),"data-mounted":ae,"data-promise":!!f.promise,"data-swiped":Pr,"data-removed":Se,"data-visible":Zi,"data-y-position":_d,"data-x-position":ra,"data-index":I,"data-front":cm,"data-swiping":Nt,"data-dismissible":es,"data-type":on,"data-invert":wd,"data-swipe-out":Bt,"data-swipe-direction":we,"data-expanded":!!(O||F&&ae),style:{"--index":I,"--toasts-before":I,"--z-index":D.length-I,"--offset":`${Se?Gn:kr.current}px`,"--initial-height":F?"auto":`${at}px`,...b,...f.style},onDragEnd:()=>{Kt(!1),le(null),yn.current=null},onPointerDown:he=>{xt||!es||(yd.current=new Date,Vs(kr.current),he.target.setPointerCapture(he.pointerId),he.target.tagName!=="BUTTON"&&(Kt(!0),yn.current={x:he.clientX,y:he.clientY}))},onPointerUp:()=>{var he,Ue,We,Vt;if(Bt||!es)return;yn.current=null;let Cn=Number(((he=Cr.current)==null?void 0:he.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Dr=Number(((Ue=Cr.current)==null?void 0:Ue.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Qn=new Date().getTime()-((We=yd.current)==null?void 0:We.getTime()),vn=ce==="x"?Cn:Dr,ar=Math.abs(vn)/Qn;if(Math.abs(vn)>=KL||ar>.11){Vs(kr.current),(Vt=f.onDismiss)==null||Vt.call(f,f),Qe(ce==="x"?Cn>0?"right":"left":Dr>0?"down":"up"),or(),gn(!0),ge(!1);return}Kt(!1),le(null)},onPointerMove:he=>{var Ue,We,Vt,Cn;if(!yn.current||!es||((Ue=window.getSelection())==null?void 0:Ue.toString().length)>0)return;let Dr=he.clientY-yn.current.y,Qn=he.clientX-yn.current.x,vn=(We=t.swipeDirections)!=null?We:QL(Z);!ce&&(Math.abs(Qn)>1||Math.abs(Dr)>1)&&le(Math.abs(Qn)>Math.abs(Dr)?"x":"y");let ar={x:0,y:0};ce==="y"?(vn.includes("top")||vn.includes("bottom"))&&(vn.includes("top")&&Dr<0||vn.includes("bottom")&&Dr>0)&&(ar.y=Dr):ce==="x"&&(vn.includes("left")||vn.includes("right"))&&(vn.includes("left")&&Qn<0||vn.includes("right")&&Qn>0)&&(ar.x=Qn),(Math.abs(ar.x)>0||Math.abs(ar.y)>0)&&ge(!0),(Vt=Cr.current)==null||Vt.style.setProperty("--swipe-amount-x",`${ar.x}px`),(Cn=Cr.current)==null||Cn.style.setProperty("--swipe-amount-y",`${ar.y}px`)}},vd&&!f.jsx?z.createElement("button",{"aria-label":de,"data-disabled":xt,"data-close-button":!0,onClick:xt||!es?()=>{}:()=>{var he;or(),(he=f.onDismiss)==null||he.call(f,f)},className:cr(U==null?void 0:U.closeButton,(s=f==null?void 0:f.classNames)==null?void 0:s.closeButton)},(i=Y==null?void 0:Y.close)!=null?i:NL):null,f.jsx||A.isValidElement(f.title)?f.jsx?f.jsx:typeof f.title=="function"?f.title():f.title:z.createElement(z.Fragment,null,on||f.icon||f.promise?z.createElement("div",{"data-icon":"",className:cr(U==null?void 0:U.icon,(o=f==null?void 0:f.classNames)==null?void 0:o.icon)},f.promise||f.type==="loading"&&!f.icon?f.icon||eo():null,f.type!=="loading"?f.icon||(Y==null?void 0:Y[on])||AL(on):null):null,z.createElement("div",{"data-content":"",className:cr(U==null?void 0:U.content,(a=f==null?void 0:f.classNames)==null?void 0:a.content)},z.createElement("div",{"data-title":"",className:cr(U==null?void 0:U.title,(l=f==null?void 0:f.classNames)==null?void 0:l.title)},typeof f.title=="function"?f.title():f.title),f.description?z.createElement("div",{"data-description":"",className:cr(C,um,U==null?void 0:U.description,(c=f==null?void 0:f.classNames)==null?void 0:c.description)},typeof f.description=="function"?f.description():f.description):null),A.isValidElement(f.cancel)?f.cancel:f.cancel&&Yd(f.cancel)?z.createElement("button",{"data-button":!0,"data-cancel":!0,style:f.cancelButtonStyle||k,onClick:he=>{var Ue,We;Yd(f.cancel)&&es&&((We=(Ue=f.cancel).onClick)==null||We.call(Ue,he),or())},className:cr(U==null?void 0:U.cancelButton,(d=f==null?void 0:f.classNames)==null?void 0:d.cancelButton)},f.cancel.label):null,A.isValidElement(f.action)?f.action:f.action&&Yd(f.action)?z.createElement("button",{"data-button":!0,"data-action":!0,style:f.actionButtonStyle||P,onClick:he=>{var Ue,We;Yd(f.action)&&((We=(Ue=f.action).onClick)==null||We.call(Ue,he),!he.defaultPrevented&&or())},className:cr(U==null?void 0:U.actionButton,(h=f==null?void 0:f.classNames)==null?void 0:h.actionButton)},f.action.label):null))};function mT(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function XL(t,e){let n={};return[t,e].forEach((r,s)=>{let i=s===1,o=i?"--mobile-offset":"--offset",a=i?qL:zL;function l(c){["top","right","bottom","left"].forEach(d=>{n[`${o}-${d}`]=typeof c=="number"?`${c}px`:c})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(c=>{r[c]===void 0?n[`${o}-${c}`]=a:n[`${o}-${c}`]=typeof r[c]=="number"?`${r[c]}px`:r[c]}):l(a)}),n}var JL=A.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:o,className:a,offset:l,mobileOffset:c,theme:d="light",richColors:h,duration:p,style:f,visibleToasts:_=$L,toastOptions:y,dir:E=mT(),gap:w=WL,loadingIcon:v,icons:I,containerAriaLabel:D="Notifications",pauseWhenPageIsHidden:O}=t,[V,S]=z.useState([]),T=z.useMemo(()=>Array.from(new Set([r].concat(V.filter(ne=>ne.position).map(ne=>ne.position)))),[V,r]),[b,k]=z.useState([]),[P,N]=z.useState(!1),[C,q]=z.useState(!1),[Z,ie]=z.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),G=z.useRef(null),F=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),U=z.useRef(null),Y=z.useRef(!1),de=z.useCallback(ne=>{S(ce=>{var le;return(le=ce.find(we=>we.id===ne.id))!=null&&le.delete||_n.dismiss(ne.id),ce.filter(({id:we})=>we!==ne.id)})},[]);return z.useEffect(()=>_n.subscribe(ne=>{if(ne.dismiss){S(ce=>ce.map(le=>le.id===ne.id?{...le,delete:!0}:le));return}setTimeout(()=>{z1.flushSync(()=>{S(ce=>{let le=ce.findIndex(we=>we.id===ne.id);return le!==-1?[...ce.slice(0,le),{...ce[le],...ne},...ce.slice(le+1)]:[ne,...ce]})})})}),[]),z.useEffect(()=>{if(d!=="system"){ie(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ie("dark"):ie("light")),typeof window>"u")return;let ne=window.matchMedia("(prefers-color-scheme: dark)");try{ne.addEventListener("change",({matches:ce})=>{ie(ce?"dark":"light")})}catch{ne.addListener(({matches:le})=>{try{ie(le?"dark":"light")}catch(we){console.error(we)}})}},[d]),z.useEffect(()=>{V.length<=1&&N(!1)},[V]),z.useEffect(()=>{let ne=ce=>{var le,we;s.every(Qe=>ce[Qe]||ce.code===Qe)&&(N(!0),(le=G.current)==null||le.focus()),ce.code==="Escape"&&(document.activeElement===G.current||(we=G.current)!=null&&we.contains(document.activeElement))&&N(!1)};return document.addEventListener("keydown",ne),()=>document.removeEventListener("keydown",ne)},[s]),z.useEffect(()=>{if(G.current)return()=>{U.current&&(U.current.focus({preventScroll:!0}),U.current=null,Y.current=!1)}},[G.current]),z.createElement("section",{ref:e,"aria-label":`${D} ${F}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},T.map((ne,ce)=>{var le;let[we,Qe]=ne.split("-");return V.length?z.createElement("ol",{key:ne,dir:E==="auto"?mT():E,tabIndex:-1,ref:G,className:a,"data-sonner-toaster":!0,"data-theme":Z,"data-y-position":we,"data-lifted":P&&V.length>1&&!i,"data-x-position":Qe,style:{"--front-toast-height":`${((le=b[0])==null?void 0:le.height)||0}px`,"--width":`${HL}px`,"--gap":`${w}px`,...f,...XL(l,c)},onBlur:ae=>{Y.current&&!ae.currentTarget.contains(ae.relatedTarget)&&(Y.current=!1,U.current&&(U.current.focus({preventScroll:!0}),U.current=null))},onFocus:ae=>{ae.target instanceof HTMLElement&&ae.target.dataset.dismissible==="false"||Y.current||(Y.current=!0,U.current=ae.relatedTarget)},onMouseEnter:()=>N(!0),onMouseMove:()=>N(!0),onMouseLeave:()=>{C||N(!1)},onDragEnd:()=>N(!1),onPointerDown:ae=>{ae.target instanceof HTMLElement&&ae.target.dataset.dismissible==="false"||q(!0)},onPointerUp:()=>q(!1)},V.filter(ae=>!ae.position&&ce===0||ae.position===ne).map((ae,me)=>{var Se,Et;return z.createElement(YL,{key:ae.id,icons:I,index:me,toast:ae,defaultRichColors:h,duration:(Se=y==null?void 0:y.duration)!=null?Se:p,className:y==null?void 0:y.className,descriptionClassName:y==null?void 0:y.descriptionClassName,invert:n,visibleToasts:_,closeButton:(Et=y==null?void 0:y.closeButton)!=null?Et:o,interacting:C,position:ne,style:y==null?void 0:y.style,unstyled:y==null?void 0:y.unstyled,classNames:y==null?void 0:y.classNames,cancelButtonStyle:y==null?void 0:y.cancelButtonStyle,actionButtonStyle:y==null?void 0:y.actionButtonStyle,removeToast:de,toasts:V.filter(Nt=>Nt.position==ae.position),heights:b.filter(Nt=>Nt.position==ae.position),setHeights:k,expandByDefault:i,gap:w,loadingIcon:v,expanded:P,pauseWhenPageIsHidden:O,swipeDirections:t.swipeDirections})})):null}))});const ZL=({...t})=>{const{theme:e="system"}=Ox();return x.jsx(JL,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})},eM=["top","right","bottom","left"],Ci=Math.min,On=Math.max,yf=Math.round,Xd=Math.floor,Qr=t=>({x:t,y:t}),tM={left:"right",right:"left",bottom:"top",top:"bottom"},nM={start:"end",end:"start"};function Py(t,e,n){return On(t,Ci(e,n))}function Ts(t,e){return typeof t=="function"?t(e):t}function Is(t){return t.split("-")[0]}function Cl(t){return t.split("-")[1]}function A_(t){return t==="x"?"y":"x"}function x_(t){return t==="y"?"height":"width"}const rM=new Set(["top","bottom"]);function zr(t){return rM.has(Is(t))?"y":"x"}function P_(t){return A_(zr(t))}function sM(t,e,n){n===void 0&&(n=!1);const r=Cl(t),s=P_(t),i=x_(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=vf(o)),[o,vf(o)]}function iM(t){const e=vf(t);return[Ry(t),e,Ry(e)]}function Ry(t){return t.replace(/start|end/g,e=>nM[e])}const gT=["left","right"],yT=["right","left"],oM=["top","bottom"],aM=["bottom","top"];function lM(t,e,n){switch(t){case"top":case"bottom":return n?e?yT:gT:e?gT:yT;case"left":case"right":return e?oM:aM;default:return[]}}function cM(t,e,n,r){const s=Cl(t);let i=lM(Is(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(Ry)))),i}function vf(t){return t.replace(/left|right|bottom|top/g,e=>tM[e])}function uM(t){return{top:0,right:0,bottom:0,left:0,...t}}function Vx(t){return typeof t!="number"?uM(t):{top:t,right:t,bottom:t,left:t}}function _f(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function vT(t,e,n){let{reference:r,floating:s}=t;const i=zr(e),o=P_(e),a=x_(o),l=Is(e),c=i==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,p=r[a]/2-s[a]/2;let f;switch(l){case"top":f={x:d,y:r.y-s.height};break;case"bottom":f={x:d,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:h};break;case"left":f={x:r.x-s.width,y:h};break;default:f={x:r.x,y:r.y}}switch(Cl(e)){case"start":f[o]-=p*(n&&c?-1:1);break;case"end":f[o]+=p*(n&&c?-1:1);break}return f}const dM=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:h}=vT(c,r,l),p=r,f={},_=0;for(let y=0;y<a.length;y++){const{name:E,fn:w}=a[y],{x:v,y:I,data:D,reset:O}=await w({x:d,y:h,initialPlacement:r,placement:p,strategy:s,middlewareData:f,rects:c,platform:o,elements:{reference:t,floating:e}});d=v??d,h=I??h,f={...f,[E]:{...f[E],...D}},O&&_<=50&&(_++,typeof O=="object"&&(O.placement&&(p=O.placement),O.rects&&(c=O.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):O.rects),{x:d,y:h}=vT(c,p,l)),y=-1)}return{x:d,y:h,placement:p,strategy:s,middlewareData:f}};async function yu(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:p=!1,padding:f=0}=Ts(e,t),_=Vx(f),E=a[p?h==="floating"?"reference":"floating":h],w=_f(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(E)))==null||n?E:E.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:d,strategy:l})),v=h==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,I=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),D=await(i.isElement==null?void 0:i.isElement(I))?await(i.getScale==null?void 0:i.getScale(I))||{x:1,y:1}:{x:1,y:1},O=_f(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:I,strategy:l}):v);return{top:(w.top-O.top+_.top)/D.y,bottom:(O.bottom-w.bottom+_.bottom)/D.y,left:(w.left-O.left+_.left)/D.x,right:(O.right-w.right+_.right)/D.x}}const hM=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:d=0}=Ts(t,e)||{};if(c==null)return{};const h=Vx(d),p={x:n,y:r},f=P_(s),_=x_(f),y=await o.getDimensions(c),E=f==="y",w=E?"top":"left",v=E?"bottom":"right",I=E?"clientHeight":"clientWidth",D=i.reference[_]+i.reference[f]-p[f]-i.floating[_],O=p[f]-i.reference[f],V=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let S=V?V[I]:0;(!S||!await(o.isElement==null?void 0:o.isElement(V)))&&(S=a.floating[I]||i.floating[_]);const T=D/2-O/2,b=S/2-y[_]/2-1,k=Ci(h[w],b),P=Ci(h[v],b),N=k,C=S-y[_]-P,q=S/2-y[_]/2+T,Z=Py(N,q,C),ie=!l.arrow&&Cl(s)!=null&&q!==Z&&i.reference[_]/2-(q<N?k:P)-y[_]/2<0,G=ie?q<N?q-N:q-C:0;return{[f]:p[f]+G,data:{[f]:Z,centerOffset:q-Z-G,...ie&&{alignmentOffset:G}},reset:ie}}}),fM=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:_="none",flipAlignment:y=!0,...E}=Ts(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const w=Is(s),v=zr(a),I=Is(a)===a,D=await(l.isRTL==null?void 0:l.isRTL(c.floating)),O=p||(I||!y?[vf(a)]:iM(a)),V=_!=="none";!p&&V&&O.push(...cM(a,y,_,D));const S=[a,...O],T=await yu(e,E),b=[];let k=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&b.push(T[w]),h){const q=sM(s,o,D);b.push(T[q[0]],T[q[1]])}if(k=[...k,{placement:s,overflows:b}],!b.every(q=>q<=0)){var P,N;const q=(((P=i.flip)==null?void 0:P.index)||0)+1,Z=S[q];if(Z&&(!(h==="alignment"?v!==zr(Z):!1)||k.every(F=>zr(F.placement)===v?F.overflows[0]>0:!0)))return{data:{index:q,overflows:k},reset:{placement:Z}};let ie=(N=k.filter(G=>G.overflows[0]<=0).sort((G,F)=>G.overflows[1]-F.overflows[1])[0])==null?void 0:N.placement;if(!ie)switch(f){case"bestFit":{var C;const G=(C=k.filter(F=>{if(V){const U=zr(F.placement);return U===v||U==="y"}return!0}).map(F=>[F.placement,F.overflows.filter(U=>U>0).reduce((U,Y)=>U+Y,0)]).sort((F,U)=>F[1]-U[1])[0])==null?void 0:C[0];G&&(ie=G);break}case"initialPlacement":ie=a;break}if(s!==ie)return{reset:{placement:ie}}}return{}}}};function _T(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function wT(t){return eM.some(e=>t[e]>=0)}const pM=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Ts(t,e);switch(r){case"referenceHidden":{const i=await yu(e,{...s,elementContext:"reference"}),o=_T(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:wT(o)}}}case"escaped":{const i=await yu(e,{...s,altBoundary:!0}),o=_T(i,n.floating);return{data:{escapedOffsets:o,escaped:wT(o)}}}default:return{}}}}},Lx=new Set(["left","top"]);async function mM(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Is(n),a=Cl(n),l=zr(n)==="y",c=Lx.has(o)?-1:1,d=i&&l?-1:1,h=Ts(e,t);let{mainAxis:p,crossAxis:f,alignmentAxis:_}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof _=="number"&&(f=a==="end"?_*-1:_),l?{x:f*d,y:p*c}:{x:p*c,y:f*d}}const gM=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await mM(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},yM=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:E=>{let{x:w,y:v}=E;return{x:w,y:v}}},...l}=Ts(t,e),c={x:n,y:r},d=await yu(e,l),h=zr(Is(s)),p=A_(h);let f=c[p],_=c[h];if(i){const E=p==="y"?"top":"left",w=p==="y"?"bottom":"right",v=f+d[E],I=f-d[w];f=Py(v,f,I)}if(o){const E=h==="y"?"top":"left",w=h==="y"?"bottom":"right",v=_+d[E],I=_-d[w];_=Py(v,_,I)}const y=a.fn({...e,[p]:f,[h]:_});return{...y,data:{x:y.x-n,y:y.y-r,enabled:{[p]:i,[h]:o}}}}}},vM=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Ts(t,e),d={x:n,y:r},h=zr(s),p=A_(h);let f=d[p],_=d[h];const y=Ts(a,e),E=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(l){const I=p==="y"?"height":"width",D=i.reference[p]-i.floating[I]+E.mainAxis,O=i.reference[p]+i.reference[I]-E.mainAxis;f<D?f=D:f>O&&(f=O)}if(c){var w,v;const I=p==="y"?"width":"height",D=Lx.has(Is(s)),O=i.reference[h]-i.floating[I]+(D&&((w=o.offset)==null?void 0:w[h])||0)+(D?0:E.crossAxis),V=i.reference[h]+i.reference[I]+(D?0:((v=o.offset)==null?void 0:v[h])||0)-(D?E.crossAxis:0);_<O?_=O:_>V&&(_=V)}return{[p]:f,[h]:_}}}},_M=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...c}=Ts(t,e),d=await yu(e,c),h=Is(s),p=Cl(s),f=zr(s)==="y",{width:_,height:y}=i.floating;let E,w;h==="top"||h==="bottom"?(E=h,w=p===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(w=h,E=p==="end"?"top":"bottom");const v=y-d.top-d.bottom,I=_-d.left-d.right,D=Ci(y-d[E],v),O=Ci(_-d[w],I),V=!e.middlewareData.shift;let S=D,T=O;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(T=I),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(S=v),V&&!p){const k=On(d.left,0),P=On(d.right,0),N=On(d.top,0),C=On(d.bottom,0);f?T=_-2*(k!==0||P!==0?k+P:On(d.left,d.right)):S=y-2*(N!==0||C!==0?N+C:On(d.top,d.bottom))}await l({...e,availableWidth:T,availableHeight:S});const b=await o.getDimensions(a.floating);return _!==b.width||y!==b.height?{reset:{rects:!0}}:{}}}};function Tp(){return typeof window<"u"}function kl(t){return Mx(t)?(t.nodeName||"").toLowerCase():"#document"}function $n(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Jr(t){var e;return(e=(Mx(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Mx(t){return Tp()?t instanceof Node||t instanceof $n(t).Node:!1}function Sr(t){return Tp()?t instanceof Element||t instanceof $n(t).Element:!1}function Yr(t){return Tp()?t instanceof HTMLElement||t instanceof $n(t).HTMLElement:!1}function ET(t){return!Tp()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof $n(t).ShadowRoot}const wM=new Set(["inline","contents"]);function Xu(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=br(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!wM.has(s)}const EM=new Set(["table","td","th"]);function TM(t){return EM.has(kl(t))}const IM=[":popover-open",":modal"];function Ip(t){return IM.some(e=>{try{return t.matches(e)}catch{return!1}})}const SM=["transform","translate","scale","rotate","perspective"],bM=["transform","translate","scale","rotate","perspective","filter"],AM=["paint","layout","strict","content"];function R_(t){const e=C_(),n=Sr(t)?br(t):t;return SM.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||bM.some(r=>(n.willChange||"").includes(r))||AM.some(r=>(n.contain||"").includes(r))}function xM(t){let e=ki(t);for(;Yr(e)&&!rl(e);){if(R_(e))return e;if(Ip(e))return null;e=ki(e)}return null}function C_(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const PM=new Set(["html","body","#document"]);function rl(t){return PM.has(kl(t))}function br(t){return $n(t).getComputedStyle(t)}function Sp(t){return Sr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ki(t){if(kl(t)==="html")return t;const e=t.assignedSlot||t.parentNode||ET(t)&&t.host||Jr(t);return ET(e)?e.host:e}function Fx(t){const e=ki(t);return rl(e)?t.ownerDocument?t.ownerDocument.body:t.body:Yr(e)&&Xu(e)?e:Fx(e)}function vu(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=Fx(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=$n(s);if(i){const a=Cy(o);return e.concat(o,o.visualViewport||[],Xu(s)?s:[],a&&n?vu(a):[])}return e.concat(s,vu(s,[],n))}function Cy(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Ux(t){const e=br(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Yr(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=yf(n)!==i||yf(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function k_(t){return Sr(t)?t:t.contextElement}function Fa(t){const e=k_(t);if(!Yr(e))return Qr(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=Ux(e);let o=(i?yf(n.width):n.width)/r,a=(i?yf(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const RM=Qr(0);function jx(t){const e=$n(t);return!C_()||!e.visualViewport?RM:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function CM(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==$n(t)?!1:e}function Bo(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=k_(t);let o=Qr(1);e&&(r?Sr(r)&&(o=Fa(r)):o=Fa(t));const a=CM(i,n,r)?jx(i):Qr(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,d=s.width/o.x,h=s.height/o.y;if(i){const p=$n(i),f=r&&Sr(r)?$n(r):r;let _=p,y=Cy(_);for(;y&&r&&f!==_;){const E=Fa(y),w=y.getBoundingClientRect(),v=br(y),I=w.left+(y.clientLeft+parseFloat(v.paddingLeft))*E.x,D=w.top+(y.clientTop+parseFloat(v.paddingTop))*E.y;l*=E.x,c*=E.y,d*=E.x,h*=E.y,l+=I,c+=D,_=$n(y),y=Cy(_)}}return _f({width:d,height:h,x:l,y:c})}function bp(t,e){const n=Sp(t).scrollLeft;return e?e.left+n:Bo(Jr(t)).left+n}function Bx(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-bp(t,n),s=n.top+e.scrollTop;return{x:r,y:s}}function kM(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=Jr(r),a=e?Ip(e.floating):!1;if(r===o||a&&i)return n;let l={scrollLeft:0,scrollTop:0},c=Qr(1);const d=Qr(0),h=Yr(r);if((h||!h&&!i)&&((kl(r)!=="body"||Xu(o))&&(l=Sp(r)),Yr(r))){const f=Bo(r);c=Fa(r),d.x=f.x+r.clientLeft,d.y=f.y+r.clientTop}const p=o&&!h&&!i?Bx(o,l):Qr(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+d.x+p.x,y:n.y*c.y-l.scrollTop*c.y+d.y+p.y}}function DM(t){return Array.from(t.getClientRects())}function NM(t){const e=Jr(t),n=Sp(t),r=t.ownerDocument.body,s=On(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=On(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+bp(t);const a=-n.scrollTop;return br(r).direction==="rtl"&&(o+=On(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}const TT=25;function OM(t,e){const n=$n(t),r=Jr(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const d=C_();(!d||d&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}const c=bp(r);if(c<=0){const d=r.ownerDocument,h=d.body,p=getComputedStyle(h),f=d.compatMode==="CSS1Compat"&&parseFloat(p.marginLeft)+parseFloat(p.marginRight)||0,_=Math.abs(r.clientWidth-h.clientWidth-f);_<=TT&&(i-=_)}else c<=TT&&(i+=c);return{width:i,height:o,x:a,y:l}}const VM=new Set(["absolute","fixed"]);function LM(t,e){const n=Bo(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Yr(t)?Fa(t):Qr(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function IT(t,e,n){let r;if(e==="viewport")r=OM(t,n);else if(e==="document")r=NM(Jr(t));else if(Sr(e))r=LM(e,n);else{const s=jx(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return _f(r)}function $x(t,e){const n=ki(t);return n===e||!Sr(n)||rl(n)?!1:br(n).position==="fixed"||$x(n,e)}function MM(t,e){const n=e.get(t);if(n)return n;let r=vu(t,[],!1).filter(a=>Sr(a)&&kl(a)!=="body"),s=null;const i=br(t).position==="fixed";let o=i?ki(t):t;for(;Sr(o)&&!rl(o);){const a=br(o),l=R_(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&VM.has(s.position)||Xu(o)&&!l&&$x(t,o))?r=r.filter(d=>d!==o):s=a,o=ki(o)}return e.set(t,r),r}function FM(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?Ip(e)?[]:MM(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,d)=>{const h=IT(e,d,s);return c.top=On(h.top,c.top),c.right=Ci(h.right,c.right),c.bottom=Ci(h.bottom,c.bottom),c.left=On(h.left,c.left),c},IT(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function UM(t){const{width:e,height:n}=Ux(t);return{width:e,height:n}}function jM(t,e,n){const r=Yr(e),s=Jr(e),i=n==="fixed",o=Bo(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=Qr(0);function c(){l.x=bp(s)}if(r||!r&&!i)if((kl(e)!=="body"||Xu(s))&&(a=Sp(e)),r){const f=Bo(e,!0,i,e);l.x=f.x+e.clientLeft,l.y=f.y+e.clientTop}else s&&c();i&&!r&&s&&c();const d=s&&!r&&!i?Bx(s,a):Qr(0),h=o.left+a.scrollLeft-l.x-d.x,p=o.top+a.scrollTop-l.y-d.y;return{x:h,y:p,width:o.width,height:o.height}}function rg(t){return br(t).position==="static"}function ST(t,e){if(!Yr(t)||br(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Jr(t)===n&&(n=n.ownerDocument.body),n}function zx(t,e){const n=$n(t);if(Ip(t))return n;if(!Yr(t)){let s=ki(t);for(;s&&!rl(s);){if(Sr(s)&&!rg(s))return s;s=ki(s)}return n}let r=ST(t,e);for(;r&&TM(r)&&rg(r);)r=ST(r,e);return r&&rl(r)&&rg(r)&&!R_(r)?n:r||xM(t)||n}const BM=async function(t){const e=this.getOffsetParent||zx,n=this.getDimensions,r=await n(t.floating);return{reference:jM(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function $M(t){return br(t).direction==="rtl"}const zM={convertOffsetParentRelativeRectToViewportRelativeRect:kM,getDocumentElement:Jr,getClippingRect:FM,getOffsetParent:zx,getElementRects:BM,getClientRects:DM,getDimensions:UM,getScale:Fa,isElement:Sr,isRTL:$M};function qx(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function qM(t,e){let n=null,r;const s=Jr(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const c=t.getBoundingClientRect(),{left:d,top:h,width:p,height:f}=c;if(a||e(),!p||!f)return;const _=Xd(h),y=Xd(s.clientWidth-(d+p)),E=Xd(s.clientHeight-(h+f)),w=Xd(d),I={rootMargin:-_+"px "+-y+"px "+-E+"px "+-w+"px",threshold:On(0,Ci(1,l))||1};let D=!0;function O(V){const S=V[0].intersectionRatio;if(S!==l){if(!D)return o();S?o(!1,S):r=setTimeout(()=>{o(!1,1e-7)},1e3)}S===1&&!qx(c,t.getBoundingClientRect())&&o(),D=!1}try{n=new IntersectionObserver(O,{...I,root:s.ownerDocument})}catch{n=new IntersectionObserver(O,I)}n.observe(t)}return o(!0),i}function HM(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=k_(t),d=s||i?[...c?vu(c):[],...vu(e)]:[];d.forEach(w=>{s&&w.addEventListener("scroll",n,{passive:!0}),i&&w.addEventListener("resize",n)});const h=c&&a?qM(c,n):null;let p=-1,f=null;o&&(f=new ResizeObserver(w=>{let[v]=w;v&&v.target===c&&f&&(f.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var I;(I=f)==null||I.observe(e)})),n()}),c&&!l&&f.observe(c),f.observe(e));let _,y=l?Bo(t):null;l&&E();function E(){const w=Bo(t);y&&!qx(y,w)&&n(),y=w,_=requestAnimationFrame(E)}return n(),()=>{var w;d.forEach(v=>{s&&v.removeEventListener("scroll",n),i&&v.removeEventListener("resize",n)}),h==null||h(),(w=f)==null||w.disconnect(),f=null,l&&cancelAnimationFrame(_)}}const WM=gM,KM=yM,GM=fM,QM=_M,YM=pM,bT=hM,XM=vM,JM=(t,e,n)=>{const r=new Map,s={platform:zM,...n},i={...s.platform,_c:r};return dM(t,e,{...s,platform:i})};var ZM=typeof document<"u",eF=function(){},Rh=ZM?A.useLayoutEffect:eF;function wf(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!wf(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!wf(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function Hx(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function AT(t,e){const n=Hx(t);return Math.round(e*n)/n}function sg(t){const e=A.useRef(t);return Rh(()=>{e.current=t}),e}function tF(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[d,h]=A.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,f]=A.useState(r);wf(p,r)||f(r);const[_,y]=A.useState(null),[E,w]=A.useState(null),v=A.useCallback(F=>{F!==V.current&&(V.current=F,y(F))},[]),I=A.useCallback(F=>{F!==S.current&&(S.current=F,w(F))},[]),D=i||_,O=o||E,V=A.useRef(null),S=A.useRef(null),T=A.useRef(d),b=l!=null,k=sg(l),P=sg(s),N=sg(c),C=A.useCallback(()=>{if(!V.current||!S.current)return;const F={placement:e,strategy:n,middleware:p};P.current&&(F.platform=P.current),JM(V.current,S.current,F).then(U=>{const Y={...U,isPositioned:N.current!==!1};q.current&&!wf(T.current,Y)&&(T.current=Y,Qu.flushSync(()=>{h(Y)}))})},[p,e,n,P,N]);Rh(()=>{c===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,h(F=>({...F,isPositioned:!1})))},[c]);const q=A.useRef(!1);Rh(()=>(q.current=!0,()=>{q.current=!1}),[]),Rh(()=>{if(D&&(V.current=D),O&&(S.current=O),D&&O){if(k.current)return k.current(D,O,C);C()}},[D,O,C,k,b]);const Z=A.useMemo(()=>({reference:V,floating:S,setReference:v,setFloating:I}),[v,I]),ie=A.useMemo(()=>({reference:D,floating:O}),[D,O]),G=A.useMemo(()=>{const F={position:n,left:0,top:0};if(!ie.floating)return F;const U=AT(ie.floating,d.x),Y=AT(ie.floating,d.y);return a?{...F,transform:"translate("+U+"px, "+Y+"px)",...Hx(ie.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:U,top:Y}},[n,a,ie.floating,d.x,d.y]);return A.useMemo(()=>({...d,update:C,refs:Z,elements:ie,floatingStyles:G}),[d,C,Z,ie,G])}const nF=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?bT({element:r.current,padding:s}).fn(n):{}:r?bT({element:r,padding:s}).fn(n):{}}}},rF=(t,e)=>({...WM(t),options:[t,e]}),sF=(t,e)=>({...KM(t),options:[t,e]}),iF=(t,e)=>({...XM(t),options:[t,e]}),oF=(t,e)=>({...GM(t),options:[t,e]}),aF=(t,e)=>({...QM(t),options:[t,e]}),lF=(t,e)=>({...YM(t),options:[t,e]}),cF=(t,e)=>({...nF(t),options:[t,e]});var uF="Arrow",Wx=A.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return x.jsx(Rn.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:x.jsx("polygon",{points:"0,0 30,0 15,10"})})});Wx.displayName=uF;var dF=Wx;function hF(t){const[e,n]=A.useState(void 0);return Ri(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var D_="Popper",[Kx,Gx]=_p(D_),[fF,Qx]=Kx(D_),Yx=t=>{const{__scopePopper:e,children:n}=t,[r,s]=A.useState(null);return x.jsx(fF,{scope:e,anchor:r,onAnchorChange:s,children:n})};Yx.displayName=D_;var Xx="PopperAnchor",Jx=A.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=Qx(Xx,n),o=A.useRef(null),a=Ir(e,o),l=A.useRef(null);return A.useEffect(()=>{const c=l.current;l.current=(r==null?void 0:r.current)||o.current,c!==l.current&&i.onAnchorChange(l.current)}),r?null:x.jsx(Rn.div,{...s,ref:a})});Jx.displayName=Xx;var N_="PopperContent",[pF,mF]=Kx(N_),Zx=A.forwardRef((t,e)=>{var ae,me,Se,Et,Nt,Kt;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:p=!1,updatePositionStrategy:f="optimized",onPlaced:_,...y}=t,E=Qx(N_,n),[w,v]=A.useState(null),I=Ir(e,Bt=>v(Bt)),[D,O]=A.useState(null),V=hF(D),S=(V==null?void 0:V.width)??0,T=(V==null?void 0:V.height)??0,b=r+(i!=="center"?"-"+i:""),k=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},P=Array.isArray(c)?c:[c],N=P.length>0,C={padding:k,boundary:P.filter(yF),altBoundary:N},{refs:q,floatingStyles:Z,placement:ie,isPositioned:G,middlewareData:F}=tF({strategy:"fixed",placement:b,whileElementsMounted:(...Bt)=>HM(...Bt,{animationFrame:f==="always"}),elements:{reference:E.anchor},middleware:[rF({mainAxis:s+T,alignmentAxis:o}),l&&sF({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?iF():void 0,...C}),l&&oF({...C}),aF({...C,apply:({elements:Bt,rects:gn,availableWidth:Pr,availableHeight:ge})=>{const{width:Gn,height:Vs}=gn.reference,at=Bt.floating.style;at.setProperty("--radix-popper-available-width",`${Pr}px`),at.setProperty("--radix-popper-available-height",`${ge}px`),at.setProperty("--radix-popper-anchor-width",`${Gn}px`),at.setProperty("--radix-popper-anchor-height",`${Vs}px`)}}),D&&cF({element:D,padding:a}),vF({arrowWidth:S,arrowHeight:T}),p&&lF({strategy:"referenceHidden",...C})]}),[U,Y]=nP(ie),de=Pi(_);Ri(()=>{G&&(de==null||de())},[G,de]);const ne=(ae=F.arrow)==null?void 0:ae.x,ce=(me=F.arrow)==null?void 0:me.y,le=((Se=F.arrow)==null?void 0:Se.centerOffset)!==0,[we,Qe]=A.useState();return Ri(()=>{w&&Qe(window.getComputedStyle(w).zIndex)},[w]),x.jsx("div",{ref:q.setFloating,"data-radix-popper-content-wrapper":"",style:{...Z,transform:G?Z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:we,"--radix-popper-transform-origin":[(Et=F.transformOrigin)==null?void 0:Et.x,(Nt=F.transformOrigin)==null?void 0:Nt.y].join(" "),...((Kt=F.hide)==null?void 0:Kt.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:x.jsx(pF,{scope:n,placedSide:U,onArrowChange:O,arrowX:ne,arrowY:ce,shouldHideArrow:le,children:x.jsx(Rn.div,{"data-side":U,"data-align":Y,...y,ref:I,style:{...y.style,animation:G?void 0:"none"}})})})});Zx.displayName=N_;var eP="PopperArrow",gF={top:"bottom",right:"left",bottom:"top",left:"right"},tP=A.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=mF(eP,r),o=gF[i.placedSide];return x.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:x.jsx(dF,{...s,ref:n,style:{...s.style,display:"block"}})})});tP.displayName=eP;function yF(t){return t!==null}var vF=t=>({name:"transformOrigin",options:t,fn(e){var E,w,v;const{placement:n,rects:r,middlewareData:s}=e,o=((E=s.arrow)==null?void 0:E.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,d]=nP(n),h={start:"0%",center:"50%",end:"100%"}[d],p=(((w=s.arrow)==null?void 0:w.x)??0)+a/2,f=(((v=s.arrow)==null?void 0:v.y)??0)+l/2;let _="",y="";return c==="bottom"?(_=o?h:`${p}px`,y=`${-l}px`):c==="top"?(_=o?h:`${p}px`,y=`${r.floating.height+l}px`):c==="right"?(_=`${-l}px`,y=o?h:`${f}px`):c==="left"&&(_=`${r.floating.width+l}px`,y=o?h:`${f}px`),{data:{x:_,y}}}});function nP(t){const[e,n="center"]=t.split("-");return[e,n]}var v8=Yx,_F=Jx,wF=Zx,EF=tP,[Ap]=_p("Tooltip",[Gx]),O_=Gx(),rP="TooltipProvider",TF=700,xT="tooltip.open",[IF,sP]=Ap(rP),iP=t=>{const{__scopeTooltip:e,delayDuration:n=TF,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,o=A.useRef(!0),a=A.useRef(!1),l=A.useRef(0);return A.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),x.jsx(IF,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:A.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:A.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:A.useCallback(c=>{a.current=c},[]),disableHoverableContent:s,children:i})};iP.displayName=rP;var oP="Tooltip",[_8,xp]=Ap(oP),ky="TooltipTrigger",SF=A.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=xp(ky,n),i=sP(ky,n),o=O_(n),a=A.useRef(null),l=Ir(e,a,s.onTriggerChange),c=A.useRef(!1),d=A.useRef(!1),h=A.useCallback(()=>c.current=!1,[]);return A.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),x.jsx(_F,{asChild:!0,...o,children:x.jsx(Rn.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:l,onPointerMove:Ct(t.onPointerMove,p=>{p.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:Ct(t.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:Ct(t.onPointerDown,()=>{s.open&&s.onClose(),c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Ct(t.onFocus,()=>{c.current||s.onOpen()}),onBlur:Ct(t.onBlur,s.onClose),onClick:Ct(t.onClick,s.onClose)})})});SF.displayName=ky;var bF="TooltipPortal",[w8,AF]=Ap(bF,{forceMount:void 0}),sl="TooltipContent",aP=A.forwardRef((t,e)=>{const n=AF(sl,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=xp(sl,t.__scopeTooltip);return x.jsx(__,{present:r||o.open,children:o.disableHoverableContent?x.jsx(lP,{side:s,...i,ref:e}):x.jsx(xF,{side:s,...i,ref:e})})}),xF=A.forwardRef((t,e)=>{const n=xp(sl,t.__scopeTooltip),r=sP(sl,t.__scopeTooltip),s=A.useRef(null),i=Ir(e,s),[o,a]=A.useState(null),{trigger:l,onClose:c}=n,d=s.current,{onPointerInTransitChange:h}=r,p=A.useCallback(()=>{a(null),h(!1)},[h]),f=A.useCallback((_,y)=>{const E=_.currentTarget,w={x:_.clientX,y:_.clientY},v=DF(w,E.getBoundingClientRect()),I=NF(w,v),D=OF(y.getBoundingClientRect()),O=LF([...I,...D]);a(O),h(!0)},[h]);return A.useEffect(()=>()=>p(),[p]),A.useEffect(()=>{if(l&&d){const _=E=>f(E,d),y=E=>f(E,l);return l.addEventListener("pointerleave",_),d.addEventListener("pointerleave",y),()=>{l.removeEventListener("pointerleave",_),d.removeEventListener("pointerleave",y)}}},[l,d,f,p]),A.useEffect(()=>{if(o){const _=y=>{const E=y.target,w={x:y.clientX,y:y.clientY},v=(l==null?void 0:l.contains(E))||(d==null?void 0:d.contains(E)),I=!VF(w,o);v?p():I&&(p(),c())};return document.addEventListener("pointermove",_),()=>document.removeEventListener("pointermove",_)}},[l,d,o,c,p]),x.jsx(lP,{...t,ref:i})}),[PF,RF]=Ap(oP,{isInside:!1}),CF=xO("TooltipContent"),lP=A.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=t,l=xp(sl,n),c=O_(n),{onClose:d}=l;return A.useEffect(()=>(document.addEventListener(xT,d),()=>document.removeEventListener(xT,d)),[d]),A.useEffect(()=>{if(l.trigger){const h=p=>{const f=p.target;f!=null&&f.contains(l.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,d]),x.jsx(v_,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:x.jsxs(wF,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[x.jsx(CF,{children:r}),x.jsx(PF,{scope:n,isInside:!0,children:x.jsx(JO,{id:l.contentId,role:"tooltip",children:s||r})})]})})});aP.displayName=sl;var cP="TooltipArrow",kF=A.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=O_(n);return RF(cP,n).isInside?null:x.jsx(EF,{...s,...r,ref:e})});kF.displayName=cP;function DF(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function NF(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function OF(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function VF(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i],l=e[o],c=a.x,d=a.y,h=l.x,p=l.y;d>r!=p>r&&n<(h-c)*(r-d)/(p-d)+c&&(s=!s)}return s}function LF(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),MF(e)}function MF(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var FF=iP,uP=aP;const UF=FF,jF=A.forwardRef(({className:t,sideOffset:e=4,...n},r)=>x.jsx(uP,{ref:r,sideOffset:e,className:Rs("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));jF.displayName=uP.displayName;var Pp=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},BF={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},ni,Iv,wb,$F=(wb=class{constructor(){De(this,ni,BF);De(this,Iv,!1)}setTimeoutProvider(t){fe(this,ni,t)}setTimeout(t,e){return $(this,ni).setTimeout(t,e)}clearTimeout(t){$(this,ni).clearTimeout(t)}setInterval(t,e){return $(this,ni).setInterval(t,e)}clearInterval(t){$(this,ni).clearInterval(t)}},ni=new WeakMap,Iv=new WeakMap,wb),Dy=new $F;function zF(t){setTimeout(t,0)}var Rp=typeof window>"u"||"Deno"in globalThis;function dr(){}function qF(t,e){return typeof t=="function"?t(e):t}function HF(t){return typeof t=="number"&&t>=0&&t!==1/0}function WF(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Ny(t,e){return typeof t=="function"?t(e):t}function KF(t,e){return typeof t=="function"?t(e):t}function PT(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==V_(o,e.options))return!1}else if(!wu(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function RT(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(_u(e.options.mutationKey)!==_u(i))return!1}else if(!wu(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function V_(t,e){return((e==null?void 0:e.queryKeyHashFn)||_u)(t)}function _u(t){return JSON.stringify(t,(e,n)=>Oy(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function wu(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>wu(t[n],e[n])):!1}var GF=Object.prototype.hasOwnProperty;function dP(t,e){if(t===e)return t;const n=CT(t)&&CT(e);if(!n&&!(Oy(t)&&Oy(e)))return e;const s=(n?t:Object.keys(t)).length,i=n?e:Object.keys(e),o=i.length,a=n?new Array(o):{};let l=0;for(let c=0;c<o;c++){const d=n?c:i[c],h=t[d],p=e[d];if(h===p){a[d]=h,(n?c<s:GF.call(t,d))&&l++;continue}if(h===null||p===null||typeof h!="object"||typeof p!="object"){a[d]=p;continue}const f=dP(h,p);a[d]=f,f===h&&l++}return s===o&&l===s?t:a}function CT(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Oy(t){if(!kT(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!kT(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function kT(t){return Object.prototype.toString.call(t)==="[object Object]"}function QF(t){return new Promise(e=>{Dy.setTimeout(e,t)})}function YF(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?dP(t,e):e}function XF(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function JF(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var L_=Symbol();function hP(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===L_?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var So,ri,$a,Eb,ZF=(Eb=class extends Pp{constructor(){super();De(this,So);De(this,ri);De(this,$a);fe(this,$a,e=>{if(!Rp&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){$(this,ri)||this.setEventListener($(this,$a))}onUnsubscribe(){var e;this.hasListeners()||((e=$(this,ri))==null||e.call(this),fe(this,ri,void 0))}setEventListener(e){var n;fe(this,$a,e),(n=$(this,ri))==null||n.call(this),fe(this,ri,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){$(this,So)!==e&&(fe(this,So,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof $(this,So)=="boolean"?$(this,So):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},So=new WeakMap,ri=new WeakMap,$a=new WeakMap,Eb),fP=new ZF;function e4(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}var t4=zF;function n4(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=t4;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var un=n4(),za,si,qa,Tb,r4=(Tb=class extends Pp{constructor(){super();De(this,za,!0);De(this,si);De(this,qa);fe(this,qa,e=>{if(!Rp&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){$(this,si)||this.setEventListener($(this,qa))}onUnsubscribe(){var e;this.hasListeners()||((e=$(this,si))==null||e.call(this),fe(this,si,void 0))}setEventListener(e){var n;fe(this,qa,e),(n=$(this,si))==null||n.call(this),fe(this,si,e(this.setOnline.bind(this)))}setOnline(e){$(this,za)!==e&&(fe(this,za,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return $(this,za)}},za=new WeakMap,si=new WeakMap,qa=new WeakMap,Tb),Ef=new r4;function s4(t){return Math.min(1e3*2**t,3e4)}function pP(t){return(t??"online")==="online"?Ef.isOnline():!0}var Vy=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function mP(t){let e=!1,n=0,r;const s=e4(),i=()=>s.status!=="pending",o=y=>{var E;if(!i()){const w=new Vy(y);p(w),(E=t.onCancel)==null||E.call(t,w)}},a=()=>{e=!0},l=()=>{e=!1},c=()=>fP.isFocused()&&(t.networkMode==="always"||Ef.isOnline())&&t.canRun(),d=()=>pP(t.networkMode)&&t.canRun(),h=y=>{i()||(r==null||r(),s.resolve(y))},p=y=>{i()||(r==null||r(),s.reject(y))},f=()=>new Promise(y=>{var E;r=w=>{(i()||c())&&y(w)},(E=t.onPause)==null||E.call(t)}).then(()=>{var y;r=void 0,i()||(y=t.onContinue)==null||y.call(t)}),_=()=>{if(i())return;let y;const E=n===0?t.initialPromise:void 0;try{y=E??t.fn()}catch(w){y=Promise.reject(w)}Promise.resolve(y).then(h).catch(w=>{var V;if(i())return;const v=t.retry??(Rp?0:3),I=t.retryDelay??s4,D=typeof I=="function"?I(n,w):I,O=v===!0||typeof v=="number"&&n<v||typeof v=="function"&&v(n,w);if(e||!O){p(w);return}n++,(V=t.onFail)==null||V.call(t,n,w),QF(D).then(()=>c()?void 0:f()).then(()=>{e?p(w):_()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:a,continueRetry:l,canStart:d,start:()=>(d()?_():f().then(_),s)}}var bo,Ib,gP=(Ib=class{constructor(){De(this,bo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),HF(this.gcTime)&&fe(this,bo,Dy.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Rp?1/0:5*60*1e3))}clearGcTimeout(){$(this,bo)&&(Dy.clearTimeout($(this,bo)),fe(this,bo,void 0))}},bo=new WeakMap,Ib),Ao,Ha,Xn,xo,Mt,Bu,Po,hr,rs,Sb,i4=(Sb=class extends gP{constructor(n){super();De(this,hr);De(this,Ao);De(this,Ha);De(this,Xn);De(this,xo);De(this,Mt);De(this,Bu);De(this,Po);fe(this,Po,!1),fe(this,Bu,n.defaultOptions),this.setOptions(n.options),this.observers=[],fe(this,xo,n.client),fe(this,Xn,$(this,xo).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,fe(this,Ao,NT(this.options)),this.state=n.state??$(this,Ao),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=$(this,Mt))==null?void 0:n.promise}setOptions(n){if(this.options={...$(this,Bu),...n},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=NT(this.options);r.data!==void 0&&(this.setState(DT(r.data,r.dataUpdatedAt)),fe(this,Ao,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&$(this,Xn).remove(this)}setData(n,r){const s=YF(this.state.data,n,this.options);return Gt(this,hr,rs).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){Gt(this,hr,rs).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=$(this,Mt))==null?void 0:s.promise;return(i=$(this,Mt))==null||i.cancel(n),r?r.then(dr).catch(dr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState($(this,Ao))}isActive(){return this.observers.some(n=>KF(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===L_||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>Ny(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!WF(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=$(this,Mt))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=$(this,Mt))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),$(this,Xn).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||($(this,Mt)&&($(this,Po)?$(this,Mt).cancel({revert:!0}):$(this,Mt).cancelRetry()),this.scheduleGc()),$(this,Xn).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Gt(this,hr,rs).call(this,{type:"invalidate"})}async fetch(n,r){var c,d,h,p,f,_,y,E,w,v,I,D;if(this.state.fetchStatus!=="idle"&&((c=$(this,Mt))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if($(this,Mt))return $(this,Mt).continueRetry(),$(this,Mt).promise}if(n&&this.setOptions(n),!this.options.queryFn){const O=this.observers.find(V=>V.options.queryFn);O&&this.setOptions(O.options)}const s=new AbortController,i=O=>{Object.defineProperty(O,"signal",{enumerable:!0,get:()=>(fe(this,Po,!0),s.signal)})},o=()=>{const O=hP(this.options,r),S=(()=>{const T={client:$(this,xo),queryKey:this.queryKey,meta:this.meta};return i(T),T})();return fe(this,Po,!1),this.options.persister?this.options.persister(O,S,this):O(S)},l=(()=>{const O={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:$(this,xo),state:this.state,fetchFn:o};return i(O),O})();(d=this.options.behavior)==null||d.onFetch(l,this),fe(this,Ha,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&Gt(this,hr,rs).call(this,{type:"fetch",meta:(p=l.fetchOptions)==null?void 0:p.meta}),fe(this,Mt,mP({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,onCancel:O=>{O instanceof Vy&&O.revert&&this.setState({...$(this,Ha),fetchStatus:"idle"}),s.abort()},onFail:(O,V)=>{Gt(this,hr,rs).call(this,{type:"failed",failureCount:O,error:V})},onPause:()=>{Gt(this,hr,rs).call(this,{type:"pause"})},onContinue:()=>{Gt(this,hr,rs).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const O=await $(this,Mt).start();if(O===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(O),(_=(f=$(this,Xn).config).onSuccess)==null||_.call(f,O,this),(E=(y=$(this,Xn).config).onSettled)==null||E.call(y,O,this.state.error,this),O}catch(O){if(O instanceof Vy){if(O.silent)return $(this,Mt).promise;if(O.revert){if(this.state.data===void 0)throw O;return this.state.data}}throw Gt(this,hr,rs).call(this,{type:"error",error:O}),(v=(w=$(this,Xn).config).onError)==null||v.call(w,O,this),(D=(I=$(this,Xn).config).onSettled)==null||D.call(I,this.state.data,O,this),O}finally{this.scheduleGc()}}},Ao=new WeakMap,Ha=new WeakMap,Xn=new WeakMap,xo=new WeakMap,Mt=new WeakMap,Bu=new WeakMap,Po=new WeakMap,hr=new WeakSet,rs=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...o4(s.data,this.options),fetchMeta:n.meta??null};case"success":const i={...s,...DT(n.data,n.dataUpdatedAt),dataUpdateCount:s.dataUpdateCount+1,...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return fe(this,Ha,n.manual?i:void 0),i;case"error":const o=n.error;return{...s,error:o,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),un.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),$(this,Xn).notify({query:this,type:"updated",action:n})})},Sb);function o4(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:pP(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function DT(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function NT(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}function OT(t){return{onFetch:(e,n)=>{var d,h,p,f,_;const r=e.options,s=(p=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:p.direction,i=((f=e.state.data)==null?void 0:f.pages)||[],o=((_=e.state.data)==null?void 0:_.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let y=!1;const E=I=>{Object.defineProperty(I,"signal",{enumerable:!0,get:()=>(e.signal.aborted?y=!0:e.signal.addEventListener("abort",()=>{y=!0}),e.signal)})},w=hP(e.options,e.fetchOptions),v=async(I,D,O)=>{if(y)return Promise.reject();if(D==null&&I.pages.length)return Promise.resolve(I);const S=(()=>{const P={client:e.client,queryKey:e.queryKey,pageParam:D,direction:O?"backward":"forward",meta:e.options.meta};return E(P),P})(),T=await w(S),{maxPages:b}=e.options,k=O?JF:XF;return{pages:k(I.pages,T,b),pageParams:k(I.pageParams,D,b)}};if(s&&i.length){const I=s==="backward",D=I?a4:VT,O={pages:i,pageParams:o},V=D(r,O);a=await v(O,V,I)}else{const I=t??i.length;do{const D=l===0?o[0]??r.initialPageParam:VT(r,a);if(l>0&&D==null)break;a=await v(a,D),l++}while(l<I)}return a};e.options.persister?e.fetchFn=()=>{var y,E;return(E=(y=e.options).persister)==null?void 0:E.call(y,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=c}}}function VT(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function a4(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var $u,Fr,ln,Ro,Ur,Ys,bb,l4=(bb=class extends gP{constructor(n){super();De(this,Ur);De(this,$u);De(this,Fr);De(this,ln);De(this,Ro);fe(this,$u,n.client),this.mutationId=n.mutationId,fe(this,ln,n.mutationCache),fe(this,Fr,[]),this.state=n.state||c4(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){$(this,Fr).includes(n)||($(this,Fr).push(n),this.clearGcTimeout(),$(this,ln).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){fe(this,Fr,$(this,Fr).filter(r=>r!==n)),this.scheduleGc(),$(this,ln).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){$(this,Fr).length||(this.state.status==="pending"?this.scheduleGc():$(this,ln).remove(this))}continue(){var n;return((n=$(this,Ro))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var a,l,c,d,h,p,f,_,y,E,w,v,I,D,O,V,S,T,b,k;const r=()=>{Gt(this,Ur,Ys).call(this,{type:"continue"})},s={client:$(this,$u),meta:this.options.meta,mutationKey:this.options.mutationKey};fe(this,Ro,mP({fn:()=>this.options.mutationFn?this.options.mutationFn(n,s):Promise.reject(new Error("No mutationFn found")),onFail:(P,N)=>{Gt(this,Ur,Ys).call(this,{type:"failed",failureCount:P,error:N})},onPause:()=>{Gt(this,Ur,Ys).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>$(this,ln).canRun(this)}));const i=this.state.status==="pending",o=!$(this,Ro).canStart();try{if(i)r();else{Gt(this,Ur,Ys).call(this,{type:"pending",variables:n,isPaused:o}),await((l=(a=$(this,ln).config).onMutate)==null?void 0:l.call(a,n,this,s));const N=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,n,s));N!==this.state.context&&Gt(this,Ur,Ys).call(this,{type:"pending",context:N,variables:n,isPaused:o})}const P=await $(this,Ro).start();return await((p=(h=$(this,ln).config).onSuccess)==null?void 0:p.call(h,P,n,this.state.context,this,s)),await((_=(f=this.options).onSuccess)==null?void 0:_.call(f,P,n,this.state.context,s)),await((E=(y=$(this,ln).config).onSettled)==null?void 0:E.call(y,P,null,this.state.variables,this.state.context,this,s)),await((v=(w=this.options).onSettled)==null?void 0:v.call(w,P,null,n,this.state.context,s)),Gt(this,Ur,Ys).call(this,{type:"success",data:P}),P}catch(P){try{throw await((D=(I=$(this,ln).config).onError)==null?void 0:D.call(I,P,n,this.state.context,this,s)),await((V=(O=this.options).onError)==null?void 0:V.call(O,P,n,this.state.context,s)),await((T=(S=$(this,ln).config).onSettled)==null?void 0:T.call(S,void 0,P,this.state.variables,this.state.context,this,s)),await((k=(b=this.options).onSettled)==null?void 0:k.call(b,void 0,P,n,this.state.context,s)),P}finally{Gt(this,Ur,Ys).call(this,{type:"error",error:P})}}finally{$(this,ln).runNext(this)}}},$u=new WeakMap,Fr=new WeakMap,ln=new WeakMap,Ro=new WeakMap,Ur=new WeakSet,Ys=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),un.batch(()=>{$(this,Fr).forEach(s=>{s.onMutationUpdate(n)}),$(this,ln).notify({mutation:this,type:"updated",action:n})})},bb);function c4(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var os,fr,zu,Ab,u4=(Ab=class extends Pp{constructor(e={}){super();De(this,os);De(this,fr);De(this,zu);this.config=e,fe(this,os,new Set),fe(this,fr,new Map),fe(this,zu,0)}build(e,n,r){const s=new l4({client:e,mutationCache:this,mutationId:++Cd(this,zu)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){$(this,os).add(e);const n=Jd(e);if(typeof n=="string"){const r=$(this,fr).get(n);r?r.push(e):$(this,fr).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if($(this,os).delete(e)){const n=Jd(e);if(typeof n=="string"){const r=$(this,fr).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&$(this,fr).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Jd(e);if(typeof n=="string"){const r=$(this,fr).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=Jd(e);if(typeof n=="string"){const s=(r=$(this,fr).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){un.batch(()=>{$(this,os).forEach(e=>{this.notify({type:"removed",mutation:e})}),$(this,os).clear(),$(this,fr).clear()})}getAll(){return Array.from($(this,os))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>RT(n,r))}findAll(e={}){return this.getAll().filter(n=>RT(e,n))}notify(e){un.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return un.batch(()=>Promise.all(e.map(n=>n.continue().catch(dr))))}},os=new WeakMap,fr=new WeakMap,zu=new WeakMap,Ab);function Jd(t){var e;return(e=t.options.scope)==null?void 0:e.id}var jr,xb,d4=(xb=class extends Pp{constructor(e={}){super();De(this,jr);this.config=e,fe(this,jr,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??V_(s,n);let o=this.get(i);return o||(o=new i4({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){$(this,jr).has(e.queryHash)||($(this,jr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=$(this,jr).get(e.queryHash);n&&(e.destroy(),n===e&&$(this,jr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){un.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return $(this,jr).get(e)}getAll(){return[...$(this,jr).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>PT(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>PT(e,r)):n}notify(e){un.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){un.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){un.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},jr=new WeakMap,xb),ft,ii,oi,Wa,Ka,ai,Ga,Qa,Pb,h4=(Pb=class{constructor(t={}){De(this,ft);De(this,ii);De(this,oi);De(this,Wa);De(this,Ka);De(this,ai);De(this,Ga);De(this,Qa);fe(this,ft,t.queryCache||new d4),fe(this,ii,t.mutationCache||new u4),fe(this,oi,t.defaultOptions||{}),fe(this,Wa,new Map),fe(this,Ka,new Map),fe(this,ai,0)}mount(){Cd(this,ai)._++,$(this,ai)===1&&(fe(this,Ga,fP.subscribe(async t=>{t&&(await this.resumePausedMutations(),$(this,ft).onFocus())})),fe(this,Qa,Ef.subscribe(async t=>{t&&(await this.resumePausedMutations(),$(this,ft).onOnline())})))}unmount(){var t,e;Cd(this,ai)._--,$(this,ai)===0&&((t=$(this,Ga))==null||t.call(this),fe(this,Ga,void 0),(e=$(this,Qa))==null||e.call(this),fe(this,Qa,void 0))}isFetching(t){return $(this,ft).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return $(this,ii).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=$(this,ft).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=$(this,ft).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Ny(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return $(this,ft).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=$(this,ft).get(r.queryHash),i=s==null?void 0:s.state.data,o=qF(e,i);if(o!==void 0)return $(this,ft).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return un.batch(()=>$(this,ft).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=$(this,ft).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=$(this,ft);un.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=$(this,ft);return un.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=un.batch(()=>$(this,ft).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(dr).catch(dr)}invalidateQueries(t,e={}){return un.batch(()=>($(this,ft).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=un.batch(()=>$(this,ft).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(dr)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(dr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=$(this,ft).build(this,e);return n.isStaleByTime(Ny(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(dr).catch(dr)}fetchInfiniteQuery(t){return t.behavior=OT(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(dr).catch(dr)}ensureInfiniteQueryData(t){return t.behavior=OT(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Ef.isOnline()?$(this,ii).resumePausedMutations():Promise.resolve()}getQueryCache(){return $(this,ft)}getMutationCache(){return $(this,ii)}getDefaultOptions(){return $(this,oi)}setDefaultOptions(t){fe(this,oi,t)}setQueryDefaults(t,e){$(this,Wa).set(_u(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...$(this,Wa).values()],n={};return e.forEach(r=>{wu(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){$(this,Ka).set(_u(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...$(this,Ka).values()],n={};return e.forEach(r=>{wu(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...$(this,oi).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=V_(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===L_&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...$(this,oi).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){$(this,ft).clear(),$(this,ii).clear()}},ft=new WeakMap,ii=new WeakMap,oi=new WeakMap,Wa=new WeakMap,Ka=new WeakMap,ai=new WeakMap,Ga=new WeakMap,Qa=new WeakMap,Pb),f4=A.createContext(void 0),p4=({client:t,children:e})=>(A.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),x.jsx(f4.Provider,{value:t,children:e}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Eu(){return Eu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Eu.apply(this,arguments)}var ui;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ui||(ui={}));const LT="popstate";function m4(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return Tf("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Tu(s)}return yP(e,n,null,t)}function g4(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:a="",hash:l=""}=Zo(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Tf("",{pathname:o,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=s.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof i=="string"?i:Tu(i))}function r(s,i){M_(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return yP(e,n,r,t)}function _t(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function M_(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function y4(){return Math.random().toString(36).substr(2,8)}function MT(t,e){return{usr:t.state,key:t.key,idx:e}}function Tf(t,e,n,r){return n===void 0&&(n=null),Eu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Zo(e):e,{state:n,key:e&&e.key||r||y4()})}function Tu(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Zo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function yP(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=ui.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(Eu({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=ui.Pop;let E=d(),w=E==null?null:E-c;c=E,l&&l({action:a,location:y.location,delta:w})}function p(E,w){a=ui.Push;let v=Tf(y.location,E,w);n&&n(v,E),c=d()+1;let I=MT(v,c),D=y.createHref(v);try{o.pushState(I,"",D)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;s.location.assign(D)}i&&l&&l({action:a,location:y.location,delta:1})}function f(E,w){a=ui.Replace;let v=Tf(y.location,E,w);n&&n(v,E),c=d();let I=MT(v,c),D=y.createHref(v);o.replaceState(I,"",D),i&&l&&l({action:a,location:y.location,delta:0})}function _(E){let w=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof E=="string"?E:Tu(E);return v=v.replace(/ $/,"%20"),_t(w,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,w)}let y={get action(){return a},get location(){return t(s,o)},listen(E){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(LT,h),l=E,()=>{s.removeEventListener(LT,h),l=null}},createHref(E){return e(s,E)},createURL:_,encodeLocation(E){let w=_(E);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:p,replace:f,go(E){return o.go(E)}};return y}var FT;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(FT||(FT={}));function v4(t,e,n){return n===void 0&&(n="/"),_4(t,e,n)}function _4(t,e,n,r){let s=typeof e=="string"?Zo(e):e,i=F_(s.pathname||"/",n);if(i==null)return null;let o=vP(t);w4(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=D4(i);a=R4(o[l],c)}return a}function vP(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(_t(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=wi([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(_t(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),vP(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:x4(c,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of _P(i.path))s(i,o,l)}),e}function _P(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=_P(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function w4(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:P4(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const E4=/^:[\w-]+$/,T4=3,I4=2,S4=1,b4=10,A4=-2,UT=t=>t==="*";function x4(t,e){let n=t.split("/"),r=n.length;return n.some(UT)&&(r+=A4),e&&(r+=I4),n.filter(s=>!UT(s)).reduce((s,i)=>s+(E4.test(i)?T4:i===""?S4:b4),r)}function P4(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function R4(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=C4({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),p=l.route;if(!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:wi([i,h.pathname]),pathnameBase:L4(wi([i,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(i=wi([i,h.pathnameBase]))}return o}function C4(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=k4(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,d,h)=>{let{paramName:p,isOptional:f}=d;if(p==="*"){let y=a[h]||"";o=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const _=a[h];return f&&!_?c[p]=void 0:c[p]=(_||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function k4(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),M_(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function D4(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return M_(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function F_(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function N4(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Zo(t):t;return{pathname:n?n.startsWith("/")?n:O4(n,e):e,search:M4(r),hash:F4(s)}}function O4(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function ig(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function V4(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function U_(t,e){let n=V4(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function j_(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Zo(t):(s=Eu({},t),_t(!s.pathname||!s.pathname.includes("?"),ig("?","pathname","search",s)),_t(!s.pathname||!s.pathname.includes("#"),ig("#","pathname","hash",s)),_t(!s.search||!s.search.includes("#"),ig("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),h-=1;s.pathname=p.join("/")}a=h>=0?e[h]:"/"}let l=N4(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const wi=t=>t.join("/").replace(/\/\/+/g,"/"),L4=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),M4=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,F4=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function U4(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const wP=["post","put","patch","delete"];new Set(wP);const j4=["get",...wP];new Set(j4);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Iu(){return Iu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Iu.apply(this,arguments)}const B_=A.createContext(null),B4=A.createContext(null),Wi=A.createContext(null),Cp=A.createContext(null),Ki=A.createContext({outlet:null,matches:[],isDataRoute:!1}),EP=A.createContext(null);function $4(t,e){let{relative:n}=e===void 0?{}:e;Dl()||_t(!1);let{basename:r,navigator:s}=A.useContext(Wi),{hash:i,pathname:o,search:a}=IP(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:wi([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Dl(){return A.useContext(Cp)!=null}function Zr(){return Dl()||_t(!1),A.useContext(Cp).location}function TP(t){A.useContext(Wi).static||A.useLayoutEffect(t)}function Ju(){let{isDataRoute:t}=A.useContext(Ki);return t?tU():z4()}function z4(){Dl()||_t(!1);let t=A.useContext(B_),{basename:e,future:n,navigator:r}=A.useContext(Wi),{matches:s}=A.useContext(Ki),{pathname:i}=Zr(),o=JSON.stringify(U_(s,n.v7_relativeSplatPath)),a=A.useRef(!1);return TP(()=>{a.current=!0}),A.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=j_(c,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:wi([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,i,t])}function IP(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=A.useContext(Wi),{matches:s}=A.useContext(Ki),{pathname:i}=Zr(),o=JSON.stringify(U_(s,r.v7_relativeSplatPath));return A.useMemo(()=>j_(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function q4(t,e){return H4(t,e)}function H4(t,e,n,r){Dl()||_t(!1);let{navigator:s}=A.useContext(Wi),{matches:i}=A.useContext(Ki),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Zr(),d;if(e){var h;let E=typeof e=="string"?Zo(e):e;l==="/"||(h=E.pathname)!=null&&h.startsWith(l)||_t(!1),d=E}else d=c;let p=d.pathname||"/",f=p;if(l!=="/"){let E=l.replace(/^\//,"").split("/");f="/"+p.replace(/^\//,"").split("/").slice(E.length).join("/")}let _=v4(t,{pathname:f}),y=Y4(_&&_.map(E=>Object.assign({},E,{params:Object.assign({},a,E.params),pathname:wi([l,s.encodeLocation?s.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?l:wi([l,s.encodeLocation?s.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),i,n,r);return e&&y?A.createElement(Cp.Provider,{value:{location:Iu({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:ui.Pop}},y):y}function W4(){let t=eU(),e=U4(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),n?A.createElement("pre",{style:s},n):null,null)}const K4=A.createElement(W4,null);class G4 extends A.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?A.createElement(Ki.Provider,{value:this.props.routeContext},A.createElement(EP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Q4(t){let{routeContext:e,match:n,children:r}=t,s=A.useContext(B_);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),A.createElement(Ki.Provider,{value:e},r)}function Y4(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||_t(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:p,errors:f}=n,_=h.route.loader&&p[h.route.id]===void 0&&(!f||f[h.route.id]===void 0);if(h.route.lazy||_){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,h,p)=>{let f,_=!1,y=null,E=null;n&&(f=a&&h.route.id?a[h.route.id]:void 0,y=h.route.errorElement||K4,l&&(c<0&&p===0?(nU("route-fallback"),_=!0,E=null):c===p&&(_=!0,E=h.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,p+1)),v=()=>{let I;return f?I=y:_?I=E:h.route.Component?I=A.createElement(h.route.Component,null):h.route.element?I=h.route.element:I=d,A.createElement(Q4,{match:h,routeContext:{outlet:d,matches:w,isDataRoute:n!=null},children:I})};return n&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?A.createElement(G4,{location:n.location,revalidation:n.revalidation,component:y,error:f,children:v(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):v()},null)}var SP=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(SP||{}),bP=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(bP||{});function X4(t){let e=A.useContext(B_);return e||_t(!1),e}function J4(t){let e=A.useContext(B4);return e||_t(!1),e}function Z4(t){let e=A.useContext(Ki);return e||_t(!1),e}function AP(t){let e=Z4(),n=e.matches[e.matches.length-1];return n.route.id||_t(!1),n.route.id}function eU(){var t;let e=A.useContext(EP),n=J4(),r=AP();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function tU(){let{router:t}=X4(SP.UseNavigateStable),e=AP(bP.UseNavigateStable),n=A.useRef(!1);return TP(()=>{n.current=!0}),A.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Iu({fromRouteId:e},i)))},[t,e])}const jT={};function nU(t,e,n){jT[t]||(jT[t]=!0)}function xP(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function I8(t){let{to:e,replace:n,state:r,relative:s}=t;Dl()||_t(!1);let{future:i,static:o}=A.useContext(Wi),{matches:a}=A.useContext(Ki),{pathname:l}=Zr(),c=Ju(),d=j_(e,U_(a,i.v7_relativeSplatPath),l,s==="path"),h=JSON.stringify(d);return A.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:s}),[c,h,s,n,r]),null}function se(t){_t(!1)}function PP(t){let{basename:e="/",children:n=null,location:r,navigationType:s=ui.Pop,navigator:i,static:o=!1,future:a}=t;Dl()&&_t(!1);let l=e.replace(/^\/*/,"/"),c=A.useMemo(()=>({basename:l,navigator:i,static:o,future:Iu({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=Zo(r));let{pathname:d="/",search:h="",hash:p="",state:f=null,key:_="default"}=r,y=A.useMemo(()=>{let E=F_(d,l);return E==null?null:{location:{pathname:E,search:h,hash:p,state:f,key:_},navigationType:s}},[l,d,h,p,f,_,s]);return y==null?null:A.createElement(Wi.Provider,{value:c},A.createElement(Cp.Provider,{children:n,value:y}))}function BT(t){let{children:e,location:n}=t;return q4(Ly(e),n)}new Promise(()=>{});function Ly(t,e){e===void 0&&(e=[]);let n=[];return A.Children.forEach(t,(r,s)=>{if(!A.isValidElement(r))return;let i=[...e,s];if(r.type===A.Fragment){n.push.apply(n,Ly(r.props.children,i));return}r.type!==se&&_t(!1),!r.props.index||!r.props.children||_t(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Ly(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function My(){return My=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},My.apply(this,arguments)}function rU(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function sU(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function iU(t,e){return t.button===0&&(!e||e==="_self")&&!sU(t)}function Fy(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function oU(t,e){let n=Fy(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const aU=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],lU="6";try{window.__reactRouterVersion=lU}catch{}const cU="startTransition",If=jb[cU];function uU(t){let{basename:e,children:n,future:r,window:s}=t,i=A.useRef();i.current==null&&(i.current=m4({window:s,v5Compat:!0}));let o=i.current,[a,l]=A.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=A.useCallback(h=>{c&&If?If(()=>l(h)):l(h)},[l,c]);return A.useLayoutEffect(()=>o.listen(d),[o,d]),A.useEffect(()=>xP(r),[r]),A.createElement(PP,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}function dU(t){let{basename:e,children:n,future:r,window:s}=t,i=A.useRef();i.current==null&&(i.current=g4({window:s,v5Compat:!0}));let o=i.current,[a,l]=A.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=A.useCallback(h=>{c&&If?If(()=>l(h)):l(h)},[l,c]);return A.useLayoutEffect(()=>o.listen(d),[o,d]),A.useEffect(()=>xP(r),[r]),A.createElement(PP,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const hU=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",fU=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pU=A.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:h}=e,p=rU(e,aU),{basename:f}=A.useContext(Wi),_,y=!1;if(typeof c=="string"&&fU.test(c)&&(_=c,hU))try{let I=new URL(window.location.href),D=c.startsWith("//")?new URL(I.protocol+c):new URL(c),O=F_(D.pathname,f);D.origin===I.origin&&O!=null?c=O+D.search+D.hash:y=!0}catch{}let E=$4(c,{relative:s}),w=mU(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:s,viewTransition:h});function v(I){r&&r(I),I.defaultPrevented||w(I)}return A.createElement("a",My({},p,{href:_||E,onClick:y||i?r:v,ref:n,target:l}))});var $T;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})($T||($T={}));var zT;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(zT||(zT={}));function mU(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=Ju(),c=Zr(),d=IP(t,{relative:o});return A.useCallback(h=>{if(iU(h,n)){h.preventDefault();let p=r!==void 0?r:Tu(c)===Tu(d);l(t,{replace:p,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,d,r,s,n,t,i,o,a])}function S8(t){let e=A.useRef(Fy(t)),n=A.useRef(!1),r=Zr(),s=A.useMemo(()=>oU(r.search,n.current?null:e.current),[r.search]),i=Ju(),o=A.useCallback((a,l)=>{const c=Fy(typeof a=="function"?a(s):a);n.current=!0,i("?"+c,l)},[i,s]);return[s,o]}const RP=A.createContext(void 0),gU=({children:t})=>{const[e,n]=A.useState("medium"),[r,s]=A.useState(!1),[i,o]=A.useState(!1);A.useEffect(()=>{const l=()=>{const c=window.innerWidth<=768;s(c)};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]),A.useEffect(()=>{try{const l=!!window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron")||typeof window<"u"&&window.location&&window.location.protocol==="file:";o(l)}catch{o(!1)}},[]),A.useEffect(()=>{const l=["appFontSize","desktopFontSize","mobileFontSize"];for(const c of l){const d=localStorage.getItem(c);if(d&&["small","medium","large"].includes(d)){n(d);break}}},[]),A.useEffect(()=>{const l=document.documentElement;l.classList.remove("font-size-small","font-size-medium","font-size-large"),l.classList.add(`font-size-${e}`)},[e]);const a=l=>{n(l),localStorage.setItem("appFontSize",l),i&&localStorage.setItem("desktopFontSize",l)};return x.jsx(RP.Provider,{value:{fontSize:e,setFontSize:a,isMobile:r,isDesktopApp:i},children:t})},b8=()=>{const t=A.useContext(RP);if(t===void 0)throw new Error("useFontSize must be used within a FontSizeProvider");return t},yU=wx("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),CP=A.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?bO:"button";return x.jsx(o,{className:Rs(yU({variant:e,size:n,className:t})),ref:i,...s})});CP.displayName="Button";const Uy=A.forwardRef(({className:t,type:e,...n},r)=>{const s={...n};return Object.prototype.hasOwnProperty.call(s,"value")&&s.value===void 0&&(s.value=""),x.jsx("input",{type:e,className:Rs("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...s})});Uy.displayName="Input";const vU=()=>{};var qT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kP=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},_U=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},DP={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=i>>2,h=(i&3)<<4|a>>4;let p=(a&15)<<2|c>>6,f=c&63;l||(f=64,o||(p=64)),r.push(n[d],n[h],n[p],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(kP(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):_U(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new wU;const p=i<<2|a>>4;if(r.push(p),c!==64){const f=a<<4&240|c>>2;if(r.push(f),h!==64){const _=c<<6&192|h;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class wU extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const EU=function(t){const e=kP(t);return DP.encodeByteArray(e,!0)},Sf=function(t){return EU(t).replace(/\./g,"")},NP=function(t){try{return DP.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TU=()=>OP().__FIREBASE_DEFAULTS__,IU=()=>{if(typeof process>"u"||typeof qT>"u")return;const t=qT.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},SU=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&NP(t[1]);return e&&JSON.parse(e)},kp=()=>{try{return vU()||TU()||IU()||SU()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},bU=t=>{var e,n;return(n=(e=kp())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},VP=t=>{const e=bU(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},LP=()=>{var t;return(t=kp())==null?void 0:t.config},AU=t=>{var e;return(e=kp())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xU{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cs(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function $_(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PU(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Sf(JSON.stringify(n)),Sf(JSON.stringify(o)),""].join(".")}const Bc={};function RU(){const t={prod:[],emulator:[]};for(const e of Object.keys(Bc))Bc[e]?t.emulator.push(e):t.prod.push(e);return t}function CU(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let HT=!1;function MP(t,e){if(typeof window>"u"||typeof document>"u"||!Cs(window.location.host)||Bc[t]===e||Bc[t]||HT)return;Bc[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",i=RU().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function l(p,f){p.setAttribute("width","24"),p.setAttribute("id",f),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function c(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{HT=!0,o()},p}function d(p,f){p.setAttribute("id",f),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function h(){const p=CU(r),f=n("text"),_=document.getElementById(f)||document.createElement("span"),y=n("learnmore"),E=document.getElementById(y)||document.createElement("a"),w=n("preprendIcon"),v=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const I=p.element;a(I),d(E,y);const D=c();l(v,w),I.append(v,_,E,D),document.body.appendChild(I)}i?(_.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",f)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kU(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wt())}function FP(){var e;const t=(e=kp())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function DU(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function NU(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function OU(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function VU(){const t=Wt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function UP(){return!FP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jP(){return!FP()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function BP(){try{return typeof indexedDB=="object"}catch{return!1}}function LU(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MU="FirebaseError";class Ar extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=MU,Object.setPrototypeOf(this,Ar.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zu.prototype.create)}}class Zu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?FU(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Ar(s,a,r)}}function FU(t,e){return t.replace(UU,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const UU=/\{\$([^}]+)}/g;function il(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(WT(i)&&WT(o)){if(!il(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function WT(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $P(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function bc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Ac(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function jU(t,e){const n=new BU(t,e);return n.subscribe.bind(n)}class BU{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");$U(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=og),s.error===void 0&&(s.error=og),s.complete===void 0&&(s.complete=og);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function $U(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function og(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(t){return t&&t._delegate?t._delegate:t}class Ss{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zU{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new xU;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(HU(e))try{this.getOrInitializeService({instanceIdentifier:lo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=lo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=lo){return this.instances.has(e)}getOptions(e=lo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:qU(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=lo){return this.component?this.component.multipleInstances?e:lo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function qU(t){return t===lo?void 0:t}function HU(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WU{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new zU(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Pe||(Pe={}));const KU={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},GU=Pe.INFO,QU={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},YU=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=QU[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class z_{constructor(e){this.name=e,this._logLevel=GU,this._logHandler=YU,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?KU[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...e),this._logHandler(this,Pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...e),this._logHandler(this,Pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...e),this._logHandler(this,Pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...e),this._logHandler(this,Pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...e),this._logHandler(this,Pe.ERROR,...e)}}const XU=(t,e)=>e.some(n=>t instanceof n);let KT,GT;function JU(){return KT||(KT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ZU(){return GT||(GT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const zP=new WeakMap,jy=new WeakMap,qP=new WeakMap,ag=new WeakMap,q_=new WeakMap;function e6(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Ei(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&zP.set(n,t)}).catch(()=>{}),q_.set(e,t),e}function t6(t){if(jy.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});jy.set(t,e)}let By={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return jy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||qP.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ei(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function n6(t){By=t(By)}function r6(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(lg(this),e,...n);return qP.set(r,e.sort?e.sort():[e]),Ei(r)}:ZU().includes(t)?function(...e){return t.apply(lg(this),e),Ei(zP.get(this))}:function(...e){return Ei(t.apply(lg(this),e))}}function s6(t){return typeof t=="function"?r6(t):(t instanceof IDBTransaction&&t6(t),XU(t,JU())?new Proxy(t,By):t)}function Ei(t){if(t instanceof IDBRequest)return e6(t);if(ag.has(t))return ag.get(t);const e=s6(t);return e!==t&&(ag.set(t,e),q_.set(e,t)),e}const lg=t=>q_.get(t);function i6(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Ei(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ei(o.result),l.oldVersion,l.newVersion,Ei(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const o6=["get","getKey","getAll","getAllKeys","count"],a6=["put","add","delete","clear"],cg=new Map;function QT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(cg.get(e))return cg.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=a6.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||o6.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return cg.set(e,i),i}n6(t=>({...t,get:(e,n,r)=>QT(e,n)||t.get(e,n,r),has:(e,n)=>!!QT(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l6{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(c6(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function c6(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const $y="@firebase/app",YT="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs=new z_("@firebase/app"),u6="@firebase/app-compat",d6="@firebase/analytics-compat",h6="@firebase/analytics",f6="@firebase/app-check-compat",p6="@firebase/app-check",m6="@firebase/auth",g6="@firebase/auth-compat",y6="@firebase/database",v6="@firebase/data-connect",_6="@firebase/database-compat",w6="@firebase/functions",E6="@firebase/functions-compat",T6="@firebase/installations",I6="@firebase/installations-compat",S6="@firebase/messaging",b6="@firebase/messaging-compat",A6="@firebase/performance",x6="@firebase/performance-compat",P6="@firebase/remote-config",R6="@firebase/remote-config-compat",C6="@firebase/storage",k6="@firebase/storage-compat",D6="@firebase/firestore",N6="@firebase/ai",O6="@firebase/firestore-compat",V6="firebase",L6="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zy="[DEFAULT]",M6={[$y]:"fire-core",[u6]:"fire-core-compat",[h6]:"fire-analytics",[d6]:"fire-analytics-compat",[p6]:"fire-app-check",[f6]:"fire-app-check-compat",[m6]:"fire-auth",[g6]:"fire-auth-compat",[y6]:"fire-rtdb",[v6]:"fire-data-connect",[_6]:"fire-rtdb-compat",[w6]:"fire-fn",[E6]:"fire-fn-compat",[T6]:"fire-iid",[I6]:"fire-iid-compat",[S6]:"fire-fcm",[b6]:"fire-fcm-compat",[A6]:"fire-perf",[x6]:"fire-perf-compat",[P6]:"fire-rc",[R6]:"fire-rc-compat",[C6]:"fire-gcs",[k6]:"fire-gcs-compat",[D6]:"fire-fst",[O6]:"fire-fst-compat",[N6]:"fire-vertex","fire-js":"fire-js",[V6]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bf=new Map,F6=new Map,qy=new Map;function XT(t,e){try{t.container.addComponent(e)}catch(n){bs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Di(t){const e=t.name;if(qy.has(e))return bs.debug(`There were multiple attempts to register component ${e}.`),!1;qy.set(e,t);for(const n of bf.values())XT(n,t);for(const n of F6.values())XT(n,t);return!0}function Dp(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Vn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ti=new Zu("app","Firebase",U6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j6{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ss("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ti.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ed=L6;function HP(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:zy,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Ti.create("bad-app-name",{appName:String(s)});if(n||(n=LP()),!n)throw Ti.create("no-options");const i=bf.get(s);if(i){if(il(n,i.options)&&il(r,i.config))return i;throw Ti.create("duplicate-app",{appName:s})}const o=new WU(s);for(const l of qy.values())o.addComponent(l);const a=new j6(n,r,o);return bf.set(s,a),a}function WP(t=zy){const e=bf.get(t);if(!e&&t===zy&&LP())return HP();if(!e)throw Ti.create("no-app",{appName:t});return e}function nr(t,e,n){let r=M6[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),bs.warn(o.join(" "));return}Di(new Ss(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B6="firebase-heartbeat-database",$6=1,Su="firebase-heartbeat-store";let ug=null;function KP(){return ug||(ug=i6(B6,$6,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Su)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ti.create("idb-open",{originalErrorMessage:t.message})})),ug}async function z6(t){try{const n=(await KP()).transaction(Su),r=await n.objectStore(Su).get(GP(t));return await n.done,r}catch(e){if(e instanceof Ar)bs.warn(e.message);else{const n=Ti.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});bs.warn(n.message)}}}async function JT(t,e){try{const r=(await KP()).transaction(Su,"readwrite");await r.objectStore(Su).put(e,GP(t)),await r.done}catch(n){if(n instanceof Ar)bs.warn(n.message);else{const r=Ti.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});bs.warn(r.message)}}}function GP(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q6=1024,H6=30;class W6{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new G6(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=ZT();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>H6){const o=Q6(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){bs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ZT(),{heartbeatsToSend:r,unsentEntries:s}=K6(this._heartbeatsCache.heartbeats),i=Sf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return bs.warn(n),""}}}function ZT(){return new Date().toISOString().substring(0,10)}function K6(t,e=q6){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),eI(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),eI(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class G6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return BP()?LU().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await z6(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return JT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return JT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function eI(t){return Sf(JSON.stringify({version:2,heartbeats:t})).length}function Q6(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y6(t){Di(new Ss("platform-logger",e=>new l6(e),"PRIVATE")),Di(new Ss("heartbeat",e=>new W6(e),"PRIVATE")),nr($y,YT,t),nr($y,YT,"esm2020"),nr("fire-js","")}Y6("");function QP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const X6=QP,YP=new Zu("auth","Firebase",QP());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Af=new z_("@firebase/auth");function J6(t,...e){Af.logLevel<=Pe.WARN&&Af.warn(`Auth (${ed}): ${t}`,...e)}function Ch(t,...e){Af.logLevel<=Pe.ERROR&&Af.error(`Auth (${ed}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $o(t,...e){throw W_(t,...e)}function H_(t,...e){return W_(t,...e)}function XP(t,e,n){const r={...X6(),[e]:n};return new Zu("auth","Firebase",r).create(e,{appName:t.name})}function Ii(t){return XP(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function W_(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return YP.create(t,...e)}function Ce(t,e,...n){if(!t)throw W_(e,...n)}function us(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ch(e),new Error(e)}function xf(t,e){t||us(e)}function Z6(){return tI()==="http:"||tI()==="https:"}function tI(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Z6()||NU()||"connection"in navigator)?navigator.onLine:!0}function t3(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e,n){this.shortDelay=e,this.longDelay=n,xf(n>e,"Short delay should be less than long delay!"),this.isMobile=kU()||OU()}get(){return e3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n3(t,e){xf(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;us("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;us("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;us("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s3=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],i3=new td(3e4,6e4);function Gi(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function ks(t,e,n,r,s={}){return ZP(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=$P({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:l,...i};return DU()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&Cs(t.emulatorConfig.host)&&(c.credentials="include"),JP.fetch()(await eR(t,t.config.apiHost,n,a),c)})}async function ZP(t,e,n){t._canInitEmulator=!1;const r={...r3,...e};try{const s=new a3(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Zd(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Zd(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Zd(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Zd(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw XP(t,d,c);$o(t,d)}}catch(s){if(s instanceof Ar)throw s;$o(t,"network-request-failed",{message:String(s)})}}async function Np(t,e,n,r,s={}){const i=await ks(t,e,n,r,s);return"mfaPendingCredential"in i&&$o(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function eR(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?n3(t.config,s):`${t.config.apiScheme}://${s}`;return s3.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function o3(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class a3{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(H_(this.auth,"network-request-failed")),i3.get())})}}function Zd(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=H_(t,e,r);return s.customData._tokenResponse=n,s}function nI(t){return t!==void 0&&t.enterprise!==void 0}class l3{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return o3(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function c3(t,e){return ks(t,"GET","/v2/recaptchaConfig",Gi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u3(t,e){return ks(t,"POST","/v1/accounts:delete",e)}async function Pf(t,e){return ks(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $c(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function d3(t,e=!1){const n=He(t),r=await n.getIdToken(e),s=K_(r);Ce(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:$c(dg(s.auth_time)),issuedAtTime:$c(dg(s.iat)),expirationTime:$c(dg(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function dg(t){return Number(t)*1e3}function K_(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ch("JWT malformed, contained fewer than 3 sections"),null;try{const s=NP(n);return s?JSON.parse(s):(Ch("Failed to decode base64 JWT payload"),null)}catch(s){return Ch("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function rI(t){const e=K_(t);return Ce(e,"internal-error"),Ce(typeof e.exp<"u","internal-error"),Ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bu(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ar&&h3(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function h3({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=$c(this.lastLoginAt),this.creationTime=$c(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rf(t){var h;const e=t.auth,n=await t.getIdToken(),r=await bu(t,Pf(e,{idToken:n}));Ce(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(h=s.providerUserInfo)!=null&&h.length?tR(s.providerUserInfo):[],o=m3(t.providerData,i),a=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),c=a?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Hy(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,d)}async function p3(t){const e=He(t);await Rf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function m3(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function tR(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g3(t,e){const n=await ZP(t,{},async()=>{const r=$P({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await eR(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&Cs(t.emulatorConfig.host)&&(l.credentials="include"),JP.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function y3(t,e){return ks(t,"POST","/v2/accounts:revokeToken",Gi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ce(e.idToken,"internal-error"),Ce(typeof e.idToken<"u","internal-error"),Ce(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):rI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ce(e.length!==0,"internal-error");const n=rI(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await g3(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Ua;return r&&(Ce(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Ce(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Ce(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ua,this.toJSON())}_performRefresh(){return us("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ws(t,e){Ce(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class yr{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new f3(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Hy(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await bu(this,this.stsTokenManager.getToken(this.auth,e));return Ce(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return d3(this,e)}reload(){return p3(this)}_assign(e){this!==e&&(Ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new yr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Rf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Vn(this.auth.app))return Promise.reject(Ii(this.auth));const e=await this.getIdToken();return await bu(this,u3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,c=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:h,emailVerified:p,isAnonymous:f,providerData:_,stsTokenManager:y}=n;Ce(h&&y,e,"internal-error");const E=Ua.fromJSON(this.name,y);Ce(typeof h=="string",e,"internal-error"),Ws(r,e.name),Ws(s,e.name),Ce(typeof p=="boolean",e,"internal-error"),Ce(typeof f=="boolean",e,"internal-error"),Ws(i,e.name),Ws(o,e.name),Ws(a,e.name),Ws(l,e.name),Ws(c,e.name),Ws(d,e.name);const w=new yr({uid:h,auth:e,email:s,emailVerified:p,displayName:r,isAnonymous:f,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:E,createdAt:c,lastLoginAt:d});return _&&Array.isArray(_)&&(w.providerData=_.map(v=>({...v}))),l&&(w._redirectEventId=l),w}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ua;s.updateFromServerResponse(n);const i=new yr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Rf(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Ce(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?tR(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new Ua;a.updateFromIdToken(r);const l=new yr({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Hy(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI=new Map;function Eo(t){xf(t instanceof Function,"Expected a class definition");let e=sI.get(t);return e?(xf(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,sI.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}nR.type="NONE";const Wy=nR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hg(t,e,n){return`firebase:${t}:${e}:${n}`}class ja{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=hg(this.userKey,s.apiKey,i),this.fullPersistenceKey=hg("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Pf(this.auth,{idToken:e}).catch(()=>{});return n?yr._fromGetAccountInfoResponse(this.auth,n,e):null}return yr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ja(Eo(Wy),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Eo(Wy);const o=hg(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){let h;if(typeof d=="string"){const p=await Pf(e,{idToken:d}).catch(()=>{});if(!p)break;h=await yr._fromGetAccountInfoResponse(e,p,d)}else h=yr._fromJSON(e,d);c!==i&&(a=h),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new ja(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new ja(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iI(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(rR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(v3(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(iR(e))return"Blackberry";if(oR(e))return"Webos";if(_3(e))return"Safari";if((e.includes("chrome/")||w3(e))&&!e.includes("edge/"))return"Chrome";if(sR(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function v3(t=Wt()){return/firefox\//i.test(t)}function _3(t=Wt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function w3(t=Wt()){return/crios\//i.test(t)}function rR(t=Wt()){return/iemobile/i.test(t)}function sR(t=Wt()){return/android/i.test(t)}function iR(t=Wt()){return/blackberry/i.test(t)}function oR(t=Wt()){return/webos/i.test(t)}function E3(t=Wt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function T3(){return VU()&&document.documentMode===10}function I3(t=Wt()){return E3(t)||sR(t)||oR(t)||iR(t)||/windows phone/i.test(t)||rR(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aR(t,e=[]){let n;switch(t){case"Browser":n=iI(Wt());break;case"Worker":n=`${iI(Wt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ed}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S3{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b3(t,e={}){return ks(t,"GET","/v2/passwordPolicy",Gi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A3=6;class x3{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??A3,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new oI(this),this.idTokenSubscription=new oI(this),this.beforeStateQueue=new S3(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=YP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Eo(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await ja.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Pf(this,{idToken:e}),r=await yr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Vn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Rf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=t3()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Vn(this.app))return Promise.reject(Ii(this));const n=e?He(e):null;return n&&Ce(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Vn(this.app)?Promise.reject(Ii(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Vn(this.app)?Promise.reject(Ii(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Eo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await b3(this),n=new x3(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Zu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await y3(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Eo(e)||this._popupRedirectResolver;Ce(n,this,"argument-error"),this.redirectPersistenceManager=await ja.create(this,[Eo(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ce(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=aR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Vn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&J6(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Nl(t){return He(t)}class oI{constructor(e){this.auth=e,this.observer=null,this.addObserver=jU(n=>this.observer=n)}get next(){return Ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let G_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function R3(t){G_=t}function C3(t){return G_.loadJS(t)}function k3(){return G_.recaptchaEnterpriseScript}class D3{constructor(){this.enterprise=new N3}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class N3{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const O3="recaptcha-enterprise",lR="NO_RECAPTCHA";class V3{constructor(e){this.type=O3,this.auth=Nl(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{c3(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new l3(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;nI(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(lR)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new D3().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&nI(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=k3();l.length!==0&&(l+=a),C3(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function aI(t,e,n,r=!1,s=!1){const i=new V3(t);let o;if(s)o=lR;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Cf(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await aI(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await aI(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L3(t,e){const n=Dp(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(il(i,e??{}))return s;$o(s,"already-initialized")}return n.initialize({options:e})}function M3(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Eo);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return us("not implemented")}_getIdTokenResponse(e){return us("not implemented")}_linkToIdToken(e,n){return us("not implemented")}_getReauthenticationResolver(e){return us("not implemented")}}async function U3(t,e){return ks(t,"POST","/v1/accounts:update",e)}async function j3(t,e){return ks(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B3(t,e){return Np(t,"POST","/v1/accounts:signInWithPassword",Gi(t,e))}async function $3(t,e){return ks(t,"POST","/v1/accounts:sendOobCode",Gi(t,e))}async function z3(t,e){return $3(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q3(t,e){return Np(t,"POST","/v1/accounts:signInWithEmailLink",Gi(t,e))}async function H3(t,e){return Np(t,"POST","/v1/accounts:signInWithEmailLink",Gi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au extends F3{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Au(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Au(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Cf(e,n,"signInWithPassword",B3);case"emailLink":return q3(e,{email:this._email,oobCode:this._password});default:$o(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Cf(e,r,"signUpPassword",j3);case"emailLink":return H3(e,{idToken:n,email:this._email,oobCode:this._password});default:$o(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W3(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function K3(t){const e=bc(Ac(t)).link,n=e?bc(Ac(e)).deep_link_id:null,r=bc(Ac(t)).deep_link_id;return(r?bc(Ac(r)).link:null)||r||n||e||t}class Q_{constructor(e){const n=bc(Ac(e)),r=n.apiKey??null,s=n.oobCode??null,i=W3(n.mode??null);Ce(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=K3(e);try{return new Q_(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(){this.providerId=Ol.PROVIDER_ID}static credential(e,n){return Au._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Q_.parseLink(n);return Ce(r,"argument-error"),Au._fromEmailAndCode(e,r.code,r.tenantId)}}Ol.PROVIDER_ID="password";Ol.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ol.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G3(t,e){return Np(t,"POST","/v1/accounts:signUp",Gi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await yr._fromIdTokenResponse(e,r,s),o=lI(r);return new ol({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=lI(r);return new ol({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function lI(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf extends Ar{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,kf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new kf(e,n,r,s)}}function cR(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?kf._fromErrorAndOperation(t,i,e,r):i})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q3(t,e,n=!1){const{auth:r}=t;if(Vn(r.app))return Promise.reject(Ii(r));const s="reauthenticate";try{const i=await bu(t,cR(r,s,e,t),n);Ce(i.idToken,r,"internal-error");const o=K_(i.idToken);Ce(o,r,"internal-error");const{sub:a}=o;return Ce(t.uid===a,r,"user-mismatch"),ol._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&$o(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y3(t,e,n=!1){if(Vn(t.app))return Promise.reject(Ii(t));const r="signIn",s=await cR(t,r,e),i=await ol._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function X3(t,e){return Y3(Nl(t),e)}async function A8(t,e){return Q3(He(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uR(t){const e=Nl(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function J3(t,e,n){const r=Nl(t);await Cf(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",z3)}async function cI(t,e,n){if(Vn(t.app))return Promise.reject(Ii(t));const r=Nl(t),o=await Cf(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",G3).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&uR(t),l}),a=await ol._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function Z3(t,e,n){return Vn(t.app)?Promise.reject(Ii(t)):X3(He(t),Ol.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&uR(t),r})}function x8(t,e){return ej(He(t),null,e)}async function ej(t,e,n){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(i.password=n);const o=await bu(t,U3(r,i));await t._updateTokensIfNecessary(o,!0)}function tj(t,e,n,r){return He(t).onAuthStateChanged(e,n,r)}function uI(t){return He(t).signOut()}const dI="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(dI,"1"),this.storage.removeItem(dI),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nj=1e3,rj=10;class hR extends dR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=I3(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);T3()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,rj):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},nj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}hR.type="LOCAL";const sj=hR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij extends dR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}ij.type="SESSION";new td(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new td(2e3,1e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new td(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new td(5e3,15e3);var hI="@firebase/auth",fI="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aj(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function lj(t){Di(new Ss("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Ce(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:aR(t)},c=new P3(r,s,i,l);return M3(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Di(new Ss("auth-internal",e=>{const n=Nl(e.getProvider("auth").getImmediate());return(r=>new oj(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),nr(hI,fI,aj(t)),nr(hI,fI,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cj=5*60;AU("authIdTokenMaxAge");function uj(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}R3({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=H_("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",uj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});lj("Browser");var dj="firebase",hj="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nr(dj,hj,"app");var pI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Si,fR;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,T){function b(){}b.prototype=T.prototype,S.F=T.prototype,S.prototype=new b,S.prototype.constructor=S,S.D=function(k,P,N){for(var C=Array(arguments.length-2),q=2;q<arguments.length;q++)C[q-2]=arguments[q];return T.prototype[P].apply(k,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,T,b){b||(b=0);const k=Array(16);if(typeof T=="string")for(var P=0;P<16;++P)k[P]=T.charCodeAt(b++)|T.charCodeAt(b++)<<8|T.charCodeAt(b++)<<16|T.charCodeAt(b++)<<24;else for(P=0;P<16;++P)k[P]=T[b++]|T[b++]<<8|T[b++]<<16|T[b++]<<24;T=S.g[0],b=S.g[1],P=S.g[2];let N=S.g[3],C;C=T+(N^b&(P^N))+k[0]+3614090360&4294967295,T=b+(C<<7&4294967295|C>>>25),C=N+(P^T&(b^P))+k[1]+3905402710&4294967295,N=T+(C<<12&4294967295|C>>>20),C=P+(b^N&(T^b))+k[2]+606105819&4294967295,P=N+(C<<17&4294967295|C>>>15),C=b+(T^P&(N^T))+k[3]+3250441966&4294967295,b=P+(C<<22&4294967295|C>>>10),C=T+(N^b&(P^N))+k[4]+4118548399&4294967295,T=b+(C<<7&4294967295|C>>>25),C=N+(P^T&(b^P))+k[5]+1200080426&4294967295,N=T+(C<<12&4294967295|C>>>20),C=P+(b^N&(T^b))+k[6]+2821735955&4294967295,P=N+(C<<17&4294967295|C>>>15),C=b+(T^P&(N^T))+k[7]+4249261313&4294967295,b=P+(C<<22&4294967295|C>>>10),C=T+(N^b&(P^N))+k[8]+1770035416&4294967295,T=b+(C<<7&4294967295|C>>>25),C=N+(P^T&(b^P))+k[9]+2336552879&4294967295,N=T+(C<<12&4294967295|C>>>20),C=P+(b^N&(T^b))+k[10]+4294925233&4294967295,P=N+(C<<17&4294967295|C>>>15),C=b+(T^P&(N^T))+k[11]+2304563134&4294967295,b=P+(C<<22&4294967295|C>>>10),C=T+(N^b&(P^N))+k[12]+1804603682&4294967295,T=b+(C<<7&4294967295|C>>>25),C=N+(P^T&(b^P))+k[13]+4254626195&4294967295,N=T+(C<<12&4294967295|C>>>20),C=P+(b^N&(T^b))+k[14]+2792965006&4294967295,P=N+(C<<17&4294967295|C>>>15),C=b+(T^P&(N^T))+k[15]+1236535329&4294967295,b=P+(C<<22&4294967295|C>>>10),C=T+(P^N&(b^P))+k[1]+4129170786&4294967295,T=b+(C<<5&4294967295|C>>>27),C=N+(b^P&(T^b))+k[6]+3225465664&4294967295,N=T+(C<<9&4294967295|C>>>23),C=P+(T^b&(N^T))+k[11]+643717713&4294967295,P=N+(C<<14&4294967295|C>>>18),C=b+(N^T&(P^N))+k[0]+3921069994&4294967295,b=P+(C<<20&4294967295|C>>>12),C=T+(P^N&(b^P))+k[5]+3593408605&4294967295,T=b+(C<<5&4294967295|C>>>27),C=N+(b^P&(T^b))+k[10]+38016083&4294967295,N=T+(C<<9&4294967295|C>>>23),C=P+(T^b&(N^T))+k[15]+3634488961&4294967295,P=N+(C<<14&4294967295|C>>>18),C=b+(N^T&(P^N))+k[4]+3889429448&4294967295,b=P+(C<<20&4294967295|C>>>12),C=T+(P^N&(b^P))+k[9]+568446438&4294967295,T=b+(C<<5&4294967295|C>>>27),C=N+(b^P&(T^b))+k[14]+3275163606&4294967295,N=T+(C<<9&4294967295|C>>>23),C=P+(T^b&(N^T))+k[3]+4107603335&4294967295,P=N+(C<<14&4294967295|C>>>18),C=b+(N^T&(P^N))+k[8]+1163531501&4294967295,b=P+(C<<20&4294967295|C>>>12),C=T+(P^N&(b^P))+k[13]+2850285829&4294967295,T=b+(C<<5&4294967295|C>>>27),C=N+(b^P&(T^b))+k[2]+4243563512&4294967295,N=T+(C<<9&4294967295|C>>>23),C=P+(T^b&(N^T))+k[7]+1735328473&4294967295,P=N+(C<<14&4294967295|C>>>18),C=b+(N^T&(P^N))+k[12]+2368359562&4294967295,b=P+(C<<20&4294967295|C>>>12),C=T+(b^P^N)+k[5]+4294588738&4294967295,T=b+(C<<4&4294967295|C>>>28),C=N+(T^b^P)+k[8]+2272392833&4294967295,N=T+(C<<11&4294967295|C>>>21),C=P+(N^T^b)+k[11]+1839030562&4294967295,P=N+(C<<16&4294967295|C>>>16),C=b+(P^N^T)+k[14]+4259657740&4294967295,b=P+(C<<23&4294967295|C>>>9),C=T+(b^P^N)+k[1]+2763975236&4294967295,T=b+(C<<4&4294967295|C>>>28),C=N+(T^b^P)+k[4]+1272893353&4294967295,N=T+(C<<11&4294967295|C>>>21),C=P+(N^T^b)+k[7]+4139469664&4294967295,P=N+(C<<16&4294967295|C>>>16),C=b+(P^N^T)+k[10]+3200236656&4294967295,b=P+(C<<23&4294967295|C>>>9),C=T+(b^P^N)+k[13]+681279174&4294967295,T=b+(C<<4&4294967295|C>>>28),C=N+(T^b^P)+k[0]+3936430074&4294967295,N=T+(C<<11&4294967295|C>>>21),C=P+(N^T^b)+k[3]+3572445317&4294967295,P=N+(C<<16&4294967295|C>>>16),C=b+(P^N^T)+k[6]+76029189&4294967295,b=P+(C<<23&4294967295|C>>>9),C=T+(b^P^N)+k[9]+3654602809&4294967295,T=b+(C<<4&4294967295|C>>>28),C=N+(T^b^P)+k[12]+3873151461&4294967295,N=T+(C<<11&4294967295|C>>>21),C=P+(N^T^b)+k[15]+530742520&4294967295,P=N+(C<<16&4294967295|C>>>16),C=b+(P^N^T)+k[2]+3299628645&4294967295,b=P+(C<<23&4294967295|C>>>9),C=T+(P^(b|~N))+k[0]+4096336452&4294967295,T=b+(C<<6&4294967295|C>>>26),C=N+(b^(T|~P))+k[7]+1126891415&4294967295,N=T+(C<<10&4294967295|C>>>22),C=P+(T^(N|~b))+k[14]+2878612391&4294967295,P=N+(C<<15&4294967295|C>>>17),C=b+(N^(P|~T))+k[5]+4237533241&4294967295,b=P+(C<<21&4294967295|C>>>11),C=T+(P^(b|~N))+k[12]+1700485571&4294967295,T=b+(C<<6&4294967295|C>>>26),C=N+(b^(T|~P))+k[3]+2399980690&4294967295,N=T+(C<<10&4294967295|C>>>22),C=P+(T^(N|~b))+k[10]+4293915773&4294967295,P=N+(C<<15&4294967295|C>>>17),C=b+(N^(P|~T))+k[1]+2240044497&4294967295,b=P+(C<<21&4294967295|C>>>11),C=T+(P^(b|~N))+k[8]+1873313359&4294967295,T=b+(C<<6&4294967295|C>>>26),C=N+(b^(T|~P))+k[15]+4264355552&4294967295,N=T+(C<<10&4294967295|C>>>22),C=P+(T^(N|~b))+k[6]+2734768916&4294967295,P=N+(C<<15&4294967295|C>>>17),C=b+(N^(P|~T))+k[13]+1309151649&4294967295,b=P+(C<<21&4294967295|C>>>11),C=T+(P^(b|~N))+k[4]+4149444226&4294967295,T=b+(C<<6&4294967295|C>>>26),C=N+(b^(T|~P))+k[11]+3174756917&4294967295,N=T+(C<<10&4294967295|C>>>22),C=P+(T^(N|~b))+k[2]+718787259&4294967295,P=N+(C<<15&4294967295|C>>>17),C=b+(N^(P|~T))+k[9]+3951481745&4294967295,S.g[0]=S.g[0]+T&4294967295,S.g[1]=S.g[1]+(P+(C<<21&4294967295|C>>>11))&4294967295,S.g[2]=S.g[2]+P&4294967295,S.g[3]=S.g[3]+N&4294967295}r.prototype.v=function(S,T){T===void 0&&(T=S.length);const b=T-this.blockSize,k=this.C;let P=this.h,N=0;for(;N<T;){if(P==0)for(;N<=b;)s(this,S,N),N+=this.blockSize;if(typeof S=="string"){for(;N<T;)if(k[P++]=S.charCodeAt(N++),P==this.blockSize){s(this,k),P=0;break}}else for(;N<T;)if(k[P++]=S[N++],P==this.blockSize){s(this,k),P=0;break}}this.h=P,this.o+=T},r.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var T=1;T<S.length-8;++T)S[T]=0;T=this.o*8;for(var b=S.length-8;b<S.length;++b)S[b]=T&255,T/=256;for(this.v(S),S=Array(16),T=0,b=0;b<4;++b)for(let k=0;k<32;k+=8)S[T++]=this.g[b]>>>k&255;return S};function i(S,T){var b=a;return Object.prototype.hasOwnProperty.call(b,S)?b[S]:b[S]=T(S)}function o(S,T){this.h=T;const b=[];let k=!0;for(let P=S.length-1;P>=0;P--){const N=S[P]|0;k&&N==T||(b[P]=N,k=!1)}this.g=b}var a={};function l(S){return-128<=S&&S<128?i(S,function(T){return new o([T|0],T<0?-1:0)}):new o([S|0],S<0?-1:0)}function c(S){if(isNaN(S)||!isFinite(S))return h;if(S<0)return E(c(-S));const T=[];let b=1;for(let k=0;S>=b;k++)T[k]=S/b|0,b*=4294967296;return new o(T,0)}function d(S,T){if(S.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(S.charAt(0)=="-")return E(d(S.substring(1),T));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const b=c(Math.pow(T,8));let k=h;for(let N=0;N<S.length;N+=8){var P=Math.min(8,S.length-N);const C=parseInt(S.substring(N,N+P),T);P<8?(P=c(Math.pow(T,P)),k=k.j(P).add(c(C))):(k=k.j(b),k=k.add(c(C)))}return k}var h=l(0),p=l(1),f=l(16777216);t=o.prototype,t.m=function(){if(y(this))return-E(this).m();let S=0,T=1;for(let b=0;b<this.g.length;b++){const k=this.i(b);S+=(k>=0?k:4294967296+k)*T,T*=4294967296}return S},t.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(_(this))return"0";if(y(this))return"-"+E(this).toString(S);const T=c(Math.pow(S,6));var b=this;let k="";for(;;){const P=D(b,T).g;b=w(b,P.j(T));let N=((b.g.length>0?b.g[0]:b.h)>>>0).toString(S);if(b=P,_(b))return N+k;for(;N.length<6;)N="0"+N;k=N+k}},t.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function _(S){if(S.h!=0)return!1;for(let T=0;T<S.g.length;T++)if(S.g[T]!=0)return!1;return!0}function y(S){return S.h==-1}t.l=function(S){return S=w(this,S),y(S)?-1:_(S)?0:1};function E(S){const T=S.g.length,b=[];for(let k=0;k<T;k++)b[k]=~S.g[k];return new o(b,~S.h).add(p)}t.abs=function(){return y(this)?E(this):this},t.add=function(S){const T=Math.max(this.g.length,S.g.length),b=[];let k=0;for(let P=0;P<=T;P++){let N=k+(this.i(P)&65535)+(S.i(P)&65535),C=(N>>>16)+(this.i(P)>>>16)+(S.i(P)>>>16);k=C>>>16,N&=65535,C&=65535,b[P]=C<<16|N}return new o(b,b[b.length-1]&-2147483648?-1:0)};function w(S,T){return S.add(E(T))}t.j=function(S){if(_(this)||_(S))return h;if(y(this))return y(S)?E(this).j(E(S)):E(E(this).j(S));if(y(S))return E(this.j(E(S)));if(this.l(f)<0&&S.l(f)<0)return c(this.m()*S.m());const T=this.g.length+S.g.length,b=[];for(var k=0;k<2*T;k++)b[k]=0;for(k=0;k<this.g.length;k++)for(let P=0;P<S.g.length;P++){const N=this.i(k)>>>16,C=this.i(k)&65535,q=S.i(P)>>>16,Z=S.i(P)&65535;b[2*k+2*P]+=C*Z,v(b,2*k+2*P),b[2*k+2*P+1]+=N*Z,v(b,2*k+2*P+1),b[2*k+2*P+1]+=C*q,v(b,2*k+2*P+1),b[2*k+2*P+2]+=N*q,v(b,2*k+2*P+2)}for(S=0;S<T;S++)b[S]=b[2*S+1]<<16|b[2*S];for(S=T;S<2*T;S++)b[S]=0;return new o(b,0)};function v(S,T){for(;(S[T]&65535)!=S[T];)S[T+1]+=S[T]>>>16,S[T]&=65535,T++}function I(S,T){this.g=S,this.h=T}function D(S,T){if(_(T))throw Error("division by zero");if(_(S))return new I(h,h);if(y(S))return T=D(E(S),T),new I(E(T.g),E(T.h));if(y(T))return T=D(S,E(T)),new I(E(T.g),T.h);if(S.g.length>30){if(y(S)||y(T))throw Error("slowDivide_ only works with positive integers.");for(var b=p,k=T;k.l(S)<=0;)b=O(b),k=O(k);var P=V(b,1),N=V(k,1);for(k=V(k,2),b=V(b,2);!_(k);){var C=N.add(k);C.l(S)<=0&&(P=P.add(b),N=C),k=V(k,1),b=V(b,1)}return T=w(S,P.j(T)),new I(P,T)}for(P=h;S.l(T)>=0;){for(b=Math.max(1,Math.floor(S.m()/T.m())),k=Math.ceil(Math.log(b)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),N=c(b),C=N.j(T);y(C)||C.l(S)>0;)b-=k,N=c(b),C=N.j(T);_(N)&&(N=p),P=P.add(N),S=w(S,C)}return new I(P,S)}t.B=function(S){return D(this,S).h},t.and=function(S){const T=Math.max(this.g.length,S.g.length),b=[];for(let k=0;k<T;k++)b[k]=this.i(k)&S.i(k);return new o(b,this.h&S.h)},t.or=function(S){const T=Math.max(this.g.length,S.g.length),b=[];for(let k=0;k<T;k++)b[k]=this.i(k)|S.i(k);return new o(b,this.h|S.h)},t.xor=function(S){const T=Math.max(this.g.length,S.g.length),b=[];for(let k=0;k<T;k++)b[k]=this.i(k)^S.i(k);return new o(b,this.h^S.h)};function O(S){const T=S.g.length+1,b=[];for(let k=0;k<T;k++)b[k]=S.i(k)<<1|S.i(k-1)>>>31;return new o(b,S.h)}function V(S,T){const b=T>>5;T%=32;const k=S.g.length-b,P=[];for(let N=0;N<k;N++)P[N]=T>0?S.i(N+b)>>>T|S.i(N+b+1)<<32-T:S.i(N+b);return new o(P,S.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,fR=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,Si=o}).apply(typeof pI<"u"?pI:typeof self<"u"?self:typeof window<"u"?window:{});var eh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var pR,xc,mR,kh,Ky,gR,yR,vR;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof eh=="object"&&eh];for(var m=0;m<u.length;++m){var g=u[m];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function s(u,m){if(m)e:{var g=r;u=u.split(".");for(var R=0;R<u.length-1;R++){var M=u[R];if(!(M in g))break e;g=g[M]}u=u[u.length-1],R=g[u],m=m(R),m!=R&&m!=null&&e(g,u,{configurable:!0,writable:!0,value:m})}}s("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(u){return u||function(m){var g=[],R;for(R in m)Object.prototype.hasOwnProperty.call(m,R)&&g.push([R,m[R]]);return g}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function l(u,m,g){return u.call.apply(u.bind,arguments)}function c(u,m,g){return c=l,c.apply(null,arguments)}function d(u,m){var g=Array.prototype.slice.call(arguments,1);return function(){var R=g.slice();return R.push.apply(R,arguments),u.apply(this,R)}}function h(u,m){function g(){}g.prototype=m.prototype,u.Z=m.prototype,u.prototype=new g,u.prototype.constructor=u,u.Ob=function(R,M,j){for(var X=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)X[Ee-2]=arguments[Ee];return m.prototype[M].apply(R,X)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function f(u){const m=u.length;if(m>0){const g=Array(m);for(let R=0;R<m;R++)g[R]=u[R];return g}return[]}function _(u,m){for(let R=1;R<arguments.length;R++){const M=arguments[R];var g=typeof M;if(g=g!="object"?g:M?Array.isArray(M)?"array":g:"null",g=="array"||g=="object"&&typeof M.length=="number"){g=u.length||0;const j=M.length||0;u.length=g+j;for(let X=0;X<j;X++)u[g+X]=M[X]}else u.push(M)}}class y{constructor(m,g){this.i=m,this.j=g,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function E(u){o.setTimeout(()=>{throw u},0)}function w(){var u=S;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class v{constructor(){this.h=this.g=null}add(m,g){const R=I.get();R.set(m,g),this.h?this.h.next=R:this.g=R,this.h=R}}var I=new y(()=>new D,u=>u.reset());class D{constructor(){this.next=this.g=this.h=null}set(m,g){this.h=m,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let O,V=!1,S=new v,T=()=>{const u=Promise.resolve(void 0);O=()=>{u.then(b)}};function b(){for(var u;u=w();){try{u.h.call(u.g)}catch(g){E(g)}var m=I;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}V=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var N=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const g=()=>{};o.addEventListener("test",g,m),o.removeEventListener("test",g,m)}catch{}return u}();function C(u){return/^[\s\xa0]*$/.test(u)}function q(u,m){P.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}h(q,P),q.prototype.init=function(u,m){const g=this.type=u.type,R=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(g=="mouseover"?m=u.fromElement:g=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&q.Z.h.call(this)},q.prototype.h=function(){q.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Z="closure_listenable_"+(Math.random()*1e6|0),ie=0;function G(u,m,g,R,M){this.listener=u,this.proxy=null,this.src=m,this.type=g,this.capture=!!R,this.ha=M,this.key=++ie,this.da=this.fa=!1}function F(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function U(u,m,g){for(const R in u)m.call(g,u[R],R,u)}function Y(u,m){for(const g in u)m.call(void 0,u[g],g,u)}function de(u){const m={};for(const g in u)m[g]=u[g];return m}const ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ce(u,m){let g,R;for(let M=1;M<arguments.length;M++){R=arguments[M];for(g in R)u[g]=R[g];for(let j=0;j<ne.length;j++)g=ne[j],Object.prototype.hasOwnProperty.call(R,g)&&(u[g]=R[g])}}function le(u){this.src=u,this.g={},this.h=0}le.prototype.add=function(u,m,g,R,M){const j=u.toString();u=this.g[j],u||(u=this.g[j]=[],this.h++);const X=Qe(u,m,R,M);return X>-1?(m=u[X],g||(m.fa=!1)):(m=new G(m,this.src,j,!!R,M),m.fa=g,u.push(m)),m};function we(u,m){const g=m.type;if(g in u.g){var R=u.g[g],M=Array.prototype.indexOf.call(R,m,void 0),j;(j=M>=0)&&Array.prototype.splice.call(R,M,1),j&&(F(m),u.g[g].length==0&&(delete u.g[g],u.h--))}}function Qe(u,m,g,R){for(let M=0;M<u.length;++M){const j=u[M];if(!j.da&&j.listener==m&&j.capture==!!g&&j.ha==R)return M}return-1}var ae="closure_lm_"+(Math.random()*1e6|0),me={};function Se(u,m,g,R,M){if(Array.isArray(m)){for(let j=0;j<m.length;j++)Se(u,m[j],g,R,M);return null}return g=Vs(g),u&&u[Z]?u.J(m,g,a(R)?!!R.capture:!1,M):Et(u,m,g,!1,R,M)}function Et(u,m,g,R,M,j){if(!m)throw Error("Invalid event type");const X=a(M)?!!M.capture:!!M;let Ee=ge(u);if(Ee||(u[ae]=Ee=new le(u)),g=Ee.add(m,g,R,X,j),g.proxy)return g;if(R=Nt(),g.proxy=R,R.src=u,R.listener=g,u.addEventListener)N||(M=X),M===void 0&&(M=!1),u.addEventListener(m.toString(),R,M);else if(u.attachEvent)u.attachEvent(gn(m.toString()),R);else if(u.addListener&&u.removeListener)u.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return g}function Nt(){function u(g){return m.call(u.src,u.listener,g)}const m=Pr;return u}function Kt(u,m,g,R,M){if(Array.isArray(m))for(var j=0;j<m.length;j++)Kt(u,m[j],g,R,M);else R=a(R)?!!R.capture:!!R,g=Vs(g),u&&u[Z]?(u=u.i,j=String(m).toString(),j in u.g&&(m=u.g[j],g=Qe(m,g,R,M),g>-1&&(F(m[g]),Array.prototype.splice.call(m,g,1),m.length==0&&(delete u.g[j],u.h--)))):u&&(u=ge(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Qe(m,g,R,M)),(g=u>-1?m[u]:null)&&Bt(g))}function Bt(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Z])we(m.i,u);else{var g=u.type,R=u.proxy;m.removeEventListener?m.removeEventListener(g,R,u.capture):m.detachEvent?m.detachEvent(gn(g),R):m.addListener&&m.removeListener&&m.removeListener(R),(g=ge(m))?(we(g,u),g.h==0&&(g.src=null,m[ae]=null)):F(u)}}}function gn(u){return u in me?me[u]:me[u]="on"+u}function Pr(u,m){if(u.da)u=!0;else{m=new q(m,this);const g=u.listener,R=u.ha||u.src;u.fa&&Bt(u),u=g.call(R,m)}return u}function ge(u){return u=u[ae],u instanceof le?u:null}var Gn="__closure_events_fn_"+(Math.random()*1e9>>>0);function Vs(u){return typeof u=="function"?u:(u[Gn]||(u[Gn]=function(m){return u.handleEvent(m)}),u[Gn])}function at(){k.call(this),this.i=new le(this),this.M=this,this.G=null}h(at,k),at.prototype[Z]=!0,at.prototype.removeEventListener=function(u,m,g,R){Kt(this,u,m,g,R)};function Ot(u,m){var g,R=u.G;if(R)for(g=[];R;R=R.G)g.push(R);if(u=u.M,R=m.type||m,typeof m=="string")m=new P(m,u);else if(m instanceof P)m.target=m.target||u;else{var M=m;m=new P(R,u),ce(m,M)}M=!0;let j,X;if(g)for(X=g.length-1;X>=0;X--)j=m.g=g[X],M=Rr(j,R,!0,m)&&M;if(j=m.g=u,M=Rr(j,R,!0,m)&&M,M=Rr(j,R,!1,m)&&M,g)for(X=0;X<g.length;X++)j=m.g=g[X],M=Rr(j,R,!1,m)&&M}at.prototype.N=function(){if(at.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const g=u.g[m];for(let R=0;R<g.length;R++)F(g[R]);delete u.g[m],u.h--}}this.G=null},at.prototype.J=function(u,m,g,R){return this.i.add(String(u),m,!1,g,R)},at.prototype.K=function(u,m,g,R){return this.i.add(String(u),m,!0,g,R)};function Rr(u,m,g,R){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let M=!0;for(let j=0;j<m.length;++j){const X=m[j];if(X&&!X.da&&X.capture==g){const Ee=X.listener,Pt=X.ha||X.src;X.fa&&we(u.i,X),M=Ee.call(Pt,R)!==!1&&M}}return M&&!R.defaultPrevented}function yd(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=c(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:o.setTimeout(u,m||0)}function Cr(u){u.g=yd(()=>{u.g=null,u.i&&(u.i=!1,Cr(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class cm extends k{constructor(m,g){super(),this.m=m,this.l=g,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Cr(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zi(u){k.call(this),this.h=u,this.g={}}h(Zi,k);var on=[];function es(u){U(u.g,function(m,g){this.g.hasOwnProperty(g)&&Bt(m)},u),u.g={}}Zi.prototype.N=function(){Zi.Z.N.call(this),es(this)},Zi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Hl=o.JSON.stringify,um=o.JSON.parse,ta=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function vd(){}function Wl(){}var ts={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function kr(){P.call(this,"d")}h(kr,P);function na(){P.call(this,"c")}h(na,P);var yn={},_d=null;function ra(){return _d=_d||new at}yn.Ia="serverreachability";function Kl(u){P.call(this,yn.Ia,u)}h(Kl,P);function Ls(u){const m=ra();Ot(m,new Kl(m))}yn.STAT_EVENT="statevent";function wd(u,m){P.call(this,yn.STAT_EVENT,u),this.stat=m}h(wd,P);function xt(u){const m=ra();Ot(m,new wd(m,u))}yn.Ja="timingevent";function or(u,m){P.call(this,yn.Ja,u),this.size=m}h(or,P);function eo(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},m)}function he(){this.g=!0}he.prototype.ua=function(){this.g=!1};function Ue(u,m,g,R,M,j){u.info(function(){if(u.g)if(j){var X="",Ee=j.split("&");for(let qe=0;qe<Ee.length;qe++){var Pt=Ee[qe].split("=");if(Pt.length>1){const Lt=Pt[0];Pt=Pt[1];const Or=Lt.split("_");X=Or.length>=2&&Or[1]=="type"?X+(Lt+"="+Pt+"&"):X+(Lt+"=redacted&")}}}else X=null;else X=j;return"XMLHTTP REQ ("+R+") [attempt "+M+"]: "+m+`
`+g+`
`+X})}function We(u,m,g,R,M,j,X){u.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+M+"]: "+m+`
`+g+`
`+j+" "+X})}function Vt(u,m,g,R){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Dr(u,g)+(R?" "+R:"")})}function Cn(u,m){u.info(function(){return"TIMEOUT: "+m})}he.prototype.info=function(){};function Dr(u,m){if(!u.g)return m;if(!m)return null;try{const j=JSON.parse(m);if(j){for(u=0;u<j.length;u++)if(Array.isArray(j[u])){var g=j[u];if(!(g.length<2)){var R=g[1];if(Array.isArray(R)&&!(R.length<1)){var M=R[0];if(M!="noop"&&M!="stop"&&M!="close")for(let X=1;X<R.length;X++)R[X]=""}}}}return Hl(j)}catch{return m}}var Qn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},vn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ar;function dm(){}h(dm,vd),dm.prototype.g=function(){return new XMLHttpRequest},ar=new dm;function Gl(u){return encodeURIComponent(String(u))}function bD(u){var m=1;u=u.split(":");const g=[];for(;m>0&&u.length;)g.push(u.shift()),m--;return u.length&&g.push(u.join(":")),g}function Ms(u,m,g,R){this.j=u,this.i=m,this.l=g,this.S=R||1,this.V=new Zi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new s0}function s0(){this.i=null,this.g="",this.h=!1}var i0={},hm={};function fm(u,m,g){u.M=1,u.A=Td(Nr(m)),u.u=g,u.R=!0,o0(u,null)}function o0(u,m){u.F=Date.now(),Ed(u),u.B=Nr(u.A);var g=u.B,R=u.S;Array.isArray(R)||(R=[String(R)]),_0(g.i,"t",R),u.C=0,g=u.j.L,u.h=new s0,u.g=M0(u.j,g?m:null,!u.u),u.P>0&&(u.O=new cm(c(u.Y,u,u.g),u.P)),m=u.V,g=u.g,R=u.ba;var M="readystatechange";Array.isArray(M)||(M&&(on[0]=M.toString()),M=on);for(let j=0;j<M.length;j++){const X=Se(g,M[j],R||m.handleEvent,!1,m.h||m);if(!X)break;m.g[X.key]=X}m=u.J?de(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),Ls(),Ue(u.i,u.v,u.B,u.l,u.S,u.u)}Ms.prototype.ba=function(u){u=u.target;const m=this.O;m&&js(u)==3?m.j():this.Y(u)},Ms.prototype.Y=function(u){try{if(u==this.g)e:{const Ee=js(this.g),Pt=this.g.ya(),qe=this.g.ca();if(!(Ee<3)&&(Ee!=3||this.g&&(this.h.h||this.g.la()||A0(this.g)))){this.K||Ee!=4||Pt==7||(Pt==8||qe<=0?Ls(3):Ls(2)),pm(this);var m=this.g.ca();this.X=m;var g=AD(this);if(this.o=m==200,We(this.i,this.v,this.B,this.l,this.S,Ee,m),this.o){if(this.U&&!this.L){t:{if(this.g){var R,M=this.g;if((R=M.g?M.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(R)){var j=R;break t}}j=null}if(u=j)Vt(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,mm(this,u);else{this.o=!1,this.m=3,xt(12),to(this),Ql(this);break e}}if(this.R){u=!0;let Lt;for(;!this.K&&this.C<g.length;)if(Lt=xD(this,g),Lt==hm){Ee==4&&(this.m=4,xt(14),u=!1),Vt(this.i,this.l,null,"[Incomplete Response]");break}else if(Lt==i0){this.m=4,xt(15),Vt(this.i,this.l,g,"[Invalid Chunk]"),u=!1;break}else Vt(this.i,this.l,Lt,null),mm(this,Lt);if(a0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ee!=4||g.length!=0||this.h.h||(this.m=1,xt(16),u=!1),this.o=this.o&&u,!u)Vt(this.i,this.l,g,"[Invalid Chunked Response]"),to(this),Ql(this);else if(g.length>0&&!this.W){this.W=!0;var X=this.j;X.g==this&&X.aa&&!X.P&&(X.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),Im(X),X.P=!0,xt(11))}}else Vt(this.i,this.l,g,null),mm(this,g);Ee==4&&to(this),this.o&&!this.K&&(Ee==4?N0(this.j,this):(this.o=!1,Ed(this)))}else BD(this.g),m==400&&g.indexOf("Unknown SID")>0?(this.m=3,xt(12)):(this.m=0,xt(13)),to(this),Ql(this)}}}catch{}finally{}};function AD(u){if(!a0(u))return u.g.la();const m=A0(u.g);if(m==="")return"";let g="";const R=m.length,M=js(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return to(u),Ql(u),"";u.h.i=new o.TextDecoder}for(let j=0;j<R;j++)u.h.h=!0,g+=u.h.i.decode(m[j],{stream:!(M&&j==R-1)});return m.length=0,u.h.g+=g,u.C=0,u.h.g}function a0(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function xD(u,m){var g=u.C,R=m.indexOf(`
`,g);return R==-1?hm:(g=Number(m.substring(g,R)),isNaN(g)?i0:(R+=1,R+g>m.length?hm:(m=m.slice(R,R+g),u.C=R+g,m)))}Ms.prototype.cancel=function(){this.K=!0,to(this)};function Ed(u){u.T=Date.now()+u.H,l0(u,u.H)}function l0(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=eo(c(u.aa,u),m)}function pm(u){u.D&&(o.clearTimeout(u.D),u.D=null)}Ms.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Cn(this.i,this.B),this.M!=2&&(Ls(),xt(17)),to(this),this.m=2,Ql(this)):l0(this,this.T-u)};function Ql(u){u.j.I==0||u.K||N0(u.j,u)}function to(u){pm(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,es(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function mm(u,m){try{var g=u.j;if(g.I!=0&&(g.g==u||gm(g.h,u))){if(!u.L&&gm(g.h,u)&&g.I==3){try{var R=g.Ba.g.parse(m)}catch{R=null}if(Array.isArray(R)&&R.length==3){var M=R;if(M[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<u.F)xd(g),bd(g);else break e;Tm(g),xt(18)}}else g.xa=M[1],0<g.xa-g.K&&M[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=eo(c(g.Va,g),6e3));d0(g.h)<=1&&g.ta&&(g.ta=void 0)}else ro(g,11)}else if((u.L||g.g==u)&&xd(g),!C(m))for(M=g.Ba.g.parse(m),m=0;m<M.length;m++){let qe=M[m];const Lt=qe[0];if(!(Lt<=g.K))if(g.K=Lt,qe=qe[1],g.I==2)if(qe[0]=="c"){g.M=qe[1],g.ba=qe[2];const Or=qe[3];Or!=null&&(g.ka=Or,g.j.info("VER="+g.ka));const so=qe[4];so!=null&&(g.za=so,g.j.info("SVER="+g.za));const Bs=qe[5];Bs!=null&&typeof Bs=="number"&&Bs>0&&(R=1.5*Bs,g.O=R,g.j.info("backChannelRequestTimeoutMs_="+R)),R=g;const $s=u.g;if($s){const Rd=$s.g?$s.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Rd){var j=R.h;j.g||Rd.indexOf("spdy")==-1&&Rd.indexOf("quic")==-1&&Rd.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(ym(j,j.h),j.h=null))}if(R.G){const Sm=$s.g?$s.g.getResponseHeader("X-HTTP-Session-Id"):null;Sm&&(R.wa=Sm,Ye(R.J,R.G,Sm))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-u.F,g.j.info("Handshake RTT: "+g.T+"ms")),R=g;var X=u;if(R.na=L0(R,R.L?R.ba:null,R.W),X.L){h0(R.h,X);var Ee=X,Pt=R.O;Pt&&(Ee.H=Pt),Ee.D&&(pm(Ee),Ed(Ee)),R.g=X}else k0(R);g.i.length>0&&Ad(g)}else qe[0]!="stop"&&qe[0]!="close"||ro(g,7);else g.I==3&&(qe[0]=="stop"||qe[0]=="close"?qe[0]=="stop"?ro(g,7):Em(g):qe[0]!="noop"&&g.l&&g.l.qa(qe),g.A=0)}}Ls(4)}catch{}}var PD=class{constructor(u,m){this.g=u,this.map=m}};function c0(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function u0(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function d0(u){return u.h?1:u.g?u.g.size:0}function gm(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function ym(u,m){u.g?u.g.add(m):u.h=m}function h0(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}c0.prototype.cancel=function(){if(this.i=f0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function f0(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const g of u.g.values())m=m.concat(g.G);return m}return f(u.i)}var p0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function RD(u,m){if(u){u=u.split("&");for(let g=0;g<u.length;g++){const R=u[g].indexOf("=");let M,j=null;R>=0?(M=u[g].substring(0,R),j=u[g].substring(R+1)):M=u[g],m(M,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function Fs(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof Fs?(this.l=u.l,Yl(this,u.j),this.o=u.o,this.g=u.g,Xl(this,u.u),this.h=u.h,vm(this,w0(u.i)),this.m=u.m):u&&(m=String(u).match(p0))?(this.l=!1,Yl(this,m[1]||"",!0),this.o=Jl(m[2]||""),this.g=Jl(m[3]||"",!0),Xl(this,m[4]),this.h=Jl(m[5]||"",!0),vm(this,m[6]||"",!0),this.m=Jl(m[7]||"")):(this.l=!1,this.i=new ec(null,this.l))}Fs.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(Zl(m,m0,!0),":");var g=this.g;return(g||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Zl(m,m0,!0),"@"),u.push(Gl(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&u.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(Zl(g,g.charAt(0)=="/"?DD:kD,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",Zl(g,OD)),u.join("")},Fs.prototype.resolve=function(u){const m=Nr(this);let g=!!u.j;g?Yl(m,u.j):g=!!u.o,g?m.o=u.o:g=!!u.g,g?m.g=u.g:g=u.u!=null;var R=u.h;if(g)Xl(m,u.u);else if(g=!!u.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var M=m.h.lastIndexOf("/");M!=-1&&(R=m.h.slice(0,M+1)+R)}if(M=R,M==".."||M==".")R="";else if(M.indexOf("./")!=-1||M.indexOf("/.")!=-1){R=M.lastIndexOf("/",0)==0,M=M.split("/");const j=[];for(let X=0;X<M.length;){const Ee=M[X++];Ee=="."?R&&X==M.length&&j.push(""):Ee==".."?((j.length>1||j.length==1&&j[0]!="")&&j.pop(),R&&X==M.length&&j.push("")):(j.push(Ee),R=!0)}R=j.join("/")}else R=M}return g?m.h=R:g=u.i.toString()!=="",g?vm(m,w0(u.i)):g=!!u.m,g&&(m.m=u.m),m};function Nr(u){return new Fs(u)}function Yl(u,m,g){u.j=g?Jl(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Xl(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function vm(u,m,g){m instanceof ec?(u.i=m,VD(u.i,u.l)):(g||(m=Zl(m,ND)),u.i=new ec(m,u.l))}function Ye(u,m,g){u.i.set(m,g)}function Td(u){return Ye(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Jl(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Zl(u,m,g){return typeof u=="string"?(u=encodeURI(u).replace(m,CD),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function CD(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var m0=/[#\/\?@]/g,kD=/[#\?:]/g,DD=/[#\?]/g,ND=/[#\?@]/g,OD=/#/g;function ec(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function no(u){u.g||(u.g=new Map,u.h=0,u.i&&RD(u.i,function(m,g){u.add(decodeURIComponent(m.replace(/\+/g," ")),g)}))}t=ec.prototype,t.add=function(u,m){no(this),this.i=null,u=sa(this,u);let g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(m),this.h+=1,this};function g0(u,m){no(u),m=sa(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function y0(u,m){return no(u),m=sa(u,m),u.g.has(m)}t.forEach=function(u,m){no(this),this.g.forEach(function(g,R){g.forEach(function(M){u.call(m,M,R,this)},this)},this)};function v0(u,m){no(u);let g=[];if(typeof m=="string")y0(u,m)&&(g=g.concat(u.g.get(sa(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)g=g.concat(u[m]);return g}t.set=function(u,m){return no(this),this.i=null,u=sa(this,u),y0(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},t.get=function(u,m){return u?(u=v0(this,u),u.length>0?String(u[0]):m):m};function _0(u,m,g){g0(u,m),g.length>0&&(u.i=null,u.g.set(sa(u,m),f(g)),u.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let R=0;R<m.length;R++){var g=m[R];const M=Gl(g);g=v0(this,g);for(let j=0;j<g.length;j++){let X=M;g[j]!==""&&(X+="="+Gl(g[j])),u.push(X)}}return this.i=u.join("&")};function w0(u){const m=new ec;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function sa(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function VD(u,m){m&&!u.j&&(no(u),u.i=null,u.g.forEach(function(g,R){const M=R.toLowerCase();R!=M&&(g0(this,R),_0(this,M,g))},u)),u.j=m}function LD(u,m){const g=new he;if(o.Image){const R=new Image;R.onload=d(Us,g,"TestLoadImage: loaded",!0,m,R),R.onerror=d(Us,g,"TestLoadImage: error",!1,m,R),R.onabort=d(Us,g,"TestLoadImage: abort",!1,m,R),R.ontimeout=d(Us,g,"TestLoadImage: timeout",!1,m,R),o.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=u}else m(!1)}function MD(u,m){const g=new he,R=new AbortController,M=setTimeout(()=>{R.abort(),Us(g,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:R.signal}).then(j=>{clearTimeout(M),j.ok?Us(g,"TestPingServer: ok",!0,m):Us(g,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(M),Us(g,"TestPingServer: error",!1,m)})}function Us(u,m,g,R,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),R(g)}catch{}}function FD(){this.g=new ta}function _m(u){this.i=u.Sb||null,this.h=u.ab||!1}h(_m,vd),_m.prototype.g=function(){return new Id(this.i,this.h)};function Id(u,m){at.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h(Id,at),t=Id.prototype,t.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,nc(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||o).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,tc(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,nc(this)),this.g&&(this.readyState=3,nc(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;E0(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function E0(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?tc(this):nc(this),this.readyState==3&&E0(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,tc(this))},t.Na=function(u){this.g&&(this.response=u,tc(this))},t.ga=function(){this.g&&tc(this)};function tc(u){u.readyState=4,u.l=null,u.j=null,u.B=null,nc(u)}t.setRequestHeader=function(u,m){this.A.append(u,m)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var g=m.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=m.next();return u.join(`\r
`)};function nc(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Id.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function T0(u){let m="";return U(u,function(g,R){m+=R,m+=":",m+=g,m+=`\r
`}),m}function wm(u,m,g){e:{for(R in g){var R=!1;break e}R=!0}R||(g=T0(g),typeof u=="string"?g!=null&&Gl(g):Ye(u,m,g))}function ht(u){at.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(ht,at);var UD=/^https?$/i,jD=["POST","PUT"];t=ht.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,m,g,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ar.g(),this.g.onreadystatechange=p(c(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(j){I0(this,j);return}if(u=g||"",g=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var M in R)g.set(M,R[M]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const j of R.keys())g.set(j,R.get(j));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(g.keys()).find(j=>j.toLowerCase()=="content-type"),M=o.FormData&&u instanceof o.FormData,!(Array.prototype.indexOf.call(jD,m,void 0)>=0)||R||M||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,X]of g)this.g.setRequestHeader(j,X);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(j){I0(this,j)}};function I0(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,S0(u),Sd(u)}function S0(u){u.A||(u.A=!0,Ot(u,"complete"),Ot(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Ot(this,"complete"),Ot(this,"abort"),Sd(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Sd(this,!0)),ht.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?b0(this):this.Xa())},t.Xa=function(){b0(this)};function b0(u){if(u.h&&typeof i<"u"){if(u.v&&js(u)==4)setTimeout(u.Ca.bind(u),0);else if(Ot(u,"readystatechange"),js(u)==4){u.h=!1;try{const j=u.ca();e:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var g;if(!(g=m)){var R;if(R=j===0){let X=String(u.D).match(p0)[1]||null;!X&&o.self&&o.self.location&&(X=o.self.location.protocol.slice(0,-1)),R=!UD.test(X?X.toLowerCase():"")}g=R}if(g)Ot(u,"complete"),Ot(u,"success");else{u.o=6;try{var M=js(u)>2?u.g.statusText:""}catch{M=""}u.l=M+" ["+u.ca()+"]",S0(u)}}finally{Sd(u)}}}}function Sd(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const g=u.g;u.g=null,m||Ot(u,"ready");try{g.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function js(u){return u.g?u.g.readyState:0}t.ca=function(){try{return js(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),um(m)}};function A0(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function BD(u){const m={};u=(u.g&&js(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<u.length;R++){if(C(u[R]))continue;var g=bD(u[R]);const M=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const j=m[M]||[];m[M]=j,j.push(g)}Y(m,function(R){return R.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function rc(u,m,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||m}function x0(u){this.za=0,this.i=[],this.j=new he,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=rc("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=rc("baseRetryDelayMs",5e3,u),this.Za=rc("retryDelaySeedMs",1e4,u),this.Ta=rc("forwardChannelMaxRetries",2,u),this.va=rc("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new c0(u&&u.concurrentRequestLimit),this.Ba=new FD,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=x0.prototype,t.ka=8,t.I=1,t.connect=function(u,m,g,R){xt(0),this.W=u,this.H=m||{},g&&R!==void 0&&(this.H.OSID=g,this.H.OAID=R),this.F=this.X,this.J=L0(this,null,this.W),Ad(this)};function Em(u){if(P0(u),u.I==3){var m=u.V++,g=Nr(u.J);if(Ye(g,"SID",u.M),Ye(g,"RID",m),Ye(g,"TYPE","terminate"),sc(u,g),m=new Ms(u,u.j,m),m.M=2,m.A=Td(Nr(g)),g=!1,o.navigator&&o.navigator.sendBeacon)try{g=o.navigator.sendBeacon(m.A.toString(),"")}catch{}!g&&o.Image&&(new Image().src=m.A,g=!0),g||(m.g=M0(m.j,null),m.g.ea(m.A)),m.F=Date.now(),Ed(m)}V0(u)}function bd(u){u.g&&(Im(u),u.g.cancel(),u.g=null)}function P0(u){bd(u),u.v&&(o.clearTimeout(u.v),u.v=null),xd(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&o.clearTimeout(u.m),u.m=null)}function Ad(u){if(!u0(u.h)&&!u.m){u.m=!0;var m=u.Ea;O||T(),V||(O(),V=!0),S.add(m,u),u.D=0}}function $D(u,m){return d0(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=eo(c(u.Ea,u,m),O0(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const M=new Ms(this,this.j,u);let j=this.o;if(this.U&&(j?(j=de(j),ce(j,this.U)):j=this.U),this.u!==null||this.R||(M.J=j,j=null),this.S)e:{for(var m=0,g=0;g<this.i.length;g++){t:{var R=this.i[g];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(m+=R,m>4096){m=g;break e}if(m===4096||g===this.i.length-1){m=g+1;break e}}m=1e3}else m=1e3;m=C0(this,M,m),g=Nr(this.J),Ye(g,"RID",u),Ye(g,"CVER",22),this.G&&Ye(g,"X-HTTP-Session-Id",this.G),sc(this,g),j&&(this.R?m="headers="+Gl(T0(j))+"&"+m:this.u&&wm(g,this.u,j)),ym(this.h,M),this.Ra&&Ye(g,"TYPE","init"),this.S?(Ye(g,"$req",m),Ye(g,"SID","null"),M.U=!0,fm(M,g,null)):fm(M,g,m),this.I=2}}else this.I==3&&(u?R0(this,u):this.i.length==0||u0(this.h)||R0(this))};function R0(u,m){var g;m?g=m.l:g=u.V++;const R=Nr(u.J);Ye(R,"SID",u.M),Ye(R,"RID",g),Ye(R,"AID",u.K),sc(u,R),u.u&&u.o&&wm(R,u.u,u.o),g=new Ms(u,u.j,g,u.D+1),u.u===null&&(g.J=u.o),m&&(u.i=m.G.concat(u.i)),m=C0(u,g,1e3),g.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),ym(u.h,g),fm(g,R,m)}function sc(u,m){u.H&&U(u.H,function(g,R){Ye(m,R,g)}),u.l&&U({},function(g,R){Ye(m,R,g)})}function C0(u,m,g){g=Math.min(u.i.length,g);const R=u.l?c(u.l.Ka,u.l,u):null;e:{var M=u.i;let Ee=-1;for(;;){const Pt=["count="+g];Ee==-1?g>0?(Ee=M[0].g,Pt.push("ofs="+Ee)):Ee=0:Pt.push("ofs="+Ee);let qe=!0;for(let Lt=0;Lt<g;Lt++){var j=M[Lt].g;const Or=M[Lt].map;if(j-=Ee,j<0)Ee=Math.max(0,M[Lt].g-100),qe=!1;else try{j="req"+j+"_"||"";try{var X=Or instanceof Map?Or:Object.entries(Or);for(const[so,Bs]of X){let $s=Bs;a(Bs)&&($s=Hl(Bs)),Pt.push(j+so+"="+encodeURIComponent($s))}}catch(so){throw Pt.push(j+"type="+encodeURIComponent("_badmap")),so}}catch{R&&R(Or)}}if(qe){X=Pt.join("&");break e}}X=void 0}return u=u.i.splice(0,g),m.G=u,X}function k0(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;O||T(),V||(O(),V=!0),S.add(m,u),u.A=0}}function Tm(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=eo(c(u.Da,u),O0(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,D0(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=eo(c(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,xt(10),bd(this),D0(this))};function Im(u){u.B!=null&&(o.clearTimeout(u.B),u.B=null)}function D0(u){u.g=new Ms(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=Nr(u.na);Ye(m,"RID","rpc"),Ye(m,"SID",u.M),Ye(m,"AID",u.K),Ye(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&Ye(m,"TO",u.ia),Ye(m,"TYPE","xmlhttp"),sc(u,m),u.u&&u.o&&wm(m,u.u,u.o),u.O&&(u.g.H=u.O);var g=u.g;u=u.ba,g.M=1,g.A=Td(Nr(m)),g.u=null,g.R=!0,o0(g,u)}t.Va=function(){this.C!=null&&(this.C=null,bd(this),Tm(this),xt(19))};function xd(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function N0(u,m){var g=null;if(u.g==m){xd(u),Im(u),u.g=null;var R=2}else if(gm(u.h,m))g=m.G,h0(u.h,m),R=1;else return;if(u.I!=0){if(m.o)if(R==1){g=m.u?m.u.length:0,m=Date.now()-m.F;var M=u.D;R=ra(),Ot(R,new or(R,g)),Ad(u)}else k0(u);else if(M=m.m,M==3||M==0&&m.X>0||!(R==1&&$D(u,m)||R==2&&Tm(u)))switch(g&&g.length>0&&(m=u.h,m.i=m.i.concat(g)),M){case 1:ro(u,5);break;case 4:ro(u,10);break;case 3:ro(u,6);break;default:ro(u,2)}}}function O0(u,m){let g=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(g*=2),g*m}function ro(u,m){if(u.j.info("Error code "+m),m==2){var g=c(u.bb,u),R=u.Ua;const M=!R;R=new Fs(R||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Yl(R,"https"),Td(R),M?LD(R.toString(),g):MD(R.toString(),g)}else xt(2);u.I=0,u.l&&u.l.pa(m),V0(u),P0(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function V0(u){if(u.I=0,u.ja=[],u.l){const m=f0(u.h);(m.length!=0||u.i.length!=0)&&(_(u.ja,m),_(u.ja,u.i),u.h.i.length=0,f(u.i),u.i.length=0),u.l.oa()}}function L0(u,m,g){var R=g instanceof Fs?Nr(g):new Fs(g);if(R.g!="")m&&(R.g=m+"."+R.g),Xl(R,R.u);else{var M=o.location;R=M.protocol,m=m?m+"."+M.hostname:M.hostname,M=+M.port;const j=new Fs(null);R&&Yl(j,R),m&&(j.g=m),M&&Xl(j,M),g&&(j.h=g),R=j}return g=u.G,m=u.wa,g&&m&&Ye(R,g,m),Ye(R,"VER",u.ka),sc(u,R),R}function M0(u,m,g){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new ht(new _m({ab:g})):new ht(u.ma),m.Fa(u.L),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function F0(){}t=F0.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Pd(){}Pd.prototype.g=function(u,m){return new kn(u,m)};function kn(u,m){at.call(this),this.g=new x0(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!C(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!C(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new ia(this)}h(kn,at),kn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},kn.prototype.close=function(){Em(this.g)},kn.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.v&&(g={},g.__data__=Hl(u),u=g);m.i.push(new PD(m.Ya++,u)),m.I==3&&Ad(m)},kn.prototype.N=function(){this.g.l=null,delete this.j,Em(this.g),delete this.g,kn.Z.N.call(this)};function U0(u){kr.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const g in m){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}h(U0,kr);function j0(){na.call(this),this.status=1}h(j0,na);function ia(u){this.g=u}h(ia,F0),ia.prototype.ra=function(){Ot(this.g,"a")},ia.prototype.qa=function(u){Ot(this.g,new U0(u))},ia.prototype.pa=function(u){Ot(this.g,new j0)},ia.prototype.oa=function(){Ot(this.g,"b")},Pd.prototype.createWebChannel=Pd.prototype.g,kn.prototype.send=kn.prototype.o,kn.prototype.open=kn.prototype.m,kn.prototype.close=kn.prototype.close,vR=function(){return new Pd},yR=function(){return ra()},gR=yn,Ky={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Qn.NO_ERROR=0,Qn.TIMEOUT=8,Qn.HTTP_ERROR=6,kh=Qn,vn.COMPLETE="complete",mR=vn,Wl.EventType=ts,ts.OPEN="a",ts.CLOSE="b",ts.ERROR="c",ts.MESSAGE="d",at.prototype.listen=at.prototype.J,xc=Wl,ht.prototype.listenOnce=ht.prototype.K,ht.prototype.getLastError=ht.prototype.Ha,ht.prototype.getLastErrorCode=ht.prototype.ya,ht.prototype.getStatus=ht.prototype.ca,ht.prototype.getResponseJson=ht.prototype.La,ht.prototype.getResponseText=ht.prototype.la,ht.prototype.send=ht.prototype.ea,ht.prototype.setWithCredentials=ht.prototype.Fa,pR=ht}).apply(typeof eh<"u"?eh:typeof self<"u"?self:typeof window<"u"?window:{});const mI="@firebase/firestore",gI="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Jt.UNAUTHENTICATED=new Jt(null),Jt.GOOGLE_CREDENTIALS=new Jt("google-credentials-uid"),Jt.FIRST_PARTY=new Jt("first-party-uid"),Jt.MOCK_USER=new Jt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ni=new z_("@firebase/firestore");function pa(){return Ni.logLevel}function _R(t){Ni.setLogLevel(t)}function H(t,...e){if(Ni.logLevel<=Pe.DEBUG){const n=e.map(Y_);Ni.debug(`Firestore (${Vl}): ${t}`,...n)}}function vt(t,...e){if(Ni.logLevel<=Pe.ERROR){const n=e.map(Y_);Ni.error(`Firestore (${Vl}): ${t}`,...n)}}function Oi(t,...e){if(Ni.logLevel<=Pe.WARN){const n=e.map(Y_);Ni.warn(`Firestore (${Vl}): ${t}`,...n)}}function Y_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,wR(t,r,n)}function wR(t,e,n){let r=`FIRESTORE (${Vl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw vt(r),new Error(r)}function oe(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||wR(e,s,r)}function re(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends Ar{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ER{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Jt.UNAUTHENTICATED))}shutdown(){}}class pj{constructor(e){this.t=e,this.currentUser=Jt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){oe(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new rr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new rr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new rr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(oe(typeof r.accessToken=="string",31837,{l:r}),new fj(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return oe(e===null||typeof e=="string",2055,{h:e}),new Jt(e)}}class mj{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Jt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class gj{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new mj(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Jt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class yI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yj{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Vn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){oe(this.o===void 0,3512);const r=i=>{i.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new yI(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(oe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new yI(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vj(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=vj(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function pe(t,e){return t<e?-1:t>e?1:0}function Gy(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return fg(s)===fg(i)?pe(s,i):fg(s)?1:-1}return pe(t.length,e.length)}const _j=55296,wj=57343;function fg(t){const e=t.charCodeAt(0);return e>=_j&&e<=wj}function al(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}function TR(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI="__name__";class Mr{constructor(e,n,r){n===void 0?n=0:n>e.length&&te(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&te(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Mr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Mr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Mr.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return pe(e.length,n.length)}static compareSegments(e,n){const r=Mr.isNumericId(e),s=Mr.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Mr.extractNumericId(e).compare(Mr.extractNumericId(n)):Gy(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Si.fromString(e.substring(4,e.length-2))}}class Fe extends Mr{construct(e,n,r){return new Fe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new K(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Fe(n)}static emptyPath(){return new Fe([])}}const Ej=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rt extends Mr{construct(e,n,r){return new rt(e,n,r)}static isValidIdentifier(e){return Ej.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===vI}static keyField(){return new rt([vI])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new K(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new K(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new K(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new K(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rt(n)}static emptyPath(){return new rt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.path=e}static fromPath(e){return new J(Fe.fromString(e))}static fromName(e){return new J(Fe.fromString(e).popFirst(5))}static empty(){return new J(Fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Fe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new J(new Fe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IR(t,e,n){if(!n)throw new K(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function SR(t,e,n,r){if(e===!0&&r===!0)throw new K(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function _I(t){if(!J.isDocumentKey(t))throw new K(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function wI(t){if(J.isDocumentKey(t))throw new K(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function bR(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Vp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":te(12329,{type:typeof t})}function wt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Vp(t);throw new K(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Tj(t,e){if(e<=0)throw new K(B.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(t,e){const n={typeString:t};return e&&(n.value=e),n}function nd(t,e){if(!bR(t))throw new K(B.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new K(B.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI=-62135596800,TI=1e6;class je{static now(){return je.fromMillis(Date.now())}static fromDate(e){return je.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*TI);return new je(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<EI)throw new K(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/TI}_compareTo(e){return this.seconds===e.seconds?pe(this.nanoseconds,e.nanoseconds):pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:je._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(nd(e,je._jsonSchema))return new je(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-EI;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}je._jsonSchemaVersion="firestore/timestamp/1.0",je._jsonSchema={type:At("string",je._jsonSchemaVersion),seconds:At("number"),nanoseconds:At("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{static fromTimestamp(e){return new ue(e)}static min(){return new ue(new je(0,0))}static max(){return new ue(new je(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ll=-1;class Df{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function Qy(t){return t.fields.find(e=>e.kind===2)}function co(t){return t.fields.filter(e=>e.kind!==2)}Df.UNKNOWN_ID=-1;class Dh{constructor(e,n){this.fieldPath=e,this.kind=n}}class xu{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new xu(0,Hn.min())}}function AR(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ue.fromTimestamp(r===1e9?new je(n+1,0):new je(n,r));return new Hn(s,J.empty(),e)}function xR(t){return new Hn(t.readTime,t.key,ll)}class Hn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Hn(ue.min(),J.empty(),ll)}static max(){return new Hn(ue.max(),J.empty(),ll)}}function X_(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=J.comparator(t.documentKey,e.documentKey),n!==0?n:pe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class RR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qi(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==PR)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):L.reject(n)}static resolve(e){return new L((n,r)=>{n(e)})}static reject(e){return new L((n,r)=>{r(e)})}static waitFor(e){return new L((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=L.resolve(!1);for(const r of e)n=n.next(s=>s?L.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new L((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new L((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nn="SimpleDb";class Lp{static open(e,n,r,s){try{return new Lp(n,e.transaction(s,r))}catch(i){throw new zc(n,i)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new rr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new zc(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const s=J_(r.target.error);this.S.reject(new zc(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(H(Nn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new Sj(n)}}class bi{static delete(e){return H(Nn,"Removing database:",e),fo(OP().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!BP())return!1;if(bi.F())return!0;const e=Wt(),n=bi.M(e),r=0<n&&n<10,s=CR(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,bi.M(Wt())===12.2&&vt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(H(Nn,"Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new zc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new K(B.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new K(B.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new zc(e,o))},s.onupgradeneeded=i=>{H(Nn,'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.N.k(o,s.transaction,i.oldVersion,this.version).next(()=>{H(Nn,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const a=Lp.open(this.db,e,i?"readonly":"readwrite",r),l=s(a).next(c=>(a.C(),c)).catch(c=>(a.abort(c),L.reject(c))).toPromise();return l.catch(()=>{}),await a.D,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(H(Nn,"Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function CR(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class Ij{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return fo(this.U.delete())}}class zc extends K{constructor(e,n){super(B.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Yi(t){return t.name==="IndexedDbTransactionError"}class Sj{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(H(Nn,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(H(Nn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),fo(r)}add(e){return H(Nn,"ADD",this.store.name,e,e),fo(this.store.add(e))}get(e){return fo(this.store.get(e)).next(n=>(n===void 0&&(n=null),H(Nn,"GET",this.store.name,e,n),n))}delete(e){return H(Nn,"DELETE",this.store.name,e),fo(this.store.delete(e))}count(){return H(Nn,"COUNT",this.store.name),fo(this.store.count())}J(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new L((o,a)=>{i.onerror=l=>{a(l.target.error)},i.onsuccess=l=>{o(l.target.result)}})}{const i=this.cursor(r),o=[];return this.H(i,(a,l)=>{o.push(l)}).next(()=>o)}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new L((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}Z(e,n){H(Nn,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const s=this.cursor(r);return this.H(s,(i,o,a)=>a.delete())}ee(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.H(s,n)}te(e){const n=this.cursor({});return new L((r,s)=>{n.onerror=i=>{const o=J_(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}H(e,n){const r=[];return new L((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const l=new Ij(a),c=n(a.primaryKey,a.value,l);if(c instanceof L){const d=c.catch(h=>(l.done(),L.reject(h)));r.push(d)}l.isDone?s():l.G===null?a.continue():a.continue(l.G)}}).next(()=>L.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function fo(t){return new L((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=J_(r.target.error);n(s)}})}let II=!1;function J_(t){const e=bi.M(Wt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new K("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return II||(II=!0,setTimeout(()=>{throw r},0)),r}}return t}const qc="IndexBackfiller";class bj{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){H(qc,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.ne.ie();H(qc,`Documents written: ${n}`)}catch(n){Yi(n)?H(qc,"Ignoring IndexedDB error during index backfill: ",n):await Qi(n)}await this.re(6e4)})}}class Aj{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.se(n,e))}se(e,n){const r=new Set;let s=n,i=!0;return L.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return H(qc,`Processing collection: ${o}`),this.oe(e,o,s).next(a=>{s-=a,r.add(o)});i=!1})).next(()=>n-s)}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next(i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this._e(s,i)).next(a=>(H(qc,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}_e(e,n){let r=e;return n.changes.forEach((s,i)=>{const o=xR(i);X_(o,r)>0&&(r=o)}),new Hn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}In.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Do=-1;function Mp(t){return t==null}function Pu(t){return t===0&&1/t==-1/0}function kR(t){return typeof t=="number"&&Number.isInteger(t)&&!Pu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nf="";function rn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=SI(e)),e=xj(t.get(n),e);return SI(e)}function xj(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case Nf:n+="";break;default:n+=i}}return n}function SI(t){return t+Nf+""}function qr(t){const e=t.length;if(oe(e>=2,64408,{path:t}),e===2)return oe(t.charAt(0)===Nf&&t.charAt(1)==="",56145,{path:t}),Fe.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const o=t.indexOf(Nf,i);switch((o<0||o>n)&&te(50515,{path:t}),t.charAt(o+1)){case"":const a=t.substring(i,o);let l;s.length===0?l=a:(s+=a,l=s,s=""),r.push(l);break;case"":s+=t.substring(i,o),s+="\0";break;case"":s+=t.substring(i,o+1);break;default:te(61167,{path:t})}i=o+2}return new Fe(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uo="remoteDocuments",rd="owner",aa="owner",Ru="mutationQueues",Pj="userId",mr="mutations",bI="batchId",To="userMutationsIndex",AI=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nh(t,e){return[t,rn(e)]}function DR(t,e,n){return[t,rn(e),n]}const Rj={},cl="documentMutations",Of="remoteDocumentsV14",Cj=["prefixPath","collectionGroup","readTime","documentId"],Oh="documentKeyIndex",kj=["prefixPath","collectionGroup","documentId"],NR="collectionGroupIndex",Dj=["collectionGroup","readTime","prefixPath","documentId"],Cu="remoteDocumentGlobal",Yy="remoteDocumentGlobalKey",ul="targets",OR="queryTargetsIndex",Nj=["canonicalId","targetId"],dl="targetDocuments",Oj=["targetId","path"],Z_="documentTargetsIndex",Vj=["path","targetId"],Vf="targetGlobalKey",No="targetGlobal",ku="collectionParents",Lj=["collectionId","parent"],hl="clientMetadata",Mj="clientId",Fp="bundles",Fj="bundleId",Up="namedQueries",Uj="name",ew="indexConfiguration",jj="indexId",Xy="collectionGroupIndex",Bj="collectionGroup",Hc="indexState",$j=["indexId","uid"],VR="sequenceNumberIndex",zj=["uid","sequenceNumber"],Wc="indexEntries",qj=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],LR="documentKeyIndex",Hj=["indexId","uid","orderedDocumentKey"],jp="documentOverlays",Wj=["userId","collectionPath","documentId"],Jy="collectionPathOverlayIndex",Kj=["userId","collectionPath","largestBatchId"],MR="collectionGroupOverlayIndex",Gj=["userId","collectionGroup","largestBatchId"],tw="globals",Qj="name",FR=[Ru,mr,cl,uo,ul,rd,No,dl,hl,Cu,ku,Fp,Up],Yj=[...FR,jp],UR=[Ru,mr,cl,Of,ul,rd,No,dl,hl,Cu,ku,Fp,Up,jp],jR=UR,nw=[...jR,ew,Hc,Wc],Xj=nw,BR=[...nw,tw],Jj=BR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy extends RR{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function Dt(t,e){const n=re(t);return bi.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xI(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Xi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function $R(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e,n){this.comparator=e,this.root=n||zt.EMPTY}insert(e,n){return new Ge(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,zt.BLACK,null,null))}remove(e){return new Ge(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new th(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new th(this.root,e,this.comparator,!1)}getReverseIterator(){return new th(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new th(this.root,e,this.comparator,!0)}}class th{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??zt.RED,this.left=s??zt.EMPTY,this.right=i??zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new zt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return zt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw te(27949);return e+(this.isRed()?0:1)}}zt.EMPTY=null,zt.RED=!0,zt.BLACK=!1;zt.EMPTY=new class{constructor(){this.size=0}get key(){throw te(57766)}get value(){throw te(16141)}get color(){throw te(16727)}get left(){throw te(29726)}get right(){throw te(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new zt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e){this.comparator=e,this.data=new Ge(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new PI(this.data.getIterator())}getIteratorFrom(e){return new PI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ze)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ze(this.comparator);return n.data=e,n}}class PI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function la(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.fields=e,e.sort(rt.comparator)}static empty(){return new Sn([])}unionWith(e){let n=new ze(rt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Sn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return al(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new zR("Invalid base64 string: "+i):i}}(e);return new gt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new gt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gt.EMPTY_BYTE_STRING=new gt("");const Zj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function As(t){if(oe(!!t,39018),typeof t=="string"){let e=0;const n=Zj.exec(t);if(oe(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:tt(t.seconds),nanos:tt(t.nanos)}}function tt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function xs(t){return typeof t=="string"?gt.fromBase64String(t):gt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR="server_timestamp",HR="__type__",WR="__previous_value__",KR="__local_write_time__";function rw(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[HR])==null?void 0:r.stringValue)===qR}function Bp(t){const e=t.mapValue.fields[WR];return rw(e)?Bp(e):e}function Du(t){const e=As(t.mapValue.fields[KR].timestampValue);return new je(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e5{constructor(e,n,r,s,i,o,a,l,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=d}}const Lf="(default)";class Vi{constructor(e,n){this.projectId=e,this.database=n||Lf}static empty(){return new Vi("","")}get isDefaultDatabase(){return this.database===Lf}isEqual(e){return e instanceof Vi&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sw="__type__",GR="__max__",di={mapValue:{fields:{__type__:{stringValue:GR}}}},iw="__vector__",fl="value",Vh={nullValue:"NULL_VALUE"};function Li(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?rw(t)?4:QR(t)?9007199254740991:$p(t)?10:11:te(28295,{value:t})}function Xr(t,e){if(t===e)return!0;const n=Li(t);if(n!==Li(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Du(t).isEqual(Du(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=As(s.timestampValue),a=As(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return xs(s.bytesValue).isEqual(xs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return tt(s.geoPointValue.latitude)===tt(i.geoPointValue.latitude)&&tt(s.geoPointValue.longitude)===tt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return tt(s.integerValue)===tt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=tt(s.doubleValue),a=tt(i.doubleValue);return o===a?Pu(o)===Pu(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return al(t.arrayValue.values||[],e.arrayValue.values||[],Xr);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(xI(o)!==xI(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Xr(o[l],a[l])))return!1;return!0}(t,e);default:return te(52216,{left:t})}}function Nu(t,e){return(t.values||[]).find(n=>Xr(n,e))!==void 0}function Mi(t,e){if(t===e)return 0;const n=Li(t),r=Li(e);if(n!==r)return pe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return pe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=tt(i.integerValue||i.doubleValue),l=tt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return RI(t.timestampValue,e.timestampValue);case 4:return RI(Du(t),Du(e));case 5:return Gy(t.stringValue,e.stringValue);case 6:return function(i,o){const a=xs(i),l=xs(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=pe(a[c],l[c]);if(d!==0)return d}return pe(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=pe(tt(i.latitude),tt(o.latitude));return a!==0?a:pe(tt(i.longitude),tt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return CI(t.arrayValue,e.arrayValue);case 10:return function(i,o){var p,f,_,y;const a=i.fields||{},l=o.fields||{},c=(p=a[fl])==null?void 0:p.arrayValue,d=(f=l[fl])==null?void 0:f.arrayValue,h=pe(((_=c==null?void 0:c.values)==null?void 0:_.length)||0,((y=d==null?void 0:d.values)==null?void 0:y.length)||0);return h!==0?h:CI(c,d)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===di.mapValue&&o===di.mapValue)return 0;if(i===di.mapValue)return 1;if(o===di.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const p=Gy(l[h],d[h]);if(p!==0)return p;const f=Mi(a[l[h]],c[d[h]]);if(f!==0)return f}return pe(l.length,d.length)}(t.mapValue,e.mapValue);default:throw te(23264,{he:n})}}function RI(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return pe(t,e);const n=As(t),r=As(e),s=pe(n.seconds,r.seconds);return s!==0?s:pe(n.nanos,r.nanos)}function CI(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Mi(n[s],r[s]);if(i)return i}return pe(n.length,r.length)}function pl(t){return ev(t)}function ev(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=As(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return xs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return J.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=ev(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${ev(n.fields[o])}`;return s+"}"}(t.mapValue):te(61005,{value:t})}function Lh(t){switch(Li(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Bp(t);return e?16+Lh(e):16;case 5:return 2*t.stringValue.length;case 6:return xs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Lh(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Xi(r.fields,(i,o)=>{s+=i.length+Lh(o)}),s}(t.mapValue);default:throw te(13486,{value:t})}}function Ou(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function tv(t){return!!t&&"integerValue"in t}function Vu(t){return!!t&&"arrayValue"in t}function kI(t){return!!t&&"nullValue"in t}function DI(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Mh(t){return!!t&&"mapValue"in t}function $p(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[sw])==null?void 0:r.stringValue)===iw}function Kc(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Xi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Kc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Kc(t.arrayValue.values[n]);return e}return{...t}}function QR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===GR}const YR={mapValue:{fields:{[sw]:{stringValue:iw},[fl]:{arrayValue:{}}}}};function t5(t){return"nullValue"in t?Vh:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Ou(Vi.empty(),J.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?$p(t)?YR:{mapValue:{}}:te(35942,{value:t})}function n5(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Ou(Vi.empty(),J.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?YR:"mapValue"in t?$p(t)?{mapValue:{}}:di:te(61959,{value:t})}function NI(t,e){const n=Mi(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function OI(t,e){const n=Mi(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.value=e}static empty(){return new tn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Mh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Kc(n)}setAll(e){let n=rt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Kc(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Mh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Xr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Mh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Xi(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new tn(Kc(this.value))}}function XR(t){const e=[];return Xi(t.fields,(n,r)=>{const s=new rt([n]);if(Mh(r)){const i=XR(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Sn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new mt(e,0,ue.min(),ue.min(),ue.min(),tn.empty(),0)}static newFoundDocument(e,n,r,s){return new mt(e,1,n,ue.min(),r,s,0)}static newNoDocument(e,n){return new mt(e,2,n,ue.min(),ue.min(),tn.empty(),0)}static newUnknownDocument(e,n){return new mt(e,3,n,ue.min(),ue.min(),tn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=tn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(e,n){this.position=e,this.inclusive=n}}function VI(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=J.comparator(J.fromName(o.referenceValue),n.key):r=Mi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function LI(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Xr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e,n="asc"){this.field=e,this.dir=n}}function r5(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{}class ke extends JR{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new s5(e,n,r):n==="array-contains"?new a5(e,r):n==="in"?new sC(e,r):n==="not-in"?new l5(e,r):n==="array-contains-any"?new c5(e,r):new ke(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new i5(e,r):new o5(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Mi(n,this.value)):n!==null&&Li(this.value)===Li(n)&&this.matchesComparison(Mi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Be extends JR{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Be(e,n)}matches(e){return gl(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function gl(t){return t.op==="and"}function nv(t){return t.op==="or"}function ow(t){return ZR(t)&&gl(t)}function ZR(t){for(const e of t.filters)if(e instanceof Be)return!1;return!0}function rv(t){if(t instanceof ke)return t.field.canonicalString()+t.op.toString()+pl(t.value);if(ow(t))return t.filters.map(e=>rv(e)).join(",");{const e=t.filters.map(n=>rv(n)).join(",");return`${t.op}(${e})`}}function eC(t,e){return t instanceof ke?function(r,s){return s instanceof ke&&r.op===s.op&&r.field.isEqual(s.field)&&Xr(r.value,s.value)}(t,e):t instanceof Be?function(r,s){return s instanceof Be&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&eC(o,s.filters[a]),!0):!1}(t,e):void te(19439)}function tC(t,e){const n=t.filters.concat(e);return Be.create(n,t.op)}function nC(t){return t instanceof ke?function(n){return`${n.field.canonicalString()} ${n.op} ${pl(n.value)}`}(t):t instanceof Be?function(n){return n.op.toString()+" {"+n.getFilters().map(nC).join(" ,")+"}"}(t):"Filter"}class s5 extends ke{constructor(e,n,r){super(e,n,r),this.key=J.fromName(r.referenceValue)}matches(e){const n=J.comparator(e.key,this.key);return this.matchesComparison(n)}}class i5 extends ke{constructor(e,n){super(e,"in",n),this.keys=rC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class o5 extends ke{constructor(e,n){super(e,"not-in",n),this.keys=rC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function rC(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>J.fromName(r.referenceValue))}class a5 extends ke{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Vu(n)&&Nu(n.arrayValue,this.value)}}class sC extends ke{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Nu(this.value.arrayValue,n)}}class l5 extends ke{constructor(e,n){super(e,"not-in",n)}matches(e){if(Nu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Nu(this.value.arrayValue,n)}}class c5 extends ke{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Vu(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Nu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u5{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function sv(t,e=null,n=[],r=[],s=null,i=null,o=null){return new u5(t,e,n,r,s,i,o)}function zo(t){const e=re(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>rv(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Mp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>pl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>pl(r)).join(",")),e.Te=n}return e.Te}function sd(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!r5(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!eC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!LI(t.startAt,e.startAt)&&LI(t.endAt,e.endAt)}function Mf(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Ff(t,e){return t.filters.filter(n=>n instanceof ke&&n.field.isEqual(e))}function MI(t,e,n){let r=Vh,s=!0;for(const i of Ff(t,e)){let o=Vh,a=!0;switch(i.op){case"<":case"<=":o=t5(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=Vh}NI({value:r,inclusive:s},{value:o,inclusive:a})<0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];NI({value:r,inclusive:s},{value:o,inclusive:n.inclusive})<0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}function FI(t,e,n){let r=di,s=!0;for(const i of Ff(t,e)){let o=di,a=!0;switch(i.op){case">=":case">":o=n5(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=di}OI({value:r,inclusive:s},{value:o,inclusive:a})>0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];OI({value:r,inclusive:s},{value:o,inclusive:n.inclusive})>0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function iC(t,e,n,r,s,i,o,a){return new Ll(t,e,n,r,s,i,o,a)}function id(t){return new Ll(t)}function UI(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function oC(t){return t.collectionGroup!==null}function Gc(t){const e=re(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ze(rt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Lu(i,r))}),n.has(rt.keyField().canonicalString())||e.Ie.push(new Lu(rt.keyField(),r))}return e.Ie}function zn(t){const e=re(t);return e.Ee||(e.Ee=d5(e,Gc(t))),e.Ee}function d5(t,e){if(t.limitType==="F")return sv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Lu(s.field,i)});const n=t.endAt?new ml(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ml(t.startAt.position,t.startAt.inclusive):null;return sv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function iv(t,e){const n=t.filters.concat([e]);return new Ll(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Uf(t,e,n){return new Ll(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function zp(t,e){return sd(zn(t),zn(e))&&t.limitType===e.limitType}function aC(t){return`${zo(zn(t))}|lt:${t.limitType}`}function ma(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>nC(s)).join(", ")}]`),Mp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>pl(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>pl(s)).join(",")),`Target(${r})`}(zn(t))}; limitType=${t.limitType})`}function od(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):J.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Gc(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=VI(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Gc(r),s)||r.endAt&&!function(o,a,l){const c=VI(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Gc(r),s))}(t,e)}function lC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function cC(t){return(e,n)=>{let r=!1;for(const s of Gc(t)){const i=h5(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function h5(t,e,n){const r=t.field.isKeyField()?J.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?Mi(l,c):te(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return te(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Xi(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return $R(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f5=new Ge(J.comparator);function Un(){return f5}const uC=new Ge(J.comparator);function Pc(...t){let e=uC;for(const n of t)e=e.insert(n.key,n);return e}function dC(t){let e=uC;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Hr(){return Qc()}function hC(){return Qc()}function Qc(){return new Ds(t=>t.toString(),(t,e)=>t.isEqual(e))}const p5=new Ge(J.comparator),m5=new ze(J.comparator);function Ie(...t){let e=m5;for(const n of t)e=e.add(n);return e}const g5=new ze(pe);function aw(){return g5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pu(e)?"-0":e}}function fC(t){return{integerValue:""+t}}function y5(t,e){return kR(e)?fC(e):lw(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(){this._=void 0}}function v5(t,e,n){return t instanceof yl?function(s,i){const o={fields:{[HR]:{stringValue:qR},[KR]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&rw(i)&&(i=Bp(i)),i&&(o.fields[WR]=i),{mapValue:o}}(n,e):t instanceof qo?mC(t,e):t instanceof vl?gC(t,e):function(s,i){const o=pC(s,i),a=jI(o)+jI(s.Ae);return tv(o)&&tv(s.Ae)?fC(a):lw(s.serializer,a)}(t,e)}function _5(t,e,n){return t instanceof qo?mC(t,e):t instanceof vl?gC(t,e):n}function pC(t,e){return t instanceof Mu?function(r){return tv(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class yl extends qp{}class qo extends qp{constructor(e){super(),this.elements=e}}function mC(t,e){const n=yC(e);for(const r of t.elements)n.some(s=>Xr(s,r))||n.push(r);return{arrayValue:{values:n}}}class vl extends qp{constructor(e){super(),this.elements=e}}function gC(t,e){let n=yC(e);for(const r of t.elements)n=n.filter(s=>!Xr(s,r));return{arrayValue:{values:n}}}class Mu extends qp{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function jI(t){return tt(t.integerValue||t.doubleValue)}function yC(t){return Vu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(e,n){this.field=e,this.transform=n}}function w5(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof qo&&s instanceof qo||r instanceof vl&&s instanceof vl?al(r.elements,s.elements,Xr):r instanceof Mu&&s instanceof Mu?Xr(r.Ae,s.Ae):r instanceof yl&&s instanceof yl}(t.transform,e.transform)}class E5{constructor(e,n){this.version=e,this.transformResults=n}}class nn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new nn}static exists(e){return new nn(void 0,e)}static updateTime(e){return new nn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Hp{}function vC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Wp(t.key,nn.none()):new Ml(t.key,t.data,nn.none());{const n=t.data,r=tn.empty();let s=new ze(rt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Ns(t.key,r,new Sn(s.toArray()),nn.none())}}function T5(t,e,n){t instanceof Ml?function(s,i,o){const a=s.value.clone(),l=$I(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ns?function(s,i,o){if(!Fh(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=$I(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(_C(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Yc(t,e,n,r){return t instanceof Ml?function(i,o,a,l){if(!Fh(i.precondition,o))return a;const c=i.value.clone(),d=zI(i.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ns?function(i,o,a,l){if(!Fh(i.precondition,o))return a;const c=zI(i.fieldTransforms,l,o),d=o.data;return d.setAll(_C(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,o,a){return Fh(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function I5(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=pC(r.transform,s||null);i!=null&&(n===null&&(n=tn.empty()),n.set(r.field,i))}return n||null}function BI(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&al(r,s,(i,o)=>w5(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ml extends Hp{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ns extends Hp{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function _C(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function $I(t,e,n){const r=new Map;oe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,_5(o,a,n[s]))}return r}function zI(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,v5(i,o,e))}return r}class Wp extends Hp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wC extends Hp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&T5(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Yc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Yc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=hC();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=vC(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(ue.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ie())}isEqual(e){return this.batchId===e.batchId&&al(this.mutations,e.mutations,(n,r)=>BI(n,r))&&al(this.baseMutations,e.baseMutations,(n,r)=>BI(n,r))}}class dw{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){oe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return p5}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new dw(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S5{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tt,Ve;function b5(t){switch(t){case B.OK:return te(64938);case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0;default:return te(15467,{code:t})}}function EC(t){if(t===void 0)return vt("GRPC error has no .code"),B.UNKNOWN;switch(t){case Tt.OK:return B.OK;case Tt.CANCELLED:return B.CANCELLED;case Tt.UNKNOWN:return B.UNKNOWN;case Tt.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case Tt.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case Tt.INTERNAL:return B.INTERNAL;case Tt.UNAVAILABLE:return B.UNAVAILABLE;case Tt.UNAUTHENTICATED:return B.UNAUTHENTICATED;case Tt.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case Tt.NOT_FOUND:return B.NOT_FOUND;case Tt.ALREADY_EXISTS:return B.ALREADY_EXISTS;case Tt.PERMISSION_DENIED:return B.PERMISSION_DENIED;case Tt.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case Tt.ABORTED:return B.ABORTED;case Tt.OUT_OF_RANGE:return B.OUT_OF_RANGE;case Tt.UNIMPLEMENTED:return B.UNIMPLEMENTED;case Tt.DATA_LOSS:return B.DATA_LOSS;default:return te(39323,{code:t})}}(Ve=Tt||(Tt={}))[Ve.OK=0]="OK",Ve[Ve.CANCELLED=1]="CANCELLED",Ve[Ve.UNKNOWN=2]="UNKNOWN",Ve[Ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ve[Ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ve[Ve.NOT_FOUND=5]="NOT_FOUND",Ve[Ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ve[Ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ve[Ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ve[Ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ve[Ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ve[Ve.ABORTED=10]="ABORTED",Ve[Ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ve[Ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ve[Ve.INTERNAL=13]="INTERNAL",Ve[Ve.UNAVAILABLE=14]="UNAVAILABLE",Ve[Ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A5(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x5=new Si([4294967295,4294967295],0);function qI(t){const e=A5().encode(t),n=new fR;return n.update(e),new Uint8Array(n.digest())}function HI(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Si([n,r],0),new Si([s,i],0)]}class fw{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Rc(`Invalid padding: ${n}`);if(r<0)throw new Rc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Rc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Rc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Si.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Si.fromNumber(r)));return s.compare(x5)===1&&(s=new Si([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=qI(e),[r,s]=HI(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new fw(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=qI(e),[r,s]=HI(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Rc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,ld.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new ad(ue.min(),s,new Ge(pe),Un(),Ie())}}class ld{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ld(r,n,Ie(),Ie(),Ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class TC{constructor(e,n){this.targetId=e,this.Ce=n}}class IC{constructor(e,n,r=gt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class WI{constructor(){this.ve=0,this.Fe=KI(),this.Me=gt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ie(),n=Ie(),r=Ie();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:te(38017,{changeType:i})}}),new ld(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=KI()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,oe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class P5{constructor(e){this.Ge=e,this.ze=new Map,this.je=Un(),this.Je=nh(),this.He=nh(),this.Ye=new Ge(pe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:te(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Mf(i))if(r===0){const o=new J(i.path);this.et(n,o,mt.newNoDocument(o,ue.min()))}else oe(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=xs(r).toUint8Array()}catch(l){if(l instanceof zR)return Oi("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new fw(o,s,i)}catch(l){return Oi(l instanceof Rc?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const a=this.ot(o);if(a){if(i.current&&Mf(a.target)){const l=new J(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,mt.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=Ie();this.He.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new ad(e,n,this.Ye,this.je,r);return this.je=Un(),this.Je=nh(),this.He=nh(),this.Ye=new Ge(pe),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new WI,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new ze(pe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new ze(pe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new WI),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function nh(){return new Ge(J.comparator)}function KI(){return new Ge(J.comparator)}const R5={asc:"ASCENDING",desc:"DESCENDING"},C5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},k5={and:"AND",or:"OR"};class D5{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ov(t,e){return t.useProto3Json||Mp(e)?e:{value:e}}function _l(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function SC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function N5(t,e){return _l(t,e.toTimestamp())}function hn(t){return oe(!!t,49232),ue.fromTimestamp(function(n){const r=As(n);return new je(r.seconds,r.nanos)}(t))}function pw(t,e){return av(t,e).canonicalString()}function av(t,e){const n=function(s){return new Fe(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function bC(t){const e=Fe.fromString(t);return oe(OC(e),10190,{key:e.toString()}),e}function jf(t,e){return pw(t.databaseId,e.path)}function Oo(t,e){const n=bC(e);if(n.get(1)!==t.databaseId.projectId)throw new K(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new J(PC(n))}function AC(t,e){return pw(t.databaseId,e)}function xC(t){const e=bC(t);return e.length===4?Fe.emptyPath():PC(e)}function lv(t){return new Fe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function PC(t){return oe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function GI(t,e,n){return{name:jf(t,e),fields:n.value.mapValue.fields}}function O5(t,e,n){const r=Oo(t,e.name),s=hn(e.updateTime),i=e.createTime?hn(e.createTime):ue.min(),o=new tn({mapValue:{fields:e.fields}}),a=mt.newFoundDocument(r,s,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function V5(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:te(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(oe(d===void 0||typeof d=="string",58123),gt.fromBase64String(d||"")):(oe(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),gt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?B.UNKNOWN:EC(c.code);return new K(d,c.message||"")}(o);n=new IC(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Oo(t,r.document.name),i=hn(r.document.updateTime),o=r.document.createTime?hn(r.document.createTime):ue.min(),a=new tn({mapValue:{fields:r.document.fields}}),l=mt.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new Uh(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Oo(t,r.document),i=r.readTime?hn(r.readTime):ue.min(),o=mt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Uh([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Oo(t,r.document),i=r.removedTargetIds||[];n=new Uh([],i,s,null)}else{if(!("filter"in e))return te(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new S5(s,i),a=r.targetId;n=new TC(a,o)}}return n}function Bf(t,e){let n;if(e instanceof Ml)n={update:GI(t,e.key,e.value)};else if(e instanceof Wp)n={delete:jf(t,e.key)};else if(e instanceof Ns)n={update:GI(t,e.key,e.data),updateMask:B5(e.fieldMask)};else{if(!(e instanceof wC))return te(16599,{Vt:e.type});n={verify:jf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof yl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof qo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof vl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Mu)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw te(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:N5(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:te(27497)}(t,e.precondition)),n}function cv(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?nn.updateTime(hn(i.updateTime)):i.exists!==void 0?nn.exists(i.exists):nn.none()}(e.currentDocument):nn.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(o,a){let l=null;if("setToServerValue"in a)oe(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),l=new yl;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];l=new qo(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];l=new vl(d)}else"increment"in a?l=new Mu(o,a.increment):te(16584,{proto:a});const c=rt.fromServerFormat(a.fieldPath);return new cw(c,l)}(t,s)):[];if(e.update){e.update.name;const s=Oo(t,e.update.name),i=new tn({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const c=l.fieldPaths||[];return new Sn(c.map(d=>rt.fromServerFormat(d)))}(e.updateMask);return new Ns(s,i,o,n,r)}return new Ml(s,i,n,r)}if(e.delete){const s=Oo(t,e.delete);return new Wp(s,n)}if(e.verify){const s=Oo(t,e.verify);return new wC(s,n)}return te(1463,{proto:e})}function L5(t,e){return t&&t.length>0?(oe(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?hn(s.updateTime):hn(i);return o.isEqual(ue.min())&&(o=hn(i)),new E5(o,s.transformResults||[])}(n,e))):[]}function RC(t,e){return{documents:[AC(t,e.path)]}}function CC(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=AC(t,s);const i=function(c){if(c.length!==0)return NC(Be.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(d=>function(p){return{field:ga(p.field),direction:F5(p.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=ov(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:s}}function kC(t){let e=xC(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){oe(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(h){const p=DC(h);return p instanceof Be&&ow(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(p=>function(_){return new Lu(ya(_.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(h){let p;return p=typeof h=="object"?h.value:h,Mp(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(h){const p=!!h.before,f=h.values||[];return new ml(f,p)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const p=!h.before,f=h.values||[];return new ml(f,p)}(n.endAt)),iC(e,s,o,i,a,"F",l,c)}function M5(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function DC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ya(n.unaryFilter.field);return ke.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ya(n.unaryFilter.field);return ke.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ya(n.unaryFilter.field);return ke.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ya(n.unaryFilter.field);return ke.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return te(61313);default:return te(60726)}}(t):t.fieldFilter!==void 0?function(n){return ke.create(ya(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return te(58110);default:return te(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Be.create(n.compositeFilter.filters.map(r=>DC(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return te(1026)}}(n.compositeFilter.op))}(t):te(30097,{filter:t})}function F5(t){return R5[t]}function U5(t){return C5[t]}function j5(t){return k5[t]}function ga(t){return{fieldPath:t.canonicalString()}}function ya(t){return rt.fromServerFormat(t.fieldPath)}function NC(t){return t instanceof ke?function(n){if(n.op==="=="){if(DI(n.value))return{unaryFilter:{field:ga(n.field),op:"IS_NAN"}};if(kI(n.value))return{unaryFilter:{field:ga(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(DI(n.value))return{unaryFilter:{field:ga(n.field),op:"IS_NOT_NAN"}};if(kI(n.value))return{unaryFilter:{field:ga(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ga(n.field),op:U5(n.op),value:n.value}}}(t):t instanceof Be?function(n){const r=n.getFilters().map(s=>NC(s));return r.length===1?r[0]:{compositeFilter:{op:j5(n.op),filters:r}}}(t):te(54877,{filter:t})}function B5(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function OC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e,n,r,s,i=ue.min(),o=ue.min(),a=gt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ds(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ds(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ds(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ds(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e){this.yt=e}}function $5(t,e){let n;if(e.document)n=O5(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=J.fromSegments(e.noDocument.path),s=Wo(e.noDocument.readTime);n=mt.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return te(56709);{const r=J.fromSegments(e.unknownDocument.path),s=Wo(e.unknownDocument.version);n=mt.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime(function(s){const i=new je(s[0],s[1]);return ue.fromTimestamp(i)}(e.readTime)),n}function QI(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:$f(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,o){return{name:jf(i,o.key),fields:o.data.value.mapValue.fields,updateTime:_l(i,o.version.toTimestamp()),createTime:_l(i,o.createTime.toTimestamp())}}(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Ho(e.version)};else{if(!e.isUnknownDocument())return te(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:Ho(e.version)}}return r}function $f(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ho(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Wo(t){const e=new je(t.seconds,t.nanoseconds);return ue.fromTimestamp(e)}function po(t,e){const n=(e.baseMutations||[]).map(i=>cv(t.yt,i));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map(i=>cv(t.yt,i)),s=je.fromMillis(e.localWriteTimeMs);return new uw(e.batchId,s,n,r)}function Cc(t){const e=Wo(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Wo(t.lastLimboFreeSnapshotVersion):ue.min();let r;return r=function(i){return i.documents!==void 0}(t.query)?function(i){const o=i.documents.length;return oe(o===1,1966,{count:o}),zn(id(xC(i.documents[0])))}(t.query):function(i){return zn(kC(i))}(t.query),new ds(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,gt.fromBase64String(t.resumeToken))}function LC(t,e){const n=Ho(e.snapshotVersion),r=Ho(e.lastLimboFreeSnapshotVersion);let s;s=Mf(e.target)?RC(t.yt,e.target):CC(t.yt,e.target).ft;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:zo(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function MC(t){const e=kC({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Uf(e,e.limit,"L"):e}function pg(t,e){return new hw(e.largestBatchId,cv(t.yt,e.overlayMutation))}function YI(t,e){const n=e.path.lastSegment();return[t,rn(e.path.popLast()),n]}function XI(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Ho(r.readTime),documentKey:rn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z5{getBundleMetadata(e,n){return JI(e).get(n).next(r=>{if(r)return function(i){return{id:i.bundleId,createTime:Wo(i.createTime),version:i.version}}(r)})}saveBundleMetadata(e,n){return JI(e).put(function(s){return{bundleId:s.id,createTime:Ho(hn(s.createTime)),version:s.version}}(n))}getNamedQuery(e,n){return ZI(e).get(n).next(r=>{if(r)return function(i){return{name:i.name,query:MC(i.bundledQuery),readTime:Wo(i.readTime)}}(r)})}saveNamedQuery(e,n){return ZI(e).put(function(s){return{name:s.name,readTime:Ho(hn(s.readTime)),bundledQuery:s.bundledQuery}}(n))}}function JI(t){return Dt(t,Fp)}function ZI(t){return Dt(t,Up)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new Kp(e,r)}getOverlay(e,n){return mc(e).get(YI(this.userId,n)).next(r=>r?pg(this.serializer,r):null)}getOverlays(e,n){const r=Hr();return L.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){const s=[];return r.forEach((i,o)=>{const a=new hw(n,o);s.push(this.St(e,a))}),L.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach(o=>s.add(rn(o.getCollectionPath())));const i=[];return s.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(mc(e).Z(Jy,a))}),L.waitFor(i)}getOverlaysForCollection(e,n,r){const s=Hr(),i=rn(n),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return mc(e).J(Jy,o).next(a=>{for(const l of a){const c=pg(this.serializer,l);s.set(c.getKey(),c)}return s})}getOverlaysForCollectionGroup(e,n,r,s){const i=Hr();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return mc(e).ee({index:MR,range:a},(l,c,d)=>{const h=pg(this.serializer,c);i.size()<s||h.largestBatchId===o?(i.set(h.getKey(),h),o=h.largestBatchId):d.done()}).next(()=>i)}St(e,n){return mc(e).put(function(s,i,o){const[a,l,c]=YI(i,o.mutation.key);return{userId:i,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Bf(s.yt,o.mutation)}}(this.serializer,this.userId,n))}}function mc(t){return Dt(t,jp)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q5{bt(e){return Dt(e,tw)}getSessionToken(e){return this.bt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?gt.fromUint8Array(r):gt.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(tt(e.integerValue));else if("doubleValue"in e){const r=tt(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),Pu(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=As(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(xs(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?QR(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):$p(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):te(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const s of Object.keys(r))this.Ot(s,n),this.Ct(r[s],n)}kt(e,n){var o,a;const r=e.fields||{};this.Ft(n,53);const s=fl,i=((a=(o=r[s].arrayValue)==null?void 0:o.values)==null?void 0:a.length)||0;this.Ft(n,15),n.Mt(tt(i)),this.Ot(s,n),this.Ct(r[s],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const s of r)this.Ct(s,n)}Lt(e,n){this.Ft(n,37),J.fromName(e).path.forEach(r=>{this.Ft(n,60),this.Ut(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}mo.Kt=new mo;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ca=255;function H5(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function eS(t){const e=64-function(r){let s=0;for(let i=0;i<8;++i){const o=H5(255&r[i]);if(s+=o,o!==8)break}return s}(t);return Math.ceil(e/8)}class W5{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const s=n.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const s=n.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(e){const n=this.en(e),r=eS(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}nn(e){const n=this.en(e),r=eS(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}rn(){this.sn(ca),this.sn(255)}_n(){this.an(ca),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===ca?(this.sn(ca),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===ca?(this.an(ca),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class K5{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class G5{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class gc{constructor(){this.cn=new W5,this.ln=new K5(this.cn),this.hn=new G5(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e,n,r,s){this.Tn=e,this.In=n,this.En=r,this.dn=s}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new go(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:jh(this.En),directionalValue:jh(this.dn),orderedDocumentKey:jh(n),documentKey:r.path.toArray()}}Vn(e,n,r){const s=this.Rn(e,n,r);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function Ks(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=tS(t.En,e.En),n!==0?n:(n=tS(t.dn,e.dn),n!==0?n:J.comparator(t.In,e.In)))}function tS(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function jh(t){return jP()?function(n){let r="";for(let s=0;s<n.length;s++)r+=String.fromCharCode(n[s]);return r}(t):t}function nS(t){return typeof t!="string"?t:function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(t)}class rS{constructor(e){this.mn=new ze((n,r)=>rt.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(oe(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=Qy(e);if(n!==void 0&&!this.wn(n))return!1;const r=co(e);let s=new Set,i=0,o=0;for(;i<r.length&&this.wn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.mn.size>0){const a=this.mn.getIterator().getNext();if(!s.has(a.field.canonicalString())){const l=r[i];if(!this.Sn(a,l)||!this.bn(this.fn[o++],l))return!1}++i}for(;i<r.length;++i){const a=r[i];if(o>=this.fn.length||!this.bn(this.fn[o++],a))return!1}return!0}Dn(){if(this.pn)return null;let e=new ze(rt.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Dh(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Dh(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Dh(r.field,r.dir==="asc"?0:1)));return new Df(Df.UNKNOWN_ID,this.collectionId,n,xu.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FC(t){var n,r;if(oe(t instanceof ke||t instanceof Be,20012),t instanceof ke){if(t instanceof sC){const s=((r=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:r.map(i=>ke.create(t.field,"==",i)))||[];return Be.create(s,"or")}return t}const e=t.filters.map(s=>FC(s));return Be.create(e,t.op)}function Q5(t){if(t.getFilters().length===0)return[];const e=hv(FC(t));return oe(UC(e),7391),uv(e)||dv(e)?[e]:e.getFilters()}function uv(t){return t instanceof ke}function dv(t){return t instanceof Be&&ow(t)}function UC(t){return uv(t)||dv(t)||function(n){if(n instanceof Be&&nv(n)){for(const r of n.getFilters())if(!uv(r)&&!dv(r))return!1;return!0}return!1}(t)}function hv(t){if(oe(t instanceof ke||t instanceof Be,34018),t instanceof ke)return t;if(t.filters.length===1)return hv(t.filters[0]);const e=t.filters.map(r=>hv(r));let n=Be.create(e,t.op);return n=zf(n),UC(n)?n:(oe(n instanceof Be,64498),oe(gl(n),40251),oe(n.filters.length>1,57927),n.filters.reduce((r,s)=>mw(r,s)))}function mw(t,e){let n;return oe(t instanceof ke||t instanceof Be,38388),oe(e instanceof ke||e instanceof Be,25473),n=t instanceof ke?e instanceof ke?function(s,i){return Be.create([s,i],"and")}(t,e):sS(t,e):e instanceof ke?sS(e,t):function(s,i){if(oe(s.filters.length>0&&i.filters.length>0,48005),gl(s)&&gl(i))return tC(s,i.getFilters());const o=nv(s)?s:i,a=nv(s)?i:s,l=o.filters.map(c=>mw(c,a));return Be.create(l,"or")}(t,e),zf(n)}function sS(t,e){if(gl(e))return tC(e,t.getFilters());{const n=e.filters.map(r=>mw(t,r));return Be.create(n,"or")}}function zf(t){if(oe(t instanceof ke||t instanceof Be,11850),t instanceof ke)return t;const e=t.getFilters();if(e.length===1)return zf(e[0]);if(ZR(t))return t;const n=e.map(s=>zf(s)),r=[];return n.forEach(s=>{s instanceof ke?r.push(s):s instanceof Be&&(s.op===t.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:Be.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y5{constructor(){this.Cn=new gw}addToCollectionParentIndex(e,n){return this.Cn.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(Hn.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(Hn.min())}updateCollectionGroup(e,n,r){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class gw{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new ze(Fe.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ze(Fe.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS="IndexedDbIndexManager",rh=new Uint8Array(0);class X5{constructor(e,n){this.databaseId=n,this.vn=new gw,this.Fn=new Ds(r=>zo(r),(r,s)=>sd(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(()=>{this.vn.add(n)});const i={collectionId:r,parent:rn(s)};return oS(e).put(i)}return L.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[TR(n),""],!1,!0);return oS(e).J(s).next(i=>{for(const o of i){if(o.collectionId!==n)break;r.push(qr(o.parent))}return r})}addFieldIndex(e,n){const r=yc(e),s=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete s.indexId;const i=r.add(s);if(n.indexState){const o=da(e);return i.next(a=>{o.put(XI(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return i.next()}deleteFieldIndex(e,n){const r=yc(e),s=da(e),i=ua(e);return r.delete(n.indexId).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=yc(e),r=ua(e),s=da(e);return n.Z().next(()=>r.Z()).next(()=>s.Z())}createTargetIndexes(e,n){return L.forEach(this.Mn(n),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const i=new rS(r).Dn();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,n){const r=ua(e);let s=!0;const i=new Map;return L.forEach(this.Mn(n),o=>this.xn(e,o).next(a=>{s&&(s=!!a),i.set(o,a)})).next(()=>{if(s){let o=Ie();const a=[];return L.forEach(i,(l,c)=>{H(iS,`Using index ${function(I){return`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map(D=>`${D.fieldPath}:${D.kind}`).join(",")}`}(l)} to execute ${zo(n)}`);const d=function(I,D){const O=Qy(D);if(O===void 0)return null;for(const V of Ff(I,O.fieldPath))switch(V.op){case"array-contains-any":return V.value.arrayValue.values||[];case"array-contains":return[V.value]}return null}(c,l),h=function(I,D){const O=new Map;for(const V of co(D))for(const S of Ff(I,V.fieldPath))switch(S.op){case"==":case"in":O.set(V.fieldPath.canonicalString(),S.value);break;case"not-in":case"!=":return O.set(V.fieldPath.canonicalString(),S.value),Array.from(O.values())}return null}(c,l),p=function(I,D){const O=[];let V=!0;for(const S of co(D)){const T=S.kind===0?MI(I,S.fieldPath,I.startAt):FI(I,S.fieldPath,I.startAt);O.push(T.value),V&&(V=T.inclusive)}return new ml(O,V)}(c,l),f=function(I,D){const O=[];let V=!0;for(const S of co(D)){const T=S.kind===0?FI(I,S.fieldPath,I.endAt):MI(I,S.fieldPath,I.endAt);O.push(T.value),V&&(V=T.inclusive)}return new ml(O,V)}(c,l),_=this.On(l,c,p),y=this.On(l,c,f),E=this.Nn(l,c,h),w=this.Bn(l.indexId,d,_,p.inclusive,y,f.inclusive,E);return L.forEach(w,v=>r.Y(v,n.limit).next(I=>{I.forEach(D=>{const O=J.fromSegments(D.documentKey);o.has(O)||(o=o.add(O),a.push(O))})}))}).next(()=>a)}return L.resolve(null)})}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=Q5(Be.create(e.filters,"and")).map(r=>sv(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,n),n)}Bn(e,n,r,s,i,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,i.length),c=l/(n!=null?n.length:1),d=[];for(let h=0;h<l;++h){const p=n?this.Ln(n[h/c]):rh,f=this.kn(e,p,r[h%c],s),_=this.qn(e,p,i[h%c],o),y=a.map(E=>this.kn(e,p,E,!0));d.push(...this.createRange(f,_,y))}return d}kn(e,n,r,s){const i=new go(e,J.empty(),n,r);return s?i:i.An()}qn(e,n,r,s){const i=new go(e,J.empty(),n,r);return s?i.An():i}xn(e,n){const r=new rS(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let o=null;for(const a of i)r.yn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const s=this.Mn(n);return L.forEach(s,i=>this.xn(e,i).next(o=>{o?r!==0&&o.fields.length<function(l){let c=new ze(rt.comparator),d=!1;for(const h of l.filters)for(const p of h.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?d=!0:c=c.add(p.field));for(const h of l.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(d?1:0)}(i)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&s.length>1&&r===2?1:r)}Qn(e,n){const r=new gc;for(const s of co(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const o=r.Pn(s.kind);mo.Kt.Dt(i,o)}return r.un()}Ln(e){const n=new gc;return mo.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new gc;return mo.Kt.Dt(Ou(this.databaseId,n),r.Pn(function(i){const o=co(i);return o.length===0?0:o[o.length-1].kind}(e))),r.un()}Nn(e,n,r){if(r===null)return[];let s=[];s.push(new gc);let i=0;for(const o of co(e)){const a=r[i++];for(const l of s)if(this.Un(n,o.fieldPath)&&Vu(a))s=this.Kn(s,o,a);else{const c=l.Pn(o.kind);mo.Kt.Dt(a,c)}}return this.Wn(s)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const a of s){const l=new gc;l.seed(a.un()),mo.Kt.Dt(o,l.Pn(n.kind)),i.push(l)}return i}Un(e,n){return!!e.filters.find(r=>r instanceof ke&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=yc(e),s=da(e);return(n?r.J(Xy,IDBKeyRange.bound(n,n)):r.J()).next(i=>{const o=[];return L.forEach(i,a=>s.get([a.indexId,this.uid]).next(l=>{o.push(function(d,h){const p=h?new xu(h.sequenceNumber,new Hn(Wo(h.readTime),new J(qr(h.documentKey)),h.largestBatchId)):xu.empty(),f=d.fields.map(([_,y])=>new Dh(rt.fromServerFormat(_),y));return new Df(d.indexId,d.collectionGroup,f,p)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:pe(r.collectionGroup,s.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const s=yc(e),i=da(e);return this.Gn(e).next(o=>s.J(Xy,IDBKeyRange.bound(n,n)).next(a=>L.forEach(a,l=>i.put(XI(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return L.forEach(n,(s,i)=>{const o=r.get(s.collectionGroup);return(o?L.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next(a=>(r.set(s.collectionGroup,a),L.forEach(a,l=>this.zn(e,s,l).next(c=>{const d=this.jn(i,l);return c.isEqual(d)?L.resolve():this.Jn(e,i,l,c,d)}))))})}Hn(e,n,r,s){return ua(e).put(s.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,s){return ua(e).delete(s.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const s=ua(e);let i=new ze(Ks);return s.ee({index:LR,range:IDBKeyRange.only([r.indexId,this.uid,jh(this.$n(r,n))])},(o,a)=>{i=i.add(new go(r.indexId,n,nS(a.arrayValue),nS(a.directionalValue)))}).next(()=>i)}jn(e,n){let r=new ze(Ks);const s=this.Qn(n,e);if(s==null)return r;const i=Qy(n);if(i!=null){const o=e.data.field(i.fieldPath);if(Vu(o))for(const a of o.arrayValue.values||[])r=r.add(new go(n.indexId,e.key,this.Ln(a),s))}else r=r.add(new go(n.indexId,e.key,rh,s));return r}Jn(e,n,r,s,i){H(iS,"Updating index entries for document '%s'",n.key);const o=[];return function(l,c,d,h,p){const f=l.getIterator(),_=c.getIterator();let y=la(f),E=la(_);for(;y||E;){let w=!1,v=!1;if(y&&E){const I=d(y,E);I<0?v=!0:I>0&&(w=!0)}else y!=null?v=!0:w=!0;w?(h(E),E=la(_)):v?(p(y),y=la(f)):(y=la(f),E=la(_))}}(s,i,Ks,a=>{o.push(this.Hn(e,n,r,a))},a=>{o.push(this.Yn(e,n,r,a))}),L.waitFor(o)}Gn(e){let n=1;return da(e).ee({index:VR,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,i)=>{i.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Ks(o,a)).filter((o,a,l)=>!a||Ks(o,l[a-1])!==0);const s=[];s.push(e);for(const o of r){const a=Ks(o,e),l=Ks(o,n);if(a===0)s[0]=e.An();else if(a>0&&l<0)s.push(o),s.push(o.An());else if(l>0)break}s.push(n);const i=[];for(let o=0;o<s.length;o+=2){if(this.Zn(s[o],s[o+1]))return[];const a=s[o].Vn(this.uid,rh,J.empty()),l=s[o+1].Vn(this.uid,rh,J.empty());i.push(IDBKeyRange.bound(a,l))}return i}Zn(e,n){return Ks(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(aS)}getMinOffset(e,n){return L.mapArray(this.Mn(n),r=>this.xn(e,r).next(s=>s||te(44426))).next(aS)}}function oS(t){return Dt(t,ku)}function ua(t){return Dt(t,Wc)}function yc(t){return Dt(t,ew)}function da(t){return Dt(t,Hc)}function aS(t){oe(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;X_(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new Hn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},jC=41943040;class Zt{static withCacheSize(e){return new Zt(e,Zt.DEFAULT_COLLECTION_PERCENTILE,Zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BC(t,e,n){const r=t.store(mr),s=t.store(cl),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.ee({range:o},(d,h,p)=>(a++,p.delete()));i.push(l.next(()=>{oe(a===1,47070,{batchId:n.batchId})}));const c=[];for(const d of n.mutations){const h=DR(e,d.key.path,n.batchId);i.push(s.delete(h)),c.push(d.key)}return L.waitFor(i).next(()=>c)}function qf(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw te(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zt.DEFAULT_COLLECTION_PERCENTILE=10,Zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zt.DEFAULT=new Zt(jC,Zt.DEFAULT_COLLECTION_PERCENTILE,Zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zt.DISABLED=new Zt(-1,0,0);class Gp{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.Xn={}}static wt(e,n,r,s){oe(e.uid!=="",64387);const i=e.isAuthenticated()?e.uid:"";return new Gp(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Gs(e).ee({index:To,range:r},(s,i,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,s){const i=va(e),o=Gs(e);return o.add({}).next(a=>{oe(typeof a=="number",49019);const l=new uw(a,n,r,s),c=function(f,_,y){const E=y.baseMutations.map(v=>Bf(f.yt,v)),w=y.mutations.map(v=>Bf(f.yt,v));return{userId:_,batchId:y.batchId,localWriteTimeMs:y.localWriteTime.toMillis(),baseMutations:E,mutations:w}}(this.serializer,this.userId,l),d=[];let h=new ze((p,f)=>pe(p.canonicalString(),f.canonicalString()));for(const p of s){const f=DR(this.userId,p.key.path,a);h=h.add(p.key.path.popLast()),d.push(o.put(c)),d.push(i.put(f,Rj))}return h.forEach(p=>{d.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.Xn[a]=l.keys()}),L.waitFor(d).next(()=>l)})}lookupMutationBatch(e,n){return Gs(e).get(n).next(r=>r?(oe(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),po(this.serializer,r)):null)}er(e,n){return this.Xn[n]?L.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const s=r.keys();return this.Xn[n]=s,s}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return Gs(e).ee({index:To,range:s},(o,a,l)=>{a.userId===this.userId&&(oe(a.batchId>=r,47524,{tr:r}),i=po(this.serializer,a)),l.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Do;return Gs(e).ee({index:To,range:n,reverse:!0},(s,i,o)=>{r=i.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,Do],[this.userId,Number.POSITIVE_INFINITY]);return Gs(e).J(To,n).next(r=>r.map(s=>po(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Nh(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return va(e).ee({range:s},(o,a,l)=>{const[c,d,h]=o,p=qr(d);if(c===this.userId&&n.path.isEqual(p))return Gs(e).get(h).next(f=>{if(!f)throw te(61480,{nr:o,batchId:h});oe(f.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:f.userId,batchId:h}),i.push(po(this.serializer,f))});l.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ze(pe);const s=[];return n.forEach(i=>{const o=Nh(this.userId,i.path),a=IDBKeyRange.lowerBound(o),l=va(e).ee({range:a},(c,d,h)=>{const[p,f,_]=c,y=qr(f);p===this.userId&&i.path.isEqual(y)?r=r.add(_):h.done()});s.push(l)}),L.waitFor(s).next(()=>this.rr(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=Nh(this.userId,r),o=IDBKeyRange.lowerBound(i);let a=new ze(pe);return va(e).ee({range:o},(l,c,d)=>{const[h,p,f]=l,_=qr(p);h===this.userId&&r.isPrefixOf(_)?_.length===s&&(a=a.add(f)):d.done()}).next(()=>this.rr(e,a))}rr(e,n){const r=[],s=[];return n.forEach(i=>{s.push(Gs(e).get(i).next(o=>{if(o===null)throw te(35274,{batchId:i});oe(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:i}),r.push(po(this.serializer,o))}))}),L.waitFor(s).next(()=>r)}removeMutationBatch(e,n){return BC(e.le,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.ir(n.batchId)}),L.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return L.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),s=[];return va(e).ee({range:r},(i,o,a)=>{if(i[0]===this.userId){const l=qr(i[1]);s.push(l)}else a.done()}).next(()=>{oe(s.length===0,56720,{sr:s.map(i=>i.canonicalString())})})})}containsKey(e,n){return $C(e,this.userId,n)}_r(e){return zC(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:Do,lastStreamToken:""})}}function $C(t,e,n){const r=Nh(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return va(t).ee({range:i,X:!0},(a,l,c)=>{const[d,h,p]=a;d===e&&h===s&&(o=!0),c.done()}).next(()=>o)}function Gs(t){return Dt(t,mr)}function va(t){return Dt(t,cl)}function zC(t){return Dt(t,Ru)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ko(0)}static cr(){return new Ko(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J5{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next(n=>{const r=new Ko(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(n=>ue.fromTimestamp(new je(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.lr(e).next(s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.hr(e,s)))}addTargetData(e,n){return this.Pr(e,n).next(()=>this.lr(e).next(r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>ha(e).delete(n.targetId)).next(()=>this.lr(e)).next(r=>(oe(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r)))}removeTargets(e,n,r){let s=0;const i=[];return ha(e).ee((o,a)=>{const l=Cc(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(s++,i.push(this.removeTargetData(e,l)))}).next(()=>L.waitFor(i)).next(()=>s)}forEachTarget(e,n){return ha(e).ee((r,s)=>{const i=Cc(s);n(i)})}lr(e){return cS(e).get(Vf).next(n=>(oe(n!==null,2888),n))}hr(e,n){return cS(e).put(Vf,n)}Pr(e,n){return ha(e).put(LC(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next(n=>n.targetCount)}getTargetData(e,n){const r=zo(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return ha(e).ee({range:s,index:OR},(o,a,l)=>{const c=Cc(a);sd(n,c.target)&&(i=c,l.done())}).next(()=>i)}addMatchingKeys(e,n,r){const s=[],i=ti(e);return n.forEach(o=>{const a=rn(o.path);s.push(i.put({targetId:r,path:a})),s.push(this.referenceDelegate.addReference(e,r,o))}),L.waitFor(s)}removeMatchingKeys(e,n,r){const s=ti(e);return L.forEach(n,i=>{const o=rn(i.path);return L.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])})}removeMatchingKeysForTargetId(e,n){const r=ti(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=ti(e);let i=Ie();return s.ee({range:r,X:!0},(o,a,l)=>{const c=qr(o[1]),d=new J(c);i=i.add(d)}).next(()=>i)}containsKey(e,n){const r=rn(n.path),s=IDBKeyRange.bound([r],[TR(r)],!1,!0);let i=0;return ti(e).ee({index:Z_,X:!0,range:s},([o,a],l,c)=>{o!==0&&(i++,c.done())}).next(()=>i>0)}At(e,n){return ha(e).get(n).next(r=>r?Cc(r):null)}}function ha(t){return Dt(t,ul)}function cS(t){return Dt(t,No)}function ti(t){return Dt(t,dl)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS="LruGarbageCollector",qC=1048576;function dS([t,e],[n,r]){const s=pe(t,n);return s===0?pe(e,r):s}class Z5{constructor(e){this.Ir=e,this.buffer=new ze(dS),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();dS(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class HC{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){H(uS,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Yi(n)?H(uS,"Ignoring IndexedDB error during garbage collection: ",n):await Qi(n)}await this.Vr(3e5)})}}class eB{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return L.resolve(In.ce);const r=new Z5(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(lS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),lS):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,a,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,o=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(i=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),pa()<=Pe.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:h})))}}function WC(t,e){return new eB(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tB{constructor(e,n){this.db=e,this.garbageCollector=WC(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,(r,s)=>n(s))}addReference(e,n,r){return sh(e,r)}removeReference(e,n,r){return sh(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return sh(e,n)}br(e,n){return function(s,i){let o=!1;return zC(s).te(a=>$C(s,a,i).next(l=>(l&&(o=!0),L.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.Sr(e,(o,a)=>{if(a<=n){const l=this.br(e,o).next(c=>{if(!c)return i++,r.getEntry(e,o).next(()=>(r.removeEntry(o,ue.min()),ti(e).delete(function(h){return[0,rn(h.path)]}(o))))});s.push(l)}}).next(()=>L.waitFor(s)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return sh(e,n)}Sr(e,n){const r=ti(e);let s,i=In.ce;return r.ee({index:Z_},([o,a],{path:l,sequenceNumber:c})=>{o===0?(i!==In.ce&&n(new J(qr(s)),i),i=c,s=l):i=In.ce}).next(()=>{i!==In.ce&&n(new J(qr(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function sh(t,e){return ti(t).put(function(r,s){return{targetId:0,path:rn(r.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(){this.changes=new Ds(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,mt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nB{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return io(e).put(r)}removeEntry(e,n,r){return io(e).delete(function(i,o){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],$f(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Dr(e,r)))}getEntry(e,n){let r=mt.newInvalidDocument(n);return io(e).ee({index:Oh,range:IDBKeyRange.only(vc(n))},(s,i)=>{r=this.Cr(n,i)}).next(()=>r)}vr(e,n){let r={size:0,document:mt.newInvalidDocument(n)};return io(e).ee({index:Oh,range:IDBKeyRange.only(vc(n))},(s,i)=>{r={document:this.Cr(n,i),size:qf(i)}}).next(()=>r)}getEntries(e,n){let r=Un();return this.Fr(e,n,(s,i)=>{const o=this.Cr(s,i);r=r.insert(s,o)}).next(()=>r)}Mr(e,n){let r=Un(),s=new Ge(J.comparator);return this.Fr(e,n,(i,o)=>{const a=this.Cr(i,o);r=r.insert(i,a),s=s.insert(i,qf(o))}).next(()=>({documents:r,Or:s}))}Fr(e,n,r){if(n.isEmpty())return L.resolve();let s=new ze(pS);n.forEach(l=>s=s.add(l));const i=IDBKeyRange.bound(vc(s.first()),vc(s.last())),o=s.getIterator();let a=o.getNext();return io(e).ee({index:Oh,range:i},(l,c,d)=>{const h=J.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&pS(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?d.j(vc(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,s,i){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),$f(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return io(e).J(IDBKeyRange.bound(a,l,!0)).next(c=>{i==null||i.incrementDocumentReadCount(c.length);let d=Un();for(const h of c){const p=this.Cr(J.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);p.isFoundDocument()&&(od(n,p)||s.has(p.key))&&(d=d.insert(p.key,p))}return d})}getAllFromCollectionGroup(e,n,r,s){let i=Un();const o=fS(n,r),a=fS(n,Hn.max());return io(e).ee({index:NR,range:IDBKeyRange.bound(o,a,!0)},(l,c,d)=>{const h=this.Cr(J.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);i=i.insert(h.key,h),i.size===s&&d.done()}).next(()=>i)}newChangeBuffer(e){return new rB(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return hS(e).get(Yy).next(n=>(oe(!!n,20021),n))}Dr(e,n){return hS(e).put(Yy,n)}Cr(e,n){if(n){const r=$5(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(ue.min())))return r}return mt.newInvalidDocument(e)}}function GC(t){return new nB(t)}class rB extends KC{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new Ds(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const n=[];let r=0,s=new ze((i,o)=>pe(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const a=this.Br.get(i);if(n.push(this.Nr.removeEntry(e,i,a.readTime)),o.isValidDocument()){const l=QI(this.Nr.serializer,o);s=s.add(i.path.popLast());const c=qf(l);r+=c-a.size,n.push(this.Nr.addEntry(e,i,l))}else if(r-=a.size,this.trackRemovals){const l=QI(this.Nr.serializer,o.convertToNoDocument(ue.min()));n.push(this.Nr.addEntry(e,i,l))}}),s.forEach(i=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,i))}),n.push(this.Nr.updateMetadata(e,r)),L.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next(r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next(({documents:r,Or:s})=>(s.forEach((i,o)=>{this.Br.set(i,{size:o,readTime:r.get(i).readTime})}),r))}}function hS(t){return Dt(t,Cu)}function io(t){return Dt(t,Of)}function vc(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function fS(t,e){const n=e.documentKey.path.toArray();return[t,$f(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function pS(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=pe(n[i],r[i]),s)return s;return s=pe(n.length,r.length),s||(s=pe(n[n.length-2],r[r.length-2]),s||pe(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sB{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Yc(r.mutation,s,Sn.empty(),je.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ie()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ie()){const s=Hr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Pc();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Hr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ie()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Un();const o=Qc(),a=function(){return Qc()}();return n.forEach((l,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof Ns)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),Yc(d.mutation,c,d.mutation.getFieldMask(),je.now())):o.set(c.key,Sn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>a.set(c,new sB(d,o.get(c)??null))),a))}recalculateAndSaveOverlays(e,n){const r=Qc();let s=new Ge((o,a)=>o-a),i=Ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||Sn.empty();d=a.applyToLocalView(c,d),r.set(l,d);const h=(s.get(a.batchId)||Ie()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,h=hC();d.forEach(p=>{if(!i.has(p)){const f=vC(n.get(p),r.get(p));f!==null&&h.set(p,f),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return L.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return J.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):oC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):L.resolve(Hr());let a=ll,l=i;return o.next(c=>L.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(d)?L.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{l=l.insert(d,p)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,Ie())).next(d=>({batchId:a,changes:dC(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new J(n)).next(r=>{let s=Pc();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Pc();return this.indexManager.getCollectionParents(e,i).next(a=>L.forEach(a,l=>{const c=function(h,p){return new Ll(p,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(d=>{d.forEach((h,p)=>{o=o.insert(h,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,mt.newInvalidDocument(d)))});let a=Pc();return o.forEach((l,c)=>{const d=i.get(l);d!==void 0&&Yc(d.mutation,c,Sn.empty(),je.now()),od(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iB{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return L.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:hn(s.createTime)}}(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:MC(s.bundledQuery),readTime:hn(s.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oB{constructor(){this.overlays=new Ge(J.comparator),this.qr=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Hr();return L.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),L.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),L.resolve()}getOverlaysForCollection(e,n,r){const s=Hr(),i=n.length+1,o=new J(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return L.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ge((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=Hr(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=Hr(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return L.resolve(a)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new hw(n,r));let i=this.qr.get(n);i===void 0&&(i=Ie(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aB{constructor(){this.sessionToken=gt.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(){this.Qr=new ze(Ft.$r),this.Ur=new ze(Ft.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Ft(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Ft(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new J(new Fe([])),r=new Ft(n,e),s=new Ft(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new J(new Fe([])),r=new Ft(n,e),s=new Ft(n,e+1);let i=Ie();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ft(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ft{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return J.comparator(e.key,n.key)||pe(e.Yr,n.Yr)}static Kr(e,n){return pe(e.Yr,n.Yr)||J.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lB{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ze(Ft.$r)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new uw(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Zr=this.Zr.add(new Ft(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return L.resolve(o)}lookupMutationBatch(e,n){return L.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return L.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?Do:this.tr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ft(n,0),s=new Ft(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const a=this.Xr(o.Yr);i.push(a)}),L.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ze(pe);return n.forEach(s=>{const i=new Ft(s,0),o=new Ft(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],a=>{r=r.add(a.Yr)})}),L.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;J.isDocumentKey(i)||(i=i.child(""));const o=new Ft(new J(i),0);let a=new ze(pe);return this.Zr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.Yr)),!0)},o),L.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){oe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return L.forEach(n.mutations,s=>{const i=new Ft(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Ft(n,0),s=this.Zr.firstAfterOrEqual(r);return L.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cB{constructor(e){this.ri=e,this.docs=function(){return new Ge(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():mt.newInvalidDocument(n))}getEntries(e,n){let r=Un();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():mt.newInvalidDocument(s))}),L.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Un();const o=n.path,a=new J(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||X_(xR(d),r)<=0||(s.has(d.key)||od(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return L.resolve(i)}getAllFromCollectionGroup(e,n,r,s){te(9500)}ii(e,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new uB(this)}getSize(e){return L.resolve(this.size)}}class uB extends KC{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),L.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dB{constructor(e){this.persistence=e,this.si=new Ds(n=>zo(n),sd),this.lastRemoteSnapshotVersion=ue.min(),this.highestTargetId=0,this.oi=0,this._i=new yw,this.targetCount=0,this.ai=Ko.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),L.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Ko(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.Pr(n),L.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),L.waitFor(i).next(()=>s)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return L.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),L.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),L.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),L.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return L.resolve(r)}containsKey(e,n){return L.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(e,n){this.ui={},this.overlays={},this.ci=new In(0),this.li=!1,this.li=!0,this.hi=new aB,this.referenceDelegate=e(this),this.Pi=new dB(this),this.indexManager=new Y5,this.remoteDocumentCache=function(s){return new cB(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new VC(n),this.Ii=new iB(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new oB,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new lB(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){H("MemoryPersistence","Starting transaction:",e);const s=new hB(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return L.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class hB extends RR{constructor(e){super(),this.currentSequenceNumber=e}}class Qp{constructor(e){this.persistence=e,this.Ri=new yw,this.Vi=null}static mi(e){return new Qp(e)}get fi(){if(this.Vi)return this.Vi;throw te(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),L.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),L.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.fi,r=>{const s=J.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,ue.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return L.or([()=>L.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Hf{constructor(e,n){this.persistence=e,this.pi=new Ds(r=>rn(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=WC(this,n)}static mi(e,n){return new Hf(e,n)}Ei(){}di(e){return L.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return L.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?L.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,i.removeEntry(o,ue.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),L.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),L.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Lh(e.data.value)),n}br(e,n,r){return L.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return L.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fB{constructor(e){this.serializer=e}k(e,n,r,s){const i=new Lp("createOrUpgrade",n);r<1&&s>=1&&(function(l){l.createObjectStore(rd)}(e),function(l){l.createObjectStore(Ru,{keyPath:Pj}),l.createObjectStore(mr,{keyPath:bI,autoIncrement:!0}).createIndex(To,AI,{unique:!0}),l.createObjectStore(cl)}(e),mS(e),function(l){l.createObjectStore(uo)}(e));let o=L.resolve();return r<3&&s>=3&&(r!==0&&(function(l){l.deleteObjectStore(dl),l.deleteObjectStore(ul),l.deleteObjectStore(No)}(e),mS(e)),o=o.next(()=>function(l){const c=l.store(No),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ue.min().toTimestamp(),targetCount:0};return c.put(Vf,d)}(i))),r<4&&s>=4&&(r!==0&&(o=o.next(()=>function(l,c){return c.store(mr).J().next(h=>{l.deleteObjectStore(mr),l.createObjectStore(mr,{keyPath:bI,autoIncrement:!0}).createIndex(To,AI,{unique:!0});const p=c.store(mr),f=h.map(_=>p.put(_));return L.waitFor(f)})}(e,i))),o=o.next(()=>{(function(l){l.createObjectStore(hl,{keyPath:Mj})})(e)})),r<5&&s>=5&&(o=o.next(()=>this.yi(i))),r<6&&s>=6&&(o=o.next(()=>(function(l){l.createObjectStore(Cu)}(e),this.wi(i)))),r<7&&s>=7&&(o=o.next(()=>this.Si(i))),r<8&&s>=8&&(o=o.next(()=>this.bi(e,i))),r<9&&s>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(o=o.next(()=>this.Di(i))),r<11&&s>=11&&(o=o.next(()=>{(function(l){l.createObjectStore(Fp,{keyPath:Fj})})(e),function(l){l.createObjectStore(Up,{keyPath:Uj})}(e)})),r<12&&s>=12&&(o=o.next(()=>{(function(l){const c=l.createObjectStore(jp,{keyPath:Wj});c.createIndex(Jy,Kj,{unique:!1}),c.createIndex(MR,Gj,{unique:!1})})(e)})),r<13&&s>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore(Of,{keyPath:Cj});c.createIndex(Oh,kj),c.createIndex(NR,Dj)}(e)).next(()=>this.Ci(e,i)).next(()=>e.deleteObjectStore(uo))),r<14&&s>=14&&(o=o.next(()=>this.Fi(e,i))),r<15&&s>=15&&(o=o.next(()=>function(l){l.createObjectStore(ew,{keyPath:jj,autoIncrement:!0}).createIndex(Xy,Bj,{unique:!1}),l.createObjectStore(Hc,{keyPath:$j}).createIndex(VR,zj,{unique:!1}),l.createObjectStore(Wc,{keyPath:qj}).createIndex(LR,Hj,{unique:!1})}(e))),r<16&&s>=16&&(o=o.next(()=>{n.objectStore(Hc).clear()}).next(()=>{n.objectStore(Wc).clear()})),r<17&&s>=17&&(o=o.next(()=>{(function(l){l.createObjectStore(tw,{keyPath:Qj})})(e)})),r<18&&s>=18&&jP()&&(o=o.next(()=>{n.objectStore(Hc).clear()}).next(()=>{n.objectStore(Wc).clear()})),o}wi(e){let n=0;return e.store(uo).ee((r,s)=>{n+=qf(s)}).next(()=>{const r={byteSize:n};return e.store(Cu).put(Yy,r)})}yi(e){const n=e.store(Ru),r=e.store(mr);return n.J().next(s=>L.forEach(s,i=>{const o=IDBKeyRange.bound([i.userId,Do],[i.userId,i.lastAcknowledgedBatchId]);return r.J(To,o).next(a=>L.forEach(a,l=>{oe(l.userId===i.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const c=po(this.serializer,l);return BC(e,i.userId,c).next(()=>{})}))}))}Si(e){const n=e.store(dl),r=e.store(uo);return e.store(No).get(Vf).next(s=>{const i=[];return r.ee((o,a)=>{const l=new Fe(o),c=function(h){return[0,rn(h)]}(l);i.push(n.get(c).next(d=>d?L.resolve():(h=>n.put({targetId:0,path:rn(h),sequenceNumber:s.highestListenSequenceNumber}))(l)))}).next(()=>L.waitFor(i))})}bi(e,n){e.createObjectStore(ku,{keyPath:Lj});const r=n.store(ku),s=new gw,i=o=>{if(s.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:rn(l)})}};return n.store(uo).ee({X:!0},(o,a)=>{const l=new Fe(o);return i(l.popLast())}).next(()=>n.store(cl).ee({X:!0},([o,a,l],c)=>{const d=qr(a);return i(d.popLast())}))}Di(e){const n=e.store(ul);return n.ee((r,s)=>{const i=Cc(s),o=LC(this.serializer,i);return n.put(o)})}Ci(e,n){const r=n.store(uo),s=[];return r.ee((i,o)=>{const a=n.store(Of),l=function(h){return h.document?new J(Fe.fromString(h.document.name).popFirst(5)):h.noDocument?J.fromSegments(h.noDocument.path):h.unknownDocument?J.fromSegments(h.unknownDocument.path):te(36783)}(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(c))}).next(()=>L.waitFor(s))}Fi(e,n){const r=n.store(mr),s=GC(this.serializer),i=new vw(Qp.mi,this.serializer.yt);return r.J().next(o=>{const a=new Map;return o.forEach(l=>{let c=a.get(l.userId)??Ie();po(this.serializer,l).keys().forEach(d=>c=c.add(d)),a.set(l.userId,c)}),L.forEach(a,(l,c)=>{const d=new Jt(c),h=Kp.wt(this.serializer,d),p=i.getIndexManager(d),f=Gp.wt(d,this.serializer,p,i.referenceDelegate);return new QC(s,f,h,p).recalculateAndSaveOverlaysForDocumentKeys(new Zy(n,In.ce),l).next()})})}}function mS(t){t.createObjectStore(dl,{keyPath:Oj}).createIndex(Z_,Vj,{unique:!0}),t.createObjectStore(ul,{keyPath:"targetId"}).createIndex(OR,Nj,{unique:!0}),t.createObjectStore(No)}const Qs="IndexedDbPersistence",mg=18e5,gg=5e3,yg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",pB="main";class _w{constructor(e,n,r,s,i,o,a,l,c,d,h=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=i,this.window=o,this.document=a,this.xi=c,this.Oi=d,this.Ni=h,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=p=>Promise.resolve(),!_w.v())throw new K(B.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new tB(this,s),this.$i=n+pB,this.serializer=new VC(l),this.Ui=new bi(this.$i,this.Ni,new fB(this.serializer)),this.hi=new q5,this.Pi=new J5(this.referenceDelegate,this.serializer),this.remoteDocumentCache=GC(this.serializer),this.Ii=new z5,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,d===!1&&vt(Qs,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new K(B.FAILED_PRECONDITION,yg);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new In(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ih(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(n=>this.isPrimary&&!n?this.Zi(e).next(()=>!1):!!n&&this.Xi(e).next(()=>!0))).catch(e=>{if(Yi(e))return H(Qs,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return H(Qs,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return _c(e).get(aa).next(n=>L.resolve(this.es(n)))}ts(e){return ih(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,mg)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Dt(n,hl);return r.J().next(s=>{const i=this.ss(s,mg),o=s.filter(a=>i.indexOf(a)===-1);return L.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?L.resolve(!0):_c(e).get(aa).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,gg)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new K(B.FAILED_PRECONDITION,yg);return!1}}return!(!this.networkEnabled||!this.inForeground)||ih(e).J().next(r=>this.ss(r,gg).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(i||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&H(Qs,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[rd,hl],e=>{const n=new Zy(e,In.ce);return this.Zi(n).next(()=>this.ts(n))}),this.Ui.close(),this.Ps()}ss(e,n){return e.filter(r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>ih(e).J().next(n=>this.ss(n,mg).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return Gp.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new X5(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Kp.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){H(Qs,"Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=function(l){return l===18?Jj:l===17?BR:l===16?Xj:l===15?nw:l===14?jR:l===13?UR:l===12?Yj:l===11?FR:void te(60245)}(this.Ni);let o;return this.Ui.runTransaction(e,s,i,a=>(o=new Zy(a,this.ci?this.ci.next():In.ce),n==="readwrite-primary"?this.Hi(o).next(l=>!!l||this.Yi(o)).next(l=>{if(!l)throw vt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new K(B.FAILED_PRECONDITION,PR);return r(o)}).next(l=>this.Xi(o).next(()=>l)):this.Is(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Is(e){return _c(e).get(aa).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,gg)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new K(B.FAILED_PRECONDITION,yg)})}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return _c(e).put(aa,n)}static v(){return bi.v()}Zi(e){const n=_c(e);return n.get(aa).next(r=>this.es(r)?(H(Qs,"Releasing primary lease."),n.delete(aa)):L.resolve())}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(vt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;UP()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const r=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return H(Qs,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return vt(Qs,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){vt("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function _c(t){return Dt(t,rd)}function ih(t){return Dt(t,hl)}function YC(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Ie(),s=Ie();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new ww(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mB{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return UP()?8:CR(Wt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new mB;return this.Ss(e,n,o).next(a=>{if(i.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(pa()<=Pe.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",ma(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),L.resolve()):(pa()<=Pe.DEBUG&&H("QueryEngine","Query:",ma(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(pa()<=Pe.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",ma(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zn(n))):L.resolve())}ys(e,n){if(UI(n))return L.resolve(null);let r=zn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Uf(n,null,"F"),r=zn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Ie(...i);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Ds(n,a);return this.Cs(n,c,o,l.readTime)?this.ys(e,Uf(n,null,"F")):this.vs(e,c,n,l)}))})))}ws(e,n,r,s){return UI(n)||s.isEqual(ue.min())?L.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?L.resolve(null):(pa()<=Pe.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ma(n)),this.vs(e,o,n,AR(s,ll)).next(a=>a))})}Ds(e,n){let r=new ze(cC(e));return n.forEach((s,i)=>{od(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return pa()<=Pe.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",ma(n)),this.ps.getDocumentsMatchingQuery(e,n,Hn.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew="LocalStore",gB=3e8;class yB{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Ge(pe),this.xs=new Ds(i=>zo(i),sd),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new QC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function JC(t,e,n,r){return new yB(t,e,n,r)}async function ZC(t,e){const n=re(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=Ie();for(const c of s){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Ls:c,removedBatchIds:o,addedBatchIds:a}))})})}function vB(t,e){const n=re(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const h=c.batch,p=h.keys();let f=L.resolve();return p.forEach(_=>{f=f.next(()=>d.getEntry(l,_)).next(y=>{const E=c.docVersions.get(_);oe(E!==null,48541),y.version.compareTo(E)<0&&(h.applyToRemoteDocument(y,c),y.isValidDocument()&&(y.setReadTime(c.commitVersion),d.addEntry(y)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Ie();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function ek(t){const e=re(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function _B(t,e){const n=re(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const a=[];e.targetChanges.forEach((d,h)=>{const p=s.get(h);if(!p)return;a.push(n.Pi.removeMatchingKeys(i,d.removedDocuments,h).next(()=>n.Pi.addMatchingKeys(i,d.addedDocuments,h)));let f=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?f=f.withResumeToken(gt.EMPTY_BYTE_STRING,ue.min()).withLastLimboFreeSnapshotVersion(ue.min()):d.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(d.resumeToken,r)),s=s.insert(h,f),function(y,E,w){return y.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=gB?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(p,f,d)&&a.push(n.Pi.updateTargetData(i,f))});let l=Un(),c=Ie();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(wB(i,o,e.documentUpdates).next(d=>{l=d.ks,c=d.qs})),!r.isEqual(ue.min())){const d=n.Pi.getLastRemoteSnapshotVersion(i).next(h=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return L.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.Ms=s,i))}function wB(t,e,n){let r=Ie(),s=Ie();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Un();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(ue.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):H(Ew,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{ks:o,qs:s}})}function EB(t,e){const n=re(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Do),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Wf(t,e){const n=re(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,L.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new ds(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function wl(t,e,n){const r=re(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Yi(o))throw o;H(Ew,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function Kf(t,e,n){const r=re(t);let s=ue.min(),i=Ie();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const h=re(l),p=h.xs.get(d);return p!==void 0?L.resolve(h.Ms.get(p)):h.Pi.getTargetData(c,d)}(r,o,zn(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:ue.min(),n?i:Ie())).next(a=>(rk(r,lC(e),a),{documents:a,Qs:i})))}function tk(t,e){const n=re(t),r=re(n.Pi),s=n.Ms.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",i=>r.At(i,e).next(o=>o?o.target:null))}function nk(t,e){const n=re(t),r=n.Os.get(e)||ue.min();return n.persistence.runTransaction("Get new document changes","readonly",s=>n.Ns.getAllFromCollectionGroup(s,e,AR(r,ll),Number.MAX_SAFE_INTEGER)).then(s=>(rk(n,e,s),s))}function rk(t,e,n){let r=t.Os.get(e)||ue.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk="firestore_clients";function gS(t,e){return`${sk}_${t}_${e}`}const ik="firestore_mutations";function yS(t,e,n){let r=`${ik}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const ok="firestore_targets";function vg(t,e){return`${ok}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br="SharedClientState";class Gf{constructor(e,n,r,s){this.user=e,this.batchId=n,this.state=r,this.error=s}static Ws(e,n,r){const s=JSON.parse(r);let i,o=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return o&&s.error&&(o=typeof s.error.message=="string"&&typeof s.error.code=="string",o&&(i=new K(s.error.code,s.error.message))),o?new Gf(e,n,s.state,i):(vt(Br,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Xc{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ws(e,n){const r=JSON.parse(n);let s,i=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return i&&r.error&&(i=typeof r.error.message=="string"&&typeof r.error.code=="string",i&&(s=new K(r.error.code,r.error.message))),i?new Xc(e,r.state,s):(vt(Br,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Qf{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const r=JSON.parse(n);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,i=aw();for(let o=0;s&&o<r.activeTargetIds.length;++o)s=kR(r.activeTargetIds[o]),i=i.add(r.activeTargetIds[o]);return s?new Qf(e,i):(vt(Br,`Failed to parse client data for instance '${e}': ${n}`),null)}}class Tw{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new Tw(n.clientId,n.onlineState):(vt(Br,`Failed to parse online state: ${e}`),null)}}class fv{constructor(){this.activeTargetIds=aw()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _g{constructor(e,n,r,s,i){this.window=e,this.Mi=n,this.persistenceKey=r,this.Js=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Ge(pe),this.started=!1,this.Xs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.eo=gS(this.persistenceKey,this.Js),this.no=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new fv),this.ro=new RegExp(`^${sk}_${o}_([^_]*)$`),this.io=new RegExp(`^${ik}_${o}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${ok}_${o}_(\\d+)$`),this.oo=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this._o=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const s=this.getItem(gS(this.persistenceKey,r));if(s){const i=Qf.Ws(r,s);i&&(this.Zs=this.Zs.insert(i.clientId,i))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const r=this.uo(n);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach((r,s)=>{s.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,r){this.ho(e,n,r),this.Po(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(vg(this.persistenceKey,e));if(s){const i=Xc.Ws(e,s);i&&(r=i.state)}}return n&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(vg(this.persistenceKey,e))}updateQueryState(e,n,r){this.Io(e,n,r)}handleUserChange(e,n,r){n.forEach(s=>{this.Po(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return H(Br,"READ",e,n),n}setItem(e,n){H(Br,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){H(Br,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(H(Br,"EVENT",n.key,n.newValue),n.key===this.eo)return void vt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const r=this.Ro(n.key);return this.Vo(r,null)}{const r=this.mo(n.key,n.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(this.so.test(n.key)){if(n.newValue!==null){const r=this.yo(n.key,n.newValue);if(r)return this.wo(r)}}else if(n.key===this.oo){if(n.newValue!==null){const r=this.uo(n.newValue);if(r)return this.co(r)}}else if(n.key===this.no){const r=function(i){let o=In.ce;if(i!=null)try{const a=JSON.parse(i);oe(typeof a=="number",30636,{So:i}),o=a}catch(a){vt(Br,"Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==In.ce&&this.sequenceNumberHandler(r)}else if(n.key===this._o){const r=this.bo(n.newValue);await Promise.all(r.map(s=>this.syncEngine.Do(s)))}}}else this.Xs.push(n)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,r){const s=new Gf(this.currentUser,e,n,r),i=yS(this.persistenceKey,this.currentUser,e);this.setItem(i,s.Gs())}Po(e){const n=yS(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,r){const s=vg(this.persistenceKey,e),i=new Xc(e,n,r);this.setItem(s,i.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const r=this.Ro(e);return Qf.Ws(r,n)}fo(e,n){const r=this.io.exec(e),s=Number(r[1]),i=r[2]!==void 0?r[2]:null;return Gf.Ws(new Jt(i),s,n)}yo(e,n){const r=this.so.exec(e),s=Number(r[1]);return Xc.Ws(s,n)}uo(e){return Tw.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);H(Br,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const r=n?this.Zs.insert(e,n):this.Zs.remove(e),s=this.lo(this.Zs),i=this.lo(r),o=[],a=[];return i.forEach(l=>{s.has(l)||o.push(l)}),s.forEach(l=>{i.has(l)||a.push(l)}),this.syncEngine.Fo(o,a).then(()=>{this.Zs=r})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=aw();return e.forEach((r,s)=>{n=n.unionWith(s.activeTargetIds)}),n}}class ak{constructor(){this.Mo=new fv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new fv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TB{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS="ConnectivityMonitor";class _S{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){H(vS,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){H(vS,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oh=null;function pv(){return oh===null?oh=function(){return 268435456+Math.round(2147483648*Math.random())}():oh++,"0x"+oh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wg="RestConnection",IB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class SB{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Lf?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=pv(),a=this.zo(e,n.toUriEncodedString());H(wg,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,i);const{host:c}=new URL(a),d=Cs(c);return this.Jo(e,a,l,r,d).then(h=>(H(wg,`Received RPC '${e}' ${o}: `,h),h),h=>{throw Oi(wg,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",r),h})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Vl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=IB[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bB{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xt="WebChannelConnection";class AB extends SB{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=pv();return new Promise((a,l)=>{const c=new pR;c.setWithCredentials(!0),c.listenOnce(mR.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case kh.NO_ERROR:const h=c.getResponseJson();H(Xt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),a(h);break;case kh.TIMEOUT:H(Xt,`RPC '${e}' ${o} timed out`),l(new K(B.DEADLINE_EXCEEDED,"Request time out"));break;case kh.HTTP_ERROR:const p=c.getStatus();if(H(Xt,`RPC '${e}' ${o} failed with status:`,p,"response text:",c.getResponseText()),p>0){let f=c.getResponseJson();Array.isArray(f)&&(f=f[0]);const _=f==null?void 0:f.error;if(_&&_.status&&_.message){const y=function(w){const v=w.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(v)>=0?v:B.UNKNOWN}(_.status);l(new K(y,_.message))}else l(new K(B.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new K(B.UNAVAILABLE,"Connection failed."));break;default:te(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{H(Xt,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(s);H(Xt,`RPC '${e}' ${o} sending request:`,s),c.send(n,"POST",d,r,15)})}T_(e,n,r){const s=pv(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=vR(),a=yR(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");H(Xt,`Creating RPC '${e}' stream ${s}: ${d}`,l);const h=o.createWebChannel(d,l);this.I_(h);let p=!1,f=!1;const _=new bB({Yo:E=>{f?H(Xt,`Not sending because RPC '${e}' stream ${s} is closed:`,E):(p||(H(Xt,`Opening RPC '${e}' stream ${s} transport.`),h.open(),p=!0),H(Xt,`RPC '${e}' stream ${s} sending:`,E),h.send(E))},Zo:()=>h.close()}),y=(E,w,v)=>{E.listen(w,I=>{try{v(I)}catch(D){setTimeout(()=>{throw D},0)}})};return y(h,xc.EventType.OPEN,()=>{f||(H(Xt,`RPC '${e}' stream ${s} transport opened.`),_.o_())}),y(h,xc.EventType.CLOSE,()=>{f||(f=!0,H(Xt,`RPC '${e}' stream ${s} transport closed`),_.a_(),this.E_(h))}),y(h,xc.EventType.ERROR,E=>{f||(f=!0,Oi(Xt,`RPC '${e}' stream ${s} transport errored. Name:`,E.name,"Message:",E.message),_.a_(new K(B.UNAVAILABLE,"The operation could not be completed")))}),y(h,xc.EventType.MESSAGE,E=>{var w;if(!f){const v=E.data[0];oe(!!v,16349);const I=v,D=(I==null?void 0:I.error)||((w=I[0])==null?void 0:w.error);if(D){H(Xt,`RPC '${e}' stream ${s} received error:`,D);const O=D.status;let V=function(b){const k=Tt[b];if(k!==void 0)return EC(k)}(O),S=D.message;V===void 0&&(V=B.INTERNAL,S="Unknown error status: "+O+" with message "+D.message),f=!0,_.a_(new K(V,S)),h.close()}else H(Xt,`RPC '${e}' stream ${s} received:`,v),_.u_(v)}}),y(a,gR.STAT_EVENT,E=>{E.stat===Ky.PROXY?H(Xt,`RPC '${e}' stream ${s} detected buffering proxy`):E.stat===Ky.NOPROXY&&H(Xt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{_.__()},0),_}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lk(){return typeof window<"u"?window:null}function Bh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yp(t){return new D5(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&H("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS="PersistentStream";class uk{constructor(e,n,r,s,i,o,a,l){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ck(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(vt(n.toString()),vt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new K(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return H(wS,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(H(wS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class xB extends uk{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=V5(this.serializer,e),r=function(i){if(!("targetChange"in i))return ue.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ue.min():o.readTime?hn(o.readTime):ue.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=lv(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=Mf(l)?{documents:RC(i,l)}:{query:CC(i,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=SC(i,o.resumeToken);const c=ov(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ue.min())>0){a.readTime=_l(i,o.snapshotVersion.toTimestamp());const c=ov(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=M5(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=lv(this.serializer),n.removeTarget=e,this.q_(n)}}class PB extends uk{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return oe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,oe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){oe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=L5(e.writeResults,e.commitTime),r=hn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=lv(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Bf(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RB{}class CB extends RB{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new K(B.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,av(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new K(B.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,av(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K(B.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class kB{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(vt(n),this.aa=!1):H("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Go="RemoteStore";class DB{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{ea(this)&&(H(Go,"Restarting streams for network reachability change."),await async function(l){const c=re(l);c.Ea.add(4),await Fl(c),c.Ra.set("Unknown"),c.Ea.delete(4),await cd(c)}(this))})}),this.Ra=new kB(r,s)}}async function cd(t){if(ea(t))for(const e of t.da)await e(!0)}async function Fl(t){for(const e of t.da)await e(!1)}function Xp(t,e){const n=re(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),bw(n)?Sw(n):jl(n).O_()&&Iw(n,e))}function El(t,e){const n=re(t),r=jl(n);n.Ia.delete(e),r.O_()&&dk(n,e),n.Ia.size===0&&(r.O_()?r.L_():ea(n)&&n.Ra.set("Unknown"))}function Iw(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ue.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}jl(t).Y_(e)}function dk(t,e){t.Va.Ue(e),jl(t).Z_(e)}function Sw(t){t.Va=new P5({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),jl(t).start(),t.Ra.ua()}function bw(t){return ea(t)&&!jl(t).x_()&&t.Ia.size>0}function ea(t){return re(t).Ea.size===0}function hk(t){t.Va=void 0}async function NB(t){t.Ra.set("Online")}async function OB(t){t.Ia.forEach((e,n)=>{Iw(t,e)})}async function VB(t,e){hk(t),bw(t)?(t.Ra.ha(e),Sw(t)):t.Ra.set("Unknown")}async function LB(t,e,n){if(t.Ra.set("Online"),e instanceof IC&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ia.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ia.delete(a),s.Va.removeTarget(a))}(t,e)}catch(r){H(Go,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Yf(t,r)}else if(e instanceof Uh?t.Va.Ze(e):e instanceof TC?t.Va.st(e):t.Va.tt(e),!n.isEqual(ue.min()))try{const r=await ek(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Va.Tt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.Ia.get(c);d&&i.Ia.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=i.Ia.get(l);if(!d)return;i.Ia.set(l,d.withResumeToken(gt.EMPTY_BYTE_STRING,d.snapshotVersion)),dk(i,l);const h=new ds(d.target,l,c,d.sequenceNumber);Iw(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){H(Go,"Failed to raise snapshot:",r),await Yf(t,r)}}async function Yf(t,e,n){if(!Yi(e))throw e;t.Ea.add(1),await Fl(t),t.Ra.set("Offline"),n||(n=()=>ek(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H(Go,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await cd(t)})}function fk(t,e){return e().catch(n=>Yf(t,n,e))}async function Ul(t){const e=re(t),n=Fi(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Do;for(;MB(e);)try{const s=await EB(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,FB(e,s)}catch(s){await Yf(e,s)}pk(e)&&mk(e)}function MB(t){return ea(t)&&t.Ta.length<10}function FB(t,e){t.Ta.push(e);const n=Fi(t);n.O_()&&n.X_&&n.ea(e.mutations)}function pk(t){return ea(t)&&!Fi(t).x_()&&t.Ta.length>0}function mk(t){Fi(t).start()}async function UB(t){Fi(t).ra()}async function jB(t){const e=Fi(t);for(const n of t.Ta)e.ea(n.mutations)}async function BB(t,e,n){const r=t.Ta.shift(),s=dw.from(r,e,n);await fk(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Ul(t)}async function $B(t,e){e&&Fi(t).X_&&await async function(r,s){if(function(o){return b5(o)&&o!==B.ABORTED}(s.code)){const i=r.Ta.shift();Fi(r).B_(),await fk(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Ul(r)}}(t,e),pk(t)&&mk(t)}async function ES(t,e){const n=re(t);n.asyncQueue.verifyOperationInProgress(),H(Go,"RemoteStore received new credentials");const r=ea(n);n.Ea.add(3),await Fl(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await cd(n)}async function mv(t,e){const n=re(t);e?(n.Ea.delete(2),await cd(n)):e||(n.Ea.add(2),await Fl(n),n.Ra.set("Unknown"))}function jl(t){return t.ma||(t.ma=function(n,r,s){const i=re(n);return i.sa(),new xB(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:NB.bind(null,t),t_:OB.bind(null,t),r_:VB.bind(null,t),H_:LB.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),bw(t)?Sw(t):t.Ra.set("Unknown")):(await t.ma.stop(),hk(t))})),t.ma}function Fi(t){return t.fa||(t.fa=function(n,r,s){const i=re(n);return i.sa(),new PB(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:UB.bind(null,t),r_:$B.bind(null,t),ta:jB.bind(null,t),na:BB.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Ul(t)):(await t.fa.stop(),t.Ta.length>0&&(H(Go,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new Aw(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ud(t,e){if(vt("AsyncQueue",`${e}: ${t}`),Yi(t))return new K(B.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{static emptySet(e){return new Ba(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||J.comparator(n.key,r.key):(n,r)=>J.comparator(n.key,r.key),this.keyedMap=Pc(),this.sortedSet=new Ge(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ba)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ba;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(){this.ga=new Ge(J.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):te(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Tl{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Tl(e,n,Ba.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zB{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class qB{constructor(){this.queries=IS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=re(n),i=s.queries;s.queries=IS(),i.forEach((o,a)=>{for(const l of a.Sa)l.onError(r)})})(this,new K(B.ABORTED,"Firestore shutting down"))}}function IS(){return new Ds(t=>aC(t),zp)}async function xw(t,e){const n=re(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new zB,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=ud(o,`Initialization of query '${ma(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Rw(n)}async function Pw(t,e){const n=re(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function HB(t,e){const n=re(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Fa(s)&&(r=!0);o.wa=s}}r&&Rw(n)}function WB(t,e,n){const r=re(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function Rw(t){t.Ca.forEach(e=>{e.next()})}var gv,SS;(SS=gv||(gv={})).Ma="default",SS.Cache="cache";class Cw{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Tl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Tl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==gv.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(e){this.key=e}}class yk{constructor(e){this.key=e}}class vk{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ie(),this.mutatedKeys=Ie(),this.eu=cC(e),this.tu=new Ba(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new TS,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const p=s.get(d),f=od(this.query,h)?h:null,_=!!p&&this.mutatedKeys.has(p.key),y=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let E=!1;p&&f?p.data.isEqual(f.data)?_!==y&&(r.track({type:3,doc:f}),E=!0):this.su(p,f)||(r.track({type:2,doc:f}),E=!0,(l&&this.eu(f,l)>0||c&&this.eu(f,c)<0)&&(a=!0)):!p&&f?(r.track({type:0,doc:f}),E=!0):p&&!f&&(r.track({type:1,doc:p}),E=!0,(l||c)&&(a=!0)),E&&(f?(o=o.add(f),i=y?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{tu:o,iu:r,Cs:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((d,h)=>function(f,_){const y=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te(20277,{Rt:E})}};return y(f)-y(_)}(d.type,h.type)||this.eu(d.doc,h.doc)),this.ou(r),s=s??!1;const a=n&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,c=l!==this.Za;return this.Za=l,o.length!==0||c?{snapshot:new Tl(this.query,e.tu,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new TS,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ie(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new yk(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new gk(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Ie();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Tl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Bl="SyncEngine";class KB{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class GB{constructor(e){this.key=e,this.hu=!1}}class QB{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Ds(a=>aC(a),zp),this.Iu=new Map,this.Eu=new Set,this.du=new Ge(J.comparator),this.Au=new Map,this.Ru=new yw,this.Vu={},this.mu=new Map,this.fu=Ko.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function YB(t,e,n=!0){const r=Jp(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await _k(r,e,n,!0),s}async function XB(t,e){const n=Jp(t);await _k(n,e,!0,!1)}async function _k(t,e,n,r){const s=await Wf(t.localStore,zn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await kw(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Xp(t.remoteStore,s),a}async function kw(t,e,n,r,s){t.pu=(h,p,f)=>async function(y,E,w,v){let I=E.view.ru(w);I.Cs&&(I=await Kf(y.localStore,E.query,!1).then(({documents:S})=>E.view.ru(S,I)));const D=v&&v.targetChanges.get(E.targetId),O=v&&v.targetMismatches.get(E.targetId)!=null,V=E.view.applyChanges(I,y.isPrimaryClient,D,O);return yv(y,E.targetId,V.au),V.snapshot}(t,h,p,f);const i=await Kf(t.localStore,e,!0),o=new vk(e,i.Qs),a=o.ru(i.documents),l=ld.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);yv(t,n,c.au);const d=new KB(e,n,o);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function JB(t,e,n){const r=re(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!zp(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await wl(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&El(r.remoteStore,s.targetId),Il(r,s.targetId)}).catch(Qi)):(Il(r,s.targetId),await wl(r.localStore,s.targetId,!0))}async function ZB(t,e){const n=re(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),El(n.remoteStore,r.targetId))}async function e9(t,e,n){const r=Vw(t);try{const s=await function(o,a){const l=re(o),c=je.now(),d=a.reduce((f,_)=>f.add(_.key),Ie());let h,p;return l.persistence.runTransaction("Locally write mutations","readwrite",f=>{let _=Un(),y=Ie();return l.Ns.getEntries(f,d).next(E=>{_=E,_.forEach((w,v)=>{v.isValidDocument()||(y=y.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(f,_)).next(E=>{h=E;const w=[];for(const v of a){const I=I5(v,h.get(v.key).overlayedDocument);I!=null&&w.push(new Ns(v.key,I,XR(I.value.mapValue),nn.exists(!0)))}return l.mutationQueue.addMutationBatch(f,c,w,a)}).next(E=>{p=E;const w=E.applyToLocalDocumentSet(h,y);return l.documentOverlayCache.saveOverlays(f,E.batchId,w)})}).then(()=>({batchId:p.batchId,changes:dC(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Vu[o.currentUser.toKey()];c||(c=new Ge(pe)),c=c.insert(a,l),o.Vu[o.currentUser.toKey()]=c}(r,s.batchId,n),await Ji(r,s.changes),await Ul(r.remoteStore)}catch(s){const i=ud(s,"Failed to persist write");n.reject(i)}}async function wk(t,e){const n=re(t);try{const r=await _B(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(oe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?oe(o.hu,14607):s.removedDocuments.size>0&&(oe(o.hu,42227),o.hu=!1))}),await Ji(n,r,e)}catch(r){await Qi(r)}}function bS(t,e,n){const r=re(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=re(o);l.onlineState=a;let c=!1;l.queries.forEach((d,h)=>{for(const p of h.Sa)p.va(a)&&(c=!0)}),c&&Rw(l)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function t9(t,e,n){const r=re(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Ge(J.comparator);o=o.insert(i,mt.newNoDocument(i,ue.min()));const a=Ie().add(i),l=new ad(ue.min(),new Map,new Ge(pe),o,a);await wk(r,l),r.du=r.du.remove(i),r.Au.delete(e),Ow(r)}else await wl(r.localStore,e,!1).then(()=>Il(r,e,n)).catch(Qi)}async function n9(t,e){const n=re(t),r=e.batch.batchId;try{const s=await vB(n.localStore,e);Nw(n,r,null),Dw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ji(n,s)}catch(s){await Qi(s)}}async function r9(t,e,n){const r=re(t);try{const s=await function(o,a){const l=re(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(oe(h!==null,37113),d=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);Nw(r,e,n),Dw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ji(r,s)}catch(s){await Qi(s)}}function Dw(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function Nw(t,e,n){const r=re(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Il(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||Ek(t,r)})}function Ek(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(El(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Ow(t))}function yv(t,e,n){for(const r of n)r instanceof gk?(t.Ru.addReference(r.key,e),s9(t,r)):r instanceof yk?(H(Bl,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||Ek(t,r.key)):te(19791,{wu:r})}function s9(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(H(Bl,"New document in limbo: "+n),t.Eu.add(r),Ow(t))}function Ow(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new J(Fe.fromString(e)),r=t.fu.next();t.Au.set(r,new GB(n)),t.du=t.du.insert(n,r),Xp(t.remoteStore,new ds(zn(id(n.path)),r,"TargetPurposeLimboResolution",In.ce))}}async function Ji(t,e,n){const r=re(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{o.push(r.pu(l,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){s.push(c);const h=ww.As(l.targetId,c);i.push(h)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(l,c){const d=re(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>L.forEach(c,p=>L.forEach(p.Es,f=>d.persistence.referenceDelegate.addReference(h,p.targetId,f)).next(()=>L.forEach(p.ds,f=>d.persistence.referenceDelegate.removeReference(h,p.targetId,f)))))}catch(h){if(!Yi(h))throw h;H(Ew,"Failed to update sequence numbers: "+h)}for(const h of c){const p=h.targetId;if(!h.fromCache){const f=d.Ms.get(p),_=f.snapshotVersion,y=f.withLastLimboFreeSnapshotVersion(_);d.Ms=d.Ms.insert(p,y)}}}(r.localStore,i))}async function i9(t,e){const n=re(t);if(!n.currentUser.isEqual(e)){H(Bl,"User change. New user:",e.toKey());const r=await ZC(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(a=>{a.forEach(l=>{l.reject(new K(B.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ji(n,r.Ls)}}function o9(t,e){const n=re(t),r=n.Au.get(e);if(r&&r.hu)return Ie().add(r.key);{let s=Ie();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const a=n.Tu.get(o);s=s.unionWith(a.view.nu)}return s}}async function a9(t,e){const n=re(t),r=await Kf(n.localStore,e.query,!0),s=e.view.cu(r);return n.isPrimaryClient&&yv(n,e.targetId,s.au),s}async function l9(t,e){const n=re(t);return nk(n.localStore,e).then(r=>Ji(n,r))}async function c9(t,e,n,r){const s=re(t),i=await function(a,l){const c=re(a),d=re(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.er(h,l).next(p=>p?c.localDocuments.getDocuments(h,p):L.resolve(null)))}(s.localStore,e);i!==null?(n==="pending"?await Ul(s.remoteStore):n==="acknowledged"||n==="rejected"?(Nw(s,e,r||null),Dw(s,e),function(a,l){re(re(a).mutationQueue).ir(l)}(s.localStore,e)):te(6720,"Unknown batchState",{Su:n}),await Ji(s,i)):H(Bl,"Cannot apply mutation batch with id: "+e)}async function u9(t,e){const n=re(t);if(Jp(n),Vw(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),s=await AS(n,r.toArray());n.gu=!0,await mv(n.remoteStore,!0);for(const i of s)Xp(n.remoteStore,i)}else if(e===!1&&n.gu!==!1){const r=[];let s=Promise.resolve();n.Iu.forEach((i,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):s=s.then(()=>(Il(n,o),wl(n.localStore,o,!0))),El(n.remoteStore,o)}),await s,await AS(n,r),function(o){const a=re(o);a.Au.forEach((l,c)=>{El(a.remoteStore,c)}),a.Ru.Jr(),a.Au=new Map,a.du=new Ge(J.comparator)}(n),n.gu=!1,await mv(n.remoteStore,!1)}}async function AS(t,e,n){const r=re(t),s=[],i=[];for(const o of e){let a;const l=r.Iu.get(o);if(l&&l.length!==0){a=await Wf(r.localStore,zn(l[0]));for(const c of l){const d=r.Tu.get(c),h=await a9(r,d);h.snapshot&&i.push(h.snapshot)}}else{const c=await tk(r.localStore,o);a=await Wf(r.localStore,c),await kw(r,Tk(c),o,!1,a.resumeToken)}s.push(a)}return r.Pu.H_(i),s}function Tk(t){return iC(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function d9(t){return function(n){return re(re(n).persistence).Ts()}(re(t).localStore)}async function h9(t,e,n,r){const s=re(t);if(s.gu)return void H(Bl,"Ignoring unexpected query state notification.");const i=s.Iu.get(e);if(i&&i.length>0)switch(n){case"current":case"not-current":{const o=await nk(s.localStore,lC(i[0])),a=ad.createSynthesizedRemoteEventForCurrentChange(e,n==="current",gt.EMPTY_BYTE_STRING);await Ji(s,o,a);break}case"rejected":await wl(s.localStore,e,!0),Il(s,e,r);break;default:te(64155,n)}}async function f9(t,e,n){const r=Jp(t);if(r.gu){for(const s of e){if(r.Iu.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){H(Bl,"Adding an already active target "+s);continue}const i=await tk(r.localStore,s),o=await Wf(r.localStore,i);await kw(r,Tk(i),o.targetId,!1,o.resumeToken),Xp(r.remoteStore,o)}for(const s of n)r.Iu.has(s)&&await wl(r.localStore,s,!1).then(()=>{El(r.remoteStore,s),Il(r,s)}).catch(Qi)}}function Jp(t){const e=re(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=wk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=o9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=t9.bind(null,e),e.Pu.H_=HB.bind(null,e.eventManager),e.Pu.yu=WB.bind(null,e.eventManager),e}function Vw(t){const e=re(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=n9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=r9.bind(null,e),e}class Fu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Yp(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return JC(this.persistence,new XC,e.initialUser,this.serializer)}Cu(e){return new vw(Qp.mi,this.serializer)}Du(e){return new ak}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Fu.provider={build:()=>new Fu};class p9 extends Fu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){oe(this.persistence.referenceDelegate instanceof Hf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new HC(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Zt.withCacheSize(this.cacheSizeBytes):Zt.DEFAULT;return new vw(r=>Hf.mi(r,n),this.serializer)}}class Ik extends Fu{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await Vw(this.xu.syncEngine),await Ul(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return JC(this.persistence,new XC,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new HC(r,e.asyncQueue,n)}Mu(e,n){const r=new Aj(n,this.persistence);return new bj(e.asyncQueue,r)}Cu(e){const n=YC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Zt.withCacheSize(this.cacheSizeBytes):Zt.DEFAULT;return new _w(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,lk(),Bh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new ak}}class m9 extends Ik{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof _g&&(this.sharedClientState.syncEngine={Co:c9.bind(null,n),vo:h9.bind(null,n),Fo:f9.bind(null,n),Ts:d9.bind(null,n),Do:l9.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji(async r=>{await u9(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Du(e){const n=lk();if(!_g.v(n))throw new K(B.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=YC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new _g(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Uu{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>bS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=i9.bind(null,this.syncEngine),await mv(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new qB}()}createDatastore(e){const n=Yp(e.databaseInfo.databaseId),r=function(i){return new AB(i)}(e.databaseInfo);return function(i,o,a,l){return new CB(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new DB(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>bS(this.syncEngine,n,0),function(){return _S.v()?new _S:new TB}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,d){const h=new QB(s,i,o,a,l,c);return d&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=re(s);H(Go,"RemoteStore shutting down."),i.Ea.add(5),await Fl(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Uu.provider={build:()=>new Uu};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):vt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui="FirestoreClient";class g9{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Jt.UNAUTHENTICATED,this.clientId=Op.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{H(Ui,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(H(Ui,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=ud(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Eg(t,e){t.asyncQueue.verifyOperationInProgress(),H(Ui,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await ZC(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function xS(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Mw(t);H(Ui,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>ES(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>ES(e.remoteStore,s)),t._onlineComponents=e}async function Mw(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H(Ui,"Using user provided OfflineComponentProvider");try{await Eg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===B.FAILED_PRECONDITION||s.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Oi("Error using user provided cache. Falling back to memory cache: "+n),await Eg(t,new Fu)}}else H(Ui,"Using default OfflineComponentProvider"),await Eg(t,new p9(void 0));return t._offlineComponents}async function Fw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H(Ui,"Using user provided OnlineComponentProvider"),await xS(t,t._uninitializedComponentsProvider._online)):(H(Ui,"Using default OnlineComponentProvider"),await xS(t,new Uu))),t._onlineComponents}function Sk(t){return Mw(t).then(e=>e.persistence)}function bk(t){return Mw(t).then(e=>e.localStore)}function Ak(t){return Fw(t).then(e=>e.remoteStore)}function y9(t){return Fw(t).then(e=>e.syncEngine)}async function Xf(t){const e=await Fw(t),n=e.eventManager;return n.onListen=YB.bind(null,e.syncEngine),n.onUnlisten=JB.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=XB.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=ZB.bind(null,e.syncEngine),n}function v9(t){return t.asyncQueue.enqueue(async()=>{const e=await Sk(t),n=await Ak(t);return e.setNetworkEnabled(!0),function(s){const i=re(s);return i.Ea.delete(0),cd(i)}(n)})}function _9(t){return t.asyncQueue.enqueue(async()=>{const e=await Sk(t),n=await Ak(t);return e.setNetworkEnabled(!1),async function(s){const i=re(s);i.Ea.add(0),await Fl(i),i.Ra.set("Offline")}(n)})}function w9(t,e){const n=new rr;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,o){try{const a=await function(c,d){const h=re(c);return h.persistence.runTransaction("read document","readonly",p=>h.localDocuments.getDocument(p,d))}(s,i);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new K(B.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=ud(a,`Failed to get document '${i} from cache`);o.reject(l)}}(await bk(t),e,n)),n.promise}function E9(t,e,n={}){const r=new rr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new Lw({next:p=>{d.Nu(),o.enqueueAndForget(()=>Pw(i,h));const f=p.docs.has(a);!f&&p.fromCache?c.reject(new K(B.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&p.fromCache&&l&&l.source==="server"?c.reject(new K(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new Cw(id(a.path),d,{includeMetadataChanges:!0,qa:!0});return xw(i,h)}(await Xf(t),t.asyncQueue,e,n,r)),r.promise}function T9(t,e){const n=new rr;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,o){try{const a=await Kf(s,i,!0),l=new vk(i,a.Qs),c=l.ru(a.documents),d=l.applyChanges(c,!1);o.resolve(d.snapshot)}catch(a){const l=ud(a,`Failed to execute query '${i} against cache`);o.reject(l)}}(await bk(t),e,n)),n.promise}function I9(t,e,n={}){const r=new rr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new Lw({next:p=>{d.Nu(),o.enqueueAndForget(()=>Pw(i,h)),p.fromCache&&l.source==="server"?c.reject(new K(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new Cw(a,d,{includeMetadataChanges:!0,qa:!0});return xw(i,h)}(await Xf(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xk(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S9="firestore.googleapis.com",RS=!0;class CS{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new K(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=S9,this.ssl=RS}else this.host=e.host,this.ssl=e.ssl??RS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=jC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<qC)throw new K(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}SR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xk(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new K(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new K(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new K(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Uw{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new CS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new CS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new ER;switch(r.type){case"firstParty":return new gj(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=PS.get(n);r&&(H("ComponentProvider","Removing Datastore"),PS.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new xr(this.firestore,e,this._query)}}class it{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new it(this.firestore,e,this._key)}toJSON(){return{type:it._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(nd(n,it._jsonSchema))return new it(e,r||null,new J(Fe.fromString(n.referencePath)))}}it._jsonSchemaVersion="firestore/documentReference/1.0",it._jsonSchema={type:At("string",it._jsonSchemaVersion),referencePath:At("string")};class fs extends xr{constructor(e,n,r){super(e,n,id(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new it(this.firestore,null,new J(e))}withConverter(e){return new fs(this.firestore,e,this._path)}}function ye(t,e,...n){if(t=He(t),IR("collection","path",e),t instanceof Uw){const r=Fe.fromString(e,...n);return wI(r),new fs(t,null,r)}{if(!(t instanceof it||t instanceof fs))throw new K(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Fe.fromString(e,...n));return wI(r),new fs(t.firestore,null,r)}}function ve(t,e,...n){if(t=He(t),arguments.length===1&&(e=Op.newId()),IR("doc","path",e),t instanceof Uw){const r=Fe.fromString(e,...n);return _I(r),new it(t,null,new J(r))}{if(!(t instanceof it||t instanceof fs))throw new K(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Fe.fromString(e,...n));return _I(r),new it(t.firestore,t instanceof fs?t.converter:null,new J(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS="AsyncQueue";class DS{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ck(this,"async_queue_retry"),this._c=()=>{const r=Bh();r&&H(kS,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Bh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Bh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new rr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Yi(e))throw e;H(kS,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,vt("INTERNAL UNHANDLED ERROR: ",NS(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Aw.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&te(47125,{Pc:NS(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function NS(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OS(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class fn extends Uw{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new DS,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new DS(e),this._firestoreClient=void 0,await e}}}function Pk(t,e,n){n||(n=Lf);const r=Dp(t,"firestore");if(r.isInitialized(n)){const s=r.getImmediate({identifier:n}),i=r.getOptions(n);if(il(i,e))return s;throw new K(B.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new K(B.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<qC)throw new K(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Cs(e.host)&&$_(e.host),r.initialize({options:e,instanceIdentifier:n})}function Os(t){if(t._terminated)throw new K(B.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Rk(t),t._firestoreClient}function Rk(t){var r,s,i;const e=t._freezeSettings(),n=function(a,l,c,d){return new e5(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,xk(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new g9(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}function b9(t,e){Oi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return Ck(t,Uu.provider,{build:r=>new Ik(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function A9(t){Oi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();Ck(t,Uu.provider,{build:n=>new m9(n,e.cacheSizeBytes)})}function Ck(t,e,n){if((t=wt(t,fn))._firestoreClient||t._terminated)throw new K(B.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new K(B.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},Rk(t)}function jw(t){return v9(Os(t=wt(t,fn)))}function Bw(t){return _9(Os(t=wt(t,fn)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ln(gt.fromBase64String(e))}catch(n){throw new K(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ln(gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ln._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(nd(e,Ln._jsonSchema))return Ln.fromBase64String(e.bytes)}}Ln._jsonSchemaVersion="firestore/bytes/1.0",Ln._jsonSchema={type:At("string",Ln._jsonSchemaVersion),bytes:At("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return pe(this._lat,e._lat)||pe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:wr._jsonSchemaVersion}}static fromJSON(e){if(nd(e,wr._jsonSchema))return new wr(e.latitude,e.longitude)}}wr._jsonSchemaVersion="firestore/geoPoint/1.0",wr._jsonSchema={type:At("string",wr._jsonSchemaVersion),latitude:At("number"),longitude:At("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Er._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(nd(e,Er._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Er(e.vectorValues);throw new K(B.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Er._jsonSchemaVersion="firestore/vectorValue/1.0",Er._jsonSchema={type:At("string",Er._jsonSchemaVersion),vectorValues:At("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x9=/^__.*__$/;class P9{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ns(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ml(e,this.data,n,this.fieldTransforms)}}class kk{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ns(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Dk(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te(40011,{Ac:t})}}class Zp{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Zp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Jf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Dk(this.Ac)&&x9.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class R9{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Yp(e)}Cc(e,n,r,s=!1){return new Zp({Ac:e,methodName:n,Dc:r,path:rt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function em(t){const e=t._freezeSettings(),n=Yp(t._databaseId);return new R9(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Nk(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);qw("Data must be an object, but it was:",o,r);const a=Ok(r,o);let l,c;if(i.merge)l=new Sn(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const h of i.mergeFields){const p=vv(e,h,n);if(!o.contains(p))throw new K(B.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);Lk(d,p)||d.push(p)}l=new Sn(d),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new P9(new tn(a),l,c)}class tm extends $l{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof tm}}function C9(t,e,n){return new Zp({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class $w extends $l{_toFieldTransform(e){return new cw(e.path,new yl)}isEqual(e){return e instanceof $w}}class zw extends $l{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=C9(this,e,!0),r=this.vc.map(i=>zl(i,n)),s=new qo(r);return new cw(e.path,s)}isEqual(e){return e instanceof zw&&il(this.vc,e.vc)}}function k9(t,e,n,r){const s=t.Cc(1,e,n);qw("Data must be an object, but it was:",s,r);const i=[],o=tn.empty();Xi(r,(l,c)=>{const d=Hw(e,l,n);c=He(c);const h=s.yc(d);if(c instanceof tm)i.push(d);else{const p=zl(c,h);p!=null&&(i.push(d),o.set(d,p))}});const a=new Sn(i);return new kk(o,a,s.fieldTransforms)}function D9(t,e,n,r,s,i){const o=t.Cc(1,e,n),a=[vv(e,r,n)],l=[s];if(i.length%2!=0)throw new K(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)a.push(vv(e,i[p])),l.push(i[p+1]);const c=[],d=tn.empty();for(let p=a.length-1;p>=0;--p)if(!Lk(c,a[p])){const f=a[p];let _=l[p];_=He(_);const y=o.yc(f);if(_ instanceof tm)c.push(f);else{const E=zl(_,y);E!=null&&(c.push(f),d.set(f,E))}}const h=new Sn(c);return new kk(d,h,o.fieldTransforms)}function N9(t,e,n,r=!1){return zl(n,t.Cc(r?4:3,e))}function zl(t,e){if(Vk(t=He(t)))return qw("Unsupported field value:",e,t),Ok(t,e);if(t instanceof $l)return function(r,s){if(!Dk(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=zl(a,s.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=He(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return y5(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=je.fromDate(r);return{timestampValue:_l(s.serializer,i)}}if(r instanceof je){const i=new je(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:_l(s.serializer,i)}}if(r instanceof wr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ln)return{bytesValue:SC(s.serializer,r._byteString)};if(r instanceof it){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:pw(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Er)return function(o,a){return{mapValue:{fields:{[sw]:{stringValue:iw},[fl]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Sc("VectorValues must only contain numeric values.");return lw(a.serializer,c)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Vp(r)}`)}(t,e)}function Ok(t,e){const n={};return $R(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xi(t,(r,s)=>{const i=zl(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Vk(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof je||t instanceof wr||t instanceof Ln||t instanceof it||t instanceof $l||t instanceof Er)}function qw(t,e,n){if(!Vk(n)||!bR(n)){const r=Vp(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function vv(t,e,n){if((e=He(e))instanceof dd)return e._internalPath;if(typeof e=="string")return Hw(t,e);throw Jf("Field path arguments must be of type string or ",t,!1,void 0,n)}const O9=new RegExp("[~\\*/\\[\\]]");function Hw(t,e,n){if(e.search(O9)>=0)throw Jf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new dd(...e.split("."))._internalPath}catch{throw Jf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Jf(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new K(B.INVALID_ARGUMENT,a+t+l)}function Lk(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new it(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new V9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(nm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class V9 extends Mk{data(){return super.data()}}function nm(t,e){return typeof e=="string"?Hw(t,e):e instanceof dd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fk(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ww{}class rm extends Ww{}function Re(t,e,...n){let r=[];e instanceof Ww&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof sm).length,a=i.filter(l=>l instanceof hd).length;if(o>1||o>0&&a>0)throw new K(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class hd extends rm{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new hd(e,n,r)}_apply(e){const n=this._parse(e);return Uk(e._query,n),new xr(e.firestore,e.converter,iv(e._query,n))}_parse(e){const n=em(e.firestore);return function(i,o,a,l,c,d,h){let p;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new K(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){LS(h,d);const _=[];for(const y of h)_.push(VS(l,i,y));p={arrayValue:{values:_}}}else p=VS(l,i,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||LS(h,d),p=N9(a,o,h,d==="in"||d==="not-in");return ke.create(c,d,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function be(t,e,n){const r=e,s=nm("where",t);return hd._create(s,r,n)}class sm extends Ww{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new sm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Be.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)Uk(o,l),o=iv(o,l)}(e._query,n),new xr(e.firestore,e.converter,iv(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class im extends rm{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new im(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new K(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new K(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Lu(i,o)}(e._query,this._field,this._direction);return new xr(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Ll(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function ps(t,e="asc"){const n=e,r=nm("orderBy",t);return im._create(r,n)}class om extends rm{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new om(e,n,r)}_apply(e){return new xr(e.firestore,e.converter,Uf(e._query,this._limit,this._limitType))}}function Qo(t){return Tj("limit",t),om._create("limit",t,"F")}function VS(t,e,n){if(typeof(n=He(n))=="string"){if(n==="")throw new K(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!oC(e)&&n.indexOf("/")!==-1)throw new K(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Fe.fromString(n));if(!J.isDocumentKey(r))throw new K(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ou(t,new J(r))}if(n instanceof it)return Ou(t,n._key);throw new K(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Vp(n)}.`)}function LS(t,e){if(!Array.isArray(t)||t.length===0)throw new K(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Uk(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new K(B.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K(B.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class jk{convertValue(e,n="none"){switch(Li(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(xs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw te(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Xi(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[fl].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>tt(o.doubleValue));return new Er(n)}convertGeoPoint(e){return new wr(tt(e.latitude),tt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Bp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Du(e));default:return null}}convertTimestamp(e){const n=As(e);return new je(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Fe.fromString(e);oe(OC(r),9688,{name:e});const s=new Vi(r.get(1),r.get(3)),i=new J(r.popFirst(5));return s.isEqual(n)||vt(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bk(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Io{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ms extends Mk{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Jc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(nm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new K(B.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ms._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ms._jsonSchemaVersion="firestore/documentSnapshot/1.0",ms._jsonSchema={type:At("string",ms._jsonSchemaVersion),bundleSource:At("string","DocumentSnapshot"),bundleName:At("string"),bundle:At("string")};class Jc extends ms{data(e={}){return super.data(e)}}class gs{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Io(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Jc(this._firestore,this._userDataWriter,r.key,r,new Io(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Jc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Io(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Jc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Io(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:L9(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new K(B.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=gs._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Op.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function L9(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(t){t=wt(t,it);const e=wt(t.firestore,fn);return E9(Os(e),t._key).then(n=>zk(e,t,n))}gs._jsonSchemaVersion="firestore/querySnapshot/1.0",gs._jsonSchema={type:At("string",gs._jsonSchemaVersion),bundleSource:At("string","QuerySnapshot"),bundleName:At("string"),bundle:At("string")};class fd extends jk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ln(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new it(this.firestore,null,n)}}function $k(t){t=wt(t,it);const e=wt(t.firestore,fn),n=Os(e),r=new fd(e);return w9(n,t._key).then(s=>new ms(e,r,t._key,s,new Io(s!==null&&s.hasLocalMutations,!0),t.converter))}function Ne(t){t=wt(t,xr);const e=wt(t.firestore,fn),n=Os(e),r=new fd(e);return Fk(t._query),I9(n,t._query).then(s=>new gs(e,r,t,s))}function M9(t){t=wt(t,xr);const e=wt(t.firestore,fn),n=Os(e),r=new fd(e);return T9(n,t._query).then(s=>new gs(e,r,t,s))}function ji(t,e,n){t=wt(t,it);const r=wt(t.firestore,fn),s=Bk(t.converter,e,n);return pd(r,[Nk(em(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,nn.none())])}function st(t,e,n,...r){t=wt(t,it);const s=wt(t.firestore,fn),i=em(s);let o;return o=typeof(e=He(e))=="string"||e instanceof dd?D9(i,"updateDoc",t._key,e,n,r):k9(i,"updateDoc",t._key,e),pd(s,[o.toMutation(t._key,nn.exists(!0))])}function Mn(t){return pd(wt(t.firestore,fn),[new Wp(t._key,nn.none())])}function Bi(t,e){const n=wt(t.firestore,fn),r=ve(t),s=Bk(t.converter,e);return pd(n,[Nk(em(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,nn.exists(!1))]).then(()=>r)}function Zf(t,...e){var l,c,d;t=He(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||OS(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(OS(e[r])){const h=e[r];e[r]=(l=h.next)==null?void 0:l.bind(h),e[r+1]=(c=h.error)==null?void 0:c.bind(h),e[r+2]=(d=h.complete)==null?void 0:d.bind(h)}let i,o,a;if(t instanceof it)o=wt(t.firestore,fn),a=id(t._key.path),i={next:h=>{e[r]&&e[r](zk(o,t,h))},error:e[r+1],complete:e[r+2]};else{const h=wt(t,xr);o=wt(h.firestore,fn),a=h._query;const p=new fd(o);i={next:f=>{e[r]&&e[r](new gs(o,p,h,f))},error:e[r+1],complete:e[r+2]},Fk(t._query)}return function(p,f,_,y){const E=new Lw(y),w=new Cw(f,E,_);return p.asyncQueue.enqueueAndForget(async()=>xw(await Xf(p),w)),()=>{E.Nu(),p.asyncQueue.enqueueAndForget(async()=>Pw(await Xf(p),w))}}(Os(o),a,s,i)}function pd(t,e){return function(r,s){const i=new rr;return r.asyncQueue.enqueueAndForget(async()=>e9(await y9(r),s,i)),i.promise}(Os(t),e)}function zk(t,e,n){const r=n.docs.get(e._key),s=new fd(t);return new ms(t,s,e._key,r,new Io(n.hasPendingWrites,n.fromCache),e.converter)}function Ae(){return new $w("serverTimestamp")}function F9(...t){return new zw("arrayUnion",t)}(function(e,n=!0){(function(s){Vl=s})(ed),Di(new Ss("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new fn(new pj(r.getProvider("auth-internal")),new yj(o,r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new K(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vi(c.options.projectId,d)}(o,s),o);return i={useFetchStreams:n,...i},a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),nr(mI,gI,e),nr(mI,gI,"esm2020")})();const Tg=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:jk,Bytes:Ln,CollectionReference:fs,DocumentReference:it,DocumentSnapshot:ms,FieldPath:dd,FieldValue:$l,Firestore:fn,FirestoreError:K,GeoPoint:wr,Query:xr,QueryCompositeFilterConstraint:sm,QueryConstraint:rm,QueryDocumentSnapshot:Jc,QueryFieldFilterConstraint:hd,QueryLimitConstraint:om,QueryOrderByConstraint:im,QuerySnapshot:gs,SnapshotMetadata:Io,Timestamp:je,VectorValue:Er,_AutoId:Op,_ByteString:gt,_DatabaseId:Vi,_DocumentKey:J,_EmptyAuthCredentialsProvider:ER,_FieldPath:rt,_cast:wt,_logWarn:Oi,_validateIsNotUsedTogether:SR,addDoc:Bi,arrayUnion:F9,collection:ye,deleteDoc:Mn,disableNetwork:Bw,doc:ve,enableIndexedDbPersistence:b9,enableMultiTabIndexedDbPersistence:A9,enableNetwork:jw,ensureFirestoreConfigured:Os,executeWrite:pd,getDoc:St,getDocFromCache:$k,getDocs:Ne,getDocsFromCache:M9,initializeFirestore:Pk,limit:Qo,onSnapshot:Zf,orderBy:ps,query:Re,serverTimestamp:Ae,setDoc:ji,setLogLevel:_R,updateDoc:st,where:be},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U9="type.googleapis.com/google.protobuf.Int64Value",j9="type.googleapis.com/google.protobuf.UInt64Value";function qk(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function ep(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>ep(e));if(typeof t=="function"||typeof t=="object")return qk(t,e=>ep(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Sl(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case U9:case j9:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Sl(e)):typeof t=="function"||typeof t=="object"?qk(t,e=>Sl(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kw="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class bn extends Ar{constructor(e,n,r){super(`${Kw}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,bn.prototype)}}function B9(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function tp(t,e){let n=B9(t),r=n,s;try{const i=e&&e.error;if(i){const o=i.status;if(typeof o=="string"){if(!MS[o])return new bn("internal","internal");n=MS[o],r=o}const a=i.message;typeof a=="string"&&(r=a),s=i.details,s!==void 0&&(s=Sl(s))}}catch{}return n==="ok"?null:new bn(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $9{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Vn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(i=>this.auth=i,()=>{}),this.messaging||r.get().then(i=>this.messaging=i,()=>{}),this.appCheck||s==null||s.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v="us-central1",z9=/^data: (.*?)(?:\n|$)/;function q9(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new bn("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class H9{constructor(e,n,r,s,i=_v,o=(...a)=>fetch(...a)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new $9(e,n,r,s),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(i);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=_v}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function W9(t,e,n){const r=Cs(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&($_(t.emulatorOrigin+"/backends"),MP("Functions",!0))}function K9(t,e,n){const r=s=>Q9(t,e,s,{});return r.stream=(s,i)=>X9(t,e,s,i),r}function Hk(t){return t.emulatorOrigin&&Cs(t.emulatorOrigin)?"include":void 0}async function G9(t,e,n,r,s){n["Content-Type"]="application/json";let i;try{i=await r(t,{method:"POST",body:JSON.stringify(e),headers:n,credentials:Hk(s)})}catch{return{status:0,json:null}}let o=null;try{o=await i.json()}catch{}return{status:i.status,json:o}}async function Wk(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function Q9(t,e,n,r){const s=t._url(e);return Y9(t,s,n,r)}async function Y9(t,e,n,r){n=ep(n);const s={data:n},i=await Wk(t,r),o=r.timeout||7e4,a=q9(o),l=await Promise.race([G9(e,s,i,t.fetchImpl,t),a.promise,t.cancelAllRequests]);if(a.cancel(),!l)throw new bn("cancelled","Firebase Functions instance was deleted.");const c=tp(l.status,l.json);if(c)throw c;if(!l.json)throw new bn("internal","Response is not valid JSON object.");let d=l.json.data;if(typeof d>"u"&&(d=l.json.result),typeof d>"u")throw new bn("internal","Response is missing data field.");return{data:Sl(d)}}function X9(t,e,n,r){const s=t._url(e);return J9(t,s,n,r||{})}async function J9(t,e,n,r){var p;n=ep(n);const s={data:n},i=await Wk(t,r);i["Content-Type"]="application/json",i.Accept="text/event-stream";let o;try{o=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(s),headers:i,signal:r==null?void 0:r.signal,credentials:Hk(t)})}catch(f){if(f instanceof Error&&f.name==="AbortError"){const y=new bn("cancelled","Request was cancelled.");return{data:Promise.reject(y),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(y)}}}}}}const _=tp(0,null);return{data:Promise.reject(_),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(_)}}}}}}let a,l;const c=new Promise((f,_)=>{a=f,l=_});(p=r==null?void 0:r.signal)==null||p.addEventListener("abort",()=>{const f=new bn("cancelled","Request was cancelled.");l(f)});const d=o.body.getReader(),h=Z9(d,a,l,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const f=h.getReader();return{async next(){const{value:_,done:y}=await f.read();return{value:_,done:y}},async return(){return await f.cancel(),{done:!0,value:void 0}}}}},data:c}}function Z9(t,e,n,r){const s=(o,a)=>{const l=o.match(z9);if(!l)return;const c=l[1];try{const d=JSON.parse(c);if("result"in d){e(Sl(d.result));return}if("message"in d){a.enqueue(Sl(d.message));return}if("error"in d){const h=tp(0,d);a.error(h),n(h);return}}catch(d){if(d instanceof bn){a.error(d),n(d);return}}},i=new TextDecoder;return new ReadableStream({start(o){let a="";return l();async function l(){if(r!=null&&r.aborted){const c=new bn("cancelled","Request was cancelled");return o.error(c),n(c),Promise.resolve()}try{const{value:c,done:d}=await t.read();if(d){a.trim()&&s(a.trim(),o),o.close();return}if(r!=null&&r.aborted){const p=new bn("cancelled","Request was cancelled");o.error(p),n(p),await t.cancel();return}a+=i.decode(c,{stream:!0});const h=a.split(`
`);a=h.pop()||"";for(const p of h)p.trim()&&s(p.trim(),o);return l()}catch(c){const d=c instanceof bn?c:tp(0,null);o.error(d),n(d)}}},cancel(){return t.cancel()}})}const FS="@firebase/functions",US="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e$="auth-internal",t$="app-check-internal",n$="messaging-internal";function r$(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),i=n.getProvider(e$),o=n.getProvider(n$),a=n.getProvider(t$);return new H9(s,i,o,a,r)};Di(new Ss(Kw,e,"PUBLIC").setMultipleInstances(!0)),nr(FS,US,t),nr(FS,US,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s$(t=WP(),e=_v){const r=Dp(He(t),Kw).getImmediate({identifier:e}),s=VP("functions");return s&&i$(r,...s),r}function i$(t,e,n){W9(He(t),e,n)}function Kk(t,e,n){return K9(He(t),e)}r$();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk="firebasestorage.googleapis.com",Qk="storageBucket",o$=2*60*1e3,a$=10*60*1e3,l$=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt extends Ar{constructor(e,n,r=0){super(Ig(e),`Firebase Storage: ${n} (${Ig(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,dt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ig(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var et;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(et||(et={}));function Ig(t){return"storage/"+t}function Gw(){const t="An unknown error occurred, please check the error payload for server response.";return new dt(et.UNKNOWN,t)}function c$(t){return new dt(et.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function u$(t){return new dt(et.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function d$(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new dt(et.UNAUTHENTICATED,t)}function h$(){return new dt(et.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function f$(t){return new dt(et.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function Yk(){return new dt(et.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Xk(){return new dt(et.CANCELED,"User canceled the upload/download.")}function p$(t){return new dt(et.INVALID_URL,"Invalid URL '"+t+"'.")}function m$(t){return new dt(et.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function g$(){return new dt(et.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Qk+"' property when initializing the app?")}function Jk(){return new dt(et.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function y$(){return new dt(et.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function v$(){return new dt(et.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function _$(t){return new dt(et.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function wv(t){return new dt(et.INVALID_ARGUMENT,t)}function Zk(){return new dt(et.APP_DELETED,"The Firebase app was deleted.")}function w$(t){return new dt(et.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Zc(t,e){return new dt(et.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function wc(t){throw new dt(et.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=jn.makeFromUrl(e,n)}catch{return new jn(e,"")}if(r.path==="")return r;throw m$(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(D){D.path.charAt(D.path.length-1)==="/"&&(D.path_=D.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(D){D.path_=decodeURIComponent(D.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",f=new RegExp(`^https?://${h}/${d}/b/${s}/o${p}`,"i"),_={bucket:1,path:3},y=n===Gk?"(?:storage.googleapis.com|storage.cloud.google.com)":n,E="([^?#]*)",w=new RegExp(`^https?://${y}/${s}/${E}`,"i"),I=[{regex:a,indices:l,postModify:i},{regex:f,indices:_,postModify:c},{regex:w,indices:{bucket:1,path:2},postModify:c}];for(let D=0;D<I.length;D++){const O=I[D],V=O.regex.exec(e);if(V){const S=V[O.indices.bucket];let T=V[O.indices.path];T||(T=""),r=new jn(S,T),O.postModify(r);break}}if(r==null)throw p$(e);return r}}class E${constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T$(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function d(...E){c||(c=!0,e.apply(null,E))}function h(E){s=setTimeout(()=>{s=null,t(f,l())},E)}function p(){i&&clearTimeout(i)}function f(E,...w){if(c){p();return}if(E){p(),d.call(null,E,...w);return}if(l()||o){p(),d.call(null,E,...w);return}r<64&&(r*=2);let I;a===1?(a=2,I=0):I=(r+Math.random())*1e3,h(I)}let _=!1;function y(E){_||(_=!0,p(),!c&&(s!==null?(E||(a=2),clearTimeout(s),h(0)):E||(a=1)))}return h(0),i=setTimeout(()=>{o=!0,y(!0)},n),y}function I$(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S$(t){return t!==void 0}function b$(t){return typeof t=="function"}function A$(t){return typeof t=="object"&&!Array.isArray(t)}function am(t){return typeof t=="string"||t instanceof String}function jS(t){return Qw()&&t instanceof Blob}function Qw(){return typeof Blob<"u"}function BS(t,e,n,r){if(r<e)throw wv(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw wv(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function md(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function eD(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Vo;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Vo||(Vo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tD(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x${constructor(e,n,r,s,i,o,a,l,c,d,h,p=!0,f=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=h,this.retry=p,this.isUsingEmulator=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,y)=>{this.resolve_=_,this.reject_=y,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new ah(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===Vo.NO_ERROR,l=i.getStatus();if(!a||tD(l,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===Vo.ABORT;r(!1,new ah(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new ah(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());S$(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=Gw();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?Zk():Xk();o(l)}else{const l=Yk();o(l)}};this.canceled_?n(!1,new ah(!1,null,!0)):this.backoffId_=T$(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&I$(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ah{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function P$(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function R$(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function C$(t,e){e&&(t["X-Firebase-GMPID"]=e)}function k$(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function D$(t,e,n,r,s,i,o=!0,a=!1){const l=eD(t.urlParams),c=t.url+l,d=Object.assign({},t.headers);return C$(d,e),P$(d,n),R$(d,i),k$(d,r),new x$(c,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N$(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function O$(...t){const e=N$();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Qw())return new Blob(t);throw new dt(et.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function V$(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L$(t){if(typeof atob>"u")throw _$("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Sg{constructor(e,n){this.data=e,this.contentType=n||null}}function M$(t,e){switch(t){case Wr.RAW:return new Sg(nD(e));case Wr.BASE64:case Wr.BASE64URL:return new Sg(rD(t,e));case Wr.DATA_URL:return new Sg(U$(e),j$(e))}throw Gw()}function nD(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function F$(t){let e;try{e=decodeURIComponent(t)}catch{throw Zc(Wr.DATA_URL,"Malformed data URL.")}return nD(e)}function rD(t,e){switch(t){case Wr.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Zc(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Wr.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Zc(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=L$(e)}catch(s){throw s.message.includes("polyfill")?s:Zc(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class sD{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Zc(Wr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=B$(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function U$(t){const e=new sD(t);return e.base64?rD(Wr.BASE64,e.rest):F$(e.rest)}function j$(t){return new sD(t).contentType}function B$(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e,n){let r=0,s="";jS(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(jS(this.data_)){const r=this.data_,s=V$(r,e,n);return s===null?null:new as(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new as(r,!0)}}static getBlob(...e){if(Qw()){const n=e.map(r=>r instanceof as?r.data_:r);return new as(O$.apply(null,n))}else{const n=e.map(o=>am(o)?M$(Wr.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new as(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iD(t){let e;try{e=JSON.parse(t)}catch{return null}return A$(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $$(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function z$(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function oD(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q$(t,e){return e}class an{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||q$}}let lh=null;function H$(t){return!am(t)||t.length<2?t:oD(t)}function Yw(){if(lh)return lh;const t=[];t.push(new an("bucket")),t.push(new an("generation")),t.push(new an("metageneration")),t.push(new an("name","fullPath",!0));function e(i,o){return H$(o)}const n=new an("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new an("size");return s.xform=r,t.push(s),t.push(new an("timeCreated")),t.push(new an("updated")),t.push(new an("md5Hash",null,!0)),t.push(new an("cacheControl",null,!0)),t.push(new an("contentDisposition",null,!0)),t.push(new an("contentEncoding",null,!0)),t.push(new an("contentLanguage",null,!0)),t.push(new an("contentType",null,!0)),t.push(new an("metadata","customMetadata",!0)),lh=t,lh}function W$(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new jn(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function K$(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return W$(r,t),r}function aD(t,e,n){const r=iD(e);return r===null?null:K$(t,r,n)}function G$(t,e,n,r){const s=iD(e);if(s===null||!am(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const d=t.bucket,h=t.fullPath,p="/b/"+o(d)+"/o/"+o(h),f=md(p,n,r),_=eD({alt:"media",token:c});return f+_})[0]}function lD(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class ql{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ys(t){if(!t)throw Gw()}function Xw(t,e){function n(r,s){const i=aD(t,s,e);return ys(i!==null),i}return n}function Q$(t,e){function n(r,s){const i=aD(t,s,e);return ys(i!==null),G$(i,s,t.host,t._protocol)}return n}function gd(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=h$():s=d$():n.getStatus()===402?s=u$(t.bucket):n.getStatus()===403?s=f$(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function cD(t){const e=gd(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=c$(t.path)),i.serverResponse=s.serverResponse,i}return n}function Y$(t,e,n){const r=e.fullServerUrl(),s=md(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new ql(s,i,Xw(t,n),o);return a.errorHandler=cD(e),a}function X$(t,e,n){const r=e.fullServerUrl(),s=md(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new ql(s,i,Q$(t,n),o);return a.errorHandler=cD(e),a}function J$(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function uD(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=J$(null,e)),r}function dD(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let I="";for(let D=0;D<2;D++)I=I+Math.random().toString().slice(2);return I}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=uD(e,r,s),d=lD(c,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,p=`\r
--`+l+"--",f=as.getBlob(h,r,p);if(f===null)throw Jk();const _={name:c.fullPath},y=md(i,t.host,t._protocol),E="POST",w=t.maxUploadRetryTime,v=new ql(y,E,Xw(t,n),w);return v.urlParams=_,v.headers=o,v.body=f.uploadData(),v.errorHandler=gd(e),v}class np{constructor(e,n,r,s){this.current=e,this.total=n,this.finalized=!!r,this.metadata=s||null}}function Jw(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{ys(!1)}return ys(!!n&&(e||["active"]).indexOf(n)!==-1),n}function Z$(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o=uD(e,r,s),a={name:o.fullPath},l=md(i,t.host,t._protocol),c="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},h=lD(o,n),p=t.maxUploadRetryTime;function f(y){Jw(y);let E;try{E=y.getResponseHeader("X-Goog-Upload-URL")}catch{ys(!1)}return ys(am(E)),E}const _=new ql(l,c,f,p);return _.urlParams=a,_.headers=d,_.body=h,_.errorHandler=gd(e),_}function ez(t,e,n,r){const s={"X-Goog-Upload-Command":"query"};function i(c){const d=Jw(c,["active","final"]);let h=null;try{h=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{ys(!1)}h||ys(!1);const p=Number(h);return ys(!isNaN(p)),new np(p,r.size(),d==="final")}const o="POST",a=t.maxUploadRetryTime,l=new ql(n,o,i,a);return l.headers=s,l.errorHandler=gd(e),l}const $S=256*1024;function tz(t,e,n,r,s,i,o,a){const l=new np(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw y$();const c=l.total-l.current;let d=c;s>0&&(d=Math.min(d,s));const h=l.current,p=h+d;let f="";d===0?f="finalize":c===d?f="upload, finalize":f="upload";const _={"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":`${l.current}`},y=r.slice(h,p);if(y===null)throw Jk();function E(D,O){const V=Jw(D,["active","final"]),S=l.current+d,T=r.size();let b;return V==="final"?b=Xw(e,i)(D,O):b=null,new np(S,T,V==="final",b)}const w="POST",v=e.maxUploadRetryTime,I=new ql(n,w,E,v);return I.headers=_,I.body=y.uploadData(),I.progressCallback=a||null,I.errorHandler=gd(t),I}const wn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function bg(t){switch(t){case"running":case"pausing":case"canceling":return wn.RUNNING;case"paused":return wn.PAUSED;case"success":return wn.SUCCESS;case"canceled":return wn.CANCELED;case"error":return wn.ERROR;default:return wn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nz{constructor(e,n,r){if(b$(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fa(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class rz{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Vo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Vo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Vo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw wc("cannot .send() more than once");if(Cs(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw wc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw wc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw wc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw wc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class sz extends rz{initXhr(){this.xhr_.responseType="text"}}function yo(){return new sz}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iz{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=Yw(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(et.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const i=this.isExponentialBackoffExpired();if(tD(s.status,[]))if(i)s=Yk();else{this.sleepTime=Math.max(this.sleepTime*2,l$),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(et.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,i)=>{this._resolve=s,this._reject=i,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=Z$(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,yo,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._uploadUrl=i,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const s=ez(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(s,yo,n,r);this._request=i,i.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=$S*this._chunkMultiplier,n=new np(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,i)=>{let o;try{o=tz(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,yo,s,i,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){$S*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=Y$(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,yo,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=dD(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,yo,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=Xk(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=bg(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,s){const i=new nz(n||void 0,r||void 0,s||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(bg(this._state)){case wn.SUCCESS:fa(this._resolve.bind(null,this.snapshot))();break;case wn.CANCELED:case wn.ERROR:const n=this._reject;fa(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(bg(this._state)){case wn.RUNNING:case wn.PAUSED:e.next&&fa(e.next.bind(e,this.snapshot))();break;case wn.SUCCESS:e.complete&&fa(e.complete.bind(e))();break;case wn.CANCELED:case wn.ERROR:e.error&&fa(e.error.bind(e,this._error))();break;default:e.error&&fa(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e,n){this._service=e,n instanceof jn?this._location=n:this._location=jn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Yo(e,n)}get root(){const e=new jn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return oD(this._location.path)}get storage(){return this._service}get parent(){const e=$$(this._location.path);if(e===null)return null;const n=new jn(this._location.bucket,e);return new Yo(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw w$(e)}}function oz(t,e,n){t._throwIfRoot("uploadBytes");const r=dD(t.storage,t._location,Yw(),new as(e,!0),n);return t.storage.makeRequestWithTokens(r,yo).then(s=>({metadata:s,ref:t}))}function az(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new iz(t,new as(e),n)}function lz(t){t._throwIfRoot("getDownloadURL");const e=X$(t.storage,t._location,Yw());return t.storage.makeRequestWithTokens(e,yo).then(n=>{if(n===null)throw v$();return n})}function cz(t,e){const n=z$(t._location.path,e),r=new jn(t._location.bucket,n);return new Yo(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uz(t){return/^[A-Za-z]+:\/\//.test(t)}function dz(t,e){return new Yo(t,e)}function hD(t,e){if(t instanceof Zw){const n=t;if(n._bucket==null)throw g$();const r=new Yo(n,n._bucket);return e!=null?hD(r,e):r}else return e!==void 0?cz(t,e):t}function hz(t,e){if(e&&uz(e)){if(t instanceof Zw)return dz(t,e);throw wv("To use ref(service, url), the first argument must be a Storage instance.")}else return hD(t,e)}function zS(t,e){const n=e==null?void 0:e[Qk];return n==null?null:jn.makeFromBucketSpec(n,t)}function fz(t,e,n,r={}){t.host=`${e}:${n}`;const s=Cs(e);s&&($_(`https://${t.host}/b`),MP("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:PU(i,t.app.options.projectId))}class Zw{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=Gk,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=o$,this._maxUploadRetryTime=a$,this._requests=new Set,s!=null?this._bucket=jn.makeFromBucketSpec(s,this._host):this._bucket=zS(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=jn.makeFromBucketSpec(this._url,e):this._bucket=zS(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){BS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){BS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Vn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Yo(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new E$(Zk());{const o=D$(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const qS="@firebase/storage",HS="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fD="storage";function R8(t,e,n){return t=He(t),oz(t,e,n)}function C8(t,e,n){return t=He(t),az(t,e,n)}function k8(t){return t=He(t),lz(t)}function D8(t,e){return t=He(t),hz(t,e)}function pz(t=WP(),e){t=He(t);const r=Dp(t,fD).getImmediate({identifier:e}),s=VP("storage");return s&&mz(r,...s),r}function mz(t,e,n,r={}){fz(t,e,n,r)}function gz(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Zw(n,r,s,e,ed)}function yz(){Di(new Ss(fD,gz,"PUBLIC").setMultipleInstances(!0)),nr(qS,HS,""),nr(qS,HS,"esm2020")}yz();const Ev={apiKey:"AIzaSyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s",authDomain:"voda-c6abd.firebaseapp.com",projectId:"voda-c6abd",storageBucket:"voda-c6abd.appspot.com",messagingSenderId:"483702062341",appId:"1:483702062341:web:b1ff06ad175cb7ae428b6c"};console.log(" Initializing Firebase with config:",{projectId:Ev.projectId,authDomain:Ev.authDomain,emulatorMode:!1});const lm=HP(Ev),Yn=L3(lm,{persistence:[sj,Wy]});console.log(" Firebase Auth initialized with browserLocalPersistence (fallback to inMemory)");const Q=Pk(lm,{experimentalAutoDetectLongPolling:!0});try{_R("error")}catch{}const e0=s$(lm,"us-central1"),vz=pz(lm);console.log(" Firebase initialized successfully");const _z=async()=>{try{console.log(" Offline persistence disabled (env flag or emulator mode)"),console.log(" Firestore features configured successfully")}catch(t){console.error(" Error configuring Firestore features:",t)}};setTimeout(_z,100);let ho=0;const Ag=3,wz=1e3,pD=async t=>{var e,n;if(console.error(" Firestore connection error:",t),(t.code==="unavailable"||t.code==="failed-precondition"||(e=t.message)!=null&&e.includes("ERR_ABORTED")||(n=t.message)!=null&&n.includes("UNAVAILABLE"))&&ho<Ag){ho++;const r=Math.min(wz*Math.pow(2,ho-1),1e4);console.log(` Attempting to reconnect (${ho}/${Ag}) in ${r}ms...`);try{await Bw(Q),await new Promise(s=>setTimeout(s,r)),await jw(Q),console.log(" Firestore reconnected successfully"),ho=0}catch(s){console.error(" Failed to reconnect:",s),ho>=Ag&&(console.error(" Maximum reconnection attempts reached."),Ez())}}},Ez=()=>{const t=document.createElement("div");t.style.cssText=`
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #f8d7da;
    color: #721c24;
    padding: 20px;
    border-radius: 8px;
    border: 1px solid #f5c6cb;
    z-index: 10000;
    text-align: center;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    max-width: 400px;
  `,t.innerHTML=`
    <h3 style="margin: 0 0 10px 0;">  </h3>
    <p style="margin: 0 0 15px 0;">   .     .</p>
    <button onclick="window.location.reload()" style="
      background: #dc3545;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
    ">  </button>
  `,document.body.appendChild(t),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},1e4)};window.addEventListener("online",async()=>{console.log(" Network back online, enabling Firestore...");try{await jw(Q),ho=0,console.log(" Firestore network enabled")}catch(t){console.error(" Failed to enable Firestore network:",t)}});window.addEventListener("offline",async()=>{console.log(" Network offline, disabling Firestore network...");try{await Bw(Q),console.log(" Firestore network disabled")}catch(t){console.error(" Failed to disable Firestore network:",t)}});window.addEventListener("unhandledrejection",t=>{var e,n,r,s,i,o;(((e=t.reason)==null?void 0:e.code)==="unavailable"||((n=t.reason)==null?void 0:n.code)==="failed-precondition"||(s=(r=t.reason)==null?void 0:r.message)!=null&&s.includes("ERR_ABORTED")||(o=(i=t.reason)==null?void 0:i.message)!=null&&o.includes("UNAVAILABLE"))&&(pD(t.reason),t.preventDefault())});console.log("Using Firebase Production Environment");const xg=Object.freeze(Object.defineProperty({__proto__:null,auth:Yn,db:Q,functions:e0,handleFirestoreError:pD,storage:vz},Symbol.toStringTag,{value:"Module"})),Le=t=>{if(t&&typeof t=="object"&&typeof t.toDate=="function")return t.toDate();if(t instanceof Date)return t;if(typeof t=="number")return new Date(t);if(typeof t=="string"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return new Date},Tz=t=>{if(t===null)return!1;const e=Object.getPrototypeOf(t);return e===Object.prototype||e===null},ju=t=>{if(t===void 0)return;if(t===null)return null;if(Array.isArray(t))return t.map(n=>ju(n)).filter(n=>n!==void 0);if(t instanceof Date||!Tz(t))return t;const e={};for(const[n,r]of Object.entries(t)){const s=ju(r);s!==void 0&&(e[n]=s)}return e},$h={async create(t){await ji(ve(Q,"profiles",t.userId),{userId:t.userId,shopId:t.shopId,role:t.role,fullName:t.fullName,phone:t.phone,createdAt:Ae()})},async getById(t){const e=ve(Q,"profiles",t),n=await St(e);if(n.exists()){const r=n.data();return{userId:n.id,...r,createdAt:Le(r.createdAt)}}return null},async update(t,e){const n=ve(Q,"profiles",t);await st(n,{...e,updatedAt:Ae()})},async getByShopId(t){const e=Re(ye(Q,"profiles"),be("shopId","==",t));return(await Ne(e)).docs.map(r=>{const s=r.data();return{userId:r.id,...s,createdAt:Le(s.createdAt)}})}},Tv={async create(t){return(await Bi(ye(Q,"referrals"),{...t,createdAt:Ae(),updatedAt:Ae()})).id},async getByReferrerId(t){try{const e=Re(ye(Q,"referrals"),be("referrerId","==",t),ps("createdAt","desc"));return(await Ne(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:Le(r.data().createdAt),updatedAt:Le(r.data().updatedAt)}))}catch(e){if(String((e==null?void 0:e.message)||"").includes("requires an index")){const r=Re(ye(Q,"referrals"),be("referrerId","==",t));return(await Ne(r)).docs.map(i=>({id:i.id,...i.data(),createdAt:Le(i.data().createdAt),updatedAt:Le(i.data().updatedAt)})).sort((i,o)=>{var a,l,c,d;return(((l=(a=o.createdAt)==null?void 0:a.getTime)==null?void 0:l.call(a))||0)-(((d=(c=i.createdAt)==null?void 0:c.getTime)==null?void 0:d.call(c))||0)})}throw e}},async getByReferralCode(t){const e=Re(ye(Q,"referrals"),be("referralCode","==",t),Qo(1)),n=await Ne(e);if(n.empty)return null;const r=n.docs[0];return{id:r.id,...r.data(),createdAt:Le(r.data().createdAt),updatedAt:Le(r.data().updatedAt)}},async updateStatus(t,e){await st(ve(Q,"referrals",t),{status:e,updatedAt:Ae()})},generateReferralCode(t){const e=Date.now().toString(36);return`REF_${t.slice(-6)}_${e}`.toUpperCase()}},mD={async getByUserId(t){const e=Re(ye(Q,"profiles"),be("userId","==",t)),n=await Ne(e);if(!n.empty){const r=n.docs[0],s=r.data();return{userId:r.id,...s,createdAt:Le(s.createdAt),updatedAt:Le(s.updatedAt)}}return null},async update(t,e){const n=Re(ye(Q,"profiles"),be("userId","==",t)),r=await Ne(n);if(!r.empty){const s=ve(Q,"profiles",r.docs[0].id);await st(s,{...e,updatedAt:Ae()})}}},Iz={async create(t){return(await Bi(ye(Q,"merchantWallets"),{...t,transferLimit:t.transferLimit||2e5,withdrawLimit:t.withdrawLimit||2e5,transferUsage:t.transferUsage||0,withdrawUsage:t.withdrawUsage||0,createdAt:Ae(),updatedAt:Ae()})).id},async getByMerchantId(t){const e=Re(ye(Q,"merchantWallets"),be("merchantUserId","==",t)),r=(await Ne(e)).docs.map(a=>{const l=a.data();return{id:a.id,...l,transferLimit:l.transferLimit||2e5,withdrawLimit:l.withdrawLimit||2e5,transferUsage:l.transferUsage||0,withdrawUsage:l.withdrawUsage||0,createdAt:Le(l.createdAt),updatedAt:Le(l.updatedAt)}});if(r.length>0)return r.sort((a,l)=>{const c=a.createdAt,d=l.createdAt;return c&&d?d.getTime()-c.getTime():c&&!d?-1:!c&&d?1:0});const s=Re(ye(Q,"wallets"),be("userId","==",t));return(await Ne(s)).docs.map(a=>{const l=a.data();return{id:a.id,merchantUserId:l.userId||t,provider:l.provider||"instapay",msisdn:l.msisdn||"",label:l.name||l.label||"",isActive:l.isActive!==!1,dailyLimit:l.dailyLimit||2e5,monthlyLimit:l.monthlyLimit||2e5,transferLimit:l.transferLimit||l.monthlyTransferLimit||2e5,withdrawLimit:l.withdrawLimit||l.monthlyWithdrawLimit||2e5,transferUsage:l.transferUsage||l.monthlyTransferUsage||0,withdrawUsage:l.withdrawUsage||l.monthlyWithdrawUsage||0,dailyTransferLimit:l.dailyTransferLimit,dailyWithdrawLimit:l.dailyWithdrawLimit,createdAt:Le(l.createdAt),updatedAt:Le(l.updatedAt)}}).sort((a,l)=>{const c=a.createdAt,d=l.createdAt;return c&&d?d.getTime()-c.getTime():c&&!d?-1:!c&&d?1:0})},async getById(t){const e=ve(Q,"merchantWallets",t),n=await St(e);if(n.exists()){const r=n.data();return{id:n.id,...r,transferLimit:r.transferLimit||2e5,withdrawLimit:r.withdrawLimit||2e5,transferUsage:r.transferUsage||0,withdrawUsage:r.withdrawUsage||0,createdAt:Le(r.createdAt),updatedAt:Le(r.updatedAt)}}return null},async update(t,e){const n=ve(Q,"merchantWallets",t);await st(n,{...e,updatedAt:Ae()})},async updateUsage(t,e,n){const r=ve(Q,"merchantWallets",t),s={updatedAt:Ae()};e!==void 0&&(s.transferUsage=e),n!==void 0&&(s.withdrawUsage=n),await st(r,s)},async resetDailyUsage(t){const n=(await this.getByMerchantId(t)).map(r=>this.updateUsage(r.id,0,0));await Promise.all(n)},async reassignByMsisdns(t,e){try{if(!e)throw new Error("merchantUserId   ");if(!Array.isArray(t)||t.length===0)return{updated:0,failed:0};const r=((o,a)=>o.reduce((l,c,d)=>(d%a===0&&l.push(o.slice(d,d+a)),l),[]))(t.map(o=>o.trim()).filter(Boolean),10);let s=0,i=0;for(const o of r){const a=Re(ye(Q,"merchantWallets"),be("msisdn","in",o)),c=(await Ne(a)).docs.map(async d=>{try{const h=d.data();if(h.merchantUserId&&h.merchantUserId!==e)return;await st(d.ref,{merchantUserId:e,updatedAt:Ae()}),s+=1}catch(h){console.error("Failed to reassign wallet",d.id,h),i+=1}});await Promise.allSettled(c)}return{updated:s,failed:i}}catch(n){return console.error("Error reassigning wallets by msisdns:",n),{updated:0,failed:t.length}}},async delete(t){const e=ve(Q,"merchantWallets",t);await Mn(e)}},gD={async create(t){try{console.log("Creating transaction:",t);const{calculateCommission:e,calculateProfit:n}=await Oe(async()=>{const{calculateCommission:c,calculateProfit:d}=await Promise.resolve().then(()=>Qz);return{calculateCommission:c,calculateProfit:d}},void 0,import.meta.url),r=t.commission!==void 0?t.commission:e(t.amount,t.txnType),s=n(t.amount,t.txnType),i=t.merchantUserId||t.createdBy;i||console.warn("   merchantUserId  createdBy         .");const o=Object.fromEntries(Object.entries(t).filter(([c,d])=>d!==void 0)),a={...o,merchantUserId:i,commission:r,profit:s,createdAt:o.createdAt?o.createdAt instanceof Date?o.createdAt:new Date(String(o.createdAt)):new Date,uploadedAt:Ae(),confirmedAt:o.confirmedAt?o.confirmedAt instanceof Date?o.confirmedAt:new Date(String(o.confirmedAt)):null},l=await Bi(ye(Q,"transactions"),a);if(console.log("Transaction created with ID:",l.id,"Profit:",s),s>0){const{ProfitService:c}=await Oe(async()=>{const{ProfitService:d}=await import("./profitService-vyye6JvC.js").then(h=>h.p);return{ProfitService:d}},[],import.meta.url);c.addProfit(s),console.log("     :",s,"")}return await this.updateLineUsage(t.lineId,t.amount),l.id}catch(e){throw console.error("Error creating transaction:",e),e}},async updateLineUsage(t,e){try{console.log("Updating line usage:",{lineId:t,amount:e})}catch(n){console.error("Error updating line usage:",n)}},async getByShopId(t){const e=Re(ye(Q,"transactions"),be("shopId","==",t),ps("createdAt","desc"));return(await Ne(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:Le(r.data().createdAt),confirmedAt:r.data().confirmedAt?Le(r.data().confirmedAt):void 0}))},async getByMerchantId(t){const e=Re(ye(Q,"transactions"),be("merchantUserId","==",t),ps("createdAt","desc"));return(await Ne(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:Le(r.data().createdAt),confirmedAt:r.data().confirmedAt?Le(r.data().confirmedAt):void 0}))},async getByUserId(t){const e=Re(ye(Q,"transactions"),be("merchantUserId","==",t)),n=Re(ye(Q,"transactions"),be("userId","==",t)),[r,s]=await Promise.all([Ne(e),Ne(n)]),i=[...r.docs,...s.docs],o=new Set,a=[];for(const l of i){if(o.has(l.id))continue;o.add(l.id);const c=l.data();a.push({id:l.id,...c,createdAt:Le(c.createdAt),confirmedAt:c.confirmedAt?Le(c.confirmedAt):void 0})}return a.sort((l,c)=>{const d=l.createdAt,h=c.createdAt;return d&&h?h.getTime()-d.getTime():d&&!h?-1:!d&&h?1:0})},async updateStatus(t,e,n){const r=ve(Q,"transactions",t);await st(r,{status:e,confirmedAt:n?n instanceof Date?n:new Date(String(n)):null})}},Sz={async log(t,e,n,r,s){await Bi(ye(Q,"auditLogs"),{actor:s,action:t,entity:e,entityId:n,meta:r,createdAt:Ae()})},async getLogs(t=100){const e=Re(ye(Q,"auditLogs"),ps("createdAt","desc"),Qo(t));return(await Ne(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:Le(r.data().createdAt)}))},async getDeletedTransactions(){try{const t=Re(ye(Q,"deletedTransactions"),ps("deletedAt","desc"));return(await Ne(t)).docs.map(n=>({id:n.id,...n.data(),deletedAt:Le(n.data().deletedAt)}))}catch(t){return console.error("Error getting deleted transactions:",t),[]}},async getDeletedTransactionsByUser(t){try{const e=Re(ye(Q,"deletedTransactions"),be("userId","==",t),ps("deletedAt","desc"));return(await Ne(e)).docs.map(r=>({id:r.id,...r.data(),deletedAt:Le(r.data().deletedAt)}))}catch(e){if(String((e==null?void 0:e.message)||"").includes("requires an index"))try{const r=Re(ye(Q,"deletedTransactions"),be("userId","==",t));return(await Ne(r)).docs.map(o=>({id:o.id,...o.data(),deletedAt:Le(o.data().deletedAt)})).sort((o,a)=>{const l=(o.deletedAt instanceof Date?o.deletedAt:new Date(o.deletedAt)).getTime();return(a.deletedAt instanceof Date?a.deletedAt:new Date(a.deletedAt)).getTime()-l})}catch(r){return console.error("Fallback error getting deleted transactions by user:",r),[]}return console.error("Error getting deleted transactions by user:",e),[]}},async saveDeletedTransaction(t){var e;try{if(console.log("      Firebase:",t.id),!t.userId)throw new Error("     ");if(!t.originalTransactionId)throw new Error("   ");const n=t.reference??t.transactionReference??((e=t.receipt)==null?void 0:e.reference),r={...t,deletedAt:Ae(),userId:t.userId,originalTransactionId:t.originalTransactionId,type:t.type||"unknown",amount:t.amount||0,status:t.status||"deleted",...n?{reference:n}:{}};console.log("    :",r);let s=3,i;for(;s>0;)try{const o=await Bi(ye(Q,"deletedTransactions"),r);console.log("       :",o.id);return}catch(o){i=o,s--,console.warn(`       : ${s}`,o),s>0&&await new Promise(a=>setTimeout(a,1e3))}throw console.error("        "),i}catch(n){throw console.error("     :",n),n instanceof Error&&(n.message.includes("network")?console.error("    -    "):n.message.includes("permission")?console.error("    -    Firestore"):n.message.includes("quota")&&console.error("     -    Firebase")),n}},async permanentlyDeleteTransaction(t,e){try{const n=Re(ye(Q,"deletedTransactions"),be("originalTransactionId","==",t),be("userId","==",e)),s=(await Ne(n)).docs.map(i=>Mn(i.ref));await Promise.all(s),console.log("     Firebase:",t);try{const i=Re(ye(Q,"userTransactions"),be("userId","==",e)),a=(await Ne(i)).docs.filter(l=>{var d,h;const c=l.data();return l.id===t||c.id===t||c.transactionId===t||c.originalTransactionId===t||((d=c.receipt)==null?void 0:d.id)===t||((h=c.receipt)==null?void 0:h.transactionId)===t});a.length>0&&(console.log(`  ${a.length}   userTransactions`),await Promise.all(a.map(l=>Mn(l.ref))))}catch(i){console.warn("   userTransactions   :",i)}try{const i=ve(Q,"transactions",t);(await St(i)).exists()&&(console.log("     transactions  "),await Mn(i));const a=Re(ye(Q,"transactions"),be("transactionId","==",t)),l=await Ne(a);l.empty||(console.log(`  ${l.size}   transactions  transactionId`),await Promise.all(l.docs.map(h=>Mn(h.ref))));const c=Re(ye(Q,"transactions"),be("originalTransactionId","==",t)),d=await Ne(c);d.empty||(console.log(`  ${d.size}   transactions  originalTransactionId`),await Promise.all(d.docs.map(h=>Mn(h.ref))))}catch(i){console.warn("    transactions   :",i)}}catch(n){throw console.error("Error permanently deleting transaction:",n),n}}},bz={async add(t){return(await Bi(ye(Q,"daily_reports_archive"),{userId:t.userId,reportDate:t.reportDate,totalTransactions:t.totalTransactions,totalAmount:t.totalAmount,totalWithdrawn:t.totalWithdrawn,totalSent:t.totalSent,profit:t.profit??null,walletId:t.walletId??null,createdAt:Ae()})).id},async getByUser(t,e=50){try{const n=Re(ye(Q,"daily_reports_archive"),be("userId","==",t),Qo(e)),s=(await Ne(n)).docs.map(i=>({id:i.id,userId:String(i.data().userId),reportDate:String(i.data().reportDate),totalTransactions:Number(i.data().totalTransactions||0),totalAmount:Number(i.data().totalAmount||0),totalWithdrawn:Number(i.data().totalWithdrawn||0),totalSent:Number(i.data().totalSent||0),profit:i.data().profit!==void 0?Number(i.data().profit):void 0,walletId:i.data().walletId??null,createdAt:Le(i.data().createdAt)}));return s.sort((i,o)=>i.reportDate<o.reportDate?1:-1),s}catch(n){throw console.error("Error loading daily reports archive:",n),n}},async deleteOlderThan(t,e=10){try{const n=new Date;n.setDate(n.getDate()-e);const r=Re(ye(Q,"daily_reports_archive"),be("userId","==",t)),s=await Ne(r);let i=0;for(const o of s.docs){const a=Le(o.data().createdAt);a&&a.getTime()<n.getTime()&&(await Mn(o.ref),i++)}return i>0&&console.log(`   ${i}      ${e}   ${t}`),i}catch(n){throw console.error("Error deleting old daily reports archive:",n),n}},async trimToMaxCount(t,e=10){try{const n=Re(ye(Q,"daily_reports_archive"),be("userId","==",t)),s=(await Ne(n)).docs.map(o=>({ref:o.ref,reportDate:String(o.data().reportDate||""),createdAt:Le(o.data().createdAt)}));if(s.sort((o,a)=>{var d,h;if(o.reportDate&&a.reportDate)return o.reportDate<a.reportDate?1:-1;const l=((d=o.createdAt)==null?void 0:d.getTime())??0;return(((h=a.createdAt)==null?void 0:h.getTime())??0)-l}),s.length<=e)return 0;const i=s.slice(e);for(const o of i)await Mn(o.ref);return console.log(`     ${t}  ${e}   ${i.length}`),i.length}catch(n){throw console.error("Error trimming daily reports archive to max count:",n),n}}},yD={async getUserData(t){try{console.log("     :",{userId:t});const e=ve(Q,"users",t),n=await St(e);if(n.exists()){const r=n.data();return console.log("     :",r),{...r,createdAt:Le(r.createdAt),updatedAt:Le(r.updatedAt)}}else{console.log("       ");const r={walletBalances:{},createdAt:new Date,updatedAt:new Date};return await this.saveUserData(t,r),console.log("     "),r}}catch(e){return console.error("      :",e),{walletBalances:{},createdAt:new Date,updatedAt:new Date}}},async saveUserData(t,e){try{const n=ve(Q,"users",t),r=ju(e);await ji(n,{...r||{},updatedAt:Ae()},{merge:!0})}catch(n){throw console.error("Error saving user data:",n),n}},async updateUserData(t,e){try{console.log("      Firebase:",{userId:t,data:e});const n=ve(Q,"users",t),r=Object.fromEntries(Object.entries(e).filter(([l,c])=>c!==void 0)),s=ju(r);let i={};try{const l=await St(n);i=l.exists()?l.data():{},console.log("  :",i)}catch(l){console.warn("         :",l)}const o={...i,...s,updatedAt:Ae()};console.log("   :",o);let a=3;for(;a>0;)try{await ji(n,o,{merge:!0}),console.log("     ");return}catch(l){if(a--,console.warn(`     : ${a}`,l),a===0)throw l;await new Promise(c=>setTimeout(c,1e3))}}catch(n){throw console.error("     :",n),n instanceof Error&&(n.message.includes("network")?console.error("    -    "):n.message.includes("permission")?console.error("    -    Firestore"):n.message.includes("quota")&&console.error("     -    Firebase")),n}},async getUserWallets(t){try{const e=await this.getUserData(t);return(e==null?void 0:e.wallets)||[]}catch(e){return console.error("Error getting user wallets:",e),[]}},async getUserTransactions(t){try{const e=Re(ye(Q,"userTransactions"),be("userId","==",t));return(await Ne(e)).docs.map(s=>({id:s.id,...s.data(),createdAt:Le(s.data().createdAt)})).filter(s=>(s==null?void 0:s.status)!=="cancelled"&&!(s!=null&&s.isDeleted)).sort((s,i)=>{const o=s.createdAt?new Date(s.createdAt).getTime():0;return(i.createdAt?new Date(i.createdAt).getTime():0)-o})}catch(e){console.error("Error getting user transactions:",e);const n=(e==null?void 0:e.code)||"";if(n==="permission-denied"||n==="unauthenticated")throw e;return[]}},async saveUserTransaction(t,e){try{const n=Object.fromEntries(Object.entries(e??{}).filter(([s,i])=>i!==void 0));try{const s=n.reference;if(s){const a=Re(ye(Q,"deletedTransactions"),be("userId","==",t),be("reference","==",s));if(!(await Ne(a)).empty)return console.log("          ."),"skip-deleted"}const i=Re(ye(Q,"deletedTransactions"),be("userId","==",t),ps("deletedAt","desc"),Qo(20)),o=await Ne(i);if(!o.empty){const a=n.senderMsisdn||n.senderPhone||n.sender_msisdn,l=n.receiverMsisdn||n.receiverPhone||n.receiver_msisdn,c=Number(n.amount||0),d=n.createdAt?new Date(String(n.createdAt)):new Date,h=10*60*1e3;if(o.docs.find(f=>{const _=f.data(),y=_.senderMsisdn||_.senderPhone||_.sender_msisdn,E=_.receiverMsisdn||_.receiverPhone||_.receiver_msisdn,w=Number(_.amount||0),v=_.createdAt?new Date(String(_.createdAt)):d;return Math.abs(v.getTime()-d.getTime())<=h&&w===c&&y===a&&E===l}))return console.log("        ."),"skip-deleted"}}catch(s){console.warn("           :",s)}try{const s=Re(ye(Q,"userTransactions"),be("userId","==",t));if(n.transactionId){const f=Re(ye(Q,"userTransactions"),be("userId","==",t),be("transactionId","==",n.transactionId)),_=await Ne(f);if(!_.empty){const y=_.docs[0];return await st(ve(Q,"userTransactions",y.id),{...n,uploadedAt:Ae()}),y.id}}if(n.reference){const f=Re(ye(Q,"userTransactions"),be("userId","==",t),be("reference","==",n.reference)),_=await Ne(f);if(!_.empty){const y=_.docs[0];return await st(ve(Q,"userTransactions",y.id),{...n,uploadedAt:Ae()}),y.id}}const i=Re(ye(Q,"userTransactions"),be("userId","==",t),ps("createdAt","desc"),Qo(20)),o=await Ne(i),a=n.senderMsisdn||n.senderPhone||n.sender_msisdn,l=n.receiverMsisdn||n.receiverPhone||n.receiver_msisdn,c=Number(n.amount||0),d=n.createdAt?new Date(String(n.createdAt)):new Date,h=5*60*1e3,p=o.docs.find(f=>{const _=f.data(),y=_.senderMsisdn||_.senderPhone||_.sender_msisdn,E=_.receiverMsisdn||_.receiverPhone||_.receiver_msisdn,w=Number(_.amount||0),v=Le(_.createdAt);return Math.abs(v.getTime()-d.getTime())<=h&&w===c&&y===a&&E===l});if(p)return await st(ve(Q,"userTransactions",p.id),{...n,uploadedAt:Ae()}),p.id}catch(s){console.warn("      saveUserTransaction  :",s)}return(await Bi(ye(Q,"userTransactions"),{...n,userId:t,createdAt:n.createdAt?n.createdAt instanceof Date?n.createdAt:new Date(String(n.createdAt)):Ae(),uploadedAt:Ae()})).id}catch(n){throw console.error("Error saving user transaction:",n),n}},async removeUserTransaction(t,e){try{console.log("     userTransactions:",{userId:t,transactionId:e});const n=Re(ye(Q,"userTransactions"),be("userId","==",t)),r=await Ne(n);console.log(`    ${r.docs.length}  `);const s=r.docs.filter(i=>{var d,h;const o=i.data(),a=i.id,c=[o.id===e,o.transactionId===e,a===e,o.originalTransactionId===e,((d=o.receipt)==null?void 0:d.transactionId)===e,((h=o.receipt)==null?void 0:h.id)===e].some(p=>p===!0);return c&&console.log("     :",{docId:a,dataId:o.id,transactionId:o.transactionId,originalTransactionId:o.originalTransactionId,searchingFor:e}),c});if(s.length>0){console.log(`   ${s.length}    `);const i=s.map(async o=>{console.log("   :",o.id),await Mn(o.ref)});await Promise.all(i),console.log("        userTransactions:",e);try{const o=ve(Q,"transactions",e);if((await St(o)).exists())console.log("     transactions   "),await Mn(o);else{const l=Re(ye(Q,"transactions"),be("transactionId","==",e)),c=await Ne(l);c.empty||(console.log(`   ${c.size}   transactions  transactionId `),await Promise.all(c.docs.map(p=>Mn(p.ref))));const d=Re(ye(Q,"transactions"),be("originalTransactionId","==",e)),h=await Ne(d);h.empty||(console.log(`   ${h.size}   transactions  originalTransactionId `),await Promise.all(h.docs.map(p=>Mn(p.ref))))}}catch(o){console.warn("      transactions   :",o)}return}console.log("       userTransactions (   ):",e)}catch(n){throw console.error("      userTransactions:",n),n}}},N8=Object.freeze(Object.defineProperty({__proto__:null,auditLogService:Sz,dailyReportsArchiveService:bz,merchantWalletService:Iz,profileService:$h,profileServiceExtra:mD,referralService:Tv,sanitizeFirestoreData:ju,transactionService:gD,userDataService:yD},Symbol.toStringTag,{value:"Module"}));var Az=(t=>(t.MONTHLY="monthly",t.QUARTERLY="quarterly",t.YEARLY="yearly",t.LIFETIME="lifetime",t.ZERO="zero",t))(Az||{});const xz=(t,e=new Date)=>{const n=new Date(e);switch(t){case"monthly":{const r=new Date(n);return r.setDate(r.getDate()+30),r}case"quarterly":{const r=new Date(n);return r.setDate(r.getDate()+90),r}case"yearly":{const r=new Date(n);return r.setDate(r.getDate()+365),r}case"lifetime":return null;case"zero":return null;default:return null}},zh=t=>{var s,i;if(!t||!t.isActive)return!1;if(t.planType==="lifetime")return!0;if(!t.endDate){const o=new Date,a=t.activatedAt,l=(s=a==null?void 0:a.toDate)!=null&&s.call(a)?a.toDate():t.activatedAt?new Date(t.activatedAt):null;return l&&o.getTime()-l.getTime()<4*60*60*1e3,!0}const e=new Date,n=t.endDate,r=n!=null&&n.toDate?n.toDate():new Date(n);if(!r||isNaN(r.getTime())){const o=t.activatedAt,a=(i=o==null?void 0:o.toDate)!=null&&i.call(o)?o.toDate():t.activatedAt?new Date(t.activatedAt):null;return a&&e.getTime()-a.getTime()<4*60*60*1e3,!0}return e<=r},Pz=t=>{if(!t||!t.isActive)return null;if(t.planType==="lifetime")return-1;if(!t.endDate)return null;const e=new Date,n=t.endDate,r=n!=null&&n.toDate?n.toDate():new Date(n);if(!r||isNaN(r.getTime()))return null;const s=r.getTime()-e.getTime(),i=Math.ceil(s/(1e3*60*60*24));return i>0?i:0},O8=async(t,e,n,r)=>{try{const s=new Date,i=xz(e,s),o={planType:e,startDate:s,endDate:i,isActive:!0,activatedBy:n,activatedAt:s};console.log(" Activating subscription for user:",{userId:t,planType:e,adminId:n,subscriptionData:o});const a=ve(Q,"users",t);if(await st(a,{subscription:o,isActive:!0,approved:!0,isOnFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,updatedAt:new Date}),console.log(" Subscription data updated in Firestore"),typeof window<"u"){const l=new CustomEvent("subscriptionActivated",{detail:{userId:t,planType:e,timestamp:new Date().toISOString()}});window.dispatchEvent(l),console.log(" Subscription activation event dispatched:",{userId:t,planType:e});const c=new CustomEvent("userSubscriptionUpdated",{detail:{userId:t,planType:e,isActive:!0,timestamp:new Date().toISOString()}});window.dispatchEvent(c),console.log(" Global subscription update event dispatched")}console.log(`    ${e}  ${t}`)}catch(s){throw console.error("    :",s),new Error("   ")}},V8=async t=>{try{const e=ve(Q,"users",t);await st(e,{"subscription.isActive":!1,isActive:!1,isOnFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,updatedAt:new Date}),console.log(`      ${t}`)}catch(e){throw console.error("     :",e),new Error("    ")}},L8=async t=>{try{const e=ve(Q,"users",t),n=await St(e);return n.exists()&&n.data().subscription||null}catch(e){return console.error("      :",e),null}},M8=t=>{switch(t){case"monthly":return"";case"quarterly":return" ";case"yearly":return"";case"lifetime":return" ";case"zero":return"";default:return" "}},F8=t=>{if(!t)return"text-gray-500";if(!t.isActive)return"text-red-500";if(t.planType==="lifetime")return"text-green-600";const e=Pz(t);return e===null||e<=0?"text-red-500":e<=7?"text-yellow-500":"text-green-500"},U8=t=>t?(t instanceof Date?t:new Date(t)).toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric"}):" ";class t0{static async startFreeTrialFromAdmin(e){try{const n=ve(Q,"users",e),r=await St(n);if(!r.exists())return{success:!1,message:"  "};if(r.data().hasUsedFreeTrial)return{success:!1,message:"       "};const i=new Date,o=await this.getTrialDurationHours(),a=new Date(i.getTime()+o*60*60*1e3);return await st(n,{hasUsedFreeTrial:!0,freeTrialStartDate:i,freeTrialEndDate:a,isOnFreeTrial:!0,isActive:!0,approved:!0,updatedAt:Ae()}),{success:!0,message:`     ${o} ${o>=3&&o<=10?"":o===2?"":""}`}}catch(n){return console.error("Error starting admin free trial:",n),{success:!1,message:"     "}}}static async startFreeTrial(e){try{const n=ve(Q,"users",e),r=await St(n);if(!r.exists())return{success:!1,message:"  "};if(r.data().hasUsedFreeTrial)return{success:!1,message:"     "};const i=new Date,o=await this.getTrialDurationHours(),a=new Date(i.getTime()+o*60*60*1e3);return await st(n,{hasUsedFreeTrial:!0,freeTrialStartDate:i,freeTrialEndDate:a,isOnFreeTrial:!0,isActive:!0,approved:!0,updatedAt:Ae()}),{success:!0,message:`     ${o} ${o>=3&&o<=10?"":o===2?"":""}`}}catch(n){return console.error("    :",n),{success:!1,message:"     "}}}static async checkTrialValidity(e){var n,r,s,i;try{const o=ve(Q,"users",e),a=await St(o);if(!a.exists())return{isValid:!1,isExpired:!1,hoursRemaining:0,hasUsedTrial:!1};const l=a.data(),c=l.hasUsedFreeTrial||!1,d=l.isOnFreeTrial||!1;let h=(r=(n=l.freeTrialEndDate)==null?void 0:n.toDate)!=null&&r.call(n)?l.freeTrialEndDate.toDate():l.freeTrialEndDate?new Date(l.freeTrialEndDate):null;const p=(i=(s=l.freeTrialStartDate)==null?void 0:s.toDate)!=null&&i.call(s)?l.freeTrialStartDate.toDate():l.freeTrialStartDate?new Date(l.freeTrialStartDate):null;if(!c||!d||!h)return{isValid:!1,isExpired:!1,hoursRemaining:0,hasUsedTrial:c};const f=new Date;if(f>h){const w=zh(l.subscription);return await st(o,{isOnFreeTrial:!1,isActive:w,approved:w,updatedAt:Ae()}),!w&&typeof window<"u"&&setTimeout(()=>{window.location.href="/user/pending-approval"},1e3),{isValid:!1,isExpired:!0,hoursRemaining:0,hasUsedTrial:c}}try{const w=await this.getTrialDurationHours();if(p&&w&&Number.isFinite(w)&&Math.round((h.getTime()-p.getTime())/36e5)<w){const I=new Date(p.getTime()+w*60*60*1e3);I.getTime()>h.getTime()&&(await st(o,{freeTrialEndDate:I,updatedAt:Ae()}),h=I)}}catch(w){console.warn("checkTrialValidity: failed to auto-extend to configured hours",w)}const y=h.getTime()-f.getTime();return{isValid:!0,isExpired:!1,hoursRemaining:Math.ceil(y/(1e3*3600)),hasUsedTrial:c}}catch(o){return console.error("      :",o),{isValid:!1,isExpired:!1,hoursRemaining:0,hasUsedTrial:!1}}}static async getTrialData(e){var n,r;try{const s=ve(Q,"users",e),i=await St(s);if(!i.exists())return{hasUsedFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,isOnFreeTrial:!1};const o=i.data();return{hasUsedFreeTrial:o.hasUsedFreeTrial||!1,freeTrialStartDate:((n=o.freeTrialStartDate)==null?void 0:n.toDate())||null,freeTrialEndDate:((r=o.freeTrialEndDate)==null?void 0:r.toDate())||null,isOnFreeTrial:o.isOnFreeTrial||!1}}catch(s){return console.error("      :",s),{hasUsedFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,isOnFreeTrial:!1}}}static async getTrialDurationHours(){try{const e=ve(Q,"config","freeTrial"),n=await St(e);if(n.exists()){const r=n.data(),s=typeof(r==null?void 0:r.durationHours)=="number"?r.durationHours:this.TRIAL_DURATION_HOURS;return!Number.isFinite(s)||s<1?this.TRIAL_DURATION_HOURS:s}return this.TRIAL_DURATION_HOURS}catch(e){return console.warn("getTrialDurationHours: fallback to default due to error",e),this.TRIAL_DURATION_HOURS}}static async updateTrialDurationHours(e){try{if(!Number.isFinite(e)||e<1)return{success:!1,message:"       "};const n=ve(Q,"config","freeTrial");return await ji(n,{durationHours:e,updatedAt:Ae()},{merge:!0}),{success:!0,message:"     "}}catch(n){return console.error("Error updating trial duration hours:",n),{success:!1,message:"    "}}}static async resetActiveTrialToCurrentDuration(e){var n,r;try{const s=ve(Q,"users",e),i=await St(s);if(!i.exists())return{success:!1,message:"  "};const o=i.data(),a=!!o.isOnFreeTrial,l=(r=(n=o.freeTrialStartDate)==null?void 0:n.toDate)!=null&&r.call(n)?o.freeTrialStartDate.toDate():o.freeTrialStartDate?new Date(o.freeTrialStartDate):null;if(!a||!l)return{success:!1,message:"     "};const c=await this.getTrialDurationHours(),d=new Date(l.getTime()+c*60*60*1e3);return await st(s,{freeTrialEndDate:d,updatedAt:Ae()}),{success:!0,message:`     ${c} ${c>=3&&c<=10?"":c===2?"":""}`}}catch(s){return console.error("Error resetting active trial duration:",s),{success:!1,message:"    "}}}}$0(t0,"TRIAL_DURATION_HOURS",24);const j8=Object.freeze(Object.defineProperty({__proto__:null,FreeTrialService:t0},Symbol.toStringTag,{value:"Module"})),Rz={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_VERSION:"0.0.0",VITE_DEV_MODE:"true",VITE_ENABLE_OFFLINE_PERSISTENCE:"false",VITE_FIREBASE_API_KEY:"AIzaSyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s",VITE_FIREBASE_APP_ID:"1:483702062341:web:b1ff06ad175cb7ae428b6c",VITE_FIREBASE_AUTH_DOMAIN:"voda-c6abd.firebaseapp.com",VITE_FIREBASE_AUTH_EMULATOR_URL:"http://localhost:9099",VITE_FIREBASE_FIRESTORE_EMULATOR_HOST:"localhost:8080",VITE_FIREBASE_FUNCTIONS_EMULATOR_HOST:"localhost:5001",VITE_FIREBASE_MEASUREMENT_ID:"G-CV6QGH7G7P",VITE_FIREBASE_MESSAGING_SENDER_ID:"483702062341",VITE_FIREBASE_PROJECT_ID:"voda-c6abd",VITE_FIREBASE_STORAGE_BUCKET:"voda-c6abd.appspot.com",VITE_FORCE_HASH_ROUTER:"true",VITE_SHOP_ID:"demo-shop-001",VITE_SHOP_NAME:"   ",VITE_SHOW_ENV_BANNER:"true",VITE_USE_EMULATORS:"false",VITE_USE_FIREBASE_EMULATOR:"false"},vD=A.createContext(void 0);function $i(){const t=A.useContext(vD);if(t===void 0)throw new Error("useFirebaseAuth must be used within a FirebaseAuthProvider");return t}const Cz=({children:t})=>{const[e,n]=A.useState(null),[r,s]=A.useState(null),[i,o]=A.useState(null),[a,l]=A.useState(!1),[c,d]=A.useState(!0),h=async S=>{var T,b,k,P,N,C,q,Z,ie,G,F,U,Y,de,ne,ce;try{const le=ve(Q,"profiles",S);let we=!1;try{const ae=await $k(le);if(ae.exists()){const me=ae.data(),Se={userId:ae.id,shopId:me.shopId,role:me.role,fullName:me.fullName,phone:me.phone,shopName:me.shopName||null,approved:me.approved,avatarId:me.avatarId,bridgeLink:me.bridgeLink||null,bridgeDeviceId:me.bridgeDeviceId||null,showWithdrawNote:me.showWithdrawNote!==void 0?!!me.showWithdrawNote:!0,isReceiptNoteEnabled:me.isReceiptNoteEnabled!==void 0?!!me.isReceiptNoteEnabled:!0,createdAt:((b=(T=me.createdAt)==null?void 0:T.toDate)==null?void 0:b.call(T))||new Date,updatedAt:((P=(k=me.updatedAt)==null?void 0:k.toDate)==null?void 0:P.call(k))||new Date,trialStarted:me.trialStarted||!1,trialStartDate:(C=(N=me.trialStartDate)==null?void 0:N.toDate)==null?void 0:C.call(N),trialEndDate:(Z=(q=me.trialEndDate)==null?void 0:q.toDate)==null?void 0:Z.call(q),trialExpired:me.trialExpired||!1};s(Se),we=!0,d(!1)}}catch(ae){console.log("Cache profile not available:",(ae==null?void 0:ae.code)||ae)}try{if(!we){const ae=localStorage.getItem(`profile_cache_${S}`);if(ae){const me=JSON.parse(ae);s(me),we=!0,d(!1)}}}catch{}if(!we)for(let ae=0;ae<3;ae++)try{const me=await St(le);if(me.exists()){const Se=me.data(),Et={userId:me.id,shopId:Se.shopId,role:Se.role,fullName:Se.fullName,phone:Se.phone,shopName:Se.shopName||null,approved:Se.approved,avatarId:Se.avatarId,bridgeLink:Se.bridgeLink||null,bridgeDeviceId:Se.bridgeDeviceId||null,showWithdrawNote:Se.showWithdrawNote!==void 0?!!Se.showWithdrawNote:!0,isReceiptNoteEnabled:Se.isReceiptNoteEnabled!==void 0?!!Se.isReceiptNoteEnabled:!0,createdAt:((G=(ie=Se.createdAt)==null?void 0:ie.toDate)==null?void 0:G.call(ie))||new Date,updatedAt:((U=(F=Se.updatedAt)==null?void 0:F.toDate)==null?void 0:U.call(F))||new Date,trialStarted:Se.trialStarted||!1,trialStartDate:(de=(Y=Se.trialStartDate)==null?void 0:Y.toDate)==null?void 0:de.call(Y),trialEndDate:(ce=(ne=Se.trialEndDate)==null?void 0:ne.toDate)==null?void 0:ce.call(ne),trialExpired:Se.trialExpired||!1};s(Et);try{localStorage.setItem(`profile_cache_${me.id}`,JSON.stringify(Et))}catch{}we=!0,d(!1);break}}catch{}return Zf(le,async ae=>{var me,Se,Et,Nt,Kt,Bt,gn,Pr;if(ae.exists()){const ge=ae.data(),Gn={userId:ae.id,shopId:ge.shopId,role:ge.role,fullName:ge.fullName,phone:ge.phone,shopName:ge.shopName||null,approved:ge.approved,avatarId:ge.avatarId,bridgeLink:ge.bridgeLink||null,bridgeDeviceId:ge.bridgeDeviceId||null,showWithdrawNote:ge.showWithdrawNote!==void 0?!!ge.showWithdrawNote:!0,isReceiptNoteEnabled:ge.isReceiptNoteEnabled!==void 0?!!ge.isReceiptNoteEnabled:!0,createdAt:((Se=(me=ge.createdAt)==null?void 0:me.toDate)==null?void 0:Se.call(me))||new Date,updatedAt:((Nt=(Et=ge.updatedAt)==null?void 0:Et.toDate)==null?void 0:Nt.call(Et))||new Date,trialStarted:ge.trialStarted||!1,trialStartDate:(Bt=(Kt=ge.trialStartDate)==null?void 0:Kt.toDate)==null?void 0:Bt.call(Kt),trialEndDate:(Pr=(gn=ge.trialEndDate)==null?void 0:gn.toDate)==null?void 0:Pr.call(gn),trialExpired:ge.trialExpired||!1};s(Gn);try{localStorage.setItem(`profile_cache_${ae.id}`,JSON.stringify(Gn))}catch{}we||(we=!0,d(!1))}else if(!we)try{const ge=await mD.getByUserId(S);if(ge){const Gn={userId:S,shopId:ge.shopId,role:ge.role||"user",fullName:ge.fullName||null,phone:ge.phone||null,shopName:ge.shopName||null,approved:ge.approved??!1,avatarId:ge.avatarId||void 0,bridgeLink:ge.bridgeLink||null,bridgeDeviceId:ge.bridgeDeviceId||null,createdAt:Ae(),updatedAt:Ae()};await ji(ve(Q,"profiles",S),Gn,{merge:!0}),s({...ge,userId:S,createdAt:ge.createdAt||new Date,updatedAt:ge.updatedAt||new Date})}else await f(S)}catch(ge){console.error("Profile migration/create error:",ge)}finally{we=!0,d(!1)}},ae=>{console.error("Profile listener error:",ae);try{d(!1)}catch{}})}catch(le){return console.error("Error setting up profile listener:",le),await f(S),d(!1),()=>{}}},p=async S=>{try{const T=ve(Q,"users",S.uid);(await St(T)).exists()?(await st(T,{lastLogin:Ae(),updatedAt:Ae()}),console.log(" ensureAdminUserDoc: Updated lastLogin for",S.uid)):(await ji(T,{email:S.email||"",displayName:S.displayName||" ",phone:null,shopName:null,isActive:!1,createdAt:Ae(),updatedAt:Ae(),lastLogin:Ae()},{merge:!0}),console.log(" ensureAdminUserDoc: Created users doc for",S.uid))}catch(T){console.error(" ensureAdminUserDoc error:",T)}},f=async(S,T,b,k,P)=>{var N,C;try{console.log("Creating default profile for user:",S);const q=Tv.generateReferralCode(S);let Z=null;const ie={userId:S,shopId:"default-shop",role:"user",fullName:T||" ",phone:b||null,shopName:k||null,approved:!1,referralCode:q,referredBy:P||null,bridgeLink:null,bridgeDeviceId:null,showWithdrawNote:!0,isReceiptNoteEnabled:!0,createdAt:new Date,updatedAt:new Date};s(ie),console.log("Created temporary profile:",ie);try{const{doc:G,setDoc:F,serverTimestamp:U}=await Oe(async()=>{const{doc:ce,setDoc:le,serverTimestamp:we}=await Promise.resolve().then(()=>Tg);return{doc:ce,setDoc:le,serverTimestamp:we}},void 0,import.meta.url),{db:Y}=await Oe(async()=>{const{db:ce}=await Promise.resolve().then(()=>xg);return{db:ce}},void 0,import.meta.url),de={email:((N=Yn.currentUser)==null?void 0:N.email)||"",displayName:T||" ",phone:b||null,shopName:k||null,isActive:!1,referralCode:q,referredBy:P||null,createdAt:U(),lastLogin:null,updatedAt:U()};if(console.log("Attempting to add user to admin collection with data:",de),await F(G(Y,"users",S),de,{merge:!0}),console.log(" User successfully added to admin collection:",de),P)try{const{query:ce,collection:le,where:we,limit:Qe,getDocs:ae}=await Oe(async()=>{const{query:Nt,collection:Kt,where:Bt,limit:gn,getDocs:Pr}=await Promise.resolve().then(()=>Tg);return{query:Nt,collection:Kt,where:Bt,limit:gn,getDocs:Pr}},void 0,import.meta.url),{db:me}=await Oe(async()=>{const{db:Nt}=await Promise.resolve().then(()=>xg);return{db:Nt}},void 0,import.meta.url),Se=ce(le(me,"users"),we("referralCode","==",P),Qe(1)),Et=await ae(Se);Et.empty?console.log(" Referral code not found in users collection:",P):(Z=Et.docs[0].id,await Tv.create({referrerId:Z,referredUserId:S,referredUserEmail:((C=Yn.currentUser)==null?void 0:C.email)||"",referralCode:P,status:"completed"}),console.log(" Referral record created successfully for referrer:",Z))}catch(ce){console.error(" Error creating referral record:",ce)}const ne=await St(G(Y,"users",S));ne.exists()?console.log(" User document verified in Firestore:",ne.data()):console.log(" User document not found after creation")}catch(G){console.error(" Error adding user to admin collection:",G)}try{const{addDoc:G,collection:F,serverTimestamp:U}=await Oe(async()=>{const{addDoc:le,collection:we,serverTimestamp:Qe}=await Promise.resolve().then(()=>Tg);return{addDoc:le,collection:we,serverTimestamp:Qe}},void 0,import.meta.url),{db:Y}=await Oe(async()=>{const{db:le}=await Promise.resolve().then(()=>xg);return{db:le}},void 0,import.meta.url),ne=(await G(F(Y,"shops"),{name:k||" ",ownerId:S,createdAt:U(),updatedAt:U(),isActive:!0})).id;await $h.create({userId:S,shopId:ne,role:"user",fullName:" ",phone:null});try{await $h.update(S,{referralCode:q,referredBy:Z||null,showWithdrawNote:!0,isReceiptNoteEnabled:!0})}catch(le){console.warn(" Failed to update profile with referral fields:",le)}const ce=await $h.getById(S);ce&&(s(ce),console.log("Updated with Firebase profile:",ce))}catch(G){console.error("Error creating profile:",G),console.log("Using local profile - Firebase unavailable")}}catch(q){console.error("Error creating default profile:",q)}};A.useEffect(()=>{console.log(" Setting up auth state listener"),d(!0);const S=setTimeout(()=>{console.warn(" Global auth timeout reached, forcing loading to false"),d(!1)},2e4);localStorage.getItem("demoProfile")&&(console.log(" Cleaning up demo profile from localStorage"),localStorage.removeItem("demoProfile"));const T=localStorage.getItem("demoUser"),b=localStorage.getItem("demoProfile");if(T&&b){console.log(" Found demo user in localStorage");try{const P=JSON.parse(T),N=JSON.parse(b);n(P),s(N),clearTimeout(S),d(!1);return}catch(P){console.error("Error parsing demo user data:",P),localStorage.removeItem("demoUser"),localStorage.removeItem("demoProfile")}}const k=tj(Yn,async P=>{console.log(" Auth state changed:",{uid:P==null?void 0:P.uid,email:P==null?void 0:P.email,emailVerified:P==null?void 0:P.emailVerified,timestamp:new Date().toISOString()}),n(P),P?(console.log(" User authenticated, starting profile hydration for:",P.uid),h(P.uid),v(),p(P)):(console.log(" User not authenticated, clearing profile"),s(null),o(null),l(!1),d(!1)),clearTimeout(S)});return()=>{clearTimeout(S),k()}},[]);const _=async(S,T,b,k,P,N)=>{try{const C=(S||"").trim().toLowerCase(),q=(T||"").trim();console.log(" Attempting to sign up user:",C);const Z=await cI(Yn,C,q);console.log(" Sign up successful:",Z.user.uid),await f(Z.user.uid,b,k,P,N),await p(Z.user);try{await h(Z.user.uid),await v()}catch{}return{error:null}}catch(C){console.error(" Sign up error:",C);let q="    ";return C.code==="auth/email-already-in-use"?q="    ":C.code==="auth/weak-password"?q="   ":C.code==="auth/invalid-email"&&(q="   "),{error:{...C,message:q}}}},y=async(S,T)=>{const b=(S||"").trim().toLowerCase(),k=(T||"").trim();try{const P=F=>F.replace(/[\u200B\u200C\u200D\u200E\u200F\u061C]/g,""),N=F=>F.replace(/[-]/g,U=>String("0123456789"["".indexOf(U)])).replace(/[-]/g,U=>String("0123456789"["".indexOf(U)])),C=F=>F.replace(/[0-9]/g,U=>""[Number(U)]),q=F=>N(P(F));if(console.log(" Attempting to sign in user:",b),b==="test@example.com"&&k==="123456"){console.log(" Demo user login detected");const F={uid:"demo-user-123",email:"test@example.com",displayName:" ",emailVerified:!0},U={userId:"demo-user-123",shopId:"demo-shop",role:"user",fullName:" ",phone:"01000000000",approved:!0,createdAt:new Date,updatedAt:new Date};return localStorage.setItem("demoUser",JSON.stringify(F)),localStorage.setItem("demoProfile",JSON.stringify(U)),n(F),s(U),d(!1),console.log(" Demo user signed in successfully"),{error:null}}let Z;const ie=[q(k),P(k),C(P(k))];let G=null;for(const F of ie)try{F!==k&&console.log(" Trying password variant"),Z=await Z3(Yn,b,F);break}catch(U){if(G=U,(U==null?void 0:U.code)!=="auth/wrong-password"&&(U==null?void 0:U.code)!=="auth/invalid-credential")throw U}if(!Z)throw G||new Error("auth/invalid-credential");console.log(" Sign in successful:",Z.user.uid);try{if((await St(ve(Q,"deletedUsers",Z.user.uid))).exists())return console.log(" User is deleted, signing out"),await uI(Yn),{error:{code:"auth/user-deleted",message:"      .    ."}}}catch(F){console.error("Error checking deleted users:",F)}await p(Z.user);try{await h(Z.user.uid),await v()}catch{}return{error:null}}catch(P){if(console.error(" Sign in error:",P),b==="test@example.com"&&P.code==="auth/user-not-found"){console.log(" Creating test user...");try{const C=await cI(Yn,b,k);return console.log(" Test user created:",C.user.uid),await f(C.user.uid," ","01000000000"," "),{error:null}}catch(C){return console.error(" Error creating test user:",C),{error:C}}}let N="    ";return P.code==="auth/invalid-credential"?N="      ":P.code==="auth/user-not-found"?N="     ":P.code==="auth/wrong-password"?N="   ":P.code==="auth/too-many-requests"&&(N="      "),{error:{...P,message:N}}}},E=async()=>{try{localStorage.getItem("demoUser")?(console.log(" Signing out demo user"),localStorage.removeItem("demoUser"),localStorage.removeItem("demoProfile"),n(null),s(null),d(!1)):await uI(Yn);const b=(()=>{try{const k=typeof window<"u"?window:null,P=!!(k&&k.electronAPI)||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"),N=typeof window<"u"&&window.location.protocol==="file:",C=typeof window<"u"&&typeof window.location.hash=="string"&&window.location.hash.startsWith("#/");return P||N||C||typeof import.meta<"u"&&Rz&&!0}catch{return!1}})()?"#/user/login":"/user/login";try{window.location.replace(b)}catch{window.location.href=b}}catch(S){console.error("Sign out error:",S)}},w=async S=>{try{return await J3(Yn,S),{error:null}}catch(T){console.error("Reset password error:",T);let b="        ";return T.code==="auth/user-not-found"?b="     ":T.code==="auth/invalid-email"&&(b="   "),{error:{...T,message:b}}}},v=async()=>{if(!e){console.log("No user found for subscription check"),o(null),l(!1);return}console.log("Checking subscription status for user:",e.uid);try{return Zf(ve(Q,"users",e.uid),async T=>{var b,k,P,N,C,q,Z,ie;if(T.exists()){const G=T.data();o(G),console.log(" Subscription Data Details (Real-time):",{userId:e.uid,userEmail:e.email,subscription:G.subscription,subscriptionExists:!!G.subscription,planType:(b=G.subscription)==null?void 0:b.planType,isActive:(k=G.subscription)==null?void 0:k.isActive,startDate:(P=G.subscription)==null?void 0:P.startDate,endDate:(N=G.subscription)==null?void 0:N.endDate,activatedBy:(C=G.subscription)==null?void 0:C.activatedBy,activatedAt:(q=G.subscription)==null?void 0:q.activatedAt,isOnFreeTrial:G.isOnFreeTrial,freeTrialEndDate:G.freeTrialEndDate,branchPackageStatus:(Z=G==null?void 0:G.branchPackage)==null?void 0:Z.status});const F=((ie=G==null?void 0:G.branchPackage)==null?void 0:ie.status)==="active";let U=!1;if(F)console.log(" Branch package is active, granting access"),U=!0;else if(G.isOnFreeTrial){console.log(" User is on free trial, checking validity...");const Y=await t0.checkTrialValidity(e.uid);Y.isValid&&!Y.isExpired?(console.log(" Free trial is valid, granting access"),U=!0):Y.isExpired?(console.log(" Free trial has expired, checking regular subscription"),U=zh(G.subscription)):(console.log(" Free trial is not valid"),U=zh(G.subscription))}else U=zh(G.subscription);l(U),console.log(" Subscription Validation Result (Real-time):",{userId:e.uid,isValid:U,isOnFreeTrial:G.isOnFreeTrial,hasActiveBranchPackage:F,reason:F?"Branch package active":G.isOnFreeTrial?"Free trial active":G.subscription?G.subscription.isActive?G.subscription.planType==="lifetime"?"Lifetime plan":G.subscription.endDate?new Date>new Date(G.subscription.endDate)?"Expired":"Valid":"No end date":"Subscription not active":"No subscription data"})}},T=>{console.error(" Subscription listener error:",T)})}catch(S){console.error("Error setting up subscription listener:",S)}},V={user:e,profile:r,userSubscription:i,isSubscriptionActive:a,loading:c,signUp:_,signIn:y,signOut:E,resetPassword:w,updateUserProfile:async S=>{if(e)try{const T={updatedAt:Ae()};if(S.fullName!==void 0&&(T.fullName=S.fullName),S.phone!==void 0&&(T.phone=S.phone),S.bridgeLink!==void 0){const b=(S.bridgeLink||"").trim();T.bridgeLink=b.length?b:null}if(S.bridgeDeviceId!==void 0){const b=(S.bridgeDeviceId||"").trim();T.bridgeDeviceId=b.length?b:null}S.showWithdrawNote!==void 0&&(T.showWithdrawNote=!!S.showWithdrawNote),S.isReceiptNoteEnabled!==void 0&&(T.isReceiptNoteEnabled=!!S.isReceiptNoteEnabled),await st(ve(Q,"profiles",e.uid),T),await h(e.uid)}catch(T){console.error("Error updating user profile:",T)}},updateAvatarId:async S=>{if(e)try{await st(ve(Q,"profiles",e.uid),{avatarId:S,updatedAt:Ae()}),await h(e.uid)}catch(T){console.error("Error updating avatarId:",T)}},refreshProfile:async()=>{if(e)try{console.log("Refreshing profile for user:",e.uid),await h(e.uid),await v()}catch(S){console.error("Error refreshing profile:",S)}},checkSubscriptionStatus:v};return x.jsx(vD.Provider,{value:V,children:t})},ch=()=>{const[t,e]=A.useState(""),[n,r]=A.useState(""),[s,i]=A.useState(!1),[o,a]=A.useState(!1),{signIn:l}=$i(),c=Ju();A.useEffect(()=>{try{const f=typeof window<"u"?window.localStorage.getItem("cashy:lastEmail"):null;f&&e(f)}catch{}},[]);const d=async f=>{if(f.preventDefault(),o){It.info("     ...");return}if(typeof navigator<"u"&&navigator.onLine===!1){It.error("   .      .");return}const _=(t||"").trim().toLowerCase(),y=(n||"").trim();if(console.log("    :",{email:_,password:"***"}),!t||!n){It.error("   ");return}if(!/^\S+@\S+\.\S+$/.test(_)){It.error("    ");return}a(!0);try{console.log("  signIn...");const{error:E}=await l(_,y);if(console.log(" SignIn result:",{error:E}),E){console.error("    :",E);const w=E==null?void 0:E.code;w==="auth/user-not-found"?It.error("     "):w==="auth/wrong-password"?It.error("   "):w==="auth/invalid-credential"?It.error("      "):w==="auth/too-many-requests"?It.error("      "):It.error((E==null?void 0:E.message)||"    ")}else console.log("    !"),It.success("   !"),c("/user/dashboard")}catch(E){console.error("   :",E),It.error("   ")}finally{a(!1)}},h=f=>{if(o){f.preventDefault(),f.stopPropagation(),It.info("     ...");return}if(typeof navigator<"u"&&navigator.onLine===!1){f.preventDefault(),f.stopPropagation(),It.error("   .      .");return}t||It.error("   "),n||It.error("   ");const _=(t||"").trim().toLowerCase();_&&!/^\S+@\S+\.\S+$/.test(_)&&It.error("    ")},p=()=>{c("/user/forgot-password")};return A.useEffect(()=>{if(!(typeof window<"u"&&window.matchMedia&&window.matchMedia("(pointer: coarse)").matches))return;const f=document.documentElement,_=document.body,y=f.style.overflow,E=_.style.overflow,w=f.style.overscrollBehaviorY,v=_.style.overscrollBehaviorY;return f.style.overflow="hidden",_.style.overflow="hidden",f.style.overscrollBehaviorY="none",_.style.overscrollBehaviorY="none",()=>{f.style.overflow=y||"",_.style.overflow=E||"",f.style.overscrollBehaviorY=w||"",_.style.overscrollBehaviorY=v||""}},[]),x.jsxs("div",{className:"fixed inset-0 relative overscroll-y-none overflow-hidden flex items-center justify-center p-4 bg-fixed bg-no-repeat bg-cover",style:{backgroundImage:"var(--bg-purple-gradient)"},children:[x.jsx("div",{className:"pointer-events-none absolute inset-0 bg-[radial-gradient(ellipse_at_center,_rgba(168,85,247,0.18),_transparent_70%)]"}),x.jsxs("div",{className:"w-full max-w-md mt-16 md:mt-12 lg:mt-10",children:[x.jsxs("div",{className:"text-center mb-8",children:[x.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-r from-green-600 to-blue-600 rounded-full mb-4 shadow-2xl",children:x.jsx(VV,{className:"w-10 h-10 text-white"})}),x.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[x.jsx("div",{className:"h-8 w-8 bg-red-600 rounded-lg flex items-center justify-center shadow",children:x.jsx("span",{className:"text-white font-bold text-sm",children:""})}),x.jsxs("div",{className:"flex items-center gap-1",children:[x.jsx(DV,{className:"h-5 w-5 text-white"}),x.jsx("span",{className:"text-xl font-bold text-white",children:" "})]})]}),x.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"  "}),x.jsx("p",{className:"text-white/80",children:"    "})]}),x.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-8 shadow-2xl border border-white/20",children:[x.jsxs("form",{onSubmit:d,className:"space-y-6",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-white",children:" "}),x.jsxs("div",{className:"relative",children:[x.jsx(aT,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/70 w-5 h-5"}),x.jsx(Uy,{id:"email",type:"email",placeholder:"  ",value:t,onChange:f=>{const _=f.target.value;e(_);try{window.localStorage.setItem("cashy:lastEmail",_)}catch{}},className:"pl-10 pr-4 py-3 rounded-lg bg-white/20 border-white/30 text-white placeholder:text-white/70 focus:ring-2 focus:ring-green-400",dir:"rtl",required:!0})]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-white",children:" "}),x.jsxs("div",{className:"relative",children:[x.jsx(RV,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/70 w-5 h-5"}),x.jsx(Uy,{id:"password",type:s?"text":"password",placeholder:"  ",value:n,onChange:f=>r(f.target.value),className:"pl-10 pr-10 py-3 rounded-lg bg-white/20 border-white/30 text-white placeholder:text-white/70 focus:ring-2 focus:ring-green-400",autoComplete:"off",dir:"rtl",required:!0}),x.jsx("button",{type:"button",onClick:()=>i(!s),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-white/70 hover:text-white transition-colors",children:s?x.jsx(bV,{className:"w-5 h-5"}):x.jsx(AV,{className:"w-5 h-5"})})]})]}),x.jsx("div",{className:"flex justify-end",children:x.jsxs(CP,{type:"button",variant:"ghost",size:"sm",onClick:p,className:"text-green-200 hover:text-green-100 p-0 h-auto font-normal hover:bg-transparent",children:[x.jsx(aT,{className:"w-4 h-4 ml-1"}),"  "]})}),x.jsx("button",{type:"submit",onClick:h,className:"w-full bg-gradient-to-r from-green-600 to-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:from-green-700 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-green-400 transition-all duration-200",children:o?x.jsxs("div",{className:"flex items-center justify-center",children:[x.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white ml-2"}),"  ..."]}):x.jsxs("div",{className:"flex items-center justify-center",children:[x.jsx(EV,{className:"w-5 h-5 ml-2"})," "]})})]}),x.jsxs("div",{className:"mt-6 text-center space-y-3",children:[x.jsxs("p",{className:"text-sm text-white/80",children:["  "," ",x.jsx(pU,{to:"/user/register",className:"text-green-200 hover:text-green-100 font-medium transition-colors hover:underline",children:"  "})]}),x.jsxs("p",{className:"text-sm text-white/80",children:["        "," ",x.jsx("a",{href:"https://wa.me/201000392539",target:"_blank",rel:"noreferrer",className:"text-green-200 hover:text-green-100 font-medium hover:underline",children:"01000392539"})," ","   "," ",x.jsx("a",{href:"mailto:info@cashy-link.com",className:"text-blue-200 hover:text-blue-100 font-medium hover:underline",children:"info@cashy-link.com"})]})]})]}),x.jsx("div",{className:"mt-6 text-center",children:x.jsx("p",{className:"text-xs text-white/70",children:"   "})})]})]})},kz=()=>{const t=Ju(),e=Zr(),{signOut:n,user:r}=$i(),[s,i]=A.useState(!1),[o,a]=A.useState(!1),l=[{id:"home",label:"",icon:PV,path:"/user/dashboard",action:()=>{t("/user/dashboard"),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},100)}},{id:"debts",label:"",icon:xV,path:"/debts",action:()=>{t("/user/dashboard",{state:{openDebtDialog:!0}})}},{id:"transfer",label:"",icon:TV,path:"/transfer",action:()=>{t("/user/dashboard",{state:{openTransactionSection:!0,transactionType:"transfer",startNewTransaction:!0}})}},{id:"add",label:"",icon:lT,path:"/add",isSpecial:!0},{id:"withdraw",label:"",icon:wV,path:"/withdraw",action:()=>{t("/user/dashboard",{state:{openTransactionSection:!0,transactionType:"withdraw",startNewTransaction:!0}})}},{id:"transactions",label:"",icon:tg,path:"/transactions"},{id:"settings",label:"",icon:cT,path:"/profile-settings"}],c=[{id:"maintenance",label:"",icon:LV,action:()=>{i(!1),t("/user/dashboard",{state:{openMaintenanceDialog:!0}})},color:"#0EA5E9"},{id:"credit-cards",label:" ",icon:SV,action:()=>{i(!1),t("/user/dashboard",{state:{openCreditCardsDialog:!0}})},color:"#8B5CF6"},{id:"sales",label:"",icon:NV,action:()=>{i(!1),t("/user/dashboard",{state:{openSalesDialog:!0}})},color:"#F59E0B"},{id:"shop-expenses",label:" ",icon:tg,action:()=>{i(!1),t("/user/dashboard",{state:{openShopExpensesDialog:!0}})},color:"#F97316"},{id:"deficiencies",label:"",icon:OV,action:()=>{i(!1),t("/user/dashboard",{state:{openDeficienciesDialog:!0}})},color:"#DB2777"},{id:"add-wallet",label:" ",icon:lT,action:()=>{i(!1),t("/user/add-wallet")},color:"#EF4444"},{id:"cashier-shift",label:" ",icon:IV,action:()=>{i(!1),t("/user/dashboard",{state:{openCashierShiftModal:!0}})},color:"#3B82F6"},{id:"contact",label:" ",icon:CV,action:()=>{i(!1);const _=`   
  : ${(r==null?void 0:r.email)||" "}`,y=encodeURIComponent(_);window.open(`https://wa.me/201000392539?text=${y}`,"_blank")},color:"#10B981"},{id:"logout",label:" ",icon:oT,action:async()=>{i(!1);try{await n(),t("/user/login",{replace:!0})}catch(f){console.error("Logout error:",f);try{t("/user/login",{replace:!0})}catch{}}},color:"#EF4444"}],d=[{id:"shop-expenses-settings",label:" ",icon:tg,action:()=>{a(!1),t("/user/dashboard",{state:{openShopExpensesDialog:!0}})},color:"#F97316"},{id:"profile-settings",label:"  ",icon:cT,action:()=>{a(!1),t("/profile-settings")},color:"#6366F1"},{id:"logout",label:" ",icon:oT,action:async()=>{a(!1);try{await n(),t("/user/login",{replace:!0})}catch(f){console.error("Logout error:",f);try{t("/user/login",{replace:!0})}catch{}}},color:"#EF4444"}],h=(f,_,y)=>{y?y():_&&f==="/add"?i(!s):_||t(f)},p=f=>e.pathname===f;return x.jsxs("div",{className:"mobile-bottom-nav",children:[s&&x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"quick-actions-overlay",onClick:()=>i(!1)}),x.jsx("div",{className:"floating-actions-container",children:c.map((f,_)=>x.jsxs("div",{className:"floating-action-button",onClick:f.action,style:{"--action-color":f.color,"--animation-delay":`${_*.1}s`},children:[x.jsx("div",{className:"floating-action-icon",style:{backgroundColor:f.color},children:x.jsx(f.icon,{className:"action-icon"})}),x.jsx("span",{className:"floating-action-label",children:f.label})]},f.id))})]}),o&&x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"quick-actions-overlay",onClick:()=>a(!1)}),x.jsx("div",{className:"floating-actions-container",children:d.map((f,_)=>x.jsxs("div",{className:"floating-action-button",onClick:f.action,style:{"--action-color":f.color,"--animation-delay":`${_*.1}s`},children:[x.jsx("div",{className:"floating-action-icon",style:{backgroundColor:f.color},children:x.jsx(f.icon,{className:"action-icon"})}),x.jsx("span",{className:"floating-action-label",children:f.label})]},f.id))})]}),x.jsx("nav",{className:"mobile-bottom-nav-container",children:l.map(f=>{const _=f.icon,y=p(f.path);return x.jsxs("button",{onClick:()=>h(f.path,f.isSpecial,f.action),className:`mobile-nav-item ${y?"active":""} ${f.isSpecial?"special":""}`,"aria-label":f.label,children:[x.jsx("div",{className:`nav-icon-container ${f.isSpecial?"special-icon":""} ${f.isSpecial&&f.id==="add"&&s?"special-open":""}`,children:x.jsx(_,{className:`nav-icon ${y?"active-icon":""} ${f.isSpecial?"special-icon-svg":""} ${f.isSpecial&&f.id==="add"&&s?"rotated":""} ${f.isSpecial&&f.id==="settings"&&o?"rotated":""}`})}),!f.isSpecial&&x.jsx("span",{className:`nav-label ${y?"active-label":""}`,children:f.label})]},f.id)})})]})},Dz=()=>{const t=typeof window<"u"?window.electronAPI:void 0,e=!!t,[n,r]=z.useState(!1),[s,i]=z.useState(!1),o=async()=>{try{e&&t?await t.windowMinimize():console.info("windowMinimize (dev preview)")}catch(d){console.warn("failed to minimize",d)}},a=async()=>{try{e&&t?await t.windowClose():console.info("windowClose (dev preview)")}catch(d){console.warn("failed to close",d)}},l=async()=>{try{e&&t&&typeof t.windowReload=="function"?await t.windowReload():window.location.reload()}catch(d){console.warn("failed to refresh",d)}};return z.useEffect(()=>{if(!(!e||!t))try{t.onUpdateAvailable(()=>r(!0)),t.onUpdateDownloaded(()=>r(!0)),t.checkUpdate()}catch(d){console.warn("update init failed",d)}},[e,t]),e?x.jsxs("div",{className:"fixed top-2 right-2 z-[2000] flex items-center gap-2",style:{pointerEvents:"auto"},children:[x.jsx("button",{type:"button","aria-label":"",title:"",onClick:a,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-red-600 hover:bg-red-500/10 focus:outline-none dark:text-red-400 dark:hover:bg-red-400/10",children:x.jsx(Ix,{className:"w-5 h-5"})}),x.jsx("button",{type:"button","aria-label":"",title:" ",onClick:l,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-blue-600 hover:bg-blue-500/10 focus:outline-none dark:text-blue-400 dark:hover:bg-blue-400/10",children:x.jsx(Tx,{className:"w-5 h-5"})}),x.jsx("button",{type:"button","aria-label":"",title:"",onClick:o,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-gray-800 hover:bg-black/10 focus:outline-none dark:text-white/80 dark:hover:bg-white/10",children:x.jsx(kV,{className:"w-5 h-5"})})]}):null},uh=({className:t=""})=>{const[e,n]=A.useState("./logo.svg"),[r,s]=A.useState(0),i=A.useCallback(()=>{s(o=>{const a=o+1;return a===1?n("./logo.png"):a===2&&n("./placeholder.svg"),a})},[]);return x.jsx("div",{className:`min-h-screen bg-background flex items-center justify-center ${t}`,children:x.jsxs("div",{className:"flex flex-col items-center justify-center",children:[x.jsx("img",{src:e,alt:"logo",onError:i,className:"w-16 h-16 animate-spin",style:{animationDuration:"0.6s"}}),x.jsx("p",{className:"mt-3 text-base font-extrabold text-primary tracking-wide animate-pulse",style:{fontFamily:"'Tajawal','Cairo',sans-serif"},children:"  "})]})})};/*! Capacitor: https://capacitorjs.com/ - MIT License */var bl;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(bl||(bl={}));class Pg extends Error{constructor(e,n,r){super(e),this.message=e,this.code=n,this.data=r}}const Nz=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},Oz=t=>{const e=t.CapacitorCustomPlatform||null,n=t.Capacitor||{},r=n.Plugins=n.Plugins||{},s=()=>e!==null?e.name:Nz(t),i=()=>s()!=="web",o=h=>{const p=c.get(h);return!!(p!=null&&p.platforms.has(s())||a(h))},a=h=>{var p;return(p=n.PluginHeaders)===null||p===void 0?void 0:p.find(f=>f.name===h)},l=h=>t.console.error(h),c=new Map,d=(h,p={})=>{const f=c.get(h);if(f)return console.warn(`Capacitor plugin "${h}" already registered. Cannot register plugins twice.`),f.proxy;const _=s(),y=a(h);let E;const w=async()=>(!E&&_ in p?E=typeof p[_]=="function"?E=await p[_]():E=p[_]:e!==null&&!E&&"web"in p&&(E=typeof p.web=="function"?E=await p.web():E=p.web),E),v=(T,b)=>{var k,P;if(y){const N=y==null?void 0:y.methods.find(C=>b===C.name);if(N)return N.rtype==="promise"?C=>n.nativePromise(h,b.toString(),C):(C,q)=>n.nativeCallback(h,b.toString(),C,q);if(T)return(k=T[b])===null||k===void 0?void 0:k.bind(T)}else{if(T)return(P=T[b])===null||P===void 0?void 0:P.bind(T);throw new Pg(`"${h}" plugin is not implemented on ${_}`,bl.Unimplemented)}},I=T=>{let b;const k=(...P)=>{const N=w().then(C=>{const q=v(C,T);if(q){const Z=q(...P);return b=Z==null?void 0:Z.remove,Z}else throw new Pg(`"${h}.${T}()" is not implemented on ${_}`,bl.Unimplemented)});return T==="addListener"&&(N.remove=async()=>b()),N};return k.toString=()=>`${T.toString()}() { [capacitor code] }`,Object.defineProperty(k,"name",{value:T,writable:!1,configurable:!1}),k},D=I("addListener"),O=I("removeListener"),V=(T,b)=>{const k=D({eventName:T},b),P=async()=>{const C=await k;O({eventName:T,callbackId:C},b)},N=new Promise(C=>k.then(()=>C({remove:P})));return N.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await P()},N},S=new Proxy({},{get(T,b){switch(b){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return y?V:D;case"removeListener":return O;default:return I(b)}}});return r[h]=S,c.set(h,{name:h,proxy:S,platforms:new Set([...Object.keys(p),...y?[_]:[]])}),S};return n.convertFileSrc||(n.convertFileSrc=h=>h),n.getPlatform=s,n.handleError=l,n.isNativePlatform=i,n.isPluginAvailable=o,n.registerPlugin=d,n.Exception=Pg,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},Vz=t=>t.Capacitor=Oz(t),Te=Vz(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),n0=Te.registerPlugin;class _D{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,n){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(n);const i=this.windowListeners[e];i&&!i.registered&&this.addWindowListener(i),r&&this.sendRetainedArgumentsForEvent(e);const o=async()=>this.removeListener(e,n);return Promise.resolve({remove:o})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,r){const s=this.listeners[e];if(!s){if(r){let i=this.retainedEventArguments[e];i||(i=[]),i.push(n),this.retainedEventArguments[e]=i}return}s.forEach(i=>i(n))}hasListeners(e){var n;return!!(!((n=this.listeners[e])===null||n===void 0)&&n.length)}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(e="not implemented"){return new Te.Exception(e,bl.Unimplemented)}unavailable(e="not available"){return new Te.Exception(e,bl.Unavailable)}async removeListener(e,n){const r=this.listeners[e];if(!r)return;const s=r.indexOf(n);this.listeners[e].splice(s,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(r=>{this.notifyListeners(e,r)}))}}const WS=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),KS=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Lz extends _D{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[s,i]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=KS(s).trim(),i=KS(i).trim(),n[s]=i}),n}async setCookie(e){try{const n=WS(e.key),r=WS(e.value),s=`; expires=${(e.expires||"").replace("expires=","")}`,i=(e.path||"/").replace("path=",""),o=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${r||""}${s}; path=${i}; ${o};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}n0("CapacitorCookies",{web:()=>new Lz});const Mz=async t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const s=r.result;e(s.indexOf(",")>=0?s.split(",")[1]:s)},r.onerror=s=>n(s),r.readAsDataURL(t)}),Fz=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(s=>s.toLocaleLowerCase()).reduce((s,i,o)=>(s[i]=t[e[o]],s),{})},Uz=(t,e=!0)=>t?Object.entries(t).reduce((r,s)=>{const[i,o]=s;let a,l;return Array.isArray(o)?(l="",o.forEach(c=>{a=e?encodeURIComponent(c):c,l+=`${i}=${a}&`}),l.slice(0,-1)):(a=e?encodeURIComponent(o):o,l=`${i}=${a}`),`${r}&${l}`},"").substr(1):null,jz=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),s=Fz(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(s.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[o,a]of Object.entries(t.data||{}))i.set(o,a);n.body=i.toString()}else if(s.includes("multipart/form-data")||t.data instanceof FormData){const i=new FormData;if(t.data instanceof FormData)t.data.forEach((a,l)=>{i.append(l,a)});else for(const a of Object.keys(t.data))i.append(a,t.data[a]);n.body=i;const o=new Headers(n.headers);o.delete("content-type"),n.headers=o}else(s.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class Bz extends _D{async request(e){const n=jz(e,e.webFetchExtra),r=Uz(e.params,e.shouldEncodeUrlParams),s=r?`${e.url}?${r}`:e.url,i=await fetch(s,n),o=i.headers.get("content-type")||"";let{responseType:a="text"}=i.ok?e:{};o.includes("application/json")&&(a="json");let l,c;switch(a){case"arraybuffer":case"blob":c=await i.blob(),l=await Mz(c);break;case"json":l=await i.json();break;case"document":case"text":default:l=await i.text()}const d={};return i.headers.forEach((h,p)=>{d[p]=h}),{data:l,headers:d,status:i.status,url:i.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}n0("CapacitorHttp",{web:()=>new Bz});const Rg=768;function wD(){const[t,e]=A.useState(void 0);return A.useEffect(()=>{const n=window.matchMedia(`(max-width: ${Rg-1}px)`),r=()=>{e(window.innerWidth<Rg)};return n.addEventListener("change",r),e(window.innerWidth<Rg),()=>n.removeEventListener("change",r)},[]),!!t}function $z(){const t=wD(),[e,n]=A.useState("default"),[r,s]=A.useState(!1);return A.useEffect(()=>{const o=localStorage.getItem("notificationConsentRequested")==="true";if(s(o),o){const a=localStorage.getItem("notificationPermission");(a==="granted"||a==="denied"||a==="default")&&n(a);return}t&&typeof window<"u"&&("Notification"in window?Notification.requestPermission().then(a=>{n(a),localStorage.setItem("notificationPermission",a),localStorage.setItem("notificationConsentRequested","true"),s(!0)}).catch(()=>{n("default"),localStorage.setItem("notificationConsentRequested","true"),s(!0)}):(n("unsupported"),localStorage.setItem("notificationConsentRequested","true"),s(!0)))},[t]),{permission:e,hasRequested:r,requestConsent:async()=>{if(typeof window<"u"&&"Notification"in window){const o=await Notification.requestPermission();return n(o),localStorage.setItem("notificationPermission",o),localStorage.setItem("notificationConsentRequested","true"),s(!0),o}return"unsupported"}}}const GS=n0("AppLauncher",{web:()=>Oe(()=>import("./web-B341Khhr.js"),[],import.meta.url).then(t=>new t.AppLauncherWeb)});function zz(t,e){if(!t||!t.trim())throw new Error("USSD code is required");const n=`tel:${t.replace(/#/g,"%23")}`,s=`cashy://ussd?code=${t.replace(/#/g,"%23")}${e?`&sim=${e}`:""}`;let i=!1;try{Te&&Te.getPlatform()!=="web"&&(GS.openUrl({url:s}),i=!0)}catch{}if(!i)try{window.location.href=s,i=!0}catch{}if(!i){try{window.location.href=n}catch{}try{Te&&Te.getPlatform()!=="web"&&GS.openUrl({url:n})}catch{}}}function ED(t,e){const n=String(t||"").replace(/\D/g,""),r=Math.round(Number(e||0));return!n||n.length!==11||!n.startsWith("01")||!r||r<=0?null:n.startsWith("010")?`*9*7*${n}*${r}#`:n.startsWith("011")?`*323*${n}*${r}#`:n.startsWith("012")?`*115*1*${n}*${r}#`:n.startsWith("015")?`*322*${n}*${r}#`:null}function qz(t,e,n){const r=String(t||"").replace(/\D/g,""),s=String(e||"").replace(/\D/g,""),i=Math.round(Number(n||0));return!s||s.length!==11||!s.startsWith("01")||!i||i<=0?null:!r||!r.startsWith("01")?ED(s,i):r.startsWith("010")?`*9*7*${s}*${i}#`:r.startsWith("011")?`*323*${s}*${i}#`:r.startsWith("012")?`*115*1*${s}*${i}#`:r.startsWith("015")?`*322*${s}*${i}#`:null}function B8(t,e,n){const r=ED(t,e),s=String(n||"").replace(/\D/g,"");return!r||!s?r:`${r.endsWith("#")?r.slice(0,-1):r}*${s}#`}function Hz(t){const e=String(t||"").replace(/\D/g,"");return e.startsWith("010")?"vodafone":e.startsWith("011")?"etisalat":e.startsWith("012")?"orange":e.startsWith("015")?"we":null}function Wz(t){const e=Hz(t),n=e?`simSlot_${e}`:"simSlot_default";try{if(localStorage.getItem(n)==="sim2")return"sim2"}catch{}return"sim1"}function $8(t,e,n){const r=qz(t,e,n);if(!r)throw new Error("Unsupported network or invalid sender/receiver/amount");const s=Wz(t||e);zz(r,s)}async function Kz(t,e="Cashy"){if(!t||!t.trim())throw new Error("Notification message is required");try{if(typeof Notification<"u"&&(Notification.permission==="granted"?"granted":await Notification.requestPermission())==="granted"){new Notification(e||"Cashy",{body:t});return}typeof window<"u"&&typeof alert=="function"?alert(`${e||"Cashy"}
${t}`):console.log(`[${e||"Cashy"}] ${t}`)}catch(n){console.warn("Notification not available:",n)}}function r0(t,e){return e==="send"?0:Math.round(t*.01*100)/100}function Gz(t,e,n=0){const r=r0(t,e),s=Math.max(0,r-n);return Math.round(s*100)/100}const Qz=Object.freeze(Object.defineProperty({__proto__:null,calculateCommission:r0,calculateProfit:Gz},Symbol.toStringTag,{value:"Module"})),Yz=t=>t==="withdraw"||t==="receive"?"receive":"send",Xz=async t=>{if(!t)return null;const e=Re(ye(Q,"transactions"),be("reference","==",t),Qo(1)),n=await Ne(e);return n.empty?null:n.docs[0].id},Jz=async t=>{if(!t||!t.shopId||!t.lineId||!t.provider)throw new Error("   :   shopId  lineId  provider");if(!t.amount||t.amount<=0)throw new Error("     ");const e=await Xz(t.reference);if(e)return{id:e,duplicate:!0};const n=Yz(t.type),r={shopId:t.shopId,lineId:t.lineId,merchantUserId:t.merchantUserId||t.createdBy,walletId:t.walletId,provider:t.provider,txnType:n,amount:t.amount,fee:void 0,commission:void 0,profit:0,reference:t.reference,senderMsisdn:t.senderMsisdn,receiverMsisdn:t.receiverMsisdn,note:t.note,status:"confirmed",createdBy:t.createdBy,createdAt:new Date,confirmedAt:new Date},s=await gD.create(r);try{const i="  ",o=`: ${t.type} | : ${t.amount} | : ${t.provider}`;await Kz(o,i)}catch(i){console.warn("   :",i)}try{const i=t.merchantUserId||t.createdBy;if(i){const o=n==="receive"?"withdraw":"send",a=r0(t.amount,n);await yD.saveUserTransaction(i,{type:o,amount:t.amount,commission:a,status:"confirmed",createdAt:new Date,senderMsisdn:t.senderMsisdn,receiverMsisdn:t.receiverMsisdn,walletId:t.walletId,lineId:t.lineId,provider:t.provider,note:t.note,transactionId:s})}else console.warn("    :   userId (merchantUserId  createdBy)  .")}catch(i){console.warn("      userTransactions   :",i)}return{id:s,duplicate:!1}};function Zz(t){let e=0;for(let n=0;n<t.length;n++)e=Math.imul(31,e)+t.charCodeAt(n)|0;return"SMS_"+Math.abs(e).toString(36)}function e8(t){const e=t.toLowerCase();return e.includes("")||e.includes("withdraw")?"withdraw":(e.includes("")||e.includes("transfer")||e.includes(" "),"transfer")}function t8(t){const n=t.replace(/,/g,"").match(/(\d{1,9}(?:\.\d{1,2})?)/);return n?parseFloat(n[1]):null}function n8(t){const e=t.match(/01\d{9}/);return e?e[0]:void 0}function r8(t){const e=t.toLowerCase();if(e.includes("")||e.includes("vodafone"))return"vodafone_cash";if(e.includes("")||e.includes("orange"))return"orange_cash";if(e.includes("")||e.includes("etisalat"))return"etisalat_cash";if(e.includes("instapay")||e.includes(" ")||e.includes(""))return"instapay"}function s8(t={}){if(typeof window>"u")return()=>{};const e=t.createdBy||"mobile_sms_bridge",n=async r=>{const i=r.detail||{};try{let o=null;if(i&&i.payload)o=i.payload,o.shopId=o.shopId||t.shopId,o.lineId=o.lineId||t.lineId,o.provider=o.provider||t.provider,o.createdBy=o.createdBy||e;else if(i&&i.text){const l=i.text,c=e8(l),d=t8(l),h=c==="transfer"?n8(l):void 0,p=r8(l)||t.provider;if(!t.shopId||!t.lineId||!p){console.warn("SMS integration missing identifiers. Provide shopId, lineId, provider in initSmsIntegration."),It.warning("   SMS   (  )");return}o={type:c,amount:d||0,provider:p,shopId:t.shopId,lineId:t.lineId,receiverMsisdn:h,reference:i.reference||Zz(l),createdBy:e,note:"Parsed from SMS"}}if(!o)return;if((await Jz(o)).duplicate)It.info("      SMS");else{const l=o.type==="withdraw"?"":"";It.success(`  ${l}    SMS`)}}catch(o){console.error("Failed to process mobile SMS notification:",o),It.error("     SMS")}};return window.addEventListener("mobileSmsReceived",n),()=>window.removeEventListener("mobileSmsReceived",n)}async function i8(t,e="android",n){var l,c,d,h,p;const r=n||((l=Yn.currentUser)==null?void 0:l.uid)||"";if(!r)throw new Error("  userId   ");const s=(d=(c=import.meta)==null?void 0:c.env)==null?void 0:d.VITE_PUSH_REGISTER_ENDPOINT,i=(p=(h=import.meta)==null?void 0:h.env)==null?void 0:p.VITE_PUSH_NOTIFICATIONS_API_KEY,o={userId:r,platform:e,token:t};if(s){const f=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json",...i?{Authorization:`Bearer ${i}`}:{}},body:JSON.stringify(o)});if(f.ok)return f.json()}const a=await fetch("/api/devices/save-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!a.ok)throw new Error(`  : ${a.status}`);return a.json()}async function o8(t,e="android",n){return await Kk(e0,"saveDeviceToken")({token:t,platform:e,userId:n})}async function z8(t,e=" ",n="    50 ",r={type:"transfer",amount:"50",txId:"12345"}){const i=await Kk(e0,"sendFcmToUser")({userId:t,title:e,body:n,data:r});return(i==null?void 0:i.data)??i}function TD(){if(typeof window>"u")return()=>{};const t=async e=>{var n;try{const r=e.detail||window.__fcmToken||"";if(!r)return;const s=((n=Yn.currentUser)==null?void 0:n.uid)||"";if(!s){console.warn("FCM bridge:           ");return}try{await o8(r,"android",s)}catch{await i8(r,"android",s)}console.log("    FCM  :",s)}catch(r){console.error("    FCM  :",r)}};window.addEventListener("fcm-token",t);try{const e=window.__fcmToken;e&&t(new CustomEvent("fcm-token",{detail:e}))}catch{}return()=>{window.removeEventListener("fcm-token",t)}}async function a8(){var t,e,n;try{if(!(Te!=null&&Te.isNativePlatform))return!1;const r=Te.getPlatform();if(localStorage.getItem("nativePushRequested")==="true")return!1;const i=((t=Te.Plugins)==null?void 0:t.PushNotifications)||window.PushNotifications;if(!i){if(typeof window<"u"&&"Notification"in window&&typeof Notification.requestPermission=="function")try{await Notification.requestPermission()}catch{}return localStorage.setItem("nativePushRequested","true"),!1}try{await((e=i.requestPermissions)==null?void 0:e.call(i))}catch{}try{await((n=i.register)==null?void 0:n.call(i))}catch{}return localStorage.setItem("nativePushRequested","true"),!0}catch{return!1}}const l8={},QS=z.lazy(()=>Oe(()=>import("./Index-CNSC8_ZA.js"),[],import.meta.url)),dh=z.lazy(()=>Oe(()=>import("./LandingPage-CLETKv1r.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]),import.meta.url)),YS=z.lazy(()=>Oe(()=>import("./SubscriptionsPage-BC4X0Pi5.js"),__vite__mapDeps([14,1,4,15,16,7,8,6,13]),import.meta.url)),XS=z.lazy(()=>Oe(()=>import("./AuthPage-BuD7lIcz.js"),__vite__mapDeps([17,1,5,2,3,9]),import.meta.url)),hh=z.lazy(()=>Oe(()=>import("./TopUpPage-omyuvztK.js"),__vite__mapDeps([18,1,19,20,21]),import.meta.url)),JS=z.lazy(()=>Oe(()=>import("./AdminTopupsPage-1sJGPqdv.js"),__vite__mapDeps([22,19,20,21]),import.meta.url)),ZS=z.lazy(()=>Oe(()=>import("./AdminNotificationsPage-ClF6X3K6.js"),__vite__mapDeps([23,1,24,25,26]),import.meta.url)),fh=z.lazy(()=>Oe(()=>import("./UserRegisterPage-BNyW5h3F.js"),__vite__mapDeps([27,1,24,28,29,30,31,32,33]),import.meta.url)),eb=z.lazy(()=>Oe(()=>import("./UserAccountSetupPage-qpJpC6Kb.js"),__vite__mapDeps([34,1,24,28,33,32,13]),import.meta.url)),tb=z.lazy(()=>Oe(()=>import("./ForgotPasswordCodePage-BGJO_fCw.js"),[],import.meta.url)),nb=z.lazy(()=>Oe(()=>import("./DashboardLoginPage-Bj1KbOjR.js"),__vite__mapDeps([35,1,11]),import.meta.url)),rb=z.lazy(()=>Oe(()=>import("./ProtectedDashboard-D0oXQozE.js"),__vite__mapDeps([36,1,37,19,20,21,38,24,39,11,40,41,29,13,42]),import.meta.url)),ph=z.lazy(()=>Oe(()=>import("./ProtectedUserDashboard-BWChGqWf.js"),__vite__mapDeps([43,44,26,38,24,39,20,11,40]),import.meta.url)),sb=z.lazy(()=>Oe(()=>import("./MerchantDashboard-B8dBi-Q8.js"),__vite__mapDeps([45,46,19,20,21,47,37,48,39,1,49,24,50,51]),import.meta.url)),ib=z.lazy(()=>Oe(()=>import("./PendingApprovalPage-CQApi8sX.js"),__vite__mapDeps([52,1,4,40,11,53,13,54]),import.meta.url)),ob=z.lazy(()=>Oe(()=>import("./AdminLogin-CEnxqprF.js"),__vite__mapDeps([55,11]),import.meta.url)),ab=z.lazy(()=>Oe(()=>import("./ProtectedAdminDashboard-WX824Wh_.js"),__vite__mapDeps([56,15,3,57,46,19,20,21,47,39,24,38,11,40,58,1,25,59,28,37,60,4,54,32,61,44,16,10,53,8,5,62,9,13,42]),import.meta.url)),lb=z.lazy(()=>Oe(()=>import("./AuthTestPage-CBCsCcGS.js"),__vite__mapDeps([63,1,24]),import.meta.url)),cb=z.lazy(()=>Oe(()=>import("./ProfileSettingsPage-Bc7iXC2B.js"),__vite__mapDeps([64,1,24,58,5,65,38,39,20,11,40,51,59,21,6,31,61,8,54]),import.meta.url)),ub=z.lazy(()=>Oe(()=>import("./TransactionsPage-fKbVjU_W.js"),__vite__mapDeps([66,1,39,20,19,21,37,47,67,60,38,24,11,40,4,49,13,9,16,68,41,6,42]),import.meta.url)),db=z.lazy(()=>Oe(()=>import("./WalletAdditionPage-DbVjhtt1.js"),__vite__mapDeps([69,1,24,19,20,21,50,6,29,32,40]),import.meta.url)),hb=z.lazy(()=>Oe(()=>import("./ReferralsPage-DMaGC1Wc.js"),__vite__mapDeps([70,1,37,28,31,26,13,61,53,62,30,42]),import.meta.url)),fb=z.lazy(()=>Oe(()=>import("./CPanelPage-DPg3CCNk.js"),__vite__mapDeps([71,1,24,39,20]),import.meta.url)),pb=z.lazy(()=>Oe(()=>import("./CPanelLoginPage-D_MYtUnb.js"),__vite__mapDeps([72,24,1,11]),import.meta.url)),mb=z.lazy(()=>Oe(()=>import("./NotFound-BONgnUNR.js"),[],import.meta.url)),gb=z.lazy(()=>Oe(()=>import("./SmsHookBridge-DtBrfG7N.js"),[],import.meta.url)),c8=new h4,u8=()=>{if(!((Te==null?void 0:Te.isNativePlatform)&&Te.getPlatform()==="android"))return null;const e=()=>{try{window.location.reload()}catch{}};return x.jsx("div",{className:"fixed top-2 right-2 z-[2000] flex items-center gap-2",style:{pointerEvents:"auto"},children:x.jsx("button",{type:"button","aria-label":"",title:" ",onClick:e,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-blue-600 hover:bg-blue-500/10 focus:outline-none dark:text-blue-400 dark:hover:bg-blue-400/10",children:x.jsx(Tx,{className:"w-5 h-5"})})})},yb=()=>{const t=Zr(),{user:e,loading:n}=$i(),r=(Te==null?void 0:Te.isNativePlatform)&&Te.getPlatform()==="android",s=t.pathname.startsWith("/user/dashboard"),i=r&&t.pathname==="/",o=!!e&&(s||i);return n?null:o?x.jsx(kz,{}):null},vb=()=>{const t=wD(),{profile:e}=$i(),n=Zr(),{toast:r}=H1();return $z(),A.useEffect(()=>{a8()},[]),A.useEffect(()=>{const s=TD(),i=n.pathname.startsWith("/user/dashboard");if(t&&(e!=null&&e.shopId)&&i){const o=s8({shopId:e.shopId,createdBy:e.userId});return()=>{try{o()}catch{}try{s()}catch{}}}return()=>{try{s()}catch{}}},[t,e==null?void 0:e.shopId,n.pathname]),A.useEffect(()=>{if(!t)return;const s=document.createElement("style");s.setAttribute("data-disable-pull-to-refresh","true"),s.textContent="html, body { overscroll-behavior-y: contain; touch-action: pan-y; }",document.head.appendChild(s);let i=0,o=null;const a=c=>{var d,h;i=((h=(d=c.touches)==null?void 0:d[0])==null?void 0:h.clientY)||0,o=c.target},l=c=>{var E,w;const d=((w=(E=c.touches)==null?void 0:E[0])==null?void 0:w.clientY)||0,h=document.scrollingElement||document.documentElement,p=h.scrollTop||window.scrollY||0,f=h.scrollHeight-h.clientHeight||0,_=o||null,y=(()=>{let v=_;for(;v&&v!==document.body;){const D=window.getComputedStyle(v).overflowY;if((D==="auto"||D==="scroll")&&v.scrollHeight>v.clientHeight)return!0;v=v.parentElement}return!1})();!y&&p<=0&&d>i&&c.cancelable&&c.preventDefault(),!y&&p>=f&&d<i&&c.cancelable&&c.preventDefault()};return document.addEventListener("touchstart",a,{passive:!0}),document.addEventListener("touchmove",l,{passive:!1}),()=>{document.removeEventListener("touchstart",a),document.removeEventListener("touchmove",l);try{document.head.removeChild(s)}catch{}}},[t]),A.useEffect(()=>{if(!((Te==null?void 0:Te.isNativePlatform)&&Te.getPlatform()==="android"))return;let i=!1;return(async()=>{try{const o="0.0.0",a=await fetch("https://cashy-link.com/mobile_version.json",{cache:"no-store"});if(!a.ok)throw new Error("   ");const l=await a.json(),c=String((l==null?void 0:l.version)||"0.0.0"),d=l!=null&&l.url?String(l.url).trim():void 0;if(!i&&d&&((p,f)=>{const _=p.split(".").map(E=>parseInt(E,10)||0),y=f.split(".").map(E=>parseInt(E,10)||0);for(let E=0;E<Math.max(_.length,y.length);E++){const w=_[E]||0,v=y[E]||0;if(w>v)return 1;if(w<v)return-1}return 0})(c,o)>0){try{r({title:"  ",description:` ${c}       `})}catch{}try{window.open(d,"_blank")}catch{}}}catch(o){console.warn("   :",o)}})(),()=>{i=!0}},[]),A.useEffect(()=>{const s=(Te==null?void 0:Te.isNativePlatform)&&Te.getPlatform()==="android",i=typeof window<"u"&&(window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"));if(s||i)return;let o=!1;return(async()=>{try{const a="0.0.0",l=await fetch("https://cashy-link.com/desktop_version.json",{cache:"no-store"});if(!l.ok)return;const c=await l.json(),d=String((c==null?void 0:c.version)||"0.0.0"),h=!!(c!=null&&c.force);if(!o&&((f,_)=>{const y=String(f).split(".").map(w=>parseInt(w,10)||0),E=String(_).split(".").map(w=>parseInt(w,10)||0);for(let w=0;w<Math.max(y.length,E.length);w++){const v=y[w]||0,I=E[w]||0;if(v>I)return 1;if(v<I)return-1}return 0})(d,a)>0){if(h){try{window.location.reload()}catch{}return}try{r({title:"  ",description:` ${d}      `})}catch{}}}catch{}})(),()=>{o=!0}},[]),null},_b=()=>Zr().pathname.startsWith("/user/dashboard")?x.jsxs(x.Fragment,{children:[x.jsx(vL,{}),x.jsx(ZL,{})]}):null,d8=()=>x.jsx(p4,{client:c8,children:x.jsx(gU,{children:x.jsxs(UF,{children:[typeof window<"u"&&(window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"))&&!(Te!=null&&Te.isNativePlatform&&Te.getPlatform()==="android")&&x.jsx(Dz,{}),x.jsx(u8,{}),typeof window<"u"&&(window.electronAPI||window.location.protocol==="file:"||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron")||typeof window.location.hash=="string"&&window.location.hash.startsWith("#/")||typeof import.meta<"u"&&l8)?x.jsxs(dU,{children:[x.jsx(vb,{}),x.jsx(_b,{}),x.jsxs(A.Suspense,{fallback:x.jsx(uh,{}),children:[null,x.jsxs(BT,{children:[x.jsx(se,{path:"/",element:Te!=null&&Te.isNativePlatform&&Te.getPlatform()==="android"?z.createElement(()=>{const{user:e,loading:n}=$i();return n?z.createElement(uh):e?z.createElement(ph):z.createElement(ch)}):x.jsx(dh,{})}),x.jsx(se,{path:"/dashboard-redirect",element:x.jsx(QS,{})}),x.jsx(se,{path:"/landing",element:x.jsx(dh,{})}),x.jsx(se,{path:"/subscriptions",element:x.jsx(YS,{})}),x.jsx(se,{path:"/auth",element:x.jsx(XS,{})}),x.jsx(se,{path:"/sms-hook",element:x.jsx(gb,{})}),x.jsx(se,{path:"/user/login",element:x.jsx(ch,{})}),x.jsx(se,{path:"/user/forgot-password",element:x.jsx(tb,{})}),x.jsx(se,{path:"/user/register",element:x.jsx(fh,{})}),x.jsx(se,{path:"/register",element:x.jsx(fh,{})}),x.jsx(se,{path:"/user/account-setup",element:x.jsx(eb,{})}),x.jsx(se,{path:"/user/pending-approval",element:x.jsx(ib,{})}),x.jsx(se,{path:"/user/dashboard",element:x.jsx(ph,{})}),x.jsx(se,{path:"/user/add-wallet",element:x.jsx(db,{})}),x.jsx(se,{path:"/admin/login",element:x.jsx(ob,{})}),x.jsx(se,{path:"/admin/dashboard",element:x.jsx(ab,{})}),x.jsx(se,{path:"/admin/topups",element:x.jsx(JS,{})}),x.jsx(se,{path:"/admin/notifications",element:x.jsx(ZS,{})}),x.jsx(se,{path:"/profile-settings",element:x.jsx(cb,{})}),x.jsx(se,{path:"/transactions",element:x.jsx(ub,{})}),x.jsx(se,{path:"/referrals",element:x.jsx(hb,{})}),x.jsx(se,{path:"/cpanel",element:x.jsx(fb,{})}),x.jsx(se,{path:"/cpanel/login",element:x.jsx(pb,{})}),x.jsx(se,{path:"/auth-test",element:x.jsx(lb,{})}),x.jsx(se,{path:"/topup",element:x.jsx(hh,{})}),x.jsx(se,{path:"/recharge",element:x.jsx(hh,{})}),x.jsx(se,{path:"/merchant/*",element:x.jsx(sb,{})}),x.jsx(se,{path:"/dashboard/login",element:x.jsx(nb,{})}),x.jsx(se,{path:"/dashboard",element:x.jsx(rb,{})}),x.jsx(se,{path:"*",element:x.jsx(mb,{})})]})]}),x.jsx(yb,{})]}):x.jsxs(uU,{children:[x.jsx(vb,{}),x.jsx(_b,{}),x.jsxs(A.Suspense,{fallback:x.jsx(uh,{}),children:[null,x.jsxs(BT,{children:[x.jsx(se,{path:"/",element:Te!=null&&Te.isNativePlatform&&Te.getPlatform()==="android"?z.createElement(()=>{const{user:e,loading:n}=$i();return n?z.createElement(uh):e?z.createElement(ph):z.createElement(ch)}):x.jsx(dh,{})}),x.jsx(se,{path:"/dashboard-redirect",element:x.jsx(QS,{})}),x.jsx(se,{path:"/landing",element:x.jsx(dh,{})}),x.jsx(se,{path:"/subscriptions",element:x.jsx(YS,{})}),x.jsx(se,{path:"/auth",element:x.jsx(XS,{})}),x.jsx(se,{path:"/sms-hook",element:x.jsx(gb,{})}),x.jsx(se,{path:"/user/login",element:x.jsx(ch,{})}),x.jsx(se,{path:"/user/forgot-password",element:x.jsx(tb,{})}),x.jsx(se,{path:"/user/register",element:x.jsx(fh,{})}),x.jsx(se,{path:"/register",element:x.jsx(fh,{})}),x.jsx(se,{path:"/user/account-setup",element:x.jsx(eb,{})}),x.jsx(se,{path:"/user/pending-approval",element:x.jsx(ib,{})}),x.jsx(se,{path:"/user/dashboard",element:x.jsx(ph,{})}),x.jsx(se,{path:"/user/add-wallet",element:x.jsx(db,{})}),x.jsx(se,{path:"/admin/login",element:x.jsx(ob,{})}),x.jsx(se,{path:"/admin/dashboard",element:x.jsx(ab,{})}),x.jsx(se,{path:"/admin/topups",element:x.jsx(JS,{})}),x.jsx(se,{path:"/admin/notifications",element:x.jsx(ZS,{})}),x.jsx(se,{path:"/profile-settings",element:x.jsx(cb,{})}),x.jsx(se,{path:"/transactions",element:x.jsx(ub,{})}),x.jsx(se,{path:"/referrals",element:x.jsx(hb,{})}),x.jsx(se,{path:"/cpanel",element:x.jsx(fb,{})}),x.jsx(se,{path:"/cpanel/login",element:x.jsx(pb,{})}),x.jsx(se,{path:"/auth-test",element:x.jsx(lb,{})}),x.jsx(se,{path:"/topup",element:x.jsx(hh,{})}),x.jsx(se,{path:"/recharge",element:x.jsx(hh,{})}),x.jsx(se,{path:"/merchant/*",element:x.jsx(sb,{})}),x.jsx(se,{path:"/dashboard/login",element:x.jsx(nb,{})}),x.jsx(se,{path:"/dashboard",element:x.jsx(rb,{})}),x.jsx(se,{path:"*",element:x.jsx(mb,{})})]})]}),x.jsx(yb,{})]})]})})}),ID=A.createContext(void 0),h8=({children:t})=>{const[e,n]=A.useState(null),[r,s]=A.useState(!1),[i,o]=A.useState(null),{profile:a,user:l}=$i();A.useEffect(()=>{try{const p=localStorage.getItem("cashier_shift_user"),f=localStorage.getItem("cashier_shift_active"),_=localStorage.getItem("cashier_shift_start_at");p&&n(JSON.parse(p)),f&&s(f==="true"),_&&o(Number(_))}catch{}},[]),A.useEffect(()=>{if(!(a!=null&&a.shopId))return;const p=ve(Q,"cashierShift",a.shopId);let f=null;return(async()=>{try{(await St(p)).exists()||await ji(p,{isShiftActive:!1,shiftStartAt:null,shiftUser:null}),f=Zf(p,y=>{if(y.exists()){const E=y.data(),w=(E==null?void 0:E.shiftUser)||null,v=!!(E!=null&&E.isShiftActive),I=(E==null?void 0:E.shiftStartAt)??null;let D=w;if(!D)try{const O=localStorage.getItem("cashier_shift_user"),V=O?JSON.parse(O):null;V&&(D=V)}catch{}n(D),s(v),o(typeof I=="number"?I:I?Number(I):null);try{D?localStorage.setItem("cashier_shift_user",JSON.stringify(D)):localStorage.removeItem("cashier_shift_user"),localStorage.setItem("cashier_shift_active",v?"true":"false"),I!=null&&localStorage.setItem("cashier_shift_start_at",String(I))}catch{}}},y=>{console.warn("cashierShift snapshot error:",y)})}catch(_){console.warn("Failed to init cashierShift doc:",_)}})(),()=>{f&&f()}},[a==null?void 0:a.shopId]);const c=p=>{n(p);try{p?localStorage.setItem("cashier_shift_user",JSON.stringify(p)):localStorage.removeItem("cashier_shift_user")}catch{}try{if(a!=null&&a.shopId){const f=ve(Q,"cashierShift",a.shopId);st(f,{shiftUser:p||null})}}catch{}},d=()=>{s(!0);try{localStorage.setItem("cashier_shift_active","true")}catch{}const p=Date.now();o(p);try{localStorage.setItem("cashier_shift_start_at",String(p))}catch{}try{if(a!=null&&a.shopId){const f=ve(Q,"cashierShift",a.shopId);st(f,{isShiftActive:!0,shiftStartAt:p})}}catch{}try{const _=`cashBalance_${(l==null?void 0:l.uid)||"default"}`,y=`userCashBalance_${(l==null?void 0:l.uid)||"default"}`,E=`walletBalances_${(l==null?void 0:l.uid)||"default"}`;let w=localStorage.getItem(_);if(w==null){const I=localStorage.getItem(y);if(I!=null){w=I;try{localStorage.setItem(_,I),localStorage.removeItem(y)}catch{}}}if(w==null&&(l!=null&&l.uid)){const I=localStorage.getItem("cashBalance"),D=localStorage.getItem("userCashBalance");if(I!=null){try{localStorage.setItem(_,I),localStorage.removeItem("cashBalance")}catch{}w=I}else if(D!=null){try{localStorage.setItem(_,D),localStorage.removeItem("userCashBalance")}catch{}w=D}}const v=localStorage.getItem(E);w?localStorage.setItem("shiftStartDrawerFunds",w):localStorage.setItem("shiftStartDrawerFunds","0"),v?localStorage.setItem("shiftStartWalletBalances",v):localStorage.setItem("shiftStartWalletBalances","{}")}catch{}try{a!=null&&a.shopId&&(async()=>{try{const f=ve(Q,"dashboardData",a.shopId),_=await St(f);if(_.exists()){const y=_.data(),E=Number((y==null?void 0:y.cashBalance)??0),w=(y==null?void 0:y.walletBalances)??{};try{const v=localStorage.getItem("shiftStartDrawerFunds"),I=localStorage.getItem("shiftStartWalletBalances"),D=v?parseFloat(v):0,O=I?JSON.parse(I):{},V=!v||!Number.isFinite(D)||D===0,S=!I||Object.keys(O||{}).length===0;V&&localStorage.setItem("shiftStartDrawerFunds",String(Number.isFinite(E)?E:0)),S&&localStorage.setItem("shiftStartWalletBalances",JSON.stringify(w||{}))}catch{}}}catch(f){console.warn("Shift start Firebase read failed:",f)}})()}catch{}},h=()=>{s(!1);try{localStorage.setItem("cashier_shift_active","false")}catch{}try{if(a!=null&&a.shopId){const p=ve(Q,"cashierShift",a.shopId);st(p,{isShiftActive:!1})}}catch{}};return x.jsx(ID.Provider,{value:{shiftUser:e,isShiftActive:r,shiftStartAt:i,setShiftUser:c,startShift:d,endShift:h},children:t})},q8=()=>{const t=A.useContext(ID);if(!t)throw new Error("useShift must be used within ShiftProvider");return t},SD=A.createContext(void 0);function f8({children:t}){const{profile:e,user:n,loading:r}=$i(),[s,i]=A.useState(null),[o,a]=A.useState(null),[l,c]=A.useState(!0);A.useEffect(()=>{!r&&e?(i(e.shopId),a((e==null?void 0:e.shopName)||(n==null?void 0:n.displayName)||""),c(!1)):r||c(!1)},[e,r]);const d={shopId:s,shopName:o,loading:l};return x.jsx(SD.Provider,{value:d,children:t})}function H8(){const t=A.useContext(SD);return t===void 0?{shopId:null,shopName:null,loading:!1}:t}try{const t=navigator.userAgent||navigator.vendor||"",e=/iPad|iPhone|iPod/.test(t),n=document.documentElement;n&&(n.classList.toggle("ios",e),n.classList.toggle("android",!e))}catch{}try{TD()}catch{}const p8=()=>{const{theme:t="system"}=Ox();return A.useEffect(()=>{try{const e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,n=t==="system"?e?"dark":"light":t;document.documentElement.setAttribute("data-theme",n||"light"),document.documentElement.classList.toggle("dark",n==="dark")}catch{}},[t]),null};q1(document.getElementById("root")).render(x.jsx(EL,{attribute:"class",defaultTheme:"system",enableSystem:!0,storageKey:"theme",children:x.jsx(Cz,{children:x.jsx(h8,{children:x.jsxs(f8,{children:[x.jsx(d8,{}),x.jsx(p8,{})]})})})}));export{_D as $,EV as A,CP as B,IV as C,zh as D,bV as E,t0 as F,Z3 as G,ji as H,Uy as I,ot as J,St as K,pU as L,CV as M,I8 as N,st as O,z8 as P,pz as Q,z as R,DV as S,D8 as T,VV as U,C8 as V,k8 as W,Tv as X,Rs as Y,wx as Z,Zr as _,Ju as a,Ri as a$,je as a0,_p as a1,kO as a2,Rn as a3,Ct as a4,Ir as a5,KO as a6,Pi as a7,NV as a8,Oe as a9,hF as aA,Ol as aB,A8 as aC,IO as aD,H8 as aE,M9 as aF,Sz as aG,xV as aH,LV as aI,Mn as aJ,b8 as aK,Ox as aL,ED as aM,kV as aN,M8 as aO,F8 as aP,U8 as aQ,Pz as aR,B8 as aS,zz as aT,Gx as aU,v8 as aV,_F as aW,G1 as aX,wF as aY,EF as aZ,W1 as a_,$h as aa,q8 as ab,wD as ac,Te as ad,oT as ae,TV as af,$k as ag,uh as ah,cT as ai,BT as aj,se as ak,R8 as al,vz as am,be as an,Iz as ao,lT as ap,SV as aq,L8 as ar,__ as as,J1 as at,mf as au,v_ as av,g8 as aw,Ix as ax,yD as ay,F9 as az,S8 as b,YO as b0,Qu as b1,tg as b2,wV as b3,x8 as b4,OV as b5,V8 as b6,jb as b7,gD as b8,Gz as b9,xO as ba,yU as bb,bz as bc,qz as bd,$8 as be,Tg as bf,xg as bg,N8 as bh,j8 as bi,H1 as c,Yn as d,ye as e,Q as f,Ne as g,Kk as h,e0 as i,x as j,Bi as k,Qo as l,aT as m,RV as n,ps as o,AV as p,Re as q,A as r,Ae as s,J3 as t,$i as u,ve as v,Zf as w,It as x,O8 as y,Az as z};
