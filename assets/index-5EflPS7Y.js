const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./LandingPage--QYxjMjz.js","./card-DXPppts9.js","./BrandLogo-iWwdQfWM.js","./brandingService-B-3sLvMY.js","./whatsappService-e_9Fvgqq.js","./appDownloadService-CTNigCCW.js","./arrow-left-BVSspWOA.js","./star-D4Uw9DR7.js","./crown-BhpGj06N.js","./download-BQPqh6Fo.js","./zap-Dke5XZOx.js","./shield-Aq4l2F3b.js","./chart-column-BlRvdiwo.js","./circle-check-big-DzztOUK9.js","./SubscriptionsPage-C_rB61ao.js","./contentService-qny9X-pr.js","./calendar-BU1uXyDN.js","./AuthPage-CN0RUqUg.js","./TopUpPage-F75GJEz-.js","./select-3q_346E_.js","./Combination-vrlhZqzc.js","./index-R9UGA7TY.js","./AdminTopupsPage-Csh67C00.js","./AdminNotificationsPage-B1NBvUYi.js","./label-BbMWBagC.js","./textarea-BAl1sXqW.js","./link-D0cf6h9k.js","./UserRegisterPage-E9aNRuc9.js","./alert-CtvWcCoE.js","./wallet-NIRbOtei.js","./user-plus-BDIrShqr.js","./share-2-CAsTSZCR.js","./phone-32lCvTTa.js","./store-Cv8kdbYl.js","./UserAccountSetupPage-KeMd32sY.js","./DashboardLoginPage-CDsJWVSV.js","./ProtectedDashboard-bQU-7R7U.js","./badge-DZ4fmRLR.js","./MasterPinDialog-DQOde7Hj.js","./dialog-CY7KVlhj.js","./circle-alert-L2Owt6-y.js","./dollar-sign-Cmw8CMzs.js","./circle-x-BJ7R2vQm.js","./ProtectedUserDashboard-1TifHx97.js","./broadcastService-Bof4v1SY.js","./MerchantDashboard-SKL08lXg.js","./dropdown-menu-CJa_lzny.js","./index-BCcWEWHS.js","./WalletsManagement-CoAIDop2.js","./progress-CZ6HS10G.js","./walletDailyLimitsService-Byppxers.js","./square-pen-DVq8unyz.js","./PendingApprovalPage-8v6Z0sco.js","./gift-DNdE2rEQ.js","./refresh-cw-CqBeElke.js","./AdminLogin-DnxwhLXv.js","./ProtectedAdminDashboard-Disl1chM.js","./ProfileIcon-hWPGCzqD.js","./avatars-B3bU3TqP.js","./switch-BxgIsed2.js","./separator-CyutvTNL.js","./copy-ZnZgFMRQ.js","./users-rCeJ0QAM.js","./AuthTestPage-CekhG04G.js","./ProfileSettingsPage-D_NtquRo.js","./walletSelectionPinService-DsJwE7rO.js","./TransactionsPage-CUJ1ehEV.js","./MaintenanceDialog-xOpK61Iw.js","./profitService-B_O8unCh.js","./WalletAdditionPage-1pmhgLFJ.js","./ReferralsPage-Dl_XhO-U.js","./CPanelPage-EtXtcc0B.js","./CPanelLoginPage-dXkG_Lpb.js"])))=>i.map(i=>d[i]);
var cN=Object.defineProperty;var ZE=t=>{throw TypeError(t)};var uN=(t,e,n)=>e in t?cN(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var e0=(t,e,n)=>uN(t,typeof e!="symbol"?e+"":e,n),km=(t,e,n)=>e.has(t)||ZE("Cannot "+n);var $=(t,e,n)=>(km(t,e,"read from private field"),n?n.call(t):e.get(t)),Ne=(t,e,n)=>e.has(t)?ZE("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),pe=(t,e,n,r)=>(km(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Gt=(t,e,n)=>(km(t,e,"access private method"),n);var Vd=(t,e,n,r)=>({set _(s){pe(t,e,s,n)},get _(){return $(t,e,r)}});function dN(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function qb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Hb={exports:{}},lp={},Wb={exports:{}},Re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yu=Symbol.for("react.element"),hN=Symbol.for("react.portal"),fN=Symbol.for("react.fragment"),pN=Symbol.for("react.strict_mode"),mN=Symbol.for("react.profiler"),gN=Symbol.for("react.provider"),yN=Symbol.for("react.context"),vN=Symbol.for("react.forward_ref"),_N=Symbol.for("react.suspense"),wN=Symbol.for("react.memo"),EN=Symbol.for("react.lazy"),t0=Symbol.iterator;function TN(t){return t===null||typeof t!="object"?null:(t=t0&&t[t0]||t["@@iterator"],typeof t=="function"?t:null)}var Kb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Gb=Object.assign,Qb={};function Pl(t,e,n){this.props=t,this.context=e,this.refs=Qb,this.updater=n||Kb}Pl.prototype.isReactComponent={};Pl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Pl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Yb(){}Yb.prototype=Pl.prototype;function Vv(t,e,n){this.props=t,this.context=e,this.refs=Qb,this.updater=n||Kb}var Lv=Vv.prototype=new Yb;Lv.constructor=Vv;Gb(Lv,Pl.prototype);Lv.isPureReactComponent=!0;var n0=Array.isArray,Xb=Object.prototype.hasOwnProperty,Mv={current:null},Jb={key:!0,ref:!0,__self:!0,__source:!0};function Zb(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Xb.call(e,r)&&!Jb.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Yu,type:t,key:i,ref:o,props:s,_owner:Mv.current}}function IN(t,e){return{$$typeof:Yu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Fv(t){return typeof t=="object"&&t!==null&&t.$$typeof===Yu}function SN(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var r0=/\/+/g;function Dm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?SN(""+t.key):e.toString(36)}function wh(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Yu:case hN:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Dm(o,0):r,n0(s)?(n="",t!=null&&(n=t.replace(r0,"$&/")+"/"),wh(s,e,n,"",function(c){return c})):s!=null&&(Fv(s)&&(s=IN(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(r0,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",n0(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Dm(i,a);o+=wh(i,e,n,l,s)}else if(l=TN(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Dm(i,a++),o+=wh(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ld(t,e,n){if(t==null)return t;var r=[],s=0;return wh(t,r,"","",function(i){return e.call(n,i,s++)}),r}function bN(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var mn={current:null},Eh={transition:null},AN={ReactCurrentDispatcher:mn,ReactCurrentBatchConfig:Eh,ReactCurrentOwner:Mv};function eA(){throw Error("act(...) is not supported in production builds of React.")}Re.Children={map:Ld,forEach:function(t,e,n){Ld(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ld(t,function(){e++}),e},toArray:function(t){return Ld(t,function(e){return e})||[]},only:function(t){if(!Fv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Re.Component=Pl;Re.Fragment=fN;Re.Profiler=mN;Re.PureComponent=Vv;Re.StrictMode=pN;Re.Suspense=_N;Re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=AN;Re.act=eA;Re.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Gb({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Mv.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Xb.call(e,l)&&!Jb.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Yu,type:t.type,key:s,ref:i,props:r,_owner:o}};Re.createContext=function(t){return t={$$typeof:yN,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:gN,_context:t},t.Consumer=t};Re.createElement=Zb;Re.createFactory=function(t){var e=Zb.bind(null,t);return e.type=t,e};Re.createRef=function(){return{current:null}};Re.forwardRef=function(t){return{$$typeof:vN,render:t}};Re.isValidElement=Fv;Re.lazy=function(t){return{$$typeof:EN,_payload:{_status:-1,_result:t},_init:bN}};Re.memo=function(t,e){return{$$typeof:wN,type:t,compare:e===void 0?null:e}};Re.startTransition=function(t){var e=Eh.transition;Eh.transition={};try{t()}finally{Eh.transition=e}};Re.unstable_act=eA;Re.useCallback=function(t,e){return mn.current.useCallback(t,e)};Re.useContext=function(t){return mn.current.useContext(t)};Re.useDebugValue=function(){};Re.useDeferredValue=function(t){return mn.current.useDeferredValue(t)};Re.useEffect=function(t,e){return mn.current.useEffect(t,e)};Re.useId=function(){return mn.current.useId()};Re.useImperativeHandle=function(t,e,n){return mn.current.useImperativeHandle(t,e,n)};Re.useInsertionEffect=function(t,e){return mn.current.useInsertionEffect(t,e)};Re.useLayoutEffect=function(t,e){return mn.current.useLayoutEffect(t,e)};Re.useMemo=function(t,e){return mn.current.useMemo(t,e)};Re.useReducer=function(t,e,n){return mn.current.useReducer(t,e,n)};Re.useRef=function(t){return mn.current.useRef(t)};Re.useState=function(t){return mn.current.useState(t)};Re.useSyncExternalStore=function(t,e,n){return mn.current.useSyncExternalStore(t,e,n)};Re.useTransition=function(){return mn.current.useTransition()};Re.version="18.3.1";Wb.exports=Re;var b=Wb.exports;const z=qb(b),tA=dN({__proto__:null,default:z},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xN=b,PN=Symbol.for("react.element"),RN=Symbol.for("react.fragment"),CN=Object.prototype.hasOwnProperty,kN=xN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,DN={key:!0,ref:!0,__self:!0,__source:!0};function nA(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)CN.call(e,r)&&!DN.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:PN,type:t,key:i,ref:o,props:s,_owner:kN.current}}lp.Fragment=RN;lp.jsx=nA;lp.jsxs=nA;Hb.exports=lp;var x=Hb.exports,rA={exports:{}},Kn={},sA={exports:{}},iA={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,U){var Y=F.length;F.push(U);e:for(;0<Y;){var de=Y-1>>>1,ne=F[de];if(0<s(ne,U))F[de]=U,F[Y]=ne,Y=de;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var U=F[0],Y=F.pop();if(Y!==U){F[0]=Y;e:for(var de=0,ne=F.length,ce=ne>>>1;de<ce;){var le=2*(de+1)-1,Te=F[le],Qe=le+1,ae=F[Qe];if(0>s(Te,Y))Qe<ne&&0>s(ae,Te)?(F[de]=ae,F[Qe]=Y,de=Qe):(F[de]=Te,F[le]=Y,de=le);else if(Qe<ne&&0>s(ae,Y))F[de]=ae,F[Qe]=Y,de=Qe;else break e}}return U}function s(F,U){var Y=F.sortIndex-U.sortIndex;return Y!==0?Y:F.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,p=3,f=!1,E=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(F){for(var U=n(c);U!==null;){if(U.callback===null)r(c);else if(U.startTime<=F)r(c),U.sortIndex=U.expirationTime,e(l,U);else break;U=n(c)}}function D(F){if(y=!1,I(F),!E)if(n(l)!==null)E=!0,ie(O);else{var U=n(c);U!==null&&Q(D,U.startTime-F)}}function O(F,U){E=!1,y&&(y=!1,_(T),T=-1),f=!0;var Y=p;try{for(I(U),h=n(l);h!==null&&(!(h.expirationTime>U)||F&&!P());){var de=h.callback;if(typeof de=="function"){h.callback=null,p=h.priorityLevel;var ne=de(h.expirationTime<=U);U=t.unstable_now(),typeof ne=="function"?h.callback=ne:h===n(l)&&r(l),I(U)}else r(l);h=n(l)}if(h!==null)var ce=!0;else{var le=n(c);le!==null&&Q(D,le.startTime-U),ce=!1}return ce}finally{h=null,p=Y,f=!1}}var V=!1,S=null,T=-1,A=5,k=-1;function P(){return!(t.unstable_now()-k<A)}function N(){if(S!==null){var F=t.unstable_now();k=F;var U=!0;try{U=S(!0,F)}finally{U?C():(V=!1,S=null)}}else V=!1}var C;if(typeof w=="function")C=function(){w(N)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,Z=q.port2;q.port1.onmessage=N,C=function(){Z.postMessage(null)}}else C=function(){v(N,0)};function ie(F){S=F,V||(V=!0,C())}function Q(F,U){T=v(function(){F(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){E||f||(E=!0,ie(O))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(F){switch(p){case 1:case 2:case 3:var U=3;break;default:U=p}var Y=p;p=U;try{return F()}finally{p=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,U){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var Y=p;p=F;try{return U()}finally{p=Y}},t.unstable_scheduleCallback=function(F,U,Y){var de=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?de+Y:de):Y=de,F){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=Y+ne,F={id:d++,callback:U,priorityLevel:F,startTime:Y,expirationTime:ne,sortIndex:-1},Y>de?(F.sortIndex=Y,e(c,F),n(l)===null&&F===n(c)&&(y?(_(T),T=-1):y=!0,Q(D,Y-de))):(F.sortIndex=ne,e(l,F),E||f||(E=!0,ie(O))),F},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(F){var U=p;return function(){var Y=p;p=U;try{return F.apply(this,arguments)}finally{p=Y}}}})(iA);sA.exports=iA;var NN=sA.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ON=b,Hn=NN;function K(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var oA=new Set,ou={};function Zo(t,e){Ja(t,e),Ja(t+"Capture",e)}function Ja(t,e){for(ou[t]=e,t=0;t<e.length;t++)oA.add(e[t])}var Ts=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fg=Object.prototype.hasOwnProperty,VN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,s0={},i0={};function LN(t){return Fg.call(i0,t)?!0:Fg.call(s0,t)?!1:VN.test(t)?i0[t]=!0:(s0[t]=!0,!1)}function MN(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function FN(t,e,n,r){if(e===null||typeof e>"u"||MN(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function gn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Ht={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ht[t]=new gn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ht[e]=new gn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ht[t]=new gn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ht[t]=new gn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ht[t]=new gn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ht[t]=new gn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ht[t]=new gn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ht[t]=new gn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ht[t]=new gn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Uv=/[\-:]([a-z])/g;function jv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Uv,jv);Ht[e]=new gn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Uv,jv);Ht[e]=new gn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Uv,jv);Ht[e]=new gn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ht[t]=new gn(t,1,!1,t.toLowerCase(),null,!1,!1)});Ht.xlinkHref=new gn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ht[t]=new gn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Bv(t,e,n,r){var s=Ht.hasOwnProperty(e)?Ht[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(FN(e,n,s,r)&&(n=null),r||s===null?LN(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ks=ON.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Md=Symbol.for("react.element"),Ea=Symbol.for("react.portal"),Ta=Symbol.for("react.fragment"),$v=Symbol.for("react.strict_mode"),Ug=Symbol.for("react.profiler"),aA=Symbol.for("react.provider"),lA=Symbol.for("react.context"),zv=Symbol.for("react.forward_ref"),jg=Symbol.for("react.suspense"),Bg=Symbol.for("react.suspense_list"),qv=Symbol.for("react.memo"),ti=Symbol.for("react.lazy"),cA=Symbol.for("react.offscreen"),o0=Symbol.iterator;function lc(t){return t===null||typeof t!="object"?null:(t=o0&&t[o0]||t["@@iterator"],typeof t=="function"?t:null)}var ut=Object.assign,Nm;function bc(t){if(Nm===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Nm=e&&e[1]||""}return`
`+Nm+t}var Om=!1;function Vm(t,e){if(!t||Om)return"";Om=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Om=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?bc(t):""}function UN(t){switch(t.tag){case 5:return bc(t.type);case 16:return bc("Lazy");case 13:return bc("Suspense");case 19:return bc("SuspenseList");case 0:case 2:case 15:return t=Vm(t.type,!1),t;case 11:return t=Vm(t.type.render,!1),t;case 1:return t=Vm(t.type,!0),t;default:return""}}function $g(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ta:return"Fragment";case Ea:return"Portal";case Ug:return"Profiler";case $v:return"StrictMode";case jg:return"Suspense";case Bg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case lA:return(t.displayName||"Context")+".Consumer";case aA:return(t._context.displayName||"Context")+".Provider";case zv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case qv:return e=t.displayName||null,e!==null?e:$g(t.type)||"Memo";case ti:e=t._payload,t=t._init;try{return $g(t(e))}catch{}}return null}function jN(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $g(e);case 8:return e===$v?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ki(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function uA(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function BN(t){var e=uA(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Fd(t){t._valueTracker||(t._valueTracker=BN(t))}function dA(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=uA(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Qh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function zg(t,e){var n=e.checked;return ut({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function a0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ki(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function hA(t,e){e=e.checked,e!=null&&Bv(t,"checked",e,!1)}function qg(t,e){hA(t,e);var n=ki(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Hg(t,e.type,n):e.hasOwnProperty("defaultValue")&&Hg(t,e.type,ki(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function l0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Hg(t,e,n){(e!=="number"||Qh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ac=Array.isArray;function Na(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ki(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Wg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(K(91));return ut({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function c0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(K(92));if(Ac(n)){if(1<n.length)throw Error(K(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ki(n)}}function fA(t,e){var n=ki(e.value),r=ki(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function u0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function pA(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Kg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?pA(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ud,mA=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ud=Ud||document.createElement("div"),Ud.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ud.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function au(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Mc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$N=["Webkit","ms","Moz","O"];Object.keys(Mc).forEach(function(t){$N.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Mc[e]=Mc[t]})});function gA(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Mc.hasOwnProperty(t)&&Mc[t]?(""+e).trim():e+"px"}function yA(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=gA(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var zN=ut({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Gg(t,e){if(e){if(zN[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(K(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(K(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(K(61))}if(e.style!=null&&typeof e.style!="object")throw Error(K(62))}}function Qg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yg=null;function Hv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Xg=null,Oa=null,Va=null;function d0(t){if(t=Zu(t)){if(typeof Xg!="function")throw Error(K(280));var e=t.stateNode;e&&(e=fp(e),Xg(t.stateNode,t.type,e))}}function vA(t){Oa?Va?Va.push(t):Va=[t]:Oa=t}function _A(){if(Oa){var t=Oa,e=Va;if(Va=Oa=null,d0(t),e)for(t=0;t<e.length;t++)d0(e[t])}}function wA(t,e){return t(e)}function EA(){}var Lm=!1;function TA(t,e,n){if(Lm)return t(e,n);Lm=!0;try{return wA(t,e,n)}finally{Lm=!1,(Oa!==null||Va!==null)&&(EA(),_A())}}function lu(t,e){var n=t.stateNode;if(n===null)return null;var r=fp(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(K(231,e,typeof n));return n}var Jg=!1;if(Ts)try{var cc={};Object.defineProperty(cc,"passive",{get:function(){Jg=!0}}),window.addEventListener("test",cc,cc),window.removeEventListener("test",cc,cc)}catch{Jg=!1}function qN(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Fc=!1,Yh=null,Xh=!1,Zg=null,HN={onError:function(t){Fc=!0,Yh=t}};function WN(t,e,n,r,s,i,o,a,l){Fc=!1,Yh=null,qN.apply(HN,arguments)}function KN(t,e,n,r,s,i,o,a,l){if(WN.apply(this,arguments),Fc){if(Fc){var c=Yh;Fc=!1,Yh=null}else throw Error(K(198));Xh||(Xh=!0,Zg=c)}}function ea(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function IA(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function h0(t){if(ea(t)!==t)throw Error(K(188))}function GN(t){var e=t.alternate;if(!e){if(e=ea(t),e===null)throw Error(K(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return h0(s),t;if(i===r)return h0(s),e;i=i.sibling}throw Error(K(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(K(189))}}if(n.alternate!==r)throw Error(K(190))}if(n.tag!==3)throw Error(K(188));return n.stateNode.current===n?t:e}function SA(t){return t=GN(t),t!==null?bA(t):null}function bA(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=bA(t);if(e!==null)return e;t=t.sibling}return null}var AA=Hn.unstable_scheduleCallback,f0=Hn.unstable_cancelCallback,QN=Hn.unstable_shouldYield,YN=Hn.unstable_requestPaint,vt=Hn.unstable_now,XN=Hn.unstable_getCurrentPriorityLevel,Wv=Hn.unstable_ImmediatePriority,xA=Hn.unstable_UserBlockingPriority,Jh=Hn.unstable_NormalPriority,JN=Hn.unstable_LowPriority,PA=Hn.unstable_IdlePriority,cp=null,Qr=null;function ZN(t){if(Qr&&typeof Qr.onCommitFiberRoot=="function")try{Qr.onCommitFiberRoot(cp,t,void 0,(t.current.flags&128)===128)}catch{}}var vr=Math.clz32?Math.clz32:n2,e2=Math.log,t2=Math.LN2;function n2(t){return t>>>=0,t===0?32:31-(e2(t)/t2|0)|0}var jd=64,Bd=4194304;function xc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Zh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=xc(a):(i&=o,i!==0&&(r=xc(i)))}else o=n&~s,o!==0?r=xc(o):i!==0&&(r=xc(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-vr(e),s=1<<n,r|=t[n],e&=~s;return r}function r2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function s2(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-vr(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=r2(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function ey(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function RA(){var t=jd;return jd<<=1,!(jd&4194240)&&(jd=64),t}function Mm(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Xu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-vr(e),t[e]=n}function i2(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-vr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Kv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-vr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var $e=0;function CA(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var kA,Gv,DA,NA,OA,ty=!1,$d=[],yi=null,vi=null,_i=null,cu=new Map,uu=new Map,ri=[],o2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function p0(t,e){switch(t){case"focusin":case"focusout":yi=null;break;case"dragenter":case"dragleave":vi=null;break;case"mouseover":case"mouseout":_i=null;break;case"pointerover":case"pointerout":cu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":uu.delete(e.pointerId)}}function uc(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Zu(e),e!==null&&Gv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function a2(t,e,n,r,s){switch(e){case"focusin":return yi=uc(yi,t,e,n,r,s),!0;case"dragenter":return vi=uc(vi,t,e,n,r,s),!0;case"mouseover":return _i=uc(_i,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return cu.set(i,uc(cu.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,uu.set(i,uc(uu.get(i)||null,t,e,n,r,s)),!0}return!1}function VA(t){var e=wo(t.target);if(e!==null){var n=ea(e);if(n!==null){if(e=n.tag,e===13){if(e=IA(n),e!==null){t.blockedOn=e,OA(t.priority,function(){DA(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Th(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ny(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Yg=r,n.target.dispatchEvent(r),Yg=null}else return e=Zu(n),e!==null&&Gv(e),t.blockedOn=n,!1;e.shift()}return!0}function m0(t,e,n){Th(t)&&n.delete(e)}function l2(){ty=!1,yi!==null&&Th(yi)&&(yi=null),vi!==null&&Th(vi)&&(vi=null),_i!==null&&Th(_i)&&(_i=null),cu.forEach(m0),uu.forEach(m0)}function dc(t,e){t.blockedOn===e&&(t.blockedOn=null,ty||(ty=!0,Hn.unstable_scheduleCallback(Hn.unstable_NormalPriority,l2)))}function du(t){function e(s){return dc(s,t)}if(0<$d.length){dc($d[0],t);for(var n=1;n<$d.length;n++){var r=$d[n];r.blockedOn===t&&(r.blockedOn=null)}}for(yi!==null&&dc(yi,t),vi!==null&&dc(vi,t),_i!==null&&dc(_i,t),cu.forEach(e),uu.forEach(e),n=0;n<ri.length;n++)r=ri[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ri.length&&(n=ri[0],n.blockedOn===null);)VA(n),n.blockedOn===null&&ri.shift()}var La=ks.ReactCurrentBatchConfig,ef=!0;function c2(t,e,n,r){var s=$e,i=La.transition;La.transition=null;try{$e=1,Qv(t,e,n,r)}finally{$e=s,La.transition=i}}function u2(t,e,n,r){var s=$e,i=La.transition;La.transition=null;try{$e=4,Qv(t,e,n,r)}finally{$e=s,La.transition=i}}function Qv(t,e,n,r){if(ef){var s=ny(t,e,n,r);if(s===null)Km(t,e,r,tf,n),p0(t,r);else if(a2(s,t,e,n,r))r.stopPropagation();else if(p0(t,r),e&4&&-1<o2.indexOf(t)){for(;s!==null;){var i=Zu(s);if(i!==null&&kA(i),i=ny(t,e,n,r),i===null&&Km(t,e,r,tf,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Km(t,e,r,null,n)}}var tf=null;function ny(t,e,n,r){if(tf=null,t=Hv(r),t=wo(t),t!==null)if(e=ea(t),e===null)t=null;else if(n=e.tag,n===13){if(t=IA(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return tf=t,null}function LA(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(XN()){case Wv:return 1;case xA:return 4;case Jh:case JN:return 16;case PA:return 536870912;default:return 16}default:return 16}}var hi=null,Yv=null,Ih=null;function MA(){if(Ih)return Ih;var t,e=Yv,n=e.length,r,s="value"in hi?hi.value:hi.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Ih=s.slice(t,1<r?1-r:void 0)}function Sh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function zd(){return!0}function g0(){return!1}function Gn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?zd:g0,this.isPropagationStopped=g0,this}return ut(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=zd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=zd)},persist:function(){},isPersistent:zd}),e}var Rl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xv=Gn(Rl),Ju=ut({},Rl,{view:0,detail:0}),d2=Gn(Ju),Fm,Um,hc,up=ut({},Ju,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==hc&&(hc&&t.type==="mousemove"?(Fm=t.screenX-hc.screenX,Um=t.screenY-hc.screenY):Um=Fm=0,hc=t),Fm)},movementY:function(t){return"movementY"in t?t.movementY:Um}}),y0=Gn(up),h2=ut({},up,{dataTransfer:0}),f2=Gn(h2),p2=ut({},Ju,{relatedTarget:0}),jm=Gn(p2),m2=ut({},Rl,{animationName:0,elapsedTime:0,pseudoElement:0}),g2=Gn(m2),y2=ut({},Rl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),v2=Gn(y2),_2=ut({},Rl,{data:0}),v0=Gn(_2),w2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},E2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},T2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function I2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=T2[t])?!!e[t]:!1}function Jv(){return I2}var S2=ut({},Ju,{key:function(t){if(t.key){var e=w2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Sh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?E2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jv,charCode:function(t){return t.type==="keypress"?Sh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Sh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),b2=Gn(S2),A2=ut({},up,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_0=Gn(A2),x2=ut({},Ju,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jv}),P2=Gn(x2),R2=ut({},Rl,{propertyName:0,elapsedTime:0,pseudoElement:0}),C2=Gn(R2),k2=ut({},up,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),D2=Gn(k2),N2=[9,13,27,32],Zv=Ts&&"CompositionEvent"in window,Uc=null;Ts&&"documentMode"in document&&(Uc=document.documentMode);var O2=Ts&&"TextEvent"in window&&!Uc,FA=Ts&&(!Zv||Uc&&8<Uc&&11>=Uc),w0=" ",E0=!1;function UA(t,e){switch(t){case"keyup":return N2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jA(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ia=!1;function V2(t,e){switch(t){case"compositionend":return jA(e);case"keypress":return e.which!==32?null:(E0=!0,w0);case"textInput":return t=e.data,t===w0&&E0?null:t;default:return null}}function L2(t,e){if(Ia)return t==="compositionend"||!Zv&&UA(t,e)?(t=MA(),Ih=Yv=hi=null,Ia=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return FA&&e.locale!=="ko"?null:e.data;default:return null}}var M2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function T0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!M2[t.type]:e==="textarea"}function BA(t,e,n,r){vA(r),e=nf(e,"onChange"),0<e.length&&(n=new Xv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var jc=null,hu=null;function F2(t){JA(t,0)}function dp(t){var e=Aa(t);if(dA(e))return t}function U2(t,e){if(t==="change")return e}var $A=!1;if(Ts){var Bm;if(Ts){var $m="oninput"in document;if(!$m){var I0=document.createElement("div");I0.setAttribute("oninput","return;"),$m=typeof I0.oninput=="function"}Bm=$m}else Bm=!1;$A=Bm&&(!document.documentMode||9<document.documentMode)}function S0(){jc&&(jc.detachEvent("onpropertychange",zA),hu=jc=null)}function zA(t){if(t.propertyName==="value"&&dp(hu)){var e=[];BA(e,hu,t,Hv(t)),TA(F2,e)}}function j2(t,e,n){t==="focusin"?(S0(),jc=e,hu=n,jc.attachEvent("onpropertychange",zA)):t==="focusout"&&S0()}function B2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return dp(hu)}function $2(t,e){if(t==="click")return dp(e)}function z2(t,e){if(t==="input"||t==="change")return dp(e)}function q2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Tr=typeof Object.is=="function"?Object.is:q2;function fu(t,e){if(Tr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Fg.call(e,s)||!Tr(t[s],e[s]))return!1}return!0}function b0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function A0(t,e){var n=b0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=b0(n)}}function qA(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?qA(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function HA(){for(var t=window,e=Qh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Qh(t.document)}return e}function e_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function H2(t){var e=HA(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&qA(n.ownerDocument.documentElement,n)){if(r!==null&&e_(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=A0(n,i);var o=A0(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var W2=Ts&&"documentMode"in document&&11>=document.documentMode,Sa=null,ry=null,Bc=null,sy=!1;function x0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;sy||Sa==null||Sa!==Qh(r)||(r=Sa,"selectionStart"in r&&e_(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Bc&&fu(Bc,r)||(Bc=r,r=nf(ry,"onSelect"),0<r.length&&(e=new Xv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Sa)))}function qd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ba={animationend:qd("Animation","AnimationEnd"),animationiteration:qd("Animation","AnimationIteration"),animationstart:qd("Animation","AnimationStart"),transitionend:qd("Transition","TransitionEnd")},zm={},WA={};Ts&&(WA=document.createElement("div").style,"AnimationEvent"in window||(delete ba.animationend.animation,delete ba.animationiteration.animation,delete ba.animationstart.animation),"TransitionEvent"in window||delete ba.transitionend.transition);function hp(t){if(zm[t])return zm[t];if(!ba[t])return t;var e=ba[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in WA)return zm[t]=e[n];return t}var KA=hp("animationend"),GA=hp("animationiteration"),QA=hp("animationstart"),YA=hp("transitionend"),XA=new Map,P0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Wi(t,e){XA.set(t,e),Zo(e,[t])}for(var qm=0;qm<P0.length;qm++){var Hm=P0[qm],K2=Hm.toLowerCase(),G2=Hm[0].toUpperCase()+Hm.slice(1);Wi(K2,"on"+G2)}Wi(KA,"onAnimationEnd");Wi(GA,"onAnimationIteration");Wi(QA,"onAnimationStart");Wi("dblclick","onDoubleClick");Wi("focusin","onFocus");Wi("focusout","onBlur");Wi(YA,"onTransitionEnd");Ja("onMouseEnter",["mouseout","mouseover"]);Ja("onMouseLeave",["mouseout","mouseover"]);Ja("onPointerEnter",["pointerout","pointerover"]);Ja("onPointerLeave",["pointerout","pointerover"]);Zo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Q2=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pc));function R0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,KN(r,e,void 0,t),t.currentTarget=null}function JA(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;R0(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;R0(s,a,c),i=l}}}if(Xh)throw t=Zg,Xh=!1,Zg=null,t}function Je(t,e){var n=e[cy];n===void 0&&(n=e[cy]=new Set);var r=t+"__bubble";n.has(r)||(ZA(e,t,2,!1),n.add(r))}function Wm(t,e,n){var r=0;e&&(r|=4),ZA(n,t,r,e)}var Hd="_reactListening"+Math.random().toString(36).slice(2);function pu(t){if(!t[Hd]){t[Hd]=!0,oA.forEach(function(n){n!=="selectionchange"&&(Q2.has(n)||Wm(n,!1,t),Wm(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Hd]||(e[Hd]=!0,Wm("selectionchange",!1,e))}}function ZA(t,e,n,r){switch(LA(e)){case 1:var s=c2;break;case 4:s=u2;break;default:s=Qv}n=s.bind(null,e,n,t),s=void 0,!Jg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Km(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=wo(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}TA(function(){var c=i,d=Hv(n),h=[];e:{var p=XA.get(t);if(p!==void 0){var f=Xv,E=t;switch(t){case"keypress":if(Sh(n)===0)break e;case"keydown":case"keyup":f=b2;break;case"focusin":E="focus",f=jm;break;case"focusout":E="blur",f=jm;break;case"beforeblur":case"afterblur":f=jm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=y0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=f2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=P2;break;case KA:case GA:case QA:f=g2;break;case YA:f=C2;break;case"scroll":f=d2;break;case"wheel":f=D2;break;case"copy":case"cut":case"paste":f=v2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=_0}var y=(e&4)!==0,v=!y&&t==="scroll",_=y?p!==null?p+"Capture":null:p;y=[];for(var w=c,I;w!==null;){I=w;var D=I.stateNode;if(I.tag===5&&D!==null&&(I=D,_!==null&&(D=lu(w,_),D!=null&&y.push(mu(w,D,I)))),v)break;w=w.return}0<y.length&&(p=new f(p,E,null,n,d),h.push({event:p,listeners:y}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",p&&n!==Yg&&(E=n.relatedTarget||n.fromElement)&&(wo(E)||E[Is]))break e;if((f||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,f?(E=n.relatedTarget||n.toElement,f=c,E=E?wo(E):null,E!==null&&(v=ea(E),E!==v||E.tag!==5&&E.tag!==6)&&(E=null)):(f=null,E=c),f!==E)){if(y=y0,D="onMouseLeave",_="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(y=_0,D="onPointerLeave",_="onPointerEnter",w="pointer"),v=f==null?p:Aa(f),I=E==null?p:Aa(E),p=new y(D,w+"leave",f,n,d),p.target=v,p.relatedTarget=I,D=null,wo(d)===c&&(y=new y(_,w+"enter",E,n,d),y.target=I,y.relatedTarget=v,D=y),v=D,f&&E)t:{for(y=f,_=E,w=0,I=y;I;I=la(I))w++;for(I=0,D=_;D;D=la(D))I++;for(;0<w-I;)y=la(y),w--;for(;0<I-w;)_=la(_),I--;for(;w--;){if(y===_||_!==null&&y===_.alternate)break t;y=la(y),_=la(_)}y=null}else y=null;f!==null&&C0(h,p,f,y,!1),E!==null&&v!==null&&C0(h,v,E,y,!0)}}e:{if(p=c?Aa(c):window,f=p.nodeName&&p.nodeName.toLowerCase(),f==="select"||f==="input"&&p.type==="file")var O=U2;else if(T0(p))if($A)O=z2;else{O=B2;var V=j2}else(f=p.nodeName)&&f.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(O=$2);if(O&&(O=O(t,c))){BA(h,O,n,d);break e}V&&V(t,p,c),t==="focusout"&&(V=p._wrapperState)&&V.controlled&&p.type==="number"&&Hg(p,"number",p.value)}switch(V=c?Aa(c):window,t){case"focusin":(T0(V)||V.contentEditable==="true")&&(Sa=V,ry=c,Bc=null);break;case"focusout":Bc=ry=Sa=null;break;case"mousedown":sy=!0;break;case"contextmenu":case"mouseup":case"dragend":sy=!1,x0(h,n,d);break;case"selectionchange":if(W2)break;case"keydown":case"keyup":x0(h,n,d)}var S;if(Zv)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Ia?UA(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(FA&&n.locale!=="ko"&&(Ia||T!=="onCompositionStart"?T==="onCompositionEnd"&&Ia&&(S=MA()):(hi=d,Yv="value"in hi?hi.value:hi.textContent,Ia=!0)),V=nf(c,T),0<V.length&&(T=new v0(T,t,null,n,d),h.push({event:T,listeners:V}),S?T.data=S:(S=jA(n),S!==null&&(T.data=S)))),(S=O2?V2(t,n):L2(t,n))&&(c=nf(c,"onBeforeInput"),0<c.length&&(d=new v0("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=S))}JA(h,e)})}function mu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function nf(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=lu(t,n),i!=null&&r.unshift(mu(t,i,s)),i=lu(t,e),i!=null&&r.push(mu(t,i,s))),t=t.return}return r}function la(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function C0(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=lu(n,i),l!=null&&o.unshift(mu(n,l,a))):s||(l=lu(n,i),l!=null&&o.push(mu(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Y2=/\r\n?/g,X2=/\u0000|\uFFFD/g;function k0(t){return(typeof t=="string"?t:""+t).replace(Y2,`
`).replace(X2,"")}function Wd(t,e,n){if(e=k0(e),k0(t)!==e&&n)throw Error(K(425))}function rf(){}var iy=null,oy=null;function ay(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ly=typeof setTimeout=="function"?setTimeout:void 0,J2=typeof clearTimeout=="function"?clearTimeout:void 0,D0=typeof Promise=="function"?Promise:void 0,Z2=typeof queueMicrotask=="function"?queueMicrotask:typeof D0<"u"?function(t){return D0.resolve(null).then(t).catch(eO)}:ly;function eO(t){setTimeout(function(){throw t})}function Gm(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),du(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);du(e)}function wi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function N0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Cl=Math.random().toString(36).slice(2),qr="__reactFiber$"+Cl,gu="__reactProps$"+Cl,Is="__reactContainer$"+Cl,cy="__reactEvents$"+Cl,tO="__reactListeners$"+Cl,nO="__reactHandles$"+Cl;function wo(t){var e=t[qr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Is]||n[qr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=N0(t);t!==null;){if(n=t[qr])return n;t=N0(t)}return e}t=n,n=t.parentNode}return null}function Zu(t){return t=t[qr]||t[Is],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Aa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(K(33))}function fp(t){return t[gu]||null}var uy=[],xa=-1;function Ki(t){return{current:t}}function et(t){0>xa||(t.current=uy[xa],uy[xa]=null,xa--)}function Ke(t,e){xa++,uy[xa]=t.current,t.current=e}var Di={},on=Ki(Di),xn=Ki(!1),Fo=Di;function Za(t,e){var n=t.type.contextTypes;if(!n)return Di;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Pn(t){return t=t.childContextTypes,t!=null}function sf(){et(xn),et(on)}function O0(t,e,n){if(on.current!==Di)throw Error(K(168));Ke(on,e),Ke(xn,n)}function e1(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(K(108,jN(t)||"Unknown",s));return ut({},n,r)}function of(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Di,Fo=on.current,Ke(on,t),Ke(xn,xn.current),!0}function V0(t,e,n){var r=t.stateNode;if(!r)throw Error(K(169));n?(t=e1(t,e,Fo),r.__reactInternalMemoizedMergedChildContext=t,et(xn),et(on),Ke(on,t)):et(xn),Ke(xn,n)}var ls=null,pp=!1,Qm=!1;function t1(t){ls===null?ls=[t]:ls.push(t)}function rO(t){pp=!0,t1(t)}function Gi(){if(!Qm&&ls!==null){Qm=!0;var t=0,e=$e;try{var n=ls;for($e=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ls=null,pp=!1}catch(s){throw ls!==null&&(ls=ls.slice(t+1)),AA(Wv,Gi),s}finally{$e=e,Qm=!1}}return null}var Pa=[],Ra=0,af=null,lf=0,Zn=[],er=0,Uo=null,ds=1,hs="";function lo(t,e){Pa[Ra++]=lf,Pa[Ra++]=af,af=t,lf=e}function n1(t,e,n){Zn[er++]=ds,Zn[er++]=hs,Zn[er++]=Uo,Uo=t;var r=ds;t=hs;var s=32-vr(r)-1;r&=~(1<<s),n+=1;var i=32-vr(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,ds=1<<32-vr(e)+s|n<<s|r,hs=i+t}else ds=1<<i|n<<s|r,hs=t}function t_(t){t.return!==null&&(lo(t,1),n1(t,1,0))}function n_(t){for(;t===af;)af=Pa[--Ra],Pa[Ra]=null,lf=Pa[--Ra],Pa[Ra]=null;for(;t===Uo;)Uo=Zn[--er],Zn[er]=null,hs=Zn[--er],Zn[er]=null,ds=Zn[--er],Zn[er]=null}var Bn=null,Fn=null,rt=!1,gr=null;function r1(t,e){var n=tr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function L0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Bn=t,Fn=wi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Bn=t,Fn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Uo!==null?{id:ds,overflow:hs}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=tr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Bn=t,Fn=null,!0):!1;default:return!1}}function dy(t){return(t.mode&1)!==0&&(t.flags&128)===0}function hy(t){if(rt){var e=Fn;if(e){var n=e;if(!L0(t,e)){if(dy(t))throw Error(K(418));e=wi(n.nextSibling);var r=Bn;e&&L0(t,e)?r1(r,n):(t.flags=t.flags&-4097|2,rt=!1,Bn=t)}}else{if(dy(t))throw Error(K(418));t.flags=t.flags&-4097|2,rt=!1,Bn=t}}}function M0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Bn=t}function Kd(t){if(t!==Bn)return!1;if(!rt)return M0(t),rt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ay(t.type,t.memoizedProps)),e&&(e=Fn)){if(dy(t))throw s1(),Error(K(418));for(;e;)r1(t,e),e=wi(e.nextSibling)}if(M0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(K(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Fn=wi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Fn=null}}else Fn=Bn?wi(t.stateNode.nextSibling):null;return!0}function s1(){for(var t=Fn;t;)t=wi(t.nextSibling)}function el(){Fn=Bn=null,rt=!1}function r_(t){gr===null?gr=[t]:gr.push(t)}var sO=ks.ReactCurrentBatchConfig;function fc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(K(309));var r=n.stateNode}if(!r)throw Error(K(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(K(284));if(!n._owner)throw Error(K(290,t))}return t}function Gd(t,e){throw t=Object.prototype.toString.call(e),Error(K(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function F0(t){var e=t._init;return e(t._payload)}function i1(t){function e(_,w){if(t){var I=_.deletions;I===null?(_.deletions=[w],_.flags|=16):I.push(w)}}function n(_,w){if(!t)return null;for(;w!==null;)e(_,w),w=w.sibling;return null}function r(_,w){for(_=new Map;w!==null;)w.key!==null?_.set(w.key,w):_.set(w.index,w),w=w.sibling;return _}function s(_,w){return _=Si(_,w),_.index=0,_.sibling=null,_}function i(_,w,I){return _.index=I,t?(I=_.alternate,I!==null?(I=I.index,I<w?(_.flags|=2,w):I):(_.flags|=2,w)):(_.flags|=1048576,w)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,w,I,D){return w===null||w.tag!==6?(w=ng(I,_.mode,D),w.return=_,w):(w=s(w,I),w.return=_,w)}function l(_,w,I,D){var O=I.type;return O===Ta?d(_,w,I.props.children,D,I.key):w!==null&&(w.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===ti&&F0(O)===w.type)?(D=s(w,I.props),D.ref=fc(_,w,I),D.return=_,D):(D=kh(I.type,I.key,I.props,null,_.mode,D),D.ref=fc(_,w,I),D.return=_,D)}function c(_,w,I,D){return w===null||w.tag!==4||w.stateNode.containerInfo!==I.containerInfo||w.stateNode.implementation!==I.implementation?(w=rg(I,_.mode,D),w.return=_,w):(w=s(w,I.children||[]),w.return=_,w)}function d(_,w,I,D,O){return w===null||w.tag!==7?(w=No(I,_.mode,D,O),w.return=_,w):(w=s(w,I),w.return=_,w)}function h(_,w,I){if(typeof w=="string"&&w!==""||typeof w=="number")return w=ng(""+w,_.mode,I),w.return=_,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Md:return I=kh(w.type,w.key,w.props,null,_.mode,I),I.ref=fc(_,null,w),I.return=_,I;case Ea:return w=rg(w,_.mode,I),w.return=_,w;case ti:var D=w._init;return h(_,D(w._payload),I)}if(Ac(w)||lc(w))return w=No(w,_.mode,I,null),w.return=_,w;Gd(_,w)}return null}function p(_,w,I,D){var O=w!==null?w.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return O!==null?null:a(_,w,""+I,D);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Md:return I.key===O?l(_,w,I,D):null;case Ea:return I.key===O?c(_,w,I,D):null;case ti:return O=I._init,p(_,w,O(I._payload),D)}if(Ac(I)||lc(I))return O!==null?null:d(_,w,I,D,null);Gd(_,I)}return null}function f(_,w,I,D,O){if(typeof D=="string"&&D!==""||typeof D=="number")return _=_.get(I)||null,a(w,_,""+D,O);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Md:return _=_.get(D.key===null?I:D.key)||null,l(w,_,D,O);case Ea:return _=_.get(D.key===null?I:D.key)||null,c(w,_,D,O);case ti:var V=D._init;return f(_,w,I,V(D._payload),O)}if(Ac(D)||lc(D))return _=_.get(I)||null,d(w,_,D,O,null);Gd(w,D)}return null}function E(_,w,I,D){for(var O=null,V=null,S=w,T=w=0,A=null;S!==null&&T<I.length;T++){S.index>T?(A=S,S=null):A=S.sibling;var k=p(_,S,I[T],D);if(k===null){S===null&&(S=A);break}t&&S&&k.alternate===null&&e(_,S),w=i(k,w,T),V===null?O=k:V.sibling=k,V=k,S=A}if(T===I.length)return n(_,S),rt&&lo(_,T),O;if(S===null){for(;T<I.length;T++)S=h(_,I[T],D),S!==null&&(w=i(S,w,T),V===null?O=S:V.sibling=S,V=S);return rt&&lo(_,T),O}for(S=r(_,S);T<I.length;T++)A=f(S,_,T,I[T],D),A!==null&&(t&&A.alternate!==null&&S.delete(A.key===null?T:A.key),w=i(A,w,T),V===null?O=A:V.sibling=A,V=A);return t&&S.forEach(function(P){return e(_,P)}),rt&&lo(_,T),O}function y(_,w,I,D){var O=lc(I);if(typeof O!="function")throw Error(K(150));if(I=O.call(I),I==null)throw Error(K(151));for(var V=O=null,S=w,T=w=0,A=null,k=I.next();S!==null&&!k.done;T++,k=I.next()){S.index>T?(A=S,S=null):A=S.sibling;var P=p(_,S,k.value,D);if(P===null){S===null&&(S=A);break}t&&S&&P.alternate===null&&e(_,S),w=i(P,w,T),V===null?O=P:V.sibling=P,V=P,S=A}if(k.done)return n(_,S),rt&&lo(_,T),O;if(S===null){for(;!k.done;T++,k=I.next())k=h(_,k.value,D),k!==null&&(w=i(k,w,T),V===null?O=k:V.sibling=k,V=k);return rt&&lo(_,T),O}for(S=r(_,S);!k.done;T++,k=I.next())k=f(S,_,T,k.value,D),k!==null&&(t&&k.alternate!==null&&S.delete(k.key===null?T:k.key),w=i(k,w,T),V===null?O=k:V.sibling=k,V=k);return t&&S.forEach(function(N){return e(_,N)}),rt&&lo(_,T),O}function v(_,w,I,D){if(typeof I=="object"&&I!==null&&I.type===Ta&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case Md:e:{for(var O=I.key,V=w;V!==null;){if(V.key===O){if(O=I.type,O===Ta){if(V.tag===7){n(_,V.sibling),w=s(V,I.props.children),w.return=_,_=w;break e}}else if(V.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===ti&&F0(O)===V.type){n(_,V.sibling),w=s(V,I.props),w.ref=fc(_,V,I),w.return=_,_=w;break e}n(_,V);break}else e(_,V);V=V.sibling}I.type===Ta?(w=No(I.props.children,_.mode,D,I.key),w.return=_,_=w):(D=kh(I.type,I.key,I.props,null,_.mode,D),D.ref=fc(_,w,I),D.return=_,_=D)}return o(_);case Ea:e:{for(V=I.key;w!==null;){if(w.key===V)if(w.tag===4&&w.stateNode.containerInfo===I.containerInfo&&w.stateNode.implementation===I.implementation){n(_,w.sibling),w=s(w,I.children||[]),w.return=_,_=w;break e}else{n(_,w);break}else e(_,w);w=w.sibling}w=rg(I,_.mode,D),w.return=_,_=w}return o(_);case ti:return V=I._init,v(_,w,V(I._payload),D)}if(Ac(I))return E(_,w,I,D);if(lc(I))return y(_,w,I,D);Gd(_,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,w!==null&&w.tag===6?(n(_,w.sibling),w=s(w,I),w.return=_,_=w):(n(_,w),w=ng(I,_.mode,D),w.return=_,_=w),o(_)):n(_,w)}return v}var tl=i1(!0),o1=i1(!1),cf=Ki(null),uf=null,Ca=null,s_=null;function i_(){s_=Ca=uf=null}function o_(t){var e=cf.current;et(cf),t._currentValue=e}function fy(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ma(t,e){uf=t,s_=Ca=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(In=!0),t.firstContext=null)}function sr(t){var e=t._currentValue;if(s_!==t)if(t={context:t,memoizedValue:e,next:null},Ca===null){if(uf===null)throw Error(K(308));Ca=t,uf.dependencies={lanes:0,firstContext:t}}else Ca=Ca.next=t;return e}var Eo=null;function a_(t){Eo===null?Eo=[t]:Eo.push(t)}function a1(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,a_(e)):(n.next=s.next,s.next=n),e.interleaved=n,Ss(t,r)}function Ss(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ni=!1;function l_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function l1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ms(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ei(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Me&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Ss(t,n)}return s=r.interleaved,s===null?(e.next=e,a_(r)):(e.next=s.next,s.next=e),r.interleaved=e,Ss(t,n)}function bh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Kv(t,n)}}function U0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function df(t,e,n,r){var s=t.updateQueue;ni=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,d=c=l=null,a=i;do{var p=a.lane,f=a.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var E=t,y=a;switch(p=e,f=n,y.tag){case 1:if(E=y.payload,typeof E=="function"){h=E.call(f,h,p);break e}h=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=y.payload,p=typeof E=="function"?E.call(f,h,p):E,p==null)break e;h=ut({},h,p);break e;case 2:ni=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[a]:p.push(a))}else f={eventTime:f,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=f,l=h):d=d.next=f,o|=p;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;p=a,a=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Bo|=o,t.lanes=o,t.memoizedState=h}}function j0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(K(191,s));s.call(r)}}}var ed={},Yr=Ki(ed),yu=Ki(ed),vu=Ki(ed);function To(t){if(t===ed)throw Error(K(174));return t}function c_(t,e){switch(Ke(vu,e),Ke(yu,t),Ke(Yr,ed),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Kg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Kg(e,t)}et(Yr),Ke(Yr,e)}function nl(){et(Yr),et(yu),et(vu)}function c1(t){To(vu.current);var e=To(Yr.current),n=Kg(e,t.type);e!==n&&(Ke(yu,t),Ke(Yr,n))}function u_(t){yu.current===t&&(et(Yr),et(yu))}var lt=Ki(0);function hf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ym=[];function d_(){for(var t=0;t<Ym.length;t++)Ym[t]._workInProgressVersionPrimary=null;Ym.length=0}var Ah=ks.ReactCurrentDispatcher,Xm=ks.ReactCurrentBatchConfig,jo=0,ct=null,Rt=null,Ut=null,ff=!1,$c=!1,_u=0,iO=0;function Qt(){throw Error(K(321))}function h_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Tr(t[n],e[n]))return!1;return!0}function f_(t,e,n,r,s,i){if(jo=i,ct=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ah.current=t===null||t.memoizedState===null?cO:uO,t=n(r,s),$c){i=0;do{if($c=!1,_u=0,25<=i)throw Error(K(301));i+=1,Ut=Rt=null,e.updateQueue=null,Ah.current=dO,t=n(r,s)}while($c)}if(Ah.current=pf,e=Rt!==null&&Rt.next!==null,jo=0,Ut=Rt=ct=null,ff=!1,e)throw Error(K(300));return t}function p_(){var t=_u!==0;return _u=0,t}function Fr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ut===null?ct.memoizedState=Ut=t:Ut=Ut.next=t,Ut}function ir(){if(Rt===null){var t=ct.alternate;t=t!==null?t.memoizedState:null}else t=Rt.next;var e=Ut===null?ct.memoizedState:Ut.next;if(e!==null)Ut=e,Rt=t;else{if(t===null)throw Error(K(310));Rt=t,t={memoizedState:Rt.memoizedState,baseState:Rt.baseState,baseQueue:Rt.baseQueue,queue:Rt.queue,next:null},Ut===null?ct.memoizedState=Ut=t:Ut=Ut.next=t}return Ut}function wu(t,e){return typeof e=="function"?e(t):e}function Jm(t){var e=ir(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var r=Rt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((jo&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,ct.lanes|=d,Bo|=d}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,Tr(r,e.memoizedState)||(In=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,ct.lanes|=i,Bo|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Zm(t){var e=ir(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Tr(i,e.memoizedState)||(In=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function u1(){}function d1(t,e){var n=ct,r=ir(),s=e(),i=!Tr(r.memoizedState,s);if(i&&(r.memoizedState=s,In=!0),r=r.queue,m_(p1.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ut!==null&&Ut.memoizedState.tag&1){if(n.flags|=2048,Eu(9,f1.bind(null,n,r,s,e),void 0,null),jt===null)throw Error(K(349));jo&30||h1(n,e,s)}return s}function h1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ct.updateQueue,e===null?(e={lastEffect:null,stores:null},ct.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function f1(t,e,n,r){e.value=n,e.getSnapshot=r,m1(e)&&g1(t)}function p1(t,e,n){return n(function(){m1(e)&&g1(t)})}function m1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Tr(t,n)}catch{return!0}}function g1(t){var e=Ss(t,1);e!==null&&_r(e,t,1,-1)}function B0(t){var e=Fr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wu,lastRenderedState:t},e.queue=t,t=t.dispatch=lO.bind(null,ct,t),[e.memoizedState,t]}function Eu(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ct.updateQueue,e===null?(e={lastEffect:null,stores:null},ct.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function y1(){return ir().memoizedState}function xh(t,e,n,r){var s=Fr();ct.flags|=t,s.memoizedState=Eu(1|e,n,void 0,r===void 0?null:r)}function mp(t,e,n,r){var s=ir();r=r===void 0?null:r;var i=void 0;if(Rt!==null){var o=Rt.memoizedState;if(i=o.destroy,r!==null&&h_(r,o.deps)){s.memoizedState=Eu(e,n,i,r);return}}ct.flags|=t,s.memoizedState=Eu(1|e,n,i,r)}function $0(t,e){return xh(8390656,8,t,e)}function m_(t,e){return mp(2048,8,t,e)}function v1(t,e){return mp(4,2,t,e)}function _1(t,e){return mp(4,4,t,e)}function w1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function E1(t,e,n){return n=n!=null?n.concat([t]):null,mp(4,4,w1.bind(null,e,t),n)}function g_(){}function T1(t,e){var n=ir();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&h_(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function I1(t,e){var n=ir();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&h_(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function S1(t,e,n){return jo&21?(Tr(n,e)||(n=RA(),ct.lanes|=n,Bo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,In=!0),t.memoizedState=n)}function oO(t,e){var n=$e;$e=n!==0&&4>n?n:4,t(!0);var r=Xm.transition;Xm.transition={};try{t(!1),e()}finally{$e=n,Xm.transition=r}}function b1(){return ir().memoizedState}function aO(t,e,n){var r=Ii(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},A1(t))x1(e,n);else if(n=a1(t,e,n,r),n!==null){var s=hn();_r(n,t,r,s),P1(n,e,r)}}function lO(t,e,n){var r=Ii(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(A1(t))x1(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Tr(a,o)){var l=e.interleaved;l===null?(s.next=s,a_(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=a1(t,e,s,r),n!==null&&(s=hn(),_r(n,t,r,s),P1(n,e,r))}}function A1(t){var e=t.alternate;return t===ct||e!==null&&e===ct}function x1(t,e){$c=ff=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function P1(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Kv(t,n)}}var pf={readContext:sr,useCallback:Qt,useContext:Qt,useEffect:Qt,useImperativeHandle:Qt,useInsertionEffect:Qt,useLayoutEffect:Qt,useMemo:Qt,useReducer:Qt,useRef:Qt,useState:Qt,useDebugValue:Qt,useDeferredValue:Qt,useTransition:Qt,useMutableSource:Qt,useSyncExternalStore:Qt,useId:Qt,unstable_isNewReconciler:!1},cO={readContext:sr,useCallback:function(t,e){return Fr().memoizedState=[t,e===void 0?null:e],t},useContext:sr,useEffect:$0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,xh(4194308,4,w1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return xh(4194308,4,t,e)},useInsertionEffect:function(t,e){return xh(4,2,t,e)},useMemo:function(t,e){var n=Fr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Fr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=aO.bind(null,ct,t),[r.memoizedState,t]},useRef:function(t){var e=Fr();return t={current:t},e.memoizedState=t},useState:B0,useDebugValue:g_,useDeferredValue:function(t){return Fr().memoizedState=t},useTransition:function(){var t=B0(!1),e=t[0];return t=oO.bind(null,t[1]),Fr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ct,s=Fr();if(rt){if(n===void 0)throw Error(K(407));n=n()}else{if(n=e(),jt===null)throw Error(K(349));jo&30||h1(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,$0(p1.bind(null,r,i,t),[t]),r.flags|=2048,Eu(9,f1.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Fr(),e=jt.identifierPrefix;if(rt){var n=hs,r=ds;n=(r&~(1<<32-vr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=_u++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=iO++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},uO={readContext:sr,useCallback:T1,useContext:sr,useEffect:m_,useImperativeHandle:E1,useInsertionEffect:v1,useLayoutEffect:_1,useMemo:I1,useReducer:Jm,useRef:y1,useState:function(){return Jm(wu)},useDebugValue:g_,useDeferredValue:function(t){var e=ir();return S1(e,Rt.memoizedState,t)},useTransition:function(){var t=Jm(wu)[0],e=ir().memoizedState;return[t,e]},useMutableSource:u1,useSyncExternalStore:d1,useId:b1,unstable_isNewReconciler:!1},dO={readContext:sr,useCallback:T1,useContext:sr,useEffect:m_,useImperativeHandle:E1,useInsertionEffect:v1,useLayoutEffect:_1,useMemo:I1,useReducer:Zm,useRef:y1,useState:function(){return Zm(wu)},useDebugValue:g_,useDeferredValue:function(t){var e=ir();return Rt===null?e.memoizedState=t:S1(e,Rt.memoizedState,t)},useTransition:function(){var t=Zm(wu)[0],e=ir().memoizedState;return[t,e]},useMutableSource:u1,useSyncExternalStore:d1,useId:b1,unstable_isNewReconciler:!1};function ur(t,e){if(t&&t.defaultProps){e=ut({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function py(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ut({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var gp={isMounted:function(t){return(t=t._reactInternals)?ea(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=hn(),s=Ii(t),i=ms(r,s);i.payload=e,n!=null&&(i.callback=n),e=Ei(t,i,s),e!==null&&(_r(e,t,s,r),bh(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=hn(),s=Ii(t),i=ms(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Ei(t,i,s),e!==null&&(_r(e,t,s,r),bh(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=hn(),r=Ii(t),s=ms(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ei(t,s,r),e!==null&&(_r(e,t,r,n),bh(e,t,r))}};function z0(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!fu(n,r)||!fu(s,i):!0}function R1(t,e,n){var r=!1,s=Di,i=e.contextType;return typeof i=="object"&&i!==null?i=sr(i):(s=Pn(e)?Fo:on.current,r=e.contextTypes,i=(r=r!=null)?Za(t,s):Di),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=gp,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function q0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&gp.enqueueReplaceState(e,e.state,null)}function my(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},l_(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=sr(i):(i=Pn(e)?Fo:on.current,s.context=Za(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(py(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&gp.enqueueReplaceState(s,s.state,null),df(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function rl(t,e){try{var n="",r=e;do n+=UN(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function eg(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function gy(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var hO=typeof WeakMap=="function"?WeakMap:Map;function C1(t,e,n){n=ms(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){gf||(gf=!0,Ay=r),gy(t,e)},n}function k1(t,e,n){n=ms(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){gy(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){gy(t,e),typeof r!="function"&&(Ti===null?Ti=new Set([this]):Ti.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function H0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new hO;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=AO.bind(null,t,e,n),e.then(t,t))}function W0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function K0(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ms(-1,1),e.tag=2,Ei(n,e,1))),n.lanes|=1),t)}var fO=ks.ReactCurrentOwner,In=!1;function un(t,e,n,r){e.child=t===null?o1(e,null,n,r):tl(e,t.child,n,r)}function G0(t,e,n,r,s){n=n.render;var i=e.ref;return Ma(e,s),r=f_(t,e,n,r,i,s),n=p_(),t!==null&&!In?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,bs(t,e,s)):(rt&&n&&t_(e),e.flags|=1,un(t,e,r,s),e.child)}function Q0(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!S_(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,D1(t,e,i,r,s)):(t=kh(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:fu,n(o,r)&&t.ref===e.ref)return bs(t,e,s)}return e.flags|=1,t=Si(i,r),t.ref=e.ref,t.return=e,e.child=t}function D1(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(fu(i,r)&&t.ref===e.ref)if(In=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(In=!0);else return e.lanes=t.lanes,bs(t,e,s)}return yy(t,e,n,r,s)}function N1(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ke(Da,Nn),Nn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ke(Da,Nn),Nn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ke(Da,Nn),Nn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ke(Da,Nn),Nn|=r;return un(t,e,s,n),e.child}function O1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function yy(t,e,n,r,s){var i=Pn(n)?Fo:on.current;return i=Za(e,i),Ma(e,s),n=f_(t,e,n,r,i,s),r=p_(),t!==null&&!In?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,bs(t,e,s)):(rt&&r&&t_(e),e.flags|=1,un(t,e,n,s),e.child)}function Y0(t,e,n,r,s){if(Pn(n)){var i=!0;of(e)}else i=!1;if(Ma(e,s),e.stateNode===null)Ph(t,e),R1(e,n,r),my(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=sr(c):(c=Pn(n)?Fo:on.current,c=Za(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&q0(e,o,r,c),ni=!1;var p=e.memoizedState;o.state=p,df(e,r,o,s),l=e.memoizedState,a!==r||p!==l||xn.current||ni?(typeof d=="function"&&(py(e,n,d,r),l=e.memoizedState),(a=ni||z0(e,n,a,r,p,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,l1(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:ur(e.type,a),o.props=c,h=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=sr(l):(l=Pn(n)?Fo:on.current,l=Za(e,l));var f=n.getDerivedStateFromProps;(d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||p!==l)&&q0(e,o,r,l),ni=!1,p=e.memoizedState,o.state=p,df(e,r,o,s);var E=e.memoizedState;a!==h||p!==E||xn.current||ni?(typeof f=="function"&&(py(e,n,f,r),E=e.memoizedState),(c=ni||z0(e,n,c,r,p,E,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,E,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,E,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=E),o.props=r,o.state=E,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return vy(t,e,n,r,i,s)}function vy(t,e,n,r,s,i){O1(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&V0(e,n,!1),bs(t,e,i);r=e.stateNode,fO.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=tl(e,t.child,null,i),e.child=tl(e,null,a,i)):un(t,e,a,i),e.memoizedState=r.state,s&&V0(e,n,!0),e.child}function V1(t){var e=t.stateNode;e.pendingContext?O0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&O0(t,e.context,!1),c_(t,e.containerInfo)}function X0(t,e,n,r,s){return el(),r_(s),e.flags|=256,un(t,e,n,r),e.child}var _y={dehydrated:null,treeContext:null,retryLane:0};function wy(t){return{baseLanes:t,cachePool:null,transitions:null}}function L1(t,e,n){var r=e.pendingProps,s=lt.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ke(lt,s&1),t===null)return hy(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=_p(o,r,0,null),t=No(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=wy(n),e.memoizedState=_y,t):y_(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return pO(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Si(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Si(a,i):(i=No(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?wy(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=_y,r}return i=t.child,t=i.sibling,r=Si(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function y_(t,e){return e=_p({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Qd(t,e,n,r){return r!==null&&r_(r),tl(e,t.child,null,n),t=y_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function pO(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=eg(Error(K(422))),Qd(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=_p({mode:"visible",children:r.children},s,0,null),i=No(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&tl(e,t.child,null,o),e.child.memoizedState=wy(o),e.memoizedState=_y,i);if(!(e.mode&1))return Qd(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(K(419)),r=eg(i,r,void 0),Qd(t,e,o,r)}if(a=(o&t.childLanes)!==0,In||a){if(r=jt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Ss(t,s),_r(r,t,s,-1))}return I_(),r=eg(Error(K(421))),Qd(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=xO.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Fn=wi(s.nextSibling),Bn=e,rt=!0,gr=null,t!==null&&(Zn[er++]=ds,Zn[er++]=hs,Zn[er++]=Uo,ds=t.id,hs=t.overflow,Uo=e),e=y_(e,r.children),e.flags|=4096,e)}function J0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),fy(t.return,e,n)}function tg(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function M1(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(un(t,e,r.children,n),r=lt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&J0(t,n,e);else if(t.tag===19)J0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ke(lt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&hf(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),tg(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&hf(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}tg(e,!0,n,null,i);break;case"together":tg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ph(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function bs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Bo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(K(153));if(e.child!==null){for(t=e.child,n=Si(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Si(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function mO(t,e,n){switch(e.tag){case 3:V1(e),el();break;case 5:c1(e);break;case 1:Pn(e.type)&&of(e);break;case 4:c_(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ke(cf,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ke(lt,lt.current&1),e.flags|=128,null):n&e.child.childLanes?L1(t,e,n):(Ke(lt,lt.current&1),t=bs(t,e,n),t!==null?t.sibling:null);Ke(lt,lt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return M1(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ke(lt,lt.current),r)break;return null;case 22:case 23:return e.lanes=0,N1(t,e,n)}return bs(t,e,n)}var F1,Ey,U1,j1;F1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ey=function(){};U1=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,To(Yr.current);var i=null;switch(n){case"input":s=zg(t,s),r=zg(t,r),i=[];break;case"select":s=ut({},s,{value:void 0}),r=ut({},r,{value:void 0}),i=[];break;case"textarea":s=Wg(t,s),r=Wg(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=rf)}Gg(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ou.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ou.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Je("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};j1=function(t,e,n,r){n!==r&&(e.flags|=4)};function pc(t,e){if(!rt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Yt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function gO(t,e,n){var r=e.pendingProps;switch(n_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yt(e),null;case 1:return Pn(e.type)&&sf(),Yt(e),null;case 3:return r=e.stateNode,nl(),et(xn),et(on),d_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Kd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,gr!==null&&(Ry(gr),gr=null))),Ey(t,e),Yt(e),null;case 5:u_(e);var s=To(vu.current);if(n=e.type,t!==null&&e.stateNode!=null)U1(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(K(166));return Yt(e),null}if(t=To(Yr.current),Kd(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[qr]=e,r[gu]=i,t=(e.mode&1)!==0,n){case"dialog":Je("cancel",r),Je("close",r);break;case"iframe":case"object":case"embed":Je("load",r);break;case"video":case"audio":for(s=0;s<Pc.length;s++)Je(Pc[s],r);break;case"source":Je("error",r);break;case"img":case"image":case"link":Je("error",r),Je("load",r);break;case"details":Je("toggle",r);break;case"input":a0(r,i),Je("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Je("invalid",r);break;case"textarea":c0(r,i),Je("invalid",r)}Gg(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Wd(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Wd(r.textContent,a,t),s=["children",""+a]):ou.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Je("scroll",r)}switch(n){case"input":Fd(r),l0(r,i,!0);break;case"textarea":Fd(r),u0(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=rf)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=pA(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[qr]=e,t[gu]=r,F1(t,e,!1,!1),e.stateNode=t;e:{switch(o=Qg(n,r),n){case"dialog":Je("cancel",t),Je("close",t),s=r;break;case"iframe":case"object":case"embed":Je("load",t),s=r;break;case"video":case"audio":for(s=0;s<Pc.length;s++)Je(Pc[s],t);s=r;break;case"source":Je("error",t),s=r;break;case"img":case"image":case"link":Je("error",t),Je("load",t),s=r;break;case"details":Je("toggle",t),s=r;break;case"input":a0(t,r),s=zg(t,r),Je("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=ut({},r,{value:void 0}),Je("invalid",t);break;case"textarea":c0(t,r),s=Wg(t,r),Je("invalid",t);break;default:s=r}Gg(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?yA(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&mA(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&au(t,l):typeof l=="number"&&au(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ou.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Je("scroll",t):l!=null&&Bv(t,i,l,o))}switch(n){case"input":Fd(t),l0(t,r,!1);break;case"textarea":Fd(t),u0(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ki(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Na(t,!!r.multiple,i,!1):r.defaultValue!=null&&Na(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=rf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Yt(e),null;case 6:if(t&&e.stateNode!=null)j1(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(K(166));if(n=To(vu.current),To(Yr.current),Kd(e)){if(r=e.stateNode,n=e.memoizedProps,r[qr]=e,(i=r.nodeValue!==n)&&(t=Bn,t!==null))switch(t.tag){case 3:Wd(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Wd(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[qr]=e,e.stateNode=r}return Yt(e),null;case 13:if(et(lt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(rt&&Fn!==null&&e.mode&1&&!(e.flags&128))s1(),el(),e.flags|=98560,i=!1;else if(i=Kd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(K(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(K(317));i[qr]=e}else el(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Yt(e),i=!1}else gr!==null&&(Ry(gr),gr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||lt.current&1?kt===0&&(kt=3):I_())),e.updateQueue!==null&&(e.flags|=4),Yt(e),null);case 4:return nl(),Ey(t,e),t===null&&pu(e.stateNode.containerInfo),Yt(e),null;case 10:return o_(e.type._context),Yt(e),null;case 17:return Pn(e.type)&&sf(),Yt(e),null;case 19:if(et(lt),i=e.memoizedState,i===null)return Yt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)pc(i,!1);else{if(kt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=hf(t),o!==null){for(e.flags|=128,pc(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ke(lt,lt.current&1|2),e.child}t=t.sibling}i.tail!==null&&vt()>sl&&(e.flags|=128,r=!0,pc(i,!1),e.lanes=4194304)}else{if(!r)if(t=hf(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),pc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!rt)return Yt(e),null}else 2*vt()-i.renderingStartTime>sl&&n!==1073741824&&(e.flags|=128,r=!0,pc(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=vt(),e.sibling=null,n=lt.current,Ke(lt,r?n&1|2:n&1),e):(Yt(e),null);case 22:case 23:return T_(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Nn&1073741824&&(Yt(e),e.subtreeFlags&6&&(e.flags|=8192)):Yt(e),null;case 24:return null;case 25:return null}throw Error(K(156,e.tag))}function yO(t,e){switch(n_(e),e.tag){case 1:return Pn(e.type)&&sf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return nl(),et(xn),et(on),d_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return u_(e),null;case 13:if(et(lt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(K(340));el()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return et(lt),null;case 4:return nl(),null;case 10:return o_(e.type._context),null;case 22:case 23:return T_(),null;case 24:return null;default:return null}}var Yd=!1,tn=!1,vO=typeof WeakSet=="function"?WeakSet:Set,ee=null;function ka(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){pt(t,e,r)}else n.current=null}function Ty(t,e,n){try{n()}catch(r){pt(t,e,r)}}var Z0=!1;function _O(t,e){if(iy=ef,t=HA(),e_(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,p=null;t:for(;;){for(var f;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(f=h.firstChild)!==null;)p=h,h=f;for(;;){if(h===t)break t;if(p===n&&++c===s&&(a=o),p===i&&++d===r&&(l=o),(f=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(oy={focusedElem:t,selectionRange:n},ef=!1,ee=e;ee!==null;)if(e=ee,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ee=t;else for(;ee!==null;){e=ee;try{var E=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var y=E.memoizedProps,v=E.memoizedState,_=e.stateNode,w=_.getSnapshotBeforeUpdate(e.elementType===e.type?y:ur(e.type,y),v);_.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(D){pt(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,ee=t;break}ee=e.return}return E=Z0,Z0=!1,E}function zc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Ty(e,n,i)}s=s.next}while(s!==r)}}function yp(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Iy(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function B1(t){var e=t.alternate;e!==null&&(t.alternate=null,B1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[qr],delete e[gu],delete e[cy],delete e[tO],delete e[nO])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function $1(t){return t.tag===5||t.tag===3||t.tag===4}function eT(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||$1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Sy(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=rf));else if(r!==4&&(t=t.child,t!==null))for(Sy(t,e,n),t=t.sibling;t!==null;)Sy(t,e,n),t=t.sibling}function by(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(by(t,e,n),t=t.sibling;t!==null;)by(t,e,n),t=t.sibling}var $t=null,pr=!1;function Ks(t,e,n){for(n=n.child;n!==null;)z1(t,e,n),n=n.sibling}function z1(t,e,n){if(Qr&&typeof Qr.onCommitFiberUnmount=="function")try{Qr.onCommitFiberUnmount(cp,n)}catch{}switch(n.tag){case 5:tn||ka(n,e);case 6:var r=$t,s=pr;$t=null,Ks(t,e,n),$t=r,pr=s,$t!==null&&(pr?(t=$t,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):$t.removeChild(n.stateNode));break;case 18:$t!==null&&(pr?(t=$t,n=n.stateNode,t.nodeType===8?Gm(t.parentNode,n):t.nodeType===1&&Gm(t,n),du(t)):Gm($t,n.stateNode));break;case 4:r=$t,s=pr,$t=n.stateNode.containerInfo,pr=!0,Ks(t,e,n),$t=r,pr=s;break;case 0:case 11:case 14:case 15:if(!tn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Ty(n,e,o),s=s.next}while(s!==r)}Ks(t,e,n);break;case 1:if(!tn&&(ka(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){pt(n,e,a)}Ks(t,e,n);break;case 21:Ks(t,e,n);break;case 22:n.mode&1?(tn=(r=tn)||n.memoizedState!==null,Ks(t,e,n),tn=r):Ks(t,e,n);break;default:Ks(t,e,n)}}function tT(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new vO),e.forEach(function(r){var s=PO.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function lr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:$t=a.stateNode,pr=!1;break e;case 3:$t=a.stateNode.containerInfo,pr=!0;break e;case 4:$t=a.stateNode.containerInfo,pr=!0;break e}a=a.return}if($t===null)throw Error(K(160));z1(i,o,s),$t=null,pr=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){pt(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)q1(e,t),e=e.sibling}function q1(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(lr(e,t),Mr(t),r&4){try{zc(3,t,t.return),yp(3,t)}catch(y){pt(t,t.return,y)}try{zc(5,t,t.return)}catch(y){pt(t,t.return,y)}}break;case 1:lr(e,t),Mr(t),r&512&&n!==null&&ka(n,n.return);break;case 5:if(lr(e,t),Mr(t),r&512&&n!==null&&ka(n,n.return),t.flags&32){var s=t.stateNode;try{au(s,"")}catch(y){pt(t,t.return,y)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&hA(s,i),Qg(a,o);var c=Qg(a,i);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?yA(s,h):d==="dangerouslySetInnerHTML"?mA(s,h):d==="children"?au(s,h):Bv(s,d,h,c)}switch(a){case"input":qg(s,i);break;case"textarea":fA(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?Na(s,!!i.multiple,f,!1):p!==!!i.multiple&&(i.defaultValue!=null?Na(s,!!i.multiple,i.defaultValue,!0):Na(s,!!i.multiple,i.multiple?[]:"",!1))}s[gu]=i}catch(y){pt(t,t.return,y)}}break;case 6:if(lr(e,t),Mr(t),r&4){if(t.stateNode===null)throw Error(K(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(y){pt(t,t.return,y)}}break;case 3:if(lr(e,t),Mr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{du(e.containerInfo)}catch(y){pt(t,t.return,y)}break;case 4:lr(e,t),Mr(t);break;case 13:lr(e,t),Mr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(w_=vt())),r&4&&tT(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(tn=(c=tn)||d,lr(e,t),tn=c):lr(e,t),Mr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(ee=t,d=t.child;d!==null;){for(h=ee=d;ee!==null;){switch(p=ee,f=p.child,p.tag){case 0:case 11:case 14:case 15:zc(4,p,p.return);break;case 1:ka(p,p.return);var E=p.stateNode;if(typeof E.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,E.props=e.memoizedProps,E.state=e.memoizedState,E.componentWillUnmount()}catch(y){pt(r,n,y)}}break;case 5:ka(p,p.return);break;case 22:if(p.memoizedState!==null){rT(h);continue}}f!==null?(f.return=p,ee=f):rT(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=gA("display",o))}catch(y){pt(t,t.return,y)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(y){pt(t,t.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:lr(e,t),Mr(t),r&4&&tT(t);break;case 21:break;default:lr(e,t),Mr(t)}}function Mr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if($1(n)){var r=n;break e}n=n.return}throw Error(K(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(au(s,""),r.flags&=-33);var i=eT(t);by(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=eT(t);Sy(t,a,o);break;default:throw Error(K(161))}}catch(l){pt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function wO(t,e,n){ee=t,H1(t)}function H1(t,e,n){for(var r=(t.mode&1)!==0;ee!==null;){var s=ee,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Yd;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||tn;a=Yd;var c=tn;if(Yd=o,(tn=l)&&!c)for(ee=s;ee!==null;)o=ee,l=o.child,o.tag===22&&o.memoizedState!==null?sT(s):l!==null?(l.return=o,ee=l):sT(s);for(;i!==null;)ee=i,H1(i),i=i.sibling;ee=s,Yd=a,tn=c}nT(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ee=i):nT(t)}}function nT(t){for(;ee!==null;){var e=ee;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:tn||yp(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!tn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:ur(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&j0(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}j0(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&du(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}tn||e.flags&512&&Iy(e)}catch(p){pt(e,e.return,p)}}if(e===t){ee=null;break}if(n=e.sibling,n!==null){n.return=e.return,ee=n;break}ee=e.return}}function rT(t){for(;ee!==null;){var e=ee;if(e===t){ee=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ee=n;break}ee=e.return}}function sT(t){for(;ee!==null;){var e=ee;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{yp(4,e)}catch(l){pt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){pt(e,s,l)}}var i=e.return;try{Iy(e)}catch(l){pt(e,i,l)}break;case 5:var o=e.return;try{Iy(e)}catch(l){pt(e,o,l)}}}catch(l){pt(e,e.return,l)}if(e===t){ee=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ee=a;break}ee=e.return}}var EO=Math.ceil,mf=ks.ReactCurrentDispatcher,v_=ks.ReactCurrentOwner,nr=ks.ReactCurrentBatchConfig,Me=0,jt=null,bt=null,qt=0,Nn=0,Da=Ki(0),kt=0,Tu=null,Bo=0,vp=0,__=0,qc=null,Tn=null,w_=0,sl=1/0,as=null,gf=!1,Ay=null,Ti=null,Xd=!1,fi=null,yf=0,Hc=0,xy=null,Rh=-1,Ch=0;function hn(){return Me&6?vt():Rh!==-1?Rh:Rh=vt()}function Ii(t){return t.mode&1?Me&2&&qt!==0?qt&-qt:sO.transition!==null?(Ch===0&&(Ch=RA()),Ch):(t=$e,t!==0||(t=window.event,t=t===void 0?16:LA(t.type)),t):1}function _r(t,e,n,r){if(50<Hc)throw Hc=0,xy=null,Error(K(185));Xu(t,n,r),(!(Me&2)||t!==jt)&&(t===jt&&(!(Me&2)&&(vp|=n),kt===4&&si(t,qt)),Rn(t,r),n===1&&Me===0&&!(e.mode&1)&&(sl=vt()+500,pp&&Gi()))}function Rn(t,e){var n=t.callbackNode;s2(t,e);var r=Zh(t,t===jt?qt:0);if(r===0)n!==null&&f0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&f0(n),e===1)t.tag===0?rO(iT.bind(null,t)):t1(iT.bind(null,t)),Z2(function(){!(Me&6)&&Gi()}),n=null;else{switch(CA(r)){case 1:n=Wv;break;case 4:n=xA;break;case 16:n=Jh;break;case 536870912:n=PA;break;default:n=Jh}n=Z1(n,W1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function W1(t,e){if(Rh=-1,Ch=0,Me&6)throw Error(K(327));var n=t.callbackNode;if(Fa()&&t.callbackNode!==n)return null;var r=Zh(t,t===jt?qt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=vf(t,r);else{e=r;var s=Me;Me|=2;var i=G1();(jt!==t||qt!==e)&&(as=null,sl=vt()+500,Do(t,e));do try{SO();break}catch(a){K1(t,a)}while(!0);i_(),mf.current=i,Me=s,bt!==null?e=0:(jt=null,qt=0,e=kt)}if(e!==0){if(e===2&&(s=ey(t),s!==0&&(r=s,e=Py(t,s))),e===1)throw n=Tu,Do(t,0),si(t,r),Rn(t,vt()),n;if(e===6)si(t,r);else{if(s=t.current.alternate,!(r&30)&&!TO(s)&&(e=vf(t,r),e===2&&(i=ey(t),i!==0&&(r=i,e=Py(t,i))),e===1))throw n=Tu,Do(t,0),si(t,r),Rn(t,vt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(K(345));case 2:co(t,Tn,as);break;case 3:if(si(t,r),(r&130023424)===r&&(e=w_+500-vt(),10<e)){if(Zh(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){hn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=ly(co.bind(null,t,Tn,as),e);break}co(t,Tn,as);break;case 4:if(si(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-vr(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=vt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*EO(r/1960))-r,10<r){t.timeoutHandle=ly(co.bind(null,t,Tn,as),r);break}co(t,Tn,as);break;case 5:co(t,Tn,as);break;default:throw Error(K(329))}}}return Rn(t,vt()),t.callbackNode===n?W1.bind(null,t):null}function Py(t,e){var n=qc;return t.current.memoizedState.isDehydrated&&(Do(t,e).flags|=256),t=vf(t,e),t!==2&&(e=Tn,Tn=n,e!==null&&Ry(e)),t}function Ry(t){Tn===null?Tn=t:Tn.push.apply(Tn,t)}function TO(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Tr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function si(t,e){for(e&=~__,e&=~vp,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-vr(e),r=1<<n;t[n]=-1,e&=~r}}function iT(t){if(Me&6)throw Error(K(327));Fa();var e=Zh(t,0);if(!(e&1))return Rn(t,vt()),null;var n=vf(t,e);if(t.tag!==0&&n===2){var r=ey(t);r!==0&&(e=r,n=Py(t,r))}if(n===1)throw n=Tu,Do(t,0),si(t,e),Rn(t,vt()),n;if(n===6)throw Error(K(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,co(t,Tn,as),Rn(t,vt()),null}function E_(t,e){var n=Me;Me|=1;try{return t(e)}finally{Me=n,Me===0&&(sl=vt()+500,pp&&Gi())}}function $o(t){fi!==null&&fi.tag===0&&!(Me&6)&&Fa();var e=Me;Me|=1;var n=nr.transition,r=$e;try{if(nr.transition=null,$e=1,t)return t()}finally{$e=r,nr.transition=n,Me=e,!(Me&6)&&Gi()}}function T_(){Nn=Da.current,et(Da)}function Do(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,J2(n)),bt!==null)for(n=bt.return;n!==null;){var r=n;switch(n_(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&sf();break;case 3:nl(),et(xn),et(on),d_();break;case 5:u_(r);break;case 4:nl();break;case 13:et(lt);break;case 19:et(lt);break;case 10:o_(r.type._context);break;case 22:case 23:T_()}n=n.return}if(jt=t,bt=t=Si(t.current,null),qt=Nn=e,kt=0,Tu=null,__=vp=Bo=0,Tn=qc=null,Eo!==null){for(e=0;e<Eo.length;e++)if(n=Eo[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Eo=null}return t}function K1(t,e){do{var n=bt;try{if(i_(),Ah.current=pf,ff){for(var r=ct.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ff=!1}if(jo=0,Ut=Rt=ct=null,$c=!1,_u=0,v_.current=null,n===null||n.return===null){kt=1,Tu=e,bt=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=qt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=W0(o);if(f!==null){f.flags&=-257,K0(f,o,a,i,e),f.mode&1&&H0(i,c,e),e=f,l=c;var E=e.updateQueue;if(E===null){var y=new Set;y.add(l),e.updateQueue=y}else E.add(l);break e}else{if(!(e&1)){H0(i,c,e),I_();break e}l=Error(K(426))}}else if(rt&&a.mode&1){var v=W0(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),K0(v,o,a,i,e),r_(rl(l,a));break e}}i=l=rl(l,a),kt!==4&&(kt=2),qc===null?qc=[i]:qc.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var _=C1(i,l,e);U0(i,_);break e;case 1:a=l;var w=i.type,I=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(Ti===null||!Ti.has(I)))){i.flags|=65536,e&=-e,i.lanes|=e;var D=k1(i,a,e);U0(i,D);break e}}i=i.return}while(i!==null)}Y1(n)}catch(O){e=O,bt===n&&n!==null&&(bt=n=n.return);continue}break}while(!0)}function G1(){var t=mf.current;return mf.current=pf,t===null?pf:t}function I_(){(kt===0||kt===3||kt===2)&&(kt=4),jt===null||!(Bo&268435455)&&!(vp&268435455)||si(jt,qt)}function vf(t,e){var n=Me;Me|=2;var r=G1();(jt!==t||qt!==e)&&(as=null,Do(t,e));do try{IO();break}catch(s){K1(t,s)}while(!0);if(i_(),Me=n,mf.current=r,bt!==null)throw Error(K(261));return jt=null,qt=0,kt}function IO(){for(;bt!==null;)Q1(bt)}function SO(){for(;bt!==null&&!QN();)Q1(bt)}function Q1(t){var e=J1(t.alternate,t,Nn);t.memoizedProps=t.pendingProps,e===null?Y1(t):bt=e,v_.current=null}function Y1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=yO(n,e),n!==null){n.flags&=32767,bt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{kt=6,bt=null;return}}else if(n=gO(n,e,Nn),n!==null){bt=n;return}if(e=e.sibling,e!==null){bt=e;return}bt=e=t}while(e!==null);kt===0&&(kt=5)}function co(t,e,n){var r=$e,s=nr.transition;try{nr.transition=null,$e=1,bO(t,e,n,r)}finally{nr.transition=s,$e=r}return null}function bO(t,e,n,r){do Fa();while(fi!==null);if(Me&6)throw Error(K(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(K(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(i2(t,i),t===jt&&(bt=jt=null,qt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Xd||(Xd=!0,Z1(Jh,function(){return Fa(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=nr.transition,nr.transition=null;var o=$e;$e=1;var a=Me;Me|=4,v_.current=null,_O(t,n),q1(n,t),H2(oy),ef=!!iy,oy=iy=null,t.current=n,wO(n),YN(),Me=a,$e=o,nr.transition=i}else t.current=n;if(Xd&&(Xd=!1,fi=t,yf=s),i=t.pendingLanes,i===0&&(Ti=null),ZN(n.stateNode),Rn(t,vt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(gf)throw gf=!1,t=Ay,Ay=null,t;return yf&1&&t.tag!==0&&Fa(),i=t.pendingLanes,i&1?t===xy?Hc++:(Hc=0,xy=t):Hc=0,Gi(),null}function Fa(){if(fi!==null){var t=CA(yf),e=nr.transition,n=$e;try{if(nr.transition=null,$e=16>t?16:t,fi===null)var r=!1;else{if(t=fi,fi=null,yf=0,Me&6)throw Error(K(331));var s=Me;for(Me|=4,ee=t.current;ee!==null;){var i=ee,o=i.child;if(ee.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ee=c;ee!==null;){var d=ee;switch(d.tag){case 0:case 11:case 15:zc(8,d,i)}var h=d.child;if(h!==null)h.return=d,ee=h;else for(;ee!==null;){d=ee;var p=d.sibling,f=d.return;if(B1(d),d===c){ee=null;break}if(p!==null){p.return=f,ee=p;break}ee=f}}}var E=i.alternate;if(E!==null){var y=E.child;if(y!==null){E.child=null;do{var v=y.sibling;y.sibling=null,y=v}while(y!==null)}}ee=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ee=o;else e:for(;ee!==null;){if(i=ee,i.flags&2048)switch(i.tag){case 0:case 11:case 15:zc(9,i,i.return)}var _=i.sibling;if(_!==null){_.return=i.return,ee=_;break e}ee=i.return}}var w=t.current;for(ee=w;ee!==null;){o=ee;var I=o.child;if(o.subtreeFlags&2064&&I!==null)I.return=o,ee=I;else e:for(o=w;ee!==null;){if(a=ee,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:yp(9,a)}}catch(O){pt(a,a.return,O)}if(a===o){ee=null;break e}var D=a.sibling;if(D!==null){D.return=a.return,ee=D;break e}ee=a.return}}if(Me=s,Gi(),Qr&&typeof Qr.onPostCommitFiberRoot=="function")try{Qr.onPostCommitFiberRoot(cp,t)}catch{}r=!0}return r}finally{$e=n,nr.transition=e}}return!1}function oT(t,e,n){e=rl(n,e),e=C1(t,e,1),t=Ei(t,e,1),e=hn(),t!==null&&(Xu(t,1,e),Rn(t,e))}function pt(t,e,n){if(t.tag===3)oT(t,t,n);else for(;e!==null;){if(e.tag===3){oT(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ti===null||!Ti.has(r))){t=rl(n,t),t=k1(e,t,1),e=Ei(e,t,1),t=hn(),e!==null&&(Xu(e,1,t),Rn(e,t));break}}e=e.return}}function AO(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=hn(),t.pingedLanes|=t.suspendedLanes&n,jt===t&&(qt&n)===n&&(kt===4||kt===3&&(qt&130023424)===qt&&500>vt()-w_?Do(t,0):__|=n),Rn(t,e)}function X1(t,e){e===0&&(t.mode&1?(e=Bd,Bd<<=1,!(Bd&130023424)&&(Bd=4194304)):e=1);var n=hn();t=Ss(t,e),t!==null&&(Xu(t,e,n),Rn(t,n))}function xO(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),X1(t,n)}function PO(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(K(314))}r!==null&&r.delete(e),X1(t,n)}var J1;J1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||xn.current)In=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return In=!1,mO(t,e,n);In=!!(t.flags&131072)}else In=!1,rt&&e.flags&1048576&&n1(e,lf,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ph(t,e),t=e.pendingProps;var s=Za(e,on.current);Ma(e,n),s=f_(null,e,r,t,s,n);var i=p_();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Pn(r)?(i=!0,of(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,l_(e),s.updater=gp,e.stateNode=s,s._reactInternals=e,my(e,r,t,n),e=vy(null,e,r,!0,i,n)):(e.tag=0,rt&&i&&t_(e),un(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ph(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=CO(r),t=ur(r,t),s){case 0:e=yy(null,e,r,t,n);break e;case 1:e=Y0(null,e,r,t,n);break e;case 11:e=G0(null,e,r,t,n);break e;case 14:e=Q0(null,e,r,ur(r.type,t),n);break e}throw Error(K(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ur(r,s),yy(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ur(r,s),Y0(t,e,r,s,n);case 3:e:{if(V1(e),t===null)throw Error(K(387));r=e.pendingProps,i=e.memoizedState,s=i.element,l1(t,e),df(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=rl(Error(K(423)),e),e=X0(t,e,r,n,s);break e}else if(r!==s){s=rl(Error(K(424)),e),e=X0(t,e,r,n,s);break e}else for(Fn=wi(e.stateNode.containerInfo.firstChild),Bn=e,rt=!0,gr=null,n=o1(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(el(),r===s){e=bs(t,e,n);break e}un(t,e,r,n)}e=e.child}return e;case 5:return c1(e),t===null&&hy(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,ay(r,s)?o=null:i!==null&&ay(r,i)&&(e.flags|=32),O1(t,e),un(t,e,o,n),e.child;case 6:return t===null&&hy(e),null;case 13:return L1(t,e,n);case 4:return c_(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=tl(e,null,r,n):un(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ur(r,s),G0(t,e,r,s,n);case 7:return un(t,e,e.pendingProps,n),e.child;case 8:return un(t,e,e.pendingProps.children,n),e.child;case 12:return un(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ke(cf,r._currentValue),r._currentValue=o,i!==null)if(Tr(i.value,o)){if(i.children===s.children&&!xn.current){e=bs(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=ms(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),fy(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(K(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),fy(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}un(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ma(e,n),s=sr(s),r=r(s),e.flags|=1,un(t,e,r,n),e.child;case 14:return r=e.type,s=ur(r,e.pendingProps),s=ur(r.type,s),Q0(t,e,r,s,n);case 15:return D1(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ur(r,s),Ph(t,e),e.tag=1,Pn(r)?(t=!0,of(e)):t=!1,Ma(e,n),R1(e,r,s),my(e,r,s,n),vy(null,e,r,!0,t,n);case 19:return M1(t,e,n);case 22:return N1(t,e,n)}throw Error(K(156,e.tag))};function Z1(t,e){return AA(t,e)}function RO(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tr(t,e,n,r){return new RO(t,e,n,r)}function S_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function CO(t){if(typeof t=="function")return S_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===zv)return 11;if(t===qv)return 14}return 2}function Si(t,e){var n=t.alternate;return n===null?(n=tr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function kh(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")S_(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ta:return No(n.children,s,i,e);case $v:o=8,s|=8;break;case Ug:return t=tr(12,n,e,s|2),t.elementType=Ug,t.lanes=i,t;case jg:return t=tr(13,n,e,s),t.elementType=jg,t.lanes=i,t;case Bg:return t=tr(19,n,e,s),t.elementType=Bg,t.lanes=i,t;case cA:return _p(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case aA:o=10;break e;case lA:o=9;break e;case zv:o=11;break e;case qv:o=14;break e;case ti:o=16,r=null;break e}throw Error(K(130,t==null?t:typeof t,""))}return e=tr(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function No(t,e,n,r){return t=tr(7,t,r,e),t.lanes=n,t}function _p(t,e,n,r){return t=tr(22,t,r,e),t.elementType=cA,t.lanes=n,t.stateNode={isHidden:!1},t}function ng(t,e,n){return t=tr(6,t,null,e),t.lanes=n,t}function rg(t,e,n){return e=tr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function kO(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Mm(0),this.expirationTimes=Mm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mm(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function b_(t,e,n,r,s,i,o,a,l){return t=new kO(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=tr(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},l_(i),t}function DO(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ea,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function ex(t){if(!t)return Di;t=t._reactInternals;e:{if(ea(t)!==t||t.tag!==1)throw Error(K(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Pn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(K(171))}if(t.tag===1){var n=t.type;if(Pn(n))return e1(t,n,e)}return e}function tx(t,e,n,r,s,i,o,a,l){return t=b_(n,r,!0,t,s,i,o,a,l),t.context=ex(null),n=t.current,r=hn(),s=Ii(n),i=ms(r,s),i.callback=e??null,Ei(n,i,s),t.current.lanes=s,Xu(t,s,r),Rn(t,r),t}function wp(t,e,n,r){var s=e.current,i=hn(),o=Ii(s);return n=ex(n),e.context===null?e.context=n:e.pendingContext=n,e=ms(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ei(s,e,o),t!==null&&(_r(t,s,o,i),bh(t,s,o)),o}function _f(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function aT(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function A_(t,e){aT(t,e),(t=t.alternate)&&aT(t,e)}function NO(){return null}var nx=typeof reportError=="function"?reportError:function(t){console.error(t)};function x_(t){this._internalRoot=t}Ep.prototype.render=x_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(K(409));wp(t,e,null,null)};Ep.prototype.unmount=x_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;$o(function(){wp(null,t,null,null)}),e[Is]=null}};function Ep(t){this._internalRoot=t}Ep.prototype.unstable_scheduleHydration=function(t){if(t){var e=NA();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ri.length&&e!==0&&e<ri[n].priority;n++);ri.splice(n,0,t),n===0&&VA(t)}};function P_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Tp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function lT(){}function OO(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=_f(o);i.call(c)}}var o=tx(e,r,t,0,null,!1,!1,"",lT);return t._reactRootContainer=o,t[Is]=o.current,pu(t.nodeType===8?t.parentNode:t),$o(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=_f(l);a.call(c)}}var l=b_(t,0,!1,null,null,!1,!1,"",lT);return t._reactRootContainer=l,t[Is]=l.current,pu(t.nodeType===8?t.parentNode:t),$o(function(){wp(e,l,n,r)}),l}function Ip(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=_f(o);a.call(l)}}wp(e,o,t,s)}else o=OO(n,e,t,s,r);return _f(o)}kA=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=xc(e.pendingLanes);n!==0&&(Kv(e,n|1),Rn(e,vt()),!(Me&6)&&(sl=vt()+500,Gi()))}break;case 13:$o(function(){var r=Ss(t,1);if(r!==null){var s=hn();_r(r,t,1,s)}}),A_(t,1)}};Gv=function(t){if(t.tag===13){var e=Ss(t,134217728);if(e!==null){var n=hn();_r(e,t,134217728,n)}A_(t,134217728)}};DA=function(t){if(t.tag===13){var e=Ii(t),n=Ss(t,e);if(n!==null){var r=hn();_r(n,t,e,r)}A_(t,e)}};NA=function(){return $e};OA=function(t,e){var n=$e;try{return $e=t,e()}finally{$e=n}};Xg=function(t,e,n){switch(e){case"input":if(qg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=fp(r);if(!s)throw Error(K(90));dA(r),qg(r,s)}}}break;case"textarea":fA(t,n);break;case"select":e=n.value,e!=null&&Na(t,!!n.multiple,e,!1)}};wA=E_;EA=$o;var VO={usingClientEntryPoint:!1,Events:[Zu,Aa,fp,vA,_A,E_]},mc={findFiberByHostInstance:wo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},LO={bundleType:mc.bundleType,version:mc.version,rendererPackageName:mc.rendererPackageName,rendererConfig:mc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ks.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=SA(t),t===null?null:t.stateNode},findFiberByHostInstance:mc.findFiberByHostInstance||NO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jd.isDisabled&&Jd.supportsFiber)try{cp=Jd.inject(LO),Qr=Jd}catch{}}Kn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=VO;Kn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!P_(e))throw Error(K(200));return DO(t,e,null,n)};Kn.createRoot=function(t,e){if(!P_(t))throw Error(K(299));var n=!1,r="",s=nx;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=b_(t,1,!1,null,null,n,!1,r,s),t[Is]=e.current,pu(t.nodeType===8?t.parentNode:t),new x_(e)};Kn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(K(188)):(t=Object.keys(t).join(","),Error(K(268,t)));return t=SA(e),t=t===null?null:t.stateNode,t};Kn.flushSync=function(t){return $o(t)};Kn.hydrate=function(t,e,n){if(!Tp(e))throw Error(K(200));return Ip(null,t,e,!0,n)};Kn.hydrateRoot=function(t,e,n){if(!P_(t))throw Error(K(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=nx;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=tx(e,null,t,1,n??null,s,!1,i,o),t[Is]=e.current,pu(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Ep(e)};Kn.render=function(t,e,n){if(!Tp(e))throw Error(K(200));return Ip(null,t,e,!1,n)};Kn.unmountComponentAtNode=function(t){if(!Tp(t))throw Error(K(40));return t._reactRootContainer?($o(function(){Ip(null,null,t,!1,function(){t._reactRootContainer=null,t[Is]=null})}),!0):!1};Kn.unstable_batchedUpdates=E_;Kn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Tp(n))throw Error(K(200));if(t==null||t._reactInternals===void 0)throw Error(K(38));return Ip(t,e,n,!1,r)};Kn.version="18.3.1-next-f1338f8080-20240426";function rx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(rx)}catch(t){console.error(t)}}rx(),rA.exports=Kn;var td=rA.exports;const sx=qb(td);var ix,cT=td;ix=cT.createRoot,cT.hydrateRoot;const MO="modulepreload",FO=function(t,e){return new URL(t,e).href},uT={},Oe=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=FO(c,r),c in uT)return;uT[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(!!r)for(let E=o.length-1;E>=0;E--){const y=o[E];if(y.href===c&&(!d||y.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${h}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":MO,d||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),d)return new Promise((E,y)=>{f.addEventListener("load",E),f.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},UO=1,jO=1e6;let sg=0;function BO(){return sg=(sg+1)%Number.MAX_SAFE_INTEGER,sg.toString()}const ig=new Map,dT=t=>{if(ig.has(t))return;const e=setTimeout(()=>{ig.delete(t),Wc({type:"REMOVE_TOAST",toastId:t})},jO);ig.set(t,e)},$O=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,UO)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?dT(n):t.toasts.forEach(r=>{dT(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Dh=[];let Nh={toasts:[]};function Wc(t){Nh=$O(Nh,t),Dh.forEach(e=>{e(Nh)})}function zO({...t}){const e=BO(),n=s=>Wc({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>Wc({type:"DISMISS_TOAST",toastId:e});return Wc({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function ox(){const[t,e]=b.useState(Nh);return b.useEffect(()=>(Dh.push(e),()=>{const n=Dh.indexOf(e);n>-1&&Dh.splice(n,1)}),[t]),{...t,toast:zO,dismiss:n=>Wc({type:"DISMISS_TOAST",toastId:n})}}function Ct(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function hT(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function ax(...t){return e=>{let n=!1;const r=t.map(s=>{const i=hT(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():hT(t[s],null)}}}}function Ir(...t){return b.useCallback(ax(...t),t)}function c7(t,e){const n=b.createContext(e),r=i=>{const{children:o,...a}=i,l=b.useMemo(()=>a,Object.values(a));return x.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function s(i){const o=b.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function Sp(t,e=[]){let n=[];function r(i,o){const a=b.createContext(o),l=n.length;n=[...n,o];const c=h=>{var _;const{scope:p,children:f,...E}=h,y=((_=p==null?void 0:p[t])==null?void 0:_[l])||a,v=b.useMemo(()=>E,Object.values(E));return x.jsx(y.Provider,{value:v,children:f})};c.displayName=i+"Provider";function d(h,p){var y;const f=((y=p==null?void 0:p[t])==null?void 0:y[l])||a,E=b.useContext(f);if(E)return E;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[c,d]}const s=()=>{const i=n.map(o=>b.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return b.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,qO(s,...e)]}function qO(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(i)[`__scope${c}`];return{...a,...h}},{});return b.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function wf(t){const e=WO(t),n=b.forwardRef((r,s)=>{const{children:i,...o}=r,a=b.Children.toArray(i),l=a.find(GO);if(l){const c=l.props.children,d=a.map(h=>h===l?b.Children.count(c)>1?b.Children.only(null):b.isValidElement(c)?c.props.children:null:h);return x.jsx(e,{...o,ref:s,children:b.isValidElement(c)?b.cloneElement(c,void 0,d):null})}return x.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var HO=wf("Slot");function WO(t){const e=b.forwardRef((n,r)=>{const{children:s,...i}=n;if(b.isValidElement(s)){const o=YO(s),a=QO(i,s.props);return s.type!==b.Fragment&&(a.ref=r?ax(r,o):o),b.cloneElement(s,a)}return b.Children.count(s)>1?b.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var lx=Symbol("radix.slottable");function KO(t){const e=({children:n})=>x.jsx(x.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=lx,e}function GO(t){return b.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===lx}function QO(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{const l=i(...a);return s(...a),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function YO(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function XO(t){const e=t+"CollectionProvider",[n,r]=Sp(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=y=>{const{scope:v,children:_}=y,w=z.useRef(null),I=z.useRef(new Map).current;return x.jsx(s,{scope:v,itemMap:I,collectionRef:w,children:_})};o.displayName=e;const a=t+"CollectionSlot",l=wf(a),c=z.forwardRef((y,v)=>{const{scope:_,children:w}=y,I=i(a,_),D=Ir(v,I.collectionRef);return x.jsx(l,{ref:D,children:w})});c.displayName=a;const d=t+"CollectionItemSlot",h="data-radix-collection-item",p=wf(d),f=z.forwardRef((y,v)=>{const{scope:_,children:w,...I}=y,D=z.useRef(null),O=Ir(v,D),V=i(d,_);return z.useEffect(()=>(V.itemMap.set(D,{ref:D,...I}),()=>void V.itemMap.delete(D))),x.jsx(p,{[h]:"",ref:O,children:w})});f.displayName=d;function E(y){const v=i(t+"CollectionConsumer",y);return z.useCallback(()=>{const w=v.collectionRef.current;if(!w)return[];const I=Array.from(w.querySelectorAll(`[${h}]`));return Array.from(v.itemMap.values()).sort((V,S)=>I.indexOf(V.ref.current)-I.indexOf(S.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:c,ItemSlot:f},E,r]}var JO=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Cn=JO.reduce((t,e)=>{const n=wf(`Primitive.${e}`),r=b.forwardRef((s,i)=>{const{asChild:o,...a}=s,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),x.jsx(l,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function cx(t,e){t&&td.flushSync(()=>t.dispatchEvent(e))}function Ni(t){const e=b.useRef(t);return b.useEffect(()=>{e.current=t}),b.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function ZO(t,e=globalThis==null?void 0:globalThis.document){const n=Ni(t);b.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var eV="DismissableLayer",Cy="dismissableLayer.update",tV="dismissableLayer.pointerDownOutside",nV="dismissableLayer.focusOutside",fT,ux=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),R_=b.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=t,c=b.useContext(ux),[d,h]=b.useState(null),p=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,f]=b.useState({}),E=Ir(e,S=>h(S)),y=Array.from(c.layers),[v]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),_=y.indexOf(v),w=d?y.indexOf(d):-1,I=c.layersWithOutsidePointerEventsDisabled.size>0,D=w>=_,O=sV(S=>{const T=S.target,A=[...c.branches].some(k=>k.contains(T));!D||A||(s==null||s(S),o==null||o(S),S.defaultPrevented||a==null||a())},p),V=iV(S=>{const T=S.target;[...c.branches].some(k=>k.contains(T))||(i==null||i(S),o==null||o(S),S.defaultPrevented||a==null||a())},p);return ZO(S=>{w===c.layers.size-1&&(r==null||r(S),!S.defaultPrevented&&a&&(S.preventDefault(),a()))},p),b.useEffect(()=>{if(d)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(fT=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),pT(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=fT)}},[d,p,n,c]),b.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),pT())},[d,c]),b.useEffect(()=>{const S=()=>f({});return document.addEventListener(Cy,S),()=>document.removeEventListener(Cy,S)},[]),x.jsx(Cn.div,{...l,ref:E,style:{pointerEvents:I?D?"auto":"none":void 0,...t.style},onFocusCapture:Ct(t.onFocusCapture,V.onFocusCapture),onBlurCapture:Ct(t.onBlurCapture,V.onBlurCapture),onPointerDownCapture:Ct(t.onPointerDownCapture,O.onPointerDownCapture)})});R_.displayName=eV;var rV="DismissableLayerBranch",dx=b.forwardRef((t,e)=>{const n=b.useContext(ux),r=b.useRef(null),s=Ir(e,r);return b.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),x.jsx(Cn.div,{...t,ref:s})});dx.displayName=rV;function sV(t,e=globalThis==null?void 0:globalThis.document){const n=Ni(t),r=b.useRef(!1),s=b.useRef(()=>{});return b.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){hx(tV,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function iV(t,e=globalThis==null?void 0:globalThis.document){const n=Ni(t),r=b.useRef(!1);return b.useEffect(()=>{const s=i=>{i.target&&!r.current&&hx(nV,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function pT(){const t=new CustomEvent(Cy);document.dispatchEvent(t)}function hx(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?cx(s,i):s.dispatchEvent(i)}var oV=R_,aV=dx,Oi=globalThis!=null&&globalThis.document?b.useLayoutEffect:()=>{},lV="Portal",fx=b.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,i]=b.useState(!1);Oi(()=>i(!0),[]);const o=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?sx.createPortal(x.jsx(Cn.div,{...r,ref:e}),o):null});fx.displayName=lV;function cV(t,e){return b.useReducer((n,r)=>e[n][r]??n,t)}var C_=t=>{const{present:e,children:n}=t,r=uV(e),s=typeof n=="function"?n({present:r.isPresent}):b.Children.only(n),i=Ir(r.ref,dV(s));return typeof n=="function"||r.isPresent?b.cloneElement(s,{ref:i}):null};C_.displayName="Presence";function uV(t){const[e,n]=b.useState(),r=b.useRef(null),s=b.useRef(t),i=b.useRef("none"),o=t?"mounted":"unmounted",[a,l]=cV(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return b.useEffect(()=>{const c=Zd(r.current);i.current=a==="mounted"?c:"none"},[a]),Oi(()=>{const c=r.current,d=s.current;if(d!==t){const p=i.current,f=Zd(c);t?l("MOUNT"):f==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(d&&p!==f?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),Oi(()=>{if(e){let c;const d=e.ownerDocument.defaultView??window,h=f=>{const y=Zd(r.current).includes(CSS.escape(f.animationName));if(f.target===e&&y&&(l("ANIMATION_END"),!s.current)){const v=e.style.animationFillMode;e.style.animationFillMode="forwards",c=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=v)})}},p=f=>{f.target===e&&(i.current=Zd(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(c),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:b.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function Zd(t){return(t==null?void 0:t.animationName)||"none"}function dV(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var hV=tA[" useInsertionEffect ".trim().toString()]||Oi;function fV({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,o]=pV({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:s;{const d=b.useRef(t!==void 0);b.useEffect(()=>{const h=d.current;h!==a&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=a},[a,r])}const c=b.useCallback(d=>{var h;if(a){const p=mV(d)?d(t):d;p!==t&&((h=o.current)==null||h.call(o,p))}else i(d)},[a,t,i,o]);return[l,c]}function pV({defaultProp:t,onChange:e}){const[n,r]=b.useState(t),s=b.useRef(n),i=b.useRef(e);return hV(()=>{i.current=e},[e]),b.useEffect(()=>{var o;s.current!==n&&((o=i.current)==null||o.call(i,n),s.current=n)},[n,s]),[n,r,i]}function mV(t){return typeof t=="function"}var gV=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),yV="VisuallyHidden",bp=b.forwardRef((t,e)=>x.jsx(Cn.span,{...t,ref:e,style:{...gV,...t.style}}));bp.displayName=yV;var vV=bp,k_="ToastProvider",[D_,_V,wV]=XO("Toast"),[px]=Sp("Toast",[wV]),[EV,Ap]=px(k_),mx=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[a,l]=b.useState(null),[c,d]=b.useState(0),h=b.useRef(!1),p=b.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${k_}\`. Expected non-empty \`string\`.`),x.jsx(D_.Provider,{scope:e,children:x.jsx(EV,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:b.useCallback(()=>d(f=>f+1),[]),onToastRemove:b.useCallback(()=>d(f=>f-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:p,children:o})})};mx.displayName=k_;var gx="ToastViewport",TV=["F8"],ky="toast.viewportPause",Dy="toast.viewportResume",yx=b.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=TV,label:s="Notifications ({hotkey})",...i}=t,o=Ap(gx,n),a=_V(n),l=b.useRef(null),c=b.useRef(null),d=b.useRef(null),h=b.useRef(null),p=Ir(e,h,o.onViewportChange),f=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),E=o.toastCount>0;b.useEffect(()=>{const v=_=>{var I;r.length!==0&&r.every(D=>_[D]||_.code===D)&&((I=h.current)==null||I.focus())};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[r]),b.useEffect(()=>{const v=l.current,_=h.current;if(E&&v&&_){const w=()=>{if(!o.isClosePausedRef.current){const V=new CustomEvent(ky);_.dispatchEvent(V),o.isClosePausedRef.current=!0}},I=()=>{if(o.isClosePausedRef.current){const V=new CustomEvent(Dy);_.dispatchEvent(V),o.isClosePausedRef.current=!1}},D=V=>{!v.contains(V.relatedTarget)&&I()},O=()=>{v.contains(document.activeElement)||I()};return v.addEventListener("focusin",w),v.addEventListener("focusout",D),v.addEventListener("pointermove",w),v.addEventListener("pointerleave",O),window.addEventListener("blur",w),window.addEventListener("focus",I),()=>{v.removeEventListener("focusin",w),v.removeEventListener("focusout",D),v.removeEventListener("pointermove",w),v.removeEventListener("pointerleave",O),window.removeEventListener("blur",w),window.removeEventListener("focus",I)}}},[E,o.isClosePausedRef]);const y=b.useCallback(({tabbingDirection:v})=>{const w=a().map(I=>{const D=I.ref.current,O=[D,...VV(D)];return v==="forwards"?O:O.reverse()});return(v==="forwards"?w.reverse():w).flat()},[a]);return b.useEffect(()=>{const v=h.current;if(v){const _=w=>{var O,V,S;const I=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!I){const T=document.activeElement,A=w.shiftKey;if(w.target===v&&A){(O=c.current)==null||O.focus();return}const N=y({tabbingDirection:A?"backwards":"forwards"}),C=N.findIndex(q=>q===T);og(N.slice(C+1))?w.preventDefault():A?(V=c.current)==null||V.focus():(S=d.current)==null||S.focus()}};return v.addEventListener("keydown",_),()=>v.removeEventListener("keydown",_)}},[a,y]),x.jsxs(aV,{ref:l,role:"region","aria-label":s.replace("{hotkey}",f),tabIndex:-1,style:{pointerEvents:E?void 0:"none"},children:[E&&x.jsx(Ny,{ref:c,onFocusFromOutsideViewport:()=>{const v=y({tabbingDirection:"forwards"});og(v)}}),x.jsx(D_.Slot,{scope:n,children:x.jsx(Cn.ol,{tabIndex:-1,...i,ref:p})}),E&&x.jsx(Ny,{ref:d,onFocusFromOutsideViewport:()=>{const v=y({tabbingDirection:"backwards"});og(v)}})]})});yx.displayName=gx;var vx="ToastFocusProxy",Ny=b.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=Ap(vx,n);return x.jsx(bp,{tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=i.viewport)!=null&&c.contains(a))&&r()}})});Ny.displayName=vx;var nd="Toast",IV="toast.swipeStart",SV="toast.swipeMove",bV="toast.swipeCancel",AV="toast.swipeEnd",_x=b.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[a,l]=fV({prop:r,defaultProp:s??!0,onChange:i,caller:nd});return x.jsx(C_,{present:n||a,children:x.jsx(RV,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:Ni(t.onPause),onResume:Ni(t.onResume),onSwipeStart:Ct(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Ct(t.onSwipeMove,c=>{const{x:d,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Ct(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Ct(t.onSwipeEnd,c=>{const{x:d,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),l(!1)})})})});_x.displayName=nd;var[xV,PV]=px(nd,{onClose(){}}),RV=b.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:p,onSwipeEnd:f,...E}=t,y=Ap(nd,n),[v,_]=b.useState(null),w=Ir(e,q=>_(q)),I=b.useRef(null),D=b.useRef(null),O=s||y.duration,V=b.useRef(0),S=b.useRef(O),T=b.useRef(0),{onToastAdd:A,onToastRemove:k}=y,P=Ni(()=>{var Z;(v==null?void 0:v.contains(document.activeElement))&&((Z=y.viewport)==null||Z.focus()),o()}),N=b.useCallback(q=>{!q||q===1/0||(window.clearTimeout(T.current),V.current=new Date().getTime(),T.current=window.setTimeout(P,q))},[P]);b.useEffect(()=>{const q=y.viewport;if(q){const Z=()=>{N(S.current),c==null||c()},ie=()=>{const Q=new Date().getTime()-V.current;S.current=S.current-Q,window.clearTimeout(T.current),l==null||l()};return q.addEventListener(ky,ie),q.addEventListener(Dy,Z),()=>{q.removeEventListener(ky,ie),q.removeEventListener(Dy,Z)}}},[y.viewport,O,l,c,N]),b.useEffect(()=>{i&&!y.isClosePausedRef.current&&N(O)},[i,O,y.isClosePausedRef,N]),b.useEffect(()=>(A(),()=>k()),[A,k]);const C=b.useMemo(()=>v?Ax(v):null,[v]);return y.viewport?x.jsxs(x.Fragment,{children:[C&&x.jsx(CV,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:C}),x.jsx(xV,{scope:n,onClose:P,children:td.createPortal(x.jsx(D_.ItemSlot,{scope:n,children:x.jsx(oV,{asChild:!0,onEscapeKeyDown:Ct(a,()=>{y.isFocusedToastEscapeKeyDownRef.current||P(),y.isFocusedToastEscapeKeyDownRef.current=!1}),children:x.jsx(Cn.li,{tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":y.swipeDirection,...E,ref:w,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Ct(t.onKeyDown,q=>{q.key==="Escape"&&(a==null||a(q.nativeEvent),q.nativeEvent.defaultPrevented||(y.isFocusedToastEscapeKeyDownRef.current=!0,P()))}),onPointerDown:Ct(t.onPointerDown,q=>{q.button===0&&(I.current={x:q.clientX,y:q.clientY})}),onPointerMove:Ct(t.onPointerMove,q=>{if(!I.current)return;const Z=q.clientX-I.current.x,ie=q.clientY-I.current.y,Q=!!D.current,F=["left","right"].includes(y.swipeDirection),U=["left","up"].includes(y.swipeDirection)?Math.min:Math.max,Y=F?U(0,Z):0,de=F?0:U(0,ie),ne=q.pointerType==="touch"?10:2,ce={x:Y,y:de},le={originalEvent:q,delta:ce};Q?(D.current=ce,eh(SV,h,le,{discrete:!1})):mT(ce,y.swipeDirection,ne)?(D.current=ce,eh(IV,d,le,{discrete:!1}),q.target.setPointerCapture(q.pointerId)):(Math.abs(Z)>ne||Math.abs(ie)>ne)&&(I.current=null)}),onPointerUp:Ct(t.onPointerUp,q=>{const Z=D.current,ie=q.target;if(ie.hasPointerCapture(q.pointerId)&&ie.releasePointerCapture(q.pointerId),D.current=null,I.current=null,Z){const Q=q.currentTarget,F={originalEvent:q,delta:Z};mT(Z,y.swipeDirection,y.swipeThreshold)?eh(AV,f,F,{discrete:!0}):eh(bV,p,F,{discrete:!0}),Q.addEventListener("click",U=>U.preventDefault(),{once:!0})}})})})}),y.viewport)})]}):null}),CV=t=>{const{__scopeToast:e,children:n,...r}=t,s=Ap(nd,e),[i,o]=b.useState(!1),[a,l]=b.useState(!1);return NV(()=>o(!0)),b.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:x.jsx(fx,{asChild:!0,children:x.jsx(bp,{...r,children:i&&x.jsxs(x.Fragment,{children:[s.label," ",n]})})})},kV="ToastTitle",wx=b.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return x.jsx(Cn.div,{...r,ref:e})});wx.displayName=kV;var DV="ToastDescription",Ex=b.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return x.jsx(Cn.div,{...r,ref:e})});Ex.displayName=DV;var Tx="ToastAction",Ix=b.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?x.jsx(bx,{altText:n,asChild:!0,children:x.jsx(N_,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${Tx}\`. Expected non-empty \`string\`.`),null)});Ix.displayName=Tx;var Sx="ToastClose",N_=b.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=PV(Sx,n);return x.jsx(bx,{asChild:!0,children:x.jsx(Cn.button,{type:"button",...r,ref:e,onClick:Ct(t.onClick,s.onClose)})})});N_.displayName=Sx;var bx=b.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return x.jsx(Cn.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function Ax(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),OV(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...Ax(r))}}),e}function eh(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?cx(s,i):s.dispatchEvent(i)}var mT=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function NV(t=()=>{}){const e=Ni(t);Oi(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function OV(t){return t.nodeType===t.ELEMENT_NODE}function VV(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function og(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var LV=mx,xx=yx,Px=_x,Rx=wx,Cx=Ex,kx=Ix,Dx=N_;function Nx(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=Nx(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Ox(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=Nx(t))&&(r&&(r+=" "),r+=e);return r}const gT=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,yT=Ox,Vx=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return yT(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const d=n==null?void 0:n[c],h=i==null?void 0:i[c];if(d===null)return null;const p=gT(d)||gT(h);return s[c][p]}),a=n&&Object.entries(n).reduce((c,d)=>{let[h,p]=d;return p===void 0||(c[h]=p),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,d)=>{let{class:h,className:p,...f}=d;return Object.entries(f).every(E=>{let[y,v]=E;return Array.isArray(v)?v.includes({...i,...a}[y]):{...i,...a}[y]===v})?[...c,h,p]:c},[]);return yT(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MV=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Lx=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var FV={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UV=b.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},l)=>b.createElement("svg",{ref:l,...FV,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:Lx("lucide",s),...a},[...o.map(([c,d])=>b.createElement(c,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=(t,e)=>{const n=b.forwardRef(({className:r,...s},i)=>b.createElement(UV,{ref:i,iconNode:e,className:Lx(`lucide-${MV(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jV=ot("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BV=ot("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $V=ot("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zV=ot("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qV=ot("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HV=ot("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WV=ot("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KV=ot("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GV=ot("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QV=ot("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vT=ot("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _T=ot("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YV=ot("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XV=ot("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wT=ot("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ag=ot("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mx=ot("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ET=ot("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JV=ot("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZV=ot("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eL=ot("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tL=ot("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nL=ot("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fx=ot("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),O_="-",rL=t=>{const e=iL(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(O_);return a[0]===""&&a.length!==1&&a.shift(),Ux(a,e)||sL(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},Ux=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?Ux(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(O_);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},TT=/^\[(.+)\]$/,sL=t=>{if(TT.test(t)){const e=TT.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},iL=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return aL(Object.entries(t.classGroups),n).forEach(([i,o])=>{Oy(o,r,i,e)}),r},Oy=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:IT(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(oL(s)){Oy(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{Oy(o,IT(e,i),n,r)})})},IT=(t,e)=>{let n=t;return e.split(O_).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},oL=t=>t.isThemeGetter,aL=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[n,s]}):t,lL=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},jx="!",cL=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=a=>{const l=[];let c=0,d=0,h;for(let v=0;v<a.length;v++){let _=a[v];if(c===0){if(_===s&&(r||a.slice(v,v+i)===e)){l.push(a.slice(d,v)),d=v+i;continue}if(_==="/"){h=v;continue}}_==="["?c++:_==="]"&&c--}const p=l.length===0?a:a.substring(d),f=p.startsWith(jx),E=f?p.substring(1):p,y=h&&h>d?h-d:void 0;return{modifiers:l,hasImportantModifier:f,baseClassName:E,maybePostfixModifierPosition:y}};return n?a=>n({className:a,parseClassName:o}):o},uL=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},dL=t=>({cache:lL(t.cacheSize),parseClassName:cL(t),...rL(t)}),hL=/\s+/,fL=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(hL);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:d,hasImportantModifier:h,baseClassName:p,maybePostfixModifierPosition:f}=n(c);let E=!!f,y=r(E?p.substring(0,f):p);if(!y){if(!E){a=c+(a.length>0?" "+a:a);continue}if(y=r(p),!y){a=c+(a.length>0?" "+a:a);continue}E=!1}const v=uL(d).join(":"),_=h?v+jx:v,w=_+y;if(i.includes(w))continue;i.push(w);const I=s(y,E);for(let D=0;D<I.length;++D){const O=I[D];i.push(_+O)}a=c+(a.length>0?" "+a:a)}return a};function pL(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=Bx(e))&&(r&&(r+=" "),r+=n);return r}const Bx=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=Bx(t[r]))&&(n&&(n+=" "),n+=e);return n};function mL(t,...e){let n,r,s,i=o;function o(l){const c=e.reduce((d,h)=>h(d),t());return n=dL(c),r=n.cache.get,s=n.cache.set,i=a,a(l)}function a(l){const c=r(l);if(c)return c;const d=fL(l,n);return s(l,d),d}return function(){return i(pL.apply(null,arguments))}}const Xe=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},$x=/^\[(?:([a-z-]+):)?(.+)\]$/i,gL=/^\d+\/\d+$/,yL=new Set(["px","full","screen"]),vL=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,_L=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,wL=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,EL=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,TL=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,is=t=>Ua(t)||yL.has(t)||gL.test(t),Gs=t=>kl(t,"length",CL),Ua=t=>!!t&&!Number.isNaN(Number(t)),lg=t=>kl(t,"number",Ua),gc=t=>!!t&&Number.isInteger(Number(t)),IL=t=>t.endsWith("%")&&Ua(t.slice(0,-1)),Ee=t=>$x.test(t),Qs=t=>vL.test(t),SL=new Set(["length","size","percentage"]),bL=t=>kl(t,SL,zx),AL=t=>kl(t,"position",zx),xL=new Set(["image","url"]),PL=t=>kl(t,xL,DL),RL=t=>kl(t,"",kL),yc=()=>!0,kl=(t,e,n)=>{const r=$x.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},CL=t=>_L.test(t)&&!wL.test(t),zx=()=>!1,kL=t=>EL.test(t),DL=t=>TL.test(t),NL=()=>{const t=Xe("colors"),e=Xe("spacing"),n=Xe("blur"),r=Xe("brightness"),s=Xe("borderColor"),i=Xe("borderRadius"),o=Xe("borderSpacing"),a=Xe("borderWidth"),l=Xe("contrast"),c=Xe("grayscale"),d=Xe("hueRotate"),h=Xe("invert"),p=Xe("gap"),f=Xe("gradientColorStops"),E=Xe("gradientColorStopPositions"),y=Xe("inset"),v=Xe("margin"),_=Xe("opacity"),w=Xe("padding"),I=Xe("saturate"),D=Xe("scale"),O=Xe("sepia"),V=Xe("skew"),S=Xe("space"),T=Xe("translate"),A=()=>["auto","contain","none"],k=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto",Ee,e],N=()=>[Ee,e],C=()=>["",is,Gs],q=()=>["auto",Ua,Ee],Z=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ie=()=>["solid","dashed","dotted","double","none"],Q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],F=()=>["start","end","center","between","around","evenly","stretch"],U=()=>["","0",Ee],Y=()=>["auto","avoid","all","avoid-page","page","left","right","column"],de=()=>[Ua,Ee];return{cacheSize:500,separator:":",theme:{colors:[yc],spacing:[is,Gs],blur:["none","",Qs,Ee],brightness:de(),borderColor:[t],borderRadius:["none","","full",Qs,Ee],borderSpacing:N(),borderWidth:C(),contrast:de(),grayscale:U(),hueRotate:de(),invert:U(),gap:N(),gradientColorStops:[t],gradientColorStopPositions:[IL,Gs],inset:P(),margin:P(),opacity:de(),padding:N(),saturate:de(),scale:de(),sepia:U(),skew:de(),space:N(),translate:N()},classGroups:{aspect:[{aspect:["auto","square","video",Ee]}],container:["container"],columns:[{columns:[Qs]}],"break-after":[{"break-after":Y()}],"break-before":[{"break-before":Y()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Z(),Ee]}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",gc,Ee]}],basis:[{basis:P()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ee]}],grow:[{grow:U()}],shrink:[{shrink:U()}],order:[{order:["first","last","none",gc,Ee]}],"grid-cols":[{"grid-cols":[yc]}],"col-start-end":[{col:["auto",{span:["full",gc,Ee]},Ee]}],"col-start":[{"col-start":q()}],"col-end":[{"col-end":q()}],"grid-rows":[{"grid-rows":[yc]}],"row-start-end":[{row:["auto",{span:[gc,Ee]},Ee]}],"row-start":[{"row-start":q()}],"row-end":[{"row-end":q()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ee]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ee]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...F()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...F(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...F(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ee,e]}],"min-w":[{"min-w":[Ee,e,"min","max","fit"]}],"max-w":[{"max-w":[Ee,e,"none","full","min","max","fit","prose",{screen:[Qs]},Qs]}],h:[{h:[Ee,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ee,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ee,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ee,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Qs,Gs]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",lg]}],"font-family":[{font:[yc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ee]}],"line-clamp":[{"line-clamp":["none",Ua,lg]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",is,Ee]}],"list-image":[{"list-image":["none",Ee]}],"list-style-type":[{list:["none","disc","decimal",Ee]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[_]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[_]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ie(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",is,Gs]}],"underline-offset":[{"underline-offset":["auto",is,Ee]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ee]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ee]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[_]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Z(),AL]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",bL]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},PL]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[E]}],"gradient-via-pos":[{via:[E]}],"gradient-to-pos":[{to:[E]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[_]}],"border-style":[{border:[...ie(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[_]}],"divide-style":[{divide:ie()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...ie()]}],"outline-offset":[{"outline-offset":[is,Ee]}],"outline-w":[{outline:[is,Gs]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:C()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[_]}],"ring-offset-w":[{"ring-offset":[is,Gs]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Qs,RL]}],"shadow-color":[{shadow:[yc]}],opacity:[{opacity:[_]}],"mix-blend":[{"mix-blend":[...Q(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Q()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Qs,Ee]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[I]}],sepia:[{sepia:[O]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[_]}],"backdrop-saturate":[{"backdrop-saturate":[I]}],"backdrop-sepia":[{"backdrop-sepia":[O]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ee]}],duration:[{duration:de()}],ease:[{ease:["linear","in","out","in-out",Ee]}],delay:[{delay:de()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ee]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[D]}],"scale-x":[{"scale-x":[D]}],"scale-y":[{"scale-y":[D]}],rotate:[{rotate:[gc,Ee]}],"translate-x":[{"translate-x":[T]}],"translate-y":[{"translate-y":[T]}],"skew-x":[{"skew-x":[V]}],"skew-y":[{"skew-y":[V]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ee]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ee]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ee]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[is,Gs,lg]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},OL=mL(NL);function Ds(...t){return OL(Ox(t))}const VL=LV,qx=b.forwardRef(({className:t,...e},n)=>x.jsx(xx,{ref:n,className:Ds("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));qx.displayName=xx.displayName;const LL=Vx("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Hx=b.forwardRef(({className:t,variant:e,...n},r)=>x.jsx(Px,{ref:r,className:Ds(LL({variant:e}),t),...n}));Hx.displayName=Px.displayName;const ML=b.forwardRef(({className:t,...e},n)=>x.jsx(kx,{ref:n,className:Ds("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));ML.displayName=kx.displayName;const Wx=b.forwardRef(({className:t,...e},n)=>x.jsx(Dx,{ref:n,className:Ds("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:x.jsx(Fx,{className:"h-4 w-4"})}));Wx.displayName=Dx.displayName;const Kx=b.forwardRef(({className:t,...e},n)=>x.jsx(Rx,{ref:n,className:Ds("text-sm font-semibold",t),...e}));Kx.displayName=Rx.displayName;const Gx=b.forwardRef(({className:t,...e},n)=>x.jsx(Cx,{ref:n,className:Ds("text-sm opacity-90",t),...e}));Gx.displayName=Cx.displayName;function FL(){const{toasts:t}=ox();return x.jsxs(VL,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return x.jsxs(Hx,{...i,children:[x.jsxs("div",{className:"grid gap-1",children:[n&&x.jsx(Kx,{children:n}),r&&x.jsx(Gx,{children:r})]}),s,x.jsx(Wx,{})]},e)}),x.jsx(qx,{})]})}var Ef=["light","dark"],V_="(prefers-color-scheme: dark)",UL=typeof window>"u",L_=b.createContext(void 0),jL={setTheme:t=>{},themes:[]},Qx=()=>{var t;return(t=b.useContext(L_))!=null?t:jL},BL=t=>b.useContext(L_)?t.children:b.createElement(zL,{...t}),$L=["light","dark"],zL=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:n=!0,enableColorScheme:r=!0,storageKey:s="theme",themes:i=$L,defaultTheme:o=n?"system":"light",attribute:a="data-theme",value:l,children:c,nonce:d})=>{let[h,p]=b.useState(()=>ST(s,o)),[f,E]=b.useState(()=>ST(s)),y=l?Object.values(l):i,v=b.useCallback(D=>{let O=D;if(!O)return;D==="system"&&n&&(O=bT());let V=l?l[O]:O,S=e?HL():null,T=document.documentElement;if(a==="class"?(T.classList.remove(...y),V&&T.classList.add(V)):V?T.setAttribute(a,V):T.removeAttribute(a),r){let A=Ef.includes(o)?o:null,k=Ef.includes(O)?O:A;T.style.colorScheme=k}S==null||S()},[]),_=b.useCallback(D=>{let O=typeof D=="function"?D(D):D;p(O);try{localStorage.setItem(s,O)}catch{}},[t]),w=b.useCallback(D=>{let O=bT(D);E(O),h==="system"&&n&&!t&&v("system")},[h,t]);b.useEffect(()=>{let D=window.matchMedia(V_);return D.addListener(w),w(D),()=>D.removeListener(w)},[w]),b.useEffect(()=>{let D=O=>{if(O.key!==s)return;let V=O.newValue||o;_(V)};return window.addEventListener("storage",D),()=>window.removeEventListener("storage",D)},[_]),b.useEffect(()=>{v(t??h)},[t,h]);let I=b.useMemo(()=>({theme:h,setTheme:_,forcedTheme:t,resolvedTheme:h==="system"?f:h,themes:n?[...i,"system"]:i,systemTheme:n?f:void 0}),[h,_,t,f,n,i]);return b.createElement(L_.Provider,{value:I},b.createElement(qL,{forcedTheme:t,disableTransitionOnChange:e,enableSystem:n,enableColorScheme:r,storageKey:s,themes:i,defaultTheme:o,attribute:a,value:l,children:c,attrs:y,nonce:d}),c)},qL=b.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:o,attrs:a,nonce:l})=>{let c=i==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(E=>`'${E}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=s?Ef.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",p=(E,y=!1,v=!0)=>{let _=o?o[E]:E,w=y?E+"|| ''":`'${_}'`,I="";return s&&v&&!y&&Ef.includes(E)&&(I+=`d.style.colorScheme = '${E}';`),n==="class"?y||_?I+=`c.add(${w})`:I+="null":_&&(I+=`d[s](n,${w})`),I},f=t?`!function(){${d}${p(t)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${c})){var t='${V_}',m=window.matchMedia(t);if(m.media!==t||m.matches){${p("dark")}}else{${p("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${p(o?"x[e]":"e",!0)}}${c?"":"else{"+p(i,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${p(o?"x[e]":"e",!0)}}else{${p(i,!1,!1)};}${h}}catch(t){}}();`;return b.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:f}})}),ST=(t,e)=>{if(UL)return;let n;try{n=localStorage.getItem(t)||void 0}catch{}return n||e},HL=()=>{let t=document.createElement("style");return t.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},bT=t=>(t||(t=window.matchMedia(V_)),t.matches?"dark":"light"),WL=t=>{switch(t){case"success":return QL;case"info":return XL;case"warning":return YL;case"error":return JL;default:return null}},KL=Array(12).fill(0),GL=({visible:t,className:e})=>z.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},z.createElement("div",{className:"sonner-spinner"},KL.map((n,r)=>z.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),QL=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),YL=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),XL=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),JL=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),ZL=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},z.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),z.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),eM=()=>{let[t,e]=z.useState(document.hidden);return z.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},Vy=1,tM=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;let{message:r,...s}=e,i=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:Vy++,o=this.toasts.find(l=>l.id===i),a=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...e,id:i,title:r}),{...l,...e,id:i,dismissible:a,title:r}):l):this.addToast({title:r,...s,dismissible:a,id:i}),i},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),this.subscribers.forEach(n=>n({id:e,dismiss:!0})),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));let s=e instanceof Promise?e:e(),i=r!==void 0,o,a=s.then(async c=>{if(o=["resolve",c],z.isValidElement(c))i=!1,this.create({id:r,type:"default",message:c});else if(rM(c)&&!c.ok){i=!1;let d=typeof n.error=="function"?await n.error(`HTTP error! status: ${c.status}`):n.error,h=typeof n.description=="function"?await n.description(`HTTP error! status: ${c.status}`):n.description;this.create({id:r,type:"error",message:d,description:h})}else if(n.success!==void 0){i=!1;let d=typeof n.success=="function"?await n.success(c):n.success,h=typeof n.description=="function"?await n.description(c):n.description;this.create({id:r,type:"success",message:d,description:h})}}).catch(async c=>{if(o=["reject",c],n.error!==void 0){i=!1;let d=typeof n.error=="function"?await n.error(c):n.error,h=typeof n.description=="function"?await n.description(c):n.description;this.create({id:r,type:"error",message:d,description:h})}}).finally(()=>{var c;i&&(this.dismiss(r),r=void 0),(c=n.finally)==null||c.call(n)}),l=()=>new Promise((c,d)=>a.then(()=>o[0]==="reject"?d(o[1]):c(o[1])).catch(d));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,n)=>{let r=(n==null?void 0:n.id)||Vy++;return this.create({jsx:e(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},wn=new tM,nM=(t,e)=>{let n=(e==null?void 0:e.id)||Vy++;return wn.addToast({title:t,...e,id:n}),n},rM=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",sM=nM,iM=()=>wn.toasts,oM=()=>wn.getActiveToasts(),St=Object.assign(sM,{success:wn.success,info:wn.info,warning:wn.warning,error:wn.error,custom:wn.custom,message:wn.message,promise:wn.promise,dismiss:wn.dismiss,loading:wn.loading},{getHistory:iM,getToasts:oM});function aM(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}aM(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function th(t){return t.label!==void 0}var lM=3,cM="32px",uM="16px",AT=4e3,dM=356,hM=14,fM=20,pM=200;function cr(...t){return t.filter(Boolean).join(" ")}function mM(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var gM=t=>{var e,n,r,s,i,o,a,l,c,d,h;let{invert:p,toast:f,unstyled:E,interacting:y,setHeights:v,visibleToasts:_,heights:w,index:I,toasts:D,expanded:O,removeToast:V,defaultRichColors:S,closeButton:T,style:A,cancelButtonStyle:k,actionButtonStyle:P,className:N="",descriptionClassName:C="",duration:q,position:Z,gap:ie,loadingIcon:Q,expandByDefault:F,classNames:U,icons:Y,closeButtonAriaLabel:de="Close toast",pauseWhenPageIsHidden:ne}=t,[ce,le]=z.useState(null),[Te,Qe]=z.useState(null),[ae,ye]=z.useState(!1),[Pe,Tt]=z.useState(!1),[Nt,Kt]=z.useState(!1),[Bt,yn]=z.useState(!1),[Cr,ve]=z.useState(!1),[Qn,Us]=z.useState(0),[at,Ot]=z.useState(0),kr=z.useRef(f.duration||q||AT),Td=z.useRef(null),Dr=z.useRef(null),mm=I===0,to=I+1<=_,an=f.type,rs=f.dismissible!==!1,Gl=f.className||"",gm=f.descriptionClassName||"",ra=z.useMemo(()=>w.findIndex(fe=>fe.toastId===f.id)||0,[w,f.id]),Id=z.useMemo(()=>{var fe;return(fe=f.closeButton)!=null?fe:T},[f.closeButton,T]),Ql=z.useMemo(()=>f.duration||q||AT,[f.duration,q]),ss=z.useRef(0),Nr=z.useRef(0),sa=z.useRef(0),vn=z.useRef(null),[Sd,ia]=Z.split("-"),Yl=z.useMemo(()=>w.reduce((fe,Ue,We)=>We>=ra?fe:fe+Ue.height,0),[w,ra]),js=eM(),bd=f.invert||p,xt=an==="loading";Nr.current=z.useMemo(()=>ra*ie+Yl,[ra,Yl]),z.useEffect(()=>{kr.current=Ql},[Ql]),z.useEffect(()=>{ye(!0)},[]),z.useEffect(()=>{let fe=Dr.current;if(fe){let Ue=fe.getBoundingClientRect().height;return Ot(Ue),v(We=>[{toastId:f.id,height:Ue,position:f.position},...We]),()=>v(We=>We.filter(Vt=>Vt.toastId!==f.id))}},[v,f.id]),z.useLayoutEffect(()=>{if(!ae)return;let fe=Dr.current,Ue=fe.style.height;fe.style.height="auto";let We=fe.getBoundingClientRect().height;fe.style.height=Ue,Ot(We),v(Vt=>Vt.find(kn=>kn.toastId===f.id)?Vt.map(kn=>kn.toastId===f.id?{...kn,height:We}:kn):[{toastId:f.id,height:We,position:f.position},...Vt])},[ae,f.title,f.description,v,f.id]);let or=z.useCallback(()=>{Tt(!0),Us(Nr.current),v(fe=>fe.filter(Ue=>Ue.toastId!==f.id)),setTimeout(()=>{V(f)},pM)},[f,V,v,Nr]);z.useEffect(()=>{if(f.promise&&an==="loading"||f.duration===1/0||f.type==="loading")return;let fe;return O||y||ne&&js?(()=>{if(sa.current<ss.current){let Ue=new Date().getTime()-ss.current;kr.current=kr.current-Ue}sa.current=new Date().getTime()})():kr.current!==1/0&&(ss.current=new Date().getTime(),fe=setTimeout(()=>{var Ue;(Ue=f.onAutoClose)==null||Ue.call(f,f),or()},kr.current)),()=>clearTimeout(fe)},[O,y,f,an,ne,js,or]),z.useEffect(()=>{f.delete&&or()},[or,f.delete]);function no(){var fe,Ue,We;return Y!=null&&Y.loading?z.createElement("div",{className:cr(U==null?void 0:U.loader,(fe=f==null?void 0:f.classNames)==null?void 0:fe.loader,"sonner-loader"),"data-visible":an==="loading"},Y.loading):Q?z.createElement("div",{className:cr(U==null?void 0:U.loader,(Ue=f==null?void 0:f.classNames)==null?void 0:Ue.loader,"sonner-loader"),"data-visible":an==="loading"},Q):z.createElement(GL,{className:cr(U==null?void 0:U.loader,(We=f==null?void 0:f.classNames)==null?void 0:We.loader),visible:an==="loading"})}return z.createElement("li",{tabIndex:0,ref:Dr,className:cr(N,Gl,U==null?void 0:U.toast,(e=f==null?void 0:f.classNames)==null?void 0:e.toast,U==null?void 0:U.default,U==null?void 0:U[an],(n=f==null?void 0:f.classNames)==null?void 0:n[an]),"data-sonner-toast":"","data-rich-colors":(r=f.richColors)!=null?r:S,"data-styled":!(f.jsx||f.unstyled||E),"data-mounted":ae,"data-promise":!!f.promise,"data-swiped":Cr,"data-removed":Pe,"data-visible":to,"data-y-position":Sd,"data-x-position":ia,"data-index":I,"data-front":mm,"data-swiping":Nt,"data-dismissible":rs,"data-type":an,"data-invert":bd,"data-swipe-out":Bt,"data-swipe-direction":Te,"data-expanded":!!(O||F&&ae),style:{"--index":I,"--toasts-before":I,"--z-index":D.length-I,"--offset":`${Pe?Qn:Nr.current}px`,"--initial-height":F?"auto":`${at}px`,...A,...f.style},onDragEnd:()=>{Kt(!1),le(null),vn.current=null},onPointerDown:fe=>{xt||!rs||(Td.current=new Date,Us(Nr.current),fe.target.setPointerCapture(fe.pointerId),fe.target.tagName!=="BUTTON"&&(Kt(!0),vn.current={x:fe.clientX,y:fe.clientY}))},onPointerUp:()=>{var fe,Ue,We,Vt;if(Bt||!rs)return;vn.current=null;let kn=Number(((fe=Dr.current)==null?void 0:fe.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Or=Number(((Ue=Dr.current)==null?void 0:Ue.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Yn=new Date().getTime()-((We=Td.current)==null?void 0:We.getTime()),_n=ce==="x"?kn:Or,ar=Math.abs(_n)/Yn;if(Math.abs(_n)>=fM||ar>.11){Us(Nr.current),(Vt=f.onDismiss)==null||Vt.call(f,f),Qe(ce==="x"?kn>0?"right":"left":Or>0?"down":"up"),or(),yn(!0),ve(!1);return}Kt(!1),le(null)},onPointerMove:fe=>{var Ue,We,Vt,kn;if(!vn.current||!rs||((Ue=window.getSelection())==null?void 0:Ue.toString().length)>0)return;let Or=fe.clientY-vn.current.y,Yn=fe.clientX-vn.current.x,_n=(We=t.swipeDirections)!=null?We:mM(Z);!ce&&(Math.abs(Yn)>1||Math.abs(Or)>1)&&le(Math.abs(Yn)>Math.abs(Or)?"x":"y");let ar={x:0,y:0};ce==="y"?(_n.includes("top")||_n.includes("bottom"))&&(_n.includes("top")&&Or<0||_n.includes("bottom")&&Or>0)&&(ar.y=Or):ce==="x"&&(_n.includes("left")||_n.includes("right"))&&(_n.includes("left")&&Yn<0||_n.includes("right")&&Yn>0)&&(ar.x=Yn),(Math.abs(ar.x)>0||Math.abs(ar.y)>0)&&ve(!0),(Vt=Dr.current)==null||Vt.style.setProperty("--swipe-amount-x",`${ar.x}px`),(kn=Dr.current)==null||kn.style.setProperty("--swipe-amount-y",`${ar.y}px`)}},Id&&!f.jsx?z.createElement("button",{"aria-label":de,"data-disabled":xt,"data-close-button":!0,onClick:xt||!rs?()=>{}:()=>{var fe;or(),(fe=f.onDismiss)==null||fe.call(f,f)},className:cr(U==null?void 0:U.closeButton,(s=f==null?void 0:f.classNames)==null?void 0:s.closeButton)},(i=Y==null?void 0:Y.close)!=null?i:ZL):null,f.jsx||b.isValidElement(f.title)?f.jsx?f.jsx:typeof f.title=="function"?f.title():f.title:z.createElement(z.Fragment,null,an||f.icon||f.promise?z.createElement("div",{"data-icon":"",className:cr(U==null?void 0:U.icon,(o=f==null?void 0:f.classNames)==null?void 0:o.icon)},f.promise||f.type==="loading"&&!f.icon?f.icon||no():null,f.type!=="loading"?f.icon||(Y==null?void 0:Y[an])||WL(an):null):null,z.createElement("div",{"data-content":"",className:cr(U==null?void 0:U.content,(a=f==null?void 0:f.classNames)==null?void 0:a.content)},z.createElement("div",{"data-title":"",className:cr(U==null?void 0:U.title,(l=f==null?void 0:f.classNames)==null?void 0:l.title)},typeof f.title=="function"?f.title():f.title),f.description?z.createElement("div",{"data-description":"",className:cr(C,gm,U==null?void 0:U.description,(c=f==null?void 0:f.classNames)==null?void 0:c.description)},typeof f.description=="function"?f.description():f.description):null),b.isValidElement(f.cancel)?f.cancel:f.cancel&&th(f.cancel)?z.createElement("button",{"data-button":!0,"data-cancel":!0,style:f.cancelButtonStyle||k,onClick:fe=>{var Ue,We;th(f.cancel)&&rs&&((We=(Ue=f.cancel).onClick)==null||We.call(Ue,fe),or())},className:cr(U==null?void 0:U.cancelButton,(d=f==null?void 0:f.classNames)==null?void 0:d.cancelButton)},f.cancel.label):null,b.isValidElement(f.action)?f.action:f.action&&th(f.action)?z.createElement("button",{"data-button":!0,"data-action":!0,style:f.actionButtonStyle||P,onClick:fe=>{var Ue,We;th(f.action)&&((We=(Ue=f.action).onClick)==null||We.call(Ue,fe),!fe.defaultPrevented&&or())},className:cr(U==null?void 0:U.actionButton,(h=f==null?void 0:f.classNames)==null?void 0:h.actionButton)},f.action.label):null))};function xT(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function yM(t,e){let n={};return[t,e].forEach((r,s)=>{let i=s===1,o=i?"--mobile-offset":"--offset",a=i?uM:cM;function l(c){["top","right","bottom","left"].forEach(d=>{n[`${o}-${d}`]=typeof c=="number"?`${c}px`:c})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(c=>{r[c]===void 0?n[`${o}-${c}`]=a:n[`${o}-${c}`]=typeof r[c]=="number"?`${r[c]}px`:r[c]}):l(a)}),n}var vM=b.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:o,className:a,offset:l,mobileOffset:c,theme:d="light",richColors:h,duration:p,style:f,visibleToasts:E=lM,toastOptions:y,dir:v=xT(),gap:_=hM,loadingIcon:w,icons:I,containerAriaLabel:D="Notifications",pauseWhenPageIsHidden:O}=t,[V,S]=z.useState([]),T=z.useMemo(()=>Array.from(new Set([r].concat(V.filter(ne=>ne.position).map(ne=>ne.position)))),[V,r]),[A,k]=z.useState([]),[P,N]=z.useState(!1),[C,q]=z.useState(!1),[Z,ie]=z.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Q=z.useRef(null),F=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),U=z.useRef(null),Y=z.useRef(!1),de=z.useCallback(ne=>{S(ce=>{var le;return(le=ce.find(Te=>Te.id===ne.id))!=null&&le.delete||wn.dismiss(ne.id),ce.filter(({id:Te})=>Te!==ne.id)})},[]);return z.useEffect(()=>wn.subscribe(ne=>{if(ne.dismiss){S(ce=>ce.map(le=>le.id===ne.id?{...le,delete:!0}:le));return}setTimeout(()=>{sx.flushSync(()=>{S(ce=>{let le=ce.findIndex(Te=>Te.id===ne.id);return le!==-1?[...ce.slice(0,le),{...ce[le],...ne},...ce.slice(le+1)]:[ne,...ce]})})})}),[]),z.useEffect(()=>{if(d!=="system"){ie(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ie("dark"):ie("light")),typeof window>"u")return;let ne=window.matchMedia("(prefers-color-scheme: dark)");try{ne.addEventListener("change",({matches:ce})=>{ie(ce?"dark":"light")})}catch{ne.addListener(({matches:le})=>{try{ie(le?"dark":"light")}catch(Te){console.error(Te)}})}},[d]),z.useEffect(()=>{V.length<=1&&N(!1)},[V]),z.useEffect(()=>{let ne=ce=>{var le,Te;s.every(Qe=>ce[Qe]||ce.code===Qe)&&(N(!0),(le=Q.current)==null||le.focus()),ce.code==="Escape"&&(document.activeElement===Q.current||(Te=Q.current)!=null&&Te.contains(document.activeElement))&&N(!1)};return document.addEventListener("keydown",ne),()=>document.removeEventListener("keydown",ne)},[s]),z.useEffect(()=>{if(Q.current)return()=>{U.current&&(U.current.focus({preventScroll:!0}),U.current=null,Y.current=!1)}},[Q.current]),z.createElement("section",{ref:e,"aria-label":`${D} ${F}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},T.map((ne,ce)=>{var le;let[Te,Qe]=ne.split("-");return V.length?z.createElement("ol",{key:ne,dir:v==="auto"?xT():v,tabIndex:-1,ref:Q,className:a,"data-sonner-toaster":!0,"data-theme":Z,"data-y-position":Te,"data-lifted":P&&V.length>1&&!i,"data-x-position":Qe,style:{"--front-toast-height":`${((le=A[0])==null?void 0:le.height)||0}px`,"--width":`${dM}px`,"--gap":`${_}px`,...f,...yM(l,c)},onBlur:ae=>{Y.current&&!ae.currentTarget.contains(ae.relatedTarget)&&(Y.current=!1,U.current&&(U.current.focus({preventScroll:!0}),U.current=null))},onFocus:ae=>{ae.target instanceof HTMLElement&&ae.target.dataset.dismissible==="false"||Y.current||(Y.current=!0,U.current=ae.relatedTarget)},onMouseEnter:()=>N(!0),onMouseMove:()=>N(!0),onMouseLeave:()=>{C||N(!1)},onDragEnd:()=>N(!1),onPointerDown:ae=>{ae.target instanceof HTMLElement&&ae.target.dataset.dismissible==="false"||q(!0)},onPointerUp:()=>q(!1)},V.filter(ae=>!ae.position&&ce===0||ae.position===ne).map((ae,ye)=>{var Pe,Tt;return z.createElement(gM,{key:ae.id,icons:I,index:ye,toast:ae,defaultRichColors:h,duration:(Pe=y==null?void 0:y.duration)!=null?Pe:p,className:y==null?void 0:y.className,descriptionClassName:y==null?void 0:y.descriptionClassName,invert:n,visibleToasts:E,closeButton:(Tt=y==null?void 0:y.closeButton)!=null?Tt:o,interacting:C,position:ne,style:y==null?void 0:y.style,unstyled:y==null?void 0:y.unstyled,classNames:y==null?void 0:y.classNames,cancelButtonStyle:y==null?void 0:y.cancelButtonStyle,actionButtonStyle:y==null?void 0:y.actionButtonStyle,removeToast:de,toasts:V.filter(Nt=>Nt.position==ae.position),heights:A.filter(Nt=>Nt.position==ae.position),setHeights:k,expandByDefault:i,gap:_,loadingIcon:w,expanded:P,pauseWhenPageIsHidden:O,swipeDirections:t.swipeDirections})})):null}))});const _M=({...t})=>{const{theme:e="system"}=Qx();return x.jsx(vM,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})},wM=["top","right","bottom","left"],Vi=Math.min,Vn=Math.max,Tf=Math.round,nh=Math.floor,Xr=t=>({x:t,y:t}),EM={left:"right",right:"left",bottom:"top",top:"bottom"},TM={start:"end",end:"start"};function Ly(t,e,n){return Vn(t,Vi(e,n))}function As(t,e){return typeof t=="function"?t(e):t}function xs(t){return t.split("-")[0]}function Dl(t){return t.split("-")[1]}function M_(t){return t==="x"?"y":"x"}function F_(t){return t==="y"?"height":"width"}const IM=new Set(["top","bottom"]);function Hr(t){return IM.has(xs(t))?"y":"x"}function U_(t){return M_(Hr(t))}function SM(t,e,n){n===void 0&&(n=!1);const r=Dl(t),s=U_(t),i=F_(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=If(o)),[o,If(o)]}function bM(t){const e=If(t);return[My(t),e,My(e)]}function My(t){return t.replace(/start|end/g,e=>TM[e])}const PT=["left","right"],RT=["right","left"],AM=["top","bottom"],xM=["bottom","top"];function PM(t,e,n){switch(t){case"top":case"bottom":return n?e?RT:PT:e?PT:RT;case"left":case"right":return e?AM:xM;default:return[]}}function RM(t,e,n,r){const s=Dl(t);let i=PM(xs(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(My)))),i}function If(t){return t.replace(/left|right|bottom|top/g,e=>EM[e])}function CM(t){return{top:0,right:0,bottom:0,left:0,...t}}function Yx(t){return typeof t!="number"?CM(t):{top:t,right:t,bottom:t,left:t}}function Sf(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function CT(t,e,n){let{reference:r,floating:s}=t;const i=Hr(e),o=U_(e),a=F_(o),l=xs(e),c=i==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,p=r[a]/2-s[a]/2;let f;switch(l){case"top":f={x:d,y:r.y-s.height};break;case"bottom":f={x:d,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:h};break;case"left":f={x:r.x-s.width,y:h};break;default:f={x:r.x,y:r.y}}switch(Dl(e)){case"start":f[o]-=p*(n&&c?-1:1);break;case"end":f[o]+=p*(n&&c?-1:1);break}return f}const kM=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:h}=CT(c,r,l),p=r,f={},E=0;for(let y=0;y<a.length;y++){const{name:v,fn:_}=a[y],{x:w,y:I,data:D,reset:O}=await _({x:d,y:h,initialPlacement:r,placement:p,strategy:s,middlewareData:f,rects:c,platform:o,elements:{reference:t,floating:e}});d=w??d,h=I??h,f={...f,[v]:{...f[v],...D}},O&&E<=50&&(E++,typeof O=="object"&&(O.placement&&(p=O.placement),O.rects&&(c=O.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):O.rects),{x:d,y:h}=CT(c,p,l)),y=-1)}return{x:d,y:h,placement:p,strategy:s,middlewareData:f}};async function Iu(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:p=!1,padding:f=0}=As(e,t),E=Yx(f),v=a[p?h==="floating"?"reference":"floating":h],_=Sf(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(v)))==null||n?v:v.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:d,strategy:l})),w=h==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,I=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),D=await(i.isElement==null?void 0:i.isElement(I))?await(i.getScale==null?void 0:i.getScale(I))||{x:1,y:1}:{x:1,y:1},O=Sf(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:w,offsetParent:I,strategy:l}):w);return{top:(_.top-O.top+E.top)/D.y,bottom:(O.bottom-_.bottom+E.bottom)/D.y,left:(_.left-O.left+E.left)/D.x,right:(O.right-_.right+E.right)/D.x}}const DM=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:d=0}=As(t,e)||{};if(c==null)return{};const h=Yx(d),p={x:n,y:r},f=U_(s),E=F_(f),y=await o.getDimensions(c),v=f==="y",_=v?"top":"left",w=v?"bottom":"right",I=v?"clientHeight":"clientWidth",D=i.reference[E]+i.reference[f]-p[f]-i.floating[E],O=p[f]-i.reference[f],V=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let S=V?V[I]:0;(!S||!await(o.isElement==null?void 0:o.isElement(V)))&&(S=a.floating[I]||i.floating[E]);const T=D/2-O/2,A=S/2-y[E]/2-1,k=Vi(h[_],A),P=Vi(h[w],A),N=k,C=S-y[E]-P,q=S/2-y[E]/2+T,Z=Ly(N,q,C),ie=!l.arrow&&Dl(s)!=null&&q!==Z&&i.reference[E]/2-(q<N?k:P)-y[E]/2<0,Q=ie?q<N?q-N:q-C:0;return{[f]:p[f]+Q,data:{[f]:Z,centerOffset:q-Z-Q,...ie&&{alignmentOffset:Q}},reset:ie}}}),NM=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:E="none",flipAlignment:y=!0,...v}=As(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const _=xs(s),w=Hr(a),I=xs(a)===a,D=await(l.isRTL==null?void 0:l.isRTL(c.floating)),O=p||(I||!y?[If(a)]:bM(a)),V=E!=="none";!p&&V&&O.push(...RM(a,y,E,D));const S=[a,...O],T=await Iu(e,v),A=[];let k=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&A.push(T[_]),h){const q=SM(s,o,D);A.push(T[q[0]],T[q[1]])}if(k=[...k,{placement:s,overflows:A}],!A.every(q=>q<=0)){var P,N;const q=(((P=i.flip)==null?void 0:P.index)||0)+1,Z=S[q];if(Z&&(!(h==="alignment"?w!==Hr(Z):!1)||k.every(F=>Hr(F.placement)===w?F.overflows[0]>0:!0)))return{data:{index:q,overflows:k},reset:{placement:Z}};let ie=(N=k.filter(Q=>Q.overflows[0]<=0).sort((Q,F)=>Q.overflows[1]-F.overflows[1])[0])==null?void 0:N.placement;if(!ie)switch(f){case"bestFit":{var C;const Q=(C=k.filter(F=>{if(V){const U=Hr(F.placement);return U===w||U==="y"}return!0}).map(F=>[F.placement,F.overflows.filter(U=>U>0).reduce((U,Y)=>U+Y,0)]).sort((F,U)=>F[1]-U[1])[0])==null?void 0:C[0];Q&&(ie=Q);break}case"initialPlacement":ie=a;break}if(s!==ie)return{reset:{placement:ie}}}return{}}}};function kT(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function DT(t){return wM.some(e=>t[e]>=0)}const OM=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=As(t,e);switch(r){case"referenceHidden":{const i=await Iu(e,{...s,elementContext:"reference"}),o=kT(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:DT(o)}}}case"escaped":{const i=await Iu(e,{...s,altBoundary:!0}),o=kT(i,n.floating);return{data:{escapedOffsets:o,escaped:DT(o)}}}default:return{}}}}},Xx=new Set(["left","top"]);async function VM(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=xs(n),a=Dl(n),l=Hr(n)==="y",c=Xx.has(o)?-1:1,d=i&&l?-1:1,h=As(e,t);let{mainAxis:p,crossAxis:f,alignmentAxis:E}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof E=="number"&&(f=a==="end"?E*-1:E),l?{x:f*d,y:p*c}:{x:p*c,y:f*d}}const LM=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await VM(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},MM=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:v=>{let{x:_,y:w}=v;return{x:_,y:w}}},...l}=As(t,e),c={x:n,y:r},d=await Iu(e,l),h=Hr(xs(s)),p=M_(h);let f=c[p],E=c[h];if(i){const v=p==="y"?"top":"left",_=p==="y"?"bottom":"right",w=f+d[v],I=f-d[_];f=Ly(w,f,I)}if(o){const v=h==="y"?"top":"left",_=h==="y"?"bottom":"right",w=E+d[v],I=E-d[_];E=Ly(w,E,I)}const y=a.fn({...e,[p]:f,[h]:E});return{...y,data:{x:y.x-n,y:y.y-r,enabled:{[p]:i,[h]:o}}}}}},FM=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=As(t,e),d={x:n,y:r},h=Hr(s),p=M_(h);let f=d[p],E=d[h];const y=As(a,e),v=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(l){const I=p==="y"?"height":"width",D=i.reference[p]-i.floating[I]+v.mainAxis,O=i.reference[p]+i.reference[I]-v.mainAxis;f<D?f=D:f>O&&(f=O)}if(c){var _,w;const I=p==="y"?"width":"height",D=Xx.has(xs(s)),O=i.reference[h]-i.floating[I]+(D&&((_=o.offset)==null?void 0:_[h])||0)+(D?0:v.crossAxis),V=i.reference[h]+i.reference[I]+(D?0:((w=o.offset)==null?void 0:w[h])||0)-(D?v.crossAxis:0);E<O?E=O:E>V&&(E=V)}return{[p]:f,[h]:E}}}},UM=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...c}=As(t,e),d=await Iu(e,c),h=xs(s),p=Dl(s),f=Hr(s)==="y",{width:E,height:y}=i.floating;let v,_;h==="top"||h==="bottom"?(v=h,_=p===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(_=h,v=p==="end"?"top":"bottom");const w=y-d.top-d.bottom,I=E-d.left-d.right,D=Vi(y-d[v],w),O=Vi(E-d[_],I),V=!e.middlewareData.shift;let S=D,T=O;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(T=I),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(S=w),V&&!p){const k=Vn(d.left,0),P=Vn(d.right,0),N=Vn(d.top,0),C=Vn(d.bottom,0);f?T=E-2*(k!==0||P!==0?k+P:Vn(d.left,d.right)):S=y-2*(N!==0||C!==0?N+C:Vn(d.top,d.bottom))}await l({...e,availableWidth:T,availableHeight:S});const A=await o.getDimensions(a.floating);return E!==A.width||y!==A.height?{reset:{rects:!0}}:{}}}};function xp(){return typeof window<"u"}function Nl(t){return Jx(t)?(t.nodeName||"").toLowerCase():"#document"}function $n(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ts(t){var e;return(e=(Jx(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Jx(t){return xp()?t instanceof Node||t instanceof $n(t).Node:!1}function Sr(t){return xp()?t instanceof Element||t instanceof $n(t).Element:!1}function Jr(t){return xp()?t instanceof HTMLElement||t instanceof $n(t).HTMLElement:!1}function NT(t){return!xp()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof $n(t).ShadowRoot}const jM=new Set(["inline","contents"]);function rd(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=br(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!jM.has(s)}const BM=new Set(["table","td","th"]);function $M(t){return BM.has(Nl(t))}const zM=[":popover-open",":modal"];function Pp(t){return zM.some(e=>{try{return t.matches(e)}catch{return!1}})}const qM=["transform","translate","scale","rotate","perspective"],HM=["transform","translate","scale","rotate","perspective","filter"],WM=["paint","layout","strict","content"];function j_(t){const e=B_(),n=Sr(t)?br(t):t;return qM.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||HM.some(r=>(n.willChange||"").includes(r))||WM.some(r=>(n.contain||"").includes(r))}function KM(t){let e=Li(t);for(;Jr(e)&&!il(e);){if(j_(e))return e;if(Pp(e))return null;e=Li(e)}return null}function B_(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const GM=new Set(["html","body","#document"]);function il(t){return GM.has(Nl(t))}function br(t){return $n(t).getComputedStyle(t)}function Rp(t){return Sr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Li(t){if(Nl(t)==="html")return t;const e=t.assignedSlot||t.parentNode||NT(t)&&t.host||ts(t);return NT(e)?e.host:e}function Zx(t){const e=Li(t);return il(e)?t.ownerDocument?t.ownerDocument.body:t.body:Jr(e)&&rd(e)?e:Zx(e)}function Su(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=Zx(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=$n(s);if(i){const a=Fy(o);return e.concat(o,o.visualViewport||[],rd(s)?s:[],a&&n?Su(a):[])}return e.concat(s,Su(s,[],n))}function Fy(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function eP(t){const e=br(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Jr(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=Tf(n)!==i||Tf(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function $_(t){return Sr(t)?t:t.contextElement}function ja(t){const e=$_(t);if(!Jr(e))return Xr(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=eP(e);let o=(i?Tf(n.width):n.width)/r,a=(i?Tf(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const QM=Xr(0);function tP(t){const e=$n(t);return!B_()||!e.visualViewport?QM:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function YM(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==$n(t)?!1:e}function zo(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=$_(t);let o=Xr(1);e&&(r?Sr(r)&&(o=ja(r)):o=ja(t));const a=YM(i,n,r)?tP(i):Xr(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,d=s.width/o.x,h=s.height/o.y;if(i){const p=$n(i),f=r&&Sr(r)?$n(r):r;let E=p,y=Fy(E);for(;y&&r&&f!==E;){const v=ja(y),_=y.getBoundingClientRect(),w=br(y),I=_.left+(y.clientLeft+parseFloat(w.paddingLeft))*v.x,D=_.top+(y.clientTop+parseFloat(w.paddingTop))*v.y;l*=v.x,c*=v.y,d*=v.x,h*=v.y,l+=I,c+=D,E=$n(y),y=Fy(E)}}return Sf({width:d,height:h,x:l,y:c})}function Cp(t,e){const n=Rp(t).scrollLeft;return e?e.left+n:zo(ts(t)).left+n}function nP(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-Cp(t,n),s=n.top+e.scrollTop;return{x:r,y:s}}function XM(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=ts(r),a=e?Pp(e.floating):!1;if(r===o||a&&i)return n;let l={scrollLeft:0,scrollTop:0},c=Xr(1);const d=Xr(0),h=Jr(r);if((h||!h&&!i)&&((Nl(r)!=="body"||rd(o))&&(l=Rp(r)),Jr(r))){const f=zo(r);c=ja(r),d.x=f.x+r.clientLeft,d.y=f.y+r.clientTop}const p=o&&!h&&!i?nP(o,l):Xr(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+d.x+p.x,y:n.y*c.y-l.scrollTop*c.y+d.y+p.y}}function JM(t){return Array.from(t.getClientRects())}function ZM(t){const e=ts(t),n=Rp(t),r=t.ownerDocument.body,s=Vn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Vn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Cp(t);const a=-n.scrollTop;return br(r).direction==="rtl"&&(o+=Vn(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}const OT=25;function eF(t,e){const n=$n(t),r=ts(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const d=B_();(!d||d&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}const c=Cp(r);if(c<=0){const d=r.ownerDocument,h=d.body,p=getComputedStyle(h),f=d.compatMode==="CSS1Compat"&&parseFloat(p.marginLeft)+parseFloat(p.marginRight)||0,E=Math.abs(r.clientWidth-h.clientWidth-f);E<=OT&&(i-=E)}else c<=OT&&(i+=c);return{width:i,height:o,x:a,y:l}}const tF=new Set(["absolute","fixed"]);function nF(t,e){const n=zo(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Jr(t)?ja(t):Xr(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function VT(t,e,n){let r;if(e==="viewport")r=eF(t,n);else if(e==="document")r=ZM(ts(t));else if(Sr(e))r=nF(e,n);else{const s=tP(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Sf(r)}function rP(t,e){const n=Li(t);return n===e||!Sr(n)||il(n)?!1:br(n).position==="fixed"||rP(n,e)}function rF(t,e){const n=e.get(t);if(n)return n;let r=Su(t,[],!1).filter(a=>Sr(a)&&Nl(a)!=="body"),s=null;const i=br(t).position==="fixed";let o=i?Li(t):t;for(;Sr(o)&&!il(o);){const a=br(o),l=j_(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&tF.has(s.position)||rd(o)&&!l&&rP(t,o))?r=r.filter(d=>d!==o):s=a,o=Li(o)}return e.set(t,r),r}function sF(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?Pp(e)?[]:rF(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,d)=>{const h=VT(e,d,s);return c.top=Vn(h.top,c.top),c.right=Vi(h.right,c.right),c.bottom=Vi(h.bottom,c.bottom),c.left=Vn(h.left,c.left),c},VT(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function iF(t){const{width:e,height:n}=eP(t);return{width:e,height:n}}function oF(t,e,n){const r=Jr(e),s=ts(e),i=n==="fixed",o=zo(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=Xr(0);function c(){l.x=Cp(s)}if(r||!r&&!i)if((Nl(e)!=="body"||rd(s))&&(a=Rp(e)),r){const f=zo(e,!0,i,e);l.x=f.x+e.clientLeft,l.y=f.y+e.clientTop}else s&&c();i&&!r&&s&&c();const d=s&&!r&&!i?nP(s,a):Xr(0),h=o.left+a.scrollLeft-l.x-d.x,p=o.top+a.scrollTop-l.y-d.y;return{x:h,y:p,width:o.width,height:o.height}}function cg(t){return br(t).position==="static"}function LT(t,e){if(!Jr(t)||br(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return ts(t)===n&&(n=n.ownerDocument.body),n}function sP(t,e){const n=$n(t);if(Pp(t))return n;if(!Jr(t)){let s=Li(t);for(;s&&!il(s);){if(Sr(s)&&!cg(s))return s;s=Li(s)}return n}let r=LT(t,e);for(;r&&$M(r)&&cg(r);)r=LT(r,e);return r&&il(r)&&cg(r)&&!j_(r)?n:r||KM(t)||n}const aF=async function(t){const e=this.getOffsetParent||sP,n=this.getDimensions,r=await n(t.floating);return{reference:oF(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function lF(t){return br(t).direction==="rtl"}const cF={convertOffsetParentRelativeRectToViewportRelativeRect:XM,getDocumentElement:ts,getClippingRect:sF,getOffsetParent:sP,getElementRects:aF,getClientRects:JM,getDimensions:iF,getScale:ja,isElement:Sr,isRTL:lF};function iP(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function uF(t,e){let n=null,r;const s=ts(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const c=t.getBoundingClientRect(),{left:d,top:h,width:p,height:f}=c;if(a||e(),!p||!f)return;const E=nh(h),y=nh(s.clientWidth-(d+p)),v=nh(s.clientHeight-(h+f)),_=nh(d),I={rootMargin:-E+"px "+-y+"px "+-v+"px "+-_+"px",threshold:Vn(0,Vi(1,l))||1};let D=!0;function O(V){const S=V[0].intersectionRatio;if(S!==l){if(!D)return o();S?o(!1,S):r=setTimeout(()=>{o(!1,1e-7)},1e3)}S===1&&!iP(c,t.getBoundingClientRect())&&o(),D=!1}try{n=new IntersectionObserver(O,{...I,root:s.ownerDocument})}catch{n=new IntersectionObserver(O,I)}n.observe(t)}return o(!0),i}function dF(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=$_(t),d=s||i?[...c?Su(c):[],...Su(e)]:[];d.forEach(_=>{s&&_.addEventListener("scroll",n,{passive:!0}),i&&_.addEventListener("resize",n)});const h=c&&a?uF(c,n):null;let p=-1,f=null;o&&(f=new ResizeObserver(_=>{let[w]=_;w&&w.target===c&&f&&(f.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var I;(I=f)==null||I.observe(e)})),n()}),c&&!l&&f.observe(c),f.observe(e));let E,y=l?zo(t):null;l&&v();function v(){const _=zo(t);y&&!iP(y,_)&&n(),y=_,E=requestAnimationFrame(v)}return n(),()=>{var _;d.forEach(w=>{s&&w.removeEventListener("scroll",n),i&&w.removeEventListener("resize",n)}),h==null||h(),(_=f)==null||_.disconnect(),f=null,l&&cancelAnimationFrame(E)}}const hF=LM,fF=MM,pF=NM,mF=UM,gF=OM,MT=DM,yF=FM,vF=(t,e,n)=>{const r=new Map,s={platform:cF,...n},i={...s.platform,_c:r};return kM(t,e,{...s,platform:i})};var _F=typeof document<"u",wF=function(){},Oh=_F?b.useLayoutEffect:wF;function bf(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!bf(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!bf(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function oP(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function FT(t,e){const n=oP(t);return Math.round(e*n)/n}function ug(t){const e=b.useRef(t);return Oh(()=>{e.current=t}),e}function EF(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[d,h]=b.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,f]=b.useState(r);bf(p,r)||f(r);const[E,y]=b.useState(null),[v,_]=b.useState(null),w=b.useCallback(F=>{F!==V.current&&(V.current=F,y(F))},[]),I=b.useCallback(F=>{F!==S.current&&(S.current=F,_(F))},[]),D=i||E,O=o||v,V=b.useRef(null),S=b.useRef(null),T=b.useRef(d),A=l!=null,k=ug(l),P=ug(s),N=ug(c),C=b.useCallback(()=>{if(!V.current||!S.current)return;const F={placement:e,strategy:n,middleware:p};P.current&&(F.platform=P.current),vF(V.current,S.current,F).then(U=>{const Y={...U,isPositioned:N.current!==!1};q.current&&!bf(T.current,Y)&&(T.current=Y,td.flushSync(()=>{h(Y)}))})},[p,e,n,P,N]);Oh(()=>{c===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,h(F=>({...F,isPositioned:!1})))},[c]);const q=b.useRef(!1);Oh(()=>(q.current=!0,()=>{q.current=!1}),[]),Oh(()=>{if(D&&(V.current=D),O&&(S.current=O),D&&O){if(k.current)return k.current(D,O,C);C()}},[D,O,C,k,A]);const Z=b.useMemo(()=>({reference:V,floating:S,setReference:w,setFloating:I}),[w,I]),ie=b.useMemo(()=>({reference:D,floating:O}),[D,O]),Q=b.useMemo(()=>{const F={position:n,left:0,top:0};if(!ie.floating)return F;const U=FT(ie.floating,d.x),Y=FT(ie.floating,d.y);return a?{...F,transform:"translate("+U+"px, "+Y+"px)",...oP(ie.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:U,top:Y}},[n,a,ie.floating,d.x,d.y]);return b.useMemo(()=>({...d,update:C,refs:Z,elements:ie,floatingStyles:Q}),[d,C,Z,ie,Q])}const TF=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?MT({element:r.current,padding:s}).fn(n):{}:r?MT({element:r,padding:s}).fn(n):{}}}},IF=(t,e)=>({...hF(t),options:[t,e]}),SF=(t,e)=>({...fF(t),options:[t,e]}),bF=(t,e)=>({...yF(t),options:[t,e]}),AF=(t,e)=>({...pF(t),options:[t,e]}),xF=(t,e)=>({...mF(t),options:[t,e]}),PF=(t,e)=>({...gF(t),options:[t,e]}),RF=(t,e)=>({...TF(t),options:[t,e]});var CF="Arrow",aP=b.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return x.jsx(Cn.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:x.jsx("polygon",{points:"0,0 30,0 15,10"})})});aP.displayName=CF;var kF=aP;function DF(t){const[e,n]=b.useState(void 0);return Oi(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var z_="Popper",[lP,cP]=Sp(z_),[NF,uP]=lP(z_),dP=t=>{const{__scopePopper:e,children:n}=t,[r,s]=b.useState(null);return x.jsx(NF,{scope:e,anchor:r,onAnchorChange:s,children:n})};dP.displayName=z_;var hP="PopperAnchor",fP=b.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=uP(hP,n),o=b.useRef(null),a=Ir(e,o),l=b.useRef(null);return b.useEffect(()=>{const c=l.current;l.current=(r==null?void 0:r.current)||o.current,c!==l.current&&i.onAnchorChange(l.current)}),r?null:x.jsx(Cn.div,{...s,ref:a})});fP.displayName=hP;var q_="PopperContent",[OF,VF]=lP(q_),pP=b.forwardRef((t,e)=>{var ae,ye,Pe,Tt,Nt,Kt;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:p=!1,updatePositionStrategy:f="optimized",onPlaced:E,...y}=t,v=uP(q_,n),[_,w]=b.useState(null),I=Ir(e,Bt=>w(Bt)),[D,O]=b.useState(null),V=DF(D),S=(V==null?void 0:V.width)??0,T=(V==null?void 0:V.height)??0,A=r+(i!=="center"?"-"+i:""),k=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},P=Array.isArray(c)?c:[c],N=P.length>0,C={padding:k,boundary:P.filter(MF),altBoundary:N},{refs:q,floatingStyles:Z,placement:ie,isPositioned:Q,middlewareData:F}=EF({strategy:"fixed",placement:A,whileElementsMounted:(...Bt)=>dF(...Bt,{animationFrame:f==="always"}),elements:{reference:v.anchor},middleware:[IF({mainAxis:s+T,alignmentAxis:o}),l&&SF({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?bF():void 0,...C}),l&&AF({...C}),xF({...C,apply:({elements:Bt,rects:yn,availableWidth:Cr,availableHeight:ve})=>{const{width:Qn,height:Us}=yn.reference,at=Bt.floating.style;at.setProperty("--radix-popper-available-width",`${Cr}px`),at.setProperty("--radix-popper-available-height",`${ve}px`),at.setProperty("--radix-popper-anchor-width",`${Qn}px`),at.setProperty("--radix-popper-anchor-height",`${Us}px`)}}),D&&RF({element:D,padding:a}),FF({arrowWidth:S,arrowHeight:T}),p&&PF({strategy:"referenceHidden",...C})]}),[U,Y]=yP(ie),de=Ni(E);Oi(()=>{Q&&(de==null||de())},[Q,de]);const ne=(ae=F.arrow)==null?void 0:ae.x,ce=(ye=F.arrow)==null?void 0:ye.y,le=((Pe=F.arrow)==null?void 0:Pe.centerOffset)!==0,[Te,Qe]=b.useState();return Oi(()=>{_&&Qe(window.getComputedStyle(_).zIndex)},[_]),x.jsx("div",{ref:q.setFloating,"data-radix-popper-content-wrapper":"",style:{...Z,transform:Q?Z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Te,"--radix-popper-transform-origin":[(Tt=F.transformOrigin)==null?void 0:Tt.x,(Nt=F.transformOrigin)==null?void 0:Nt.y].join(" "),...((Kt=F.hide)==null?void 0:Kt.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:x.jsx(OF,{scope:n,placedSide:U,onArrowChange:O,arrowX:ne,arrowY:ce,shouldHideArrow:le,children:x.jsx(Cn.div,{"data-side":U,"data-align":Y,...y,ref:I,style:{...y.style,animation:Q?void 0:"none"}})})})});pP.displayName=q_;var mP="PopperArrow",LF={top:"bottom",right:"left",bottom:"top",left:"right"},gP=b.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=VF(mP,r),o=LF[i.placedSide];return x.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:x.jsx(kF,{...s,ref:n,style:{...s.style,display:"block"}})})});gP.displayName=mP;function MF(t){return t!==null}var FF=t=>({name:"transformOrigin",options:t,fn(e){var v,_,w;const{placement:n,rects:r,middlewareData:s}=e,o=((v=s.arrow)==null?void 0:v.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,d]=yP(n),h={start:"0%",center:"50%",end:"100%"}[d],p=(((_=s.arrow)==null?void 0:_.x)??0)+a/2,f=(((w=s.arrow)==null?void 0:w.y)??0)+l/2;let E="",y="";return c==="bottom"?(E=o?h:`${p}px`,y=`${-l}px`):c==="top"?(E=o?h:`${p}px`,y=`${r.floating.height+l}px`):c==="right"?(E=`${-l}px`,y=o?h:`${f}px`):c==="left"&&(E=`${r.floating.width+l}px`,y=o?h:`${f}px`),{data:{x:E,y}}}});function yP(t){const[e,n="center"]=t.split("-");return[e,n]}var d7=dP,UF=fP,jF=pP,BF=gP,[kp]=Sp("Tooltip",[cP]),H_=cP(),vP="TooltipProvider",$F=700,UT="tooltip.open",[zF,_P]=kp(vP),wP=t=>{const{__scopeTooltip:e,delayDuration:n=$F,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,o=b.useRef(!0),a=b.useRef(!1),l=b.useRef(0);return b.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),x.jsx(zF,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:b.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:b.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:b.useCallback(c=>{a.current=c},[]),disableHoverableContent:s,children:i})};wP.displayName=vP;var EP="Tooltip",[h7,Dp]=kp(EP),Uy="TooltipTrigger",qF=b.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Dp(Uy,n),i=_P(Uy,n),o=H_(n),a=b.useRef(null),l=Ir(e,a,s.onTriggerChange),c=b.useRef(!1),d=b.useRef(!1),h=b.useCallback(()=>c.current=!1,[]);return b.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),x.jsx(UF,{asChild:!0,...o,children:x.jsx(Cn.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:l,onPointerMove:Ct(t.onPointerMove,p=>{p.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:Ct(t.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:Ct(t.onPointerDown,()=>{s.open&&s.onClose(),c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Ct(t.onFocus,()=>{c.current||s.onOpen()}),onBlur:Ct(t.onBlur,s.onClose),onClick:Ct(t.onClick,s.onClose)})})});qF.displayName=Uy;var HF="TooltipPortal",[f7,WF]=kp(HF,{forceMount:void 0}),ol="TooltipContent",TP=b.forwardRef((t,e)=>{const n=WF(ol,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=Dp(ol,t.__scopeTooltip);return x.jsx(C_,{present:r||o.open,children:o.disableHoverableContent?x.jsx(IP,{side:s,...i,ref:e}):x.jsx(KF,{side:s,...i,ref:e})})}),KF=b.forwardRef((t,e)=>{const n=Dp(ol,t.__scopeTooltip),r=_P(ol,t.__scopeTooltip),s=b.useRef(null),i=Ir(e,s),[o,a]=b.useState(null),{trigger:l,onClose:c}=n,d=s.current,{onPointerInTransitChange:h}=r,p=b.useCallback(()=>{a(null),h(!1)},[h]),f=b.useCallback((E,y)=>{const v=E.currentTarget,_={x:E.clientX,y:E.clientY},w=JF(_,v.getBoundingClientRect()),I=ZF(_,w),D=e4(y.getBoundingClientRect()),O=n4([...I,...D]);a(O),h(!0)},[h]);return b.useEffect(()=>()=>p(),[p]),b.useEffect(()=>{if(l&&d){const E=v=>f(v,d),y=v=>f(v,l);return l.addEventListener("pointerleave",E),d.addEventListener("pointerleave",y),()=>{l.removeEventListener("pointerleave",E),d.removeEventListener("pointerleave",y)}}},[l,d,f,p]),b.useEffect(()=>{if(o){const E=y=>{const v=y.target,_={x:y.clientX,y:y.clientY},w=(l==null?void 0:l.contains(v))||(d==null?void 0:d.contains(v)),I=!t4(_,o);w?p():I&&(p(),c())};return document.addEventListener("pointermove",E),()=>document.removeEventListener("pointermove",E)}},[l,d,o,c,p]),x.jsx(IP,{...t,ref:i})}),[GF,QF]=kp(EP,{isInside:!1}),YF=KO("TooltipContent"),IP=b.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=t,l=Dp(ol,n),c=H_(n),{onClose:d}=l;return b.useEffect(()=>(document.addEventListener(UT,d),()=>document.removeEventListener(UT,d)),[d]),b.useEffect(()=>{if(l.trigger){const h=p=>{const f=p.target;f!=null&&f.contains(l.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,d]),x.jsx(R_,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:x.jsxs(jF,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[x.jsx(YF,{children:r}),x.jsx(GF,{scope:n,isInside:!0,children:x.jsx(vV,{id:l.contentId,role:"tooltip",children:s||r})})]})})});TP.displayName=ol;var SP="TooltipArrow",XF=b.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=H_(n);return QF(SP,n).isInside?null:x.jsx(BF,{...s,...r,ref:e})});XF.displayName=SP;function JF(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function ZF(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function e4(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function t4(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i],l=e[o],c=a.x,d=a.y,h=l.x,p=l.y;d>r!=p>r&&n<(h-c)*(r-d)/(p-d)+c&&(s=!s)}return s}function n4(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),r4(e)}function r4(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var s4=wP,bP=TP;const i4=s4,o4=b.forwardRef(({className:t,sideOffset:e=4,...n},r)=>x.jsx(bP,{ref:r,sideOffset:e,className:Ds("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));o4.displayName=bP.displayName;var Np=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},a4={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},oi,Ov,Vb,l4=(Vb=class{constructor(){Ne(this,oi,a4);Ne(this,Ov,!1)}setTimeoutProvider(t){pe(this,oi,t)}setTimeout(t,e){return $(this,oi).setTimeout(t,e)}clearTimeout(t){$(this,oi).clearTimeout(t)}setInterval(t,e){return $(this,oi).setInterval(t,e)}clearInterval(t){$(this,oi).clearInterval(t)}},oi=new WeakMap,Ov=new WeakMap,Vb),jy=new l4;function c4(t){setTimeout(t,0)}var Op=typeof window>"u"||"Deno"in globalThis;function dr(){}function u4(t,e){return typeof t=="function"?t(e):t}function d4(t){return typeof t=="number"&&t>=0&&t!==1/0}function h4(t,e){return Math.max(t+(e||0)-Date.now(),0)}function By(t,e){return typeof t=="function"?t(e):t}function f4(t,e){return typeof t=="function"?t(e):t}function jT(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==W_(o,e.options))return!1}else if(!Au(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function BT(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(bu(e.options.mutationKey)!==bu(i))return!1}else if(!Au(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function W_(t,e){return((e==null?void 0:e.queryKeyHashFn)||bu)(t)}function bu(t){return JSON.stringify(t,(e,n)=>$y(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Au(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Au(t[n],e[n])):!1}var p4=Object.prototype.hasOwnProperty;function AP(t,e){if(t===e)return t;const n=$T(t)&&$T(e);if(!n&&!($y(t)&&$y(e)))return e;const s=(n?t:Object.keys(t)).length,i=n?e:Object.keys(e),o=i.length,a=n?new Array(o):{};let l=0;for(let c=0;c<o;c++){const d=n?c:i[c],h=t[d],p=e[d];if(h===p){a[d]=h,(n?c<s:p4.call(t,d))&&l++;continue}if(h===null||p===null||typeof h!="object"||typeof p!="object"){a[d]=p;continue}const f=AP(h,p);a[d]=f,f===h&&l++}return s===o&&l===s?t:a}function $T(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function $y(t){if(!zT(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!zT(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function zT(t){return Object.prototype.toString.call(t)==="[object Object]"}function m4(t){return new Promise(e=>{jy.setTimeout(e,t)})}function g4(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?AP(t,e):e}function y4(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function v4(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var K_=Symbol();function xP(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===K_?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Ao,ai,qa,Lb,_4=(Lb=class extends Np{constructor(){super();Ne(this,Ao);Ne(this,ai);Ne(this,qa);pe(this,qa,e=>{if(!Op&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){$(this,ai)||this.setEventListener($(this,qa))}onUnsubscribe(){var e;this.hasListeners()||((e=$(this,ai))==null||e.call(this),pe(this,ai,void 0))}setEventListener(e){var n;pe(this,qa,e),(n=$(this,ai))==null||n.call(this),pe(this,ai,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){$(this,Ao)!==e&&(pe(this,Ao,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof $(this,Ao)=="boolean"?$(this,Ao):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Ao=new WeakMap,ai=new WeakMap,qa=new WeakMap,Lb),PP=new _4;function w4(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}var E4=c4;function T4(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=E4;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var dn=T4(),Ha,li,Wa,Mb,I4=(Mb=class extends Np{constructor(){super();Ne(this,Ha,!0);Ne(this,li);Ne(this,Wa);pe(this,Wa,e=>{if(!Op&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){$(this,li)||this.setEventListener($(this,Wa))}onUnsubscribe(){var e;this.hasListeners()||((e=$(this,li))==null||e.call(this),pe(this,li,void 0))}setEventListener(e){var n;pe(this,Wa,e),(n=$(this,li))==null||n.call(this),pe(this,li,e(this.setOnline.bind(this)))}setOnline(e){$(this,Ha)!==e&&(pe(this,Ha,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return $(this,Ha)}},Ha=new WeakMap,li=new WeakMap,Wa=new WeakMap,Mb),Af=new I4;function S4(t){return Math.min(1e3*2**t,3e4)}function RP(t){return(t??"online")==="online"?Af.isOnline():!0}var zy=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function CP(t){let e=!1,n=0,r;const s=w4(),i=()=>s.status!=="pending",o=y=>{var v;if(!i()){const _=new zy(y);p(_),(v=t.onCancel)==null||v.call(t,_)}},a=()=>{e=!0},l=()=>{e=!1},c=()=>PP.isFocused()&&(t.networkMode==="always"||Af.isOnline())&&t.canRun(),d=()=>RP(t.networkMode)&&t.canRun(),h=y=>{i()||(r==null||r(),s.resolve(y))},p=y=>{i()||(r==null||r(),s.reject(y))},f=()=>new Promise(y=>{var v;r=_=>{(i()||c())&&y(_)},(v=t.onPause)==null||v.call(t)}).then(()=>{var y;r=void 0,i()||(y=t.onContinue)==null||y.call(t)}),E=()=>{if(i())return;let y;const v=n===0?t.initialPromise:void 0;try{y=v??t.fn()}catch(_){y=Promise.reject(_)}Promise.resolve(y).then(h).catch(_=>{var V;if(i())return;const w=t.retry??(Op?0:3),I=t.retryDelay??S4,D=typeof I=="function"?I(n,_):I,O=w===!0||typeof w=="number"&&n<w||typeof w=="function"&&w(n,_);if(e||!O){p(_);return}n++,(V=t.onFail)==null||V.call(t,n,_),m4(D).then(()=>c()?void 0:f()).then(()=>{e?p(_):E()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:a,continueRetry:l,canStart:d,start:()=>(d()?E():f().then(E),s)}}var xo,Fb,kP=(Fb=class{constructor(){Ne(this,xo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),d4(this.gcTime)&&pe(this,xo,jy.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Op?1/0:5*60*1e3))}clearGcTimeout(){$(this,xo)&&(jy.clearTimeout($(this,xo)),pe(this,xo,void 0))}},xo=new WeakMap,Fb),Po,Ka,Jn,Ro,Mt,Ku,Co,hr,os,Ub,b4=(Ub=class extends kP{constructor(n){super();Ne(this,hr);Ne(this,Po);Ne(this,Ka);Ne(this,Jn);Ne(this,Ro);Ne(this,Mt);Ne(this,Ku);Ne(this,Co);pe(this,Co,!1),pe(this,Ku,n.defaultOptions),this.setOptions(n.options),this.observers=[],pe(this,Ro,n.client),pe(this,Jn,$(this,Ro).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,pe(this,Po,HT(this.options)),this.state=n.state??$(this,Po),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=$(this,Mt))==null?void 0:n.promise}setOptions(n){if(this.options={...$(this,Ku),...n},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=HT(this.options);r.data!==void 0&&(this.setState(qT(r.data,r.dataUpdatedAt)),pe(this,Po,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&$(this,Jn).remove(this)}setData(n,r){const s=g4(this.state.data,n,this.options);return Gt(this,hr,os).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){Gt(this,hr,os).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=$(this,Mt))==null?void 0:s.promise;return(i=$(this,Mt))==null||i.cancel(n),r?r.then(dr).catch(dr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState($(this,Po))}isActive(){return this.observers.some(n=>f4(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===K_||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>By(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!h4(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=$(this,Mt))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=$(this,Mt))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),$(this,Jn).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||($(this,Mt)&&($(this,Co)?$(this,Mt).cancel({revert:!0}):$(this,Mt).cancelRetry()),this.scheduleGc()),$(this,Jn).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Gt(this,hr,os).call(this,{type:"invalidate"})}async fetch(n,r){var c,d,h,p,f,E,y,v,_,w,I,D;if(this.state.fetchStatus!=="idle"&&((c=$(this,Mt))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if($(this,Mt))return $(this,Mt).continueRetry(),$(this,Mt).promise}if(n&&this.setOptions(n),!this.options.queryFn){const O=this.observers.find(V=>V.options.queryFn);O&&this.setOptions(O.options)}const s=new AbortController,i=O=>{Object.defineProperty(O,"signal",{enumerable:!0,get:()=>(pe(this,Co,!0),s.signal)})},o=()=>{const O=xP(this.options,r),S=(()=>{const T={client:$(this,Ro),queryKey:this.queryKey,meta:this.meta};return i(T),T})();return pe(this,Co,!1),this.options.persister?this.options.persister(O,S,this):O(S)},l=(()=>{const O={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:$(this,Ro),state:this.state,fetchFn:o};return i(O),O})();(d=this.options.behavior)==null||d.onFetch(l,this),pe(this,Ka,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&Gt(this,hr,os).call(this,{type:"fetch",meta:(p=l.fetchOptions)==null?void 0:p.meta}),pe(this,Mt,CP({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,onCancel:O=>{O instanceof zy&&O.revert&&this.setState({...$(this,Ka),fetchStatus:"idle"}),s.abort()},onFail:(O,V)=>{Gt(this,hr,os).call(this,{type:"failed",failureCount:O,error:V})},onPause:()=>{Gt(this,hr,os).call(this,{type:"pause"})},onContinue:()=>{Gt(this,hr,os).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const O=await $(this,Mt).start();if(O===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(O),(E=(f=$(this,Jn).config).onSuccess)==null||E.call(f,O,this),(v=(y=$(this,Jn).config).onSettled)==null||v.call(y,O,this.state.error,this),O}catch(O){if(O instanceof zy){if(O.silent)return $(this,Mt).promise;if(O.revert){if(this.state.data===void 0)throw O;return this.state.data}}throw Gt(this,hr,os).call(this,{type:"error",error:O}),(w=(_=$(this,Jn).config).onError)==null||w.call(_,O,this),(D=(I=$(this,Jn).config).onSettled)==null||D.call(I,this.state.data,O,this),O}finally{this.scheduleGc()}}},Po=new WeakMap,Ka=new WeakMap,Jn=new WeakMap,Ro=new WeakMap,Mt=new WeakMap,Ku=new WeakMap,Co=new WeakMap,hr=new WeakSet,os=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...A4(s.data,this.options),fetchMeta:n.meta??null};case"success":const i={...s,...qT(n.data,n.dataUpdatedAt),dataUpdateCount:s.dataUpdateCount+1,...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return pe(this,Ka,n.manual?i:void 0),i;case"error":const o=n.error;return{...s,error:o,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),dn.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),$(this,Jn).notify({query:this,type:"updated",action:n})})},Ub);function A4(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:RP(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function qT(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function HT(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}function WT(t){return{onFetch:(e,n)=>{var d,h,p,f,E;const r=e.options,s=(p=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:p.direction,i=((f=e.state.data)==null?void 0:f.pages)||[],o=((E=e.state.data)==null?void 0:E.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let y=!1;const v=I=>{Object.defineProperty(I,"signal",{enumerable:!0,get:()=>(e.signal.aborted?y=!0:e.signal.addEventListener("abort",()=>{y=!0}),e.signal)})},_=xP(e.options,e.fetchOptions),w=async(I,D,O)=>{if(y)return Promise.reject();if(D==null&&I.pages.length)return Promise.resolve(I);const S=(()=>{const P={client:e.client,queryKey:e.queryKey,pageParam:D,direction:O?"backward":"forward",meta:e.options.meta};return v(P),P})(),T=await _(S),{maxPages:A}=e.options,k=O?v4:y4;return{pages:k(I.pages,T,A),pageParams:k(I.pageParams,D,A)}};if(s&&i.length){const I=s==="backward",D=I?x4:KT,O={pages:i,pageParams:o},V=D(r,O);a=await w(O,V,I)}else{const I=t??i.length;do{const D=l===0?o[0]??r.initialPageParam:KT(r,a);if(l>0&&D==null)break;a=await w(a,D),l++}while(l<I)}return a};e.options.persister?e.fetchFn=()=>{var y,v;return(v=(y=e.options).persister)==null?void 0:v.call(y,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=c}}}function KT(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function x4(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Gu,jr,cn,ko,Br,ei,jb,P4=(jb=class extends kP{constructor(n){super();Ne(this,Br);Ne(this,Gu);Ne(this,jr);Ne(this,cn);Ne(this,ko);pe(this,Gu,n.client),this.mutationId=n.mutationId,pe(this,cn,n.mutationCache),pe(this,jr,[]),this.state=n.state||R4(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){$(this,jr).includes(n)||($(this,jr).push(n),this.clearGcTimeout(),$(this,cn).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){pe(this,jr,$(this,jr).filter(r=>r!==n)),this.scheduleGc(),$(this,cn).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){$(this,jr).length||(this.state.status==="pending"?this.scheduleGc():$(this,cn).remove(this))}continue(){var n;return((n=$(this,ko))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var a,l,c,d,h,p,f,E,y,v,_,w,I,D,O,V,S,T,A,k;const r=()=>{Gt(this,Br,ei).call(this,{type:"continue"})},s={client:$(this,Gu),meta:this.options.meta,mutationKey:this.options.mutationKey};pe(this,ko,CP({fn:()=>this.options.mutationFn?this.options.mutationFn(n,s):Promise.reject(new Error("No mutationFn found")),onFail:(P,N)=>{Gt(this,Br,ei).call(this,{type:"failed",failureCount:P,error:N})},onPause:()=>{Gt(this,Br,ei).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>$(this,cn).canRun(this)}));const i=this.state.status==="pending",o=!$(this,ko).canStart();try{if(i)r();else{Gt(this,Br,ei).call(this,{type:"pending",variables:n,isPaused:o}),await((l=(a=$(this,cn).config).onMutate)==null?void 0:l.call(a,n,this,s));const N=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,n,s));N!==this.state.context&&Gt(this,Br,ei).call(this,{type:"pending",context:N,variables:n,isPaused:o})}const P=await $(this,ko).start();return await((p=(h=$(this,cn).config).onSuccess)==null?void 0:p.call(h,P,n,this.state.context,this,s)),await((E=(f=this.options).onSuccess)==null?void 0:E.call(f,P,n,this.state.context,s)),await((v=(y=$(this,cn).config).onSettled)==null?void 0:v.call(y,P,null,this.state.variables,this.state.context,this,s)),await((w=(_=this.options).onSettled)==null?void 0:w.call(_,P,null,n,this.state.context,s)),Gt(this,Br,ei).call(this,{type:"success",data:P}),P}catch(P){try{throw await((D=(I=$(this,cn).config).onError)==null?void 0:D.call(I,P,n,this.state.context,this,s)),await((V=(O=this.options).onError)==null?void 0:V.call(O,P,n,this.state.context,s)),await((T=(S=$(this,cn).config).onSettled)==null?void 0:T.call(S,void 0,P,this.state.variables,this.state.context,this,s)),await((k=(A=this.options).onSettled)==null?void 0:k.call(A,void 0,P,n,this.state.context,s)),P}finally{Gt(this,Br,ei).call(this,{type:"error",error:P})}}finally{$(this,cn).runNext(this)}}},Gu=new WeakMap,jr=new WeakMap,cn=new WeakMap,ko=new WeakMap,Br=new WeakSet,ei=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),dn.batch(()=>{$(this,jr).forEach(s=>{s.onMutationUpdate(n)}),$(this,cn).notify({mutation:this,type:"updated",action:n})})},jb);function R4(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var cs,fr,Qu,Bb,C4=(Bb=class extends Np{constructor(e={}){super();Ne(this,cs);Ne(this,fr);Ne(this,Qu);this.config=e,pe(this,cs,new Set),pe(this,fr,new Map),pe(this,Qu,0)}build(e,n,r){const s=new P4({client:e,mutationCache:this,mutationId:++Vd(this,Qu)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){$(this,cs).add(e);const n=rh(e);if(typeof n=="string"){const r=$(this,fr).get(n);r?r.push(e):$(this,fr).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if($(this,cs).delete(e)){const n=rh(e);if(typeof n=="string"){const r=$(this,fr).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&$(this,fr).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=rh(e);if(typeof n=="string"){const r=$(this,fr).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=rh(e);if(typeof n=="string"){const s=(r=$(this,fr).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){dn.batch(()=>{$(this,cs).forEach(e=>{this.notify({type:"removed",mutation:e})}),$(this,cs).clear(),$(this,fr).clear()})}getAll(){return Array.from($(this,cs))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>BT(n,r))}findAll(e={}){return this.getAll().filter(n=>BT(e,n))}notify(e){dn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return dn.batch(()=>Promise.all(e.map(n=>n.continue().catch(dr))))}},cs=new WeakMap,fr=new WeakMap,Qu=new WeakMap,Bb);function rh(t){var e;return(e=t.options.scope)==null?void 0:e.id}var $r,$b,k4=($b=class extends Np{constructor(e={}){super();Ne(this,$r);this.config=e,pe(this,$r,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??W_(s,n);let o=this.get(i);return o||(o=new b4({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){$(this,$r).has(e.queryHash)||($(this,$r).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=$(this,$r).get(e.queryHash);n&&(e.destroy(),n===e&&$(this,$r).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){dn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return $(this,$r).get(e)}getAll(){return[...$(this,$r).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>jT(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>jT(e,r)):n}notify(e){dn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){dn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){dn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},$r=new WeakMap,$b),ft,ci,ui,Ga,Qa,di,Ya,Xa,zb,D4=(zb=class{constructor(t={}){Ne(this,ft);Ne(this,ci);Ne(this,ui);Ne(this,Ga);Ne(this,Qa);Ne(this,di);Ne(this,Ya);Ne(this,Xa);pe(this,ft,t.queryCache||new k4),pe(this,ci,t.mutationCache||new C4),pe(this,ui,t.defaultOptions||{}),pe(this,Ga,new Map),pe(this,Qa,new Map),pe(this,di,0)}mount(){Vd(this,di)._++,$(this,di)===1&&(pe(this,Ya,PP.subscribe(async t=>{t&&(await this.resumePausedMutations(),$(this,ft).onFocus())})),pe(this,Xa,Af.subscribe(async t=>{t&&(await this.resumePausedMutations(),$(this,ft).onOnline())})))}unmount(){var t,e;Vd(this,di)._--,$(this,di)===0&&((t=$(this,Ya))==null||t.call(this),pe(this,Ya,void 0),(e=$(this,Xa))==null||e.call(this),pe(this,Xa,void 0))}isFetching(t){return $(this,ft).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return $(this,ci).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=$(this,ft).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=$(this,ft).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(By(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return $(this,ft).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=$(this,ft).get(r.queryHash),i=s==null?void 0:s.state.data,o=u4(e,i);if(o!==void 0)return $(this,ft).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return dn.batch(()=>$(this,ft).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=$(this,ft).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=$(this,ft);dn.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=$(this,ft);return dn.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=dn.batch(()=>$(this,ft).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(dr).catch(dr)}invalidateQueries(t,e={}){return dn.batch(()=>($(this,ft).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=dn.batch(()=>$(this,ft).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(dr)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(dr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=$(this,ft).build(this,e);return n.isStaleByTime(By(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(dr).catch(dr)}fetchInfiniteQuery(t){return t.behavior=WT(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(dr).catch(dr)}ensureInfiniteQueryData(t){return t.behavior=WT(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Af.isOnline()?$(this,ci).resumePausedMutations():Promise.resolve()}getQueryCache(){return $(this,ft)}getMutationCache(){return $(this,ci)}getDefaultOptions(){return $(this,ui)}setDefaultOptions(t){pe(this,ui,t)}setQueryDefaults(t,e){$(this,Ga).set(bu(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...$(this,Ga).values()],n={};return e.forEach(r=>{Au(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){$(this,Qa).set(bu(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...$(this,Qa).values()],n={};return e.forEach(r=>{Au(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...$(this,ui).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=W_(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===K_&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...$(this,ui).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){$(this,ft).clear(),$(this,ci).clear()}},ft=new WeakMap,ci=new WeakMap,ui=new WeakMap,Ga=new WeakMap,Qa=new WeakMap,di=new WeakMap,Ya=new WeakMap,Xa=new WeakMap,zb),N4=b.createContext(void 0),O4=({client:t,children:e})=>(b.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),x.jsx(N4.Provider,{value:t,children:e}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xu(){return xu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xu.apply(this,arguments)}var pi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(pi||(pi={}));const GT="popstate";function V4(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return xf("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Pu(s)}return DP(e,n,null,t)}function L4(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:a="",hash:l=""}=ta(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),xf("",{pathname:o,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=s.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof i=="string"?i:Pu(i))}function r(s,i){G_(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return DP(e,n,r,t)}function wt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function G_(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function M4(){return Math.random().toString(36).substr(2,8)}function QT(t,e){return{usr:t.state,key:t.key,idx:e}}function xf(t,e,n,r){return n===void 0&&(n=null),xu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ta(e):e,{state:n,key:e&&e.key||r||M4()})}function Pu(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ta(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function DP(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=pi.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(xu({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=pi.Pop;let v=d(),_=v==null?null:v-c;c=v,l&&l({action:a,location:y.location,delta:_})}function p(v,_){a=pi.Push;let w=xf(y.location,v,_);n&&n(w,v),c=d()+1;let I=QT(w,c),D=y.createHref(w);try{o.pushState(I,"",D)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;s.location.assign(D)}i&&l&&l({action:a,location:y.location,delta:1})}function f(v,_){a=pi.Replace;let w=xf(y.location,v,_);n&&n(w,v),c=d();let I=QT(w,c),D=y.createHref(w);o.replaceState(I,"",D),i&&l&&l({action:a,location:y.location,delta:0})}function E(v){let _=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof v=="string"?v:Pu(v);return w=w.replace(/ $/,"%20"),wt(_,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,_)}let y={get action(){return a},get location(){return t(s,o)},listen(v){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(GT,h),l=v,()=>{s.removeEventListener(GT,h),l=null}},createHref(v){return e(s,v)},createURL:E,encodeLocation(v){let _=E(v);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:p,replace:f,go(v){return o.go(v)}};return y}var YT;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(YT||(YT={}));function F4(t,e,n){return n===void 0&&(n="/"),U4(t,e,n)}function U4(t,e,n,r){let s=typeof e=="string"?ta(e):e,i=Q_(s.pathname||"/",n);if(i==null)return null;let o=NP(t);j4(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=J4(i);a=Q4(o[l],c)}return a}function NP(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(wt(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=bi([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(wt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),NP(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:K4(c,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of OP(i.path))s(i,o,l)}),e}function OP(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=OP(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function j4(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:G4(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const B4=/^:[\w-]+$/,$4=3,z4=2,q4=1,H4=10,W4=-2,XT=t=>t==="*";function K4(t,e){let n=t.split("/"),r=n.length;return n.some(XT)&&(r+=W4),e&&(r+=z4),n.filter(s=>!XT(s)).reduce((s,i)=>s+(B4.test(i)?$4:i===""?q4:H4),r)}function G4(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function Q4(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=Y4({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),p=l.route;if(!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:bi([i,h.pathname]),pathnameBase:nU(bi([i,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(i=bi([i,h.pathnameBase]))}return o}function Y4(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=X4(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,d,h)=>{let{paramName:p,isOptional:f}=d;if(p==="*"){let y=a[h]||"";o=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const E=a[h];return f&&!E?c[p]=void 0:c[p]=(E||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function X4(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),G_(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function J4(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return G_(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Q_(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Z4(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?ta(t):t;return{pathname:n?n.startsWith("/")?n:eU(n,e):e,search:rU(r),hash:sU(s)}}function eU(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function dg(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function tU(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Y_(t,e){let n=tU(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function X_(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=ta(t):(s=xu({},t),wt(!s.pathname||!s.pathname.includes("?"),dg("?","pathname","search",s)),wt(!s.pathname||!s.pathname.includes("#"),dg("#","pathname","hash",s)),wt(!s.search||!s.search.includes("#"),dg("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),h-=1;s.pathname=p.join("/")}a=h>=0?e[h]:"/"}let l=Z4(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const bi=t=>t.join("/").replace(/\/\/+/g,"/"),nU=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),rU=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,sU=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function iU(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const VP=["post","put","patch","delete"];new Set(VP);const oU=["get",...VP];new Set(oU);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ru(){return Ru=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ru.apply(this,arguments)}const J_=b.createContext(null),aU=b.createContext(null),Qi=b.createContext(null),Vp=b.createContext(null),Ns=b.createContext({outlet:null,matches:[],isDataRoute:!1}),LP=b.createContext(null);function lU(t,e){let{relative:n}=e===void 0?{}:e;Ol()||wt(!1);let{basename:r,navigator:s}=b.useContext(Qi),{hash:i,pathname:o,search:a}=FP(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:bi([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Ol(){return b.useContext(Vp)!=null}function ns(){return Ol()||wt(!1),b.useContext(Vp).location}function MP(t){b.useContext(Qi).static||b.useLayoutEffect(t)}function sd(){let{isDataRoute:t}=b.useContext(Ns);return t?EU():cU()}function cU(){Ol()||wt(!1);let t=b.useContext(J_),{basename:e,future:n,navigator:r}=b.useContext(Qi),{matches:s}=b.useContext(Ns),{pathname:i}=ns(),o=JSON.stringify(Y_(s,n.v7_relativeSplatPath)),a=b.useRef(!1);return MP(()=>{a.current=!0}),b.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=X_(c,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:bi([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,i,t])}function g7(){let{matches:t}=b.useContext(Ns),e=t[t.length-1];return e?e.params:{}}function FP(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=b.useContext(Qi),{matches:s}=b.useContext(Ns),{pathname:i}=ns(),o=JSON.stringify(Y_(s,r.v7_relativeSplatPath));return b.useMemo(()=>X_(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function uU(t,e){return dU(t,e)}function dU(t,e,n,r){Ol()||wt(!1);let{navigator:s}=b.useContext(Qi),{matches:i}=b.useContext(Ns),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=ns(),d;if(e){var h;let v=typeof e=="string"?ta(e):e;l==="/"||(h=v.pathname)!=null&&h.startsWith(l)||wt(!1),d=v}else d=c;let p=d.pathname||"/",f=p;if(l!=="/"){let v=l.replace(/^\//,"").split("/");f="/"+p.replace(/^\//,"").split("/").slice(v.length).join("/")}let E=F4(t,{pathname:f}),y=gU(E&&E.map(v=>Object.assign({},v,{params:Object.assign({},a,v.params),pathname:bi([l,s.encodeLocation?s.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:bi([l,s.encodeLocation?s.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),i,n,r);return e&&y?b.createElement(Vp.Provider,{value:{location:Ru({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:pi.Pop}},y):y}function hU(){let t=wU(),e=iU(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),n?b.createElement("pre",{style:s},n):null,null)}const fU=b.createElement(hU,null);class pU extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?b.createElement(Ns.Provider,{value:this.props.routeContext},b.createElement(LP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function mU(t){let{routeContext:e,match:n,children:r}=t,s=b.useContext(J_);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),b.createElement(Ns.Provider,{value:e},r)}function gU(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||wt(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:p,errors:f}=n,E=h.route.loader&&p[h.route.id]===void 0&&(!f||f[h.route.id]===void 0);if(h.route.lazy||E){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,h,p)=>{let f,E=!1,y=null,v=null;n&&(f=a&&h.route.id?a[h.route.id]:void 0,y=h.route.errorElement||fU,l&&(c<0&&p===0?(TU("route-fallback"),E=!0,v=null):c===p&&(E=!0,v=h.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,p+1)),w=()=>{let I;return f?I=y:E?I=v:h.route.Component?I=b.createElement(h.route.Component,null):h.route.element?I=h.route.element:I=d,b.createElement(mU,{match:h,routeContext:{outlet:d,matches:_,isDataRoute:n!=null},children:I})};return n&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?b.createElement(pU,{location:n.location,revalidation:n.revalidation,component:y,error:f,children:w(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):w()},null)}var UP=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(UP||{}),jP=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(jP||{});function yU(t){let e=b.useContext(J_);return e||wt(!1),e}function vU(t){let e=b.useContext(aU);return e||wt(!1),e}function _U(t){let e=b.useContext(Ns);return e||wt(!1),e}function BP(t){let e=_U(),n=e.matches[e.matches.length-1];return n.route.id||wt(!1),n.route.id}function wU(){var t;let e=b.useContext(LP),n=vU(),r=BP();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function EU(){let{router:t}=yU(UP.UseNavigateStable),e=BP(jP.UseNavigateStable),n=b.useRef(!1);return MP(()=>{n.current=!0}),b.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Ru({fromRouteId:e},i)))},[t,e])}const JT={};function TU(t,e,n){JT[t]||(JT[t]=!0)}function $P(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function y7(t){let{to:e,replace:n,state:r,relative:s}=t;Ol()||wt(!1);let{future:i,static:o}=b.useContext(Qi),{matches:a}=b.useContext(Ns),{pathname:l}=ns(),c=sd(),d=X_(e,Y_(a,i.v7_relativeSplatPath),l,s==="path"),h=JSON.stringify(d);return b.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:s}),[c,h,s,n,r]),null}function se(t){wt(!1)}function zP(t){let{basename:e="/",children:n=null,location:r,navigationType:s=pi.Pop,navigator:i,static:o=!1,future:a}=t;Ol()&&wt(!1);let l=e.replace(/^\/*/,"/"),c=b.useMemo(()=>({basename:l,navigator:i,static:o,future:Ru({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=ta(r));let{pathname:d="/",search:h="",hash:p="",state:f=null,key:E="default"}=r,y=b.useMemo(()=>{let v=Q_(d,l);return v==null?null:{location:{pathname:v,search:h,hash:p,state:f,key:E},navigationType:s}},[l,d,h,p,f,E,s]);return y==null?null:b.createElement(Qi.Provider,{value:c},b.createElement(Vp.Provider,{children:n,value:y}))}function ZT(t){let{children:e,location:n}=t;return uU(qy(e),n)}new Promise(()=>{});function qy(t,e){e===void 0&&(e=[]);let n=[];return b.Children.forEach(t,(r,s)=>{if(!b.isValidElement(r))return;let i=[...e,s];if(r.type===b.Fragment){n.push.apply(n,qy(r.props.children,i));return}r.type!==se&&wt(!1),!r.props.index||!r.props.children||wt(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=qy(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hy(){return Hy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hy.apply(this,arguments)}function IU(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function SU(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function bU(t,e){return t.button===0&&(!e||e==="_self")&&!SU(t)}function Wy(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function AU(t,e){let n=Wy(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const xU=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],PU="6";try{window.__reactRouterVersion=PU}catch{}const RU="startTransition",Pf=tA[RU];function CU(t){let{basename:e,children:n,future:r,window:s}=t,i=b.useRef();i.current==null&&(i.current=V4({window:s,v5Compat:!0}));let o=i.current,[a,l]=b.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=b.useCallback(h=>{c&&Pf?Pf(()=>l(h)):l(h)},[l,c]);return b.useLayoutEffect(()=>o.listen(d),[o,d]),b.useEffect(()=>$P(r),[r]),b.createElement(zP,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}function kU(t){let{basename:e,children:n,future:r,window:s}=t,i=b.useRef();i.current==null&&(i.current=L4({window:s,v5Compat:!0}));let o=i.current,[a,l]=b.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=b.useCallback(h=>{c&&Pf?Pf(()=>l(h)):l(h)},[l,c]);return b.useLayoutEffect(()=>o.listen(d),[o,d]),b.useEffect(()=>$P(r),[r]),b.createElement(zP,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const DU=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",NU=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,OU=b.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:h}=e,p=IU(e,xU),{basename:f}=b.useContext(Qi),E,y=!1;if(typeof c=="string"&&NU.test(c)&&(E=c,DU))try{let I=new URL(window.location.href),D=c.startsWith("//")?new URL(I.protocol+c):new URL(c),O=Q_(D.pathname,f);D.origin===I.origin&&O!=null?c=O+D.search+D.hash:y=!0}catch{}let v=lU(c,{relative:s}),_=VU(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:s,viewTransition:h});function w(I){r&&r(I),I.defaultPrevented||_(I)}return b.createElement("a",Hy({},p,{href:E||v,onClick:y||i?r:w,ref:n,target:l}))});var eI;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(eI||(eI={}));var tI;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(tI||(tI={}));function VU(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=sd(),c=ns(),d=FP(t,{relative:o});return b.useCallback(h=>{if(bU(h,n)){h.preventDefault();let p=r!==void 0?r:Pu(c)===Pu(d);l(t,{replace:p,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,d,r,s,n,t,i,o,a])}function v7(t){let e=b.useRef(Wy(t)),n=b.useRef(!1),r=ns(),s=b.useMemo(()=>AU(r.search,n.current?null:e.current),[r.search]),i=sd(),o=b.useCallback((a,l)=>{const c=Wy(typeof a=="function"?a(s):a);n.current=!0,i("?"+c,l)},[i,s]);return[s,o]}const qP=b.createContext(void 0),LU=({children:t})=>{const[e,n]=b.useState("medium"),[r,s]=b.useState(!1),[i,o]=b.useState(!1);b.useEffect(()=>{const l=()=>{const c=window.innerWidth<=768;s(c)};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]),b.useEffect(()=>{try{const l=!!window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron")||typeof window<"u"&&window.location&&window.location.protocol==="file:";o(l)}catch{o(!1)}},[]),b.useEffect(()=>{const l=["appFontSize","desktopFontSize","mobileFontSize"];for(const c of l){const d=localStorage.getItem(c);if(d&&["small","medium","large"].includes(d)){n(d);break}}},[]),b.useEffect(()=>{const l=document.documentElement;l.classList.remove("font-size-small","font-size-medium","font-size-large"),l.classList.add(`font-size-${e}`)},[e]);const a=l=>{n(l),localStorage.setItem("appFontSize",l),i&&localStorage.setItem("desktopFontSize",l)};return x.jsx(qP.Provider,{value:{fontSize:e,setFontSize:a,isMobile:r,isDesktopApp:i},children:t})},_7=()=>{const t=b.useContext(qP);if(t===void 0)throw new Error("useFontSize must be used within a FontSizeProvider");return t},MU=Vx("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),HP=b.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?HO:"button";return x.jsx(o,{className:Ds(MU({variant:e,size:n,className:t})),ref:i,...s})});HP.displayName="Button";const Ky=b.forwardRef(({className:t,type:e,...n},r)=>{const s={...n};return Object.prototype.hasOwnProperty.call(s,"value")&&s.value===void 0&&(s.value=""),x.jsx("input",{type:e,className:Ds("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...s})});Ky.displayName="Input";const FU=()=>{};var nI={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WP=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},UU=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Z_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=i>>2,h=(i&3)<<4|a>>4;let p=(a&15)<<2|c>>6,f=c&63;l||(f=64,o||(p=64)),r.push(n[d],n[h],n[p],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(WP(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):UU(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new jU;const p=i<<2|a>>4;if(r.push(p),c!==64){const f=a<<4&240|c>>2;if(r.push(f),h!==64){const E=c<<6&192|h;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class jU extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const BU=function(t){const e=WP(t);return Z_.encodeByteArray(e,!0)},Rf=function(t){return BU(t).replace(/\./g,"")},KP=function(t){try{return Z_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $U=()=>GP().__FIREBASE_DEFAULTS__,zU=()=>{if(typeof process>"u"||typeof nI>"u")return;const t=nI.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},qU=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&KP(t[1]);return e&&JSON.parse(e)},Lp=()=>{try{return FU()||$U()||zU()||qU()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},HU=t=>{var e,n;return(n=(e=Lp())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},QP=t=>{const e=HU(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},YP=()=>{var t;return(t=Lp())==null?void 0:t.config},WU=t=>{var e;return(e=Lp())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Os(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ew(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KU(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Rf(JSON.stringify(n)),Rf(JSON.stringify(o)),""].join(".")}const Kc={};function GU(){const t={prod:[],emulator:[]};for(const e of Object.keys(Kc))Kc[e]?t.emulator.push(e):t.prod.push(e);return t}function QU(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let rI=!1;function XP(t,e){if(typeof window>"u"||typeof document>"u"||!Os(window.location.host)||Kc[t]===e||Kc[t]||rI)return;Kc[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",i=GU().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function l(p,f){p.setAttribute("width","24"),p.setAttribute("id",f),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function c(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{rI=!0,o()},p}function d(p,f){p.setAttribute("id",f),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function h(){const p=QU(r),f=n("text"),E=document.getElementById(f)||document.createElement("span"),y=n("learnmore"),v=document.getElementById(y)||document.createElement("a"),_=n("preprendIcon"),w=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const I=p.element;a(I),d(v,y);const D=c();l(w,_),I.append(w,E,v,D),document.body.appendChild(I)}i?(E.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",f)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function YU(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wt())}function JP(){var e;const t=(e=Lp())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function XU(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function JU(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function ZU(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function e6(){const t=Wt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function ZP(){return!JP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function eR(){return!JP()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function tw(){try{return typeof indexedDB=="object"}catch{return!1}}function t6(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n6="FirebaseError";class Pr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=n6,Object.setPrototypeOf(this,Pr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vl.prototype.create)}}class Vl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?r6(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Pr(s,a,r)}}function r6(t,e){return t.replace(s6,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const s6=/\{\$([^}]+)}/g;function al(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(sI(i)&&sI(o)){if(!al(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function sI(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tR(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Rc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Cc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function i6(t,e){const n=new o6(t,e);return n.subscribe.bind(n)}class o6{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");a6(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=hg),s.error===void 0&&(s.error=hg),s.complete===void 0&&(s.complete=hg);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function a6(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function hg(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w7=4*60*60*1e3;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(t){return t&&t._delegate?t._delegate:t}class Ar{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l6{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Gy;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(u6(e))try{this.getOrInitializeService({instanceIdentifier:uo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=uo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=uo){return this.instances.has(e)}getOptions(e=uo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:c6(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=uo){return this.component?this.component.multipleInstances?e:uo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function c6(t){return t===uo?void 0:t}function u6(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d6{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new l6(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ce;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ce||(Ce={}));const h6={debug:Ce.DEBUG,verbose:Ce.VERBOSE,info:Ce.INFO,warn:Ce.WARN,error:Ce.ERROR,silent:Ce.SILENT},f6=Ce.INFO,p6={[Ce.DEBUG]:"log",[Ce.VERBOSE]:"log",[Ce.INFO]:"info",[Ce.WARN]:"warn",[Ce.ERROR]:"error"},m6=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=p6[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Mp{constructor(e){this.name=e,this._logLevel=f6,this._logHandler=m6,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?h6[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ce.DEBUG,...e),this._logHandler(this,Ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ce.VERBOSE,...e),this._logHandler(this,Ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ce.INFO,...e),this._logHandler(this,Ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ce.WARN,...e),this._logHandler(this,Ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ce.ERROR,...e),this._logHandler(this,Ce.ERROR,...e)}}const g6=(t,e)=>e.some(n=>t instanceof n);let iI,oI;function y6(){return iI||(iI=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function v6(){return oI||(oI=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const nR=new WeakMap,Qy=new WeakMap,rR=new WeakMap,fg=new WeakMap,nw=new WeakMap;function _6(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Ai(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&nR.set(n,t)}).catch(()=>{}),nw.set(e,t),e}function w6(t){if(Qy.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Qy.set(t,e)}let Yy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Qy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||rR.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ai(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function E6(t){Yy=t(Yy)}function T6(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(pg(this),e,...n);return rR.set(r,e.sort?e.sort():[e]),Ai(r)}:v6().includes(t)?function(...e){return t.apply(pg(this),e),Ai(nR.get(this))}:function(...e){return Ai(t.apply(pg(this),e))}}function I6(t){return typeof t=="function"?T6(t):(t instanceof IDBTransaction&&w6(t),g6(t,y6())?new Proxy(t,Yy):t)}function Ai(t){if(t instanceof IDBRequest)return _6(t);if(fg.has(t))return fg.get(t);const e=I6(t);return e!==t&&(fg.set(t,e),nw.set(e,t)),e}const pg=t=>nw.get(t);function S6(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Ai(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ai(o.result),l.oldVersion,l.newVersion,Ai(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const b6=["get","getKey","getAll","getAllKeys","count"],A6=["put","add","delete","clear"],mg=new Map;function aI(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(mg.get(e))return mg.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=A6.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||b6.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return mg.set(e,i),i}E6(t=>({...t,get:(e,n,r)=>aI(e,n)||t.get(e,n,r),has:(e,n)=>!!aI(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x6{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(P6(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function P6(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Xy="@firebase/app",lI="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps=new Mp("@firebase/app"),R6="@firebase/app-compat",C6="@firebase/analytics-compat",k6="@firebase/analytics",D6="@firebase/app-check-compat",N6="@firebase/app-check",O6="@firebase/auth",V6="@firebase/auth-compat",L6="@firebase/database",M6="@firebase/data-connect",F6="@firebase/database-compat",U6="@firebase/functions",j6="@firebase/functions-compat",B6="@firebase/installations",$6="@firebase/installations-compat",z6="@firebase/messaging",q6="@firebase/messaging-compat",H6="@firebase/performance",W6="@firebase/performance-compat",K6="@firebase/remote-config",G6="@firebase/remote-config-compat",Q6="@firebase/storage",Y6="@firebase/storage-compat",X6="@firebase/firestore",J6="@firebase/ai",Z6="@firebase/firestore-compat",e3="firebase",t3="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jy="[DEFAULT]",n3={[Xy]:"fire-core",[R6]:"fire-core-compat",[k6]:"fire-analytics",[C6]:"fire-analytics-compat",[N6]:"fire-app-check",[D6]:"fire-app-check-compat",[O6]:"fire-auth",[V6]:"fire-auth-compat",[L6]:"fire-rtdb",[M6]:"fire-data-connect",[F6]:"fire-rtdb-compat",[U6]:"fire-fn",[j6]:"fire-fn-compat",[B6]:"fire-iid",[$6]:"fire-iid-compat",[z6]:"fire-fcm",[q6]:"fire-fcm-compat",[H6]:"fire-perf",[W6]:"fire-perf-compat",[K6]:"fire-rc",[G6]:"fire-rc-compat",[Q6]:"fire-gcs",[Y6]:"fire-gcs-compat",[X6]:"fire-fst",[Z6]:"fire-fst-compat",[J6]:"fire-vertex","fire-js":"fire-js",[e3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cf=new Map,r3=new Map,Zy=new Map;function cI(t,e){try{t.container.addComponent(e)}catch(n){Ps.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Zr(t){const e=t.name;if(Zy.has(e))return Ps.debug(`There were multiple attempts to register component ${e}.`),!1;Zy.set(e,t);for(const n of Cf.values())cI(n,t);for(const n of r3.values())cI(n,t);return!0}function Fp(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ln(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xi=new Vl("app","Firebase",s3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i3{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ar("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const id=t3;function sR(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Jy,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw xi.create("bad-app-name",{appName:String(s)});if(n||(n=YP()),!n)throw xi.create("no-options");const i=Cf.get(s);if(i){if(al(n,i.options)&&al(r,i.config))return i;throw xi.create("duplicate-app",{appName:s})}const o=new d6(s);for(const l of Zy.values())o.addComponent(l);const a=new i3(n,r,o);return Cf.set(s,a),a}function iR(t=Jy){const e=Cf.get(t);if(!e&&t===Jy&&YP())return sR();if(!e)throw xi.create("no-app",{appName:t});return e}function zn(t,e,n){let r=n3[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ps.warn(o.join(" "));return}Zr(new Ar(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o3="firebase-heartbeat-database",a3=1,Cu="firebase-heartbeat-store";let gg=null;function oR(){return gg||(gg=S6(o3,a3,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Cu)}catch(n){console.warn(n)}}}}).catch(t=>{throw xi.create("idb-open",{originalErrorMessage:t.message})})),gg}async function l3(t){try{const n=(await oR()).transaction(Cu),r=await n.objectStore(Cu).get(aR(t));return await n.done,r}catch(e){if(e instanceof Pr)Ps.warn(e.message);else{const n=xi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ps.warn(n.message)}}}async function uI(t,e){try{const r=(await oR()).transaction(Cu,"readwrite");await r.objectStore(Cu).put(e,aR(t)),await r.done}catch(n){if(n instanceof Pr)Ps.warn(n.message);else{const r=xi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ps.warn(r.message)}}}function aR(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c3=1024,u3=30;class d3{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new f3(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=dI();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>u3){const o=p3(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ps.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=dI(),{heartbeatsToSend:r,unsentEntries:s}=h3(this._heartbeatsCache.heartbeats),i=Rf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Ps.warn(n),""}}}function dI(){return new Date().toISOString().substring(0,10)}function h3(t,e=c3){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),hI(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),hI(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class f3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tw()?t6().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await l3(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return uI(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return uI(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function hI(t){return Rf(JSON.stringify({version:2,heartbeats:t})).length}function p3(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m3(t){Zr(new Ar("platform-logger",e=>new x6(e),"PRIVATE")),Zr(new Ar("heartbeat",e=>new d3(e),"PRIVATE")),zn(Xy,lI,t),zn(Xy,lI,"esm2020"),zn("fire-js","")}m3("");function lR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const g3=lR,cR=new Vl("auth","Firebase",lR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kf=new Mp("@firebase/auth");function y3(t,...e){kf.logLevel<=Ce.WARN&&kf.warn(`Auth (${id}): ${t}`,...e)}function Vh(t,...e){kf.logLevel<=Ce.ERROR&&kf.error(`Auth (${id}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qo(t,...e){throw sw(t,...e)}function rw(t,...e){return sw(t,...e)}function uR(t,e,n){const r={...g3(),[e]:n};return new Vl("auth","Firebase",r).create(e,{appName:t.name})}function Pi(t){return uR(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function sw(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return cR.create(t,...e)}function ke(t,e,...n){if(!t)throw sw(e,...n)}function fs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Vh(e),new Error(e)}function Df(t,e){t||fs(e)}function v3(){return fI()==="http:"||fI()==="https:"}function fI(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(v3()||JU()||"connection"in navigator)?navigator.onLine:!0}function w3(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e,n){this.shortDelay=e,this.longDelay=n,Df(n>e,"Short delay should be less than long delay!"),this.isMobile=YU()||ZU()}get(){return _3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E3(t,e){Df(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;fs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;fs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;fs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I3=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],S3=new od(3e4,6e4);function Yi(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Vs(t,e,n,r,s={}){return hR(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=tR({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:l,...i};return XU()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&Os(t.emulatorConfig.host)&&(c.credentials="include"),dR.fetch()(await fR(t,t.config.apiHost,n,a),c)})}async function hR(t,e,n){t._canInitEmulator=!1;const r={...T3,...e};try{const s=new A3(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw sh(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw sh(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw sh(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw sh(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw uR(t,d,c);qo(t,d)}}catch(s){if(s instanceof Pr)throw s;qo(t,"network-request-failed",{message:String(s)})}}async function Up(t,e,n,r,s={}){const i=await Vs(t,e,n,r,s);return"mfaPendingCredential"in i&&qo(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function fR(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?E3(t.config,s):`${t.config.apiScheme}://${s}`;return I3.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function b3(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class A3{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(rw(this.auth,"network-request-failed")),S3.get())})}}function sh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=rw(t,e,r);return s.customData._tokenResponse=n,s}function pI(t){return t!==void 0&&t.enterprise!==void 0}class x3{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return b3(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function P3(t,e){return Vs(t,"GET","/v2/recaptchaConfig",Yi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R3(t,e){return Vs(t,"POST","/v1/accounts:delete",e)}async function Nf(t,e){return Vs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function C3(t,e=!1){const n=He(t),r=await n.getIdToken(e),s=iw(r);ke(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Gc(yg(s.auth_time)),issuedAtTime:Gc(yg(s.iat)),expirationTime:Gc(yg(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function yg(t){return Number(t)*1e3}function iw(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Vh("JWT malformed, contained fewer than 3 sections"),null;try{const s=KP(n);return s?JSON.parse(s):(Vh("Failed to decode base64 JWT payload"),null)}catch(s){return Vh("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function mI(t){const e=iw(t);return ke(e,"internal-error"),ke(typeof e.exp<"u","internal-error"),ke(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ku(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Pr&&k3(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function k3({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gc(this.lastLoginAt),this.creationTime=Gc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Of(t){var h;const e=t.auth,n=await t.getIdToken(),r=await ku(t,Nf(e,{idToken:n}));ke(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(h=s.providerUserInfo)!=null&&h.length?pR(s.providerUserInfo):[],o=O3(t.providerData,i),a=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),c=a?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new ev(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,d)}async function N3(t){const e=He(t);await Of(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function O3(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function pR(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V3(t,e){const n=await hR(t,{},async()=>{const r=tR({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await fR(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&Os(t.emulatorConfig.host)&&(l.credentials="include"),dR.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function L3(t,e){return Vs(t,"POST","/v2/accounts:revokeToken",Yi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ke(e.idToken,"internal-error"),ke(typeof e.idToken<"u","internal-error"),ke(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):mI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ke(e.length!==0,"internal-error");const n=mI(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ke(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await V3(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Ba;return r&&(ke(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ke(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ke(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ba,this.toJSON())}_performRefresh(){return fs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ys(t,e){ke(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class yr{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new D3(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ev(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await ku(this,this.stsTokenManager.getToken(this.auth,e));return ke(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return C3(this,e)}reload(){return N3(this)}_assign(e){this!==e&&(ke(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new yr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Of(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ln(this.auth.app))return Promise.reject(Pi(this.auth));const e=await this.getIdToken();return await ku(this,R3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,c=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:h,emailVerified:p,isAnonymous:f,providerData:E,stsTokenManager:y}=n;ke(h&&y,e,"internal-error");const v=Ba.fromJSON(this.name,y);ke(typeof h=="string",e,"internal-error"),Ys(r,e.name),Ys(s,e.name),ke(typeof p=="boolean",e,"internal-error"),ke(typeof f=="boolean",e,"internal-error"),Ys(i,e.name),Ys(o,e.name),Ys(a,e.name),Ys(l,e.name),Ys(c,e.name),Ys(d,e.name);const _=new yr({uid:h,auth:e,email:s,emailVerified:p,displayName:r,isAnonymous:f,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:v,createdAt:c,lastLoginAt:d});return E&&Array.isArray(E)&&(_.providerData=E.map(w=>({...w}))),l&&(_._redirectEventId=l),_}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ba;s.updateFromServerResponse(n);const i=new yr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Of(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ke(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?pR(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new Ba;a.updateFromIdToken(r);const l=new yr({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new ev(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI=new Map;function Io(t){Df(t instanceof Function,"Expected a class definition");let e=gI.get(t);return e?(Df(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,gI.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}mR.type="NONE";const tv=mR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(t,e,n){return`firebase:${t}:${e}:${n}`}class $a{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=vg(this.userKey,s.apiKey,i),this.fullPersistenceKey=vg("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Nf(this.auth,{idToken:e}).catch(()=>{});return n?yr._fromGetAccountInfoResponse(this.auth,n,e):null}return yr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new $a(Io(tv),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Io(tv);const o=vg(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){let h;if(typeof d=="string"){const p=await Nf(e,{idToken:d}).catch(()=>{});if(!p)break;h=await yr._fromGetAccountInfoResponse(e,p,d)}else h=yr._fromJSON(e,d);c!==i&&(a=h),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new $a(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new $a(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yI(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(gR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(M3(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(vR(e))return"Blackberry";if(_R(e))return"Webos";if(F3(e))return"Safari";if((e.includes("chrome/")||U3(e))&&!e.includes("edge/"))return"Chrome";if(yR(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function M3(t=Wt()){return/firefox\//i.test(t)}function F3(t=Wt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function U3(t=Wt()){return/crios\//i.test(t)}function gR(t=Wt()){return/iemobile/i.test(t)}function yR(t=Wt()){return/android/i.test(t)}function vR(t=Wt()){return/blackberry/i.test(t)}function _R(t=Wt()){return/webos/i.test(t)}function j3(t=Wt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function B3(){return e6()&&document.documentMode===10}function $3(t=Wt()){return j3(t)||yR(t)||_R(t)||vR(t)||/windows phone/i.test(t)||gR(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wR(t,e=[]){let n;switch(t){case"Browser":n=yI(Wt());break;case"Worker":n=`${yI(Wt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${id}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q3(t,e={}){return Vs(t,"GET","/v2/passwordPolicy",Yi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H3=6;class W3{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??H3,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vI(this),this.idTokenSubscription=new vI(this),this.beforeStateQueue=new z3(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Io(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await $a.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Nf(this,{idToken:e}),r=await yr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Ln(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ke(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Of(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=w3()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ln(this.app))return Promise.reject(Pi(this));const n=e?He(e):null;return n&&ke(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ke(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ln(this.app)?Promise.reject(Pi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ln(this.app)?Promise.reject(Pi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Io(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await q3(this),n=new W3(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Vl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await L3(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Io(e)||this._popupRedirectResolver;ke(n,this,"argument-error"),this.redirectPersistenceManager=await $a.create(this,[Io(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ke(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=wR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Ln(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&y3(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Ll(t){return He(t)}class vI{constructor(e){this.auth=e,this.observer=null,this.addObserver=i6(n=>this.observer=n)}get next(){return ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ow={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function G3(t){ow=t}function Q3(t){return ow.loadJS(t)}function Y3(){return ow.recaptchaEnterpriseScript}class X3{constructor(){this.enterprise=new J3}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class J3{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Z3="recaptcha-enterprise",ER="NO_RECAPTCHA";class ej{constructor(e){this.type=Z3,this.auth=Ll(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{P3(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new x3(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;pI(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(ER)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new X3().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&pI(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=Y3();l.length!==0&&(l+=a),Q3(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function _I(t,e,n,r=!1,s=!1){const i=new ej(t);let o;if(s)o=ER;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Vf(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await _I(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await _I(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tj(t,e){const n=Fp(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(al(i,e??{}))return s;qo(s,"already-initialized")}return n.initialize({options:e})}function nj(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Io);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return fs("not implemented")}_getIdTokenResponse(e){return fs("not implemented")}_linkToIdToken(e,n){return fs("not implemented")}_getReauthenticationResolver(e){return fs("not implemented")}}async function sj(t,e){return Vs(t,"POST","/v1/accounts:update",e)}async function ij(t,e){return Vs(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oj(t,e){return Up(t,"POST","/v1/accounts:signInWithPassword",Yi(t,e))}async function aj(t,e){return Vs(t,"POST","/v1/accounts:sendOobCode",Yi(t,e))}async function lj(t,e){return aj(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cj(t,e){return Up(t,"POST","/v1/accounts:signInWithEmailLink",Yi(t,e))}async function uj(t,e){return Up(t,"POST","/v1/accounts:signInWithEmailLink",Yi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du extends rj{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Du(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Du(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vf(e,n,"signInWithPassword",oj);case"emailLink":return cj(e,{email:this._email,oobCode:this._password});default:qo(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vf(e,r,"signUpPassword",ij);case"emailLink":return uj(e,{idToken:n,email:this._email,oobCode:this._password});default:qo(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dj(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function hj(t){const e=Rc(Cc(t)).link,n=e?Rc(Cc(e)).deep_link_id:null,r=Rc(Cc(t)).deep_link_id;return(r?Rc(Cc(r)).link:null)||r||n||e||t}class aw{constructor(e){const n=Rc(Cc(e)),r=n.apiKey??null,s=n.oobCode??null,i=dj(n.mode??null);ke(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=hj(e);try{return new aw(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(){this.providerId=Ml.PROVIDER_ID}static credential(e,n){return Du._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=aw.parseLink(n);return ke(r,"argument-error"),Du._fromEmailAndCode(e,r.code,r.tenantId)}}Ml.PROVIDER_ID="password";Ml.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ml.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fj(t,e){return Up(t,"POST","/v1/accounts:signUp",Yi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await yr._fromIdTokenResponse(e,r,s),o=wI(r);return new ll({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=wI(r);return new ll({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function wI(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf extends Pr{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Lf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Lf(e,n,r,s)}}function TR(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Lf._fromErrorAndOperation(t,i,e,r):i})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pj(t,e,n=!1){const{auth:r}=t;if(Ln(r.app))return Promise.reject(Pi(r));const s="reauthenticate";try{const i=await ku(t,TR(r,s,e,t),n);ke(i.idToken,r,"internal-error");const o=iw(i.idToken);ke(o,r,"internal-error");const{sub:a}=o;return ke(t.uid===a,r,"user-mismatch"),ll._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&qo(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mj(t,e,n=!1){if(Ln(t.app))return Promise.reject(Pi(t));const r="signIn",s=await TR(t,r,e),i=await ll._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function gj(t,e){return mj(Ll(t),e)}async function E7(t,e){return pj(He(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IR(t){const e=Ll(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function yj(t,e,n){const r=Ll(t);await Vf(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",lj)}async function EI(t,e,n){if(Ln(t.app))return Promise.reject(Pi(t));const r=Ll(t),o=await Vf(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",fj).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&IR(t),l}),a=await ll._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function vj(t,e,n){return Ln(t.app)?Promise.reject(Pi(t)):gj(He(t),Ml.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&IR(t),r})}function T7(t,e){return _j(He(t),null,e)}async function _j(t,e,n){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(i.password=n);const o=await ku(t,sj(r,i));await t._updateTokensIfNecessary(o,!0)}function wj(t,e,n,r){return He(t).onAuthStateChanged(e,n,r)}function TI(t){return He(t).signOut()}const II="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(II,"1"),this.storage.removeItem(II),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ej=1e3,Tj=10;class bR extends SR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=$3(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);B3()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Tj):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Ej)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}bR.type="LOCAL";const Ij=bR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj extends SR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Sj.type="SESSION";new od(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new od(2e3,1e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new od(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new od(5e3,15e3);var SI="@firebase/auth",bI="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aj(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function xj(t){Zr(new Ar("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ke(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:wR(t)},c=new K3(r,s,i,l);return nj(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Zr(new Ar("auth-internal",e=>{const n=Ll(e.getProvider("auth").getImmediate());return(r=>new bj(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),zn(SI,bI,Aj(t)),zn(SI,bI,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pj=5*60;WU("authIdTokenMaxAge");function Rj(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}G3({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=rw("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",Rj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});xj("Browser");var Cj="firebase",kj="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zn(Cj,kj,"app");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dj=new Map,Nj={activated:!1,tokenObservers:[]},Oj={initialized:!1,enabled:!1};function xr(t){return Dj.get(t)||{...Nj}}function AR(){return Oj}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vj="https://content-firebaseappcheck.googleapis.com/v1";const Lj="exchangeDebugToken",AI={RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},I7=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{constructor(e,n,r,s,i){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=s,s>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new Gy,this.pending.promise.catch(n=>{}),await Fj(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new Gy,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function Fj(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uj={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},mi=new Vl("appCheck","AppCheck",Uj);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xR(t){if(!xr(t).activated)throw mi.create("use-before-activation",{appName:t.name})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PR({url:t,body:e},n){const r={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){const h=await s.getHeartbeatsHeader();h&&(r["X-Firebase-Client"]=h)}const i={method:"POST",body:JSON.stringify(e),headers:r};let o;try{o=await fetch(t,i)}catch(h){throw mi.create("fetch-network-error",{originalErrorMessage:h==null?void 0:h.message})}if(o.status!==200)throw mi.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(h){throw mi.create("fetch-parse-error",{originalErrorMessage:h==null?void 0:h.message})}const l=a.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw mi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const c=Number(l[1])*1e3,d=Date.now();return{token:a.token,expireTimeMillis:d+c,issuedAtTimeMillis:d}}function RR(t,e){const{projectId:n,appId:r,apiKey:s}=t.options;return{url:`${Vj}/projects/${n}/apps/${r}:${Lj}?key=${s}`,body:{debug_token:e}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jj="firebase-app-check-database",Bj=1,nv="firebase-app-check-store";let ih=null;function $j(){return ih||(ih=new Promise((t,e)=>{try{const n=indexedDB.open(jj,Bj);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var s;e(mi.create("storage-open",{originalErrorMessage:(s=r.target.error)==null?void 0:s.message}))},n.onupgradeneeded=r=>{const s=r.target.result;switch(r.oldVersion){case 0:s.createObjectStore(nv,{keyPath:"compositeKey"})}}}catch(n){e(mi.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),ih)}function zj(t,e){return qj(Hj(t),e)}async function qj(t,e){const r=(await $j()).transaction(nv,"readwrite"),i=r.objectStore(nv).put({compositeKey:t,value:e});return new Promise((o,a)=>{i.onsuccess=l=>{o()},r.onerror=l=>{var c;a(mi.create("storage-set",{originalErrorMessage:(c=l.target.error)==null?void 0:c.message}))}})}function Hj(t){return`${t.options.appId}-${t.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kc=new Mp("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _g(t,e){return tw()?zj(t,e).catch(n=>{kc.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CR(){return AR().enabled}async function kR(){const t=AR();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wj={error:"UNKNOWN_ERROR"};function Kj(t){return Z_.encodeString(JSON.stringify(t),!1)}async function rv(t,e=!1,n=!1){const r=t.app;xR(r);const s=xr(r);let i=s.token,o;if(i&&!Dc(i)&&(s.token=void 0,i=void 0),!i){const c=await s.cachedTokenPromise;c&&(Dc(c)?i=c:await _g(r,void 0))}if(!e&&i&&Dc(i))return{token:i.token};let a=!1;if(CR())try{s.exchangeTokenPromise||(s.exchangeTokenPromise=PR(RR(r,await kR()),t.heartbeatServiceProvider).finally(()=>{s.exchangeTokenPromise=void 0}),a=!0);const c=await s.exchangeTokenPromise;return await _g(r,c),s.token=c,{token:c.token}}catch(c){return c.code==="appCheck/throttled"||c.code==="appCheck/initial-throttle"?kc.warn(c.message):n&&kc.error(c),wg(c)}try{s.exchangeTokenPromise||(s.exchangeTokenPromise=s.provider.getToken().finally(()=>{s.exchangeTokenPromise=void 0}),a=!0),i=await xr(r).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"||c.code==="appCheck/initial-throttle"?kc.warn(c.message):n&&kc.error(c),o=c}let l;return i?o?Dc(i)?l={token:i.token,internalError:o}:l=wg(o):(l={token:i.token},s.token=i,await _g(r,i)):l=wg(o),a&&Xj(r,l),l}async function Gj(t){const e=t.app;xR(e);const{provider:n}=xr(e);if(CR()){const r=await kR(),{token:s}=await PR(RR(e,r),t.heartbeatServiceProvider);return{token:s}}else{const{token:r}=await n.getToken();return{token:r}}}function Qj(t,e,n,r){const{app:s}=t,i=xr(s),o={next:n,error:r,type:e};if(i.tokenObservers=[...i.tokenObservers,o],i.token&&Dc(i.token)){const a=i.token;Promise.resolve().then(()=>{n({token:a.token}),xI(t)}).catch(()=>{})}i.cachedTokenPromise.then(()=>xI(t))}function DR(t,e){const n=xr(t),r=n.tokenObservers.filter(s=>s.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function xI(t){const{app:e}=t,n=xr(e);let r=n.tokenRefresher;r||(r=Yj(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function Yj(t){const{app:e}=t;return new Mj(async()=>{const n=xr(e);let r;if(n.token?r=await rv(t,!0):r=await rv(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=xr(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const s=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,s),Math.max(0,r-Date.now())}else return 0},AI.RETRIAL_MIN_WAIT,AI.RETRIAL_MAX_WAIT)}function Xj(t,e){const n=xr(t).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Dc(t){return t.expireTimeMillis-Date.now()>0}function wg(t){return{token:Kj(Wj),error:t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jj{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=xr(this.app);for(const n of e)DR(this.app,n.next);return Promise.resolve()}}function Zj(t,e){return new Jj(t,e)}function e5(t){return{getToken:e=>rv(t,e),getLimitedUseToken:()=>Gj(t),addTokenListener:e=>Qj(t,"INTERNAL",e),removeTokenListener:e=>DR(t.app,e)}}const t5="@firebase/app-check",n5="0.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r5="app-check",PI="app-check-internal";function s5(){Zr(new Ar(r5,t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return Zj(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(PI).initialize()})),Zr(new Ar(PI,t=>{const e=t.getProvider("app-check").getImmediate();return e5(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),zn(t5,n5)}s5();var RI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ri,NR;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,T){function A(){}A.prototype=T.prototype,S.F=T.prototype,S.prototype=new A,S.prototype.constructor=S,S.D=function(k,P,N){for(var C=Array(arguments.length-2),q=2;q<arguments.length;q++)C[q-2]=arguments[q];return T.prototype[P].apply(k,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,T,A){A||(A=0);const k=Array(16);if(typeof T=="string")for(var P=0;P<16;++P)k[P]=T.charCodeAt(A++)|T.charCodeAt(A++)<<8|T.charCodeAt(A++)<<16|T.charCodeAt(A++)<<24;else for(P=0;P<16;++P)k[P]=T[A++]|T[A++]<<8|T[A++]<<16|T[A++]<<24;T=S.g[0],A=S.g[1],P=S.g[2];let N=S.g[3],C;C=T+(N^A&(P^N))+k[0]+3614090360&4294967295,T=A+(C<<7&4294967295|C>>>25),C=N+(P^T&(A^P))+k[1]+3905402710&4294967295,N=T+(C<<12&4294967295|C>>>20),C=P+(A^N&(T^A))+k[2]+606105819&4294967295,P=N+(C<<17&4294967295|C>>>15),C=A+(T^P&(N^T))+k[3]+3250441966&4294967295,A=P+(C<<22&4294967295|C>>>10),C=T+(N^A&(P^N))+k[4]+4118548399&4294967295,T=A+(C<<7&4294967295|C>>>25),C=N+(P^T&(A^P))+k[5]+1200080426&4294967295,N=T+(C<<12&4294967295|C>>>20),C=P+(A^N&(T^A))+k[6]+2821735955&4294967295,P=N+(C<<17&4294967295|C>>>15),C=A+(T^P&(N^T))+k[7]+4249261313&4294967295,A=P+(C<<22&4294967295|C>>>10),C=T+(N^A&(P^N))+k[8]+1770035416&4294967295,T=A+(C<<7&4294967295|C>>>25),C=N+(P^T&(A^P))+k[9]+2336552879&4294967295,N=T+(C<<12&4294967295|C>>>20),C=P+(A^N&(T^A))+k[10]+4294925233&4294967295,P=N+(C<<17&4294967295|C>>>15),C=A+(T^P&(N^T))+k[11]+2304563134&4294967295,A=P+(C<<22&4294967295|C>>>10),C=T+(N^A&(P^N))+k[12]+1804603682&4294967295,T=A+(C<<7&4294967295|C>>>25),C=N+(P^T&(A^P))+k[13]+4254626195&4294967295,N=T+(C<<12&4294967295|C>>>20),C=P+(A^N&(T^A))+k[14]+2792965006&4294967295,P=N+(C<<17&4294967295|C>>>15),C=A+(T^P&(N^T))+k[15]+1236535329&4294967295,A=P+(C<<22&4294967295|C>>>10),C=T+(P^N&(A^P))+k[1]+4129170786&4294967295,T=A+(C<<5&4294967295|C>>>27),C=N+(A^P&(T^A))+k[6]+3225465664&4294967295,N=T+(C<<9&4294967295|C>>>23),C=P+(T^A&(N^T))+k[11]+643717713&4294967295,P=N+(C<<14&4294967295|C>>>18),C=A+(N^T&(P^N))+k[0]+3921069994&4294967295,A=P+(C<<20&4294967295|C>>>12),C=T+(P^N&(A^P))+k[5]+3593408605&4294967295,T=A+(C<<5&4294967295|C>>>27),C=N+(A^P&(T^A))+k[10]+38016083&4294967295,N=T+(C<<9&4294967295|C>>>23),C=P+(T^A&(N^T))+k[15]+3634488961&4294967295,P=N+(C<<14&4294967295|C>>>18),C=A+(N^T&(P^N))+k[4]+3889429448&4294967295,A=P+(C<<20&4294967295|C>>>12),C=T+(P^N&(A^P))+k[9]+568446438&4294967295,T=A+(C<<5&4294967295|C>>>27),C=N+(A^P&(T^A))+k[14]+3275163606&4294967295,N=T+(C<<9&4294967295|C>>>23),C=P+(T^A&(N^T))+k[3]+4107603335&4294967295,P=N+(C<<14&4294967295|C>>>18),C=A+(N^T&(P^N))+k[8]+1163531501&4294967295,A=P+(C<<20&4294967295|C>>>12),C=T+(P^N&(A^P))+k[13]+2850285829&4294967295,T=A+(C<<5&4294967295|C>>>27),C=N+(A^P&(T^A))+k[2]+4243563512&4294967295,N=T+(C<<9&4294967295|C>>>23),C=P+(T^A&(N^T))+k[7]+1735328473&4294967295,P=N+(C<<14&4294967295|C>>>18),C=A+(N^T&(P^N))+k[12]+2368359562&4294967295,A=P+(C<<20&4294967295|C>>>12),C=T+(A^P^N)+k[5]+4294588738&4294967295,T=A+(C<<4&4294967295|C>>>28),C=N+(T^A^P)+k[8]+2272392833&4294967295,N=T+(C<<11&4294967295|C>>>21),C=P+(N^T^A)+k[11]+1839030562&4294967295,P=N+(C<<16&4294967295|C>>>16),C=A+(P^N^T)+k[14]+4259657740&4294967295,A=P+(C<<23&4294967295|C>>>9),C=T+(A^P^N)+k[1]+2763975236&4294967295,T=A+(C<<4&4294967295|C>>>28),C=N+(T^A^P)+k[4]+1272893353&4294967295,N=T+(C<<11&4294967295|C>>>21),C=P+(N^T^A)+k[7]+4139469664&4294967295,P=N+(C<<16&4294967295|C>>>16),C=A+(P^N^T)+k[10]+3200236656&4294967295,A=P+(C<<23&4294967295|C>>>9),C=T+(A^P^N)+k[13]+681279174&4294967295,T=A+(C<<4&4294967295|C>>>28),C=N+(T^A^P)+k[0]+3936430074&4294967295,N=T+(C<<11&4294967295|C>>>21),C=P+(N^T^A)+k[3]+3572445317&4294967295,P=N+(C<<16&4294967295|C>>>16),C=A+(P^N^T)+k[6]+76029189&4294967295,A=P+(C<<23&4294967295|C>>>9),C=T+(A^P^N)+k[9]+3654602809&4294967295,T=A+(C<<4&4294967295|C>>>28),C=N+(T^A^P)+k[12]+3873151461&4294967295,N=T+(C<<11&4294967295|C>>>21),C=P+(N^T^A)+k[15]+530742520&4294967295,P=N+(C<<16&4294967295|C>>>16),C=A+(P^N^T)+k[2]+3299628645&4294967295,A=P+(C<<23&4294967295|C>>>9),C=T+(P^(A|~N))+k[0]+4096336452&4294967295,T=A+(C<<6&4294967295|C>>>26),C=N+(A^(T|~P))+k[7]+1126891415&4294967295,N=T+(C<<10&4294967295|C>>>22),C=P+(T^(N|~A))+k[14]+2878612391&4294967295,P=N+(C<<15&4294967295|C>>>17),C=A+(N^(P|~T))+k[5]+4237533241&4294967295,A=P+(C<<21&4294967295|C>>>11),C=T+(P^(A|~N))+k[12]+1700485571&4294967295,T=A+(C<<6&4294967295|C>>>26),C=N+(A^(T|~P))+k[3]+2399980690&4294967295,N=T+(C<<10&4294967295|C>>>22),C=P+(T^(N|~A))+k[10]+4293915773&4294967295,P=N+(C<<15&4294967295|C>>>17),C=A+(N^(P|~T))+k[1]+2240044497&4294967295,A=P+(C<<21&4294967295|C>>>11),C=T+(P^(A|~N))+k[8]+1873313359&4294967295,T=A+(C<<6&4294967295|C>>>26),C=N+(A^(T|~P))+k[15]+4264355552&4294967295,N=T+(C<<10&4294967295|C>>>22),C=P+(T^(N|~A))+k[6]+2734768916&4294967295,P=N+(C<<15&4294967295|C>>>17),C=A+(N^(P|~T))+k[13]+1309151649&4294967295,A=P+(C<<21&4294967295|C>>>11),C=T+(P^(A|~N))+k[4]+4149444226&4294967295,T=A+(C<<6&4294967295|C>>>26),C=N+(A^(T|~P))+k[11]+3174756917&4294967295,N=T+(C<<10&4294967295|C>>>22),C=P+(T^(N|~A))+k[2]+718787259&4294967295,P=N+(C<<15&4294967295|C>>>17),C=A+(N^(P|~T))+k[9]+3951481745&4294967295,S.g[0]=S.g[0]+T&4294967295,S.g[1]=S.g[1]+(P+(C<<21&4294967295|C>>>11))&4294967295,S.g[2]=S.g[2]+P&4294967295,S.g[3]=S.g[3]+N&4294967295}r.prototype.v=function(S,T){T===void 0&&(T=S.length);const A=T-this.blockSize,k=this.C;let P=this.h,N=0;for(;N<T;){if(P==0)for(;N<=A;)s(this,S,N),N+=this.blockSize;if(typeof S=="string"){for(;N<T;)if(k[P++]=S.charCodeAt(N++),P==this.blockSize){s(this,k),P=0;break}}else for(;N<T;)if(k[P++]=S[N++],P==this.blockSize){s(this,k),P=0;break}}this.h=P,this.o+=T},r.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var T=1;T<S.length-8;++T)S[T]=0;T=this.o*8;for(var A=S.length-8;A<S.length;++A)S[A]=T&255,T/=256;for(this.v(S),S=Array(16),T=0,A=0;A<4;++A)for(let k=0;k<32;k+=8)S[T++]=this.g[A]>>>k&255;return S};function i(S,T){var A=a;return Object.prototype.hasOwnProperty.call(A,S)?A[S]:A[S]=T(S)}function o(S,T){this.h=T;const A=[];let k=!0;for(let P=S.length-1;P>=0;P--){const N=S[P]|0;k&&N==T||(A[P]=N,k=!1)}this.g=A}var a={};function l(S){return-128<=S&&S<128?i(S,function(T){return new o([T|0],T<0?-1:0)}):new o([S|0],S<0?-1:0)}function c(S){if(isNaN(S)||!isFinite(S))return h;if(S<0)return v(c(-S));const T=[];let A=1;for(let k=0;S>=A;k++)T[k]=S/A|0,A*=4294967296;return new o(T,0)}function d(S,T){if(S.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(S.charAt(0)=="-")return v(d(S.substring(1),T));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=c(Math.pow(T,8));let k=h;for(let N=0;N<S.length;N+=8){var P=Math.min(8,S.length-N);const C=parseInt(S.substring(N,N+P),T);P<8?(P=c(Math.pow(T,P)),k=k.j(P).add(c(C))):(k=k.j(A),k=k.add(c(C)))}return k}var h=l(0),p=l(1),f=l(16777216);t=o.prototype,t.m=function(){if(y(this))return-v(this).m();let S=0,T=1;for(let A=0;A<this.g.length;A++){const k=this.i(A);S+=(k>=0?k:4294967296+k)*T,T*=4294967296}return S},t.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(E(this))return"0";if(y(this))return"-"+v(this).toString(S);const T=c(Math.pow(S,6));var A=this;let k="";for(;;){const P=D(A,T).g;A=_(A,P.j(T));let N=((A.g.length>0?A.g[0]:A.h)>>>0).toString(S);if(A=P,E(A))return N+k;for(;N.length<6;)N="0"+N;k=N+k}},t.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function E(S){if(S.h!=0)return!1;for(let T=0;T<S.g.length;T++)if(S.g[T]!=0)return!1;return!0}function y(S){return S.h==-1}t.l=function(S){return S=_(this,S),y(S)?-1:E(S)?0:1};function v(S){const T=S.g.length,A=[];for(let k=0;k<T;k++)A[k]=~S.g[k];return new o(A,~S.h).add(p)}t.abs=function(){return y(this)?v(this):this},t.add=function(S){const T=Math.max(this.g.length,S.g.length),A=[];let k=0;for(let P=0;P<=T;P++){let N=k+(this.i(P)&65535)+(S.i(P)&65535),C=(N>>>16)+(this.i(P)>>>16)+(S.i(P)>>>16);k=C>>>16,N&=65535,C&=65535,A[P]=C<<16|N}return new o(A,A[A.length-1]&-2147483648?-1:0)};function _(S,T){return S.add(v(T))}t.j=function(S){if(E(this)||E(S))return h;if(y(this))return y(S)?v(this).j(v(S)):v(v(this).j(S));if(y(S))return v(this.j(v(S)));if(this.l(f)<0&&S.l(f)<0)return c(this.m()*S.m());const T=this.g.length+S.g.length,A=[];for(var k=0;k<2*T;k++)A[k]=0;for(k=0;k<this.g.length;k++)for(let P=0;P<S.g.length;P++){const N=this.i(k)>>>16,C=this.i(k)&65535,q=S.i(P)>>>16,Z=S.i(P)&65535;A[2*k+2*P]+=C*Z,w(A,2*k+2*P),A[2*k+2*P+1]+=N*Z,w(A,2*k+2*P+1),A[2*k+2*P+1]+=C*q,w(A,2*k+2*P+1),A[2*k+2*P+2]+=N*q,w(A,2*k+2*P+2)}for(S=0;S<T;S++)A[S]=A[2*S+1]<<16|A[2*S];for(S=T;S<2*T;S++)A[S]=0;return new o(A,0)};function w(S,T){for(;(S[T]&65535)!=S[T];)S[T+1]+=S[T]>>>16,S[T]&=65535,T++}function I(S,T){this.g=S,this.h=T}function D(S,T){if(E(T))throw Error("division by zero");if(E(S))return new I(h,h);if(y(S))return T=D(v(S),T),new I(v(T.g),v(T.h));if(y(T))return T=D(S,v(T)),new I(v(T.g),T.h);if(S.g.length>30){if(y(S)||y(T))throw Error("slowDivide_ only works with positive integers.");for(var A=p,k=T;k.l(S)<=0;)A=O(A),k=O(k);var P=V(A,1),N=V(k,1);for(k=V(k,2),A=V(A,2);!E(k);){var C=N.add(k);C.l(S)<=0&&(P=P.add(A),N=C),k=V(k,1),A=V(A,1)}return T=_(S,P.j(T)),new I(P,T)}for(P=h;S.l(T)>=0;){for(A=Math.max(1,Math.floor(S.m()/T.m())),k=Math.ceil(Math.log(A)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),N=c(A),C=N.j(T);y(C)||C.l(S)>0;)A-=k,N=c(A),C=N.j(T);E(N)&&(N=p),P=P.add(N),S=_(S,C)}return new I(P,S)}t.B=function(S){return D(this,S).h},t.and=function(S){const T=Math.max(this.g.length,S.g.length),A=[];for(let k=0;k<T;k++)A[k]=this.i(k)&S.i(k);return new o(A,this.h&S.h)},t.or=function(S){const T=Math.max(this.g.length,S.g.length),A=[];for(let k=0;k<T;k++)A[k]=this.i(k)|S.i(k);return new o(A,this.h|S.h)},t.xor=function(S){const T=Math.max(this.g.length,S.g.length),A=[];for(let k=0;k<T;k++)A[k]=this.i(k)^S.i(k);return new o(A,this.h^S.h)};function O(S){const T=S.g.length+1,A=[];for(let k=0;k<T;k++)A[k]=S.i(k)<<1|S.i(k-1)>>>31;return new o(A,S.h)}function V(S,T){const A=T>>5;T%=32;const k=S.g.length-A,P=[];for(let N=0;N<k;N++)P[N]=T>0?S.i(N+A)>>>T|S.i(N+A+1)<<32-T:S.i(N+A);return new o(P,S.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,NR=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,Ri=o}).apply(typeof RI<"u"?RI:typeof self<"u"?self:typeof window<"u"?window:{});var oh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var OR,Nc,VR,Lh,sv,LR,MR,FR;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof oh=="object"&&oh];for(var m=0;m<u.length;++m){var g=u[m];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function s(u,m){if(m)e:{var g=r;u=u.split(".");for(var R=0;R<u.length-1;R++){var M=u[R];if(!(M in g))break e;g=g[M]}u=u[u.length-1],R=g[u],m=m(R),m!=R&&m!=null&&e(g,u,{configurable:!0,writable:!0,value:m})}}s("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(u){return u||function(m){var g=[],R;for(R in m)Object.prototype.hasOwnProperty.call(m,R)&&g.push([R,m[R]]);return g}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function l(u,m,g){return u.call.apply(u.bind,arguments)}function c(u,m,g){return c=l,c.apply(null,arguments)}function d(u,m){var g=Array.prototype.slice.call(arguments,1);return function(){var R=g.slice();return R.push.apply(R,arguments),u.apply(this,R)}}function h(u,m){function g(){}g.prototype=m.prototype,u.Z=m.prototype,u.prototype=new g,u.prototype.constructor=u,u.Ob=function(R,M,j){for(var X=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)X[Ie-2]=arguments[Ie];return m.prototype[M].apply(R,X)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function f(u){const m=u.length;if(m>0){const g=Array(m);for(let R=0;R<m;R++)g[R]=u[R];return g}return[]}function E(u,m){for(let R=1;R<arguments.length;R++){const M=arguments[R];var g=typeof M;if(g=g!="object"?g:M?Array.isArray(M)?"array":g:"null",g=="array"||g=="object"&&typeof M.length=="number"){g=u.length||0;const j=M.length||0;u.length=g+j;for(let X=0;X<j;X++)u[g+X]=M[X]}else u.push(M)}}class y{constructor(m,g){this.i=m,this.j=g,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function v(u){o.setTimeout(()=>{throw u},0)}function _(){var u=S;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class w{constructor(){this.h=this.g=null}add(m,g){const R=I.get();R.set(m,g),this.h?this.h.next=R:this.g=R,this.h=R}}var I=new y(()=>new D,u=>u.reset());class D{constructor(){this.next=this.g=this.h=null}set(m,g){this.h=m,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let O,V=!1,S=new w,T=()=>{const u=Promise.resolve(void 0);O=()=>{u.then(A)}};function A(){for(var u;u=_();){try{u.h.call(u.g)}catch(g){v(g)}var m=I;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}V=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var N=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const g=()=>{};o.addEventListener("test",g,m),o.removeEventListener("test",g,m)}catch{}return u}();function C(u){return/^[\s\xa0]*$/.test(u)}function q(u,m){P.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}h(q,P),q.prototype.init=function(u,m){const g=this.type=u.type,R=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(g=="mouseover"?m=u.fromElement:g=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&q.Z.h.call(this)},q.prototype.h=function(){q.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Z="closure_listenable_"+(Math.random()*1e6|0),ie=0;function Q(u,m,g,R,M){this.listener=u,this.proxy=null,this.src=m,this.type=g,this.capture=!!R,this.ha=M,this.key=++ie,this.da=this.fa=!1}function F(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function U(u,m,g){for(const R in u)m.call(g,u[R],R,u)}function Y(u,m){for(const g in u)m.call(void 0,u[g],g,u)}function de(u){const m={};for(const g in u)m[g]=u[g];return m}const ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ce(u,m){let g,R;for(let M=1;M<arguments.length;M++){R=arguments[M];for(g in R)u[g]=R[g];for(let j=0;j<ne.length;j++)g=ne[j],Object.prototype.hasOwnProperty.call(R,g)&&(u[g]=R[g])}}function le(u){this.src=u,this.g={},this.h=0}le.prototype.add=function(u,m,g,R,M){const j=u.toString();u=this.g[j],u||(u=this.g[j]=[],this.h++);const X=Qe(u,m,R,M);return X>-1?(m=u[X],g||(m.fa=!1)):(m=new Q(m,this.src,j,!!R,M),m.fa=g,u.push(m)),m};function Te(u,m){const g=m.type;if(g in u.g){var R=u.g[g],M=Array.prototype.indexOf.call(R,m,void 0),j;(j=M>=0)&&Array.prototype.splice.call(R,M,1),j&&(F(m),u.g[g].length==0&&(delete u.g[g],u.h--))}}function Qe(u,m,g,R){for(let M=0;M<u.length;++M){const j=u[M];if(!j.da&&j.listener==m&&j.capture==!!g&&j.ha==R)return M}return-1}var ae="closure_lm_"+(Math.random()*1e6|0),ye={};function Pe(u,m,g,R,M){if(Array.isArray(m)){for(let j=0;j<m.length;j++)Pe(u,m[j],g,R,M);return null}return g=Us(g),u&&u[Z]?u.J(m,g,a(R)?!!R.capture:!1,M):Tt(u,m,g,!1,R,M)}function Tt(u,m,g,R,M,j){if(!m)throw Error("Invalid event type");const X=a(M)?!!M.capture:!!M;let Ie=ve(u);if(Ie||(u[ae]=Ie=new le(u)),g=Ie.add(m,g,R,X,j),g.proxy)return g;if(R=Nt(),g.proxy=R,R.src=u,R.listener=g,u.addEventListener)N||(M=X),M===void 0&&(M=!1),u.addEventListener(m.toString(),R,M);else if(u.attachEvent)u.attachEvent(yn(m.toString()),R);else if(u.addListener&&u.removeListener)u.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return g}function Nt(){function u(g){return m.call(u.src,u.listener,g)}const m=Cr;return u}function Kt(u,m,g,R,M){if(Array.isArray(m))for(var j=0;j<m.length;j++)Kt(u,m[j],g,R,M);else R=a(R)?!!R.capture:!!R,g=Us(g),u&&u[Z]?(u=u.i,j=String(m).toString(),j in u.g&&(m=u.g[j],g=Qe(m,g,R,M),g>-1&&(F(m[g]),Array.prototype.splice.call(m,g,1),m.length==0&&(delete u.g[j],u.h--)))):u&&(u=ve(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Qe(m,g,R,M)),(g=u>-1?m[u]:null)&&Bt(g))}function Bt(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Z])Te(m.i,u);else{var g=u.type,R=u.proxy;m.removeEventListener?m.removeEventListener(g,R,u.capture):m.detachEvent?m.detachEvent(yn(g),R):m.addListener&&m.removeListener&&m.removeListener(R),(g=ve(m))?(Te(g,u),g.h==0&&(g.src=null,m[ae]=null)):F(u)}}}function yn(u){return u in ye?ye[u]:ye[u]="on"+u}function Cr(u,m){if(u.da)u=!0;else{m=new q(m,this);const g=u.listener,R=u.ha||u.src;u.fa&&Bt(u),u=g.call(R,m)}return u}function ve(u){return u=u[ae],u instanceof le?u:null}var Qn="__closure_events_fn_"+(Math.random()*1e9>>>0);function Us(u){return typeof u=="function"?u:(u[Qn]||(u[Qn]=function(m){return u.handleEvent(m)}),u[Qn])}function at(){k.call(this),this.i=new le(this),this.M=this,this.G=null}h(at,k),at.prototype[Z]=!0,at.prototype.removeEventListener=function(u,m,g,R){Kt(this,u,m,g,R)};function Ot(u,m){var g,R=u.G;if(R)for(g=[];R;R=R.G)g.push(R);if(u=u.M,R=m.type||m,typeof m=="string")m=new P(m,u);else if(m instanceof P)m.target=m.target||u;else{var M=m;m=new P(R,u),ce(m,M)}M=!0;let j,X;if(g)for(X=g.length-1;X>=0;X--)j=m.g=g[X],M=kr(j,R,!0,m)&&M;if(j=m.g=u,M=kr(j,R,!0,m)&&M,M=kr(j,R,!1,m)&&M,g)for(X=0;X<g.length;X++)j=m.g=g[X],M=kr(j,R,!1,m)&&M}at.prototype.N=function(){if(at.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const g=u.g[m];for(let R=0;R<g.length;R++)F(g[R]);delete u.g[m],u.h--}}this.G=null},at.prototype.J=function(u,m,g,R){return this.i.add(String(u),m,!1,g,R)},at.prototype.K=function(u,m,g,R){return this.i.add(String(u),m,!0,g,R)};function kr(u,m,g,R){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let M=!0;for(let j=0;j<m.length;++j){const X=m[j];if(X&&!X.da&&X.capture==g){const Ie=X.listener,Pt=X.ha||X.src;X.fa&&Te(u.i,X),M=Ie.call(Pt,R)!==!1&&M}}return M&&!R.defaultPrevented}function Td(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=c(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:o.setTimeout(u,m||0)}function Dr(u){u.g=Td(()=>{u.g=null,u.i&&(u.i=!1,Dr(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class mm extends k{constructor(m,g){super(),this.m=m,this.l=g,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Dr(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function to(u){k.call(this),this.h=u,this.g={}}h(to,k);var an=[];function rs(u){U(u.g,function(m,g){this.g.hasOwnProperty(g)&&Bt(m)},u),u.g={}}to.prototype.N=function(){to.Z.N.call(this),rs(this)},to.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gl=o.JSON.stringify,gm=o.JSON.parse,ra=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function Id(){}function Ql(){}var ss={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Nr(){P.call(this,"d")}h(Nr,P);function sa(){P.call(this,"c")}h(sa,P);var vn={},Sd=null;function ia(){return Sd=Sd||new at}vn.Ia="serverreachability";function Yl(u){P.call(this,vn.Ia,u)}h(Yl,P);function js(u){const m=ia();Ot(m,new Yl(m))}vn.STAT_EVENT="statevent";function bd(u,m){P.call(this,vn.STAT_EVENT,u),this.stat=m}h(bd,P);function xt(u){const m=ia();Ot(m,new bd(m,u))}vn.Ja="timingevent";function or(u,m){P.call(this,vn.Ja,u),this.size=m}h(or,P);function no(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},m)}function fe(){this.g=!0}fe.prototype.ua=function(){this.g=!1};function Ue(u,m,g,R,M,j){u.info(function(){if(u.g)if(j){var X="",Ie=j.split("&");for(let qe=0;qe<Ie.length;qe++){var Pt=Ie[qe].split("=");if(Pt.length>1){const Lt=Pt[0];Pt=Pt[1];const Lr=Lt.split("_");X=Lr.length>=2&&Lr[1]=="type"?X+(Lt+"="+Pt+"&"):X+(Lt+"=redacted&")}}}else X=null;else X=j;return"XMLHTTP REQ ("+R+") [attempt "+M+"]: "+m+`
`+g+`
`+X})}function We(u,m,g,R,M,j,X){u.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+M+"]: "+m+`
`+g+`
`+j+" "+X})}function Vt(u,m,g,R){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Or(u,g)+(R?" "+R:"")})}function kn(u,m){u.info(function(){return"TIMEOUT: "+m})}fe.prototype.info=function(){};function Or(u,m){if(!u.g)return m;if(!m)return null;try{const j=JSON.parse(m);if(j){for(u=0;u<j.length;u++)if(Array.isArray(j[u])){var g=j[u];if(!(g.length<2)){var R=g[1];if(Array.isArray(R)&&!(R.length<1)){var M=R[0];if(M!="noop"&&M!="stop"&&M!="close")for(let X=1;X<R.length;X++)R[X]=""}}}}return Gl(j)}catch{return m}}var Yn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},_n={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ar;function ym(){}h(ym,Id),ym.prototype.g=function(){return new XMLHttpRequest},ar=new ym;function Xl(u){return encodeURIComponent(String(u))}function HD(u){var m=1;u=u.split(":");const g=[];for(;m>0&&u.length;)g.push(u.shift()),m--;return u.length&&g.push(u.join(":")),g}function Bs(u,m,g,R){this.j=u,this.i=m,this.l=g,this.S=R||1,this.V=new to(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new gE}function gE(){this.i=null,this.g="",this.h=!1}var yE={},vm={};function _m(u,m,g){u.M=1,u.A=xd(Vr(m)),u.u=g,u.R=!0,vE(u,null)}function vE(u,m){u.F=Date.now(),Ad(u),u.B=Vr(u.A);var g=u.B,R=u.S;Array.isArray(R)||(R=[String(R)]),kE(g.i,"t",R),u.C=0,g=u.j.L,u.h=new gE,u.g=QE(u.j,g?m:null,!u.u),u.P>0&&(u.O=new mm(c(u.Y,u,u.g),u.P)),m=u.V,g=u.g,R=u.ba;var M="readystatechange";Array.isArray(M)||(M&&(an[0]=M.toString()),M=an);for(let j=0;j<M.length;j++){const X=Pe(g,M[j],R||m.handleEvent,!1,m.h||m);if(!X)break;m.g[X.key]=X}m=u.J?de(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),js(),Ue(u.i,u.v,u.B,u.l,u.S,u.u)}Bs.prototype.ba=function(u){u=u.target;const m=this.O;m&&qs(u)==3?m.j():this.Y(u)},Bs.prototype.Y=function(u){try{if(u==this.g)e:{const Ie=qs(this.g),Pt=this.g.ya(),qe=this.g.ca();if(!(Ie<3)&&(Ie!=3||this.g&&(this.h.h||this.g.la()||FE(this.g)))){this.K||Ie!=4||Pt==7||(Pt==8||qe<=0?js(3):js(2)),wm(this);var m=this.g.ca();this.X=m;var g=WD(this);if(this.o=m==200,We(this.i,this.v,this.B,this.l,this.S,Ie,m),this.o){if(this.U&&!this.L){t:{if(this.g){var R,M=this.g;if((R=M.g?M.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(R)){var j=R;break t}}j=null}if(u=j)Vt(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Em(this,u);else{this.o=!1,this.m=3,xt(12),ro(this),Jl(this);break e}}if(this.R){u=!0;let Lt;for(;!this.K&&this.C<g.length;)if(Lt=KD(this,g),Lt==vm){Ie==4&&(this.m=4,xt(14),u=!1),Vt(this.i,this.l,null,"[Incomplete Response]");break}else if(Lt==yE){this.m=4,xt(15),Vt(this.i,this.l,g,"[Invalid Chunk]"),u=!1;break}else Vt(this.i,this.l,Lt,null),Em(this,Lt);if(_E(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ie!=4||g.length!=0||this.h.h||(this.m=1,xt(16),u=!1),this.o=this.o&&u,!u)Vt(this.i,this.l,g,"[Invalid Chunked Response]"),ro(this),Jl(this);else if(g.length>0&&!this.W){this.W=!0;var X=this.j;X.g==this&&X.aa&&!X.P&&(X.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),Rm(X),X.P=!0,xt(11))}}else Vt(this.i,this.l,g,null),Em(this,g);Ie==4&&ro(this),this.o&&!this.K&&(Ie==4?HE(this.j,this):(this.o=!1,Ad(this)))}else aN(this.g),m==400&&g.indexOf("Unknown SID")>0?(this.m=3,xt(12)):(this.m=0,xt(13)),ro(this),Jl(this)}}}catch{}finally{}};function WD(u){if(!_E(u))return u.g.la();const m=FE(u.g);if(m==="")return"";let g="";const R=m.length,M=qs(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return ro(u),Jl(u),"";u.h.i=new o.TextDecoder}for(let j=0;j<R;j++)u.h.h=!0,g+=u.h.i.decode(m[j],{stream:!(M&&j==R-1)});return m.length=0,u.h.g+=g,u.C=0,u.h.g}function _E(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function KD(u,m){var g=u.C,R=m.indexOf(`
`,g);return R==-1?vm:(g=Number(m.substring(g,R)),isNaN(g)?yE:(R+=1,R+g>m.length?vm:(m=m.slice(R,R+g),u.C=R+g,m)))}Bs.prototype.cancel=function(){this.K=!0,ro(this)};function Ad(u){u.T=Date.now()+u.H,wE(u,u.H)}function wE(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=no(c(u.aa,u),m)}function wm(u){u.D&&(o.clearTimeout(u.D),u.D=null)}Bs.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(kn(this.i,this.B),this.M!=2&&(js(),xt(17)),ro(this),this.m=2,Jl(this)):wE(this,this.T-u)};function Jl(u){u.j.I==0||u.K||HE(u.j,u)}function ro(u){wm(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,rs(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function Em(u,m){try{var g=u.j;if(g.I!=0&&(g.g==u||Tm(g.h,u))){if(!u.L&&Tm(g.h,u)&&g.I==3){try{var R=g.Ba.g.parse(m)}catch{R=null}if(Array.isArray(R)&&R.length==3){var M=R;if(M[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<u.F)Dd(g),Cd(g);else break e;Pm(g),xt(18)}}else g.xa=M[1],0<g.xa-g.K&&M[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=no(c(g.Va,g),6e3));IE(g.h)<=1&&g.ta&&(g.ta=void 0)}else io(g,11)}else if((u.L||g.g==u)&&Dd(g),!C(m))for(M=g.Ba.g.parse(m),m=0;m<M.length;m++){let qe=M[m];const Lt=qe[0];if(!(Lt<=g.K))if(g.K=Lt,qe=qe[1],g.I==2)if(qe[0]=="c"){g.M=qe[1],g.ba=qe[2];const Lr=qe[3];Lr!=null&&(g.ka=Lr,g.j.info("VER="+g.ka));const oo=qe[4];oo!=null&&(g.za=oo,g.j.info("SVER="+g.za));const Hs=qe[5];Hs!=null&&typeof Hs=="number"&&Hs>0&&(R=1.5*Hs,g.O=R,g.j.info("backChannelRequestTimeoutMs_="+R)),R=g;const Ws=u.g;if(Ws){const Od=Ws.g?Ws.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Od){var j=R.h;j.g||Od.indexOf("spdy")==-1&&Od.indexOf("quic")==-1&&Od.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(Im(j,j.h),j.h=null))}if(R.G){const Cm=Ws.g?Ws.g.getResponseHeader("X-HTTP-Session-Id"):null;Cm&&(R.wa=Cm,Ye(R.J,R.G,Cm))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-u.F,g.j.info("Handshake RTT: "+g.T+"ms")),R=g;var X=u;if(R.na=GE(R,R.L?R.ba:null,R.W),X.L){SE(R.h,X);var Ie=X,Pt=R.O;Pt&&(Ie.H=Pt),Ie.D&&(wm(Ie),Ad(Ie)),R.g=X}else zE(R);g.i.length>0&&kd(g)}else qe[0]!="stop"&&qe[0]!="close"||io(g,7);else g.I==3&&(qe[0]=="stop"||qe[0]=="close"?qe[0]=="stop"?io(g,7):xm(g):qe[0]!="noop"&&g.l&&g.l.qa(qe),g.A=0)}}js(4)}catch{}}var GD=class{constructor(u,m){this.g=u,this.map=m}};function EE(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function TE(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function IE(u){return u.h?1:u.g?u.g.size:0}function Tm(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Im(u,m){u.g?u.g.add(m):u.h=m}function SE(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}EE.prototype.cancel=function(){if(this.i=bE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function bE(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const g of u.g.values())m=m.concat(g.G);return m}return f(u.i)}var AE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function QD(u,m){if(u){u=u.split("&");for(let g=0;g<u.length;g++){const R=u[g].indexOf("=");let M,j=null;R>=0?(M=u[g].substring(0,R),j=u[g].substring(R+1)):M=u[g],m(M,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function $s(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof $s?(this.l=u.l,Zl(this,u.j),this.o=u.o,this.g=u.g,ec(this,u.u),this.h=u.h,Sm(this,DE(u.i)),this.m=u.m):u&&(m=String(u).match(AE))?(this.l=!1,Zl(this,m[1]||"",!0),this.o=tc(m[2]||""),this.g=tc(m[3]||"",!0),ec(this,m[4]),this.h=tc(m[5]||"",!0),Sm(this,m[6]||"",!0),this.m=tc(m[7]||"")):(this.l=!1,this.i=new rc(null,this.l))}$s.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(nc(m,xE,!0),":");var g=this.g;return(g||m=="file")&&(u.push("//"),(m=this.o)&&u.push(nc(m,xE,!0),"@"),u.push(Xl(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&u.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(nc(g,g.charAt(0)=="/"?JD:XD,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",nc(g,eN)),u.join("")},$s.prototype.resolve=function(u){const m=Vr(this);let g=!!u.j;g?Zl(m,u.j):g=!!u.o,g?m.o=u.o:g=!!u.g,g?m.g=u.g:g=u.u!=null;var R=u.h;if(g)ec(m,u.u);else if(g=!!u.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var M=m.h.lastIndexOf("/");M!=-1&&(R=m.h.slice(0,M+1)+R)}if(M=R,M==".."||M==".")R="";else if(M.indexOf("./")!=-1||M.indexOf("/.")!=-1){R=M.lastIndexOf("/",0)==0,M=M.split("/");const j=[];for(let X=0;X<M.length;){const Ie=M[X++];Ie=="."?R&&X==M.length&&j.push(""):Ie==".."?((j.length>1||j.length==1&&j[0]!="")&&j.pop(),R&&X==M.length&&j.push("")):(j.push(Ie),R=!0)}R=j.join("/")}else R=M}return g?m.h=R:g=u.i.toString()!=="",g?Sm(m,DE(u.i)):g=!!u.m,g&&(m.m=u.m),m};function Vr(u){return new $s(u)}function Zl(u,m,g){u.j=g?tc(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function ec(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function Sm(u,m,g){m instanceof rc?(u.i=m,tN(u.i,u.l)):(g||(m=nc(m,ZD)),u.i=new rc(m,u.l))}function Ye(u,m,g){u.i.set(m,g)}function xd(u){return Ye(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function tc(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function nc(u,m,g){return typeof u=="string"?(u=encodeURI(u).replace(m,YD),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function YD(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var xE=/[#\/\?@]/g,XD=/[#\?:]/g,JD=/[#\?]/g,ZD=/[#\?@]/g,eN=/#/g;function rc(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function so(u){u.g||(u.g=new Map,u.h=0,u.i&&QD(u.i,function(m,g){u.add(decodeURIComponent(m.replace(/\+/g," ")),g)}))}t=rc.prototype,t.add=function(u,m){so(this),this.i=null,u=oa(this,u);let g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(m),this.h+=1,this};function PE(u,m){so(u),m=oa(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function RE(u,m){return so(u),m=oa(u,m),u.g.has(m)}t.forEach=function(u,m){so(this),this.g.forEach(function(g,R){g.forEach(function(M){u.call(m,M,R,this)},this)},this)};function CE(u,m){so(u);let g=[];if(typeof m=="string")RE(u,m)&&(g=g.concat(u.g.get(oa(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)g=g.concat(u[m]);return g}t.set=function(u,m){return so(this),this.i=null,u=oa(this,u),RE(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},t.get=function(u,m){return u?(u=CE(this,u),u.length>0?String(u[0]):m):m};function kE(u,m,g){PE(u,m),g.length>0&&(u.i=null,u.g.set(oa(u,m),f(g)),u.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let R=0;R<m.length;R++){var g=m[R];const M=Xl(g);g=CE(this,g);for(let j=0;j<g.length;j++){let X=M;g[j]!==""&&(X+="="+Xl(g[j])),u.push(X)}}return this.i=u.join("&")};function DE(u){const m=new rc;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function oa(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function tN(u,m){m&&!u.j&&(so(u),u.i=null,u.g.forEach(function(g,R){const M=R.toLowerCase();R!=M&&(PE(this,R),kE(this,M,g))},u)),u.j=m}function nN(u,m){const g=new fe;if(o.Image){const R=new Image;R.onload=d(zs,g,"TestLoadImage: loaded",!0,m,R),R.onerror=d(zs,g,"TestLoadImage: error",!1,m,R),R.onabort=d(zs,g,"TestLoadImage: abort",!1,m,R),R.ontimeout=d(zs,g,"TestLoadImage: timeout",!1,m,R),o.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=u}else m(!1)}function rN(u,m){const g=new fe,R=new AbortController,M=setTimeout(()=>{R.abort(),zs(g,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:R.signal}).then(j=>{clearTimeout(M),j.ok?zs(g,"TestPingServer: ok",!0,m):zs(g,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(M),zs(g,"TestPingServer: error",!1,m)})}function zs(u,m,g,R,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),R(g)}catch{}}function sN(){this.g=new ra}function bm(u){this.i=u.Sb||null,this.h=u.ab||!1}h(bm,Id),bm.prototype.g=function(){return new Pd(this.i,this.h)};function Pd(u,m){at.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h(Pd,at),t=Pd.prototype,t.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,ic(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||o).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,sc(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ic(this)),this.g&&(this.readyState=3,ic(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;NE(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function NE(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?sc(this):ic(this),this.readyState==3&&NE(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,sc(this))},t.Na=function(u){this.g&&(this.response=u,sc(this))},t.ga=function(){this.g&&sc(this)};function sc(u){u.readyState=4,u.l=null,u.j=null,u.B=null,ic(u)}t.setRequestHeader=function(u,m){this.A.append(u,m)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var g=m.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=m.next();return u.join(`\r
`)};function ic(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Pd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function OE(u){let m="";return U(u,function(g,R){m+=R,m+=":",m+=g,m+=`\r
`}),m}function Am(u,m,g){e:{for(R in g){var R=!1;break e}R=!0}R||(g=OE(g),typeof u=="string"?g!=null&&Xl(g):Ye(u,m,g))}function ht(u){at.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(ht,at);var iN=/^https?$/i,oN=["POST","PUT"];t=ht.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,m,g,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ar.g(),this.g.onreadystatechange=p(c(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(j){VE(this,j);return}if(u=g||"",g=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var M in R)g.set(M,R[M]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const j of R.keys())g.set(j,R.get(j));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(g.keys()).find(j=>j.toLowerCase()=="content-type"),M=o.FormData&&u instanceof o.FormData,!(Array.prototype.indexOf.call(oN,m,void 0)>=0)||R||M||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,X]of g)this.g.setRequestHeader(j,X);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(j){VE(this,j)}};function VE(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,LE(u),Rd(u)}function LE(u){u.A||(u.A=!0,Ot(u,"complete"),Ot(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Ot(this,"complete"),Ot(this,"abort"),Rd(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Rd(this,!0)),ht.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?ME(this):this.Xa())},t.Xa=function(){ME(this)};function ME(u){if(u.h&&typeof i<"u"){if(u.v&&qs(u)==4)setTimeout(u.Ca.bind(u),0);else if(Ot(u,"readystatechange"),qs(u)==4){u.h=!1;try{const j=u.ca();e:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var g;if(!(g=m)){var R;if(R=j===0){let X=String(u.D).match(AE)[1]||null;!X&&o.self&&o.self.location&&(X=o.self.location.protocol.slice(0,-1)),R=!iN.test(X?X.toLowerCase():"")}g=R}if(g)Ot(u,"complete"),Ot(u,"success");else{u.o=6;try{var M=qs(u)>2?u.g.statusText:""}catch{M=""}u.l=M+" ["+u.ca()+"]",LE(u)}}finally{Rd(u)}}}}function Rd(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const g=u.g;u.g=null,m||Ot(u,"ready");try{g.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function qs(u){return u.g?u.g.readyState:0}t.ca=function(){try{return qs(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),gm(m)}};function FE(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function aN(u){const m={};u=(u.g&&qs(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<u.length;R++){if(C(u[R]))continue;var g=HD(u[R]);const M=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const j=m[M]||[];m[M]=j,j.push(g)}Y(m,function(R){return R.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function oc(u,m,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||m}function UE(u){this.za=0,this.i=[],this.j=new fe,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=oc("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=oc("baseRetryDelayMs",5e3,u),this.Za=oc("retryDelaySeedMs",1e4,u),this.Ta=oc("forwardChannelMaxRetries",2,u),this.va=oc("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new EE(u&&u.concurrentRequestLimit),this.Ba=new sN,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=UE.prototype,t.ka=8,t.I=1,t.connect=function(u,m,g,R){xt(0),this.W=u,this.H=m||{},g&&R!==void 0&&(this.H.OSID=g,this.H.OAID=R),this.F=this.X,this.J=GE(this,null,this.W),kd(this)};function xm(u){if(jE(u),u.I==3){var m=u.V++,g=Vr(u.J);if(Ye(g,"SID",u.M),Ye(g,"RID",m),Ye(g,"TYPE","terminate"),ac(u,g),m=new Bs(u,u.j,m),m.M=2,m.A=xd(Vr(g)),g=!1,o.navigator&&o.navigator.sendBeacon)try{g=o.navigator.sendBeacon(m.A.toString(),"")}catch{}!g&&o.Image&&(new Image().src=m.A,g=!0),g||(m.g=QE(m.j,null),m.g.ea(m.A)),m.F=Date.now(),Ad(m)}KE(u)}function Cd(u){u.g&&(Rm(u),u.g.cancel(),u.g=null)}function jE(u){Cd(u),u.v&&(o.clearTimeout(u.v),u.v=null),Dd(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&o.clearTimeout(u.m),u.m=null)}function kd(u){if(!TE(u.h)&&!u.m){u.m=!0;var m=u.Ea;O||T(),V||(O(),V=!0),S.add(m,u),u.D=0}}function lN(u,m){return IE(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=no(c(u.Ea,u,m),WE(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const M=new Bs(this,this.j,u);let j=this.o;if(this.U&&(j?(j=de(j),ce(j,this.U)):j=this.U),this.u!==null||this.R||(M.J=j,j=null),this.S)e:{for(var m=0,g=0;g<this.i.length;g++){t:{var R=this.i[g];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(m+=R,m>4096){m=g;break e}if(m===4096||g===this.i.length-1){m=g+1;break e}}m=1e3}else m=1e3;m=$E(this,M,m),g=Vr(this.J),Ye(g,"RID",u),Ye(g,"CVER",22),this.G&&Ye(g,"X-HTTP-Session-Id",this.G),ac(this,g),j&&(this.R?m="headers="+Xl(OE(j))+"&"+m:this.u&&Am(g,this.u,j)),Im(this.h,M),this.Ra&&Ye(g,"TYPE","init"),this.S?(Ye(g,"$req",m),Ye(g,"SID","null"),M.U=!0,_m(M,g,null)):_m(M,g,m),this.I=2}}else this.I==3&&(u?BE(this,u):this.i.length==0||TE(this.h)||BE(this))};function BE(u,m){var g;m?g=m.l:g=u.V++;const R=Vr(u.J);Ye(R,"SID",u.M),Ye(R,"RID",g),Ye(R,"AID",u.K),ac(u,R),u.u&&u.o&&Am(R,u.u,u.o),g=new Bs(u,u.j,g,u.D+1),u.u===null&&(g.J=u.o),m&&(u.i=m.G.concat(u.i)),m=$E(u,g,1e3),g.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Im(u.h,g),_m(g,R,m)}function ac(u,m){u.H&&U(u.H,function(g,R){Ye(m,R,g)}),u.l&&U({},function(g,R){Ye(m,R,g)})}function $E(u,m,g){g=Math.min(u.i.length,g);const R=u.l?c(u.l.Ka,u.l,u):null;e:{var M=u.i;let Ie=-1;for(;;){const Pt=["count="+g];Ie==-1?g>0?(Ie=M[0].g,Pt.push("ofs="+Ie)):Ie=0:Pt.push("ofs="+Ie);let qe=!0;for(let Lt=0;Lt<g;Lt++){var j=M[Lt].g;const Lr=M[Lt].map;if(j-=Ie,j<0)Ie=Math.max(0,M[Lt].g-100),qe=!1;else try{j="req"+j+"_"||"";try{var X=Lr instanceof Map?Lr:Object.entries(Lr);for(const[oo,Hs]of X){let Ws=Hs;a(Hs)&&(Ws=Gl(Hs)),Pt.push(j+oo+"="+encodeURIComponent(Ws))}}catch(oo){throw Pt.push(j+"type="+encodeURIComponent("_badmap")),oo}}catch{R&&R(Lr)}}if(qe){X=Pt.join("&");break e}}X=void 0}return u=u.i.splice(0,g),m.G=u,X}function zE(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;O||T(),V||(O(),V=!0),S.add(m,u),u.A=0}}function Pm(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=no(c(u.Da,u),WE(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,qE(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=no(c(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,xt(10),Cd(this),qE(this))};function Rm(u){u.B!=null&&(o.clearTimeout(u.B),u.B=null)}function qE(u){u.g=new Bs(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=Vr(u.na);Ye(m,"RID","rpc"),Ye(m,"SID",u.M),Ye(m,"AID",u.K),Ye(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&Ye(m,"TO",u.ia),Ye(m,"TYPE","xmlhttp"),ac(u,m),u.u&&u.o&&Am(m,u.u,u.o),u.O&&(u.g.H=u.O);var g=u.g;u=u.ba,g.M=1,g.A=xd(Vr(m)),g.u=null,g.R=!0,vE(g,u)}t.Va=function(){this.C!=null&&(this.C=null,Cd(this),Pm(this),xt(19))};function Dd(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function HE(u,m){var g=null;if(u.g==m){Dd(u),Rm(u),u.g=null;var R=2}else if(Tm(u.h,m))g=m.G,SE(u.h,m),R=1;else return;if(u.I!=0){if(m.o)if(R==1){g=m.u?m.u.length:0,m=Date.now()-m.F;var M=u.D;R=ia(),Ot(R,new or(R,g)),kd(u)}else zE(u);else if(M=m.m,M==3||M==0&&m.X>0||!(R==1&&lN(u,m)||R==2&&Pm(u)))switch(g&&g.length>0&&(m=u.h,m.i=m.i.concat(g)),M){case 1:io(u,5);break;case 4:io(u,10);break;case 3:io(u,6);break;default:io(u,2)}}}function WE(u,m){let g=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(g*=2),g*m}function io(u,m){if(u.j.info("Error code "+m),m==2){var g=c(u.bb,u),R=u.Ua;const M=!R;R=new $s(R||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Zl(R,"https"),xd(R),M?nN(R.toString(),g):rN(R.toString(),g)}else xt(2);u.I=0,u.l&&u.l.pa(m),KE(u),jE(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function KE(u){if(u.I=0,u.ja=[],u.l){const m=bE(u.h);(m.length!=0||u.i.length!=0)&&(E(u.ja,m),E(u.ja,u.i),u.h.i.length=0,f(u.i),u.i.length=0),u.l.oa()}}function GE(u,m,g){var R=g instanceof $s?Vr(g):new $s(g);if(R.g!="")m&&(R.g=m+"."+R.g),ec(R,R.u);else{var M=o.location;R=M.protocol,m=m?m+"."+M.hostname:M.hostname,M=+M.port;const j=new $s(null);R&&Zl(j,R),m&&(j.g=m),M&&ec(j,M),g&&(j.h=g),R=j}return g=u.G,m=u.wa,g&&m&&Ye(R,g,m),Ye(R,"VER",u.ka),ac(u,R),R}function QE(u,m,g){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new ht(new bm({ab:g})):new ht(u.ma),m.Fa(u.L),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function YE(){}t=YE.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Nd(){}Nd.prototype.g=function(u,m){return new Dn(u,m)};function Dn(u,m){at.call(this),this.g=new UE(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!C(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!C(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new aa(this)}h(Dn,at),Dn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Dn.prototype.close=function(){xm(this.g)},Dn.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.v&&(g={},g.__data__=Gl(u),u=g);m.i.push(new GD(m.Ya++,u)),m.I==3&&kd(m)},Dn.prototype.N=function(){this.g.l=null,delete this.j,xm(this.g),delete this.g,Dn.Z.N.call(this)};function XE(u){Nr.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const g in m){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}h(XE,Nr);function JE(){sa.call(this),this.status=1}h(JE,sa);function aa(u){this.g=u}h(aa,YE),aa.prototype.ra=function(){Ot(this.g,"a")},aa.prototype.qa=function(u){Ot(this.g,new XE(u))},aa.prototype.pa=function(u){Ot(this.g,new JE)},aa.prototype.oa=function(){Ot(this.g,"b")},Nd.prototype.createWebChannel=Nd.prototype.g,Dn.prototype.send=Dn.prototype.o,Dn.prototype.open=Dn.prototype.m,Dn.prototype.close=Dn.prototype.close,FR=function(){return new Nd},MR=function(){return ia()},LR=vn,sv={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Yn.NO_ERROR=0,Yn.TIMEOUT=8,Yn.HTTP_ERROR=6,Lh=Yn,_n.COMPLETE="complete",VR=_n,Ql.EventType=ss,ss.OPEN="a",ss.CLOSE="b",ss.ERROR="c",ss.MESSAGE="d",at.prototype.listen=at.prototype.J,Nc=Ql,ht.prototype.listenOnce=ht.prototype.K,ht.prototype.getLastError=ht.prototype.Ha,ht.prototype.getLastErrorCode=ht.prototype.ya,ht.prototype.getStatus=ht.prototype.ca,ht.prototype.getResponseJson=ht.prototype.La,ht.prototype.getResponseText=ht.prototype.la,ht.prototype.send=ht.prototype.ea,ht.prototype.setWithCredentials=ht.prototype.Fa,OR=ht}).apply(typeof oh<"u"?oh:typeof self<"u"?self:typeof window<"u"?window:{});const CI="@firebase/firestore",kI="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Jt.UNAUTHENTICATED=new Jt(null),Jt.GOOGLE_CREDENTIALS=new Jt("google-credentials-uid"),Jt.FIRST_PARTY=new Jt("first-party-uid"),Jt.MOCK_USER=new Jt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi=new Mp("@firebase/firestore");function ga(){return Mi.logLevel}function UR(t){Mi.setLogLevel(t)}function H(t,...e){if(Mi.logLevel<=Ce.DEBUG){const n=e.map(lw);Mi.debug(`Firestore (${Fl}): ${t}`,...n)}}function _t(t,...e){if(Mi.logLevel<=Ce.ERROR){const n=e.map(lw);Mi.error(`Firestore (${Fl}): ${t}`,...n)}}function Fi(t,...e){if(Mi.logLevel<=Ce.WARN){const n=e.map(lw);Mi.warn(`Firestore (${Fl}): ${t}`,...n)}}function lw(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,jR(t,r,n)}function jR(t,e,n){let r=`FIRESTORE (${Fl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw _t(r),new Error(r)}function oe(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||jR(e,s,r)}function re(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class G extends Pr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i5{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class BR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Jt.UNAUTHENTICATED))}shutdown(){}}class o5{constructor(e){this.t=e,this.currentUser=Jt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){oe(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new rr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new rr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new rr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(oe(typeof r.accessToken=="string",31837,{l:r}),new i5(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return oe(e===null||typeof e=="string",2055,{h:e}),new Jt(e)}}class a5{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Jt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class l5{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new a5(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Jt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class DI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class c5{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ln(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){oe(this.o===void 0,3512);const r=i=>{i.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new DI(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(oe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new DI(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u5(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=u5(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function ge(t,e){return t<e?-1:t>e?1:0}function iv(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Eg(s)===Eg(i)?ge(s,i):Eg(s)?1:-1}return ge(t.length,e.length)}const d5=55296,h5=57343;function Eg(t){const e=t.charCodeAt(0);return e>=d5&&e<=h5}function cl(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}function $R(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI="__name__";class Ur{constructor(e,n,r){n===void 0?n=0:n>e.length&&te(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&te(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ur.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ur?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Ur.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return ge(e.length,n.length)}static compareSegments(e,n){const r=Ur.isNumericId(e),s=Ur.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Ur.extractNumericId(e).compare(Ur.extractNumericId(n)):iv(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ri.fromString(e.substring(4,e.length-2))}}class Fe extends Ur{construct(e,n,r){return new Fe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new G(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Fe(n)}static emptyPath(){return new Fe([])}}const f5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class st extends Ur{construct(e,n,r){return new st(e,n,r)}static isValidIdentifier(e){return f5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),st.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===NI}static keyField(){return new st([NI])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new G(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new G(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new G(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new G(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new st(n)}static emptyPath(){return new st([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.path=e}static fromPath(e){return new J(Fe.fromString(e))}static fromName(e){return new J(Fe.fromString(e).popFirst(5))}static empty(){return new J(Fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Fe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new J(new Fe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zR(t,e,n){if(!n)throw new G(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function qR(t,e,n,r){if(e===!0&&r===!0)throw new G(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function OI(t){if(!J.isDocumentKey(t))throw new G(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function VI(t){if(J.isDocumentKey(t))throw new G(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function HR(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Bp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":te(12329,{type:typeof t})}function Et(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new G(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Bp(t);throw new G(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function p5(t,e){if(e<=0)throw new G(B.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(t,e){const n={typeString:t};return e&&(n.value=e),n}function ad(t,e){if(!HR(t))throw new G(B.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new G(B.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI=-62135596800,MI=1e6;class je{static now(){return je.fromMillis(Date.now())}static fromDate(e){return je.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*MI);return new je(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new G(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<LI)throw new G(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/MI}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:je._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ad(e,je._jsonSchema))return new je(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-LI;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}je._jsonSchemaVersion="firestore/timestamp/1.0",je._jsonSchema={type:At("string",je._jsonSchemaVersion),seconds:At("number"),nanoseconds:At("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{static fromTimestamp(e){return new ue(e)}static min(){return new ue(new je(0,0))}static max(){return new ue(new je(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ul=-1;class Mf{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function ov(t){return t.fields.find(e=>e.kind===2)}function ho(t){return t.fields.filter(e=>e.kind!==2)}Mf.UNKNOWN_ID=-1;class Mh{constructor(e,n){this.fieldPath=e,this.kind=n}}class Nu{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Nu(0,Wn.min())}}function WR(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ue.fromTimestamp(r===1e9?new je(n+1,0):new je(n,r));return new Wn(s,J.empty(),e)}function KR(t){return new Wn(t.readTime,t.key,ul)}class Wn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Wn(ue.min(),J.empty(),ul)}static max(){return new Wn(ue.max(),J.empty(),ul)}}function cw(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=J.comparator(t.documentKey,e.documentKey),n!==0?n:ge(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class QR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xi(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==GR)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):L.reject(n)}static resolve(e){return new L((n,r)=>{n(e)})}static reject(e){return new L((n,r)=>{r(e)})}static waitFor(e){return new L((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=L.resolve(!1);for(const r of e)n=n.next(s=>s?L.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new L((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new L((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const On="SimpleDb";class $p{static open(e,n,r,s){try{return new $p(n,e.transaction(s,r))}catch(i){throw new Qc(n,i)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new rr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new Qc(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const s=uw(r.target.error);this.S.reject(new Qc(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(H(On,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new g5(n)}}class Ci{static delete(e){return H(On,"Removing database:",e),mo(GP().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!tw())return!1;if(Ci.F())return!0;const e=Wt(),n=Ci.M(e),r=0<n&&n<10,s=YR(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,Ci.M(Wt())===12.2&&_t("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(H(On,"Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new Qc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new G(B.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new G(B.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Qc(e,o))},s.onupgradeneeded=i=>{H(On,'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.N.k(o,s.transaction,i.oldVersion,this.version).next(()=>{H(On,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const a=$p.open(this.db,e,i?"readonly":"readwrite",r),l=s(a).next(c=>(a.C(),c)).catch(c=>(a.abort(c),L.reject(c))).toPromise();return l.catch(()=>{}),await a.D,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(H(On,"Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function YR(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class m5{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return mo(this.U.delete())}}class Qc extends G{constructor(e,n){super(B.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Ji(t){return t.name==="IndexedDbTransactionError"}class g5{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(H(On,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(H(On,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),mo(r)}add(e){return H(On,"ADD",this.store.name,e,e),mo(this.store.add(e))}get(e){return mo(this.store.get(e)).next(n=>(n===void 0&&(n=null),H(On,"GET",this.store.name,e,n),n))}delete(e){return H(On,"DELETE",this.store.name,e),mo(this.store.delete(e))}count(){return H(On,"COUNT",this.store.name),mo(this.store.count())}J(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new L((o,a)=>{i.onerror=l=>{a(l.target.error)},i.onsuccess=l=>{o(l.target.result)}})}{const i=this.cursor(r),o=[];return this.H(i,(a,l)=>{o.push(l)}).next(()=>o)}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new L((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}Z(e,n){H(On,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const s=this.cursor(r);return this.H(s,(i,o,a)=>a.delete())}ee(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.H(s,n)}te(e){const n=this.cursor({});return new L((r,s)=>{n.onerror=i=>{const o=uw(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}H(e,n){const r=[];return new L((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const l=new m5(a),c=n(a.primaryKey,a.value,l);if(c instanceof L){const d=c.catch(h=>(l.done(),L.reject(h)));r.push(d)}l.isDone?s():l.G===null?a.continue():a.continue(l.G)}}).next(()=>L.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function mo(t){return new L((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=uw(r.target.error);n(s)}})}let FI=!1;function uw(t){const e=Ci.M(Wt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new G("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return FI||(FI=!0,setTimeout(()=>{throw r},0)),r}}return t}const Yc="IndexBackfiller";class y5{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){H(Yc,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.ne.ie();H(Yc,`Documents written: ${n}`)}catch(n){Ji(n)?H(Yc,"Ignoring IndexedDB error during index backfill: ",n):await Xi(n)}await this.re(6e4)})}}class v5{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.se(n,e))}se(e,n){const r=new Set;let s=n,i=!0;return L.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return H(Yc,`Processing collection: ${o}`),this.oe(e,o,s).next(a=>{s-=a,r.add(o)});i=!1})).next(()=>n-s)}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next(i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this._e(s,i)).next(a=>(H(Yc,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}_e(e,n){let r=e;return n.changes.forEach((s,i)=>{const o=KR(i);cw(o,r)>0&&(r=o)}),new Wn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Sn.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oo=-1;function zp(t){return t==null}function Ou(t){return t===0&&1/t==-1/0}function XR(t){return typeof t=="number"&&Number.isInteger(t)&&!Ou(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ff="";function sn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=UI(e)),e=_5(t.get(n),e);return UI(e)}function _5(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case Ff:n+="";break;default:n+=i}}return n}function UI(t){return t+Ff+""}function Wr(t){const e=t.length;if(oe(e>=2,64408,{path:t}),e===2)return oe(t.charAt(0)===Ff&&t.charAt(1)==="",56145,{path:t}),Fe.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const o=t.indexOf(Ff,i);switch((o<0||o>n)&&te(50515,{path:t}),t.charAt(o+1)){case"":const a=t.substring(i,o);let l;s.length===0?l=a:(s+=a,l=s,s=""),r.push(l);break;case"":s+=t.substring(i,o),s+="\0";break;case"":s+=t.substring(i,o+1);break;default:te(61167,{path:t})}i=o+2}return new Fe(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo="remoteDocuments",ld="owner",ca="owner",Vu="mutationQueues",w5="userId",mr="mutations",jI="batchId",So="userMutationsIndex",BI=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fh(t,e){return[t,sn(e)]}function JR(t,e,n){return[t,sn(e),n]}const E5={},dl="documentMutations",Uf="remoteDocumentsV14",T5=["prefixPath","collectionGroup","readTime","documentId"],Uh="documentKeyIndex",I5=["prefixPath","collectionGroup","documentId"],ZR="collectionGroupIndex",S5=["collectionGroup","readTime","prefixPath","documentId"],Lu="remoteDocumentGlobal",av="remoteDocumentGlobalKey",hl="targets",eC="queryTargetsIndex",b5=["canonicalId","targetId"],fl="targetDocuments",A5=["targetId","path"],dw="documentTargetsIndex",x5=["path","targetId"],jf="targetGlobalKey",Vo="targetGlobal",Mu="collectionParents",P5=["collectionId","parent"],pl="clientMetadata",R5="clientId",qp="bundles",C5="bundleId",Hp="namedQueries",k5="name",hw="indexConfiguration",D5="indexId",lv="collectionGroupIndex",N5="collectionGroup",Xc="indexState",O5=["indexId","uid"],tC="sequenceNumberIndex",V5=["uid","sequenceNumber"],Jc="indexEntries",L5=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],nC="documentKeyIndex",M5=["indexId","uid","orderedDocumentKey"],Wp="documentOverlays",F5=["userId","collectionPath","documentId"],cv="collectionPathOverlayIndex",U5=["userId","collectionPath","largestBatchId"],rC="collectionGroupOverlayIndex",j5=["userId","collectionGroup","largestBatchId"],fw="globals",B5="name",sC=[Vu,mr,dl,fo,hl,ld,Vo,fl,pl,Lu,Mu,qp,Hp],$5=[...sC,Wp],iC=[Vu,mr,dl,Uf,hl,ld,Vo,fl,pl,Lu,Mu,qp,Hp,Wp],oC=iC,pw=[...oC,hw,Xc,Jc],z5=pw,aC=[...pw,fw],q5=aC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv extends QR{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function Dt(t,e){const n=re(t);return Ci.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $I(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Zi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function lC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e,n){this.comparator=e,this.root=n||zt.EMPTY}insert(e,n){return new Ge(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,zt.BLACK,null,null))}remove(e){return new Ge(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ah(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ah(this.root,e,this.comparator,!1)}getReverseIterator(){return new ah(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ah(this.root,e,this.comparator,!0)}}class ah{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??zt.RED,this.left=s??zt.EMPTY,this.right=i??zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new zt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return zt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw te(27949);return e+(this.isRed()?0:1)}}zt.EMPTY=null,zt.RED=!0,zt.BLACK=!1;zt.EMPTY=new class{constructor(){this.size=0}get key(){throw te(57766)}get value(){throw te(16141)}get color(){throw te(16727)}get left(){throw te(29726)}get right(){throw te(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new zt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e){this.comparator=e,this.data=new Ge(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new zI(this.data.getIterator())}getIteratorFrom(e){return new zI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ze)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ze(this.comparator);return n.data=e,n}}class zI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ua(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.fields=e,e.sort(st.comparator)}static empty(){return new bn([])}unionWith(e){let n=new ze(st.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new bn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return cl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new cC("Invalid base64 string: "+i):i}}(e);return new yt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new yt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yt.EMPTY_BYTE_STRING=new yt("");const H5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rs(t){if(oe(!!t,39018),typeof t=="string"){let e=0;const n=H5.exec(t);if(oe(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:nt(t.seconds),nanos:nt(t.nanos)}}function nt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Cs(t){return typeof t=="string"?yt.fromBase64String(t):yt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC="server_timestamp",dC="__type__",hC="__previous_value__",fC="__local_write_time__";function mw(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[dC])==null?void 0:r.stringValue)===uC}function Kp(t){const e=t.mapValue.fields[hC];return mw(e)?Kp(e):e}function Fu(t){const e=Rs(t.mapValue.fields[fC].timestampValue);return new je(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W5{constructor(e,n,r,s,i,o,a,l,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=d}}const Bf="(default)";class Ui{constructor(e,n){this.projectId=e,this.database=n||Bf}static empty(){return new Ui("","")}get isDefaultDatabase(){return this.database===Bf}isEqual(e){return e instanceof Ui&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gw="__type__",pC="__max__",gi={mapValue:{fields:{__type__:{stringValue:pC}}}},yw="__vector__",ml="value",jh={nullValue:"NULL_VALUE"};function ji(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?mw(t)?4:mC(t)?9007199254740991:Gp(t)?10:11:te(28295,{value:t})}function es(t,e){if(t===e)return!0;const n=ji(t);if(n!==ji(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Fu(t).isEqual(Fu(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Rs(s.timestampValue),a=Rs(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Cs(s.bytesValue).isEqual(Cs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return nt(s.geoPointValue.latitude)===nt(i.geoPointValue.latitude)&&nt(s.geoPointValue.longitude)===nt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return nt(s.integerValue)===nt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=nt(s.doubleValue),a=nt(i.doubleValue);return o===a?Ou(o)===Ou(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return cl(t.arrayValue.values||[],e.arrayValue.values||[],es);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if($I(o)!==$I(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!es(o[l],a[l])))return!1;return!0}(t,e);default:return te(52216,{left:t})}}function Uu(t,e){return(t.values||[]).find(n=>es(n,e))!==void 0}function Bi(t,e){if(t===e)return 0;const n=ji(t),r=ji(e);if(n!==r)return ge(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ge(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=nt(i.integerValue||i.doubleValue),l=nt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return qI(t.timestampValue,e.timestampValue);case 4:return qI(Fu(t),Fu(e));case 5:return iv(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Cs(i),l=Cs(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=ge(a[c],l[c]);if(d!==0)return d}return ge(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=ge(nt(i.latitude),nt(o.latitude));return a!==0?a:ge(nt(i.longitude),nt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return HI(t.arrayValue,e.arrayValue);case 10:return function(i,o){var p,f,E,y;const a=i.fields||{},l=o.fields||{},c=(p=a[ml])==null?void 0:p.arrayValue,d=(f=l[ml])==null?void 0:f.arrayValue,h=ge(((E=c==null?void 0:c.values)==null?void 0:E.length)||0,((y=d==null?void 0:d.values)==null?void 0:y.length)||0);return h!==0?h:HI(c,d)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===gi.mapValue&&o===gi.mapValue)return 0;if(i===gi.mapValue)return 1;if(o===gi.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const p=iv(l[h],d[h]);if(p!==0)return p;const f=Bi(a[l[h]],c[d[h]]);if(f!==0)return f}return ge(l.length,d.length)}(t.mapValue,e.mapValue);default:throw te(23264,{he:n})}}function qI(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ge(t,e);const n=Rs(t),r=Rs(e),s=ge(n.seconds,r.seconds);return s!==0?s:ge(n.nanos,r.nanos)}function HI(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Bi(n[s],r[s]);if(i)return i}return ge(n.length,r.length)}function gl(t){return dv(t)}function dv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Rs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Cs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return J.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=dv(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${dv(n.fields[o])}`;return s+"}"}(t.mapValue):te(61005,{value:t})}function Bh(t){switch(ji(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Kp(t);return e?16+Bh(e):16;case 5:return 2*t.stringValue.length;case 6:return Cs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Bh(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Zi(r.fields,(i,o)=>{s+=i.length+Bh(o)}),s}(t.mapValue);default:throw te(13486,{value:t})}}function ju(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function hv(t){return!!t&&"integerValue"in t}function Bu(t){return!!t&&"arrayValue"in t}function WI(t){return!!t&&"nullValue"in t}function KI(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function $h(t){return!!t&&"mapValue"in t}function Gp(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[gw])==null?void 0:r.stringValue)===yw}function Zc(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Zi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Zc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Zc(t.arrayValue.values[n]);return e}return{...t}}function mC(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===pC}const gC={mapValue:{fields:{[gw]:{stringValue:yw},[ml]:{arrayValue:{}}}}};function K5(t){return"nullValue"in t?jh:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?ju(Ui.empty(),J.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Gp(t)?gC:{mapValue:{}}:te(35942,{value:t})}function G5(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?ju(Ui.empty(),J.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?gC:"mapValue"in t?Gp(t)?{mapValue:{}}:gi:te(61959,{value:t})}function GI(t,e){const n=Bi(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function QI(t,e){const n=Bi(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.value=e}static empty(){return new nn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!$h(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zc(n)}setAll(e){let n=st.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Zc(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());$h(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return es(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];$h(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Zi(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new nn(Zc(this.value))}}function yC(t){const e=[];return Zi(t.fields,(n,r)=>{const s=new st([n]);if($h(r)){const i=yC(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new bn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new mt(e,0,ue.min(),ue.min(),ue.min(),nn.empty(),0)}static newFoundDocument(e,n,r,s){return new mt(e,1,n,ue.min(),r,s,0)}static newNoDocument(e,n){return new mt(e,2,n,ue.min(),ue.min(),nn.empty(),0)}static newUnknownDocument(e,n){return new mt(e,3,n,ue.min(),ue.min(),nn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e,n){this.position=e,this.inclusive=n}}function YI(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=J.comparator(J.fromName(o.referenceValue),n.key):r=Bi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function XI(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!es(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e,n="asc"){this.field=e,this.dir=n}}function Q5(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{}class De extends vC{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Y5(e,n,r):n==="array-contains"?new Z5(e,r):n==="in"?new SC(e,r):n==="not-in"?new eB(e,r):n==="array-contains-any"?new tB(e,r):new De(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new X5(e,r):new J5(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Bi(n,this.value)):n!==null&&ji(this.value)===ji(n)&&this.matchesComparison(Bi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Be extends vC{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Be(e,n)}matches(e){return vl(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function vl(t){return t.op==="and"}function fv(t){return t.op==="or"}function vw(t){return _C(t)&&vl(t)}function _C(t){for(const e of t.filters)if(e instanceof Be)return!1;return!0}function pv(t){if(t instanceof De)return t.field.canonicalString()+t.op.toString()+gl(t.value);if(vw(t))return t.filters.map(e=>pv(e)).join(",");{const e=t.filters.map(n=>pv(n)).join(",");return`${t.op}(${e})`}}function wC(t,e){return t instanceof De?function(r,s){return s instanceof De&&r.op===s.op&&r.field.isEqual(s.field)&&es(r.value,s.value)}(t,e):t instanceof Be?function(r,s){return s instanceof Be&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&wC(o,s.filters[a]),!0):!1}(t,e):void te(19439)}function EC(t,e){const n=t.filters.concat(e);return Be.create(n,t.op)}function TC(t){return t instanceof De?function(n){return`${n.field.canonicalString()} ${n.op} ${gl(n.value)}`}(t):t instanceof Be?function(n){return n.op.toString()+" {"+n.getFilters().map(TC).join(" ,")+"}"}(t):"Filter"}class Y5 extends De{constructor(e,n,r){super(e,n,r),this.key=J.fromName(r.referenceValue)}matches(e){const n=J.comparator(e.key,this.key);return this.matchesComparison(n)}}class X5 extends De{constructor(e,n){super(e,"in",n),this.keys=IC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class J5 extends De{constructor(e,n){super(e,"not-in",n),this.keys=IC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function IC(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>J.fromName(r.referenceValue))}class Z5 extends De{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Bu(n)&&Uu(n.arrayValue,this.value)}}class SC extends De{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Uu(this.value.arrayValue,n)}}class eB extends De{constructor(e,n){super(e,"not-in",n)}matches(e){if(Uu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Uu(this.value.arrayValue,n)}}class tB extends De{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Bu(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Uu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nB{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function mv(t,e=null,n=[],r=[],s=null,i=null,o=null){return new nB(t,e,n,r,s,i,o)}function Ho(t){const e=re(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>pv(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),zp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>gl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>gl(r)).join(",")),e.Te=n}return e.Te}function cd(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Q5(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!wC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!XI(t.startAt,e.startAt)&&XI(t.endAt,e.endAt)}function $f(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function zf(t,e){return t.filters.filter(n=>n instanceof De&&n.field.isEqual(e))}function JI(t,e,n){let r=jh,s=!0;for(const i of zf(t,e)){let o=jh,a=!0;switch(i.op){case"<":case"<=":o=K5(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=jh}GI({value:r,inclusive:s},{value:o,inclusive:a})<0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];GI({value:r,inclusive:s},{value:o,inclusive:n.inclusive})<0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}function ZI(t,e,n){let r=gi,s=!0;for(const i of zf(t,e)){let o=gi,a=!0;switch(i.op){case">=":case">":o=G5(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=gi}QI({value:r,inclusive:s},{value:o,inclusive:a})>0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];QI({value:r,inclusive:s},{value:o,inclusive:n.inclusive})>0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function bC(t,e,n,r,s,i,o,a){return new Ul(t,e,n,r,s,i,o,a)}function ud(t){return new Ul(t)}function eS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function AC(t){return t.collectionGroup!==null}function eu(t){const e=re(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ze(st.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new $u(i,r))}),n.has(st.keyField().canonicalString())||e.Ie.push(new $u(st.keyField(),r))}return e.Ie}function qn(t){const e=re(t);return e.Ee||(e.Ee=rB(e,eu(t))),e.Ee}function rB(t,e){if(t.limitType==="F")return mv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new $u(s.field,i)});const n=t.endAt?new yl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new yl(t.startAt.position,t.startAt.inclusive):null;return mv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function gv(t,e){const n=t.filters.concat([e]);return new Ul(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function qf(t,e,n){return new Ul(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Qp(t,e){return cd(qn(t),qn(e))&&t.limitType===e.limitType}function xC(t){return`${Ho(qn(t))}|lt:${t.limitType}`}function ya(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>TC(s)).join(", ")}]`),zp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>gl(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>gl(s)).join(",")),`Target(${r})`}(qn(t))}; limitType=${t.limitType})`}function dd(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):J.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of eu(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=YI(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,eu(r),s)||r.endAt&&!function(o,a,l){const c=YI(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,eu(r),s))}(t,e)}function PC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function RC(t){return(e,n)=>{let r=!1;for(const s of eu(t)){const i=sB(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function sB(t,e,n){const r=t.field.isKeyField()?J.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?Bi(l,c):te(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return te(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Zi(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return lC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iB=new Ge(J.comparator);function Un(){return iB}const CC=new Ge(J.comparator);function Oc(...t){let e=CC;for(const n of t)e=e.insert(n.key,n);return e}function kC(t){let e=CC;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Kr(){return tu()}function DC(){return tu()}function tu(){return new Ls(t=>t.toString(),(t,e)=>t.isEqual(e))}const oB=new Ge(J.comparator),aB=new ze(J.comparator);function xe(...t){let e=aB;for(const n of t)e=e.add(n);return e}const lB=new ze(ge);function _w(){return lB}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ww(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ou(e)?"-0":e}}function NC(t){return{integerValue:""+t}}function cB(t,e){return XR(e)?NC(e):ww(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(){this._=void 0}}function uB(t,e,n){return t instanceof _l?function(s,i){const o={fields:{[dC]:{stringValue:uC},[fC]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&mw(i)&&(i=Kp(i)),i&&(o.fields[hC]=i),{mapValue:o}}(n,e):t instanceof Wo?VC(t,e):t instanceof wl?LC(t,e):function(s,i){const o=OC(s,i),a=tS(o)+tS(s.Ae);return hv(o)&&hv(s.Ae)?NC(a):ww(s.serializer,a)}(t,e)}function dB(t,e,n){return t instanceof Wo?VC(t,e):t instanceof wl?LC(t,e):n}function OC(t,e){return t instanceof zu?function(r){return hv(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class _l extends Yp{}class Wo extends Yp{constructor(e){super(),this.elements=e}}function VC(t,e){const n=MC(e);for(const r of t.elements)n.some(s=>es(s,r))||n.push(r);return{arrayValue:{values:n}}}class wl extends Yp{constructor(e){super(),this.elements=e}}function LC(t,e){let n=MC(e);for(const r of t.elements)n=n.filter(s=>!es(s,r));return{arrayValue:{values:n}}}class zu extends Yp{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function tS(t){return nt(t.integerValue||t.doubleValue)}function MC(t){return Bu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e,n){this.field=e,this.transform=n}}function hB(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Wo&&s instanceof Wo||r instanceof wl&&s instanceof wl?cl(r.elements,s.elements,es):r instanceof zu&&s instanceof zu?es(r.Ae,s.Ae):r instanceof _l&&s instanceof _l}(t.transform,e.transform)}class fB{constructor(e,n){this.version=e,this.transformResults=n}}class rn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new rn}static exists(e){return new rn(void 0,e)}static updateTime(e){return new rn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Xp{}function FC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Jp(t.key,rn.none()):new jl(t.key,t.data,rn.none());{const n=t.data,r=nn.empty();let s=new ze(st.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Ms(t.key,r,new bn(s.toArray()),rn.none())}}function pB(t,e,n){t instanceof jl?function(s,i,o){const a=s.value.clone(),l=rS(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ms?function(s,i,o){if(!zh(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=rS(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(UC(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function nu(t,e,n,r){return t instanceof jl?function(i,o,a,l){if(!zh(i.precondition,o))return a;const c=i.value.clone(),d=sS(i.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ms?function(i,o,a,l){if(!zh(i.precondition,o))return a;const c=sS(i.fieldTransforms,l,o),d=o.data;return d.setAll(UC(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,o,a){return zh(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function mB(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=OC(r.transform,s||null);i!=null&&(n===null&&(n=nn.empty()),n.set(r.field,i))}return n||null}function nS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&cl(r,s,(i,o)=>hB(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class jl extends Xp{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ms extends Xp{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function UC(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function rS(t,e,n){const r=new Map;oe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,dB(o,a,n[s]))}return r}function sS(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,uB(i,o,e))}return r}class Jp extends Xp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class jC extends Xp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&pB(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=nu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=nu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=DC();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=FC(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(ue.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),xe())}isEqual(e){return this.batchId===e.batchId&&cl(this.mutations,e.mutations,(n,r)=>nS(n,r))&&cl(this.baseMutations,e.baseMutations,(n,r)=>nS(n,r))}}class Iw{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){oe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return oB}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Iw(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gB{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var It,Ve;function yB(t){switch(t){case B.OK:return te(64938);case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0;default:return te(15467,{code:t})}}function BC(t){if(t===void 0)return _t("GRPC error has no .code"),B.UNKNOWN;switch(t){case It.OK:return B.OK;case It.CANCELLED:return B.CANCELLED;case It.UNKNOWN:return B.UNKNOWN;case It.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case It.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case It.INTERNAL:return B.INTERNAL;case It.UNAVAILABLE:return B.UNAVAILABLE;case It.UNAUTHENTICATED:return B.UNAUTHENTICATED;case It.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case It.NOT_FOUND:return B.NOT_FOUND;case It.ALREADY_EXISTS:return B.ALREADY_EXISTS;case It.PERMISSION_DENIED:return B.PERMISSION_DENIED;case It.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case It.ABORTED:return B.ABORTED;case It.OUT_OF_RANGE:return B.OUT_OF_RANGE;case It.UNIMPLEMENTED:return B.UNIMPLEMENTED;case It.DATA_LOSS:return B.DATA_LOSS;default:return te(39323,{code:t})}}(Ve=It||(It={}))[Ve.OK=0]="OK",Ve[Ve.CANCELLED=1]="CANCELLED",Ve[Ve.UNKNOWN=2]="UNKNOWN",Ve[Ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ve[Ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ve[Ve.NOT_FOUND=5]="NOT_FOUND",Ve[Ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ve[Ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ve[Ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ve[Ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ve[Ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ve[Ve.ABORTED=10]="ABORTED",Ve[Ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ve[Ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ve[Ve.INTERNAL=13]="INTERNAL",Ve[Ve.UNAVAILABLE=14]="UNAVAILABLE",Ve[Ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vB(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _B=new Ri([4294967295,4294967295],0);function iS(t){const e=vB().encode(t),n=new NR;return n.update(e),new Uint8Array(n.digest())}function oS(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Ri([n,r],0),new Ri([s,i],0)]}class bw{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Vc(`Invalid padding: ${n}`);if(r<0)throw new Vc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Vc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Vc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ri.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Ri.fromNumber(r)));return s.compare(_B)===1&&(s=new Ri([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=iS(e),[r,s]=oS(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new bw(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=iS(e),[r,s]=oS(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Vc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,fd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new hd(ue.min(),s,new Ge(ge),Un(),xe())}}class fd{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new fd(r,n,xe(),xe(),xe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class $C{constructor(e,n){this.targetId=e,this.Ce=n}}class zC{constructor(e,n,r=yt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class aS{constructor(){this.ve=0,this.Fe=lS(),this.Me=yt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=xe(),n=xe(),r=xe();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:te(38017,{changeType:i})}}),new fd(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=lS()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,oe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class wB{constructor(e){this.Ge=e,this.ze=new Map,this.je=Un(),this.Je=lh(),this.He=lh(),this.Ye=new Ge(ge)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:te(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if($f(i))if(r===0){const o=new J(i.path);this.et(n,o,mt.newNoDocument(o,ue.min()))}else oe(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Cs(r).toUint8Array()}catch(l){if(l instanceof cC)return Fi("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new bw(o,s,i)}catch(l){return Fi(l instanceof Vc?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const a=this.ot(o);if(a){if(i.current&&$f(a.target)){const l=new J(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,mt.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=xe();this.He.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new hd(e,n,this.Ye,this.je,r);return this.je=Un(),this.Je=lh(),this.He=lh(),this.Ye=new Ge(ge),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new aS,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new ze(ge),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new ze(ge),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new aS),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function lh(){return new Ge(J.comparator)}function lS(){return new Ge(J.comparator)}const EB={asc:"ASCENDING",desc:"DESCENDING"},TB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},IB={and:"AND",or:"OR"};class SB{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function yv(t,e){return t.useProto3Json||zp(e)?e:{value:e}}function El(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function qC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function bB(t,e){return El(t,e.toTimestamp())}function fn(t){return oe(!!t,49232),ue.fromTimestamp(function(n){const r=Rs(n);return new je(r.seconds,r.nanos)}(t))}function Aw(t,e){return vv(t,e).canonicalString()}function vv(t,e){const n=function(s){return new Fe(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function HC(t){const e=Fe.fromString(t);return oe(ek(e),10190,{key:e.toString()}),e}function Hf(t,e){return Aw(t.databaseId,e.path)}function Lo(t,e){const n=HC(e);if(n.get(1)!==t.databaseId.projectId)throw new G(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new G(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new J(GC(n))}function WC(t,e){return Aw(t.databaseId,e)}function KC(t){const e=HC(t);return e.length===4?Fe.emptyPath():GC(e)}function _v(t){return new Fe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function GC(t){return oe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function cS(t,e,n){return{name:Hf(t,e),fields:n.value.mapValue.fields}}function AB(t,e,n){const r=Lo(t,e.name),s=fn(e.updateTime),i=e.createTime?fn(e.createTime):ue.min(),o=new nn({mapValue:{fields:e.fields}}),a=mt.newFoundDocument(r,s,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function xB(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:te(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(oe(d===void 0||typeof d=="string",58123),yt.fromBase64String(d||"")):(oe(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),yt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?B.UNKNOWN:BC(c.code);return new G(d,c.message||"")}(o);n=new zC(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Lo(t,r.document.name),i=fn(r.document.updateTime),o=r.document.createTime?fn(r.document.createTime):ue.min(),a=new nn({mapValue:{fields:r.document.fields}}),l=mt.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new qh(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Lo(t,r.document),i=r.readTime?fn(r.readTime):ue.min(),o=mt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new qh([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Lo(t,r.document),i=r.removedTargetIds||[];n=new qh([],i,s,null)}else{if(!("filter"in e))return te(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new gB(s,i),a=r.targetId;n=new $C(a,o)}}return n}function Wf(t,e){let n;if(e instanceof jl)n={update:cS(t,e.key,e.value)};else if(e instanceof Jp)n={delete:Hf(t,e.key)};else if(e instanceof Ms)n={update:cS(t,e.key,e.data),updateMask:NB(e.fieldMask)};else{if(!(e instanceof jC))return te(16599,{Vt:e.type});n={verify:Hf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof _l)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Wo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof wl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof zu)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw te(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:bB(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:te(27497)}(t,e.precondition)),n}function wv(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?rn.updateTime(fn(i.updateTime)):i.exists!==void 0?rn.exists(i.exists):rn.none()}(e.currentDocument):rn.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(o,a){let l=null;if("setToServerValue"in a)oe(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),l=new _l;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];l=new Wo(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];l=new wl(d)}else"increment"in a?l=new zu(o,a.increment):te(16584,{proto:a});const c=st.fromServerFormat(a.fieldPath);return new Ew(c,l)}(t,s)):[];if(e.update){e.update.name;const s=Lo(t,e.update.name),i=new nn({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const c=l.fieldPaths||[];return new bn(c.map(d=>st.fromServerFormat(d)))}(e.updateMask);return new Ms(s,i,o,n,r)}return new jl(s,i,n,r)}if(e.delete){const s=Lo(t,e.delete);return new Jp(s,n)}if(e.verify){const s=Lo(t,e.verify);return new jC(s,n)}return te(1463,{proto:e})}function PB(t,e){return t&&t.length>0?(oe(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?fn(s.updateTime):fn(i);return o.isEqual(ue.min())&&(o=fn(i)),new fB(o,s.transformResults||[])}(n,e))):[]}function QC(t,e){return{documents:[WC(t,e.path)]}}function YC(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=WC(t,s);const i=function(c){if(c.length!==0)return ZC(Be.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(d=>function(p){return{field:va(p.field),direction:CB(p.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=yv(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:s}}function XC(t){let e=KC(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){oe(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(h){const p=JC(h);return p instanceof Be&&vw(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(p=>function(E){return new $u(_a(E.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(h){let p;return p=typeof h=="object"?h.value:h,zp(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(h){const p=!!h.before,f=h.values||[];return new yl(f,p)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const p=!h.before,f=h.values||[];return new yl(f,p)}(n.endAt)),bC(e,s,o,i,a,"F",l,c)}function RB(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function JC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=_a(n.unaryFilter.field);return De.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=_a(n.unaryFilter.field);return De.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=_a(n.unaryFilter.field);return De.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=_a(n.unaryFilter.field);return De.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return te(61313);default:return te(60726)}}(t):t.fieldFilter!==void 0?function(n){return De.create(_a(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return te(58110);default:return te(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Be.create(n.compositeFilter.filters.map(r=>JC(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return te(1026)}}(n.compositeFilter.op))}(t):te(30097,{filter:t})}function CB(t){return EB[t]}function kB(t){return TB[t]}function DB(t){return IB[t]}function va(t){return{fieldPath:t.canonicalString()}}function _a(t){return st.fromServerFormat(t.fieldPath)}function ZC(t){return t instanceof De?function(n){if(n.op==="=="){if(KI(n.value))return{unaryFilter:{field:va(n.field),op:"IS_NAN"}};if(WI(n.value))return{unaryFilter:{field:va(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(KI(n.value))return{unaryFilter:{field:va(n.field),op:"IS_NOT_NAN"}};if(WI(n.value))return{unaryFilter:{field:va(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:va(n.field),op:kB(n.op),value:n.value}}}(t):t instanceof Be?function(n){const r=n.getFilters().map(s=>ZC(s));return r.length===1?r[0]:{compositeFilter:{op:DB(n.op),filters:r}}}(t):te(54877,{filter:t})}function NB(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function ek(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e,n,r,s,i=ue.min(),o=ue.min(),a=yt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ps(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ps(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ps(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ps(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(e){this.yt=e}}function OB(t,e){let n;if(e.document)n=AB(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=J.fromSegments(e.noDocument.path),s=Go(e.noDocument.readTime);n=mt.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return te(56709);{const r=J.fromSegments(e.unknownDocument.path),s=Go(e.unknownDocument.version);n=mt.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime(function(s){const i=new je(s[0],s[1]);return ue.fromTimestamp(i)}(e.readTime)),n}function uS(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Kf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,o){return{name:Hf(i,o.key),fields:o.data.value.mapValue.fields,updateTime:El(i,o.version.toTimestamp()),createTime:El(i,o.createTime.toTimestamp())}}(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Ko(e.version)};else{if(!e.isUnknownDocument())return te(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:Ko(e.version)}}return r}function Kf(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ko(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Go(t){const e=new je(t.seconds,t.nanoseconds);return ue.fromTimestamp(e)}function go(t,e){const n=(e.baseMutations||[]).map(i=>wv(t.yt,i));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map(i=>wv(t.yt,i)),s=je.fromMillis(e.localWriteTimeMs);return new Tw(e.batchId,s,n,r)}function Lc(t){const e=Go(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Go(t.lastLimboFreeSnapshotVersion):ue.min();let r;return r=function(i){return i.documents!==void 0}(t.query)?function(i){const o=i.documents.length;return oe(o===1,1966,{count:o}),qn(ud(KC(i.documents[0])))}(t.query):function(i){return qn(XC(i))}(t.query),new ps(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,yt.fromBase64String(t.resumeToken))}function nk(t,e){const n=Ko(e.snapshotVersion),r=Ko(e.lastLimboFreeSnapshotVersion);let s;s=$f(e.target)?QC(t.yt,e.target):YC(t.yt,e.target).ft;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ho(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function rk(t){const e=XC({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?qf(e,e.limit,"L"):e}function Tg(t,e){return new Sw(e.largestBatchId,wv(t.yt,e.overlayMutation))}function dS(t,e){const n=e.path.lastSegment();return[t,sn(e.path.popLast()),n]}function hS(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Ko(r.readTime),documentKey:sn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VB{getBundleMetadata(e,n){return fS(e).get(n).next(r=>{if(r)return function(i){return{id:i.bundleId,createTime:Go(i.createTime),version:i.version}}(r)})}saveBundleMetadata(e,n){return fS(e).put(function(s){return{bundleId:s.id,createTime:Ko(fn(s.createTime)),version:s.version}}(n))}getNamedQuery(e,n){return pS(e).get(n).next(r=>{if(r)return function(i){return{name:i.name,query:rk(i.bundledQuery),readTime:Go(i.readTime)}}(r)})}saveNamedQuery(e,n){return pS(e).put(function(s){return{name:s.name,readTime:Ko(fn(s.readTime)),bundledQuery:s.bundledQuery}}(n))}}function fS(t){return Dt(t,qp)}function pS(t){return Dt(t,Hp)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new Zp(e,r)}getOverlay(e,n){return vc(e).get(dS(this.userId,n)).next(r=>r?Tg(this.serializer,r):null)}getOverlays(e,n){const r=Kr();return L.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){const s=[];return r.forEach((i,o)=>{const a=new Sw(n,o);s.push(this.St(e,a))}),L.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach(o=>s.add(sn(o.getCollectionPath())));const i=[];return s.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(vc(e).Z(cv,a))}),L.waitFor(i)}getOverlaysForCollection(e,n,r){const s=Kr(),i=sn(n),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return vc(e).J(cv,o).next(a=>{for(const l of a){const c=Tg(this.serializer,l);s.set(c.getKey(),c)}return s})}getOverlaysForCollectionGroup(e,n,r,s){const i=Kr();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return vc(e).ee({index:rC,range:a},(l,c,d)=>{const h=Tg(this.serializer,c);i.size()<s||h.largestBatchId===o?(i.set(h.getKey(),h),o=h.largestBatchId):d.done()}).next(()=>i)}St(e,n){return vc(e).put(function(s,i,o){const[a,l,c]=dS(i,o.mutation.key);return{userId:i,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Wf(s.yt,o.mutation)}}(this.serializer,this.userId,n))}}function vc(t){return Dt(t,Wp)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LB{bt(e){return Dt(e,fw)}getSessionToken(e){return this.bt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?yt.fromUint8Array(r):yt.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(nt(e.integerValue));else if("doubleValue"in e){const r=nt(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),Ou(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=Rs(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(Cs(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?mC(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):Gp(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):te(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const s of Object.keys(r))this.Ot(s,n),this.Ct(r[s],n)}kt(e,n){var o,a;const r=e.fields||{};this.Ft(n,53);const s=ml,i=((a=(o=r[s].arrayValue)==null?void 0:o.values)==null?void 0:a.length)||0;this.Ft(n,15),n.Mt(nt(i)),this.Ot(s,n),this.Ct(r[s],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const s of r)this.Ct(s,n)}Lt(e,n){this.Ft(n,37),J.fromName(e).path.forEach(r=>{this.Ft(n,60),this.Ut(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}yo.Kt=new yo;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da=255;function MB(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function mS(t){const e=64-function(r){let s=0;for(let i=0;i<8;++i){const o=MB(255&r[i]);if(s+=o,o!==8)break}return s}(t);return Math.ceil(e/8)}class FB{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const s=n.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const s=n.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(e){const n=this.en(e),r=mS(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}nn(e){const n=this.en(e),r=mS(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}rn(){this.sn(da),this.sn(255)}_n(){this.an(da),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===da?(this.sn(da),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===da?(this.an(da),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class UB{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class jB{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class _c{constructor(){this.cn=new FB,this.ln=new UB(this.cn),this.hn=new jB(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e,n,r,s){this.Tn=e,this.In=n,this.En=r,this.dn=s}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new vo(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:Hh(this.En),directionalValue:Hh(this.dn),orderedDocumentKey:Hh(n),documentKey:r.path.toArray()}}Vn(e,n,r){const s=this.Rn(e,n,r);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function Xs(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=gS(t.En,e.En),n!==0?n:(n=gS(t.dn,e.dn),n!==0?n:J.comparator(t.In,e.In)))}function gS(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function Hh(t){return eR()?function(n){let r="";for(let s=0;s<n.length;s++)r+=String.fromCharCode(n[s]);return r}(t):t}function yS(t){return typeof t!="string"?t:function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(t)}class vS{constructor(e){this.mn=new ze((n,r)=>st.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(oe(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=ov(e);if(n!==void 0&&!this.wn(n))return!1;const r=ho(e);let s=new Set,i=0,o=0;for(;i<r.length&&this.wn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.mn.size>0){const a=this.mn.getIterator().getNext();if(!s.has(a.field.canonicalString())){const l=r[i];if(!this.Sn(a,l)||!this.bn(this.fn[o++],l))return!1}++i}for(;i<r.length;++i){const a=r[i];if(o>=this.fn.length||!this.bn(this.fn[o++],a))return!1}return!0}Dn(){if(this.pn)return null;let e=new ze(st.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Mh(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Mh(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Mh(r.field,r.dir==="asc"?0:1)));return new Mf(Mf.UNKNOWN_ID,this.collectionId,n,Nu.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sk(t){var n,r;if(oe(t instanceof De||t instanceof Be,20012),t instanceof De){if(t instanceof SC){const s=((r=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:r.map(i=>De.create(t.field,"==",i)))||[];return Be.create(s,"or")}return t}const e=t.filters.map(s=>sk(s));return Be.create(e,t.op)}function BB(t){if(t.getFilters().length===0)return[];const e=Iv(sk(t));return oe(ik(e),7391),Ev(e)||Tv(e)?[e]:e.getFilters()}function Ev(t){return t instanceof De}function Tv(t){return t instanceof Be&&vw(t)}function ik(t){return Ev(t)||Tv(t)||function(n){if(n instanceof Be&&fv(n)){for(const r of n.getFilters())if(!Ev(r)&&!Tv(r))return!1;return!0}return!1}(t)}function Iv(t){if(oe(t instanceof De||t instanceof Be,34018),t instanceof De)return t;if(t.filters.length===1)return Iv(t.filters[0]);const e=t.filters.map(r=>Iv(r));let n=Be.create(e,t.op);return n=Gf(n),ik(n)?n:(oe(n instanceof Be,64498),oe(vl(n),40251),oe(n.filters.length>1,57927),n.filters.reduce((r,s)=>xw(r,s)))}function xw(t,e){let n;return oe(t instanceof De||t instanceof Be,38388),oe(e instanceof De||e instanceof Be,25473),n=t instanceof De?e instanceof De?function(s,i){return Be.create([s,i],"and")}(t,e):_S(t,e):e instanceof De?_S(e,t):function(s,i){if(oe(s.filters.length>0&&i.filters.length>0,48005),vl(s)&&vl(i))return EC(s,i.getFilters());const o=fv(s)?s:i,a=fv(s)?i:s,l=o.filters.map(c=>xw(c,a));return Be.create(l,"or")}(t,e),Gf(n)}function _S(t,e){if(vl(e))return EC(e,t.getFilters());{const n=e.filters.map(r=>xw(t,r));return Be.create(n,"or")}}function Gf(t){if(oe(t instanceof De||t instanceof Be,11850),t instanceof De)return t;const e=t.getFilters();if(e.length===1)return Gf(e[0]);if(_C(t))return t;const n=e.map(s=>Gf(s)),r=[];return n.forEach(s=>{s instanceof De?r.push(s):s instanceof Be&&(s.op===t.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:Be.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $B{constructor(){this.Cn=new Pw}addToCollectionParentIndex(e,n){return this.Cn.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(Wn.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(Wn.min())}updateCollectionGroup(e,n,r){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class Pw{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new ze(Fe.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ze(Fe.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS="IndexedDbIndexManager",ch=new Uint8Array(0);class zB{constructor(e,n){this.databaseId=n,this.vn=new Pw,this.Fn=new Ls(r=>Ho(r),(r,s)=>cd(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(()=>{this.vn.add(n)});const i={collectionId:r,parent:sn(s)};return ES(e).put(i)}return L.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[$R(n),""],!1,!0);return ES(e).J(s).next(i=>{for(const o of i){if(o.collectionId!==n)break;r.push(Wr(o.parent))}return r})}addFieldIndex(e,n){const r=wc(e),s=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete s.indexId;const i=r.add(s);if(n.indexState){const o=fa(e);return i.next(a=>{o.put(hS(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return i.next()}deleteFieldIndex(e,n){const r=wc(e),s=fa(e),i=ha(e);return r.delete(n.indexId).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=wc(e),r=ha(e),s=fa(e);return n.Z().next(()=>r.Z()).next(()=>s.Z())}createTargetIndexes(e,n){return L.forEach(this.Mn(n),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const i=new vS(r).Dn();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,n){const r=ha(e);let s=!0;const i=new Map;return L.forEach(this.Mn(n),o=>this.xn(e,o).next(a=>{s&&(s=!!a),i.set(o,a)})).next(()=>{if(s){let o=xe();const a=[];return L.forEach(i,(l,c)=>{H(wS,`Using index ${function(I){return`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map(D=>`${D.fieldPath}:${D.kind}`).join(",")}`}(l)} to execute ${Ho(n)}`);const d=function(I,D){const O=ov(D);if(O===void 0)return null;for(const V of zf(I,O.fieldPath))switch(V.op){case"array-contains-any":return V.value.arrayValue.values||[];case"array-contains":return[V.value]}return null}(c,l),h=function(I,D){const O=new Map;for(const V of ho(D))for(const S of zf(I,V.fieldPath))switch(S.op){case"==":case"in":O.set(V.fieldPath.canonicalString(),S.value);break;case"not-in":case"!=":return O.set(V.fieldPath.canonicalString(),S.value),Array.from(O.values())}return null}(c,l),p=function(I,D){const O=[];let V=!0;for(const S of ho(D)){const T=S.kind===0?JI(I,S.fieldPath,I.startAt):ZI(I,S.fieldPath,I.startAt);O.push(T.value),V&&(V=T.inclusive)}return new yl(O,V)}(c,l),f=function(I,D){const O=[];let V=!0;for(const S of ho(D)){const T=S.kind===0?ZI(I,S.fieldPath,I.endAt):JI(I,S.fieldPath,I.endAt);O.push(T.value),V&&(V=T.inclusive)}return new yl(O,V)}(c,l),E=this.On(l,c,p),y=this.On(l,c,f),v=this.Nn(l,c,h),_=this.Bn(l.indexId,d,E,p.inclusive,y,f.inclusive,v);return L.forEach(_,w=>r.Y(w,n.limit).next(I=>{I.forEach(D=>{const O=J.fromSegments(D.documentKey);o.has(O)||(o=o.add(O),a.push(O))})}))}).next(()=>a)}return L.resolve(null)})}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=BB(Be.create(e.filters,"and")).map(r=>mv(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,n),n)}Bn(e,n,r,s,i,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,i.length),c=l/(n!=null?n.length:1),d=[];for(let h=0;h<l;++h){const p=n?this.Ln(n[h/c]):ch,f=this.kn(e,p,r[h%c],s),E=this.qn(e,p,i[h%c],o),y=a.map(v=>this.kn(e,p,v,!0));d.push(...this.createRange(f,E,y))}return d}kn(e,n,r,s){const i=new vo(e,J.empty(),n,r);return s?i:i.An()}qn(e,n,r,s){const i=new vo(e,J.empty(),n,r);return s?i.An():i}xn(e,n){const r=new vS(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let o=null;for(const a of i)r.yn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const s=this.Mn(n);return L.forEach(s,i=>this.xn(e,i).next(o=>{o?r!==0&&o.fields.length<function(l){let c=new ze(st.comparator),d=!1;for(const h of l.filters)for(const p of h.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?d=!0:c=c.add(p.field));for(const h of l.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(d?1:0)}(i)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&s.length>1&&r===2?1:r)}Qn(e,n){const r=new _c;for(const s of ho(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const o=r.Pn(s.kind);yo.Kt.Dt(i,o)}return r.un()}Ln(e){const n=new _c;return yo.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new _c;return yo.Kt.Dt(ju(this.databaseId,n),r.Pn(function(i){const o=ho(i);return o.length===0?0:o[o.length-1].kind}(e))),r.un()}Nn(e,n,r){if(r===null)return[];let s=[];s.push(new _c);let i=0;for(const o of ho(e)){const a=r[i++];for(const l of s)if(this.Un(n,o.fieldPath)&&Bu(a))s=this.Kn(s,o,a);else{const c=l.Pn(o.kind);yo.Kt.Dt(a,c)}}return this.Wn(s)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const a of s){const l=new _c;l.seed(a.un()),yo.Kt.Dt(o,l.Pn(n.kind)),i.push(l)}return i}Un(e,n){return!!e.filters.find(r=>r instanceof De&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=wc(e),s=fa(e);return(n?r.J(lv,IDBKeyRange.bound(n,n)):r.J()).next(i=>{const o=[];return L.forEach(i,a=>s.get([a.indexId,this.uid]).next(l=>{o.push(function(d,h){const p=h?new Nu(h.sequenceNumber,new Wn(Go(h.readTime),new J(Wr(h.documentKey)),h.largestBatchId)):Nu.empty(),f=d.fields.map(([E,y])=>new Mh(st.fromServerFormat(E),y));return new Mf(d.indexId,d.collectionGroup,f,p)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:ge(r.collectionGroup,s.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const s=wc(e),i=fa(e);return this.Gn(e).next(o=>s.J(lv,IDBKeyRange.bound(n,n)).next(a=>L.forEach(a,l=>i.put(hS(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return L.forEach(n,(s,i)=>{const o=r.get(s.collectionGroup);return(o?L.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next(a=>(r.set(s.collectionGroup,a),L.forEach(a,l=>this.zn(e,s,l).next(c=>{const d=this.jn(i,l);return c.isEqual(d)?L.resolve():this.Jn(e,i,l,c,d)}))))})}Hn(e,n,r,s){return ha(e).put(s.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,s){return ha(e).delete(s.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const s=ha(e);let i=new ze(Xs);return s.ee({index:nC,range:IDBKeyRange.only([r.indexId,this.uid,Hh(this.$n(r,n))])},(o,a)=>{i=i.add(new vo(r.indexId,n,yS(a.arrayValue),yS(a.directionalValue)))}).next(()=>i)}jn(e,n){let r=new ze(Xs);const s=this.Qn(n,e);if(s==null)return r;const i=ov(n);if(i!=null){const o=e.data.field(i.fieldPath);if(Bu(o))for(const a of o.arrayValue.values||[])r=r.add(new vo(n.indexId,e.key,this.Ln(a),s))}else r=r.add(new vo(n.indexId,e.key,ch,s));return r}Jn(e,n,r,s,i){H(wS,"Updating index entries for document '%s'",n.key);const o=[];return function(l,c,d,h,p){const f=l.getIterator(),E=c.getIterator();let y=ua(f),v=ua(E);for(;y||v;){let _=!1,w=!1;if(y&&v){const I=d(y,v);I<0?w=!0:I>0&&(_=!0)}else y!=null?w=!0:_=!0;_?(h(v),v=ua(E)):w?(p(y),y=ua(f)):(y=ua(f),v=ua(E))}}(s,i,Xs,a=>{o.push(this.Hn(e,n,r,a))},a=>{o.push(this.Yn(e,n,r,a))}),L.waitFor(o)}Gn(e){let n=1;return fa(e).ee({index:tC,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,i)=>{i.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Xs(o,a)).filter((o,a,l)=>!a||Xs(o,l[a-1])!==0);const s=[];s.push(e);for(const o of r){const a=Xs(o,e),l=Xs(o,n);if(a===0)s[0]=e.An();else if(a>0&&l<0)s.push(o),s.push(o.An());else if(l>0)break}s.push(n);const i=[];for(let o=0;o<s.length;o+=2){if(this.Zn(s[o],s[o+1]))return[];const a=s[o].Vn(this.uid,ch,J.empty()),l=s[o+1].Vn(this.uid,ch,J.empty());i.push(IDBKeyRange.bound(a,l))}return i}Zn(e,n){return Xs(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(TS)}getMinOffset(e,n){return L.mapArray(this.Mn(n),r=>this.xn(e,r).next(s=>s||te(44426))).next(TS)}}function ES(t){return Dt(t,Mu)}function ha(t){return Dt(t,Jc)}function wc(t){return Dt(t,hw)}function fa(t){return Dt(t,Xc)}function TS(t){oe(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;cw(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new Wn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ok=41943040;class Zt{static withCacheSize(e){return new Zt(e,Zt.DEFAULT_COLLECTION_PERCENTILE,Zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ak(t,e,n){const r=t.store(mr),s=t.store(dl),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.ee({range:o},(d,h,p)=>(a++,p.delete()));i.push(l.next(()=>{oe(a===1,47070,{batchId:n.batchId})}));const c=[];for(const d of n.mutations){const h=JR(e,d.key.path,n.batchId);i.push(s.delete(h)),c.push(d.key)}return L.waitFor(i).next(()=>c)}function Qf(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw te(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zt.DEFAULT_COLLECTION_PERCENTILE=10,Zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zt.DEFAULT=new Zt(ok,Zt.DEFAULT_COLLECTION_PERCENTILE,Zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zt.DISABLED=new Zt(-1,0,0);class em{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.Xn={}}static wt(e,n,r,s){oe(e.uid!=="",64387);const i=e.isAuthenticated()?e.uid:"";return new em(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Js(e).ee({index:So,range:r},(s,i,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,s){const i=wa(e),o=Js(e);return o.add({}).next(a=>{oe(typeof a=="number",49019);const l=new Tw(a,n,r,s),c=function(f,E,y){const v=y.baseMutations.map(w=>Wf(f.yt,w)),_=y.mutations.map(w=>Wf(f.yt,w));return{userId:E,batchId:y.batchId,localWriteTimeMs:y.localWriteTime.toMillis(),baseMutations:v,mutations:_}}(this.serializer,this.userId,l),d=[];let h=new ze((p,f)=>ge(p.canonicalString(),f.canonicalString()));for(const p of s){const f=JR(this.userId,p.key.path,a);h=h.add(p.key.path.popLast()),d.push(o.put(c)),d.push(i.put(f,E5))}return h.forEach(p=>{d.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.Xn[a]=l.keys()}),L.waitFor(d).next(()=>l)})}lookupMutationBatch(e,n){return Js(e).get(n).next(r=>r?(oe(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),go(this.serializer,r)):null)}er(e,n){return this.Xn[n]?L.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const s=r.keys();return this.Xn[n]=s,s}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return Js(e).ee({index:So,range:s},(o,a,l)=>{a.userId===this.userId&&(oe(a.batchId>=r,47524,{tr:r}),i=go(this.serializer,a)),l.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Oo;return Js(e).ee({index:So,range:n,reverse:!0},(s,i,o)=>{r=i.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,Oo],[this.userId,Number.POSITIVE_INFINITY]);return Js(e).J(So,n).next(r=>r.map(s=>go(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Fh(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return wa(e).ee({range:s},(o,a,l)=>{const[c,d,h]=o,p=Wr(d);if(c===this.userId&&n.path.isEqual(p))return Js(e).get(h).next(f=>{if(!f)throw te(61480,{nr:o,batchId:h});oe(f.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:f.userId,batchId:h}),i.push(go(this.serializer,f))});l.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ze(ge);const s=[];return n.forEach(i=>{const o=Fh(this.userId,i.path),a=IDBKeyRange.lowerBound(o),l=wa(e).ee({range:a},(c,d,h)=>{const[p,f,E]=c,y=Wr(f);p===this.userId&&i.path.isEqual(y)?r=r.add(E):h.done()});s.push(l)}),L.waitFor(s).next(()=>this.rr(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=Fh(this.userId,r),o=IDBKeyRange.lowerBound(i);let a=new ze(ge);return wa(e).ee({range:o},(l,c,d)=>{const[h,p,f]=l,E=Wr(p);h===this.userId&&r.isPrefixOf(E)?E.length===s&&(a=a.add(f)):d.done()}).next(()=>this.rr(e,a))}rr(e,n){const r=[],s=[];return n.forEach(i=>{s.push(Js(e).get(i).next(o=>{if(o===null)throw te(35274,{batchId:i});oe(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:i}),r.push(go(this.serializer,o))}))}),L.waitFor(s).next(()=>r)}removeMutationBatch(e,n){return ak(e.le,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.ir(n.batchId)}),L.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return L.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),s=[];return wa(e).ee({range:r},(i,o,a)=>{if(i[0]===this.userId){const l=Wr(i[1]);s.push(l)}else a.done()}).next(()=>{oe(s.length===0,56720,{sr:s.map(i=>i.canonicalString())})})})}containsKey(e,n){return lk(e,this.userId,n)}_r(e){return ck(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:Oo,lastStreamToken:""})}}function lk(t,e,n){const r=Fh(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return wa(t).ee({range:i,X:!0},(a,l,c)=>{const[d,h,p]=a;d===e&&h===s&&(o=!0),c.done()}).next(()=>o)}function Js(t){return Dt(t,mr)}function wa(t){return Dt(t,dl)}function ck(t){return Dt(t,Vu)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Qo(0)}static cr(){return new Qo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qB{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next(n=>{const r=new Qo(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(n=>ue.fromTimestamp(new je(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.lr(e).next(s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.hr(e,s)))}addTargetData(e,n){return this.Pr(e,n).next(()=>this.lr(e).next(r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>pa(e).delete(n.targetId)).next(()=>this.lr(e)).next(r=>(oe(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r)))}removeTargets(e,n,r){let s=0;const i=[];return pa(e).ee((o,a)=>{const l=Lc(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(s++,i.push(this.removeTargetData(e,l)))}).next(()=>L.waitFor(i)).next(()=>s)}forEachTarget(e,n){return pa(e).ee((r,s)=>{const i=Lc(s);n(i)})}lr(e){return SS(e).get(jf).next(n=>(oe(n!==null,2888),n))}hr(e,n){return SS(e).put(jf,n)}Pr(e,n){return pa(e).put(nk(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Ho(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return pa(e).ee({range:s,index:eC},(o,a,l)=>{const c=Lc(a);cd(n,c.target)&&(i=c,l.done())}).next(()=>i)}addMatchingKeys(e,n,r){const s=[],i=ii(e);return n.forEach(o=>{const a=sn(o.path);s.push(i.put({targetId:r,path:a})),s.push(this.referenceDelegate.addReference(e,r,o))}),L.waitFor(s)}removeMatchingKeys(e,n,r){const s=ii(e);return L.forEach(n,i=>{const o=sn(i.path);return L.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])})}removeMatchingKeysForTargetId(e,n){const r=ii(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=ii(e);let i=xe();return s.ee({range:r,X:!0},(o,a,l)=>{const c=Wr(o[1]),d=new J(c);i=i.add(d)}).next(()=>i)}containsKey(e,n){const r=sn(n.path),s=IDBKeyRange.bound([r],[$R(r)],!1,!0);let i=0;return ii(e).ee({index:dw,X:!0,range:s},([o,a],l,c)=>{o!==0&&(i++,c.done())}).next(()=>i>0)}At(e,n){return pa(e).get(n).next(r=>r?Lc(r):null)}}function pa(t){return Dt(t,hl)}function SS(t){return Dt(t,Vo)}function ii(t){return Dt(t,fl)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bS="LruGarbageCollector",uk=1048576;function AS([t,e],[n,r]){const s=ge(t,n);return s===0?ge(e,r):s}class HB{constructor(e){this.Ir=e,this.buffer=new ze(AS),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();AS(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class dk{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){H(bS,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ji(n)?H(bS,"Ignoring IndexedDB error during garbage collection: ",n):await Xi(n)}await this.Vr(3e5)})}}class WB{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return L.resolve(Sn.ce);const r=new HB(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(IS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),IS):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,a,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,o=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(i=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),ga()<=Ce.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:h})))}}function hk(t,e){return new WB(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KB{constructor(e,n){this.db=e,this.garbageCollector=hk(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,(r,s)=>n(s))}addReference(e,n,r){return uh(e,r)}removeReference(e,n,r){return uh(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return uh(e,n)}br(e,n){return function(s,i){let o=!1;return ck(s).te(a=>lk(s,a,i).next(l=>(l&&(o=!0),L.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.Sr(e,(o,a)=>{if(a<=n){const l=this.br(e,o).next(c=>{if(!c)return i++,r.getEntry(e,o).next(()=>(r.removeEntry(o,ue.min()),ii(e).delete(function(h){return[0,sn(h.path)]}(o))))});s.push(l)}}).next(()=>L.waitFor(s)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return uh(e,n)}Sr(e,n){const r=ii(e);let s,i=Sn.ce;return r.ee({index:dw},([o,a],{path:l,sequenceNumber:c})=>{o===0?(i!==Sn.ce&&n(new J(Wr(s)),i),i=c,s=l):i=Sn.ce}).next(()=>{i!==Sn.ce&&n(new J(Wr(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function uh(t,e){return ii(t).put(function(r,s){return{targetId:0,path:sn(r.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(){this.changes=new Ls(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,mt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GB{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return ao(e).put(r)}removeEntry(e,n,r){return ao(e).delete(function(i,o){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Kf(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Dr(e,r)))}getEntry(e,n){let r=mt.newInvalidDocument(n);return ao(e).ee({index:Uh,range:IDBKeyRange.only(Ec(n))},(s,i)=>{r=this.Cr(n,i)}).next(()=>r)}vr(e,n){let r={size:0,document:mt.newInvalidDocument(n)};return ao(e).ee({index:Uh,range:IDBKeyRange.only(Ec(n))},(s,i)=>{r={document:this.Cr(n,i),size:Qf(i)}}).next(()=>r)}getEntries(e,n){let r=Un();return this.Fr(e,n,(s,i)=>{const o=this.Cr(s,i);r=r.insert(s,o)}).next(()=>r)}Mr(e,n){let r=Un(),s=new Ge(J.comparator);return this.Fr(e,n,(i,o)=>{const a=this.Cr(i,o);r=r.insert(i,a),s=s.insert(i,Qf(o))}).next(()=>({documents:r,Or:s}))}Fr(e,n,r){if(n.isEmpty())return L.resolve();let s=new ze(RS);n.forEach(l=>s=s.add(l));const i=IDBKeyRange.bound(Ec(s.first()),Ec(s.last())),o=s.getIterator();let a=o.getNext();return ao(e).ee({index:Uh,range:i},(l,c,d)=>{const h=J.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&RS(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?d.j(Ec(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,s,i){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),Kf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ao(e).J(IDBKeyRange.bound(a,l,!0)).next(c=>{i==null||i.incrementDocumentReadCount(c.length);let d=Un();for(const h of c){const p=this.Cr(J.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);p.isFoundDocument()&&(dd(n,p)||s.has(p.key))&&(d=d.insert(p.key,p))}return d})}getAllFromCollectionGroup(e,n,r,s){let i=Un();const o=PS(n,r),a=PS(n,Wn.max());return ao(e).ee({index:ZR,range:IDBKeyRange.bound(o,a,!0)},(l,c,d)=>{const h=this.Cr(J.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);i=i.insert(h.key,h),i.size===s&&d.done()}).next(()=>i)}newChangeBuffer(e){return new QB(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return xS(e).get(av).next(n=>(oe(!!n,20021),n))}Dr(e,n){return xS(e).put(av,n)}Cr(e,n){if(n){const r=OB(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(ue.min())))return r}return mt.newInvalidDocument(e)}}function pk(t){return new GB(t)}class QB extends fk{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new Ls(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const n=[];let r=0,s=new ze((i,o)=>ge(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const a=this.Br.get(i);if(n.push(this.Nr.removeEntry(e,i,a.readTime)),o.isValidDocument()){const l=uS(this.Nr.serializer,o);s=s.add(i.path.popLast());const c=Qf(l);r+=c-a.size,n.push(this.Nr.addEntry(e,i,l))}else if(r-=a.size,this.trackRemovals){const l=uS(this.Nr.serializer,o.convertToNoDocument(ue.min()));n.push(this.Nr.addEntry(e,i,l))}}),s.forEach(i=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,i))}),n.push(this.Nr.updateMetadata(e,r)),L.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next(r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next(({documents:r,Or:s})=>(s.forEach((i,o)=>{this.Br.set(i,{size:o,readTime:r.get(i).readTime})}),r))}}function xS(t){return Dt(t,Lu)}function ao(t){return Dt(t,Uf)}function Ec(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function PS(t,e){const n=e.documentKey.path.toArray();return[t,Kf(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function RS(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=ge(n[i],r[i]),s)return s;return s=ge(n.length,r.length),s||(s=ge(n[n.length-2],r[r.length-2]),s||ge(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YB{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&nu(r.mutation,s,bn.empty(),je.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,xe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=xe()){const s=Kr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Oc();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Kr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,xe()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Un();const o=tu(),a=function(){return tu()}();return n.forEach((l,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof Ms)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),nu(d.mutation,c,d.mutation.getFieldMask(),je.now())):o.set(c.key,bn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>a.set(c,new YB(d,o.get(c)??null))),a))}recalculateAndSaveOverlays(e,n){const r=tu();let s=new Ge((o,a)=>o-a),i=xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||bn.empty();d=a.applyToLocalView(c,d),r.set(l,d);const h=(s.get(a.batchId)||xe()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,h=DC();d.forEach(p=>{if(!i.has(p)){const f=FC(n.get(p),r.get(p));f!==null&&h.set(p,f),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return L.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return J.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):AC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):L.resolve(Kr());let a=ul,l=i;return o.next(c=>L.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(d)?L.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{l=l.insert(d,p)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,xe())).next(d=>({batchId:a,changes:kC(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new J(n)).next(r=>{let s=Oc();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Oc();return this.indexManager.getCollectionParents(e,i).next(a=>L.forEach(a,l=>{const c=function(h,p){return new Ul(p,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(d=>{d.forEach((h,p)=>{o=o.insert(h,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,mt.newInvalidDocument(d)))});let a=Oc();return o.forEach((l,c)=>{const d=i.get(l);d!==void 0&&nu(d.mutation,c,bn.empty(),je.now()),dd(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XB{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return L.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:fn(s.createTime)}}(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:rk(s.bundledQuery),readTime:fn(s.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JB{constructor(){this.overlays=new Ge(J.comparator),this.qr=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Kr();return L.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),L.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),L.resolve()}getOverlaysForCollection(e,n,r){const s=Kr(),i=n.length+1,o=new J(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return L.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ge((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=Kr(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=Kr(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return L.resolve(a)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Sw(n,r));let i=this.qr.get(n);i===void 0&&(i=xe(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZB{constructor(){this.sessionToken=yt.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(){this.Qr=new ze(Ft.$r),this.Ur=new ze(Ft.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Ft(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Ft(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new J(new Fe([])),r=new Ft(n,e),s=new Ft(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new J(new Fe([])),r=new Ft(n,e),s=new Ft(n,e+1);let i=xe();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ft(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ft{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return J.comparator(e.key,n.key)||ge(e.Yr,n.Yr)}static Kr(e,n){return ge(e.Yr,n.Yr)||J.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e${constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ze(Ft.$r)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Tw(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Zr=this.Zr.add(new Ft(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return L.resolve(o)}lookupMutationBatch(e,n){return L.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return L.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?Oo:this.tr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ft(n,0),s=new Ft(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const a=this.Xr(o.Yr);i.push(a)}),L.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ze(ge);return n.forEach(s=>{const i=new Ft(s,0),o=new Ft(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],a=>{r=r.add(a.Yr)})}),L.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;J.isDocumentKey(i)||(i=i.child(""));const o=new Ft(new J(i),0);let a=new ze(ge);return this.Zr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.Yr)),!0)},o),L.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){oe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return L.forEach(n.mutations,s=>{const i=new Ft(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Ft(n,0),s=this.Zr.firstAfterOrEqual(r);return L.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t${constructor(e){this.ri=e,this.docs=function(){return new Ge(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():mt.newInvalidDocument(n))}getEntries(e,n){let r=Un();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():mt.newInvalidDocument(s))}),L.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Un();const o=n.path,a=new J(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||cw(KR(d),r)<=0||(s.has(d.key)||dd(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return L.resolve(i)}getAllFromCollectionGroup(e,n,r,s){te(9500)}ii(e,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new n$(this)}getSize(e){return L.resolve(this.size)}}class n$ extends fk{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),L.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r${constructor(e){this.persistence=e,this.si=new Ls(n=>Ho(n),cd),this.lastRemoteSnapshotVersion=ue.min(),this.highestTargetId=0,this.oi=0,this._i=new Rw,this.targetCount=0,this.ai=Qo.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),L.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Qo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.Pr(n),L.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),L.waitFor(i).next(()=>s)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return L.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),L.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),L.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),L.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return L.resolve(r)}containsKey(e,n){return L.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(e,n){this.ui={},this.overlays={},this.ci=new Sn(0),this.li=!1,this.li=!0,this.hi=new ZB,this.referenceDelegate=e(this),this.Pi=new r$(this),this.indexManager=new $B,this.remoteDocumentCache=function(s){return new t$(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new tk(n),this.Ii=new XB(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new JB,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new e$(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){H("MemoryPersistence","Starting transaction:",e);const s=new s$(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return L.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class s$ extends QR{constructor(e){super(),this.currentSequenceNumber=e}}class tm{constructor(e){this.persistence=e,this.Ri=new Rw,this.Vi=null}static mi(e){return new tm(e)}get fi(){if(this.Vi)return this.Vi;throw te(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),L.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),L.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.fi,r=>{const s=J.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,ue.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return L.or([()=>L.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Yf{constructor(e,n){this.persistence=e,this.pi=new Ls(r=>sn(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=hk(this,n)}static mi(e,n){return new Yf(e,n)}Ei(){}di(e){return L.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return L.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?L.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,i.removeEntry(o,ue.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),L.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),L.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Bh(e.data.value)),n}br(e,n,r){return L.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return L.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i${constructor(e){this.serializer=e}k(e,n,r,s){const i=new $p("createOrUpgrade",n);r<1&&s>=1&&(function(l){l.createObjectStore(ld)}(e),function(l){l.createObjectStore(Vu,{keyPath:w5}),l.createObjectStore(mr,{keyPath:jI,autoIncrement:!0}).createIndex(So,BI,{unique:!0}),l.createObjectStore(dl)}(e),CS(e),function(l){l.createObjectStore(fo)}(e));let o=L.resolve();return r<3&&s>=3&&(r!==0&&(function(l){l.deleteObjectStore(fl),l.deleteObjectStore(hl),l.deleteObjectStore(Vo)}(e),CS(e)),o=o.next(()=>function(l){const c=l.store(Vo),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ue.min().toTimestamp(),targetCount:0};return c.put(jf,d)}(i))),r<4&&s>=4&&(r!==0&&(o=o.next(()=>function(l,c){return c.store(mr).J().next(h=>{l.deleteObjectStore(mr),l.createObjectStore(mr,{keyPath:jI,autoIncrement:!0}).createIndex(So,BI,{unique:!0});const p=c.store(mr),f=h.map(E=>p.put(E));return L.waitFor(f)})}(e,i))),o=o.next(()=>{(function(l){l.createObjectStore(pl,{keyPath:R5})})(e)})),r<5&&s>=5&&(o=o.next(()=>this.yi(i))),r<6&&s>=6&&(o=o.next(()=>(function(l){l.createObjectStore(Lu)}(e),this.wi(i)))),r<7&&s>=7&&(o=o.next(()=>this.Si(i))),r<8&&s>=8&&(o=o.next(()=>this.bi(e,i))),r<9&&s>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(o=o.next(()=>this.Di(i))),r<11&&s>=11&&(o=o.next(()=>{(function(l){l.createObjectStore(qp,{keyPath:C5})})(e),function(l){l.createObjectStore(Hp,{keyPath:k5})}(e)})),r<12&&s>=12&&(o=o.next(()=>{(function(l){const c=l.createObjectStore(Wp,{keyPath:F5});c.createIndex(cv,U5,{unique:!1}),c.createIndex(rC,j5,{unique:!1})})(e)})),r<13&&s>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore(Uf,{keyPath:T5});c.createIndex(Uh,I5),c.createIndex(ZR,S5)}(e)).next(()=>this.Ci(e,i)).next(()=>e.deleteObjectStore(fo))),r<14&&s>=14&&(o=o.next(()=>this.Fi(e,i))),r<15&&s>=15&&(o=o.next(()=>function(l){l.createObjectStore(hw,{keyPath:D5,autoIncrement:!0}).createIndex(lv,N5,{unique:!1}),l.createObjectStore(Xc,{keyPath:O5}).createIndex(tC,V5,{unique:!1}),l.createObjectStore(Jc,{keyPath:L5}).createIndex(nC,M5,{unique:!1})}(e))),r<16&&s>=16&&(o=o.next(()=>{n.objectStore(Xc).clear()}).next(()=>{n.objectStore(Jc).clear()})),r<17&&s>=17&&(o=o.next(()=>{(function(l){l.createObjectStore(fw,{keyPath:B5})})(e)})),r<18&&s>=18&&eR()&&(o=o.next(()=>{n.objectStore(Xc).clear()}).next(()=>{n.objectStore(Jc).clear()})),o}wi(e){let n=0;return e.store(fo).ee((r,s)=>{n+=Qf(s)}).next(()=>{const r={byteSize:n};return e.store(Lu).put(av,r)})}yi(e){const n=e.store(Vu),r=e.store(mr);return n.J().next(s=>L.forEach(s,i=>{const o=IDBKeyRange.bound([i.userId,Oo],[i.userId,i.lastAcknowledgedBatchId]);return r.J(So,o).next(a=>L.forEach(a,l=>{oe(l.userId===i.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const c=go(this.serializer,l);return ak(e,i.userId,c).next(()=>{})}))}))}Si(e){const n=e.store(fl),r=e.store(fo);return e.store(Vo).get(jf).next(s=>{const i=[];return r.ee((o,a)=>{const l=new Fe(o),c=function(h){return[0,sn(h)]}(l);i.push(n.get(c).next(d=>d?L.resolve():(h=>n.put({targetId:0,path:sn(h),sequenceNumber:s.highestListenSequenceNumber}))(l)))}).next(()=>L.waitFor(i))})}bi(e,n){e.createObjectStore(Mu,{keyPath:P5});const r=n.store(Mu),s=new Pw,i=o=>{if(s.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:sn(l)})}};return n.store(fo).ee({X:!0},(o,a)=>{const l=new Fe(o);return i(l.popLast())}).next(()=>n.store(dl).ee({X:!0},([o,a,l],c)=>{const d=Wr(a);return i(d.popLast())}))}Di(e){const n=e.store(hl);return n.ee((r,s)=>{const i=Lc(s),o=nk(this.serializer,i);return n.put(o)})}Ci(e,n){const r=n.store(fo),s=[];return r.ee((i,o)=>{const a=n.store(Uf),l=function(h){return h.document?new J(Fe.fromString(h.document.name).popFirst(5)):h.noDocument?J.fromSegments(h.noDocument.path):h.unknownDocument?J.fromSegments(h.unknownDocument.path):te(36783)}(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(c))}).next(()=>L.waitFor(s))}Fi(e,n){const r=n.store(mr),s=pk(this.serializer),i=new Cw(tm.mi,this.serializer.yt);return r.J().next(o=>{const a=new Map;return o.forEach(l=>{let c=a.get(l.userId)??xe();go(this.serializer,l).keys().forEach(d=>c=c.add(d)),a.set(l.userId,c)}),L.forEach(a,(l,c)=>{const d=new Jt(c),h=Zp.wt(this.serializer,d),p=i.getIndexManager(d),f=em.wt(d,this.serializer,p,i.referenceDelegate);return new mk(s,f,h,p).recalculateAndSaveOverlaysForDocumentKeys(new uv(n,Sn.ce),l).next()})})}}function CS(t){t.createObjectStore(fl,{keyPath:A5}).createIndex(dw,x5,{unique:!0}),t.createObjectStore(hl,{keyPath:"targetId"}).createIndex(eC,b5,{unique:!0}),t.createObjectStore(Vo)}const Zs="IndexedDbPersistence",Ig=18e5,Sg=5e3,bg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",o$="main";class kw{constructor(e,n,r,s,i,o,a,l,c,d,h=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=i,this.window=o,this.document=a,this.xi=c,this.Oi=d,this.Ni=h,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=p=>Promise.resolve(),!kw.v())throw new G(B.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new KB(this,s),this.$i=n+o$,this.serializer=new tk(l),this.Ui=new Ci(this.$i,this.Ni,new i$(this.serializer)),this.hi=new LB,this.Pi=new qB(this.referenceDelegate,this.serializer),this.remoteDocumentCache=pk(this.serializer),this.Ii=new VB,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,d===!1&&_t(Zs,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new G(B.FAILED_PRECONDITION,bg);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new Sn(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>dh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(n=>this.isPrimary&&!n?this.Zi(e).next(()=>!1):!!n&&this.Xi(e).next(()=>!0))).catch(e=>{if(Ji(e))return H(Zs,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return H(Zs,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return Tc(e).get(ca).next(n=>L.resolve(this.es(n)))}ts(e){return dh(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Ig)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Dt(n,pl);return r.J().next(s=>{const i=this.ss(s,Ig),o=s.filter(a=>i.indexOf(a)===-1);return L.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?L.resolve(!0):Tc(e).get(ca).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Sg)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new G(B.FAILED_PRECONDITION,bg);return!1}}return!(!this.networkEnabled||!this.inForeground)||dh(e).J().next(r=>this.ss(r,Sg).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(i||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&H(Zs,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[ld,pl],e=>{const n=new uv(e,Sn.ce);return this.Zi(n).next(()=>this.ts(n))}),this.Ui.close(),this.Ps()}ss(e,n){return e.filter(r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>dh(e).J().next(n=>this.ss(n,Ig).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return em.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new zB(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Zp.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){H(Zs,"Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=function(l){return l===18?q5:l===17?aC:l===16?z5:l===15?pw:l===14?oC:l===13?iC:l===12?$5:l===11?sC:void te(60245)}(this.Ni);let o;return this.Ui.runTransaction(e,s,i,a=>(o=new uv(a,this.ci?this.ci.next():Sn.ce),n==="readwrite-primary"?this.Hi(o).next(l=>!!l||this.Yi(o)).next(l=>{if(!l)throw _t(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new G(B.FAILED_PRECONDITION,GR);return r(o)}).next(l=>this.Xi(o).next(()=>l)):this.Is(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Is(e){return Tc(e).get(ca).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Sg)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new G(B.FAILED_PRECONDITION,bg)})}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Tc(e).put(ca,n)}static v(){return Ci.v()}Zi(e){const n=Tc(e);return n.get(ca).next(r=>this.es(r)?(H(Zs,"Releasing primary lease."),n.delete(ca)):L.resolve())}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(_t(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;ZP()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const r=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return H(Zs,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return _t(Zs,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){_t("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Tc(t){return Dt(t,ld)}function dh(t){return Dt(t,pl)}function gk(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=xe(),s=xe();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Dw(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a${constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return ZP()?8:YR(Wt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new a$;return this.Ss(e,n,o).next(a=>{if(i.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(ga()<=Ce.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",ya(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),L.resolve()):(ga()<=Ce.DEBUG&&H("QueryEngine","Query:",ya(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(ga()<=Ce.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",ya(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,qn(n))):L.resolve())}ys(e,n){if(eS(n))return L.resolve(null);let r=qn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=qf(n,null,"F"),r=qn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=xe(...i);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Ds(n,a);return this.Cs(n,c,o,l.readTime)?this.ys(e,qf(n,null,"F")):this.vs(e,c,n,l)}))})))}ws(e,n,r,s){return eS(n)||s.isEqual(ue.min())?L.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?L.resolve(null):(ga()<=Ce.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ya(n)),this.vs(e,o,n,WR(s,ul)).next(a=>a))})}Ds(e,n){let r=new ze(RC(e));return n.forEach((s,i)=>{dd(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return ga()<=Ce.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",ya(n)),this.ps.getDocumentsMatchingQuery(e,n,Wn.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nw="LocalStore",l$=3e8;class c${constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Ge(ge),this.xs=new Ls(i=>Ho(i),cd),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new mk(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function vk(t,e,n,r){return new c$(t,e,n,r)}async function _k(t,e){const n=re(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=xe();for(const c of s){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Ls:c,removedBatchIds:o,addedBatchIds:a}))})})}function u$(t,e){const n=re(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const h=c.batch,p=h.keys();let f=L.resolve();return p.forEach(E=>{f=f.next(()=>d.getEntry(l,E)).next(y=>{const v=c.docVersions.get(E);oe(v!==null,48541),y.version.compareTo(v)<0&&(h.applyToRemoteDocument(y,c),y.isValidDocument()&&(y.setReadTime(c.commitVersion),d.addEntry(y)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=xe();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function wk(t){const e=re(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function d$(t,e){const n=re(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const a=[];e.targetChanges.forEach((d,h)=>{const p=s.get(h);if(!p)return;a.push(n.Pi.removeMatchingKeys(i,d.removedDocuments,h).next(()=>n.Pi.addMatchingKeys(i,d.addedDocuments,h)));let f=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?f=f.withResumeToken(yt.EMPTY_BYTE_STRING,ue.min()).withLastLimboFreeSnapshotVersion(ue.min()):d.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(d.resumeToken,r)),s=s.insert(h,f),function(y,v,_){return y.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=l$?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(p,f,d)&&a.push(n.Pi.updateTargetData(i,f))});let l=Un(),c=xe();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(h$(i,o,e.documentUpdates).next(d=>{l=d.ks,c=d.qs})),!r.isEqual(ue.min())){const d=n.Pi.getLastRemoteSnapshotVersion(i).next(h=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return L.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.Ms=s,i))}function h$(t,e,n){let r=xe(),s=xe();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Un();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(ue.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):H(Nw,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{ks:o,qs:s}})}function f$(t,e){const n=re(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Oo),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Xf(t,e){const n=re(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,L.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new ps(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Tl(t,e,n){const r=re(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Ji(o))throw o;H(Nw,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function Jf(t,e,n){const r=re(t);let s=ue.min(),i=xe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const h=re(l),p=h.xs.get(d);return p!==void 0?L.resolve(h.Ms.get(p)):h.Pi.getTargetData(c,d)}(r,o,qn(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:ue.min(),n?i:xe())).next(a=>(Ik(r,PC(e),a),{documents:a,Qs:i})))}function Ek(t,e){const n=re(t),r=re(n.Pi),s=n.Ms.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",i=>r.At(i,e).next(o=>o?o.target:null))}function Tk(t,e){const n=re(t),r=n.Os.get(e)||ue.min();return n.persistence.runTransaction("Get new document changes","readonly",s=>n.Ns.getAllFromCollectionGroup(s,e,WR(r,ul),Number.MAX_SAFE_INTEGER)).then(s=>(Ik(n,e,s),s))}function Ik(t,e,n){let r=t.Os.get(e)||ue.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sk="firestore_clients";function kS(t,e){return`${Sk}_${t}_${e}`}const bk="firestore_mutations";function DS(t,e,n){let r=`${bk}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const Ak="firestore_targets";function Ag(t,e){return`${Ak}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zr="SharedClientState";class Zf{constructor(e,n,r,s){this.user=e,this.batchId=n,this.state=r,this.error=s}static Ws(e,n,r){const s=JSON.parse(r);let i,o=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return o&&s.error&&(o=typeof s.error.message=="string"&&typeof s.error.code=="string",o&&(i=new G(s.error.code,s.error.message))),o?new Zf(e,n,s.state,i):(_t(zr,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ru{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ws(e,n){const r=JSON.parse(n);let s,i=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return i&&r.error&&(i=typeof r.error.message=="string"&&typeof r.error.code=="string",i&&(s=new G(r.error.code,r.error.message))),i?new ru(e,r.state,s):(_t(zr,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ep{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const r=JSON.parse(n);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,i=_w();for(let o=0;s&&o<r.activeTargetIds.length;++o)s=XR(r.activeTargetIds[o]),i=i.add(r.activeTargetIds[o]);return s?new ep(e,i):(_t(zr,`Failed to parse client data for instance '${e}': ${n}`),null)}}class Ow{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new Ow(n.clientId,n.onlineState):(_t(zr,`Failed to parse online state: ${e}`),null)}}class Sv{constructor(){this.activeTargetIds=_w()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class xg{constructor(e,n,r,s,i){this.window=e,this.Mi=n,this.persistenceKey=r,this.Js=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Ge(ge),this.started=!1,this.Xs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.eo=kS(this.persistenceKey,this.Js),this.no=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new Sv),this.ro=new RegExp(`^${Sk}_${o}_([^_]*)$`),this.io=new RegExp(`^${bk}_${o}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${Ak}_${o}_(\\d+)$`),this.oo=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this._o=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const s=this.getItem(kS(this.persistenceKey,r));if(s){const i=ep.Ws(r,s);i&&(this.Zs=this.Zs.insert(i.clientId,i))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const r=this.uo(n);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach((r,s)=>{s.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,r){this.ho(e,n,r),this.Po(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Ag(this.persistenceKey,e));if(s){const i=ru.Ws(e,s);i&&(r=i.state)}}return n&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ag(this.persistenceKey,e))}updateQueryState(e,n,r){this.Io(e,n,r)}handleUserChange(e,n,r){n.forEach(s=>{this.Po(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return H(zr,"READ",e,n),n}setItem(e,n){H(zr,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){H(zr,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(H(zr,"EVENT",n.key,n.newValue),n.key===this.eo)return void _t("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const r=this.Ro(n.key);return this.Vo(r,null)}{const r=this.mo(n.key,n.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(this.so.test(n.key)){if(n.newValue!==null){const r=this.yo(n.key,n.newValue);if(r)return this.wo(r)}}else if(n.key===this.oo){if(n.newValue!==null){const r=this.uo(n.newValue);if(r)return this.co(r)}}else if(n.key===this.no){const r=function(i){let o=Sn.ce;if(i!=null)try{const a=JSON.parse(i);oe(typeof a=="number",30636,{So:i}),o=a}catch(a){_t(zr,"Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==Sn.ce&&this.sequenceNumberHandler(r)}else if(n.key===this._o){const r=this.bo(n.newValue);await Promise.all(r.map(s=>this.syncEngine.Do(s)))}}}else this.Xs.push(n)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,r){const s=new Zf(this.currentUser,e,n,r),i=DS(this.persistenceKey,this.currentUser,e);this.setItem(i,s.Gs())}Po(e){const n=DS(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,r){const s=Ag(this.persistenceKey,e),i=new ru(e,n,r);this.setItem(s,i.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const r=this.Ro(e);return ep.Ws(r,n)}fo(e,n){const r=this.io.exec(e),s=Number(r[1]),i=r[2]!==void 0?r[2]:null;return Zf.Ws(new Jt(i),s,n)}yo(e,n){const r=this.so.exec(e),s=Number(r[1]);return ru.Ws(s,n)}uo(e){return Ow.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);H(zr,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const r=n?this.Zs.insert(e,n):this.Zs.remove(e),s=this.lo(this.Zs),i=this.lo(r),o=[],a=[];return i.forEach(l=>{s.has(l)||o.push(l)}),s.forEach(l=>{i.has(l)||a.push(l)}),this.syncEngine.Fo(o,a).then(()=>{this.Zs=r})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=_w();return e.forEach((r,s)=>{n=n.unionWith(s.activeTargetIds)}),n}}class xk{constructor(){this.Mo=new Sv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Sv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p${Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NS="ConnectivityMonitor";class OS{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){H(NS,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){H(NS,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hh=null;function bv(){return hh===null?hh=function(){return 268435456+Math.round(2147483648*Math.random())}():hh++,"0x"+hh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pg="RestConnection",m$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class g${get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Bf?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=bv(),a=this.zo(e,n.toUriEncodedString());H(Pg,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,i);const{host:c}=new URL(a),d=Os(c);return this.Jo(e,a,l,r,d).then(h=>(H(Pg,`Received RPC '${e}' ${o}: `,h),h),h=>{throw Fi(Pg,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",r),h})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Fl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=m$[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y${constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xt="WebChannelConnection";class v$ extends g${constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=bv();return new Promise((a,l)=>{const c=new OR;c.setWithCredentials(!0),c.listenOnce(VR.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Lh.NO_ERROR:const h=c.getResponseJson();H(Xt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),a(h);break;case Lh.TIMEOUT:H(Xt,`RPC '${e}' ${o} timed out`),l(new G(B.DEADLINE_EXCEEDED,"Request time out"));break;case Lh.HTTP_ERROR:const p=c.getStatus();if(H(Xt,`RPC '${e}' ${o} failed with status:`,p,"response text:",c.getResponseText()),p>0){let f=c.getResponseJson();Array.isArray(f)&&(f=f[0]);const E=f==null?void 0:f.error;if(E&&E.status&&E.message){const y=function(_){const w=_.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(w)>=0?w:B.UNKNOWN}(E.status);l(new G(y,E.message))}else l(new G(B.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new G(B.UNAVAILABLE,"Connection failed."));break;default:te(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{H(Xt,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(s);H(Xt,`RPC '${e}' ${o} sending request:`,s),c.send(n,"POST",d,r,15)})}T_(e,n,r){const s=bv(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=FR(),a=MR(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");H(Xt,`Creating RPC '${e}' stream ${s}: ${d}`,l);const h=o.createWebChannel(d,l);this.I_(h);let p=!1,f=!1;const E=new y$({Yo:v=>{f?H(Xt,`Not sending because RPC '${e}' stream ${s} is closed:`,v):(p||(H(Xt,`Opening RPC '${e}' stream ${s} transport.`),h.open(),p=!0),H(Xt,`RPC '${e}' stream ${s} sending:`,v),h.send(v))},Zo:()=>h.close()}),y=(v,_,w)=>{v.listen(_,I=>{try{w(I)}catch(D){setTimeout(()=>{throw D},0)}})};return y(h,Nc.EventType.OPEN,()=>{f||(H(Xt,`RPC '${e}' stream ${s} transport opened.`),E.o_())}),y(h,Nc.EventType.CLOSE,()=>{f||(f=!0,H(Xt,`RPC '${e}' stream ${s} transport closed`),E.a_(),this.E_(h))}),y(h,Nc.EventType.ERROR,v=>{f||(f=!0,Fi(Xt,`RPC '${e}' stream ${s} transport errored. Name:`,v.name,"Message:",v.message),E.a_(new G(B.UNAVAILABLE,"The operation could not be completed")))}),y(h,Nc.EventType.MESSAGE,v=>{var _;if(!f){const w=v.data[0];oe(!!w,16349);const I=w,D=(I==null?void 0:I.error)||((_=I[0])==null?void 0:_.error);if(D){H(Xt,`RPC '${e}' stream ${s} received error:`,D);const O=D.status;let V=function(A){const k=It[A];if(k!==void 0)return BC(k)}(O),S=D.message;V===void 0&&(V=B.INTERNAL,S="Unknown error status: "+O+" with message "+D.message),f=!0,E.a_(new G(V,S)),h.close()}else H(Xt,`RPC '${e}' stream ${s} received:`,w),E.u_(w)}}),y(a,LR.STAT_EVENT,v=>{v.stat===sv.PROXY?H(Xt,`RPC '${e}' stream ${s} detected buffering proxy`):v.stat===sv.NOPROXY&&H(Xt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{E.__()},0),E}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pk(){return typeof window<"u"?window:null}function Wh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nm(t){return new SB(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&H("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VS="PersistentStream";class Ck{constructor(e,n,r,s,i,o,a,l){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Rk(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(_t(n.toString()),_t("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new G(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return H(VS,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(H(VS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class _$ extends Ck{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=xB(this.serializer,e),r=function(i){if(!("targetChange"in i))return ue.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ue.min():o.readTime?fn(o.readTime):ue.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=_v(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=$f(l)?{documents:QC(i,l)}:{query:YC(i,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=qC(i,o.resumeToken);const c=yv(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ue.min())>0){a.readTime=El(i,o.snapshotVersion.toTimestamp());const c=yv(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=RB(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=_v(this.serializer),n.removeTarget=e,this.q_(n)}}class w$ extends Ck{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return oe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,oe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){oe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=PB(e.writeResults,e.commitTime),r=fn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=_v(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Wf(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E${}class T$ extends E${constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new G(B.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,vv(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new G(B.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,vv(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(B.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class I${constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(_t(n),this.aa=!1):H("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yo="RemoteStore";class S${constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{na(this)&&(H(Yo,"Restarting streams for network reachability change."),await async function(l){const c=re(l);c.Ea.add(4),await Bl(c),c.Ra.set("Unknown"),c.Ea.delete(4),await pd(c)}(this))})}),this.Ra=new I$(r,s)}}async function pd(t){if(na(t))for(const e of t.da)await e(!0)}async function Bl(t){for(const e of t.da)await e(!1)}function rm(t,e){const n=re(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Mw(n)?Lw(n):zl(n).O_()&&Vw(n,e))}function Il(t,e){const n=re(t),r=zl(n);n.Ia.delete(e),r.O_()&&kk(n,e),n.Ia.size===0&&(r.O_()?r.L_():na(n)&&n.Ra.set("Unknown"))}function Vw(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ue.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}zl(t).Y_(e)}function kk(t,e){t.Va.Ue(e),zl(t).Z_(e)}function Lw(t){t.Va=new wB({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),zl(t).start(),t.Ra.ua()}function Mw(t){return na(t)&&!zl(t).x_()&&t.Ia.size>0}function na(t){return re(t).Ea.size===0}function Dk(t){t.Va=void 0}async function b$(t){t.Ra.set("Online")}async function A$(t){t.Ia.forEach((e,n)=>{Vw(t,e)})}async function x$(t,e){Dk(t),Mw(t)?(t.Ra.ha(e),Lw(t)):t.Ra.set("Unknown")}async function P$(t,e,n){if(t.Ra.set("Online"),e instanceof zC&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ia.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ia.delete(a),s.Va.removeTarget(a))}(t,e)}catch(r){H(Yo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await tp(t,r)}else if(e instanceof qh?t.Va.Ze(e):e instanceof $C?t.Va.st(e):t.Va.tt(e),!n.isEqual(ue.min()))try{const r=await wk(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Va.Tt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.Ia.get(c);d&&i.Ia.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=i.Ia.get(l);if(!d)return;i.Ia.set(l,d.withResumeToken(yt.EMPTY_BYTE_STRING,d.snapshotVersion)),kk(i,l);const h=new ps(d.target,l,c,d.sequenceNumber);Vw(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){H(Yo,"Failed to raise snapshot:",r),await tp(t,r)}}async function tp(t,e,n){if(!Ji(e))throw e;t.Ea.add(1),await Bl(t),t.Ra.set("Offline"),n||(n=()=>wk(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H(Yo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await pd(t)})}function Nk(t,e){return e().catch(n=>tp(t,n,e))}async function $l(t){const e=re(t),n=$i(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Oo;for(;R$(e);)try{const s=await f$(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,C$(e,s)}catch(s){await tp(e,s)}Ok(e)&&Vk(e)}function R$(t){return na(t)&&t.Ta.length<10}function C$(t,e){t.Ta.push(e);const n=$i(t);n.O_()&&n.X_&&n.ea(e.mutations)}function Ok(t){return na(t)&&!$i(t).x_()&&t.Ta.length>0}function Vk(t){$i(t).start()}async function k$(t){$i(t).ra()}async function D$(t){const e=$i(t);for(const n of t.Ta)e.ea(n.mutations)}async function N$(t,e,n){const r=t.Ta.shift(),s=Iw.from(r,e,n);await Nk(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await $l(t)}async function O$(t,e){e&&$i(t).X_&&await async function(r,s){if(function(o){return yB(o)&&o!==B.ABORTED}(s.code)){const i=r.Ta.shift();$i(r).B_(),await Nk(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await $l(r)}}(t,e),Ok(t)&&Vk(t)}async function LS(t,e){const n=re(t);n.asyncQueue.verifyOperationInProgress(),H(Yo,"RemoteStore received new credentials");const r=na(n);n.Ea.add(3),await Bl(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await pd(n)}async function Av(t,e){const n=re(t);e?(n.Ea.delete(2),await pd(n)):e||(n.Ea.add(2),await Bl(n),n.Ra.set("Unknown"))}function zl(t){return t.ma||(t.ma=function(n,r,s){const i=re(n);return i.sa(),new _$(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:b$.bind(null,t),t_:A$.bind(null,t),r_:x$.bind(null,t),H_:P$.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Mw(t)?Lw(t):t.Ra.set("Unknown")):(await t.ma.stop(),Dk(t))})),t.ma}function $i(t){return t.fa||(t.fa=function(n,r,s){const i=re(n);return i.sa(),new w$(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:k$.bind(null,t),r_:O$.bind(null,t),ta:D$.bind(null,t),na:N$.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await $l(t)):(await t.fa.stop(),t.Ta.length>0&&(H(Yo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new Fw(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function md(t,e){if(_t("AsyncQueue",`${e}: ${t}`),Ji(t))return new G(B.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{static emptySet(e){return new za(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||J.comparator(n.key,r.key):(n,r)=>J.comparator(n.key,r.key),this.keyedMap=Oc(),this.sortedSet=new Ge(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof za)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new za;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(){this.ga=new Ge(J.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):te(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Sl{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Sl(e,n,za.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V${constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class L${constructor(){this.queries=FS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=re(n),i=s.queries;s.queries=FS(),i.forEach((o,a)=>{for(const l of a.Sa)l.onError(r)})})(this,new G(B.ABORTED,"Firestore shutting down"))}}function FS(){return new Ls(t=>xC(t),Qp)}async function Uw(t,e){const n=re(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new V$,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=md(o,`Initialization of query '${ya(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Bw(n)}async function jw(t,e){const n=re(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function M$(t,e){const n=re(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Fa(s)&&(r=!0);o.wa=s}}r&&Bw(n)}function F$(t,e,n){const r=re(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function Bw(t){t.Ca.forEach(e=>{e.next()})}var xv,US;(US=xv||(xv={})).Ma="default",US.Cache="cache";class $w{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Sl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Sl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==xv.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(e){this.key=e}}class Mk{constructor(e){this.key=e}}class Fk{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=xe(),this.mutatedKeys=xe(),this.eu=RC(e),this.tu=new za(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new MS,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const p=s.get(d),f=dd(this.query,h)?h:null,E=!!p&&this.mutatedKeys.has(p.key),y=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let v=!1;p&&f?p.data.isEqual(f.data)?E!==y&&(r.track({type:3,doc:f}),v=!0):this.su(p,f)||(r.track({type:2,doc:f}),v=!0,(l&&this.eu(f,l)>0||c&&this.eu(f,c)<0)&&(a=!0)):!p&&f?(r.track({type:0,doc:f}),v=!0):p&&!f&&(r.track({type:1,doc:p}),v=!0,(l||c)&&(a=!0)),v&&(f?(o=o.add(f),i=y?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{tu:o,iu:r,Cs:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((d,h)=>function(f,E){const y=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te(20277,{Rt:v})}};return y(f)-y(E)}(d.type,h.type)||this.eu(d.doc,h.doc)),this.ou(r),s=s??!1;const a=n&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,c=l!==this.Za;return this.Za=l,o.length!==0||c?{snapshot:new Sl(this.query,e.tu,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new MS,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=xe(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new Mk(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new Lk(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=xe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Sl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ql="SyncEngine";class U${constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class j${constructor(e){this.key=e,this.hu=!1}}class B${constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Ls(a=>xC(a),Qp),this.Iu=new Map,this.Eu=new Set,this.du=new Ge(J.comparator),this.Au=new Map,this.Ru=new Rw,this.Vu={},this.mu=new Map,this.fu=Qo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function $$(t,e,n=!0){const r=sm(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await Uk(r,e,n,!0),s}async function z$(t,e){const n=sm(t);await Uk(n,e,!0,!1)}async function Uk(t,e,n,r){const s=await Xf(t.localStore,qn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await zw(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&rm(t.remoteStore,s),a}async function zw(t,e,n,r,s){t.pu=(h,p,f)=>async function(y,v,_,w){let I=v.view.ru(_);I.Cs&&(I=await Jf(y.localStore,v.query,!1).then(({documents:S})=>v.view.ru(S,I)));const D=w&&w.targetChanges.get(v.targetId),O=w&&w.targetMismatches.get(v.targetId)!=null,V=v.view.applyChanges(I,y.isPrimaryClient,D,O);return Pv(y,v.targetId,V.au),V.snapshot}(t,h,p,f);const i=await Jf(t.localStore,e,!0),o=new Fk(e,i.Qs),a=o.ru(i.documents),l=fd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);Pv(t,n,c.au);const d=new U$(e,n,o);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function q$(t,e,n){const r=re(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!Qp(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Tl(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Il(r.remoteStore,s.targetId),bl(r,s.targetId)}).catch(Xi)):(bl(r,s.targetId),await Tl(r.localStore,s.targetId,!0))}async function H$(t,e){const n=re(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Il(n.remoteStore,r.targetId))}async function W$(t,e,n){const r=Kw(t);try{const s=await function(o,a){const l=re(o),c=je.now(),d=a.reduce((f,E)=>f.add(E.key),xe());let h,p;return l.persistence.runTransaction("Locally write mutations","readwrite",f=>{let E=Un(),y=xe();return l.Ns.getEntries(f,d).next(v=>{E=v,E.forEach((_,w)=>{w.isValidDocument()||(y=y.add(_))})}).next(()=>l.localDocuments.getOverlayedDocuments(f,E)).next(v=>{h=v;const _=[];for(const w of a){const I=mB(w,h.get(w.key).overlayedDocument);I!=null&&_.push(new Ms(w.key,I,yC(I.value.mapValue),rn.exists(!0)))}return l.mutationQueue.addMutationBatch(f,c,_,a)}).next(v=>{p=v;const _=v.applyToLocalDocumentSet(h,y);return l.documentOverlayCache.saveOverlays(f,v.batchId,_)})}).then(()=>({batchId:p.batchId,changes:kC(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Vu[o.currentUser.toKey()];c||(c=new Ge(ge)),c=c.insert(a,l),o.Vu[o.currentUser.toKey()]=c}(r,s.batchId,n),await eo(r,s.changes),await $l(r.remoteStore)}catch(s){const i=md(s,"Failed to persist write");n.reject(i)}}async function jk(t,e){const n=re(t);try{const r=await d$(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(oe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?oe(o.hu,14607):s.removedDocuments.size>0&&(oe(o.hu,42227),o.hu=!1))}),await eo(n,r,e)}catch(r){await Xi(r)}}function jS(t,e,n){const r=re(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=re(o);l.onlineState=a;let c=!1;l.queries.forEach((d,h)=>{for(const p of h.Sa)p.va(a)&&(c=!0)}),c&&Bw(l)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function K$(t,e,n){const r=re(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Ge(J.comparator);o=o.insert(i,mt.newNoDocument(i,ue.min()));const a=xe().add(i),l=new hd(ue.min(),new Map,new Ge(ge),o,a);await jk(r,l),r.du=r.du.remove(i),r.Au.delete(e),Ww(r)}else await Tl(r.localStore,e,!1).then(()=>bl(r,e,n)).catch(Xi)}async function G$(t,e){const n=re(t),r=e.batch.batchId;try{const s=await u$(n.localStore,e);Hw(n,r,null),qw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await eo(n,s)}catch(s){await Xi(s)}}async function Q$(t,e,n){const r=re(t);try{const s=await function(o,a){const l=re(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(oe(h!==null,37113),d=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);Hw(r,e,n),qw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await eo(r,s)}catch(s){await Xi(s)}}function qw(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function Hw(t,e,n){const r=re(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function bl(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||Bk(t,r)})}function Bk(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Il(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Ww(t))}function Pv(t,e,n){for(const r of n)r instanceof Lk?(t.Ru.addReference(r.key,e),Y$(t,r)):r instanceof Mk?(H(ql,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||Bk(t,r.key)):te(19791,{wu:r})}function Y$(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(H(ql,"New document in limbo: "+n),t.Eu.add(r),Ww(t))}function Ww(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new J(Fe.fromString(e)),r=t.fu.next();t.Au.set(r,new j$(n)),t.du=t.du.insert(n,r),rm(t.remoteStore,new ps(qn(ud(n.path)),r,"TargetPurposeLimboResolution",Sn.ce))}}async function eo(t,e,n){const r=re(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{o.push(r.pu(l,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){s.push(c);const h=Dw.As(l.targetId,c);i.push(h)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(l,c){const d=re(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>L.forEach(c,p=>L.forEach(p.Es,f=>d.persistence.referenceDelegate.addReference(h,p.targetId,f)).next(()=>L.forEach(p.ds,f=>d.persistence.referenceDelegate.removeReference(h,p.targetId,f)))))}catch(h){if(!Ji(h))throw h;H(Nw,"Failed to update sequence numbers: "+h)}for(const h of c){const p=h.targetId;if(!h.fromCache){const f=d.Ms.get(p),E=f.snapshotVersion,y=f.withLastLimboFreeSnapshotVersion(E);d.Ms=d.Ms.insert(p,y)}}}(r.localStore,i))}async function X$(t,e){const n=re(t);if(!n.currentUser.isEqual(e)){H(ql,"User change. New user:",e.toKey());const r=await _k(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(a=>{a.forEach(l=>{l.reject(new G(B.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await eo(n,r.Ls)}}function J$(t,e){const n=re(t),r=n.Au.get(e);if(r&&r.hu)return xe().add(r.key);{let s=xe();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const a=n.Tu.get(o);s=s.unionWith(a.view.nu)}return s}}async function Z$(t,e){const n=re(t),r=await Jf(n.localStore,e.query,!0),s=e.view.cu(r);return n.isPrimaryClient&&Pv(n,e.targetId,s.au),s}async function e9(t,e){const n=re(t);return Tk(n.localStore,e).then(r=>eo(n,r))}async function t9(t,e,n,r){const s=re(t),i=await function(a,l){const c=re(a),d=re(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.er(h,l).next(p=>p?c.localDocuments.getDocuments(h,p):L.resolve(null)))}(s.localStore,e);i!==null?(n==="pending"?await $l(s.remoteStore):n==="acknowledged"||n==="rejected"?(Hw(s,e,r||null),qw(s,e),function(a,l){re(re(a).mutationQueue).ir(l)}(s.localStore,e)):te(6720,"Unknown batchState",{Su:n}),await eo(s,i)):H(ql,"Cannot apply mutation batch with id: "+e)}async function n9(t,e){const n=re(t);if(sm(n),Kw(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),s=await BS(n,r.toArray());n.gu=!0,await Av(n.remoteStore,!0);for(const i of s)rm(n.remoteStore,i)}else if(e===!1&&n.gu!==!1){const r=[];let s=Promise.resolve();n.Iu.forEach((i,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):s=s.then(()=>(bl(n,o),Tl(n.localStore,o,!0))),Il(n.remoteStore,o)}),await s,await BS(n,r),function(o){const a=re(o);a.Au.forEach((l,c)=>{Il(a.remoteStore,c)}),a.Ru.Jr(),a.Au=new Map,a.du=new Ge(J.comparator)}(n),n.gu=!1,await Av(n.remoteStore,!1)}}async function BS(t,e,n){const r=re(t),s=[],i=[];for(const o of e){let a;const l=r.Iu.get(o);if(l&&l.length!==0){a=await Xf(r.localStore,qn(l[0]));for(const c of l){const d=r.Tu.get(c),h=await Z$(r,d);h.snapshot&&i.push(h.snapshot)}}else{const c=await Ek(r.localStore,o);a=await Xf(r.localStore,c),await zw(r,$k(c),o,!1,a.resumeToken)}s.push(a)}return r.Pu.H_(i),s}function $k(t){return bC(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function r9(t){return function(n){return re(re(n).persistence).Ts()}(re(t).localStore)}async function s9(t,e,n,r){const s=re(t);if(s.gu)return void H(ql,"Ignoring unexpected query state notification.");const i=s.Iu.get(e);if(i&&i.length>0)switch(n){case"current":case"not-current":{const o=await Tk(s.localStore,PC(i[0])),a=hd.createSynthesizedRemoteEventForCurrentChange(e,n==="current",yt.EMPTY_BYTE_STRING);await eo(s,o,a);break}case"rejected":await Tl(s.localStore,e,!0),bl(s,e,r);break;default:te(64155,n)}}async function i9(t,e,n){const r=sm(t);if(r.gu){for(const s of e){if(r.Iu.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){H(ql,"Adding an already active target "+s);continue}const i=await Ek(r.localStore,s),o=await Xf(r.localStore,i);await zw(r,$k(i),o.targetId,!1,o.resumeToken),rm(r.remoteStore,o)}for(const s of n)r.Iu.has(s)&&await Tl(r.localStore,s,!1).then(()=>{Il(r.remoteStore,s),bl(r,s)}).catch(Xi)}}function sm(t){const e=re(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=jk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=J$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=K$.bind(null,e),e.Pu.H_=M$.bind(null,e.eventManager),e.Pu.yu=F$.bind(null,e.eventManager),e}function Kw(t){const e=re(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=G$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Q$.bind(null,e),e}class qu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=nm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return vk(this.persistence,new yk,e.initialUser,this.serializer)}Cu(e){return new Cw(tm.mi,this.serializer)}Du(e){return new xk}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}qu.provider={build:()=>new qu};class o9 extends qu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){oe(this.persistence.referenceDelegate instanceof Yf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new dk(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Zt.withCacheSize(this.cacheSizeBytes):Zt.DEFAULT;return new Cw(r=>Yf.mi(r,n),this.serializer)}}class zk extends qu{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await Kw(this.xu.syncEngine),await $l(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return vk(this.persistence,new yk,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new dk(r,e.asyncQueue,n)}Mu(e,n){const r=new v5(n,this.persistence);return new y5(e.asyncQueue,r)}Cu(e){const n=gk(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Zt.withCacheSize(this.cacheSizeBytes):Zt.DEFAULT;return new kw(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,Pk(),Wh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new xk}}class a9 extends zk{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof xg&&(this.sharedClientState.syncEngine={Co:t9.bind(null,n),vo:s9.bind(null,n),Fo:i9.bind(null,n),Ts:r9.bind(null,n),Do:e9.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji(async r=>{await n9(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Du(e){const n=Pk();if(!xg.v(n))throw new G(B.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=gk(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new xg(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Hu{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>jS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=X$.bind(null,this.syncEngine),await Av(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new L$}()}createDatastore(e){const n=nm(e.databaseInfo.databaseId),r=function(i){return new v$(i)}(e.databaseInfo);return function(i,o,a,l){return new T$(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new S$(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>jS(this.syncEngine,n,0),function(){return OS.v()?new OS:new p$}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,d){const h=new B$(s,i,o,a,l,c);return d&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=re(s);H(Yo,"RemoteStore shutting down."),i.Ea.add(5),await Bl(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Hu.provider={build:()=>new Hu};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):_t("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zi="FirestoreClient";class l9{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Jt.UNAUTHENTICATED,this.clientId=jp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{H(zi,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(H(zi,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=md(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Rg(t,e){t.asyncQueue.verifyOperationInProgress(),H(zi,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await _k(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function $S(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Qw(t);H(zi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>LS(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>LS(e.remoteStore,s)),t._onlineComponents=e}async function Qw(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H(zi,"Using user provided OfflineComponentProvider");try{await Rg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===B.FAILED_PRECONDITION||s.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Fi("Error using user provided cache. Falling back to memory cache: "+n),await Rg(t,new qu)}}else H(zi,"Using default OfflineComponentProvider"),await Rg(t,new o9(void 0));return t._offlineComponents}async function Yw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H(zi,"Using user provided OnlineComponentProvider"),await $S(t,t._uninitializedComponentsProvider._online)):(H(zi,"Using default OnlineComponentProvider"),await $S(t,new Hu))),t._onlineComponents}function qk(t){return Qw(t).then(e=>e.persistence)}function Hk(t){return Qw(t).then(e=>e.localStore)}function Wk(t){return Yw(t).then(e=>e.remoteStore)}function c9(t){return Yw(t).then(e=>e.syncEngine)}async function np(t){const e=await Yw(t),n=e.eventManager;return n.onListen=$$.bind(null,e.syncEngine),n.onUnlisten=q$.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=z$.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=H$.bind(null,e.syncEngine),n}function u9(t){return t.asyncQueue.enqueue(async()=>{const e=await qk(t),n=await Wk(t);return e.setNetworkEnabled(!0),function(s){const i=re(s);return i.Ea.delete(0),pd(i)}(n)})}function d9(t){return t.asyncQueue.enqueue(async()=>{const e=await qk(t),n=await Wk(t);return e.setNetworkEnabled(!1),async function(s){const i=re(s);i.Ea.add(0),await Bl(i),i.Ra.set("Offline")}(n)})}function h9(t,e){const n=new rr;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,o){try{const a=await function(c,d){const h=re(c);return h.persistence.runTransaction("read document","readonly",p=>h.localDocuments.getDocument(p,d))}(s,i);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new G(B.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=md(a,`Failed to get document '${i} from cache`);o.reject(l)}}(await Hk(t),e,n)),n.promise}function f9(t,e,n={}){const r=new rr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new Gw({next:p=>{d.Nu(),o.enqueueAndForget(()=>jw(i,h));const f=p.docs.has(a);!f&&p.fromCache?c.reject(new G(B.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&p.fromCache&&l&&l.source==="server"?c.reject(new G(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new $w(ud(a.path),d,{includeMetadataChanges:!0,qa:!0});return Uw(i,h)}(await np(t),t.asyncQueue,e,n,r)),r.promise}function p9(t,e){const n=new rr;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,o){try{const a=await Jf(s,i,!0),l=new Fk(i,a.Qs),c=l.ru(a.documents),d=l.applyChanges(c,!1);o.resolve(d.snapshot)}catch(a){const l=md(a,`Failed to execute query '${i} against cache`);o.reject(l)}}(await Hk(t),e,n)),n.promise}function m9(t,e,n={}){const r=new rr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new Gw({next:p=>{d.Nu(),o.enqueueAndForget(()=>jw(i,h)),p.fromCache&&l.source==="server"?c.reject(new G(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new $w(a,d,{includeMetadataChanges:!0,qa:!0});return Uw(i,h)}(await np(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kk(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g9="firestore.googleapis.com",qS=!0;class HS{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new G(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=g9,this.ssl=qS}else this.host=e.host,this.ssl=e.ssl??qS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ok;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<uk)throw new G(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}qR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Kk(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new G(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new G(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new G(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xw{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new HS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new HS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new BR;switch(r.type){case"firstParty":return new l5(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=zS.get(n);r&&(H("ComponentProvider","Removing Datastore"),zS.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Rr(this.firestore,e,this._query)}}class it{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new it(this.firestore,e,this._key)}toJSON(){return{type:it._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(ad(n,it._jsonSchema))return new it(e,r||null,new J(Fe.fromString(n.referencePath)))}}it._jsonSchemaVersion="firestore/documentReference/1.0",it._jsonSchema={type:At("string",it._jsonSchemaVersion),referencePath:At("string")};class gs extends Rr{constructor(e,n,r){super(e,n,ud(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new it(this.firestore,null,new J(e))}withConverter(e){return new gs(this.firestore,e,this._path)}}function he(t,e,...n){if(t=He(t),zR("collection","path",e),t instanceof Xw){const r=Fe.fromString(e,...n);return VI(r),new gs(t,null,r)}{if(!(t instanceof it||t instanceof gs))throw new G(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Fe.fromString(e,...n));return VI(r),new gs(t.firestore,null,r)}}function _e(t,e,...n){if(t=He(t),arguments.length===1&&(e=jp.newId()),zR("doc","path",e),t instanceof Xw){const r=Fe.fromString(e,...n);return OI(r),new it(t,null,new J(r))}{if(!(t instanceof it||t instanceof gs))throw new G(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Fe.fromString(e,...n));return OI(r),new it(t.firestore,t instanceof gs?t.converter:null,new J(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS="AsyncQueue";class KS{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Rk(this,"async_queue_retry"),this._c=()=>{const r=Wh();r&&H(WS,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Wh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Wh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new rr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ji(e))throw e;H(WS,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,_t("INTERNAL UNHANDLED ERROR: ",GS(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Fw.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&te(47125,{Pc:GS(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function GS(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QS(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class pn extends Xw{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new KS,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new KS(e),this._firestoreClient=void 0,await e}}}function Gk(t,e,n){n||(n=Bf);const r=Fp(t,"firestore");if(r.isInitialized(n)){const s=r.getImmediate({identifier:n}),i=r.getOptions(n);if(al(i,e))return s;throw new G(B.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new G(B.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<uk)throw new G(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Os(e.host)&&ew(e.host),r.initialize({options:e,instanceIdentifier:n})}function Fs(t){if(t._terminated)throw new G(B.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Qk(t),t._firestoreClient}function Qk(t){var r,s,i;const e=t._freezeSettings(),n=function(a,l,c,d){return new W5(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,Kk(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new l9(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}function y9(t,e){Fi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return Yk(t,Hu.provider,{build:r=>new zk(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function v9(t){Fi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();Yk(t,Hu.provider,{build:n=>new a9(n,e.cacheSizeBytes)})}function Yk(t,e,n){if((t=Et(t,pn))._firestoreClient||t._terminated)throw new G(B.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new G(B.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},Qk(t)}function Jw(t){return u9(Fs(t=Et(t,pn)))}function Zw(t){return d9(Fs(t=Et(t,pn)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Mn(yt.fromBase64String(e))}catch(n){throw new G(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Mn(yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Mn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ad(e,Mn._jsonSchema))return Mn.fromBase64String(e.bytes)}}Mn._jsonSchemaVersion="firestore/bytes/1.0",Mn._jsonSchema={type:At("string",Mn._jsonSchemaVersion),bytes:At("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new G(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new st(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new G(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new G(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:wr._jsonSchemaVersion}}static fromJSON(e){if(ad(e,wr._jsonSchema))return new wr(e.latitude,e.longitude)}}wr._jsonSchemaVersion="firestore/geoPoint/1.0",wr._jsonSchema={type:At("string",wr._jsonSchemaVersion),latitude:At("number"),longitude:At("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Er._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ad(e,Er._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Er(e.vectorValues);throw new G(B.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Er._jsonSchemaVersion="firestore/vectorValue/1.0",Er._jsonSchema={type:At("string",Er._jsonSchemaVersion),vectorValues:At("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _9=/^__.*__$/;class w9{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ms(e,this.data,this.fieldMask,n,this.fieldTransforms):new jl(e,this.data,n,this.fieldTransforms)}}class Xk{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ms(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Jk(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te(40011,{Ac:t})}}class im{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new im({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return rp(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Jk(this.Ac)&&_9.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class E9{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||nm(e)}Cc(e,n,r,s=!1){return new im({Ac:e,methodName:n,Dc:r,path:st.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function om(t){const e=t._freezeSettings(),n=nm(t._databaseId);return new E9(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Zk(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);nE("Data must be an object, but it was:",o,r);const a=eD(r,o);let l,c;if(i.merge)l=new bn(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const h of i.mergeFields){const p=Rv(e,h,n);if(!o.contains(p))throw new G(B.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);nD(d,p)||d.push(p)}l=new bn(d),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new w9(new nn(a),l,c)}class am extends Hl{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof am}}function T9(t,e,n){return new im({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class eE extends Hl{_toFieldTransform(e){return new Ew(e.path,new _l)}isEqual(e){return e instanceof eE}}class tE extends Hl{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=T9(this,e,!0),r=this.vc.map(i=>Wl(i,n)),s=new Wo(r);return new Ew(e.path,s)}isEqual(e){return e instanceof tE&&al(this.vc,e.vc)}}function I9(t,e,n,r){const s=t.Cc(1,e,n);nE("Data must be an object, but it was:",s,r);const i=[],o=nn.empty();Zi(r,(l,c)=>{const d=rE(e,l,n);c=He(c);const h=s.yc(d);if(c instanceof am)i.push(d);else{const p=Wl(c,h);p!=null&&(i.push(d),o.set(d,p))}});const a=new bn(i);return new Xk(o,a,s.fieldTransforms)}function S9(t,e,n,r,s,i){const o=t.Cc(1,e,n),a=[Rv(e,r,n)],l=[s];if(i.length%2!=0)throw new G(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)a.push(Rv(e,i[p])),l.push(i[p+1]);const c=[],d=nn.empty();for(let p=a.length-1;p>=0;--p)if(!nD(c,a[p])){const f=a[p];let E=l[p];E=He(E);const y=o.yc(f);if(E instanceof am)c.push(f);else{const v=Wl(E,y);v!=null&&(c.push(f),d.set(f,v))}}const h=new bn(c);return new Xk(d,h,o.fieldTransforms)}function b9(t,e,n,r=!1){return Wl(n,t.Cc(r?4:3,e))}function Wl(t,e){if(tD(t=He(t)))return nE("Unsupported field value:",e,t),eD(t,e);if(t instanceof Hl)return function(r,s){if(!Jk(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=Wl(a,s.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=He(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return cB(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=je.fromDate(r);return{timestampValue:El(s.serializer,i)}}if(r instanceof je){const i=new je(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:El(s.serializer,i)}}if(r instanceof wr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Mn)return{bytesValue:qC(s.serializer,r._byteString)};if(r instanceof it){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Aw(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Er)return function(o,a){return{mapValue:{fields:{[gw]:{stringValue:yw},[ml]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Sc("VectorValues must only contain numeric values.");return ww(a.serializer,c)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Bp(r)}`)}(t,e)}function eD(t,e){const n={};return lC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zi(t,(r,s)=>{const i=Wl(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function tD(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof je||t instanceof wr||t instanceof Mn||t instanceof it||t instanceof Hl||t instanceof Er)}function nE(t,e,n){if(!tD(n)||!HR(n)){const r=Bp(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Rv(t,e,n){if((e=He(e))instanceof gd)return e._internalPath;if(typeof e=="string")return rE(t,e);throw rp("Field path arguments must be of type string or ",t,!1,void 0,n)}const A9=new RegExp("[~\\*/\\[\\]]");function rE(t,e,n){if(e.search(A9)>=0)throw rp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new gd(...e.split("."))._internalPath}catch{throw rp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function rp(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new G(B.INVALID_ARGUMENT,a+t+l)}function nD(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new it(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new x9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(lm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class x9 extends rD{data(){return super.data()}}function lm(t,e){return typeof e=="string"?rE(t,e):e instanceof gd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sD(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new G(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class sE{}class cm extends sE{}function we(t,e,...n){let r=[];e instanceof sE&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof um).length,a=i.filter(l=>l instanceof yd).length;if(o>1||o>0&&a>0)throw new G(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class yd extends cm{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new yd(e,n,r)}_apply(e){const n=this._parse(e);return iD(e._query,n),new Rr(e.firestore,e.converter,gv(e._query,n))}_parse(e){const n=om(e.firestore);return function(i,o,a,l,c,d,h){let p;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new G(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){XS(h,d);const E=[];for(const y of h)E.push(YS(l,i,y));p={arrayValue:{values:E}}}else p=YS(l,i,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||XS(h,d),p=b9(a,o,h,d==="in"||d==="not-in");return De.create(c,d,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function me(t,e,n){const r=e,s=lm("where",t);return yd._create(s,r,n)}class um extends sE{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new um(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Be.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)iD(o,l),o=gv(o,l)}(e._query,n),new Rr(e.firestore,e.converter,gv(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class dm extends cm{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new dm(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new G(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new G(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new $u(i,o)}(e._query,this._field,this._direction);return new Rr(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Ul(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function ys(t,e="asc"){const n=e,r=lm("orderBy",t);return dm._create(r,n)}class hm extends cm{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new hm(e,n,r)}_apply(e){return new Rr(e.firestore,e.converter,qf(e._query,this._limit,this._limitType))}}function Xo(t){return p5("limit",t),hm._create("limit",t,"F")}function YS(t,e,n){if(typeof(n=He(n))=="string"){if(n==="")throw new G(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!AC(e)&&n.indexOf("/")!==-1)throw new G(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Fe.fromString(n));if(!J.isDocumentKey(r))throw new G(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ju(t,new J(r))}if(n instanceof it)return ju(t,n._key);throw new G(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Bp(n)}.`)}function XS(t,e){if(!Array.isArray(t)||t.length===0)throw new G(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function iD(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new G(B.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G(B.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class oD{convertValue(e,n="none"){switch(ji(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Cs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw te(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Zi(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[ml].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>nt(o.doubleValue));return new Er(n)}convertGeoPoint(e){return new wr(nt(e.latitude),nt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Kp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Fu(e));default:return null}}convertTimestamp(e){const n=Rs(e);return new je(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Fe.fromString(e);oe(ek(r),9688,{name:e});const s=new Ui(r.get(1),r.get(3)),i=new J(r.popFirst(5));return s.isEqual(n)||_t(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aD(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class bo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vs extends rD{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new su(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(lm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new G(B.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=vs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}vs._jsonSchemaVersion="firestore/documentSnapshot/1.0",vs._jsonSchema={type:At("string",vs._jsonSchemaVersion),bundleSource:At("string","DocumentSnapshot"),bundleName:At("string"),bundle:At("string")};class su extends vs{data(e={}){return super.data(e)}}class _s{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new bo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new su(this._firestore,this._userDataWriter,r.key,r,new bo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new G(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new su(s._firestore,s._userDataWriter,a.doc.key,a.doc,new bo(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new su(s._firestore,s._userDataWriter,a.doc.key,a.doc,new bo(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:P9(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new G(B.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=_s._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=jp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function P9(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gt(t){t=Et(t,it);const e=Et(t.firestore,pn);return f9(Fs(e),t._key).then(n=>cD(e,t,n))}_s._jsonSchemaVersion="firestore/querySnapshot/1.0",_s._jsonSchema={type:At("string",_s._jsonSchemaVersion),bundleSource:At("string","QuerySnapshot"),bundleName:At("string"),bundle:At("string")};class vd extends oD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new it(this.firestore,null,n)}}function lD(t){t=Et(t,it);const e=Et(t.firestore,pn),n=Fs(e),r=new vd(e);return h9(n,t._key).then(s=>new vs(e,r,t._key,s,new bo(s!==null&&s.hasLocalMutations,!0),t.converter))}function be(t){t=Et(t,Rr);const e=Et(t.firestore,pn),n=Fs(e),r=new vd(e);return sD(t._query),m9(n,t._query).then(s=>new _s(e,r,t,s))}function R9(t){t=Et(t,Rr);const e=Et(t.firestore,pn),n=Fs(e),r=new vd(e);return p9(n,t._query).then(s=>new _s(e,r,t,s))}function qi(t,e,n){t=Et(t,it);const r=Et(t.firestore,pn),s=aD(t.converter,e,n);return _d(r,[Zk(om(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,rn.none())])}function Ze(t,e,n,...r){t=Et(t,it);const s=Et(t.firestore,pn),i=om(s);let o;return o=typeof(e=He(e))=="string"||e instanceof gd?S9(i,"updateDoc",t._key,e,n,r):I9(i,"updateDoc",t._key,e),_d(s,[o.toMutation(t._key,rn.exists(!0))])}function en(t){return _d(Et(t.firestore,pn),[new Jp(t._key,rn.none())])}function ws(t,e){const n=Et(t.firestore,pn),r=_e(t),s=aD(t.converter,e);return _d(n,[Zk(om(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,rn.exists(!1))]).then(()=>r)}function sp(t,...e){var l,c,d;t=He(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||QS(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(QS(e[r])){const h=e[r];e[r]=(l=h.next)==null?void 0:l.bind(h),e[r+1]=(c=h.error)==null?void 0:c.bind(h),e[r+2]=(d=h.complete)==null?void 0:d.bind(h)}let i,o,a;if(t instanceof it)o=Et(t.firestore,pn),a=ud(t._key.path),i={next:h=>{e[r]&&e[r](cD(o,t,h))},error:e[r+1],complete:e[r+2]};else{const h=Et(t,Rr);o=Et(h.firestore,pn),a=h._query;const p=new vd(o);i={next:f=>{e[r]&&e[r](new _s(o,p,h,f))},error:e[r+1],complete:e[r+2]},sD(t._query)}return function(p,f,E,y){const v=new Gw(y),_=new $w(f,v,E);return p.asyncQueue.enqueueAndForget(async()=>Uw(await np(p),_)),()=>{v.Nu(),p.asyncQueue.enqueueAndForget(async()=>jw(await np(p),_))}}(Fs(o),a,s,i)}function _d(t,e){return function(r,s){const i=new rr;return r.asyncQueue.enqueueAndForget(async()=>W$(await c9(r),s,i)),i.promise}(Fs(t),e)}function cD(t,e,n){const r=n.docs.get(e._key),s=new vd(t);return new vs(t,s,e._key,r,new bo(n.hasPendingWrites,n.fromCache),e.converter)}function Ae(){return new eE("serverTimestamp")}function C9(...t){return new tE("arrayUnion",t)}(function(e,n=!0){(function(s){Fl=s})(id),Zr(new Ar("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new pn(new o5(r.getProvider("auth-internal")),new c5(o,r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new G(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ui(c.options.projectId,d)}(o,s),o);return i={useFetchStreams:n,...i},a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),zn(CI,kI,e),zn(CI,kI,"esm2020")})();const Cg=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:oD,Bytes:Mn,CollectionReference:gs,DocumentReference:it,DocumentSnapshot:vs,FieldPath:gd,FieldValue:Hl,Firestore:pn,FirestoreError:G,GeoPoint:wr,Query:Rr,QueryCompositeFilterConstraint:um,QueryConstraint:cm,QueryDocumentSnapshot:su,QueryFieldFilterConstraint:yd,QueryLimitConstraint:hm,QueryOrderByConstraint:dm,QuerySnapshot:_s,SnapshotMetadata:bo,Timestamp:je,VectorValue:Er,_AutoId:jp,_ByteString:yt,_DatabaseId:Ui,_DocumentKey:J,_EmptyAuthCredentialsProvider:BR,_FieldPath:st,_cast:Et,_logWarn:Fi,_validateIsNotUsedTogether:qR,addDoc:ws,arrayUnion:C9,collection:he,deleteDoc:en,disableNetwork:Zw,doc:_e,enableIndexedDbPersistence:y9,enableMultiTabIndexedDbPersistence:v9,enableNetwork:Jw,ensureFirestoreConfigured:Fs,executeWrite:_d,getDoc:gt,getDocFromCache:lD,getDocs:be,getDocsFromCache:R9,initializeFirestore:Gk,limit:Xo,onSnapshot:sp,orderBy:ys,query:we,serverTimestamp:Ae,setDoc:qi,setLogLevel:UR,updateDoc:Ze,where:me},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k9="type.googleapis.com/google.protobuf.Int64Value",D9="type.googleapis.com/google.protobuf.UInt64Value";function uD(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function ip(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>ip(e));if(typeof t=="function"||typeof t=="object")return uD(t,e=>ip(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Al(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case k9:case D9:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Al(e)):typeof t=="function"||typeof t=="object"?uD(t,e=>Al(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class An extends Pr{constructor(e,n,r){super(`${iE}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,An.prototype)}}function N9(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function op(t,e){let n=N9(t),r=n,s;try{const i=e&&e.error;if(i){const o=i.status;if(typeof o=="string"){if(!JS[o])return new An("internal","internal");n=JS[o],r=o}const a=i.message;typeof a=="string"&&(r=a),s=i.details,s!==void 0&&(s=Al(s))}}catch{}return n==="ok"?null:new An(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O9{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Ln(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(i=>this.auth=i,()=>{}),this.messaging||r.get().then(i=>this.messaging=i,()=>{}),this.appCheck||s==null||s.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv="us-central1",V9=/^data: (.*?)(?:\n|$)/;function L9(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new An("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class M9{constructor(e,n,r,s,i=Cv,o=(...a)=>fetch(...a)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new O9(e,n,r,s),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(i);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=Cv}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function F9(t,e,n){const r=Os(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(ew(t.emulatorOrigin+"/backends"),XP("Functions",!0))}function U9(t,e,n){const r=s=>B9(t,e,s,{});return r.stream=(s,i)=>z9(t,e,s,i),r}function dD(t){return t.emulatorOrigin&&Os(t.emulatorOrigin)?"include":void 0}async function j9(t,e,n,r,s){n["Content-Type"]="application/json";let i;try{i=await r(t,{method:"POST",body:JSON.stringify(e),headers:n,credentials:dD(s)})}catch{return{status:0,json:null}}let o=null;try{o=await i.json()}catch{}return{status:i.status,json:o}}async function hD(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function B9(t,e,n,r){const s=t._url(e);return $9(t,s,n,r)}async function $9(t,e,n,r){n=ip(n);const s={data:n},i=await hD(t,r),o=r.timeout||7e4,a=L9(o),l=await Promise.race([j9(e,s,i,t.fetchImpl,t),a.promise,t.cancelAllRequests]);if(a.cancel(),!l)throw new An("cancelled","Firebase Functions instance was deleted.");const c=op(l.status,l.json);if(c)throw c;if(!l.json)throw new An("internal","Response is not valid JSON object.");let d=l.json.data;if(typeof d>"u"&&(d=l.json.result),typeof d>"u")throw new An("internal","Response is missing data field.");return{data:Al(d)}}function z9(t,e,n,r){const s=t._url(e);return q9(t,s,n,r||{})}async function q9(t,e,n,r){var p;n=ip(n);const s={data:n},i=await hD(t,r);i["Content-Type"]="application/json",i.Accept="text/event-stream";let o;try{o=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(s),headers:i,signal:r==null?void 0:r.signal,credentials:dD(t)})}catch(f){if(f instanceof Error&&f.name==="AbortError"){const y=new An("cancelled","Request was cancelled.");return{data:Promise.reject(y),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(y)}}}}}}const E=op(0,null);return{data:Promise.reject(E),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(E)}}}}}}let a,l;const c=new Promise((f,E)=>{a=f,l=E});(p=r==null?void 0:r.signal)==null||p.addEventListener("abort",()=>{const f=new An("cancelled","Request was cancelled.");l(f)});const d=o.body.getReader(),h=H9(d,a,l,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const f=h.getReader();return{async next(){const{value:E,done:y}=await f.read();return{value:E,done:y}},async return(){return await f.cancel(),{done:!0,value:void 0}}}}},data:c}}function H9(t,e,n,r){const s=(o,a)=>{const l=o.match(V9);if(!l)return;const c=l[1];try{const d=JSON.parse(c);if("result"in d){e(Al(d.result));return}if("message"in d){a.enqueue(Al(d.message));return}if("error"in d){const h=op(0,d);a.error(h),n(h);return}}catch(d){if(d instanceof An){a.error(d),n(d);return}}},i=new TextDecoder;return new ReadableStream({start(o){let a="";return l();async function l(){if(r!=null&&r.aborted){const c=new An("cancelled","Request was cancelled");return o.error(c),n(c),Promise.resolve()}try{const{value:c,done:d}=await t.read();if(d){a.trim()&&s(a.trim(),o),o.close();return}if(r!=null&&r.aborted){const p=new An("cancelled","Request was cancelled");o.error(p),n(p),await t.cancel();return}a+=i.decode(c,{stream:!0});const h=a.split(`
`);a=h.pop()||"";for(const p of h)p.trim()&&s(p.trim(),o);return l()}catch(c){const d=c instanceof An?c:op(0,null);o.error(d),n(d)}}},cancel(){return t.cancel()}})}const ZS="@firebase/functions",eb="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W9="auth-internal",K9="app-check-internal",G9="messaging-internal";function Q9(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),i=n.getProvider(W9),o=n.getProvider(G9),a=n.getProvider(K9);return new M9(s,i,o,a,r)};Zr(new Ar(iE,e,"PUBLIC").setMultipleInstances(!0)),zn(ZS,eb,t),zn(ZS,eb,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y9(t=iR(),e=Cv){const r=Fp(He(t),iE).getImmediate({identifier:e}),s=QP("functions");return s&&X9(r,...s),r}function X9(t,e,n){F9(He(t),e,n)}function fD(t,e,n){return U9(He(t),e)}Q9();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pD="firebasestorage.googleapis.com",mD="storageBucket",J9=2*60*1e3,Z9=10*60*1e3,ez=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt extends Pr{constructor(e,n,r=0){super(kg(e),`Firebase Storage: ${n} (${kg(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,dt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return kg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var tt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(tt||(tt={}));function kg(t){return"storage/"+t}function oE(){const t="An unknown error occurred, please check the error payload for server response.";return new dt(tt.UNKNOWN,t)}function tz(t){return new dt(tt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function nz(t){return new dt(tt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function rz(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new dt(tt.UNAUTHENTICATED,t)}function sz(){return new dt(tt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function iz(t){return new dt(tt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function gD(){return new dt(tt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function yD(){return new dt(tt.CANCELED,"User canceled the upload/download.")}function oz(t){return new dt(tt.INVALID_URL,"Invalid URL '"+t+"'.")}function az(t){return new dt(tt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function lz(){return new dt(tt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+mD+"' property when initializing the app?")}function vD(){return new dt(tt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function cz(){return new dt(tt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function uz(){return new dt(tt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function dz(t){return new dt(tt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function kv(t){return new dt(tt.INVALID_ARGUMENT,t)}function _D(){return new dt(tt.APP_DELETED,"The Firebase app was deleted.")}function hz(t){return new dt(tt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function iu(t,e){return new dt(tt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Ic(t){throw new dt(tt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=jn.makeFromUrl(e,n)}catch{return new jn(e,"")}if(r.path==="")return r;throw az(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(D){D.path.charAt(D.path.length-1)==="/"&&(D.path_=D.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(D){D.path_=decodeURIComponent(D.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",f=new RegExp(`^https?://${h}/${d}/b/${s}/o${p}`,"i"),E={bucket:1,path:3},y=n===pD?"(?:storage.googleapis.com|storage.cloud.google.com)":n,v="([^?#]*)",_=new RegExp(`^https?://${y}/${s}/${v}`,"i"),I=[{regex:a,indices:l,postModify:i},{regex:f,indices:E,postModify:c},{regex:_,indices:{bucket:1,path:2},postModify:c}];for(let D=0;D<I.length;D++){const O=I[D],V=O.regex.exec(e);if(V){const S=V[O.indices.bucket];let T=V[O.indices.path];T||(T=""),r=new jn(S,T),O.postModify(r);break}}if(r==null)throw oz(e);return r}}class fz{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pz(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function d(...v){c||(c=!0,e.apply(null,v))}function h(v){s=setTimeout(()=>{s=null,t(f,l())},v)}function p(){i&&clearTimeout(i)}function f(v,..._){if(c){p();return}if(v){p(),d.call(null,v,..._);return}if(l()||o){p(),d.call(null,v,..._);return}r<64&&(r*=2);let I;a===1?(a=2,I=0):I=(r+Math.random())*1e3,h(I)}let E=!1;function y(v){E||(E=!0,p(),!c&&(s!==null?(v||(a=2),clearTimeout(s),h(0)):v||(a=1)))}return h(0),i=setTimeout(()=>{o=!0,y(!0)},n),y}function mz(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gz(t){return t!==void 0}function yz(t){return typeof t=="function"}function vz(t){return typeof t=="object"&&!Array.isArray(t)}function fm(t){return typeof t=="string"||t instanceof String}function tb(t){return aE()&&t instanceof Blob}function aE(){return typeof Blob<"u"}function nb(t,e,n,r){if(r<e)throw kv(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw kv(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wd(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function wD(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Mo;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Mo||(Mo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ED(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _z{constructor(e,n,r,s,i,o,a,l,c,d,h,p=!0,f=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=h,this.retry=p,this.isUsingEmulator=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,y)=>{this.resolve_=E,this.reject_=y,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new fh(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===Mo.NO_ERROR,l=i.getStatus();if(!a||ED(l,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===Mo.ABORT;r(!1,new fh(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new fh(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());gz(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=oE();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?_D():yD();o(l)}else{const l=gD();o(l)}};this.canceled_?n(!1,new fh(!1,null,!0)):this.backoffId_=pz(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&mz(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class fh{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function wz(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Ez(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Tz(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Iz(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Sz(t,e,n,r,s,i,o=!0,a=!1){const l=wD(t.urlParams),c=t.url+l,d=Object.assign({},t.headers);return Tz(d,e),wz(d,n),Ez(d,i),Iz(d,r),new _z(c,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bz(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Az(...t){const e=bz();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(aE())return new Blob(t);throw new dt(tt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function xz(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pz(t){if(typeof atob>"u")throw dz("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Dg{constructor(e,n){this.data=e,this.contentType=n||null}}function Rz(t,e){switch(t){case Gr.RAW:return new Dg(TD(e));case Gr.BASE64:case Gr.BASE64URL:return new Dg(ID(t,e));case Gr.DATA_URL:return new Dg(kz(e),Dz(e))}throw oE()}function TD(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function Cz(t){let e;try{e=decodeURIComponent(t)}catch{throw iu(Gr.DATA_URL,"Malformed data URL.")}return TD(e)}function ID(t,e){switch(t){case Gr.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw iu(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Gr.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw iu(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Pz(e)}catch(s){throw s.message.includes("polyfill")?s:iu(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class SD{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw iu(Gr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=Nz(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function kz(t){const e=new SD(t);return e.base64?ID(Gr.BASE64,e.rest):Cz(e.rest)}function Dz(t){return new SD(t).contentType}function Nz(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e,n){let r=0,s="";tb(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(tb(this.data_)){const r=this.data_,s=xz(r,e,n);return s===null?null:new us(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new us(r,!0)}}static getBlob(...e){if(aE()){const n=e.map(r=>r instanceof us?r.data_:r);return new us(Az.apply(null,n))}else{const n=e.map(o=>fm(o)?Rz(Gr.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new us(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bD(t){let e;try{e=JSON.parse(t)}catch{return null}return vz(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oz(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Vz(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function AD(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lz(t,e){return e}class ln{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||Lz}}let ph=null;function Mz(t){return!fm(t)||t.length<2?t:AD(t)}function lE(){if(ph)return ph;const t=[];t.push(new ln("bucket")),t.push(new ln("generation")),t.push(new ln("metageneration")),t.push(new ln("name","fullPath",!0));function e(i,o){return Mz(o)}const n=new ln("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new ln("size");return s.xform=r,t.push(s),t.push(new ln("timeCreated")),t.push(new ln("updated")),t.push(new ln("md5Hash",null,!0)),t.push(new ln("cacheControl",null,!0)),t.push(new ln("contentDisposition",null,!0)),t.push(new ln("contentEncoding",null,!0)),t.push(new ln("contentLanguage",null,!0)),t.push(new ln("contentType",null,!0)),t.push(new ln("metadata","customMetadata",!0)),ph=t,ph}function Fz(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new jn(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function Uz(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return Fz(r,t),r}function xD(t,e,n){const r=bD(e);return r===null?null:Uz(t,r,n)}function jz(t,e,n,r){const s=bD(e);if(s===null||!fm(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const d=t.bucket,h=t.fullPath,p="/b/"+o(d)+"/o/"+o(h),f=wd(p,n,r),E=wD({alt:"media",token:c});return f+E})[0]}function PD(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class Kl{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Es(t){if(!t)throw oE()}function cE(t,e){function n(r,s){const i=xD(t,s,e);return Es(i!==null),i}return n}function Bz(t,e){function n(r,s){const i=xD(t,s,e);return Es(i!==null),jz(i,s,t.host,t._protocol)}return n}function Ed(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=sz():s=rz():n.getStatus()===402?s=nz(t.bucket):n.getStatus()===403?s=iz(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function RD(t){const e=Ed(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=tz(t.path)),i.serverResponse=s.serverResponse,i}return n}function $z(t,e,n){const r=e.fullServerUrl(),s=wd(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new Kl(s,i,cE(t,n),o);return a.errorHandler=RD(e),a}function zz(t,e,n){const r=e.fullServerUrl(),s=wd(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new Kl(s,i,Bz(t,n),o);return a.errorHandler=RD(e),a}function qz(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function CD(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=qz(null,e)),r}function kD(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let I="";for(let D=0;D<2;D++)I=I+Math.random().toString().slice(2);return I}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=CD(e,r,s),d=PD(c,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,p=`\r
--`+l+"--",f=us.getBlob(h,r,p);if(f===null)throw vD();const E={name:c.fullPath},y=wd(i,t.host,t._protocol),v="POST",_=t.maxUploadRetryTime,w=new Kl(y,v,cE(t,n),_);return w.urlParams=E,w.headers=o,w.body=f.uploadData(),w.errorHandler=Ed(e),w}class ap{constructor(e,n,r,s){this.current=e,this.total=n,this.finalized=!!r,this.metadata=s||null}}function uE(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Es(!1)}return Es(!!n&&(e||["active"]).indexOf(n)!==-1),n}function Hz(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o=CD(e,r,s),a={name:o.fullPath},l=wd(i,t.host,t._protocol),c="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},h=PD(o,n),p=t.maxUploadRetryTime;function f(y){uE(y);let v;try{v=y.getResponseHeader("X-Goog-Upload-URL")}catch{Es(!1)}return Es(fm(v)),v}const E=new Kl(l,c,f,p);return E.urlParams=a,E.headers=d,E.body=h,E.errorHandler=Ed(e),E}function Wz(t,e,n,r){const s={"X-Goog-Upload-Command":"query"};function i(c){const d=uE(c,["active","final"]);let h=null;try{h=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Es(!1)}h||Es(!1);const p=Number(h);return Es(!isNaN(p)),new ap(p,r.size(),d==="final")}const o="POST",a=t.maxUploadRetryTime,l=new Kl(n,o,i,a);return l.headers=s,l.errorHandler=Ed(e),l}const rb=256*1024;function Kz(t,e,n,r,s,i,o,a){const l=new ap(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw cz();const c=l.total-l.current;let d=c;s>0&&(d=Math.min(d,s));const h=l.current,p=h+d;let f="";d===0?f="finalize":c===d?f="upload, finalize":f="upload";const E={"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":`${l.current}`},y=r.slice(h,p);if(y===null)throw vD();function v(D,O){const V=uE(D,["active","final"]),S=l.current+d,T=r.size();let A;return V==="final"?A=cE(e,i)(D,O):A=null,new ap(S,T,V==="final",A)}const _="POST",w=e.maxUploadRetryTime,I=new Kl(n,_,v,w);return I.headers=E,I.body=y.uploadData(),I.progressCallback=a||null,I.errorHandler=Ed(t),I}const En={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Ng(t){switch(t){case"running":case"pausing":case"canceling":return En.RUNNING;case"paused":return En.PAUSED;case"success":return En.SUCCESS;case"canceled":return En.CANCELED;case"error":return En.ERROR;default:return En.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gz{constructor(e,n,r){if(yz(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ma(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class Qz{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Mo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Mo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Mo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw Ic("cannot .send() more than once");if(Os(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ic("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ic("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ic("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ic("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Yz extends Qz{initXhr(){this.xhr_.responseType="text"}}function _o(){return new Yz}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xz{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=lE(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(tt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const i=this.isExponentialBackoffExpired();if(ED(s.status,[]))if(i)s=gD();else{this.sleepTime=Math.max(this.sleepTime*2,ez),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(tt.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,i)=>{this._resolve=s,this._reject=i,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=Hz(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,_o,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._uploadUrl=i,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const s=Wz(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(s,_o,n,r);this._request=i,i.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=rb*this._chunkMultiplier,n=new ap(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,i)=>{let o;try{o=Kz(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,_o,s,i,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){rb*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=$z(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,_o,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=kD(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,_o,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=yD(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=Ng(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,s){const i=new Gz(n||void 0,r||void 0,s||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Ng(this._state)){case En.SUCCESS:ma(this._resolve.bind(null,this.snapshot))();break;case En.CANCELED:case En.ERROR:const n=this._reject;ma(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Ng(this._state)){case En.RUNNING:case En.PAUSED:e.next&&ma(e.next.bind(e,this.snapshot))();break;case En.SUCCESS:e.complete&&ma(e.complete.bind(e))();break;case En.CANCELED:case En.ERROR:e.error&&ma(e.error.bind(e,this._error))();break;default:e.error&&ma(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e,n){this._service=e,n instanceof jn?this._location=n:this._location=jn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Jo(e,n)}get root(){const e=new jn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return AD(this._location.path)}get storage(){return this._service}get parent(){const e=Oz(this._location.path);if(e===null)return null;const n=new jn(this._location.bucket,e);return new Jo(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw hz(e)}}function Jz(t,e,n){t._throwIfRoot("uploadBytes");const r=kD(t.storage,t._location,lE(),new us(e,!0),n);return t.storage.makeRequestWithTokens(r,_o).then(s=>({metadata:s,ref:t}))}function Zz(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new Xz(t,new us(e),n)}function e8(t){t._throwIfRoot("getDownloadURL");const e=zz(t.storage,t._location,lE());return t.storage.makeRequestWithTokens(e,_o).then(n=>{if(n===null)throw uz();return n})}function t8(t,e){const n=Vz(t._location.path,e),r=new jn(t._location.bucket,n);return new Jo(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n8(t){return/^[A-Za-z]+:\/\//.test(t)}function r8(t,e){return new Jo(t,e)}function DD(t,e){if(t instanceof dE){const n=t;if(n._bucket==null)throw lz();const r=new Jo(n,n._bucket);return e!=null?DD(r,e):r}else return e!==void 0?t8(t,e):t}function s8(t,e){if(e&&n8(e)){if(t instanceof dE)return r8(t,e);throw kv("To use ref(service, url), the first argument must be a Storage instance.")}else return DD(t,e)}function sb(t,e){const n=e==null?void 0:e[mD];return n==null?null:jn.makeFromBucketSpec(n,t)}function i8(t,e,n,r={}){t.host=`${e}:${n}`;const s=Os(e);s&&(ew(`https://${t.host}/b`),XP("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:KU(i,t.app.options.projectId))}class dE{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=pD,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=J9,this._maxUploadRetryTime=Z9,this._requests=new Set,s!=null?this._bucket=jn.makeFromBucketSpec(s,this._host):this._bucket=sb(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=jn.makeFromBucketSpec(this._url,e):this._bucket=sb(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){nb("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){nb("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Ln(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Jo(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new fz(_D());{const o=Sz(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const ib="@firebase/storage",ob="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ND="storage";function b7(t,e,n){return t=He(t),Jz(t,e,n)}function A7(t,e,n){return t=He(t),Zz(t,e,n)}function x7(t){return t=He(t),e8(t)}function P7(t,e){return t=He(t),s8(t,e)}function o8(t=iR(),e){t=He(t);const r=Fp(t,ND).getImmediate({identifier:e}),s=QP("storage");return s&&a8(r,...s),r}function a8(t,e,n,r={}){i8(t,e,n,r)}function l8(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new dE(n,r,s,e,id)}function c8(){Zr(new Ar(ND,l8,"PUBLIC").setMultipleInstances(!0)),zn(ib,ob,""),zn(ib,ob,"esm2020")}c8();const u8={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_VERSION:"0.0.0",VITE_DEV_MODE:"true",VITE_ENABLE_OFFLINE_PERSISTENCE:"false",VITE_FIREBASE_API_KEY:"AIzaSyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s",VITE_FIREBASE_APP_ID:"1:483702062341:web:b1ff06ad175cb7ae428b6c",VITE_FIREBASE_AUTH_DOMAIN:"voda-c6abd.firebaseapp.com",VITE_FIREBASE_AUTH_EMULATOR_URL:"http://localhost:9099",VITE_FIREBASE_FIRESTORE_EMULATOR_HOST:"localhost:8080",VITE_FIREBASE_FUNCTIONS_EMULATOR_HOST:"localhost:5001",VITE_FIREBASE_MEASUREMENT_ID:"G-CV6QGH7G7P",VITE_FIREBASE_MESSAGING_SENDER_ID:"483702062341",VITE_FIREBASE_PROJECT_ID:"voda-c6abd",VITE_FIREBASE_STORAGE_BUCKET:"voda-c6abd.appspot.com",VITE_FORCE_HASH_ROUTER:"true",VITE_SHOP_ID:"demo-shop-001",VITE_SHOP_NAME:"   ",VITE_SHOW_ENV_BANNER:"true",VITE_USE_EMULATORS:"false",VITE_USE_FIREBASE_EMULATOR:"false"},Dv={apiKey:"AIzaSyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s",authDomain:"voda-c6abd.firebaseapp.com",projectId:"voda-c6abd",storageBucket:"voda-c6abd.appspot.com",messagingSenderId:"483702062341",appId:"1:483702062341:web:b1ff06ad175cb7ae428b6c"};console.log(" Initializing Firebase with config:",{projectId:Dv.projectId,authDomain:Dv.authDomain,emulatorMode:!1});const pm=sR(Dv);try{typeof window<"u",void 0||console.log(" App Check not initialized: missing VITE_FIREBASE_RECAPTCHA_KEY")}catch(t){console.log(" Failed to initialize App Check (will proceed without it):",t)}const Xn=tj(pm,{persistence:[Ij,tv]});console.log(" Firebase Auth initialized with browserLocalPersistence (fallback to inMemory)");const W=Gk(pm,{experimentalAutoDetectLongPolling:!0});try{UR("error")}catch{}const hE=Y9(pm,"us-central1"),d8=o8(pm);console.log(" Firebase initialized successfully");const h8=async()=>{try{console.log(" Offline persistence disabled (env flag or emulator mode)"),console.log(" Firestore features configured successfully")}catch(t){console.error(" Error configuring Firestore features:",t)}};setTimeout(h8,100);let po=0;const Og=3,f8=1e3,OD=async t=>{var e,n;if(console.error(" Firestore connection error:",t),(t.code==="unavailable"||t.code==="failed-precondition"||(e=t.message)!=null&&e.includes("ERR_ABORTED")||(n=t.message)!=null&&n.includes("UNAVAILABLE"))&&po<Og){po++;const r=Math.min(f8*Math.pow(2,po-1),1e4);console.log(` Attempting to reconnect (${po}/${Og}) in ${r}ms...`);try{await Zw(W),await new Promise(s=>setTimeout(s,r)),await Jw(W),console.log(" Firestore reconnected successfully"),po=0}catch(s){console.error(" Failed to reconnect:",s),po>=Og&&(console.error(" Maximum reconnection attempts reached."),p8())}}},p8=()=>{const t=document.createElement("div");t.style.cssText=`
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #f8d7da;
    color: #721c24;
    padding: 20px;
    border-radius: 8px;
    border: 1px solid #f5c6cb;
    z-index: 10000;
    text-align: center;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    max-width: 400px;
  `,t.innerHTML=`
    <h3 style="margin: 0 0 10px 0;">  </h3>
    <p style="margin: 0 0 15px 0;">   .     .</p>
    <button onclick="window.location.reload()" style="
      background: #dc3545;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
    ">  </button>
  `,document.body.appendChild(t),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},1e4)};window.addEventListener("online",async()=>{console.log(" Network back online, enabling Firestore...");try{await Jw(W),po=0,console.log(" Firestore network enabled")}catch(t){console.error(" Failed to enable Firestore network:",t)}});window.addEventListener("offline",async()=>{console.log(" Network offline, disabling Firestore network...");try{await Zw(W),console.log(" Firestore network disabled")}catch(t){console.error(" Failed to disable Firestore network:",t)}});window.addEventListener("unhandledrejection",t=>{var e,n,r,s,i,o;(((e=t.reason)==null?void 0:e.code)==="unavailable"||((n=t.reason)==null?void 0:n.code)==="failed-precondition"||(s=(r=t.reason)==null?void 0:r.message)!=null&&s.includes("ERR_ABORTED")||(o=(i=t.reason)==null?void 0:i.message)!=null&&o.includes("UNAVAILABLE"))&&(OD(t.reason),t.preventDefault())});console.log("Using Firebase Production Environment");const Vg=Object.freeze(Object.defineProperty({__proto__:null,auth:Xn,db:W,functions:hE,handleFirestoreError:OD,storage:d8},Symbol.toStringTag,{value:"Module"})),Le=t=>{if(t&&typeof t=="object"&&typeof t.toDate=="function")return t.toDate();if(t instanceof Date)return t;if(typeof t=="number")return new Date(t);if(typeof t=="string"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return new Date},m8=t=>{if(t===null)return!1;const e=Object.getPrototypeOf(t);return e===Object.prototype||e===null},Wu=t=>{if(t===void 0)return;if(t===null)return null;if(Array.isArray(t))return t.map(n=>Wu(n)).filter(n=>n!==void 0);if(t instanceof Date||!m8(t))return t;const e={};for(const[n,r]of Object.entries(t)){const s=Wu(r);s!==void 0&&(e[n]=s)}return e},Kh={async create(t){await qi(_e(W,"profiles",t.userId),{userId:t.userId,shopId:t.shopId,role:t.role,fullName:t.fullName,phone:t.phone,createdAt:Ae()})},async getById(t){const e=_e(W,"profiles",t),n=await gt(e);if(n.exists()){const r=n.data();return{userId:n.id,...r,createdAt:Le(r.createdAt)}}return null},async update(t,e){const n=_e(W,"profiles",t);await Ze(n,{...e,updatedAt:Ae()})},async getByShopId(t){const e=we(he(W,"profiles"),me("shopId","==",t));return(await be(e)).docs.map(r=>{const s=r.data();return{userId:r.id,...s,createdAt:Le(s.createdAt)}})}},Nv={async create(t){return(await ws(he(W,"referrals"),{...t,createdAt:Ae(),updatedAt:Ae()})).id},async getByReferrerId(t){try{const e=we(he(W,"referrals"),me("referrerId","==",t),ys("createdAt","desc"));return(await be(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:Le(r.data().createdAt),updatedAt:Le(r.data().updatedAt)}))}catch(e){if(String((e==null?void 0:e.message)||"").includes("requires an index")){const r=we(he(W,"referrals"),me("referrerId","==",t));return(await be(r)).docs.map(i=>({id:i.id,...i.data(),createdAt:Le(i.data().createdAt),updatedAt:Le(i.data().updatedAt)})).sort((i,o)=>{var a,l,c,d;return(((l=(a=o.createdAt)==null?void 0:a.getTime)==null?void 0:l.call(a))||0)-(((d=(c=i.createdAt)==null?void 0:c.getTime)==null?void 0:d.call(c))||0)})}throw e}},async getByReferralCode(t){const e=we(he(W,"referrals"),me("referralCode","==",t),Xo(1)),n=await be(e);if(n.empty)return null;const r=n.docs[0];return{id:r.id,...r.data(),createdAt:Le(r.data().createdAt),updatedAt:Le(r.data().updatedAt)}},async updateStatus(t,e){await Ze(_e(W,"referrals",t),{status:e,updatedAt:Ae()})},generateReferralCode(t){const e=Date.now().toString(36);return`REF_${t.slice(-6)}_${e}`.toUpperCase()}},VD={async getByUserId(t){const e=we(he(W,"profiles"),me("userId","==",t)),n=await be(e);if(!n.empty){const r=n.docs[0],s=r.data();return{userId:r.id,...s,createdAt:Le(s.createdAt),updatedAt:Le(s.updatedAt)}}return null},async update(t,e){const n=we(he(W,"profiles"),me("userId","==",t)),r=await be(n);if(!r.empty){const s=_e(W,"profiles",r.docs[0].id);await Ze(s,{...e,updatedAt:Ae()})}}},g8={async create(t){return(await ws(he(W,"merchantWallets"),{...t,transferLimit:t.transferLimit||2e5,withdrawLimit:t.withdrawLimit||2e5,transferUsage:t.transferUsage||0,withdrawUsage:t.withdrawUsage||0,createdAt:Ae(),updatedAt:Ae()})).id},async getByMerchantId(t){const e=we(he(W,"merchantWallets"),me("merchantUserId","==",t)),r=(await be(e)).docs.map(a=>{const l=a.data();return{id:a.id,...l,transferLimit:l.transferLimit||2e5,withdrawLimit:l.withdrawLimit||2e5,transferUsage:l.transferUsage||0,withdrawUsage:l.withdrawUsage||0,createdAt:Le(l.createdAt),updatedAt:Le(l.updatedAt)}});if(r.length>0)return r.sort((a,l)=>{const c=a.createdAt,d=l.createdAt;return c&&d?d.getTime()-c.getTime():c&&!d?-1:!c&&d?1:0});const s=we(he(W,"wallets"),me("userId","==",t));return(await be(s)).docs.map(a=>{const l=a.data();return{id:a.id,merchantUserId:l.userId||t,provider:l.provider||"instapay",msisdn:l.msisdn||"",label:l.name||l.label||"",isActive:l.isActive!==!1,dailyLimit:l.dailyLimit||2e5,monthlyLimit:l.monthlyLimit||2e5,transferLimit:l.transferLimit||l.monthlyTransferLimit||2e5,withdrawLimit:l.withdrawLimit||l.monthlyWithdrawLimit||2e5,transferUsage:l.transferUsage||l.monthlyTransferUsage||0,withdrawUsage:l.withdrawUsage||l.monthlyWithdrawUsage||0,dailyTransferLimit:l.dailyTransferLimit,dailyWithdrawLimit:l.dailyWithdrawLimit,createdAt:Le(l.createdAt),updatedAt:Le(l.updatedAt)}}).sort((a,l)=>{const c=a.createdAt,d=l.createdAt;return c&&d?d.getTime()-c.getTime():c&&!d?-1:!c&&d?1:0})},async getById(t){const e=_e(W,"merchantWallets",t),n=await gt(e);if(n.exists()){const r=n.data();return{id:n.id,...r,transferLimit:r.transferLimit||2e5,withdrawLimit:r.withdrawLimit||2e5,transferUsage:r.transferUsage||0,withdrawUsage:r.withdrawUsage||0,createdAt:Le(r.createdAt),updatedAt:Le(r.updatedAt)}}return null},async update(t,e){const n=_e(W,"merchantWallets",t);await Ze(n,{...e,updatedAt:Ae()})},async updateUsage(t,e,n){const r=_e(W,"merchantWallets",t),s={updatedAt:Ae()};e!==void 0&&(s.transferUsage=e),n!==void 0&&(s.withdrawUsage=n),await Ze(r,s)},async resetDailyUsage(t){const n=(await this.getByMerchantId(t)).map(r=>this.updateUsage(r.id,0,0));await Promise.all(n)},async reassignByMsisdns(t,e){try{if(!e)throw new Error("merchantUserId   ");if(!Array.isArray(t)||t.length===0)return{updated:0,failed:0};const r=((o,a)=>o.reduce((l,c,d)=>(d%a===0&&l.push(o.slice(d,d+a)),l),[]))(t.map(o=>o.trim()).filter(Boolean),10);let s=0,i=0;for(const o of r){const a=we(he(W,"merchantWallets"),me("msisdn","in",o)),c=(await be(a)).docs.map(async d=>{try{const h=d.data();if(h.merchantUserId&&h.merchantUserId!==e)return;await Ze(d.ref,{merchantUserId:e,updatedAt:Ae()}),s+=1}catch(h){console.error("Failed to reassign wallet",d.id,h),i+=1}});await Promise.allSettled(c)}return{updated:s,failed:i}}catch(n){return console.error("Error reassigning wallets by msisdns:",n),{updated:0,failed:t.length}}},async delete(t){const e=_e(W,"merchantWallets",t);await en(e)}},LD={async create(t){try{console.log("Creating transaction:",t);const{calculateCommission:e,calculateProfit:n}=await Oe(async()=>{const{calculateCommission:c,calculateProfit:d}=await Promise.resolve().then(()=>$8);return{calculateCommission:c,calculateProfit:d}},void 0,import.meta.url),r=t.commission!==void 0?t.commission:e(t.amount,t.txnType),s=n(t.amount,t.txnType),i=t.merchantUserId||t.createdBy;i||console.warn("   merchantUserId  createdBy         .");const o=Object.fromEntries(Object.entries(t).filter(([c,d])=>d!==void 0)),a={...o,merchantUserId:i,commission:r,profit:s,createdAt:o.createdAt?o.createdAt instanceof Date?o.createdAt:new Date(String(o.createdAt)):new Date,uploadedAt:Ae(),confirmedAt:o.confirmedAt?o.confirmedAt instanceof Date?o.confirmedAt:new Date(String(o.confirmedAt)):null},l=await ws(he(W,"transactions"),a);if(console.log("Transaction created with ID:",l.id,"Profit:",s),s>0){const{ProfitService:c}=await Oe(async()=>{const{ProfitService:d}=await import("./profitService-B_O8unCh.js").then(h=>h.p);return{ProfitService:d}},[],import.meta.url);c.addProfit(s),console.log("     :",s,"")}return await this.updateLineUsage(t.lineId,t.amount),l.id}catch(e){throw console.error("Error creating transaction:",e),e}},async updateLineUsage(t,e){try{console.log("Updating line usage:",{lineId:t,amount:e})}catch(n){console.error("Error updating line usage:",n)}},async getByShopId(t){const e=we(he(W,"transactions"),me("shopId","==",t),ys("createdAt","desc"));return(await be(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:Le(r.data().createdAt),confirmedAt:r.data().confirmedAt?Le(r.data().confirmedAt):void 0}))},async getByMerchantId(t){const e=we(he(W,"transactions"),me("merchantUserId","==",t),ys("createdAt","desc"));return(await be(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:Le(r.data().createdAt),confirmedAt:r.data().confirmedAt?Le(r.data().confirmedAt):void 0}))},async getByUserId(t){const e=we(he(W,"transactions"),me("merchantUserId","==",t)),n=we(he(W,"transactions"),me("userId","==",t)),[r,s]=await Promise.all([be(e),be(n)]),i=[...r.docs,...s.docs],o=new Set,a=[];for(const l of i){if(o.has(l.id))continue;o.add(l.id);const c=l.data();a.push({id:l.id,...c,createdAt:Le(c.createdAt),confirmedAt:c.confirmedAt?Le(c.confirmedAt):void 0})}return a.sort((l,c)=>{const d=l.createdAt,h=c.createdAt;return d&&h?h.getTime()-d.getTime():d&&!h?-1:!d&&h?1:0})},async updateStatus(t,e,n){const r=_e(W,"transactions",t);await Ze(r,{status:e,confirmedAt:n?n instanceof Date?n:new Date(String(n)):null})}},y8={async log(t,e,n,r,s){await ws(he(W,"auditLogs"),{actor:s,action:t,entity:e,entityId:n,meta:r,createdAt:Ae()})},async getLogs(t=100){const e=we(he(W,"auditLogs"),ys("createdAt","desc"),Xo(t));return(await be(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:Le(r.data().createdAt)}))},async getDeletedTransactions(){try{const t=we(he(W,"deletedTransactions"),ys("deletedAt","desc"));return(await be(t)).docs.map(n=>({id:n.id,...n.data(),deletedAt:Le(n.data().deletedAt)}))}catch(t){return console.error("Error getting deleted transactions:",t),[]}},async getDeletedTransactionsByUser(t){try{const e=we(he(W,"deletedTransactions"),me("userId","==",t),ys("deletedAt","desc"));return(await be(e)).docs.map(r=>({id:r.id,...r.data(),deletedAt:Le(r.data().deletedAt)})).filter(r=>(r==null?void 0:r.permanent)!==!0)}catch(e){if(String((e==null?void 0:e.message)||"").includes("requires an index"))try{const r=we(he(W,"deletedTransactions"),me("userId","==",t));return(await be(r)).docs.map(o=>({id:o.id,...o.data(),deletedAt:Le(o.data().deletedAt)})).filter(o=>(o==null?void 0:o.permanent)!==!0).sort((o,a)=>{const l=(o.deletedAt instanceof Date?o.deletedAt:new Date(o.deletedAt)).getTime();return(a.deletedAt instanceof Date?a.deletedAt:new Date(a.deletedAt)).getTime()-l})}catch(r){return console.error("Fallback error getting deleted transactions by user:",r),[]}return console.error("Error getting deleted transactions by user:",e),[]}},async saveDeletedTransaction(t){var e;try{if(console.log("      Firebase:",t.id),!t.userId)throw new Error("     ");if(!t.originalTransactionId)throw new Error("   ");const n=t.reference??t.transactionReference??((e=t.receipt)==null?void 0:e.reference),r={...t,deletedAt:Ae(),userId:t.userId,originalTransactionId:t.originalTransactionId,type:t.type||"unknown",amount:t.amount||0,status:t.status||"deleted",...n?{reference:n}:{}};console.log("    :",r);let s=3,i;for(;s>0;)try{const o=await ws(he(W,"deletedTransactions"),r);console.log("       :",o.id);return}catch(o){i=o,s--,console.warn(`       : ${s}`,o),s>0&&await new Promise(a=>setTimeout(a,1e3))}throw console.error("        "),i}catch(n){throw console.error("     :",n),n instanceof Error&&(n.message.includes("network")?console.error("    -    "):n.message.includes("permission")?console.error("    -    Firestore"):n.message.includes("quota")&&console.error("     -    Firebase")),n}},async permanentlyDeleteTransaction(t,e){try{const n=we(he(W,"deletedTransactions"),me("originalTransactionId","==",t),me("userId","==",e)),r=await be(n);r.empty?await ws(he(W,"deletedTransactions"),{userId:e,originalTransactionId:t,permanent:!0,deletedAt:Ae()}):await Promise.all(r.docs.map(s=>Ze(s.ref,{permanent:!0,deletedAt:Ae()}))),console.log("    :",t);try{const s=we(he(W,"userTransactions"),me("userId","==",e)),o=(await be(s)).docs.filter(a=>{var c,d;const l=a.data();return a.id===t||l.id===t||l.transactionId===t||l.originalTransactionId===t||((c=l.receipt)==null?void 0:c.id)===t||((d=l.receipt)==null?void 0:d.transactionId)===t});o.length>0&&(console.log(`  ${o.length}   userTransactions`),await Promise.all(o.map(a=>en(a.ref))))}catch(s){console.warn("   userTransactions   :",s)}try{const s=_e(W,"transactions",t);(await gt(s)).exists()&&(console.log("     transactions  "),await en(s));const o=we(he(W,"transactions"),me("transactionId","==",t)),a=await be(o);a.empty||(console.log(`  ${a.size}   transactions  transactionId`),await Promise.all(a.docs.map(d=>en(d.ref))));const l=we(he(W,"transactions"),me("originalTransactionId","==",t)),c=await be(l);c.empty||(console.log(`  ${c.size}   transactions  originalTransactionId`),await Promise.all(c.docs.map(d=>en(d.ref))));try{const d=we(he(W,"deletedTransactions"),me("userId","==",e),me("originalTransactionId","==",t)),h=await be(d),p=h.docs.map(E=>{var y;return String(((y=E.data())==null?void 0:y.reference)||"")}).filter(Boolean),f=h.docs.map(E=>{var y;return String(((y=E.data())==null?void 0:y.transactionId)||"")}).filter(Boolean);for(const E of p){const y=we(he(W,"transactions"),me("reference","==",E)),v=await be(y);v.empty||(console.log(`  ${v.size}   transactions  reference=${E}`),await Promise.all(v.docs.map(_=>en(_.ref))))}for(const E of f){try{const _=_e(W,"transactions",E);(await gt(_)).exists()&&(console.log("     transactions  :",E),await en(_))}catch{}const y=we(he(W,"transactions"),me("transactionId","==",E)),v=await be(y);v.empty||(console.log(`  ${v.size}   transactions  transactionId=${E}`),await Promise.all(v.docs.map(_=>en(_.ref))))}}catch{}}catch(s){console.warn("    transactions   :",s)}}catch(n){throw console.error("Error permanently deleting transaction:",n),n}}},v8={async add(t){return(await ws(he(W,"daily_reports_archive"),{userId:t.userId,reportDate:t.reportDate,totalTransactions:t.totalTransactions,totalAmount:t.totalAmount,totalWithdrawn:t.totalWithdrawn,totalSent:t.totalSent,profit:t.profit??null,walletId:t.walletId??null,createdAt:Ae()})).id},async getByUser(t,e=50){try{const n=we(he(W,"daily_reports_archive"),me("userId","==",t),Xo(e)),s=(await be(n)).docs.map(i=>({id:i.id,userId:String(i.data().userId),reportDate:String(i.data().reportDate),totalTransactions:Number(i.data().totalTransactions||0),totalAmount:Number(i.data().totalAmount||0),totalWithdrawn:Number(i.data().totalWithdrawn||0),totalSent:Number(i.data().totalSent||0),profit:i.data().profit!==void 0?Number(i.data().profit):void 0,walletId:i.data().walletId??null,createdAt:Le(i.data().createdAt)}));return s.sort((i,o)=>i.reportDate<o.reportDate?1:-1),s}catch(n){throw console.error("Error loading daily reports archive:",n),n}},async deleteOlderThan(t,e=10){try{const n=new Date;n.setDate(n.getDate()-e);const r=we(he(W,"daily_reports_archive"),me("userId","==",t)),s=await be(r);let i=0;for(const o of s.docs){const a=Le(o.data().createdAt);a&&a.getTime()<n.getTime()&&(await en(o.ref),i++)}return i>0&&console.log(`   ${i}      ${e}   ${t}`),i}catch(n){throw console.error("Error deleting old daily reports archive:",n),n}},async trimToMaxCount(t,e=10){try{const n=we(he(W,"daily_reports_archive"),me("userId","==",t)),s=(await be(n)).docs.map(o=>({ref:o.ref,reportDate:String(o.data().reportDate||""),createdAt:Le(o.data().createdAt)}));if(s.sort((o,a)=>{var d,h;if(o.reportDate&&a.reportDate)return o.reportDate<a.reportDate?1:-1;const l=((d=o.createdAt)==null?void 0:d.getTime())??0;return(((h=a.createdAt)==null?void 0:h.getTime())??0)-l}),s.length<=e)return 0;const i=s.slice(e);for(const o of i)await en(o.ref);return console.log(`     ${t}  ${e}   ${i.length}`),i.length}catch(n){throw console.error("Error trimming daily reports archive to max count:",n),n}}},MD={async getUserData(t){try{console.log("     :",{userId:t});const e=_e(W,"users",t),n=await gt(e);if(n.exists()){const r=n.data();return console.log("     :",r),{...r,createdAt:Le(r.createdAt),updatedAt:Le(r.updatedAt)}}else{console.log("       ");const r={walletBalances:{},createdAt:new Date,updatedAt:new Date};return await this.saveUserData(t,r),console.log("     "),r}}catch(e){return console.error("      :",e),{walletBalances:{},createdAt:new Date,updatedAt:new Date}}},async saveUserData(t,e){try{const n=_e(W,"users",t),r=Wu(e);await qi(n,{...r||{},updatedAt:Ae()},{merge:!0})}catch(n){throw console.error("Error saving user data:",n),n}},async updateUserData(t,e){try{console.log("      Firebase:",{userId:t,data:e});const n=_e(W,"users",t),r=Object.fromEntries(Object.entries(e).filter(([l,c])=>c!==void 0)),s=Wu(r);let i={};try{const l=await gt(n);i=l.exists()?l.data():{},console.log("  :",i)}catch(l){console.warn("         :",l)}const o={...i,...s,updatedAt:Ae()};console.log("   :",o);let a=3;for(;a>0;)try{await qi(n,o,{merge:!0}),console.log("     ");return}catch(l){if(a--,console.warn(`     : ${a}`,l),a===0)throw l;await new Promise(c=>setTimeout(c,1e3))}}catch(n){throw console.error("     :",n),n instanceof Error&&(n.message.includes("network")?console.error("    -    "):n.message.includes("permission")?console.error("    -    Firestore"):n.message.includes("quota")&&console.error("     -    Firebase")),n}},async getUserWallets(t){try{const e=await this.getUserData(t);return(e==null?void 0:e.wallets)||[]}catch(e){return console.error("Error getting user wallets:",e),[]}},async getUserTransactions(t){try{const e=we(he(W,"userTransactions"),me("userId","==",t));return(await be(e)).docs.map(s=>({id:s.id,...s.data(),createdAt:Le(s.data().createdAt)})).filter(s=>(s==null?void 0:s.status)!=="cancelled"&&!(s!=null&&s.isDeleted)).sort((s,i)=>{const o=s.createdAt?new Date(s.createdAt).getTime():0;return(i.createdAt?new Date(i.createdAt).getTime():0)-o})}catch(e){console.error("Error getting user transactions:",e);const n=(e==null?void 0:e.code)||"";if(n==="permission-denied"||n==="unauthenticated")throw e;return[]}},async saveUserTransaction(t,e){var n,r;try{const s=Object.fromEntries(Object.entries(e??{}).filter(([o,a])=>a!==void 0));try{const o=s.reference;if(o){const c=we(he(W,"deletedTransactions"),me("userId","==",t),me("reference","==",o));if(!(await be(c)).empty)return console.log("          ."),"skip-deleted"}{const c=we(he(W,"deletedTransactions"),me("userId","==",t),me("permanent","==",!0)),d=await be(c);if(!d.empty){const h=[s.id,s.transactionId,s.originalTransactionId,(n=s.receipt)==null?void 0:n.id,(r=s.receipt)==null?void 0:r.transactionId,s.reference,s.transactionReference].filter(f=>!!f).map(f=>String(f));if(d.docs.find(f=>{const E=f.data(),y=String(E.originalTransactionId||E.transactionId||f.id||""),v=String(E.reference||"");return y&&h.includes(y)||v&&h.includes(v)}))return console.log("        /   ."),"skip-deleted"}}const a=we(he(W,"deletedTransactions"),me("userId","==",t),ys("deletedAt","desc"),Xo(20)),l=await be(a);if(!l.empty){const c=s.senderMsisdn||s.senderPhone||s.sender_msisdn,d=s.receiverMsisdn||s.receiverPhone||s.receiver_msisdn,h=Number(s.amount||0),p=s.createdAt?new Date(String(s.createdAt)):new Date,f=10*60*1e3;if(l.docs.find(y=>{const v=y.data(),_=v.senderMsisdn||v.senderPhone||v.sender_msisdn,w=v.receiverMsisdn||v.receiverPhone||v.receiver_msisdn,I=Number(v.amount||0),D=v.createdAt?new Date(String(v.createdAt)):p;return Math.abs(D.getTime()-p.getTime())<=f&&I===h&&_===c&&w===d}))return console.log("        ."),"skip-deleted"}}catch(o){console.warn("           :",o)}try{const o=we(he(W,"userTransactions"),me("userId","==",t));if(s.transactionId){const y=we(he(W,"userTransactions"),me("userId","==",t),me("transactionId","==",s.transactionId)),v=await be(y);if(!v.empty){const _=v.docs[0];return await Ze(_e(W,"userTransactions",_.id),{...s,uploadedAt:Ae()}),_.id}}if(s.reference){const y=we(he(W,"userTransactions"),me("userId","==",t),me("reference","==",s.reference)),v=await be(y);if(!v.empty){const _=v.docs[0];return await Ze(_e(W,"userTransactions",_.id),{...s,uploadedAt:Ae()}),_.id}}const a=we(he(W,"userTransactions"),me("userId","==",t),ys("createdAt","desc"),Xo(20)),l=await be(a),c=s.senderMsisdn||s.senderPhone||s.sender_msisdn,d=s.receiverMsisdn||s.receiverPhone||s.receiver_msisdn,h=Number(s.amount||0),p=s.createdAt?new Date(String(s.createdAt)):new Date,f=5*60*1e3,E=l.docs.find(y=>{const v=y.data(),_=v.senderMsisdn||v.senderPhone||v.sender_msisdn,w=v.receiverMsisdn||v.receiverPhone||v.receiver_msisdn,I=Number(v.amount||0),D=Le(v.createdAt);return Math.abs(D.getTime()-p.getTime())<=f&&I===h&&_===c&&w===d});if(E)return await Ze(_e(W,"userTransactions",E.id),{...s,uploadedAt:Ae()}),E.id}catch(o){console.warn("      saveUserTransaction  :",o)}return(await ws(he(W,"userTransactions"),{...s,userId:t,createdAt:s.createdAt?s.createdAt instanceof Date?s.createdAt:new Date(String(s.createdAt)):Ae(),uploadedAt:Ae()})).id}catch(s){throw console.error("Error saving user transaction:",s),s}},async removeUserTransaction(t,e){try{console.log("     userTransactions:",{userId:t,transactionId:e});try{const o=_e(W,"userTransactions",e),a=await gt(o);if(a.exists()){const l=a.data();if([l==null?void 0:l.userId,l==null?void 0:l.merchantUserId,l==null?void 0:l.createdBy].map(d=>String(d||"")).includes(String(t))){console.log("    userTransactions  ( ):",e),await en(o),console.log("     userTransactions");return}else console.log("           ")}}catch(o){console.warn("     userTransactions   :",o)}const n=we(he(W,"userTransactions"),me("userId","==",t)),r=await be(n);console.log(`    ${r.docs.length}  `);const s=r.docs.filter(o=>{var h,p;const a=o.data(),l=o.id,d=[a.id===e,a.transactionId===e,l===e,a.originalTransactionId===e,((h=a.receipt)==null?void 0:h.transactionId)===e,((p=a.receipt)==null?void 0:p.id)===e].some(f=>f===!0);return d&&console.log("     :",{docId:l,dataId:a.id,transactionId:a.transactionId,originalTransactionId:a.originalTransactionId,searchingFor:e}),d}),i=[we(he(W,"userTransactions"),me("merchantUserId","==",t)),we(he(W,"userTransactions"),me("createdBy","==",t))];for(const o of i)try{const l=(await be(o)).docs.filter(c=>{var p,f;const d=c.data(),h=c.id;return d.id===e||d.transactionId===e||h===e||d.originalTransactionId===e||((p=d.receipt)==null?void 0:p.transactionId)===e||((f=d.receipt)==null?void 0:f.id)===e});l.length&&(console.log(`   ${l.length}       `),s.push(...l))}catch{}if(s.length>0){console.log(`   ${s.length}    `);const o=s.map(async a=>{try{console.log("   :",a.id),await en(a.ref)}catch(l){console.warn("     userTransactions ():",{id:a.id,error:l})}});await Promise.allSettled(o),console.log("        userTransactions:",e);try{const a=_e(W,"transactions",e);if((await gt(a)).exists())console.log("     transactions   "),await en(a);else{const c=we(he(W,"transactions"),me("transactionId","==",e)),d=await be(c);d.empty||(console.log(`   ${d.size}   transactions  transactionId `),await Promise.all(d.docs.map(f=>en(f.ref))));const h=we(he(W,"transactions"),me("originalTransactionId","==",e)),p=await be(h);p.empty||(console.log(`   ${p.size}   transactions  originalTransactionId `),await Promise.all(p.docs.map(f=>en(f.ref))))}}catch(a){console.warn("      transactions   :",a)}return}console.log("       userTransactions (   ):",e)}catch(n){console.error("      userTransactions ():",n);return}}},R7=Object.freeze(Object.defineProperty({__proto__:null,auditLogService:y8,dailyReportsArchiveService:v8,merchantWalletService:g8,profileService:Kh,profileServiceExtra:VD,referralService:Nv,sanitizeFirestoreData:Wu,transactionService:LD,userDataService:MD},Symbol.toStringTag,{value:"Module"}));var _8=(t=>(t.MONTHLY="monthly",t.QUARTERLY="quarterly",t.YEARLY="yearly",t.LIFETIME="lifetime",t.ZERO="zero",t))(_8||{});const w8=(t,e=new Date)=>{const n=new Date(e);switch(t){case"monthly":{const r=new Date(n);return r.setDate(r.getDate()+30),r}case"quarterly":{const r=new Date(n);return r.setDate(r.getDate()+90),r}case"yearly":{const r=new Date(n);return r.setDate(r.getDate()+365),r}case"lifetime":return null;case"zero":return null;default:return null}},Gh=t=>{var s,i;if(!t||!t.isActive)return!1;if(t.planType==="lifetime")return!0;if(!t.endDate){const o=new Date,a=t.activatedAt,l=(s=a==null?void 0:a.toDate)!=null&&s.call(a)?a.toDate():t.activatedAt?new Date(t.activatedAt):null;return l&&o.getTime()-l.getTime()<4*60*60*1e3,!0}const e=new Date,n=t.endDate,r=n!=null&&n.toDate?n.toDate():new Date(n);if(!r||isNaN(r.getTime())){const o=t.activatedAt,a=(i=o==null?void 0:o.toDate)!=null&&i.call(o)?o.toDate():t.activatedAt?new Date(t.activatedAt):null;return a&&e.getTime()-a.getTime()<4*60*60*1e3,!0}return e<=r},E8=t=>{if(!t||!t.isActive)return null;if(t.planType==="lifetime")return-1;if(!t.endDate)return null;const e=new Date,n=t.endDate,r=n!=null&&n.toDate?n.toDate():new Date(n);if(!r||isNaN(r.getTime()))return null;const s=r.getTime()-e.getTime(),i=Math.ceil(s/(1e3*60*60*24));return i>0?i:0},C7=async(t,e,n,r)=>{try{const s=new Date,i=w8(e,s),o={planType:e,startDate:s,endDate:i,isActive:!0,activatedBy:n,activatedAt:s};console.log(" Activating subscription for user:",{userId:t,planType:e,adminId:n,subscriptionData:o});const a=_e(W,"users",t);if(await Ze(a,{subscription:o,isActive:!0,approved:!0,isOnFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,updatedAt:new Date}),console.log(" Subscription data updated in Firestore"),typeof window<"u"){const l=new CustomEvent("subscriptionActivated",{detail:{userId:t,planType:e,timestamp:new Date().toISOString()}});window.dispatchEvent(l),console.log(" Subscription activation event dispatched:",{userId:t,planType:e});const c=new CustomEvent("userSubscriptionUpdated",{detail:{userId:t,planType:e,isActive:!0,timestamp:new Date().toISOString()}});window.dispatchEvent(c),console.log(" Global subscription update event dispatched")}console.log(`    ${e}  ${t}`)}catch(s){throw console.error("    :",s),new Error("   ")}},k7=async t=>{try{const e=_e(W,"users",t);await Ze(e,{"subscription.isActive":!1,isActive:!1,isOnFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,updatedAt:new Date}),console.log(`      ${t}`)}catch(e){throw console.error("     :",e),new Error("    ")}},D7=async t=>{try{const e=_e(W,"users",t),n=await gt(e);return n.exists()&&n.data().subscription||null}catch(e){return console.error("      :",e),null}},N7=t=>{switch(t){case"monthly":return"";case"quarterly":return" ";case"yearly":return"";case"lifetime":return" ";case"zero":return"";default:return" "}},O7=t=>{if(!t)return"text-gray-500";if(!t.isActive)return"text-red-500";if(t.planType==="lifetime")return"text-green-600";const e=E8(t);return e===null||e<=0?"text-red-500":e<=7?"text-yellow-500":"text-green-500"},V7=t=>t?(t instanceof Date?t:new Date(t)).toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric"}):" ";class fE{static async startFreeTrialFromAdmin(e){try{const n=_e(W,"users",e),r=await gt(n);if(!r.exists())return{success:!1,message:"  "};if(r.data().hasUsedFreeTrial)return{success:!1,message:"       "};const i=new Date,o=await this.getTrialDurationHours(),a=new Date(i.getTime()+o*60*60*1e3);return await Ze(n,{hasUsedFreeTrial:!0,freeTrialStartDate:i,freeTrialEndDate:a,isOnFreeTrial:!0,isActive:!0,approved:!0,updatedAt:Ae()}),{success:!0,message:`     ${o} ${o>=3&&o<=10?"":o===2?"":""}`}}catch(n){return console.error("Error starting admin free trial:",n),{success:!1,message:"     "}}}static async startFreeTrial(e){try{const n=_e(W,"users",e),r=await gt(n);if(!r.exists())return{success:!1,message:"  "};if(r.data().hasUsedFreeTrial)return{success:!1,message:"     "};const i=new Date,o=await this.getTrialDurationHours(),a=new Date(i.getTime()+o*60*60*1e3);return await Ze(n,{hasUsedFreeTrial:!0,freeTrialStartDate:i,freeTrialEndDate:a,isOnFreeTrial:!0,isActive:!0,approved:!0,updatedAt:Ae()}),{success:!0,message:`     ${o} ${o>=3&&o<=10?"":o===2?"":""}`}}catch(n){return console.error("    :",n),{success:!1,message:"     "}}}static async checkTrialValidity(e){var n,r,s,i;try{const o=_e(W,"users",e),a=await gt(o);if(!a.exists())return{isValid:!1,isExpired:!1,hoursRemaining:0,hasUsedTrial:!1};const l=a.data(),c=l.hasUsedFreeTrial||!1,d=l.isOnFreeTrial||!1;let h=(r=(n=l.freeTrialEndDate)==null?void 0:n.toDate)!=null&&r.call(n)?l.freeTrialEndDate.toDate():l.freeTrialEndDate?new Date(l.freeTrialEndDate):null;const p=(i=(s=l.freeTrialStartDate)==null?void 0:s.toDate)!=null&&i.call(s)?l.freeTrialStartDate.toDate():l.freeTrialStartDate?new Date(l.freeTrialStartDate):null;if(!c||!d||!h)return{isValid:!1,isExpired:!1,hoursRemaining:0,hasUsedTrial:c};const f=new Date;if(f>h){const _=Gh(l.subscription);return await Ze(o,{isOnFreeTrial:!1,isActive:_,approved:_,updatedAt:Ae()}),!_&&typeof window<"u"&&setTimeout(()=>{window.location.href="/user/pending-approval"},1e3),{isValid:!1,isExpired:!0,hoursRemaining:0,hasUsedTrial:c}}try{const _=await this.getTrialDurationHours();if(p&&_&&Number.isFinite(_)&&Math.round((h.getTime()-p.getTime())/36e5)<_){const I=new Date(p.getTime()+_*60*60*1e3);I.getTime()>h.getTime()&&(await Ze(o,{freeTrialEndDate:I,updatedAt:Ae()}),h=I)}}catch(_){console.warn("checkTrialValidity: failed to auto-extend to configured hours",_)}const y=h.getTime()-f.getTime();return{isValid:!0,isExpired:!1,hoursRemaining:Math.ceil(y/(1e3*3600)),hasUsedTrial:c}}catch(o){return console.error("      :",o),{isValid:!1,isExpired:!1,hoursRemaining:0,hasUsedTrial:!1}}}static async getTrialData(e){var n,r;try{const s=_e(W,"users",e),i=await gt(s);if(!i.exists())return{hasUsedFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,isOnFreeTrial:!1};const o=i.data();return{hasUsedFreeTrial:o.hasUsedFreeTrial||!1,freeTrialStartDate:((n=o.freeTrialStartDate)==null?void 0:n.toDate())||null,freeTrialEndDate:((r=o.freeTrialEndDate)==null?void 0:r.toDate())||null,isOnFreeTrial:o.isOnFreeTrial||!1}}catch(s){return console.error("      :",s),{hasUsedFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,isOnFreeTrial:!1}}}static async getTrialDurationHours(){try{const e=_e(W,"config","freeTrial"),n=await gt(e);if(n.exists()){const r=n.data(),s=typeof(r==null?void 0:r.durationHours)=="number"?r.durationHours:this.TRIAL_DURATION_HOURS;return!Number.isFinite(s)||s<1?this.TRIAL_DURATION_HOURS:s}return this.TRIAL_DURATION_HOURS}catch(e){return console.warn("getTrialDurationHours: fallback to default due to error",e),this.TRIAL_DURATION_HOURS}}static async updateTrialDurationHours(e){try{if(!Number.isFinite(e)||e<1)return{success:!1,message:"       "};const n=_e(W,"config","freeTrial");return await qi(n,{durationHours:e,updatedAt:Ae()},{merge:!0}),{success:!0,message:"     "}}catch(n){return console.error("Error updating trial duration hours:",n),{success:!1,message:"    "}}}static async resetActiveTrialToCurrentDuration(e){var n,r;try{const s=_e(W,"users",e),i=await gt(s);if(!i.exists())return{success:!1,message:"  "};const o=i.data(),a=!!o.isOnFreeTrial,l=(r=(n=o.freeTrialStartDate)==null?void 0:n.toDate)!=null&&r.call(n)?o.freeTrialStartDate.toDate():o.freeTrialStartDate?new Date(o.freeTrialStartDate):null;if(!a||!l)return{success:!1,message:"     "};const c=await this.getTrialDurationHours(),d=new Date(l.getTime()+c*60*60*1e3);return await Ze(s,{freeTrialEndDate:d,updatedAt:Ae()}),{success:!0,message:`     ${c} ${c>=3&&c<=10?"":c===2?"":""}`}}catch(s){return console.error("Error resetting active trial duration:",s),{success:!1,message:"    "}}}}e0(fE,"TRIAL_DURATION_HOURS",24);const L7=Object.freeze(Object.defineProperty({__proto__:null,FreeTrialService:fE},Symbol.toStringTag,{value:"Module"})),T8={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_VERSION:"0.0.0",VITE_DEV_MODE:"true",VITE_ENABLE_OFFLINE_PERSISTENCE:"false",VITE_FIREBASE_API_KEY:"AIzaSyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s",VITE_FIREBASE_APP_ID:"1:483702062341:web:b1ff06ad175cb7ae428b6c",VITE_FIREBASE_AUTH_DOMAIN:"voda-c6abd.firebaseapp.com",VITE_FIREBASE_AUTH_EMULATOR_URL:"http://localhost:9099",VITE_FIREBASE_FIRESTORE_EMULATOR_HOST:"localhost:8080",VITE_FIREBASE_FUNCTIONS_EMULATOR_HOST:"localhost:5001",VITE_FIREBASE_MEASUREMENT_ID:"G-CV6QGH7G7P",VITE_FIREBASE_MESSAGING_SENDER_ID:"483702062341",VITE_FIREBASE_PROJECT_ID:"voda-c6abd",VITE_FIREBASE_STORAGE_BUCKET:"voda-c6abd.appspot.com",VITE_FORCE_HASH_ROUTER:"true",VITE_SHOP_ID:"demo-shop-001",VITE_SHOP_NAME:"   ",VITE_SHOW_ENV_BANNER:"true",VITE_USE_EMULATORS:"false",VITE_USE_FIREBASE_EMULATOR:"false"},FD=b.createContext(void 0);function Hi(){const t=b.useContext(FD);if(t===void 0)throw new Error("useFirebaseAuth must be used within a FirebaseAuthProvider");return t}const I8=({children:t})=>{const[e,n]=b.useState(null),[r,s]=b.useState(null),[i,o]=b.useState(null),[a,l]=b.useState(!1),[c,d]=b.useState(!0),h=async S=>{var T,A,k,P,N,C,q,Z,ie,Q,F,U,Y,de,ne,ce;try{const le=_e(W,"profiles",S);let Te=!1;try{const ae=await lD(le);if(ae.exists()){const ye=ae.data(),Pe={userId:ae.id,shopId:ye.shopId,role:ye.role,fullName:ye.fullName,phone:ye.phone,shopName:ye.shopName||null,approved:ye.approved,avatarId:ye.avatarId,bridgeLink:ye.bridgeLink||null,bridgeDeviceId:ye.bridgeDeviceId||null,showWithdrawNote:ye.showWithdrawNote!==void 0?!!ye.showWithdrawNote:!0,isReceiptNoteEnabled:ye.isReceiptNoteEnabled!==void 0?!!ye.isReceiptNoteEnabled:!0,createdAt:((A=(T=ye.createdAt)==null?void 0:T.toDate)==null?void 0:A.call(T))||new Date,updatedAt:((P=(k=ye.updatedAt)==null?void 0:k.toDate)==null?void 0:P.call(k))||new Date,trialStarted:ye.trialStarted||!1,trialStartDate:(C=(N=ye.trialStartDate)==null?void 0:N.toDate)==null?void 0:C.call(N),trialEndDate:(Z=(q=ye.trialEndDate)==null?void 0:q.toDate)==null?void 0:Z.call(q),trialExpired:ye.trialExpired||!1};s(Pe),Te=!0,d(!1)}}catch(ae){console.log("Cache profile not available:",(ae==null?void 0:ae.code)||ae)}try{if(!Te){const ae=localStorage.getItem(`profile_cache_${S}`);if(ae){const ye=JSON.parse(ae);s(ye),Te=!0,d(!1)}}}catch{}if(!Te)for(let ae=0;ae<3;ae++)try{const ye=await gt(le);if(ye.exists()){const Pe=ye.data(),Tt={userId:ye.id,shopId:Pe.shopId,role:Pe.role,fullName:Pe.fullName,phone:Pe.phone,shopName:Pe.shopName||null,approved:Pe.approved,avatarId:Pe.avatarId,bridgeLink:Pe.bridgeLink||null,bridgeDeviceId:Pe.bridgeDeviceId||null,showWithdrawNote:Pe.showWithdrawNote!==void 0?!!Pe.showWithdrawNote:!0,isReceiptNoteEnabled:Pe.isReceiptNoteEnabled!==void 0?!!Pe.isReceiptNoteEnabled:!0,createdAt:((Q=(ie=Pe.createdAt)==null?void 0:ie.toDate)==null?void 0:Q.call(ie))||new Date,updatedAt:((U=(F=Pe.updatedAt)==null?void 0:F.toDate)==null?void 0:U.call(F))||new Date,trialStarted:Pe.trialStarted||!1,trialStartDate:(de=(Y=Pe.trialStartDate)==null?void 0:Y.toDate)==null?void 0:de.call(Y),trialEndDate:(ce=(ne=Pe.trialEndDate)==null?void 0:ne.toDate)==null?void 0:ce.call(ne),trialExpired:Pe.trialExpired||!1};s(Tt);try{localStorage.setItem(`profile_cache_${ye.id}`,JSON.stringify(Tt))}catch{}Te=!0,d(!1);break}}catch{}return sp(le,async ae=>{var ye,Pe,Tt,Nt,Kt,Bt,yn,Cr;if(ae.exists()){const ve=ae.data(),Qn={userId:ae.id,shopId:ve.shopId,role:ve.role,fullName:ve.fullName,phone:ve.phone,shopName:ve.shopName||null,approved:ve.approved,avatarId:ve.avatarId,bridgeLink:ve.bridgeLink||null,bridgeDeviceId:ve.bridgeDeviceId||null,showWithdrawNote:ve.showWithdrawNote!==void 0?!!ve.showWithdrawNote:!0,isReceiptNoteEnabled:ve.isReceiptNoteEnabled!==void 0?!!ve.isReceiptNoteEnabled:!0,createdAt:((Pe=(ye=ve.createdAt)==null?void 0:ye.toDate)==null?void 0:Pe.call(ye))||new Date,updatedAt:((Nt=(Tt=ve.updatedAt)==null?void 0:Tt.toDate)==null?void 0:Nt.call(Tt))||new Date,trialStarted:ve.trialStarted||!1,trialStartDate:(Bt=(Kt=ve.trialStartDate)==null?void 0:Kt.toDate)==null?void 0:Bt.call(Kt),trialEndDate:(Cr=(yn=ve.trialEndDate)==null?void 0:yn.toDate)==null?void 0:Cr.call(yn),trialExpired:ve.trialExpired||!1};s(Qn);try{localStorage.setItem(`profile_cache_${ae.id}`,JSON.stringify(Qn))}catch{}Te||(Te=!0,d(!1))}else if(!Te)try{const ve=await VD.getByUserId(S);if(ve){const Qn={userId:S,shopId:ve.shopId,role:ve.role||"user",fullName:ve.fullName||null,phone:ve.phone||null,shopName:ve.shopName||null,approved:ve.approved??!1,avatarId:ve.avatarId||void 0,bridgeLink:ve.bridgeLink||null,bridgeDeviceId:ve.bridgeDeviceId||null,createdAt:Ae(),updatedAt:Ae()};await qi(_e(W,"profiles",S),Qn,{merge:!0}),s({...ve,userId:S,createdAt:ve.createdAt||new Date,updatedAt:ve.updatedAt||new Date})}else await f(S)}catch(ve){console.error("Profile migration/create error:",ve)}finally{Te=!0,d(!1)}},ae=>{console.error("Profile listener error:",ae);try{d(!1)}catch{}})}catch(le){return console.error("Error setting up profile listener:",le),await f(S),d(!1),()=>{}}},p=async S=>{try{const T=_e(W,"users",S.uid);(await gt(T)).exists()?(await Ze(T,{lastLogin:Ae(),updatedAt:Ae()}),console.log(" ensureAdminUserDoc: Updated lastLogin for",S.uid)):(await qi(T,{email:S.email||"",displayName:S.displayName||" ",phone:null,shopName:null,isActive:!1,createdAt:Ae(),updatedAt:Ae(),lastLogin:Ae()},{merge:!0}),console.log(" ensureAdminUserDoc: Created users doc for",S.uid))}catch(T){console.error(" ensureAdminUserDoc error:",T)}},f=async(S,T,A,k,P)=>{var N,C;try{console.log("Creating default profile for user:",S);const q=Nv.generateReferralCode(S);let Z=null;const ie={userId:S,shopId:"default-shop",role:"user",fullName:T||" ",phone:A||null,shopName:k||null,approved:!1,referralCode:q,referredBy:P||null,bridgeLink:null,bridgeDeviceId:null,showWithdrawNote:!0,isReceiptNoteEnabled:!0,createdAt:new Date,updatedAt:new Date};s(ie),console.log("Created temporary profile:",ie);try{const{doc:Q,setDoc:F,serverTimestamp:U}=await Oe(async()=>{const{doc:ce,setDoc:le,serverTimestamp:Te}=await Promise.resolve().then(()=>Cg);return{doc:ce,setDoc:le,serverTimestamp:Te}},void 0,import.meta.url),{db:Y}=await Oe(async()=>{const{db:ce}=await Promise.resolve().then(()=>Vg);return{db:ce}},void 0,import.meta.url),de={email:((N=Xn.currentUser)==null?void 0:N.email)||"",displayName:T||" ",phone:A||null,shopName:k||null,isActive:!1,referralCode:q,referredBy:P||null,createdAt:U(),lastLogin:null,updatedAt:U()};if(console.log("Attempting to add user to admin collection with data:",de),await F(Q(Y,"users",S),de,{merge:!0}),console.log(" User successfully added to admin collection:",de),P)try{const{query:ce,collection:le,where:Te,limit:Qe,getDocs:ae}=await Oe(async()=>{const{query:Nt,collection:Kt,where:Bt,limit:yn,getDocs:Cr}=await Promise.resolve().then(()=>Cg);return{query:Nt,collection:Kt,where:Bt,limit:yn,getDocs:Cr}},void 0,import.meta.url),{db:ye}=await Oe(async()=>{const{db:Nt}=await Promise.resolve().then(()=>Vg);return{db:Nt}},void 0,import.meta.url),Pe=ce(le(ye,"users"),Te("referralCode","==",P),Qe(1)),Tt=await ae(Pe);Tt.empty?console.log(" Referral code not found in users collection:",P):(Z=Tt.docs[0].id,await Nv.create({referrerId:Z,referredUserId:S,referredUserEmail:((C=Xn.currentUser)==null?void 0:C.email)||"",referralCode:P,status:"completed"}),console.log(" Referral record created successfully for referrer:",Z))}catch(ce){console.error(" Error creating referral record:",ce)}const ne=await gt(Q(Y,"users",S));ne.exists()?console.log(" User document verified in Firestore:",ne.data()):console.log(" User document not found after creation")}catch(Q){console.error(" Error adding user to admin collection:",Q)}try{const{addDoc:Q,collection:F,serverTimestamp:U}=await Oe(async()=>{const{addDoc:le,collection:Te,serverTimestamp:Qe}=await Promise.resolve().then(()=>Cg);return{addDoc:le,collection:Te,serverTimestamp:Qe}},void 0,import.meta.url),{db:Y}=await Oe(async()=>{const{db:le}=await Promise.resolve().then(()=>Vg);return{db:le}},void 0,import.meta.url),ne=(await Q(F(Y,"shops"),{name:k||" ",ownerId:S,createdAt:U(),updatedAt:U(),isActive:!0})).id;await Kh.create({userId:S,shopId:ne,role:"user",fullName:" ",phone:null});try{await Kh.update(S,{referralCode:q,referredBy:Z||null,showWithdrawNote:!0,isReceiptNoteEnabled:!0})}catch(le){console.warn(" Failed to update profile with referral fields:",le)}const ce=await Kh.getById(S);ce&&(s(ce),console.log("Updated with Firebase profile:",ce))}catch(Q){console.error("Error creating profile:",Q),console.log("Using local profile - Firebase unavailable")}}catch(q){console.error("Error creating default profile:",q)}};b.useEffect(()=>{console.log(" Setting up auth state listener"),d(!0);const S=setTimeout(()=>{console.warn(" Global auth timeout reached, forcing loading to false"),d(!1)},2e4);localStorage.getItem("demoProfile")&&(console.log(" Cleaning up demo profile from localStorage"),localStorage.removeItem("demoProfile"));const T=localStorage.getItem("demoUser"),A=localStorage.getItem("demoProfile");if(T&&A){console.log(" Found demo user in localStorage");try{const P=JSON.parse(T),N=JSON.parse(A);n(P),s(N),clearTimeout(S),d(!1);return}catch(P){console.error("Error parsing demo user data:",P),localStorage.removeItem("demoUser"),localStorage.removeItem("demoProfile")}}const k=wj(Xn,async P=>{console.log(" Auth state changed:",{uid:P==null?void 0:P.uid,email:P==null?void 0:P.email,emailVerified:P==null?void 0:P.emailVerified,timestamp:new Date().toISOString()}),n(P),P?(console.log(" User authenticated, starting profile hydration for:",P.uid),h(P.uid),w(),p(P)):(console.log(" User not authenticated, clearing profile"),s(null),o(null),l(!1),d(!1)),clearTimeout(S)});return()=>{clearTimeout(S),k()}},[]);const E=async(S,T,A,k,P,N)=>{try{const C=(S||"").trim().toLowerCase(),q=(T||"").trim();console.log(" Attempting to sign up user:",C);const Z=await EI(Xn,C,q);console.log(" Sign up successful:",Z.user.uid),await f(Z.user.uid,A,k,P,N),await p(Z.user);try{await h(Z.user.uid),await w()}catch{}return{error:null}}catch(C){console.error(" Sign up error:",C);let q="    ";return C.code==="auth/email-already-in-use"?q="    ":C.code==="auth/weak-password"?q="   ":C.code==="auth/invalid-email"&&(q="   "),{error:{...C,message:q}}}},y=async(S,T)=>{const A=(S||"").trim().toLowerCase(),k=(T||"").trim();try{const P=F=>F.replace(/[\u200B\u200C\u200D\u200E\u200F\u061C]/g,""),N=F=>F.replace(/[-]/g,U=>String("0123456789"["".indexOf(U)])).replace(/[-]/g,U=>String("0123456789"["".indexOf(U)])),C=F=>F.replace(/[0-9]/g,U=>""[Number(U)]),q=F=>N(P(F));if(console.log(" Attempting to sign in user:",A),A==="test@example.com"&&k==="123456"){console.log(" Demo user login detected");const F={uid:"demo-user-123",email:"test@example.com",displayName:" ",emailVerified:!0},U={userId:"demo-user-123",shopId:"demo-shop",role:"user",fullName:" ",phone:"01000000000",approved:!0,createdAt:new Date,updatedAt:new Date};return localStorage.setItem("demoUser",JSON.stringify(F)),localStorage.setItem("demoProfile",JSON.stringify(U)),n(F),s(U),d(!1),console.log(" Demo user signed in successfully"),{error:null}}let Z;const ie=[q(k),P(k),C(P(k))];let Q=null;for(const F of ie)try{F!==k&&console.log(" Trying password variant"),Z=await vj(Xn,A,F);break}catch(U){if(Q=U,(U==null?void 0:U.code)!=="auth/wrong-password"&&(U==null?void 0:U.code)!=="auth/invalid-credential")throw U}if(!Z)throw Q||new Error("auth/invalid-credential");console.log(" Sign in successful:",Z.user.uid);try{if((await gt(_e(W,"deletedUsers",Z.user.uid))).exists())return console.log(" User is deleted, signing out"),await TI(Xn),{error:{code:"auth/user-deleted",message:"      .    ."}}}catch(F){console.error("Error checking deleted users:",F)}await p(Z.user);try{await h(Z.user.uid),await w()}catch{}return{error:null}}catch(P){if(console.error(" Sign in error:",P),A==="test@example.com"&&P.code==="auth/user-not-found"){console.log(" Creating test user...");try{const C=await EI(Xn,A,k);return console.log(" Test user created:",C.user.uid),await f(C.user.uid," ","01000000000"," "),{error:null}}catch(C){return console.error(" Error creating test user:",C),{error:C}}}let N="    ";return P.code==="auth/invalid-credential"?N="      ":P.code==="auth/user-not-found"?N="     ":P.code==="auth/wrong-password"?N="   ":P.code==="auth/too-many-requests"&&(N="      "),{error:{...P,message:N}}}},v=async()=>{try{localStorage.getItem("demoUser")?(console.log(" Signing out demo user"),localStorage.removeItem("demoUser"),localStorage.removeItem("demoProfile"),n(null),s(null),d(!1)):await TI(Xn);const A=(()=>{try{const k=typeof window<"u"?window:null,P=!!(k&&k.electronAPI)||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"),N=typeof window<"u"&&window.location.protocol==="file:",C=typeof window<"u"&&typeof window.location.hash=="string"&&window.location.hash.startsWith("#/");return P||N||C||typeof import.meta<"u"&&T8&&!0}catch{return!1}})()?"#/user/login":"/user/login";try{window.location.replace(A)}catch{window.location.href=A}}catch(S){console.error("Sign out error:",S)}},_=async S=>{try{return await yj(Xn,S),{error:null}}catch(T){console.error("Reset password error:",T);let A="        ";return T.code==="auth/user-not-found"?A="     ":T.code==="auth/invalid-email"&&(A="   "),{error:{...T,message:A}}}},w=async()=>{if(!e){console.log("No user found for subscription check"),o(null),l(!1);return}console.log("Checking subscription status for user:",e.uid);try{return sp(_e(W,"users",e.uid),async T=>{var A,k,P,N,C,q,Z,ie;if(T.exists()){const Q=T.data();o(Q),console.log(" Subscription Data Details (Real-time):",{userId:e.uid,userEmail:e.email,subscription:Q.subscription,subscriptionExists:!!Q.subscription,planType:(A=Q.subscription)==null?void 0:A.planType,isActive:(k=Q.subscription)==null?void 0:k.isActive,startDate:(P=Q.subscription)==null?void 0:P.startDate,endDate:(N=Q.subscription)==null?void 0:N.endDate,activatedBy:(C=Q.subscription)==null?void 0:C.activatedBy,activatedAt:(q=Q.subscription)==null?void 0:q.activatedAt,isOnFreeTrial:Q.isOnFreeTrial,freeTrialEndDate:Q.freeTrialEndDate,branchPackageStatus:(Z=Q==null?void 0:Q.branchPackage)==null?void 0:Z.status});const F=((ie=Q==null?void 0:Q.branchPackage)==null?void 0:ie.status)==="active";let U=!1;if(F)console.log(" Branch package is active, granting access"),U=!0;else if(Q.isOnFreeTrial){console.log(" User is on free trial, checking validity...");const Y=await fE.checkTrialValidity(e.uid);Y.isValid&&!Y.isExpired?(console.log(" Free trial is valid, granting access"),U=!0):Y.isExpired?(console.log(" Free trial has expired, checking regular subscription"),U=Gh(Q.subscription)):(console.log(" Free trial is not valid"),U=Gh(Q.subscription))}else U=Gh(Q.subscription);l(U),console.log(" Subscription Validation Result (Real-time):",{userId:e.uid,isValid:U,isOnFreeTrial:Q.isOnFreeTrial,hasActiveBranchPackage:F,reason:F?"Branch package active":Q.isOnFreeTrial?"Free trial active":Q.subscription?Q.subscription.isActive?Q.subscription.planType==="lifetime"?"Lifetime plan":Q.subscription.endDate?new Date>new Date(Q.subscription.endDate)?"Expired":"Valid":"No end date":"Subscription not active":"No subscription data"})}},T=>{console.error(" Subscription listener error:",T)})}catch(S){console.error("Error setting up subscription listener:",S)}},V={user:e,profile:r,userSubscription:i,isSubscriptionActive:a,loading:c,signUp:E,signIn:y,signOut:v,resetPassword:_,updateUserProfile:async S=>{if(e)try{const T={updatedAt:Ae()};if(S.fullName!==void 0&&(T.fullName=S.fullName),S.phone!==void 0&&(T.phone=S.phone),S.bridgeLink!==void 0){const A=(S.bridgeLink||"").trim();T.bridgeLink=A.length?A:null}if(S.bridgeDeviceId!==void 0){const A=(S.bridgeDeviceId||"").trim();T.bridgeDeviceId=A.length?A:null}S.showWithdrawNote!==void 0&&(T.showWithdrawNote=!!S.showWithdrawNote),S.isReceiptNoteEnabled!==void 0&&(T.isReceiptNoteEnabled=!!S.isReceiptNoteEnabled),await Ze(_e(W,"profiles",e.uid),T),await h(e.uid)}catch(T){console.error("Error updating user profile:",T)}},updateAvatarId:async S=>{if(e)try{await Ze(_e(W,"profiles",e.uid),{avatarId:S,updatedAt:Ae()}),await h(e.uid)}catch(T){console.error("Error updating avatarId:",T)}},refreshProfile:async()=>{if(e)try{console.log("Refreshing profile for user:",e.uid),await h(e.uid),await w()}catch(S){console.error("Error refreshing profile:",S)}},checkSubscriptionStatus:w};return x.jsx(FD.Provider,{value:V,children:t})},mh=()=>{const[t,e]=b.useState(""),[n,r]=b.useState(""),[s,i]=b.useState(!1),[o,a]=b.useState(!1),{signIn:l}=Hi(),c=sd();b.useEffect(()=>{try{const f=typeof window<"u"?window.localStorage.getItem("cashy:lastEmail"):null;f&&e(f)}catch{}},[]);const d=async f=>{if(f.preventDefault(),o){St.info("     ...");return}if(typeof navigator<"u"&&navigator.onLine===!1){St.error("   .      .");return}const E=(t||"").trim().toLowerCase(),y=(n||"").trim();if(console.log("    :",{email:E,password:"***"}),!t||!n){St.error("   ");return}if(!/^\S+@\S+\.\S+$/.test(E)){St.error("    ");return}a(!0);try{console.log("  signIn...");const{error:v}=await l(E,y);if(console.log(" SignIn result:",{error:v}),v){console.error("    :",v);const _=v==null?void 0:v.code;_==="auth/user-not-found"?St.error("     "):_==="auth/wrong-password"?St.error("   "):_==="auth/invalid-credential"?St.error("      "):_==="auth/too-many-requests"?St.error("      "):St.error((v==null?void 0:v.message)||"    ")}else console.log("    !"),St.success("   !"),c("/user/dashboard")}catch(v){console.error("   :",v),St.error("   ")}finally{a(!1)}},h=f=>{if(o){f.preventDefault(),f.stopPropagation(),St.info("     ...");return}if(typeof navigator<"u"&&navigator.onLine===!1){f.preventDefault(),f.stopPropagation(),St.error("   .      .");return}t||St.error("   "),n||St.error("   ");const E=(t||"").trim().toLowerCase();E&&!/^\S+@\S+\.\S+$/.test(E)&&St.error("    ")},p=()=>{c("/user/forgot-password")};return b.useEffect(()=>{if(!(typeof window<"u"&&window.matchMedia&&window.matchMedia("(pointer: coarse)").matches))return;const f=document.documentElement,E=document.body,y=f.style.overflow,v=E.style.overflow,_=f.style.overscrollBehaviorY,w=E.style.overscrollBehaviorY;return f.style.overflow="hidden",E.style.overflow="hidden",f.style.overscrollBehaviorY="none",E.style.overscrollBehaviorY="none",()=>{f.style.overflow=y||"",E.style.overflow=v||"",f.style.overscrollBehaviorY=_||"",E.style.overscrollBehaviorY=w||""}},[]),x.jsxs("div",{className:"fixed inset-0 relative overscroll-y-none overflow-hidden flex items-center justify-center p-4 bg-fixed bg-no-repeat bg-cover",style:{backgroundImage:"var(--bg-purple-gradient)"},children:[x.jsx("div",{className:"pointer-events-none absolute inset-0 bg-[radial-gradient(ellipse_at_center,_rgba(168,85,247,0.18),_transparent_70%)]"}),x.jsxs("div",{className:"w-full max-w-md mt-16 md:mt-12 lg:mt-10",children:[x.jsxs("div",{className:"text-center mb-8",children:[x.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-r from-green-600 to-blue-600 rounded-full mb-4 shadow-2xl",children:x.jsx(tL,{className:"w-10 h-10 text-white"})}),x.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[x.jsx("div",{className:"h-8 w-8 bg-red-600 rounded-lg flex items-center justify-center shadow",children:x.jsx("span",{className:"text-white font-bold text-sm",children:""})}),x.jsxs("div",{className:"flex items-center gap-1",children:[x.jsx(JV,{className:"h-5 w-5 text-white"}),x.jsx("span",{className:"text-xl font-bold text-white",children:" "})]})]}),x.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"  "}),x.jsx("p",{className:"text-white/80",children:"    "})]}),x.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-8 shadow-2xl border border-white/20",children:[x.jsxs("form",{onSubmit:d,className:"space-y-6",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-white",children:" "}),x.jsxs("div",{className:"relative",children:[x.jsx(_T,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/70 w-5 h-5"}),x.jsx(Ky,{id:"email",type:"email",placeholder:"  ",value:t,onChange:f=>{const E=f.target.value;e(E);try{window.localStorage.setItem("cashy:lastEmail",E)}catch{}},className:"pl-10 pr-4 py-3 rounded-lg bg-white/20 border-white/30 text-white placeholder:text-white/70 focus:ring-2 focus:ring-green-400",dir:"rtl",required:!0})]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-white",children:" "}),x.jsxs("div",{className:"relative",children:[x.jsx(QV,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/70 w-5 h-5"}),x.jsx(Ky,{id:"password",type:s?"text":"password",placeholder:"  ",value:n,onChange:f=>r(f.target.value),className:"pl-10 pr-10 py-3 rounded-lg bg-white/20 border-white/30 text-white placeholder:text-white/70 focus:ring-2 focus:ring-green-400",autoComplete:"off",dir:"rtl",required:!0}),x.jsx("button",{type:"button",onClick:()=>i(!s),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-white/70 hover:text-white transition-colors",children:s?x.jsx(HV,{className:"w-5 h-5"}):x.jsx(WV,{className:"w-5 h-5"})})]})]}),x.jsx("div",{className:"flex justify-end",children:x.jsxs(HP,{type:"button",variant:"ghost",size:"sm",onClick:p,className:"text-green-200 hover:text-green-100 p-0 h-auto font-normal hover:bg-transparent",children:[x.jsx(_T,{className:"w-4 h-4 ml-1"}),"  "]})}),x.jsx("button",{type:"submit",onClick:h,className:"w-full bg-gradient-to-r from-green-600 to-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:from-green-700 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-green-400 transition-all duration-200",children:o?x.jsxs("div",{className:"flex items-center justify-center",children:[x.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white ml-2"}),"  ..."]}):x.jsxs("div",{className:"flex items-center justify-center",children:[x.jsx(BV,{className:"w-5 h-5 ml-2"})," "]})})]}),x.jsxs("div",{className:"mt-6 text-center space-y-3",children:[x.jsxs("p",{className:"text-sm text-white/80",children:["  "," ",x.jsx(OU,{to:"/user/register",className:"text-green-200 hover:text-green-100 font-medium transition-colors hover:underline",children:"  "})]}),x.jsxs("p",{className:"text-sm text-white/80",children:["        "," ",x.jsx("a",{href:"https://wa.me/201000392539",target:"_blank",rel:"noreferrer",className:"text-green-200 hover:text-green-100 font-medium hover:underline",children:"01000392539"})," ","   "," ",x.jsx("a",{href:"mailto:info@cashy-link.com",className:"text-blue-200 hover:text-blue-100 font-medium hover:underline",children:"info@cashy-link.com"})]})]})]}),x.jsx("div",{className:"mt-6 text-center",children:x.jsx("p",{className:"text-xs text-white/70",children:"   "})})]})]})},S8=()=>{const t=sd(),e=ns(),{signOut:n,user:r}=Hi(),[s,i]=b.useState(!1),[o,a]=b.useState(!1),l=[{id:"home",label:"",icon:GV,path:"/user/dashboard",action:()=>{t("/user/dashboard"),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},100)}},{id:"debts",label:"",icon:KV,path:"/debts",action:()=>{t("/user/dashboard",{state:{openDebtDialog:!0}})}},{id:"transfer",label:"",icon:$V,path:"/transfer",action:()=>{t("/user/dashboard",{state:{openTransactionSection:!0,transactionType:"transfer",startNewTransaction:!0}})}},{id:"add",label:"",icon:wT,path:"/add",isSpecial:!0},{id:"withdraw",label:"",icon:jV,path:"/withdraw",action:()=>{t("/user/dashboard",{state:{openTransactionSection:!0,transactionType:"withdraw",startNewTransaction:!0}})}},{id:"transactions",label:"",icon:ag,path:"/transactions"},{id:"settings",label:"",icon:ET,path:"/profile-settings"}],c=[{id:"maintenance",label:"",icon:nL,action:()=>{i(!1),t("/user/dashboard",{state:{openMaintenanceDialog:!0}})},color:"#0EA5E9"},{id:"credit-cards",label:" ",icon:qV,action:()=>{i(!1),t("/user/dashboard",{state:{openCreditCardsDialog:!0}})},color:"#8B5CF6"},{id:"sales",label:"",icon:ZV,action:()=>{i(!1),t("/user/dashboard",{state:{openSalesDialog:!0}})},color:"#F59E0B"},{id:"shop-expenses",label:" ",icon:ag,action:()=>{i(!1),t("/user/dashboard",{state:{openShopExpensesDialog:!0}})},color:"#F97316"},{id:"deficiencies",label:"",icon:eL,action:()=>{i(!1),t("/user/dashboard",{state:{openDeficienciesDialog:!0}})},color:"#DB2777"},{id:"add-wallet",label:" ",icon:wT,action:()=>{i(!1),t("/user/add-wallet")},color:"#EF4444"},{id:"cashier-shift",label:" ",icon:zV,action:()=>{i(!1),t("/user/dashboard",{state:{openCashierShiftModal:!0}})},color:"#3B82F6"},{id:"contact",label:" ",icon:YV,action:()=>{i(!1);const E=`   
  : ${(r==null?void 0:r.email)||" "}`,y=encodeURIComponent(E);window.open(`https://wa.me/201000392539?text=${y}`,"_blank")},color:"#10B981"},{id:"logout",label:" ",icon:vT,action:async()=>{i(!1);try{await n(),t("/user/login",{replace:!0})}catch(f){console.error("Logout error:",f);try{t("/user/login",{replace:!0})}catch{}}},color:"#EF4444"}],d=[{id:"shop-expenses-settings",label:" ",icon:ag,action:()=>{a(!1),t("/user/dashboard",{state:{openShopExpensesDialog:!0}})},color:"#F97316"},{id:"profile-settings",label:"  ",icon:ET,action:()=>{a(!1),t("/profile-settings")},color:"#6366F1"},{id:"logout",label:" ",icon:vT,action:async()=>{a(!1);try{await n(),t("/user/login",{replace:!0})}catch(f){console.error("Logout error:",f);try{t("/user/login",{replace:!0})}catch{}}},color:"#EF4444"}],h=(f,E,y)=>{y?y():E&&f==="/add"?i(!s):E||t(f)},p=f=>e.pathname===f;return x.jsxs("div",{className:"mobile-bottom-nav",children:[s&&x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"quick-actions-overlay",onClick:()=>i(!1)}),x.jsx("div",{className:"floating-actions-container",children:c.map((f,E)=>x.jsxs("div",{className:"floating-action-button",onClick:f.action,style:{"--action-color":f.color,"--animation-delay":`${E*.1}s`},children:[x.jsx("div",{className:"floating-action-icon",style:{backgroundColor:f.color},children:x.jsx(f.icon,{className:"action-icon"})}),x.jsx("span",{className:"floating-action-label",children:f.label})]},f.id))})]}),o&&x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"quick-actions-overlay",onClick:()=>a(!1)}),x.jsx("div",{className:"floating-actions-container",children:d.map((f,E)=>x.jsxs("div",{className:"floating-action-button",onClick:f.action,style:{"--action-color":f.color,"--animation-delay":`${E*.1}s`},children:[x.jsx("div",{className:"floating-action-icon",style:{backgroundColor:f.color},children:x.jsx(f.icon,{className:"action-icon"})}),x.jsx("span",{className:"floating-action-label",children:f.label})]},f.id))})]}),x.jsx("nav",{className:"mobile-bottom-nav-container",children:l.map(f=>{const E=f.icon,y=p(f.path);return x.jsxs("button",{onClick:()=>h(f.path,f.isSpecial,f.action),className:`mobile-nav-item ${y?"active":""} ${f.isSpecial?"special":""}`,type:"button","aria-label":f.label,children:[x.jsx("div",{className:`nav-icon-container ${f.isSpecial?"special-icon":""} ${f.isSpecial&&f.id==="add"&&s?"special-open":""}`,children:x.jsx(E,{className:`nav-icon ${y?"active-icon":""} ${f.isSpecial?"special-icon-svg":""} ${f.isSpecial&&f.id==="add"&&s?"rotated":""} ${f.isSpecial&&f.id==="settings"&&o?"rotated":""}`})}),!f.isSpecial&&x.jsx("span",{className:`nav-label ${y?"active-label":""}`,children:f.label})]},f.id)})})]})},b8=()=>{const t=typeof window<"u"?window.electronAPI:void 0,e=!!t,[n,r]=z.useState(!1),[s,i]=z.useState(!1),o=async()=>{try{e&&t?await t.windowMinimize():console.info("windowMinimize (dev preview)")}catch(d){console.warn("failed to minimize",d)}},a=async()=>{try{e&&t?await t.windowClose():console.info("windowClose (dev preview)")}catch(d){console.warn("failed to close",d)}},l=async()=>{try{e&&t&&typeof t.windowReload=="function"?await t.windowReload():window.location.reload()}catch(d){console.warn("failed to refresh",d)}};return z.useEffect(()=>{if(!(!e||!t))try{t.onUpdateAvailable(()=>r(!0)),t.onUpdateDownloaded(()=>r(!0)),t.checkUpdate()}catch(d){console.warn("update init failed",d)}},[e,t]),e?x.jsxs("div",{className:"fixed top-2 right-2 z-[2000] flex items-center gap-2",style:{pointerEvents:"auto"},children:[x.jsx("button",{type:"button","aria-label":"",title:"",onClick:a,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-red-600 hover:bg-red-500/10 focus:outline-none dark:text-red-400 dark:hover:bg-red-400/10",children:x.jsx(Fx,{className:"w-5 h-5"})}),x.jsx("button",{type:"button","aria-label":"",title:" ",onClick:l,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-blue-600 hover:bg-blue-500/10 focus:outline-none dark:text-blue-400 dark:hover:bg-blue-400/10",children:x.jsx(Mx,{className:"w-5 h-5"})}),x.jsx("button",{type:"button","aria-label":"",title:"",onClick:o,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-gray-800 hover:bg-black/10 focus:outline-none dark:text-white/80 dark:hover:bg-white/10",children:x.jsx(XV,{className:"w-5 h-5"})})]}):null},gh=({className:t=""})=>{const[e,n]=b.useState("./logo.svg"),[r,s]=b.useState(0),i=b.useCallback(()=>{s(o=>{const a=o+1;return a===1?n("./logo.png"):a===2&&n("./placeholder.svg"),a})},[]);return x.jsx("div",{className:`min-h-screen bg-background flex items-center justify-center ${t}`,children:x.jsxs("div",{className:"flex flex-col items-center justify-center",children:[x.jsx("img",{src:e,alt:"logo",onError:i,className:"w-16 h-16 animate-spin",style:{animationDuration:"0.6s"}}),x.jsx("p",{className:"mt-3 text-base font-extrabold text-primary tracking-wide animate-pulse",style:{fontFamily:"'Tajawal','Cairo',sans-serif"},children:"  "})]})})};/*! Capacitor: https://capacitorjs.com/ - MIT License */var xl;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(xl||(xl={}));class Lg extends Error{constructor(e,n,r){super(e),this.message=e,this.code=n,this.data=r}}const A8=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},x8=t=>{const e=t.CapacitorCustomPlatform||null,n=t.Capacitor||{},r=n.Plugins=n.Plugins||{},s=()=>e!==null?e.name:A8(t),i=()=>s()!=="web",o=h=>{const p=c.get(h);return!!(p!=null&&p.platforms.has(s())||a(h))},a=h=>{var p;return(p=n.PluginHeaders)===null||p===void 0?void 0:p.find(f=>f.name===h)},l=h=>t.console.error(h),c=new Map,d=(h,p={})=>{const f=c.get(h);if(f)return console.warn(`Capacitor plugin "${h}" already registered. Cannot register plugins twice.`),f.proxy;const E=s(),y=a(h);let v;const _=async()=>(!v&&E in p?v=typeof p[E]=="function"?v=await p[E]():v=p[E]:e!==null&&!v&&"web"in p&&(v=typeof p.web=="function"?v=await p.web():v=p.web),v),w=(T,A)=>{var k,P;if(y){const N=y==null?void 0:y.methods.find(C=>A===C.name);if(N)return N.rtype==="promise"?C=>n.nativePromise(h,A.toString(),C):(C,q)=>n.nativeCallback(h,A.toString(),C,q);if(T)return(k=T[A])===null||k===void 0?void 0:k.bind(T)}else{if(T)return(P=T[A])===null||P===void 0?void 0:P.bind(T);throw new Lg(`"${h}" plugin is not implemented on ${E}`,xl.Unimplemented)}},I=T=>{let A;const k=(...P)=>{const N=_().then(C=>{const q=w(C,T);if(q){const Z=q(...P);return A=Z==null?void 0:Z.remove,Z}else throw new Lg(`"${h}.${T}()" is not implemented on ${E}`,xl.Unimplemented)});return T==="addListener"&&(N.remove=async()=>A()),N};return k.toString=()=>`${T.toString()}() { [capacitor code] }`,Object.defineProperty(k,"name",{value:T,writable:!1,configurable:!1}),k},D=I("addListener"),O=I("removeListener"),V=(T,A)=>{const k=D({eventName:T},A),P=async()=>{const C=await k;O({eventName:T,callbackId:C},A)},N=new Promise(C=>k.then(()=>C({remove:P})));return N.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await P()},N},S=new Proxy({},{get(T,A){switch(A){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return y?V:D;case"removeListener":return O;default:return I(A)}}});return r[h]=S,c.set(h,{name:h,proxy:S,platforms:new Set([...Object.keys(p),...y?[E]:[]])}),S};return n.convertFileSrc||(n.convertFileSrc=h=>h),n.getPlatform=s,n.handleError=l,n.isNativePlatform=i,n.isPluginAvailable=o,n.registerPlugin=d,n.Exception=Lg,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},P8=t=>t.Capacitor=x8(t),Se=P8(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),pE=Se.registerPlugin;class UD{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,n){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(n);const i=this.windowListeners[e];i&&!i.registered&&this.addWindowListener(i),r&&this.sendRetainedArgumentsForEvent(e);const o=async()=>this.removeListener(e,n);return Promise.resolve({remove:o})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,r){const s=this.listeners[e];if(!s){if(r){let i=this.retainedEventArguments[e];i||(i=[]),i.push(n),this.retainedEventArguments[e]=i}return}s.forEach(i=>i(n))}hasListeners(e){var n;return!!(!((n=this.listeners[e])===null||n===void 0)&&n.length)}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(e="not implemented"){return new Se.Exception(e,xl.Unimplemented)}unavailable(e="not available"){return new Se.Exception(e,xl.Unavailable)}async removeListener(e,n){const r=this.listeners[e];if(!r)return;const s=r.indexOf(n);this.listeners[e].splice(s,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(r=>{this.notifyListeners(e,r)}))}}const ab=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),lb=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class R8 extends UD{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[s,i]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=lb(s).trim(),i=lb(i).trim(),n[s]=i}),n}async setCookie(e){try{const n=ab(e.key),r=ab(e.value),s=`; expires=${(e.expires||"").replace("expires=","")}`,i=(e.path||"/").replace("path=",""),o=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${r||""}${s}; path=${i}; ${o};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}pE("CapacitorCookies",{web:()=>new R8});const C8=async t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const s=r.result;e(s.indexOf(",")>=0?s.split(",")[1]:s)},r.onerror=s=>n(s),r.readAsDataURL(t)}),k8=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(s=>s.toLocaleLowerCase()).reduce((s,i,o)=>(s[i]=t[e[o]],s),{})},D8=(t,e=!0)=>t?Object.entries(t).reduce((r,s)=>{const[i,o]=s;let a,l;return Array.isArray(o)?(l="",o.forEach(c=>{a=e?encodeURIComponent(c):c,l+=`${i}=${a}&`}),l.slice(0,-1)):(a=e?encodeURIComponent(o):o,l=`${i}=${a}`),`${r}&${l}`},"").substr(1):null,N8=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),s=k8(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(s.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[o,a]of Object.entries(t.data||{}))i.set(o,a);n.body=i.toString()}else if(s.includes("multipart/form-data")||t.data instanceof FormData){const i=new FormData;if(t.data instanceof FormData)t.data.forEach((a,l)=>{i.append(l,a)});else for(const a of Object.keys(t.data))i.append(a,t.data[a]);n.body=i;const o=new Headers(n.headers);o.delete("content-type"),n.headers=o}else(s.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class O8 extends UD{async request(e){const n=N8(e,e.webFetchExtra),r=D8(e.params,e.shouldEncodeUrlParams),s=r?`${e.url}?${r}`:e.url,i=await fetch(s,n),o=i.headers.get("content-type")||"";let{responseType:a="text"}=i.ok?e:{};o.includes("application/json")&&(a="json");let l,c;switch(a){case"arraybuffer":case"blob":c=await i.blob(),l=await C8(c);break;case"json":l=await i.json();break;case"document":case"text":default:l=await i.text()}const d={};return i.headers.forEach((h,p)=>{d[p]=h}),{data:l,headers:d,status:i.status,url:i.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}pE("CapacitorHttp",{web:()=>new O8});const Mg=768;function jD(){const[t,e]=b.useState(void 0);return b.useEffect(()=>{const n=window.matchMedia(`(max-width: ${Mg-1}px)`),r=()=>{e(window.innerWidth<Mg)};return n.addEventListener("change",r),e(window.innerWidth<Mg),()=>n.removeEventListener("change",r)},[]),!!t}function V8(){const t=jD(),[e,n]=b.useState("default"),[r,s]=b.useState(!1);return b.useEffect(()=>{const o=localStorage.getItem("notificationConsentRequested")==="true";if(s(o),o){const a=localStorage.getItem("notificationPermission");(a==="granted"||a==="denied"||a==="default")&&n(a);return}t&&typeof window<"u"&&("Notification"in window?Notification.requestPermission().then(a=>{n(a),localStorage.setItem("notificationPermission",a),localStorage.setItem("notificationConsentRequested","true"),s(!0)}).catch(()=>{n("default"),localStorage.setItem("notificationConsentRequested","true"),s(!0)}):(n("unsupported"),localStorage.setItem("notificationConsentRequested","true"),s(!0)))},[t]),{permission:e,hasRequested:r,requestConsent:async()=>{if(typeof window<"u"&&"Notification"in window){const o=await Notification.requestPermission();return n(o),localStorage.setItem("notificationPermission",o),localStorage.setItem("notificationConsentRequested","true"),s(!0),o}return"unsupported"}}}const cb=pE("AppLauncher",{web:()=>Oe(()=>import("./web-DFDqkOuH.js"),[],import.meta.url).then(t=>new t.AppLauncherWeb)});function L8(t,e){if(!t||!t.trim())throw new Error("USSD code is required");const n=`tel:${t.replace(/#/g,"%23")}`,s=`cashy://ussd?code=${t.replace(/#/g,"%23")}${e?`&sim=${e}`:""}`;let i=!1;try{Se&&Se.getPlatform()!=="web"&&(cb.openUrl({url:s}),i=!0)}catch{}if(!i)try{window.location.href=s,i=!0}catch{}if(!i){try{window.location.href=n}catch{}try{Se&&Se.getPlatform()!=="web"&&cb.openUrl({url:n})}catch{}}}function BD(t,e){const n=String(t||"").replace(/\D/g,""),r=Math.round(Number(e||0));return!n||n.length!==11||!n.startsWith("01")||!r||r<=0?null:n.startsWith("010")?`*9*7*${n}*${r}#`:n.startsWith("011")?`*323*${n}*${r}#`:n.startsWith("012")?`*115*1*${n}*${r}#`:n.startsWith("015")?`*322*${n}*${r}#`:null}function M8(t,e,n){const r=String(t||"").replace(/\D/g,""),s=String(e||"").replace(/\D/g,""),i=Math.round(Number(n||0));return!s||s.length!==11||!s.startsWith("01")||!i||i<=0?null:!r||!r.startsWith("01")?BD(s,i):r.startsWith("010")?`*9*7*${s}*${i}#`:r.startsWith("011")?`*323*${s}*${i}#`:r.startsWith("012")?`*115*1*${s}*${i}#`:r.startsWith("015")?`*322*${s}*${i}#`:null}function M7(t,e,n){const r=BD(t,e),s=String(n||"").replace(/\D/g,"");return!r||!s?r:`${r.endsWith("#")?r.slice(0,-1):r}*${s}#`}function F8(t){const e=String(t||"").replace(/\D/g,"");return e.startsWith("010")?"vodafone":e.startsWith("011")?"etisalat":e.startsWith("012")?"orange":e.startsWith("015")?"we":null}function U8(t){const e=F8(t),n=e?`simSlot_${e}`:"simSlot_default";try{if(localStorage.getItem(n)==="sim2")return"sim2"}catch{}return"sim1"}function F7(t,e,n){const r=M8(t,e,n);if(!r)throw new Error("Unsupported network or invalid sender/receiver/amount");const s=U8(t||e);L8(r,s)}async function j8(t,e="Cashy"){if(!t||!t.trim())throw new Error("Notification message is required");try{if(typeof Notification<"u"&&(Notification.permission==="granted"?"granted":await Notification.requestPermission())==="granted"){new Notification(e||"Cashy",{body:t});return}typeof window<"u"&&typeof alert=="function"?alert(`${e||"Cashy"}
${t}`):console.log(`[${e||"Cashy"}] ${t}`)}catch(n){console.warn("Notification not available:",n)}}function mE(t,e){return e==="send"?0:Math.round(t*.01*100)/100}function B8(t,e,n=0){const r=mE(t,e),s=Math.max(0,r-n);return Math.round(s*100)/100}const $8=Object.freeze(Object.defineProperty({__proto__:null,calculateCommission:mE,calculateProfit:B8},Symbol.toStringTag,{value:"Module"})),z8=t=>t==="withdraw"||t==="receive"?"receive":"send",q8=async t=>{if(!t)return null;const e=we(he(W,"transactions"),me("reference","==",t),Xo(1)),n=await be(e);return n.empty?null:n.docs[0].id},H8=async t=>{if(!t||!t.shopId||!t.lineId||!t.provider)throw new Error("   :   shopId  lineId  provider");if(!t.amount||t.amount<=0)throw new Error("     ");const e=await q8(t.reference);if(e)return{id:e,duplicate:!0};const n=z8(t.type),r={shopId:t.shopId,lineId:t.lineId,merchantUserId:t.merchantUserId||t.createdBy,walletId:t.walletId,provider:t.provider,txnType:n,amount:t.amount,fee:void 0,commission:void 0,profit:0,reference:t.reference,senderMsisdn:t.senderMsisdn,receiverMsisdn:t.receiverMsisdn,note:t.note,status:"confirmed",createdBy:t.createdBy,createdAt:new Date,confirmedAt:new Date},s=await LD.create(r);try{const i="  ",o=`: ${t.type} | : ${t.amount} | : ${t.provider}`;await j8(o,i)}catch(i){console.warn("   :",i)}try{const i=t.merchantUserId||t.createdBy;if(i){const o=n==="receive"?"withdraw":"send",a=mE(t.amount,n);await MD.saveUserTransaction(i,{type:o,amount:t.amount,commission:a,status:"confirmed",createdAt:new Date,senderMsisdn:t.senderMsisdn,receiverMsisdn:t.receiverMsisdn,walletId:t.walletId,lineId:t.lineId,provider:t.provider,note:t.note,transactionId:s})}else console.warn("    :   userId (merchantUserId  createdBy)  .")}catch(i){console.warn("      userTransactions   :",i)}return{id:s,duplicate:!1}};function W8(t){let e=0;for(let n=0;n<t.length;n++)e=Math.imul(31,e)+t.charCodeAt(n)|0;return"SMS_"+Math.abs(e).toString(36)}function K8(t){const e=t.toLowerCase();return e.includes("")||e.includes("withdraw")?"withdraw":(e.includes("")||e.includes("transfer")||e.includes(" "),"transfer")}function G8(t){const n=t.replace(/,/g,"").match(/(\d{1,9}(?:\.\d{1,2})?)/);return n?parseFloat(n[1]):null}function Q8(t){const e=t.match(/01\d{9}/);return e?e[0]:void 0}function Y8(t){const e=t.toLowerCase();if(e.includes("")||e.includes("vodafone"))return"vodafone_cash";if(e.includes("")||e.includes("orange"))return"orange_cash";if(e.includes("")||e.includes("etisalat"))return"etisalat_cash";if(e.includes("instapay")||e.includes(" ")||e.includes(""))return"instapay"}function X8(t={}){if(typeof window>"u")return()=>{};const e=t.createdBy||"mobile_sms_bridge",n=async r=>{const i=r.detail||{};try{let o=null;if(i&&i.payload)o=i.payload,o.shopId=o.shopId||t.shopId,o.lineId=o.lineId||t.lineId,o.provider=o.provider||t.provider,o.createdBy=o.createdBy||e;else if(i&&i.text){const l=i.text,c=K8(l),d=G8(l),h=c==="transfer"?Q8(l):void 0,p=Y8(l)||t.provider;if(!t.shopId||!t.lineId||!p){console.warn("SMS integration missing identifiers. Provide shopId, lineId, provider in initSmsIntegration."),St.warning("   SMS   (  )");return}o={type:c,amount:d||0,provider:p,shopId:t.shopId,lineId:t.lineId,receiverMsisdn:h,reference:i.reference||W8(l),createdBy:e,note:"Parsed from SMS"}}if(!o)return;if((await H8(o)).duplicate)St.info("      SMS");else{const l=o.type==="withdraw"?"":"";St.success(`  ${l}    SMS`)}}catch(o){console.error("Failed to process mobile SMS notification:",o),St.error("     SMS")}};return window.addEventListener("mobileSmsReceived",n),()=>window.removeEventListener("mobileSmsReceived",n)}async function J8(t,e="android",n){var l,c,d,h,p;const r=n||((l=Xn.currentUser)==null?void 0:l.uid)||"";if(!r)throw new Error("  userId   ");const s=(d=(c=import.meta)==null?void 0:c.env)==null?void 0:d.VITE_PUSH_REGISTER_ENDPOINT,i=(p=(h=import.meta)==null?void 0:h.env)==null?void 0:p.VITE_PUSH_NOTIFICATIONS_API_KEY,o={userId:r,platform:e,token:t};if(s){const f=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json",...i?{Authorization:`Bearer ${i}`}:{}},body:JSON.stringify(o)});if(f.ok)return f.json()}const a=await fetch("/api/devices/save-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!a.ok)throw new Error(`  : ${a.status}`);return a.json()}async function Z8(t,e="android",n){return await fD(hE,"saveDeviceToken")({token:t,platform:e,userId:n})}async function U7(t,e=" ",n="    50 ",r={type:"transfer",amount:"50",txId:"12345"}){const i=await fD(hE,"sendFcmToUser")({userId:t,title:e,body:n,data:r});return(i==null?void 0:i.data)??i}function $D(){if(typeof window>"u")return()=>{};const t=async e=>{var n;try{const r=e.detail||window.__fcmToken||"";if(!r)return;const s=((n=Xn.currentUser)==null?void 0:n.uid)||"";if(!s){console.warn("FCM bridge:           ");return}try{await Z8(r,"android",s)}catch{await J8(r,"android",s)}console.log("    FCM  :",s)}catch(r){console.error("    FCM  :",r)}};window.addEventListener("fcm-token",t);try{const e=window.__fcmToken;e&&t(new CustomEvent("fcm-token",{detail:e}))}catch{}return()=>{window.removeEventListener("fcm-token",t)}}async function e7(){var t,e,n;try{if(!(Se!=null&&Se.isNativePlatform))return!1;const r=Se.getPlatform();if(localStorage.getItem("nativePushRequested")==="true")return!1;const i=((t=Se.Plugins)==null?void 0:t.PushNotifications)||window.PushNotifications;if(!i){if(typeof window<"u"&&"Notification"in window&&typeof Notification.requestPermission=="function")try{await Notification.requestPermission()}catch{}return localStorage.setItem("nativePushRequested","true"),!1}try{await((e=i.requestPermissions)==null?void 0:e.call(i))}catch{}try{await((n=i.register)==null?void 0:n.call(i))}catch{}return localStorage.setItem("nativePushRequested","true"),!0}catch{return!1}}const t7={},ub=z.lazy(()=>Oe(()=>import("./Index-DimwVPoh.js"),[],import.meta.url)),yh=z.lazy(()=>Oe(()=>import("./LandingPage--QYxjMjz.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]),import.meta.url)),db=z.lazy(()=>Oe(()=>import("./SubscriptionsPage-C_rB61ao.js"),__vite__mapDeps([14,1,4,15,16,7,8,6,13]),import.meta.url)),hb=z.lazy(()=>Oe(()=>import("./AuthPage-CN0RUqUg.js"),__vite__mapDeps([17,1,5,2,3,9]),import.meta.url)),vh=z.lazy(()=>Oe(()=>import("./TopUpPage-F75GJEz-.js"),__vite__mapDeps([18,1,19,20,21]),import.meta.url)),fb=z.lazy(()=>Oe(()=>import("./AdminTopupsPage-Csh67C00.js"),__vite__mapDeps([22,19,20,21]),import.meta.url)),pb=z.lazy(()=>Oe(()=>import("./AdminNotificationsPage-B1NBvUYi.js"),__vite__mapDeps([23,1,24,25,26]),import.meta.url)),_h=z.lazy(()=>Oe(()=>import("./UserRegisterPage-E9aNRuc9.js"),__vite__mapDeps([27,1,24,28,29,30,31,32,33]),import.meta.url)),mb=z.lazy(()=>Oe(()=>import("./UserAccountSetupPage-KeMd32sY.js"),__vite__mapDeps([34,1,24,28,33,32,13]),import.meta.url)),gb=z.lazy(()=>Oe(()=>import("./ForgotPasswordCodePage-DSVCzZDj.js"),[],import.meta.url)),yb=z.lazy(()=>Oe(()=>import("./DashboardLoginPage-CDsJWVSV.js"),__vite__mapDeps([35,1,11]),import.meta.url)),vb=z.lazy(()=>Oe(()=>import("./ProtectedDashboard-bQU-7R7U.js"),__vite__mapDeps([36,1,37,19,20,21,38,24,39,11,40,41,29,13,42]),import.meta.url)),Sc=z.lazy(()=>Oe(()=>import("./ProtectedUserDashboard-1TifHx97.js"),__vite__mapDeps([43,44,26,38,24,39,20,11,40]),import.meta.url)),_b=z.lazy(()=>Oe(()=>import("./MerchantDashboard-SKL08lXg.js"),__vite__mapDeps([45,46,19,20,21,47,37,48,39,1,49,24,50,51]),import.meta.url)),wb=z.lazy(()=>Oe(()=>import("./PendingApprovalPage-8v6Z0sco.js"),__vite__mapDeps([52,1,4,40,11,53,13,54]),import.meta.url)),Eb=z.lazy(()=>Oe(()=>import("./AdminLogin-DnxwhLXv.js"),__vite__mapDeps([55,11]),import.meta.url)),Tb=z.lazy(()=>Oe(()=>import("./ProtectedAdminDashboard-Disl1chM.js"),__vite__mapDeps([56,15,3,57,46,19,20,21,47,39,24,38,11,40,58,1,25,59,28,37,60,4,54,32,61,44,16,10,53,8,5,62,9,13,42]),import.meta.url)),Ib=z.lazy(()=>Oe(()=>import("./AuthTestPage-CekhG04G.js"),__vite__mapDeps([63,1,24]),import.meta.url)),Sb=z.lazy(()=>Oe(()=>import("./ProfileSettingsPage-D_NtquRo.js"),__vite__mapDeps([64,1,24,58,5,65,38,39,20,11,40,51,59,21,6,31,61,8,54]),import.meta.url)),bb=z.lazy(()=>Oe(()=>import("./TransactionsPage-CUJ1ehEV.js"),__vite__mapDeps([66,1,39,20,19,21,37,47,67,60,38,24,11,40,4,49,13,9,16,68,41,6,42]),import.meta.url)),Ab=z.lazy(()=>Oe(()=>import("./WalletAdditionPage-1pmhgLFJ.js"),__vite__mapDeps([69,1,24,19,20,21,50,6,29,32,40]),import.meta.url)),xb=z.lazy(()=>Oe(()=>import("./ReferralsPage-Dl_XhO-U.js"),__vite__mapDeps([70,1,37,28,31,26,13,61,53,62,30,42]),import.meta.url)),Pb=z.lazy(()=>Oe(()=>import("./CPanelPage-EtXtcc0B.js"),__vite__mapDeps([71,1,24,39,20]),import.meta.url)),Rb=z.lazy(()=>Oe(()=>import("./CPanelLoginPage-dXkG_Lpb.js"),__vite__mapDeps([72,24,1,11]),import.meta.url)),Cb=z.lazy(()=>Oe(()=>import("./NotFound-Bj5VUxFw.js"),[],import.meta.url)),kb=z.lazy(()=>Oe(()=>import("./SmsHookBridge-jY94oCML.js"),[],import.meta.url)),n7=new D4,r7=()=>{if(!((Se==null?void 0:Se.isNativePlatform)&&Se.getPlatform()==="android"))return null;const e=()=>{try{window.location.reload()}catch{}};return x.jsx("div",{className:"fixed top-2 right-2 z-[2000] flex items-center gap-2",style:{pointerEvents:"auto"},children:x.jsx("button",{type:"button","aria-label":"",title:" ",onClick:e,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-blue-600 hover:bg-blue-500/10 focus:outline-none dark:text-blue-400 dark:hover:bg-blue-400/10",children:x.jsx(Mx,{className:"w-5 h-5"})})})},Db=()=>{const t=ns(),{user:e,loading:n}=Hi(),r=(Se==null?void 0:Se.isNativePlatform)&&Se.getPlatform()==="android",s=t.pathname.startsWith("/user/dashboard"),i=r&&t.pathname==="/",o=!!e&&(s||i);return n?null:o?x.jsx(S8,{}):null},Nb=()=>{const t=jD(),{profile:e}=Hi(),n=ns(),{toast:r}=ox();return V8(),b.useEffect(()=>{e7()},[]),b.useEffect(()=>{const s=$D(),i=n.pathname.startsWith("/user/dashboard");if(t&&(e!=null&&e.shopId)&&i){const o=X8({shopId:e.shopId,createdBy:e.userId});return()=>{try{o()}catch{}try{s()}catch{}}}return()=>{try{s()}catch{}}},[t,e==null?void 0:e.shopId,n.pathname]),b.useEffect(()=>{if(!t)return;const s=document.createElement("style");s.setAttribute("data-disable-pull-to-refresh","true"),s.textContent="html, body { overscroll-behavior-y: contain; touch-action: pan-y; }",document.head.appendChild(s);let i=0,o=null;const a=c=>{var d,h;i=((h=(d=c.touches)==null?void 0:d[0])==null?void 0:h.clientY)||0,o=c.target},l=c=>{var v,_;const d=((_=(v=c.touches)==null?void 0:v[0])==null?void 0:_.clientY)||0,h=document.scrollingElement||document.documentElement,p=h.scrollTop||window.scrollY||0,f=h.scrollHeight-h.clientHeight||0,E=o||null,y=(()=>{let w=E;for(;w&&w!==document.body;){const D=window.getComputedStyle(w).overflowY;if((D==="auto"||D==="scroll")&&w.scrollHeight>w.clientHeight)return!0;w=w.parentElement}return!1})();!y&&p<=0&&d>i&&c.cancelable&&c.preventDefault(),!y&&p>=f&&d<i&&c.cancelable&&c.preventDefault()};return document.addEventListener("touchstart",a,{passive:!0}),document.addEventListener("touchmove",l,{passive:!1}),()=>{document.removeEventListener("touchstart",a),document.removeEventListener("touchmove",l);try{document.head.removeChild(s)}catch{}}},[t]),b.useEffect(()=>{if(!((Se==null?void 0:Se.isNativePlatform)&&Se.getPlatform()==="android"))return;let i=!1;return(async()=>{try{const o="0.0.0",a=await fetch("https://cashy-link.com/mobile_version.json",{cache:"no-store"});if(!a.ok)throw new Error("   ");const l=await a.json(),c=String((l==null?void 0:l.version)||"0.0.0"),d=l!=null&&l.url?String(l.url).trim():void 0;if(!i&&d&&((p,f)=>{const E=p.split(".").map(v=>parseInt(v,10)||0),y=f.split(".").map(v=>parseInt(v,10)||0);for(let v=0;v<Math.max(E.length,y.length);v++){const _=E[v]||0,w=y[v]||0;if(_>w)return 1;if(_<w)return-1}return 0})(c,o)>0){try{r({title:"  ",description:` ${c}       `})}catch{}try{window.open(d,"_blank")}catch{}}}catch(o){console.warn("   :",o)}})(),()=>{i=!0}},[]),b.useEffect(()=>{const s=(Se==null?void 0:Se.isNativePlatform)&&Se.getPlatform()==="android",i=typeof window<"u"&&(window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"));if(s||i)return;let o=!1;return(async()=>{try{const a="0.0.0",l=await fetch("https://cashy-link.com/desktop_version.json",{cache:"no-store"});if(!l.ok)return;const c=await l.json(),d=String((c==null?void 0:c.version)||"0.0.0"),h=!!(c!=null&&c.force);if(!o&&((f,E)=>{const y=String(f).split(".").map(_=>parseInt(_,10)||0),v=String(E).split(".").map(_=>parseInt(_,10)||0);for(let _=0;_<Math.max(y.length,v.length);_++){const w=y[_]||0,I=v[_]||0;if(w>I)return 1;if(w<I)return-1}return 0})(d,a)>0){if(h){try{window.location.reload()}catch{}return}try{r({title:"  ",description:` ${d}      `})}catch{}}}catch{}})(),()=>{o=!0}},[]),null},Ob=()=>ns().pathname.startsWith("/user/dashboard")?x.jsxs(x.Fragment,{children:[x.jsx(FL,{}),x.jsx(_M,{})]}):null,s7=()=>x.jsx(O4,{client:n7,children:x.jsx(LU,{children:x.jsxs(i4,{children:[typeof window<"u"&&(window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"))&&!(Se!=null&&Se.isNativePlatform&&Se.getPlatform()==="android")&&x.jsx(b8,{}),x.jsx(r7,{}),typeof window<"u"&&(window.electronAPI||window.location.protocol==="file:"||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron")||typeof window.location.hash=="string"&&window.location.hash.startsWith("#/")||typeof import.meta<"u"&&t7)?x.jsxs(kU,{children:[x.jsx(Nb,{}),x.jsx(Ob,{}),x.jsxs(b.Suspense,{fallback:x.jsx(gh,{}),children:[null,x.jsxs(ZT,{children:[x.jsx(se,{path:"/",element:Se!=null&&Se.isNativePlatform&&Se.getPlatform()==="android"?z.createElement(()=>{const{user:e,loading:n}=Hi();return n?z.createElement(gh):e?z.createElement(Sc):z.createElement(mh)}):x.jsx(yh,{})}),x.jsx(se,{path:"/dashboard-redirect",element:x.jsx(ub,{})}),x.jsx(se,{path:"/landing",element:x.jsx(yh,{})}),x.jsx(se,{path:"/subscriptions",element:x.jsx(db,{})}),x.jsx(se,{path:"/auth",element:x.jsx(hb,{})}),x.jsx(se,{path:"/sms-hook",element:x.jsx(kb,{})}),x.jsx(se,{path:"/user/login",element:x.jsx(mh,{})}),x.jsx(se,{path:"/user/forgot-password",element:x.jsx(gb,{})}),x.jsx(se,{path:"/user/register",element:x.jsx(_h,{})}),x.jsx(se,{path:"/register",element:x.jsx(_h,{})}),x.jsx(se,{path:"/user/account-setup",element:x.jsx(mb,{})}),x.jsx(se,{path:"/user/pending-approval",element:x.jsx(wb,{})}),x.jsx(se,{path:"/user/dashboard",element:x.jsx(Sc,{})}),x.jsx(se,{path:"/branch/:shopId/dashboard",element:x.jsx(Sc,{})}),x.jsx(se,{path:"/user/add-wallet",element:x.jsx(Ab,{})}),x.jsx(se,{path:"/admin/login",element:x.jsx(Eb,{})}),x.jsx(se,{path:"/admin/dashboard",element:x.jsx(Tb,{})}),x.jsx(se,{path:"/admin/topups",element:x.jsx(fb,{})}),x.jsx(se,{path:"/admin/notifications",element:x.jsx(pb,{})}),x.jsx(se,{path:"/profile-settings",element:x.jsx(Sb,{})}),x.jsx(se,{path:"/transactions",element:x.jsx(bb,{})}),x.jsx(se,{path:"/referrals",element:x.jsx(xb,{})}),x.jsx(se,{path:"/cpanel",element:x.jsx(Pb,{})}),x.jsx(se,{path:"/cpanel/login",element:x.jsx(Rb,{})}),x.jsx(se,{path:"/auth-test",element:x.jsx(Ib,{})}),x.jsx(se,{path:"/topup",element:x.jsx(vh,{})}),x.jsx(se,{path:"/recharge",element:x.jsx(vh,{})}),x.jsx(se,{path:"/merchant/*",element:x.jsx(_b,{})}),x.jsx(se,{path:"/dashboard/login",element:x.jsx(yb,{})}),x.jsx(se,{path:"/dashboard",element:x.jsx(vb,{})}),x.jsx(se,{path:"*",element:x.jsx(Cb,{})})]})]}),x.jsx(Db,{})]}):x.jsxs(CU,{children:[x.jsx(Nb,{}),x.jsx(Ob,{}),x.jsxs(b.Suspense,{fallback:x.jsx(gh,{}),children:[null,x.jsxs(ZT,{children:[x.jsx(se,{path:"/",element:Se!=null&&Se.isNativePlatform&&Se.getPlatform()==="android"?z.createElement(()=>{const{user:e,loading:n}=Hi();return n?z.createElement(gh):e?z.createElement(Sc):z.createElement(mh)}):x.jsx(yh,{})}),x.jsx(se,{path:"/dashboard-redirect",element:x.jsx(ub,{})}),x.jsx(se,{path:"/landing",element:x.jsx(yh,{})}),x.jsx(se,{path:"/subscriptions",element:x.jsx(db,{})}),x.jsx(se,{path:"/auth",element:x.jsx(hb,{})}),x.jsx(se,{path:"/sms-hook",element:x.jsx(kb,{})}),x.jsx(se,{path:"/user/login",element:x.jsx(mh,{})}),x.jsx(se,{path:"/user/forgot-password",element:x.jsx(gb,{})}),x.jsx(se,{path:"/user/register",element:x.jsx(_h,{})}),x.jsx(se,{path:"/register",element:x.jsx(_h,{})}),x.jsx(se,{path:"/user/account-setup",element:x.jsx(mb,{})}),x.jsx(se,{path:"/user/pending-approval",element:x.jsx(wb,{})}),x.jsx(se,{path:"/user/dashboard",element:x.jsx(Sc,{})}),x.jsx(se,{path:"/user/add-wallet",element:x.jsx(Ab,{})}),x.jsx(se,{path:"/admin/login",element:x.jsx(Eb,{})}),x.jsx(se,{path:"/admin/dashboard",element:x.jsx(Tb,{})}),x.jsx(se,{path:"/admin/topups",element:x.jsx(fb,{})}),x.jsx(se,{path:"/admin/notifications",element:x.jsx(pb,{})}),x.jsx(se,{path:"/profile-settings",element:x.jsx(Sb,{})}),x.jsx(se,{path:"/transactions",element:x.jsx(bb,{})}),x.jsx(se,{path:"/referrals",element:x.jsx(xb,{})}),x.jsx(se,{path:"/cpanel",element:x.jsx(Pb,{})}),x.jsx(se,{path:"/cpanel/login",element:x.jsx(Rb,{})}),x.jsx(se,{path:"/auth-test",element:x.jsx(Ib,{})}),x.jsx(se,{path:"/topup",element:x.jsx(vh,{})}),x.jsx(se,{path:"/recharge",element:x.jsx(vh,{})}),x.jsx(se,{path:"/merchant/*",element:x.jsx(_b,{})}),x.jsx(se,{path:"/dashboard/login",element:x.jsx(yb,{})}),x.jsx(se,{path:"/dashboard",element:x.jsx(vb,{})}),x.jsx(se,{path:"*",element:x.jsx(Cb,{})})]})]}),x.jsx(Db,{})]})]})})}),zD=b.createContext(void 0),i7=({children:t})=>{const[e,n]=b.useState(null),[r,s]=b.useState(!1),[i,o]=b.useState(null),{profile:a,user:l}=Hi();b.useEffect(()=>{try{const p=localStorage.getItem("cashier_shift_user"),f=localStorage.getItem("cashier_shift_active"),E=localStorage.getItem("cashier_shift_start_at");p&&n(JSON.parse(p)),f&&s(f==="true"),E&&o(Number(E))}catch{}},[]),b.useEffect(()=>{if(!(a!=null&&a.shopId))return;const p=_e(W,"cashierShift",a.shopId);let f=null;return(async()=>{try{(await gt(p)).exists()||await qi(p,{isShiftActive:!1,shiftStartAt:null,shiftUser:null}),f=sp(p,y=>{if(y.exists()){const v=y.data(),_=(v==null?void 0:v.shiftUser)||null,w=!!(v!=null&&v.isShiftActive),I=(v==null?void 0:v.shiftStartAt)??null;let D=_;if(!D)try{const O=localStorage.getItem("cashier_shift_user"),V=O?JSON.parse(O):null;V&&(D=V)}catch{}n(D),s(w),o(typeof I=="number"?I:I?Number(I):null);try{D?localStorage.setItem("cashier_shift_user",JSON.stringify(D)):localStorage.removeItem("cashier_shift_user"),localStorage.setItem("cashier_shift_active",w?"true":"false"),I!=null&&localStorage.setItem("cashier_shift_start_at",String(I))}catch{}}},y=>{console.warn("cashierShift snapshot error:",y)})}catch(E){console.warn("Failed to init cashierShift doc:",E)}})(),()=>{f&&f()}},[a==null?void 0:a.shopId]);const c=p=>{n(p);try{p?localStorage.setItem("cashier_shift_user",JSON.stringify(p)):localStorage.removeItem("cashier_shift_user")}catch{}try{if(a!=null&&a.shopId){const f=_e(W,"cashierShift",a.shopId);Ze(f,{shiftUser:p||null})}}catch{}},d=()=>{s(!0);try{localStorage.setItem("cashier_shift_active","true")}catch{}const p=Date.now();o(p);try{localStorage.setItem("cashier_shift_start_at",String(p))}catch{}try{if(a!=null&&a.shopId){const f=_e(W,"cashierShift",a.shopId);Ze(f,{isShiftActive:!0,shiftStartAt:p})}}catch{}try{const E=`cashBalance_${(l==null?void 0:l.uid)||"default"}`,y=`userCashBalance_${(l==null?void 0:l.uid)||"default"}`,v=`walletBalances_${(l==null?void 0:l.uid)||"default"}`;let _=localStorage.getItem(E);if(_==null){const I=localStorage.getItem(y);if(I!=null){_=I;try{localStorage.setItem(E,I),localStorage.removeItem(y)}catch{}}}if(_==null&&(l!=null&&l.uid)){const I=localStorage.getItem("cashBalance"),D=localStorage.getItem("userCashBalance");if(I!=null){try{localStorage.setItem(E,I),localStorage.removeItem("cashBalance")}catch{}_=I}else if(D!=null){try{localStorage.setItem(E,D),localStorage.removeItem("userCashBalance")}catch{}_=D}}const w=localStorage.getItem(v);_?localStorage.setItem("shiftStartDrawerFunds",_):localStorage.setItem("shiftStartDrawerFunds","0"),w?localStorage.setItem("shiftStartWalletBalances",w):localStorage.setItem("shiftStartWalletBalances","{}")}catch{}try{a!=null&&a.shopId&&(async()=>{try{const f=_e(W,"dashboardData",a.shopId),E=await gt(f);if(E.exists()){const y=E.data(),v=Number((y==null?void 0:y.cashBalance)??0),_=(y==null?void 0:y.walletBalances)??{};try{const w=localStorage.getItem("shiftStartDrawerFunds"),I=localStorage.getItem("shiftStartWalletBalances"),D=w?parseFloat(w):0,O=I?JSON.parse(I):{},V=!w||!Number.isFinite(D)||D===0,S=!I||Object.keys(O||{}).length===0;V&&localStorage.setItem("shiftStartDrawerFunds",String(Number.isFinite(v)?v:0)),S&&localStorage.setItem("shiftStartWalletBalances",JSON.stringify(_||{}))}catch{}}}catch(f){console.warn("Shift start Firebase read failed:",f)}})()}catch{}},h=()=>{s(!1);try{localStorage.setItem("cashier_shift_active","false")}catch{}try{if(a!=null&&a.shopId){const p=_e(W,"cashierShift",a.shopId);Ze(p,{isShiftActive:!1})}}catch{}};return x.jsx(zD.Provider,{value:{shiftUser:e,isShiftActive:r,shiftStartAt:i,setShiftUser:c,startShift:d,endShift:h},children:t})},j7=()=>{const t=b.useContext(zD);if(!t)throw new Error("useShift must be used within ShiftProvider");return t},qD=b.createContext(void 0);function o7({children:t}){const{profile:e,user:n,loading:r}=Hi(),[s,i]=b.useState(null),[o,a]=b.useState(null),[l,c]=b.useState(!0);b.useEffect(()=>{if(!r&&e){const h=e!=null&&e.userId?`selectedShopId_${e.userId}`:n!=null&&n.uid?`selectedShopId_${n==null?void 0:n.uid}`:"selectedShopId";let p=null;try{p=localStorage.getItem(h)||null}catch{}i(p||e.shopId),a((e==null?void 0:e.shopName)||(n==null?void 0:n.displayName)||""),c(!1)}else r||c(!1)},[e,r]),b.useEffect(()=>{const h=()=>{const f=e!=null&&e.userId?`selectedShopId_${e.userId}`:n!=null&&n.uid?`selectedShopId_${n==null?void 0:n.uid}`:"selectedShopId";try{const E=localStorage.getItem(f);i(E||((e==null?void 0:e.shopId)??null))}catch{}};window.addEventListener("selectedShopIdChanged",h);const p=f=>{const E=e!=null&&e.userId?`selectedShopId_${e.userId}`:n!=null&&n.uid?`selectedShopId_${n==null?void 0:n.uid}`:"selectedShopId";if(!(!f.key||f.key!==E))try{const y=localStorage.getItem(E);i(y||((e==null?void 0:e.shopId)??null))}catch{}};return window.addEventListener("storage",p),()=>{window.removeEventListener("selectedShopIdChanged",h),window.removeEventListener("storage",p)}},[e==null?void 0:e.userId,n==null?void 0:n.uid,e==null?void 0:e.shopId]);const d={shopId:s,shopName:o,loading:l};return x.jsx(qD.Provider,{value:d,children:t})}function B7(){const t=b.useContext(qD);return t===void 0?{shopId:null,shopName:null,loading:!1}:t}try{const t=navigator.userAgent||navigator.vendor||"",e=/iPad|iPhone|iPod/.test(t),n=document.documentElement;n&&(n.classList.toggle("ios",e),n.classList.toggle("android",!e))}catch{}try{$D()}catch{}const a7=()=>{const{theme:t="system"}=Qx();return b.useEffect(()=>{try{const e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,n=t==="system"?e?"dark":"light":t;document.documentElement.setAttribute("data-theme",n||"light"),document.documentElement.classList.toggle("dark",n==="dark")}catch{}},[t]),null};ix(document.getElementById("root")).render(x.jsx(BL,{attribute:"class",defaultTheme:"system",enableSystem:!0,storageKey:"theme",children:x.jsx(I8,{children:x.jsx(i7,{children:x.jsxs(o7,{children:[x.jsx(s7,{}),x.jsx(a7,{})]})})})}));export{UD as $,BV as A,HP as B,zV as C,Gh as D,HV as E,fE as F,vj as G,qi as H,Ky as I,ot as J,gt as K,OU as L,YV as M,y7 as N,Ze as O,U7 as P,o8 as Q,z as R,JV as S,P7 as T,tL as U,A7 as V,x7 as W,Nv as X,Ds as Y,Vx as Z,ns as _,sd as a,Oi as a$,je as a0,Sp as a1,XO as a2,Cn as a3,Ct as a4,Ir as a5,fV as a6,Ni as a7,ZV as a8,Oe as a9,DF as aA,Ml as aB,E7 as aC,zO as aD,B7 as aE,R9 as aF,y8 as aG,KV as aH,nL as aI,en as aJ,_7 as aK,Qx as aL,BD as aM,XV as aN,N7 as aO,O7 as aP,V7 as aQ,E8 as aR,M7 as aS,L8 as aT,cP as aU,d7 as aV,UF as aW,cx as aX,jF as aY,BF as aZ,ax as a_,Kh as aa,j7 as ab,jD as ac,Se as ad,vT as ae,$V as af,lD as ag,gh as ah,ET as ai,ZT as aj,se as ak,b7 as al,d8 as am,me as an,g8 as ao,wT as ap,qV as aq,D7 as ar,C_ as as,fx as at,wf as au,R_ as av,c7 as aw,Fx as ax,MD as ay,C9 as az,v7 as b,gV as b0,td as b1,ag as b2,jV as b3,T7 as b4,eL as b5,k7 as b6,tA as b7,LD as b8,B8 as b9,KO as ba,MU as bb,g7 as bc,v8 as bd,M8 as be,F7 as bf,Cg as bg,Vg as bh,R7 as bi,L7 as bj,ox as c,Xn as d,he as e,W as f,be as g,fD as h,hE as i,x as j,ws as k,Xo as l,_T as m,QV as n,ys as o,WV as p,we as q,b as r,Ae as s,yj as t,Hi as u,_e as v,sp as w,St as x,C7 as y,_8 as z};
